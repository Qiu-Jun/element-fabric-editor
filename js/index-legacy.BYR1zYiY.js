System.register(["./usePageList-legacy.miBtOs9y.js","./index-legacy.BbwjHLUW.js"],(function(e,t){"use strict";var i,n,r,o,a,s,l,c,u,d,h,p,f,g,v,m,A,b,y,x,w,_,C,k,E,S,I,B,O,T,D,M,Q,L,j,P,F,R,z,N,V,U,H,G,Y,W,X,$,q,K,J,Z,ee,te,ie,ne,re,oe,ae,se,le,ce,ue,de,he,pe,fe,ge,ve,me,Ae,be,ye,xe,we,_e,Ce,ke,Ee,Se,Ie,Be,Oe,Te,De,Me,Qe,Le,je,Pe,Fe,Re,ze,Ne,Ve,Ue,He,Ge,Ye,We,Xe,$e,qe,Ke,Je,Ze,et,tt,it,nt,rt,ot,at,st,lt,ct,ut,dt,ht,pt,ft,gt,vt,mt,At,bt,yt,xt,wt,_t,Ct,kt,Et,St,It,Bt,Ot,Tt,Dt,Mt,Qt,Lt,jt,Pt,Ft,Rt,zt,Nt,Vt,Ut,Ht,Gt,Yt,Wt,Xt,$t,qt,Kt,Jt,Zt,ei,ti,ii,ni,ri,oi,ai,si,li,ci,ui,di,hi,pi,fi,gi,vi,mi,Ai,bi,yi,xi,wi,_i,Ci,ki,Ei,Si,Ii,Bi,Oi,Ti,Di,Mi,Qi,Li,ji,Pi,Fi,Ri,zi,Ni,Vi,Ui,Hi,Gi,Yi,Wi,Xi,$i,qi,Ki,Ji,Zi,en,tn,nn,rn,on,an,sn,ln,cn,un,dn,hn,pn,fn,gn,vn,mn,An,bn,yn,xn,wn,_n,Cn,kn,En,Sn,In,Bn,On,Tn,Dn,Mn,Qn,Ln,jn,Pn,Fn,Rn,zn,Nn,Vn,Un,Hn,Gn,Yn,Wn,Xn,$n,qn,Kn,Jn,Zn,er,tr,ir,nr,rr,or,ar,sr,lr,cr,ur,dr,hr,pr,fr,gr,vr,mr,Ar,br,yr,xr,wr,_r,Cr,kr,Er,Sr,Ir,Br,Or,Tr;return{setters:[e=>{i=e.t,n=e.W,r=e.i,o=e.b,a=e.c,s=e.s,l=e.a,c=e.d,u=e.e,d=e.o,h=e.f,p=e.g,f=e.h,g=e.k,v=e.j,m=e.l,A=e.m,b=e.n,y=e.p,x=e.q,w=e.r,_=e.U,C=e.u,k=e.v,E=e.w,S=e.S,I=e.x,B=e.y,O=e.z,T=e.A,D=e.B,M=e.C,Q=e.D,L=e.E,j=e.F,P=e.G,F=e.H,R=e.I,z=e.J,N=e.K,V=e.L,U=e.M,H=e.N,G=e.O,Y=e.P,W=e.Q,X=e.R,$=e.T,q=e.V,K=e.X,J=e.Y,Z=e.Z,ee=e._,te=e.$,ie=e.a0,ne=e.a1,re=e.a2,oe=e.a3,ae=e.a4,se=e.a5,le=e.a6,ce=e.a7,ue=e.a8,de=e.a9,he=e.aa,pe=e.ab,fe=e.ac,ge=e.ad,ve=e.ae,me=e.af,Ae=e.ag,be=e.ah,ye=e.ai,xe=e.aj,we=e.ak,_e=e.al,Ce=e.am,ke=e.an,Ee=e.ao,Se=e.ap,Ie=e.aq,Be=e.ar,Oe=e.as,Te=e.at,De=e.au,Me=e.av,Qe=e.aw,Le=e.ax,je=e.ay,Pe=e.az,Fe=e.aA,Re=e.aB,ze=e.aC,Ne=e.aD,Ve=e.aE,Ue=e.aF,He=e.aG,Ge=e.aH,Ye=e.aI,We=e.aJ,Xe=e.aK,$e=e.aL,qe=e.aM,Ke=e.aN,Je=e.aO,Ze=e.aP,et=e.aQ,tt=e.aR,it=e.aS,nt=e.aT,rt=e.aU,ot=e.aV,at=e.aW,st=e.aX,lt=e.aY,ct=e.aZ,ut=e.a_,dt=e.a$,ht=e.b0,pt=e.b1,ft=e.b2,gt=e.b3,vt=e.b4,mt=e.b5,At=e.b6,bt=e.b7,yt=e.b8,xt=e.b9,wt=e.ba,_t=e.bb,Ct=e.bc,kt=e.bd,Et=e.be,St=e.bf,It=e.bg,Bt=e.bh,Ot=e.bi,Tt=e.bj,Dt=e.bk,Mt=e.bl,Qt=e.bm,Lt=e.bn,jt=e.bo,Pt=e.bp,Ft=e.bq,Rt=e.br,zt=e.bs,Nt=e.bt,Vt=e.bu,Ut=e.bv,Ht=e.bw,Gt=e.bx,Yt=e.by,Wt=e.bz,Xt=e.bA,$t=e.bB,qt=e.bC,Kt=e.bD,Jt=e.bE,Zt=e.bF,ei=e.bG,ti=e.bH,ii=e.bI,ni=e.bJ,ri=e.bK,oi=e.bL,ai=e.bM,si=e.bN,li=e.bO,ci=e.bP,ui=e.bQ,di=e.bR,hi=e.bS,pi=e.bT,fi=e.bU,gi=e.bV,vi=e.bW,mi=e.bX,Ai=e.bY,bi=e.bZ,yi=e.b_,xi=e.b$},e=>{wi=e.i,_i=e.b,Ci=e.a,ki=e.r,Ei=e.c,Si=e.d,Ii=e.e,Bi=e.f,Oi=e.h,Ti=e.j,Di=e.t,Mi=e.k,Qi=e.l,Li=e.M,ji=e.S,Pi=e.m,Fi=e.n,Ri=e.o,zi=e.p,Ni=e.q,Vi=e.s,Ui=e.u,Hi=e.v,Gi=e.w,Yi=e.x,Wi=e.y,Xi=e.z,$i=e.A,qi=e.B,Ki=e.C,Ji=e.D,Zi=e.E,en=e.F,tn=e.G,nn=e.H,rn=e.I,on=e.J,an=e.K,sn=e.L,ln=e.N,cn=e.O,e.P,un=e.Q,dn=e.R,hn=e.T,pn=e.U,fn=e.V,gn=e.W,vn=e.X,mn=e.Y,An=e.Z,bn=e._,yn=e.$,xn=e.a0,wn=e.a1,_n=e.a2,Cn=e.a3,kn=e.a4,En=e.a5,Sn=e.a6,In=e.a7,Bn=e.a8,On=e.a9,Tn=e.aa,Dn=e.ab,Mn=e.ac,Qn=e.ad,Ln=e.ae,jn=e.af,Pn=e.ag,Fn=e.ah,Rn=e.ai,zn=e.aj,Nn=e.ak,Vn=e.al,Un=e.am,Hn=e.an,Gn=e.ao,Yn=e.ap,Wn=e.aq,Xn=e.ar,$n=e.as,qn=e.at,Kn=e.au,Jn=e.av,Zn=e.aw,er=e.ax,tr=e.ay,ir=e.az,nr=e.aA,rr=e.aB,or=e.aC,ar=e.aD,sr=e.aE,lr=e.aF,cr=e.aG,ur=e.aH,dr=e.aI,hr=e.aJ,pr=e.aK,fr=e.aL,gr=e.aM,vr=e.aN,mr=e.aO,Ar=e.aP,br=e.aQ,yr=e.aR,xr=e.aS,wr=e.aT,_r=e.aU,Cr=e.aV,kr=e.aW,Er=e.aX,Sr=e.aY,Ir=e.aZ,Br=e.a_,Or=e.a$,Tr=e.b0}],execute:function(){var Dr=document.createElement("style");function Mr(e){return"number"==typeof e?e:wi(e)?NaN:+e}function Qr(e,t){return function(i,n){var r;if(void 0===i&&void 0===n)return t;if(void 0!==i&&(r=i),void 0!==n){if(void 0===r)return n;"string"==typeof i||"string"==typeof n?(i=_i(i),n=_i(n)):(i=Mr(i),n=Mr(n)),r=e(i,n)}return r}}Dr.textContent="@charset \"UTF-8\";.context{display:inline-block;position:fixed;top:0;left:0;min-width:270px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#fff;background:#262933;font-size:9pt;border:1px solid #333333;border-radius:6px;box-shadow:2px 2px 2px -1px rgba(0,0,0,.5);padding:3px 0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:999}.context .item{padding:4px 19px;cursor:default;color:inherit}.context .item:hover{background:#2777ff}.context .item:hover .hotkey{color:#fff}.context .disabled{color:#878b90}.context .disabled:hover{background:inherit}.context .disabled:hover .hotkey{color:#878b90}.context .separator{margin:4px 0;height:0;padding:0;border-top:1px solid #454545}.hotkey{color:#878b90;float:right}.resize-bar{border-radius:3px;background-color:rgba(160,160,160,.6);position:absolute}.resize-bar:hover{background-color:#328cff}.resize-bar.horizontal{width:6px;height:30px}.resize-bar.vertical{width:30px;height:6px}.resize-bar.active{background-color:#328cff}#resize-left-bar,#resize-right-bar{cursor:ew-resize}#resize-top-bar,#resize-bottom-bar{cursor:ns-resize}.el-badge{--el-badge-bg-color:var(--el-color-danger);--el-badge-radius:10px;--el-badge-font-size:12px;--el-badge-padding:6px;--el-badge-size:18px;display:inline-block;position:relative;vertical-align:middle;width:fit-content}.el-badge__content{align-items:center;background-color:var(--el-badge-bg-color);border:1px solid var(--el-bg-color);border-radius:var(--el-badge-radius);color:var(--el-color-white);display:inline-flex;font-size:var(--el-badge-font-size);height:var(--el-badge-size);justify-content:center;padding:0 var(--el-badge-padding);white-space:nowrap}.el-badge__content.is-fixed{position:absolute;right:calc(1px + var(--el-badge-size)/2);top:0;transform:translateY(-50%) translate(100%);z-index:var(--el-index-normal)}.el-badge__content.is-fixed.is-dot{right:5px}.el-badge__content.is-dot{border-radius:50%;height:8px;padding:0;right:0;width:8px}.el-badge__content--primary{background-color:var(--el-color-primary)}.el-badge__content--success{background-color:var(--el-color-success)}.el-badge__content--warning{background-color:var(--el-color-warning)}.el-badge__content--info{background-color:var(--el-color-info)}.el-badge__content--danger{background-color:var(--el-color-danger)}.el-message{--el-message-bg-color:var(--el-color-info-light-9);--el-message-border-color:var(--el-border-color-lighter);--el-message-padding:11px 15px;--el-message-close-size:16px;--el-message-close-icon-color:var(--el-text-color-placeholder);--el-message-close-hover-color:var(--el-text-color-secondary);align-items:center;background-color:var(--el-message-bg-color);border-color:var(--el-message-border-color);border-radius:var(--el-border-radius-base);border-style:var(--el-border-style);border-width:var(--el-border-width);box-sizing:border-box;display:flex;gap:8px;left:50%;max-width:calc(100% - 32px);padding:var(--el-message-padding);position:fixed;top:20px;transform:translate(-50%);transition:opacity var(--el-transition-duration),transform .4s,top .4s;width:fit-content}.el-message.is-center{justify-content:center}.el-message.is-plain{background-color:var(--el-bg-color-overlay);border-color:var(--el-bg-color-overlay);box-shadow:var(--el-box-shadow-light)}.el-message p{margin:0}.el-message--success{--el-message-bg-color:var(--el-color-success-light-9);--el-message-border-color:var(--el-color-success-light-8);--el-message-text-color:var(--el-color-success)}.el-message--success .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--success{color:var(--el-message-text-color)}.el-message--info{--el-message-bg-color:var(--el-color-info-light-9);--el-message-border-color:var(--el-color-info-light-8);--el-message-text-color:var(--el-color-info)}.el-message--info .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--info{color:var(--el-message-text-color)}.el-message--warning{--el-message-bg-color:var(--el-color-warning-light-9);--el-message-border-color:var(--el-color-warning-light-8);--el-message-text-color:var(--el-color-warning)}.el-message--warning .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--warning{color:var(--el-message-text-color)}.el-message--error{--el-message-bg-color:var(--el-color-error-light-9);--el-message-border-color:var(--el-color-error-light-8);--el-message-text-color:var(--el-color-error)}.el-message--error .el-message__content{color:var(--el-message-text-color);overflow-wrap:break-word}.el-message .el-message-icon--error{color:var(--el-message-text-color)}.el-message .el-message__badge{position:absolute;right:-8px;top:-8px}.el-message__content{font-size:14px;line-height:1;padding:0}.el-message__content:focus{outline-width:0}.el-message .el-message__closeBtn{color:var(--el-message-close-icon-color);cursor:pointer;font-size:var(--el-message-close-size)}.el-message .el-message__closeBtn:focus{outline-width:0}.el-message .el-message__closeBtn:hover{color:var(--el-message-close-hover-color)}.el-message-fade-enter-from,.el-message-fade-leave-to{opacity:0;transform:translate(-50%,-100%)}:root{--el-loading-spinner-size:42px;--el-loading-fullscreen-spinner-size:50px}.el-loading-parent--relative{position:relative!important}.el-loading-parent--hidden{overflow:hidden!important}.el-loading-mask{background-color:var(--el-mask-color);bottom:0;left:0;margin:0;position:absolute;right:0;top:0;transition:opacity var(--el-transition-duration);z-index:2000}.el-loading-mask.is-fullscreen{position:fixed}.el-loading-mask.is-fullscreen .el-loading-spinner{margin-top:calc((0px - var(--el-loading-fullscreen-spinner-size))/2)}.el-loading-mask.is-fullscreen .el-loading-spinner .circular{height:var(--el-loading-fullscreen-spinner-size);width:var(--el-loading-fullscreen-spinner-size)}.el-loading-spinner{margin-top:calc((0px - var(--el-loading-spinner-size))/2);position:absolute;text-align:center;top:50%;width:100%}.el-loading-spinner .el-loading-text{color:var(--el-color-primary);font-size:14px;margin:3px 0}.el-loading-spinner .circular{animation:loading-rotate 2s linear infinite;display:inline;height:var(--el-loading-spinner-size);width:var(--el-loading-spinner-size)}.el-loading-spinner .path{animation:loading-dash 1.5s ease-in-out infinite;stroke-dasharray:90,150;stroke-dashoffset:0;stroke-width:2;stroke:var(--el-color-primary);stroke-linecap:round}.el-loading-spinner i{color:var(--el-color-primary)}.el-loading-fade-enter-from,.el-loading-fade-leave-to{opacity:0}@keyframes loading-rotate{to{transform:rotate(1turn)}}@keyframes loading-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-40px}to{stroke-dasharray:90,150;stroke-dashoffset:-120px}}:root{--el-popup-modal-bg-color:var(--el-color-black);--el-popup-modal-opacity:.5}.v-modal-enter{animation:v-modal-in var(--el-transition-duration-fast) ease}.v-modal-leave{animation:v-modal-out var(--el-transition-duration-fast) ease forwards}@keyframes v-modal-in{0%{opacity:0}}@keyframes v-modal-out{to{opacity:0}}.v-modal{background:var(--el-popup-modal-bg-color);height:100%;left:0;opacity:var(--el-popup-modal-opacity);position:fixed;top:0;width:100%}.el-popup-parent--hidden{overflow:hidden}.el-message-box{--el-messagebox-title-color:var(--el-text-color-primary);--el-messagebox-width:420px;--el-messagebox-border-radius:4px;--el-messagebox-box-shadow:var(--el-box-shadow);--el-messagebox-font-size:var(--el-font-size-large);--el-messagebox-content-font-size:var(--el-font-size-base);--el-messagebox-content-color:var(--el-text-color-regular);--el-messagebox-error-font-size:12px;--el-messagebox-padding-primary:12px;--el-messagebox-font-line-height:var(--el-font-line-height-primary);backface-visibility:hidden;background-color:var(--el-bg-color);border-radius:var(--el-messagebox-border-radius);box-shadow:var(--el-messagebox-box-shadow);box-sizing:border-box;display:inline-block;font-size:var(--el-messagebox-font-size);max-width:var(--el-messagebox-width);overflow:hidden;overflow-wrap:break-word;padding:var(--el-messagebox-padding-primary);position:relative;text-align:left;vertical-align:middle;width:100%}.el-message-box:focus{outline:none!important}.el-overlay.is-message-box .el-overlay-message-box{bottom:0;left:0;overflow:auto;padding:16px;position:fixed;right:0;text-align:center;top:0}.el-overlay.is-message-box .el-overlay-message-box:after{content:\"\";display:inline-block;height:100%;vertical-align:middle;width:0}.el-message-box.is-draggable .el-message-box__header{cursor:move;-webkit-user-select:none;user-select:none}.el-message-box__header{padding-bottom:var(--el-messagebox-padding-primary)}.el-message-box__header.show-close{padding-right:calc(var(--el-messagebox-padding-primary) + var(--el-message-close-size, 16px))}.el-message-box__title{color:var(--el-messagebox-title-color);font-size:var(--el-messagebox-font-size);line-height:var(--el-messagebox-font-line-height)}.el-message-box__headerbtn{background:transparent;border:none;cursor:pointer;font-size:var(--el-message-close-size,16px);height:40px;outline:none;padding:0;position:absolute;right:0;top:0;width:40px}.el-message-box__headerbtn .el-message-box__close{color:var(--el-color-info);font-size:inherit}.el-message-box__headerbtn:focus .el-message-box__close,.el-message-box__headerbtn:hover .el-message-box__close{color:var(--el-color-primary)}.el-message-box__content{color:var(--el-messagebox-content-color);font-size:var(--el-messagebox-content-font-size)}.el-message-box__container{align-items:center;display:flex;gap:12px}.el-message-box__input{padding-top:12px}.el-message-box__input div.invalid>input{border-color:var(--el-color-error)}.el-message-box__input div.invalid>input:focus{border-color:var(--el-color-error)}.el-message-box__status{font-size:24px}.el-message-box__status.el-message-box-icon--success{--el-messagebox-color:var(--el-color-success);color:var(--el-messagebox-color)}.el-message-box__status.el-message-box-icon--info{--el-messagebox-color:var(--el-color-info);color:var(--el-messagebox-color)}.el-message-box__status.el-message-box-icon--warning{--el-messagebox-color:var(--el-color-warning);color:var(--el-messagebox-color)}.el-message-box__status.el-message-box-icon--error{--el-messagebox-color:var(--el-color-error);color:var(--el-messagebox-color)}.el-message-box__message{margin:0}.el-message-box__message p{line-height:var(--el-messagebox-font-line-height);margin:0}.el-message-box__errormsg{color:var(--el-color-error);font-size:var(--el-messagebox-error-font-size);line-height:var(--el-messagebox-font-line-height)}.el-message-box__btns{align-items:center;display:flex;flex-wrap:wrap;justify-content:flex-end;padding-top:var(--el-messagebox-padding-primary)}.el-message-box--center .el-message-box__title{align-items:center;display:flex;gap:6px;justify-content:center}.el-message-box--center .el-message-box__status{font-size:inherit}.el-message-box--center .el-message-box__btns,.el-message-box--center .el-message-box__container{justify-content:center}.fade-in-linear-enter-active .el-overlay-message-box{animation:msgbox-fade-in var(--el-transition-duration)}.fade-in-linear-leave-active .el-overlay-message-box{animation:msgbox-fade-in var(--el-transition-duration) reverse}@keyframes msgbox-fade-in{0%{opacity:0;transform:translate3d(0,-20px,0)}to{opacity:1;transform:translateZ(0)}}.el-image-viewer__wrapper{bottom:0;left:0;position:fixed;right:0;top:0}.el-image-viewer__btn{align-items:center;border-radius:50%;box-sizing:border-box;cursor:pointer;display:flex;justify-content:center;opacity:.8;position:absolute;-webkit-user-select:none;user-select:none;z-index:1}.el-image-viewer__btn .el-icon{cursor:pointer;font-size:inherit}.el-image-viewer__close{font-size:40px;height:40px;right:40px;top:40px;width:40px}.el-image-viewer__canvas{align-items:center;display:flex;height:100%;justify-content:center;position:static;-webkit-user-select:none;user-select:none;width:100%}.el-image-viewer__actions{background-color:var(--el-text-color-regular);border-color:#fff;border-radius:22px;bottom:30px;height:44px;left:50%;padding:0 23px;transform:translate(-50%);width:282px}.el-image-viewer__actions__inner{align-items:center;color:#fff;cursor:default;display:flex;font-size:23px;height:100%;justify-content:space-around;width:100%}.el-image-viewer__prev{left:40px}.el-image-viewer__next,.el-image-viewer__prev{background-color:var(--el-text-color-regular);border-color:#fff;color:#fff;font-size:24px;height:44px;top:50%;transform:translateY(-50%);width:44px}.el-image-viewer__next{right:40px;text-indent:2px}.el-image-viewer__close{background-color:var(--el-text-color-regular);border-color:#fff;color:#fff;font-size:24px;height:44px;width:44px}.el-image-viewer__mask{background:#000;height:100%;left:0;opacity:.5;position:absolute;top:0;width:100%}.viewer-fade-enter-active{animation:viewer-fade-in var(--el-transition-duration)}.viewer-fade-leave-active{animation:viewer-fade-out var(--el-transition-duration)}@keyframes viewer-fade-in{0%{opacity:0;transform:translate3d(0,-20px,0)}to{opacity:1;transform:translateZ(0)}}@keyframes viewer-fade-out{0%{opacity:1;transform:translateZ(0)}to{opacity:0;transform:translate3d(0,-20px,0)}}span.active svg.icon[data-v-d8bc8611]{fill:#2d8cf0}.time[data-v-d8bc8611]{color:#c1c1c1}.el-switch{--el-switch-on-color:var(--el-color-primary);--el-switch-off-color:var(--el-border-color);align-items:center;display:inline-flex;font-size:14px;height:32px;line-height:20px;position:relative;vertical-align:middle}.el-switch.is-disabled .el-switch__core,.el-switch.is-disabled .el-switch__label{cursor:not-allowed}.el-switch__label{color:var(--el-text-color-primary);cursor:pointer;display:inline-block;font-size:14px;font-weight:500;height:20px;transition:var(--el-transition-duration-fast);vertical-align:middle}.el-switch__label.is-active{color:var(--el-color-primary)}.el-switch__label--left{margin-right:10px}.el-switch__label--right{margin-left:10px}.el-switch__label *{display:inline-block;font-size:14px;line-height:1}.el-switch__label .el-icon{height:inherit}.el-switch__label .el-icon svg{vertical-align:middle}.el-switch__input{height:0;margin:0;opacity:0;position:absolute;width:0}.el-switch__input:focus-visible~.el-switch__core{outline:2px solid var(--el-switch-on-color);outline-offset:1px}.el-switch__core{align-items:center;background:var(--el-switch-off-color);border:1px solid var(--el-switch-border-color,var(--el-switch-off-color));border-radius:10px;box-sizing:border-box;cursor:pointer;display:inline-flex;height:20px;min-width:40px;outline:none;position:relative;transition:border-color var(--el-transition-duration),background-color var(--el-transition-duration)}.el-switch__core .el-switch__inner{align-items:center;display:flex;height:16px;justify-content:center;overflow:hidden;padding:0 4px 0 18px;transition:all var(--el-transition-duration);width:100%}.el-switch__core .el-switch__inner .is-icon,.el-switch__core .el-switch__inner .is-text{color:var(--el-color-white);font-size:12px;overflow:hidden;text-overflow:ellipsis;-webkit-user-select:none;user-select:none;white-space:nowrap}.el-switch__core .el-switch__action{align-items:center;background-color:var(--el-color-white);border-radius:var(--el-border-radius-circle);color:var(--el-switch-off-color);display:flex;height:16px;justify-content:center;left:1px;position:absolute;transition:all var(--el-transition-duration);width:16px}.el-switch.is-checked .el-switch__core{background-color:var(--el-switch-on-color);border-color:var(--el-switch-border-color,var(--el-switch-on-color))}.el-switch.is-checked .el-switch__core .el-switch__action{color:var(--el-switch-on-color);left:calc(100% - 17px)}.el-switch.is-checked .el-switch__core .el-switch__inner{padding:0 18px 0 4px}.el-switch.is-disabled{opacity:.6}.el-switch--wide .el-switch__label.el-switch__label--left span{left:10px}.el-switch--wide .el-switch__label.el-switch__label--right span{right:10px}.el-switch .label-fade-enter-from,.el-switch .label-fade-leave-active{opacity:0}.el-switch--large{font-size:14px;height:40px;line-height:24px}.el-switch--large .el-switch__label{font-size:14px;height:24px}.el-switch--large .el-switch__label *{font-size:14px}.el-switch--large .el-switch__core{border-radius:12px;height:24px;min-width:50px}.el-switch--large .el-switch__core .el-switch__inner{height:20px;padding:0 6px 0 22px}.el-switch--large .el-switch__core .el-switch__action{height:20px;width:20px}.el-switch--large.is-checked .el-switch__core .el-switch__action{left:calc(100% - 21px)}.el-switch--large.is-checked .el-switch__core .el-switch__inner{padding:0 22px 0 6px}.el-switch--small{font-size:12px;height:24px;line-height:16px}.el-switch--small .el-switch__label{font-size:12px;height:16px}.el-switch--small .el-switch__label *{font-size:12px}.el-switch--small .el-switch__core{border-radius:8px;height:16px;min-width:30px}.el-switch--small .el-switch__core .el-switch__inner{height:12px;padding:0 2px 0 14px}.el-switch--small .el-switch__core .el-switch__action{height:12px;width:12px}.el-switch--small.is-checked .el-switch__core .el-switch__action{left:calc(100% - 13px)}.el-switch--small.is-checked .el-switch__core .el-switch__inner{padding:0 14px 0 2px}h3[data-v-6f16963d]{margin-bottom:10px}.divider[data-v-6f16963d]{margin-top:0}.el-input-number{display:inline-flex;line-height:30px;position:relative;width:150px}.el-input-number .el-input__wrapper{padding-left:42px;padding-right:42px}.el-input-number .el-input__inner{-webkit-appearance:none;-moz-appearance:textfield;line-height:1;text-align:center}.el-input-number .el-input__inner::-webkit-inner-spin-button,.el-input-number .el-input__inner::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.el-input-number__decrease,.el-input-number__increase{align-items:center;background:var(--el-fill-color-light);bottom:1px;color:var(--el-text-color-regular);cursor:pointer;display:flex;font-size:13px;height:auto;justify-content:center;position:absolute;top:1px;-webkit-user-select:none;user-select:none;width:32px;z-index:1}.el-input-number__decrease:hover,.el-input-number__increase:hover{color:var(--el-color-primary)}.el-input-number__decrease:hover~.el-input:not(.is-disabled) .el-input__wrapper,.el-input-number__increase:hover~.el-input:not(.is-disabled) .el-input__wrapper{box-shadow:0 0 0 1px var(--el-input-focus-border-color,var(--el-color-primary)) inset}.el-input-number__decrease.is-disabled,.el-input-number__increase.is-disabled{color:var(--el-disabled-text-color);cursor:not-allowed}.el-input-number__increase{border-left:var(--el-border);border-radius:0 var(--el-border-radius-base) var(--el-border-radius-base) 0;right:1px}.el-input-number__decrease{border-radius:var(--el-border-radius-base) 0 0 var(--el-border-radius-base);border-right:var(--el-border);left:1px}.el-input-number.is-disabled .el-input-number__decrease,.el-input-number.is-disabled .el-input-number__increase{border-color:var(--el-disabled-border-color);color:var(--el-disabled-border-color)}.el-input-number.is-disabled .el-input-number__decrease:hover,.el-input-number.is-disabled .el-input-number__increase:hover{color:var(--el-disabled-border-color);cursor:not-allowed}.el-input-number--large{line-height:38px;width:180px}.el-input-number--large .el-input-number__decrease,.el-input-number--large .el-input-number__increase{font-size:14px;width:40px}.el-input-number--large .el-input--large .el-input__wrapper{padding-left:47px;padding-right:47px}.el-input-number--small{line-height:22px;width:120px}.el-input-number--small .el-input-number__decrease,.el-input-number--small .el-input-number__increase{font-size:12px;width:24px}.el-input-number--small .el-input--small .el-input__wrapper{padding-left:31px;padding-right:31px}.el-input-number--small .el-input-number__decrease [class*=el-icon],.el-input-number--small .el-input-number__increase [class*=el-icon]{transform:scale(.9)}.el-input-number.is-without-controls .el-input__wrapper{padding-left:15px;padding-right:15px}.el-input-number.is-controls-right .el-input__wrapper{padding-left:15px;padding-right:42px}.el-input-number.is-controls-right .el-input-number__decrease,.el-input-number.is-controls-right .el-input-number__increase{--el-input-number-controls-height:15px;height:var(--el-input-number-controls-height);line-height:var(--el-input-number-controls-height)}.el-input-number.is-controls-right .el-input-number__decrease [class*=el-icon],.el-input-number.is-controls-right .el-input-number__increase [class*=el-icon]{transform:scale(.8)}.el-input-number.is-controls-right .el-input-number__increase{border-bottom:var(--el-border);border-radius:0 var(--el-border-radius-base) 0 0;bottom:auto;left:auto}.el-input-number.is-controls-right .el-input-number__decrease{border-left:var(--el-border);border-radius:0 0 var(--el-border-radius-base) 0;border-right:none;left:auto;right:1px;top:auto}.el-input-number.is-controls-right[class*=large] [class*=decrease],.el-input-number.is-controls-right[class*=large] [class*=increase]{--el-input-number-controls-height:19px}.el-input-number.is-controls-right[class*=small] [class*=decrease],.el-input-number.is-controls-right[class*=small] [class*=increase]{--el-input-number-controls-height:11px}.asa-size-wrap[data-v-8b6e970d]{display:flex;justify-content:flex-start;align-items:center}.asa-size-wrap .asa-size-wrap-item[data-v-8b6e970d]{display:inline-block;margin-right:10px}.asa-size-wrap .asa-size-wrap-item>span[data-v-8b6e970d]{margin-right:10px}h3[data-v-8b6e970d]{padding:0;margin:0}.divider[data-v-8b6e970d]{margin-top:0}.cell-wrap[data-v-8b6e970d]{box-sizing:border-box}.cell-wrap .cell-main[data-v-8b6e970d]{display:flex;justify-content:space-between;align-items:center;vertical-align:middle;margin-bottom:10px}.cell-wrap .cell-main .cell-name[data-v-8b6e970d]{line-height:24px;font-size:14px}.cell-wrap .cell-main .cell-label[data-v-8b6e970d]{line-height:1.2;font-size:12px;color:#808695}.el-image__error,.el-image__inner,.el-image__placeholder,.el-image__wrapper{height:100%;width:100%}.el-image{display:inline-block;overflow:hidden;position:relative}.el-image__inner{opacity:1;vertical-align:top}.el-image__inner.is-loading{opacity:0}.el-image__wrapper{left:0;position:absolute;top:0}.el-image__error,.el-image__placeholder{background:var(--el-fill-color-light)}.el-image__error{align-items:center;color:var(--el-text-color-placeholder);display:flex;font-size:14px;justify-content:center;vertical-align:middle}.el-image__preview{cursor:pointer}.img-group[data-v-50728920]{background:rgba(238,238,238,.63);border-radius:10px;padding:10px;margin-top:10px}.tmpl-img-box[data-v-50728920]{box-sizing:border-box;width:132px;height:180px;padding:5px;cursor:pointer;border-radius:10px;text-align:center}.tmpl-img-box[data-v-50728920]:hover{background:#e3e3e3}.tmpl-img-box:hover .del-btn[data-v-50728920]{right:5px}.del-btn[data-v-50728920]{z-index:1;position:absolute;top:5px;right:1000000px}.tip[data-v-50728920]{text-align:center;padding:10px}.el-breadcrumb{font-size:14px;line-height:1}.el-breadcrumb:after,.el-breadcrumb:before{content:\"\";display:table}.el-breadcrumb:after{clear:both}.el-breadcrumb__separator{color:var(--el-text-color-placeholder);font-weight:700;margin:0 9px}.el-breadcrumb__separator.el-icon{font-weight:400;margin:0 6px}.el-breadcrumb__separator.el-icon svg{vertical-align:middle}.el-breadcrumb__item{align-items:center;display:inline-flex;float:left}.el-breadcrumb__inner{color:var(--el-text-color-regular)}.el-breadcrumb__inner a,.el-breadcrumb__inner.is-link{color:var(--el-text-color-primary);font-weight:700;text-decoration:none;transition:var(--el-transition-color)}.el-breadcrumb__inner a:hover,.el-breadcrumb__inner.is-link:hover{color:var(--el-color-primary);cursor:pointer}.el-breadcrumb__item:last-child .el-breadcrumb__inner,.el-breadcrumb__item:last-child .el-breadcrumb__inner a,.el-breadcrumb__item:last-child .el-breadcrumb__inner a:hover,.el-breadcrumb__item:last-child .el-breadcrumb__inner:hover{color:var(--el-text-color-regular);cursor:text;font-weight:400}.el-breadcrumb__item:last-child .el-breadcrumb__separator{display:none}.file-type-box[data-v-ed117189]{width:134px;height:116px;cursor:pointer;background:#fff;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid #f1f1f1;border-radius:10px}.file-type-box img[data-v-ed117189]{width:60px;margin-top:12px}.file-type-box span[data-v-ed117189]{display:block;padding-top:10px;text-align:center;width:90%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-type-box div.more[data-v-ed117189]{position:absolute;display:none}.file-type-box .click-bg[data-v-ed117189]{position:absolute;top:0;left:0;right:0;bottom:0}.file-type-box[data-v-ed117189]:hover{background:#f3f5f9;border:1px solid rgb(225,230,239);border-radius:8px}.file-type-box:hover img[data-v-ed117189]{opacity:.8}.file-type-box:hover div.more[data-v-ed117189]{display:block;top:5px;right:5px}.el-tag{--el-tag-font-size:12px;--el-tag-border-radius:4px;--el-tag-border-radius-rounded:9999px;--el-tag-bg-color:var(--el-color-primary-light-9);--el-tag-border-color:var(--el-color-primary-light-8);--el-tag-hover-color:var(--el-color-primary);align-items:center;background-color:var(--el-tag-bg-color);border-color:var(--el-tag-border-color);border-radius:var(--el-tag-border-radius);border-style:solid;border-width:1px;box-sizing:border-box;color:var(--el-tag-text-color);display:inline-flex;font-size:var(--el-tag-font-size);height:24px;justify-content:center;line-height:1;padding:0 9px;vertical-align:middle;white-space:nowrap;--el-icon-size:14px}.el-tag.el-tag--primary{--el-tag-bg-color:var(--el-color-primary-light-9);--el-tag-border-color:var(--el-color-primary-light-8);--el-tag-hover-color:var(--el-color-primary)}.el-tag.el-tag--success{--el-tag-bg-color:var(--el-color-success-light-9);--el-tag-border-color:var(--el-color-success-light-8);--el-tag-hover-color:var(--el-color-success)}.el-tag.el-tag--warning{--el-tag-bg-color:var(--el-color-warning-light-9);--el-tag-border-color:var(--el-color-warning-light-8);--el-tag-hover-color:var(--el-color-warning)}.el-tag.el-tag--danger{--el-tag-bg-color:var(--el-color-danger-light-9);--el-tag-border-color:var(--el-color-danger-light-8);--el-tag-hover-color:var(--el-color-danger)}.el-tag.el-tag--error{--el-tag-bg-color:var(--el-color-error-light-9);--el-tag-border-color:var(--el-color-error-light-8);--el-tag-hover-color:var(--el-color-error)}.el-tag.el-tag--info{--el-tag-bg-color:var(--el-color-info-light-9);--el-tag-border-color:var(--el-color-info-light-8);--el-tag-hover-color:var(--el-color-info)}.el-tag.el-tag--primary{--el-tag-text-color:var(--el-color-primary)}.el-tag.el-tag--success{--el-tag-text-color:var(--el-color-success)}.el-tag.el-tag--warning{--el-tag-text-color:var(--el-color-warning)}.el-tag.el-tag--danger{--el-tag-text-color:var(--el-color-danger)}.el-tag.el-tag--error{--el-tag-text-color:var(--el-color-error)}.el-tag.el-tag--info{--el-tag-text-color:var(--el-color-info)}.el-tag.is-hit{border-color:var(--el-color-primary)}.el-tag.is-round{border-radius:var(--el-tag-border-radius-rounded)}.el-tag .el-tag__close{color:var(--el-tag-text-color);flex-shrink:0}.el-tag .el-tag__close:hover{background-color:var(--el-tag-hover-color);color:var(--el-color-white)}.el-tag .el-icon{border-radius:50%;cursor:pointer;font-size:calc(var(--el-icon-size) - 2px);height:var(--el-icon-size);width:var(--el-icon-size)}.el-tag .el-tag__close{margin-left:6px}.el-tag--dark{--el-tag-bg-color:var(--el-color-primary);--el-tag-border-color:var(--el-color-primary);--el-tag-hover-color:var(--el-color-primary-light-3);--el-tag-text-color:var(--el-color-white)}.el-tag--dark.el-tag--primary{--el-tag-bg-color:var(--el-color-primary);--el-tag-border-color:var(--el-color-primary);--el-tag-hover-color:var(--el-color-primary-light-3)}.el-tag--dark.el-tag--success{--el-tag-bg-color:var(--el-color-success);--el-tag-border-color:var(--el-color-success);--el-tag-hover-color:var(--el-color-success-light-3)}.el-tag--dark.el-tag--warning{--el-tag-bg-color:var(--el-color-warning);--el-tag-border-color:var(--el-color-warning);--el-tag-hover-color:var(--el-color-warning-light-3)}.el-tag--dark.el-tag--danger{--el-tag-bg-color:var(--el-color-danger);--el-tag-border-color:var(--el-color-danger);--el-tag-hover-color:var(--el-color-danger-light-3)}.el-tag--dark.el-tag--error{--el-tag-bg-color:var(--el-color-error);--el-tag-border-color:var(--el-color-error);--el-tag-hover-color:var(--el-color-error-light-3)}.el-tag--dark.el-tag--info{--el-tag-bg-color:var(--el-color-info);--el-tag-border-color:var(--el-color-info);--el-tag-hover-color:var(--el-color-info-light-3)}.el-tag--dark.el-tag--danger,.el-tag--dark.el-tag--error,.el-tag--dark.el-tag--info,.el-tag--dark.el-tag--primary,.el-tag--dark.el-tag--success,.el-tag--dark.el-tag--warning{--el-tag-text-color:var(--el-color-white)}.el-tag--plain{--el-tag-border-color:var(--el-color-primary-light-5);--el-tag-hover-color:var(--el-color-primary);--el-tag-bg-color:var(--el-fill-color-blank)}.el-tag--plain.el-tag--primary{--el-tag-bg-color:var(--el-fill-color-blank);--el-tag-border-color:var(--el-color-primary-light-5);--el-tag-hover-color:var(--el-color-primary)}.el-tag--plain.el-tag--success{--el-tag-bg-color:var(--el-fill-color-blank);--el-tag-border-color:var(--el-color-success-light-5);--el-tag-hover-color:var(--el-color-success)}.el-tag--plain.el-tag--warning{--el-tag-bg-color:var(--el-fill-color-blank);--el-tag-border-color:var(--el-color-warning-light-5);--el-tag-hover-color:var(--el-color-warning)}.el-tag--plain.el-tag--danger{--el-tag-bg-color:var(--el-fill-color-blank);--el-tag-border-color:var(--el-color-danger-light-5);--el-tag-hover-color:var(--el-color-danger)}.el-tag--plain.el-tag--error{--el-tag-bg-color:var(--el-fill-color-blank);--el-tag-border-color:var(--el-color-error-light-5);--el-tag-hover-color:var(--el-color-error)}.el-tag--plain.el-tag--info{--el-tag-bg-color:var(--el-fill-color-blank);--el-tag-border-color:var(--el-color-info-light-5);--el-tag-hover-color:var(--el-color-info)}.el-tag.is-closable{padding-right:5px}.el-tag--large{height:32px;padding:0 11px;--el-icon-size:16px}.el-tag--large .el-tag__close{margin-left:8px}.el-tag--large.is-closable{padding-right:7px}.el-tag--small{height:20px;padding:0 7px;--el-icon-size:12px}.el-tag--small .el-tag__close{margin-left:4px}.el-tag--small.is-closable{padding-right:3px}.el-tag--small .el-icon-close{transform:scale(.8)}.el-tag.el-tag--primary.is-hit{border-color:var(--el-color-primary)}.el-tag.el-tag--success.is-hit{border-color:var(--el-color-success)}.el-tag.el-tag--warning.is-hit{border-color:var(--el-color-warning)}.el-tag.el-tag--danger.is-hit{border-color:var(--el-color-danger)}.el-tag.el-tag--error.is-hit{border-color:var(--el-color-error)}.el-tag.el-tag--info.is-hit{border-color:var(--el-color-info)}.el-select-dropdown.is-multiple .el-select-dropdown__item.is-selected:after{background-color:var(--el-color-primary);background-position:50%;background-repeat:no-repeat;border-right:none;border-top:none;content:\"\";height:12px;-webkit-mask:url(\"data:image/svg+xml;utf8,%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' d='M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z'%3E%3C/path%3E%3C/svg%3E\") no-repeat;mask:url(\"data:image/svg+xml;utf8,%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' d='M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z'%3E%3C/path%3E%3C/svg%3E\") no-repeat;mask-size:100% 100%;-webkit-mask:url(\"data:image/svg+xml;utf8,%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' d='M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z'%3E%3C/path%3E%3C/svg%3E\") no-repeat;-webkit-mask-size:100% 100%;position:absolute;right:20px;top:50%;transform:translateY(-50%);width:12px}.el-select-dropdown{border-radius:var(--el-border-radius-base);box-sizing:border-box;z-index:calc(var(--el-index-top) + 1)}.el-select-dropdown .el-scrollbar.is-empty .el-select-dropdown__list{padding:0}.el-select-dropdown__empty,.el-select-dropdown__loading{color:var(--el-text-color-secondary);font-size:var(--el-select-font-size);margin:0;padding:10px 0;text-align:center}.el-select-dropdown__wrap{max-height:274px}.el-select-dropdown__list{box-sizing:border-box;list-style:none;margin:0;padding:6px 0}.el-select-dropdown__list.el-vl__window{margin:6px 0;padding:0}.el-select-dropdown__header{border-bottom:1px solid var(--el-border-color-light);padding:10px}.el-select-dropdown__footer{border-top:1px solid var(--el-border-color-light);padding:10px}.el-select-dropdown__item{box-sizing:border-box;color:var(--el-text-color-regular);cursor:pointer;font-size:var(--el-font-size-base);height:34px;line-height:34px;overflow:hidden;padding:0 32px 0 20px;position:relative;text-overflow:ellipsis;white-space:nowrap}.el-select-dropdown__item.is-hovering{background-color:var(--el-fill-color-light)}.el-select-dropdown__item.is-selected{color:var(--el-color-primary);font-weight:700}.el-select-dropdown__item.is-disabled{background-color:unset;color:var(--el-text-color-placeholder);cursor:not-allowed}.el-select-dropdown.is-multiple .el-select-dropdown__item.is-selected:after{background-color:var(--el-color-primary);background-position:50%;background-repeat:no-repeat;border-right:none;border-top:none;content:\"\";height:12px;-webkit-mask:url(\"data:image/svg+xml;utf8,%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' d='M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z'%3E%3C/path%3E%3C/svg%3E\") no-repeat;mask:url(\"data:image/svg+xml;utf8,%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' d='M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z'%3E%3C/path%3E%3C/svg%3E\") no-repeat;mask-size:100% 100%;-webkit-mask:url(\"data:image/svg+xml;utf8,%3Csvg class='icon' width='200' height='200' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='currentColor' d='M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z'%3E%3C/path%3E%3C/svg%3E\") no-repeat;-webkit-mask-size:100% 100%;position:absolute;right:20px;top:50%;transform:translateY(-50%);width:12px}.el-select-dropdown.is-multiple .el-select-dropdown__item.is-disabled:after{background-color:var(--el-text-color-placeholder)}.el-select-group{margin:0;padding:0}.el-select-group__wrap{list-style:none;margin:0;padding:0;position:relative}.el-select-group__title{color:var(--el-color-info);font-size:12px;line-height:34px;padding-left:20px}.el-select-group .el-select-dropdown__item{padding-left:20px}.el-select{--el-select-border-color-hover:var(--el-border-color-hover);--el-select-disabled-color:var(--el-disabled-text-color);--el-select-disabled-border:var(--el-disabled-border-color);--el-select-font-size:var(--el-font-size-base);--el-select-close-hover-color:var(--el-text-color-secondary);--el-select-input-color:var(--el-text-color-placeholder);--el-select-multiple-input-color:var(--el-text-color-regular);--el-select-input-focus-border-color:var(--el-color-primary);--el-select-input-font-size:14px;--el-select-width:100%;display:inline-block;position:relative;vertical-align:middle;width:var(--el-select-width)}.el-select__wrapper{align-items:center;background-color:var(--el-fill-color-blank);border-radius:var(--el-border-radius-base);box-shadow:0 0 0 1px var(--el-border-color) inset;box-sizing:border-box;cursor:pointer;display:flex;font-size:14px;gap:6px;line-height:24px;min-height:32px;padding:4px 12px;position:relative;text-align:left;transition:var(--el-transition-duration)}.el-select__wrapper:hover{box-shadow:0 0 0 1px var(--el-text-color) inset}.el-select__wrapper.is-filterable{cursor:text}.el-select__wrapper.is-focused{box-shadow:0 0 0 1px var(--el-color-primary) inset}.el-select__wrapper.is-hovering:not(.is-focused){box-shadow:0 0 0 1px var(--el-border-color-hover) inset}.el-select__wrapper.is-disabled{background-color:var(--el-fill-color-light);box-shadow:0 0 0 1px var(--el-select-disabled-border) inset;color:var(--el-text-color-placeholder);cursor:not-allowed}.el-select__wrapper.is-disabled:hover{box-shadow:0 0 0 1px var(--el-select-disabled-border) inset}.el-select__wrapper.is-disabled.is-focus{box-shadow:0 0 0 1px var(--el-input-focus-border-color) inset}.el-select__wrapper.is-disabled .el-select__selected-item{color:var(--el-select-disabled-color)}.el-select__wrapper.is-disabled .el-select__caret,.el-select__wrapper.is-disabled .el-tag{cursor:not-allowed}.el-select__prefix,.el-select__suffix{align-items:center;color:var(--el-input-icon-color,var(--el-text-color-placeholder));display:flex;flex-shrink:0;gap:6px}.el-select__caret{color:var(--el-select-input-color);cursor:pointer;font-size:var(--el-select-input-font-size);transform:rotate(0);transition:var(--el-transition-duration)}.el-select__caret.is-reverse{transform:rotate(180deg)}.el-select__selection{align-items:center;display:flex;flex:1;flex-wrap:wrap;gap:6px;min-width:0;position:relative}.el-select__selection.is-near{margin-left:-8px}.el-select__selection .el-tag{border-color:transparent;cursor:pointer}.el-select__selection .el-tag.el-tag--plain{border-color:var(--el-tag-border-color)}.el-select__selection .el-tag .el-tag__content{min-width:0}.el-select__selected-item{display:flex;flex-wrap:wrap;-webkit-user-select:none;user-select:none}.el-select__tags-text{line-height:normal}.el-select__placeholder,.el-select__tags-text{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.el-select__placeholder{color:var(--el-input-text-color,var(--el-text-color-regular));position:absolute;top:50%;transform:translateY(-50%);width:100%}.el-select__placeholder.is-transparent{color:var(--el-text-color-placeholder);-webkit-user-select:none;user-select:none}.el-select__popper.el-popper{background:var(--el-bg-color-overlay);border:1px solid var(--el-border-color-light);box-shadow:var(--el-box-shadow-light)}.el-select__popper.el-popper .el-popper__arrow:before{border:1px solid var(--el-border-color-light)}.el-select__popper.el-popper[data-popper-placement^=top] .el-popper__arrow:before{border-left-color:transparent;border-top-color:transparent}.el-select__popper.el-popper[data-popper-placement^=bottom] .el-popper__arrow:before{border-bottom-color:transparent;border-right-color:transparent}.el-select__popper.el-popper[data-popper-placement^=left] .el-popper__arrow:before{border-bottom-color:transparent;border-left-color:transparent}.el-select__popper.el-popper[data-popper-placement^=right] .el-popper__arrow:before{border-right-color:transparent;border-top-color:transparent}.el-select__input-wrapper{max-width:100%}.el-select__input-wrapper.is-hidden{opacity:0;position:absolute}.el-select__input{-webkit-appearance:none;appearance:none;background-color:transparent;border:none;color:var(--el-select-multiple-input-color);font-family:inherit;font-size:inherit;height:24px;max-width:100%;outline:none;padding:0}.el-select__input.is-disabled{cursor:not-allowed}.el-select__input-calculator{left:0;max-width:100%;overflow:hidden;position:absolute;top:0;visibility:hidden;white-space:pre}.el-select--large .el-select__wrapper{font-size:14px;gap:6px;line-height:24px;min-height:40px;padding:8px 16px}.el-select--large .el-select__selection{gap:6px}.el-select--large .el-select__selection.is-near{margin-left:-8px}.el-select--large .el-select__prefix,.el-select--large .el-select__suffix{gap:6px}.el-select--large .el-select__input{height:24px}.el-select--small .el-select__wrapper{font-size:12px;gap:4px;line-height:20px;min-height:24px;padding:2px 8px}.el-select--small .el-select__selection{gap:4px}.el-select--small .el-select__selection.is-near{margin-left:-6px}.el-select--small .el-select__prefix,.el-select--small .el-select__suffix{gap:4px}.el-select--small .el-select__input{height:20px}.el-tree{--el-tree-node-content-height:26px;--el-tree-node-hover-bg-color:var(--el-fill-color-light);--el-tree-text-color:var(--el-text-color-regular);--el-tree-expand-icon-color:var(--el-text-color-placeholder);background:var(--el-fill-color-blank);color:var(--el-tree-text-color);cursor:default;font-size:var(--el-font-size-base);position:relative}.el-tree__empty-block{height:100%;min-height:60px;position:relative;text-align:center;width:100%}.el-tree__empty-text{color:var(--el-text-color-secondary);font-size:var(--el-font-size-base);left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.el-tree__drop-indicator{background-color:var(--el-color-primary);height:1px;left:0;position:absolute;right:0}.el-tree-node{outline:none;white-space:nowrap}.el-tree-node:focus>.el-tree-node__content{background-color:var(--el-tree-node-hover-bg-color)}.el-tree-node.is-drop-inner>.el-tree-node__content .el-tree-node__label{background-color:var(--el-color-primary);color:#fff}.el-tree-node__content{--el-checkbox-height:var(--el-tree-node-content-height);align-items:center;cursor:pointer;display:flex;height:var(--el-tree-node-content-height)}.el-tree-node__content>.el-tree-node__expand-icon{box-sizing:content-box;padding:6px}.el-tree-node__content>label.el-checkbox{margin-right:8px}.el-tree-node__content:hover{background-color:var(--el-tree-node-hover-bg-color)}.el-tree.is-dragging .el-tree-node__content{cursor:move}.el-tree.is-dragging .el-tree-node__content *{pointer-events:none}.el-tree.is-dragging.is-drop-not-allow .el-tree-node__content{cursor:not-allowed}.el-tree-node__expand-icon{color:var(--el-tree-expand-icon-color);cursor:pointer;font-size:12px;transform:rotate(0);transition:transform var(--el-transition-duration) ease-in-out}.el-tree-node__expand-icon.expanded{transform:rotate(90deg)}.el-tree-node__expand-icon.is-leaf{color:transparent;cursor:default;visibility:hidden}.el-tree-node__expand-icon.is-hidden{visibility:hidden}.el-tree-node__loading-icon{color:var(--el-tree-expand-icon-color);font-size:var(--el-font-size-base);margin-right:8px}.el-tree-node>.el-tree-node__children{background-color:transparent;overflow:hidden}.el-tree-node.is-expanded>.el-tree-node__children{display:block}.el-tree--highlight-current .el-tree-node.is-current>.el-tree-node__content{background-color:var(--el-color-primary-light-9)}.el-checkbox{--el-checkbox-font-size:14px;--el-checkbox-font-weight:var(--el-font-weight-primary);--el-checkbox-text-color:var(--el-text-color-regular);--el-checkbox-input-height:14px;--el-checkbox-input-width:14px;--el-checkbox-border-radius:var(--el-border-radius-small);--el-checkbox-bg-color:var(--el-fill-color-blank);--el-checkbox-input-border:var(--el-border);--el-checkbox-disabled-border-color:var(--el-border-color);--el-checkbox-disabled-input-fill:var(--el-fill-color-light);--el-checkbox-disabled-icon-color:var(--el-text-color-placeholder);--el-checkbox-disabled-checked-input-fill:var(--el-border-color-extra-light);--el-checkbox-disabled-checked-input-border-color:var(--el-border-color);--el-checkbox-disabled-checked-icon-color:var(--el-text-color-placeholder);--el-checkbox-checked-text-color:var(--el-color-primary);--el-checkbox-checked-input-border-color:var(--el-color-primary);--el-checkbox-checked-bg-color:var(--el-color-primary);--el-checkbox-checked-icon-color:var(--el-color-white);--el-checkbox-input-border-color-hover:var(--el-color-primary);align-items:center;color:var(--el-checkbox-text-color);cursor:pointer;display:inline-flex;font-size:var(--el-font-size-base);font-weight:var(--el-checkbox-font-weight);height:var(--el-checkbox-height,32px);margin-right:30px;position:relative;-webkit-user-select:none;user-select:none;white-space:nowrap}.el-checkbox.is-disabled{cursor:not-allowed}.el-checkbox.is-bordered{border:var(--el-border);border-radius:var(--el-border-radius-base);box-sizing:border-box;padding:0 15px 0 9px}.el-checkbox.is-bordered.is-checked{border-color:var(--el-color-primary)}.el-checkbox.is-bordered.is-disabled{border-color:var(--el-border-color-lighter)}.el-checkbox.is-bordered.el-checkbox--large{border-radius:var(--el-border-radius-base);padding:0 19px 0 11px}.el-checkbox.is-bordered.el-checkbox--large .el-checkbox__label{font-size:var(--el-font-size-base)}.el-checkbox.is-bordered.el-checkbox--large .el-checkbox__inner{height:14px;width:14px}.el-checkbox.is-bordered.el-checkbox--small{border-radius:calc(var(--el-border-radius-base) - 1px);padding:0 11px 0 7px}.el-checkbox.is-bordered.el-checkbox--small .el-checkbox__label{font-size:12px}.el-checkbox.is-bordered.el-checkbox--small .el-checkbox__inner{height:12px;width:12px}.el-checkbox.is-bordered.el-checkbox--small .el-checkbox__inner:after{height:6px;width:2px}.el-checkbox input:focus-visible+.el-checkbox__inner{border-radius:var(--el-checkbox-border-radius);outline:2px solid var(--el-checkbox-input-border-color-hover);outline-offset:1px}.el-checkbox__input{cursor:pointer;display:inline-flex;outline:none;position:relative;white-space:nowrap}.el-checkbox__input.is-disabled .el-checkbox__inner{background-color:var(--el-checkbox-disabled-input-fill);border-color:var(--el-checkbox-disabled-border-color);cursor:not-allowed}.el-checkbox__input.is-disabled .el-checkbox__inner:after{border-color:var(--el-checkbox-disabled-icon-color);cursor:not-allowed}.el-checkbox__input.is-disabled.is-checked .el-checkbox__inner{background-color:var(--el-checkbox-disabled-checked-input-fill);border-color:var(--el-checkbox-disabled-checked-input-border-color)}.el-checkbox__input.is-disabled.is-checked .el-checkbox__inner:after{border-color:var(--el-checkbox-disabled-checked-icon-color)}.el-checkbox__input.is-disabled.is-indeterminate .el-checkbox__inner{background-color:var(--el-checkbox-disabled-checked-input-fill);border-color:var(--el-checkbox-disabled-checked-input-border-color)}.el-checkbox__input.is-disabled.is-indeterminate .el-checkbox__inner:before{background-color:var(--el-checkbox-disabled-checked-icon-color);border-color:var(--el-checkbox-disabled-checked-icon-color)}.el-checkbox__input.is-disabled+span.el-checkbox__label{color:var(--el-disabled-text-color);cursor:not-allowed}.el-checkbox__input.is-checked .el-checkbox__inner{background-color:var(--el-checkbox-checked-bg-color);border-color:var(--el-checkbox-checked-input-border-color)}.el-checkbox__input.is-checked .el-checkbox__inner:after{border-color:var(--el-checkbox-checked-icon-color);transform:rotate(45deg) scaleY(1)}.el-checkbox__input.is-checked+.el-checkbox__label{color:var(--el-checkbox-checked-text-color)}.el-checkbox__input.is-focus:not(.is-checked) .el-checkbox__original:not(:focus-visible){border-color:var(--el-checkbox-input-border-color-hover)}.el-checkbox__input.is-indeterminate .el-checkbox__inner{background-color:var(--el-checkbox-checked-bg-color);border-color:var(--el-checkbox-checked-input-border-color)}.el-checkbox__input.is-indeterminate .el-checkbox__inner:before{background-color:var(--el-checkbox-checked-icon-color);content:\"\";display:block;height:2px;left:0;position:absolute;right:0;top:5px;transform:scale(.5)}.el-checkbox__input.is-indeterminate .el-checkbox__inner:after{display:none}.el-checkbox__inner{background-color:var(--el-checkbox-bg-color);border:var(--el-checkbox-input-border);border-radius:var(--el-checkbox-border-radius);box-sizing:border-box;display:inline-block;height:var(--el-checkbox-input-height);position:relative;transition:border-color .25s cubic-bezier(.71,-.46,.29,1.46),background-color .25s cubic-bezier(.71,-.46,.29,1.46),outline .25s cubic-bezier(.71,-.46,.29,1.46);width:var(--el-checkbox-input-width);z-index:var(--el-index-normal)}.el-checkbox__inner:hover{border-color:var(--el-checkbox-input-border-color-hover)}.el-checkbox__inner:after{border:1px solid transparent;border-left:0;border-top:0;box-sizing:content-box;content:\"\";height:7px;left:4px;position:absolute;top:1px;transform:rotate(45deg) scaleY(0);transform-origin:center;transition:transform .15s ease-in .05s;width:3px}.el-checkbox__original{height:0;margin:0;opacity:0;outline:none;position:absolute;width:0;z-index:-1}.el-checkbox__label{display:inline-block;font-size:var(--el-checkbox-font-size);line-height:1;padding-left:8px}.el-checkbox.el-checkbox--large{height:40px}.el-checkbox.el-checkbox--large .el-checkbox__label{font-size:14px}.el-checkbox.el-checkbox--large .el-checkbox__inner{height:14px;width:14px}.el-checkbox.el-checkbox--small{height:24px}.el-checkbox.el-checkbox--small .el-checkbox__label{font-size:12px}.el-checkbox.el-checkbox--small .el-checkbox__inner{height:12px;width:12px}.el-checkbox.el-checkbox--small .el-checkbox__input.is-indeterminate .el-checkbox__inner:before{top:4px}.el-checkbox.el-checkbox--small .el-checkbox__inner:after{height:6px;width:2px}.el-checkbox:last-of-type{margin-right:0}.el-tree-select{--el-tree-node-content-height:26px;--el-tree-node-hover-bg-color:var(--el-fill-color-light);--el-tree-text-color:var(--el-text-color-regular);--el-tree-expand-icon-color:var(--el-text-color-placeholder)}.el-tree-select__popper .el-tree-node__expand-icon{margin-left:8px}.el-tree-select__popper .el-tree-node.is-checked>.el-tree-node__content .el-select-dropdown__item.selected:after{content:none}.el-tree-select__popper .el-select-dropdown__list>.el-select-dropdown__item{padding-left:32px}.el-tree-select__popper .el-select-dropdown__item{background:transparent!important;flex:1;height:20px;line-height:20px;padding-left:0}.file-type-box[data-v-5c695af6]{width:134px;height:116px;cursor:pointer;background:#fff;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;border:1px solid #f1f1f1;border-radius:10px}.file-type-box img[data-v-5c695af6]{width:60px;margin-top:12px}.file-type-box div.more[data-v-5c695af6]{position:absolute;display:none}.file-type-box[data-v-5c695af6]:hover{background:#f3f5f9;border:1px solid rgb(225,230,239);border-radius:8px}.file-type-box:hover img[data-v-5c695af6]{opacity:.8}.file-type-box:hover div.more[data-v-5c695af6]{display:block;top:5px;right:5px}.search-box[data-v-d1d1015c]{padding-bottom:10px;display:flex}[data-v-d1d1015c] .el-scrollbar__view{display:flex;flex-wrap:wrap;justify-content:space-between;padding-right:10px}.item[data-v-d1d1015c]{margin-bottom:10px}.tip[data-v-8263c1cb]{padding:20px;text-align:center}.el-row{box-sizing:border-box;display:flex;flex-wrap:wrap;position:relative}.el-row.is-justify-center{justify-content:center}.el-row.is-justify-end{justify-content:flex-end}.el-row.is-justify-space-between{justify-content:space-between}.el-row.is-justify-space-around{justify-content:space-around}.el-row.is-justify-space-evenly{justify-content:space-evenly}.el-row.is-align-top{align-items:flex-start}.el-row.is-align-middle{align-items:center}.el-row.is-align-bottom{align-items:flex-end}[class*=el-col-]{box-sizing:border-box}[class*=el-col-].is-guttered{display:block;min-height:1px}.el-col-0{flex:0 0 0%;max-width:0}.el-col-0,.el-col-0.is-guttered{display:none}.el-col-offset-0{margin-left:0}.el-col-pull-0{position:relative;right:0}.el-col-push-0{left:0;position:relative}.el-col-1{flex:0 0 4.1666666667%;max-width:4.1666666667%}.el-col-1,.el-col-1.is-guttered{display:block}.el-col-offset-1{margin-left:4.1666666667%}.el-col-pull-1{position:relative;right:4.1666666667%}.el-col-push-1{left:4.1666666667%;position:relative}.el-col-2{flex:0 0 8.3333333333%;max-width:8.3333333333%}.el-col-2,.el-col-2.is-guttered{display:block}.el-col-offset-2{margin-left:8.3333333333%}.el-col-pull-2{position:relative;right:8.3333333333%}.el-col-push-2{left:8.3333333333%;position:relative}.el-col-3{flex:0 0 12.5%;max-width:12.5%}.el-col-3,.el-col-3.is-guttered{display:block}.el-col-offset-3{margin-left:12.5%}.el-col-pull-3{position:relative;right:12.5%}.el-col-push-3{left:12.5%;position:relative}.el-col-4{flex:0 0 16.6666666667%;max-width:16.6666666667%}.el-col-4,.el-col-4.is-guttered{display:block}.el-col-offset-4{margin-left:16.6666666667%}.el-col-pull-4{position:relative;right:16.6666666667%}.el-col-push-4{left:16.6666666667%;position:relative}.el-col-5{flex:0 0 20.8333333333%;max-width:20.8333333333%}.el-col-5,.el-col-5.is-guttered{display:block}.el-col-offset-5{margin-left:20.8333333333%}.el-col-pull-5{position:relative;right:20.8333333333%}.el-col-push-5{left:20.8333333333%;position:relative}.el-col-6{flex:0 0 25%;max-width:25%}.el-col-6,.el-col-6.is-guttered{display:block}.el-col-offset-6{margin-left:25%}.el-col-pull-6{position:relative;right:25%}.el-col-push-6{left:25%;position:relative}.el-col-7{flex:0 0 29.1666666667%;max-width:29.1666666667%}.el-col-7,.el-col-7.is-guttered{display:block}.el-col-offset-7{margin-left:29.1666666667%}.el-col-pull-7{position:relative;right:29.1666666667%}.el-col-push-7{left:29.1666666667%;position:relative}.el-col-8{flex:0 0 33.3333333333%;max-width:33.3333333333%}.el-col-8,.el-col-8.is-guttered{display:block}.el-col-offset-8{margin-left:33.3333333333%}.el-col-pull-8{position:relative;right:33.3333333333%}.el-col-push-8{left:33.3333333333%;position:relative}.el-col-9{flex:0 0 37.5%;max-width:37.5%}.el-col-9,.el-col-9.is-guttered{display:block}.el-col-offset-9{margin-left:37.5%}.el-col-pull-9{position:relative;right:37.5%}.el-col-push-9{left:37.5%;position:relative}.el-col-10{flex:0 0 41.6666666667%;max-width:41.6666666667%}.el-col-10,.el-col-10.is-guttered{display:block}.el-col-offset-10{margin-left:41.6666666667%}.el-col-pull-10{position:relative;right:41.6666666667%}.el-col-push-10{left:41.6666666667%;position:relative}.el-col-11{flex:0 0 45.8333333333%;max-width:45.8333333333%}.el-col-11,.el-col-11.is-guttered{display:block}.el-col-offset-11{margin-left:45.8333333333%}.el-col-pull-11{position:relative;right:45.8333333333%}.el-col-push-11{left:45.8333333333%;position:relative}.el-col-12{flex:0 0 50%;max-width:50%}.el-col-12,.el-col-12.is-guttered{display:block}.el-col-offset-12{margin-left:50%}.el-col-pull-12{position:relative;right:50%}.el-col-push-12{left:50%;position:relative}.el-col-13{flex:0 0 54.1666666667%;max-width:54.1666666667%}.el-col-13,.el-col-13.is-guttered{display:block}.el-col-offset-13{margin-left:54.1666666667%}.el-col-pull-13{position:relative;right:54.1666666667%}.el-col-push-13{left:54.1666666667%;position:relative}.el-col-14{flex:0 0 58.3333333333%;max-width:58.3333333333%}.el-col-14,.el-col-14.is-guttered{display:block}.el-col-offset-14{margin-left:58.3333333333%}.el-col-pull-14{position:relative;right:58.3333333333%}.el-col-push-14{left:58.3333333333%;position:relative}.el-col-15{flex:0 0 62.5%;max-width:62.5%}.el-col-15,.el-col-15.is-guttered{display:block}.el-col-offset-15{margin-left:62.5%}.el-col-pull-15{position:relative;right:62.5%}.el-col-push-15{left:62.5%;position:relative}.el-col-16{flex:0 0 66.6666666667%;max-width:66.6666666667%}.el-col-16,.el-col-16.is-guttered{display:block}.el-col-offset-16{margin-left:66.6666666667%}.el-col-pull-16{position:relative;right:66.6666666667%}.el-col-push-16{left:66.6666666667%;position:relative}.el-col-17{flex:0 0 70.8333333333%;max-width:70.8333333333%}.el-col-17,.el-col-17.is-guttered{display:block}.el-col-offset-17{margin-left:70.8333333333%}.el-col-pull-17{position:relative;right:70.8333333333%}.el-col-push-17{left:70.8333333333%;position:relative}.el-col-18{flex:0 0 75%;max-width:75%}.el-col-18,.el-col-18.is-guttered{display:block}.el-col-offset-18{margin-left:75%}.el-col-pull-18{position:relative;right:75%}.el-col-push-18{left:75%;position:relative}.el-col-19{flex:0 0 79.1666666667%;max-width:79.1666666667%}.el-col-19,.el-col-19.is-guttered{display:block}.el-col-offset-19{margin-left:79.1666666667%}.el-col-pull-19{position:relative;right:79.1666666667%}.el-col-push-19{left:79.1666666667%;position:relative}.el-col-20{flex:0 0 83.3333333333%;max-width:83.3333333333%}.el-col-20,.el-col-20.is-guttered{display:block}.el-col-offset-20{margin-left:83.3333333333%}.el-col-pull-20{position:relative;right:83.3333333333%}.el-col-push-20{left:83.3333333333%;position:relative}.el-col-21{flex:0 0 87.5%;max-width:87.5%}.el-col-21,.el-col-21.is-guttered{display:block}.el-col-offset-21{margin-left:87.5%}.el-col-pull-21{position:relative;right:87.5%}.el-col-push-21{left:87.5%;position:relative}.el-col-22{flex:0 0 91.6666666667%;max-width:91.6666666667%}.el-col-22,.el-col-22.is-guttered{display:block}.el-col-offset-22{margin-left:91.6666666667%}.el-col-pull-22{position:relative;right:91.6666666667%}.el-col-push-22{left:91.6666666667%;position:relative}.el-col-23{flex:0 0 95.8333333333%;max-width:95.8333333333%}.el-col-23,.el-col-23.is-guttered{display:block}.el-col-offset-23{margin-left:95.8333333333%}.el-col-pull-23{position:relative;right:95.8333333333%}.el-col-push-23{left:95.8333333333%;position:relative}.el-col-24{flex:0 0 100%;max-width:100%}.el-col-24,.el-col-24.is-guttered{display:block}.el-col-offset-24{margin-left:100%}.el-col-pull-24{position:relative;right:100%}.el-col-push-24{left:100%;position:relative}@media only screen and (max-width:767px){.el-col-xs-0{display:none;flex:0 0 0%;max-width:0}.el-col-xs-0.is-guttered{display:none}.el-col-xs-offset-0{margin-left:0}.el-col-xs-pull-0{position:relative;right:0}.el-col-xs-push-0{left:0;position:relative}.el-col-xs-1{flex:0 0 4.1666666667%;max-width:4.1666666667%}.el-col-xs-1,.el-col-xs-1.is-guttered{display:block}.el-col-xs-offset-1{margin-left:4.1666666667%}.el-col-xs-pull-1{position:relative;right:4.1666666667%}.el-col-xs-push-1{left:4.1666666667%;position:relative}.el-col-xs-2{flex:0 0 8.3333333333%;max-width:8.3333333333%}.el-col-xs-2,.el-col-xs-2.is-guttered{display:block}.el-col-xs-offset-2{margin-left:8.3333333333%}.el-col-xs-pull-2{position:relative;right:8.3333333333%}.el-col-xs-push-2{left:8.3333333333%;position:relative}.el-col-xs-3{flex:0 0 12.5%;max-width:12.5%}.el-col-xs-3,.el-col-xs-3.is-guttered{display:block}.el-col-xs-offset-3{margin-left:12.5%}.el-col-xs-pull-3{position:relative;right:12.5%}.el-col-xs-push-3{left:12.5%;position:relative}.el-col-xs-4{flex:0 0 16.6666666667%;max-width:16.6666666667%}.el-col-xs-4,.el-col-xs-4.is-guttered{display:block}.el-col-xs-offset-4{margin-left:16.6666666667%}.el-col-xs-pull-4{position:relative;right:16.6666666667%}.el-col-xs-push-4{left:16.6666666667%;position:relative}.el-col-xs-5{flex:0 0 20.8333333333%;max-width:20.8333333333%}.el-col-xs-5,.el-col-xs-5.is-guttered{display:block}.el-col-xs-offset-5{margin-left:20.8333333333%}.el-col-xs-pull-5{position:relative;right:20.8333333333%}.el-col-xs-push-5{left:20.8333333333%;position:relative}.el-col-xs-6{flex:0 0 25%;max-width:25%}.el-col-xs-6,.el-col-xs-6.is-guttered{display:block}.el-col-xs-offset-6{margin-left:25%}.el-col-xs-pull-6{position:relative;right:25%}.el-col-xs-push-6{left:25%;position:relative}.el-col-xs-7{flex:0 0 29.1666666667%;max-width:29.1666666667%}.el-col-xs-7,.el-col-xs-7.is-guttered{display:block}.el-col-xs-offset-7{margin-left:29.1666666667%}.el-col-xs-pull-7{position:relative;right:29.1666666667%}.el-col-xs-push-7{left:29.1666666667%;position:relative}.el-col-xs-8{flex:0 0 33.3333333333%;max-width:33.3333333333%}.el-col-xs-8,.el-col-xs-8.is-guttered{display:block}.el-col-xs-offset-8{margin-left:33.3333333333%}.el-col-xs-pull-8{position:relative;right:33.3333333333%}.el-col-xs-push-8{left:33.3333333333%;position:relative}.el-col-xs-9{flex:0 0 37.5%;max-width:37.5%}.el-col-xs-9,.el-col-xs-9.is-guttered{display:block}.el-col-xs-offset-9{margin-left:37.5%}.el-col-xs-pull-9{position:relative;right:37.5%}.el-col-xs-push-9{left:37.5%;position:relative}.el-col-xs-10{display:block;flex:0 0 41.6666666667%;max-width:41.6666666667%}.el-col-xs-10.is-guttered{display:block}.el-col-xs-offset-10{margin-left:41.6666666667%}.el-col-xs-pull-10{position:relative;right:41.6666666667%}.el-col-xs-push-10{left:41.6666666667%;position:relative}.el-col-xs-11{display:block;flex:0 0 45.8333333333%;max-width:45.8333333333%}.el-col-xs-11.is-guttered{display:block}.el-col-xs-offset-11{margin-left:45.8333333333%}.el-col-xs-pull-11{position:relative;right:45.8333333333%}.el-col-xs-push-11{left:45.8333333333%;position:relative}.el-col-xs-12{display:block;flex:0 0 50%;max-width:50%}.el-col-xs-12.is-guttered{display:block}.el-col-xs-offset-12{margin-left:50%}.el-col-xs-pull-12{position:relative;right:50%}.el-col-xs-push-12{left:50%;position:relative}.el-col-xs-13{display:block;flex:0 0 54.1666666667%;max-width:54.1666666667%}.el-col-xs-13.is-guttered{display:block}.el-col-xs-offset-13{margin-left:54.1666666667%}.el-col-xs-pull-13{position:relative;right:54.1666666667%}.el-col-xs-push-13{left:54.1666666667%;position:relative}.el-col-xs-14{display:block;flex:0 0 58.3333333333%;max-width:58.3333333333%}.el-col-xs-14.is-guttered{display:block}.el-col-xs-offset-14{margin-left:58.3333333333%}.el-col-xs-pull-14{position:relative;right:58.3333333333%}.el-col-xs-push-14{left:58.3333333333%;position:relative}.el-col-xs-15{display:block;flex:0 0 62.5%;max-width:62.5%}.el-col-xs-15.is-guttered{display:block}.el-col-xs-offset-15{margin-left:62.5%}.el-col-xs-pull-15{position:relative;right:62.5%}.el-col-xs-push-15{left:62.5%;position:relative}.el-col-xs-16{display:block;flex:0 0 66.6666666667%;max-width:66.6666666667%}.el-col-xs-16.is-guttered{display:block}.el-col-xs-offset-16{margin-left:66.6666666667%}.el-col-xs-pull-16{position:relative;right:66.6666666667%}.el-col-xs-push-16{left:66.6666666667%;position:relative}.el-col-xs-17{display:block;flex:0 0 70.8333333333%;max-width:70.8333333333%}.el-col-xs-17.is-guttered{display:block}.el-col-xs-offset-17{margin-left:70.8333333333%}.el-col-xs-pull-17{position:relative;right:70.8333333333%}.el-col-xs-push-17{left:70.8333333333%;position:relative}.el-col-xs-18{display:block;flex:0 0 75%;max-width:75%}.el-col-xs-18.is-guttered{display:block}.el-col-xs-offset-18{margin-left:75%}.el-col-xs-pull-18{position:relative;right:75%}.el-col-xs-push-18{left:75%;position:relative}.el-col-xs-19{display:block;flex:0 0 79.1666666667%;max-width:79.1666666667%}.el-col-xs-19.is-guttered{display:block}.el-col-xs-offset-19{margin-left:79.1666666667%}.el-col-xs-pull-19{position:relative;right:79.1666666667%}.el-col-xs-push-19{left:79.1666666667%;position:relative}.el-col-xs-20{display:block;flex:0 0 83.3333333333%;max-width:83.3333333333%}.el-col-xs-20.is-guttered{display:block}.el-col-xs-offset-20{margin-left:83.3333333333%}.el-col-xs-pull-20{position:relative;right:83.3333333333%}.el-col-xs-push-20{left:83.3333333333%;position:relative}.el-col-xs-21{display:block;flex:0 0 87.5%;max-width:87.5%}.el-col-xs-21.is-guttered{display:block}.el-col-xs-offset-21{margin-left:87.5%}.el-col-xs-pull-21{position:relative;right:87.5%}.el-col-xs-push-21{left:87.5%;position:relative}.el-col-xs-22{display:block;flex:0 0 91.6666666667%;max-width:91.6666666667%}.el-col-xs-22.is-guttered{display:block}.el-col-xs-offset-22{margin-left:91.6666666667%}.el-col-xs-pull-22{position:relative;right:91.6666666667%}.el-col-xs-push-22{left:91.6666666667%;position:relative}.el-col-xs-23{display:block;flex:0 0 95.8333333333%;max-width:95.8333333333%}.el-col-xs-23.is-guttered{display:block}.el-col-xs-offset-23{margin-left:95.8333333333%}.el-col-xs-pull-23{position:relative;right:95.8333333333%}.el-col-xs-push-23{left:95.8333333333%;position:relative}.el-col-xs-24{display:block;flex:0 0 100%;max-width:100%}.el-col-xs-24.is-guttered{display:block}.el-col-xs-offset-24{margin-left:100%}.el-col-xs-pull-24{position:relative;right:100%}.el-col-xs-push-24{left:100%;position:relative}}@media only screen and (min-width:768px){.el-col-sm-0{display:none;flex:0 0 0%;max-width:0}.el-col-sm-0.is-guttered{display:none}.el-col-sm-offset-0{margin-left:0}.el-col-sm-pull-0{position:relative;right:0}.el-col-sm-push-0{left:0;position:relative}.el-col-sm-1{flex:0 0 4.1666666667%;max-width:4.1666666667%}.el-col-sm-1,.el-col-sm-1.is-guttered{display:block}.el-col-sm-offset-1{margin-left:4.1666666667%}.el-col-sm-pull-1{position:relative;right:4.1666666667%}.el-col-sm-push-1{left:4.1666666667%;position:relative}.el-col-sm-2{flex:0 0 8.3333333333%;max-width:8.3333333333%}.el-col-sm-2,.el-col-sm-2.is-guttered{display:block}.el-col-sm-offset-2{margin-left:8.3333333333%}.el-col-sm-pull-2{position:relative;right:8.3333333333%}.el-col-sm-push-2{left:8.3333333333%;position:relative}.el-col-sm-3{flex:0 0 12.5%;max-width:12.5%}.el-col-sm-3,.el-col-sm-3.is-guttered{display:block}.el-col-sm-offset-3{margin-left:12.5%}.el-col-sm-pull-3{position:relative;right:12.5%}.el-col-sm-push-3{left:12.5%;position:relative}.el-col-sm-4{flex:0 0 16.6666666667%;max-width:16.6666666667%}.el-col-sm-4,.el-col-sm-4.is-guttered{display:block}.el-col-sm-offset-4{margin-left:16.6666666667%}.el-col-sm-pull-4{position:relative;right:16.6666666667%}.el-col-sm-push-4{left:16.6666666667%;position:relative}.el-col-sm-5{flex:0 0 20.8333333333%;max-width:20.8333333333%}.el-col-sm-5,.el-col-sm-5.is-guttered{display:block}.el-col-sm-offset-5{margin-left:20.8333333333%}.el-col-sm-pull-5{position:relative;right:20.8333333333%}.el-col-sm-push-5{left:20.8333333333%;position:relative}.el-col-sm-6{flex:0 0 25%;max-width:25%}.el-col-sm-6,.el-col-sm-6.is-guttered{display:block}.el-col-sm-offset-6{margin-left:25%}.el-col-sm-pull-6{position:relative;right:25%}.el-col-sm-push-6{left:25%;position:relative}.el-col-sm-7{flex:0 0 29.1666666667%;max-width:29.1666666667%}.el-col-sm-7,.el-col-sm-7.is-guttered{display:block}.el-col-sm-offset-7{margin-left:29.1666666667%}.el-col-sm-pull-7{position:relative;right:29.1666666667%}.el-col-sm-push-7{left:29.1666666667%;position:relative}.el-col-sm-8{flex:0 0 33.3333333333%;max-width:33.3333333333%}.el-col-sm-8,.el-col-sm-8.is-guttered{display:block}.el-col-sm-offset-8{margin-left:33.3333333333%}.el-col-sm-pull-8{position:relative;right:33.3333333333%}.el-col-sm-push-8{left:33.3333333333%;position:relative}.el-col-sm-9{flex:0 0 37.5%;max-width:37.5%}.el-col-sm-9,.el-col-sm-9.is-guttered{display:block}.el-col-sm-offset-9{margin-left:37.5%}.el-col-sm-pull-9{position:relative;right:37.5%}.el-col-sm-push-9{left:37.5%;position:relative}.el-col-sm-10{display:block;flex:0 0 41.6666666667%;max-width:41.6666666667%}.el-col-sm-10.is-guttered{display:block}.el-col-sm-offset-10{margin-left:41.6666666667%}.el-col-sm-pull-10{position:relative;right:41.6666666667%}.el-col-sm-push-10{left:41.6666666667%;position:relative}.el-col-sm-11{display:block;flex:0 0 45.8333333333%;max-width:45.8333333333%}.el-col-sm-11.is-guttered{display:block}.el-col-sm-offset-11{margin-left:45.8333333333%}.el-col-sm-pull-11{position:relative;right:45.8333333333%}.el-col-sm-push-11{left:45.8333333333%;position:relative}.el-col-sm-12{display:block;flex:0 0 50%;max-width:50%}.el-col-sm-12.is-guttered{display:block}.el-col-sm-offset-12{margin-left:50%}.el-col-sm-pull-12{position:relative;right:50%}.el-col-sm-push-12{left:50%;position:relative}.el-col-sm-13{display:block;flex:0 0 54.1666666667%;max-width:54.1666666667%}.el-col-sm-13.is-guttered{display:block}.el-col-sm-offset-13{margin-left:54.1666666667%}.el-col-sm-pull-13{position:relative;right:54.1666666667%}.el-col-sm-push-13{left:54.1666666667%;position:relative}.el-col-sm-14{display:block;flex:0 0 58.3333333333%;max-width:58.3333333333%}.el-col-sm-14.is-guttered{display:block}.el-col-sm-offset-14{margin-left:58.3333333333%}.el-col-sm-pull-14{position:relative;right:58.3333333333%}.el-col-sm-push-14{left:58.3333333333%;position:relative}.el-col-sm-15{display:block;flex:0 0 62.5%;max-width:62.5%}.el-col-sm-15.is-guttered{display:block}.el-col-sm-offset-15{margin-left:62.5%}.el-col-sm-pull-15{position:relative;right:62.5%}.el-col-sm-push-15{left:62.5%;position:relative}.el-col-sm-16{display:block;flex:0 0 66.6666666667%;max-width:66.6666666667%}.el-col-sm-16.is-guttered{display:block}.el-col-sm-offset-16{margin-left:66.6666666667%}.el-col-sm-pull-16{position:relative;right:66.6666666667%}.el-col-sm-push-16{left:66.6666666667%;position:relative}.el-col-sm-17{display:block;flex:0 0 70.8333333333%;max-width:70.8333333333%}.el-col-sm-17.is-guttered{display:block}.el-col-sm-offset-17{margin-left:70.8333333333%}.el-col-sm-pull-17{position:relative;right:70.8333333333%}.el-col-sm-push-17{left:70.8333333333%;position:relative}.el-col-sm-18{display:block;flex:0 0 75%;max-width:75%}.el-col-sm-18.is-guttered{display:block}.el-col-sm-offset-18{margin-left:75%}.el-col-sm-pull-18{position:relative;right:75%}.el-col-sm-push-18{left:75%;position:relative}.el-col-sm-19{display:block;flex:0 0 79.1666666667%;max-width:79.1666666667%}.el-col-sm-19.is-guttered{display:block}.el-col-sm-offset-19{margin-left:79.1666666667%}.el-col-sm-pull-19{position:relative;right:79.1666666667%}.el-col-sm-push-19{left:79.1666666667%;position:relative}.el-col-sm-20{display:block;flex:0 0 83.3333333333%;max-width:83.3333333333%}.el-col-sm-20.is-guttered{display:block}.el-col-sm-offset-20{margin-left:83.3333333333%}.el-col-sm-pull-20{position:relative;right:83.3333333333%}.el-col-sm-push-20{left:83.3333333333%;position:relative}.el-col-sm-21{display:block;flex:0 0 87.5%;max-width:87.5%}.el-col-sm-21.is-guttered{display:block}.el-col-sm-offset-21{margin-left:87.5%}.el-col-sm-pull-21{position:relative;right:87.5%}.el-col-sm-push-21{left:87.5%;position:relative}.el-col-sm-22{display:block;flex:0 0 91.6666666667%;max-width:91.6666666667%}.el-col-sm-22.is-guttered{display:block}.el-col-sm-offset-22{margin-left:91.6666666667%}.el-col-sm-pull-22{position:relative;right:91.6666666667%}.el-col-sm-push-22{left:91.6666666667%;position:relative}.el-col-sm-23{display:block;flex:0 0 95.8333333333%;max-width:95.8333333333%}.el-col-sm-23.is-guttered{display:block}.el-col-sm-offset-23{margin-left:95.8333333333%}.el-col-sm-pull-23{position:relative;right:95.8333333333%}.el-col-sm-push-23{left:95.8333333333%;position:relative}.el-col-sm-24{display:block;flex:0 0 100%;max-width:100%}.el-col-sm-24.is-guttered{display:block}.el-col-sm-offset-24{margin-left:100%}.el-col-sm-pull-24{position:relative;right:100%}.el-col-sm-push-24{left:100%;position:relative}}@media only screen and (min-width:992px){.el-col-md-0{display:none;flex:0 0 0%;max-width:0}.el-col-md-0.is-guttered{display:none}.el-col-md-offset-0{margin-left:0}.el-col-md-pull-0{position:relative;right:0}.el-col-md-push-0{left:0;position:relative}.el-col-md-1{flex:0 0 4.1666666667%;max-width:4.1666666667%}.el-col-md-1,.el-col-md-1.is-guttered{display:block}.el-col-md-offset-1{margin-left:4.1666666667%}.el-col-md-pull-1{position:relative;right:4.1666666667%}.el-col-md-push-1{left:4.1666666667%;position:relative}.el-col-md-2{flex:0 0 8.3333333333%;max-width:8.3333333333%}.el-col-md-2,.el-col-md-2.is-guttered{display:block}.el-col-md-offset-2{margin-left:8.3333333333%}.el-col-md-pull-2{position:relative;right:8.3333333333%}.el-col-md-push-2{left:8.3333333333%;position:relative}.el-col-md-3{flex:0 0 12.5%;max-width:12.5%}.el-col-md-3,.el-col-md-3.is-guttered{display:block}.el-col-md-offset-3{margin-left:12.5%}.el-col-md-pull-3{position:relative;right:12.5%}.el-col-md-push-3{left:12.5%;position:relative}.el-col-md-4{flex:0 0 16.6666666667%;max-width:16.6666666667%}.el-col-md-4,.el-col-md-4.is-guttered{display:block}.el-col-md-offset-4{margin-left:16.6666666667%}.el-col-md-pull-4{position:relative;right:16.6666666667%}.el-col-md-push-4{left:16.6666666667%;position:relative}.el-col-md-5{flex:0 0 20.8333333333%;max-width:20.8333333333%}.el-col-md-5,.el-col-md-5.is-guttered{display:block}.el-col-md-offset-5{margin-left:20.8333333333%}.el-col-md-pull-5{position:relative;right:20.8333333333%}.el-col-md-push-5{left:20.8333333333%;position:relative}.el-col-md-6{flex:0 0 25%;max-width:25%}.el-col-md-6,.el-col-md-6.is-guttered{display:block}.el-col-md-offset-6{margin-left:25%}.el-col-md-pull-6{position:relative;right:25%}.el-col-md-push-6{left:25%;position:relative}.el-col-md-7{flex:0 0 29.1666666667%;max-width:29.1666666667%}.el-col-md-7,.el-col-md-7.is-guttered{display:block}.el-col-md-offset-7{margin-left:29.1666666667%}.el-col-md-pull-7{position:relative;right:29.1666666667%}.el-col-md-push-7{left:29.1666666667%;position:relative}.el-col-md-8{flex:0 0 33.3333333333%;max-width:33.3333333333%}.el-col-md-8,.el-col-md-8.is-guttered{display:block}.el-col-md-offset-8{margin-left:33.3333333333%}.el-col-md-pull-8{position:relative;right:33.3333333333%}.el-col-md-push-8{left:33.3333333333%;position:relative}.el-col-md-9{flex:0 0 37.5%;max-width:37.5%}.el-col-md-9,.el-col-md-9.is-guttered{display:block}.el-col-md-offset-9{margin-left:37.5%}.el-col-md-pull-9{position:relative;right:37.5%}.el-col-md-push-9{left:37.5%;position:relative}.el-col-md-10{display:block;flex:0 0 41.6666666667%;max-width:41.6666666667%}.el-col-md-10.is-guttered{display:block}.el-col-md-offset-10{margin-left:41.6666666667%}.el-col-md-pull-10{position:relative;right:41.6666666667%}.el-col-md-push-10{left:41.6666666667%;position:relative}.el-col-md-11{display:block;flex:0 0 45.8333333333%;max-width:45.8333333333%}.el-col-md-11.is-guttered{display:block}.el-col-md-offset-11{margin-left:45.8333333333%}.el-col-md-pull-11{position:relative;right:45.8333333333%}.el-col-md-push-11{left:45.8333333333%;position:relative}.el-col-md-12{display:block;flex:0 0 50%;max-width:50%}.el-col-md-12.is-guttered{display:block}.el-col-md-offset-12{margin-left:50%}.el-col-md-pull-12{position:relative;right:50%}.el-col-md-push-12{left:50%;position:relative}.el-col-md-13{display:block;flex:0 0 54.1666666667%;max-width:54.1666666667%}.el-col-md-13.is-guttered{display:block}.el-col-md-offset-13{margin-left:54.1666666667%}.el-col-md-pull-13{position:relative;right:54.1666666667%}.el-col-md-push-13{left:54.1666666667%;position:relative}.el-col-md-14{display:block;flex:0 0 58.3333333333%;max-width:58.3333333333%}.el-col-md-14.is-guttered{display:block}.el-col-md-offset-14{margin-left:58.3333333333%}.el-col-md-pull-14{position:relative;right:58.3333333333%}.el-col-md-push-14{left:58.3333333333%;position:relative}.el-col-md-15{display:block;flex:0 0 62.5%;max-width:62.5%}.el-col-md-15.is-guttered{display:block}.el-col-md-offset-15{margin-left:62.5%}.el-col-md-pull-15{position:relative;right:62.5%}.el-col-md-push-15{left:62.5%;position:relative}.el-col-md-16{display:block;flex:0 0 66.6666666667%;max-width:66.6666666667%}.el-col-md-16.is-guttered{display:block}.el-col-md-offset-16{margin-left:66.6666666667%}.el-col-md-pull-16{position:relative;right:66.6666666667%}.el-col-md-push-16{left:66.6666666667%;position:relative}.el-col-md-17{display:block;flex:0 0 70.8333333333%;max-width:70.8333333333%}.el-col-md-17.is-guttered{display:block}.el-col-md-offset-17{margin-left:70.8333333333%}.el-col-md-pull-17{position:relative;right:70.8333333333%}.el-col-md-push-17{left:70.8333333333%;position:relative}.el-col-md-18{display:block;flex:0 0 75%;max-width:75%}.el-col-md-18.is-guttered{display:block}.el-col-md-offset-18{margin-left:75%}.el-col-md-pull-18{position:relative;right:75%}.el-col-md-push-18{left:75%;position:relative}.el-col-md-19{display:block;flex:0 0 79.1666666667%;max-width:79.1666666667%}.el-col-md-19.is-guttered{display:block}.el-col-md-offset-19{margin-left:79.1666666667%}.el-col-md-pull-19{position:relative;right:79.1666666667%}.el-col-md-push-19{left:79.1666666667%;position:relative}.el-col-md-20{display:block;flex:0 0 83.3333333333%;max-width:83.3333333333%}.el-col-md-20.is-guttered{display:block}.el-col-md-offset-20{margin-left:83.3333333333%}.el-col-md-pull-20{position:relative;right:83.3333333333%}.el-col-md-push-20{left:83.3333333333%;position:relative}.el-col-md-21{display:block;flex:0 0 87.5%;max-width:87.5%}.el-col-md-21.is-guttered{display:block}.el-col-md-offset-21{margin-left:87.5%}.el-col-md-pull-21{position:relative;right:87.5%}.el-col-md-push-21{left:87.5%;position:relative}.el-col-md-22{display:block;flex:0 0 91.6666666667%;max-width:91.6666666667%}.el-col-md-22.is-guttered{display:block}.el-col-md-offset-22{margin-left:91.6666666667%}.el-col-md-pull-22{position:relative;right:91.6666666667%}.el-col-md-push-22{left:91.6666666667%;position:relative}.el-col-md-23{display:block;flex:0 0 95.8333333333%;max-width:95.8333333333%}.el-col-md-23.is-guttered{display:block}.el-col-md-offset-23{margin-left:95.8333333333%}.el-col-md-pull-23{position:relative;right:95.8333333333%}.el-col-md-push-23{left:95.8333333333%;position:relative}.el-col-md-24{display:block;flex:0 0 100%;max-width:100%}.el-col-md-24.is-guttered{display:block}.el-col-md-offset-24{margin-left:100%}.el-col-md-pull-24{position:relative;right:100%}.el-col-md-push-24{left:100%;position:relative}}@media only screen and (min-width:1200px){.el-col-lg-0{display:none;flex:0 0 0%;max-width:0}.el-col-lg-0.is-guttered{display:none}.el-col-lg-offset-0{margin-left:0}.el-col-lg-pull-0{position:relative;right:0}.el-col-lg-push-0{left:0;position:relative}.el-col-lg-1{flex:0 0 4.1666666667%;max-width:4.1666666667%}.el-col-lg-1,.el-col-lg-1.is-guttered{display:block}.el-col-lg-offset-1{margin-left:4.1666666667%}.el-col-lg-pull-1{position:relative;right:4.1666666667%}.el-col-lg-push-1{left:4.1666666667%;position:relative}.el-col-lg-2{flex:0 0 8.3333333333%;max-width:8.3333333333%}.el-col-lg-2,.el-col-lg-2.is-guttered{display:block}.el-col-lg-offset-2{margin-left:8.3333333333%}.el-col-lg-pull-2{position:relative;right:8.3333333333%}.el-col-lg-push-2{left:8.3333333333%;position:relative}.el-col-lg-3{flex:0 0 12.5%;max-width:12.5%}.el-col-lg-3,.el-col-lg-3.is-guttered{display:block}.el-col-lg-offset-3{margin-left:12.5%}.el-col-lg-pull-3{position:relative;right:12.5%}.el-col-lg-push-3{left:12.5%;position:relative}.el-col-lg-4{flex:0 0 16.6666666667%;max-width:16.6666666667%}.el-col-lg-4,.el-col-lg-4.is-guttered{display:block}.el-col-lg-offset-4{margin-left:16.6666666667%}.el-col-lg-pull-4{position:relative;right:16.6666666667%}.el-col-lg-push-4{left:16.6666666667%;position:relative}.el-col-lg-5{flex:0 0 20.8333333333%;max-width:20.8333333333%}.el-col-lg-5,.el-col-lg-5.is-guttered{display:block}.el-col-lg-offset-5{margin-left:20.8333333333%}.el-col-lg-pull-5{position:relative;right:20.8333333333%}.el-col-lg-push-5{left:20.8333333333%;position:relative}.el-col-lg-6{flex:0 0 25%;max-width:25%}.el-col-lg-6,.el-col-lg-6.is-guttered{display:block}.el-col-lg-offset-6{margin-left:25%}.el-col-lg-pull-6{position:relative;right:25%}.el-col-lg-push-6{left:25%;position:relative}.el-col-lg-7{flex:0 0 29.1666666667%;max-width:29.1666666667%}.el-col-lg-7,.el-col-lg-7.is-guttered{display:block}.el-col-lg-offset-7{margin-left:29.1666666667%}.el-col-lg-pull-7{position:relative;right:29.1666666667%}.el-col-lg-push-7{left:29.1666666667%;position:relative}.el-col-lg-8{flex:0 0 33.3333333333%;max-width:33.3333333333%}.el-col-lg-8,.el-col-lg-8.is-guttered{display:block}.el-col-lg-offset-8{margin-left:33.3333333333%}.el-col-lg-pull-8{position:relative;right:33.3333333333%}.el-col-lg-push-8{left:33.3333333333%;position:relative}.el-col-lg-9{flex:0 0 37.5%;max-width:37.5%}.el-col-lg-9,.el-col-lg-9.is-guttered{display:block}.el-col-lg-offset-9{margin-left:37.5%}.el-col-lg-pull-9{position:relative;right:37.5%}.el-col-lg-push-9{left:37.5%;position:relative}.el-col-lg-10{display:block;flex:0 0 41.6666666667%;max-width:41.6666666667%}.el-col-lg-10.is-guttered{display:block}.el-col-lg-offset-10{margin-left:41.6666666667%}.el-col-lg-pull-10{position:relative;right:41.6666666667%}.el-col-lg-push-10{left:41.6666666667%;position:relative}.el-col-lg-11{display:block;flex:0 0 45.8333333333%;max-width:45.8333333333%}.el-col-lg-11.is-guttered{display:block}.el-col-lg-offset-11{margin-left:45.8333333333%}.el-col-lg-pull-11{position:relative;right:45.8333333333%}.el-col-lg-push-11{left:45.8333333333%;position:relative}.el-col-lg-12{display:block;flex:0 0 50%;max-width:50%}.el-col-lg-12.is-guttered{display:block}.el-col-lg-offset-12{margin-left:50%}.el-col-lg-pull-12{position:relative;right:50%}.el-col-lg-push-12{left:50%;position:relative}.el-col-lg-13{display:block;flex:0 0 54.1666666667%;max-width:54.1666666667%}.el-col-lg-13.is-guttered{display:block}.el-col-lg-offset-13{margin-left:54.1666666667%}.el-col-lg-pull-13{position:relative;right:54.1666666667%}.el-col-lg-push-13{left:54.1666666667%;position:relative}.el-col-lg-14{display:block;flex:0 0 58.3333333333%;max-width:58.3333333333%}.el-col-lg-14.is-guttered{display:block}.el-col-lg-offset-14{margin-left:58.3333333333%}.el-col-lg-pull-14{position:relative;right:58.3333333333%}.el-col-lg-push-14{left:58.3333333333%;position:relative}.el-col-lg-15{display:block;flex:0 0 62.5%;max-width:62.5%}.el-col-lg-15.is-guttered{display:block}.el-col-lg-offset-15{margin-left:62.5%}.el-col-lg-pull-15{position:relative;right:62.5%}.el-col-lg-push-15{left:62.5%;position:relative}.el-col-lg-16{display:block;flex:0 0 66.6666666667%;max-width:66.6666666667%}.el-col-lg-16.is-guttered{display:block}.el-col-lg-offset-16{margin-left:66.6666666667%}.el-col-lg-pull-16{position:relative;right:66.6666666667%}.el-col-lg-push-16{left:66.6666666667%;position:relative}.el-col-lg-17{display:block;flex:0 0 70.8333333333%;max-width:70.8333333333%}.el-col-lg-17.is-guttered{display:block}.el-col-lg-offset-17{margin-left:70.8333333333%}.el-col-lg-pull-17{position:relative;right:70.8333333333%}.el-col-lg-push-17{left:70.8333333333%;position:relative}.el-col-lg-18{display:block;flex:0 0 75%;max-width:75%}.el-col-lg-18.is-guttered{display:block}.el-col-lg-offset-18{margin-left:75%}.el-col-lg-pull-18{position:relative;right:75%}.el-col-lg-push-18{left:75%;position:relative}.el-col-lg-19{display:block;flex:0 0 79.1666666667%;max-width:79.1666666667%}.el-col-lg-19.is-guttered{display:block}.el-col-lg-offset-19{margin-left:79.1666666667%}.el-col-lg-pull-19{position:relative;right:79.1666666667%}.el-col-lg-push-19{left:79.1666666667%;position:relative}.el-col-lg-20{display:block;flex:0 0 83.3333333333%;max-width:83.3333333333%}.el-col-lg-20.is-guttered{display:block}.el-col-lg-offset-20{margin-left:83.3333333333%}.el-col-lg-pull-20{position:relative;right:83.3333333333%}.el-col-lg-push-20{left:83.3333333333%;position:relative}.el-col-lg-21{display:block;flex:0 0 87.5%;max-width:87.5%}.el-col-lg-21.is-guttered{display:block}.el-col-lg-offset-21{margin-left:87.5%}.el-col-lg-pull-21{position:relative;right:87.5%}.el-col-lg-push-21{left:87.5%;position:relative}.el-col-lg-22{display:block;flex:0 0 91.6666666667%;max-width:91.6666666667%}.el-col-lg-22.is-guttered{display:block}.el-col-lg-offset-22{margin-left:91.6666666667%}.el-col-lg-pull-22{position:relative;right:91.6666666667%}.el-col-lg-push-22{left:91.6666666667%;position:relative}.el-col-lg-23{display:block;flex:0 0 95.8333333333%;max-width:95.8333333333%}.el-col-lg-23.is-guttered{display:block}.el-col-lg-offset-23{margin-left:95.8333333333%}.el-col-lg-pull-23{position:relative;right:95.8333333333%}.el-col-lg-push-23{left:95.8333333333%;position:relative}.el-col-lg-24{display:block;flex:0 0 100%;max-width:100%}.el-col-lg-24.is-guttered{display:block}.el-col-lg-offset-24{margin-left:100%}.el-col-lg-pull-24{position:relative;right:100%}.el-col-lg-push-24{left:100%;position:relative}}@media only screen and (min-width:1920px){.el-col-xl-0{display:none;flex:0 0 0%;max-width:0}.el-col-xl-0.is-guttered{display:none}.el-col-xl-offset-0{margin-left:0}.el-col-xl-pull-0{position:relative;right:0}.el-col-xl-push-0{left:0;position:relative}.el-col-xl-1{flex:0 0 4.1666666667%;max-width:4.1666666667%}.el-col-xl-1,.el-col-xl-1.is-guttered{display:block}.el-col-xl-offset-1{margin-left:4.1666666667%}.el-col-xl-pull-1{position:relative;right:4.1666666667%}.el-col-xl-push-1{left:4.1666666667%;position:relative}.el-col-xl-2{flex:0 0 8.3333333333%;max-width:8.3333333333%}.el-col-xl-2,.el-col-xl-2.is-guttered{display:block}.el-col-xl-offset-2{margin-left:8.3333333333%}.el-col-xl-pull-2{position:relative;right:8.3333333333%}.el-col-xl-push-2{left:8.3333333333%;position:relative}.el-col-xl-3{flex:0 0 12.5%;max-width:12.5%}.el-col-xl-3,.el-col-xl-3.is-guttered{display:block}.el-col-xl-offset-3{margin-left:12.5%}.el-col-xl-pull-3{position:relative;right:12.5%}.el-col-xl-push-3{left:12.5%;position:relative}.el-col-xl-4{flex:0 0 16.6666666667%;max-width:16.6666666667%}.el-col-xl-4,.el-col-xl-4.is-guttered{display:block}.el-col-xl-offset-4{margin-left:16.6666666667%}.el-col-xl-pull-4{position:relative;right:16.6666666667%}.el-col-xl-push-4{left:16.6666666667%;position:relative}.el-col-xl-5{flex:0 0 20.8333333333%;max-width:20.8333333333%}.el-col-xl-5,.el-col-xl-5.is-guttered{display:block}.el-col-xl-offset-5{margin-left:20.8333333333%}.el-col-xl-pull-5{position:relative;right:20.8333333333%}.el-col-xl-push-5{left:20.8333333333%;position:relative}.el-col-xl-6{flex:0 0 25%;max-width:25%}.el-col-xl-6,.el-col-xl-6.is-guttered{display:block}.el-col-xl-offset-6{margin-left:25%}.el-col-xl-pull-6{position:relative;right:25%}.el-col-xl-push-6{left:25%;position:relative}.el-col-xl-7{flex:0 0 29.1666666667%;max-width:29.1666666667%}.el-col-xl-7,.el-col-xl-7.is-guttered{display:block}.el-col-xl-offset-7{margin-left:29.1666666667%}.el-col-xl-pull-7{position:relative;right:29.1666666667%}.el-col-xl-push-7{left:29.1666666667%;position:relative}.el-col-xl-8{flex:0 0 33.3333333333%;max-width:33.3333333333%}.el-col-xl-8,.el-col-xl-8.is-guttered{display:block}.el-col-xl-offset-8{margin-left:33.3333333333%}.el-col-xl-pull-8{position:relative;right:33.3333333333%}.el-col-xl-push-8{left:33.3333333333%;position:relative}.el-col-xl-9{flex:0 0 37.5%;max-width:37.5%}.el-col-xl-9,.el-col-xl-9.is-guttered{display:block}.el-col-xl-offset-9{margin-left:37.5%}.el-col-xl-pull-9{position:relative;right:37.5%}.el-col-xl-push-9{left:37.5%;position:relative}.el-col-xl-10{display:block;flex:0 0 41.6666666667%;max-width:41.6666666667%}.el-col-xl-10.is-guttered{display:block}.el-col-xl-offset-10{margin-left:41.6666666667%}.el-col-xl-pull-10{position:relative;right:41.6666666667%}.el-col-xl-push-10{left:41.6666666667%;position:relative}.el-col-xl-11{display:block;flex:0 0 45.8333333333%;max-width:45.8333333333%}.el-col-xl-11.is-guttered{display:block}.el-col-xl-offset-11{margin-left:45.8333333333%}.el-col-xl-pull-11{position:relative;right:45.8333333333%}.el-col-xl-push-11{left:45.8333333333%;position:relative}.el-col-xl-12{display:block;flex:0 0 50%;max-width:50%}.el-col-xl-12.is-guttered{display:block}.el-col-xl-offset-12{margin-left:50%}.el-col-xl-pull-12{position:relative;right:50%}.el-col-xl-push-12{left:50%;position:relative}.el-col-xl-13{display:block;flex:0 0 54.1666666667%;max-width:54.1666666667%}.el-col-xl-13.is-guttered{display:block}.el-col-xl-offset-13{margin-left:54.1666666667%}.el-col-xl-pull-13{position:relative;right:54.1666666667%}.el-col-xl-push-13{left:54.1666666667%;position:relative}.el-col-xl-14{display:block;flex:0 0 58.3333333333%;max-width:58.3333333333%}.el-col-xl-14.is-guttered{display:block}.el-col-xl-offset-14{margin-left:58.3333333333%}.el-col-xl-pull-14{position:relative;right:58.3333333333%}.el-col-xl-push-14{left:58.3333333333%;position:relative}.el-col-xl-15{display:block;flex:0 0 62.5%;max-width:62.5%}.el-col-xl-15.is-guttered{display:block}.el-col-xl-offset-15{margin-left:62.5%}.el-col-xl-pull-15{position:relative;right:62.5%}.el-col-xl-push-15{left:62.5%;position:relative}.el-col-xl-16{display:block;flex:0 0 66.6666666667%;max-width:66.6666666667%}.el-col-xl-16.is-guttered{display:block}.el-col-xl-offset-16{margin-left:66.6666666667%}.el-col-xl-pull-16{position:relative;right:66.6666666667%}.el-col-xl-push-16{left:66.6666666667%;position:relative}.el-col-xl-17{display:block;flex:0 0 70.8333333333%;max-width:70.8333333333%}.el-col-xl-17.is-guttered{display:block}.el-col-xl-offset-17{margin-left:70.8333333333%}.el-col-xl-pull-17{position:relative;right:70.8333333333%}.el-col-xl-push-17{left:70.8333333333%;position:relative}.el-col-xl-18{display:block;flex:0 0 75%;max-width:75%}.el-col-xl-18.is-guttered{display:block}.el-col-xl-offset-18{margin-left:75%}.el-col-xl-pull-18{position:relative;right:75%}.el-col-xl-push-18{left:75%;position:relative}.el-col-xl-19{display:block;flex:0 0 79.1666666667%;max-width:79.1666666667%}.el-col-xl-19.is-guttered{display:block}.el-col-xl-offset-19{margin-left:79.1666666667%}.el-col-xl-pull-19{position:relative;right:79.1666666667%}.el-col-xl-push-19{left:79.1666666667%;position:relative}.el-col-xl-20{display:block;flex:0 0 83.3333333333%;max-width:83.3333333333%}.el-col-xl-20.is-guttered{display:block}.el-col-xl-offset-20{margin-left:83.3333333333%}.el-col-xl-pull-20{position:relative;right:83.3333333333%}.el-col-xl-push-20{left:83.3333333333%;position:relative}.el-col-xl-21{display:block;flex:0 0 87.5%;max-width:87.5%}.el-col-xl-21.is-guttered{display:block}.el-col-xl-offset-21{margin-left:87.5%}.el-col-xl-pull-21{position:relative;right:87.5%}.el-col-xl-push-21{left:87.5%;position:relative}.el-col-xl-22{display:block;flex:0 0 91.6666666667%;max-width:91.6666666667%}.el-col-xl-22.is-guttered{display:block}.el-col-xl-offset-22{margin-left:91.6666666667%}.el-col-xl-pull-22{position:relative;right:91.6666666667%}.el-col-xl-push-22{left:91.6666666667%;position:relative}.el-col-xl-23{display:block;flex:0 0 95.8333333333%;max-width:95.8333333333%}.el-col-xl-23.is-guttered{display:block}.el-col-xl-offset-23{margin-left:95.8333333333%}.el-col-xl-pull-23{position:relative;right:95.8333333333%}.el-col-xl-push-23{left:95.8333333333%;position:relative}.el-col-xl-24{display:block;flex:0 0 100%;max-width:100%}.el-col-xl-24.is-guttered{display:block}.el-col-xl-offset-24{margin-left:100%}.el-col-xl-pull-24{position:relative;right:100%}.el-col-xl-push-24{left:100%;position:relative}}[data-v-660adcfa] .el-button-group{display:flex;justify-content:space-around;align-items:center}[data-v-660adcfa] .el-button-group .el-button{flex:1}.layer-box[data-v-660adcfa]{height:calc(100vh - 170px);overflow-y:auto;margin-bottom:5px}.layer-box .ellipsis[data-v-660adcfa]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer}.layer-box>div[data-v-660adcfa]{padding:0 5px;margin:3px 0;background:#f7f7f7;color:#c8c8c8;border-radius:3px;font-size:14px;line-height:28px}.layer-box>div.active[data-v-660adcfa]{color:#2d8cf0;background:#f0faff;font-weight:700}.btn-box[data-v-660adcfa]{width:100%;margin-bottom:20px;background:#f3f3f3}.btn-box[data-v-660adcfa] :ddep(.el-button-group){display:flex}.btn-box :ddep(.el-button-group) .el-button[data-v-660adcfa]{flex:1}svg[data-v-660adcfa]{vertical-align:text-top}.empty-text[data-v-660adcfa]{width:100%;text-align:center;padding-top:10px;color:#999}span svg{vertical-align:middle}span.active svg.icon{fill:#2d8cf0}[data-v-64aeb02c] .el-input__wrapper{box-shadow:none}.tool-box[data-v-abb10d09]{display:flex;justify-content:space-around}.tool-box span[data-v-abb10d09]{flex:1;text-align:center;padding:5px 0;background:#f6f6f6;margin-left:2px;cursor:pointer}.tool-box span[data-v-abb10d09]:hover{background:#edf9ff}.tool-box span:hover svg[data-v-abb10d09]{fill:#2d8cf0}.tool-box .bg[data-v-abb10d09]{background:#d8d8d8}.tool-box .bg:hover svg[data-v-abb10d09]{fill:#2d8cf0}.img[data-v-abb10d09]{width:20px}.search-box[data-v-68388ea3]{padding-top:10px;padding-bottom:10px;display:flex}.search-box .input[data-v-68388ea3]{margin-left:10px}.search-box .select[data-v-68388ea3]{width:100px}.list-box[data-v-68388ea3]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between}.tmpl-img-box[data-v-68388ea3]{width:140px;cursor:pointer;border-radius:5px;overflow:hidden}.tmpl-img-box[data-v-68388ea3]:hover .el-image{opacity:.8}.search-box[data-v-6dc45053]{padding-top:10px;display:flex}.search-box .back-btn[data-v-6dc45053]{margin-right:10px;padding:0}.search-box .input[data-v-6dc45053]{margin-left:10px}.search-box .select[data-v-6dc45053]{width:120px}h3[data-v-bfc18003]{margin:0}.item .top[data-v-bfc18003]{display:flex;width:100%;justify-content:space-between;align-items:center;padding:10px 0}.img-box[data-v-bfc18003]{display:grid;grid-template-columns:repeat(4,60px);grid-template-rows:repeat(2,70px);grid-row-gap:10px;justify-content:space-between;padding:8px;background:#f1f2f4;border-radius:10px;margin-bottom:10px}.img-box .img-item[data-v-bfc18003]{border-radius:5px;padding:5px;cursor:pointer}.img-box .img-item[data-v-bfc18003]:hover{background:#bababa}[data-v-09ad8c35] .el-scrollbar__view{height:100%}.page-list-box[data-v-09ad8c35]{margin-top:10px}.img-box[data-v-09ad8c35]{box-sizing:border-box;padding:10px;display:flex;justify-content:flex-start;flex-wrap:wrap;background:#f1f2f4;border-radius:10px;margin-bottom:10px}.img-box .img-item[data-v-09ad8c35]{margin-bottom:10px;border-radius:5px;cursor:pointer}.img-box .img-item[data-v-09ad8c35]:hover{background:#bababa}.tab-item_active[data-v-3fd73b33]{background-color:#e8eaec!important}.editor-item[data-v-3fd73b33]:hover{background:rgba(0,0,0,.12)}.main-bottom[data-v-53e577b4]{padding:4px 12px 12px;transition:all .25s cubic-bezier(.45,0,.4,1)}.main-bottom .main-panel[data-v-53e577b4]{transition:all .25s ease;box-shadow:0 0 2px rgba(0,0,0,.08),0 4px 12px rgba(0,0,0,.04)}.main-bottom .panel-canvas:hover .panel-position[data-v-53e577b4],.main-bottom .panel-zoom:hover .zoom-position[data-v-53e577b4]{display:flex}.inside-shadow[data-v-06a4c87a]{box-shadow:inset 0 0 9px 2px rgba(0,0,0,.12);pointer-events:none}#workspace[data-v-06a4c87a]{background:#f1f1f1}.design-stage-grid[data-v-06a4c87a]{--offsetX: 0px;--offsetY: 0px;--size: 16px;--color: #dedcdc;background-image:linear-gradient(45deg,var(--color) 25%,transparent 0,transparent 75%,var(--color) 0),linear-gradient(45deg,var(--color) 25%,transparent 0,transparent 75%,var(--color) 0);background-position:var(--offsetX) var(--offsetY),calc(var(--size) + var(--offsetX)) calc(var(--size) + var(--offsetY));background-size:calc(var(--size) * 2) calc(var(--size) * 2)}.el-slider{--el-slider-main-bg-color:var(--el-color-primary);--el-slider-runway-bg-color:var(--el-border-color-light);--el-slider-stop-bg-color:var(--el-color-white);--el-slider-disabled-color:var(--el-text-color-placeholder);--el-slider-border-radius:3px;--el-slider-height:6px;--el-slider-button-size:20px;--el-slider-button-wrapper-size:36px;--el-slider-button-wrapper-offset:-15px;align-items:center;display:flex;height:32px;width:100%}.el-slider__runway{background-color:var(--el-slider-runway-bg-color);border-radius:var(--el-slider-border-radius);cursor:pointer;flex:1;height:var(--el-slider-height);position:relative}.el-slider__runway.show-input{margin-right:30px;width:auto}.el-slider__runway.is-disabled{cursor:default}.el-slider__runway.is-disabled .el-slider__bar{background-color:var(--el-slider-disabled-color)}.el-slider__runway.is-disabled .el-slider__button{border-color:var(--el-slider-disabled-color)}.el-slider__runway.is-disabled .el-slider__button-wrapper.hover,.el-slider__runway.is-disabled .el-slider__button-wrapper:hover,.el-slider__runway.is-disabled .el-slider__button-wrapper.dragging{cursor:not-allowed}.el-slider__runway.is-disabled .el-slider__button.dragging,.el-slider__runway.is-disabled .el-slider__button.hover,.el-slider__runway.is-disabled .el-slider__button:hover{transform:scale(1)}.el-slider__runway.is-disabled .el-slider__button.hover,.el-slider__runway.is-disabled .el-slider__button:hover,.el-slider__runway.is-disabled .el-slider__button.dragging{cursor:not-allowed}.el-slider__input{flex-shrink:0;width:130px}.el-slider__bar{background-color:var(--el-slider-main-bg-color);border-bottom-left-radius:var(--el-slider-border-radius);border-top-left-radius:var(--el-slider-border-radius);height:var(--el-slider-height);position:absolute}.el-slider__button-wrapper{background-color:transparent;height:var(--el-slider-button-wrapper-size);line-height:normal;outline:none;position:absolute;text-align:center;top:var(--el-slider-button-wrapper-offset);transform:translate(-50%);-webkit-user-select:none;user-select:none;width:var(--el-slider-button-wrapper-size);z-index:1}.el-slider__button-wrapper:after{content:\"\";display:inline-block;height:100%;vertical-align:middle}.el-slider__button-wrapper.hover,.el-slider__button-wrapper:hover{cursor:grab}.el-slider__button-wrapper.dragging{cursor:grabbing}.el-slider__button{background-color:var(--el-color-white);border:2px solid var(--el-slider-main-bg-color);border-radius:50%;box-sizing:border-box;display:inline-block;height:var(--el-slider-button-size);transition:var(--el-transition-duration-fast);-webkit-user-select:none;user-select:none;vertical-align:middle;width:var(--el-slider-button-size)}.el-slider__button.dragging,.el-slider__button.hover,.el-slider__button:hover{transform:scale(1.2)}.el-slider__button.hover,.el-slider__button:hover{cursor:grab}.el-slider__button.dragging{cursor:grabbing}.el-slider__stop{background-color:var(--el-slider-stop-bg-color);border-radius:var(--el-border-radius-circle);height:var(--el-slider-height);position:absolute;transform:translate(-50%);width:var(--el-slider-height)}.el-slider__marks{height:100%;left:12px;top:0;width:18px}.el-slider__marks-text{color:var(--el-color-info);font-size:14px;margin-top:15px;position:absolute;transform:translate(-50%);white-space:pre}.el-slider.is-vertical{display:inline-flex;flex:0;height:100%;position:relative;width:auto}.el-slider.is-vertical .el-slider__runway{height:100%;margin:0 16px;width:var(--el-slider-height)}.el-slider.is-vertical .el-slider__bar{border-radius:0 0 3px 3px;height:auto;width:var(--el-slider-height)}.el-slider.is-vertical .el-slider__button-wrapper{left:var(--el-slider-button-wrapper-offset);top:auto;transform:translateY(50%)}.el-slider.is-vertical .el-slider__stop{transform:translateY(50%)}.el-slider.is-vertical .el-slider__marks-text{left:15px;margin-top:0;transform:translateY(50%)}.el-slider--large{height:40px}.el-slider--small{height:24px}.asa-input-number[data-v-d655ccac]{position:relative;display:block;width:100%;border:none;font-size:14px;color:#515a6e;background:#f8f8f9;transition:border .2s ease-in-out,background .2s ease-in-out,box-shadow .2s ease-in-out;margin:0;padding:0;height:32px;line-height:32px;vertical-align:middle;border-radius:4px;overflow:hidden;cursor:default;z-index:1}.asa-input-number:hover .asa-input-number-handler-wrap[data-v-d655ccac]{opacity:1}.asa-input-number-focused[data-v-d655ccac]{outline:0;box-shadow:0 0 0 2px rgba(45,140,240,.2)}.asa-input-number-input[data-v-d655ccac]{background:none;width:100%;height:32px;line-height:32px;padding:0 7px;text-align:left;outline:0;color:#666;border:0;border-radius:4px;transition:all .2s linear}.asa-input-number-handler[data-v-d655ccac]{display:block;width:100%;height:16px;line-height:0;text-align:center;overflow:hidden;color:#999;position:relative}.asa-input-number-handler-wrap[data-v-d655ccac]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;overflow:hidden;height:32px;background:#f8f8f9;border-left-color:transparent;width:22px;height:100%;border-left:1px solid #dcdee2;border-radius:0 4px 4px 0;position:absolute;top:0;right:0;opacity:0;transition:opacity .2s ease-in-out}.asa-input-number-handler-down[data-v-d655ccac]{height:16px;border-top:none;top:3px;cursor:pointer}.asa-input-number-handler-up-inner[data-v-d655ccac],.asa-input-number-handler-down-inner[data-v-d655ccac]{width:12px;height:12px;font-size:14px;color:#999;line-height:16px;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:absolute;right:5px;transition:all .2s linear}.asa-input-number-handler-up-inner[data-v-d655ccac]{top:1}.asa-input-number-input-wrap[data-v-d655ccac]{display:flex;align-items:center}.asa-input-number-input-wrap__label[data-v-d655ccac]{flex-shrink:0;padding:0 10px;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:ew-resize}.asa-input-number-small .asa-input-number-handler[data-v-d655ccac]{height:12px}.asa-input-number-small .asa-input-number-handler-up-inner[data-v-d655ccac],.asa-input-number-small .asa-input-number-handler-down-inner[data-v-d655ccac]{line-height:12px}.asa-input-number-large .asa-input-number-handler[data-v-d655ccac]{height:20px}.asa-input-number-large .asa-input-number-handler-up-inner[data-v-d655ccac],.asa-input-number-large .asa-input-number-handler-down-inner[data-v-d655ccac]{line-height:20px}.el-color-predefine{display:flex;font-size:12px;margin-top:8px;width:280px}.el-color-predefine__colors{display:flex;flex:1;flex-wrap:wrap}.el-color-predefine__color-selector{border-radius:4px;cursor:pointer;height:20px;margin:0 0 8px 8px;width:20px}.el-color-predefine__color-selector:nth-child(10n+1){margin-left:0}.el-color-predefine__color-selector.selected{box-shadow:0 0 3px 2px var(--el-color-primary)}.el-color-predefine__color-selector>div{border-radius:3px;display:flex;height:100%}.el-color-predefine__color-selector.is-alpha{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==)}.el-color-hue-slider{background-color:red;box-sizing:border-box;float:right;height:12px;padding:0 2px;position:relative;width:280px}.el-color-hue-slider__bar{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff,#00f 67%,#f0f 83%,red);height:100%;position:relative}.el-color-hue-slider__thumb{background:#fff;border:1px solid var(--el-border-color-lighter);border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);box-sizing:border-box;cursor:pointer;height:100%;left:0;position:absolute;top:0;width:4px;z-index:1}.el-color-hue-slider.is-vertical{height:180px;padding:2px 0;width:12px}.el-color-hue-slider.is-vertical .el-color-hue-slider__bar{background:linear-gradient(180deg,red 0,#ff0 17%,#0f0 33%,#0ff,#00f 67%,#f0f 83%,red)}.el-color-hue-slider.is-vertical .el-color-hue-slider__thumb{height:4px;left:0;top:0;width:100%}.el-color-svpanel{height:180px;position:relative;width:280px}.el-color-svpanel__black,.el-color-svpanel__white{bottom:0;left:0;position:absolute;right:0;top:0}.el-color-svpanel__white{background:linear-gradient(90deg,#fff,rgba(255,255,255,0))}.el-color-svpanel__black{background:linear-gradient(0deg,#000,rgba(0,0,0,0))}.el-color-svpanel__cursor{position:absolute}.el-color-svpanel__cursor>div{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}.el-color-alpha-slider{background-image:linear-gradient(45deg,var(--el-color-picker-alpha-bg-a) 25%,var(--el-color-picker-alpha-bg-b) 25%),linear-gradient(135deg,var(--el-color-picker-alpha-bg-a) 25%,var(--el-color-picker-alpha-bg-b) 25%),linear-gradient(45deg,var(--el-color-picker-alpha-bg-b) 75%,var(--el-color-picker-alpha-bg-a) 75%),linear-gradient(135deg,var(--el-color-picker-alpha-bg-b) 75%,var(--el-color-picker-alpha-bg-a) 75%);background-position:0 0,6px 0,6px -6px,0 6px;background-size:12px 12px;box-sizing:border-box;height:12px;position:relative;width:280px}.el-color-alpha-slider__bar{background:linear-gradient(to right,rgba(255,255,255,0) 0,var(--el-bg-color) 100%);height:100%;position:relative}.el-color-alpha-slider__thumb{background:#fff;border:1px solid var(--el-border-color-lighter);border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);box-sizing:border-box;cursor:pointer;height:100%;left:0;position:absolute;top:0;width:4px;z-index:1}.el-color-alpha-slider.is-vertical{height:180px;width:20px}.el-color-alpha-slider.is-vertical .el-color-alpha-slider__bar{background:linear-gradient(180deg,rgba(255,255,255,0) 0,#fff)}.el-color-alpha-slider.is-vertical .el-color-alpha-slider__thumb{height:4px;left:0;top:0;width:100%}.el-color-dropdown{width:300px}.el-color-dropdown__main-wrapper{margin-bottom:6px}.el-color-dropdown__main-wrapper:after{clear:both;content:\"\";display:table}.el-color-dropdown__btns{margin-top:12px;text-align:right}.el-color-dropdown__value{color:#000;float:left;font-size:12px;line-height:26px;width:160px}.el-color-picker{display:inline-block;line-height:normal;outline:none;position:relative}.el-color-picker:hover:not(.is-disabled,.is-focused) .el-color-picker__trigger{border-color:var(--el-border-color-hover)}.el-color-picker:focus-visible:not(.is-disabled) .el-color-picker__trigger{outline:2px solid var(--el-color-primary);outline-offset:1px}.el-color-picker.is-focused .el-color-picker__trigger{border-color:var(--el-color-primary)}.el-color-picker.is-disabled .el-color-picker__trigger{cursor:not-allowed}.el-color-picker--large{height:40px}.el-color-picker--large .el-color-picker__trigger{height:40px;width:40px}.el-color-picker--large .el-color-picker__mask{height:38px;width:38px}.el-color-picker--small{height:24px}.el-color-picker--small .el-color-picker__trigger{height:24px;width:24px}.el-color-picker--small .el-color-picker__mask{height:22px;width:22px}.el-color-picker--small .el-color-picker__empty,.el-color-picker--small .el-color-picker__icon{transform:scale(.8)}.el-color-picker__mask{background-color:rgba(255,255,255,.7);border-radius:4px;cursor:not-allowed;height:30px;left:1px;position:absolute;top:1px;width:30px;z-index:1}.el-color-picker__trigger{align-items:center;border:1px solid var(--el-border-color);border-radius:4px;box-sizing:border-box;cursor:pointer;display:inline-flex;font-size:0;height:32px;justify-content:center;padding:4px;position:relative;width:32px}.el-color-picker__color{border:1px solid var(--el-text-color-secondary);border-radius:var(--el-border-radius-small);box-sizing:border-box;display:block;height:100%;position:relative;text-align:center;width:100%}.el-color-picker__color.is-alpha{background-image:linear-gradient(45deg,var(--el-color-picker-alpha-bg-a) 25%,var(--el-color-picker-alpha-bg-b) 25%),linear-gradient(135deg,var(--el-color-picker-alpha-bg-a) 25%,var(--el-color-picker-alpha-bg-b) 25%),linear-gradient(45deg,var(--el-color-picker-alpha-bg-b) 75%,var(--el-color-picker-alpha-bg-a) 75%),linear-gradient(135deg,var(--el-color-picker-alpha-bg-b) 75%,var(--el-color-picker-alpha-bg-a) 75%);background-position:0 0,6px 0,6px -6px,0 6px;background-size:12px 12px}.el-color-picker__color-inner{align-items:center;display:inline-flex;height:100%;justify-content:center;width:100%}.el-color-picker .el-color-picker__empty{color:var(--el-text-color-secondary);font-size:12px}.el-color-picker .el-color-picker__icon{align-items:center;color:#fff;display:inline-flex;font-size:12px;justify-content:center}.el-color-picker__panel{background-color:#fff;border-radius:var(--el-border-radius-base);box-shadow:var(--el-box-shadow-light);box-sizing:content-box;padding:6px;position:absolute;z-index:10}.el-color-picker__panel.el-popper{border:1px solid var(--el-border-color-lighter)}.el-color-picker,.el-color-picker__panel{--el-color-picker-alpha-bg-a:#ccc;--el-color-picker-alpha-bg-b:transparent}.dark .el-color-picker,.dark .el-color-picker__panel{--el-color-picker-alpha-bg-a:#333333}[data-v-50d59a3b] .el-color-picker__trigger{width:64px}[data-v-50d59a3b] .el-select__wrapper{background:#f8f8f9;box-shadow:none}.asa-number-warp[data-v-50d59a3b]{box-sizing:border-box;width:100%;display:flex;justify-content:flex-start;align-items:center;background:#f6f7f9;border-radius:5px;padding:0 15px 0 10px;margin-bottom:10px;position:relative;z-index:1}.asa-number-warp .label[data-v-50d59a3b]{flex:0 0 32px;font-size:var(--el-form-label-font-size);color:var(--el-text-color-regular)}.asa-number-warp .content[data-v-50d59a3b]{width:100%}[data-v-3671ab69] .el-color-picker__trigger{width:56px}.label[data-v-3671ab69]{margin-right:4px;font-size:var(--el-form-label-font-size);color:var(--el-text-color-regular)}.asa-number-warp[data-v-642912a3]{box-sizing:border-box;width:100%;display:flex;justify-content:flex-start;align-items:center;background:#f6f7f9;border-radius:5px;padding:0 15px 0 10px;margin-bottom:10px;position:relative;z-index:1}.asa-number-warp span[data-v-642912a3]{display:inline-block;width:56px;font-size:var(--el-form-label-font-size);color:var(--el-text-color-regular)}.color-bar[data-v-cd4ba0d0]{height:30px;cursor:pointer;border:2px solid #f6f7f9}.ivu-row[data-v-cd4ba0d0]{margin-bottom:8px}.ivu-row .ivu-col[data-v-cd4ba0d0]{position:inherit}.ivu-row .ivu-col__box[data-v-cd4ba0d0]{display:flex;align-items:center;background:#f8f8f8;border-radius:4px;gap:8px}.ivu-row .label[data-v-cd4ba0d0]{padding-left:8px}.ivu-row .content[data-v-cd4ba0d0]{flex:1}.ivu-row .content[data-v-cd4ba0d0] .--input,.ivu-row .content[data-v-cd4ba0d0] .ivu-select-selection{background-color:transparent;border:none!important;box-shadow:none!important}.flex-view[data-v-89f72f6a]{position:relative;z-index:1;width:100%;margin-bottom:5px;padding:5px;display:inline-flex;justify-content:space-between;border-radius:5px;background:#f6f7f9}.flex-item[data-v-89f72f6a]{display:inline-flex;flex:1}.flex-item .label[data-v-89f72f6a]{width:32px;height:32px;line-height:32px;display:inline-block;font-size:14px}.flex-item .content[data-v-89f72f6a]{flex:1}.flex-item .slider-box[data-v-89f72f6a]{width:calc(100% - 50px);margin-left:10px}.flex-item .left[data-v-89f72f6a]{flex:1}.flex-item .right[data-v-89f72f6a]{flex:1;margin-left:10px}.el-radio-group{align-items:center;display:inline-flex;flex-wrap:wrap;font-size:0}.el-radio-button{--el-radio-button-checked-bg-color:var(--el-color-primary);--el-radio-button-checked-text-color:var(--el-color-white);--el-radio-button-checked-border-color:var(--el-color-primary);--el-radio-button-disabled-checked-fill:var(--el-border-color-extra-light)}.el-radio-button,.el-radio-button__inner{display:inline-block;outline:none;position:relative}.el-radio-button__inner{-webkit-appearance:none;background:var(--el-button-bg-color,var(--el-fill-color-blank));border:var(--el-border);border-left:0;border-radius:0;box-sizing:border-box;color:var(--el-button-text-color,var(--el-text-color-regular));cursor:pointer;font-size:var(--el-font-size-base);font-weight:var(--el-button-font-weight,var(--el-font-weight-primary));line-height:1;margin:0;padding:8px 15px;text-align:center;transition:var(--el-transition-all);-webkit-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.el-radio-button__inner.is-round{padding:8px 15px}.el-radio-button__inner:hover{color:var(--el-color-primary)}.el-radio-button__inner [class*=el-icon-]{line-height:.9}.el-radio-button__inner [class*=el-icon-]+span{margin-left:5px}.el-radio-button:first-child .el-radio-button__inner{border-left:var(--el-border);border-radius:var(--el-border-radius-base) 0 0 var(--el-border-radius-base);box-shadow:none!important}.el-radio-button__original-radio{opacity:0;outline:none;position:absolute;z-index:-1}.el-radio-button__original-radio:checked+.el-radio-button__inner{background-color:var(--el-radio-button-checked-bg-color,var(--el-color-primary));border-color:var(--el-radio-button-checked-border-color,var(--el-color-primary));box-shadow:-1px 0 0 0 var(--el-radio-button-checked-border-color,var(--el-color-primary));color:var(--el-radio-button-checked-text-color,var(--el-color-white))}.el-radio-button__original-radio:focus-visible+.el-radio-button__inner{border-left:var(--el-border);border-left-color:var(--el-radio-button-checked-border-color,var(--el-color-primary));border-radius:var(--el-border-radius-base);box-shadow:none;outline:2px solid var(--el-radio-button-checked-border-color);outline-offset:1px;z-index:2}.el-radio-button__original-radio:disabled+.el-radio-button__inner{background-color:var(--el-button-disabled-bg-color,var(--el-fill-color-blank));background-image:none;border-color:var(--el-button-disabled-border-color,var(--el-border-color-light));box-shadow:none;color:var(--el-disabled-text-color);cursor:not-allowed}.el-radio-button__original-radio:disabled:checked+.el-radio-button__inner{background-color:var(--el-radio-button-disabled-checked-fill)}.el-radio-button:last-child .el-radio-button__inner{border-radius:0 var(--el-border-radius-base) var(--el-border-radius-base) 0}.el-radio-button:first-child:last-child .el-radio-button__inner{border-radius:var(--el-border-radius-base)}.el-radio-button--large .el-radio-button__inner{border-radius:0;font-size:var(--el-font-size-base);padding:12px 19px}.el-radio-button--large .el-radio-button__inner.is-round{padding:12px 19px}.el-radio-button--small .el-radio-button__inner{border-radius:0;font-size:12px;padding:5px 11px}.el-radio-button--small .el-radio-button__inner.is-round{padding:5px 11px}[data-v-471231df] .el-color-picker,[data-v-471231df] .el-color-picker__trigger{width:100%}[data-v-471231df] .el-color-picker__color-inner{justify-content:flex-end}.right[data-v-471231df]{display:flex;justify-content:flex-end;align-items:center}.right>span[data-v-471231df]{flex:0 0 36px}.asa-number-warp[data-v-471231df]{width:100%;display:flex;justify-content:flex-start;align-items:center}.asa-number-warp span[data-v-471231df]{font-size:var(--el-form-label-font-size);color:var(--el-text-color-regular)}.button-group[data-v-471231df]{width:100%}.button-group[data-v-471231df] .el-radio-button{flex:1;display:flex;justify-content:center;align-items:center}.button-group[data-v-471231df] .el-radio-button .el-radio-button__inner{flex:1}.font-selector[data-v-471231df] .ivu-select-item{padding:1px 4px}.font-selector .font-item[data-v-471231df]{height:40px;width:280px;background-size:auto 28px;background-repeat:no-repeat}.flex-view[data-v-471231df]{box-sizing:border-box;position:relative;z-index:1;width:100%;margin-bottom:10px;padding:5px;display:inline-flex;justify-content:space-between;border-radius:5px;background:#f6f7f9}.flex-item[data-v-471231df]{display:inline-flex;flex:1}.flex-item .label[data-v-471231df]{width:32px;height:32px;line-height:32px;display:inline-block;font-size:14px}.flex-item .content[data-v-471231df]{flex:1}.flex-item .slider-box[data-v-471231df]{width:calc(100% - 50px);margin-left:10px}.flex-item .left[data-v-471231df]{flex:1}.flex-item .right[data-v-471231df]{flex:1;margin-left:10px}.flex-item .right>span[data-v-471231df]{flex:0 0 48px}.el-popover{--el-popover-bg-color:var(--el-bg-color-overlay);--el-popover-font-size:var(--el-font-size-base);--el-popover-border-color:var(--el-border-color-lighter);--el-popover-padding:12px;--el-popover-padding-large:18px 20px;--el-popover-title-font-size:16px;--el-popover-title-text-color:var(--el-text-color-primary);--el-popover-border-radius:4px}.el-popover.el-popper{background:var(--el-popover-bg-color);border:1px solid var(--el-popover-border-color);border-radius:var(--el-popover-border-radius);box-shadow:var(--el-box-shadow-light);box-sizing:border-box;color:var(--el-text-color-regular);font-size:var(--el-popover-font-size);line-height:1.4;min-width:150px;overflow-wrap:break-word;padding:var(--el-popover-padding);z-index:var(--el-index-popper)}.el-popover.el-popper--plain{padding:var(--el-popover-padding-large)}.el-popover__title{color:var(--el-popover-title-text-color);font-size:var(--el-popover-title-font-size);line-height:1;margin-bottom:12px}.el-popover__reference:focus:hover,.el-popover__reference:focus:not(.focusing){outline-width:0}.el-popover.el-popper.is-dark{--el-popover-bg-color:var(--el-text-color-primary);--el-popover-border-color:var(--el-text-color-primary);--el-popover-title-text-color:var(--el-bg-color);color:var(--el-bg-color)}.el-popover.el-popper:focus,.el-popover.el-popper:focus:active{outline-width:0}.my-tabs__header[data-v-fd81b187]{margin-bottom:.75rem;border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity));padding:0;padding:.125rem}.my-tabs__header-shell[data-v-fd81b187]{justify-content:space-between;position:relative;display:flex}.my-tab__title[data-v-fd81b187]{text-align:center;position:relative;flex:1 1 auto;padding-top:.25rem;padding-bottom:.25rem;z-index:1}.my-tab__title.my-active[data-v-fd81b187]{font-weight:700}.my-tab__slider[data-v-fd81b187]{position:absolute;bottom:0;top:0;border-radius:.25rem;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.angle-input{width:38px;margin-left:5px;padding:0 0 0 4px;border:1px solid #e8eaec;border-radius:4px;position:relative}.angle-input-box{position:relative}.angle-input-box:after{content:\"\";width:5px;height:2px;position:absolute;right:2px;top:0}.AngleHandle{position:absolute;z-index:2;right:2px;margin-top:3px;background:#fff;width:60px;height:60px;border-radius:7px;box-shadow:0 0 2px rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center}.AngleHandle .angle{width:54px;height:54px;position:relative;overflow:hidden;background:#f1f2f4;border-radius:50%;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer}.AngleHandle .line{position:absolute;top:50%;left:50%;width:50%;height:1px;background:#999;pointer-events:none;transform-origin:left top}.AngleHandle .line:before{position:absolute;content:\"\";left:-1px;top:-1px;width:3px;height:3px;border-radius:50%;background:#999}.AngleHandle .line:after{position:absolute;content:\"\";right:0;top:-2px;width:5px;height:5px;border-radius:50%;background:#999}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }[data-v-59acd03c],[data-v-59acd03c]:before,[data-v-59acd03c]:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}.flex-center[data-v-59acd03c]{display:flex;justify-content:center;align-items:center}.title[data-v-59acd03c]{margin-bottom:.75rem;font-size:15px;font-weight:600}.color-picker[data-v-59acd03c]{-webkit-user-select:none;-moz-user-select:none;user-select:none;min-width:220px}.cp__gradient-bar[data-v-59acd03c]{display:flex;justify-content:center;height:16px;width:100%;padding:0 8px}.cpgb__track[data-v-59acd03c]{position:relative;cursor:pointer}.cpgb__pointer[data-v-59acd03c]{cursor:grab;position:absolute;top:0;top:-.125rem;height:1.25rem;--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-width:2px;border-style:solid;--tw-border-opacity: 1;border-color:rgb(255 255 255/var(--tw-border-opacity));--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px;width:18px}.cpgb__pointer--active[data-v-59acd03c]{z-index:1;border-radius:3px;box-shadow:0 0 4px rgba(0,0,0,.2),0 0 0 1.2px #2254f4}.cp__palette[data-v-59acd03c]{height:140px;position:relative;margin-top:.75rem;margin-top:.875rem;cursor:pointer;overflow:hidden;border-radius:.25rem}.cp__palette .cpp__color-saturation[data-v-59acd03c],.cp__palette .cpp__color-value[data-v-59acd03c]{position:absolute;bottom:0;right:0;top:0;width:100%;height:100%}.cp__palette .cpp__color-saturation[data-v-59acd03c]{background-image:linear-gradient(to right,var(--tw-gradient-stops));--tw-gradient-from: #fff var(--tw-gradient-from-position);--tw-gradient-to: rgb(255 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.cp__palette .cpp__color-value[data-v-59acd03c]{background-image:linear-gradient(to top,var(--tw-gradient-stops));--tw-gradient-from: #000 var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.cp__palette .cpp__pointer[data-v-59acd03c]{position:absolute;height:.75rem;width:.75rem;--tw-translate-x: -.25rem;--tw-translate-x: -.375rem;--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;border-width:2px;--tw-border-opacity: 1;border-color:rgb(255 255 255/var(--tw-border-opacity));--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow)}.cp__slider[data-v-59acd03c]{position:relative;margin-top:.75rem;margin-top:.875rem;height:.5rem;border-radius:.25rem}.cp__slider-hux[data-v-59acd03c]{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff,#00f 67%,#f0f 83%,red)}.cp__slider-alpha[data-v-59acd03c]{background:linear-gradient(to top right,hsla(0,0%,80%,.4) 25%,transparent 0,transparent 75%,hsla(0,0%,80%,.4) 0,hsla(0,0%,80%,.4)),linear-gradient(to top right,hsla(0,0%,80%,.4) 25%,transparent 0,transparent 75%,hsla(0,0%,80%,.4) 0,hsla(0,0%,80%,.4));background-size:6px 6px;background-position:0 0,3px 3px}.cp__slider .cpsa__background[data-v-59acd03c]{box-shadow:inset 0 0 0 1px rgba(0,0,0,.06);height:100%;border-radius:.25rem}.cp__box[data-v-59acd03c]{width:100%;margin-top:.75rem;margin-top:.875rem;display:flex}.cp__box .item[data-v-59acd03c]{display:flex;justify-content:center;align-items:center;cursor:pointer;margin-left:6px;width:24px;height:24px;box-sizing:border-box;border-radius:4px}.cp__box .item-color[data-v-59acd03c]{box-shadow:inset 0 0 0 1px rgba(0,0,0,.06)}.cp__box .item[data-v-59acd03c]:first-of-type{margin:0}.cp__box .item[data-v-59acd03c]:hover{transform:scale(1.08)}.cp__box .input[data-v-59acd03c]{width:4.7rem;margin-left:2px}.cp__box .native[data-v-59acd03c]{width:100%;height:100%}.cps__track[data-v-59acd03c]{position:absolute;left:.25rem;right:.25rem;top:0}.cpst__pointer[data-v-59acd03c]{cursor:pointer;box-shadow:0 0 2px rgba(0,0,0,.6);position:absolute;top:0;box-sizing:content-box;height:.5rem;width:.5rem;--tw-translate-x: -.5rem;--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));border-radius:9999px;border-width:4px;--tw-border-opacity: 1;border-color:rgb(255 255 255/var(--tw-border-opacity))}.color-bar[data-v-8bdd557d]{width:100%;height:30px;cursor:pointer;border:2px solid #f6f7f9}.box[data-v-e4ce65d1]{margin-bottom:20px}.box .hd-wrap[data-v-e4ce65d1]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.box .hd-wrap .hd[data-v-e4ce65d1]{flex:1}.box .hd-wrap .hd>span[data-v-e4ce65d1]{margin-right:5px}.box .operation[data-v-e4ce65d1]{display:flex;justify-content:space-between;align-items:center}.box .operation .slide-wrap[data-v-e4ce65d1]{width:100%}.fade-in-linear-enter-active,.fade-in-linear-leave-active{transition:var(--el-transition-fade-linear)}.fade-in-linear-enter-from,.fade-in-linear-leave-to{opacity:0}.el-fade-in-linear-enter-active,.el-fade-in-linear-leave-active{transition:var(--el-transition-fade-linear)}.el-fade-in-linear-enter-from,.el-fade-in-linear-leave-to{opacity:0}.el-fade-in-enter-active,.el-fade-in-leave-active{transition:all var(--el-transition-duration) cubic-bezier(.55,0,.1,1)}.el-fade-in-enter-from,.el-fade-in-leave-active{opacity:0}.el-zoom-in-center-enter-active,.el-zoom-in-center-leave-active{transition:all var(--el-transition-duration) cubic-bezier(.55,0,.1,1)}.el-zoom-in-center-enter-from,.el-zoom-in-center-leave-active{opacity:0;transform:scaleX(0)}.el-zoom-in-top-enter-active,.el-zoom-in-top-leave-active{opacity:1;transform:scaleY(1);transform-origin:center top;transition:var(--el-transition-md-fade)}.el-zoom-in-top-enter-active[data-popper-placement^=top],.el-zoom-in-top-leave-active[data-popper-placement^=top]{transform-origin:center bottom}.el-zoom-in-top-enter-from,.el-zoom-in-top-leave-active{opacity:0;transform:scaleY(0)}.el-zoom-in-bottom-enter-active,.el-zoom-in-bottom-leave-active{opacity:1;transform:scaleY(1);transform-origin:center bottom;transition:var(--el-transition-md-fade)}.el-zoom-in-bottom-enter-from,.el-zoom-in-bottom-leave-active{opacity:0;transform:scaleY(0)}.el-zoom-in-left-enter-active,.el-zoom-in-left-leave-active{opacity:1;transform:scale(1);transform-origin:top left;transition:var(--el-transition-md-fade)}.el-zoom-in-left-enter-from,.el-zoom-in-left-leave-active{opacity:0;transform:scale(.45)}.collapse-transition{transition:var(--el-transition-duration) height ease-in-out,var(--el-transition-duration) padding-top ease-in-out,var(--el-transition-duration) padding-bottom ease-in-out}.el-collapse-transition-enter-active,.el-collapse-transition-leave-active{transition:var(--el-transition-duration) max-height ease-in-out,var(--el-transition-duration) padding-top ease-in-out,var(--el-transition-duration) padding-bottom ease-in-out}.horizontal-collapse-transition{transition:var(--el-transition-duration) width ease-in-out,var(--el-transition-duration) padding-left ease-in-out,var(--el-transition-duration) padding-right ease-in-out}.el-list-enter-active,.el-list-leave-active{transition:all 1s}.el-list-enter-from,.el-list-leave-to{opacity:0;transform:translateY(-30px)}.el-list-leave-active{position:absolute!important}.el-opacity-transition{transition:opacity var(--el-transition-duration) cubic-bezier(.55,0,.1,1)}.el-collapse{--el-collapse-border-color:var(--el-border-color-lighter);--el-collapse-header-height:48px;--el-collapse-header-bg-color:var(--el-fill-color-blank);--el-collapse-header-text-color:var(--el-text-color-primary);--el-collapse-header-font-size:13px;--el-collapse-content-bg-color:var(--el-fill-color-blank);--el-collapse-content-font-size:13px;--el-collapse-content-text-color:var(--el-text-color-primary);border-bottom:1px solid var(--el-collapse-border-color);border-top:1px solid var(--el-collapse-border-color)}.el-collapse-item.is-disabled .el-collapse-item__header{color:var(--el-text-color-disabled);cursor:not-allowed}.el-collapse-item__header{align-items:center;background-color:var(--el-collapse-header-bg-color);border:none;border-bottom:1px solid var(--el-collapse-border-color);color:var(--el-collapse-header-text-color);cursor:pointer;display:flex;font-size:var(--el-collapse-header-font-size);font-weight:500;height:var(--el-collapse-header-height);line-height:var(--el-collapse-header-height);outline:none;padding:0;transition:border-bottom-color var(--el-transition-duration);width:100%}.el-collapse-item__arrow{font-weight:300;margin:0 8px 0 auto;transition:transform var(--el-transition-duration)}.el-collapse-item__arrow.is-active{transform:rotate(90deg)}.el-collapse-item__header.focusing:focus:not(:hover){color:var(--el-color-primary)}.el-collapse-item__header.is-active{border-bottom-color:transparent}.el-collapse-item__wrap{background-color:var(--el-collapse-content-bg-color);border-bottom:1px solid var(--el-collapse-border-color);box-sizing:border-box;overflow:hidden;will-change:height}.el-collapse-item__content{color:var(--el-collapse-content-text-color);font-size:var(--el-collapse-content-font-size);line-height:1.7692307692;padding-bottom:25px}.el-collapse-item:last-child{margin-bottom:-1px}.el-radio{--el-radio-font-size:var(--el-font-size-base);--el-radio-text-color:var(--el-text-color-regular);--el-radio-font-weight:var(--el-font-weight-primary);--el-radio-input-height:14px;--el-radio-input-width:14px;--el-radio-input-border-radius:var(--el-border-radius-circle);--el-radio-input-bg-color:var(--el-fill-color-blank);--el-radio-input-border:var(--el-border);--el-radio-input-border-color:var(--el-border-color);--el-radio-input-border-color-hover:var(--el-color-primary);align-items:center;color:var(--el-radio-text-color);cursor:pointer;display:inline-flex;font-size:var(--el-font-size-base);font-weight:var(--el-radio-font-weight);height:32px;margin-right:32px;outline:none;position:relative;-webkit-user-select:none;user-select:none;white-space:nowrap}.el-radio.el-radio--large{height:40px}.el-radio.el-radio--small{height:24px}.el-radio.is-bordered{border:var(--el-border);border-radius:var(--el-border-radius-base);box-sizing:border-box;padding:0 15px 0 9px}.el-radio.is-bordered.is-checked{border-color:var(--el-color-primary)}.el-radio.is-bordered.is-disabled{border-color:var(--el-border-color-lighter);cursor:not-allowed}.el-radio.is-bordered.el-radio--large{border-radius:var(--el-border-radius-base);padding:0 19px 0 11px}.el-radio.is-bordered.el-radio--large .el-radio__label{font-size:var(--el-font-size-base)}.el-radio.is-bordered.el-radio--large .el-radio__inner{height:14px;width:14px}.el-radio.is-bordered.el-radio--small{border-radius:var(--el-border-radius-base);padding:0 11px 0 7px}.el-radio.is-bordered.el-radio--small .el-radio__label{font-size:12px}.el-radio.is-bordered.el-radio--small .el-radio__inner{height:12px;width:12px}.el-radio:last-child{margin-right:0}.el-radio__input{cursor:pointer;display:inline-flex;outline:none;position:relative;vertical-align:middle;white-space:nowrap}.el-radio__input.is-disabled .el-radio__inner{background-color:var(--el-disabled-bg-color);border-color:var(--el-disabled-border-color);cursor:not-allowed}.el-radio__input.is-disabled .el-radio__inner:after{background-color:var(--el-disabled-bg-color);cursor:not-allowed}.el-radio__input.is-disabled .el-radio__inner+.el-radio__label{cursor:not-allowed}.el-radio__input.is-disabled.is-checked .el-radio__inner{background-color:var(--el-disabled-bg-color);border-color:var(--el-disabled-border-color)}.el-radio__input.is-disabled.is-checked .el-radio__inner:after{background-color:var(--el-text-color-placeholder)}.el-radio__input.is-disabled+span.el-radio__label{color:var(--el-text-color-placeholder);cursor:not-allowed}.el-radio__input.is-checked .el-radio__inner{background:var(--el-color-primary);border-color:var(--el-color-primary)}.el-radio__input.is-checked .el-radio__inner:after{transform:translate(-50%,-50%) scale(1)}.el-radio__input.is-checked+.el-radio__label{color:var(--el-color-primary)}.el-radio__input.is-focus .el-radio__inner{border-color:var(--el-radio-input-border-color-hover)}.el-radio__inner{background-color:var(--el-radio-input-bg-color);border:var(--el-radio-input-border);border-radius:var(--el-radio-input-border-radius);box-sizing:border-box;cursor:pointer;display:inline-block;height:var(--el-radio-input-height);position:relative;width:var(--el-radio-input-width)}.el-radio__inner:hover{border-color:var(--el-radio-input-border-color-hover)}.el-radio__inner:after{background-color:var(--el-color-white);border-radius:var(--el-radio-input-border-radius);content:\"\";height:4px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%) scale(0);transition:transform .15s ease-in;width:4px}.el-radio__original{bottom:0;left:0;margin:0;opacity:0;outline:none;position:absolute;right:0;top:0;z-index:-1}.el-radio__original:focus-visible+.el-radio__inner{border-radius:var(--el-radio-input-border-radius);outline:2px solid var(--el-radio-input-border-color-hover);outline-offset:1px}.el-radio:focus:not(:focus-visible):not(.is-focus):not(:active):not(.is-disabled) .el-radio__inner{box-shadow:0 0 2px 2px var(--el-radio-input-border-color-hover)}.el-radio__label{font-size:var(--el-radio-font-size);padding-left:8px}.el-radio.el-radio--large .el-radio__label{font-size:14px}.el-radio.el-radio--large .el-radio__inner{height:14px;width:14px}.el-radio.el-radio--small .el-radio__label{font-size:12px}.el-radio.el-radio--small .el-radio__inner{height:12px;width:12px}[data-v-311ff7ef] .el-collapse{border-top:none;border-bottom:none}[data-v-311ff7ef] .el-collapse-item__header{padding-left:10px;background:#f6f7f9;position:relative;z-index:1}[data-v-311ff7ef] .el-collapse-item:first-child{margin-top:26px}[data-v-311ff7ef] .el-collapse-item:last-child{margin-bottom:26px}.filter-box[data-v-311ff7ef]{overflow:hidden}.filter-box .filter-item[data-v-311ff7ef]{float:left;cursor:pointer;width:50%;margin-bottom:10px}.filter-box .filter-item img[data-v-311ff7ef]{width:90%;height:auto}.has-params[data-v-311ff7ef]{display:inline-block;margin-bottom:10px;width:50%;cursor:none}.has-params .content[data-v-311ff7ef]{width:90%}.box[data-v-311ff7ef]{margin-bottom:12px}[data-v-de061f3e] .el-color-picker__trigger{width:88px}.number-content[data-v-de061f3e]{display:flex;justify-content:center;align-items:center}.font-selector[data-v-de061f3e] .ivu-select-item{padding:1px 4px}.font-selector .font-item[data-v-de061f3e]{height:40px;width:330px;background-size:auto 40px;background-repeat:no-repeat}.flex-view[data-v-de061f3e]{width:100%;margin-bottom:10px;padding:5px;display:inline-flex;justify-content:space-between;border-radius:5px;background:#f6f7f9;position:relative;z-index:1}.flex-item[data-v-de061f3e]{box-sizing:border-box;display:inline-flex;flex:1}.flex-item .label[data-v-de061f3e]{width:32px;height:32px;line-height:32px;display:inline-block;font-size:14px}.flex-item .content[data-v-de061f3e]{flex:1}.flex-item .slider-box[data-v-de061f3e]{width:calc(100% - 50px);margin-left:10px}.flex-item .left[data-v-de061f3e]{flex:1}.flex-item .right[data-v-de061f3e]{flex:1;margin-left:10px}[data-v-fafd93a4] .el-color-picker__trigger{width:88px}.font-selector .font-item[data-v-fafd93a4]{height:40px;width:330px;background-size:auto 40px;background-repeat:no-repeat}.flex-view[data-v-fafd93a4]{position:relative;z-index:1;width:100%;margin-bottom:10px;padding:5px;display:inline-flex;justify-content:space-between;border-radius:5px;background:#f6f7f9}.flex-view .flex-item[data-v-fafd93a4]{display:inline-flex;flex:1}.flex-view .flex-item .label[data-v-fafd93a4]{width:32px;height:32px;line-height:32px;display:inline-block;font-size:14px}.flex-view .flex-item .content[data-v-fafd93a4]{flex:1;align-content:center}.flex-view .flex-item .button-group[data-v-fafd93a4]{width:100%;display:flex;justify-content:center;align-items:center}.flex-view .flex-item .button-group .el-radio-button[data-v-fafd93a4]{flex:1}.flex-view .flex-item .button-group .el-radio-button[data-v-fafd93a4] .el-radio-button__inner{width:100%}.flex-view .flex-item .slider-box[data-v-fafd93a4]{width:calc(100% - 50px);margin-left:10px}[data-v-345e1c69] .el-button{flex:1}[data-v-345e1c69] .el-button[disabled] svg{opacity:.2}.attr-item-box[data-v-345e1c69]{margin-top:8px}[data-v-44c69cde] .el-button{width:100%}.attr-item-box[data-v-44c69cde]{margin-top:8px}[data-v-dee7b64a] .el-button{width:100%}.attr-item-box[data-v-dee7b64a]{margin-top:8px}[data-v-b6f376dc] .el-button{border:none;background-color:transparent}h3[data-v-81ad680e]{margin:40px 0 0}ul[data-v-81ad680e]{list-style-type:none;padding:0}li[data-v-81ad680e]{display:inline-block;margin:0 10px}a[data-v-81ad680e]{color:#42b983}[data-v-49e7fd80] .el-button[disabled] svg{opacity:.2}svg[data-v-49e7fd80]{vertical-align:text-bottom}[data-v-a9cdd218] .el-button{width:100%}[data-v-a9cdd218] .el-button svg{margin-right:5px}[data-v-a9cdd218] .el-button[disabled] svg{opacity:.2}[data-v-ed1fb341] .el-color-picker{width:100%}[data-v-ed1fb341] .el-color-picker__trigger{width:100%;margin-bottom:3px}[data-v-ed1fb341] .el-color-picker__color-inner{justify-content:flex-end}.color-list[data-v-ed1fb341]{display:flex;flex-wrap:wrap}.color-list span[data-v-ed1fb341]{position:relative;display:inline-block;height:30px;width:30px;border-radius:50%;border:3px solid #fff;vertical-align:middle;cursor:pointer}.asa-size-wrap[data-v-ef9e57f5]{display:flex;justify-content:flex-start;align-items:center}.asa-size-wrap .asa-size-wrap-item[data-v-ef9e57f5]{display:inline-block;margin-right:10px}.asa-size-wrap .asa-size-wrap-item>span[data-v-ef9e57f5]{margin-right:10px}h3[data-v-ef9e57f5]{padding:0;margin:0}.divider[data-v-ef9e57f5]{margin-top:0}.cell-wrap[data-v-ef9e57f5]{box-sizing:border-box}.cell-wrap .cell-main[data-v-ef9e57f5]{display:flex;justify-content:space-between;align-items:center;vertical-align:middle;margin-bottom:10px}.cell-wrap .cell-main .cell-name[data-v-ef9e57f5]{line-height:24px;font-size:14px}.cell-wrap .cell-main .cell-label[data-v-ef9e57f5]{line-height:1.2;font-size:12px;color:#808695}[data-v-1a45ad1a] .el-form-item{margin-right:10px}.right-bar[data-v-5de1a6d9]{box-sizing:border-box;width:304px;height:100%;padding:10px;overflow-y:auto;background:#fff}.editor-wrap[data-v-82e2d967] .el-header{--height: 45px;padding:0 10px;border-bottom:1px solid #eef2f8;background:#fff;height:var(--height);line-height:var(--height);display:flex;justify-content:space-between}.editor-wrap[data-v-82e2d967] .el-main{display:flex;height:calc(100vh - 45px);padding:0;overflow:hidden}\n",document.head.appendChild(Dr);var Lr=Qr((function(e,t){return e+t}),0),jr=1/0;function Pr(e){return e?(e=i(e))===jr||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Fr(e){var t=Pr(e),i=t%1;return t==t?i?t-i:t:0}var Rr=n&&new n,zr=Rr?function(e,t){return Rr.set(e,t),e}:r;function Nr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=o(e.prototype),n=e.apply(i,t);return Ci(n)?n:i}}var Vr=Math.max;function Ur(e,t,i,n){for(var r=-1,o=e.length,a=i.length,s=-1,l=t.length,c=Vr(o-a,0),u=Array(l+c),d=!n;++s<l;)u[s]=t[s];for(;++r<a;)(d||r<o)&&(u[i[r]]=e[r]);for(;c--;)u[s++]=e[r++];return u}var Hr=Math.max;function Gr(e,t,i,n){for(var r=-1,o=e.length,a=-1,s=i.length,l=-1,c=t.length,u=Hr(o-s,0),d=Array(u+c),h=!n;++r<u;)d[r]=e[r];for(var p=r;++l<c;)d[p+l]=t[l];for(;++a<s;)(h||r<o)&&(d[p+i[a]]=e[r++]);return d}function Yr(){}function Wr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Xr(){}Wr.prototype=o(Yr.prototype),Wr.prototype.constructor=Wr;var $r=Rr?function(e){return Rr.get(e)}:Xr,qr={},Kr=Object.prototype.hasOwnProperty;function Jr(e){for(var t=e.name+"",i=qr[t],n=Kr.call(qr,t)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==e)return r.name}return t}function Zr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function eo(e){if(e instanceof Wr)return e.clone();var t=new Zr(e.__wrapped__,e.__chain__);return t.__actions__=a(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}Zr.prototype=o(Yr.prototype),Zr.prototype.constructor=Zr;var to=Object.prototype.hasOwnProperty;function io(e){if(Ei(e)&&!Si(e)&&!(e instanceof Wr)){if(e instanceof Zr)return e;if(to.call(e,"__wrapped__"))return eo(e)}return new Zr(e)}function no(e){var t=Jr(e),i=io[t];if("function"!=typeof i||!(t in Wr.prototype))return!1;if(e===i)return!0;var n=$r(i);return!!n&&e===n[0]}io.prototype=Yr.prototype,io.prototype.constructor=io;var ro=s(zr),oo=/\{\n\/\* \[wrapped with (.+)\] \*/,ao=/,? & /,so=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function lo(e,t,i,n){for(var r=e.length,o=i+(n?1:-1);n?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function co(e){return e!=e}function uo(e,t,i){return t==t?function(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}(e,t,i):lo(e,co,i)}function ho(e,t){return!(null==e||!e.length)&&uo(e,t,0)>-1}var po=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function fo(e,t,i){var n=t+"";return c(e,function(e,t){var i=t.length;if(!i)return e;var n=i-1;return t[n]=(i>1?"& ":"")+t[n],t=t.join(i>2?", ":" "),e.replace(so,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return l(po,(function(i){var n="_."+i[0];t&i[1]&&!ho(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(oo);return t?t[1].split(ao):[]}(n),i)))}function go(e,t,i,n,r,o,a,s,l,c){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var d=[e,t,r,u?o:void 0,u?a:void 0,u?void 0:o,u?void 0:a,s,l,c],h=i.apply(void 0,d);return no(e)&&ro(h,d),h.placeholder=n,fo(h,e,t)}function vo(e){return e.placeholder}var mo=Math.min,Ao="__lodash_placeholder__";function bo(e,t){for(var i=-1,n=e.length,r=0,o=[];++i<n;){var a=e[i];a!==t&&a!==Ao||(e[i]=Ao,o[r++]=i)}return o}function yo(e,t,i,n,r,o,s,l,c,u){var d=128&t,h=1&t,p=2&t,f=24&t,g=512&t,v=p?void 0:Nr(e);return function m(){for(var A=arguments.length,b=Array(A),y=A;y--;)b[y]=arguments[y];if(f)var x=vo(m),w=function(e,t){for(var i=e.length,n=0;i--;)e[i]===t&&++n;return n}(b,x);if(n&&(b=Ur(b,n,r,f)),o&&(b=Gr(b,o,s,f)),A-=w,f&&A<u){var _=bo(b,x);return go(e,t,yo,m.placeholder,i,b,_,l,c,u-A)}var C=h?i:this,k=p?C[e]:e;return A=b.length,l?b=function(e,t){for(var i=e.length,n=mo(t.length,i),r=a(e);n--;){var o=t[n];e[n]=Ii(o,i)?r[o]:void 0}return e}(b,l):g&&A>1&&b.reverse(),d&&c<A&&(b.length=c),this&&this!==ki&&this instanceof m&&(k=v||Nr(k)),k.apply(C,b)}}var xo="__lodash_placeholder__",wo=128,_o=Math.min,Co=Math.max;function ko(e,t,i,n,r,o,a,s){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var c=n?n.length:0;if(c||(t&=-97,n=r=void 0),a=void 0===a?a:Co(Fr(a),0),s=void 0===s?s:Fr(s),c-=r?r.length:0,64&t){var d=n,h=r;n=r=void 0}var p=l?void 0:$r(e),f=[e,t,i,n,r,d,h,o,a,s];if(p&&function(e,t){var i=e[1],n=t[1],r=i|n,o=r<131,a=n==wo&&8==i||n==wo&&256==i&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==i;if(!o&&!a)return e;1&n&&(e[2]=t[2],r|=1&i?0:4);var s=t[3];if(s){var l=e[3];e[3]=l?Ur(l,s,t[4]):s,e[4]=l?bo(e[3],xo):t[4]}(s=t[5])&&(l=e[5],e[5]=l?Gr(l,s,t[6]):s,e[6]=l?bo(e[5],xo):t[6]),(s=t[7])&&(e[7]=s),n&wo&&(e[8]=null==e[8]?t[8]:_o(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r}(f,p),e=f[0],t=f[1],i=f[2],n=f[3],r=f[4],!(s=f[9]=void 0===f[9]?l?0:e.length:Co(f[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)g=8==t||16==t?function(e,t,i){var n=Nr(e);return function r(){for(var o=arguments.length,a=Array(o),s=o,l=vo(r);s--;)a[s]=arguments[s];var c=o<3&&a[0]!==l&&a[o-1]!==l?[]:bo(a,l);return(o-=c.length)<i?go(e,t,yo,r.placeholder,void 0,a,c,void 0,void 0,i-o):u(this&&this!==ki&&this instanceof r?n:e,this,a)}}(e,t,s):32!=t&&33!=t||r.length?yo.apply(void 0,f):function(e,t,i,n){var r=1&t,o=Nr(e);return function t(){for(var a=-1,s=arguments.length,l=-1,c=n.length,d=Array(c+s),h=this&&this!==ki&&this instanceof t?o:e;++l<c;)d[l]=n[l];for(;s--;)d[l++]=arguments[++a];return u(h,r?i:this,d)}}(e,t,i,n);else var g=function(e,t,i){var n=1&t,r=Nr(e);return function t(){return(this&&this!==ki&&this instanceof t?r:e).apply(n?i:this,arguments)}}(e,t,i);return fo((p?zr:ro)(g,f),e,t)}function Eo(e,t,i){return t=i?void 0:t,ko(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function So(e,t){return c(d(e,t,r),e+"")}function Io(e,t,i){if(!Ci(i))return!1;var n=typeof t;return!!("number"==n?h(i)&&Ii(t,i.length):"string"==n&&t in i)&&Bi(i[t],e)}function Bo(e){return So((function(t,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(o=e.length>3&&"function"==typeof o?(r--,o):void 0,a&&Io(i[0],i[1],a)&&(o=r<3?void 0:o,r=1),t=Object(t);++n<r;){var s=i[n];s&&e(t,s,n,o)}return t}))}var Oo=Object.prototype.hasOwnProperty,To=Bo((function(e,t){if(p(t)||h(t))f(t,g(t),e);else for(var i in t)Oo.call(t,i)&&Oi(e,i,t[i])})),Do=Bo((function(e,t){f(t,v(t),e)})),Mo=Bo((function(e,t,i,n){f(t,v(t),e,n)})),Qo=Bo((function(e,t,i,n){f(t,g(t),e,n)}));function Lo(e,t){for(var i=-1,n=t.length,r=Array(n),o=null==e;++i<n;)r[i]=o?void 0:m(e,t[i]);return r}var jo=A(Lo),Po=Function.prototype,Fo=Object.prototype,Ro=Po.toString,zo=Fo.hasOwnProperty,No=Ro.call(Object);function Vo(e){if(!Ei(e)||"[object Object]"!=Ti(e))return!1;var t=b(e);if(null===t)return!0;var i=zo.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Ro.call(i)==No}function Uo(e){if(!Ei(e))return!1;var t=Ti(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Vo(e)}var Ho=So((function(e,t){try{return u(e,void 0,t)}catch(i){return Uo(i)?i:new Error(i)}}));function Go(e,t){var i;if("function"!=typeof t)throw new TypeError("Expected a function");return e=Fr(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=void 0),i}}var Yo=So((function(e,t,i){var n=1;if(i.length){var r=bo(i,vo(Yo));n|=32}return ko(e,n,t,i,r)}));Yo.placeholder={};var Wo=A((function(e,t){return l(t,(function(t){t=Di(t),Mi(e,t,Yo(e[t],e))})),e})),Xo=So((function(e,t,i){var n=3;if(i.length){var r=bo(i,vo(Xo));n|=32}return ko(t,n,e,i,r)}));function $o(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var o=Array(r);++n<r;)o[n]=e[n+t];return o}function qo(e,t,i){var n=e.length;return i=void 0===i?n:i,!t&&i>=n?e:$o(e,t,i)}Xo.placeholder={};var Ko=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Jo(e){return Ko.test(e)}var Zo="\\ud800-\\udfff",ea="["+Zo+"]",ta="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ia="\\ud83c[\\udffb-\\udfff]",na="[^"+Zo+"]",ra="(?:\\ud83c[\\udde6-\\uddff]){2}",oa="[\\ud800-\\udbff][\\udc00-\\udfff]",aa="(?:"+ta+"|"+ia+")?",sa="[\\ufe0e\\ufe0f]?",la=sa+aa+"(?:\\u200d(?:"+[na,ra,oa].join("|")+")"+sa+aa+")*",ca="(?:"+[na+ta+"?",ta,ra,oa,ea].join("|")+")",ua=RegExp(ia+"(?="+ia+")|"+ca+la,"g");function da(e){return Jo(e)?function(e){return e.match(ua)||[]}(e):function(e){return e.split("")}(e)}function ha(e){return function(t){var i=Jo(t=Qi(t))?da(t):void 0,n=i?i[0]:t.charAt(0),r=i?qo(i,1).join(""):t.slice(1);return n[e]()+r}}var pa=ha("toUpperCase");function fa(e){return pa(Qi(e).toLowerCase())}function ga(e,t,i,n){var r=-1,o=null==e?0:e.length;for(n&&o&&(i=e[++r]);++r<o;)i=t(i,e[r],r,e);return i}function va(e){return function(t){return null==e?void 0:e[t]}}var ma=va({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Aa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ba=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function ya(e){return(e=Qi(e))&&e.replace(Aa,ma).replace(ba,"")}var xa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_a="\\ud800-\\udfff",Ca="\\u2700-\\u27bf",ka="a-z\\xdf-\\xf6\\xf8-\\xff",Ea="A-Z\\xc0-\\xd6\\xd8-\\xde",Sa="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ia="["+Sa+"]",Ba="\\d+",Oa="["+Ca+"]",Ta="["+ka+"]",Da="[^"+_a+Sa+Ba+Ca+ka+Ea+"]",Ma="(?:\\ud83c[\\udde6-\\uddff]){2}",Qa="[\\ud800-\\udbff][\\udc00-\\udfff]",La="["+Ea+"]",ja="(?:"+Ta+"|"+Da+")",Pa="(?:"+La+"|"+Da+")",Fa="(?:['](?:d|ll|m|re|s|t|ve))?",Ra="(?:['](?:D|LL|M|RE|S|T|VE))?",za="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Na="[\\ufe0e\\ufe0f]?",Va=Na+za+"(?:\\u200d(?:"+["[^"+_a+"]",Ma,Qa].join("|")+")"+Na+za+")*",Ua="(?:"+[Oa,Ma,Qa].join("|")+")"+Va,Ha=RegExp([La+"?"+Ta+"+"+Fa+"(?="+[Ia,La,"$"].join("|")+")",Pa+"+"+Ra+"(?="+[Ia,La+ja,"$"].join("|")+")",La+"?"+ja+"+"+Fa,La+"+"+Ra,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ba,Ua].join("|"),"g");function Ga(e,t,i){return e=Qi(e),void 0===(t=i?void 0:t)?function(e){return wa.test(e)}(e)?function(e){return e.match(Ha)||[]}(e):function(e){return e.match(xa)||[]}(e):e.match(t)||[]}var Ya=RegExp("[']","g");function Wa(e){return function(t){return ga(Ga(ya(t).replace(Ya,"")),e,"")}}var Xa=Wa((function(e,t,i){return t=t.toLowerCase(),e+(i?fa(t):t)})),$a=ki.isFinite,qa=Math.min;function Ka(e){var t=Math[e];return function(e,n){if(e=i(e),(n=null==n?0:qa(Fr(n),292))&&$a(e)){var r=(Qi(e)+"e").split("e"),o=t(r[0]+"e"+(+r[1]+n));return+((r=(Qi(o)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ja=Ka("ceil");function Za(e){var t=io(e);return t.__chain__=!0,t}var es=Math.ceil,ts=Math.max;function is(e,t,i){return e==e&&(void 0!==i&&(e=e<=i?e:i),void 0!==t&&(e=e>=t?e:t)),e}function ns(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Li;++t<i;)this.add(e[t])}function rs(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function os(e,t){return e.has(t)}function as(e,t,i,n,r,o){var a=1&i,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&i?new ns:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var f=e[d],g=t[d];if(n)var v=a?n(g,f,d,t,e,o):n(f,g,d,e,t,o);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!rs(t,(function(e,t){if(!os(p,t)&&(f===e||r(f,e,i,n,o)))return p.push(t)}))){h=!1;break}}else if(f!==g&&!r(f,g,i,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function ss(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function ls(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}ns.prototype.add=ns.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ns.prototype.has=function(e){return this.__data__.has(e)};var cs=ji?ji.prototype:void 0,us=cs?cs.valueOf:void 0,ds=Object.prototype.hasOwnProperty,hs="[object Arguments]",ps="[object Array]",fs="[object Object]",gs=Object.prototype.hasOwnProperty;function vs(e,t,i,n,r,o){var a=Si(e),s=Si(t),l=a?ps:k(e),c=s?ps:k(t),u=(l=l==hs?fs:l)==fs,d=(c=c==hs?fs:c)==fs,h=l==c;if(h&&E(e)){if(!E(t))return!1;a=!0,u=!1}if(h&&!u)return o||(o=new S),a||I(e)?as(e,t,i,n,r,o):function(e,t,i,n,r,o,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new _(e),new _(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Bi(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ss;case"[object Set]":var l=1&n;if(s||(s=ls),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=2,a.set(e,t);var u=as(s(e),s(t),n,r,o,a);return a.delete(e),u;case"[object Symbol]":if(us)return us.call(e)==us.call(t)}return!1}(e,t,l,i,n,r,o);if(!(1&i)){var p=u&&gs.call(e,"__wrapped__"),f=d&&gs.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,v=f?t.value():t;return o||(o=new S),r(g,v,i,n,o)}}return!!h&&(o||(o=new S),function(e,t,i,n,r,o){var a=1&i,s=C(e),l=s.length;if(l!=C(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:ds.call(t,u)))return!1}var d=o.get(e),h=o.get(t);if(d&&h)return d==t&&h==e;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++c<l;){var g=e[u=s[c]],v=t[u];if(n)var m=a?n(v,g,u,t,e,o):n(g,v,u,e,t,o);if(!(void 0===m?g===v||r(g,v,i,n,o):m)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var A=e.constructor,b=t.constructor;A==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof A&&A instanceof A&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,i,n,r,o))}function ms(e,t,i,n,r){return e===t||(null==e||null==t||!Ei(e)&&!Ei(t)?e!=e&&t!=t:vs(e,t,i,n,ms,r))}function As(e,t,i,n){var r=i.length,o=r,a=!n;if(null==e)return!o;for(e=Object(e);r--;){var s=i[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var l=(s=i[r])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new S;if(n)var h=n(c,u,l,e,t,d);if(!(void 0===h?ms(u,c,3,n,d):h))return!1}}return!0}function bs(e){return e==e&&!Ci(e)}function ys(e){for(var t=g(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,bs(r)]}return t}function xs(e,t){return function(i){return null!=i&&i[e]===t&&(void 0!==t||e in Object(i))}}function ws(e){var t=ys(e);return 1==t.length&&t[0][2]?xs(t[0][0],t[0][1]):function(i){return i===e||As(i,e,t)}}function _s(e,t){return Pi(e)&&bs(t)?xs(Di(e),t):function(i){var n=m(i,e);return void 0===n&&n===t?B(i,e):ms(t,n,3)}}function Cs(e){return function(t){return null==t?void 0:t[e]}}function ks(e){return Pi(e)?Cs(Di(e)):function(e){return function(t){return O(t,e)}}(e)}function Es(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?Si(e)?_s(e[0],e[1]):ws(e):ks(e)}function Ss(e,t,i){var n=i.length;if(null==e)return!n;for(e=Object(e);n--;){var r=i[n],o=t[r],a=e[r];if(void 0===a&&!(r in e)||!o(a))return!1}return!0}function Is(e,t,i,n){for(var r=-1,o=null==e?0:e.length;++r<o;){var a=e[r];t(n,a,i(a),e)}return n}function Bs(e){return function(t,i,n){for(var r=-1,o=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++r];if(!1===i(o[l],l,o))break}return t}}var Os=Bs();function Ts(e,t){return e&&Os(e,t,g)}function Ds(e,t){return function(i,n){if(null==i)return i;if(!h(i))return e(i,n);for(var r=i.length,o=t?r:-1,a=Object(i);(t?o--:++o<r)&&!1!==n(a[o],o,a););return i}}var Ms=Ds(Ts);function Qs(e,t,i,n){return Ms(e,(function(e,r,o){t(n,e,i(e),o)})),n}function Ls(e,t){return function(i,n){var r=Si(i)?Is:Qs,o=t?t():{};return r(i,e,Es(n),o)}}var js=Object.prototype.hasOwnProperty,Ps=Ls((function(e,t,i){js.call(e,i)?++e[i]:Mi(e,i,1)}));function Fs(e,t,i){var n=ko(e,8,void 0,void 0,void 0,void 0,void 0,t=i?void 0:t);return n.placeholder=Fs.placeholder,n}function Rs(e,t,i){var n=ko(e,16,void 0,void 0,void 0,void 0,void 0,t=i?void 0:t);return n.placeholder=Rs.placeholder,n}Fs.placeholder={},Rs.placeholder={};var zs=Object.prototype,Ns=zs.hasOwnProperty,Vs=So((function(e,t){e=Object(e);var i=-1,n=t.length,r=n>2?t[2]:void 0;for(r&&Io(t[0],t[1],r)&&(n=1);++i<n;)for(var o=t[i],a=v(o),s=-1,l=a.length;++s<l;){var c=a[s],u=e[c];(void 0===u||Bi(u,zs[c])&&!Ns.call(e,c))&&(e[c]=o[c])}return e}));function Us(e,t,i){(void 0!==i&&!Bi(e[t],i)||void 0===i&&!(t in e))&&Mi(e,t,i)}function Hs(e){return Ei(e)&&h(e)}function Gs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Ys(e){return f(e,v(e))}function Ws(e,t,i,n,r){e!==t&&Os(t,(function(o,s){if(r||(r=new S),Ci(o))!function(e,t,i,n,r,o,s){var l=Gs(e,i),c=Gs(t,i),u=s.get(c);if(u)Us(e,i,u);else{var d=o?o(l,c,i+"",e,t,s):void 0,h=void 0===d;if(h){var p=Si(c),f=!p&&E(c),g=!p&&!f&&I(c);d=c,p||f||g?Si(l)?d=l:Hs(l)?d=a(l):f?(h=!1,d=D(c,!0)):g?(h=!1,d=M(c,!0)):d=[]:Vo(c)||Q(c)?(d=l,Q(l)?d=Ys(l):Ci(l)&&!Ri(l)||(d=L(c))):h=!1}h&&(s.set(c,d),r(d,c,n,o,s),s.delete(c)),Us(e,i,d)}}(e,t,s,i,Ws,n,r);else{var l=n?n(Gs(e,s),o,s+"",e,t,r):void 0;void 0===l&&(l=o),Us(e,s,l)}}),v)}function Xs(e,t,i,n,r,o){return Ci(e)&&Ci(t)&&(o.set(t,e),Ws(e,t,void 0,Xs,o),o.delete(t)),e}var $s=Bo((function(e,t,i,n){Ws(e,t,i,n)})),qs=So((function(e){return e.push(void 0,Xs),u($s,void 0,e)}));function Ks(e,t,i){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,i)}),t)}var Js=So((function(e,t){return Ks(e,1,t)})),Zs=So((function(e,t,n){return Ks(e,i(t)||0,n)}));function el(e,t,i){for(var n=-1,r=null==e?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function tl(e,t,i,n){var r=-1,o=ho,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;i&&(t=Fi(t,j(i))),n?(o=el,a=!1):t.length>=200&&(o=os,a=!1,t=new ns(t));e:for(;++r<s;){var u=e[r],d=null==i?u:i(u);if(u=n||0!==u?u:0,a&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,n)||l.push(u)}return l}var il=So((function(e,t){return Hs(e)?tl(e,w(t,1,Hs,!0)):[]}));function nl(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var rl=So((function(e,t){var i=nl(t);return Hs(i)&&(i=void 0),Hs(e)?tl(e,w(t,1,Hs,!0),Es(i)):[]})),ol=So((function(e,t){var i=nl(t);return Hs(i)&&(i=void 0),Hs(e)?tl(e,w(t,1,Hs,!0),void 0,i):[]})),al=Qr((function(e,t){return e/t}),1);function sl(e,t,i,n){for(var r=e.length,o=n?r:-1;(n?o--:++o<r)&&t(e[o],o,e););return i?$o(e,n?0:o,n?o+1:r):$o(e,n?o+1:0,n?r:o)}function ll(e){return"function"==typeof e?e:r}function cl(e,t){return(Si(e)?l:Ms)(e,ll(t))}function ul(e,t){for(var i=null==e?0:e.length;i--&&!1!==t(e[i],i,e););return e}var dl=Bs(!0);function hl(e,t){return e&&dl(e,t,g)}var pl=Ds(hl,!0);function fl(e,t){return(Si(e)?ul:pl)(e,ll(t))}function gl(e){return function(t){var i=k(t);return"[object Map]"==i?ss(t):"[object Set]"==i?function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=[e,e]})),i}(t):function(e,t){return Fi(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var vl=gl(g),ml=gl(v),Al=va({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),bl=/[&<>"']/g,yl=RegExp(bl.source);function xl(e){return(e=Qi(e))&&yl.test(e)?e.replace(bl,Al):e}var wl=/[\\^$.*+?()[\]{}|]/g,_l=RegExp(wl.source);function Cl(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(!t(e[i],i,e))return!1;return!0}function kl(e,t){var i=!0;return Ms(e,(function(e,n,r){return i=!!t(e,n,r)})),i}function El(e){return e?is(Fr(e),0,4294967295):0}function Sl(e,t){var i=[];return Ms(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function Il(e){return function(t,i,n){var r=Object(t);if(!h(t)){var o=Es(i);t=g(t),i=function(e){return o(r[e],e,r)}}var a=e(t,i,n);return a>-1?r[o?t[a]:a]:void 0}}var Bl=Math.max;function Ol(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:Fr(i);return r<0&&(r=Bl(n+r,0)),lo(e,Es(t),r)}var Tl=Il(Ol);function Dl(e,t,i){var n;return i(e,(function(e,i,r){if(t(e,i,r))return n=i,!1})),n}var Ml=Math.max,Ql=Math.min;function Ll(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n-1;return void 0!==i&&(r=Fr(i),r=i<0?Ml(n+r,0):Ql(r,n-1)),lo(e,Es(t),r,!0)}var jl=Il(Ll);function Pl(e){return e&&e.length?e[0]:void 0}function Fl(e,t){var i=-1,n=h(e)?Array(e.length):[];return Ms(e,(function(e,r,o){n[++i]=t(e,r,o)})),n}function Rl(e,t){return(Si(e)?Fi:Fl)(e,Es(t))}var zl=1/0,Nl=1/0,Vl=Ka("floor");function Ul(e){return A((function(t){var i=t.length,n=i,r=Zr.prototype.thru;for(e&&t.reverse();n--;){var o=t[n];if("function"!=typeof o)throw new TypeError("Expected a function");if(r&&!a&&"wrapper"==Jr(o))var a=new Zr([],!0)}for(n=a?n:i;++n<i;){var s=Jr(o=t[n]),l="wrapper"==s?$r(o):void 0;a=l&&no(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?a[Jr(l[0])].apply(a,l[3]):1==o.length&&no(o)?a[s]():a.thru(o)}return function(){var e=arguments,n=e[0];if(a&&1==e.length&&Si(n))return a.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}var Hl=Ul(),Gl=Ul(!0);function Yl(e,t){return P(t,(function(t){return Ri(e[t])}))}var Wl=Object.prototype.hasOwnProperty,Xl=Ls((function(e,t,i){Wl.call(e,i)?e[i].push(t):Mi(e,i,[t])}));function $l(e,t){return e>t}function ql(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=i(t),n=i(n)),e(t,n)}}var Kl=ql($l),Jl=ql((function(e,t){return e>=t})),Zl=Object.prototype.hasOwnProperty;function ec(e,t){return null!=e&&Zl.call(e,t)}var tc=Math.max,ic=Math.min;function nc(e){return"string"==typeof e||!Si(e)&&Ei(e)&&"[object String]"==Ti(e)}function rc(e,t){return Fi(t,(function(t){return e[t]}))}function oc(e){return null==e?[]:rc(e,g(e))}var ac=Math.max,sc=Math.max,lc=Math.min;function cc(e,t,i){for(var n=i?el:ho,r=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,c=[];a--;){var u=e[a];a&&t&&(u=Fi(u,j(t))),l=lc(u.length,l),s[a]=!i&&(t||r>=120&&u.length>=120)?new ns(a&&u):void 0}u=e[0];var d=-1,h=s[0];e:for(;++d<r&&c.length<l;){var p=u[d],f=t?t(p):p;if(p=i||0!==p?p:0,!(h?os(h,f):n(c,f,i))){for(a=o;--a;){var g=s[a];if(!(g?os(g,f):n(e[a],f,i)))continue e}h&&h.push(f),c.push(p)}}return c}function uc(e){return Hs(e)?e:[]}var dc=So((function(e){var t=Fi(e,uc);return t.length&&t[0]===e[0]?cc(t):[]})),hc=So((function(e){var t=nl(e),i=Fi(e,uc);return t===nl(i)?t=void 0:i.pop(),i.length&&i[0]===e[0]?cc(i,Es(t)):[]})),pc=So((function(e){var t=nl(e),i=Fi(e,uc);return(t="function"==typeof t?t:void 0)&&i.pop(),i.length&&i[0]===e[0]?cc(i,void 0,t):[]}));function fc(e,t){return function(i,n){return function(e,t,i,n){return Ts(e,(function(e,r,o){t(n,i(e),r,o)})),n}(i,e,t(n),{})}}var gc=Object.prototype.toString,vc=fc((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=gc.call(t)),e[t]=i}),R(r)),mc=Object.prototype,Ac=mc.hasOwnProperty,bc=mc.toString,yc=fc((function(e,t,i){null!=t&&"function"!=typeof t.toString&&(t=bc.call(t)),Ac.call(e,t)?e[t].push(i):e[t]=[i]}),Es);function xc(e,t){return t.length<2?e:O(e,$o(t,0,-1))}function wc(e,t,i){var n=null==(e=xc(e,t=zi(t,e)))?e:e[Di(nl(t))];return null==n?void 0:u(n,e,i)}var _c=So(wc),Cc=So((function(e,t,i){var n=-1,r="function"==typeof t,o=h(e)?Array(e.length):[];return Ms(e,(function(e){o[++n]=r?u(t,e,i):wc(e,t,i)})),o})),kc=z&&z.isArrayBuffer,Ec=kc?j(kc):function(e){return Ei(e)&&"[object ArrayBuffer]"==Ti(e)},Sc=z&&z.isDate,Ic=Sc?j(Sc):function(e){return Ei(e)&&"[object Date]"==Ti(e)},Bc=Object.prototype.hasOwnProperty;function Oc(e,t){return ms(e,t)}var Tc=ki.isFinite;function Dc(e){return"number"==typeof e&&e==Fr(e)}function Mc(e){return"number"==typeof e||Ei(e)&&"[object Number]"==Ti(e)}var Qc=Ni?Ri:V,Lc=z&&z.isRegExp,jc=Lc?j(Lc):function(e){return Ei(e)&&"[object RegExp]"==Ti(e)},Pc=9007199254740991,Fc=Array.prototype.join,Rc=Wa((function(e,t,i){return e+(i?"-":"")+t.toLowerCase()})),zc=Ls((function(e,t,i){Mi(e,i,t)})),Nc=Math.max,Vc=Math.min,Uc=Wa((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()})),Hc=ha("toLowerCase");function Gc(e,t){return e<t}var Yc=ql(Gc),Wc=ql((function(e,t){return e<=t}));function Xc(e,t,i){for(var n=-1,r=e.length;++n<r;){var o=e[n],a=t(o);if(null!=a&&(void 0===s?a==a&&!wi(a):i(a,s)))var s=a,l=o}return l}function $c(e,t){for(var i,n=-1,r=e.length;++n<r;){var o=t(e[n]);void 0!==o&&(i=void 0===i?o:i+o)}return i}function qc(e,t){var i=null==e?0:e.length;return i?$c(e,t)/i:NaN}var Kc=Bo((function(e,t,i){Ws(e,t,i)})),Jc=So((function(e,t){return function(i){return wc(i,e,t)}})),Zc=So((function(e,t){return function(i){return wc(e,i,t)}}));function eu(e,t,i){var n=g(t),r=Yl(t,n),o=!(Ci(i)&&"chain"in i&&!i.chain),s=Ri(e);return l(r,(function(i){var n=t[i];e[i]=n,s&&(e.prototype[i]=function(){var t=this.__chain__;if(o||t){var i=e(this.__wrapped__);return(i.__actions__=a(this.__actions__)).push({func:n,args:arguments,thisArg:e}),i.__chain__=t,i}return n.apply(e,x([this.value()],arguments))})})),e}var tu=Qr((function(e,t){return e*t}),1);function iu(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var nu=ji?ji.iterator:void 0;function ru(e){if(!e)return[];if(h(e))return nc(e)?da(e):a(e);if(nu&&e[nu])return function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}(e[nu]());var t=k(e);return("[object Map]"==t?ss:"[object Set]"==t?ls:oc)(e)}function ou(e,t){var i=e.length;if(i)return Ii(t+=t<0?i:0,i)?e[t]:void 0}function au(e,t){return null==(e=xc(e,t=zi(t,e)))||delete e[Di(nl(t))]}function su(e){return Vo(e)?void 0:e}var lu=A((function(e,t){var i={};if(null==e)return i;var n=!1;t=Fi(t,(function(t){return t=zi(t,e),n||(n=t.length>1),t})),f(e,U(e),i),n&&(i=y(i,7,su));for(var r=t.length;r--;)au(i,t[r]);return i}));function cu(e,t){if(null==e)return{};var i=Fi(U(e),(function(e){return[e]}));return t=Es(t),H(e,i,(function(e,i){return t(e,i[0])}))}function uu(e,t){if(e!==t){var i=void 0!==e,n=null===e,r=e==e,o=wi(e),a=void 0!==t,s=null===t,l=t==t,c=wi(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||n&&a&&l||!i&&l||!r)return 1;if(!n&&!o&&!c&&e<t||c&&i&&r&&!n&&!o||s&&i&&r||!a&&r||!l)return-1}return 0}function du(e,t,i){t=t.length?Fi(t,(function(e){return Si(e)?function(t){return O(t,1===e.length?e[0]:e)}:e})):[r];var n=-1;t=Fi(t,j(Es));var o=Fl(e,(function(e,i,r){var o=Fi(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}(o,(function(e,t){return function(e,t,i){for(var n=-1,r=e.criteria,o=t.criteria,a=r.length,s=i.length;++n<a;){var l=uu(r[n],o[n]);if(l)return n>=s?l:l*("desc"==i[n]?-1:1)}return e.index-t.index}(e,t,i)}))}function hu(e){return A((function(t){return t=Fi(t,j(Es)),So((function(i){var n=this;return e(t,(function(e){return u(e,n,i)}))}))}))}var pu=hu(Fi),fu=So,gu=Math.min,vu=fu((function(e,t){var i=(t=1==t.length&&Si(t[0])?Fi(t[0],j(Es)):Fi(w(t,1),j(Es))).length;return So((function(n){for(var r=-1,o=gu(n.length,i);++r<o;)n[r]=t[r].call(this,n[r]);return u(e,this,n)}))})),mu=hu(Cl),Au=hu(rs),bu=Math.floor;function yu(e,t){var i="";if(!e||t<1||t>9007199254740991)return i;do{t%2&&(i+=e),(t=bu(t/2))&&(e+=e)}while(t);return i}var xu=Cs("length"),wu="\\ud800-\\udfff",_u="["+wu+"]",Cu="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ku="\\ud83c[\\udffb-\\udfff]",Eu="[^"+wu+"]",Su="(?:\\ud83c[\\udde6-\\uddff]){2}",Iu="[\\ud800-\\udbff][\\udc00-\\udfff]",Bu="(?:"+Cu+"|"+ku+")?",Ou="[\\ufe0e\\ufe0f]?",Tu=Ou+Bu+"(?:\\u200d(?:"+[Eu,Su,Iu].join("|")+")"+Ou+Bu+")*",Du="(?:"+[Eu+Cu+"?",Cu,Su,Iu,_u].join("|")+")",Mu=RegExp(ku+"(?="+ku+")|"+Du+Tu,"g");function Qu(e){return Jo(e)?function(e){for(var t=Mu.lastIndex=0;Mu.test(e);)++t;return t}(e):xu(e)}var Lu=Math.ceil;function ju(e,t){var i=(t=void 0===t?" ":_i(t)).length;if(i<2)return i?yu(t,e):t;var n=yu(t,Lu(e/Qu(t)));return Jo(t)?qo(da(n),0,e).join(""):n.slice(0,e)}var Pu=Math.ceil,Fu=Math.floor,Ru=/^\s+/,zu=ki.parseInt,Nu=So((function(e,t){return ko(e,32,void 0,t,bo(t,vo(Nu)))}));Nu.placeholder={};var Vu=So((function(e,t){return ko(e,64,void 0,t,bo(t,vo(Vu)))}));Vu.placeholder={};var Uu=Ls((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));function Hu(e,t,i,n){for(var r=i-1,o=e.length;++r<o;)if(n(e[r],t))return r;return-1}var Gu=Array.prototype.splice;function Yu(e,t,i,n){var r=n?Hu:uo,o=-1,s=t.length,l=e;for(e===t&&(t=a(t)),i&&(l=Fi(e,j(i)));++o<s;)for(var c=0,u=t[o],d=i?i(u):u;(c=r(l,d,c,n))>-1;)l!==e&&Gu.call(l,c,1),Gu.call(e,c,1);return e}function Wu(e,t){return e&&e.length&&t&&t.length?Yu(e,t):e}var Xu=So(Wu),$u=Array.prototype.splice;function qu(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r=t[i];if(i==n||r!==o){var o=r;Ii(r)?$u.call(e,r,1):au(e,r)}}return e}var Ku=A((function(e,t){var i=null==e?0:e.length,n=Lo(e,t);return qu(e,Fi(t,(function(e){return Ii(e,i)?+e:e})).sort(uu)),n})),Ju=Math.floor,Zu=Math.random;function ed(e,t){return e+Ju(Zu()*(t-e+1))}var td=parseFloat,id=Math.min,nd=Math.random,rd=Math.ceil,od=Math.max;function ad(e){return function(t,i,n){return n&&"number"!=typeof n&&Io(t,i,n)&&(i=n=void 0),t=Pr(t),void 0===i?(i=t,t=0):i=Pr(i),function(e,t,i,n){for(var r=-1,o=od(rd((t-e)/(i||1)),0),a=Array(o);o--;)a[n?o:++r]=e,e+=i;return a}(t,i,n=void 0===n?t<i?1:-1:Pr(n),e)}}var sd=ad(),ld=ad(!0),cd=A((function(e,t){return ko(e,256,void 0,void 0,void 0,t)}));function ud(e,t,i,n,r){return r(e,(function(e,r,o){i=n?(n=!1,e):t(i,e,r,o)})),i}function dd(e,t,i,n){var r=null==e?0:e.length;for(n&&r&&(i=e[--r]);r--;)i=t(i,e[r],r,e);return i}var hd=Array.prototype.reverse;function pd(e){return null==e?e:hd.call(e)}var fd=Ka("round");function gd(e){var t=e.length;return t?e[ed(0,t-1)]:void 0}function vd(e){return gd(oc(e))}function md(e,t){var i=-1,n=e.length,r=n-1;for(t=void 0===t?n:t;++i<t;){var o=ed(i,r),a=e[o];e[o]=e[i],e[i]=a}return e.length=t,e}function Ad(e,t){return md(a(e),is(t,0,e.length))}function bd(e,t){var i=oc(e);return md(i,is(t,0,i.length))}function yd(e){return md(a(e))}function xd(e){return md(oc(e))}var wd=Wa((function(e,t,i){return e+(i?"_":"")+t.toLowerCase()}));function _d(e,t){var i;return Ms(e,(function(e,n,r){return!(i=t(e,n,r))})),!!i}var Cd=So((function(e,t){if(null==e)return[];var i=t.length;return i>1&&Io(e,t[0],t[1])?t=[]:i>2&&Io(t[0],t[1],t[2])&&(t=[t[0]]),du(e,w(t,1),[])})),kd=Math.floor,Ed=Math.min;function Sd(e,t,i,n){var r=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=i(t))!=t,s=null===t,l=wi(t),c=void 0===t;r<o;){var u=kd((r+o)/2),d=i(e[u]),h=void 0!==d,p=null===d,f=d==d,g=wi(d);if(a)var v=n||f;else v=c?f&&(n||h):s?f&&h&&(n||!p):l?f&&h&&!p&&(n||!g):!p&&!g&&(n?d<=t:d<t);v?r=u+1:o=u}return Ed(o,4294967294)}function Id(e,t,i){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var a=n+o>>>1,s=e[a];null!==s&&!wi(s)&&(i?s<=t:s<t)?n=a+1:o=a}return o}return Sd(e,t,r,i)}function Bd(e,t){for(var i=-1,n=e.length,r=0,o=[];++i<n;){var a=e[i],s=t?t(a):a;if(!i||!Bi(s,l)){var l=s;o[r++]=0===a?0:a}}return o}var Od=Math.max,Td=Wa((function(e,t,i){return e+(i?" ":"")+pa(t)})),Dd=Qr((function(e,t){return e-t}),0),Md=Object.prototype,Qd=Md.hasOwnProperty;function Ld(e,t,i,n){return void 0===e||Bi(e,Md[i])&&!Qd.call(n,i)?t:e}var jd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Pd(e){return"\\"+jd[e]}var Fd=/<%=([\s\S]+?)%>/g,Rd={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Fd,variable:"",imports:{_:{escape:xl}}},zd=/\b__p \+= '';/g,Nd=/\b(__p \+=) '' \+/g,Vd=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ud=/[()=,{}\[\]\/\s]/,Hd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gd=/($^)/,Yd=/['\n\r\u2028\u2029\\]/g,Wd=Object.prototype.hasOwnProperty;function Xd(e,t){return t(e)}var $d=4294967295,qd=Math.min;function Kd(e,t){var i=e;return i instanceof Wr&&(i=i.value()),ga(t,(function(e,t){return t.func.apply(t.thisArg,x([e],t.args))}),i)}function Jd(){return Kd(this.__wrapped__,this.__actions__)}var Zd=9007199254740991;function eh(e,t){for(var i=e.length;i--&&uo(t,e[i],0)>-1;);return i}function th(e,t){for(var i=-1,n=e.length;++i<n&&uo(t,e[i],0)>-1;);return i}var ih=/^\s+/,nh=/\w*$/,rh=va({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),oh=/&(?:amp|lt|gt|quot|#39);/g,ah=RegExp(oh.source),sh=X&&1/ls(new X([,-0]))[1]==1/0?function(e){return new X(e)}:Xr;function lh(e,t,i){var n=-1,r=ho,o=e.length,a=!0,s=[],l=s;if(i)a=!1,r=el;else if(o>=200){var c=t?null:sh(e);if(c)return ls(c);a=!1,r=os,l=new ns}else l=t?[]:s;e:for(;++n<o;){var u=e[n],d=t?t(u):u;if(u=i||0!==u?u:0,a&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),s.push(u)}else r(l,d,i)||(l!==s&&l.push(d),s.push(u))}return s}var ch=So((function(e){return lh(w(e,1,Hs,!0))})),uh=So((function(e){var t=nl(e);return Hs(t)&&(t=void 0),lh(w(e,1,Hs,!0),Es(t))})),dh=So((function(e){var t=nl(e);return t="function"==typeof t?t:void 0,lh(w(e,1,Hs,!0),void 0,t)}));function hh(e,t){return e&&e.length?lh(e,Es(t)):[]}var ph=0,fh=Math.max;function gh(e){if(!e||!e.length)return[];var t=0;return e=P(e,(function(e){if(Hs(e))return t=fh(e.length,t),!0})),G(t,(function(t){return Fi(e,Cs(t))}))}function vh(e,t){if(!e||!e.length)return[];var i=gh(e);return null==t?i:Fi(i,(function(e){return u(t,void 0,e)}))}function mh(e,t,i,n){return Ui(e,t,i(O(e,t)),n)}var Ah=Wa((function(e,t,i){return e+(i?" ":"")+t.toUpperCase()})),bh=So((function(e,t){return Hs(e)?tl(e,t):[]})),yh=A((function(e){var t=e.length,i=t?e[0]:0,n=this.__wrapped__,r=function(t){return Lo(t,e)};return!(t>1||this.__actions__.length)&&n instanceof Wr&&Ii(i)?((n=n.slice(i,+i+(t?1:0))).__actions__.push({func:Xd,args:[r],thisArg:void 0}),new Zr(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(r)}));function xh(e,t,i){var n=e.length;if(n<2)return n?lh(e[0]):[];for(var r=-1,o=Array(n);++r<n;)for(var a=e[r],s=-1;++s<n;)s!=r&&(o[r]=tl(o[r]||a,e[s],t,i));return lh(w(o,1),t,i)}var wh=So((function(e){return xh(P(e,Hs))})),_h=So((function(e){var t=nl(e);return Hs(t)&&(t=void 0),xh(P(e,Hs),Es(t))})),Ch=So((function(e){var t=nl(e);return t="function"==typeof t?t:void 0,xh(P(e,Hs),void 0,t)})),kh=So(gh);function Eh(e,t,i){for(var n=-1,r=e.length,o=t.length,a={};++n<r;){var s=n<o?t[n]:void 0;i(a,e[n],s)}return a}var Sh=So((function(e){var t=e.length,i=t>1?e[t-1]:void 0;return i="function"==typeof i?(e.pop(),i):void 0,vh(e,i)}));const Ih={chunk:function(e,t,i){t=(i?Io(e,t,i):void 0===t)?1:ts(Fr(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var r=0,o=0,a=Array(es(n/t));r<n;)a[o++]=$o(e,r,r+=t);return a},compact:function(e){for(var t=-1,i=null==e?0:e.length,n=0,r=[];++t<i;){var o=e[t];o&&(r[n++]=o)}return r},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return x(Si(i)?a(i):[i],w(t,1))},difference:il,differenceBy:rl,differenceWith:ol,drop:function(e,t,i){var n=null==e?0:e.length;return n?$o(e,(t=i||void 0===t?1:Fr(t))<0?0:t,n):[]},dropRight:function(e,t,i){var n=null==e?0:e.length;return n?$o(e,0,(t=n-(t=i||void 0===t?1:Fr(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?sl(e,Es(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?sl(e,Es(t),!0):[]},fill:function(e,t,i,n){var r=null==e?0:e.length;return r?(i&&"number"!=typeof i&&Io(e,t,i)&&(i=0,n=r),function(e,t,i,n){var r=e.length;for((i=Fr(i))<0&&(i=-i>r?0:r+i),(n=void 0===n||n>r?r:Fr(n))<0&&(n+=r),n=i>n?0:El(n);i<n;)e[i++]=t;return e}(e,t,i,n)):[]},findIndex:Ol,findLastIndex:Ll,first:Pl,flatten:$,flattenDeep:function(e){return null!=e&&e.length?w(e,Nl):[]},flattenDepth:function(e,t){return null!=e&&e.length?(t=void 0===t?1:Fr(t),w(e,t)):[]},fromPairs:q,head:Pl,indexOf:function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=null==i?0:Fr(i);return r<0&&(r=sc(n+r,0)),uo(e,t,r)},initial:function(e){return null!=e&&e.length?$o(e,0,-1):[]},intersection:dc,intersectionBy:hc,intersectionWith:pc,join:function(e,t){return null==e?"":Fc.call(e,t)},last:nl,lastIndexOf:function(e,t,i){var n=null==e?0:e.length;if(!n)return-1;var r=n;return void 0!==i&&(r=(r=Fr(i))<0?Nc(n+r,0):Vc(r,n-1)),t==t?function(e,t,i){for(var n=i+1;n--;)if(e[n]===t)return n;return n}(e,t,r):lo(e,co,r,!0)},nth:function(e,t){return e&&e.length?ou(e,Fr(t)):void 0},pull:Xu,pullAll:Wu,pullAllBy:function(e,t,i){return e&&e.length&&t&&t.length?Yu(e,t,Es(i)):e},pullAllWith:function(e,t,i){return e&&e.length&&t&&t.length?Yu(e,t,void 0,i):e},pullAt:Ku,remove:function(e,t){var i=[];if(!e||!e.length)return i;var n=-1,r=[],o=e.length;for(t=Es(t);++n<o;){var a=e[n];t(a,n,e)&&(i.push(a),r.push(n))}return qu(e,r),i},reverse:pd,slice:function(e,t,i){var n=null==e?0:e.length;return n?(i&&"number"!=typeof i&&Io(e,t,i)?(t=0,i=n):(t=null==t?0:Fr(t),i=void 0===i?n:Fr(i)),$o(e,t,i)):[]},sortedIndex:function(e,t){return Id(e,t)},sortedIndexBy:function(e,t,i){return Sd(e,t,Es(i))},sortedIndexOf:function(e,t){var i=null==e?0:e.length;if(i){var n=Id(e,t);if(n<i&&Bi(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return Id(e,t,!0)},sortedLastIndexBy:function(e,t,i){return Sd(e,t,Es(i),!0)},sortedLastIndexOf:function(e,t){if(null!=e&&e.length){var i=Id(e,t,!0)-1;if(Bi(e[i],t))return i}return-1},sortedUniq:function(e){return e&&e.length?Bd(e):[]},sortedUniqBy:function(e,t){return e&&e.length?Bd(e,Es(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?$o(e,1,t):[]},take:function(e,t,i){return e&&e.length?$o(e,0,(t=i||void 0===t?1:Fr(t))<0?0:t):[]},takeRight:function(e,t,i){var n=null==e?0:e.length;return n?$o(e,(t=n-(t=i||void 0===t?1:Fr(t)))<0?0:t,n):[]},takeRightWhile:function(e,t){return e&&e.length?sl(e,Es(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?sl(e,Es(t)):[]},union:ch,unionBy:uh,unionWith:dh,uniq:function(e){return e&&e.length?lh(e):[]},uniqBy:hh,uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?lh(e,void 0,t):[]},unzip:gh,unzipWith:vh,without:bh,xor:wh,xorBy:_h,xorWith:Ch,zip:kh,zipObject:function(e,t){return Eh(e||[],t||[],Oi)},zipObjectDeep:function(e,t){return Eh(e||[],t||[],Ui)},zipWith:Sh},Bh={countBy:Ps,each:cl,eachRight:fl,every:function(e,t,i){var n=Si(e)?Cl:kl;return i&&Io(e,t,i)&&(t=void 0),n(e,Es(t))},filter:function(e,t){return(Si(e)?P:Sl)(e,Es(t))},find:Tl,findLast:jl,flatMap:function(e,t){return w(Rl(e,t),1)},flatMapDeep:function(e,t){return w(Rl(e,t),zl)},flatMapDepth:function(e,t,i){return i=void 0===i?1:Fr(i),w(Rl(e,t),i)},forEach:cl,forEachRight:fl,groupBy:Xl,includes:function(e,t,i,n){e=h(e)?e:oc(e),i=i&&!n?Fr(i):0;var r=e.length;return i<0&&(i=ac(r+i,0)),nc(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&uo(e,t,i)>-1},invokeMap:Cc,keyBy:zc,map:Rl,orderBy:function(e,t,i,n){return null==e?[]:(Si(t)||(t=null==t?[]:[t]),Si(i=n?void 0:i)||(i=null==i?[]:[i]),du(e,t,i))},partition:Uu,reduce:function(e,t,i){var n=Si(e)?ga:ud,r=arguments.length<3;return n(e,Es(t),i,r,Ms)},reduceRight:function(e,t,i){var n=Si(e)?dd:ud,r=arguments.length<3;return n(e,Es(t),i,r,pl)},reject:function(e,t){return(Si(e)?P:Sl)(e,iu(Es(t)))},sample:function(e){return(Si(e)?gd:vd)(e)},sampleSize:function(e,t,i){return t=(i?Io(e,t,i):void 0===t)?1:Fr(t),(Si(e)?Ad:bd)(e,t)},shuffle:function(e){return(Si(e)?yd:xd)(e)},size:function(e){if(null==e)return 0;if(h(e))return nc(e)?Qu(e):e.length;var t=k(e);return"[object Map]"==t||"[object Set]"==t?e.size:N(e).length},some:function(e,t,i){var n=Si(e)?rs:_d;return i&&Io(e,t,i)&&(t=void 0),n(e,Es(t))},sortBy:Cd},Oh={now:K},Th={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=Fr(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:Eo,before:Go,bind:Yo,bindKey:Xo,curry:Fs,curryRight:Rs,debounce:J,defer:Js,delay:Zs,flip:function(e){return ko(e,512)},memoize:Gi,negate:iu,once:function(e){return Go(2,e)},overArgs:vu,partial:Nu,partialRight:Vu,rearg:cd,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return So(e,t=void 0===t?t:Fr(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Od(Fr(t),0),So((function(i){var n=i[t],r=qo(i,0,t);return n&&x(r,n),u(e,this,r)}))},throttle:Z,unary:function(e){return Eo(e,1)},wrap:function(e,t){return Nu(ll(t),e)}},Dh={castArray:ee,clone:te,cloneDeep:function(e){return y(e,5)},cloneDeepWith:function(e,t){return y(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return y(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||Ss(e,t,g(t))},eq:Bi,gt:Kl,gte:Jl,isArguments:Q,isArray:Si,isArrayBuffer:Ec,isArrayLike:h,isArrayLikeObject:Hs,isBoolean:function(e){return!0===e||!1===e||Ei(e)&&"[object Boolean]"==Ti(e)},isBuffer:E,isDate:Ic,isElement:function(e){return Ei(e)&&1===e.nodeType&&!Vo(e)},isEmpty:function(e){if(null==e)return!0;if(h(e)&&(Si(e)||"string"==typeof e||"function"==typeof e.splice||E(e)||I(e)||Q(e)))return!e.length;var t=k(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(p(e))return!N(e).length;for(var i in e)if(Bc.call(e,i))return!1;return!0},isEqual:Oc,isEqualWith:function(e,t,i){var n=(i="function"==typeof i?i:void 0)?i(e,t):void 0;return void 0===n?ms(e,t,void 0,i):!!n},isError:Uo,isFinite:function(e){return"number"==typeof e&&Tc(e)},isFunction:Ri,isInteger:Dc,isLength:ie,isMap:ne,isMatch:function(e,t){return e===t||As(e,t,ys(t))},isMatchWith:function(e,t,i){return i="function"==typeof i?i:void 0,As(e,t,ys(t),i)},isNaN:function(e){return Mc(e)&&e!=+e},isNative:function(e){if(Qc(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Vi(e)},isNil:re,isNull:function(e){return null===e},isNumber:Mc,isObject:Ci,isObjectLike:Ei,isPlainObject:Vo,isRegExp:jc,isSafeInteger:function(e){return Dc(e)&&e>=-9007199254740991&&e<=Pc},isSet:oe,isString:nc,isSymbol:wi,isTypedArray:I,isUndefined:ae,isWeakMap:function(e){return Ei(e)&&"[object WeakMap]"==k(e)},isWeakSet:function(e){return Ei(e)&&"[object WeakSet]"==Ti(e)},lt:Yc,lte:Wc,toArray:ru,toFinite:Pr,toInteger:Fr,toLength:El,toNumber:i,toPlainObject:Ys,toSafeInteger:function(e){return e?is(Fr(e),-9007199254740991,Zd):0===e?e:0},toString:Qi},Mh={add:Lr,ceil:Ja,divide:al,floor:Vl,max:function(e){return e&&e.length?Xc(e,r,$l):void 0},maxBy:function(e,t){return e&&e.length?Xc(e,Es(t),$l):void 0},mean:function(e){return qc(e,r)},meanBy:function(e,t){return qc(e,Es(t))},min:function(e){return e&&e.length?Xc(e,r,Gc):void 0},minBy:function(e,t){return e&&e.length?Xc(e,Es(t),Gc):void 0},multiply:tu,round:fd,subtract:Dd,sum:function(e){return e&&e.length?$c(e,r):0},sumBy:function(e,t){return e&&e.length?$c(e,Es(t)):0}},Qh=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=i(n))==n?n:0),void 0!==t&&(t=(t=i(t))==t?t:0),is(i(e),t,n)},Lh=function(e,t,n){return t=Pr(t),void 0===n?(n=t,t=0):n=Pr(n),function(e,t,i){return e>=ic(t,i)&&e<tc(t,i)}(e=i(e),t,n)},jh=function(e,t,i){if(i&&"boolean"!=typeof i&&Io(e,t,i)&&(t=i=void 0),void 0===i&&("boolean"==typeof t?(i=t,t=void 0):"boolean"==typeof e&&(i=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=Pr(e),void 0===t?(t=e,e=0):t=Pr(t)),e>t){var n=e;e=t,t=n}if(i||e%1||t%1){var r=nd();return id(e+r*(t-e+td("1e-"+((r+"").length-1))),t)}return ed(e,t)},Ph={assign:To,assignIn:Do,assignInWith:Mo,assignWith:Qo,at:jo,create:function(e,t){var i=o(e);return null==t?i:T(i,t)},defaults:Vs,defaultsDeep:qs,entries:vl,entriesIn:ml,extend:Do,extendWith:Mo,findKey:function(e,t){return Dl(e,Es(t),Ts)},findLastKey:function(e,t){return Dl(e,Es(t),hl)},forIn:function(e,t){return null==e?e:Os(e,ll(t),v)},forInRight:function(e,t){return null==e?e:dl(e,ll(t),v)},forOwn:function(e,t){return e&&Ts(e,ll(t))},forOwnRight:function(e,t){return e&&hl(e,ll(t))},functions:function(e){return null==e?[]:Yl(e,g(e))},functionsIn:function(e){return null==e?[]:Yl(e,v(e))},get:m,has:function(e,t){return null!=e&&F(e,t,ec)},hasIn:B,invert:vc,invertBy:yc,invoke:_c,keys:g,keysIn:v,mapKeys:function(e,t){var i={};return t=Es(t),Ts(e,(function(e,n,r){Mi(i,t(e,n,r),e)})),i},mapValues:function(e,t){var i={};return t=Es(t),Ts(e,(function(e,n,r){Mi(i,n,t(e,n,r))})),i},merge:Kc,mergeWith:$s,omit:lu,omitBy:function(e,t){return cu(e,iu(Es(t)))},pick:se,pickBy:cu,result:function(e,t,i){var n=-1,r=(t=zi(t,e)).length;for(r||(r=1,e=void 0);++n<r;){var o=null==e?void 0:e[Di(t[n])];void 0===o&&(n=r,o=i),e=Ri(o)?o.call(e):o}return e},set:Yi,setWith:function(e,t,i,n){return n="function"==typeof n?n:void 0,null==e?e:Ui(e,t,i,n)},toPairs:vl,toPairsIn:ml,transform:function(e,t,i){var n=Si(e),r=n||E(e)||I(e);if(t=Es(t),null==i){var a=e&&e.constructor;i=r?n?new a:[]:Ci(e)&&Ri(a)?o(b(e)):{}}return(r?l:Ts)(e,(function(e,n,r){return t(i,e,n,r)})),i},unset:function(e,t){return null==e||au(e,t)},update:function(e,t,i){return null==e?e:mh(e,t,ll(i))},updateWith:function(e,t,i,n){return n="function"==typeof n?n:void 0,null==e?e:mh(e,t,ll(i),n)},values:oc,valuesIn:function(e){return null==e?[]:rc(e,v(e))}},Fh={at:yh,chain:Za,commit:function(){return new Zr(this.value(),this.__chain__)},lodash:io,next:function(){void 0===this.__values__&&(this.__values__=ru(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,i=this;i instanceof Yr;){var n=eo(i);n.__index__=0,n.__values__=void 0,t?r.__wrapped__=n:t=n;var r=n;i=i.__wrapped__}return r.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof Wr){var t=e;return this.__actions__.length&&(t=new Wr(this)),(t=t.reverse()).__actions__.push({func:Xd,args:[pd],thisArg:void 0}),new Zr(t,this.__chain__)}return this.thru(pd)},tap:function(e,t){return t(e),e},thru:Xd,toIterator:function(){return this},toJSON:Jd,value:Jd,valueOf:Jd,wrapperChain:function(){return Za(this)}},Rh={camelCase:Xa,capitalize:fa,deburr:ya,endsWith:function(e,t,i){e=Qi(e),t=_i(t);var n=e.length,r=i=void 0===i?n:is(Fr(i),0,n);return(i-=t.length)>=0&&e.slice(i,r)==t},escape:xl,escapeRegExp:function(e){return(e=Qi(e))&&_l.test(e)?e.replace(wl,"\\$&"):e},kebabCase:Rc,lowerCase:Uc,lowerFirst:Hc,pad:function(e,t,i){e=Qi(e);var n=(t=Fr(t))?Qu(e):0;if(!t||n>=t)return e;var r=(t-n)/2;return ju(Fu(r),i)+e+ju(Pu(r),i)},padEnd:function(e,t,i){e=Qi(e);var n=(t=Fr(t))?Qu(e):0;return t&&n<t?e+ju(t-n,i):e},padStart:function(e,t,i){e=Qi(e);var n=(t=Fr(t))?Qu(e):0;return t&&n<t?ju(t-n,i)+e:e},parseInt:function(e,t,i){return i||null==t?t=0:t&&(t=+t),zu(Qi(e).replace(Ru,""),t||0)},repeat:function(e,t,i){return t=(i?Io(e,t,i):void 0===t)?1:Fr(t),yu(Qi(e),t)},replace:function(){var e=arguments,t=Qi(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:wd,split:function(e,t,i){return i&&"number"!=typeof i&&Io(e,t,i)&&(t=i=void 0),(i=void 0===i?4294967295:i>>>0)?(e=Qi(e))&&("string"==typeof t||null!=t&&!jc(t))&&!(t=_i(t))&&Jo(e)?qo(da(e),0,i):e.split(t,i):[]},startCase:Td,startsWith:function(e,t,i){return e=Qi(e),i=null==i?0:is(Fr(i),0,e.length),t=_i(t),e.slice(i,i+t.length)==t},template:function(e,t,i){var n=Rd.imports._.templateSettings||Rd;i&&Io(e,t,i)&&(t=void 0),e=Qi(e),t=Mo({},t,n,Ld);var r,o,a=Mo({},t.imports,n.imports,Ld),s=g(a),l=rc(a,s),c=0,u=t.interpolate||Gd,d="__p += '",h=RegExp((t.escape||Gd).source+"|"+u.source+"|"+(u===Fd?Hd:Gd).source+"|"+(t.evaluate||Gd).source+"|$","g"),p=Wd.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,i,n,a,s,l){return n||(n=a),d+=e.slice(c,l).replace(Yd,Pd),i&&(r=!0,d+="' +\n__e("+i+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),d+="';\n";var f=Wd.call(t,"variable")&&t.variable;if(f){if(Ud.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(zd,""):d).replace(Nd,"$1").replace(Vd,"$1;"),d="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var v=Ho((function(){return Function(s,p+"return "+d).apply(void 0,l)}));if(v.source=d,Uo(v))throw v;return v},templateSettings:Rd,toLower:function(e){return Qi(e).toLowerCase()},toUpper:function(e){return Qi(e).toUpperCase()},trim:function(e,t,i){if((e=Qi(e))&&(i||void 0===t))return Y(e);if(!e||!(t=_i(t)))return e;var n=da(e),r=da(t);return qo(n,th(n,r),eh(n,r)+1).join("")},trimEnd:function(e,t,i){if((e=Qi(e))&&(i||void 0===t))return e.slice(0,W(e)+1);if(!e||!(t=_i(t)))return e;var n=da(e);return qo(n,0,eh(n,da(t))+1).join("")},trimStart:function(e,t,i){if((e=Qi(e))&&(i||void 0===t))return e.replace(ih,"");if(!e||!(t=_i(t)))return e;var n=da(e);return qo(n,th(n,da(t))).join("")},truncate:function(e,t){var i=30,n="...";if(Ci(t)){var r="separator"in t?t.separator:r;i="length"in t?Fr(t.length):i,n="omission"in t?_i(t.omission):n}var o=(e=Qi(e)).length;if(Jo(e)){var a=da(e);o=a.length}if(i>=o)return e;var s=i-Qu(n);if(s<1)return n;var l=a?qo(a,0,s).join(""):e.slice(0,s);if(void 0===r)return l+n;if(a&&(s+=l.length-s),jc(r)){if(e.slice(s).search(r)){var c,u=l;for(r.global||(r=RegExp(r.source,Qi(nh.exec(r))+"g")),r.lastIndex=0;c=r.exec(u);)var d=c.index;l=l.slice(0,void 0===d?s:d)}}else if(e.indexOf(_i(r),s)!=s){var h=l.lastIndexOf(r);h>-1&&(l=l.slice(0,h))}return l+n},unescape:function(e){return(e=Qi(e))&&ah.test(e)?e.replace(oh,rh):e},upperCase:Ah,upperFirst:pa,words:Ga},zh={attempt:Ho,bindAll:Wo,cond:function(e){var t=null==e?0:e.length,i=Es;return e=t?Fi(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[i(e[0]),e[1]]})):[],So((function(i){for(var n=-1;++n<t;){var r=e[n];if(u(r[0],this,i))return u(r[1],this,i)}}))},conforms:function(e){return function(e){var t=g(e);return function(i){return Ss(i,e,t)}}(y(e,1))},constant:R,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:Hl,flowRight:Gl,identity:r,iteratee:function(e){return Es("function"==typeof e?e:y(e,1))},matches:function(e){return ws(y(e,1))},matchesProperty:function(e,t){return _s(e,y(t,1))},method:Jc,methodOf:Zc,mixin:eu,noop:Xr,nthArg:function(e){return e=Fr(e),So((function(t){return ou(t,e)}))},over:pu,overEvery:mu,overSome:Au,property:ks,propertyOf:function(e){return function(t){return null==e?void 0:O(e,t)}},range:sd,rangeRight:ld,stubArray:le,stubFalse:V,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=Fr(e))<1||e>9007199254740991)return[];var i=$d,n=qd(e,$d);t=ll(t),e-=$d;for(var r=G(n,t);++i<e;)t(i);return r},toPath:function(e){return Si(e)?Fi(e,Di):wi(e)?[e]:a(Hi(Qi(e)))},uniqueId:function(e){var t=++ph;return Qi(e)+t}};var Nh,Vh=Math.max,Uh=Math.min,Hh=Math.min,Gh=4294967295,Yh=Array.prototype,Wh=Object.prototype.hasOwnProperty,Xh=ji?ji.iterator:void 0,$h=Math.max,qh=Math.min,Kh=function(e){return function(t,i,n){if(null==n){var r=Ci(i),o=r&&g(i),a=o&&o.length&&Yl(i,o);(a?a.length:r)||(n=i,i=t,t=this)}return e(t,i,n)}}(eu);io.after=Th.after,io.ary=Th.ary,io.assign=Ph.assign,io.assignIn=Ph.assignIn,io.assignInWith=Ph.assignInWith,io.assignWith=Ph.assignWith,io.at=Ph.at,io.before=Th.before,io.bind=Th.bind,io.bindAll=zh.bindAll,io.bindKey=Th.bindKey,io.castArray=Dh.castArray,io.chain=Fh.chain,io.chunk=Ih.chunk,io.compact=Ih.compact,io.concat=Ih.concat,io.cond=zh.cond,io.conforms=zh.conforms,io.constant=zh.constant,io.countBy=Bh.countBy,io.create=Ph.create,io.curry=Th.curry,io.curryRight=Th.curryRight,io.debounce=Th.debounce,io.defaults=Ph.defaults,io.defaultsDeep=Ph.defaultsDeep,io.defer=Th.defer,io.delay=Th.delay,io.difference=Ih.difference,io.differenceBy=Ih.differenceBy,io.differenceWith=Ih.differenceWith,io.drop=Ih.drop,io.dropRight=Ih.dropRight,io.dropRightWhile=Ih.dropRightWhile,io.dropWhile=Ih.dropWhile,io.fill=Ih.fill,io.filter=Bh.filter,io.flatMap=Bh.flatMap,io.flatMapDeep=Bh.flatMapDeep,io.flatMapDepth=Bh.flatMapDepth,io.flatten=Ih.flatten,io.flattenDeep=Ih.flattenDeep,io.flattenDepth=Ih.flattenDepth,io.flip=Th.flip,io.flow=zh.flow,io.flowRight=zh.flowRight,io.fromPairs=Ih.fromPairs,io.functions=Ph.functions,io.functionsIn=Ph.functionsIn,io.groupBy=Bh.groupBy,io.initial=Ih.initial,io.intersection=Ih.intersection,io.intersectionBy=Ih.intersectionBy,io.intersectionWith=Ih.intersectionWith,io.invert=Ph.invert,io.invertBy=Ph.invertBy,io.invokeMap=Bh.invokeMap,io.iteratee=zh.iteratee,io.keyBy=Bh.keyBy,io.keys=g,io.keysIn=Ph.keysIn,io.map=Bh.map,io.mapKeys=Ph.mapKeys,io.mapValues=Ph.mapValues,io.matches=zh.matches,io.matchesProperty=zh.matchesProperty,io.memoize=Th.memoize,io.merge=Ph.merge,io.mergeWith=Ph.mergeWith,io.method=zh.method,io.methodOf=zh.methodOf,io.mixin=Kh,io.negate=iu,io.nthArg=zh.nthArg,io.omit=Ph.omit,io.omitBy=Ph.omitBy,io.once=Th.once,io.orderBy=Bh.orderBy,io.over=zh.over,io.overArgs=Th.overArgs,io.overEvery=zh.overEvery,io.overSome=zh.overSome,io.partial=Th.partial,io.partialRight=Th.partialRight,io.partition=Bh.partition,io.pick=Ph.pick,io.pickBy=Ph.pickBy,io.property=zh.property,io.propertyOf=zh.propertyOf,io.pull=Ih.pull,io.pullAll=Ih.pullAll,io.pullAllBy=Ih.pullAllBy,io.pullAllWith=Ih.pullAllWith,io.pullAt=Ih.pullAt,io.range=zh.range,io.rangeRight=zh.rangeRight,io.rearg=Th.rearg,io.reject=Bh.reject,io.remove=Ih.remove,io.rest=Th.rest,io.reverse=Ih.reverse,io.sampleSize=Bh.sampleSize,io.set=Ph.set,io.setWith=Ph.setWith,io.shuffle=Bh.shuffle,io.slice=Ih.slice,io.sortBy=Bh.sortBy,io.sortedUniq=Ih.sortedUniq,io.sortedUniqBy=Ih.sortedUniqBy,io.split=Rh.split,io.spread=Th.spread,io.tail=Ih.tail,io.take=Ih.take,io.takeRight=Ih.takeRight,io.takeRightWhile=Ih.takeRightWhile,io.takeWhile=Ih.takeWhile,io.tap=Fh.tap,io.throttle=Th.throttle,io.thru=Xd,io.toArray=Dh.toArray,io.toPairs=Ph.toPairs,io.toPairsIn=Ph.toPairsIn,io.toPath=zh.toPath,io.toPlainObject=Dh.toPlainObject,io.transform=Ph.transform,io.unary=Th.unary,io.union=Ih.union,io.unionBy=Ih.unionBy,io.unionWith=Ih.unionWith,io.uniq=Ih.uniq,io.uniqBy=Ih.uniqBy,io.uniqWith=Ih.uniqWith,io.unset=Ph.unset,io.unzip=Ih.unzip,io.unzipWith=Ih.unzipWith,io.update=Ph.update,io.updateWith=Ph.updateWith,io.values=Ph.values,io.valuesIn=Ph.valuesIn,io.without=Ih.without,io.words=Rh.words,io.wrap=Th.wrap,io.xor=Ih.xor,io.xorBy=Ih.xorBy,io.xorWith=Ih.xorWith,io.zip=Ih.zip,io.zipObject=Ih.zipObject,io.zipObjectDeep=Ih.zipObjectDeep,io.zipWith=Ih.zipWith,io.entries=Ph.toPairs,io.entriesIn=Ph.toPairsIn,io.extend=Ph.assignIn,io.extendWith=Ph.assignInWith,Kh(io,io),io.add=Mh.add,io.attempt=zh.attempt,io.camelCase=Rh.camelCase,io.capitalize=Rh.capitalize,io.ceil=Mh.ceil,io.clamp=Qh,io.clone=Dh.clone,io.cloneDeep=Dh.cloneDeep,io.cloneDeepWith=Dh.cloneDeepWith,io.cloneWith=Dh.cloneWith,io.conformsTo=Dh.conformsTo,io.deburr=Rh.deburr,io.defaultTo=zh.defaultTo,io.divide=Mh.divide,io.endsWith=Rh.endsWith,io.eq=Dh.eq,io.escape=Rh.escape,io.escapeRegExp=Rh.escapeRegExp,io.every=Bh.every,io.find=Bh.find,io.findIndex=Ih.findIndex,io.findKey=Ph.findKey,io.findLast=Bh.findLast,io.findLastIndex=Ih.findLastIndex,io.findLastKey=Ph.findLastKey,io.floor=Mh.floor,io.forEach=Bh.forEach,io.forEachRight=Bh.forEachRight,io.forIn=Ph.forIn,io.forInRight=Ph.forInRight,io.forOwn=Ph.forOwn,io.forOwnRight=Ph.forOwnRight,io.get=Ph.get,io.gt=Dh.gt,io.gte=Dh.gte,io.has=Ph.has,io.hasIn=Ph.hasIn,io.head=Ih.head,io.identity=r,io.includes=Bh.includes,io.indexOf=Ih.indexOf,io.inRange=Lh,io.invoke=Ph.invoke,io.isArguments=Dh.isArguments,io.isArray=Si,io.isArrayBuffer=Dh.isArrayBuffer,io.isArrayLike=Dh.isArrayLike,io.isArrayLikeObject=Dh.isArrayLikeObject,io.isBoolean=Dh.isBoolean,io.isBuffer=Dh.isBuffer,io.isDate=Dh.isDate,io.isElement=Dh.isElement,io.isEmpty=Dh.isEmpty,io.isEqual=Dh.isEqual,io.isEqualWith=Dh.isEqualWith,io.isError=Dh.isError,io.isFinite=Dh.isFinite,io.isFunction=Dh.isFunction,io.isInteger=Dh.isInteger,io.isLength=Dh.isLength,io.isMap=Dh.isMap,io.isMatch=Dh.isMatch,io.isMatchWith=Dh.isMatchWith,io.isNaN=Dh.isNaN,io.isNative=Dh.isNative,io.isNil=Dh.isNil,io.isNull=Dh.isNull,io.isNumber=Dh.isNumber,io.isObject=Ci,io.isObjectLike=Dh.isObjectLike,io.isPlainObject=Dh.isPlainObject,io.isRegExp=Dh.isRegExp,io.isSafeInteger=Dh.isSafeInteger,io.isSet=Dh.isSet,io.isString=Dh.isString,io.isSymbol=Dh.isSymbol,io.isTypedArray=Dh.isTypedArray,io.isUndefined=Dh.isUndefined,io.isWeakMap=Dh.isWeakMap,io.isWeakSet=Dh.isWeakSet,io.join=Ih.join,io.kebabCase=Rh.kebabCase,io.last=nl,io.lastIndexOf=Ih.lastIndexOf,io.lowerCase=Rh.lowerCase,io.lowerFirst=Rh.lowerFirst,io.lt=Dh.lt,io.lte=Dh.lte,io.max=Mh.max,io.maxBy=Mh.maxBy,io.mean=Mh.mean,io.meanBy=Mh.meanBy,io.min=Mh.min,io.minBy=Mh.minBy,io.stubArray=zh.stubArray,io.stubFalse=zh.stubFalse,io.stubObject=zh.stubObject,io.stubString=zh.stubString,io.stubTrue=zh.stubTrue,io.multiply=Mh.multiply,io.nth=Ih.nth,io.noop=zh.noop,io.now=Oh.now,io.pad=Rh.pad,io.padEnd=Rh.padEnd,io.padStart=Rh.padStart,io.parseInt=Rh.parseInt,io.random=jh,io.reduce=Bh.reduce,io.reduceRight=Bh.reduceRight,io.repeat=Rh.repeat,io.replace=Rh.replace,io.result=Ph.result,io.round=Mh.round,io.sample=Bh.sample,io.size=Bh.size,io.snakeCase=Rh.snakeCase,io.some=Bh.some,io.sortedIndex=Ih.sortedIndex,io.sortedIndexBy=Ih.sortedIndexBy,io.sortedIndexOf=Ih.sortedIndexOf,io.sortedLastIndex=Ih.sortedLastIndex,io.sortedLastIndexBy=Ih.sortedLastIndexBy,io.sortedLastIndexOf=Ih.sortedLastIndexOf,io.startCase=Rh.startCase,io.startsWith=Rh.startsWith,io.subtract=Mh.subtract,io.sum=Mh.sum,io.sumBy=Mh.sumBy,io.template=Rh.template,io.times=zh.times,io.toFinite=Dh.toFinite,io.toInteger=Fr,io.toLength=Dh.toLength,io.toLower=Rh.toLower,io.toNumber=Dh.toNumber,io.toSafeInteger=Dh.toSafeInteger,io.toString=Dh.toString,io.toUpper=Rh.toUpper,io.trim=Rh.trim,io.trimEnd=Rh.trimEnd,io.trimStart=Rh.trimStart,io.truncate=Rh.truncate,io.unescape=Rh.unescape,io.uniqueId=zh.uniqueId,io.upperCase=Rh.upperCase,io.upperFirst=Rh.upperFirst,io.each=Bh.forEach,io.eachRight=Bh.forEachRight,io.first=Ih.head,Kh(io,(Nh={},Ts(io,(function(e,t){Wh.call(io.prototype,t)||(Nh[t]=e)})),Nh),{chain:!1}),io.VERSION="4.17.21",(io.templateSettings=Rh.templateSettings).imports._=io,l(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){io[e].placeholder=io})),l(["drop","take"],(function(e,t){Wr.prototype[e]=function(i){i=void 0===i?1:$h(Fr(i),0);var n=this.__filtered__&&!t?new Wr(this):this.clone();return n.__filtered__?n.__takeCount__=qh(i,n.__takeCount__):n.__views__.push({size:qh(i,Gh),type:e+(n.__dir__<0?"Right":"")}),n},Wr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),l(["filter","map","takeWhile"],(function(e,t){var i=t+1,n=1==i||3==i;Wr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Es(e),type:i}),t.__filtered__=t.__filtered__||n,t}})),l(["head","last"],(function(e,t){var i="take"+(t?"Right":"");Wr.prototype[e]=function(){return this[i](1).value()[0]}})),l(["initial","tail"],(function(e,t){var i="drop"+(t?"":"Right");Wr.prototype[e]=function(){return this.__filtered__?new Wr(this):this[i](1)}})),Wr.prototype.compact=function(){return this.filter(r)},Wr.prototype.find=function(e){return this.filter(e).head()},Wr.prototype.findLast=function(e){return this.reverse().find(e)},Wr.prototype.invokeMap=So((function(e,t){return"function"==typeof e?new Wr(this):this.map((function(i){return wc(i,e,t)}))})),Wr.prototype.reject=function(e){return this.filter(iu(Es(e)))},Wr.prototype.slice=function(e,t){e=Fr(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Wr(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),void 0!==t&&(i=(t=Fr(t))<0?i.dropRight(-t):i.take(t-e)),i)},Wr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wr.prototype.toArray=function(){return this.take(Gh)},Ts(Wr.prototype,(function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),r=io[n?"take"+("last"==t?"Right":""):t],o=n||/^find/.test(t);r&&(io.prototype[t]=function(){var t=this.__wrapped__,a=n?[1]:arguments,s=t instanceof Wr,l=a[0],c=s||Si(t),u=function(e){var t=r.apply(io,x([e],a));return n&&d?t[0]:t};c&&i&&"function"==typeof l&&1!=l.length&&(s=c=!1);var d=this.__chain__,h=!!this.__actions__.length,p=o&&!d,f=s&&!h;if(!o&&c){t=f?t:new Wr(this);var g=e.apply(t,a);return g.__actions__.push({func:Xd,args:[u],thisArg:void 0}),new Zr(g,d)}return p&&f?e.apply(this,a):(g=this.thru(u),p?n?g.value()[0]:g.value():g)})})),l(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Yh[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);io.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var r=this.value();return t.apply(Si(r)?r:[],e)}return this[i]((function(i){return t.apply(Si(i)?i:[],e)}))}})),Ts(Wr.prototype,(function(e,t){var i=io[t];if(i){var n=i.name+"";Wh.call(qr,n)||(qr[n]=[]),qr[n].push({name:t,func:i})}})),qr[yo(void 0,2).name]=[{name:"wrapper",func:void 0}],Wr.prototype.clone=function(){var e=new Wr(this.__wrapped__);return e.__actions__=a(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=a(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=a(this.__views__),e},Wr.prototype.reverse=function(){if(this.__filtered__){var e=new Wr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,i=Si(e),n=t<0,r=i?e.length:0,o=function(e,t,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Uh(t,e+a);break;case"takeRight":e=Vh(e,t-a)}}return{start:e,end:t}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=n?s:a-1,u=this.__iteratees__,d=u.length,h=0,p=Hh(l,this.__takeCount__);if(!i||!n&&r==l&&p==l)return Kd(e,this.__actions__);var f=[];e:for(;l--&&h<p;){for(var g=-1,v=e[c+=t];++g<d;){var m=u[g],A=m.iteratee,b=m.type,y=A(v);if(2==b)v=y;else if(!y){if(1==b)continue e;break e}}f[h++]=v}return f}
/**
       * @license
       * Lodash (Custom Build) <https://lodash.com/>
       * Build: `lodash modularize exports="es" -o ./`
       * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
       * Released under MIT license <https://lodash.com/license>
       * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
       * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
       */,io.prototype.at=Fh.at,io.prototype.chain=Fh.wrapperChain,io.prototype.commit=Fh.commit,io.prototype.next=Fh.next,io.prototype.plant=Fh.plant,io.prototype.reverse=Fh.reverse,io.prototype.toJSON=io.prototype.valueOf=io.prototype.value=Fh.value,io.prototype.first=io.prototype.head,Xh&&(io.prototype[Xh]=Fh.toIterator);const Jh=e=>{let t,i;return"touchend"===e.type?(i=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(i=e.touches[0].clientY,t=e.touches[0].clientX):(i=e.clientY,t=e.clientX),{clientX:t,clientY:i}},Zh=Symbol("breadcrumbKey"),ep=ue({separator:{type:String,default:"/"},separatorIcon:{type:de}}),tp=["aria-label"],ip=Wi({name:"ElBreadcrumb"}),np=Wi({...ip,props:ep,setup(e){const t=e,{t:i}=he(),n=pe("breadcrumb"),r=Xi();return $i(Zh,t),qi((()=>{const e=r.value.querySelectorAll(`.${n.e("item")}`);e.length&&e[e.length-1].setAttribute("aria-current","page")})),(e,t)=>(Ki(),Ji("div",{ref_key:"breadcrumb",ref:r,class:en(tn(n).b()),"aria-label":tn(i)("el.breadcrumb.label"),role:"navigation"},[Zi(e.$slots,"default")],10,tp))}});var rp=fe(np,[["__file","breadcrumb.vue"]]);const op=ue({to:{type:ge([String,Object]),default:""},replace:{type:Boolean,default:!1}}),ap=Wi({name:"ElBreadcrumbItem"}),sp=Wi({...ap,props:op,setup(e){const t=e,i=cn(),n=nn(Zh,void 0),r=pe("breadcrumb"),o=i.appContext.config.globalProperties.$router,a=Xi(),s=()=>{t.to&&o&&(t.replace?o.replace(t.to):o.push(t.to))};return(e,t)=>{var i,o;return Ki(),Ji("span",{class:en(tn(r).e("item"))},[rn("span",{ref_key:"link",ref:a,class:en([tn(r).e("inner"),tn(r).is("link",!!e.to)]),role:"link",onClick:s},[Zi(e.$slots,"default")],2),(null==(i=tn(n))?void 0:i.separatorIcon)?(Ki(),on(tn(ve),{key:0,class:en(tn(r).e("separator"))},{default:an((()=>[(Ki(),on(sn(tn(n).separatorIcon)))])),_:1},8,["class"])):(Ki(),Ji("span",{key:1,class:en(tn(r).e("separator")),role:"presentation"},ln(null==(o=tn(n))?void 0:o.separator),3))],2)}}});var lp=fe(sp,[["__file","breadcrumb-item.vue"]]);const cp=me(rp,{BreadcrumbItem:lp}),up=Ae(lp);var dp={exports:{}};!function(e){e.exports=function(){var e=1e3,t=6e4,i=36e5,n="millisecond",r="second",o="minute",a="hour",s="day",l="week",c="month",u="quarter",d="year",h="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],i=e%100;return"["+e+(t[(i-20)%10]||t[i]||t[0])+"]"}},m=function(e,t,i){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(i)+e},A={s:m,z:function(e){var t=-e.utcOffset(),i=Math.abs(t),n=Math.floor(i/60),r=i%60;return(t<=0?"+":"-")+m(n,2,"0")+":"+m(r,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var n=12*(i.year()-t.year())+(i.month()-t.month()),r=t.clone().add(n,c),o=i-r<0,a=t.clone().add(n+(o?-1:1),c);return+(-(n+(i-r)/(o?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:s,D:h,h:a,m:o,s:r,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",y={};y[b]=v;var x="$isDayjsObject",w=function(e){return e instanceof E||!(!e||!e[x])},_=function e(t,i,n){var r;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();y[o]&&(r=o),i&&(y[o]=i,r=o);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var s=t.name;y[s]=t,r=s}return!n&&r&&(b=r),r||!n&&b},C=function(e,t){if(w(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new E(i)},k=A;k.l=_,k.i=w,k.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function v(e){this.$L=_(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[x]=!0}var m=v.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var r=n[2]-1||0,o=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,o)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return k},m.isValid=function(){return!(this.$d.toString()===p)},m.isSame=function(e,t){var i=C(e);return this.startOf(t)<=i&&i<=this.endOf(t)},m.isAfter=function(e,t){return C(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<C(e)},m.$g=function(e,t,i){return k.u(e)?this[t]:this.set(i,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var i=this,n=!!k.u(t)||t,u=k.p(e),p=function(e,t){var r=k.w(i.$u?Date.UTC(i.$y,t,e):new Date(i.$y,t,e),i);return n?r:r.endOf(s)},f=function(e,t){return k.w(i.toDate()[e].apply(i.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),i)},g=this.$W,v=this.$M,m=this.$D,A="set"+(this.$u?"UTC":"");switch(u){case d:return n?p(1,0):p(31,11);case c:return n?p(1,v):p(0,v+1);case l:var b=this.$locale().weekStart||0,y=(g<b?g+7:g)-b;return p(n?m-y:m+(6-y),v);case s:case h:return f(A+"Hours",0);case a:return f(A+"Minutes",1);case o:return f(A+"Seconds",2);case r:return f(A+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var i,l=k.p(e),u="set"+(this.$u?"UTC":""),p=(i={},i[s]=u+"Date",i[h]=u+"Date",i[c]=u+"Month",i[d]=u+"FullYear",i[a]=u+"Hours",i[o]=u+"Minutes",i[r]=u+"Seconds",i[n]=u+"Milliseconds",i)[l],f=l===s?this.$D+(t-this.$W):t;if(l===c||l===d){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[k.p(e)]()},m.add=function(n,u){var h,p=this;n=Number(n);var f=k.p(u),g=function(e){var t=C(p);return k.w(t.date(t.date()+Math.round(e*n)),p)};if(f===c)return this.set(c,this.$M+n);if(f===d)return this.set(d,this.$y+n);if(f===s)return g(1);if(f===l)return g(7);var v=(h={},h[o]=t,h[a]=i,h[r]=e,h)[f]||1,m=this.$d.getTime()+n*v;return k.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return i.invalidDate||p;var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=k.z(this),o=this.$H,a=this.$m,s=this.$M,l=i.weekdays,c=i.months,u=i.meridiem,d=function(e,i,r,o){return e&&(e[i]||e(t,n))||r[i].slice(0,o)},h=function(e){return k.s(o%12||12,e,"0")},f=u||function(e,t,i){var n=e<12?"AM":"PM";return i?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return k.s(t.$y,4,"0");case"M":return s+1;case"MM":return k.s(s+1,2,"0");case"MMM":return d(i.monthsShort,s,c,3);case"MMMM":return d(c,s);case"D":return t.$D;case"DD":return k.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(i.weekdaysMin,t.$W,l,2);case"ddd":return d(i.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return k.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(o,a,!0);case"A":return f(o,a,!1);case"m":return String(a);case"mm":return k.s(a,2,"0");case"s":return String(t.$s);case"ss":return k.s(t.$s,2,"0");case"SSS":return k.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,h,p){var f,g=this,v=k.p(h),m=C(n),A=(m.utcOffset()-this.utcOffset())*t,b=this-m,y=function(){return k.m(g,m)};switch(v){case d:f=y()/12;break;case c:f=y();break;case u:f=y()/3;break;case l:f=(b-A)/6048e5;break;case s:f=(b-A)/864e5;break;case a:f=b/i;break;case o:f=b/t;break;case r:f=b/e;break;default:f=b}return p?f:k.a(f)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return y[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),n=_(e,t,!0);return n&&(i.$L=n),i},m.clone=function(){return k.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),S=E.prototype;return C.prototype=S,[["$ms",n],["$s",r],["$m",o],["$H",a],["$W",s],["$M",c],["$y",d],["$D",h]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,E,C),e.$i=!0),C},C.locale=_,C.isDayjs=w,C.unix=function(e){return C(1e3*e)},C.en=y[b],C.Ls=y,C.p={},C}()}(dp);const hp=un(dp.exports),pp=new Map;let fp;function gp(e,t){let i=[];return Array.isArray(t.arg)?i=t.arg:be(t.arg)&&i.push(t.arg),function(n,r){const o=t.instance.popperRef,a=n.target,s=null==r?void 0:r.target,l=!t||!t.instance,c=!a||!s,u=e.contains(a)||e.contains(s),d=e===a,h=i.length&&i.some((e=>null==e?void 0:e.contains(a)))||i.length&&i.includes(s),p=o&&(o.contains(a)||o.contains(s));l||c||u||d||h||p||t.value(n,r)}}ce&&(document.addEventListener("mousedown",(e=>fp=e)),document.addEventListener("mouseup",(e=>{for(const t of pp.values())for(const{documentHandler:i}of t)i(e,fp)})));const vp={beforeMount(e,t){pp.has(e)||pp.set(e,[]),pp.get(e).push({documentHandler:gp(e,t),bindingFn:t.value})},updated(e,t){pp.has(e)||pp.set(e,[]);const i=pp.get(e),n=i.findIndex((e=>e.bindingFn===t.oldValue)),r={documentHandler:gp(e,t),bindingFn:t.value};n>=0?i.splice(n,1,r):i.push(r)},unmounted(e){pp.delete(e)}},mp=100,Ap=600,bp={beforeMount(e,t){const i=t.value,{interval:n=mp,delay:r=Ap}=dn(i)?{}:i;let o,a;const s=()=>dn(i)?i():i.handler(),l=()=>{a&&(clearTimeout(a),a=void 0),o&&(clearInterval(o),o=void 0)};e.addEventListener("mousedown",(e=>{0===e.button&&(l(),s(),document.addEventListener("mouseup",(()=>l()),{once:!0}),a=setTimeout((()=>{o=setInterval((()=>{s()}),n)}),r))}))}},yp={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:ye,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...xe(["ariaControls"])},xp={[we]:e=>hn(e)||_e(e)||Ce(e),change:e=>hn(e)||_e(e)||Ce(e)},wp=Symbol("checkboxGroupContextKey"),_p=(e,{model:t,isLimitExceeded:i,hasOwnLabel:n,isDisabled:r,isLabeledByFormItem:o})=>{const a=nn(wp,void 0),{formItem:s}=Se(),{emit:l}=cn();function c(t){var i,n,r,o;return[!0,e.trueValue,e.trueLabel].includes(t)?null==(n=null!=(i=e.trueValue)?i:e.trueLabel)||n:null!=(o=null!=(r=e.falseValue)?r:e.falseLabel)&&o}const u=pn((()=>(null==a?void 0:a.validateEvent)||e.validateEvent));return fn((()=>e.modelValue),(()=>{u.value&&(null==s||s.validate("change").catch((e=>Ie())))})),{handleChange:function(e){if(i.value)return;const t=e.target;l("change",c(t.checked),e)},onClickRoot:async function(a){i.value||n.value||r.value||!o.value||a.composedPath().some((e=>"LABEL"===e.tagName))||(t.value=c([!1,e.falseValue,e.falseLabel].includes(t.value)),await gn(),function(e,t){l("change",c(e),t)}(t.value,a))}}},Cp=(e,t)=>{const{formItem:i}=Se(),{model:n,isGroup:r,isLimitExceeded:o}=(e=>{const t=Xi(!1),{emit:i}=cn(),n=nn(wp,void 0),r=pn((()=>!1===ke(n))),o=Xi(!1),a=pn({get(){var i,o;return r.value?null==(i=null==n?void 0:n.modelValue)?void 0:i.value:null!=(o=e.modelValue)?o:t.value},set(e){var s,l;r.value&&vn(e)?(o.value=void 0!==(null==(s=null==n?void 0:n.max)?void 0:s.value)&&e.length>(null==n?void 0:n.max.value)&&e.length>a.value.length,!1===o.value&&(null==(l=null==n?void 0:n.changeEvent)||l.call(n,e))):(i(we,e),t.value=e)}});return{model:a,isGroup:r,isLimitExceeded:o}})(e),{isFocused:a,isChecked:s,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=((e,t,{model:i})=>{const n=nn(wp,void 0),r=Xi(!1),o=pn((()=>Be(e.value)?e.label:e.value)),a=pn((()=>{const t=i.value;return Ce(t)?t:vn(t)?mn(o.value)?t.map(An).some((e=>Oc(e,o.value))):t.map(An).includes(o.value):null!=t?t===e.trueValue||t===e.trueLabel:!!t}));return{checkboxButtonSize:Oe(pn((()=>{var e;return null==(e=null==n?void 0:n.size)?void 0:e.value})),{prop:!0}),isChecked:a,isFocused:r,checkboxSize:Oe(pn((()=>{var e;return null==(e=null==n?void 0:n.size)?void 0:e.value}))),hasOwnLabel:pn((()=>!!t.default||!Be(o.value))),actualValue:o}})(e,t,{model:n}),{isDisabled:h}=(({model:e,isChecked:t})=>{const i=nn(wp,void 0),n=pn((()=>{var n,r;const o=null==(n=null==i?void 0:i.max)?void 0:n.value,a=null==(r=null==i?void 0:i.min)?void 0:r.value;return!ke(o)&&e.value.length>=o&&!t.value||!ke(a)&&e.value.length<=a&&t.value}));return{isDisabled:Ee(pn((()=>(null==i?void 0:i.disabled.value)||n.value))),isLimitDisabled:n}})({model:n,isChecked:s}),{inputId:p,isLabeledByFormItem:f}=Te(e,{formItemContext:i,disableIdGeneration:u,disableIdManagement:r}),{handleChange:g,onClickRoot:v}=_p(e,{model:n,isLimitExceeded:o,hasOwnLabel:u,isDisabled:h,isLabeledByFormItem:f});var m,A;return e.checked&&(vn(n.value)&&!n.value.includes(d.value)?n.value.push(d.value):n.value=null==(A=null!=(m=e.trueValue)?m:e.trueLabel)||A),De({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},pn((()=>!!e.controls))),De({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},pn((()=>r.value&&Be(e.value)))),De({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},pn((()=>!!e.trueLabel))),De({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},pn((()=>!!e.falseLabel))),{inputId:p,isLabeledByFormItem:f,isChecked:s,isDisabled:h,isFocused:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:n,actualValue:d,handleChange:g,onClickRoot:v}},kp=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],Ep=["id","indeterminate","disabled","value","name","tabindex"],Sp=Wi({name:"ElCheckbox"}),Ip=Wi({...Sp,props:yp,emits:xp,setup(e){const t=e,i=bn(),{inputId:n,isLabeledByFormItem:r,isChecked:o,isDisabled:a,isFocused:s,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:h,onClickRoot:p}=Cp(t,i),f=pe("checkbox"),g=pn((()=>[f.b(),f.m(l.value),f.is("disabled",a.value),f.is("bordered",t.border),f.is("checked",o.value)])),v=pn((()=>[f.e("input"),f.is("disabled",a.value),f.is("checked",o.value),f.is("indeterminate",t.indeterminate),f.is("focus",s.value)]));return(e,t)=>(Ki(),on(sn(!tn(c)&&tn(r)?"span":"label"),{class:en(tn(g)),"aria-controls":e.indeterminate?e.controls||e.ariaControls:null,onClick:tn(p)},{default:an((()=>{var i,r;return[rn("span",{class:en(tn(v))},[e.trueValue||e.falseValue||e.trueLabel||e.falseLabel?yn((Ki(),Ji("input",{key:0,id:tn(n),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(u)?u.value=e:null),class:en(tn(f).e("original")),type:"checkbox",indeterminate:e.indeterminate,name:e.name,tabindex:e.tabindex,disabled:tn(a),"true-value":null!=(i=e.trueValue)?i:e.trueLabel,"false-value":null!=(r=e.falseValue)?r:e.falseLabel,onChange:t[1]||(t[1]=(...e)=>tn(h)&&tn(h)(...e)),onFocus:t[2]||(t[2]=e=>s.value=!0),onBlur:t[3]||(t[3]=e=>s.value=!1),onClick:t[4]||(t[4]=wn((()=>{}),["stop"]))},null,42,kp)),[[_n,tn(u)]]):yn((Ki(),Ji("input",{key:1,id:tn(n),"onUpdate:modelValue":t[5]||(t[5]=e=>xn(u)?u.value=e:null),class:en(tn(f).e("original")),type:"checkbox",indeterminate:e.indeterminate,disabled:tn(a),value:tn(d),name:e.name,tabindex:e.tabindex,onChange:t[6]||(t[6]=(...e)=>tn(h)&&tn(h)(...e)),onFocus:t[7]||(t[7]=e=>s.value=!0),onBlur:t[8]||(t[8]=e=>s.value=!1),onClick:t[9]||(t[9]=wn((()=>{}),["stop"]))},null,42,Ep)),[[_n,tn(u)]]),rn("span",{class:en(tn(f).e("inner"))},null,2)],2),tn(c)?(Ki(),Ji("span",{key:0,class:en(tn(f).e("label"))},[Zi(e.$slots,"default"),e.$slots.default?En("v-if",!0):(Ki(),Ji(Cn,{key:0},[kn(ln(e.label),1)],64))],2)):En("v-if",!0)]})),_:3},8,["class","aria-controls","onClick"]))}});var Bp=fe(Ip,[["__file","checkbox.vue"]]);const Op=["name","tabindex","disabled","true-value","false-value"],Tp=["name","tabindex","disabled","value"],Dp=Wi({name:"ElCheckboxButton"}),Mp=Wi({...Dp,props:yp,emits:xp,setup(e){const t=e,i=bn(),{isFocused:n,isChecked:r,isDisabled:o,checkboxButtonSize:a,model:s,actualValue:l,handleChange:c}=Cp(t,i),u=nn(wp,void 0),d=pe("checkbox"),h=pn((()=>{var e,t,i,n;const r=null!=(t=null==(e=null==u?void 0:u.fill)?void 0:e.value)?t:"";return{backgroundColor:r,borderColor:r,color:null!=(n=null==(i=null==u?void 0:u.textColor)?void 0:i.value)?n:"",boxShadow:r?`-1px 0 0 0 ${r}`:void 0}})),p=pn((()=>[d.b("button"),d.bm("button",a.value),d.is("disabled",o.value),d.is("checked",r.value),d.is("focus",n.value)]));return(e,t)=>{var i,a;return Ki(),Ji("label",{class:en(tn(p))},[e.trueValue||e.falseValue||e.trueLabel||e.falseLabel?yn((Ki(),Ji("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>xn(s)?s.value=e:null),class:en(tn(d).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:tn(o),"true-value":null!=(i=e.trueValue)?i:e.trueLabel,"false-value":null!=(a=e.falseValue)?a:e.falseLabel,onChange:t[1]||(t[1]=(...e)=>tn(c)&&tn(c)(...e)),onFocus:t[2]||(t[2]=e=>n.value=!0),onBlur:t[3]||(t[3]=e=>n.value=!1),onClick:t[4]||(t[4]=wn((()=>{}),["stop"]))},null,42,Op)),[[_n,tn(s)]]):yn((Ki(),Ji("input",{key:1,"onUpdate:modelValue":t[5]||(t[5]=e=>xn(s)?s.value=e:null),class:en(tn(d).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:tn(o),value:tn(l),onChange:t[6]||(t[6]=(...e)=>tn(c)&&tn(c)(...e)),onFocus:t[7]||(t[7]=e=>n.value=!0),onBlur:t[8]||(t[8]=e=>n.value=!1),onClick:t[9]||(t[9]=wn((()=>{}),["stop"]))},null,42,Tp)),[[_n,tn(s)]]),e.$slots.default||e.label?(Ki(),Ji("span",{key:2,class:en(tn(d).be("button","inner")),style:Sn(tn(r)?tn(h):void 0)},[Zi(e.$slots,"default",{},(()=>[kn(ln(e.label),1)]))],6)):En("v-if",!0)],2)}}});var Qp=fe(Mp,[["__file","checkbox-button.vue"]]);const Lp=ue({modelValue:{type:ge(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:ye,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...xe(["ariaLabel"])}),jp={[we]:e=>vn(e),change:e=>vn(e)},Pp=Wi({name:"ElCheckboxGroup"}),Fp=Wi({...Pp,props:Lp,emits:jp,setup(e,{emit:t}){const i=e,n=pe("checkbox"),{formItem:r}=Se(),{inputId:o,isLabeledByFormItem:a}=Te(i,{formItemContext:r}),s=async e=>{t(we,e),await gn(),t("change",e)},l=pn({get:()=>i.modelValue,set(e){s(e)}});return $i(wp,{...se(In(i),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:s}),De({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},pn((()=>!!i.label))),fn((()=>i.modelValue),(()=>{i.validateEvent&&(null==r||r.validate("change").catch((e=>Ie())))})),(e,t)=>{var i;return Ki(),on(sn(e.tag),{id:tn(o),class:en(tn(n).b("group")),role:"group","aria-label":tn(a)?void 0:e.label||e.ariaLabel||"checkbox-group","aria-labelledby":tn(a)?null==(i=tn(r))?void 0:i.labelId:void 0},{default:an((()=>[Zi(e.$slots,"default")])),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var Rp=fe(Fp,[["__file","checkbox-group.vue"]]);const zp=me(Bp,{CheckboxButton:Qp,CheckboxGroup:Rp});Ae(Qp),Ae(Rp);const Np=ue({modelValue:{type:[String,Number,Boolean],default:void 0},size:ye,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),Vp=ue({...Np,border:Boolean}),Up={[we]:e=>hn(e)||_e(e)||Ce(e),[Me]:e=>hn(e)||_e(e)||Ce(e)},Hp=Symbol("radioGroupKey"),Gp=(e,t)=>{const i=Xi(),n=nn(Hp,void 0),r=pn((()=>!!n)),o=pn((()=>Be(e.value)?e.label:e.value)),a=pn({get:()=>r.value?n.modelValue:e.modelValue,set(a){r.value?n.changeEvent(a):t&&t(we,a),i.value.checked=e.modelValue===o.value}}),s=Oe(pn((()=>null==n?void 0:n.size))),l=Ee(pn((()=>null==n?void 0:n.disabled))),c=Xi(!1),u=pn((()=>l.value||r.value&&a.value!==o.value?-1:0));return De({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},pn((()=>r.value&&Be(e.value)))),{radioRef:i,isGroup:r,radioGroup:n,focus:c,size:s,disabled:l,tabIndex:u,modelValue:a,actualValue:o}},Yp=["value","name","disabled"],Wp=Wi({name:"ElRadio"}),Xp=Wi({...Wp,props:Vp,emits:Up,setup(e,{emit:t}){const i=e,n=pe("radio"),{radioRef:r,radioGroup:o,focus:a,size:s,disabled:l,modelValue:c,actualValue:u}=Gp(i,t);function d(){gn((()=>t("change",c.value)))}return(e,t)=>{var i;return Ki(),Ji("label",{class:en([tn(n).b(),tn(n).is("disabled",tn(l)),tn(n).is("focus",tn(a)),tn(n).is("bordered",e.border),tn(n).is("checked",tn(c)===tn(u)),tn(n).m(tn(s))])},[rn("span",{class:en([tn(n).e("input"),tn(n).is("disabled",tn(l)),tn(n).is("checked",tn(c)===tn(u))])},[yn(rn("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":t[0]||(t[0]=e=>xn(c)?c.value=e:null),class:en(tn(n).e("original")),value:tn(u),name:e.name||(null==(i=tn(o))?void 0:i.name),disabled:tn(l),type:"radio",onFocus:t[1]||(t[1]=e=>a.value=!0),onBlur:t[2]||(t[2]=e=>a.value=!1),onChange:d,onClick:t[3]||(t[3]=wn((()=>{}),["stop"]))},null,42,Yp),[[Bn,tn(c)]]),rn("span",{class:en(tn(n).e("inner"))},null,2)],2),rn("span",{class:en(tn(n).e("label")),onKeydown:t[4]||(t[4]=wn((()=>{}),["stop"]))},[Zi(e.$slots,"default",{},(()=>[kn(ln(e.label),1)]))],34)],2)}}});var $p=fe(Xp,[["__file","radio.vue"]]);const qp=ue({...Np}),Kp=["value","name","disabled"],Jp=Wi({name:"ElRadioButton"}),Zp=Wi({...Jp,props:qp,setup(e){const t=e,i=pe("radio"),{radioRef:n,focus:r,size:o,disabled:a,modelValue:s,radioGroup:l,actualValue:c}=Gp(t),u=pn((()=>({backgroundColor:(null==l?void 0:l.fill)||"",borderColor:(null==l?void 0:l.fill)||"",boxShadow:(null==l?void 0:l.fill)?`-1px 0 0 0 ${l.fill}`:"",color:(null==l?void 0:l.textColor)||""})));return(e,t)=>{var d;return Ki(),Ji("label",{class:en([tn(i).b("button"),tn(i).is("active",tn(s)===tn(c)),tn(i).is("disabled",tn(a)),tn(i).is("focus",tn(r)),tn(i).bm("button",tn(o))])},[yn(rn("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":t[0]||(t[0]=e=>xn(s)?s.value=e:null),class:en(tn(i).be("button","original-radio")),value:tn(c),type:"radio",name:e.name||(null==(d=tn(l))?void 0:d.name),disabled:tn(a),onFocus:t[1]||(t[1]=e=>r.value=!0),onBlur:t[2]||(t[2]=e=>r.value=!1),onClick:t[3]||(t[3]=wn((()=>{}),["stop"]))},null,42,Kp),[[Bn,tn(s)]]),rn("span",{class:en(tn(i).be("button","inner")),style:Sn(tn(s)===tn(c)?tn(u):{}),onKeydown:t[4]||(t[4]=wn((()=>{}),["stop"]))},[Zi(e.$slots,"default",{},(()=>[kn(ln(e.label),1)]))],38)],2)}}});var ef=fe(Zp,[["__file","radio-button.vue"]]);const tf=ue({id:{type:String,default:void 0},size:ye,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...xe(["ariaLabel"])}),nf=Up,rf=["id","aria-label","aria-labelledby"],of=Wi({name:"ElRadioGroup"}),af=Wi({...of,props:tf,emits:nf,setup(e,{emit:t}){const i=e,n=pe("radio"),r=Qe(),o=Xi(),{formItem:a}=Se(),{inputId:s,isLabeledByFormItem:l}=Te(i,{formItemContext:a});qi((()=>{const e=o.value.querySelectorAll("[type=radio]"),t=e[0];!Array.from(e).some((e=>e.checked))&&t&&(t.tabIndex=0)}));const c=pn((()=>i.name||r.value));return $i(Hp,On({...In(i),changeEvent:e=>{t(we,e),gn((()=>t("change",e)))},name:c})),fn((()=>i.modelValue),(()=>{i.validateEvent&&(null==a||a.validate("change").catch((e=>Ie())))})),De({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},pn((()=>!!i.label))),(e,t)=>(Ki(),Ji("div",{id:tn(s),ref_key:"radioGroupRef",ref:o,class:en(tn(n).b("group")),role:"radiogroup","aria-label":tn(l)?void 0:e.label||e.ariaLabel||"radio-group","aria-labelledby":tn(l)?tn(a).labelId:void 0},[Zi(e.$slots,"default")],10,rf))}});var sf=fe(af,[["__file","radio-group.vue"]]);const lf=me($p,{RadioButton:ef,RadioGroup:sf}),cf=Ae(sf),uf=Ae(ef),df=ue({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Le},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),hf={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},pf=Wi({name:"ElTag"}),ff=Wi({...pf,props:df,emits:hf,setup(e,{emit:t}){const i=e,n=Oe(),r=pe("tag"),o=pn((()=>{const{type:e,hit:t,effect:o,closable:a,round:s}=i;return[r.b(),r.is("closable",a),r.m(e||"primary"),r.m(n.value),r.m(o),r.is("hit",t),r.is("round",s)]})),a=e=>{t("close",e)},s=e=>{t("click",e)};return(e,t)=>e.disableTransitions?(Ki(),Ji("span",{key:0,class:en(tn(o)),style:Sn({backgroundColor:e.color}),onClick:s},[rn("span",{class:en(tn(r).e("content"))},[Zi(e.$slots,"default")],2),e.closable?(Ki(),on(tn(ve),{key:0,class:en(tn(r).e("close")),onClick:wn(a,["stop"])},{default:an((()=>[Tn(tn(je))])),_:1},8,["class","onClick"])):En("v-if",!0)],6)):(Ki(),on(Dn,{key:1,name:`${tn(r).namespace.value}-zoom-in-center`,appear:""},{default:an((()=>[rn("span",{class:en(tn(o)),style:Sn({backgroundColor:e.color}),onClick:s},[rn("span",{class:en(tn(r).e("content"))},[Zi(e.$slots,"default")],2),e.closable?(Ki(),on(tn(ve),{key:0,class:en(tn(r).e("close")),onClick:wn(a,["stop"])},{default:an((()=>[Tn(tn(je))])),_:1},8,["class","onClick"])):En("v-if",!0)],6)])),_:3},8,["name"]))}}),gf=me(fe(ff,[["__file","tag.vue"]])),vf=Symbol("rowContextKey"),mf=ue({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between","space-evenly"],default:"start"},align:{type:String,values:["top","middle","bottom"]}}),Af=Wi({name:"ElRow"}),bf=Wi({...Af,props:mf,setup(e){const t=e,i=pe("row"),n=pn((()=>t.gutter));$i(vf,{gutter:n});const r=pn((()=>{const e={};return t.gutter?(e.marginRight=e.marginLeft=`-${t.gutter/2}px`,e):e})),o=pn((()=>[i.b(),i.is(`justify-${t.justify}`,"start"!==t.justify),i.is(`align-${t.align}`,!!t.align)]));return(e,t)=>(Ki(),on(sn(e.tag),{class:en(tn(o)),style:Sn(tn(r))},{default:an((()=>[Zi(e.$slots,"default")])),_:3},8,["class","style"]))}}),yf=me(fe(bf,[["__file","row.vue"]])),xf=ue({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:ge([Number,Object]),default:()=>Pe({})},sm:{type:ge([Number,Object]),default:()=>Pe({})},md:{type:ge([Number,Object]),default:()=>Pe({})},lg:{type:ge([Number,Object]),default:()=>Pe({})},xl:{type:ge([Number,Object]),default:()=>Pe({})}}),wf=Wi({name:"ElCol"}),_f=Wi({...wf,props:xf,setup(e){const t=e,{gutter:i}=nn(vf,{gutter:pn((()=>0))}),n=pe("col"),r=pn((()=>{const e={};return i.value&&(e.paddingLeft=e.paddingRight=i.value/2+"px"),e})),o=pn((()=>{const e=[];return["span","offset","pull","push"].forEach((i=>{const r=t[i];_e(r)&&("span"===i?e.push(n.b(`${t[i]}`)):r>0&&e.push(n.b(`${i}-${t[i]}`)))})),["xs","sm","md","lg","xl"].forEach((i=>{_e(t[i])?e.push(n.b(`${i}-${t[i]}`)):mn(t[i])&&Object.entries(t[i]).forEach((([t,r])=>{e.push("span"!==t?n.b(`${i}-${t}-${r}`):n.b(`${i}-${r}`))}))})),i.value&&e.push(n.is("guttered")),[n.b(),e]}));return(e,t)=>(Ki(),on(sn(e.tag),{class:en(tn(o)),style:Sn(tn(r))},{default:an((()=>[Zi(e.$slots,"default")])),_:3},8,["class","style"]))}}),Cf=me(fe(_f,[["__file","col.vue"]])),kf=e=>_e(e)||hn(e)||vn(e),Ef=ue({accordion:Boolean,modelValue:{type:ge([Array,String,Number]),default:()=>Pe([])}}),Sf={[we]:kf,[Me]:kf},If=Symbol("collapseContextKey"),Bf=Wi({name:"ElCollapse"}),Of=Wi({...Bf,props:Ef,emits:Sf,setup(e,{expose:t,emit:i}){const n=e,{activeNames:r,setActiveNames:o}=((e,t)=>{const i=Xi(ee(e.modelValue)),n=n=>{i.value=n;const r=e.accordion?i.value[0]:i.value;t(we,r),t(Me,r)};return fn((()=>e.modelValue),(()=>i.value=ee(e.modelValue)),{deep:!0}),$i(If,{activeNames:i,handleItemClick:t=>{if(e.accordion)n([i.value[0]===t?"":t]);else{const e=[...i.value],r=e.indexOf(t);r>-1?e.splice(r,1):e.push(t),n(e)}}}),{activeNames:i,setActiveNames:n}})(n,i),{rootKls:a}=(()=>{const e=pe("collapse");return{rootKls:pn((()=>e.b()))}})();return t({activeNames:r,setActiveNames:o}),(e,t)=>(Ki(),Ji("div",{class:en(tn(a))},[Zi(e.$slots,"default")],2))}});var Tf=fe(Of,[["__file","collapse.vue"]]);const Df=Wi({name:"ElCollapseTransition"}),Mf=Wi({...Df,setup(e){const t=pe("collapse-transition"),i=e=>{e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},n={beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame((()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:0!==e.scrollHeight?e.style.maxHeight=`${e.scrollHeight}px`:e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow="hidden"}))},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){i(e)},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){0!==e.scrollHeight&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){i(e)},leaveCancelled(e){i(e)}};return(e,i)=>(Ki(),on(Dn,Mn({name:tn(t).b()},Qn(n)),{default:an((()=>[Zi(e.$slots,"default")])),_:3},16,["name"]))}});var Qf=fe(Mf,[["__file","collapse-transition.vue"]]);Qf.install=e=>{e.component(Qf.name,Qf)};const Lf=Qf,jf=ue({title:{type:String,default:""},name:{type:ge([String,Number]),default:void 0},disabled:Boolean}),Pf=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],Ff=["id","aria-hidden","aria-labelledby"],Rf=Wi({name:"ElCollapseItem"}),zf=Wi({...Rf,props:jf,setup(e,{expose:t}){const i=e,{focusing:n,id:r,isActive:o,handleFocus:a,handleHeaderClick:s,handleEnterClick:l}=(e=>{const t=nn(If),{namespace:i}=pe("collapse"),n=Xi(!1),r=Xi(!1),o=Fe(),a=pn((()=>o.current++)),s=pn((()=>{var t;return null!=(t=e.name)?t:`${i.value}-id-${o.prefix}-${tn(a)}`})),l=pn((()=>null==t?void 0:t.activeNames.value.includes(tn(s))));return{focusing:n,id:a,isActive:l,handleFocus:()=>{setTimeout((()=>{r.value?r.value=!1:n.value=!0}),50)},handleHeaderClick:()=>{e.disabled||(null==t||t.handleItemClick(tn(s)),n.value=!1,r.value=!0)},handleEnterClick:()=>{null==t||t.handleItemClick(tn(s))}}})(i),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:h,itemContentKls:p,scopedContentId:f,scopedHeadId:g}=((e,{focusing:t,isActive:i,id:n})=>{const r=pe("collapse"),o=pn((()=>[r.b("item"),r.is("active",tn(i)),r.is("disabled",e.disabled)])),a=pn((()=>[r.be("item","header"),r.is("active",tn(i)),{focusing:tn(t)&&!e.disabled}]));return{arrowKls:pn((()=>[r.be("item","arrow"),r.is("active",tn(i))])),headKls:a,rootKls:o,itemWrapperKls:pn((()=>r.be("item","wrap"))),itemContentKls:pn((()=>r.be("item","content"))),scopedContentId:pn((()=>r.b(`content-${tn(n)}`))),scopedHeadId:pn((()=>r.b(`head-${tn(n)}`)))}})(i,{focusing:n,isActive:o,id:r});return t({isActive:o}),(e,t)=>(Ki(),Ji("div",{class:en(tn(d))},[rn("button",{id:tn(g),class:en(tn(u)),"aria-expanded":tn(o),"aria-controls":tn(f),"aria-describedby":tn(f),tabindex:e.disabled?-1:0,type:"button",onClick:t[0]||(t[0]=(...e)=>tn(s)&&tn(s)(...e)),onKeydown:t[1]||(t[1]=Ln(wn(((...e)=>tn(l)&&tn(l)(...e)),["stop","prevent"]),["space","enter"])),onFocus:t[2]||(t[2]=(...e)=>tn(a)&&tn(a)(...e)),onBlur:t[3]||(t[3]=e=>n.value=!1)},[Zi(e.$slots,"title",{},(()=>[kn(ln(e.title),1)])),Tn(tn(ve),{class:en(tn(c))},{default:an((()=>[Tn(tn(Re))])),_:1},8,["class"])],42,Pf),Tn(tn(Lf),null,{default:an((()=>[yn(rn("div",{id:tn(f),role:"region",class:en(tn(h)),"aria-hidden":!tn(o),"aria-labelledby":tn(g)},[rn("div",{class:en(tn(p))},[Zi(e.$slots,"default")],2)],10,Ff),[[jn,tn(o)]])])),_:3})],2))}});var Nf=fe(zf,[["__file","collapse-item.vue"]]);const Vf=me(Tf,{CollapseItem:Nf}),Uf=Ae(Nf),Hf=ue({color:{type:ge(Object),required:!0},vertical:{type:Boolean,default:!1}});let Gf=!1;function Yf(e,t){if(!ce)return;const i=function(e){var i;null==(i=t.drag)||i.call(t,e)},n=function(e){var r;document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",i),document.removeEventListener("touchend",n),document.onselectstart=null,document.ondragstart=null,Gf=!1,null==(r=t.end)||r.call(t,e)},r=function(e){var r;Gf||(e.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",i),document.addEventListener("mouseup",n),document.addEventListener("touchmove",i),document.addEventListener("touchend",n),Gf=!0,null==(r=t.start)||r.call(t,e))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r)}const Wf=(e,{bar:t,thumb:i,handleDrag:n})=>{const r=cn(),o=pe("color-alpha-slider"),a=Xi(0),s=Xi(0),l=Xi();function c(){a.value=function(){if(!i.value)return 0;if(e.vertical)return 0;const t=r.vnode.el,n=e.color.get("alpha");return t?Math.round(n*(t.offsetWidth-i.value.offsetWidth/2)/100):0}(),s.value=function(){if(!i.value)return 0;const t=r.vnode.el;if(!e.vertical)return 0;const n=e.color.get("alpha");return t?Math.round(n*(t.offsetHeight-i.value.offsetHeight/2)/100):0}(),l.value=function(){if(e.color&&e.color.value){const{r:t,g:i,b:n}=e.color.toRgb();return`linear-gradient(to right, rgba(${t}, ${i}, ${n}, 0) 0%, rgba(${t}, ${i}, ${n}, 1) 100%)`}return""}()}qi((()=>{if(!t.value||!i.value)return;const e={drag:e=>{n(e)},end:e=>{n(e)}};Yf(t.value,e),Yf(i.value,e),c()})),fn((()=>e.color.get("alpha")),(()=>c())),fn((()=>e.color.value),(()=>c()));const u=pn((()=>[o.b(),o.is("vertical",e.vertical)])),d=pn((()=>o.e("bar"))),h=pn((()=>o.e("thumb")));return{rootKls:u,barKls:d,barStyle:pn((()=>({background:l.value}))),thumbKls:h,thumbStyle:pn((()=>({left:ze(a.value),top:ze(s.value)}))),update:c}},Xf=Wi({name:"ElColorAlphaSlider"}),$f=Wi({...Xf,props:Hf,setup(e,{expose:t}){const i=e,{bar:n,thumb:r,handleDrag:o,handleClick:a}=(e=>{const t=cn(),i=Pn(),n=Pn();function r(r){if(!n.value||!i.value)return;const o=t.vnode.el.getBoundingClientRect(),{clientX:a,clientY:s}=Jh(r);if(e.vertical){let t=s-o.top;t=Math.max(i.value.offsetHeight/2,t),t=Math.min(t,o.height-i.value.offsetHeight/2),e.color.set("alpha",Math.round((t-i.value.offsetHeight/2)/(o.height-i.value.offsetHeight)*100))}else{let t=a-o.left;t=Math.max(i.value.offsetWidth/2,t),t=Math.min(t,o.width-i.value.offsetWidth/2),e.color.set("alpha",Math.round((t-i.value.offsetWidth/2)/(o.width-i.value.offsetWidth)*100))}}return{thumb:i,bar:n,handleDrag:r,handleClick:function(e){e.target!==i.value&&r(e)}}})(i),{rootKls:s,barKls:l,barStyle:c,thumbKls:u,thumbStyle:d,update:h}=Wf(i,{bar:n,thumb:r,handleDrag:o});return t({update:h,bar:n,thumb:r}),(e,t)=>(Ki(),Ji("div",{class:en(tn(s))},[rn("div",{ref_key:"bar",ref:n,class:en(tn(l)),style:Sn(tn(c)),onClick:t[0]||(t[0]=(...e)=>tn(a)&&tn(a)(...e))},null,6),rn("div",{ref_key:"thumb",ref:r,class:en(tn(u)),style:Sn(tn(d))},null,6)],2))}});var qf=fe($f,[["__file","alpha-slider.vue"]]);const Kf=Wi({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=pe("color-hue-slider"),i=cn(),n=Xi(),r=Xi(),o=Xi(0),a=Xi(0),s=pn((()=>e.color.get("hue")));function l(t){if(!r.value||!n.value)return;const o=i.vnode.el.getBoundingClientRect(),{clientX:a,clientY:s}=Jh(t);let l;if(e.vertical){let e=s-o.top;e=Math.min(e,o.height-n.value.offsetHeight/2),e=Math.max(n.value.offsetHeight/2,e),l=Math.round((e-n.value.offsetHeight/2)/(o.height-n.value.offsetHeight)*360)}else{let e=a-o.left;e=Math.min(e,o.width-n.value.offsetWidth/2),e=Math.max(n.value.offsetWidth/2,e),l=Math.round((e-n.value.offsetWidth/2)/(o.width-n.value.offsetWidth)*360)}e.color.set("hue",l)}function c(){o.value=function(){if(!n.value)return 0;const t=i.vnode.el;if(e.vertical)return 0;const r=e.color.get("hue");return t?Math.round(r*(t.offsetWidth-n.value.offsetWidth/2)/360):0}(),a.value=function(){if(!n.value)return 0;const t=i.vnode.el;if(!e.vertical)return 0;const r=e.color.get("hue");return t?Math.round(r*(t.offsetHeight-n.value.offsetHeight/2)/360):0}()}return fn((()=>s.value),(()=>{c()})),qi((()=>{if(!r.value||!n.value)return;const e={drag:e=>{l(e)},end:e=>{l(e)}};Yf(r.value,e),Yf(n.value,e),c()})),{bar:r,thumb:n,thumbLeft:o,thumbTop:a,hueValue:s,handleClick:function(e){e.target!==n.value&&l(e)},update:c,ns:t}}});var Jf=fe(Kf,[["render",function(e,t,i,n,r,o){return Ki(),Ji("div",{class:en([e.ns.b(),e.ns.is("vertical",e.vertical)])},[rn("div",{ref:"bar",class:en(e.ns.e("bar")),onClick:t[0]||(t[0]=(...t)=>e.handleClick&&e.handleClick(...t))},null,2),rn("div",{ref:"thumb",class:en(e.ns.e("thumb")),style:Sn({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}],["__file","hue-slider.vue"]]);const Zf=ue({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:ye,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:Ne.teleported,predefine:{type:ge(Array)},validateEvent:{type:Boolean,default:!0},...xe(["ariaLabel"])}),eg={[we]:e=>hn(e)||re(e),[Me]:e=>hn(e)||re(e),activeChange:e=>hn(e)||re(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},tg=Symbol("colorPickerContextKey"),ig=function(e,t,i){return[e,t*i/((e=(2-t)*i)<1?e:2-e)||0,e/2]},ng=function(e,t){var i;"string"==typeof(i=e)&&i.includes(".")&&1===Number.parseFloat(i)&&(e="100%");const n=function(e){return"string"==typeof e&&e.includes("%")}(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(""+e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},rg={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},og=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),i=e%16;return`${rg[t]||t}${rg[i]||i}`},ag=function({r:e,g:t,b:i}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+i)?"":`#${og(e)}${og(t)}${og(i)}`},sg={A:10,B:11,C:12,D:13,E:14,F:15},lg=function(e){return 2===e.length?16*(sg[e[0].toUpperCase()]||+e[0])+(sg[e[1].toUpperCase()]||+e[1]):sg[e[1].toUpperCase()]||+e[1]},cg=(e,t,i)=>{e=ng(e,255),t=ng(t,255),i=ng(i,255);const n=Math.max(e,t,i),r=Math.min(e,t,i);let o;const a=n,s=n-r,l=0===n?0:s/n;if(n===r)o=0;else{switch(n){case e:o=(t-i)/s+(t<i?6:0);break;case t:o=(i-e)/s+2;break;case i:o=(e-t)/s+4}o/=6}return{h:360*o,s:100*l,v:100*a}},ug=function(e,t,i){e=6*ng(e,360),t=ng(t,100),i=ng(i,100);const n=Math.floor(e),r=e-n,o=i*(1-t),a=i*(1-r*t),s=i*(1-(1-r)*t),l=n%6,c=[i,a,o,o,s,i][l],u=[s,i,i,a,o,o][l],d=[o,o,s,i,i,a][l];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*d)}};class dg{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Fn(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=t,this.doOnChange();else for(const i in e)Fn(e,i)&&this.set(i,e[i])}get(e){return"alpha"===e?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return ug(this._hue,this._saturation,this._value)}fromString(e){if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();const t=(e,t,i)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,t)),this._value=Math.max(0,Math.min(100,i)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));if(4===i.length?this._alpha=100*Number.parseFloat(i[3]):3===i.length&&(this._alpha=100),i.length>=3){const{h:e,s:n,v:r}=function(e,t,i){i/=100;let n=t/=100;const r=Math.max(i,.01);return t*=(i*=2)<=1?i:2-i,n*=r<=1?r:2-r,{h:e,s:100*(0===i?2*n/(r+n):2*t/(i+t)),v:(i+t)/2*100}}(i[0],i[1],i[2]);t(e,n,r)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));4===i.length?this._alpha=100*Number.parseFloat(i[3]):3===i.length&&(this._alpha=100),i.length>=3&&t(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));if(4===i.length?this._alpha=100*Number.parseFloat(i[3]):3===i.length&&(this._alpha=100),i.length>=3){const{h:e,s:n,v:r}=cg(i[0],i[1],i[2]);t(e,n,r)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let n,r,o;3===i.length?(n=lg(i[0]+i[0]),r=lg(i[1]+i[1]),o=lg(i[2]+i[2])):6!==i.length&&8!==i.length||(n=lg(i.slice(0,2)),r=lg(i.slice(2,4)),o=lg(i.slice(4,6))),8===i.length?this._alpha=lg(i.slice(6))/255*100:3!==i.length&&6!==i.length||(this._alpha=100);const{h:a,s:s,v:l}=cg(n,r,o);t(a,s,l)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:i,_alpha:n,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const n=ig(e,t/100,i/100);this.value=`hsla(${e}, ${Math.round(100*n[1])}%, ${Math.round(100*n[2])}%, ${this.get("alpha")/100})`;break}case"hsv":this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break;case"hex":this.value=`${ag(ug(e,t,i))}${og(255*n/100)}`;break;default:{const{r:n,g:r,b:o}=ug(e,t,i);this.value=`rgba(${n}, ${r}, ${o}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const n=ig(e,t/100,i/100);this.value=`hsl(${e}, ${Math.round(100*n[1])}%, ${Math.round(100*n[2])}%)`;break}case"hsv":this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(i)}%)`;break;case"rgb":{const{r:n,g:r,b:o}=ug(e,t,i);this.value=`rgb(${n}, ${r}, ${o})`;break}default:this.value=ag(ug(e,t,i))}}}const hg=Wi({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const t=pe("color-predefine"),{currentColor:i}=nn(tg),n=Xi(r(e.colors,e.color));function r(t,i){return t.map((t=>{const n=new dg;return n.enableAlpha=e.enableAlpha,n.format="rgba",n.fromString(t),n.selected=n.value===i.value,n}))}return fn((()=>i.value),(e=>{const t=new dg;t.fromString(e),n.value.forEach((e=>{e.selected=t.compare(e)}))})),Rn((()=>{n.value=r(e.colors,e.color)})),{rgbaColors:n,handleSelect:function(t){e.color.fromString(e.colors[t])},ns:t}}}),pg=["onClick"];var fg=fe(hg,[["render",function(e,t,i,n,r,o){return Ki(),Ji("div",{class:en(e.ns.b())},[rn("div",{class:en(e.ns.e("colors"))},[(Ki(!0),Ji(Cn,null,zn(e.rgbaColors,((t,i)=>(Ki(),Ji("div",{key:e.colors[i],class:en([e.ns.e("color-selector"),e.ns.is("alpha",t._alpha<100),{selected:t.selected}]),onClick:t=>e.handleSelect(i)},[rn("div",{style:Sn({backgroundColor:t.value})},null,4)],10,pg)))),128))],2)],2)}],["__file","predefine.vue"]]);const gg=Wi({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=pe("color-svpanel"),i=cn(),n=Xi(0),r=Xi(0),o=Xi("hsl(0, 100%, 50%)"),a=pn((()=>({hue:e.color.get("hue"),value:e.color.get("value")})));function s(){const t=e.color.get("saturation"),a=e.color.get("value"),s=i.vnode.el,{clientWidth:l,clientHeight:c}=s;r.value=t*l/100,n.value=(100-a)*c/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function l(t){const o=i.vnode.el.getBoundingClientRect(),{clientX:a,clientY:s}=Jh(t);let l=a-o.left,c=s-o.top;l=Math.max(0,l),l=Math.min(l,o.width),c=Math.max(0,c),c=Math.min(c,o.height),r.value=l,n.value=c,e.color.set({saturation:l/o.width*100,value:100-c/o.height*100})}return fn((()=>a.value),(()=>{s()})),qi((()=>{Yf(i.vnode.el,{drag:e=>{l(e)},end:e=>{l(e)}}),s()})),{cursorTop:n,cursorLeft:r,background:o,colorValue:a,handleDrag:l,update:s,ns:t}}}),vg=[rn("div",null,null,-1)];var mg=fe(gg,[["render",function(e,t,i,n,r,o){return Ki(),Ji("div",{class:en(e.ns.b()),style:Sn({backgroundColor:e.background})},[rn("div",{class:en(e.ns.e("white"))},null,2),rn("div",{class:en(e.ns.e("black"))},null,2),rn("div",{class:en(e.ns.e("cursor")),style:Sn({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},vg,6)],6)}],["__file","sv-panel.vue"]]);const Ag=["onKeydown"],bg=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],yg=Wi({name:"ElColorPicker"}),xg=Wi({...yg,props:Zf,emits:eg,setup(e,{expose:t,emit:i}){const n=e,{t:r}=he(),o=pe("color"),{formItem:a}=Se(),s=Oe(),l=Ee(),{inputId:c,isLabeledByFormItem:u}=Te(n,{formItemContext:a}),d=Xi(),h=Xi(),p=Xi(),f=Xi(),g=Xi(),v=Xi(),{isFocused:m,handleFocus:A,handleBlur:b}=Ve(g,{beforeBlur(e){var t;return null==(t=f.value)?void 0:t.isFocusInsideContent(e)},afterBlur(){T(!1),L()}}),y=e=>{if(l.value)return U();A(e)};let x=!0;const w=On(new dg({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue})),_=Xi(!1),C=Xi(!1),k=Xi(""),E=pn((()=>n.modelValue||C.value?function(e,t){if(!(e instanceof dg))throw new TypeError("color should be instance of _color Class");const{r:i,g:n,b:r}=e.toRgb();return t?`rgba(${i}, ${n}, ${r}, ${e.get("alpha")/100})`:`rgb(${i}, ${n}, ${r})`}(w,n.showAlpha):"transparent")),S=pn((()=>n.modelValue||C.value?w.value:"")),I=pn((()=>u.value?void 0:n.label||n.ariaLabel||r("el.colorpicker.defaultLabel")));De({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},pn((()=>!!n.label)));const B=pn((()=>u.value?null==a?void 0:a.labelId:void 0)),O=pn((()=>[o.b("picker"),o.is("disabled",l.value),o.bm("picker",s.value),o.is("focused",m.value)]));function T(e){_.value=e}const D=J(T,100,{leading:!0});function M(){l.value||T(!0)}function Q(){D(!1),L()}function L(){gn((()=>{n.modelValue?w.fromString(n.modelValue):(w.value="",gn((()=>{C.value=!1})))}))}function j(){l.value||D(!_.value)}function P(){w.fromString(k.value)}function F(){const e=w.value;i(we,e),i("change",e),n.validateEvent&&(null==a||a.validate("change").catch((e=>Ie()))),D(!1),gn((()=>{const e=new dg({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue});w.compare(e)||L()}))}function R(){D(!1),i(we,null),i("change",null),null!==n.modelValue&&n.validateEvent&&(null==a||a.validate("change").catch((e=>Ie()))),L()}function z(e){if(_.value&&(Q(),m.value)){const t=new FocusEvent("focus",e);b(t)}}function N(e){e.preventDefault(),e.stopPropagation(),T(!1),L()}function V(e){switch(e.code){case We.enter:case We.space:e.preventDefault(),e.stopPropagation(),M(),v.value.focus();break;case We.esc:N(e)}}function U(){g.value.blur()}return qi((()=>{n.modelValue&&(k.value=S.value)})),fn((()=>n.modelValue),(e=>{e?e&&e!==w.value&&(x=!1,w.fromString(e)):C.value=!1})),fn((()=>S.value),(e=>{k.value=e,x&&i("activeChange",e),x=!0})),fn((()=>w.value),(()=>{n.modelValue||C.value||(C.value=!0)})),fn((()=>_.value),(()=>{gn((()=>{var e,t,i;null==(e=d.value)||e.update(),null==(t=h.value)||t.update(),null==(i=p.value)||i.update()}))})),$i(tg,{currentColor:S}),t({color:w,show:M,hide:Q,focus:function(){g.value.focus()},blur:U}),(e,t)=>(Ki(),on(tn(Ye),{ref_key:"popper",ref:f,visible:_.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[tn(o).be("picker","panel"),tn(o).b("dropdown"),e.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:e.teleported,transition:`${tn(o).namespace.value}-zoom-in-top`,persistent:"",onHide:t[2]||(t[2]=e=>T(!1))},{content:an((()=>[yn((Ki(),Ji("div",{onKeydown:Ln(N,["esc"])},[rn("div",{class:en(tn(o).be("dropdown","main-wrapper"))},[Tn(Jf,{ref_key:"hue",ref:d,class:"hue-slider",color:tn(w),vertical:""},null,8,["color"]),Tn(mg,{ref_key:"sv",ref:h,color:tn(w)},null,8,["color"])],2),e.showAlpha?(Ki(),on(qf,{key:0,ref_key:"alpha",ref:p,color:tn(w)},null,8,["color"])):En("v-if",!0),e.predefine?(Ki(),on(fg,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:tn(w),colors:e.predefine},null,8,["enable-alpha","color","colors"])):En("v-if",!0),rn("div",{class:en(tn(o).be("dropdown","btns"))},[rn("span",{class:en(tn(o).be("dropdown","value"))},[Tn(tn(Ue),{ref_key:"inputRef",ref:v,modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),"validate-event":!1,size:"small",onKeyup:Ln(P,["enter"]),onBlur:P},null,8,["modelValue","onKeyup"])],2),Tn(tn(He),{class:en(tn(o).be("dropdown","link-btn")),text:"",size:"small",onClick:R},{default:an((()=>[kn(ln(tn(r)("el.colorpicker.clear")),1)])),_:1},8,["class"]),Tn(tn(He),{plain:"",size:"small",class:en(tn(o).be("dropdown","btn")),onClick:F},{default:an((()=>[kn(ln(tn(r)("el.colorpicker.confirm")),1)])),_:1},8,["class"])],2)],40,Ag)),[[tn(vp),z]])])),default:an((()=>[rn("div",Mn({id:tn(c),ref_key:"triggerRef",ref:g},e.$attrs,{class:tn(O),role:"button","aria-label":tn(I),"aria-labelledby":tn(B),"aria-description":tn(r)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":tn(l),tabindex:tn(l)?-1:e.tabindex,onKeydown:V,onFocus:y,onBlur:t[1]||(t[1]=(...e)=>tn(b)&&tn(b)(...e))}),[tn(l)?(Ki(),Ji("div",{key:0,class:en(tn(o).be("picker","mask"))},null,2)):En("v-if",!0),rn("div",{class:en(tn(o).be("picker","trigger")),onClick:j},[rn("span",{class:en([tn(o).be("picker","color"),tn(o).is("alpha",e.showAlpha)])},[rn("span",{class:en(tn(o).be("picker","color-inner")),style:Sn({backgroundColor:tn(E)})},[yn(Tn(tn(ve),{class:en([tn(o).be("picker","icon"),tn(o).is("icon-arrow-down")])},{default:an((()=>[Tn(tn(Ge))])),_:1},8,["class"]),[[jn,e.modelValue||C.value]]),yn(Tn(tn(ve),{class:en([tn(o).be("picker","empty"),tn(o).is("icon-close")])},{default:an((()=>[Tn(tn(je))])),_:1},8,["class"]),[[jn,!e.modelValue&&!C.value]])],6)],2)],2)],16,bg)])),_:1},8,["visible","popper-class","teleported","transition"]))}}),wg=me(fe(xg,[["__file","color-picker.vue"]])),_g=ue({urlList:{type:ge(Array),default:()=>Pe([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ge(String)}}),Cg={close:()=>!0,switch:e=>_e(e),rotate:e=>_e(e)},kg=["src","crossorigin"],Eg=Wi({name:"ElImageViewer"}),Sg=Wi({...Eg,props:_g,emits:Cg,setup(e,{expose:t,emit:i}){var n;const r=e,o={CONTAIN:{name:"contain",icon:Nn(Xe)},ORIGINAL:{name:"original",icon:Nn($e)}},{t:a}=he(),s=pe("image-viewer"),{nextZIndex:l}=qe(),c=Xi(),u=Xi([]),d=Vn(),h=Xi(!0),p=Xi(r.initialIndex),f=Pn(o.CONTAIN),g=Xi({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),v=Xi(null!=(n=r.zIndex)?n:l()),m=pn((()=>{const{urlList:e}=r;return e.length<=1})),A=pn((()=>0===p.value)),b=pn((()=>p.value===r.urlList.length-1)),y=pn((()=>r.urlList[p.value])),x=pn((()=>[s.e("btn"),s.e("prev"),s.is("disabled",!r.infinite&&A.value)])),w=pn((()=>[s.e("btn"),s.e("next"),s.is("disabled",!r.infinite&&b.value)])),_=pn((()=>{const{scale:e,deg:t,offsetX:i,offsetY:n,enableTransition:r}=g.value;let a=i/e,s=n/e;switch(t%360){case 90:case-270:[a,s]=[s,-a];break;case 180:case-180:[a,s]=[-a,-s];break;case 270:case-90:[a,s]=[-s,a]}const l={transform:`scale(${e}) rotate(${t}deg) translate(${a}px, ${s}px)`,transition:r?"transform .3s":""};return f.value.name===o.CONTAIN.name&&(l.maxWidth=l.maxHeight="100%"),l}));function C(){d.stop(),i("close")}function k(){h.value=!1}function E(e){h.value=!1,e.target.alt=a("el.image.error")}function S(e){if(h.value||0!==e.button||!c.value)return;g.value.enableTransition=!1;const{offsetX:t,offsetY:i}=g.value,n=e.pageX,r=e.pageY,o=Z((e=>{g.value={...g.value,offsetX:t+e.pageX-n,offsetY:i+e.pageY-r}})),a=it(document,"mousemove",o);it(document,"mouseup",(()=>{a()})),e.preventDefault()}function I(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function B(){if(h.value)return;const e=nt(o),t=Object.values(o),i=f.value.name,n=t.findIndex((e=>e.name===i)),r=(n+1)%e.length;f.value=o[e[r]],I()}function O(e){const t=r.urlList.length;p.value=(e+t)%t}function T(){A.value&&!r.infinite||O(p.value-1)}function D(){b.value&&!r.infinite||O(p.value+1)}function M(e,t={}){if(h.value)return;const{minScale:n,maxScale:o}=r,{zoomRate:a,rotateDeg:s,enableTransition:l}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":g.value.scale>n&&(g.value.scale=Number.parseFloat((g.value.scale/a).toFixed(3)));break;case"zoomIn":g.value.scale<o&&(g.value.scale=Number.parseFloat((g.value.scale*a).toFixed(3)));break;case"clockwise":g.value.deg+=s,i("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=s,i("rotate",g.value.deg)}g.value.enableTransition=l}return fn(y,(()=>{gn((()=>{const e=u.value[0];(null==e?void 0:e.complete)||(h.value=!0)}))})),fn(p,(e=>{I(),i("switch",e)})),qi((()=>{var e,t;!function(){const e=Z((e=>{switch(e.code){case We.esc:r.closeOnPressEscape&&C();break;case We.space:B();break;case We.left:T();break;case We.up:M("zoomIn");break;case We.right:D();break;case We.down:M("zoomOut")}})),t=Z((e=>{M((e.deltaY||e.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})}));d.run((()=>{it(document,"keydown",e),it(document,"wheel",t)}))}(),null==(t=null==(e=c.value)?void 0:e.focus)||t.call(e)})),t({setActiveItem:O}),(e,t)=>(Ki(),on(Un,{to:"body",disabled:!e.teleported},[Tn(Dn,{name:"viewer-fade",appear:""},{default:an((()=>[rn("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:en(tn(s).e("wrapper")),style:Sn({zIndex:v.value})},[rn("div",{class:en(tn(s).e("mask")),onClick:t[0]||(t[0]=wn((t=>e.hideOnClickModal&&C()),["self"]))},null,2),En(" CLOSE "),rn("span",{class:en([tn(s).e("btn"),tn(s).e("close")]),onClick:C},[Tn(tn(ve),null,{default:an((()=>[Tn(tn(je))])),_:1})],2),En(" ARROW "),tn(m)?En("v-if",!0):(Ki(),Ji(Cn,{key:0},[rn("span",{class:en(tn(x)),onClick:T},[Tn(tn(ve),null,{default:an((()=>[Tn(tn(Ke))])),_:1})],2),rn("span",{class:en(tn(w)),onClick:D},[Tn(tn(ve),null,{default:an((()=>[Tn(tn(Re))])),_:1})],2)],64)),En(" ACTIONS "),rn("div",{class:en([tn(s).e("btn"),tn(s).e("actions")])},[rn("div",{class:en(tn(s).e("actions__inner"))},[Tn(tn(ve),{onClick:t[1]||(t[1]=e=>M("zoomOut"))},{default:an((()=>[Tn(tn(Je))])),_:1}),Tn(tn(ve),{onClick:t[2]||(t[2]=e=>M("zoomIn"))},{default:an((()=>[Tn(tn(Ze))])),_:1}),rn("i",{class:en(tn(s).e("actions__divider"))},null,2),Tn(tn(ve),{onClick:B},{default:an((()=>[(Ki(),on(sn(tn(f).icon)))])),_:1}),rn("i",{class:en(tn(s).e("actions__divider"))},null,2),Tn(tn(ve),{onClick:t[3]||(t[3]=e=>M("anticlockwise"))},{default:an((()=>[Tn(tn(et))])),_:1}),Tn(tn(ve),{onClick:t[4]||(t[4]=e=>M("clockwise"))},{default:an((()=>[Tn(tn(tt))])),_:1})],2)],2),En(" CANVAS "),rn("div",{class:en(tn(s).e("canvas"))},[(Ki(!0),Ji(Cn,null,zn(e.urlList,((t,i)=>yn((Ki(),Ji("img",{ref_for:!0,ref:e=>u.value[i]=e,key:t,src:t,style:Sn(tn(_)),class:en(tn(s).e("img")),crossorigin:e.crossorigin,onLoad:k,onError:E,onMousedown:S},null,46,kg)),[[jn,i===p.value]]))),128))],2),Zi(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}}),Ig=me(fe(Sg,[["__file","image-viewer.vue"]])),Bg=ue({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:ge([String,Object])},previewSrcList:{type:ge(Array),default:()=>Pe([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:ge(String)}}),Og={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>_e(e),close:()=>!0,show:()=>!0},Tg=["src","loading","crossorigin"],Dg={key:0},Mg=Wi({name:"ElImage",inheritAttrs:!1}),Qg=Wi({...Mg,props:Bg,emits:Og,setup(e,{emit:t}){const i=e;let n="";const{t:r}=he(),o=pe("image"),a=Hn(),s=rt(),l=Xi(),c=Xi(!1),u=Xi(!0),d=Xi(!1),h=Xi(),p=Xi(),f=ce&&"loading"in HTMLImageElement.prototype;let g,v;const m=pn((()=>[o.e("inner"),y.value&&o.e("preview"),u.value&&o.is("loading")])),A=pn((()=>a.style)),b=pn((()=>{const{fit:e}=i;return ce&&e?{objectFit:e}:{}})),y=pn((()=>{const{previewSrcList:e}=i;return Array.isArray(e)&&e.length>0})),x=pn((()=>{const{previewSrcList:e,initialIndex:t}=i;let n=t;return t>e.length-1&&(n=0),n})),w=pn((()=>"eager"!==i.loading&&(!f&&"lazy"===i.loading||i.lazy))),_=()=>{ce&&(u.value=!0,c.value=!1,l.value=i.src)};function C(e){u.value=!1,c.value=!1,t("load",e)}function k(e){u.value=!1,c.value=!0,t("error",e)}function E(){((e,t)=>{if(!ce||!e||!t)return!1;const i=e.getBoundingClientRect();let n;return n=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},i.top<n.bottom&&i.bottom>n.top&&i.right>n.left&&i.left<n.right})(h.value,p.value)&&(_(),B())}const S=ot(E,200,!0);async function I(){var e;if(!ce)return;await gn();const{scrollContainer:t}=i;be(t)?p.value=t:hn(t)&&""!==t?p.value=null!=(e=document.querySelector(t))?e:void 0:h.value&&(p.value=at(h.value)),p.value&&(g=it(p,"scroll",S),setTimeout((()=>E()),100))}function B(){ce&&p.value&&S&&(null==g||g(),p.value=void 0)}function O(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function T(){y.value&&(v=it("wheel",O,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,t("show"))}function D(){null==v||v(),document.body.style.overflow=n,d.value=!1,t("close")}function M(e){t("switch",e)}return fn((()=>i.src),(()=>{w.value?(u.value=!0,c.value=!1,B(),I()):_()})),qi((()=>{w.value?I():_()})),(e,t)=>(Ki(),Ji("div",{ref_key:"container",ref:h,class:en([tn(o).b(),e.$attrs.class]),style:Sn(tn(A))},[c.value?Zi(e.$slots,"error",{key:0},(()=>[rn("div",{class:en(tn(o).e("error"))},ln(tn(r)("el.image.error")),3)])):(Ki(),Ji(Cn,{key:1},[void 0!==l.value?(Ki(),Ji("img",Mn({key:0},tn(s),{src:l.value,loading:e.loading,style:tn(b),class:tn(m),crossorigin:e.crossorigin,onClick:T,onLoad:C,onError:k}),null,16,Tg)):En("v-if",!0),u.value?(Ki(),Ji("div",{key:1,class:en(tn(o).e("wrapper"))},[Zi(e.$slots,"placeholder",{},(()=>[rn("div",{class:en(tn(o).e("placeholder"))},null,2)]))],2)):En("v-if",!0)],64)),tn(y)?(Ki(),Ji(Cn,{key:2},[d.value?(Ki(),on(tn(Ig),{key:0,"z-index":e.zIndex,"initial-index":tn(x),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:D,onSwitch:M},{default:an((()=>[e.$slots.viewer?(Ki(),Ji("div",Dg,[Zi(e.$slots,"viewer")])):En("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):En("v-if",!0)],64)):En("v-if",!0)],6))}}),Lg=me(fe(Qg,[["__file","image.vue"]])),jg=ue({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ye,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||_e(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...xe(["ariaLabel"])}),Pg={[Me]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[st]:e=>_e(e)||re(e),[we]:e=>_e(e)||re(e)},Fg=["aria-label","onKeydown"],Rg=["aria-label","onKeydown"],zg=Wi({name:"ElInputNumber"}),Ng=Wi({...zg,props:jg,emits:Pg,setup(e,{expose:t,emit:i}){const n=e,{t:r}=he(),o=pe("input-number"),a=Xi(),s=On({currentValue:n.modelValue,userInput:null}),{formItem:l}=Se(),c=pn((()=>_e(n.modelValue)&&n.modelValue<=n.min)),u=pn((()=>_e(n.modelValue)&&n.modelValue>=n.max)),d=pn((()=>{const e=m(n.step);return ke(n.precision)?Math.max(m(n.modelValue),e):(n.precision,n.precision)})),h=pn((()=>n.controls&&"right"===n.controlsPosition)),p=Oe(),f=Ee(),g=pn((()=>{if(null!==s.userInput)return s.userInput;let e=s.currentValue;if(re(e))return"";if(_e(e)){if(Number.isNaN(e))return"";ke(n.precision)||(e=e.toFixed(n.precision))}return e})),v=(e,t)=>{if(ke(t)&&(t=d.value),0===t)return Math.round(e);let i=String(e);const n=i.indexOf(".");if(-1===n)return e;if(!i.replace(".","").split("")[n+t])return e;const r=i.length;return"5"===i.charAt(r-1)&&(i=`${i.slice(0,Math.max(0,r-1))}6`),Number.parseFloat(Number(i).toFixed(t))},m=e=>{if(re(e))return 0;const t=e.toString(),i=t.indexOf(".");let n=0;return-1!==i&&(n=t.length-i-1),n},A=(e,t=1)=>_e(e)?v(e+n.step*t):s.currentValue,b=()=>{if(n.readonly||f.value||u.value)return;const e=Number(g.value)||0,t=A(e);w(t),i(st,s.currentValue),S()},y=()=>{if(n.readonly||f.value||c.value)return;const e=Number(g.value)||0,t=A(e,-1);w(t),i(st,s.currentValue),S()},x=(e,t)=>{const{max:r,min:o,step:a,precision:s,stepStrictly:l,valueOnClear:c}=n;r<o&&dt("InputNumber","min should not be greater than max.");let u=Number(e);if(re(e)||Number.isNaN(u))return null;if(""===e){if(null===c)return null;u=hn(c)?{min:o,max:r}[c]:c}return l&&(u=v(Math.round(u/a)*a,s)),ke(s)||(u=v(u,s)),(u>r||u<o)&&(u=u>r?r:o,t&&i(we,u)),u},w=(e,t=!0)=>{var r;const o=s.currentValue,a=x(e);t?o===a&&e||(s.userInput=null,i(we,a),o!==a&&i(Me,a,o),n.validateEvent&&(null==(r=null==l?void 0:l.validate)||r.call(l,"change").catch((e=>Ie()))),s.currentValue=a):i(we,a)},_=e=>{s.userInput=e;const t=""===e?null:Number(e);i(st,t),w(t,!1)},C=e=>{const t=""!==e?Number(e):"";(_e(t)&&!Number.isNaN(t)||""===e)&&w(t),S(),s.userInput=null},k=e=>{i("focus",e)},E=e=>{var t;s.userInput=null,i("blur",e),n.validateEvent&&(null==(t=null==l?void 0:l.validate)||t.call(l,"blur").catch((e=>Ie())))},S=()=>{s.currentValue!==n.modelValue&&(s.currentValue=n.modelValue)},I=e=>{document.activeElement===e.target&&e.preventDefault()};return fn((()=>n.modelValue),((e,t)=>{const i=x(e,!0);null===s.userInput&&i!==t&&(s.currentValue=i)}),{immediate:!0}),qi((()=>{var e;const{min:t,max:r,modelValue:o}=n,l=null==(e=a.value)?void 0:e.input;if(l.setAttribute("role","spinbutton"),Number.isFinite(r)?l.setAttribute("aria-valuemax",String(r)):l.removeAttribute("aria-valuemax"),Number.isFinite(t)?l.setAttribute("aria-valuemin",String(t)):l.removeAttribute("aria-valuemin"),l.setAttribute("aria-valuenow",s.currentValue||0===s.currentValue?String(s.currentValue):""),l.setAttribute("aria-disabled",String(f.value)),!_e(o)&&null!=o){let e=Number(o);Number.isNaN(e)&&(e=null),i(we,e)}l.addEventListener("wheel",I,{passive:!1})})),Gn((()=>{var e,t;const i=null==(e=a.value)?void 0:e.input;null==i||i.setAttribute("aria-valuenow",`${null!=(t=s.currentValue)?t:""}`)})),De({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},pn((()=>!!n.label))),t({focus:()=>{var e,t;null==(t=null==(e=a.value)?void 0:e.focus)||t.call(e)},blur:()=>{var e,t;null==(t=null==(e=a.value)?void 0:e.blur)||t.call(e)}}),(e,t)=>(Ki(),Ji("div",{class:en([tn(o).b(),tn(o).m(tn(p)),tn(o).is("disabled",tn(f)),tn(o).is("without-controls",!e.controls),tn(o).is("controls-right",tn(h))]),onDragstart:t[0]||(t[0]=wn((()=>{}),["prevent"]))},[e.controls?yn((Ki(),Ji("span",{key:0,role:"button","aria-label":tn(r)("el.inputNumber.decrease"),class:en([tn(o).e("decrease"),tn(o).is("disabled",tn(c))]),onKeydown:Ln(y,["enter"])},[Zi(e.$slots,"decrease-icon",{},(()=>[Tn(tn(ve),null,{default:an((()=>[tn(h)?(Ki(),on(tn(Ge),{key:0})):(Ki(),on(tn(lt),{key:1}))])),_:1})]))],42,Fg)),[[tn(bp),y]]):En("v-if",!0),e.controls?yn((Ki(),Ji("span",{key:1,role:"button","aria-label":tn(r)("el.inputNumber.increase"),class:en([tn(o).e("increase"),tn(o).is("disabled",tn(u))]),onKeydown:Ln(b,["enter"])},[Zi(e.$slots,"increase-icon",{},(()=>[Tn(tn(ve),null,{default:an((()=>[tn(h)?(Ki(),on(tn(ct),{key:0})):(Ki(),on(tn(ut),{key:1}))])),_:1})]))],42,Rg)),[[tn(bp),b]]):En("v-if",!0),Tn(tn(Ue),{id:e.id,ref_key:"input",ref:a,type:"number",step:e.step,"model-value":tn(g),placeholder:e.placeholder,readonly:e.readonly,disabled:tn(f),size:tn(p),max:e.max,min:e.min,name:e.name,"aria-label":e.label||e.ariaLabel,"validate-event":!1,onKeydown:[Ln(wn(b,["prevent"]),["up"]),Ln(wn(y,["prevent"]),["down"])],onBlur:E,onFocus:k,onInput:_,onChange:C},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}}),Vg=me(fe(Ng,[["__file","input-number.vue"]])),Ug=Symbol("ElSelectGroup"),Hg=Symbol("ElSelect"),Gg=Wi({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=pe("select"),i=Qe(),n=pn((()=>[t.be("dropdown","item"),t.is("disabled",tn(s)),t.is("selected",tn(a)),t.is("hovering",tn(h))])),r=On({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:o,itemSelected:a,isDisabled:s,select:l,hoverItem:c,updateOption:u}=function(e,t){const i=nn(Hg),n=nn(Ug,{disabled:!1}),r=pn((()=>i.props.multiple?u(i.props.modelValue,e.value):u([i.props.modelValue],e.value))),o=pn((()=>{if(i.props.multiple){const e=i.props.modelValue||[];return!r.value&&e.length>=i.props.multipleLimit&&i.props.multipleLimit>0}return!1})),a=pn((()=>e.label||(mn(e.value)?"":e.value))),s=pn((()=>e.value||e.label||"")),l=pn((()=>e.disabled||t.groupDisabled||o.value)),c=cn(),u=(t=[],n)=>{if(mn(e.value)){const e=i.props.valueKey;return t&&t.some((t=>An(m(t,e))===m(n,e)))}return t&&t.includes(n)};return fn((()=>a.value),(()=>{e.created||i.props.remote||i.setSelected()})),fn((()=>e.value),((t,n)=>{const{remote:r,valueKey:o}=i.props;if(Oc(t,n)||(i.onOptionDestroy(n,c.proxy),i.onOptionCreate(c.proxy)),!e.created&&!r){if(o&&mn(t)&&mn(n)&&t[o]===n[o])return;i.setSelected()}})),fn((()=>n.disabled),(()=>{t.groupDisabled=n.disabled}),{immediate:!0}),{select:i,currentLabel:a,currentValue:s,itemSelected:r,isDisabled:l,hoverItem:()=>{e.disabled||n.disabled||(i.states.hoveringIndex=i.optionsArray.indexOf(c.proxy))},updateOption:i=>{const n=new RegExp(ht(i),"i");t.visible=n.test(a.value)||e.created}}}(e,r),{visible:d,hover:h}=In(r),p=cn().proxy;return l.onOptionCreate(p),Yn((()=>{const e=p.value,{selected:t}=l.states,i=(l.props.multiple?t:[t]).some((e=>e.value===p.value));gn((()=>{l.states.cachedOptions.get(e)!==p||i||l.states.cachedOptions.delete(e)})),l.onOptionDestroy(e,p)})),{ns:t,id:i,containerKls:n,currentLabel:o,itemSelected:a,isDisabled:s,select:l,hoverItem:c,updateOption:u,visible:d,hover:h,selectOptionClick:function(){!0!==e.disabled&&!0!==r.groupDisabled&&l.handleOptionSelect(p)},states:r}}}),Yg=["id","aria-disabled","aria-selected"];var Wg=fe(Gg,[["render",function(e,t,i,n,r,o){return yn((Ki(),Ji("li",{id:e.id,class:en(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMouseenter:t[0]||(t[0]=(...t)=>e.hoverItem&&e.hoverItem(...t)),onClick:t[1]||(t[1]=wn(((...t)=>e.selectOptionClick&&e.selectOptionClick(...t)),["stop"]))},[Zi(e.$slots,"default",{},(()=>[rn("span",null,ln(e.currentLabel),1)]))],42,Yg)),[[jn,e.visible]])}],["__file","option.vue"]]);const Xg=Wi({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=nn(Hg),t=pe("select"),i=pn((()=>e.props.popperClass)),n=pn((()=>e.props.multiple)),r=pn((()=>e.props.fitInputWidth)),o=Xi("");function a(){var t;o.value=`${null==(t=e.selectRef)?void 0:t.offsetWidth}px`}return qi((()=>{a(),pt(e.selectRef,a)})),{ns:t,minWidth:o,popperClass:i,isMultiple:n,isFitInputWidth:r}}});var $g=fe(Xg,[["render",function(e,t,i,n,r,o){return Ki(),Ji("div",{class:en([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:Sn({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(Ki(),Ji("div",{key:0,class:en(e.ns.be("dropdown","header"))},[Zi(e.$slots,"header")],2)):En("v-if",!0),Zi(e.$slots,"default"),e.$slots.footer?(Ki(),Ji("div",{key:1,class:en(e.ns.be("dropdown","footer"))},[Zi(e.$slots,"footer")],2)):En("v-if",!0)],6)}],["__file","select-dropdown.vue"]]);const qg=(e,t)=>{const{t:i}=he(),n=Qe(),r=pe("select"),o=pe("input"),a=On({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:e.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),s=Xi(null),l=Xi(null),c=Xi(null),u=Xi(null),d=Xi(null),h=Xi(null),p=Xi(null),f=Xi(null),g=Xi(null),v=Xi(null),A=Xi(null),b=Xi(null),{wrapperRef:y,isFocused:x,handleFocus:w,handleBlur:_}=Ve(d,{afterFocus(){e.automaticDropdown&&!C.value&&(C.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(e){var t,i;return(null==(t=c.value)?void 0:t.isFocusInsideContent(e))||(null==(i=u.value)?void 0:i.isFocusInsideContent(e))},afterBlur(){C.value=!1,a.menuVisibleOnFocus=!1}}),C=Xi(!1),k=Xi(),{form:E,formItem:S}=Se(),{inputId:I}=Te(e,{formItemContext:S}),{valueOnClear:B,isEmptyValue:O}=gt(e),T=pn((()=>e.disabled||(null==E?void 0:E.disabled))),D=pn((()=>e.multiple?vn(e.modelValue)&&e.modelValue.length>0:!O(e.modelValue))),M=pn((()=>e.clearable&&!T.value&&a.inputHovering&&D.value)),Q=pn((()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon)),L=pn((()=>r.is("reverse",Q.value&&C.value))),j=pn((()=>(null==S?void 0:S.validateState)||"")),P=pn((()=>vt[j.value])),F=pn((()=>e.remote?300:0)),R=pn((()=>e.loading?e.loadingText||i("el.select.loading"):!(e.remote&&!a.inputValue&&0===a.options.size)&&(e.filterable&&a.inputValue&&a.options.size>0&&0===z.value?e.noMatchText||i("el.select.noMatch"):0===a.options.size?e.noDataText||i("el.select.noData"):null))),z=pn((()=>N.value.filter((e=>e.visible)).length)),N=pn((()=>{const e=Array.from(a.options.values()),t=[];return a.optionValues.forEach((i=>{const n=e.findIndex((e=>e.value===i));n>-1&&t.push(e[n])})),t.length>=e.length?t:e})),V=pn((()=>Array.from(a.cachedOptions.values()))),U=pn((()=>{const t=N.value.filter((e=>!e.created)).some((e=>e.currentLabel===a.inputValue));return e.filterable&&e.allowCreate&&""!==a.inputValue&&!t})),H=()=>{e.filterable&&dn(e.filterMethod)||e.filterable&&e.remote&&dn(e.remoteMethod)||N.value.forEach((e=>{var t;null==(t=e.updateOption)||t.call(e,a.inputValue)}))},G=Oe(),Y=pn((()=>["small"].includes(G.value)?"small":"default")),W=pn({get:()=>C.value&&!1!==R.value,set(e){C.value=e}}),X=pn((()=>vn(e.modelValue)?0===e.modelValue.length&&!a.inputValue:!e.filterable||!a.inputValue)),$=pn((()=>{var t;const n=null!=(t=e.placeholder)?t:i("el.select.placeholder");return e.multiple||!D.value?n:a.selectedLabel})),q=pn((()=>mt?null:"mouseenter"));fn((()=>e.modelValue),((t,i)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(a.inputValue="",K("")),ee(),!Oc(t,i)&&e.validateEvent&&(null==S||S.validate("change").catch((e=>Ie())))}),{flush:"post",deep:!0}),fn((()=>C.value),(e=>{e?K(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),t("visible-change",e)})),fn((()=>a.options.entries()),(()=>{var t;if(!ce)return;const i=(null==(t=s.value)?void 0:t.querySelectorAll("input"))||[];(e.filterable||e.defaultFirstOption||ke(e.modelValue))&&Array.from(i).includes(document.activeElement)||ee(),e.defaultFirstOption&&(e.filterable||e.remote)&&z.value&&Z()}),{flush:"post"}),fn((()=>a.hoveringIndex),(e=>{_e(e)&&e>-1?k.value=N.value[e]||{}:k.value={},N.value.forEach((e=>{e.hover=k.value===e}))})),Rn((()=>{a.isBeforeHide||H()}));const K=t=>{a.previousQuery!==t&&(a.previousQuery=t,e.filterable&&dn(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&dn(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&z.value?gn(Z):gn(ie))},Z=()=>{const e=N.value.filter((e=>e.visible&&!e.disabled&&!e.states.groupDisabled)),t=e.find((e=>e.created)),i=e[0];a.hoveringIndex=ge(N.value,t||i)},ee=()=>{if(!e.multiple){const t=te(e.modelValue);return a.selectedLabel=t.currentLabel,void(a.selected=t)}a.selectedLabel="";const t=[];vn(e.modelValue)&&e.modelValue.forEach((e=>{t.push(te(e))})),a.selected=t},te=t=>{let i;const n="object"===Wn(t).toLowerCase(),r="null"===Wn(t).toLowerCase(),o="undefined"===Wn(t).toLowerCase();for(let s=a.cachedOptions.size-1;s>=0;s--){const r=V.value[s];if(n?m(r.value,e.valueKey)===m(t,e.valueKey):r.value===t){i={value:t,currentLabel:r.currentLabel,get isDisabled(){return r.isDisabled}};break}}return i||{value:t,currentLabel:n?t.label:r||o?"":t}},ie=()=>{e.multiple?a.hoveringIndex=N.value.findIndex((e=>a.selected.some((t=>Be(t)===Be(e))))):a.hoveringIndex=N.value.findIndex((e=>Be(e)===Be(a.selected)))},ne=()=>{a.calculatorWidth=h.value.getBoundingClientRect().width},re=()=>{var e,t;null==(t=null==(e=c.value)?void 0:e.updatePopper)||t.call(e)},oe=()=>{var e,t;null==(t=null==(e=u.value)?void 0:e.updatePopper)||t.call(e)},ae=()=>{a.inputValue.length>0&&!C.value&&(C.value=!0),K(a.inputValue)},se=t=>{if(a.inputValue=t.target.value,!e.remote)return ae();le()},le=J((()=>{ae()}),F.value),ue=i=>{Oc(e.modelValue,i)||t(Me,i)},de=i=>{i.stopPropagation();const n=e.multiple?[]:B.value;if(e.multiple)for(const e of a.selected)e.isDisabled&&n.push(e.value);t(we,n),ue(n),a.hoveringIndex=-1,C.value=!1,t("clear"),xe()},fe=i=>{if(e.multiple){const n=(e.modelValue||[]).slice(),r=ge(n,i.value);r>-1?n.splice(r,1):(e.multipleLimit<=0||n.length<e.multipleLimit)&&n.push(i.value),t(we,n),ue(n),i.created&&K(""),e.filterable&&!e.reserveKeyword&&(a.inputValue="")}else t(we,i.value),ue(i.value),C.value=!1;xe(),C.value||gn((()=>{ve(i)}))},ge=(t=[],i)=>{if(!mn(i))return t.indexOf(i);const n=e.valueKey;let r=-1;return t.some(((e,t)=>An(m(e,n))===m(i,n)&&(r=t,!0))),r},ve=e=>{var t,i,n,o,a;const s=vn(e)?e[0]:e;let l=null;if(null==s?void 0:s.value){const e=N.value.filter((e=>e.value===s.value));e.length>0&&(l=e[0].$el)}if(c.value&&l){const e=null==(o=null==(n=null==(i=null==(t=c.value)?void 0:t.popperRef)?void 0:i.contentRef)?void 0:n.querySelector)?void 0:o.call(n,`.${r.be("dropdown","wrap")}`);e&&At(e,l)}null==(a=b.value)||a.handleScroll()},{handleCompositionStart:me,handleCompositionUpdate:Ae,handleCompositionEnd:be}=function(e){const t=Xi(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:e=>{const i=e.target.value,n=i[i.length-1]||"";t.value=!ft(n)},handleCompositionEnd:i=>{t.value&&(t.value=!1,dn(e)&&e(i))}}}((e=>se(e))),ye=pn((()=>{var e,t;return null==(t=null==(e=c.value)?void 0:e.popperRef)?void 0:t.contentRef})),xe=()=>{var e;null==(e=d.value)||e.focus()},Ce=e=>{if(C.value=!1,x.value){const t=new FocusEvent("focus",e);gn((()=>_(t)))}},Ee=()=>{T.value||(mt&&(a.inputHovering=!0),a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:C.value=!C.value)},Be=t=>mn(t.value)?m(t.value,e.valueKey):t.value,De=pn((()=>N.value.filter((e=>e.visible)).every((e=>e.disabled)))),Le=pn((()=>e.multiple?e.collapseTags?a.selected.slice(0,e.maxCollapseTags):a.selected:[])),je=pn((()=>e.multiple&&e.collapseTags?a.selected.slice(e.maxCollapseTags):[])),Pe=e=>{if(C.value){if(0!==a.options.size&&0!==z.value&&!De.value){"next"===e?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):"prev"===e&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const t=N.value[a.hoveringIndex];!0!==t.disabled&&!0!==t.states.groupDisabled&&t.visible||Pe(e),gn((()=>ve(k.value)))}}else C.value=!0},Fe=pn((()=>{const t=(()=>{if(!l.value)return 0;const e=window.getComputedStyle(l.value);return Number.parseFloat(e.gap||"6px")})();return{maxWidth:`${A.value&&1===e.maxCollapseTags?a.selectionWidth-a.collapseItemWidth-t:a.selectionWidth}px`}})),Re=pn((()=>({maxWidth:`${a.selectionWidth}px`}))),ze=pn((()=>({width:`${Math.max(a.calculatorWidth,11)}px`})));return e.multiple&&!vn(e.modelValue)&&t(we,[]),!e.multiple&&vn(e.modelValue)&&t(we,""),pt(l,(()=>{a.selectionWidth=l.value.getBoundingClientRect().width})),pt(h,ne),pt(g,re),pt(y,re),pt(v,oe),pt(A,(()=>{a.collapseItemWidth=A.value.getBoundingClientRect().width})),qi((()=>{ee()})),{inputId:I,contentId:n,nsSelect:r,nsInput:o,states:a,isFocused:x,expanded:C,optionsArray:N,hoverOption:k,selectSize:G,filteredOptionsCount:z,resetCalculatorWidth:ne,updateTooltip:re,updateTagTooltip:oe,debouncedOnInputChange:le,onInput:se,deletePrevTag:i=>{if(e.multiple&&i.code!==We.delete&&i.target.value.length<=0){const i=e.modelValue.slice(),n=(e=>Ll(e,(e=>!a.disabledOptions.has(e))))(i);if(n<0)return;const r=i[n];i.splice(n,1),t(we,i),ue(i),t("remove-tag",r)}},deleteTag:(i,n)=>{const r=a.selected.indexOf(n);if(r>-1&&!T.value){const i=e.modelValue.slice();i.splice(r,1),t(we,i),ue(i),t("remove-tag",n.value)}i.stopPropagation(),xe()},deleteSelected:de,handleOptionSelect:fe,scrollToOption:ve,hasModelValue:D,shouldShowPlaceholder:X,currentPlaceholder:$,mouseEnterEventName:q,showClose:M,iconComponent:Q,iconReverse:L,validateState:j,validateIcon:P,showNewOption:U,updateOptions:H,collapseTagSize:Y,setSelected:ee,selectDisabled:T,emptyText:R,handleCompositionStart:me,handleCompositionUpdate:Ae,handleCompositionEnd:be,onOptionCreate:e=>{a.options.set(e.value,e),a.cachedOptions.set(e.value,e),e.disabled&&a.disabledOptions.set(e.value,e)},onOptionDestroy:(e,t)=>{a.options.get(e)===t&&a.options.delete(e)},handleMenuEnter:()=>{a.isBeforeHide=!1,gn((()=>ve(a.selected)))},handleFocus:w,focus:xe,blur:()=>{Ce()},handleBlur:_,handleClearClick:e=>{de(e)},handleClickOutside:Ce,handleEsc:()=>{a.inputValue.length>0?a.inputValue="":C.value=!1},toggleMenu:Ee,selectOption:()=>{C.value?N.value[a.hoveringIndex]&&fe(N.value[a.hoveringIndex]):Ee()},getValueKey:Be,navigateOptions:Pe,dropdownMenuVisible:W,showTagList:Le,collapseTagList:je,tagStyle:Fe,collapseTagStyle:Re,inputStyle:ze,popperRef:ye,inputRef:d,tooltipRef:c,tagTooltipRef:u,calculatorRef:h,prefixRef:p,suffixRef:f,selectRef:s,wrapperRef:y,selectionRef:l,scrollbarRef:b,menuRef:g,tagMenuRef:v,collapseItemRef:A}};var Kg=Wi({name:"ElOptions",setup(e,{slots:t}){const i=nn(Hg);let n=[];return()=>{var e,r;const o=null==(e=t.default)?void 0:e.call(t),a=[];return o.length&&function e(t){vn(t)&&t.forEach((t=>{var i,n,r,o;const s=null==(i=(null==t?void 0:t.type)||{})?void 0:i.name;"ElOptionGroup"===s?e(hn(t.children)||vn(t.children)||!dn(null==(n=t.children)?void 0:n.default)?t.children:null==(r=t.children)?void 0:r.default()):"ElOption"===s?a.push(null==(o=t.props)?void 0:o.value):vn(t.children)&&e(t.children)}))}(null==(r=o[0])?void 0:r.children),Oc(a,n)||(n=a,i&&(i.states.optionValues=a)),o}}});const Jg=ue({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:ye,effect:{type:ge(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:ge(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Ne.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:de,default:bt},fitInputWidth:Boolean,suffixIcon:{type:de,default:Ge},tagType:{...df.type,default:"info"},tagEffect:{...df.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:ge(String),values:yt,default:"bottom-start"},fallbackPlacements:{type:ge(Array),default:["bottom-start","top-start","right","left"]},...xt,...xe(["ariaLabel"])}),Zg="ElSelect",ev=Wi({name:Zg,componentName:Zg,components:{ElInput:Ue,ElSelectMenu:$g,ElOption:Wg,ElOptions:Kg,ElTag:gf,ElScrollbar:wt,ElTooltip:Ye,ElIcon:ve},directives:{ClickOutside:vp},props:Jg,emits:[we,Me,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const i=qg(e,t);return $i(Hg,On({props:e,states:i.states,optionsArray:i.optionsArray,handleOptionSelect:i.handleOptionSelect,onOptionCreate:i.onOptionCreate,onOptionDestroy:i.onOptionDestroy,selectRef:i.selectRef,setSelected:i.setSelected})),{...i}}}),tv=["id","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],iv=["textContent"],nv={key:1};var rv=fe(ev,[["render",function(e,t,i,n,r,o){const a=Xn("el-tag"),s=Xn("el-tooltip"),l=Xn("el-icon"),c=Xn("el-option"),u=Xn("el-options"),d=Xn("el-scrollbar"),h=Xn("el-select-menu"),p=$n("click-outside");return yn((Ki(),Ji("div",{ref:"selectRef",class:en([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[Kn(e.mouseEnterEventName)]:t[16]||(t[16]=t=>e.states.inputHovering=!0),onMouseleave:t[17]||(t[17]=t=>e.states.inputHovering=!1),onClick:t[18]||(t[18]=wn(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["prevent","stop"]))},[Tn(s,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:t[15]||(t[15]=t=>e.states.isBeforeHide=!1)},{default:an((()=>{var i;return[rn("div",{ref:"wrapperRef",class:en([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)])},[e.$slots.prefix?(Ki(),Ji("div",{key:0,ref:"prefixRef",class:en(e.nsSelect.e("prefix"))},[Zi(e.$slots,"prefix")],2)):En("v-if",!0),rn("div",{ref:"selectionRef",class:en([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?Zi(e.$slots,"tag",{key:0},(()=>[(Ki(!0),Ji(Cn,null,zn(e.showTagList,(t=>(Ki(),Ji("div",{key:e.getValueKey(t),class:en(e.nsSelect.e("selected-item"))},[Tn(a,{closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Sn(e.tagStyle),onClose:i=>e.deleteTag(i,t)},{default:an((()=>[rn("span",{class:en(e.nsSelect.e("tags-text"))},[Zi(e.$slots,"label",{label:t.currentLabel,value:t.value},(()=>[kn(ln(t.currentLabel),1)]))],2)])),_:2},1032,["closable","size","type","effect","style","onClose"])],2)))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(Ki(),on(s,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:an((()=>[rn("div",{ref:"collapseItemRef",class:en(e.nsSelect.e("selected-item"))},[Tn(a,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Sn(e.collapseTagStyle)},{default:an((()=>[rn("span",{class:en(e.nsSelect.e("tags-text"))}," + "+ln(e.states.selected.length-e.maxCollapseTags),3)])),_:1},8,["size","type","effect","style"])],2)])),content:an((()=>[rn("div",{ref:"tagMenuRef",class:en(e.nsSelect.e("selection"))},[(Ki(!0),Ji(Cn,null,zn(e.collapseTagList,(t=>(Ki(),Ji("div",{key:e.getValueKey(t),class:en(e.nsSelect.e("selected-item"))},[Tn(a,{class:"in-tooltip",closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:i=>e.deleteTag(i,t)},{default:an((()=>[rn("span",{class:en(e.nsSelect.e("tags-text"))},[Zi(e.$slots,"label",{label:t.currentLabel,value:t.value},(()=>[kn(ln(t.currentLabel),1)]))],2)])),_:2},1032,["closable","size","type","effect","onClose"])],2)))),128))],2)])),_:3},8,["disabled","effect","teleported"])):En("v-if",!0)])):En("v-if",!0),e.selectDisabled?En("v-if",!0):(Ki(),Ji("div",{key:1,class:en([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[yn(rn("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":t[0]||(t[0]=t=>e.states.inputValue=t),type:"text",name:e.name,class:en([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:Sn(e.inputStyle),role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":(null==(i=e.hoverOption)?void 0:i.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onKeydown:[t[3]||(t[3]=Ln(wn((t=>e.navigateOptions("next")),["stop","prevent"]),["down"])),t[4]||(t[4]=Ln(wn((t=>e.navigateOptions("prev")),["stop","prevent"]),["up"])),t[5]||(t[5]=Ln(wn(((...t)=>e.handleEsc&&e.handleEsc(...t)),["stop","prevent"]),["esc"])),t[6]||(t[6]=Ln(wn(((...t)=>e.selectOption&&e.selectOption(...t)),["stop","prevent"]),["enter"])),t[7]||(t[7]=Ln(wn(((...t)=>e.deletePrevTag&&e.deletePrevTag(...t)),["stop"]),["delete"]))],onCompositionstart:t[8]||(t[8]=(...t)=>e.handleCompositionStart&&e.handleCompositionStart(...t)),onCompositionupdate:t[9]||(t[9]=(...t)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...t)),onCompositionend:t[10]||(t[10]=(...t)=>e.handleCompositionEnd&&e.handleCompositionEnd(...t)),onInput:t[11]||(t[11]=(...t)=>e.onInput&&e.onInput(...t)),onClick:t[12]||(t[12]=wn(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["stop"]))},null,46,tv),[[qn,e.states.inputValue]]),e.filterable?(Ki(),Ji("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:en(e.nsSelect.e("input-calculator")),textContent:ln(e.states.inputValue)},null,10,iv)):En("v-if",!0)],2)),e.shouldShowPlaceholder?(Ki(),Ji("div",{key:2,class:en([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?Zi(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},(()=>[rn("span",null,ln(e.currentPlaceholder),1)])):(Ki(),Ji("span",nv,ln(e.currentPlaceholder),1))],2)):En("v-if",!0)],2),rn("div",{ref:"suffixRef",class:en(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(Ki(),on(l,{key:0,class:en([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:an((()=>[(Ki(),on(sn(e.iconComponent)))])),_:1},8,["class"])):En("v-if",!0),e.showClose&&e.clearIcon?(Ki(),on(l,{key:1,class:en([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:an((()=>[(Ki(),on(sn(e.clearIcon)))])),_:1},8,["class","onClick"])):En("v-if",!0),e.validateState&&e.validateIcon?(Ki(),on(l,{key:2,class:en([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:an((()=>[(Ki(),on(sn(e.validateIcon)))])),_:1},8,["class"])):En("v-if",!0)],2)],2)]})),content:an((()=>[Tn(h,{ref:"menuRef"},{default:an((()=>[e.$slots.header?(Ki(),Ji("div",{key:0,class:en(e.nsSelect.be("dropdown","header")),onClick:t[13]||(t[13]=wn((()=>{}),["stop"]))},[Zi(e.$slots,"header")],2)):En("v-if",!0),yn(Tn(d,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:en([e.nsSelect.is("empty",0===e.filteredOptionsCount)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:an((()=>[e.showNewOption?(Ki(),on(c,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):En("v-if",!0),Tn(u,null,{default:an((()=>[Zi(e.$slots,"default")])),_:3})])),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[jn,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(Ki(),Ji("div",{key:1,class:en(e.nsSelect.be("dropdown","loading"))},[Zi(e.$slots,"loading")],2)):e.loading||0===e.filteredOptionsCount?(Ki(),Ji("div",{key:2,class:en(e.nsSelect.be("dropdown","empty"))},[Zi(e.$slots,"empty",{},(()=>[rn("span",null,ln(e.emptyText),1)]))],2)):En("v-if",!0),e.$slots.footer?(Ki(),Ji("div",{key:3,class:en(e.nsSelect.be("dropdown","footer")),onClick:t[14]||(t[14]=wn((()=>{}),["stop"]))},[Zi(e.$slots,"footer")],2)):En("v-if",!0)])),_:3},512)])),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],16)),[[p,e.handleClickOutside,e.popperRef]])}],["__file","select.vue"]]);const ov=Wi({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=pe("select"),i=Xi(null),n=cn(),r=Xi([]);$i(Ug,On({...In(e)}));const o=pn((()=>r.value.some((e=>!0===e.visible)))),a=e=>{const t=ee(e),i=[];return t.forEach((e=>{var t,n;(e=>{var t,i;return"ElOption"===(null==(t=e.type)?void 0:t.name)&&!!(null==(i=e.component)?void 0:i.proxy)})(e)?i.push(e.component.proxy):(null==(t=e.children)?void 0:t.length)?i.push(...a(e.children)):(null==(n=e.component)?void 0:n.subTree)&&i.push(...a(e.component.subTree))})),i},s=()=>{r.value=a(n.subTree)};return qi((()=>{s()})),_t(i,s,{attributes:!0,subtree:!0,childList:!0}),{groupRef:i,visible:o,ns:t}}});var av=fe(ov,[["render",function(e,t,i,n,r,o){return yn((Ki(),Ji("ul",{ref:"groupRef",class:en(e.ns.be("group","wrap"))},[rn("li",{class:en(e.ns.be("group","title"))},ln(e.label),3),rn("li",null,[rn("ul",{class:en(e.ns.b("group"))},[Zi(e.$slots,"default")],2)])],2)),[[jn,e.visible]])}],["__file","option-group.vue"]]);const sv=me(rv,{Option:Wg,OptionGroup:av}),lv=Ae(Wg);Ae(av);const cv=ue({trigger:Ct.trigger,placement:kt.placement,disabled:Ct.disabled,visible:Ne.visible,transition:Ne.transition,popperOptions:kt.popperOptions,tabindex:kt.tabindex,content:Ne.content,popperStyle:Ne.popperStyle,popperClass:Ne.popperClass,enterable:{...Ne.enterable,default:!0},effect:{...Ne.effect,default:"light"},teleported:Ne.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),uv={"update:visible":e=>Ce(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},dv=Wi({name:"ElPopover"}),hv=Wi({...dv,props:cv,emits:uv,setup(e,{expose:t,emit:i}){const n=e,r=pn((()=>n["onUpdate:visible"])),o=pe("popover"),a=Xi(),s=pn((()=>{var e;return null==(e=tn(a))?void 0:e.popperRef})),l=pn((()=>[{width:ze(n.width)},n.popperStyle])),c=pn((()=>[o.b(),n.popperClass,{[o.m("plain")]:!!n.content}])),u=pn((()=>n.transition===`${o.namespace.value}-fade-in-linear`)),d=()=>{i("before-enter")},h=()=>{i("before-leave")},p=()=>{i("after-enter")},f=()=>{i("update:visible",!1),i("after-leave")};return t({popperRef:s,hide:()=>{var e;null==(e=a.value)||e.hide()}}),(e,t)=>(Ki(),on(tn(Ye),Mn({ref_key:"tooltipRef",ref:a},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":tn(c),"popper-style":tn(l),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":tn(u),"onUpdate:visible":tn(r),onBeforeShow:d,onBeforeHide:h,onShow:p,onHide:f}),{content:an((()=>[e.title?(Ki(),Ji("div",{key:0,class:en(tn(o).e("title")),role:"title"},ln(e.title),3)):En("v-if",!0),Zi(e.$slots,"default",{},(()=>[kn(ln(e.content),1)]))])),default:an((()=>[e.$slots.reference?Zi(e.$slots,"reference",{key:0}):En("v-if",!0)])),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var pv=fe(hv,[["__file","popover.vue"]]);const fv=(e,t)=>{const i=t.arg||t.value,n=null==i?void 0:i.popperRef;n&&(n.triggerRef=e)},gv=Et({mounted(e,t){fv(e,t)},updated(e,t){fv(e,t)}},"popover"),vv=me(pv,{directive:gv}),mv=Symbol("sliderContextKey"),Av=ue({modelValue:{type:ge([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ye,inputSize:ye,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:ge(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:ge(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:yt,default:"top"},marks:{type:ge(Object)},validateEvent:{type:Boolean,default:!0},...xe(["ariaLabel"])}),bv=e=>_e(e)||vn(e)&&e.every(_e),yv={[we]:bv,[st]:bv,[Me]:bv},xv=(e,t,i)=>{const{form:n,formItem:r}=Se(),o=Pn(),a=Xi(),s=Xi(),l={firstButton:a,secondButton:s},c=pn((()=>e.disabled||(null==n?void 0:n.disabled)||!1)),u=pn((()=>Math.min(t.firstValue,t.secondValue))),d=pn((()=>Math.max(t.firstValue,t.secondValue))),h=pn((()=>e.range?100*(d.value-u.value)/(e.max-e.min)+"%":100*(t.firstValue-e.min)/(e.max-e.min)+"%")),p=pn((()=>e.range?100*(u.value-e.min)/(e.max-e.min)+"%":"0%")),f=pn((()=>e.vertical?{height:e.height}:{})),g=pn((()=>e.vertical?{height:h.value,bottom:p.value}:{width:h.value,left:p.value})),v=()=>{o.value&&(t.sliderSize=o.value["client"+(e.vertical?"Height":"Width")])},m=i=>{const n=(i=>{const n=e.min+i*(e.max-e.min)/100;if(!e.range)return a;let r;return r=Math.abs(u.value-n)<Math.abs(d.value-n)?t.firstValue<t.secondValue?"firstButton":"secondButton":t.firstValue>t.secondValue?"firstButton":"secondButton",l[r]})(i);return n.value.setPosition(i),n},A=e=>{i(we,e),i(st,e)},b=async()=>{await gn(),i(Me,e.range?[u.value,d.value]:e.modelValue)},y=i=>{var n,r,a,s,l,u;if(c.value||t.dragging)return;v();let d=0;if(e.vertical){const e=null!=(a=null==(r=null==(n=i.touches)?void 0:n.item(0))?void 0:r.clientY)?a:i.clientY;d=(o.value.getBoundingClientRect().bottom-e)/t.sliderSize*100}else d=((null!=(u=null==(l=null==(s=i.touches)?void 0:s.item(0))?void 0:l.clientX)?u:i.clientX)-o.value.getBoundingClientRect().left)/t.sliderSize*100;return d<0||d>100?void 0:m(d)};return{elFormItem:r,slider:o,firstButton:a,secondButton:s,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:f,barStyle:g,resetSize:v,setPosition:m,emitChange:b,onSliderWrapperPrevent:e=>{var t,i;((null==(t=l.firstButton.value)?void 0:t.dragging)||(null==(i=l.secondButton.value)?void 0:i.dragging))&&e.preventDefault()},onSliderClick:e=>{y(e)&&b()},onSliderDown:async e=>{const t=y(e);t&&(await gn(),t.value.onButtonDown(e))},setFirstValue:i=>{t.firstValue=i,A(e.range?[u.value,d.value]:i)},setSecondValue:i=>{t.secondValue=i,e.range&&A([u.value,d.value])}}},{left:wv,down:_v,right:Cv,up:kv,home:Ev,end:Sv,pageUp:Iv,pageDown:Bv}=We,Ov=(e,t,i)=>{const{disabled:n,min:r,max:o,step:a,showTooltip:s,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:h,updateDragging:p}=nn(mv),{tooltip:f,tooltipVisible:g,formatValue:v,displayTooltip:m,hideTooltip:A}=((e,t,i)=>{const n=Xi(),r=Xi(!1),o=pn((()=>t.value instanceof Function)),a=pn((()=>o.value&&t.value(e.modelValue)||e.modelValue)),s=J((()=>{i.value&&(r.value=!0)}),50),l=J((()=>{i.value&&(r.value=!1)}),50);return{tooltip:n,tooltipVisible:r,formatValue:a,displayTooltip:s,hideTooltip:l}})(e,u,s),b=Xi(),y=pn((()=>(e.modelValue-r.value)/(o.value-r.value)*100+"%")),x=pn((()=>e.vertical?{bottom:y.value}:{left:y.value})),w=e=>{n.value||(t.newPosition=Number.parseFloat(y.value)+e/(o.value-r.value)*100,S(t.newPosition),d())},_=e=>{let t,i;return e.type.startsWith("touch")?(i=e.touches[0].clientY,t=e.touches[0].clientX):(i=e.clientY,t=e.clientX),{clientX:t,clientY:i}},C=i=>{t.dragging=!0,t.isClick=!0;const{clientX:n,clientY:r}=_(i);e.vertical?t.startY=r:t.startX=n,t.startPosition=Number.parseFloat(y.value),t.newPosition=t.startPosition},k=i=>{if(t.dragging){let n;t.isClick=!1,m(),h();const{clientX:r,clientY:o}=_(i);e.vertical?(t.currentY=o,n=(t.startY-t.currentY)/c.value*100):(t.currentX=r,n=(t.currentX-t.startX)/c.value*100),t.newPosition=t.startPosition+n,S(t.newPosition)}},E=()=>{t.dragging&&(setTimeout((()=>{t.dragging=!1,t.hovering||A(),t.isClick||S(t.newPosition),d()}),0),window.removeEventListener("mousemove",k),window.removeEventListener("touchmove",k),window.removeEventListener("mouseup",E),window.removeEventListener("touchend",E),window.removeEventListener("contextmenu",E))},S=async n=>{if(null===n||Number.isNaN(+n))return;n<0?n=0:n>100&&(n=100);const s=100/((o.value-r.value)/a.value);let c=Math.round(n/s)*s*(o.value-r.value)*.01+r.value;c=Number.parseFloat(c.toFixed(l.value)),c!==e.modelValue&&i(we,c),t.dragging||e.modelValue===t.oldValue||(t.oldValue=e.modelValue),await gn(),t.dragging&&m(),f.value.updatePopper()};return fn((()=>t.dragging),(e=>{p(e)})),{disabled:n,button:b,tooltip:f,tooltipVisible:g,showTooltip:s,wrapperStyle:x,formatValue:v,handleMouseEnter:()=>{t.hovering=!0,m()},handleMouseLeave:()=>{t.hovering=!1,t.dragging||A()},onButtonDown:e=>{n.value||(e.preventDefault(),C(e),window.addEventListener("mousemove",k),window.addEventListener("touchmove",k),window.addEventListener("mouseup",E),window.addEventListener("touchend",E),window.addEventListener("contextmenu",E),b.value.focus())},onKeyDown:e=>{let t=!0;[wv,_v].includes(e.key)?w(-a.value):[Cv,kv].includes(e.key)?w(a.value):e.key===Ev?n.value||(S(0),d()):e.key===Sv?n.value||(S(100),d()):e.key===Bv?w(4*-a.value):e.key===Iv?w(4*a.value):t=!1,t&&e.preventDefault()},setPosition:S}},Tv=ue({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:yt,default:"top"}}),Dv={[we]:e=>_e(e)},Mv=["tabindex"],Qv=Wi({name:"ElSliderButton"}),Lv=Wi({...Qv,props:Tv,emits:Dv,setup(e,{expose:t,emit:i}){const n=e,r=pe("slider"),o=On({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:n.modelValue}),{disabled:a,button:s,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:h,handleMouseEnter:p,handleMouseLeave:f,onButtonDown:g,onKeyDown:v,setPosition:m}=Ov(n,o,i),{hovering:A,dragging:b}=In(o);return t({onButtonDown:g,onKeyDown:v,setPosition:m,hovering:A,dragging:b}),(e,t)=>(Ki(),Ji("div",{ref_key:"button",ref:s,class:en([tn(r).e("button-wrapper"),{hover:tn(A),dragging:tn(b)}]),style:Sn(tn(d)),tabindex:tn(a)?-1:0,onMouseenter:t[0]||(t[0]=(...e)=>tn(p)&&tn(p)(...e)),onMouseleave:t[1]||(t[1]=(...e)=>tn(f)&&tn(f)(...e)),onMousedown:t[2]||(t[2]=(...e)=>tn(g)&&tn(g)(...e)),onTouchstart:t[3]||(t[3]=(...e)=>tn(g)&&tn(g)(...e)),onFocus:t[4]||(t[4]=(...e)=>tn(p)&&tn(p)(...e)),onBlur:t[5]||(t[5]=(...e)=>tn(f)&&tn(f)(...e)),onKeydown:t[6]||(t[6]=(...e)=>tn(v)&&tn(v)(...e))},[Tn(tn(Ye),{ref_key:"tooltip",ref:l,visible:tn(u),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!tn(c),persistent:""},{content:an((()=>[rn("span",null,ln(tn(h)),1)])),default:an((()=>[rn("div",{class:en([tn(r).e("button"),{hover:tn(A),dragging:tn(b)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled"])],46,Mv))}});var jv=fe(Lv,[["__file","button.vue"]]);const Pv=ue({mark:{type:ge([String,Object]),default:void 0}});var Fv=Wi({name:"ElSliderMarker",props:Pv,setup(e){const t=pe("slider"),i=pn((()=>hn(e.mark)?e.mark:e.mark.label)),n=pn((()=>hn(e.mark)?void 0:e.mark.style));return()=>Jn("div",{class:t.e("marks-text"),style:n.value},i.value)}});const Rv=["id","role","aria-label","aria-labelledby"],zv={key:1},Nv=Wi({name:"ElSlider"}),Vv=Wi({...Nv,props:Av,emits:yv,setup(e,{expose:t,emit:i}){const n=e,r=pe("slider"),{t:o}=he(),a=On({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:p,runwayStyle:f,barStyle:g,resetSize:v,emitChange:m,onSliderWrapperPrevent:A,onSliderClick:b,onSliderDown:y,setFirstValue:x,setSecondValue:w}=xv(n,a,i),{stops:_,getStopStyle:C}=((e,t,i,n)=>{const r=pn((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const r=(e.max-e.min)/e.step,o=100*e.step/(e.max-e.min),a=Array.from({length:r-1}).map(((e,t)=>(t+1)*o));return e.range?a.filter((t=>t<100*(i.value-e.min)/(e.max-e.min)||t>100*(n.value-e.min)/(e.max-e.min))):a.filter((i=>i>100*(t.firstValue-e.min)/(e.max-e.min)))}));return{stops:r,getStopStyle:t=>e.vertical?{bottom:`${t}%`}:{left:`${t}%`}}})(n,a,h,p),{inputId:k,isLabeledByFormItem:E}=Te(n,{formItemContext:s}),S=Oe(),I=pn((()=>n.inputSize||S.value)),B=pn((()=>n.label||n.ariaLabel||o("el.slider.defaultLabel",{min:n.min,max:n.max}))),O=pn((()=>n.range?n.rangeStartLabel||o("el.slider.defaultRangeStartLabel"):B.value)),T=pn((()=>n.formatValueText?n.formatValueText(F.value):`${F.value}`)),D=pn((()=>n.rangeEndLabel||o("el.slider.defaultRangeEndLabel"))),M=pn((()=>n.formatValueText?n.formatValueText(R.value):`${R.value}`)),Q=pn((()=>[r.b(),r.m(S.value),r.is("vertical",n.vertical),{[r.m("with-input")]:n.showInput}])),L=(e=>pn((()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort(((e,t)=>e-t)).filter((t=>t<=e.max&&t>=e.min)).map((t=>({point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}))):[])))(n);((e,t,i,n,r,o)=>{const a=e=>{r(we,e),r(st,e)},s=()=>e.range?![i.value,n.value].every(((e,i)=>e===t.oldValue[i])):e.modelValue!==t.oldValue,l=()=>{var i,n;e.min>e.max&&dt("Slider","min should not be greater than max.");const r=e.modelValue;e.range&&Array.isArray(r)?r[1]<e.min?a([e.min,e.min]):r[0]>e.max?a([e.max,e.max]):r[0]<e.min?a([e.min,r[1]]):r[1]>e.max?a([r[0],e.max]):(t.firstValue=r[0],t.secondValue=r[1],s()&&(e.validateEvent&&(null==(i=null==o?void 0:o.validate)||i.call(o,"change").catch((e=>Ie()))),t.oldValue=r.slice())):e.range||"number"!=typeof r||Number.isNaN(r)||(r<e.min?a(e.min):r>e.max?a(e.max):(t.firstValue=r,s()&&(e.validateEvent&&(null==(n=null==o?void 0:o.validate)||n.call(o,"change").catch((e=>Ie()))),t.oldValue=r)))};l(),fn((()=>t.dragging),(e=>{e||l()})),fn((()=>e.modelValue),((e,i)=>{t.dragging||Array.isArray(e)&&Array.isArray(i)&&e.every(((e,t)=>e===i[t]))&&t.firstValue===e[0]&&t.secondValue===e[1]||l()}),{deep:!0}),fn((()=>[e.min,e.max]),(()=>{l()}))})(n,a,h,p,i,s);const j=pn((()=>{const e=[n.min,n.max,n.step].map((e=>{const t=`${e}`.split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:P}=((e,t,i)=>{const n=Xi();return qi((async()=>{e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),it(window,"resize",i),await gn(),i()})),{sliderWrapper:n}})(n,a,v),{firstValue:F,secondValue:R,sliderSize:z}=In(a);return $i(mv,{...In(n),sliderSize:z,disabled:d,precision:j,emitChange:m,resetSize:v,updateDragging:e=>{a.dragging=e}}),De({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},pn((()=>!!n.label))),t({onSliderClick:b}),(e,t)=>{var i,n;return Ki(),Ji("div",{id:e.range?tn(k):void 0,ref_key:"sliderWrapper",ref:P,class:en(tn(Q)),role:e.range?"group":void 0,"aria-label":e.range&&!tn(E)?tn(B):void 0,"aria-labelledby":e.range&&tn(E)?null==(i=tn(s))?void 0:i.labelId:void 0,onTouchstart:t[2]||(t[2]=(...e)=>tn(A)&&tn(A)(...e)),onTouchmove:t[3]||(t[3]=(...e)=>tn(A)&&tn(A)(...e))},[rn("div",{ref_key:"slider",ref:l,class:en([tn(r).e("runway"),{"show-input":e.showInput&&!e.range},tn(r).is("disabled",tn(d))]),style:Sn(tn(f)),onMousedown:t[0]||(t[0]=(...e)=>tn(y)&&tn(y)(...e)),onTouchstart:t[1]||(t[1]=(...e)=>tn(y)&&tn(y)(...e))},[rn("div",{class:en(tn(r).e("bar")),style:Sn(tn(g))},null,6),Tn(jv,{id:e.range?void 0:tn(k),ref_key:"firstButton",ref:c,"model-value":tn(F),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!tn(E)?tn(O):void 0,"aria-labelledby":!e.range&&tn(E)?null==(n=tn(s))?void 0:n.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?tn(R):e.max,"aria-valuenow":tn(F),"aria-valuetext":tn(T),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":tn(d),"onUpdate:modelValue":tn(x)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(Ki(),on(jv,{key:0,ref_key:"secondButton",ref:u,"model-value":tn(R),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":tn(D),"aria-valuemin":tn(F),"aria-valuemax":e.max,"aria-valuenow":tn(R),"aria-valuetext":tn(M),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":tn(d),"onUpdate:modelValue":tn(w)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):En("v-if",!0),e.showStops?(Ki(),Ji("div",zv,[(Ki(!0),Ji(Cn,null,zn(tn(_),((e,t)=>(Ki(),Ji("div",{key:t,class:en(tn(r).e("stop")),style:Sn(tn(C)(e))},null,6)))),128))])):En("v-if",!0),tn(L).length>0?(Ki(),Ji(Cn,{key:2},[rn("div",null,[(Ki(!0),Ji(Cn,null,zn(tn(L),((e,t)=>(Ki(),Ji("div",{key:t,style:Sn(tn(C)(e.position)),class:en([tn(r).e("stop"),tn(r).e("marks-stop")])},null,6)))),128))]),rn("div",{class:en(tn(r).e("marks"))},[(Ki(!0),Ji(Cn,null,zn(tn(L),((e,t)=>(Ki(),on(tn(Fv),{key:t,mark:e.mark,style:Sn(tn(C)(e.position))},null,8,["mark","style"])))),128))],2)],64)):En("v-if",!0)],38),e.showInput&&!e.range?(Ki(),on(tn(Vg),{key:0,ref:"input","model-value":tn(F),class:en(tn(r).e("input")),step:e.step,disabled:tn(d),controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:tn(I),"onUpdate:modelValue":tn(x),onChange:tn(m)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):En("v-if",!0)],42,Rv)}}}),Uv=me(fe(Vv,[["__file","slider.vue"]])),Hv=ue({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:St},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:de},activeActionIcon:{type:de},activeIcon:{type:de},inactiveIcon:{type:de},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:ge(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...xe(["ariaLabel"])}),Gv={[we]:e=>Ce(e)||hn(e)||_e(e),[Me]:e=>Ce(e)||hn(e)||_e(e),[st]:e=>Ce(e)||hn(e)||_e(e)},Yv=["onClick"],Wv=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],Xv=["aria-hidden"],$v=["aria-hidden"],qv=["aria-hidden"],Kv="ElSwitch",Jv=Wi({name:Kv}),Zv=Wi({...Jv,props:Hv,emits:Gv,setup(e,{expose:t,emit:i}){const n=e,{formItem:r}=Se(),o=Oe(),a=pe("switch"),{inputId:s}=Te(n,{formItemContext:r}),l=Ee(pn((()=>n.loading))),c=Xi(!1!==n.modelValue),u=Xi(),d=Xi(),h=pn((()=>[a.b(),a.m(o.value),a.is("disabled",l.value),a.is("checked",m.value)])),p=pn((()=>[a.e("label"),a.em("label","left"),a.is("active",!m.value)])),f=pn((()=>[a.e("label"),a.em("label","right"),a.is("active",m.value)])),g=pn((()=>({width:ze(n.width)})));fn((()=>n.modelValue),(()=>{c.value=!0}));const v=pn((()=>!!c.value&&n.modelValue)),m=pn((()=>v.value===n.activeValue));[n.activeValue,n.inactiveValue].includes(v.value)||(i(we,n.inactiveValue),i(Me,n.inactiveValue),i(st,n.inactiveValue)),fn(m,(e=>{var t;u.value.checked=e,n.validateEvent&&(null==(t=null==r?void 0:r.validate)||t.call(r,"change").catch((e=>Ie())))}));const A=()=>{const e=m.value?n.inactiveValue:n.activeValue;i(we,e),i(Me,e),i(st,e),gn((()=>{u.value.checked=m.value}))},b=()=>{if(l.value)return;const{beforeChange:e}=n;if(!e)return void A();const t=e();[Zn(t),Ce(t)].includes(!0)||dt(Kv,"beforeChange must return type `Promise<boolean>` or `boolean`"),Zn(t)?t.then((e=>{e&&A()})).catch((e=>{})):t&&A()};return qi((()=>{u.value.checked=m.value})),De({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},pn((()=>!!n.label))),t({focus:()=>{var e,t;null==(t=null==(e=u.value)?void 0:e.focus)||t.call(e)},checked:m}),(e,t)=>(Ki(),Ji("div",{class:en(tn(h)),onClick:wn(b,["prevent"])},[rn("input",{id:tn(s),ref_key:"input",ref:u,class:en(tn(a).e("input")),type:"checkbox",role:"switch","aria-checked":tn(m),"aria-disabled":tn(l),"aria-label":e.label||e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:tn(l),tabindex:e.tabindex,onChange:A,onKeydown:Ln(b,["enter"])},null,42,Wv),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?En("v-if",!0):(Ki(),Ji("span",{key:0,class:en(tn(p))},[e.inactiveIcon?(Ki(),on(tn(ve),{key:0},{default:an((()=>[(Ki(),on(sn(e.inactiveIcon)))])),_:1})):En("v-if",!0),!e.inactiveIcon&&e.inactiveText?(Ki(),Ji("span",{key:1,"aria-hidden":tn(m)},ln(e.inactiveText),9,Xv)):En("v-if",!0)],2)),rn("span",{ref_key:"core",ref:d,class:en(tn(a).e("core")),style:Sn(tn(g))},[e.inlinePrompt?(Ki(),Ji("div",{key:0,class:en(tn(a).e("inner"))},[e.activeIcon||e.inactiveIcon?(Ki(),on(tn(ve),{key:0,class:en(tn(a).is("icon"))},{default:an((()=>[(Ki(),on(sn(tn(m)?e.activeIcon:e.inactiveIcon)))])),_:1},8,["class"])):e.activeText||e.inactiveText?(Ki(),Ji("span",{key:1,class:en(tn(a).is("text")),"aria-hidden":!tn(m)},ln(tn(m)?e.activeText:e.inactiveText),11,$v)):En("v-if",!0)],2)):En("v-if",!0),rn("div",{class:en(tn(a).e("action"))},[e.loading?(Ki(),on(tn(ve),{key:0,class:en(tn(a).is("loading"))},{default:an((()=>[Tn(tn(It))])),_:1},8,["class"])):tn(m)?Zi(e.$slots,"active-action",{key:1},(()=>[e.activeActionIcon?(Ki(),on(tn(ve),{key:0},{default:an((()=>[(Ki(),on(sn(e.activeActionIcon)))])),_:1})):En("v-if",!0)])):tn(m)?En("v-if",!0):Zi(e.$slots,"inactive-action",{key:2},(()=>[e.inactiveActionIcon?(Ki(),on(tn(ve),{key:0},{default:an((()=>[(Ki(),on(sn(e.inactiveActionIcon)))])),_:1})):En("v-if",!0)]))],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?En("v-if",!0):(Ki(),Ji("span",{key:1,class:en(tn(f))},[e.activeIcon?(Ki(),on(tn(ve),{key:0},{default:an((()=>[(Ki(),on(sn(e.activeIcon)))])),_:1})):En("v-if",!0),!e.activeIcon&&e.activeText?(Ki(),Ji("span",{key:1,"aria-hidden":!tn(m)},ln(e.activeText),9,qv)):En("v-if",!0)],2))],10,Yv))}}),em=me(fe(Zv,[["__file","switch.vue"]])),tm="$treeNodeId",im=function(e,t){t&&!t[tm]&&Object.defineProperty(t,tm,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},nm=function(e,t){return e?t[e]:t[tm]},rm=(e,t,i)=>{const n=e.value.currentNode;i();const r=e.value.currentNode;n!==r&&t("current-change",r?r.data:null,r)},om=e=>{let t=!0,i=!0,n=!0;for(let r=0,o=e.length;r<o;r++){const o=e[r];(!0!==o.checked||o.indeterminate)&&(t=!1,o.disabled||(n=!1)),(!1!==o.checked||o.indeterminate)&&(i=!1)}return{all:t,none:i,allWithoutDisable:n,half:!t&&!i}},am=function(e){if(0===e.childNodes.length||e.loading)return;const{all:t,none:i,half:n}=om(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):n?(e.checked=!1,e.indeterminate=!0):i&&(e.checked=!1,e.indeterminate=!1);const r=e.parent;r&&0!==r.level&&(e.store.checkStrictly||am(r))},sm=function(e,t){const i=e.store.props,n=e.data||{},r=i[t];if("function"==typeof r)return r(n,e);if("string"==typeof r)return n[r];if(void 0===r){const e=n[t];return void 0===e?"":e}};let lm=0;class cm{constructor(e){this.id=lm++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Fn(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&void 0!==t.isLeaf){const e=sm(this,"isLeaf");"boolean"==typeof e&&(this.isLeafByUser=e)}if(!0!==e.lazy&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||im(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,n=e.key;n&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),n&&void 0!==e.currentNodeKey&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),!this.parent||1!==this.level&&!0!==this.parent.expanded||(this.canFocus=!0)}setData(e){let t;Array.isArray(e)||im(this,e),this.data=e,this.childNodes=[],t=0===this.level&&Array.isArray(this.data)?this.data:sm(this,"children")||[];for(let i=0,n=t.length;i<n;i++)this.insertChild({data:t[i]})}get label(){return sm(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return sm(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some((i=>i===e||t&&i.contains(e)))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof cm)){if(!i){const i=this.getChildren(!0);i.includes(e.data)||(void 0===t||t<0?i.push(e.data):i.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),(e=On(new cm(e)))instanceof cm&&e.initialize()}e.level=this.level+1,void 0===t||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),-1!==i&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let e=this.parent;for(;e.level>0;)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),this.childNodes.forEach((e=>{e.canFocus=!0}))};this.shouldLoadData()?this.loadData((e=>{Array.isArray(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||am(this),i())})):i()}doCreateChildren(e,t={}){e.forEach((e=>{this.insertChild(Object.assign({data:e},t),void 0,!0)}))}collapse(){this.expanded=!1,this.childNodes.forEach((e=>{e.canFocus=!1}))}shouldLoadData(){return!0===this.store.lazy&&this.store.load&&!this.loaded}updateLeafState(){if(!0===this.store.lazy&&!0!==this.loaded&&void 0!==this.isLeafByUser)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}setChecked(e,t,i,n){if(this.indeterminate="half"===e,this.checked=!0===e,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:i,allWithoutDisable:r}=om(this.childNodes);this.isLeaf||i||!r||(this.checked=!1,e=!1);const o=()=>{if(t){const i=this.childNodes;for(let a=0,s=i.length;a<s;a++){const r=i[a];n=n||!1!==e;const o=r.disabled?r.checked:n;r.setChecked(o,t,!0,n)}const{half:r,all:o}=om(i);o||(this.checked=o,this.indeterminate=r)}};if(this.shouldLoadData())return void this.loadData((()=>{o(),am(this)}),{checked:!1!==e});o()}const r=this.parent;r&&0!==r.level&&(i||am(r))}getChildren(e=!1){if(0===this.level)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let n="children";return i&&(n=i.children||"children"),void 0===t[n]&&(t[n]=null),e&&!t[n]&&(t[n]=[]),t[n]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map((e=>e.data)),i={},n=[];e.forEach(((e,r)=>{const o=e[tm];o&&t.findIndex((e=>e[tm]===o))>=0?i[o]={index:r,data:e}:n.push({index:r,data:e})})),this.store.lazy||t.forEach((e=>{i[e[tm]]||this.removeChildByData(e)})),n.forEach((({index:e,data:t})=>{this.insertChild({data:t},e)})),this.updateLeafState()}loadData(e,t={}){if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(t).length)e&&e.call(this);else{this.loading=!0;const i=i=>{this.childNodes=[],this.doCreateChildren(i,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,i)},n=()=>{this.loading=!1};this.store.load(this,i,n)}}eachNode(e){const t=[this];for(;t.length;){const i=t.shift();t.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||am(this)}}class um{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Fn(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){this.root=new cm({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?(0,this.load)(this.root,(e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()})):this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,n=function(r){const o=r.root?r.root.childNodes:r.childNodes;if(o.forEach((i=>{i.visible=t.call(i,e,i.data,i),n(i)})),!r.visible&&o.length){let e=!0;e=!o.some((e=>e.visible)),r.root?r.root.visible=!1===e:r.visible=!1===e}e&&r.visible&&!r.isLeaf&&(i&&!r.loaded||r.expand())};n(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof cm)return e;const t=mn(e)?nm(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=Be(t)?this.root:this.getNode(t);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach((e=>{const i=t[e];i&&i.setChecked(!0,!this.checkStrictly)}))}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;e&&e.data&&(t?void 0!==e.key&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){this.key&&e&&e.data&&(e.childNodes.forEach((e=>{this.deregisterNode(e)})),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],n=function(r){(r.root?r.root.childNodes:r.childNodes).forEach((r=>{(r.checked||t&&r.indeterminate)&&(!e||e&&r.isLeaf)&&i.push(r.data),n(r)}))};return n(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map((e=>(e||{})[this.key]))}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach((i=>{i.indeterminate&&e.push(i.data),t(i)}))};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map((e=>(e||{})[this.key]))}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)Fn(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const n=i.childNodes;for(let r=n.length-1;r>=0;r--){const e=n[r];this.remove(e.data)}for(let r=0,o=t.length;r<o;r++){const e=t[r];this.append(e,i.data)}}_setCheckedKeys(e,t=!1,i){const n=this._getAllNodes().sort(((e,t)=>e.level-t.level)),r=Object.create(null),o=Object.keys(i);n.forEach((e=>e.setChecked(!1,!1)));const a=t=>{t.childNodes.forEach((t=>{var i;r[t.data[e]]=!0,(null==(i=t.childNodes)?void 0:i.length)&&a(t)}))};for(let s=0,l=n.length;s<l;s++){const i=n[s],l=i.data[e].toString();if(o.includes(l)){if(i.childNodes.length&&a(i),i.isLeaf||this.checkStrictly)i.setChecked(!0,!1);else if(i.setChecked(!0,!0),t){i.setChecked(!1,!1);const e=function(t){t.childNodes.forEach((t=>{t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(i)}}else i.checked&&!r[l]&&i.setChecked(!1,!1)}}setCheckedNodes(e,t=!1){const i=this.key,n={};e.forEach((e=>{n[(e||{})[i]]=!0})),this._setCheckedKeys(i,t,n)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,n={};e.forEach((e=>{n[e]=!0})),this._setCheckedKeys(i,t,n)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach((e=>{const t=this.getNode(e);t&&t.expand(null,this.autoExpandParent)}))}setChecked(e,t,i){const n=this.getNode(e);n&&n.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],n=this.nodesMap[i];this.setCurrentNode(n),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(null==e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const dm=Wi({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=pe("tree"),i=nn("NodeInstance"),n=nn("RootTree");return()=>{const r=e.node,{data:o,store:a}=r;return e.renderContent?e.renderContent(Jn,{_self:i,node:r,data:o,store:a}):Zi(n.ctx.slots,"default",{node:r,data:o},(()=>[Jn("span",{class:t.be("node","label")},[r.label])]))}}});var hm=fe(dm,[["__file","tree-node-content.vue"]]);function pm(e){const t=nn("TreeNodeMap",null),i={treeNodeExpand:t=>{e.node!==t&&e.node.collapse()},children:[]};return t&&t.children.push(i),$i("TreeNodeMap",i),{broadcastExpanded:t=>{if(e.accordion)for(const e of i.children)e.treeNodeExpand(t)}}}const fm=Symbol("dragEvents"),gm=Wi({name:"ElTreeNode",components:{ElCollapseTransition:Lf,ElCheckbox:zp,NodeContent:hm,ElIcon:ve,Loading:It},props:{node:{type:cm,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const i=pe("tree"),{broadcastExpanded:n}=pm(e),r=nn("RootTree"),o=Xi(!1),a=Xi(!1),s=Xi(null),l=Xi(null),c=Xi(null),u=nn(fm),d=cn();$i("NodeInstance",d),e.node.expanded&&(o.value=!0,a.value=!0);const h=r.props.props.children||"children";fn((()=>{const t=e.node.data[h];return t&&[...t]}),(()=>{e.node.updateChildren()})),fn((()=>e.node.indeterminate),(t=>{p(e.node.checked,t)})),fn((()=>e.node.checked),(t=>{p(t,e.node.indeterminate)})),fn((()=>e.node.childNodes.length),(()=>e.node.reInitChecked())),fn((()=>e.node.expanded),(e=>{gn((()=>o.value=e)),e&&(a.value=!0)}));const p=(t,i)=>{s.value===t&&l.value===i||r.ctx.emit("check-change",e.node.data,t,i),s.value=t,l.value=i},f=()=>{e.node.isLeaf||(o.value?(r.ctx.emit("node-collapse",e.node.data,e.node,d),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,d)))},g=(t,i)=>{e.node.setChecked(i.target.checked,!r.props.checkStrictly),gn((()=>{const t=r.store.value;r.ctx.emit("check",e.node.data,{checkedNodes:t.getCheckedNodes(),checkedKeys:t.getCheckedKeys(),halfCheckedNodes:t.getHalfCheckedNodes(),halfCheckedKeys:t.getHalfCheckedKeys()})}))};return{ns:i,node$:c,tree:r,expanded:o,childNodeRendered:a,oldChecked:s,oldIndeterminate:l,getNodeKey:e=>nm(r.props.nodeKey,e.data),getNodeClass:t=>{const i=e.props.class;if(!i)return{};let n;if(dn(i)){const{data:e}=t;n=i(e,t)}else n=i;return hn(n)?{[n]:!0}:n},handleSelectChange:p,handleClick:t=>{rm(r.store,r.ctx.emit,(()=>r.store.value.setCurrentNode(e.node))),r.currentNode.value=e.node,r.props.expandOnClickNode&&f(),r.props.checkOnClickNode&&!e.node.disabled&&g(null,{target:{checked:!e.node.checked}}),r.ctx.emit("node-click",e.node.data,e.node,d,t)},handleContextMenu:t=>{r.instance.vnode.props.onNodeContextmenu&&(t.stopPropagation(),t.preventDefault()),r.ctx.emit("node-contextmenu",t,e.node.data,e.node,d)},handleExpandIconClick:f,handleCheckChange:g,handleChildNodeExpand:(e,t,i)=>{n(t),r.ctx.emit("node-expand",e,t,i)},handleDragStart:t=>{r.props.draggable&&u.treeNodeDragStart({event:t,treeNode:e})},handleDragOver:t=>{t.preventDefault(),r.props.draggable&&u.treeNodeDragOver({event:t,treeNode:{$el:c.value,node:e.node}})},handleDrop:e=>{e.preventDefault()},handleDragEnd:e=>{r.props.draggable&&u.treeNodeDragEnd(e)},CaretRight:Tt}}}),vm=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],mm=["aria-expanded"],Am=Wi({name:"ElTree",components:{ElTreeNode:fe(gm,[["render",function(e,t,i,n,r,o){const a=Xn("el-icon"),s=Xn("el-checkbox"),l=Xn("loading"),c=Xn("node-content"),u=Xn("el-tree-node"),d=Xn("el-collapse-transition");return yn((Ki(),Ji("div",{ref:"node$",class:en([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=wn(((...t)=>e.handleClick&&e.handleClick(...t)),["stop"])),onContextmenu:t[2]||(t[2]=(...t)=>e.handleContextMenu&&e.handleContextMenu(...t)),onDragstart:t[3]||(t[3]=wn(((...t)=>e.handleDragStart&&e.handleDragStart(...t)),["stop"])),onDragover:t[4]||(t[4]=wn(((...t)=>e.handleDragOver&&e.handleDragOver(...t)),["stop"])),onDragend:t[5]||(t[5]=wn(((...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),["stop"])),onDrop:t[6]||(t[6]=wn(((...t)=>e.handleDrop&&e.handleDrop(...t)),["stop"]))},[rn("div",{class:en(e.ns.be("node","content")),style:Sn({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(Ki(),on(a,{key:0,class:en([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:wn(e.handleExpandIconClick,["stop"])},{default:an((()=>[(Ki(),on(sn(e.tree.props.icon||e.CaretRight)))])),_:1},8,["class","onClick"])):En("v-if",!0),e.showCheckbox?(Ki(),on(s,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=wn((()=>{}),["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):En("v-if",!0),e.node.loading?(Ki(),on(a,{key:2,class:en([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:an((()=>[Tn(l)])),_:1},8,["class"])):En("v-if",!0),Tn(c,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),Tn(d,null,{default:an((()=>[!e.renderAfterExpand||e.childNodeRendered?yn((Ki(),Ji("div",{key:0,class:en(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(Ki(!0),Ji(Cn,null,zn(e.node.childNodes,(t=>(Ki(),on(u,{key:e.getNodeKey(t),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"])))),128))],10,mm)),[[jn,e.expanded]]):En("v-if",!0)])),_:1})],42,vm)),[[jn,e.node.visible]])}],["__file","tree-node.vue"]])},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:de}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:i}=he(),n=pe("tree"),r=nn(Hg,null),o=Xi(new um({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));o.value.initialize();const a=Xi(o.value.root),s=Xi(null),l=Xi(null),c=Xi(null),{broadcastExpanded:u}=pm(e),{dragState:d}=function({props:e,ctx:t,el$:i,dropIndicator$:n,store:r}){const o=pe("tree"),a=Xi({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return $i(fm,{treeNodeDragStart:({event:i,treeNode:n})=>{if("function"==typeof e.allowDrag&&!e.allowDrag(n.node))return i.preventDefault(),!1;i.dataTransfer.effectAllowed="move";try{i.dataTransfer.setData("text/plain","")}catch(r){}a.value.draggingNode=n,t.emit("node-drag-start",n.node,i)},treeNodeDragOver:({event:r,treeNode:s})=>{const l=s,c=a.value.dropNode;c&&c.node.id!==l.node.id&&Bt(c.$el,o.is("drop-inner"));const u=a.value.draggingNode;if(!u||!l)return;let d=!0,h=!0,p=!0,f=!0;"function"==typeof e.allowDrop&&(d=e.allowDrop(u.node,l.node,"prev"),f=h=e.allowDrop(u.node,l.node,"inner"),p=e.allowDrop(u.node,l.node,"next")),r.dataTransfer.dropEffect=h||d||p?"move":"none",(d||h||p)&&(null==c?void 0:c.node.id)!==l.node.id&&(c&&t.emit("node-drag-leave",u.node,c.node,r),t.emit("node-drag-enter",u.node,l.node,r)),a.value.dropNode=d||h||p?l:null,l.node.nextSibling===u.node&&(p=!1),l.node.previousSibling===u.node&&(d=!1),l.node.contains(u.node,!1)&&(h=!1),(u.node===l.node||u.node.contains(l.node))&&(d=!1,h=!1,p=!1);const g=l.$el.querySelector(`.${o.be("node","content")}`).getBoundingClientRect(),v=i.value.getBoundingClientRect();let m;const A=d?h?.25:p?.45:1:-1,b=p?h?.75:d?.55:0:1;let y=-9999;const x=r.clientY-g.top;m=x<g.height*A?"before":x>g.height*b?"after":h?"inner":"none";const w=l.$el.querySelector(`.${o.be("node","expand-icon")}`).getBoundingClientRect(),_=n.value;"before"===m?y=w.top-v.top:"after"===m&&(y=w.bottom-v.top),_.style.top=`${y}px`,_.style.left=w.right-v.left+"px","inner"===m?Ot(l.$el,o.is("drop-inner")):Bt(l.$el,o.is("drop-inner")),a.value.showDropIndicator="before"===m||"after"===m,a.value.allowDrop=a.value.showDropIndicator||f,a.value.dropType=m,t.emit("node-drag-over",u.node,l.node,r)},treeNodeDragEnd:e=>{const{draggingNode:i,dropType:n,dropNode:s}=a.value;if(e.preventDefault(),e.dataTransfer.dropEffect="move",i&&s){const a={data:i.node.data};"none"!==n&&i.node.remove(),"before"===n?s.node.parent.insertBefore(a,s.node):"after"===n?s.node.parent.insertAfter(a,s.node):"inner"===n&&s.node.insertChild(a),"none"!==n&&(r.value.registerNode(a),r.value.key&&i.node.eachNode((e=>{var t;null==(t=r.value.nodesMap[e.data[r.value.key]])||t.setChecked(e.checked,!r.value.checkStrictly)}))),Bt(s.$el,o.is("drop-inner")),t.emit("node-drag-end",i.node,s.node,n,e),"none"!==n&&t.emit("node-drop",i.node,s.node,n,e)}i&&!s&&t.emit("node-drag-end",i.node,null,n,e),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}({props:e,ctx:t,el$:l,dropIndicator$:c,store:o});!function({el$:e},t){const i=pe("tree"),n=Pn([]),r=Pn([]);qi((()=>{o()})),Gn((()=>{n.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),r.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))})),fn(r,(e=>{e.forEach((e=>{e.setAttribute("tabindex","-1")}))})),it(e,"keydown",(r=>{const o=r.target;if(!o.className.includes(i.b("node")))return;const a=r.code;n.value=Array.from(e.value.querySelectorAll(`.${i.is("focusable")}[role=treeitem]`));const s=n.value.indexOf(o);let l;if([We.up,We.down].includes(a)){if(r.preventDefault(),a===We.up){l=-1===s?0:0!==s?s-1:n.value.length-1;const e=l;for(;!t.value.getNode(n.value[l].dataset.key).canFocus;){if(l--,l===e){l=-1;break}l<0&&(l=n.value.length-1)}}else{l=-1===s?0:s<n.value.length-1?s+1:0;const e=l;for(;!t.value.getNode(n.value[l].dataset.key).canFocus;){if(l++,l===e){l=-1;break}l>=n.value.length&&(l=0)}}-1!==l&&n.value[l].focus()}[We.left,We.right].includes(a)&&(r.preventDefault(),o.click());const c=o.querySelector('[type="checkbox"]');[We.enter,We.space].includes(a)&&c&&(r.preventDefault(),c.click())}));const o=()=>{var t;n.value=Array.from(e.value.querySelectorAll(`.${i.is("focusable")}[role=treeitem]`)),r.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const o=e.value.querySelectorAll(`.${i.is("checked")}[role=treeitem]`);o.length?o[0].setAttribute("tabindex","0"):null==(t=n.value[0])||t.setAttribute("tabindex","0")}}({el$:l},o);const h=pn((()=>{const{childNodes:e}=a.value,t=!!r&&0!==r.hasFilteredOptions;return(!e||0===e.length||e.every((({visible:e})=>!e)))&&!t}));fn((()=>e.currentNodeKey),(e=>{o.value.setCurrentNodeKey(e)})),fn((()=>e.defaultCheckedKeys),(e=>{o.value.setDefaultCheckedKey(e)})),fn((()=>e.defaultExpandedKeys),(e=>{o.value.setDefaultExpandedKeys(e)})),fn((()=>e.data),(e=>{o.value.setData(e)}),{deep:!0}),fn((()=>e.checkStrictly),(e=>{o.value.checkStrictly=e}));const p=()=>{const e=o.value.getCurrentNode();return e?e.data:null};return $i("RootTree",{ctx:t,props:e,store:o,root:a,currentNode:s,instance:cn()}),$i(Dt,void 0),{ns:n,store:o,root:a,currentNode:s,dragState:d,el$:l,dropIndicator$:c,isEmpty:h,filter:t=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(t)},getNodeKey:t=>nm(e.nodeKey,t.data),getNodePath:t=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const i=o.value.getNode(t);if(!i)return[];const n=[i.data];let r=i.parent;for(;r&&r!==a.value;)n.push(r.data),r=r.parent;return n.reverse()},getCheckedNodes:(e,t)=>o.value.getCheckedNodes(e,t),getCheckedKeys:e=>o.value.getCheckedKeys(e),getCurrentNode:p,getCurrentKey:()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const t=p();return t?t[e.nodeKey]:null},setCheckedNodes:(t,i)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");o.value.setCheckedNodes(t,i)},setCheckedKeys:(t,i)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");o.value.setCheckedKeys(t,i)},setChecked:(e,t,i)=>{o.value.setChecked(e,t,i)},getHalfCheckedNodes:()=>o.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>o.value.getHalfCheckedKeys(),setCurrentNode:(i,n=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");rm(o,t.emit,(()=>o.value.setUserCurrentNode(i,n)))},setCurrentKey:(i,n=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");rm(o,t.emit,(()=>o.value.setCurrentNodeKey(i,n)))},t:i,getNode:e=>o.value.getNode(e),remove:e=>{o.value.remove(e)},append:(e,t)=>{o.value.append(e,t)},insertBefore:(e,t)=>{o.value.insertBefore(e,t)},insertAfter:(e,t)=>{o.value.insertAfter(e,t)},handleNodeExpand:(e,i,n)=>{u(i),t.emit("node-expand",e,i,n)},updateKeyChildren:(t,i)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");o.value.updateChildren(t,i)}}}});var bm=fe(Am,[["render",function(e,t,i,n,r,o){const a=Xn("el-tree-node");return Ki(),Ji("div",{ref:"el$",class:en([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner","inner"===e.dragState.dropType),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(Ki(!0),Ji(Cn,null,zn(e.root.childNodes,(t=>(Ki(),on(a,{key:e.getNodeKey(t),node:t,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"])))),128)),e.isEmpty?(Ki(),Ji("div",{key:0,class:en(e.ns.e("empty-block"))},[Zi(e.$slots,"empty",{},(()=>{var t;return[rn("span",{class:en(e.ns.e("empty-text"))},ln(null!=(t=e.emptyText)?t:e.t("el.tree.emptyText")),3)]}))],2)):En("v-if",!0),yn(rn("div",{ref:"dropIndicator$",class:en(e.ns.e("drop-indicator"))},null,2),[[jn,e.dragState.showDropIndicator]])],2)}],["__file","tree.vue"]]);bm.install=e=>{e.component(bm.name,bm)};const ym=bm,xm=Wi({extends:lv,setup(e,t){const i=lv.setup(e,t);delete i.selectOptionClick;const n=cn().proxy;return gn((()=>{i.select.states.cachedOptions.get(n.value)||i.select.onOptionCreate(n)})),fn((()=>t.attrs.visible),(e=>{i.states.visible=e}),{immediate:!0}),i},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function wm(e){return e||0===e}function _m(e){return Array.isArray(e)&&e.length}function Cm(e){return Array.isArray(e)?e:wm(e)?[e]:[]}function km(e,t,i,n,r){for(let o=0;o<e.length;o++){const a=e[o];if(t(a,o,e,r))return n?n(a,o,e,r):a;{const e=i(a);if(_m(e)){const r=km(e,t,i,n,a);if(r)return r}}}}function Em(e,t,i,n){for(let r=0;r<e.length;r++){const o=e[r];t(o,r,e,n);const a=i(o);_m(a)&&Em(a,t,i,o)}}var Sm=Wi({props:{data:{type:Array,default:()=>[]}},setup(e){const t=nn(Hg);return fn((()=>e.data),(()=>{var i;e.data.forEach((e=>{t.states.cachedOptions.has(e.value)||t.states.cachedOptions.set(e.value,e)}));const n=(null==(i=t.selectRef)?void 0:i.querySelectorAll("input"))||[];ce&&!Array.from(n).includes(document.activeElement)&&t.setSelected()}),{flush:"post",immediate:!0}),()=>{}}});const Im=Wi({name:"ElTreeSelect",inheritAttrs:!1,props:{...sv.props,...ym.props,cacheData:{type:Array,default:()=>[]}},setup(e,t){const{slots:i,expose:n}=t,r=Xi(),o=Xi(),a=pn((()=>e.nodeKey||e.valueKey||"value")),s=((e,{attrs:t,emit:i},{select:n,tree:r,key:o})=>{const a=pe("tree-select");return fn((()=>e.data),(()=>{e.filterable&&gn((()=>{var e,t;null==(t=r.value)||t.filter(null==(e=n.value)?void 0:e.states.inputValue)}))}),{flush:"post"}),{...se(In(e),Object.keys(sv.props)),...t,"onUpdate:modelValue":e=>i(we,e),valueKey:o,popperClass:pn((()=>{const t=[a.e("popper")];return e.popperClass&&t.push(e.popperClass),t.join(" ")})),filterMethod:(t="")=>{var i;e.filterMethod?e.filterMethod(t):e.remoteMethod?e.remoteMethod(t):null==(i=r.value)||i.filter(t)}}})(e,t,{select:r,tree:o,key:a}),{cacheOptions:l,...c}=((e,{attrs:t,slots:i,emit:n},{select:r,tree:o,key:a})=>{fn((()=>e.modelValue),(()=>{e.showCheckbox&&gn((()=>{const t=o.value;t&&!Oc(t.getCheckedKeys(),Cm(e.modelValue))&&t.setCheckedKeys(Cm(e.modelValue))}))}),{immediate:!0,deep:!0});const s=pn((()=>({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...e.props}))),l=(e,t)=>{var i;const n=s.value[e];return dn(n)?n(t,null==(i=o.value)?void 0:i.getNode(l("value",t))):t[n]},c=Cm(e.modelValue).map((t=>km(e.data||[],(e=>l("value",e)===t),(e=>l("children",e)),((e,t,i,n)=>n&&l("value",n))))).filter((e=>wm(e))),u=pn((()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const t=[];return Em(e.data.concat(e.cacheData),(e=>{const i=l("value",e);t.push({value:i,currentLabel:l("label",e),isDisabled:l("disabled",e)})}),(e=>l("children",e))),t}));return{...se(In(e),Object.keys(ym.props)),...t,nodeKey:a,expandOnClickNode:pn((()=>!e.checkStrictly&&e.expandOnClickNode)),defaultExpandedKeys:pn((()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(c):c)),renderContent:(t,{node:n,data:r,store:o})=>t(xm,{value:l("value",r),label:l("label",r),disabled:l("disabled",r),visible:n.visible},e.renderContent?()=>e.renderContent(t,{node:n,data:r,store:o}):i.default?()=>i.default({node:n,data:r,store:o}):void 0),filterNodeMethod:(t,i,n)=>e.filterNodeMethod?e.filterNodeMethod(t,i,n):!t||new RegExp(ht(t),"i").test(l("label",i)||""),onNodeClick:(i,n,o)=>{var a,s,c,u;if(null==(a=t.onNodeClick)||a.call(t,i,n,o),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!n.isLeaf)e.expandOnClickNode&&o.proxy.handleExpandIconClick();else if(!l("disabled",i)){const e=null==(s=r.value)?void 0:s.states.options.get(l("value",i));null==(c=r.value)||c.handleOptionSelect(e)}null==(u=r.value)||u.focus()}},onCheck:(i,a)=>{var s;if(!e.showCheckbox)return;const c=l("value",i),u={};Em([o.value.store.root],(e=>u[e.key]=e),(e=>e.childNodes));const d=a.checkedKeys,h=e.multiple?Cm(e.modelValue).filter((e=>!(e in u)&&!d.includes(e))):[],p=h.concat(d);if(e.checkStrictly)n(we,e.multiple?p:p.includes(c)?c:void 0);else if(e.multiple)n(we,h.concat(o.value.getCheckedKeys(!0)));else{const t=km([i],(e=>!_m(l("children",e))&&!l("disabled",e)),(e=>l("children",e))),r=t?l("value",t):void 0,o=wm(e.modelValue)&&!!km([i],(t=>l("value",t)===e.modelValue),(e=>l("children",e)));n(we,r===e.modelValue||o?void 0:r)}gn((()=>{var n;const r=Cm(e.modelValue);o.value.setCheckedKeys(r),null==(n=t.onCheck)||n.call(t,i,{checkedKeys:o.value.getCheckedKeys(),checkedNodes:o.value.getCheckedNodes(),halfCheckedKeys:o.value.getHalfCheckedKeys(),halfCheckedNodes:o.value.getHalfCheckedNodes()})})),null==(s=r.value)||s.focus()},cacheOptions:u}})(e,t,{select:r,tree:o,key:a}),u=On({});return n(u),qi((()=>{Object.assign(u,{...se(o.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...se(r.value,["focus","blur"])})})),()=>Jn(sv,On({...s,ref:e=>r.value=e}),{...i,default:()=>[Jn(Sm,{data:l.value}),Jn(ym,On({...c,ref:e=>o.value=e}))]})}});var Bm=fe(Im,[["__file","tree-select.vue"]]);Bm.install=e=>{e.component(Bm.name,Bm)};const Om=Bm;var Tm={};!function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t,i,n,r,o,a,s,l,c,u,d,h,p,f,g,v,m,A,b=b||{version:"5.3.0"};if(e.fabric=b,"undefined"!=typeof document&&"undefined"!=typeof window)document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?b.document=document:b.document=document.implementation.createHTMLDocument(""),b.window=window;else{var y=new Mt.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;b.document=y.document,b.jsdomImplForWrapper=Mt.implForWrapper,b.nodeCanvas=Mt.Canvas,b.window=y,DOMParser=b.window.DOMParser}function x(e,t){var i=e.canvas,n=t.targetCanvas,r=n.getContext("2d");r.translate(0,n.height),r.scale(1,-1);var o=i.height-n.height;r.drawImage(i,0,o,n.width,n.height,0,0,n.width,n.height)}function w(e,t){var i=t.targetCanvas.getContext("2d"),n=t.destinationWidth,r=t.destinationHeight,o=n*r*4,a=new Uint8Array(this.imageBuffer,0,o),s=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,n,r,e.RGBA,e.UNSIGNED_BYTE,a);var l=new ImageData(s,n,r);i.putImageData(l,0,0)}b.isTouchSupported="ontouchstart"in b.window||"ontouchstart"in b.document||b.window&&b.window.navigator&&b.window.navigator.maxTouchPoints>0,b.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,b.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],b.DPI=96,b.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",b.commaWsp="(?:\\s+,?\\s*|,\\s*)",b.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,b.reNonWord=/[ \n\.,;!\?\-]/,b.fontPaths={},b.iMatrix=[1,0,0,1,0,0],b.svgNS="http://www.w3.org/2000/svg",b.perfLimitSizeTotal=2097152,b.maxCacheSideLimit=4096,b.minCacheSideLimit=256,b.charWidthsCache={},b.textureSize=2048,b.disableStyleCopyPaste=!1,b.enableGLFiltering=!0,b.devicePixelRatio=b.window.devicePixelRatio||b.window.webkitDevicePixelRatio||b.window.mozDevicePixelRatio||1,b.browserShadowBlurConstant=1,b.arcToSegmentsCache={},b.boundsOfCurveCache={},b.cachesBoundsOfCurve=!0,b.forceGLPutImageData=!1,b.initFilterBackend=function(){return b.enableGLFiltering&&b.isWebglSupported&&b.isWebglSupported(b.textureSize)?new b.WebglFilterBackend({tileSize:b.textureSize}):b.Canvas2dFilterBackend?new b.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=b),function(){function e(e,t){if(this.__eventListeners[e]){var i=this.__eventListeners[e];t?i[i.indexOf(t)]=!1:b.util.array.fill(i,!1)}}function t(e,t){var i=function(){t.apply(this,arguments),this.off(e,i)}.bind(this);this.on(e,i)}b.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var i=this.__eventListeners[e];if(!i)return this;for(var n=0,r=i.length;n<r;n++)i[n]&&i[n].call(this,t||{});return this.__eventListeners[e]=i.filter((function(e){return!1!==e})),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in e)this.on(i,e[i]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},once:function(e,i){if(1===arguments.length)for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this},off:function(t,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in t)e.call(this,n,t[n]);else e.call(this,t,i);return this}}}(),b.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,i){var n=this._objects;return i?n[t]=e:n.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,i=!1,n=0,r=arguments.length;n<r;n++)-1!==(e=t.indexOf(arguments[n]))&&(i=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var i=this.getObjects(),n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return this._objects.indexOf(e)>-1||!!t&&this._objects.some((function(t){return"function"==typeof t.contains&&t.contains(e,!0)}))},complexity:function(){return this._objects.reduce((function(e,t){return e+=t.complexity?t.complexity():0}),0)}},b.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof b.Gradient||this.set(t,new b.Gradient(e))},_initPattern:function(e,t,i){!e||!e.source||e instanceof b.Pattern?i&&i():this.set(t,new b.Pattern(e,i))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},t=e,i=Math.sqrt,n=Math.atan2,r=Math.pow,o=Math.PI/180,a=Math.PI/2,b.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/a){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/a){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var i=e.indexOf(t);return-1!==i&&e.splice(i,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*o},radiansToDegrees:function(e){return e/o},rotatePoint:function(e,t,i){var n=new b.Point(e.x-t.x,e.y-t.y),r=b.util.rotateVector(n,i);return new b.Point(r.x,r.y).addEquals(t)},rotateVector:function(e,t){var i=b.util.sin(t),n=b.util.cos(t);return{x:e.x*n-e.y*i,y:e.x*i+e.y*n}},createVector:function(e,t){return new b.Point(t.x-e.x,t.y-e.y)},calcAngleBetweenVectors:function(e,t){return Math.acos((e.x*t.x+e.y*t.y)/(Math.hypot(e.x,e.y)*Math.hypot(t.x,t.y)))},getHatVector:function(e){return new b.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,t,i){var n=b.util.createVector(e,t),r=b.util.createVector(e,i),o=b.util.calcAngleBetweenVectors(n,r),a=o*(0===b.util.calcAngleBetweenVectors(b.util.rotateVector(n,o),r)?1:-1)/2;return{vector:b.util.getHatVector(b.util.rotateVector(n,a)),angle:o}},projectStrokeOnPoints:function(e,t,i){var n=[],r=t.strokeWidth/2,o=t.strokeUniform?new b.Point(1/t.scaleX,1/t.scaleY):new b.Point(1,1),a=function(e){var t=r/Math.hypot(e.x,e.y);return new b.Point(e.x*t*o.x,e.y*t*o.y)};return e.length<=1||e.forEach((function(s,l){var c,u,d=new b.Point(s.x,s.y);0===l?(u=e[l+1],c=i?a(b.util.createVector(u,d)).addEquals(d):e[e.length-1]):l===e.length-1?(c=e[l-1],u=i?a(b.util.createVector(c,d)).addEquals(d):e[0]):(c=e[l-1],u=e[l+1]);var h,p,f=b.util.getBisector(d,c,u),g=f.vector,v=f.angle;if("miter"===t.strokeLineJoin&&(h=-r/Math.sin(v/2),p=new b.Point(g.x*h*o.x,g.y*h*o.y),Math.hypot(p.x,p.y)/r<=t.strokeMiterLimit))return n.push(d.add(p)),void n.push(d.subtract(p));h=-r*Math.SQRT2,p=new b.Point(g.x*h*o.x,g.y*h*o.y),n.push(d.add(p)),n.push(d.subtract(p))})),n},transformPoint:function(e,t,i){return i?new b.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new b.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var i=0;i<e.length;i++)e[i]=b.util.transformPoint(e[i],t);var n=[e[0].x,e[1].x,e[2].x,e[3].x],r=b.util.array.min(n),o=b.util.array.max(n)-r,a=[e[0].y,e[1].y,e[2].y,e[3].y],s=b.util.array.min(a);return{left:r,top:s,width:o,height:b.util.array.max(a)-s}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),i=[t*e[3],-t*e[1],-t*e[2],t*e[0]],n=b.util.transformPoint({x:e[4],y:e[5]},i,!0);return i[4]=-n.x,i[5]=-n.y,i},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var i=/\D{0,2}$/.exec(e),n=parseFloat(e);switch(t||(t=b.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return n*b.DPI/25.4;case"cm":return n*b.DPI/2.54;case"in":return n*b.DPI;case"pt":return n*b.DPI/72;case"pc":return n*b.DPI/72*12;case"em":return n*t;default:return n}},falseFunction:function(){return!1},getKlass:function(e,t){return e=b.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),b.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(e){if(!e)return b;var i,n=e.split("."),r=n.length,o=t||b.window;for(i=0;i<r;++i)o=o[n[i]];return o},loadImage:function(e,t,i,n){if(e){var r=b.util.createImage(),o=function(){t&&t.call(i,r,!1),r=r.onload=r.onerror=null};r.onload=o,r.onerror=function(){b.log("Error loading "+r.src),t&&t.call(i,null,!0),r=r.onload=r.onerror=null},0!==e.indexOf("data")&&null!=n&&(r.crossOrigin=n),"data:image/svg"===e.substring(0,14)&&(r.onload=null,b.util.loadImageInDom(r,o)),r.src=e}else t&&t.call(i,e)},loadImageInDom:function(e,t){var i=b.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(e),b.document.querySelector("body").appendChild(i),e.onload=function(){t(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(e,t,i,n){var r=[],o=0,a=(e=e||[]).length;function s(){++o===a&&t&&t(r.filter((function(e){return e})))}a?e.forEach((function(e,t){e&&e.type?b.util.getKlass(e.type,i).fromObject(e,(function(i,o){o||(r[t]=i),n&&n(e,i,o),s()})):s()})):t&&t(r)},enlivenObjectEnlivables:function(e,t,i){var n=b.Object.ENLIVEN_PROPS.filter((function(t){return!!e[t]}));b.util.enlivenObjects(n.map((function(t){return e[t]})),(function(e){var r={};n.forEach((function(i,n){r[i]=e[n],t&&(t[i]=e[n])})),i&&i(r)}))},enlivenPatterns:function(e,t){function i(){++r===o&&t&&t(n)}var n=[],r=0,o=(e=e||[]).length;o?e.forEach((function(e,t){e&&e.source?new b.Pattern(e,(function(e){n[t]=e,i()})):(n[t]=e,i())})):t&&t(n)},groupSVGElements:function(e,t,i){var n;return e&&1===e.length?(void 0!==i&&(e[0].sourcePath=i),e[0]):(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),n=new b.Group(e,t),void 0!==i&&(n.sourcePath=i),n)},populateWithProperties:function(e,t,i){if(i&&Array.isArray(i))for(var n=0,r=i.length;n<r;n++)i[n]in e&&(t[i[n]]=e[i[n]])},createCanvasElement:function(){return b.document.createElement("canvas")},copyCanvasElement:function(e){var t=b.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,i){return e.toDataURL("image/"+t,i)},createImage:function(){return b.document.createElement("img")},multiplyTransformMatrices:function(e,t,i){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],i?0:e[0]*t[4]+e[2]*t[5]+e[4],i?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var t=n(e[1],e[0]),a=r(e[0],2)+r(e[1],2),s=i(a),l=(e[0]*e[3]-e[2]*e[1])/s,c=n(e[0]*e[2]+e[1]*e[3],a);return{angle:t/o,scaleX:s,scaleY:l,skewX:c/o,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return b.iMatrix.concat();var t=b.util.degreesToRadians(e.angle),i=b.util.cos(t),n=b.util.sin(t);return[i,n,-n,i,0,0]},calcDimensionsMatrix:function(e){var t=void 0===e.scaleX?1:e.scaleX,i=void 0===e.scaleY?1:e.scaleY,n=[e.flipX?-t:t,0,0,e.flipY?-i:i,0,0],r=b.util.multiplyTransformMatrices,o=b.util.degreesToRadians;return e.skewX&&(n=r(n,[1,0,Math.tan(o(e.skewX)),1],!0)),e.skewY&&(n=r(n,[1,Math.tan(o(e.skewY)),0,1],!0)),n},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],i=b.util.multiplyTransformMatrices;return e.angle&&(t=i(t,b.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=i(t,b.util.calcDimensionsMatrix(e))),t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,i,n){n>0&&(t>n?t-=n:t=0,i>n?i-=n:i=0);var r,o=!0,a=e.getImageData(t,i,2*n||1,2*n||1),s=a.data.length;for(r=3;r<s&&0!=(o=a.data[r]<=0);r+=4);return a=null,o},parsePreserveAspectRatioAttribute:function(e){var t,i="meet",n=e.split(" ");return n&&n.length&&("meet"!==(i=n.pop())&&"slice"!==i?(t=i,i="meet"):n.length&&(t=n.pop())),{meetOrSlice:i,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?b.charWidthsCache[e]&&delete b.charWidthsCache[e]:b.charWidthsCache={}},limitDimsByArea:function(e,t){var i=Math.sqrt(t*e),n=Math.floor(t/i);return{x:Math.floor(i),y:n}},capValue:function(e,t,i){return Math.max(e,Math.min(t,i))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return b.util.toFixed(e,b.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(e,t){var i=b.util.invertTransform(t),n=b.util.multiplyTransformMatrices(i,e.calcOwnMatrix());b.util.applyTransformToObject(e,n)},addTransformToObject:function(e,t){b.util.applyTransformToObject(e,b.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var i=b.util.qrDecompose(t),n=new b.Point(i.translateX,i.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",i.scaleX),e.set("scaleY",i.scaleY),e.skewX=i.skewX,e.skewY=i.skewY,e.angle=i.angle,e.setPositionByOrigin(n,"center","center")},sizeAfterTransform:function(e,t,i){var n=e/2,r=t/2,o=[{x:-n,y:-r},{x:n,y:-r},{x:-n,y:r},{x:n,y:r}],a=b.util.calcDimensionsMatrix(i),s=b.util.makeBoundingBoxFromPoints(o,a);return{x:s.width,y:s.height}},mergeClipPaths:function(e,t){var i=e,n=t;i.inverted&&!n.inverted&&(i=t,n=e),b.util.applyTransformToObject(n,b.util.multiplyTransformMatrices(b.util.invertTransform(i.calcTransformMatrix()),n.calcTransformMatrix()));var r=i.inverted&&n.inverted;return r&&(i.inverted=n.inverted=!1),new b.Group([i],{clipPath:n,inverted:r})},hasStyleChanged:function(e,t,i){return i=i||!1,e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||i&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},stylesToArray:function(e,t){e=b.util.object.clone(e,!0);for(var i=t.split("\n"),n=-1,r={},o=[],a=0;a<i.length;a++)if(e[a])for(var s=0;s<i[a].length;s++){n++;var l=e[a][s];l&&Object.keys(l).length>0&&(b.util.hasStyleChanged(r,l,!0)?o.push({start:n,end:n+1,style:l}):o[o.length-1].end++),r=l||{}}else n+=i[a].length;return o},stylesFromArray:function(e,t){if(!Array.isArray(e))return e;for(var i=t.split("\n"),n=-1,r=0,o={},a=0;a<i.length;a++)for(var s=0;s<i[a].length;s++)n++,e[r]&&e[r].start<=n&&n<e[r].end&&(o[a]=o[a]||{},o[a][s]=Object.assign({},e[r].style),n===e[r].end-1&&r++);return o}},function(){var e=Array.prototype.join,t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:"l",M:"L"};function n(e,t,i,n,r,o,a,s,l,c,u){var d=b.util.cos(e),h=b.util.sin(e),p=b.util.cos(t),f=b.util.sin(t),g=i*r*p-n*o*f+a,v=n*r*p+i*o*f+s;return["C",c+l*(-i*r*h-n*o*d),u+l*(-n*r*h+i*o*d),g+l*(i*r*f+n*o*p),v+l*(n*r*f-i*o*p),g,v]}function r(e,t,i,n){var r=Math.atan2(t,e),o=Math.atan2(n,i);return o>=r?o-r:2*Math.PI-(r-o)}function o(e,t,i){for(var o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=function(e,t,i,o,a,s,l){var c=Math.PI,u=l*c/180,d=b.util.sin(u),h=b.util.cos(u),p=0,f=0,g=-h*e*.5-d*t*.5,v=-h*t*.5+d*e*.5,m=(i=Math.abs(i))*i,A=(o=Math.abs(o))*o,y=v*v,x=g*g,w=m*A-m*y-A*x,_=0;if(w<0){var C=Math.sqrt(1-w/(m*A));i*=C,o*=C}else _=(a===s?-1:1)*Math.sqrt(w/(m*y+A*x));var k=_*i*v/o,E=-_*o*g/i,S=h*k-d*E+.5*e,I=d*k+h*E+.5*t,B=r(1,0,(g-k)/i,(v-E)/o),O=r((g-k)/i,(v-E)/o,(-g-k)/i,(-v-E)/o);0===s&&O>0?O-=2*c:1===s&&O<0&&(O+=2*c);for(var T=Math.ceil(Math.abs(O/c*2)),D=[],M=O/T,Q=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2),L=B+M,j=0;j<T;j++)D[j]=n(B,L,h,d,i,o,S,I,Q,p,f),p=D[j][5],f=D[j][6],B=L,L+=M;return D}(i[6]-e,i[7]-t,o,a,l,c,s),d=0,h=u.length;d<h;d++)u[d][1]+=e,u[d][2]+=t,u[d][3]+=e,u[d][4]+=t,u[d][5]+=e,u[d][6]+=t;return u}function a(e,t,i,n){return Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))}function s(e,t,i,n,r,o,a,s){return function(l){var c=function(e){return e*e*e}(l),u=function(e){return 3*e*e*(1-e)}(l),d=function(e){return 3*e*(1-e)*(1-e)}(l),h=function(e){return(1-e)*(1-e)*(1-e)}(l);return{x:a*c+r*u+i*d+e*h,y:s*c+o*u+n*d+t*h}}}function l(e,t,i,n,r,o,a,s){return function(l){var c=1-l,u=3*c*c*(i-e)+6*c*l*(r-i)+3*l*l*(a-r),d=3*c*c*(n-t)+6*c*l*(o-n)+3*l*l*(s-o);return Math.atan2(d,u)}}function c(e,t,i,n,r,o){return function(a){var s=function(e){return e*e}(a),l=function(e){return 2*e*(1-e)}(a),c=function(e){return(1-e)*(1-e)}(a);return{x:r*s+i*l+e*c,y:o*s+n*l+t*c}}}function u(e,t,i,n,r,o){return function(a){var s=1-a,l=2*s*(i-e)+2*a*(r-i),c=2*s*(n-t)+2*a*(o-n);return Math.atan2(c,l)}}function d(e,t,i){var n,r,o={x:t,y:i},s=0;for(r=1;r<=100;r+=1)n=e(r/100),s+=a(o.x,o.y,n.x,n.y),o=n;return s}function h(e,t){for(var i,n,r,o=0,s=0,l=e.iterator,c={x:e.x,y:e.y},u=.01,d=e.angleFinder;s<t&&u>1e-4;)i=l(o),r=o,(n=a(c.x,c.y,i.x,i.y))+s>t?(o-=u,u/=2):(c=i,o+=u,s+=n);return i.angle=d(r),i}function p(e){for(var t,i,n,r,o=0,h=e.length,p=0,f=0,g=0,v=0,m=[],A=0;A<h;A++){switch(n={x:p,y:f,command:(t=e[A])[0]},t[0]){case"M":n.length=0,g=p=t[1],v=f=t[2];break;case"L":n.length=a(p,f,t[1],t[2]),p=t[1],f=t[2];break;case"C":i=s(p,f,t[1],t[2],t[3],t[4],t[5],t[6]),r=l(p,f,t[1],t[2],t[3],t[4],t[5],t[6]),n.iterator=i,n.angleFinder=r,n.length=d(i,p,f),p=t[5],f=t[6];break;case"Q":i=c(p,f,t[1],t[2],t[3],t[4]),r=u(p,f,t[1],t[2],t[3],t[4]),n.iterator=i,n.angleFinder=r,n.length=d(i,p,f),p=t[3],f=t[4];break;case"Z":case"z":n.destX=g,n.destY=v,n.length=a(p,f,g,v),p=g,f=v}o+=n.length,m.push(n)}return m.push({length:o,x:p,y:f}),m}b.util.joinPath=function(e){return e.map((function(e){return e.join(" ")})).join(" ")},b.util.parsePath=function(e){var n,r,o,a,s,l=[],c=[],u=b.rePathCommand,d="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",h="("+d+")"+b.commaWsp,p="([01])"+b.commaWsp+"?",f=new RegExp(h+"?"+h+"?"+h+p+p+h+"?("+d+")","g");if(!e||!e.match)return l;for(var g,v=0,m=(s=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;v<m;v++){a=(n=s[v]).slice(1).trim(),c.length=0;var A=n.charAt(0);if(g=[A],"a"===A.toLowerCase())for(var y;y=f.exec(a);)for(var x=1;x<y.length;x++)c.push(y[x]);else for(;o=u.exec(a);)c.push(o[0]);x=0;for(var w=c.length;x<w;x++)r=parseFloat(c[x]),isNaN(r)||g.push(r);var _=t[A.toLowerCase()],C=i[A]||A;if(g.length-1>_)for(var k=1,E=g.length;k<E;k+=_)l.push([A].concat(g.slice(k,k+_))),A=C;else l.push(g)}return l},b.util.makePathSimpler=function(e){var t,i,n,r,a,s,l=0,c=0,u=e.length,d=0,h=0,p=[];for(i=0;i<u;++i){switch(n=!1,(t=e[i].slice(0))[0]){case"l":t[0]="L",t[1]+=l,t[2]+=c;case"L":l=t[1],c=t[2];break;case"h":t[1]+=l;case"H":t[0]="L",t[2]=c,l=t[1];break;case"v":t[1]+=c;case"V":t[0]="L",c=t[1],t[1]=l,t[2]=c;break;case"m":t[0]="M",t[1]+=l,t[2]+=c;case"M":l=t[1],c=t[2],d=t[1],h=t[2];break;case"c":t[0]="C",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c,t[5]+=l,t[6]+=c;case"C":a=t[3],s=t[4],l=t[5],c=t[6];break;case"s":t[0]="S",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"S":"C"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),l=t[3],c=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=a,t[2]=s,a=t[3],s=t[4];break;case"q":t[0]="Q",t[1]+=l,t[2]+=c,t[3]+=l,t[4]+=c;case"Q":a=t[1],s=t[2],l=t[3],c=t[4];break;case"t":t[0]="T",t[1]+=l,t[2]+=c;case"T":"Q"===r?(a=2*l-a,s=2*c-s):(a=l,s=c),t[0]="Q",l=t[1],c=t[2],t[1]=a,t[2]=s,t[3]=l,t[4]=c;break;case"a":t[0]="A",t[6]+=l,t[7]+=c;case"A":n=!0,p=p.concat(o(l,c,t)),l=t[6],c=t[7];break;case"z":case"Z":l=d,c=h}n||p.push(t),r=t[0]}return p},b.util.getSmoothPathFromPoints=function(e,t){var i,n=[],r=new b.Point(e[0].x,e[0].y),o=new b.Point(e[1].x,e[1].y),a=e.length,s=1,l=0,c=a>2;for(t=t||0,c&&(s=e[2].x<o.x?-1:e[2].x===o.x?0:1,l=e[2].y<o.y?-1:e[2].y===o.y?0:1),n.push(["M",r.x-s*t,r.y-l*t]),i=1;i<a;i++){if(!r.eq(o)){var u=r.midPointFrom(o);n.push(["Q",r.x,r.y,u.x,u.y])}r=e[i],i+1<e.length&&(o=e[i+1])}return c&&(s=r.x>e[i-2].x?1:r.x===e[i-2].x?0:-1,l=r.y>e[i-2].y?1:r.y===e[i-2].y?0:-1),n.push(["L",r.x+s*t,r.y+l*t]),n},b.util.getPathSegmentsInfo=p,b.util.getBoundsOfCurve=function(t,i,n,r,o,a,s,l){var c;if(b.cachesBoundsOfCurve&&(c=e.call(arguments),b.boundsOfCurveCache[c]))return b.boundsOfCurveCache[c];var u,d,h,p,f,g,v,m,A=Math.sqrt,y=Math.min,x=Math.max,w=Math.abs,_=[],C=[[],[]];d=6*t-12*n+6*o,u=-3*t+9*n-9*o+3*s,h=3*n-3*t;for(var k=0;k<2;++k)if(k>0&&(d=6*i-12*r+6*a,u=-3*i+9*r-9*a+3*l,h=3*r-3*i),w(u)<1e-12){if(w(d)<1e-12)continue;0<(p=-h/d)&&p<1&&_.push(p)}else(v=d*d-4*h*u)<0||(0<(f=(-d+(m=A(v)))/(2*u))&&f<1&&_.push(f),0<(g=(-d-m)/(2*u))&&g<1&&_.push(g));for(var E,S,I,B=_.length,O=B;B--;)E=(I=1-(p=_[B]))*I*I*t+3*I*I*p*n+3*I*p*p*o+p*p*p*s,C[0][B]=E,S=I*I*I*i+3*I*I*p*r+3*I*p*p*a+p*p*p*l,C[1][B]=S;C[0][O]=t,C[1][O]=i,C[0][O+1]=s,C[1][O+1]=l;var T=[{x:y.apply(null,C[0]),y:y.apply(null,C[1])},{x:x.apply(null,C[0]),y:x.apply(null,C[1])}];return b.cachesBoundsOfCurve&&(b.boundsOfCurveCache[c]=T),T},b.util.getPointOnPath=function(e,t,i){i||(i=p(e));for(var n=0;t-i[n].length>0&&n<i.length-2;)t-=i[n].length,n++;var r,o=i[n],a=t/o.length,s=o.command,l=e[n];switch(s){case"M":return{x:o.x,y:o.y,angle:0};case"Z":case"z":return(r=new b.Point(o.x,o.y).lerp(new b.Point(o.destX,o.destY),a)).angle=Math.atan2(o.destY-o.y,o.destX-o.x),r;case"L":return(r=new b.Point(o.x,o.y).lerp(new b.Point(l[1],l[2]),a)).angle=Math.atan2(l[2]-o.y,l[1]-o.x),r;case"C":case"Q":return h(o,t)}},b.util.transformPath=function(e,t,i){return i&&(t=b.util.multiplyTransformMatrices(t,[1,0,0,1,-i.x,-i.y])),e.map((function(e){for(var i=e.slice(0),n={},r=1;r<e.length-1;r+=2)n.x=e[r],n.y=e[r+1],n=b.util.transformPoint(n,t),i[r]=n.x,i[r+1]=n.y;return i}))}}(),function(){var e=Array.prototype.slice;function t(e,t,i){if(e&&0!==e.length){var n=e.length-1,r=t?e[n][t]:e[n];if(t)for(;n--;)i(e[n][t],r)&&(r=e[n][t]);else for(;n--;)i(e[n],r)&&(r=e[n]);return r}}b.util.array={fill:function(e,t){for(var i=e.length;i--;)e[i]=t;return e},invoke:function(t,i){for(var n=e.call(arguments,2),r=[],o=0,a=t.length;o<a;o++)r[o]=n.length?t[o][i].apply(t[o],n):t[o][i].call(t[o]);return r},min:function(e,i){return t(e,i,(function(e,t){return e<t}))},max:function(e,i){return t(e,i,(function(e,t){return e>=t}))}}}(),function(){function e(t,i,n){if(n)if(!b.isLikelyNode&&i instanceof Element)t=i;else if(i instanceof Array){t=[];for(var r=0,o=i.length;r<o;r++)t[r]=e({},i[r],n)}else if(i&&"object"==typeof i)for(var a in i)"canvas"===a||"group"===a?t[a]=null:i.hasOwnProperty(a)&&(t[a]=e({},i[a],n));else t=i;else for(var a in i)t[a]=i[a];return t}b.util.object={extend:e,clone:function(t,i){return e({},t,i)}},b.util.object.extend(b.util,b.Observable)}(),function(){function e(e,t){var i=e.charCodeAt(t);if(isNaN(i))return"";if(i<55296||i>57343)return e.charAt(t);if(55296<=i&&i<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var n=e.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var r=e.charCodeAt(t-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}b.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var i,n=0,r=[];for(n=0;n<t.length;n++)!1!==(i=e(t,n))&&r.push(i);return r}}}(),function(){var e=Array.prototype.slice,t=function(){},i=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),n=function(e,t,n){for(var r in t)r in e.prototype&&"function"==typeof e.prototype[r]&&(t[r]+"").indexOf("callSuper")>-1?e.prototype[r]=function(e){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var r=t[e].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==e)return r}}(r):e.prototype[r]=t[r],i&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function r(){}function o(t){for(var i=null,n=this;n.constructor.superclass;){var r=n.constructor.superclass.prototype[t];if(n[t]!==r){i=r;break}n=n.constructor.superclass.prototype}if(i)return arguments.length>1?i.apply(this,e.call(arguments,1)):i.call(this)}b.util.createClass=function(){var i=null,a=e.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"==typeof a[0]&&(i=a.shift()),s.superclass=i,s.subclasses=[],i&&(r.prototype=i.prototype,s.prototype=new r,i.subclasses.push(s));for(var l=0,c=a.length;l<c;l++)n(s,a[l],i);return s.prototype.initialize||(s.prototype.initialize=t),s.prototype.constructor=s,s.prototype.callSuper=o,s}}(),s=!!b.document.createElement("div").attachEvent,l=["touchstart","touchmove","touchend"],b.util.addListener=function(e,t,i,n){e&&e.addEventListener(t,i,!s&&n)},b.util.removeListener=function(e,t,i,n){e&&e.removeEventListener(t,i,!s&&n)},b.util.getPointer=function(e){var t=e.target,i=b.util.getScrollLeftTop(t),n=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:n.clientX+i.left,y:n.clientY+i.top}},b.util.isTouchEvent=function(e){return l.indexOf(e.type)>-1||"touch"===e.pointerType},c=b.document.createElement("div"),u="string"==typeof c.style.opacity,d="string"==typeof c.style.filter,h=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,p=function(e){return e},u?p=function(e,t){return e.style.opacity=t,e}:d&&(p=function(e,t){var i=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(i.zoom=1),h.test(i.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",i.filter=i.filter.replace(h,t)):i.filter+=" alpha(opacity="+100*t+")",e}),b.util.setStyle=function(e,t){var i=e.style;if(!i)return e;if("string"==typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?p(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var n in t)if("opacity"===n)p(e,t[n]);else{var r="float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n;i.setProperty(r,t[n])}return e},function(){var e,t,i,n,r=Array.prototype.slice,o=function(e){return r.call(e,0)};try{e=o(b.document.childNodes)instanceof Array}catch(l){}function a(e,t){var i=b.document.createElement(e);for(var n in t)"class"===n?i.className=t[n]:"for"===n?i.htmlFor=t[n]:i.setAttribute(n,t[n]);return i}function s(e){for(var t=0,i=0,n=b.document.documentElement,r=b.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===b.document?(t=r.scrollLeft||n.scrollLeft||0,i=r.scrollTop||n.scrollTop||0):(t+=e.scrollLeft||0,i+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:i}}e||(o=function(e){for(var t=new Array(e.length),i=e.length;i--;)t[i]=e[i];return t}),t=b.document.defaultView&&b.document.defaultView.getComputedStyle?function(e,t){var i=b.document.defaultView.getComputedStyle(e,null);return i?i[t]:void 0}:function(e,t){var i=e.style[t];return!i&&e.currentStyle&&(i=e.currentStyle[t]),i},i=b.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",b.util.makeElementUnselectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=b.util.falseFunction),n?e.style[n]="none":"string"==typeof e.unselectable&&(e.unselectable="on"),e},b.util.makeElementSelectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=null),n?e.style[n]="":"string"==typeof e.unselectable&&(e.unselectable=""),e},b.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},b.util.getById=function(e){return"string"==typeof e?b.document.getElementById(e):e},b.util.toArray=o,b.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},b.util.makeElement=a,b.util.wrapElement=function(e,t,i){return"string"==typeof t&&(t=a(t,i)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},b.util.getScrollLeftTop=s,b.util.getElementOffset=function(e){var i,n,r=e&&e.ownerDocument,o={left:0,top:0},a={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return a;for(var c in l)a[l[c]]+=parseInt(t(e,c),10)||0;return i=r.documentElement,void 0!==e.getBoundingClientRect&&(o=e.getBoundingClientRect()),n=s(e),{left:o.left+n.left-(i.clientLeft||0)+a.left,top:o.top+n.top-(i.clientTop||0)+a.top}},b.util.getNodeCanvas=function(e){var t=b.jsdomImplForWrapper(e);return t._canvas||t._image},b.util.cleanUpJsdomNode=function(e){if(b.isLikelyNode){var t=b.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}b.util.request=function(t,i){i||(i={});var n=i.method?i.method.toUpperCase():"GET",r=i.onComplete||function(){},o=new b.window.XMLHttpRequest,a=i.body||i.parameters;return o.onreadystatechange=function(){4===o.readyState&&(r(o),o.onreadystatechange=e)},"GET"===n&&(a=null,"string"==typeof i.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,i.parameters))),o.open(n,t,!0),"POST"!==n&&"PUT"!==n||o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(a),o}}(),b.log=console.log,b.warn=console.warn,function(){var e=b.util.object.extend,t=b.util.object.clone,i=[];function n(){return!1}function r(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t}b.util.object.extend(i,{cancelAll:function(){var e=this.splice(0);return e.forEach((function(e){e.cancel()})),e},cancelByCanvas:function(e){if(!e)return[];var t=this.filter((function(t){return"object"==typeof t.target&&t.target.canvas===e}));return t.forEach((function(e){e.cancel()})),t},cancelByTarget:function(e){var t=this.findAnimationsByTarget(e);return t.forEach((function(e){e.cancel()})),t},findAnimationIndex:function(e){return this.indexOf(this.findAnimation(e))},findAnimation:function(e){return this.find((function(t){return t.cancel===e}))},findAnimationsByTarget:function(e){return e?this.filter((function(t){return t.target===e})):[]}});var o=b.window.requestAnimationFrame||b.window.webkitRequestAnimationFrame||b.window.mozRequestAnimationFrame||b.window.oRequestAnimationFrame||b.window.msRequestAnimationFrame||function(e){return b.window.setTimeout(e,1e3/60)},a=b.window.cancelAnimationFrame||b.window.clearTimeout;function s(){return o.apply(b.window,arguments)}b.util.animate=function(i){i||(i={});var o,a=!1,l=function(){var e=b.runningAnimations.indexOf(o);return e>-1&&b.runningAnimations.splice(e,1)[0]};return o=e(t(i),{cancel:function(){return a=!0,l()},currentValue:"startValue"in i?i.startValue:0,completionRate:0,durationRate:0}),b.runningAnimations.push(o),s((function(e){var t,c=e||+new Date,u=i.duration||500,d=c+u,h=i.onChange||n,p=i.abort||n,f=i.onComplete||n,g=i.easing||r,v="startValue"in i&&i.startValue.length>0,m="startValue"in i?i.startValue:0,A="endValue"in i?i.endValue:100,b=i.byValue||(v?m.map((function(e,t){return A[t]-m[t]})):A-m);i.onStart&&i.onStart(),function e(i){var n=(t=i||+new Date)>d?u:t-c,r=n/u,y=v?m.map((function(e,t){return g(n,m[t],b[t],u)})):g(n,m,b,u),x=v?Math.abs((y[0]-m[0])/b[0]):Math.abs((y-m)/b);if(o.currentValue=v?y.slice():y,o.completionRate=x,o.durationRate=r,!a){if(!p(y,x,r))return t>d?(o.currentValue=v?A.slice():A,o.completionRate=1,o.durationRate=1,h(v?A.slice():A,1,1),f(A,1,1),void l()):(h(y,x,r),void s(e));l()}}(c)})),o.cancel},b.util.requestAnimFrame=s,b.util.cancelAnimFrame=function(){return a.apply(b.window,arguments)},b.runningAnimations=i}(),function(){function e(e,t,i){var n="rgba("+parseInt(e[0]+i*(t[0]-e[0]),10)+","+parseInt(e[1]+i*(t[1]-e[1]),10)+","+parseInt(e[2]+i*(t[2]-e[2]),10);return n+=","+(e&&t?parseFloat(e[3]+i*(t[3]-e[3])):1),n+=")"}b.util.animateColor=function(t,i,n,r){var o=new b.Color(t).getSource(),a=new b.Color(i).getSource(),s=r.onComplete,l=r.onChange;return r=r||{},b.util.animate(b.util.object.extend(r,{duration:n||500,startValue:o,endValue:a,byValue:a,easing:function(t,i,n,o){return e(i,n,r.colorEasing?r.colorEasing(t,o):1-Math.cos(t/o*(Math.PI/2)))},onComplete:function(t,i,n){if(s)return s(e(a,a,0),i,n)},onChange:function(t,i,n){if(l){if(Array.isArray(t))return l(e(t,t,0),i,n);l(t,i,n)}}}))}}(),function(){function e(e,t,i,n){return e<Math.abs(t)?(e=t,n=i/4):n=0===t&&0===e?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:i,s:n}}function t(e,t,i){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*i-e.s)*(2*Math.PI)/e.p)}function i(e,t,i,r){return i-n(r-e,0,i,r)+t}function n(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t}b.util.ease={easeInQuad:function(e,t,i,n){return i*(e/=n)*e+t},easeOutQuad:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,i,n){return i*(e/=n)*e*e+t},easeOutCubic:function(e,t,i,n){return i*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,i,n){return i*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,i,n){return i*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,i,n){return-i*Math.cos(e/n*(Math.PI/2))+i+t},easeOutSine:function(e,t,i,n){return i*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,i,n){return-i/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,i,n){return 0===e?t:i*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,i,n){return e===n?t+i:i*(1-Math.pow(2,-10*e/n))+t},easeInOutExpo:function(e,t,i,n){return 0===e?t:e===n?t+i:(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,i,n){return-i*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,i,n){return i*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,i,n){return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(i,n,r,o){var a=0;return 0===i?n:1==(i/=o)?n+r:(a||(a=.3*o),-t(e(r,r,a,1.70158),i,o)+n)},easeOutElastic:function(t,i,n,r){var o=0;if(0===t)return i;if(1==(t/=r))return i+n;o||(o=.3*r);var a=e(n,n,o,1.70158);return a.a*Math.pow(2,-10*t)*Math.sin((t*r-a.s)*(2*Math.PI)/a.p)+a.c+i},easeInOutElastic:function(i,n,r,o){var a=0;if(0===i)return n;if(2==(i/=o/2))return n+r;a||(a=o*(.3*1.5));var s=e(r,r,a,1.70158);return i<1?-.5*t(s,i,o)+n:s.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-s.s)*(2*Math.PI)/s.p)*.5+s.c+n},easeInBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),i*(e/=n)*e*((r+1)*e-r)+t},easeOutBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),i*((e=e/n-1)*e*((r+1)*e+r)+1)+t},easeInOutBack:function(e,t,i,n,r){return void 0===r&&(r=1.70158),(e/=n/2)<1?i/2*(e*e*((1+(r*=1.525))*e-r))+t:i/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInBounce:i,easeOutBounce:n,easeInOutBounce:function(e,t,r,o){return e<o/2?.5*i(2*e,0,r,o)+t:.5*n(2*e-o,0,r,o)+.5*r+t}}}(),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.object.clone,r=t.util.toFixed,o=t.util.parseUnit,a=t.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",u="clip-path";function d(e){return e in s?s[e]:e}function h(e,i,n,r){var s,l=Array.isArray(i);if("fill"!==e&&"stroke"!==e||"none"!==i){if("strokeUniform"===e)return"non-scaling-stroke"===i;if("strokeDashArray"===e)i="none"===i?null:i.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)i=n&&n.transformMatrix?a(n.transformMatrix,t.parseTransformAttribute(i)):t.parseTransformAttribute(i);else if("visible"===e)i="none"!==i&&"hidden"!==i,n&&!1===n.visible&&(i=!1);else if("opacity"===e)i=parseFloat(i),n&&void 0!==n.opacity&&(i*=n.opacity);else if("textAnchor"===e)i="start"===i?"left":"end"===i?"right":"center";else if("charSpacing"===e)s=o(i,r)/r*1e3;else if("paintFirst"===e){var c=i.indexOf("fill"),u=i.indexOf("stroke");i="fill",(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(i="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return i;if("imageSmoothing"===e)return"optimizeQuality"===i;s=l?i.map(o):o(i,r)}}else i="";return!l&&isNaN(s)?i:s}function p(e){return new RegExp("^("+e.join("|")+")\\b","i")}function f(e,t){var i,n,r,o,a=[];for(r=0,o=t.length;r<o;r++)i=t[r],n=e.getElementsByTagName(i),a=a.concat(Array.prototype.slice.call(n));return a}function g(e,t){var i,n=!0;return(i=v(e,t.pop()))&&t.length&&(n=function(e,t){for(var i,n=!0;e.parentNode&&1===e.parentNode.nodeType&&t.length;)n&&(i=t.pop()),n=v(e=e.parentNode,i);return 0===t.length}(e,t)),i&&n&&0===t.length}function v(e,t){var i,n,r=e.nodeName,o=e.getAttribute("class"),a=e.getAttribute("id");if(i=new RegExp("^"+r,"i"),t=t.replace(i,""),a&&t.length&&(i=new RegExp("#"+a+"(?![a-zA-Z\\-]+)","i"),t=t.replace(i,"")),o&&t.length)for(n=(o=o.split(" ")).length;n--;)i=new RegExp("\\."+o[n]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(i,"");return 0===t.length}function m(e,t){var i;if(e.getElementById&&(i=e.getElementById(t)),i)return i;var n,r,o,a=e.getElementsByTagName("*");for(r=0,o=a.length;r<o;r++)if(t===(n=a[r]).getAttribute("id"))return n}t.svgValidTagNamesRegEx=p(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=p(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=p(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=p(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,i,n){e[n]=Math.tan(t.util.degreesToRadians(i[0]))}var i=t.iMatrix,n=t.reNum,r=t.commaWsp,o="(?:(?:(matrix)\\s*\\(\\s*("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")"+r+"("+n+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+n+")(?:"+r+"("+n+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+n+")(?:"+r+"("+n+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+n+")(?:"+r+"("+n+")"+r+"("+n+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+n+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+n+")\\s*\\)))",a=new RegExp("^\\s*(?:(?:"+o+"(?:"+r+"*"+o+")*)?)\\s*$"),s=new RegExp(o,"g");return function(n){var r=i.concat(),l=[];if(!n||n&&!a.test(n))return r;n.replace(s,(function(n){var a=new RegExp(o).exec(n).filter((function(e){return!!e})),s=a[1],c=a.slice(2).map(parseFloat);switch(s){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(r,c);break;case"rotate":c[0]=t.util.degreesToRadians(c[0]),function(e,i){var n=t.util.cos(i[0]),r=t.util.sin(i[0]),o=0,a=0;3===i.length&&(o=i[1],a=i[2]),e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=o-(n*o-r*a),e[5]=a-(r*o+n*a)}(r,c);break;case"scale":!function(e,t){var i=t[0],n=2===t.length?t[1]:t[0];e[0]=i,e[3]=n}(r,c);break;case"skewX":e(r,c,2);break;case"skewY":e(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=i.concat()}));for(var c=l[0];l.length>1;)l.shift(),c=t.util.multiplyTransformMatrices(c,l[0]);return c}}();var A=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function b(e){if(!t.svgViewBoxElementsRegEx.test(e.nodeName))return{};var i,n,r,a,s,l,c=e.getAttribute("viewBox"),u=1,d=1,h=e.getAttribute("width"),p=e.getAttribute("height"),f=e.getAttribute("x")||0,g=e.getAttribute("y")||0,v=e.getAttribute("preserveAspectRatio")||"",m=!c||!(c=c.match(A)),b=!h||!p||"100%"===h||"100%"===p,y=m&&b,x={},w="",_=0,C=0;if(x.width=0,x.height=0,x.toBeParsed=y,m&&(f||g)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(w=" translate("+o(f)+" "+o(g)+") ",s=(e.getAttribute("transform")||"")+w,e.setAttribute("transform",s),e.removeAttribute("x"),e.removeAttribute("y")),y)return x;if(m)return x.width=o(h),x.height=o(p),x;if(i=-parseFloat(c[1]),n=-parseFloat(c[2]),r=parseFloat(c[3]),a=parseFloat(c[4]),x.minX=i,x.minY=n,x.viewBoxWidth=r,x.viewBoxHeight=a,b?(x.width=r,x.height=a):(x.width=o(h),x.height=o(p),u=x.width/r,d=x.height/a),"none"!==(v=t.util.parsePreserveAspectRatioAttribute(v)).alignX&&("meet"===v.meetOrSlice&&(d=u=u>d?d:u),"slice"===v.meetOrSlice&&(d=u=u>d?u:d),_=x.width-r*u,C=x.height-a*u,"Mid"===v.alignX&&(_/=2),"Mid"===v.alignY&&(C/=2),"Min"===v.alignX&&(_=0),"Min"===v.alignY&&(C=0)),1===u&&1===d&&0===i&&0===n&&0===f&&0===g)return x;if((f||g)&&"#document"!==e.parentNode.nodeName&&(w=" translate("+o(f)+" "+o(g)+") "),s=w+" matrix("+u+" 0 0 "+d+" "+(i*u+_)+" "+(n*d+C)+") ","svg"===e.nodeName){for(l=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)l.appendChild(e.firstChild);e.appendChild(l)}else(l=e).removeAttribute("x"),l.removeAttribute("y"),s=l.getAttribute("transform")+s;return l.setAttribute("transform",s),x}function y(e,t){var i="xlink:href",n=m(e,t.getAttribute(i).slice(1));if(n&&n.getAttribute(i)&&y(e,n),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){n&&!t.hasAttribute(e)&&n.hasAttribute(e)&&t.setAttribute(e,n.getAttribute(e))})),!t.children.length)for(var r=n.cloneNode(!0);r.firstChild;)t.appendChild(r.firstChild);t.removeAttribute(i)}t.parseSVGDocument=function(e,i,r,o){if(e){!function(e){for(var i=f(e,["use","svg:use"]),n=0;i.length&&n<i.length;){var r=i[n],o=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===o)return;var a,s,l,c,u=o.slice(1),d=r.getAttribute("x")||0,h=r.getAttribute("y")||0,p=m(e,u).cloneNode(!0),g=(p.getAttribute("transform")||"")+" translate("+d+", "+h+")",v=i.length,A=t.svgNS;if(b(p),/^svg$/i.test(p.nodeName)){var y=p.ownerDocument.createElementNS(A,"g");for(s=0,c=(l=p.attributes).length;s<c;s++)a=l.item(s),y.setAttributeNS(A,a.nodeName,a.nodeValue);for(;p.firstChild;)y.appendChild(p.firstChild);p=y}for(s=0,c=(l=r.attributes).length;s<c;s++)"x"!==(a=l.item(s)).nodeName&&"y"!==a.nodeName&&"xlink:href"!==a.nodeName&&"href"!==a.nodeName&&("transform"===a.nodeName?g=a.nodeValue+" "+g:p.setAttribute(a.nodeName,a.nodeValue));p.setAttribute("transform",g),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),r.parentNode.replaceChild(p,r),i.length===v&&n++}}(e);var a,s,l=t.Object.__uid++,c=b(e),u=t.util.toArray(e.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=l,0===u.length&&t.isLikelyNode){var d=[];for(a=0,s=(u=e.selectNodes('//*[name(.)!="svg"]')).length;a<s;a++)d[a]=u[a];u=d}var h=u.filter((function(e){return b(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)}));if(!h||h&&!h.length)i&&i([],{});else{var p={};u.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var i=e.getAttribute("id");p[i]=t.util.toArray(e.getElementsByTagName("*")).filter((function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),t.gradientDefs[l]=t.getGradientDefs(e),t.cssRules[l]=t.getCSSRules(e),t.clipPaths[l]=p,t.parseElements(h,(function(e,n){i&&(i(e,c,n,u),delete t.gradientDefs[l],delete t.cssRules[l],delete t.clipPaths[l])}),n(c),r,o)}}};var x=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");i(t,{parseFontDeclaration:function(e,t){var i=e.match(x);if(i){var n=i[1],r=i[3],a=i[4],s=i[5],l=i[6];n&&(t.fontStyle=n),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),a&&(t.fontSize=o(a)),l&&(t.fontFamily=l),s&&(t.lineHeight="normal"===s?1:s)}},getGradientDefs:function(e){var t,i=f(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),n=0,r={};for(n=i.length;n--;)(t=i[n]).getAttribute("xlink:href")&&y(e,t),r[t.getAttribute("id")]=t;return r},parseAttributes:function(e,n,a){if(e){var s,p,f,v={};void 0===a&&(a=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(v=t.parseAttributes(e.parentNode,n,a));var m=n.reduce((function(t,i){return(s=e.getAttribute(i))&&(t[i]=s),t}),{}),A=i(function(e,i){var n={};for(var r in t.cssRules[i])if(g(e,r.split(" ")))for(var o in t.cssRules[i][r])n[o]=t.cssRules[i][r][o];return n}(e,a),t.parseStyleAttribute(e));m=i(m,A),A[u]&&e.setAttribute(u,A[u]),p=f=v.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,m[c]&&(m[c]=p=o(m[c],f));var b,y,x={};for(var w in m)y=h(b=d(w),m[w],v,p),x[b]=y;x&&x.font&&t.parseFontDeclaration(x.font,x);var _=i(v,x);return t.svgValidParentsRegEx.test(e.nodeName)?_:function(e){for(var i in l)if(void 0!==e[l[i]]&&""!==e[i]){if(void 0===e[i]){if(!t.Object.prototype[i])continue;e[i]=t.Object.prototype[i]}if(0!==e[i].indexOf("url(")){var n=new t.Color(e[i]);e[i]=n.setAlpha(r(n.getAlpha()*e[l[i]],2)).toRgba()}}return e}(_)}},parseElements:function(e,i,n,r,o){new t.ElementsParser(e,i,n,r,o).parse()},parseStyleAttribute:function(e){var t={},i=e.getAttribute("style");return i?("string"==typeof i?function(e,t){var i,n;e.replace(/;\s*$/,"").split(";").forEach((function(e){var r=e.split(":");i=r[0].trim().toLowerCase(),n=r[1].trim(),t[i]=n}))}(i,t):function(e,t){var i,n;for(var r in e)void 0!==e[r]&&(i=r.toLowerCase(),n=e[r],t[i]=n)}(i,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,i,n=[];for(t=0,i=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<i;t+=2)n.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return n},getCSSRules:function(e){var i,n,r=e.getElementsByTagName("style"),o={};for(i=0,n=r.length;i<n;i++){var a=r[i].textContent;""!==(a=a.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&a.split("}").filter((function(e){return e.trim()})).forEach((function(e){var r=e.split("{"),a={},s=r[1].trim().split(";").filter((function(e){return e.trim()}));for(i=0,n=s.length;i<n;i++){var l=s[i].split(":"),c=l[0].trim(),u=l[1].trim();a[c]=u}(e=r[0].trim()).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(o[e]?t.util.object.extend(o[e],a):o[e]=t.util.object.clone(a))}))}))}return o},loadSVGFromURL:function(e,i,n,r){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var o=e.responseXML;if(!o||!o.documentElement)return i&&i(null),!1;t.parseSVGDocument(o.documentElement,(function(e,t,n,r){i&&i(e,t,n,r)}),n,r)}})},loadSVGFromString:function(e,i,n,r){var o=(new t.window.DOMParser).parseFromString(e.trim(),"text/xml");t.parseSVGDocument(o.documentElement,(function(e,t,n,r){i(e,t,n,r)}),n,r)}})}(e),b.ElementsParser=function(e,t,i,n,r,o){this.elements=e,this.callback=t,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},(f=b.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var e=this;this.elements.forEach((function(t,i){t.setAttribute("svgUid",e.svgUid),e.createObject(t,i)}))},f.findTag=function(e){return b[b.util.string.capitalize(e.tagName.replace("svg:",""))]},f.createObject=function(e,t){var i=this.findTag(e);if(i&&i.fromElement)try{i.fromElement(e,this.createCallback(t,e),this.options)}catch(n){b.log(n)}else this.checkIfDone()},f.createCallback=function(e,t){var i=this;return function(n){var r;i.resolveGradient(n,t,"fill"),i.resolveGradient(n,t,"stroke"),n instanceof b.Image&&n._originalElement&&(r=n.parsePreserveAspectRatioAttribute(t)),n._removeTransformMatrix(r),i.resolveClipPath(n,t),i.reviver&&i.reviver(t,n),i.instances[e]=n,i.checkIfDone()}},f.extractPropertyDefinition=function(e,t,i){var n=e[t],r=this.regexUrl;if(r.test(n)){r.lastIndex=0;var o=r.exec(n)[1];return r.lastIndex=0,b[i][this.svgUid][o]}},f.resolveGradient=function(e,t,i){var n=this.extractPropertyDefinition(e,i,"gradientDefs");if(n){var r=t.getAttribute(i+"-opacity"),o=b.Gradient.fromElement(n,e,r,this.options);e.set(i,o)}},f.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},f.resolveClipPath=function(e,t){var i,n,r,o,a=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(a){r=[],n=b.util.invertTransform(e.calcTransformMatrix());for(var s=a[0].parentNode,l=t;l.parentNode&&l.getAttribute("clip-path")!==e.clipPath;)l=l.parentNode;l.parentNode.appendChild(s);for(var c=0;c<a.length;c++)i=a[c],this.findTag(i).fromElement(i,this.createClipPathCallback(e,r),this.options);a=1===r.length?r[0]:new b.Group(r),o=b.util.multiplyTransformMatrices(n,a.calcTransformMatrix()),a.clipPath&&this.resolveClipPath(a,l);var u=b.util.qrDecompose(o);a.flipX=!1,a.flipY=!1,a.set("scaleX",u.scaleX),a.set("scaleY",u.scaleY),a.angle=u.angle,a.skewX=u.skewX,a.skewY=0,a.setPositionByOrigin({x:u.translateX,y:u.translateY},"center","center"),e.clipPath=a}else delete e.clipPath},f.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){var t=e.fabric||(e.fabric={});function i(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=i,i.prototype={type:"point",constructor:i,add:function(e){return new i(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new i(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new i(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new i(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new i(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new i(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new i(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new i(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new i(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,i=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=i},clone:function(){return new i(this.x,this.y)}})}(e),function(e){var t=e.fabric||(e.fabric={});function i(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=i,t.Intersection.prototype={constructor:i,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,n,r,o){var a,s=(o.x-r.x)*(e.y-r.y)-(o.y-r.y)*(e.x-r.x),l=(n.x-e.x)*(e.y-r.y)-(n.y-e.y)*(e.x-r.x),c=(o.y-r.y)*(n.x-e.x)-(o.x-r.x)*(n.y-e.y);if(0!==c){var u=s/c,d=l/c;0<=u&&u<=1&&0<=d&&d<=1?(a=new i("Intersection")).appendPoint(new t.Point(e.x+u*(n.x-e.x),e.y+u*(n.y-e.y))):a=new i}else a=new i(0===s||0===l?"Coincident":"Parallel");return a},t.Intersection.intersectLinePolygon=function(e,t,n){var r,o,a,s,l=new i,c=n.length;for(s=0;s<c;s++)r=n[s],o=n[(s+1)%c],a=i.intersectLineLine(e,t,r,o),l.appendPoints(a.points);return l.points.length>0&&(l.status="Intersection"),l},t.Intersection.intersectPolygonPolygon=function(e,t){var n,r=new i,o=e.length;for(n=0;n<o;n++){var a=e[n],s=e[(n+1)%o],l=i.intersectLinePolygon(a,s,t);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},t.Intersection.intersectPolygonRectangle=function(e,n,r){var o=n.min(r),a=n.max(r),s=new t.Point(a.x,o.y),l=new t.Point(o.x,a.y),c=i.intersectLinePolygon(o,s,e),u=i.intersectLinePolygon(s,a,e),d=i.intersectLinePolygon(a,l,e),h=i.intersectLinePolygon(l,o,e),p=new i;return p.appendPoints(c.points),p.appendPoints(u.points),p.appendPoints(d.points),p.appendPoints(h.points),p.points.length>0&&(p.status="Intersection"),p})}(e),function(e){var t=e.fabric||(e.fabric={});function i(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function n(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=i,t.Color.prototype={_tryParsingColor:function(e){var t;e in i.colorNameMap&&(e=i.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=i.sourceFromHex(e)),t||(t=i.sourceFromRgb(e)),t||(t=i.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,i,n){e/=255,i/=255,n/=255;var r,o,a,s=t.util.array.max([e,i,n]),l=t.util.array.min([e,i,n]);if(a=(s+l)/2,s===l)r=o=0;else{var c=s-l;switch(o=a>.5?c/(2-s-l):c/(s+l),s){case e:r=(i-n)/c+(i<n?6:0);break;case i:r=(n-e)/c+2;break;case n:r=(e-i)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,i,n=this.getSource();return e=1===(e=n[0].toString(16)).length?"0"+e:e,t=1===(t=n[1].toString(16)).length?"0"+t:t,i=1===(i=n[2].toString(16)).length?"0"+i:i,e.toUpperCase()+t.toUpperCase()+i.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),i=e[3];return this.setSource([t,t,t,i]),this},toBlackWhite:function(e){var t=this.getSource(),i=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),n=t[3];return e=e||127,i=Number(i)<Number(e)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(e){e instanceof i||(e=new i(e));var t,n=[],r=this.getAlpha(),o=this.getSource(),a=e.getSource();for(t=0;t<3;t++)n.push(Math.round(.5*o[t]+.5*a[t]));return n[3]=r,this.setSource(n),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return i.fromSource(i.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(i.reRGBa);if(t){var n=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),r=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),o=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=i.fromRgb,t.Color.fromHsl=function(e){return i.fromSource(i.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(i.reHSLa);if(t){var r,o,a,s=(parseFloat(t[1])%360+360)%360/360,l=parseFloat(t[2])/(/%$/.test(t[2])?100:1),c=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===l)r=o=a=c;else{var u=c<=.5?c*(l+1):c+l-c*l,d=2*c-u;r=n(d,u,s+1/3),o=n(d,u,s),a=n(d,u,s-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*a),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=i.fromHsl,t.Color.fromHex=function(e){return i.fromSource(i.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(i.reHex)){var t=e.slice(e.indexOf("#")+1),n=3===t.length||4===t.length,r=8===t.length||4===t.length,o=n?t.charAt(0)+t.charAt(0):t.substring(0,2),a=n?t.charAt(1)+t.charAt(1):t.substring(2,4),s=n?t.charAt(2)+t.charAt(2):t.substring(4,6),l=r?n?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(o,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new i;return t.setSource(e),t})}(e),function(e){var t=e.fabric||(e.fabric={}),i=["e","se","s","sw","w","nw","n","ne","e"],n=["ns","nesw","ew","nwse"],r={},o="left",a="top",s="right",l="bottom",c="center",u={top:l,bottom:a,left:s,right:o,center:c},d=t.util.radiansToDegrees,h=Math.sign||function(e){return(e>0)-(e<0)||+e};function p(e,t){var i=e.angle+d(Math.atan2(t.y,t.x))+360;return Math.round(i%360/45)}function f(e,i){var n=i.transform.target,r=n.canvas,o=t.util.object.clone(i);o.target=n,r&&r.fire("object:"+e,o),n.fire(e,i)}function g(e,t){var i=t.canvas,n=e[i.uniScaleKey];return i.uniformScaling&&!n||!i.uniformScaling&&n}function v(e){return e.originX===c&&e.originY===c}function m(e,t,i){var n=e.lockScalingX,r=e.lockScalingY;return!((!n||!r)&&(t||!n&&!r||!i)&&(!n||"x"!==t)&&(!r||"y"!==t))}function A(e,t,i,n){return{e:e,transform:t,pointer:{x:i,y:n}}}function b(e){return function(t,i,n,r){var o=i.target,a=o.getCenterPoint(),s=o.translateToOriginPoint(a,i.originX,i.originY),l=e(t,i,n,r);return o.setPositionByOrigin(s,i.originX,i.originY),l}}function y(e,t){return function(i,n,r,o){var a=t(i,n,r,o);return a&&f(e,A(i,n,r,o)),a}}function x(e,i,n,r,o){var a=e.target,s=a.controls[e.corner],l=a.canvas.getZoom(),c=a.padding/l,u=a.toLocalPoint(new t.Point(r,o),i,n);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=s.offsetX,u.y-=s.offsetY,u}function w(e){return e.flipX!==e.flipY}function _(e,t,i,n,r){if(0!==e[t]){var o=r/e._getTransformedDimensions()[n]*e[i];e.set(i,o)}}function C(e,t,i,n){var r,c=t.target,u=c._getTransformedDimensions(0,c.skewY),h=x(t,t.originX,t.originY,i,n),p=Math.abs(2*h.x)-u.x,f=c.skewX;p<2?r=0:(r=d(Math.atan2(p/c.scaleX,u.y/c.scaleY)),t.originX===o&&t.originY===l&&(r=-r),t.originX===s&&t.originY===a&&(r=-r),w(c)&&(r=-r));var g=f!==r;if(g){var v=c._getTransformedDimensions().y;c.set("skewX",r),_(c,"skewY","scaleY","y",v)}return g}function k(e,t,i,n){var r,c=t.target,u=c._getTransformedDimensions(c.skewX,0),h=x(t,t.originX,t.originY,i,n),p=Math.abs(2*h.y)-u.y,f=c.skewY;p<2?r=0:(r=d(Math.atan2(p/c.scaleY,u.x/c.scaleX)),t.originX===o&&t.originY===l&&(r=-r),t.originX===s&&t.originY===a&&(r=-r),w(c)&&(r=-r));var g=f!==r;if(g){var v=c._getTransformedDimensions().x;c.set("skewY",r),_(c,"skewX","scaleX","x",v)}return g}function E(e,t,i,n,r){r=r||{};var o,a,s,l,c,d,p=t.target,f=p.lockScalingX,A=p.lockScalingY,b=r.by,y=g(e,p),w=m(p,b,y),_=t.gestureScale;if(w)return!1;if(_)a=t.scaleX*_,s=t.scaleY*_;else{if(o=x(t,t.originX,t.originY,i,n),c="y"!==b?h(o.x):1,d="x"!==b?h(o.y):1,t.signX||(t.signX=c),t.signY||(t.signY=d),p.lockScalingFlip&&(t.signX!==c||t.signY!==d))return!1;if(l=p._getTransformedDimensions(),y&&!b){var C=Math.abs(o.x)+Math.abs(o.y),k=t.original,E=C/(Math.abs(l.x*k.scaleX/p.scaleX)+Math.abs(l.y*k.scaleY/p.scaleY));a=k.scaleX*E,s=k.scaleY*E}else a=Math.abs(o.x*p.scaleX/l.x),s=Math.abs(o.y*p.scaleY/l.y);v(t)&&(a*=2,s*=2),t.signX!==c&&"y"!==b&&(t.originX=u[t.originX],a*=-1,t.signX=c),t.signY!==d&&"x"!==b&&(t.originY=u[t.originY],s*=-1,t.signY=d)}var S=p.scaleX,I=p.scaleY;return b?("x"===b&&p.set("scaleX",a),"y"===b&&p.set("scaleY",s)):(!f&&p.set("scaleX",a),!A&&p.set("scaleY",s)),S!==p.scaleX||I!==p.scaleY}r.scaleCursorStyleHandler=function(e,t,n){var r=g(e,n),o="";if(0!==t.x&&0===t.y?o="x":0===t.x&&0!==t.y&&(o="y"),m(n,o,r))return"not-allowed";var a=p(n,t);return i[a]+"-resize"},r.skewCursorStyleHandler=function(e,t,i){var r="not-allowed";if(0!==t.x&&i.lockSkewingY)return r;if(0!==t.y&&i.lockSkewingX)return r;var o=p(i,t)%4;return n[o]+"-resize"},r.scaleSkewCursorStyleHandler=function(e,t,i){return e[i.canvas.altActionKey]?r.skewCursorStyleHandler(e,t,i):r.scaleCursorStyleHandler(e,t,i)},r.rotationWithSnapping=y("rotating",b((function(e,t,i,n){var r=t,o=r.target,a=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var s,l=Math.atan2(r.ey-a.y,r.ex-a.x),c=Math.atan2(n-a.y,i-a.x),u=d(c-l+r.theta);if(o.snapAngle>0){var h=o.snapAngle,p=o.snapThreshold||h,f=Math.ceil(u/h)*h,g=Math.floor(u/h)*h;Math.abs(u-g)<p?u=g:Math.abs(u-f)<p&&(u=f)}return u<0&&(u=360+u),u%=360,s=o.angle!==u,o.angle=u,s}))),r.scalingEqually=y("scaling",b((function(e,t,i,n){return E(e,t,i,n)}))),r.scalingX=y("scaling",b((function(e,t,i,n){return E(e,t,i,n,{by:"x"})}))),r.scalingY=y("scaling",b((function(e,t,i,n){return E(e,t,i,n,{by:"y"})}))),r.scalingYOrSkewingX=function(e,t,i,n){return e[t.target.canvas.altActionKey]?r.skewHandlerX(e,t,i,n):r.scalingY(e,t,i,n)},r.scalingXOrSkewingY=function(e,t,i,n){return e[t.target.canvas.altActionKey]?r.skewHandlerY(e,t,i,n):r.scalingX(e,t,i,n)},r.changeWidth=y("resizing",b((function(e,t,i,n){var r=t.target,o=x(t,t.originX,t.originY,i,n),a=r.strokeWidth/(r.strokeUniform?r.scaleX:1),s=v(t)?2:1,l=r.width,c=Math.abs(o.x*s/r.scaleX)-a;return r.set("width",Math.max(c,0)),l!==c}))),r.skewHandlerX=function(e,t,i,n){var r,l=t.target,u=l.skewX,d=t.originY;return!l.lockSkewingX&&(0===u?r=x(t,c,c,i,n).x>0?o:s:(u>0&&(r=d===a?o:s),u<0&&(r=d===a?s:o),w(l)&&(r=r===o?s:o)),t.originX=r,y("skewing",b(C))(e,t,i,n))},r.skewHandlerY=function(e,t,i,n){var r,s=t.target,u=s.skewY,d=t.originX;return!s.lockSkewingY&&(0===u?r=x(t,c,c,i,n).y>0?a:l:(u>0&&(r=d===o?a:l),u<0&&(r=d===o?l:a),w(s)&&(r=r===a?l:a)),t.originY=r,y("skewing",b(k))(e,t,i,n))},r.dragHandler=function(e,t,i,n){var r=t.target,o=i-t.offsetX,a=n-t.offsetY,s=!r.get("lockMovementX")&&r.left!==o,l=!r.get("lockMovementY")&&r.top!==a;return s&&r.set("left",o),l&&r.set("top",a),(s||l)&&f("moving",A(e,t,i,n)),s||l},r.scaleOrSkewActionName=function(e,t,i){var n=e[i.canvas.altActionKey];return 0===t.x?n?"skewX":"scaleY":0===t.y?n?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(e,t,i){return i.lockRotation?"not-allowed":t.cursorStyle},r.fireEvent=f,r.wrapWithFixedAnchor=b,r.wrapWithFireEvent=y,r.getLocalPoint=x,t.controlsUtils=r}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.degreesToRadians,n=t.controlsUtils;n.renderCircleControl=function(e,t,i,n,r){n=n||{};var o,a=this.sizeX||n.cornerSize||r.cornerSize,s=this.sizeY||n.cornerSize||r.cornerSize,l=void 0!==n.transparentCorners?n.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",u=!l&&(n.cornerStrokeColor||r.cornerStrokeColor),d=t,h=i;e.save(),e.fillStyle=n.cornerColor||r.cornerColor,e.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor,a>s?(o=a,e.scale(1,s/a),h=i*a/s):s>a?(o=s,e.scale(a/s,1),d=t*s/a):o=a,e.lineWidth=1,e.beginPath(),e.arc(d,h,o/2,0,2*Math.PI,!1),e[c](),u&&e.stroke(),e.restore()},n.renderSquareControl=function(e,t,n,r,o){r=r||{};var a=this.sizeX||r.cornerSize||o.cornerSize,s=this.sizeY||r.cornerSize||o.cornerSize,l=void 0!==r.transparentCorners?r.transparentCorners:o.transparentCorners,c=l?"stroke":"fill",u=!l&&(r.cornerStrokeColor||o.cornerStrokeColor),d=a/2,h=s/2;e.save(),e.fillStyle=r.cornerColor||o.cornerColor,e.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,e.lineWidth=1,e.translate(t,n),e.rotate(i(o.angle)),e[c+"Rect"](-d,-h,a,s),u&&e.strokeRect(-d,-h,a,s),e.restore()}}(e),function(e){var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){var i=e._controlsVisibility;return i&&void 0!==i[t]?i[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,i){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},i)},calcCornerCoords:function(e,i,n,r,o){var a,s,l,c,u=o?this.touchSizeX:this.sizeX,d=o?this.touchSizeY:this.sizeY;if(u&&d&&u!==d){var h=Math.atan2(d,u),p=Math.sqrt(u*u+d*d)/2,f=h-t.util.degreesToRadians(e),g=Math.PI/2-h-t.util.degreesToRadians(e);a=p*t.util.cos(f),s=p*t.util.sin(f),l=p*t.util.cos(g),c=p*t.util.sin(g)}else p=.7071067812*(u&&d?u:i),f=t.util.degreesToRadians(45-e),a=l=p*t.util.cos(f),s=c=p*t.util.sin(f);return{tl:{x:n-c,y:r-l},tr:{x:n+a,y:r-s},bl:{x:n-a,y:r+s},br:{x:n+c,y:r+l}}},render:function(e,i,n,r,o){"circle"===((r=r||{}).cornerStyle||o.cornerStyle)?t.controlsUtils.renderCircleControl.call(this,e,i,n,r,o):t.controlsUtils.renderSquareControl.call(this,e,i,n,r,o)}}}(e),function(){function e(e,t){var i,n,r,o,a=e.getAttribute("style"),s=e.getAttribute("offset")||0;if(s=(s=parseFloat(s)/(/%$/.test(s)?100:1))<0?0:s>1?1:s,a){var l=a.split(/\s*;\s*/);for(""===l[l.length-1]&&l.pop(),o=l.length;o--;){var c=l[o].split(/\s*:\s*/),u=c[0].trim(),d=c[1].trim();"stop-color"===u?i=d:"stop-opacity"===u&&(r=d)}}return i||(i=e.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=e.getAttribute("stop-opacity")),n=(i=new b.Color(i)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=n*t,{offset:s,color:i.toRgb(),opacity:r}}var t=b.util.object.clone;b.Gradient=b.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,i=this;Object.keys(e).forEach((function(t){i[t]=e[t]})),this.id?this.id+="_"+b.Object.__uid++:this.id=b.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var i=new b.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return b.util.populateWithProperties(this,t,e),t},toSVG:function(e,i){var n,r,o,a,s=t(this.coords,!0),l=(i=i||{},t(this.colorStops,!0)),c=s.r1>s.r2,u=this.gradientTransform?this.gradientTransform.concat():b.iMatrix.concat(),d=-this.offsetX,h=-this.offsetY,p=!!i.additionalTransform,f="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(l.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"===f?(d/=e.width,h/=e.height):(d+=e.width/2,h+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(d-=e.pathOffset.x,h-=e.pathOffset.y),u[4]-=d,u[5]-=h,a='id="SVGID_'+this.id+'" gradientUnits="'+f+'"',a+=' gradientTransform="'+(p?i.additionalTransform+" ":"")+b.util.matrixToSVG(u)+'" ',"linear"===this.type?o=["<linearGradient ",a,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,'">\n']:"radial"===this.type&&(o=["<radialGradient ",a,' cx="',c?s.x1:s.x2,'" cy="',c?s.y1:s.y2,'" r="',c?s.r1:s.r2,'" fx="',c?s.x2:s.x1,'" fy="',c?s.y2:s.y1,'">\n']),"radial"===this.type){if(c)for((l=l.concat()).reverse(),n=0,r=l.length;n<r;n++)l[n].offset=1-l[n].offset;var g=Math.min(s.r1,s.r2);if(g>0){var v=g/Math.max(s.r1,s.r2);for(n=0,r=l.length;n<r;n++)l[n].offset+=v*(1-l[n].offset)}}for(n=0,r=l.length;n<r;n++){var m=l[n];o.push("<stop ",'offset="',100*m.offset+"%",'" style="stop-color:',m.color,void 0!==m.opacity?";stop-opacity: "+m.opacity:";",'"/>\n')}return o.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),o.join("")},toLive:function(e){var t,i,n,r=b.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(t=e.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),i=0,n=this.colorStops.length;i<n;i++){var o=this.colorStops[i].color,a=this.colorStops[i].opacity,s=this.colorStops[i].offset;void 0!==a&&(o=new b.Color(o).setAlpha(a).toRgba()),t.addColorStop(s,o)}return t}}}),b.util.object.extend(b.Gradient,{fromElement:function(t,i,n,r){var o=parseFloat(n)/(/%$/.test(n)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var a,s,l,c,u=t.getElementsByTagName("stop"),d="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",h=t.getAttribute("gradientTransform")||"",p=[],f=0,g=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(a="linear",s=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(a="radial",s=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),l=u.length;l--;)p.push(e(u[l],o));return c=b.parseTransformAttribute(h),function(e,t,i,n){var r,o;Object.keys(t).forEach((function(e){"Infinity"===(r=t[e])?o=1:"-Infinity"===r?o=0:(o=parseFloat(t[e],10),"string"==typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===n&&("x1"!==e&&"x2"!==e&&"r2"!==e||(o*=i.viewBoxWidth||i.width),"y1"!==e&&"y2"!==e||(o*=i.viewBoxHeight||i.height)))),t[e]=o}))}(0,s,r,d),"pixels"===d&&(f=-i.left,g=-i.top),new b.Gradient({id:t.getAttribute("id"),type:a,coords:s,colorStops:p,gradientUnits:d,gradientTransform:c,offsetX:f,offsetY:g})}})}(),g=b.util.toFixed,b.Pattern=b.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=b.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!=typeof e.source)t&&t(this);else{var i=this;this.source=b.util.createImage(),b.util.loadImage(e.source,(function(e,n){i.source=e,t&&t(i,n)}),null,this.crossOrigin)}},toObject:function(e){var t,i,n=b.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?t=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(t=this.source.toDataURL()),i={type:"pattern",source:t,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,n),offsetY:g(this.offsetY,n),patternTransform:this.patternTransform?this.patternTransform.concat():null},b.util.populateWithProperties(this,i,e),i},toSVG:function(e){var t="function"==typeof this.source?this.source():this.source,i=t.width/e.width,n=t.height/e.height,r=this.offsetX/e.width,o=this.offsetY/e.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,o&&(n+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,r&&(i+=Math.abs(r))),t.src?a=t.src:t.toDataURL&&(a=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if(void 0!==t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}}),function(e){var t=e.fabric||(e.fabric={}),i=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var i in"string"==typeof e&&(e=this._parseShadow(e)),e)this[i]=e[i];this.id=t.Object.__uid++},_parseShadow:function(e){var i=e.trim(),n=t.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var n=40,r=40,o=t.Object.NUM_FRACTION_DIGITS,a=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),s=new t.Color(this.color);return e.width&&e.height&&(n=100*i((Math.abs(a.x)+this.blur)/e.width,o)+20,r=100*i((Math.abs(a.y)+this.blur)/e.height,o)+20),e.flipX&&(a.x*=-1),e.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(a.x,o)+'" dy="'+i(a.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},i=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==i[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){if(b.StaticCanvas)b.warn("fabric.StaticCanvas is already defined.");else{var e=b.util.object.extend,t=b.util.getElementOffset,i=b.util.removeFromArray,n=b.util.toFixed,r=b.util.transformPoint,o=b.util.invertTransform,a=b.util.getNodeCanvas,s=b.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");b.StaticCanvas=b.util.createClass(b.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:b.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,i),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,i),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,i),t.overlayColor&&this.setOverlayColor(t.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return b.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,b.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=b.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,i){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),i.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,i){return this.__setBgOverlayImage("overlayImage",e,t,i)},setBackgroundImage:function(e,t,i){return this.__setBgOverlayImage("backgroundImage",e,t,i)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,i,n){return"string"==typeof t?b.util.loadImage(t,(function(t,r){if(t){var o=new b.Image(t,n);this[e]=o,o.canvas=this}i&&i(t,r)}),this,n&&n.crossOrigin):(n&&t.setOptions(n),this[e]=t,t&&(t.canvas=this),i&&i(t,!1)),this},__setBgOverlayColor:function(e,t,i){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,i),this},_createCanvasElement:function(){var e=s();if(!e)throw l;if(e.style||(e.style={}),void 0===e.getContext)throw l;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=b.util.getById(e)||this._createCanvasElement(),b.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var i;for(var n in t=t||{},e)i=e[n],t.cssOnly||(this._setBackstoreDimension(n,e[n]),i+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(n,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,i,n,r=this._activeObject,o=this.backgroundImage,a=this.overlayImage;for(this.viewportTransform=e,i=0,n=this._objects.length;i<n;i++)(t=this._objects[i]).group||t.setCoords(!0);return r&&r.setCoords(),o&&o.setCoords(!0),a&&a.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var i=e,n=this.viewportTransform.slice(0);e=r(e,o(this.viewportTransform)),n[0]=t,n[3]=t;var a=r(e,n);return n[4]+=i.x-a.x,n[5]+=i.y-a.y,this.setViewportTransform(n)},setZoom:function(e){return this.zoomToPoint(new b.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new b.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=b.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,i=this.height,n=o(this.viewportTransform);return e.tl=r({x:0,y:0},n),e.br=r({x:t,y:i},n),e.tr=new b.Point(e.br.x,e.tl.y),e.bl=new b.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(b.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var i=this.viewportTransform,n=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),b.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),n&&(n.canvas=this,n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,i=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",i.transform(e),e.scale(1/i.zoomX,1/i.zoomY),e.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var i,n;for(i=0,n=t.length;i<n;++i)t[i]&&t[i].render(e)},_renderBackgroundOrOverlay:function(e,t){var i=this[t+"Color"],n=this[t+"Image"],r=this.viewportTransform,o=this[t+"Vpt"];if(i||n){if(i){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=i.toLive?i.toLive(e,this):i,o&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),e.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);var a=i.gradientTransform||i.patternTransform;a&&e.transform(a[0],a[1],a[2],a[3],a[4],a[5]),e.fill(),e.restore()}n&&(e.save(),o&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),n.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new b.Point(this.width/2,this.height/2)},centerObjectH:function(e){return this._centerObject(e,new b.Point(this.getCenterPoint().x,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new b.Point(e.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(e){var t=this.getCenterPoint();return this._centerObject(e,t)},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new b.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new b.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenterPoint(),t=o(this.viewportTransform);return r(e,t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,i){var n=this.clipPath,r={version:b.version,objects:this._toObjects(t,i)};return n&&!n.excludeFromExport&&(r.clipPath=this._toObject(this.clipPath,t,i)),e(r,this.__serializeBgOverlay(t,i)),b.util.populateWithProperties(this,r,i),r},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(i){return this._toObject(i,e,t)}),this)},_toObject:function(e,t,i){var n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);var r=e[t](i);return this.includeDefaultValues||(e.includeDefaultValues=n),r},__serializeBgOverlay:function(e,t){var i={},n=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return o&&o.toObject?o.excludeFromExport||(i.background=o.toObject(t)):o&&(i.background=o),a&&a.toObject?a.excludeFromExport||(i.overlay=a.toObject(t)):a&&(i.overlay=a),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,e,t)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,e,t)),i},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var i=[];return this._setSVGPreamble(i,e),this._setSVGHeader(i,e),this.clipPath&&i.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",t),this._setSVGObjects(i,t),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",t),i.push("</svg>"),i.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var i,r=t.width||this.width,o=t.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',s=b.Object.NUM_FRACTION_DIGITS;t.viewBox?a='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,a='viewBox="'+n(-i[4]/i[0],s)+" "+n(-i[5]/i[3],s)+" "+n(this.width/i[0],s)+" "+n(this.height/i[3],s)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',o,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",b.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+b.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this,t=["background","overlay"].map((function(t){var i=e[t+"Color"];if(i&&i.toLive){var n=e[t+"Vpt"],r=e.viewportTransform,o={width:e.width/(n?r[0]:1),height:e.height/(n?r[3]:1)};return i.toSVG(o,{additionalTransform:n?b.util.matrixToSVG(r):""})}}));return t.join("")},createSVGFontFacesMarkup:function(){var e,t,i,n,r,o,a,s,l="",c={},u=b.fontPaths,d=[];for(this._objects.forEach((function e(t){d.push(t),t._objects&&t._objects.forEach(e)})),a=0,s=d.length;a<s;a++)if(t=(e=d[a]).fontFamily,-1!==e.type.indexOf("text")&&!c[t]&&u[t]&&(c[t]=!0,e.styles))for(r in i=e.styles)for(o in n=i[r])!c[t=n[o].fontFamily]&&u[t]&&(c[t]=!0);for(var h in c)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",h,"';\n","\t\t\tsrc: url('",u[h],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(e,t){var i,n,r,o=this._objects;for(n=0,r=o.length;n<r;n++)(i=o[n]).excludeFromExport||this._setSVGObject(e,i,t)},_setSVGObject:function(e,t,i){e.push(t.toSVG(i))},_setSVGBgOverlayImage:function(e,t,i){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(i))},_setSVGBgOverlayColor:function(e,t){var i=this[t+"Color"],n=this.viewportTransform,r=this.width,o=this.height;if(i)if(i.toLive){var a=i.repeat,s=b.util.invertTransform(n),l=this[t+"Vpt"]?b.util.matrixToSVG(s):"";e.push('<rect transform="'+l+" translate(",r/2,",",o/2,')"',' x="',i.offsetX-r/2,'" y="',i.offsetY-o/2,'" ','width="',"repeat-y"===a||"no-repeat"===a?i.source.width:r,'" height="',"repeat-x"===a||"no-repeat"===a?i.source.height:o,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,n,r,o=this._activeObject;if(e===o&&"activeSelection"===e.type)for(t=(r=o._objects).length;t--;)n=r[t],i(this._objects,n),this._objects.unshift(n);else i(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,n,r,o=this._activeObject;if(e===o&&"activeSelection"===e.type)for(r=o._objects,t=0;t<r.length;t++)n=r[t],i(this._objects,n),this._objects.push(n);else i(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var n,r,o,a,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(s=l._objects,n=0;n<s.length;n++)r=s[n],(o=this._objects.indexOf(r))>0+c&&(a=o-1,i(this._objects,r),this._objects.splice(a,0,r)),c++;else 0!==(o=this._objects.indexOf(e))&&(a=this._findNewLowerIndex(e,o,t),i(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,i){var n,r;if(i){for(n=t,r=t-1;r>=0;--r)if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){n=r;break}}else n=t-1;return n},bringForward:function(e,t){if(!e)return this;var n,r,o,a,s,l=this._activeObject,c=0;if(e===l&&"activeSelection"===e.type)for(n=(s=l._objects).length;n--;)r=s[n],(o=this._objects.indexOf(r))<this._objects.length-1-c&&(a=o+1,i(this._objects,r),this._objects.splice(a,0,r)),c++;else(o=this._objects.indexOf(e))!==this._objects.length-1&&(a=this._findNewUpperIndex(e,o,t),i(this._objects,e),this._objects.splice(a,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,i){var n,r,o;if(i){for(n=t,r=t+1,o=this._objects.length;r<o;++r)if(e.intersectsWithObject(this._objects[r])||e.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(e)){n=r;break}}else n=t+1;return n},moveTo:function(e,t){return i(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(b.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),b.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),b.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(b.StaticCanvas.prototype,b.Observable),e(b.StaticCanvas.prototype,b.Collection),e(b.StaticCanvas.prototype,b.DataURLExporter),e(b.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=s();if(!t||!t.getContext)return null;var i=t.getContext("2d");return i&&"setLineDash"===e?void 0!==i.setLineDash:null}}),b.StaticCanvas.prototype.toJSON=b.StaticCanvas.prototype.toObject,b.isLikelyNode&&(b.StaticCanvas.prototype.createPNGStream=function(){var e=a(this.lowerCanvasEl);return e&&e.createPNGStream()},b.StaticCanvas.prototype.createJPEGStream=function(e){var t=a(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),b.BaseBrush=b.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,i=e.contextTop,n=e.getZoom();e&&e._isRetinaScaling()&&(n*=b.devicePixelRatio),i.shadowColor=t.color,i.shadowBlur=t.blur*n,i.shadowOffsetX=t.offsetX*n,i.shadowOffsetY=t.offsetY*n}},needsFullRender:function(){return new b.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),b.PencilBrush=b.util.createClass(b.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(e){this.canvas=e,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(e,t,i){var n=t.midPointFrom(i);return e.quadraticCurveTo(t.x,t.y,n.x,n.y),n},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,n=i.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,i[n-2],i[n-1],!0),r.stroke(),r.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new b.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(e){var t=new b.Point(e.x,e.y);return this._addPoint(t)},_render:function(e){var t,i,n=this._points[0],r=this._points[1];if(e=e||this.canvas.contextTop,this._saveAndTransform(e),e.beginPath(),2===this._points.length&&n.x===r.x&&n.y===r.y){var o=this.width/1e3;n=new b.Point(n.x,n.y),r=new b.Point(r.x,r.y),n.x-=o,r.x+=o}for(e.moveTo(n.x,n.y),t=1,i=this._points.length;t<i;t++)this._drawSegment(e,n,r),n=this._points[t],r=this._points[t+1];e.lineTo(n.x,n.y),e.stroke(),e.restore()},convertPointsToSVGPath:function(e){var t=this.width/1e3;return b.util.getSmoothPathFromPoints(e,t)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===b.util.joinPath(e)},createPath:function(e){var t=new b.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new b.Shadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var i,n=this.canvas.getZoom(),r=Math.pow(t/n,2),o=e.length-1,a=e[0],s=[a];for(i=1;i<o-1;i++)Math.pow(a.x-e[i].x,2)+Math.pow(a.y-e[i].y,2)>=r&&(a=e[i],s.push(a));return s.push(e[o]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}}),b.CircleBrush=b.util.createClass(b.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,t),i.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,i=this.canvas.contextTop,n=this.points;for(this._saveAndTransform(i),e=0,t=n.length;e<t;e++)this.dot(i,n[e]);i.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,t,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var n=[];for(e=0,t=this.points.length;e<t;e++){var r=this.points[e],o=new b.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(o.shadow=new b.Shadow(this.shadow)),n.push(o)}var a=new b.Group(n);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(e){var t=new b.Point(e.x,e.y),i=b.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new b.Color(this.color).setAlpha(b.util.getRandomInt(0,100)/100).toRgba();return t.radius=i,t.fill=n,this.points.push(t),t}}),b.SprayBrush=b.util.createClass(b.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],o=0,a=r.length;o<a;o++){var s=new b.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});t.push(s)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var l=new b.Group(t);this.shadow&&l.set("shadow",new b.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,i,n,r={};for(i=0,n=e.length;i<n;i++)r[t=e[i].left+""+e[i].top]||(r[t]=e[i]);var o=[];for(t in r)o.push(r[t]);return o},render:function(e){var t,i,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,i=e.length;t<i;t++){var r=e[t];void 0!==r.opacity&&(n.globalAlpha=r.opacity),n.fillRect(r.x,r.y,r.width,r.width)}n.restore()},_render:function(){var e,t,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);i.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,i,n,r,o=this.width/2;for(r=0;r<this.density;r++){t=b.util.getRandomInt(e.x-o,e.x+o),i=b.util.getRandomInt(e.y-o,e.y+o),n=this.dotWidthVariance?b.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new b.Point(t,i);a.width=n,this.randomOpacity&&(a.opacity=b.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),b.PatternBrush=b.util.createClass(b.PencilBrush,{getPatternSrc:function(){var e=b.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(e){this.callSuper("_setBrushStyles",e),e.strokeStyle=this.getPattern(e)},createPath:function(e){var t=this.callSuper("createPath",e),i=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new b.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),t}}),function(){var e=b.util.getPointer,t=b.util.degreesToRadians,i=b.util.isTouchEvent;for(var n in b.Canvas=b.util.createClass(b.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=b.PencilBrush&&new b.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,i,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){t=[],i=[];for(var r=0,o=this._objects.length;r<o;r++)e=this._objects[r],-1===n.indexOf(e)?t.push(e):i.push(e);n.length>1&&(this._activeObject._objects=i),t.push.apply(t,i)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){var i=e.calcTransformMatrix(),n=b.util.invertTransform(i),r=this.restorePointerVpt(t);return b.util.transformPoint(r,n)},isTargetTransparent:function(e,t,i){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var n=this._normalizePointer(e,{x:t,y:i}),r=Math.max(e.cacheTranslationX+n.x*e.zoomX,0),o=Math.max(e.cacheTranslationY+n.y*e.zoomY,0);return b.util.isTransparent(e._cacheContext,Math.round(r),Math.round(o),this.targetFindTolerance)}var a=this.contextCache,s=e.selectionBackgroundColor,l=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(a),a.save(),a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),e.render(a),a.restore(),e.selectionBackgroundColor=s,b.util.isTransparent(a,t,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var i=this.getActiveObjects(),n=this._activeObject;return!t||t&&n&&i.length>1&&-1===i.indexOf(t)&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t},_shouldCenterTransform:function(e,t,i){var n;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?n=this.centeredScaling||e.centeredScaling:"rotate"===t&&(n=this.centeredRotation||e.centeredRotation),n?!i:i},_getOriginFromCorner:function(e,t){var i={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?i.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(i.x="left"),"tl"===t||"mt"===t||"tr"===t?i.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(i.y="top"),i},_getActionFromCorner:function(e,t,i,n){if(!t||!e)return"drag";var r=n.controls[t];return r.getActionName(i,r,n)},_setupCurrentTransform:function(e,i,n){if(i){var r=this.getPointer(e),o=i.__corner,a=i.controls[o],s=n&&o?a.getActionHandler(e,i,a):b.controlsUtils.dragHandler,l=this._getActionFromCorner(n,o,e,i),c=this._getOriginFromCorner(i,o),u=e[this.centeredKey],d={target:i,action:l,actionHandler:s,corner:o,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:r.x-i.left,offsetY:r.y-i.top,originX:c.x,originY:c.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:t(i.angle),width:i.width*i.scaleX,shiftKey:e.shiftKey,altKey:u,original:b.util.saveObjectTransform(i)};this._shouldCenterTransform(i,l,u)&&(d.originX="center",d.originY="center"),d.original.originX=c.x,d.original.originY=c.y,this._currentTransform=d,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,i=new b.Point(t.ex,t.ey),n=b.util.transformPoint(i,this.viewportTransform),r=new b.Point(t.ex+t.left,t.ey+t.top),o=b.util.transformPoint(r,this.viewportTransform),a=Math.min(n.x,o.x),s=Math.min(n.y,o.y),l=Math.max(n.x,o.x),c=Math.max(n.y,o.y),u=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(a,s,l-a,c-s)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,a+=u,s+=u,l-=u,c-=u,b.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(a,s,l-a,c-s))},findTarget:function(e,t){if(!this.skipTargetFind){var n,r,o=this.getPointer(e,!0),a=this._activeObject,s=this.getActiveObjects(),l=i(e),c=s.length>1&&!t||1===s.length;if(this.targets=[],c&&a._findTargetCorner(o,l))return a;if(s.length>1&&!t&&a===this._searchPossibleTargets([a],o))return a;if(1===s.length&&a===this._searchPossibleTargets([a],o)){if(!this.preserveObjectStacking)return a;n=a,r=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,o);return e[this.altSelectionKey]&&u&&n&&u!==n&&(u=n,this.targets=r),u}},_checkTarget:function(e,t,i){if(t&&t.visible&&t.evented&&t.containsPoint(e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,i.x,i.y))return!0}},_searchPossibleTargets:function(e,t){for(var i,n,r=e.length;r--;){var o=e[r],a=o.group?this._normalizePointer(o.group,t):t;if(this._checkTarget(a,o,t)){(i=e[r]).subTargetCheck&&i instanceof b.Group&&(n=this._searchPossibleTargets(i._objects,t))&&this.targets.push(n);break}}return i},restorePointerVpt:function(e){return b.util.transformPoint(e,b.util.invertTransform(this.viewportTransform))},getPointer:function(t,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var n,r=e(t),o=this.upperCanvasEl,a=o.getBoundingClientRect(),s=a.width||0,l=a.height||0;s&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,i||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),n=0===s||0===l?{width:1,height:1}:{width:o.width/s,height:o.height/l},{x:r.x*n.width,y:r.y*n.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),b.util.addClass(i,"upper-canvas "+e),this.wrapperEl.appendChild(i),this._copyCanvasStyle(t,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=b.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),b.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),b.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,i=this.height||e.height;b.util.setStyle(e,{position:"absolute",width:t+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=i,b.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var i=!1,n=this.getActiveObjects(),r=[],o=[];e.forEach((function(e){-1===n.indexOf(e)&&(i=!0,e.fire("deselected",{e:t,target:e}),o.push(e))})),n.forEach((function(n){-1===e.indexOf(n)&&(i=!0,n.fire("selected",{e:t,target:n}),r.push(n))})),e.length>0&&n.length>0?i&&this.fire("selection:updated",{e:t,selected:r,deselected:o}):n.length>0?this.fire("selection:created",{e:t,selected:r}):e.length>0&&this.fire("selection:cleared",{e:t,deselected:o})},setActiveObject:function(e,t){var i=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(i,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&!!this._discardActiveObject(t,e)&&!e.onSelect({e:t})&&(this._activeObject=e,!0)},_discardActiveObject:function(e,t){var i=this._activeObject;if(i){if(i.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),i=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:i,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){b.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,b.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,i){var n=this._realizeGroupTransformOnObject(e),r=this.callSuper("_toObject",e,t,i);return this._unwindGroupTransformOnObject(e,n),r},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(i){t[i]=e[i]})),b.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,i){var n=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,i),this._unwindGroupTransformOnObject(t,n)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),b.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),b.StaticCanvas)"prototype"!==n&&(b.Canvas[n]=b.StaticCanvas[n])}(),function(){var e=b.util.addListener,t=b.util.removeListener,i={passive:!1};function n(e,t){return e.button&&e.button===t-1}b.util.object.extend(b.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var n=this.upperCanvasEl,r=this._getEventPrefix();e(b.window,"resize",this._onResize),e(n,r+"down",this._onMouseDown),e(n,r+"move",this._onMouseMove,i),e(n,r+"out",this._onMouseOut),e(n,r+"enter",this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,i),"undefined"!=typeof eventjs&&t in eventjs&&(eventjs[t](n,"gesture",this._onGesture),eventjs[t](n,"drag",this._onDrag),eventjs[t](n,"orientation",this._onOrientationChange),eventjs[t](n,"shake",this._onShake),eventjs[t](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(t,"remove");var e=this._getEventPrefix();t(b.document,e+"up",this._onMouseUp),t(b.document,"touchend",this._onTouchEnd,i),t(b.document,e+"move",this._onMouseMove,i),t(b.document,"touchmove",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var i=this;this._hoveredTargets.forEach((function(n){i.fire("mouse:out",{target:t,e:e}),n&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[]},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onDrop:function(e){return this._simpleEventHandler("drop:before",e),this._simpleEventHandler("drop",e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(n){n.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(b.document,"touchend",this._onTouchEnd,i),e(b.document,"touchmove",this._onMouseMove,i),t(r,o+"down",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();t(r,o+"move",this._onMouseMove,i),e(b.document,o+"up",this._onMouseUp),e(b.document,o+"move",this._onMouseMove,i)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();t(b.document,"touchend",this._onTouchEnd,i),t(b.document,"touchmove",this._onMouseMove,i);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){e(o.upperCanvasEl,r+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(n)&&(t(b.document,o+"up",this._onMouseUp),t(b.document,o+"move",this._onMouseMove,i),e(r,o+"move",this._onMouseMove,i))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!=!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,i=this._currentTransform,r=this._groupSelector,o=!1,a=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),n(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,a);else{if(n(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,a),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else if(this._isMainEvent(e)){if(i&&(this._finalizeCurrentTransform(e),o=i.actionPerformed),!a){var s=t===this._activeObject;this._maybeGroupObjects(e),o||(o=this._shouldRender(t)||!s&&t===this._activeObject)}var l,c;if(t){if(l=t._findTargetCorner(this.getPointer(e,!0),b.util.isTouchEvent(e)),t.selectable&&t!==this._activeObject&&"up"===t.activeOn)this.setActiveObject(t,e),o=!0;else{var u=t.controls[l],d=u&&u.getMouseUpHandler(e,t,u);d&&d(e,i,(c=this.getPointer(e)).x,c.y)}t.isMoving=!1}if(i&&(i.target!==t||i.corner!==l)){var h=i.target&&i.target.controls[i.corner],p=h&&h.getMouseUpHandler(e,t,u);c=c||this.getPointer(e),p&&p(e,i,c.x,c.y)}this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,a),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),o?this.requestRenderAll():a||this.renderTop()}}},_simpleEventHandler:function(e,t){var i=this.findTarget(t),n=this.targets,r={e:t,target:i,subTargets:n};if(this.fire(e,r),i&&i.fire(e,r),!n)return i;for(var o=0;o<n.length;o++)n[o].fire(e,r);return i},_handleEvent:function(e,t,i,n){var r=this._target,o=this.targets||[],a={e:e,target:r,subTargets:o,button:i||1,isClick:n||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(a.currentTarget=this.findTarget(e),a.currentSubTargets=this.targets),this.fire("mouse:"+t,a),r&&r.fire("mouse"+t,a);for(var s=0;s<o.length;s++)o[s].fire("mouse"+t,a)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,i=t.target,n={e:e,target:i,transform:t,action:t.action};i._scaling&&(i._scaling=!1),i.setCoords(),(t.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire("modified",n)},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(n(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(n(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var r=this._shouldRender(t),o=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):o&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),t){var a=t===this._activeObject;t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);var s=t._findTargetCorner(this.getPointer(e,!0),b.util.isTouchEvent(e));if(t.__corner=s,t===this._activeObject&&(s||!o)){this._setupCurrentTransform(e,t,a);var l=t.controls[s],c=(i=this.getPointer(e),l&&l.getMouseDownHandler(e,t,l));c&&c(e,this._currentTransform,i.x,i.y)}}this._handleEvent(e,"down"),(r||o)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,i;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var n=this._groupSelector;n?(i=this._absolutePointer,n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var i=this._hoveredTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(r[a],t,{oldTarget:n[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var i=this._draggedoverTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(r[a],t,{oldTarget:n[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,i){var n,r,o,a=i.oldTarget,s=a!==e,l=i.canvasEvtIn,c=i.canvasEvtOut;s&&(n={e:t,target:e,previousTarget:a},r={e:t,target:a,nextTarget:e}),o=e&&s,a&&s&&(c&&this.fire(c,r),a.fire(i.evtOut,r)),o&&(l&&this.fire(l,n),e.fire(i.evtIn,n))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),i=this._currentTransform;i.reset=!1,i.shiftKey=e.shiftKey,i.altKey=e[this.centeredKey],this._performTransformAction(e,i,t),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,i){var n=i.x,r=i.y,o=t.action,a=!1,s=t.actionHandler;s&&(a=s(e,t,n,r)),"drag"===o&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a},_fire:b.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var i=t.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!n||!n.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));r?this.setCursor(this.getCornerCursor(r,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){i=e.hoverCursor||i})),this.setCursor(i))},getCornerCursor:function(e,t,i){var n=t.controls[e];return n.cursorStyleHandler(i,n,t)}})}(),function(){var e=Math.min,t=Math.max;b.util.object.extend(b.Canvas.prototype,{_shouldGroup:function(e,t){var i=this._activeObject;return i&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(i!==t||"activeSelection"===i.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var i=this._activeObject;i.__corner||(t!==i||(t=this.findTarget(e,!0))&&t.selectable)&&(i&&"activeSelection"===i.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var i=this._activeObject,n=i._objects.slice(0);i.contains(e)?(i.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),t)):(i.addWithUpdate(e),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,t)},_createActiveSelection:function(e,t){var i=this.getActiveObjects(),n=this._createGroup(e);this._hoveredTarget=n,this._setActiveObject(n,t),this._fireSelectionEvents(i,t)},_createGroup:function(e){var t=this._objects,i=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new b.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(e){var t,i=this._collectObjects(e);1===i.length?this.setActiveObject(i[0],e):i.length>1&&(t=new b.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(i){for(var n,r=[],o=this._groupSelector.ex,a=this._groupSelector.ey,s=o+this._groupSelector.left,l=a+this._groupSelector.top,c=new b.Point(e(o,s),e(a,l)),u=new b.Point(t(o,s),t(a,l)),d=!this.selectionFullyContained,h=o===s&&a===l,p=this._objects.length;p--&&!((n=this._objects[p])&&n.selectable&&n.visible&&(d&&n.intersectsWithRect(c,u,!0)||n.isContainedWithinRect(c,u,!0)||d&&n.containsPoint(c,null,!0)||d&&n.containsPoint(u,null,!0))&&(r.push(n),h)););return r.length>1&&(r=r.filter((function(e){return!e.onSelect({e:i})}))),r},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),b.util.object.extend(b.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",i=e.quality||1,n=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(n,e);return b.util.toDataURL(r,t,i)},toCanvasElement:function(e,t){e=e||1;var i=((t=t||{}).width||this.width)*e,n=(t.height||this.height)*e,r=this.getZoom(),o=this.width,a=this.height,s=r*e,l=this.viewportTransform,c=(l[4]-(t.left||0))*e,u=(l[5]-(t.top||0))*e,d=this.interactive,h=[s,0,0,s,c,u],p=this.enableRetinaScaling,f=b.util.createCanvasElement(),g=this.contextTop;return f.width=i,f.height=n,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=h,this.width=i,this.height=n,this.calcViewportBoundaries(),this.renderCanvas(f.getContext("2d"),this._objects),this.viewportTransform=l,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=p,this.contextTop=g,f}}),b.util.object.extend(b.StaticCanvas.prototype,{loadFromJSON:function(e,t,i){if(e){var n="string"==typeof e?JSON.parse(e):b.util.object.clone(e),r=this,o=n.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete n.clipPath,this._enlivenObjects(n.objects,(function(e){r.clear(),r._setBgOverlay(n,(function(){o?r._enlivenObjects([o],(function(i){r.clipPath=i[0],r.__setupCanvas.call(r,n,e,a,t)})):r.__setupCanvas.call(r,n,e,a,t)}))}),i),this}},__setupCanvas:function(e,t,i,n){var r=this;t.forEach((function(e,t){r.insertAt(e,t)})),this.renderOnAddRemove=i,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),n&&n()},_setBgOverlay:function(e,t){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,i,n),this.__setBgOverlay("overlayImage",e.overlayImage,i,n),this.__setBgOverlay("backgroundColor",e.background,i,n),this.__setBgOverlay("overlayColor",e.overlay,i,n)}else t&&t()},__setBgOverlay:function(e,t,i,n){var r=this;if(!t)return i[e]=!0,void(n&&n());"backgroundImage"===e||"overlayImage"===e?b.util.enlivenObjects([t],(function(t){r[e]=t[0],i[e]=!0,n&&n()})):this["set"+b.util.string.capitalize(e,!0)](t,(function(){i[e]=!0,n&&n()}))},_enlivenObjects:function(e,t,i){e&&0!==e.length?b.util.enlivenObjects(e,(function(e){t&&t(e)}),null,i):t&&t([])},_toDataURL:function(e,t){this.clone((function(i){t(i.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,i){this.clone((function(n){i(n.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var i=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(i,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=b.util.createCanvasElement();t.width=this.width,t.height=this.height;var i=new b.Canvas(t);this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,(function(){i.renderAll(),e&&e(i)})),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):e&&e(i)}}),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.object.clone,r=t.util.toFixed,o=t.util.string.capitalize,a=t.util.degreesToRadians,s=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var i=t.perfLimitSizeTotal,n=e.width,r=e.height,o=t.maxCacheSideLimit,a=t.minCacheSideLimit;if(n<=o&&r<=o&&n*r<=i)return n<a&&(e.width=a),r<a&&(e.height=a),e;var s=n/r,l=t.util.limitDimsByArea(s,i),c=t.util.capValue,u=c(a,l.x,o),d=c(a,l.y,o);return n>u&&(e.zoomX/=n/u,e.width=u,e.capped=!0),r>d&&(e.zoomY/=r/d,e.height=d,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),i=t.x*e.scaleX/this.scaleX,n=t.y*e.scaleY/this.scaleY;return{width:i+2,height:n+2,zoomX:e.scaleX,zoomY:e.scaleY,x:i,y:n}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var i=e._currentTransform.target,n=e._currentTransform.action;if(this===i&&n.slice&&"scale"===n.slice(0,5))return!1}var r,o,a=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=t.minCacheSideLimit,c=s.width,u=s.height,d=s.zoomX,h=s.zoomY,p=c!==this.cacheWidth||u!==this.cacheHeight,f=this.zoomX!==d||this.zoomY!==h,g=p||f,v=0,m=0,A=!1;if(p){var b=this._cacheCanvas.width,y=this._cacheCanvas.height,x=c>b||u>y;A=x||(c<.9*b||u<.9*y)&&b>l&&y>l,x&&!s.capped&&(c>l||u>l)&&(v=.1*c,m=.1*u)}return this instanceof t.Text&&this.path&&(g=!0,A=!0,v+=this.getHeightOfLine(0)*this.zoomX,m+=this.getHeightOfLine(0)*this.zoomY),!!g&&(A?(a.width=Math.ceil(c+v),a.height=Math.ceil(u+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),r=s.x/2,o=s.y/2,this.cacheTranslationX=Math.round(a.width/2-r)+r,this.cacheTranslationY=Math.round(a.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(d,h),this.zoomX=d,this.zoomY=h,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,i=this.calcTransformMatrix(!t);e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},toObject:function(e){var i=t.Object.NUM_FRACTION_DIGITS,n={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,i),skewY:r(this.skewY,i)};return this.clipPath&&!this.clipPath.excludeFromExport&&(n.clipPath=this.clipPath.toObject(e),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,n,e),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var i=t.util.getKlass(e.type).prototype;return i.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===i[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(i[t])&&0===e[t].length&&0===i[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,i=e.scaleY;if(this.canvas){var n=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();t*=n*r,i*=n*r}return{scaleX:t,scaleY:i}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,i){var n="scaleX"===e||"scaleY"===e,r=this[e]!==i,o=!1;return n&&(i=this._constrainScale(i)),"scaleX"===e&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===e&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==e||!i||i instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",i):i=new t.Shadow(i),this[e]=i,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e,i){if(e.save(),i.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",i.absolutePositioned){var n=t.util.invertTransform(this.calcTransformMatrix());e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}i.transform(e),e.scale(1/i.zoomX,1/i.zoomY),e.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),e.restore()},drawObject:function(e,t){var i=this.fill,n=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=i,this.stroke=n},_drawClipPath:function(e,t){t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!e){var t=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-i/2,t,i)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var i=t.stroke;i&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(e,i):(e.strokeStyle=i.toLive(e,this),this._applyPatternGradientTransform(e,i)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var i=t.fill;i&&(i.toLive?(e.fillStyle=i.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=i)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),e.setLineDash(t))},_renderControls:function(e,i){var n,r,o,s=this.getViewportTransform(),l=this.calcTransformMatrix();r=void 0!==(i=i||{}).hasBorders?i.hasBorders:this.hasBorders,o=void 0!==i.hasControls?i.hasControls:this.hasControls,l=t.util.multiplyTransformMatrices(s,l),n=t.util.qrDecompose(l),e.save(),e.translate(n.translateX,n.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(n.angle-=180),e.rotate(a(this.group?n.angle:this.angle)),i.forActiveSelection||this.group?r&&this.drawBordersInGroup(e,n,i):r&&this.drawBorders(e,i),o&&this.drawControls(e,i),e.restore()},_setShadow:function(e){if(this.shadow){var i,n=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,a=r&&r.viewportTransform[3]||1;i=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=t.devicePixelRatio,a*=t.devicePixelRatio),e.shadowColor=n.color,e.shadowBlur=n.blur*t.browserShadowBlurConstant*(o+a)*(i.scaleX+i.scaleY)/4,e.shadowOffsetX=n.offsetX*o*i.scaleX,e.shadowOffsetY=n.offsetY*a*i.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var i=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,r=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,n,r):e.transform(1,0,0,1,n,r),i&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:n,offsetY:r}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,i){var n,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=t.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=r.x/this.scaleX/a,l=r.y/this.scaleY/a;o.width=s,o.height=l,(n=o.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(s,l),n.lineTo(0,l),n.closePath(),n.translate(s/2,l/2),n.scale(r.zoomX/this.scaleX/a,r.zoomY/this.scaleY/a),this._applyPatternGradientTransform(n,i),n.fillStyle=i.toLive(e),n.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(a*this.scaleX/r.zoomX,a*this.scaleY/r.zoomY),e.strokeStyle=n.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=t.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,i.x+=e.offsetLeft,i.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(i,"center","center")},clone:function(e,i){var n=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(n,e):t.Object._fromObject("Object",n,e)},cloneAsImage:function(e,i){var n=this.toCanvasElement(i);return e&&e(new t.Image(n)),this},toCanvasElement:function(e){e||(e={});var i=t.util,n=i.saveObjectTransform(this),r=this.group,o=this.shadow,a=Math.abs,s=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&i.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var l,c,u,d,h=t.util.createCanvasElement(),p=this.getBoundingRect(!0,!0),f=this.shadow,g={x:0,y:0};f&&(c=f.blur,l=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(a(f.offsetX)+c)*a(l.scaleX),g.y=2*Math.round(a(f.offsetY)+c)*a(l.scaleY)),u=p.width+g.x,d=p.height+g.y,h.width=Math.ceil(u),h.height=Math.ceil(d);var v=new t.StaticCanvas(h,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(v.width/2,v.height/2),"center","center");var m=this.canvas;v.add(this);var A=v.toCanvasElement(s||1,e);return this.shadow=o,this.set("canvas",m),r&&(this.group=r),this.set(n).setCoords(),v._objects=[],v.dispose(),v=null,A},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,i){i=i||this.canvas.getPointer(e);var n=new t.Point(i.x,i.y),r=this._getLeftTopCoords();return this.angle&&(n=t.util.rotatePoint(n,r,a(-this.angle))),{x:n.x-r.x,y:n.y-r.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){t.runningAnimations&&t.runningAnimations.cancelByTarget(this)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),i(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object.ENLIVEN_PROPS=["clipPath"],t.Object._fromObject=function(e,i,r,o){var a=t[e];i=n(i,!0),t.util.enlivenPatterns([i.fill,i.stroke],(function(e){void 0!==e[0]&&(i.fill=e[0]),void 0!==e[1]&&(i.stroke=e[1]),t.util.enlivenObjectEnlivables(i,i,(function(){var e=o?new a(i[o],i):new a(i);r&&r(e)}))}))},t.Object.__uid=0)}(e),v=b.util.degreesToRadians,m={left:-.5,center:0,right:.5},A={top:-.5,center:0,bottom:.5},b.util.object.extend(b.Object.prototype,{translateToGivenOrigin:function(e,t,i,n,r){var o,a,s,l=e.x,c=e.y;return"string"==typeof t?t=m[t]:t-=.5,"string"==typeof n?n=m[n]:n-=.5,"string"==typeof i?i=A[i]:i-=.5,"string"==typeof r?r=A[r]:r-=.5,a=r-i,((o=n-t)||a)&&(s=this._getTransformedDimensions(),l=e.x+o*s.x,c=e.y+a*s.y),new b.Point(l,c)},translateToCenterPoint:function(e,t,i){var n=this.translateToGivenOrigin(e,t,i,"center","center");return this.angle?b.util.rotatePoint(n,e,v(this.angle)):n},translateToOriginPoint:function(e,t,i){var n=this.translateToGivenOrigin(e,"center","center",t,i);return this.angle?b.util.rotatePoint(n,e,v(this.angle)):n},getCenterPoint:function(){var e=new b.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var i=this.getCenterPoint();return this.translateToOriginPoint(i,e,t)},toLocalPoint:function(e,t,i){var n,r,o=this.getCenterPoint();return n=void 0!==t&&void 0!==i?this.translateToGivenOrigin(o,"center","center",t,i):new b.Point(this.left,this.top),r=new b.Point(e.x,e.y),this.angle&&(r=b.util.rotatePoint(r,o,-v(this.angle))),r.subtractEquals(n)},setPositionByOrigin:function(e,t,i){var n=this.translateToCenterPoint(e,t,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(e){var t,i,n=v(this.angle),r=this.getScaledWidth(),o=b.util.cos(n)*r,a=b.util.sin(n)*r;t="string"==typeof this.originX?m[this.originX]:this.originX-.5,i="string"==typeof e?m[e]:e-.5,this.left+=o*(i-t),this.top+=a*(i-t),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var e=b.util,t=e.degreesToRadians,i=e.multiplyTransformMatrices,n=e.transformPoint;e.object.extend(b.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return i=this._getCoords(e,t),[new b.Point(i.tl.x,i.tl.y),new b.Point(i.tr.x,i.tr.y),new b.Point(i.br.x,i.br.y),new b.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(e,t,i,n){var r=this.getCoords(i,n);return"Intersection"===b.Intersection.intersectPolygonRectangle(r,e,t).status},intersectsWithObject:function(e,t,i){return"Intersection"===b.Intersection.intersectPolygonPolygon(this.getCoords(t,i),e.getCoords(t,i)).status||e.isContainedWithinObject(this,t,i)||this.isContainedWithinObject(e,t,i)},isContainedWithinObject:function(e,t,i){for(var n=this.getCoords(t,i),r=t?e.aCoords:e.lineCoords,o=0,a=e._getImageLines(r);o<4;o++)if(!e.containsPoint(n[o],a))return!1;return!0},isContainedWithinRect:function(e,t,i,n){var r=this.getBoundingRect(i,n);return r.left>=e.x&&r.left+r.width<=t.x&&r.top>=e.y&&r.top+r.height<=t.y},containsPoint:function(e,t,i,n){var r=this._getCoords(i,n),o=(t=t||this._getImageLines(r),this._findCrossPoints(e,t));return 0!==o&&o%2==1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some((function(e){return e.x<=i.x&&e.x>=t.x&&e.y<=i.y&&e.y>=t.y}))||!!this.intersectsWithRect(t,i,!0,e)||this._containsCenterOfCanvas(t,i,e)},_containsCenterOfCanvas:function(e,t,i){var n={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(n,null,!0,i)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,i,!0,e)||this.getCoords(!0,e).every((function(e){return(e.x>=i.x||e.x<=t.x)&&(e.y>=i.y||e.y<=t.y)}))&&this._containsCenterOfCanvas(t,i,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var i,n,r,o=0;for(var a in t)if(!((r=t[a]).o.y<e.y&&r.d.y<e.y||r.o.y>=e.y&&r.d.y>=e.y||(r.o.x===r.d.x&&r.o.x>=e.x?n=r.o.x:(i=(r.d.y-r.o.y)/(r.d.x-r.o.x),n=-(e.y-0*e.x-(r.o.y-i*r.o.x))/(0-i)),n>=e.x&&(o+=1),2!==o)))break;return o},getBoundingRect:function(t,i){var n=this.getCoords(t,i);return e.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var i=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/i)},scaleToHeight:function(e,t){var i=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/i)},calcLineCoords:function(){var i=this.getViewportTransform(),r=this.padding,o=t(this.angle),a=e.cos(o)*r,s=e.sin(o)*r,l=a+s,c=a-s,u=this.calcACoords(),d={tl:n(u.tl,i),tr:n(u.tr,i),bl:n(u.bl,i),br:n(u.br,i)};return r&&(d.tl.x-=c,d.tl.y-=l,d.tr.x+=l,d.tr.y-=c,d.bl.x-=l,d.bl.y+=c,d.br.x+=c,d.br.y+=l),d},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),n=this.getViewportTransform(),r=i(n,t),o=i(r,e),a=(o=i(o,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(e,t,i){s[t]=e.positionHandler(a,o,i)})),s},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),r=i(t,e),o=this._getTransformedDimensions(),a=o.x/2,s=o.y/2;return{tl:n({x:-a,y:-s},r),tr:n({x:a,y:-s},r),bl:n({x:-a,y:s},r),br:n({x:a,y:s},r)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",i="";return!e&&this.group&&(i=this.group.transformMatrixKey(e)+t),i+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var n=this.transformMatrixKey(e),r=this.matrixCache||(this.matrixCache={});return r.key===n?r.value:(this.group&&(t=i(this.group.calcTransformMatrix(!1),t)),r.key=n,r.value=t,t)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===t)return i.value;var n=this._calcTranslateMatrix(),r={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=t,i.value=e.composeMatrix(r),i.value},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(t,i){void 0===t&&(t=this.skewX),void 0===i&&(i=this.skewY);var n,r,o,a=0===t&&0===i;if(this.strokeUniform?(r=this.width,o=this.height):(r=(n=this._getNonTransformedDimensions()).x,o=n.y),a)return this._finalizeDimensions(r*this.scaleX,o*this.scaleY);var s=e.sizeAfterTransform(r,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:i});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return n(t,e,!0).scalarAdd(2*this.padding)}})}(),b.util.object.extend(b.Object.prototype,{sendToBack:function(){return this.group?b.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?b.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?b.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?b.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?b.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var i=new b.Color(t),n=e+": "+i.toRgb()+"; ",r=i.getAlpha();return 1!==r&&(n+=e+"-opacity: "+r.toString()+"; "),n}return e+": none; "}var t=b.util.toFixed;b.util.object.extend(b.Object.prototype,{getSvgStyles:function(t){var i=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",d=t?"":this.getSvgFilter(),h=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",h,"fill-rule: ",i,"; ","opacity: ",c,";",d,u].join("")},getSvgSpanStyles:function(t,i){var n="; ",r=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+n:"",o=t.strokeWidth?"stroke-width: "+t.strokeWidth+n:"",a=t.fontSize?"font-size: "+t.fontSize+"px"+n:"",s=t.fontStyle?"font-style: "+t.fontStyle+n:"",l=t.fontWeight?"font-weight: "+t.fontWeight+n:"",c=t.fill?e("fill",t.fill):"",u=t.stroke?e("stroke",t.stroke):"",d=this.getSvgTextDecoration(t);return d&&(d="text-decoration: "+d+n),[u,o,r,a,s,l,d,c,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",i?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var i=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+b.util.matrixToSVG(i)+(t||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var i=b.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,i),'" y="',t(-this.height/2,i),'" width="',t(this.width,i),'" height="',t(this.height,i),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var i=(t=t||{}).reviver,n=t.additionalTransform||"",r=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=e.indexOf("COMMON_PARTS");return e[o]=r,i?i(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var i,n,r=(t=t||{}).noStyle,o=t.reviver,a=r?"":'style="'+this.getSvgStyles()+'" ',s=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,d=this.stroke,h=this.fill,p=this.shadow,f=[],g=e.indexOf("COMMON_PARTS"),v=t.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+b.Object.__uid++,n='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(o)+"</clipPath>\n"),u&&f.push("<g ",s,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),u?"":s+this.getSvgCommons()," >\n"),i=[a,c,r?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),e[g]=i,h&&h.toLive&&f.push(h.toSVG(this)),d&&d.toLive&&f.push(d.toSVG(this)),p&&f.push(p.toSVG(this)),l&&f.push(n),f.push(e.join("")),f.push("</g>\n"),u&&f.push("</g>\n"),o?o(f.join("")):f.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=b.util.object.extend,t="stateProperties";function i(t,i,n){var r={};n.forEach((function(e){r[e]=t[e]})),e(t[i],r,!0)}function n(e,t,i){if(e===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0,o=e.length;r<o;r++)if(!n(e[r],t[r]))return!1;return!0}if(e&&"object"==typeof e){var a,s=Object.keys(e);if(!t||"object"!=typeof t||!i&&s.length!==Object.keys(t).length)return!1;for(r=0,o=s.length;r<o;r++)if("canvas"!==(a=s[r])&&"group"!==a&&!n(e[a],t[a]))return!1;return!0}}b.util.object.extend(b.Object.prototype,{hasStateChanged:function(e){var i="_"+(e=e||t);return Object.keys(this[i]).length<this[e].length||!n(this[i],this,!0)},saveState:function(e){var n=e&&e.propertySet||t,r="_"+n;return this[r]?(i(this,r,this[n]),e&&e.stateProperties&&i(this,r,e.stateProperties),this):this.setupState(e)},setupState:function(e){var i=(e=e||{}).propertySet||t;return e.propertySet=i,this["_"+i]={},this.saveState(e),this}})}(),function(){var e=b.util.degreesToRadians;b.util.object.extend(b.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,n,r,o=e.x,a=e.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(r=s[l],this.isControlVisible(r)&&(n=this._getImageLines(t?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(i=this._findCrossPoints({x:o,y:a},n))&&i%2==1))return this.__corner=r,r;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e=this.oCoords;for(var t in e){var i=this.controls[t];e[t].corner=i.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return t.translate(i.x,i.y),t.scale(1/r[0],1/r[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var i=this._calculateCurrentDimensions(),n=this.borderScaleFactor,r=i.x+n,o=i.y+n,a=void 0!==t.hasControls?t.hasControls:this.hasControls,s=!1;return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray),e.strokeRect(-r/2,-o/2,r,o),a&&(e.beginPath(),this.forEachControl((function(t,i,n){t.withConnection&&t.getVisibility(n,i)&&(s=!0,e.moveTo(t.x*r,t.y*o),e.lineTo(t.x*r+t.offsetX,t.y*o+t.offsetY))})),s&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,i){i=i||{};var n=b.util.sizeAfterTransform(this.width,this.height,t),r=this.strokeWidth,o=this.strokeUniform,a=this.borderScaleFactor,s=n.x+r*(o?this.canvas.getZoom():t.scaleX)+a,l=n.y+r*(o?this.canvas.getZoom():t.scaleY)+a;return e.save(),this._setLineDash(e,i.borderDashArray||this.borderDashArray),e.strokeStyle=i.borderColor||this.borderColor,e.strokeRect(-s/2,-l/2,s,l),e.restore(),this},drawControls:function(e,t){t=t||{},e.save();var i,n,r=this.canvas.getRetinaScaling();return e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl((function(r,o,a){n=a.oCoords[o],r.getVisibility(a,o)&&(i&&(n=b.util.transformPoint(n,i)),r.render(e,n.x,n.y,t,a))})),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),b.util.object.extend(b.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return b.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.requestRenderAll(),r()},onComplete:function(){e.setCoords(),n()}})},fxCenterObjectV:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return b.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.requestRenderAll(),r()},onComplete:function(){e.setCoords(),n()}})},fxRemove:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return b.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),o.requestRenderAll(),r()},onComplete:function(){o.remove(e),n()}})}}),b.util.object.extend(b.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var e,t,i=[],n=[];for(e in arguments[0])i.push(e);for(var r=0,o=i.length;r<o;r++)e=i[r],t=r!==o-1,n.push(this._animate(e,arguments[0][e],arguments[1],t));return n}return this._animate.apply(this,arguments)},_animate:function(e,t,i,n){var r,o=this;t=t.toString(),i=i?b.util.object.clone(i):{},~e.indexOf(".")&&(r=e.split("."));var a=o.colorProperties.indexOf(e)>-1||r&&o.colorProperties.indexOf(r[1])>-1,s=r?this.get(r[0])[r[1]]:this.get(e);"from"in i||(i.from=s),a||(t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t));var l={target:this,startValue:i.from,endValue:t,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(e,t,n){return i.abort.call(o,e,t,n)},onChange:function(t,a,s){r?o[r[0]][r[1]]=t:o.set(e,t),n||i.onChange&&i.onChange(t,a,s)},onComplete:function(e,t,r){n||(o.setCoords(),i.onComplete&&i.onComplete(e,t,r))}};return a?b.util.animateColor(l.startValue,l.endValue,l.duration,l):b.util.animate(l)}}),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function o(e,t){var i=e.origin,n=e.axis1,r=e.axis2,o=e.dimension,a=t.nearest,s=t.center,l=t.farthest;return function(){switch(this.get(i)){case a:return Math.min(this.get(n),this.get(r));case s:return Math.min(this.get(n),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(n),this.get(r))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),void 0!==r[e]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;var i=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=i},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return i(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,i=e*this.width*.5,n=t*this.height*.5;return{x1:i,x2:e*this.width*-.5,y1:n,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,n,r){r=r||{};var o=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),a=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];n(new t.Line(a,i(o,r)))},t.Line.fromObject=function(e,i){var r=n(e,!0);r.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",r,(function(e){delete e.points,i&&i(e)}),"points")})}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.degreesToRadians;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,n=(this.endAngle-this.startAngle)%360;if(0===n)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=i(this.startAngle),o=i(this.endAngle),a=this.radius;e=['<path d="M '+t.util.cos(r)*a+" "+t.util.sin(r)*a," A "+a+" "+a," 0 ",+(n>180?"1":"0")+" 1"," "+t.util.cos(o)*a+" "+t.util.sin(o)*a,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,i(this.startAngle),i(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,i){var n,r=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(n=r)&&n.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,i(new t.Circle(r))},t.Circle.fromObject=function(e,i){t.Object._fromObject("Circle",e,i)})}(e),function(e){var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,i=this.height/2;e.beginPath(),e.moveTo(-t,i),e.lineTo(0,-i),e.lineTo(t,i),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,i){return t.Object._fromObject("Triangle",e,i)})}(e),function(e){var t=e.fabric||(e.fabric={}),i=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,i,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,i){var n=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,i(new t.Ellipse(n))},t.Ellipse.fromObject=function(e,i){t.Object._fromObject("Ellipse",e,i)})}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,r=this.height,o=-this.width/2,a=-this.height/2,s=0!==t||0!==i,l=.4477152502;e.beginPath(),e.moveTo(o+t,a),e.lineTo(o+n-t,a),s&&e.bezierCurveTo(o+n-l*t,a,o+n,a+l*i,o+n,a+i),e.lineTo(o+n,a+r-i),s&&e.bezierCurveTo(o+n,a+r-l*i,o+n-l*t,a+r,o+n-t,a+r),e.lineTo(o+t,a+r),s&&e.bezierCurveTo(o+l*t,a+r,o,a+r-l*i,o,a+r-i),e.lineTo(o,a+i),s&&e.bezierCurveTo(o,a+l*i,o+l*t,a,o+t,a),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,n,r){if(!e)return n(null);r=r||{};var o=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var a=new t.Rect(i(r?t.util.object.clone(r):{},o));a.visible=a.visible&&a.width>0&&a.height>0,n(a)},t.Rect.fromObject=function(e,i){return t.Object._fromObject("Rect",e,i)})}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.util.array.min,r=t.util.array.max,o=t.util.toFixed,a=t.util.projectStrokeOnPoints;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_projectStrokeOnPoints:function(){return a(this.points,this,!0)},_setPositionDimensions:function(e){var t,i=this._calcDimensions(e),n=this.exactBoundingBox?this.strokeWidth:0;this.width=i.width-n,this.height=i.height-n,e.fromSVG||(t=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2+n/2,y:i.top-this.strokeWidth/2+n/2},"left","top",this.originX,this.originY)),void 0===e.left&&(this.left=e.fromSVG?i.left:t.x),void 0===e.top&&(this.top=e.fromSVG?i.top:t.y),this.pathOffset={x:i.left+this.width/2+n/2,y:i.top+this.height/2+n/2}},_calcDimensions:function(){var e=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,t=n(e,"x")||0,i=n(e,"y")||0;return{left:t,top:i,width:(r(e,"x")||0)-t,height:(r(e,"y")||0)-i}},toObject:function(e){return i(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],i=this.pathOffset.x,n=this.pathOffset.y,r=t.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)e.push(o(this.points[a].x-i,r),",",o(this.points[a].y-n,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,i=this.points.length,n=this.pathOffset.x,r=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-r);for(var o=0;o<i;o++)t=this.points[o],e.lineTo(t.x-n,t.y-r);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(n,r,o){if(!n)return r(null);o||(o={});var a=t.parsePointsAttribute(n.getAttribute("points")),s=t.parseAttributes(n,t[e].ATTRIBUTE_NAMES);s.fromSVG=!0,r(new t[e](a,i(s,o)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,i){return t.Object._fromObject("Polyline",e,i,"points")})}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.projectStrokeOnPoints;t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return i(this.points,this)},_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,i){t.Object._fromObject("Polygon",e,i,"points")})}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.array.min,n=t.util.array.max,r=t.util.object.extend,o=t.util.object.clone,a=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,t){delete(t=o(t||{})).path,this.callSuper("initialize",t),this._setPath(e||[],t)},_setPath:function(e,i){this.path=t.util.makePathSimpler(Array.isArray(e)?e:t.util.parsePath(e)),t.Polyline.prototype._setPositionDimensions.call(this,i||{})},_renderPathCommands:function(e){var t,i=0,n=0,r=0,o=0,a=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;e.beginPath();for(var u=0,d=this.path.length;u<d;++u)switch((t=this.path[u])[0]){case"L":r=t[1],o=t[2],e.lineTo(r+l,o+c);break;case"M":i=r=t[1],n=o=t[2],e.moveTo(r+l,o+c);break;case"C":r=t[5],o=t[6],a=t[3],s=t[4],e.bezierCurveTo(t[1]+l,t[2]+c,a+l,s+c,r+l,o+c);break;case"Q":e.quadraticCurveTo(t[1]+l,t[2]+c,t[3]+l,t[4]+c),r=t[3],o=t[4],a=t[1],s=t[2];break;case"z":case"Z":r=i,o=n,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return r(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',t.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,e)+", "+a(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,r,o=[],a=[],s=0,l=0,c=0,u=0,d=0,h=this.path.length;d<h;++d){switch((e=this.path[d])[0]){case"L":c=e[1],u=e[2],r=[];break;case"M":s=c=e[1],l=u=e[2],r=[];break;case"C":r=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[3],e[4],e[5],e[6]),c=e[5],u=e[6];break;case"Q":r=t.util.getBoundsOfCurve(c,u,e[1],e[2],e[1],e[2],e[3],e[4]),c=e[3],u=e[4];break;case"z":case"Z":c=s,u=l}r.forEach((function(e){o.push(e.x),a.push(e.y)})),o.push(c),a.push(u)}var p=i(o)||0,f=i(a)||0;return{left:p,top:f,width:(n(o)||0)-p,height:(n(a)||0)-f}}}),t.Path.fromObject=function(e,i){if("string"==typeof e.sourcePath){var n=e.sourcePath;t.loadSVGFromURL(n,(function(n){var r=n[0];r.setOptions(e),e.clipPath?t.util.enlivenObjects([e.clipPath],(function(e){r.clipPath=e[0],i&&i(r)})):i&&i(r)}))}else t.Object._fromObject("Path",e,i,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,i,n){var o=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,i(new t.Path(o.d,r(o,n)))})}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.array.min,n=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,i){t=t||{},this._objects=[],i&&this.callSuper("initialize",t),this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(i)this._updateObjectsACoords();else{var r=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(!0)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var i=e.left,n=e.top;e.set({left:i-t.x,top:n-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var i=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(i&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,i){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(e,i);if("canvas"===e)for(;n--;)this._objects[n]._set(e,i);t.Object.prototype._set.call(this,e,i)},toObject:function(e){var i=this.includeDefaultValues,n=this._objects.filter((function(e){return!e.excludeFromExport})).map((function(t){var n=t.includeDefaultValues;t.includeDefaultValues=i;var r=t.toObject(e);return t.includeDefaultValues=n,r})),r=t.Object.prototype.toObject.call(this,e);return r.objects=n,r},toDatalessObject:function(e){var i,n=this.sourcePath;if(n)i=n;else{var r=this.includeDefaultValues;i=this._objects.map((function(t){var i=t.includeDefaultValues;t.includeDefaultValues=r;var n=t.toDatalessObject(e);return t.includeDefaultValues=i,n}))}var o=t.Object.prototype.toDatalessObject.call(this,e);return o.objects=i,o},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var i=0,n=this._objects.length;i<n;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,i=this._objects.length;t<i;t++)this._objects[t].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,i=this._objects.length;t<i;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-r/2,n,r)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach((function(i){t.util.addTransformToObject(i,e),delete i.group,i.setCoords()})),this},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,i=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var r=new t.ActiveSelection([]);return r.set(n),r.type="activeSelection",i.remove(this),e.forEach((function(e){e.group=r,e.dirty=!0,i.add(e)})),r.canvas=i,r._objects=e,i._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(!0)})),this},_calcBounds:function(e){for(var t,i,n,r,o=[],a=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,u=s.length;l<c;++l){for(n=(t=this._objects[l]).calcACoords(),r=0;r<u;r++)i=s[r],o.push(n[i].x),a.push(n[i].y);t.aCoords=n}this._getBounds(o,a,e)},_getBounds:function(e,r,o){var a=new t.Point(i(e),i(r)),s=new t.Point(n(e),n(r)),l=a.y||0,c=a.x||0,u=s.x-a.x||0,d=s.y-a.y||0;this.width=u,this.height=d,o||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],i=0,n=this._objects.length;i<n;i++)t.push("\t\t",this._objects[i].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],i=0,n=this._objects.length;i<n;i++)t.push("\t",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,i){var n=e.objects,r=t.util.object.clone(e,!0);delete r.objects,"string"!=typeof n?t.util.enlivenObjects(n,(function(n){t.util.enlivenObjectEnlivables(e,r,(function(){i&&i(new t.Group(n,r,!0))}))})):t.loadSVGFromURL(n,(function(o){var a=t.util.groupSVGElements(o,e,n),s=r.clipPath;delete r.clipPath,a.set(r),s?t.util.enlivenObjects([s],(function(e){a.clipPath=e[0],i&&i(a)})):i&&i(a)}))})}(e),function(e){var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,i){i=i||{},this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var i=t.Object.prototype.toObject.call(this),n=new t.Group([]);if(delete i.type,n.set(i),e.forEach((function(e){e.canvas.remove(e),e.group=n})),n._objects=e,!this.canvas)return n;var r=this.canvas;return r.add(n),r._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,i){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var n=0,r=this._objects.length;n<r;n++)this._objects[n]._renderControls(e,i);e.restore()}}),t.ActiveSelection.fromObject=function(e,i){t.util.enlivenObjects(e.objects,(function(n){delete e.objects,i&&i(new t.ActiveSelection(n,e,!0))}))})}(e),function(e){var t=b.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?b.warn("fabric.Image is already defined."):(b.Image=b.util.createClass(b.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:b.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:b.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+b.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=b.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){b.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,i=this.height/2;e.beginPath(),e.moveTo(-t,-i),e.lineTo(t,-i),e.lineTo(t,i),e.lineTo(-t,i),e.lineTo(-t,-i),e.closePath()}},toObject:function(e){var i=[];this.filters.forEach((function(e){e&&i.push(e.toObject())}));var n=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],i=[],n=this._element,r=-this.width/2,o=-this.height/2,a="",s="";if(!n)return[];if(this.hasCrop()){var l=b.Object.__uid++;t.push('<clipPath id="imageCrop_'+l+'">\n','\t<rect x="'+r+'" y="'+o+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+l+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),i.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',o-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,s,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var c=this.fill;this.fill=null,e=["\t<rect ",'x="',r,'" y="',o,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=c}return t="fill"!==this.paintFirst?t.concat(e,i):t.concat(i,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,i){return b.util.loadImage(e,(function(e,n){this.setElement(e,i),this._setWidthHeight(),t&&t(this,n)}),this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),n=i.scaleX,r=i.scaleY,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&r>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=r);b.filterBackend||(b.filterBackend=b.initFilterBackend());var a=b.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=o.width,c=o.height;a.width=l,a.height=c,this._element=a,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=r,b.filterBackend.applyFilters([e],o,l,c,this._element,s),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,i=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){var r=b.util.createCanvasElement();r.width=i,r.height=n,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,n),this._lastScaleX=1,this._lastScaleY=1;return b.filterBackend||(b.filterBackend=b.initFilterBackend()),b.filterBackend.applyFilters(e,this._originalElement,i,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){b.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){b.util.setImageSmoothing(e,this.imageSmoothing),b.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var i=this._filterScalingX,n=this._filterScalingY,r=this.width,o=this.height,a=Math.min,s=Math.max,l=s(this.cropX,0),c=s(this.cropY,0),u=t.naturalWidth||t.width,d=t.naturalHeight||t.height,h=l*i,p=c*n,f=a(r*i,u-h),g=a(o*n,d-p),v=-r/2,m=-o/2,A=a(r,u/i-l),b=a(o,d/n-c);t&&e.drawImage(t,h,p,f,g,v,m,A,b)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(b.util.getById(e),t),b.util.addClass(this.getElement(),b.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?b.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=b.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,n=this._element.height,r=1,o=1,a=0,s=0,l=0,c=0,u=this.width,d=this.height,h={width:u,height:d};return!t||"none"===t.alignX&&"none"===t.alignY?(r=u/i,o=d/n):("meet"===t.meetOrSlice&&(e=(u-i*(r=o=b.util.findScaleToFit(this._element,h)))/2,"Min"===t.alignX&&(a=-e),"Max"===t.alignX&&(a=e),e=(d-n*o)/2,"Min"===t.alignY&&(s=-e),"Max"===t.alignY&&(s=e)),"slice"===t.meetOrSlice&&(e=i-u/(r=o=b.util.findScaleToCover(this._element,h)),"Mid"===t.alignX&&(l=e/2),"Max"===t.alignX&&(l=e),e=n-d/o,"Mid"===t.alignY&&(c=e/2),"Max"===t.alignY&&(c=e),i=u/r,n=d/o)),{width:i,height:n,scaleX:r,scaleY:o,offsetLeft:a,offsetTop:s,cropX:l,cropY:c}}}),b.Image.CSS_CANVAS="canvas-img",b.Image.prototype.getSvgSrc=b.Image.prototype.getSrc,b.Image.fromObject=function(e,t){var i=b.util.object.clone(e);b.util.loadImage(i.src,(function(e,n){n?t&&t(null,!0):b.Image.prototype._initFilters.call(i,i.filters,(function(n){i.filters=n||[],b.Image.prototype._initFilters.call(i,[i.resizeFilter],(function(n){i.resizeFilter=n[0],b.util.enlivenObjectEnlivables(i,i,(function(){var n=new b.Image(e,i);t(n,!1)}))}))}))}),null,i.crossOrigin)},b.Image.fromURL=function(e,t,i){b.util.loadImage(e,(function(e,n){t&&t(new b.Image(e,i),n)}),null,i&&i.crossOrigin)},b.Image.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),b.Image.fromElement=function(e,i,n){var r=b.parseAttributes(e,b.Image.ATTRIBUTE_NAMES);b.Image.fromURL(r["xlink:href"],i,t(n?b.util.object.clone(n):{},r))})}(e),b.util.object.extend(b.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(e){var t=function(){},i=(e=e||{}).onComplete||t,n=e.onChange||t,r=this;return b.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){r.rotate(e),n()},onComplete:function(){r.setCoords(),i()}})}}),b.util.object.extend(b.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function e(e,t){var i="precision "+t+" float;\nvoid main(){}",n=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,i),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}b.isWebglSupported=function(t){if(b.isLikelyNode)return!1;t=t||b.WebglFilterBackend.prototype.tileSize;var i=document.createElement("canvas"),n=i.getContext("webgl")||i.getContext("experimental-webgl"),r=!1;if(n){b.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),r=b.maxTextureSize>=t;for(var o=["highp","mediump","lowp"],a=0;a<3;a++)if(e(n,o[a])){b.webGlPrecision=o[a];break}}return this.isSupported=r,r},b.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var i,n=void 0!==window.performance;try{new ImageData(1,1),i=!0}catch(d){i=!1}var r="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof Uint8ClampedArray;if(n&&i&&r&&o){var a=b.util.createCanvasElement(),s=new ArrayBuffer(e*t*4);if(b.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=w);var l,c,u={imageBuffer:s,destinationWidth:e,destinationHeight:t,targetCanvas:a};a.width=e,a.height=t,l=window.performance.now(),x.call(u,this.gl,u),c=window.performance.now()-l,l=window.performance.now(),w.call(u,this.gl,u),c>window.performance.now()-l?(this.imageBuffer=s,this.copyGLTo2D=w):this.copyGLTo2D=x}},createWebGLCanvas:function(e,t){var i=b.util.createCanvasElement();i.width=e,i.height=t;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=i.getContext("webgl",n);r||(r=i.getContext("experimental-webgl",n)),r&&(r.clearColor(0,0,0,0),this.canvas=i,this.gl=r)},applyFilters:function(e,t,i,n,r,o){var a,s=this.gl;o&&(a=this.getCachedTexture(o,t));var l={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:i,sourceHeight:n,destinationWidth:i,destinationHeight:n,context:s,sourceTexture:this.createTexture(s,i,n,!a&&t),targetTexture:this.createTexture(s,i,n),originalTexture:a||this.createTexture(s,i,n,!a&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,c),e.forEach((function(e){e&&e.applyTo(l)})),function(e){var t=e.targetCanvas,i=t.width,n=t.height,r=e.destinationWidth,o=e.destinationHeight;i===r&&n===o||(t.width=r,t.height=o)}(l),this.copyGLTo2D(s,l),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l.sourceTexture),s.deleteTexture(l.targetTexture),s.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,i,n,r){var o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),o},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var i=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=i,i},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:x,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var i=e.getExtension("WEBGL_debug_renderer_info");if(i){var n=e.getParameter(i.UNMASKED_RENDERER_WEBGL),r=e.getParameter(i.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),r&&(t.vendor=r.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){var e=function(){};function t(){}b.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,i,n,r){var o=r.getContext("2d");o.drawImage(t,0,0,i,n);var a={sourceWidth:i,sourceHeight:n,imageData:o.getImageData(0,0,i,n),originalEl:t,originalImageData:o.getImageData(0,0,i,n),canvasEl:r,ctx:o,filterBackend:this};return e.forEach((function(e){e.applyTo(a)})),a.imageData.width===i&&a.imageData.height===n||(r.width=a.imageData.width,r.height=a.imageData.height),o.putImageData(a.imageData,0,0),a}}}(),b.Image=b.Image||{},b.Image.filters=b.Image.filters||{},b.Image.filters.BaseFilter=b.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,i){t=t||this.fragmentSource,i=i||this.vertexSource,"highp"!==b.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+b.webGlPrecision+" float"));var n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(n));var r=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(r));var o=e.createProgram();if(e.attachShader(o,n),e.attachShader(o,r),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(o));var a=this.getAttributeLocations(e,o),s=this.getUniformLocations(e,o)||{};return s.uStepW=e.getUniformLocation(o,"uStepW"),s.uStepH=e.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:s}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,i){var n=t.aPosition,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,i,n=e.context;e.passes>1?(t=e.destinationWidth,i=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===i||(n.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(n,t,i)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=b.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var i=t[e].length;i--;)if(this[e][i]!==t[e][i])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,i=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(i.program),this.sendAttributeData(t,i.attributeLocations,e.aPosition),t.uniform1f(i.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(i.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,i.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,i){e.activeTexture(i),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),b.Image.filters.BaseFilter.fromObject=function(e,t){var i=new b.Image.filters[e.type](e);return t&&t(i),i},function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.ColorMatrix=n(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,i,n,r,o,a=e.imageData.data,s=a.length,l=this.matrix,c=this.colorsOnly;for(o=0;o<s;o+=4)t=a[o],i=a[o+1],n=a[o+2],c?(a[o]=t*l[0]+i*l[1]+n*l[2]+255*l[4],a[o+1]=t*l[5]+i*l[6]+n*l[7]+255*l[9],a[o+2]=t*l[10]+i*l[11]+n*l[12]+255*l[14]):(r=a[o+3],a[o]=t*l[0]+i*l[1]+n*l[2]+r*l[3]+255*l[4],a[o+1]=t*l[5]+i*l[6]+n*l[7]+r*l[8]+255*l[9],a[o+2]=t*l[10]+i*l[11]+n*l[12]+r*l[13]+255*l[14],a[o+3]=t*l[15]+i*l[16]+n*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var i=this.matrix,n=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],r=[i[4],i[9],i[14],i[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,r)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Brightness=n(i.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,i=e.imageData.data,n=i.length,r=Math.round(255*this.brightness);for(t=0;t<n;t+=4)i[t]=i[t]+r,i[t+1]=i[t+1]+r,i[t+2]=i[t+2]+r}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.Image.filters,r=t.util.createClass;n.Convolute=r(n.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),i=this.type+"_"+t+"_"+(this.opaque?1:0),n=this.fragmentSource[i];return e.programCache.hasOwnProperty(i)||(e.programCache[i]=this.createProgram(e.context,n)),e.programCache[i]},applyTo2d:function(e){var t,i,n,r,o,a,s,l,c,u,d,h,p,f=e.imageData,g=f.data,v=this.matrix,m=Math.round(Math.sqrt(v.length)),A=Math.floor(m/2),b=f.width,y=f.height,x=e.ctx.createImageData(b,y),w=x.data,_=this.opaque?1:0;for(d=0;d<y;d++)for(u=0;u<b;u++){for(o=4*(d*b+u),t=0,i=0,n=0,r=0,p=0;p<m;p++)for(h=0;h<m;h++)a=u+h-A,(s=d+p-A)<0||s>=y||a<0||a>=b||(l=4*(s*b+a),c=v[p*m+h],t+=g[l]*c,i+=g[l+1]*c,n+=g[l+2]*c,_||(r+=g[l+3]*c));w[o]=t,w[o+1]=i,w[o+2]=n,w[o+3]=_?g[o+3]:r}e.imageData=x},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,i,n=e.imageData.data,r=n.length,o=this.mode;for(t=0;t<r;t+=4)"average"===o?i=(n[t]+n[t+1]+n[t+2])/3:"lightness"===o?i=(Math.min(n[t],n[t+1],n[t+2])+Math.max(n[t],n[t+1],n[t+2]))/2:"luminosity"===o&&(i=.21*n[t]+.72*n[t+1]+.07*n[t+2]),n[t]=i,n[t+1]=i,n[t+2]=i},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var i=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,i)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,i=e.imageData.data,n=i.length;for(t=0;t<n;t+=4)i[t]=255-i[t],i[t+1]=255-i[t+1],i[t+2]=255-i[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.Image.filters,r=t.util.createClass;n.Noise=r(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,i,n=e.imageData.data,r=n.length,o=this.noise;for(t=0,r=n.length;t<r;t+=4)i=(.5-Math.random())*o,n[t]+=i,n[t+1]+=i,n[t+2]+=i}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Pixelate=n(i.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,i,n,r,o,a,s,l,c,u,d,h=e.imageData,p=h.data,f=h.height,g=h.width;for(i=0;i<f;i+=this.blocksize)for(n=0;n<g;n+=this.blocksize)for(r=p[t=4*i*g+4*n],o=p[t+1],a=p[t+2],s=p[t+3],u=Math.min(i+this.blocksize,f),d=Math.min(n+this.blocksize,g),l=i;l<u;l++)for(c=n;c<d;c++)p[t=4*l*g+4*c]=r,p[t+1]=o,p[t+2]=a,p[t+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.extend,n=t.Image.filters,r=t.util.createClass;n.RemoveColor=r(n.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var i,n,r,o,a=e.imageData.data,s=255*this.distance,l=new t.Color(this.color).getSource(),c=[l[0]-s,l[1]-s,l[2]-s],u=[l[0]+s,l[1]+s,l[2]+s];for(i=0;i<a.length;i+=4)n=a[i],r=a[i+1],o=a[i+2],n>c[0]&&r>c[1]&&o>c[2]&&n<u[0]&&r<u[1]&&o<u[2]&&(a[i+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,i){var n=new t.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+n[0]/255-r,0+n[1]/255-r,0+n[2]/255-r,1],a=[n[0]/255+r,n[1]/255+r,n[2]/255+r,1];e.uniform4fv(i.uLow,o),e.uniform4fv(i.uHigh,a)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)i[o]=n(i.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),t.Image.filters[o].fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric,i=t.Image.filters,n=t.util.createClass;i.BlendColor=n(i.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,i=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(i)||(t=this.buildSource(this.mode),e.programCache[i]=this.createProgram(e.context,t)),e.programCache[i]},applyTo2d:function(e){var i,n,r,o,a,s,l,c=e.imageData.data,u=c.length,d=1-this.alpha;i=(l=new t.Color(this.color).getSource())[0]*this.alpha,n=l[1]*this.alpha,r=l[2]*this.alpha;for(var h=0;h<u;h+=4)switch(o=c[h],a=c[h+1],s=c[h+2],this.mode){case"multiply":c[h]=o*i/255,c[h+1]=a*n/255,c[h+2]=s*r/255;break;case"screen":c[h]=255-(255-o)*(255-i)/255,c[h+1]=255-(255-a)*(255-n)/255,c[h+2]=255-(255-s)*(255-r)/255;break;case"add":c[h]=o+i,c[h+1]=a+n,c[h+2]=s+r;break;case"diff":case"difference":c[h]=Math.abs(o-i),c[h+1]=Math.abs(a-n),c[h+2]=Math.abs(s-r);break;case"subtract":c[h]=o-i,c[h+1]=a-n,c[h+2]=s-r;break;case"darken":c[h]=Math.min(o,i),c[h+1]=Math.min(a,n),c[h+2]=Math.min(s,r);break;case"lighten":c[h]=Math.max(o,i),c[h+1]=Math.max(a,n),c[h+2]=Math.max(s,r);break;case"overlay":c[h]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,c[h+1]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255,c[h+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case"exclusion":c[h]=i+o-2*i*o/255,c[h+1]=n+a-2*n*a/255,c[h+2]=r+s-2*r*s/255;break;case"tint":c[h]=i+o*d,c[h+1]=n+a*d,c[h+2]=r+s*d}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,i){var n=new t.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(i.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric,i=t.Image.filters,n=t.util.createClass;i.BlendImage=n(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,i)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,i=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,i,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,i=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/i,1]},applyTo2d:function(e){var i,n,r,o,a,s,l,c,u,d,h,p=e.imageData,f=e.filterBackend.resources,g=p.data,v=g.length,m=p.width,A=p.height,b=this.image;f.blendImage||(f.blendImage=t.util.createCanvasElement()),d=(u=f.blendImage).getContext("2d"),u.width!==m||u.height!==A?(u.width=m,u.height=A):d.clearRect(0,0,m,A),d.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),d.drawImage(b._element,0,0,m,A),h=d.getImageData(0,0,m,A).data;for(var y=0;y<v;y+=4)switch(a=g[y],s=g[y+1],l=g[y+2],c=g[y+3],i=h[y],n=h[y+1],r=h[y+2],o=h[y+3],this.mode){case"multiply":g[y]=a*i/255,g[y+1]=s*n/255,g[y+2]=l*r/255,g[y+3]=c*o/255;break;case"mask":g[y+3]=o}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var i=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,i){t.Image.fromObject(e.image,(function(n){var r=t.util.object.clone(e);r.image=n,i(new t.Image.filters.BlendImage(r))}))}}(e),function(e){var t=e.fabric||(e.fabric={}),i=Math.pow,n=Math.floor,r=Math.sqrt,o=Math.abs,a=Math.round,s=Math.sin,l=Math.ceil,c=t.Image.filters,u=t.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),i=this.type+"_"+t;if(!e.programCache.hasOwnProperty(i)){var n=this.generateShader(t);e.programCache[i]=this.createProgram(e.context,n)}return e.programCache[i]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,i=this.getFilterWindow(),n=new Array(i),r=1;r<=i;r++)n[r-1]=e(r*t);return n},generateShader:function(e){for(var t=new Array(e),i=this.fragmentSourceTOP,n=1;n<=e;n++)t[n-1]=n+".0 * uDelta";return i+="uniform float uTaps["+e+"];\n",i+="void main() {\n",i+="  vec4 color = texture2D(uTexture, vTexCoord);\n",i+="  float sum = 1.0;\n",t.forEach((function(e,t){i+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",i+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",i+="  sum += 2.0 * uTaps["+t+"];\n"})),i+="  gl_FragColor = color / sum;\n",i+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var i=(t*=Math.PI)/e;return s(t)/t*s(i)/i}},applyTo2d:function(e){var t=e.imageData,i=this.scaleX,n=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/n;var r,o=t.width,s=t.height,l=a(o*i),c=a(s*n);"sliceHack"===this.resizeType?r=this.sliceByTwo(e,o,s,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(e,o,s,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(e,o,s,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(e,o,s,l,c)),e.imageData=r},sliceByTwo:function(e,i,r,o,a){var s,l,c=e.imageData,u=.5,d=!1,h=!1,p=i*u,f=r*u,g=t.filterBackend.resources,v=0,m=0,A=i,b=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((s=g.sliceByTwo).width<1.5*i||s.height<r)&&(s.width=1.5*i,s.height=r),(l=s.getContext("2d")).clearRect(0,0,1.5*i,r),l.putImageData(c,0,0),o=n(o),a=n(a);!d||!h;)i=p,r=f,o<n(p*u)?p=n(p*u):(p=o,d=!0),a<n(f*u)?f=n(f*u):(f=a,h=!0),l.drawImage(s,v,m,i,r,A,b,p,f),v=A,m=b,b+=f;return l.getImageData(v,m,o,a)},lanczosResize:function(e,t,a,s,c){var u=e.imageData.data,d=e.ctx.createImageData(s,c),h=d.data,p=this.lanczosCreate(this.lanczosLobes),f=this.rcpScaleX,g=this.rcpScaleY,v=2/this.rcpScaleX,m=2/this.rcpScaleY,A=l(f*this.lanczosLobes/2),b=l(g*this.lanczosLobes/2),y={},x={},w={};return function e(l){var _,C,k,E,S,I,B,O,T,D,M;for(x.x=(l+.5)*f,w.x=n(x.x),_=0;_<c;_++){for(x.y=(_+.5)*g,w.y=n(x.y),S=0,I=0,B=0,O=0,T=0,C=w.x-A;C<=w.x+A;C++)if(!(C<0||C>=t)){D=n(1e3*o(C-x.x)),y[D]||(y[D]={});for(var Q=w.y-b;Q<=w.y+b;Q++)Q<0||Q>=a||(M=n(1e3*o(Q-x.y)),y[D][M]||(y[D][M]=p(r(i(D*v,2)+i(M*m,2))/1e3)),(k=y[D][M])>0&&(S+=k,I+=k*u[E=4*(Q*t+C)],B+=k*u[E+1],O+=k*u[E+2],T+=k*u[E+3]))}h[E=4*(_*s+l)]=I/S,h[E+1]=B/S,h[E+2]=O/S,h[E+3]=T/S}return++l<s?e(l):d}(0)},bilinearFiltering:function(e,t,i,r,o){var a,s,l,c,u,d,h,p,f,g=0,v=this.rcpScaleX,m=this.rcpScaleY,A=4*(t-1),b=e.imageData.data,y=e.ctx.createImageData(r,o),x=y.data;for(l=0;l<o;l++)for(c=0;c<r;c++)for(u=v*c-(a=n(v*c)),d=m*l-(s=n(m*l)),f=4*(s*t+a),h=0;h<4;h++)p=b[f+h]*(1-u)*(1-d)+b[f+4+h]*u*(1-d)+b[f+A+h]*d*(1-u)+b[f+A+4+h]*u*d,x[g++]=p;return y},hermiteFastResize:function(e,t,i,a,s){for(var c=this.rcpScaleX,u=this.rcpScaleY,d=l(c/2),h=l(u/2),p=e.imageData.data,f=e.ctx.createImageData(a,s),g=f.data,v=0;v<s;v++)for(var m=0;m<a;m++){for(var A=4*(m+v*a),b=0,y=0,x=0,w=0,_=0,C=0,k=0,E=(v+.5)*u,S=n(v*u);S<(v+1)*u;S++)for(var I=o(E-(S+.5))/h,B=(m+.5)*c,O=I*I,T=n(m*c);T<(m+1)*c;T++){var D=o(B-(T+.5))/d,M=r(O+D*D);M>1&&M<-1||(b=2*M*M*M-3*M*M+1)>0&&(k+=b*p[3+(D=4*(T+S*t))],x+=b,p[D+3]<255&&(b=b*p[D+3]/250),w+=b*p[D],_+=b*p[D+1],C+=b*p[D+2],y+=b)}g[A]=w/y,g[A+1]=_/y,g[A+2]=C/y,g[A+3]=k/x}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Contrast=n(i.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,i=e.imageData.data,n=i.length,r=Math.floor(255*this.contrast),o=259*(r+255)/(255*(259-r));for(t=0;t<n;t+=4)i[t]=o*(i[t]-128)+128,i[t+1]=o*(i[t+1]-128)+128,i[t+2]=o*(i[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Saturation=n(i.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,i,n=e.imageData.data,r=n.length,o=-this.saturation;for(t=0;t<r;t+=4)i=Math.max(n[t],n[t+1],n[t+2]),n[t]+=i!==n[t]?(i-n[t])*o:0,n[t+1]+=i!==n[t+1]?(i-n[t+1])*o:0,n[t+2]+=i!==n[t+2]?(i-n[t+2])*o:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Vibrance=n(i.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var t,i,n,r,o=e.imageData.data,a=o.length,s=-this.vibrance;for(t=0;t<a;t+=4)i=Math.max(o[t],o[t+1],o[t+2]),n=(o[t]+o[t+1]+o[t+2])/3,r=2*Math.abs(i-n)/255*s,o[t]+=i!==o[t]?(i-o[t])*r:0,o[t+1]+=i!==o[t+1]?(i-o[t+1])*r:0,o[t+2]+=i!==o[t+2]?(i-o[t+2])*r:0}},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Blur=n(i.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var i,n,r=e.filterBackend.resources,o=e.imageData.width,a=e.imageData.height;r.blurLayer1||(r.blurLayer1=t.util.createCanvasElement(),r.blurLayer2=t.util.createCanvasElement()),i=r.blurLayer1,n=r.blurLayer2,i.width===o&&i.height===a||(n.width=i.width=o,n.height=i.height=a);var s,l,c,u,d=i.getContext("2d"),h=n.getContext("2d"),p=15,f=.06*this.blur*.5;for(d.putImageData(e.imageData,0,0),h.clearRect(0,0,o,a),u=-15;u<=p;u++)c=f*(l=u/p)*o+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(l),h.drawImage(i,c,s),d.drawImage(n,0,0),h.globalAlpha=1,h.clearRect(0,0,n.width,n.height);for(u=-15;u<=p;u++)c=f*(l=u/p)*a+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(l),h.drawImage(i,s,c),d.drawImage(n,0,0),h.globalAlpha=1,h.clearRect(0,0,n.width,n.height);e.ctx.drawImage(i,0,0);var g=e.ctx.getImageData(0,0,i.width,i.height);return d.globalAlpha=1,d.clearRect(0,0,i.width,i.height),g},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var i=this.chooseRightDelta();e.uniform2fv(t.delta,i)},chooseRightDelta:function(){var e,t=1,i=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?i[0]=e:i[1]=e,i}}),i.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Gamma=n(i.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,i=e.imageData.data,n=this.gamma,r=i.length,o=1/n[0],a=1/n[1],s=1/n[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,r=256;t<r;t++)this.rVals[t]=255*Math.pow(t/255,o),this.gVals[t]=255*Math.pow(t/255,a),this.bVals[t]=255*Math.pow(t/255,s);for(t=0,r=i.length;t<r;t+=4)i[t]=this.rVals[i[t]],i[t+1]=this.gVals[i[t+1]],i[t+2]=this.bVals[i[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.Composed=n(i.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,i){var n=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),r=new t.Image.filters.Composed({subFilters:n});return i&&i(r),r}}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.Image.filters,n=t.util.createClass;i.HueRotation=n(i.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,i=t.util.cos(e),n=t.util.sin(e),r=1/3,o=Math.sqrt(r)*n,a=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+a/3,this.matrix[1]=r*a-o,this.matrix[2]=r*a+o,this.matrix[5]=r*a+o,this.matrix[6]=i+r*a,this.matrix[7]=r*a-o,this.matrix[10]=r*a-o,this.matrix[11]=r*a+o,this.matrix[12]=i+r*a},isNeutralState:function(e){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),i=t.util.object.clone;if(t.Text)t.warn("fabric.Text is already defined");else{var n="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat(n),cacheProperties:t.Object.prototype.cacheProperties.concat(n),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=t.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,i,n,r,o,a,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(n=0,r=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs)))){i=a.length,e=(this.width-t)/i;for(var c=0,u=r.length;c<=u;c++)o=this.__charBounds[s][c],this._reSpaceAndTab.test(r[c])?(o.width+=e,o.kernedWidth+=e,o.left+=n,n+=e):o.left+=n}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){var t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,i){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom"}e.font=this._getFontDeclaration(t,i)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,i=this._textLines.length;t<i;t++){var n=this.getLineWidth(t);n>e&&(e=n)}return e},_renderTextLine:function(e,t,i,n,r,o){this._renderChars(e,t,i,n,r,o)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,i,n,r,o,a,s,l=e.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),d=0,h=0,p=this.path,f=0,g=this._textLines.length;f<g;f++)if(t=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas("textBackgroundColor",f)){n=this._textLines[f],i=this._getLineLeftOffset(f),h=0,d=0,r=this.getValueOfPropertyAt(f,0,"textBackgroundColor");for(var v=0,m=n.length;v<m;v++)o=this.__charBounds[f][v],a=this.getValueOfPropertyAt(f,v,"textBackgroundColor"),p?(e.save(),e.translate(o.renderLeft,o.renderTop),e.rotate(o.angle),e.fillStyle=a,a&&e.fillRect(-o.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),o.width,t/this.lineHeight),e.restore()):a!==r?(s=c+i+d,"rtl"===this.direction&&(s=this.width-s-h),e.fillStyle=r,r&&e.fillRect(s,u,h,t/this.lineHeight),d=o.left,h=o.width,r=a):h+=o.kernedWidth;a&&!p&&(s=c+i+d,"rtl"===this.direction&&(s=this.width-s-h),e.fillStyle=a,e.fillRect(s,u,h,t/this.lineHeight)),u+=t}else u+=t;e.fillStyle=l,this._removeShadow(e)}},getFontCache:function(e){var i=e.fontFamily.toLowerCase();t.charWidthsCache[i]||(t.charWidthsCache[i]={});var n=t.charWidthsCache[i],r=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return n[r]||(n[r]={}),n[r]},_measureChar:function(e,t,i,n){var r,o,a,s,l=this.getFontCache(t),c=i+e,u=this._getFontDeclaration(t)===this._getFontDeclaration(n),d=t.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==l[i]&&(a=l[i]),void 0!==l[e]&&(s=r=l[e]),u&&void 0!==l[c]&&(s=(o=l[c])-a),void 0===r||void 0===a||void 0===o){var h=this.getMeasuringContext();this._setTextStyles(h,t,!0)}return void 0===r&&(s=r=h.measureText(e).width,l[e]=r),void 0===a&&u&&i&&(a=h.measureText(i).width,l[i]=a),u&&void 0===o&&(o=h.measureText(c).width,l[c]=o,s=o-a),{width:r*d,kernedWidth:s*d}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var i,n,r,o,a,s,l=0,c=this._textLines[e],u=new Array(c.length),d=0,h=this.path,p="right"===this.pathSide;for(this.__charBounds[e]=u,i=0;i<c.length;i++)n=c[i],o=this._getGraphemeBox(n,e,i,r),u[i]=o,l+=o.kernedWidth,r=n;if(u[i]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},h){switch(s=h.segmentsInfo[h.segmentsInfo.length-1].length,(a=t.util.getPointOnPath(h.path,0,h.segmentsInfo)).x+=h.pathOffset.x,a.y+=h.pathOffset.y,this.textAlign){case"left":d=p?s-l:0;break;case"center":d=(s-l)/2;break;case"right":d=p?0:s-l}for(d+=this.pathStartOffset*(p?-1:1),i=p?c.length-1:0;p?i>=0:i<c.length;p?i--:i++)o=u[i],d>s?d%=s:d<0&&(d+=s),this._setGraphemeOnPath(d,o,a),d+=o.kernedWidth}return{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(e,i,n){var r=e+i.kernedWidth/2,o=this.path,a=t.util.getPointOnPath(o.path,r,o.segmentsInfo);i.renderLeft=a.x-n.x,i.renderTop=a.y-n.y,i.angle=a.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(e,t,i,n,r){var o,a=this.getCompleteStyleDeclaration(t,i),s=n?this.getCompleteStyleDeclaration(t,i-1):{},l=this._measureChar(e,a,n,s),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(u+=o=this._getWidthOfCharSpacing(),c+=o);var d={width:u,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(i>0&&!r){var h=this.__charBounds[t][i-1];d.left=h.left+h.width+l.kernedWidth-l.width}return d},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],i=this.getHeightOfChar(e,0),n=1,r=t.length;n<r;n++)i=Math.max(this.getHeightOfChar(e,n),i);return this.__lineHeights[e]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,i=0,n=this._textLines.length;i<n;i++)e=this.getHeightOfLine(i),t+=i===n-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var i=0,n=this._getLeftOffset(),r=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this.getHeightOfLine(o),l=s/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],n+c,r+i+l,o),i+=s}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,i,n,r,o,a){var s,l,c,u,d,h=this.getHeightOfLine(a),p=-1!==this.textAlign.indexOf("justify"),f="",g=0,v=this.path,m=!p&&0===this.charSpacing&&this.isEmptyStyles(a)&&!v,A="ltr"===this.direction,b="ltr"===this.direction?1:-1,y=i.canvas.getAttribute("dir");if(i.save(),y!==this.direction&&(i.canvas.setAttribute("dir",A?"ltr":"rtl"),i.direction=A?"ltr":"rtl",i.textAlign=A?"left":"right"),o-=h*this._fontSizeFraction/this.lineHeight,m)return this._renderChar(e,i,a,0,n.join(""),r,o,h),void i.restore();for(var x=0,w=n.length-1;x<=w;x++)u=x===w||this.charSpacing||v,f+=n[x],c=this.__charBounds[a][x],0===g?(r+=b*(c.kernedWidth-c.width),g+=c.width):g+=c.kernedWidth,p&&!u&&this._reSpaceAndTab.test(n[x])&&(u=!0),u||(s=s||this.getCompleteStyleDeclaration(a,x),l=this.getCompleteStyleDeclaration(a,x+1),u=t.util.hasStyleChanged(s,l,!1)),u&&(v?(i.save(),i.translate(c.renderLeft,c.renderTop),i.rotate(c.angle),this._renderChar(e,i,a,x,f,-g/2,0,h),i.restore()):(d=r,this._renderChar(e,i,a,x,f,d,o,h)),f="",s=l,r+=b*g,g=0);i.restore()},_applyPatternGradientTransformText:function(e){var i,n=t.util.createCanvasElement(),r=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return n.width=r,n.height=o,(i=n.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(r,o),i.lineTo(0,o),i.closePath(),i.translate(r/2,o/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(n,"no-repeat")},handleFiller:function(e,t,i){var n,r;return i.toLive?"percentage"===i.gradientUnits||i.gradientTransform||i.patternTransform?(n=-this.width/2,r=-this.height/2,e.translate(n,r),e[t]=this._applyPatternGradientTransformText(i),{offsetX:n,offsetY:r}):(e[t]=i.toLive(e,this),this._applyPatternGradientTransform(e,i)):(e[t]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,i,n,r,o,a){var s,l,c=this._getStyleDeclaration(i,n),u=this.getCompleteStyleDeclaration(i,n),d="fillText"===e&&u.fill,h="strokeText"===e&&u.stroke&&u.strokeWidth;(h||d)&&(t.save(),d&&(s=this._setFillStyles(t,u)),h&&(l=this._setStrokeStyles(t,u)),t.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(t),c&&c.deltaY&&(a+=c.deltaY),d&&t.fillText(r,o-s.offsetX,a-s.offsetY),h&&t.strokeText(r,o-l.offsetX,a-l.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,i){var n=this.get2DCursorLocation(e,!0),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),a={fontSize:r*i.size,deltaY:o+r*i.baseline};return this.setSelectionStyles(a,e,t),this},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),i=this.width-t,n=this.textAlign,r=this.direction,o=0,a=this.isEndOfWrapping(e);return"justify"===n||"justify-center"===n&&!a||"justify-right"===n&&!a||"justify-left"===n&&!a?0:("center"===n&&(o=i/2),"right"===n&&(o=i),"justify-center"===n&&(o=i/2),"justify-right"===n&&(o=i),"rtl"===r&&(o-=i),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];var t=this.measureLine(e).width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,i){var n=this._getStyleDeclaration(e,t);return n&&void 0!==n[i]?n[i]:this[i]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var i,n,r,o,a,s,l,c,u,d,h,p,f,g,v,m,A=this._getLeftOffset(),b=this._getTopOffset(),y=this.path,x=this._getWidthOfCharSpacing(),w=this.offsets[t],_=0,C=this._textLines.length;_<C;_++)if(i=this.getHeightOfLine(_),this[t]||this.styleHas(t,_)){l=this._textLines[_],g=i/this.lineHeight,o=this._getLineLeftOffset(_),d=0,h=0,c=this.getValueOfPropertyAt(_,0,t),m=this.getValueOfPropertyAt(_,0,"fill"),u=b+g*(1-this._fontSizeFraction),n=this.getHeightOfChar(_,0),a=this.getValueOfPropertyAt(_,0,"deltaY");for(var k=0,E=l.length;k<E;k++)if(p=this.__charBounds[_][k],f=this.getValueOfPropertyAt(_,k,t),v=this.getValueOfPropertyAt(_,k,"fill"),r=this.getHeightOfChar(_,k),s=this.getValueOfPropertyAt(_,k,"deltaY"),y&&f&&v)e.save(),e.fillStyle=m,e.translate(p.renderLeft,p.renderTop),e.rotate(p.angle),e.fillRect(-p.kernedWidth/2,w*r+s,p.kernedWidth,this.fontSize/15),e.restore();else if((f!==c||v!==m||r!==n||s!==a)&&h>0){var S=A+o+d;"rtl"===this.direction&&(S=this.width-S-h),c&&m&&(e.fillStyle=m,e.fillRect(S,u+w*n+a,h,this.fontSize/15)),d=p.left,h=p.width,c=f,m=v,n=r,a=s}else h+=p.kernedWidth;S=A+o+d,"rtl"===this.direction&&(S=this.width-S-h),e.fillStyle=v,f&&v&&e.fillRect(S,u+w*n+a,h-x,this.fontSize/15),b+=i}else b+=i;this._removeShadow(e)}},_getFontDeclaration:function(e,i){var n=e||this,r=this.fontFamily,o=t.Text.genericFonts.indexOf(r.toLowerCase())>-1,a=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?n.fontFamily:'"'+n.fontFamily+'"';return[t.isLikelyNode?n.fontWeight:n.fontStyle,t.isLikelyNode?n.fontStyle:n.fontWeight,i?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",a].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var i=e.split(this._reNewline),n=new Array(i.length),r=["\n"],o=[],a=0;a<i.length;a++)n[a]=t.util.string.graphemeSplit(i[a]),o=o.concat(n[a],r);return o.pop(),{_unwrappedLines:n,lines:i,graphemeText:o,graphemeLines:n}},toObject:function(e){var i=n.concat(e),r=this.callSuper("toObject",i);return r.styles=t.util.stylesToArray(this.styles,this.text),r.path&&(r.path=this.path.toObject()),r},set:function(e,t){this.callSuper("set",e,t);var i=!1,n=!1;if("object"==typeof e)for(var r in e)"path"===r&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(r),n=n||"path"===r;else i=-1!==this._dimensionAffectingProps.indexOf(e),n="path"===e;return n&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,n,r){if(!e)return n(null);var o=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),a=o.textAnchor||"left";if((r=t.util.object.extend(r?i(r):{},o)).top=r.top||0,r.left=r.left||0,o.textDecoration){var s=o.textDecoration;-1!==s.indexOf("underline")&&(r.underline=!0),-1!==s.indexOf("overline")&&(r.overline=!0),-1!==s.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in e?l=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(l=e.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var u=new t.Text(l,r),d=u.getScaledHeight()/u.height,h=((u.height+u.strokeWidth)*u.lineHeight-u.height)*d,p=u.getScaledHeight()+h,f=0;"center"===a&&(f=u.getScaledWidth()/2),"right"===a&&(f=u.getScaledWidth()),u.set({left:u.left-f,top:u.top-(p-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:void 0!==c?c:1}),n(u)},t.Text.fromObject=function(e,n){var r=i(e),o=e.path;return delete r.path,t.Object._fromObject("Text",r,(function(i){i.styles=t.util.stylesFromArray(e.styles,e.text),o?t.Object._fromObject("Path",o,(function(e){i.set("path",e),n(i)}),"path"):n(i)}),"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text)}}(e),b.util.object.extend(b.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;var t=void 0===e?this.styles:{line:this.styles[e]};for(var i in t)for(var n in t[i])for(var r in t[i][n])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if(void 0!==t&&!this.styles[t])return!1;var i=void 0===t?this.styles:{0:this.styles[t]};for(var n in i)for(var r in i[n])if(void 0!==i[n][r][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,i,n=this.styles,r=0,o=!0,a=0;for(var s in n){for(var l in t=0,n[s]){var c;r++,(c=n[s][l]).hasOwnProperty(e)?(i?c[e]!==i&&(o=!1):i=c[e],c[e]===this[e]&&delete c[e]):o=!1,0!==Object.keys(c).length?t++:delete n[s][l]}0===t&&delete n[s]}for(var u=0;u<this._textLines.length;u++)a+=this._textLines[u].length;o&&r===a&&(this[e]=i,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,i,n,r=this.styles;for(i in r){for(n in t=r[i])delete t[n][e],0===Object.keys(t[n]).length&&delete t[n];0===Object.keys(t).length&&delete r[i]}}},_extendStyles:function(e,t){var i=this.get2DCursorLocation(e);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),b.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),t)},get2DCursorLocation:function(e,t){void 0===e&&(e=this.selectionStart);for(var i=t?this._unwrappedTextLines:this._textLines,n=i.length,r=0;r<n;r++){if(e<=i[r].length)return{lineIndex:r,charIndex:e};e-=i[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:i[r-1].length<e?i[r-1].length:e}},getSelectionStyles:function(e,t,i){void 0===e&&(e=this.selectionStart||0),void 0===t&&(t=this.selectionEnd||e);for(var n=[],r=e;r<t;r++)n.push(this.getStyleAtPosition(r,i));return n},getStyleAtPosition:function(e,t){var i=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex))||{}},setSelectionStyles:function(e,t,i){void 0===t&&(t=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||t);for(var n=t;n<i;n++)this._extendStyles(n,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var i=this.styles&&this.styles[e];return i?i[t]:null},getCompleteStyleDeclaration:function(e,t){for(var i,n=this._getStyleDeclaration(e,t)||{},r={},o=0;o<this._styleProperties.length;o++)r[i=this._styleProperties[o]]=void 0===n[i]?this[i]:n[i];return r},_setStyleDeclaration:function(e,t,i){this.styles[e][t]=i},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}b.IText=b.util.createClass(b.Text,b.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,i=this.canvas.viewportTransform;t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(t),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,i=this.height+4;e.clearRect(-t/2,-i/2,t,i)},_getCursorBoundaries:function(e){void 0===e&&(e=this.selectionStart);var t=this._getLeftOffset(),i=this._getTopOffset(),n=this._getCursorBoundariesOffsets(e);return{left:t,top:i,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,i,n,r,o=0,a=0,s=this.get2DCursorLocation(e);n=s.charIndex,i=s.lineIndex;for(var l=0;l<i;l++)o+=this.getHeightOfLine(l);t=this._getLineLeftOffset(i);var c=this.__charBounds[i][n];return c&&(a=c.left),0!==this.charSpacing&&n===this._textLines[i].length&&(a-=this._getWidthOfCharSpacing()),r={top:o,left:t+(a>0?a:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(e,t){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex>0?i.charIndex-1:0,o=this.getValueOfPropertyAt(n,r,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,l=e.topOffset,c=this.getValueOfPropertyAt(n,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-s/2,l+e.top+c,s,o)},renderSelection:function(e,t){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(i),a=this.get2DCursorLocation(n),s=o.lineIndex,l=a.lineIndex,c=o.charIndex<0?0:o.charIndex,u=a.charIndex<0?0:a.charIndex,d=s;d<=l;d++){var h,p=this._getLineLeftOffset(d)||0,f=this.getHeightOfLine(d),g=0,v=0;if(d===s&&(g=this.__charBounds[s][c].left),d>=s&&d<l)v=r&&!this.isEndOfWrapping(d)?this.width:this.getLineWidth(d)||5;else if(d===l)if(0===u)v=this.__charBounds[l][u].left;else{var m=this._getWidthOfCharSpacing();v=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-m}h=f,(this.lineHeight<1||d===l&&this.lineHeight>1)&&(f/=this.lineHeight);var A=e.left+p+g,b=v-g,y=f,x=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",y=1,x=f):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(A=this.width-A-b),t.fillRect(A,e.top+e.topOffset+x,b,y),e.topOffset+=h}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),b.IText.fromObject=function(t,i){var n=b.util.stylesFromArray(t.styles,t.text),r=Object.assign({},t,{styles:n});if(e(r),r.styles)for(var o in r.styles)for(var a in r.styles[o])e(r.styles[o][a]);b.Object._fromObject("IText",r,i,"text")}}(),function(){var e=b.util.object.clone;b.util.object.extend(b.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],b.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:i,onComplete:function(){r.isAborted||e[n]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this,i=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),i)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,i=e-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)t++,i--;for(;/\S/.test(this._text[i])&&i>-1;)t++,i--;return e-t},findWordBoundaryRight:function(e){var t=0,i=e;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)t++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)t++,i++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,i=e-1;!/\n/.test(this._text[i])&&i>-1;)t++,i--;return e-t},findLineBoundaryRight:function(e){for(var t=0,i=e;!/\n/.test(this._text[i])&&i<this._text.length;)t++,i++;return e+t},searchWordBoundary:function(e,t){for(var i=this._text,n=this._reSpace.test(i[e])?e-1:e,r=i[n],o=b.reNonWord;!o.test(r)&&n>0&&n<i.length;)r=i[n+=t];return o.test(r)&&(n+=1===t?0:1),n},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),i=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var t=this.getSelectionStartFromPointer(e.e),i=this.selectionStart,n=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&i!==n||i!==t&&n!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,i){var n=i.slice(0,e),r=b.util.string.graphemeSplit(n).length;if(e===t)return{selectionStart:r,selectionEnd:r};var o=i.slice(e,t);return{selectionStart:r,selectionEnd:r+b.util.string.graphemeSplit(o).length}},fromGraphemeToStringSelection:function(e,t,i){var n=i.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+i.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),i=this.get2DCursorLocation(e),n=i.lineIndex,r=i.charIndex,o=this.getValueOfPropertyAt(n,r,"fontSize")*this.lineHeight,a=t.leftOffset,s=this.calcTransformMatrix(),l={x:t.left+a,y:t.top+t.topOffset+o},c=this.canvas.getRetinaScaling(),u=this.canvas.upperCanvasEl,d=u.width/c,h=u.height/c,p=d-o,f=h-o,g=u.clientWidth/d,v=u.clientHeight/h;return l=b.util.transformPoint(l,s),(l=b.util.transformPoint(l,this.canvas.viewportTransform)).x*=g,l.y*=v,l.x<0&&(l.x=0),l.x>p&&(l.x=p),l.y<0&&(l.y=0),l.y>f&&(l.y=f),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:o+"px",charHeight:o}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var i,n,r=this.get2DCursorLocation(e,!0),o=this.get2DCursorLocation(t,!0),a=r.lineIndex,s=r.charIndex,l=o.lineIndex,c=o.charIndex;if(a!==l){if(this.styles[a])for(i=s;i<this._unwrappedTextLines[a].length;i++)delete this.styles[a][i];if(this.styles[l])for(i=c;i<this._unwrappedTextLines[l].length;i++)(n=this.styles[l][i])&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+i-c]=n);for(i=a+1;i<=l;i++)delete this.styles[i];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){n=this.styles[a];var u,d,h=c-s;for(i=s;i<c;i++)delete n[i];for(d in this.styles[a])(u=parseInt(d,10))>=c&&(n[u-h]=n[d],delete n[d])}},shiftLineStyles:function(t,i){var n=e(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>t&&(this.styles[o+i]=n[o],n[o-i]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,i,n,r){var o,a={},s=!1,l=this._unwrappedTextLines[t].length===i;for(var c in n||(n=1),this.shiftLineStyles(t,n),this.styles[t]&&(o=this.styles[t][0===i?i:i-1]),this.styles[t]){var u=parseInt(c,10);u>=i&&(s=!0,a[u-i]=this.styles[t][c],l&&0===i||delete this.styles[t][c])}var d=!1;for(s&&!l&&(this.styles[t+n]=a,d=!0),d&&n--;n>0;)r&&r[n-1]?this.styles[t+n]={0:e(r[n-1])}:o?this.styles[t+n]={0:e(o)}:delete this.styles[t+n],n--;this._forceClearCache=!0},insertCharStyleObject:function(t,i,n,r){this.styles||(this.styles={});var o=this.styles[t],a=o?e(o):{};for(var s in n||(n=1),a){var l=parseInt(s,10);l>=i&&(o[l+n]=a[l],a[l-n]||delete o[l])}if(this._forceClearCache=!0,r)for(;n--;)Object.keys(r[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][i+n]=e(r[n]));else if(o)for(var c=o[i?i-1:1];c&&n--;)this.styles[t][i+n]=e(c)},insertNewStyleBlock:function(e,t,i){for(var n=this.get2DCursorLocation(t,!0),r=[0],o=0,a=0;a<e.length;a++)"\n"===e[a]?r[++o]=0:r[o]++;for(r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],i),i=i&&i.slice(r[0]+1)),o&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],o),a=1;a<o;a++)r[a]>0?this.insertCharStyleObject(n.lineIndex+a,0,r[a],i):i&&this.styles[n.lineIndex+a]&&i[0]&&(this.styles[n.lineIndex+a][0]=i[0]),i=i&&i.slice(r[a]+1);r[a]>0&&this.insertCharStyleObject(n.lineIndex+a,0,r[a],i)},setSelectionStartEndWithShift:function(e,t,i){i<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=i):i>e&&i<t?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=i)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),b.util.object.extend(b.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),i=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(i,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t,i=this.getLocalPointer(e),n=0,r=0,o=0,a=0,s=0,l=0,c=this._textLines.length;l<c&&o<=i.y;l++)o+=this.getHeightOfLine(l)*this.scaleY,s=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));r=this._getLineLeftOffset(s)*this.scaleX,t=this._textLines[s],"rtl"===this.direction&&(i.x=this.width*this.scaleX-i.x+r);for(var u=0,d=t.length;u<d&&(n=r,(r+=this.__charBounds[s][u].kernedWidth*this.scaleX)<=i.x);u++)a++;return this._getNewSelectionStartFromOffset(i,n,r,a,d)},_getNewSelectionStartFromOffset:function(e,t,i,n,r){var o=e.x-t,a=i-e.x,s=n+(a>o||a<0?0:1);return this.flipX&&(s=r-s),s>this._text.length&&(s=this._text.length),s}}),b.util.object.extend(b.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=b.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+e.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):b.document.body.appendChild(this.hiddenTextarea),b.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),b.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),b.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),b.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),b.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),b.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),b.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),b.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),b.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(b.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var i,n,r,o,a,s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,c=s.length,u=c-l,d=this.selectionStart,h=this.selectionEnd,p=d!==h;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),g=d>f.selectionStart;p?(i=this._text.slice(d,h),u+=h-d):c<l&&(i=g?this._text.slice(h+u,h):this._text.slice(d,d-u)),n=s.slice(f.selectionEnd-u,f.selectionEnd),i&&i.length&&(n.length&&(r=this.getSelectionStyles(d,d+1,!1),r=n.map((function(){return r[0]}))),p?(o=d,a=h):g?(o=h-i.length,a=h):(o=h,a=h+i.length),this.removeStyleFromTo(o,a)),n.length&&(t&&n.join("")===b.copiedText&&!b.disableStyleCopyPaste&&(r=b.copiedTextStyle),this.insertNewStyleBlock(n,d,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(b.copiedText=this.getSelectedText(),b.disableStyleCopyPaste?b.copiedTextStyle=null:b.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||b.window.clipboardData},_getWidthBeforeCursor:function(e,t){var i,n=this._getLineLeftOffset(e);return t>0&&(n+=(i=this.__charBounds[e][t-1]).left+i.width),n},getDownCursorOffset:function(e,t){var i=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(i),r=n.lineIndex;if(r===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-i;var o=n.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(o).length+s+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var i=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||e.metaKey||33===e.keyCode)return-i;var o=n.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+s-l.length+(1-c)},_getIndexOnLine:function(e,t){for(var i,n,r=this._textLines[e],o=this._getLineLeftOffset(e),a=0,s=0,l=r.length;s<l;s++)if((o+=i=this.__charBounds[e][s].width)>t){n=!0;var c=o-i,u=o,d=Math.abs(c-t);a=Math.abs(u-t)<d?s:s-1;break}return n||(a=r.length-1),a},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var i=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,i){var n;if(e.altKey)n=this["findWordBoundary"+i](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[t])}if(void 0!==n&&this[t]!==n)return this[t]=n,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var i="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?i+="Shift":i+="outShift",this[i](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){void 0===t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,i,n){void 0===n&&(n=i),n>i&&this.removeStyleFromTo(i,n);var r=b.util.string.graphemeSplit(e);this.insertNewStyleBlock(r,i,t),this._text=[].concat(this._text.slice(0,i),r,this._text.slice(n)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var e=b.util.toFixed,t=/  +/g;b.util.object.extend(b.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var i,n=[],r=[],o=e;this._setSVGBg(r);for(var a=0,s=this._textLines.length;a<s;a++)i=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(r,a,t+i,o),this._setSVGTextLineText(n,a,t+i,o),o+=this.getHeightOfLine(a);return{textSpans:n,textBgRects:r}},_createTextCharSpan:function(i,n,r,o){var a=i!==i.trim()||i.match(t),s=this.getSvgSpanStyles(n,a),l=s?'style="'+s+'"':"",c=n.deltaY,u="",d=b.Object.NUM_FRACTION_DIGITS;return c&&(u=' dy="'+e(c,d)+'" '),['<tspan x="',e(r,d),'" y="',e(o,d),'" ',u,l,">",b.util.string.escapeXml(i),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,i,n){var r,o,a,s,l,c=this.getHeightOfLine(t),u=-1!==this.textAlign.indexOf("justify"),d="",h=0,p=this._textLines[t];n+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var f=0,g=p.length-1;f<=g;f++)l=f===g||this.charSpacing,d+=p[f],a=this.__charBounds[t][f],0===h?(i+=a.kernedWidth-a.width,h+=a.width):h+=a.kernedWidth,u&&!l&&this._reSpaceAndTab.test(p[f])&&(l=!0),l||(r=r||this.getCompleteStyleDeclaration(t,f),o=this.getCompleteStyleDeclaration(t,f+1),l=b.util.hasStyleChanged(r,o,!0)),l&&(s=this._getStyleDeclaration(t,f)||{},e.push(this._createTextCharSpan(d,s,i,n)),d="",r=o,i+=h,h=0)},_pushTextBgRect:function(t,i,n,r,o,a){var s=b.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(i),' x="',e(n,s),'" y="',e(r,s),'" width="',e(o,s),'" height="',e(a,s),'"></rect>\n')},_setSVGTextLineBg:function(e,t,i,n){for(var r,o,a=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),d=0,h=a.length;d<h;d++)r=this.__charBounds[t][d],(o=this.getValueOfPropertyAt(t,d,"textBackgroundColor"))!==u?(u&&this._pushTextBgRect(e,u,i+c,n,l,s),c=r.left,l=r.width,u=o):l+=r.kernedWidth;o&&this._pushTextBgRect(e,o,i+c,n,l,s)},_getFillAttributes:function(e){var t=e&&"string"==typeof e?new b.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,i=0,n=0;n<e;n++)i+=this.getHeightOfLine(n);return t=this.getHeightOfLine(n),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return b.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}})}(),function(e){var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,i=0,n=0,r={},o=0;o<e.graphemeLines.length;o++)"\n"===e.graphemeText[n]&&o>0?(i=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&o>0&&(i++,n++),r[o]={line:t,offset:i},n+=e.graphemeLines[o].length,i+=e.graphemeLines[o].length;return r},styleHas:function(e,i){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[i];n&&(i=n.line)}return t.Text.prototype.styleHas.call(this,e,i)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,i,n=0,r=!1,o=this._styleMap[e],a=this._styleMap[e+1];for(var s in o&&(e=o.line,n=o.offset),a&&(r=a.line===e,t=a.offset),i=void 0===e?this.styles:{line:this.styles[e]})for(var l in i[s])if(l>=n&&(!r||l<t))for(var c in i[s][l])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[e];if(!i)return null;e=i.line,t=i.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,i){var n=this._styleMap[e];e=n.line,t=n.offset+t,this.styles[e][t]=i},_deleteStyleDeclaration:function(e,t){var i=this._styleMap[e];e=i.line,t=i.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var i,n=[];for(this.isWrapping=!0,i=0;i<e.length;i++)n=n.concat(this._wrapLine(e[i],i,t));return this.isWrapping=!1,n},_measureWord:function(e,t,i){var n,r=0;i=i||0;for(var o=0,a=e.length;o<a;o++)r+=this._getGraphemeBox(e[o],t,o+i,n,!0).kernedWidth,n=e[o];return r},_wrapLine:function(e,i,n,r){var o=0,a=this.splitByGrapheme,s=[],l=[],c=a?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),u="",d=0,h=a?"":" ",p=0,f=0,g=0,v=!0,m=this._getWidthOfCharSpacing();r=r||0,0===c.length&&c.push([]),n-=r;for(var A=0;A<c.length;A++)u=a?c[A]:t.util.string.graphemeSplit(c[A]),p=this._measureWord(u,i,d),d+=u.length,(o+=f+p-m)>n&&!v?(s.push(l),l=[],o=p,v=!0):o+=m,v||a||l.push(h),l=l.concat(u),f=a?0:this._measureWord([h],i,d),d++,v=!1,p>g&&(g=p);return A&&s.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+r),s},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var i=t.Text.prototype._splitTextIntoLines.call(this,e),n=this._wrapText(i.lines,this.width),r=new Array(n.length),o=0;o<n.length;o++)r[o]=n[o].join("");return i.lines=r,i.graphemeLines=n,i},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,i){var n=t.util.stylesFromArray(e.styles,e.text),r=Object.assign({},e,{styles:n});return t.Object._fromObject("Textbox",r,i,"text")}}(e),function(){var e=b.controlsUtils,t=e.scaleSkewCursorStyleHandler,i=e.scaleCursorStyleHandler,n=e.scalingEqually,r=e.scalingYOrSkewingX,o=e.scalingXOrSkewingY,a=e.scaleOrSkewActionName,s=b.Object.prototype.controls;if(s.ml=new b.Control({x:-.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:a}),s.mr=new b.Control({x:.5,y:0,cursorStyleHandler:t,actionHandler:o,getActionName:a}),s.mb=new b.Control({x:0,y:.5,cursorStyleHandler:t,actionHandler:r,getActionName:a}),s.mt=new b.Control({x:0,y:-.5,cursorStyleHandler:t,actionHandler:r,getActionName:a}),s.tl=new b.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:n}),s.tr=new b.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:n}),s.bl=new b.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:n}),s.br=new b.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:n}),s.mtr=new b.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),b.Textbox){var l=b.Textbox.prototype.controls={};l.mtr=s.mtr,l.tr=s.tr,l.br=s.br,l.tl=s.tl,l.bl=s.bl,l.mt=s.mt,l.mb=s.mb,l.mr=new b.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"}),l.ml=new b.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"})}}()}(Tm);var Dm,Mm={exports:{}},Qm="object"==typeof Reflect?Reflect:null,Lm=Qm&&"function"==typeof Qm.apply?Qm.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};Dm=Qm&&"function"==typeof Qm.ownKeys?Qm.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var jm=Number.isNaN||function(e){return e!=e};function Pm(){Pm.init.call(this)}Mm.exports=Pm,Mm.exports.once=function(e,t){return new Promise((function(i,n){function r(i){e.removeListener(t,o),n(i)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}Wm(e,t,o,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&Wm(e,"error",t,i)}(e,r,{once:!0})}))},Pm.EventEmitter=Pm,Pm.prototype._events=void 0,Pm.prototype._eventsCount=0,Pm.prototype._maxListeners=void 0;var Fm=10;function Rm(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function zm(e){return void 0===e._maxListeners?Pm.defaultMaxListeners:e._maxListeners}function Nm(e,t,i,n){var r,o,a;if(Rm(i),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),o=e._events),a=o[t]),void 0===a)a=o[t]=i,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=zm(e))>0&&a.length>r&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn}return e}function Vm(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Um(e,t,i){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=Vm.bind(n);return r.listener=i,n.wrapFn=r,r}function Hm(e,t,i){var n=e._events;if(void 0===n)return[];var r=n[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):Ym(r,r.length)}function Gm(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function Ym(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function Wm(e,t,i,n){if("function"==typeof e.on)n.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){n.once&&e.removeEventListener(t,r),i(o)}))}}Object.defineProperty(Pm,"defaultMaxListeners",{enumerable:!0,get:function(){return Fm},set:function(e){if("number"!=typeof e||e<0||jm(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Fm=e}}),Pm.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Pm.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||jm(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Pm.prototype.getMaxListeners=function(){return zm(this)},Pm.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=r[e];if(void 0===s)return!1;if("function"==typeof s)Lm(s,this,t);else{var l=s.length,c=Ym(s,l);for(i=0;i<l;++i)Lm(c[i],this,t)}return!0},Pm.prototype.addListener=function(e,t){return Nm(this,e,t,!1)},Pm.prototype.on=Pm.prototype.addListener,Pm.prototype.prependListener=function(e,t){return Nm(this,e,t,!0)},Pm.prototype.once=function(e,t){return Rm(t),this.on(e,Um(this,e,t)),this},Pm.prototype.prependOnceListener=function(e,t){return Rm(t),this.prependListener(e,Um(this,e,t)),this},Pm.prototype.removeListener=function(e,t){var i,n,r,o,a;if(Rm(t),void 0===(n=this._events))return this;if(void 0===(i=n[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===t||i[o].listener===t){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(n[e]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},Pm.prototype.off=Pm.prototype.removeListener,Pm.prototype.removeAllListeners=function(e){var t,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},Pm.prototype.listeners=function(e){return Hm(this,e,!0)},Pm.prototype.rawListeners=function(e){return Hm(this,e,!1)},Pm.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Gm.call(e,t)},Pm.prototype.listenerCount=Gm,Pm.prototype.eventNames=function(){return this._eventsCount>0?Dm(this._events):[]};var Xm=Mm.exports;const $m=un(Xm),qm="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;
/**! 
       * hotkeys-js v3.13.7 
       * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies. 
       * 
       * Copyright (c) 2024 kenny wong <wowohoo@qq.com> 
       * https://github.com/jaywcjlove/hotkeys-js.git 
       * 
       * @website: https://jaywcjlove.github.io/hotkeys-js
       
       * Licensed under the MIT license 
       */function Km(e,t,i,n){e.addEventListener?e.addEventListener(t,i,n):e.attachEvent&&e.attachEvent("on".concat(t),i)}function Jm(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&e.detachEvent("on".concat(t),i)}function Zm(e,t){const i=t.slice(0,t.length-1);for(let n=0;n<i.length;n++)i[n]=e[i[n].toLowerCase()];return i}function eA(e){"string"!=typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let i=t.lastIndexOf("");for(;i>=0;)t[i-1]+=",",t.splice(i,1),i=t.lastIndexOf("");return t}const tA={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":qm?173:189,"=":qm?61:187,";":qm?59:186,"'":222,"[":219,"]":221,"\\":220},iA={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},nA={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},rA={16:!1,18:!1,17:!1,91:!1},oA={};for(let e=1;e<20;e++)tA["f".concat(e)]=111+e;let aA=[],sA=null,lA="all";const cA=new Map,uA=e=>tA[e.toLowerCase()]||iA[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function dA(e){lA=e||"all"}function hA(){return lA||"all"}function pA(e){if(void 0===e)Object.keys(oA).forEach((e=>{Array.isArray(oA[e])&&oA[e].forEach((e=>fA(e))),delete oA[e]})),AA(null);else if(Array.isArray(e))e.forEach((e=>{e.key&&fA(e)}));else if("object"==typeof e)e.key&&fA(e);else if("string"==typeof e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let[r,o]=i;"function"==typeof r&&(o=r,r=""),fA({key:e,scope:r,method:o,splitKey:"+"})}}const fA=e=>{let{key:t,scope:i,method:n,splitKey:r="+"}=e;eA(t).forEach((e=>{const t=e.split(r),o=t.length,a=t[o-1],s="*"===a?"*":uA(a);if(!oA[s])return;i||(i=hA());const l=o>1?Zm(iA,t):[],c=[];oA[s]=oA[s].filter((e=>{const t=(!n||e.method===n)&&e.scope===i&&function(e,t){const i=e.length>=t.length?e:t,n=e.length>=t.length?t:e;let r=!0;for(let o=0;o<i.length;o++)-1===n.indexOf(i[o])&&(r=!1);return r}(e.mods,l);return t&&c.push(e.element),!t})),c.forEach((e=>AA(e)))}))};function gA(e,t,i,n){if(t.element!==n)return;let r;if(t.scope===i||"all"===t.scope){r=t.mods.length>0;for(const e in rA)Object.prototype.hasOwnProperty.call(rA,e)&&(!rA[e]&&t.mods.indexOf(+e)>-1||rA[e]&&-1===t.mods.indexOf(+e))&&(r=!1);(0!==t.mods.length||rA[16]||rA[18]||rA[17]||rA[91])&&!r&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat(aA),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function vA(e,t){const i=oA["*"];let n=e.keyCode||e.which||e.charCode;if(!mA.filter.call(this,e))return;if(93!==n&&224!==n||(n=91),-1===aA.indexOf(n)&&229!==n&&aA.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((t=>{const i=nA[t];e[t]&&-1===aA.indexOf(i)?aA.push(i):!e[t]&&aA.indexOf(i)>-1?aA.splice(aA.indexOf(i),1):"metaKey"===t&&e[t]&&3===aA.length&&(e.ctrlKey||e.shiftKey||e.altKey||(aA=aA.slice(aA.indexOf(i))))})),n in rA){rA[n]=!0;for(const e in iA)iA[e]===n&&(mA[e]=!0);if(!i)return}for(const s in rA)Object.prototype.hasOwnProperty.call(rA,s)&&(rA[s]=e[nA[s]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===aA.indexOf(17)&&aA.push(17),-1===aA.indexOf(18)&&aA.push(18),rA[17]=!0,rA[18]=!0);const r=hA();if(i)for(let s=0;s<i.length;s++)i[s].scope===r&&("keydown"===e.type&&i[s].keydown||"keyup"===e.type&&i[s].keyup)&&gA(e,i[s],r,t);if(!(n in oA))return;const o=oA[n],a=o.length;for(let s=0;s<a;s++)if(("keydown"===e.type&&o[s].keydown||"keyup"===e.type&&o[s].keyup)&&o[s].key){const i=o[s],{splitKey:n}=i,a=i.key.split(n),l=[];for(let e=0;e<a.length;e++)l.push(uA(a[e]));l.sort().join("")===aA.sort().join("")&&gA(e,i,r,t)}}function mA(e,t,i){aA=[];const n=eA(e);let r=[],o="all",a=document,s=0,l=!1,c=!0,u="+",d=!1,h=!1;for(void 0===i&&"function"==typeof t&&(i=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(o=t.scope),t.element&&(a=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(c=t.keydown),void 0!==t.capture&&(d=t.capture),"string"==typeof t.splitKey&&(u=t.splitKey),!0===t.single&&(h=!0)),"string"==typeof t&&(o=t),h&&pA(e,o);s<n.length;s++)r=[],(e=n[s].split(u)).length>1&&(r=Zm(iA,e)),(e="*"===(e=e[e.length-1])?"*":uA(e))in oA||(oA[e]=[]),oA[e].push({keyup:l,keydown:c,scope:o,mods:r,shortcut:n[s],method:i,key:n[s],splitKey:u,element:a});if(void 0!==a&&window){if(!cA.has(a)){const e=function(){return vA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,a)},t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;vA(e,a),function(e){let t=e.keyCode||e.which||e.charCode;const i=aA.indexOf(t);if(i>=0&&aA.splice(i,1),e.key&&"meta"===e.key.toLowerCase()&&aA.splice(0,aA.length),93!==t&&224!==t||(t=91),t in rA){rA[t]=!1;for(const e in iA)iA[e]===t&&(mA[e]=!1)}}(e)};cA.set(a,{keydownListener:e,keyupListenr:t,capture:d}),Km(a,"keydown",e,d),Km(a,"keyup",t,d)}if(!sA){const e=()=>{aA=[]};sA={listener:e,capture:d},Km(window,"focus",e,d)}}}function AA(e){const t=Object.values(oA).flat();if(t.findIndex((t=>{let{element:i}=t;return i===e}))<0){const{keydownListener:t,keyupListenr:i,capture:n}=cA.get(e)||{};t&&i&&(Jm(e,"keyup",i,n),Jm(e,"keydown",t,n),cA.delete(e))}if((t.length<=0||cA.size<=0)&&(Object.keys(cA).forEach((e=>{const{keydownListener:t,keyupListenr:i,capture:n}=cA.get(e)||{};t&&i&&(Jm(e,"keyup",i,n),Jm(e,"keydown",t,n),cA.delete(e))})),cA.clear(),Object.keys(oA).forEach((e=>delete oA[e])),sA)){const{listener:e,capture:t}=sA;Jm(window,"focus",e,t),sA=null}}const bA={getPressedKeyString:function(){return aA.map((e=>{return t=e,Object.keys(tA).find((e=>tA[e]===t))||(e=>Object.keys(iA).find((t=>iA[t]===e)))(e)||String.fromCharCode(e);var t}))},setScope:dA,getScope:hA,deleteScope:function(e,t){let i,n;e||(e=hA());for(const r in oA)if(Object.prototype.hasOwnProperty.call(oA,r))for(i=oA[r],n=0;n<i.length;)i[n].scope===e?i.splice(n,1).forEach((e=>{let{element:t}=e;return AA(t)})):n++;hA()===e&&dA(t||"all")},getPressedKeyCodes:function(){return aA.slice(0)},getAllKeyCodes:function(){const e=[];return Object.keys(oA).forEach((t=>{oA[t].forEach((t=>{let{key:i,scope:n,mods:r,shortcut:o}=t;e.push({scope:n,shortcut:o,mods:r,keys:i.split("+").map((e=>uA(e)))})}))})),e},isPressed:function(e){return"string"==typeof e&&(e=uA(e)),-1!==aA.indexOf(e)},filter:function(e){const t=e.target||e.srcElement,{tagName:i}=t;let n=!0;const r="INPUT"===i&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(r||"TEXTAREA"===i||"SELECT"===i)&&!t.readOnly)&&(n=!1),n},trigger:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(oA).forEach((i=>{oA[i].filter((i=>i.scope===t&&i.shortcut===e)).forEach((e=>{e&&e.method&&e.method()}))}))},unbind:pA,keyMap:tA,modifier:iA,modifierMap:nA};for(const e in bA)Object.prototype.hasOwnProperty.call(bA,e)&&(mA[e]=bA[e]);if("undefined"!=typeof window){const e=window.hotkeys;mA.noConflict=t=>(t&&window.hotkeys===mA&&(window.hotkeys=e),mA),window.hotkeys=mA}class yA{constructor(e,t){this.container=e,this.dom=null,this.shown=!1,this.root=!0,this.parent=null,this.submenus=[],this.items=t,this._onclick=e=>{!this.dom||e.target==this.dom||e.target.parentElement==this.dom||e.target.classList.contains("item")||e.target.parentElement.classList.contains("item")||this.hideAll()},this._oncontextmenu=e=>{e.preventDefault(),e.target==this.dom||e.target.parentElement==this.dom||e.target.classList.contains("item")||e.target.parentElement.classList.contains("item")||(this.hideAll(),this.show(e.clientX,e.clientY))},this._oncontextmenu_keydown=e=>{93==e.keyCode&&(e.preventDefault(),this.hideAll(),this.show(e.clientX,e.clientY))},this._onblur=()=>{this.hideAll()}}getMenuDom(){const e=document.createElement("div");e.classList.add("context");for(const t of this.items)e.appendChild(this.itemToDomEl(t));return e}itemToDomEl(e){const t=document.createElement("div");if(null===e)return t.classList="separator",t;e.hasOwnProperty("color")&&/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.color.toString())&&(t.style.cssText=`color: ${e.color}`),t.classList.add("item");const i=document.createElement("span");i.classList="label",i.innerText=e.hasOwnProperty("text")?e.text.toString():"",t.appendChild(i),e.hasOwnProperty("disabled")&&e.disabled?t.classList.add("disabled"):t.classList.add("enabled");const n=document.createElement("span");if(n.classList="hotkey",n.innerText=e.hasOwnProperty("hotkey")?e.hotkey.toString():"",t.appendChild(n),e.hasOwnProperty("subitems")&&Array.isArray(e.subitems)&&e.subitems.length>0){const i=new yA(this.container,e.subitems);i.root=!1,i.parent=this;const n=()=>{if(e.hasOwnProperty("disabled")&&1==e.disabled)return;this.hideSubMenus();const n=this.dom.offsetLeft+this.dom.clientWidth+t.offsetLeft,r=this.dom.offsetTop+t.offsetTop;i.shown?i.hide():i.show(n,r)};this.submenus.push(i),t.classList.add("has-subitems"),t.addEventListener("click",n),t.addEventListener("mousemove",n)}else if(e.hasOwnProperty("submenu")&&e.submenu instanceof yA){const i=e.submenu;i.root=!1,i.parent=this;const n=()=>{if(e.hasOwnProperty("disabled")&&1==e.disabled)return;this.hideSubMenus();const n=this.dom.offsetLeft+this.dom.clientWidth+t.offsetLeft,r=this.dom.offsetTop+t.offsetTop;i.shown?i.hide():i.show(n,r)};this.submenus.push(i),t.classList.add("has-subitems"),t.addEventListener("click",n),t.addEventListener("mousemove",n)}else t.addEventListener("click",(()=>{if(this.hideSubMenus(),!t.classList.contains("disabled"))if(e.hasOwnProperty("onclick")&&"function"==typeof e.onclick){const r={handled:!1,item:t,label:i,hotkey:n,items:this.items,data:e};e.onclick(r),r.handled||this.hide()}else this.hide()})),t.addEventListener("mousemove",(()=>{this.hideSubMenus()}));return t}hideAll(){!this.root||this.parent?this.parent.hide():this.shown&&(this.hideSubMenus(),this.shown=!1,this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hide(){this.dom&&this.shown&&(this.shown=!1,this.hideSubMenus(),this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hideSubMenus(){for(const e of this.submenus)e.shown&&(e.shown=!1,e.container.removeChild(e.dom)),e.hideSubMenus()}show(e,t){this.dom=this.getMenuDom(),this.dom.style.left=`${e}px`,this.dom.style.top=`${t}px`,this.shown=!0,this.container.appendChild(this.dom)}install(){this.container.addEventListener("contextmenu",this._oncontextmenu),this.container.addEventListener("keydown",this._oncontextmenu_keydown),this.container.addEventListener("click",this._onclick),window.addEventListener("blur",this._onblur)}setData(e){this.items=e}uninstall(){this.dom=null,this.container.removeEventListener("keydown",this._oncontextmenu_keydown),this.container.removeEventListener("click",this._onclick),window.removeEventListener("blur",this._onblur)}}for(var xA,wA=[],_A=0;_A<256;++_A)wA.push((_A+256).toString(16).slice(1));var CA=new Uint8Array(16);function kA(){if(!xA&&!(xA="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xA(CA)}const EA={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function SA(e,t,i){if(EA.randomUUID&&!t&&!e)return EA.randomUUID();var n=(e=e||{}).random||(e.rng||kA)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=n[r];return t}return function(e,t=0){return(wA[e[t+0]]+wA[e[t+1]]+wA[e[t+2]]+wA[e[t+3]]+"-"+wA[e[t+4]]+wA[e[t+5]]+"-"+wA[e[t+6]]+wA[e[t+7]]+"-"+wA[e[t+8]]+wA[e[t+9]]+"-"+wA[e[t+10]]+wA[e[t+11]]+wA[e[t+12]]+wA[e[t+13]]+wA[e[t+14]]+wA[e[t+15]]).toLowerCase()}(n)}var IA=(e=>(e.EMPTY="",e.ONE="one",e.MULTI="multiple",e))(IA||{}),BA=(e=>(e.ONE="selectOne",e.MULTI="selectMultiple",e.CANCEL="selectCancel",e))(BA||{});const OA={SelectMode:IA,SelectEvent:BA};function TA(e){return!!tr()&&(ir(e),!0)}function DA(e){return"function"==typeof e?e():tn(e)}const MA="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const QA=Object.prototype.toString,LA=()=>{};function jA(e,t=!0,i){cn()?qi(e,i):t?e():gn(e)}function PA(e){var t;const i=DA(e);return null!=(t=null==i?void 0:i.$el)?t:i}const FA=MA?window:void 0,RA=MA?window.document:void 0,zA=MA?window.navigator:void 0;function NA(...e){let t,i,n,r;if("string"==typeof e[0]||Array.isArray(e[0])?([i,n,r]=e,t=FA):[t,i,n,r]=e,!t)return LA;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);const o=[],a=()=>{o.forEach((e=>e())),o.length=0},s=fn((()=>[PA(t),DA(r)]),(([e,t])=>{if(a(),!e)return;const r=(s=t,"[object Object]"===QA.call(s)?{...t}:t);var s;o.push(...i.flatMap((t=>n.map((i=>((e,t,i,n)=>(e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)))(e,t,i,r))))))}),{immediate:!0,flush:"post"}),l=()=>{s(),a()};return TA(l),l}function VA(e){const t=function(){const e=Xi(!1),t=cn();return t&&qi((()=>{e.value=!0}),t),e}();return pn((()=>(t.value,Boolean(e()))))}const UA=e=>JSON.stringify(e),HA=e=>JSON.stringify(e),GA=e=>JSON.stringify(Array.from(e)),YA=e=>JSON.stringify(Object.fromEntries(e)),WA=()=>"";function XA(e,t){const i=Xi(""),n=Xi();function r(){if(MA)return n.value=new Promise(((i,n)=>{try{const r=DA(e);if(null==r)i("");else if("string"==typeof r)i($A(new Blob([r],{type:"text/plain"})));else if(r instanceof Blob)i($A(r));else if(r instanceof ArrayBuffer)i(window.btoa(String.fromCharCode(...new Uint8Array(r))));else if(r instanceof HTMLCanvasElement)i(r.toDataURL(null==t?void 0:t.type,null==t?void 0:t.quality));else if(r instanceof HTMLImageElement){const e=r.cloneNode(!1);e.crossOrigin="Anonymous",function(e){return new Promise(((t,i)=>{e.complete?t():(e.onload=()=>{t()},e.onerror=i)}))}(e).then((()=>{const n=document.createElement("canvas"),r=n.getContext("2d");n.width=e.width,n.height=e.height,r.drawImage(e,0,0,n.width,n.height),i(n.toDataURL(null==t?void 0:t.type,null==t?void 0:t.quality))})).catch(n)}else{if("object"==typeof r){const e=(null==t?void 0:t.serializer)||function(e){return e?e instanceof Map?YA:e instanceof Set?GA:Array.isArray(e)?UA:HA:WA}(r),n=e(r);return i($A(new Blob([n],{type:"application/json"})))}n(new Error("target is unsupported types"))}}catch(r){n(r)}})),n.value.then((e=>i.value=e)),n.value}return xn(e)||"function"==typeof e?fn(e,r,{immediate:!0}):r(),{base64:i,promise:n,execute:r}}function $A(e){return new Promise(((t,i)=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.onerror=i,n.readAsDataURL(e)}))}function qA(e,t={}){const{controls:i=!1,navigator:n=zA}=t,r=VA((()=>n&&"permissions"in n));let o;const a="string"==typeof e?{name:e}:e,s=Xi(),l=()=>{o&&(s.value=o.state)},c=function(e){let t;function i(){return t||(t=e()),t}return i.reset=async()=>{const e=t;t=void 0,e&&await e},i}((async()=>{if(r.value){if(!o)try{o=await n.permissions.query(a),NA(o,"change",l),l()}catch(e){s.value="prompt"}return o}}));return c(),i?{state:s,isSupported:r,query:c}:s}function KA(e={}){const{navigator:t=zA,read:i=!1,source:n,copiedDuring:r=1500,legacy:o=!1}=e,a=VA((()=>t&&"clipboard"in t)),s=qA("clipboard-read"),l=qA("clipboard-write"),c=pn((()=>a.value||o)),u=Xi(""),d=Xi(!1),h=function(e,t,i={}){const{immediate:n=!0}=i,r=Xi(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function s(){r.value=!1,a()}function l(...i){a(),r.value=!0,o=setTimeout((()=>{r.value=!1,o=null,e(...i)}),DA(t))}return n&&(r.value=!0,MA&&l()),TA(s),{isPending:er(r),start:l,stop:s}}((()=>d.value=!1),r);function p(e){return"granted"===e||"prompt"===e}return c.value&&i&&NA(["copy","cut"],(function(){var e,i,n;a.value&&p(s.value)?t.clipboard.readText().then((e=>{u.value=e})):u.value=null!=(n=null==(i=null==(e=null==document?void 0:document.getSelection)?void 0:e.call(document))?void 0:i.toString())?n:""})),{isSupported:c,text:u,copied:d,copy:async function(e=DA(n)){c.value&&null!=e&&(a.value&&p(l.value)?await t.clipboard.writeText(e):function(e){const t=document.createElement("textarea");t.value=null!=e?e:"",t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(e),u.value=e,d.value=!0,h.start())}}}const JA={multiple:!0,accept:"*",reset:!1,directory:!1};function ZA(e={}){const{document:t=RA}=e,i=Xi(null),{on:n,trigger:r}=function(){const e=new Set,t=t=>{e.delete(t)};return{on:i=>{e.add(i);const n=()=>t(i);return TA(n),{off:n}},off:t,trigger:(...t)=>Promise.all(Array.from(e).map((e=>e(...t))))}}();let o;t&&(o=t.createElement("input"),o.type="file",o.onchange=e=>{const t=e.target;i.value=t.files,r(i.value)});const a=()=>{i.value=null,o&&o.value&&(o.value="",r(null))};return{files:er(i),open:t=>{if(!o)return;const i={...JA,...e,...t};var n,r;o.multiple=i.multiple,o.accept=i.accept,o.webkitdirectory=i.directory,n=i,r="capture",Object.prototype.hasOwnProperty.call(n,r)&&(o.capture=i.capture),i.reset&&a(),o.click()},reset:a,onChange:n}}function eb(e,t={}){const i=function(...e){if(1!==e.length)return nr(...e);const t=e[0];return"function"==typeof t?er(rr((()=>({get:t,set:LA})))):Xi(t)}(e),{threshold:n=50,onSwipe:r,onSwipeEnd:o,onSwipeStart:a,disableTextSelect:s=!1}=t,l=On({x:0,y:0}),c=On({x:0,y:0}),u=(e,t)=>{c.x=e,c.y=t},d=pn((()=>l.x-c.x)),h=pn((()=>l.y-c.y)),{max:p,abs:f}=Math,g=pn((()=>p(f(d.value),f(h.value))>=n)),v=Xi(!1),m=Xi(!1),A=pn((()=>g.value?f(d.value)>f(h.value)?d.value>0?"left":"right":h.value>0?"up":"down":"none")),b=e=>{var i,n,r;const o=0===e.buttons,a=1===e.buttons;return null==(r=null!=(n=null==(i=t.pointerTypes)?void 0:i.includes(e.pointerType))?n:o||a)||r},y=[NA(e,"pointerdown",(e=>{if(!b(e))return;m.value=!0;const t=e.target;null==t||t.setPointerCapture(e.pointerId);const{clientX:i,clientY:n}=e;((e,t)=>{l.x=e,l.y=t})(i,n),u(i,n),null==a||a(e)})),NA(e,"pointermove",(e=>{if(!b(e))return;if(!m.value)return;const{clientX:t,clientY:i}=e;u(t,i),!v.value&&g.value&&(v.value=!0),v.value&&(null==r||r(e))})),NA(e,"pointerup",(e=>{b(e)&&(v.value&&(null==o||o(e,A.value)),m.value=!1,v.value=!1)}))];return jA((()=>{var e,t,n,r,o,a,l,c;null==(t=null==(e=i.value)?void 0:e.style)||t.setProperty("touch-action","none"),s&&(null==(r=null==(n=i.value)?void 0:n.style)||r.setProperty("-webkit-user-select","none"),null==(a=null==(o=i.value)?void 0:o.style)||a.setProperty("-ms-user-select","none"),null==(c=null==(l=i.value)?void 0:l.style)||c.setProperty("user-select","none"))})),{isSwiping:er(v),direction:er(A),posStart:er(l),posEnd:er(c),distanceX:d,distanceY:h,stop:()=>y.forEach((e=>e()))}}function tb(e){return XA(e).promise.value}function ib(e){return new Promise((t=>{const{onChange:i,open:n}=ZA(e);i((e=>{t(e)})),n()}))}const nb=(e,t)=>KA({source:e,...t}).copy();function rb(e,t){const i=document.createElement("a");i.href=e,i.download=`${SA()}.${t}`,document.body.appendChild(i),i.click(),i.remove()}function ob(e,t,i,n,r,o,a){void 0!==a&&(e.save(),e.translate(t,i),e.rotate(a),e.drawImage(n,-r/2,-o/2,r,o),e.restore())}const ab=e=>e instanceof fabric.Group,sb=e=>e instanceof fabric.ActiveSelection;function lb(e){return new Promise((t=>{const i=new FileReader;i.addEventListener("load",(()=>{t(i.result)})),i.readAsDataURL(e)}))}const cb={getImgStr:tb,downFile:rb,selectFiles:ib,insertImgFile:function(e){return new Promise((t=>{const i=document.createElement("img");i.src=e,document.body.appendChild(i),i.onload=()=>{t(i)}}))},clipboardText:nb,drawImg:ob,isImage:e=>e instanceof fabric.Image,isGroup:ab,isIText:e=>e instanceof fabric.IText,isActiveSelection:sb,blobToBase64:lb,base64ToBlob:function(e){if(!e)return null;const t=e.split(","),i=t[0]?.match(/:(.*?);/)[1],n=window.atob(t[1]),r=new ArrayBuffer(n.length),o=new Uint8Array(r);for(let a=0;a<n.length;a++)o[a]=n.charCodeAt(a);return[new Blob([r],{type:i}),i.slice(6)]}};function ub(e){e&&e.forEach((e=>{e.objects?ub(e.objects):"text"===e.type&&(e.type="textbox")}))}class db{canvas;editor;selectedMode;static pluginName="ServersPlugin";static apis=["insert","loadJSON","getJson","dragAddItem","clipboard","clipboardBase64","saveJson","saveSvg","saveImg","clear","preview","getSelectMode","getExtensionKey"];static events=(()=>[IA.ONE,IA.MULTI,BA.CANCEL])();constructor(e,t){this.canvas=e,this.editor=t,this.selectedMode=IA.EMPTY,this._initSelectEvent()}_initSelectEvent(){this.canvas.on("selection:created",(()=>this._emitSelectEvent())),this.canvas.on("selection:updated",(()=>this._emitSelectEvent())),this.canvas.on("selection:cleared",(()=>this._emitSelectEvent()))}_emitSelectEvent(){if(!this.canvas)throw TypeError("");const e=this.canvas.getActiveObjects().filter((e=>!(e instanceof Tm.fabric.GuideLine)));e&&1===e.length?(this.selectedMode=IA.ONE,this.editor.emit(BA.ONE,e)):e&&e.length>1?(this.selectedMode=IA.MULTI,this.editor.emit(BA.MULTI,e)):this.editor.emit(BA.CANCEL)}getSelectMode(){return String(this.selectedMode)}insert(e){ib({accept:".json"}).then((t=>{if(t&&t.length>0){const i=t[0],n=new FileReader;n.readAsText(i,"UTF-8"),n.onload=()=>{this.loadJSON(n.result,e)}}}))}renderITextPath(e){e.forEach((e=>{const t=this.canvas.getObjects().find((t=>t.id===e.id));t&&Tm.fabric.Path.fromObject(e.path,(e=>{t.set("path",e)}))}))}async loadJSON(e,t){const i="string"==typeof e?JSON.parse(e):e,n=[];i.objects.forEach((e=>{!e.id&&(e.id=SA()),"i-text"===e.type&&e.path&&(n.push({id:e.id,path:e.path}),e.path=null)}));const r=await this._transform(i);e=JSON.stringify(r),this.editor.hooksEntity.hookImportBefore.callAsync(e,(()=>{this.canvas.loadFromJSON(e,(()=>{this.renderITextPath(n),this.canvas.renderAll(),this.editor.hooksEntity.hookImportAfter.callAsync(e,(()=>{this.editor?.updateDrawStatus&&"function"==typeof this.editor.updateDrawStatus&&this.editor.updateDrawStatus(!!i.overlayImage),this.canvas.renderAll(),t&&t(),this.editor.emit("loadJson")}))}))}))}async _transform(e){if(await this.promiseCallAsync(e),e.objects){const t=e.objects.map((e=>this._transform(e)));await Promise.all(t)}return e}promiseCallAsync(e){return new Promise((t=>{this.editor.hooksEntity.hookTransform.callAsync(e,(()=>{t(e)}))}))}getJson(){const e=this.getExtensionKey();return this.canvas.toJSON(e)}getExtensionKey(){return["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension","verticalAlign"]}dragAddItem(e,t){if(t){const{left:i,top:n}=this.canvas.getSelectionElement().getBoundingClientRect();if(t.x<i||t.y<n||void 0===e.width)return;const r={x:t.x-i,y:t.y-n},o=this.canvas.restorePointerVpt(r);e.left=o.x-e.width/2,e.top=o.y}const{width:i}=this._getSaveOption();i&&e.scaleToWidth(i/2),this.canvas.add(e),this.canvas.setActiveObject(e),!t&&this.editor.position("center"),this.canvas.requestRenderAll()}clipboard(){const e=this.getJson();return nb(JSON.stringify(e,null,"\t"))}async clipboardBase64(){const e=await this.preview();return nb(e)}async saveJson(){const e=this.getJson();await ub(e.objects),rb(`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e,null,"\t"))}`,"json")}saveSvg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",(()=>{const{fontOption:e,svgOption:t}=this._getSaveSvgOption();Tm.fabric.fontPaths={...e};const i=this.canvas.toSVG(t),n=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(i)}`;this.editor.hooksEntity.hookSaveAfter.callAsync(n,(()=>{rb(n,"svg")}))}))}saveImg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",(()=>{const e=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]);const t=this.canvas.toDataURL(e);this.editor.hooksEntity.hookSaveAfter.callAsync(t,(()=>{rb(t,"png")}))}))}preview(){return new Promise((e=>{this.editor.hooksEntity.hookSaveBefore.callAsync("",(()=>{const t=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]),this.canvas.renderAll();const i=this.canvas.toDataURL(t);this.editor.hooksEntity.hookSaveAfter.callAsync(i,(()=>{e(i)}))}))}))}_getSaveSvgOption(){const e=this.canvas.getObjects().find((e=>"workspace"===e.id));let t=this.canvas.getObjects().filter((e=>"textbox"==e.type)).map((e=>e.fontFamily));t=Array.from(new Set(t));const i=this.editor.getPlugin("FontPlugin").cacheList,n={};for(const l of t){const e=i.find((e=>e.name===l));n[l]=e.file}const{left:r,top:o,width:a,height:s}=e;return{fontOption:n,svgOption:{width:a,height:s,viewBox:{x:r,y:o,width:a,height:s}}}}_getSaveOption(){const e=this.canvas.getObjects().find((e=>"workspace"===e.id)),{left:t,top:i,width:n,height:r}=e;return{name:"New Image",format:"png",quality:1,width:n,height:r,left:t,top:i}}clear(){this.canvas.getObjects().forEach((e=>{"workspace"!==e.id&&this.canvas.remove(e)})),this.editor?.setWorkspaseBg("#fff"),this.canvas.discardActiveObject(),this.canvas.renderAll()}destroy(){}}var hb={};hb.deprecate=(e,t)=>{let i=!0;return function(){return i&&(i=!1),e.apply(this,arguments)}};const pb=hb.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),fb=function(...e){return this.call=this._createCall("sync"),this.call(...e)},gb=function(...e){return this.callAsync=this._createCall("async"),this.callAsync(...e)},vb=function(...e){return this.promise=this._createCall("promise"),this.promise(...e)};let mb=class{constructor(e=[],t=void 0){this._args=e,this.name=t,this.taps=[],this.interceptors=[],this._call=fb,this.call=fb,this._callAsync=gb,this.callAsync=gb,this._promise=vb,this.promise=vb,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(e){throw new Error("Abstract: should be overridden")}_createCall(e){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:e})}_tap(e,t,i){if("string"==typeof t)t={name:t.trim()};else if("object"!=typeof t||null===t)throw new Error("Invalid tap options");if("string"!=typeof t.name||""===t.name)throw new Error("Missing name for tap");void 0!==t.context&&pb(),t=Object.assign({type:e,fn:i},t),t=this._runRegisterInterceptors(t),this._insert(t)}tap(e,t){this._tap("sync",e,t)}tapAsync(e,t){this._tap("async",e,t)}tapPromise(e,t){this._tap("promise",e,t)}_runRegisterInterceptors(e){for(const t of this.interceptors)if(t.register){const i=t.register(e);void 0!==i&&(e=i)}return e}withOptions(e){const t=t=>Object.assign({},e,"string"==typeof t?{name:t}:t);return{name:this.name,tap:(e,i)=>this.tap(t(e),i),tapAsync:(e,i)=>this.tapAsync(t(e),i),tapPromise:(e,i)=>this.tapPromise(t(e),i),intercept:e=>this.intercept(e),isUsed:()=>this.isUsed(),withOptions:e=>this.withOptions(t(e))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(e){if(this._resetCompilation(),this.interceptors.push(Object.assign({},e)),e.register)for(let t=0;t<this.taps.length;t++)this.taps[t]=e.register(this.taps[t])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(e){let t;this._resetCompilation(),"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let i=0;"number"==typeof e.stage&&(i=e.stage);let n=this.taps.length;for(;n>0;){n--;const e=this.taps[n];this.taps[n+1]=e;const r=e.stage||0;if(t){if(t.has(e.name)){t.delete(e.name);continue}if(t.size>0)continue}if(!(r>i)){n++;break}}this.taps[n]=e}};Object.setPrototypeOf(mb.prototype,null);var Ab=mb,bb=class{constructor(e){this.config=e,this.options=void 0,this._args=void 0}create(e){let t;switch(this.init(e),this.options.type){case"sync":t=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:e=>`throw ${e};\n`,onResult:e=>`return ${e};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:e=>`_callback(${e});\n`,onResult:e=>`_callback(null, ${e});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let e=!1;const i=this.contentWithInterceptors({onError:t=>(e=!0,`_error(${t});\n`),onResult:e=>`_resolve(${e});\n`,onDone:()=>"_resolve();\n"});let n="";n+='"use strict";\n',n+=this.header(),n+="return new Promise((function(_resolve, _reject) {\n",e&&(n+="var _sync = true;\n",n+="function _error(_err) {\n",n+="if(_sync)\n",n+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",n+="else\n",n+="_reject(_err);\n",n+="};\n"),n+=i,e&&(n+="_sync = false;\n"),n+="}));\n",t=new Function(this.args(),n)}return this.deinit(),t}setup(e,t){e._x=t.taps.map((e=>e.fn))}init(e){this.options=e,this._args=e.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(e){if(this.options.interceptors.length>0){const t=e.onError,i=e.onResult,n=e.onDone;let r="";for(let e=0;e<this.options.interceptors.length;e++){const t=this.options.interceptors[e];t.call&&(r+=`${this.getInterceptor(e)}.call(${this.args({before:t.context?"_context":void 0})});\n`)}return r+=this.content(Object.assign(e,{onError:t&&(e=>{let i="";for(let t=0;t<this.options.interceptors.length;t++)this.options.interceptors[t].error&&(i+=`${this.getInterceptor(t)}.error(${e});\n`);return i+=t(e),i}),onResult:i&&(e=>{let t="";for(let i=0;i<this.options.interceptors.length;i++)this.options.interceptors[i].result&&(t+=`${this.getInterceptor(i)}.result(${e});\n`);return t+=i(e),t}),onDone:n&&(()=>{let e="";for(let t=0;t<this.options.interceptors.length;t++)this.options.interceptors[t].done&&(e+=`${this.getInterceptor(t)}.done();\n`);return e+=n(),e})})),r}return this.content(e)}header(){let e="";return this.needContext()?e+="var _context = {};\n":e+="var _context;\n",e+="var _x = this._x;\n",this.options.interceptors.length>0&&(e+="var _taps = this.taps;\n",e+="var _interceptors = this.interceptors;\n"),e}needContext(){for(const e of this.options.taps)if(e.context)return!0;return!1}callTap(e,{onError:t,onResult:i,onDone:n,rethrowIfPossible:r}){let o="",a=!1;for(let l=0;l<this.options.interceptors.length;l++){const t=this.options.interceptors[l];t.tap&&(a||(o+=`var _tap${e} = ${this.getTap(e)};\n`,a=!0),o+=`${this.getInterceptor(l)}.tap(${t.context?"_context, ":""}_tap${e});\n`)}o+=`var _fn${e} = ${this.getTapFn(e)};\n`;const s=this.options.taps[e];switch(s.type){case"sync":r||(o+=`var _hasError${e} = false;\n`,o+="try {\n"),o+=i?`var _result${e} = _fn${e}(${this.args({before:s.context?"_context":void 0})});\n`:`_fn${e}(${this.args({before:s.context?"_context":void 0})});\n`,r||(o+="} catch(_err) {\n",o+=`_hasError${e} = true;\n`,o+=t("_err"),o+="}\n",o+=`if(!_hasError${e}) {\n`),i&&(o+=i(`_result${e}`)),n&&(o+=n()),r||(o+="}\n");break;case"async":let a="";a+=i?`(function(_err${e}, _result${e}) {\n`:`(function(_err${e}) {\n`,a+=`if(_err${e}) {\n`,a+=t(`_err${e}`),a+="} else {\n",i&&(a+=i(`_result${e}`)),n&&(a+=n()),a+="}\n",a+="})",o+=`_fn${e}(${this.args({before:s.context?"_context":void 0,after:a})});\n`;break;case"promise":o+=`var _hasResult${e} = false;\n`,o+=`var _promise${e} = _fn${e}(${this.args({before:s.context?"_context":void 0})});\n`,o+=`if (!_promise${e} || !_promise${e}.then)\n`,o+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${e} + ')');\n`,o+=`_promise${e}.then((function(_result${e}) {\n`,o+=`_hasResult${e} = true;\n`,i&&(o+=i(`_result${e}`)),n&&(o+=n()),o+=`}), function(_err${e}) {\n`,o+=`if(_hasResult${e}) throw _err${e};\n`,o+=t(`_err${e}`),o+="});\n"}return o}callTapsSeries({onError:e,onResult:t,resultReturns:i,onDone:n,doneReturns:r,rethrowIfPossible:o}){if(0===this.options.taps.length)return n();const a=this.options.taps.findIndex((e=>"sync"!==e.type)),s=i||r;let l="",c=n,u=0;for(let d=this.options.taps.length-1;d>=0;d--){const i=d;c!==n&&("sync"!==this.options.taps[i].type||u++>20)&&(u=0,l+=`function _next${i}() {\n`,l+=c(),l+="}\n",c=()=>`${s?"return ":""}_next${i}();\n`);const r=c,h=e=>e?"":n(),p=this.callTap(i,{onError:t=>e(i,t,r,h),onResult:t&&(e=>t(i,e,r,h)),onDone:!t&&r,rethrowIfPossible:o&&(a<0||i<a)});c=()=>p}return l+=c(),l}callTapsLooping({onError:e,onDone:t,rethrowIfPossible:i}){if(0===this.options.taps.length)return t();const n=this.options.taps.every((e=>"sync"===e.type));let r="";n||(r+="var _looper = (function() {\n",r+="var _loopAsync = false;\n"),r+="var _loop;\n",r+="do {\n",r+="_loop = false;\n";for(let o=0;o<this.options.interceptors.length;o++){const e=this.options.interceptors[o];e.loop&&(r+=`${this.getInterceptor(o)}.loop(${this.args({before:e.context?"_context":void 0})});\n`)}return r+=this.callTapsSeries({onError:e,onResult:(e,t,i,r)=>{let o="";return o+=`if(${t} !== undefined) {\n`,o+="_loop = true;\n",n||(o+="if(_loopAsync) _looper();\n"),o+=r(!0),o+="} else {\n",o+=i(),o+="}\n",o},onDone:t&&(()=>{let e="";return e+="if(!_loop) {\n",e+=t(),e+="}\n",e}),rethrowIfPossible:i&&n}),r+="} while(_loop);\n",n||(r+="_loopAsync = true;\n",r+="});\n",r+="_looper();\n"),r}callTapsParallel({onError:e,onResult:t,onDone:i,rethrowIfPossible:n,onTap:r=(e,t)=>t()}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:e,onResult:t,onDone:i,rethrowIfPossible:n});let o="";o+="do {\n",o+=`var _counter = ${this.options.taps.length};\n`,i&&(o+="var _done = (function() {\n",o+=i(),o+="});\n");for(let a=0;a<this.options.taps.length;a++){const s=()=>i?"if(--_counter === 0) _done();\n":"--_counter;",l=e=>e||!i?"_counter = 0;\n":"_counter = 0;\n_done();\n";o+="if(_counter <= 0) break;\n",o+=r(a,(()=>this.callTap(a,{onError:t=>{let i="";return i+="if(_counter > 0) {\n",i+=e(a,t,s,l),i+="}\n",i},onResult:t&&(e=>{let i="";return i+="if(_counter > 0) {\n",i+=t(a,e,s,l),i+="}\n",i}),onDone:!t&&(()=>s()),rethrowIfPossible:n})),s,l)}return o+="} while(false);\n",o}args({before:e,after:t}={}){let i=this._args;return e&&(i=[e].concat(i)),t&&(i=i.concat(t)),0===i.length?"":i.join(", ")}getTapFn(e){return`_x[${e}]`}getTap(e){return`_taps[${e}]`}getInterceptor(e){return`_interceptors[${e}]`}};const yb=bb;new class extends yb{content({onError:e,onDone:t,rethrowIfPossible:i}){return this.callTapsSeries({onError:(t,i)=>e(i),onDone:t,rethrowIfPossible:i})}};const xb=bb;new class extends xb{content({onError:e,onResult:t,resultReturns:i,onDone:n,rethrowIfPossible:r}){return this.callTapsSeries({onError:(t,i)=>e(i),onResult:(e,i,n)=>`if(${i} !== undefined) {\n${t(i)};\n} else {\n${n()}}\n`,resultReturns:i,onDone:n,rethrowIfPossible:r})}};const wb=bb;new class extends wb{content({onError:e,onResult:t,resultReturns:i,rethrowIfPossible:n}){return this.callTapsSeries({onError:(t,i)=>e(i),onResult:(e,t,i)=>{let n="";return n+=`if(${t} !== undefined) {\n`,n+=`${this._args[0]} = ${t};\n`,n+="}\n",n+=i(),n},onDone:()=>t(this._args[0]),doneReturns:i,rethrowIfPossible:n})}};const _b=bb;new class extends _b{content({onError:e,onDone:t,rethrowIfPossible:i}){return this.callTapsLooping({onError:(t,i)=>e(i),onDone:t,rethrowIfPossible:i})}};const Cb=bb;new class extends Cb{content({onError:e,onDone:t}){return this.callTapsParallel({onError:(t,i,n,r)=>e(i)+r(!0),onDone:t})}};const kb=bb;new class extends kb{content({onError:e,onResult:t,onDone:i}){let n="";return n+=`var _results = new Array(${this.options.taps.length});\n`,n+="var _checkDone = function() {\n",n+="for(var i = 0; i < _results.length; i++) {\n",n+="var item = _results[i];\n",n+="if(item === undefined) return false;\n",n+="if(item.result !== undefined) {\n",n+=t("item.result"),n+="return true;\n",n+="}\n",n+="if(item.error) {\n",n+=e("item.error"),n+="return true;\n",n+="}\n",n+="}\n",n+="return false;\n",n+="}\n",n+=this.callTapsParallel({onError:(e,t,i,n)=>{let r="";return r+=`if(${e} < _results.length && ((_results.length = ${e+1}), (_results[${e}] = { error: ${t} }), _checkDone())) {\n`,r+=n(!0),r+="} else {\n",r+=i(),r+="}\n",r},onResult:(e,t,i,n)=>{let r="";return r+=`if(${e} < _results.length && (${t} !== undefined && (_results.length = ${e+1}), (_results[${e}] = { result: ${t} }), _checkDone())) {\n`,r+=n(!0),r+="} else {\n",r+=i(),r+="}\n",r},onTap:(e,t,i,n)=>{let r="";return e>0&&(r+=`if(${e} >= _results.length) {\n`,r+=i(),r+="} else {\n"),r+=t(),e>0&&(r+="}\n"),r},onDone:i}),n}};const Eb=Ab,Sb=bb,Ib=new class extends Sb{content({onError:e,onDone:t}){return this.callTapsSeries({onError:(t,i,n,r)=>e(i)+r(!0),onDone:t})}},Bb=function(e){return Ib.setup(this,e),Ib.create(e)};function Ob(e=[],t=void 0){const i=new Eb(e,t);return i.constructor=Ob,i.compile=Bb,i._call=void 0,i.call=void 0,i}Ob.prototype=null;var Tb=Ob;const Db=bb;new class extends Db{content({onError:e,onResult:t,resultReturns:i,onDone:n}){return this.callTapsSeries({onError:(t,i,n,r)=>e(i)+r(!0),onResult:(e,i,n)=>`if(${i} !== undefined) {\n${t(i)}\n} else {\n${n()}}\n`,resultReturns:i,onDone:n})}};const Mb=bb;new class extends Mb{content({onError:e,onDone:t}){return this.callTapsLooping({onError:(t,i,n,r)=>e(i)+r(!0),onDone:t})}};const Qb=bb;new class extends Qb{content({onError:e,onResult:t,onDone:i}){return this.callTapsSeries({onError:(t,i,n,r)=>e(i)+r(!0),onResult:(e,t,i)=>{let n="";return n+=`if(${t} !== undefined) {\n`,n+=`${this._args[0]} = ${t};\n`,n+="}\n",n+=i(),n},onDone:()=>t(this._args[0])})}};const Lb=hb,jb=(e,t)=>t;class Pb{constructor(e,t=void 0){this._map=new Map,this.name=t,this._factory=e,this._interceptors=[]}get(e){return this._map.get(e)}for(e){const t=this.get(e);if(void 0!==t)return t;let i=this._factory(e);const n=this._interceptors;for(let r=0;r<n.length;r++)i=n[r].factory(e,i);return this._map.set(e,i),i}intercept(e){this._interceptors.push(Object.assign({factory:jb},e))}}Pb.prototype.tap=Lb.deprecate((function(e,t,i){return this.for(e).tap(t,i)}),"HookMap#tap(key,) is deprecated. Use HookMap#for(key).tap() instead."),Pb.prototype.tapAsync=Lb.deprecate((function(e,t,i){return this.for(e).tapAsync(t,i)}),"HookMap#tapAsync(key,) is deprecated. Use HookMap#for(key).tapAsync() instead."),Pb.prototype.tapPromise=Lb.deprecate((function(e,t,i){return this.for(e).tapPromise(t,i)}),"HookMap#tapPromise(key,) is deprecated. Use HookMap#for(key).tapPromise() instead.");var Fb=Tb;class Rb extends $m{canvas=null;contextMenu=null;pluginMap={};customEvents=[];customApis=[];hooks=["hookImportBefore","hookImportAfter","hookSaveBefore","hookSaveAfter","hookTransform"];hooksEntity={};init(e){this.canvas=e,this._initContextMenu(),this._bindContextMenu(),this._initActionHooks(),this._initServersPlugin(),this.Utils=cb}get fabricCanvas(){return this.canvas}use(e,t){if(this._checkPlugin(e)&&this.canvas){this._saveCustomAttr(e);const i=new e(this.canvas,this,t||{});i.pluginName=e.pluginName,this.pluginMap[e.pluginName]=i,this._bindingHooks(i),this._bindingHotkeys(i),this._bindingApis(i)}return this}destory(){this.canvas=null,this.contextMenu=null,this.pluginMap={},this.customEvents=[],this.customApis=[],this.hooksEntity={}}getPlugin(e){if(this.pluginMap[e])return this.pluginMap[e]}_checkPlugin(e){const{pluginName:t,events:i=[],apis:n=[]}=e;if(this.pluginMap[t])throw new Error(t+"");return i.forEach((e=>{if(this.customEvents.find((t=>t===e)))throw new Error(t+""+e+"")})),n.forEach((e=>{if(this.customApis.find((t=>t===e)))throw new Error(t+""+e+"")})),!0}_bindingHooks(e){this.hooks.forEach((t=>{const i=e[t];i&&this.hooksEntity[t].tapPromise(e.pluginName+t,(function(){const t=i.apply(e,[...arguments]);return t instanceof Promise?t:Promise.resolve(t)}))}))}_bindingHotkeys(e){e?.hotkeys?.forEach((t=>{mA(t,{keyup:!0},(i=>{e.hotkeyEvent&&e.hotkeyEvent(t,i)}))}))}_saveCustomAttr(e){const{events:t=[],apis:i=[]}=e;this.customApis=this.customApis.concat(i),this.customEvents=this.customEvents.concat(t)}_bindingApis(e){const{apis:t=[]}=e.constructor||{};t.forEach((t=>{this[t]=function(){return e[t].apply(e,[...arguments])}}))}_bindContextMenu(){this.canvas&&this.canvas.on("mouse:down",(e=>{if(3===e.button){let t=[];Object.keys(this.pluginMap).forEach((e=>{const i=this.pluginMap[e],n=i.contextMenu&&i.contextMenu();n&&(t=t.concat(n))})),this._renderMenu(e,t)}}))}_renderMenu(e,t){0!==t.length&&this.contextMenu&&(this.contextMenu.hideAll(),this.contextMenu.setData(t),this.contextMenu.show(e.e.clientX,e.e.clientY))}_initActionHooks(){this.hooks.forEach((e=>{this.hooksEntity[e]=new Fb(["data"])}))}_initContextMenu(){this.contextMenu=new yA(this.canvas.wrapperEl,[]),this.contextMenu.install()}_initServersPlugin(){this.use(db)}off(e,t){return t?super.off(e,t):this}}class zb{constructor(e,t){this.canvas=e,this.editor=t,this.dragMode=!1,this.init()}defautOption={};static pluginName="DringPlugin";static events=["startDring","endDring"];static apis=["startDring","endDring"];hotkeys=["space"];dragMode=!1;init(){this._initDring()}startDring(){this.dragMode=!0,this.canvas.setCursor("grab"),this.editor.emit("startDring"),this.canvas.renderAll()}endDring(){this.dragMode=!1,this.canvas.setCursor("default"),this.canvas.isDragging=!1,this.editor.emit("endDring"),this.canvas.renderAll()}_initDring(){const e=this;this.canvas.on("mouse:down",(function(t){const i=t.e;(i.altKey||e.dragMode)&&(e.canvas.setCursor("grabbing"),e.canvas.discardActiveObject(),e._setDring(),this.selection=!1,this.isDragging=!0,this.lastPosX=i.clientX,this.lastPosY=i.clientY,this.requestRenderAll())})),this.canvas.on("mouse:move",(function(t){if(e.dragMode&&e.canvas.setCursor("grab"),this.isDragging){e.canvas.discardActiveObject(),e.canvas.setCursor("grabbing");const{e:i}=t;if(!this.viewportTransform)return;const n=this.viewportTransform;n[4]+=i.clientX-this.lastPosX,n[5]+=i.clientY-this.lastPosY,this.lastPosX=i.clientX,this.lastPosY=i.clientY,this.requestRenderAll()}})),this.canvas.on("mouse:up",(function(){this.viewportTransform&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,this.getObjects().forEach((e=>{"workspace"!==e.id&&e.hasControls&&(e.selectable=!0)})),e.dragMode&&e.canvas.setCursor("grab"),this.requestRenderAll())}))}_setDring(){this.canvas.selection=!1,this.canvas.getObjects().forEach((e=>{e.selectable=!1})),this.canvas.requestRenderAll()}destroy(){}hotkeyEvent(e,t){"Space"===t.code&&"keydown"===t.type&&(this.dragMode||this.startDring()),"Space"===t.code&&"keyup"===t.type&&this.endDring()}}class Nb{constructor(e,t){this.canvas=e,this.editor=t,this.dragMode=!1,this.init()}defautOption={color:"rgba(255,95,95,1)",width:1};static pluginName="AlignGuidLinePlugin";dragMode=!1;init(){const{canvas:e}=this,t=e.getSelectionContext(),i=this;let n,r=1;function o(e){a(e.x1>e.x2?e.x2:e.x1,e.y+.5,e.x2>e.x1?e.x2:e.x1,e.y+.5)}function a(e,i,o,a){null!=n&&(t.moveTo(e*r+n[4],i*r+n[5]),t.lineTo(o*r+n[4],a*r+n[5]))}function s(e,t){e=Math.round(e),t=Math.round(t);for(let i=e-4,n=e+4;i<=n;i++)if(i===t)return!0;return!1}const l=[],c=[];e.on("mouse:down",(()=>{n=e.viewportTransform,r=e.getZoom()})),e.on("object:moving",(t=>{if(void 0===n||void 0===t.target)return;const i=t.target,r=e.getObjects(),o=i.getCenterPoint(),a=o.x,u=o.y,d=i.getBoundingRect(),h=d.height/n[3],p=d.width/n[0];let f=!1,g=!1;if(e._currentTransform){for(let e=r.length;e--;){if(r[e]===i)continue;if(i instanceof Tm.fabric.GuideLine&&r[e]instanceof Tm.fabric.GuideLine)continue;const t=r[e].getCenterPoint(),o=t.x,d=t.y,v=r[e].getBoundingRect(),m=v.height/n[3],A=v.width/n[0];s(o,a)&&(g=!0,l.push({x:o,y1:d<u?d-m/2-5:d+m/2+5,y2:u>d?u+h/2+5:u-h/2-5}),i.setPositionByOrigin(new Tm.fabric.Point(o,u),"center","center")),s(o-A/2,a-p/2)&&(g=!0,l.push({x:o-A/2,y1:d<u?d-m/2-5:d+m/2+5,y2:u>d?u+h/2+5:u-h/2-5}),i.setPositionByOrigin(new Tm.fabric.Point(o-A/2+p/2,u),"center","center")),s(o+A/2,a+p/2)&&(g=!0,l.push({x:o+A/2,y1:d<u?d-m/2-5:d+m/2+5,y2:u>d?u+h/2+5:u-h/2-5}),i.setPositionByOrigin(new Tm.fabric.Point(o+A/2-p/2,u),"center","center")),s(d,u)&&(f=!0,c.push({y:d,x1:o<a?o-A/2-5:o+A/2+5,x2:a>o?a+p/2+5:a-p/2-5}),i.setPositionByOrigin(new Tm.fabric.Point(a,d),"center","center")),s(d-m/2,u-h/2)&&(f=!0,c.push({y:d-m/2,x1:o<a?o-A/2-5:o+A/2+5,x2:a>o?a+p/2+5:a-p/2-5}),i.setPositionByOrigin(new Tm.fabric.Point(a,d-m/2+h/2),"center","center")),s(d+m/2,u+h/2)&&(f=!0,c.push({y:d+m/2,x1:o<a?o-A/2-5:o+A/2+5,x2:a>o?a+p/2+5:a-p/2-5}),i.setPositionByOrigin(new Tm.fabric.Point(a,d+m/2-h/2),"center","center"))}f||(c.length=0),g||(l.length=0)}})),e.on("before:render",(()=>{if(null!==e.contextTop)try{e.clearContext(e.contextTop)}catch(t){}})),e.on("after:render",(()=>{t.save(),t.beginPath(),t.lineWidth=i.defautOption.width,t.strokeStyle=i.defautOption.color;for(let t=l.length;t--;)a((e=l[t]).x+.5,e.y1>e.y2?e.y2:e.y1,e.x+.5,e.y2>e.y1?e.y2:e.y1);var e;for(let t=c.length;t--;)o(c[t]);t.stroke(),t.restore(),l.length=0,c.length=0})),e.on("mouse:up",(()=>{l.length=0,c.length=0,e.renderAll()}))}destroy(){}}const Vb="data:image/svg+xml,%3csvg%20width='19'%20height='18'%20viewBox='0%200%2019%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0.996094'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";function Ub(e,t,i,n,r,o,a){void 0!==a&&(e.save(),e.translate(t,i),e.rotate(Tm.fabric.util.degreesToRadians(a)),e.drawImage(n,-r/2,-o/2,r,o),e.restore())}Tm.fabric.Object.NUM_FRACTION_DIGITS=4;class Hb{constructor(e,t){this.canvas=e,this.editor=t,this.init()}static pluginName="ControlsPlugin";init(){!function(){const e=document.createElement("img");function t(t,i,n,r,o){Ub(t,i,n,e,25,25,o.angle)}e.src=Vb,Tm.fabric.Object.prototype.controls.tl=new Tm.fabric.Control({x:-.5,y:-.5,cursorStyleHandler:Tm.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingEqually,render:t}),Tm.fabric.Object.prototype.controls.bl=new Tm.fabric.Control({x:-.5,y:.5,cursorStyleHandler:Tm.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingEqually,render:t}),Tm.fabric.Object.prototype.controls.tr=new Tm.fabric.Control({x:.5,y:-.5,cursorStyleHandler:Tm.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingEqually,render:t}),Tm.fabric.Object.prototype.controls.br=new Tm.fabric.Control({x:.5,y:.5,cursorStyleHandler:Tm.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingEqually,render:t})}(),function(){const e=document.createElement("img");e.src="data:image/svg+xml,%3csvg%20width='12'%20height='24'%20viewBox='0%200%2012%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='4'%20y='4'%20width='4'%20height='16'%20rx='2'%20fill='white'/%3e%3crect%20x='4.25'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='12'%20height='24'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";const t=document.createElement("img");function i(t,i,n,r,o){Ub(t,i,n,e,20,25,o.angle)}function n(e,i,n,r,o){Ub(e,i,n,t,25,20,o.angle)}t.src="data:image/svg+xml,%3csvg%20width='24'%20height='12'%20viewBox='0%200%2024%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='20'%20y='4'%20width='4'%20height='16'%20rx='2'%20transform='rotate(90%2020%204)'%20fill='white'/%3e%3crect%20x='19.75'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20transform='rotate(90%2019.75%204.25)'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='24'%20height='12'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Tm.fabric.Object.prototype.controls.ml=new Tm.fabric.Control({x:-.5,y:0,offsetX:-1,cursorStyleHandler:Tm.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingXOrSkewingY,getActionName:Tm.fabric.controlsUtils.scaleOrSkewActionName,render:i}),Tm.fabric.Object.prototype.controls.mr=new Tm.fabric.Control({x:.5,y:0,offsetX:1,cursorStyleHandler:Tm.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingXOrSkewingY,getActionName:Tm.fabric.controlsUtils.scaleOrSkewActionName,render:i}),Tm.fabric.Object.prototype.controls.mb=new Tm.fabric.Control({x:0,y:.5,offsetY:1,cursorStyleHandler:Tm.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingYOrSkewingX,getActionName:Tm.fabric.controlsUtils.scaleOrSkewActionName,render:n}),Tm.fabric.Object.prototype.controls.mt=new Tm.fabric.Control({x:0,y:-.5,offsetY:-1,cursorStyleHandler:Tm.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:Tm.fabric.controlsUtils.scalingYOrSkewingX,getActionName:Tm.fabric.controlsUtils.scaleOrSkewActionName,render:n})}(),function(){const e=document.createElement("img");e.src="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cpath%20d='M10.8047%2011.1242L9.49934%2011.1242L9.49934%209.81885'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.94856%206.72607L8.25391%206.72607L8.25391%208.03142'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.69517%206.92267C10.007%207.03301%2010.2858%207.22054%2010.5055%207.46776C10.7252%207.71497%2010.8787%208.01382%2010.9517%208.33642C11.0247%208.65902%2011.0148%208.99485%2010.9229%209.31258C10.831%209.63031%2010.6601%209.91958%2010.4262%2010.1534L9.49701%2011.0421M8.25792%206.72607L7.30937%207.73554C7.07543%207.96936%206.90454%208.25863%206.81264%208.57636C6.72073%208.89408%206.71081%209.22992%206.78381%209.55251C6.8568%209.87511%207.01032%2010.174%207.23005%2010.4212C7.44978%2010.6684%207.72855%2010.8559%208.04036%2010.9663'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Tm.fabric.Object.prototype.controls.mtr=new Tm.fabric.Control({x:0,y:.5,cursorStyleHandler:Tm.fabric.controlsUtils.rotationStyleHandler,actionHandler:Tm.fabric.controlsUtils.rotationWithSnapping,offsetY:30,actionName:"rotate",render:function(t,i,n,r,o){Ub(t,i,n,e,40,40,o.angle)}})}(),Tm.fabric.Object.prototype.set({transparentCorners:!1,borderColor:"#51B9F9",cornerColor:"#FFF",borderScaleFactor:2.5,cornerStyle:"circle",cornerStrokeColor:"#0E98FC",borderOpacityWhenMoving:1})}destroy(){}}class Gb{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="CenterAlignPlugin";static apis=["centerH","center","position","centerV"];center(e,t){const i=e.getCenterPoint();return this.canvas._centerObject(t,i)}centerV(e,t){return this.canvas._centerObject(t,new Tm.fabric.Point(t.getCenterPoint().x,e.getCenterPoint().y))}centerH(e,t){return this.canvas._centerObject(t,new Tm.fabric.Point(e.getCenterPoint().x,t.getCenterPoint().y))}position(e){const t=this.canvas.getActiveObject();if(["centerH","center","centerV"].includes(e)&&t){const i=this.canvas.getObjects().find((e=>"workspace"===e.id));i&&this[e](i,t),this.canvas.renderAll()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.position("center")}]}destroy(){}}class Yb{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="LayerPlugin";static apis=["up","down","toFront","toBack"];_getWorkspace(){return this.canvas.getObjects().find((e=>"workspace"===e.id))}_workspaceSendToBack(){const e=this._getWorkspace();e&&e.sendToBack()}up(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.bringForward(),this.canvas.renderAll(),this._workspaceSendToBack()}}down(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.sendBackwards(),this.canvas.renderAll(),this._workspaceSendToBack()}}toFront(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.bringToFront(),this.canvas.renderAll(),this._workspaceSendToBack()}}toBack(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.sendToBack(),this.canvas.renderAll(),this._workspaceSendToBack()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"",hotkey:"",subitems:[{text:"",hotkey:"",onclick:()=>this.up()},{text:"",hotkey:"",onclick:()=>this.down()},{text:"",hotkey:"",onclick:()=>this.toFront()},{text:"",hotkey:"",onclick:()=>this.toBack()}]}]}destroy(){}}class Wb{constructor(e,t){this.canvas=e,this.editor=t,this.initPaste()}static pluginName="CopyPlugin";static apis=["clone"];hotkeys=["ctrl+v","ctrl+c"];cache=null;_copyActiveSelection(e){const t=this.canvas,i=this.editor.getExtensionKey();e?.clone((e=>{e.clone((e=>{t.discardActiveObject(),void 0!==e.left&&void 0!==e.top&&(e.canvas=t,e.set({left:e.left+10,top:e.top+10,evented:!0,id:SA()}),e.forEachObject((e=>{e.id=SA(),t.add(e)})),e.setCoords(),t.setActiveObject(e),t.requestRenderAll())}))}),i)}_copyObject(e){const t=this.canvas,i=this.editor.getExtensionKey();e?.clone((e=>{void 0!==e.left&&void 0!==e.top&&(t.discardActiveObject(),e.set({left:e.left+10,top:e.top+10,evented:!0,id:SA()}),t.add(e),t.setActiveObject(e),t.requestRenderAll())}),i)}clone(e){const t=e||this.canvas.getActiveObject();t&&("activeSelection"===t?.type?this._copyActiveSelection(t):this._copyObject(t))}hotkeyEvent(e,t){if("ctrl+c"===e&&"keydown"===t.type){const e=this.canvas.getActiveObject();this.cache=e,navigator.clipboard.writeText("")}"ctrl+v"===e&&"keydown"===t.type&&setTimeout((()=>{this.cache&&this.clone(this.cache)}),0)}contextMenu(){if(this.canvas.getActiveObject())return[{text:"",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.clone()}]}destroy(){window.removeEventListener("paste",(e=>this.pasteListener(e)))}initPaste(){window.addEventListener("paste",(e=>this.pasteListener(e)))}async pasteListener(e){const t=this.canvas;if(document.activeElement!==document.body)return;e.preventDefault();const i=(e.clipboardData||e.originalEvent.clipboardData).items;for(const n of i)if("file"===n.kind){const e=n.getAsFile(),i=e.name.split(".").pop();if(!".pdf,.psd,.cdr,.ai,.svg,.jpg,.jpeg,.png,.webp,.json".split(",").includes(`.${i}`))return;if("svg"===i){const i=await tb(e);if(!i)throw new Error("file is undefined");Tm.fabric.loadSVGFromURL(i,((e,i)=>{const n=Tm.fabric.util.groupSVGElements(e,{...i,name:"defaultSVG",id:SA()});t.add(n).centerObject(n).renderAll()}))}if(0===n.type.indexOf("image/")){const i=URL.createObjectURL(e),n=document.createElement("img");n.src=i,document.body.appendChild(n),n.onload=()=>{const e=new Tm.fabric.Image(n,{id:SA(),name:"1",left:100,top:100});t.add(e),t.setActiveObject(e),t.renderAll(),n.remove()}}}else"string"===n.kind&&0===n.type.indexOf("text/plain")&&n.getAsString((e=>{const i=t.getActiveObject();if(i&&("textbox"===i.type||"i-text"===i.type)&&i.text){const n=i.selectionStart,r=i.text.substring(0,n),o=i.text.substring(n);i.set("text",r+e+o),i.selectionStart=n+e.length,i.selectionEnd=n+e.length,i.dirty=!0,t.renderAll()}else{const i=new Tm.fabric.IText(e,{left:100,top:100,fontSize:80,id:SA()});t.add(i),t.setActiveObject(i)}}));i.length&&(this.cache=null)}}class Xb{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="MoveHotKeyPlugin";hotkeys=["left","right","down","up"];hotkeyEvent(e,t){if("keydown"===t.type){const{canvas:t}=this,i=t.getActiveObject();if(!i)return;switch(e){case"left":if(void 0===i.left)return;i.set("left",i.left-1);break;case"right":if(void 0===i.left)return;i.set("left",i.left+1);break;case"down":if(void 0===i.top)return;i.set("top",i.top+1);break;case"up":if(void 0===i.top)return;i.set("top",i.top-1)}t.renderAll()}}destroy(){}}class $b{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="DeleteHotKeyPlugin";static apis=["del"];hotkeys=["backspace"];hotkeyEvent(e,t){"keydown"===t.type&&"backspace"===e&&this.del()}del(){const{canvas:e}=this,t=e.getActiveObjects();t&&(t.map((t=>e.remove(t))),e.requestRenderAll(),e.discardActiveObject())}contextMenu(){if(this.canvas.getActiveObject())return[null,{text:"",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.del()}]}destroy(){}}class qb{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="GroupPlugin";static apis=["unGroup","group"];unGroup(){const e=this.canvas.getActiveObject();if(!e)return;const t=e.getObjects();e.toActiveSelection();for(const i of t)i.set("id",SA());this.canvas.discardActiveObject().renderAll()}group(){const e=this.canvas.getActiveObject();if(!e)return;const t=e.toGroup(),i=t.getObjects();t.clone((e=>{e.set("id",SA()),this.canvas.remove(t),i.forEach((e=>{this.canvas.remove(e)})),this.canvas.add(e),this.canvas.setActiveObject(e)}))}contextMenu(){const e=this.canvas.getActiveObject();return sb(e)?[{text:"",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.group()}]:ab(e)?[{text:"",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.unGroup()}]:void 0}destroy(){}}Tm.fabric.Arrow=Tm.fabric.util.createClass(Tm.fabric.Line,{type:"arrow",superType:"drawing",initialize(e,t){if(!e){const{x1:i,x2:n,y1:r,y2:o}=t;e=[i,r,n,o]}t=t||{},this.callSuper("initialize",e,t)},_render(e){this.callSuper("_render",e),e.save(),e.scale(1/this.scaleX,1/this.scaleY);const t=(this.x2-this.x1)*this.scaleX,i=(this.y2-this.y1)*this.scaleY,n=Math.atan2(i,t);e.translate((this.x2-this.x1)/2*this.scaleX,(this.y2-this.y1)/2*this.scaleY),e.rotate(n),e.beginPath(),e.moveTo(5,0),e.lineTo(-5,5),e.lineTo(-5,-5),e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.stroke,e.fillStyle=this.fill,e.stroke(),e.fill(),e.restore()}}),Tm.fabric.Arrow.fromObject=(e,t)=>{const{x1:i,x2:n,y1:r,y2:o}=e;return t(new Tm.fabric.Arrow([i,r,n,o],e))};const Kb=Tm.fabric.Arrow;Tm.fabric.ThinTailArrow=Tm.fabric.util.createClass(Tm.fabric.Line,{type:"thinTailArrow",superType:"drawing",initialize(e,t){if(!e){const{x1:i,x2:n,y1:r,y2:o}=t;e=[i,r,n,o]}t=t||{},this.callSuper("initialize",e,t)},_render(e){e.save(),e.scale(1/this.scaleX,1/this.scaleY);const t=(this.x2-this.x1)*this.scaleX,i=(this.y2-this.y1)*this.scaleY;e.translate(-t/2,-i/2);const n=Math.atan2(i,t);e.rotate(n);let r=Math.hypot(t,i);r=r<20?20:r,e.beginPath(),e.moveTo(0,0),e.lineTo(r-18,-5),e.lineTo(r-20,-12),e.lineTo(r,0),e.lineTo(r-20,12),e.lineTo(r-18,5),e.lineTo(0,0),e.lineWidth=this.strokeWidth,e.strokeStyle=this.stroke,e.fillStyle=this.fill,e.stroke(),e.fill(),e.restore()}}),Tm.fabric.ThinTailArrow.fromObject=(e,t)=>{const{x1:i,x2:n,y1:r,y2:o}=e;return t(new Tm.fabric.ThinTailArrow([i,r,n,o],e))};const Jb=Tm.fabric.ThinTailArrow;class Zb{constructor(e,t){this.canvas=e,this.editor=t,this.isDrawingLine=!1,this.isDrawingLineMode=!1,this.lineType="",this.lineToDraw=null,this.pointer=null,this.pointerPoints=null,this.init()}static pluginName="DrawLinePlugin";static apis=["setLineType","setMode"];isDrawingLineMode;lineType;lineToDraw;pointer;pointerPoints;isDrawingLine;init(){const{canvas:e}=this;e.on("mouse:down",(t=>{if(!this.isDrawingLineMode)return;let i;e.discardActiveObject(),e.getObjects().forEach((e=>{e.selectable=!1,e.hasControls=!1})),e.requestRenderAll(),this.isDrawingLine=!0,this.pointer=e.getPointer(t.e),this.pointerPoints=[this.pointer.x,this.pointer.y,this.pointer.x,this.pointer.y];let n={strokeWidth:2,stroke:"#000000",id:SA()};switch(this.lineType){case"line":i=Tm.fabric.Line;break;case"arrow":i=Kb;break;case"thinTailArrow":i=Jb,n={strokeWidth:2,stroke:"#ff0000",fill:"#ff0000",id:SA()}}if(!i)throw new Error("Draw failed: invalid lineType.");this.lineToDraw=new i(this.pointerPoints,n),this.lineToDraw.selectable=!1,this.lineToDraw.evented=!1,this.lineToDraw.strokeUniform=!0,e.add(this.lineToDraw)})),e.on("mouse:move",(t=>{if(this.isDrawingLine&&["line","arrow","thinTailArrow"].includes(this.lineType)&&(e.discardActiveObject(),!e.getActiveObject())){if(this.pointer=e.getPointer(t.e),t.e.shiftKey){const e=this.pointerPoints[0],t=this.pointerPoints[1],i=this.pointer.x-e,n=this.pointer.y-t,r=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i)/Math.PI*180;o=15*~~((o+7.5)%360/15);const a=r*Math.cos(o*Math.PI/180),s=r*Math.sin(o*Math.PI/180);this.lineToDraw.set({x2:a+e,y2:s+t})}else this.lineToDraw.set({x2:this.pointer.x,y2:this.pointer.y});e.renderAll()}})),e.on("mouse:up",(()=>{this.isDrawingLine&&(this.lineToDraw.setCoords(),this.isDrawingLine=!1,e.discardActiveObject())}))}setLineType(e){this.lineType=e}setMode(e){this.isDrawingLineMode=e,this.isDrawingLineMode||this.endRest()}endRest(){this.canvas.getObjects().forEach((e=>{"workspace"!==e.id&&(e.selectable=!0,e.hasControls=!0)}))}destroy(){}}class ey{constructor(e,t){this.canvas=e,this.editor=t,this._init()}static pluginName="GroupTextEditorPlugin";isDown=!1;_init(){this.canvas.on("mouse:down",(e=>{this.isDown=!0,!e.target||e.target.lockMovementX||e.target.lockMovementY||e.target.lockRotation||e.target.lockScalingX||e.target.lockScalingY||(e.target.hasControls=!0)})),this.canvas.on("mouse:up",(()=>{this.isDown=!1})),this.canvas.on("mouse:dblclick",(e=>{if(ab(e.target)){const t=this._getGroupObj(e);if(!t)return;if(t.selectable=!0,t.hasControls&&(t.hasControls=!1),this.isText(t))return void this._bedingTextEditingEvent(t,e.target);this.canvas.setActiveObject(t),this.canvas.renderAll()}}))}_getGroupTextObj(e){const t=this.canvas.getPointer(e.e,!0);if(!ab(e.target))return!1;const i=this.canvas._searchPossibleTargets(e.target._objects,t);return!(!i||!this.isText(i))&&i}_getGroupObj(e){const t=this.canvas.getPointer(e.e,!0);return!!ab(e.target)&&this.canvas._searchPossibleTargets(e.target._objects,t)}_bedingTextEditingEvent(e,t){const i=e.toObject(),n=t.calcTransformMatrix(),r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=r*(e.left??0)+a*(e.top??0)+l,d=o*(e.left??0)+s*(e.top??0)+c,h=new e.constructor(e.text??"",{...i,scaleX:i.scaleX*r,scaleY:i.scaleY*r,textAlign:e.textAlign,left:u,top:d,styles:e.styles,groupCopyed:e.group});h.id=SA(),e.visible=!1,t.addWithUpdate(),h.visible=!0,h.selectable=!0,h.hasControls=!1,h.editable=!0,this.canvas.add(h),this.canvas.setActiveObject(h),h.enterEditing(),h.selectAll(),h.on("editing:exited",(()=>{const i=h.toObject();e.set({...se(i,["fill","fontSize","fontStyle","fontFamily","lineHeight","backgroundColor"]),text:h.text,visible:!0}),t.addWithUpdate(),h.visible=!1,this.canvas.remove(h),this.canvas.setActiveObject(t)}))}_bedingEditingEvent(e,t){if(!t.target)return;const i=t.target.left,n=t.target.top,r=this._unGroup()||[],o=()=>{const t=this.canvas.getObjects().filter((e=>e.id&&r.includes(e.id)));t.forEach((e=>this.canvas.remove(e)));const a=new Tm.fabric.Group([...t]);a.set("left",i),a.set("top",n),a.set("id",SA()),e.off("editing:exited",o),this.canvas.add(a),this.canvas.discardActiveObject().renderAll()};e.on("editing:exited",o)}_unGroup(){const e=[],t=this.canvas.getActiveObject();if(t)return t.getObjects().forEach((t=>{const i=SA();e.push(i),t.set("id",i)})),t.toActiveSelection(),e}isText(e){return e.type&&["i-text","text","textbox"].includes(e.type)}destroy(){}}class ty{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="GroupAlignPlugin";static apis=["left","right","xcenter","ycenter","top","bottom","xequation","yequation"];left(){const{canvas:e}=this,t=e.getActiveObject(),i=e.getActiveObjects();if(t){const{left:n=0}=t;e.discardActiveObject(),i.forEach((e=>{const t=e.getBoundingRect(!0);e.set({left:n-t.left+Number(e.left)}),e.setCoords()}));const r=new Tm.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}}right(){const{canvas:e}=this,t=e.getActiveObject(),i=e.getActiveObjects();if(t){const{left:n=0,width:r=0}=t;e.discardActiveObject(),i.forEach((e=>{const t=e.getBoundingRect(!0);e.set({left:n+r-(t.left+t.width)+Number(e.left)})}));const o=new Tm.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(o),e.requestRenderAll()}}xcenter(){const{canvas:e}=this,t=e.getActiveObject(),i=e.getActiveObjects();if(t){const{left:n=0,width:r=0}=t;e.discardActiveObject(),i.forEach((e=>{const t=e.getBoundingRect(!0);e.set({left:n+r/2-(t.left+t.width/2)+Number(e.left)})}));const o=new Tm.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(o),e.requestRenderAll()}}ycenter(){const{canvas:e}=this,t=e.getActiveObject(),i=e.getActiveObjects();if(t){const{top:n=0,height:r=0}=t;e.discardActiveObject(),i.forEach((e=>{const t=e.getBoundingRect(!0);e.set({top:n+r/2-(t.top+t.height/2)+Number(e.top)})}));const o=new Tm.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(o),e.requestRenderAll()}}top(){const{canvas:e}=this,t=e.getActiveObject(),i=e.getActiveObjects();if(t){const{top:n=0}=t;e.discardActiveObject(),i.forEach((e=>{const t=e.getBoundingRect(!0);e.set({top:n-t.top+Number(e.top)})}));const r=new Tm.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}}bottom(){const{canvas:e}=this,t=e.getActiveObject(),i=e.getActiveObjects();if(t){const{top:n=0,height:r=0}=t;e.discardActiveObject(),i.forEach((e=>{const t=e.getBoundingRect(!0);e.set({top:n+r-(t.top+t.height)+Number(e.top)})}));const o=new Tm.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(o),e.requestRenderAll()}}xequation(){const{canvas:e}=this,t=e.getActiveObject();function i(e){let t=1/0,i=-1/0;for(const n in e.aCoords)e.aCoords[n].x<t&&(t=e.aCoords[n].x),e.aCoords[n].x>i&&(i=e.aCoords[n].x);return i-t}if(t&&"activeSelection"===t.type){t._objects.sort(((e,t)=>e.left-t.left));const e=function(){const e=function(){let e=0;return t&&t.forEachObject((t=>{e+=i(t)})),e}();if(t)return(Number(t.width)-e)/(t._objects.length-1)}(),n=Number(t.width)/2;t.forEachObject(((r,o)=>{const a=function(e){if(0===e)return 0;let n=0;if(t)for(let r=0;r<e;r++)n+=i(t._objects[r]);return n}(o),s=e*o+a-n;r.set("left",s)}))}const n=e.getActiveObjects();e.discardActiveObject(),n.forEach((e=>{let t=1/0;for(const i in e.aCoords)e.aCoords[i].x<t&&(t=e.aCoords[i].x);e.set("left",2*e.left-t)}));const r=new Tm.fabric.ActiveSelection(n,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}yequation(){const{canvas:e}=this,t=e.getActiveObject()||{top:0,height:0};function i(e){let t=1/0,i=-1/0;for(const n in e.aCoords)e.aCoords[n].y<t&&(t=e.aCoords[n].y),e.aCoords[n].y>i&&(i=e.aCoords[n].y);return i-t}if(t&&"activeSelection"===t.type){t._objects.sort(((e,t)=>e.top-t.top));const e=function(){const e=function(){let e=0;return t.forEachObject((t=>{e+=i(t)})),e}();return(t.height-e)/(t._objects.length-1)}(),n=Number(t.height)/2;t.forEachObject(((r,o)=>{const a=function(e){if(0===e)return 0;let n=0;for(let r=0;r<e;r++)n+=i(t._objects[r]);return n}(o),s=e*o+a-n;r.set("top",s)}))}const n=e.getActiveObjects();e.discardActiveObject(),n.forEach((e=>{let t=1/0;for(const i in e.aCoords)e.aCoords[i].y<t&&(t=e.aCoords[i].y);e.set("top",2*e.top-t)}));const r=new Tm.fabric.ActiveSelection(n,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}destroy(){}}class iy{constructor(e,t){this.canvas=e,this.editor=t,this.workspace=null,this.init({width:900,height:2e3}),this.zoomRatio=.85}static pluginName="WorkspacePlugin";static events=["sizeChange"];static apis=["big","small","auto","one","setSize","getWorkspase","setWorkspaseBg","setCenterFromObject","getScale","getWorkspaceSize"];workspaceEl;workspace;resizeObserver;option;zoomRatio;init(e){const t=document.querySelector("#workspace");if(!t)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=t,this.workspace=null,this.option=e,this._initBackground(),this._initWorkspace(),this._initResizeObserve(),this._bindWheel()}hookImportAfter(){return new Promise((e=>{const t=this.canvas.getObjects().find((e=>"workspace"===e.id));t&&(t.set("selectable",!1),t.set("hasControls",!1),t.set("evented",!1),t.width&&t.height&&(this.setSize(t.width,t.height),this.editor.emit("sizeChange",t.width,t.height))),e("")}))}hookSaveAfter(){return new Promise((e=>{this.auto(),e(!0)}))}_initBackground(){this.canvas.backgroundImage="",this.canvas.setBackgroundColor("#ffffff",this.canvas.renderAll.bind(this.canvas)),this.canvas.setWidth(this.workspaceEl.offsetWidth),this.canvas.setHeight(this.workspaceEl.offsetHeight)}_initWorkspace(){const{width:e,height:t}=this.option,i=new Tm.fabric.Rect({fill:"transparent",width:e,height:t,id:"workspace",strokeWidth:0});i.set("selectable",!1),i.set("hasControls",!1),i.hoverCursor="default",this.canvas.add(i),this.canvas.renderAll(),this.workspace=i,this.canvas.clearHistory&&this.canvas.clearHistory(),this.auto()}getWorkspase(){return this.canvas.getObjects().find((e=>"workspace"===e.id))}setCenterFromObject(e){const{canvas:t}=this,i=e.getCenterPoint(),n=t.viewportTransform;void 0!==t.width&&void 0!==t.height&&n&&(n[4]=t.width/2-i.x*n[0],n[5]=t.height/2-i.y*n[3],t.setViewportTransform(n),t.renderAll())}getWorkspaceSize(){return this.option}_initResizeObserve(){const e=new ResizeObserver(Z((()=>{this.auto()}),50));this.resizeObserver=e,this.resizeObserver.observe(this.workspaceEl)}setSize(e,t){this._initBackground(),this.option.width=e,this.option.height=t,this.workspace=this.canvas.getObjects().find((e=>"workspace"===e.id)),this.workspace.set("width",e),this.workspace.set("height",t),this.editor.emit("sizeChange",this.workspace.width,this.workspace.height),this.auto()}setZoomAuto(e,t){const{workspaceEl:i}=this,n=i.offsetWidth,r=i.offsetHeight;this.canvas.setWidth(n),this.canvas.setHeight(r);const o=this.canvas.getCenter();this.canvas.setViewportTransform(Tm.fabric.iMatrix.concat()),this.canvas.zoomToPoint(new Tm.fabric.Point(o.left,o.top),e),this.workspace&&(this.setCenterFromObject(this.workspace),this.workspace.clone((e=>{this.canvas.clipPath=e,this.canvas.requestRenderAll()})),t&&t(this.workspace.left,this.workspace.top))}getScale(){return Tm.fabric.util.findScaleToFit(this.getWorkspase(),{width:this.workspaceEl.offsetWidth,height:this.workspaceEl.offsetHeight})}big(){let e=this.canvas.getZoom();e+=.05;const t=this.canvas.getCenter();this.canvas.zoomToPoint(new Tm.fabric.Point(t.left,t.top),e)}small(){let e=this.canvas.getZoom();e-=.05;const t=this.canvas.getCenter();this.canvas.zoomToPoint(new Tm.fabric.Point(t.left,t.top),e<0?.01:e)}auto(){const e=this.getScale();this.setZoomAuto(e*this.zoomRatio)}one(){this.setZoomAuto(1*this.zoomRatio),this.canvas.requestRenderAll()}setWorkspaseBg(e){const t=this.getWorkspase();t?.set("fill",e)}_bindWheel(){this.canvas.on("mouse:wheel",(function(e){const t=e.e.deltaY;let i=this.getZoom();i*=.999**t,i>20&&(i=20),i<.01&&(i=.01);const n=this.getCenter();this.zoomToPoint(new Tm.fabric.Point(n.left,n.top),i),e.e.preventDefault(),e.e.stopPropagation()}))}destroy(){this.resizeObserver.disconnect(),this.canvas.off()}}Tm.fabric.Canvas.prototype.initialize=function(e){return function(...t){return e.call(this,...t),this._historyInit(),this}}(Tm.fabric.Canvas.prototype.initialize),Tm.fabric.Canvas.prototype.dispose=function(e){return function(...t){return e.call(this,...t),this._historyDispose(),this}}(Tm.fabric.Canvas.prototype.dispose),Tm.fabric.Canvas.prototype._historyNext=function(){return JSON.stringify(this.toDatalessJSON(this.extraProps))},Tm.fabric.Canvas.prototype._historyEvents=function(){return{"object:added":e=>this._historySaveAction(e),"object:removed":e=>this._historySaveAction(e),"object:modified":e=>this._historySaveAction(e),"object:skewing":e=>this._historySaveAction(e)}},Tm.fabric.Canvas.prototype._historyInit=function(){this.historyUndo=[],this.historyRedo=[],this.extraProps=["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension"],this.historyNextState=this._historyNext(),this.on(this._historyEvents())},Tm.fabric.Canvas.prototype._historyDispose=function(){this.off(this._historyEvents())},Tm.fabric.Canvas.prototype._historySaveAction=function(e){if(!this.historyProcessing&&(!e||e.target&&!e.target.excludeFromExport)){const e=this._historyNext();this.historyUndo.push(e),this.historyNextState=this._historyNext(),this.fire("history:append",{json:e})}},Tm.fabric.Canvas.prototype.undo=function(e){this.historyProcessing=!0;const t=this.historyUndo.pop();t?(this.historyRedo.push(this._historyNext()),this.historyNextState=t,this._loadHistory(t,"history:undo",e)):this.historyProcessing=!1},Tm.fabric.Canvas.prototype.redo=function(e){this.historyProcessing=!0;const t=this.historyRedo.pop();t?(this.historyUndo.push(this._historyNext()),this.historyNextState=t,this._loadHistory(t,"history:redo",e)):this.historyProcessing=!1},Tm.fabric.Canvas.prototype._loadHistory=function(e,t,i){var n=this;this.loadFromJSON(e,(function(){n.renderAll(),n.fire(t),n.historyProcessing=!1,i&&"function"==typeof i&&i()}))},Tm.fabric.Canvas.prototype.clearHistory=function(e){if(e){const e=this.historyUndo.pop();this.historyUndo=[e],this.historyRedo=[],this.fire("history:clear")}else this.historyUndo=[],this.historyRedo=[],this.fire("history:clear")},Tm.fabric.Canvas.prototype.clearUndo=function(){this.historyUndo=[]},Tm.fabric.Canvas.prototype.onHistory=function(){this.historyProcessing=!1,this._historySaveAction()},Tm.fabric.Canvas.prototype.canUndo=function(){return this.historyUndo.length>0},Tm.fabric.Canvas.prototype.canRedo=function(){return this.historyRedo.length>0},Tm.fabric.Canvas.prototype.offHistory=function(){this.historyProcessing=!0};class ny{constructor(e,t){this.canvas=e,this.editor=t,Tm.fabric.Canvas.prototype._historyNext=()=>this.editor.getJson(),this._init()}static pluginName="HistoryPlugin";static apis=["undo","redo","historyUpdate"];static events=["historyUpdate"];hotkeys=["ctrl+z","ctrl+shift+z","+z","+shift+z"];_init(){this.canvas.on("history:append",(()=>{this.historyUpdate()})),window.addEventListener("beforeunload",(e=>{this.canvas.historyUndo.length>0&&((e||window.event).returnValue="")}))}historyUpdate(){const{historyUndo:e,historyRedo:t}=this.canvas;this.editor.emit("historyUpdate",e.length,t.length)}hookImportAfter(){return this.canvas.clearHistory(!0),this.historyUpdate(),Promise.resolve()}undo(){this.canvas.undo(),this.historyUpdate()}redo(){this.canvas.redo(),this.historyUpdate()}hotkeyEvent(e,t){if("keydown"===t.type)switch(e){case"ctrl+z":case"+z":this.undo();break;case"ctrl+shift+z":case"+shift+z":this.redo()}}}class ry{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="FlipPlugin";static apis=["flip"];flip(e){const t=this.canvas.getActiveObject();t&&(t.set(`flip${e}`,!t[`flip${e}`]).setCoords(),this.canvas.requestRenderAll())}contextMenu(){if(this.editor.getSelectMode()===IA.ONE)return[{text:"",hotkey:"",subitems:[{text:"flip.x",hotkey:"|",onclick:()=>this.flip("X")},{text:"flip.y",hotkey:"-",onclick:()=>this.flip("Y")}]}]}destroy(){}}const oy=(e,t)=>{const i=t?"left":"top",n=t?"width":"height";e.sort(((e,t)=>e[i]-t[i]));const r=[];let o=Object.assign({},e[0]);for(const a of e){const e=Object.assign({},a);o[i]+o[n]>=e[i]?o[n]=Math.max(o[i]+o[n],e[i]+e[n])-o[i]:(r.push(o),o=Object.assign({},e))}return r.push(o),r},ay=(e,t)=>{e.save();const{left:i,top:n,width:r,height:o,stroke:a,lineWidth:s}=t;e.beginPath(),a&&(e.strokeStyle=a),e.lineWidth=s??1,e.moveTo(i,n),e.lineTo(i+r,n+o),e.stroke(),e.restore()},sy=(e,t)=>{e.save();const{left:i,top:n,text:r,fill:o,align:a,angle:s,fontSize:l}=t;o&&(e.fillStyle=o),e.textAlign=a??"left",e.textBaseline="top",e.font=`${l??10}px sans-serif`,s&&(e.translate(i,n),e.rotate(Math.PI/180*s),e.translate(-i,-n)),e.fillText(r,i,n),e.restore()},ly=(e,t)=>{e.save();const{left:i,top:n,width:r,height:o,fill:a,stroke:s,strokeWidth:l}=t;e.beginPath(),a&&(e.fillStyle=a),e.rect(i,n,r,o),e.fill(),s&&(e.strokeStyle=s,e.lineWidth=l??1,e.stroke()),e.restore()},cy=(e,t)=>{e.save();const{isHorizontal:i,left:n,top:r,width:o,height:a,backgroundColor:s}=t,l=i?e.createLinearGradient(n,a/2,n+o,a/2):e.createLinearGradient(o/2,r,o/2,a+r),c=new Tm.fabric.Color(s);c.setAlpha(0),l.addColorStop(0,c.toRgba()),l.addColorStop(.33,s),l.addColorStop(.67,s),l.addColorStop(1,c.toRgba()),ly(e,{left:n,top:r,width:o,height:a,fill:l}),e.restore()};Tm.fabric.GuideLine;class uy{ctx;options;startCalibration;activeOn="up";objectRect;eventHandler=(()=>({calcObjectRect:Z(this.calcObjectRect.bind(this),15),clearStatus:this.clearStatus.bind(this),canvasMouseDown:this.canvasMouseDown.bind(this),canvasMouseMove:Z(this.canvasMouseMove.bind(this),15),canvasMouseUp:this.canvasMouseUp.bind(this),render:e=>{e.ctx&&this.render()}}))();lastAttr={status:"out",cursor:void 0,selection:void 0};tempGuidelLine;constructor(e){this.options=Object.assign({ruleSize:20,fontSize:10,enabled:!1,backgroundColor:"#fff",borderColor:"transparent",highlightColor:"#007fff",textColor:"#888"},e),this.ctx=this.options.canvas.getContext(),Tm.fabric.util.object.extend(this.options.canvas,{ruler:this}),Tm.fabric.GuideLine||(Tm.fabric.GuideLine=Tm.fabric.util.createClass(Tm.fabric.Line,{type:"GuideLine",selectable:!1,hasControls:!1,hasBorders:!1,stroke:"#4bec13",originX:"center",originY:"center",padding:4,globalCompositeOperation:"difference",axis:"horizontal",initialize(e,t){const i="horizontal"===t.axis;this.hoverCursor=i?"ns-resize":"ew-resize";const n=i?[-999999,e,999999,e]:[e,-999999,e,999999];t[i?"lockMovementX":"lockMovementY"]=!0,this.callSuper("initialize",n,t),this.on("mousedown:before",(e=>{"down"===this.activeOn&&this.canvas&&this.canvas.setActiveObject(this,e.e)})),this.on("moving",(e=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(e.e)?this.moveCursor="not-allowed":this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:moving",{target:this,e:e.e})})),this.on("mouseup",(e=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(e.e)?this.canvas.remove(this):(this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:mouseup",{target:this,e:e.e}))})),this.on("removed",(()=>{this.off("removed"),this.off("mousedown:before"),this.off("moving"),this.off("mouseup")}))},getBoundingRect(e,t){this.bringToFront();const i=this.isHorizontal(),n=this.callSuper("getBoundingRect",e,t);return n[i?"top":"left"]+=n[i?"height":"width"]/2,n[i?"height":"width"]=0,n},isPointOnRuler(e){const t=this.isHorizontal(),i=this.canvas&&this.canvas.ruler.isPointOnRuler(new Tm.fabric.Point(e.offsetX,e.offsetY));return!!(t&&"horizontal"===i||!t&&"vertical"===i)&&i},isHorizontal(){return 0===this.height}}),Tm.fabric.GuideLine.fromObject=function(e,t){const i=(0,Tm.fabric.util.object.clone)(e,!0),n=0===i.height;i.xy=n?i.y1:i.x1,i.axis=n?"horizontal":"vertical",Tm.fabric.Object._fromObject(i.type,i,(function(e){delete e.xy,t&&t(e)}),"xy")}),this.options.enabled&&this.enable()}destroy(){this.disable()}clearGuideline(){this.options.canvas.remove(...this.options.canvas.getObjects(Tm.fabric.GuideLine.prototype.type))}showGuideline(){this.options.canvas.getObjects(Tm.fabric.GuideLine.prototype.type).forEach((e=>{e.set("visible",!0)})),this.options.canvas.renderAll()}hideGuideline(){this.options.canvas.getObjects(Tm.fabric.GuideLine.prototype.type).forEach((e=>{e.set("visible",!1)})),this.options.canvas.renderAll()}enable(){this.options.enabled=!0,this.options.canvas.on("after:render",this.eventHandler.calcObjectRect),this.options.canvas.on("after:render",this.eventHandler.render),this.options.canvas.on("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.on("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.on("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.on("selection:cleared",this.eventHandler.clearStatus),this.showGuideline(),this.render()}disable(){this.options.canvas.off("after:render",this.eventHandler.calcObjectRect),this.options.canvas.off("after:render",this.eventHandler.render),this.options.canvas.off("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.off("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.off("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.off("selection:cleared",this.eventHandler.clearStatus),this.hideGuideline(),this.options.enabled=!1}render(){const e=this.options.canvas.viewportTransform;e&&(this.draw({isHorizontal:!0,rulerLength:this.getSize().width,startCalibration:this.startCalibration?.x?this.startCalibration.x:-e[4]/e[0]}),this.draw({isHorizontal:!1,rulerLength:this.getSize().height,startCalibration:this.startCalibration?.y?this.startCalibration.y:-e[5]/e[3]}),cy(this.ctx,{isHorizontal:!0,left:-10,top:-10,width:2*this.options.ruleSize+10,height:this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}),cy(this.ctx,{isHorizontal:!1,left:-10,top:-10,width:this.options.ruleSize+10,height:2*this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}))}getSize(){return{width:this.options.canvas.width??0,height:this.options.canvas.height??0}}getZoom(){return this.options.canvas.getZoom()}draw(e){const{isHorizontal:t,rulerLength:i,startCalibration:n}=e,r=this.getZoom(),o=(e=>{const t=[.02,.03,.05,.1,.2,.5,1,2,5,10,18];let i=0;for(;i<t.length&&t[i]<e;)i++;return[5e3,2500,1e3,500,250,100,50,25,10,5,2][i-1]||5e3})(r),a=i/r,s=Math[n>0?"floor":"ceil"](n/o)*o,l=s-n,c=this.getSize();ly(this.ctx,{left:0,top:0,width:t?c.width:this.options.ruleSize,height:t?this.options.ruleSize:c.height,fill:this.options.backgroundColor,stroke:this.options.borderColor});const u=new Tm.fabric.Color(this.options.textColor);for(let d=0;d+l<=Math.ceil(a);d+=o){const e=(l+d)*r,i=s+d+"",n=10*i.length/4,o=t?e-n-1:this.options.ruleSize/2-this.options.fontSize/2-4,a=t?this.options.ruleSize/2-this.options.fontSize/2-4:e+n;sy(this.ctx,{text:i,left:o,top:a,fill:u.toRgb(),angle:t?0:-90})}for(let d=0;d+l<=Math.ceil(a);d+=o){const e=Math.round((l+d)*r),i=t?e:this.options.ruleSize-8,n=t?this.options.ruleSize-8:e,o=t?0:8,a=t?8:0;ay(this.ctx,{left:i,top:n,width:o,height:a,stroke:u.toRgb()})}if(this.objectRect){const e=t?"x":"y";this.objectRect[e].forEach((i=>{if(i.skip===e)return;const o=e=>Math.round(e/r+n)+"",a=o(t?i.left:i.top),s=o(t?i.left+i.width:i.top+i.height),l=a===s,c={isHorizontal:t,width:t?160:this.options.ruleSize-8,height:t?this.options.ruleSize-8:160,backgroundColor:this.options.backgroundColor};cy(this.ctx,{...c,left:t?i.left-80:0,top:t?0:i.top-80}),l||cy(this.ctx,{...c,left:t?i.width+i.left-80:0,top:t?0:i.height+i.top-80});const u=new Tm.fabric.Color(this.options.highlightColor);u.setAlpha(.5),ly(this.ctx,{left:t?i.left:this.options.ruleSize-8,top:t?this.options.ruleSize-8:i.top,width:t?i.width:8,height:t?8:i.height,fill:u.toRgba()});const d=this.options.ruleSize/2-this.options.fontSize/2-4,h={fill:u.toRgba(),angle:t?0:-90};sy(this.ctx,{...h,text:a,left:t?i.left-2:d,top:t?d:i.top-2,align:l?"center":t?"right":"left"}),l||sy(this.ctx,{...h,text:s,left:t?i.left+i.width+2:d,top:t?d:i.top+i.height+2,align:t?"left":"right"});const p=l?8:14;u.setAlpha(1);const f={width:t?0:p,height:t?p:0,stroke:u.toRgba()};ay(this.ctx,{...f,left:t?i.left:this.options.ruleSize-p,top:t?this.options.ruleSize-p:i.top}),l||ay(this.ctx,{...f,left:t?i.left+i.width:this.options.ruleSize-p,top:t?this.options.ruleSize-p:i.top+i.height})}))}}calcObjectRect(){const e=this.options.canvas.getActiveObjects();if(0===e.length)return;const t=e.reduce(((e,t)=>{const i=t.getBoundingRect(!1,!0);if(t.group){const e={top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,...t.group};i.width*=e.scaleX,i.height*=e.scaleY;const n=e.width/2+e.left,r=(e.width/2+(t.left??0))*(1-e.scaleX);i.left+=(n-r)*this.getZoom();const o=e.height/2+e.top,a=(e.height/2+(t.top??0))*(1-e.scaleY);i.top+=(o-a)*this.getZoom()}return t instanceof Tm.fabric.GuideLine&&(i.skip=t.isHorizontal()?"x":"y"),e.push(i),e}),[]);0!==t.length&&(this.objectRect={x:oy(t,!0),y:oy(t,!1)})}clearStatus(){this.objectRect=void 0}isPointOnRuler(e){return new Tm.fabric.Rect({left:0,top:0,width:this.options.ruleSize,height:this.options.canvas.height}).containsPoint(e)?"vertical":!!new Tm.fabric.Rect({left:0,top:0,width:this.options.canvas.width,height:this.options.ruleSize}).containsPoint(e)&&"horizontal"}canvasMouseDown(e){if(!e.pointer||!e.absolutePointer)return;const t=this.isPointOnRuler(e.pointer);t&&"up"===this.activeOn&&(this.lastAttr.selection=this.options.canvas.selection,this.options.canvas.selection=!1,this.activeOn="down",this.tempGuidelLine=new Tm.fabric.GuideLine("horizontal"===t?e.absolutePointer.y:e.absolutePointer.x,{axis:t,visible:!1}),this.options.canvas.add(this.tempGuidelLine),this.options.canvas.setActiveObject(this.tempGuidelLine),this.options.canvas._setupCurrentTransform(e.e,this.tempGuidelLine,!0),this.tempGuidelLine.fire("down",this.getCommonEventInfo(e)))}getCommonEventInfo=e=>{if(this.tempGuidelLine&&e.absolutePointer)return{e:e.e,transform:this.tempGuidelLine.get("transform"),pointer:{x:e.absolutePointer.x,y:e.absolutePointer.y},target:this.tempGuidelLine}};canvasMouseMove(e){if(!e.pointer)return;if(this.tempGuidelLine&&e.absolutePointer){const t={};"horizontal"===this.tempGuidelLine.axis?t.top=e.absolutePointer.y:t.left=e.absolutePointer.x,this.tempGuidelLine.set({...t,visible:!0}),this.options.canvas.requestRenderAll();const i=this.getCommonEventInfo(e);this.options.canvas.fire("object:moving",i),this.tempGuidelLine.fire("moving",i)}const t=this.isPointOnRuler(e.pointer);t?"out"!==this.lastAttr.status&&t===this.lastAttr.status||(this.lastAttr.cursor=this.options.canvas.defaultCursor,this.options.canvas.defaultCursor="horizontal"===t?"ns-resize":"ew-resize",this.lastAttr.status=t):"out"!==this.lastAttr.status&&(this.options.canvas.defaultCursor=this.lastAttr.cursor,this.lastAttr.status="out")}canvasMouseUp(e){"down"===this.activeOn&&(this.options.canvas.selection=this.lastAttr.selection,this.activeOn="up",this.tempGuidelLine?.fire("up",this.getCommonEventInfo(e)),this.tempGuidelLine=void 0)}}class dy{constructor(e,t){this.canvas=e,this.editor=t,this.init()}static pluginName="RulerPlugin";static apis=["hideGuideline","showGuideline","rulerEnable","rulerDisable"];ruler;hookSaveBefore(){return new Promise((e=>{this.hideGuideline(),e(!0)}))}hookSaveAfter(){return new Promise((e=>{this.showGuideline(),e(!0)}))}init(){this.ruler=function(e,t){const i=new uy({canvas:e,...t});let n;const r=()=>{n=e.getObjects().find((e=>"workspace"===e.id))},o=(e,t)=>{const{top:i,height:n,left:r,width:o}=e;if(void 0===i||void 0===n||void 0===r||void 0===o)return!1;const a=t.getBoundingRect(!0,!0),{top:s,height:l,left:c,width:u}=a;return!(!t.isHorizontal()||!(i>s+1||i+n<s+l-1))||!t.isHorizontal()&&(r>c+1||r+o<c+u-1)};return e.on("guideline:moving",(e=>{if(!n)return void r();const{target:t}=e;o(n,t)&&(t.moveCursor="not-allowed")})),e.on("guideline:mouseup",(t=>{if(!n)return void r();const{target:i}=t;o(n,i)&&(e.remove(i),e.setCursor(e.defaultCursor??""))})),i}(this.canvas)}hideGuideline(){this.ruler.hideGuideline()}showGuideline(){this.ruler.showGuideline()}rulerEnable(){this.ruler.enable()}rulerDisable(){this.ruler.disable()}destroy(){}}class hy{constructor(e,t,i){this.canvas=e,this.editor=t,this.repoSrc=i.repoSrc,this.apiMapUrl={template:i.repoSrc+"/template/type.json",svg:i.repoSrc+"/svg/type.json"}}static pluginName="MaterialPlugin";static apis=["getTemplTypeList","getTemplList","getMaterialTypeList","getMaterialList","getSizeList"];apiMapUrl;repoSrc;getTemplTypeList(){return or.get(`${this.repoSrc}/api/templ-types?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,label:e.attributes.name})))))}getTemplList(e="",t=1,i=""){const n={fields:"*",populate:{img:"*"},filters:{},pagination:{page:t,pageSize:10}},r=this._getQueryParams(n,[{key:"templ_type",value:e,type:"$eq"},{key:"name",value:i,type:"$contains"}]);return or.get(`${this.repoSrc}/api/templs?${r}`).then((e=>({list:e.data.data.map((e=>({name:e.attributes.name,desc:e.attributes.desc,src:this._getMaterialPreviewUrl(e.attributes.img),json:e.attributes.json}))),pagination:e?.data?.meta?.pagination})))}getMaterialTypeList(){return or.get(`${this.repoSrc}/api/material-types?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,label:e.attributes.name})))))}getMaterialList(e="",t=1,i=""){const n={populate:{img:"*"},filters:{},pagination:{page:t,pageSize:50}},r=this._getQueryParams(n,[{key:"material_type",value:e,type:"$eq"},{key:"name",value:i,type:"$contains"}]);return or.get(`${this.repoSrc}/api/materials?${r}`).then((e=>({list:e.data.data.map((e=>({name:e.attributes.name,desc:e.attributes.desc,src:this._getMaterialInfoUrl(e.attributes.img),previewSrc:this._getMaterialPreviewUrl(e.attributes.img)}))),pagination:e?.data?.meta?.pagination})))}getSizeList(){return or.get(`${this.repoSrc}/api/sizes?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,name:e.attributes.name,width:Number(e.attributes.width),height:Number(e.attributes.height),unit:e.attributes.unit})))))}getFontList(){return or.get(`${this.repoSrc}/api/fonts?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,label:e.attributes.name})))))}_getMaterialInfoUrl(e){const t=e?.data?.attributes?.url||"";return this.repoSrc+t}_getMaterialPreviewUrl(e){const t=e?.data?.attributes?.formats?.small?.url||e?.data?.attributes?.url||"";return this.repoSrc+t}_getQueryParams(e,t){return t.forEach((t=>{const{key:i,value:n,type:r}=t;n&&(e.filters[i]={[r]:n})})),Qt.stringify(e)}async getMaterialInfo(e){const t=this.apiMapUrl[e];return(await or.get(t,{params:{typeId:e}})).data.data}}var py={exports:{}};!function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function n(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.g.offsetWidth,i=t+100;return e.j.style.width=i+"px",e.i.scrollLeft=i,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function o(e,i){function n(){var e=o;r(e)&&null!==e.g.parentNode&&i(e.l)}var o=e;t(e.h,n),t(e.i,n),r(e)}function a(e,t,i){t=t||{},i=i||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=i}var s=null,l=null,c=null,u=null;function d(e){return null===u&&(u=!!e.document.fonts),u}function h(e,t){var i=e.style,n=e.weight;if(null===c){var r=document.createElement("div");try{r.style.font="condensed 100px sans-serif"}catch(o){}c=""!==r.style.font}return[i,n,c?e.stretch:"","100px",t].join(" ")}a.prototype.load=function(e,t){var r=this,a=e||"BESbswy",c=0,u=t||3e3,p=(new Date).getTime();return new Promise((function(e,t){if(d(r.context)&&!function(e){return null===l&&(d(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!e&&603>parseInt(e[1],10)):l=!1),l}(r.context)){var f=new Promise((function(e,t){!function i(){(new Date).getTime()-p>=u?t(Error(u+"ms timeout exceeded")):r.context.document.fonts.load(h(r,'"'+r.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(i,25)}),t)}()})),g=new Promise((function(e,t){c=setTimeout((function(){t(Error(u+"ms timeout exceeded"))}),u)}));Promise.race([g,f]).then((function(){clearTimeout(c),e(r)}),t)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function l(){var t;(t=-1!=v&&-1!=m||-1!=v&&-1!=A||-1!=m&&-1!=A)&&((t=v!=m&&v!=A&&m!=A)||(null===s&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=s&&(v==b&&m==b&&A==b||v==y&&m==y&&A==y||v==x&&m==x&&A==x)),t=!t),t&&(null!==w.parentNode&&w.parentNode.removeChild(w),clearTimeout(c),e(r))}var d=new i(a),f=new i(a),g=new i(a),v=-1,m=-1,A=-1,b=-1,y=-1,x=-1,w=document.createElement("div");w.dir="ltr",n(d,h(r,"sans-serif")),n(f,h(r,"serif")),n(g,h(r,"monospace")),w.appendChild(d.g),w.appendChild(f.g),w.appendChild(g.g),r.context.document.body.appendChild(w),b=d.g.offsetWidth,y=f.g.offsetWidth,x=g.g.offsetWidth,function e(){if((new Date).getTime()-p>=u)null!==w.parentNode&&w.parentNode.removeChild(w),t(Error(u+"ms timeout exceeded"));else{var i=r.context.document.hidden;!0!==i&&void 0!==i||(v=d.g.offsetWidth,m=f.g.offsetWidth,A=g.g.offsetWidth,l()),c=setTimeout(e,50)}}(),o(d,(function(e){v=e,l()})),n(d,h(r,'"'+r.family+'",sans-serif')),o(f,(function(e){m=e,l()})),n(f,h(r,'"'+r.family+'",serif')),o(g,(function(e){A=e,l()})),n(g,h(r,'"'+r.family+'",monospace'))}))}))},e.exports=a}()}(py);const fy=un(py.exports);class gy{constructor(e,t,i){this.canvas=e,this.editor=t,this.repoSrc=i.repoSrc,this.cacheList=[],this.tempPromise=null}tempPromise;static pluginName="FontPlugin";static apis=["getFontList","loadFont","getFontJson","downFontByJSON"];repoSrc;cacheList;hookImportBefore(e){return this.downFontByJSON(e)}getFontList(){return this.cacheList.length?Promise.resolve(this.cacheList):(this.tempPromise||(this.tempPromise=or.get(`${this.repoSrc}/api/fonts?populate=*&pagination[pageSize]=100`).then((e=>{const t=e.data.data?.map((e=>({name:e.attributes.name,type:e.attributes.type,file:this.repoSrc+e.attributes.file.data.attributes.url,img:this.repoSrc+e.attributes.img.data.attributes.url})));return this.cacheList=t,this.createFontCSS(t),t}))),this.tempPromise)}downFontByJSON(e){const t=JSON.parse(e);let i=[];const n=["arial"];i=t.objects?JSON.parse(e).objects.filter((e=>{const t=this.cacheList.find((t=>t.name===e.fontFamily));return e.type.includes("text")&&!n.includes(e.fontFamily)&&t})).map((e=>e.fontFamily)):n.includes(t.fontFamily)?[]:[t.fontFamily];const r=i.map((e=>new fy(e).load(null,15e4)));return Promise.all(r)}getFontJson(){const e=this.canvas.getActiveObject();if(e){const t=e.toJSON(["id","gradientAngle","selectable","hasControls"]),i=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t,null,"\t"))}`,n=e.toDataURL({});rb(i,"font.json"),rb(n,"font.png")}}loadFont(e){return new fy(e).load(null,15e4).then((()=>{const t=this.canvas.getActiveObjects()[0];t&&(t.set("fontFamily",e),this.canvas.renderAll())}))}createFontCSS(e){let t="";e.forEach((e=>{t+=`\n    @font-face {\n      font-family: ${e.name};\n      src: url('${e.file}');\n    }\n    `}));const i=document.createElement("style");try{i.appendChild(document.createTextNode(t))}catch(n){}document.getElementsByTagName("head")[0].appendChild(i)}destroy(){}}const vy=function(e,t,i,n){const r=t.target,o=r.controls[r.__corner],a=r.toLocalPoint(new Tm.fabric.Point(i,n),"center","center"),s=Ay(r),l=r._getTransformedDimensions(0,0);return null!=r.points&&(r.points[o.pointIndex]=new Tm.fabric.Point(a.x*s.x/l.x+r.pathOffset.x,a.y*s.y/l.y+r.pathOffset.y),!0)},my=function(e,t){return function(i,n,r,o){const a=n.target;if(null==a.points)return!1;const s=Tm.fabric.util.transformPoint(new Tm.fabric.Point(a.points[e].x-a.pathOffset.x,a.points[e].y-a.pathOffset.y),a.calcTransformMatrix()),l=t(i,n,r,o),c=Ay(a),u=(a.points[e].x-a.pathOffset.x)/c.x+.5,d=(a.points[e].y-a.pathOffset.y)/c.y+.5;return a.setPositionByOrigin(s,u,d),l}},Ay=function(e){const t=new Tm.fabric.Point(e.strokeUniform?1/e.scaleX:1,e.strokeUniform?1/e.scaleY:1).multiply(e.strokeWidth);return new Tm.fabric.Point(e.width+t.x,e.height+t.y)},by=function(e,t,i){const n=i.points[this.pointIndex].x-i.pathOffset.x,r=i.points[this.pointIndex].y-i.pathOffset.y;return Tm.fabric.util.transformPoint(new Tm.fabric.Point(n,r),Tm.fabric.util.multiplyTransformMatrices(i.canvas.viewportTransform,i.calcTransformMatrix()))};class yy{constructor(e,t){this.canvas=e,this.editor=t,this.isEdit=!1;const i=document.createElement("img");i.src=Vb,this.img=i,this.init()}isEdit;img;static pluginName="PolygonModifyPlugin";static events=[];static apis=["toggleEdit","activeEdit","inActiveEdit"];init(){}_onDeselected=(()=>Xr)();_ensureEvent(e){e.off("deselected",this._onDeselected)}toggleEdit(){this.isEdit?this.inActiveEdit():this.activeEdit()}activeEdit(){this.isEdit=!0;const e=this.canvas.getActiveObject();if(e&&"polygon"===e.type){if(this._ensureEvent(e),null==e.points)return;const t=e.points.length-1,i=this;e.controls=e.points.reduce((function(e,n,r){return e["p"+r]=new Tm.fabric.Control({positionHandler:by,actionHandler:my(r>0?r-1:t,vy),actionName:"modifyPolygon",render:(...e)=>function(e,t,i,n,r,o){ob(e,t,i,o,25,25,Tm.fabric.util.degreesToRadians(r.angle||0))}(...e,i.img)}),Object.defineProperty(e["p"+r],"pointIndex",{value:r}),e}),{}),e.set({objectCaching:!1}),e.hasBorders=!this.isEdit,this.canvas.requestRenderAll(),this._onDeselected=()=>this.inActiveEdit(e),e.on("deselected",this._onDeselected)}}inActiveEdit(e){this.isEdit=!1,(e=e||this.canvas.getActiveObject())&&"polygon"===e.type&&(e.cornerColor="blue",e.cornerStyle="rect",e.controls=Tm.fabric.Object.prototype.controls,e.hasBorders=!this.isEdit,e.set({objectCaching:!0}),this._onDeselected&&(e.off("deselected",this._onDeselected),this._onDeselected=Xr)),this.canvas.requestRenderAll()}}class xy{constructor(e,t){this.canvas=e,this.editor=t}isDrawingPolygon=!1;points=[];lines=[];anchors=[];tempPoint;tempLine;lastPoint;onEnd;delta=5;static pluginName="DrawPolygonPlugin";static apis=["beginDrawPolygon","endDrawPolygon","discardPolygon"];_isUsingHistory(){return this.canvas.offHistory&&"function"==typeof this.canvas.offHistory}_bindEvent(){window.addEventListener("keydown",this._escListener),this.canvas.on("mouse:down",this._downHandler),this.canvas.on("mouse:move",this._moveHandler)}_escListener=e=>{"Escape"!==e.key&&27!==e.keyCode||this._confirmBuildPolygon()};_downHandler=e=>{if(!this.isDrawingPolygon)return;const t=e.absolutePointer,i=new Tm.fabric.Point(t.x,t.y),n=this._mackAnchor(t);if(this.anchors.push(n),null==this.tempLine){const e=new Tm.fabric.Point(t.x,t.y);this.tempLine=this._makeLine([e,e]),this.canvas.add(this.tempLine)}else e.e.shiftKey&&i.setXY(this.tempLine.x2,this.tempLine.y2),n.set({left:i.x,top:i.y}),this.tempLine.set({x1:i.x,y1:i.y,x2:i.x,y2:i.y});if(this.lastPoint){const e=this._makeLine([this.lastPoint,i]);if(this.lines.push(e),this.canvas.add(e),this.points[0].distanceFrom(i)/this.canvas.getZoom()<=this.delta)return void this._confirmBuildPolygon()}this.canvas.add(n),this.lastPoint=i,this.points.push(i),this._ensureAnchorsForward()};_moveHandler=e=>{if(!this.isDrawingPolygon||!this.tempLine)return;const t=e.absolutePointer;if(e.e.shiftKey&&this.lastPoint){const e=function(e,t){const i=e.x,n=e.y,r=t.x-i,o=t.y-n,a=Math.sqrt(r*r+o*o);let s=Math.atan2(o,r)/Math.PI*180;return s=15*~~((s+7.5)%360/15),{x:a*Math.cos(s*Math.PI/180)+i,y:a*Math.sin(s*Math.PI/180)+n}}(this.lastPoint,t);this.tempLine.set({x2:e.x,y2:e.y})}else this.tempLine.set({x2:t.x,y2:t.y});this.canvas.renderAll()};_ensureAnchorsForward(){this.anchors.forEach((e=>{e.bringForward()}))}_unbindEvent(){window.removeEventListener("keydown",this._escListener),this.canvas.off("mouse:down",this._downHandler),this.canvas.off("mouse:move",this._moveHandler)}_createPolygon(e){return new Tm.fabric.Polygon(e,{fill:"#ccccccff",id:SA()})}_makeLine(e){const[t,i]=e;return new Tm.fabric.Line([t.x,t.y,i.x,i.y],{fill:"#000",stroke:"#000",strokeWidth:1,selectable:!1,evented:!1})}_mackAnchor(e){return new Tm.fabric.Circle({radius:5,left:e.x,top:e.y,fill:"rgb(178, 53, 84)",scaleX:1/this.canvas.getZoom(),scaleY:1/this.canvas.getZoom(),strokeWidth:1/this.canvas.getZoom(),originX:"center",originY:"center",evented:!1,selectable:!1})}_confirmBuildPolygon(){const e=this.points;if(this.discardPolygon(),this._isUsingHistory()&&(this.canvas.historyProcessing=!1),e.length>=3){const t=this._createPolygon(e);this.canvas.add(t)}}_prepare(){this.canvas.discardActiveObject(),this.canvas.getObjects().forEach((e=>{e.selectable=!1,e.hasControls=!1}))}beginDrawPolygon(e){this._prepare(),this.onEnd=e,this._isUsingHistory()&&(this.canvas.historyProcessing=!0),this.canvas.requestRenderAll(),this.isDrawingPolygon=!0,this._bindEvent()}endDrawPolygon(){this.canvas.discardActiveObject(),this.isDrawingPolygon=!1,this.lastPoint=void 0,this.tempPoint=void 0,this._unbindEvent(),this.onEnd&&this.onEnd(),this.onEnd=void 0}discardPolygon(){this.lines.forEach((e=>{this.canvas.remove(e)})),this.anchors.forEach((e=>{this.canvas.remove(e)})),this.tempLine&&this.canvas.remove(this.tempLine),this.tempLine=void 0,this.anchors=[],this.lines=[],this.points=[],this.endDrawPolygon()}}class wy{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="FreeDrawPlugin";static apis=["startDraw","endDraw"];_bindEvent(){this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("path:created",this._createdHandler)}_createdHandler=e=>{e.path.set("id",SA())};startDraw(e){this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new Tm.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.width=e.width,this._bindEvent()}endDraw(){if(this.canvas.isDrawingMode)return this.canvas.isDrawingMode=!1,void this._unbindEvent()}}class _y{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="PathTextPlugin";static apis=["startTextPathDraw","endTextPathDraw"];options;_beforeHandler=e=>{if(null==this.options)return;const t=e.path,i=Tm.fabric.util.getPathSegmentsInfo;t.segmentsInfo=i(t.path),t.set({stroke:this.options.lineColor});const n=this.options.defaultText,r=this.options.defaultFontSize,o=new Tm.fabric.IText(n,{shadow:"",fontFamily:"arial",fontSize:r,top:t.top,left:t.left,fill:this.options.color,path:t,id:SA(),editable:!1});this.canvas.add(o)};_createdHandler=e=>{this.canvas.remove(e.path)};_bindEvent(){this.canvas.on("before:path:created",this._beforeHandler),this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("before:path:created",this._beforeHandler),this.canvas.off("path:created",this._createdHandler)}startTextPathDraw(e={}){this.options={decimate:8,width:2,defaultText:" ",color:"#000000",lineColor:"#000000",defaultFontSize:20,...e},this.canvas.isDrawingMode=!0;const t=this.canvas.freeDrawingBrush=new Tm.fabric.PencilBrush(this.canvas);t.decimate=this.options.decimate,t.width=this.options.width,t.color=this.options.color,this._bindEvent()}endTextPathDraw(){this.canvas.isDrawingMode=!1,this._unbindEvent()}}async function Cy(e){const t=function(){const e={version:"5.3.0",objects:[],clipPath:null};return e}(),{clipPath:i,workspase:n}=function(e){const{width:t,height:i}=e,n={type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:t,height:i,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0},r={type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:t,height:i,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,id:"workspace",selectable:!1,hasControls:!0};return{clipPath:n,workspase:r}}(e);t.clipPath=i,t.objects.push(n);const r=function(e){const t=[];function i(e){e.forEach((e=>{e.children?i(e.children):t.push(e)}))}return i(e),t}(e.children),o=await async function(e){function t(e){return e.filter((e=>(e.text&&(e.type="text"),!e.isHidden))).map((async e=>{const t=ky(["left","top",["width",e=>e.width+50],"height","name",["visible",()=>!0],["opacity",e=>255/e.opacity],["id",SA]])(e),i=[{sourceType:"Layer",targetType:"image",attr:[],customTransform:async e=>({src:await async function(e){try{const t=await e.composite(),i=document.createElement("canvas"),n=i.getContext("2d"),r=new ImageData(t,e.width,e.height);return i.width=e.width,i.height=e.height,n.putImageData(r,0,0),i.toDataURL("image/png")}catch(t){return""}}(e)})},{sourceType:"text",targetType:"textbox",attr:["text"],async customTransform(e){const{FontSize:t,FillColor:i,Tracking:n}=e.textProperties.EngineDict.StyleRun.RunArray[0].StyleSheet.StyleSheetData;return{charSpacing:n,fontFamily:"",fill:Sy(i.Values),fontSize:t||12}}}],n="type",r=i.find((t=>t.sourceType===e[n]));if(r){const i=Ey(r.targetType),n=ky(r.attr)(e),o=r.customTransform?await r.customTransform(e):null;return io.assign(i,t,i,n,o)}return{...Ey("textbox")}}))}return await Promise.all(t(e))}(r);return t.objects.push(...o.reverse()),JSON.stringify(t,null,2)}function ky(e){return function(t){const i={desc:{}};return e.forEach((e=>{if("string"==typeof e){const n=io.get(t,e);io.set(i,e,n)}else{const[n,r]=e;if("function"==typeof r){const e=r(t);e&&io.set(i,n,e)}else{const e=io.get(t,r);io.set(i,n,e)}}})),i}}function Ey(e){return{group:{type:"group",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,selectable:!0,hasControls:!0},textbox:{type:"textbox",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:"",backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,fontFamily:"arial",fontWeight:"normal",fontSize:80,text:"",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",charSpacing:0,styles:[],direction:"ltr",path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",minWidth:20,splitByGrapheme:!0,selectable:!0,hasControls:!0},image:{type:"image",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,cropX:0,cropY:0,selectable:!0,hasControls:!0,src:"",crossOrigin:"anonymous",filters:[]},rect:{type:"rect",version:"5.3.0",originX:"center",originY:"center",left:0,top:0,width:226,height:302,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0,inverted:!1,absolutePositioned:!1}}[e]}function Sy(e){const[,t,i,n]=e;return`rgb(${255*t}, ${255*i}, ${255*n})`}class Iy{constructor(e,t){this.layerFrame=e,this.parent=t,this.type="Group",this.children=[]}get name(){var e,t;return null!==(t=null===(e=this.layerFrame)||void 0===e?void 0:e.layerProperties.name)&&void 0!==t?t:""}get opacity(){var e,t;return null!==(t=null===(e=this.layerFrame)||void 0===e?void 0:e.layerProperties.opacity)&&void 0!==t?t:0}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get additionalProperties(){var e;return null===(e=this.layerFrame)||void 0===e?void 0:e.layerProperties.additionalLayerProperties}addChild(e){this.children.push(e)}hasChildren(){return 0!==this.children.length}freeze(){this.children.forEach((e=>{var t,i;return null===(i=(t=e).freeze)||void 0===i?void 0:i.call(t)})),Object.freeze(this.children)}}var By,Oy,Ty,Dy;(Oy=By||(By={})).SectionDividerSetting="lsct",Oy.TypeToolObjectSetting="TySh",Oy.UnicodeLayerName="luni",Oy.VectorStrokeData="vstk",Oy.ObjectBasedEffects="lfx2",Oy.GradientFillSetting="GdFl",Oy.SolidColorSheetSetting="SoCo",Oy.PatternFillSetting="PtFl",Oy.VectorStrokeContentData="vscg",Oy.BlendOptionsCapacity="iOpa",Oy.VectorMaskSetting1="vmsk",Oy.VectorMaskSetting2="vsms",Oy.HueSaturation="hue2",Oy.NestedSectionDividerSetting="lsdk",Oy.LayerId="lyid",Oy.ArtboardData="artb",Oy.SmartObjectPlacedLayerData="SoLE",Oy.PlacedLayerData="SoLd",Oy.LinkedLayer="lnkD",Oy.LinkedLayer2="lnk2",Oy.LinkedLayer3="lnk3",function(e){e[e.Normal=0]="Normal",e[e.SceneGroup=1]="SceneGroup"}(Ty||(Ty={})),function(e){e[e.ClosedSubpathLength=0]="ClosedSubpathLength",e[e.ClosedSubpathBezierKnotLinked=1]="ClosedSubpathBezierKnotLinked",e[e.ClosedSubpathBezierKnotUnlinked=2]="ClosedSubpathBezierKnotUnlinked",e[e.OpenSubpathLength=3]="OpenSubpathLength",e[e.OpenSubpathBezierKnotLinked=4]="OpenSubpathBezierKnotLinked",e[e.OpenSubpathBezierKnotUnlinked=5]="OpenSubpathBezierKnotUnlinked",e[e.PathFillRule=6]="PathFillRule",e[e.Clipboard=7]="Clipboard",e[e.InitialFillRule=8]="InitialFillRule"}(Dy||(Dy={}));const My=(e,t)=>{const i=Math.max(e.length,t.length);for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0};class Qy extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name}}class Ly extends Qy{}class jy extends Qy{}class Py extends Qy{}class Fy extends Qy{}class Ry extends Qy{}class zy extends Qy{}class Ny extends Qy{}class Vy extends Qy{}class Uy extends Qy{}class Hy extends Qy{}class Gy extends Qy{}class Yy extends Qy{}class Wy extends Qy{}class Xy extends Qy{}class $y extends Qy{}class qy extends Qy{}class Ky extends Qy{}class Jy extends Qy{}class Zy extends Qy{}class ex extends Qy{}class tx extends Qy{}class ix extends Qy{}class nx extends Qy{}class rx extends Qy{}class ox extends Qy{}class ax extends Qy{}class sx extends Qy{}class lx extends Qy{}class cx extends Qy{}class ux extends Qy{}class dx extends Qy{}class hx extends Qy{}class px extends Qy{}class fx extends Qy{}class gx extends Qy{}class vx extends Qy{}class mx extends Qy{}class Ax extends Qy{}class bx extends Qy{}class yx extends Qy{}class xx extends Qy{}class wx extends Qy{}class _x extends Qy{}class Cx extends Qy{}function kx(e,t){const i=e.getUint32(t),n=e.getUint32(t+4);if(i>=2097152)throw new ax;return 4294967296*i+n}const Ex={u8:1,i8:1,u16:2,i16:2,u32:4,i32:4,f32:4,u64:8,i64:8,f64:8};class Sx{static from(e){return new Sx(new DataView(e.buffer,e.byteOffset,e.byteLength))}constructor(e,t=0){this.dataView=e,this.position=t}get length(){return this.dataView.byteLength}clone(e){const t=void 0!==e?e:this.position;return new Sx(new DataView(this.dataView.buffer,this.dataView.byteOffset,this.dataView.byteLength),t)}pass(e){this.position+=e}unpass(e){this.position-=e}extract(e){if(this.position+e>this.dataView.byteLength)throw new ex;return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e)}iter(){return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position)}take(e){const t=this.extract(e);return this.pass(e),t}peek(){return this.dataView.getUint8(this.position)}one(){const e=this.dataView.getUint8(this.position);return this.position+=1,e}read(e){const{dataView:t,position:i}=this;switch(this.pass(Ex[e]),e){case"u8":return t.getUint8(i);case"u16":return t.getUint16(i);case"u32":return t.getUint32(i);case"u64":return kx(t,i);case"i8":return t.getInt8(i);case"i16":return t.getInt16(i);case"i32":return t.getInt32(i);case"i64":return function(e,t){const i=e.getInt32(t),n=e.getUint32(t+4);if(i>=2097152||i<-2097152||-2097152===i&&0===n)throw new ax;return 4294967296*i+n}(t,i);case"f32":return t.getFloat32(i);case"f64":return t.getFloat64(i);default:throw new TypeError(`Invalid ReadType: ${e}`)}}readString(e){const t=this.take(e);return(new TextDecoder).decode(t)}readUnicodeString(e=4){const t=2*this.read("u32"),i=this.take(t),n=new TextDecoder("utf-16be").decode(i);return this.padding(4+t,e),0===n.charCodeAt(n.length-1)?n.slice(0,-1):n}readFixedPoint32bit(){return this.read("u32")/65536}readIdString(){const e=this.read("u32");return this.readString(e||4)}padding(e,t){const i=e%t;i>0&&this.pass(t-i)}}const Ix=(e,t,i)=>t<=e&&e<=i;function Bx(e){return e.bottom-e.top}function Ox(e){return function(e){return e.right-e.left}(e)*Bx(e)}var Tx,Dx,Mx,Qx,Lx,jx,Px;function Fx(e){const t=Object.keys(Tx);for(const i of t)if(Tx[i]===e)return e;throw new Hy}function Rx(e,t,i){const n=e.items.get(t);if(!n)throw new fx(`Cannot find key "${t}" in descriptor`);if(n.type!==i)throw new gx(`Unexpected descriptor value type: expected "${i}" but got "${n.type}"`);return n}!function(e){e.PassThrough="pass",e.Normal="norm",e.Dissolve="diss",e.Darken="dark",e.Multiply="mul ",e.ColorBurn="idiv",e.LinearBurn="lbrn",e.DarkerColor="dkCl",e.Lighten="lite",e.Screen="scrn",e.ColorDodge="div ",e.LinearDodge="lddg",e.LighterColor="lgCl",e.Overlay="over",e.SoftLight="sLit",e.HardLight="hLit",e.VividLight="vLit",e.LinearLight="lLit",e.PinLight="pLit",e.HardMix="hMix",e.Difference="diff",e.Exclusion="smud",e.Subtract="fsub",e.Divide="fdiv",e.Hue="hue ",e.Saturation="sat ",e.Color="colr",e.Luminosity="lum "}(Tx||(Tx={})),function(e){e[e.Base=0]="Base",e[e.NonBase=1]="NonBase"}(Dx||(Dx={})),function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.Rgb=3]="Rgb",e[e.Cmyk=4]="Cmyk",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"}(Mx||(Mx={})),function(e){e[e.One=1]="One",e[e.Eight=8]="Eight",e[e.Sixteen=16]="Sixteen",e[e.ThirtyTwo=32]="ThirtyTwo"}(Qx||(Qx={})),function(e){e.Alias="alis",e.Boolean="bool",e.Class="type",e.Descriptor="Objc",e.Double="doub",e.Enumerated="enum",e.GlobalClass="GlbC",e.GlobalObject="GlbO",e.Integer="long",e.LargeInteger="comp",e.List="VlLs",e.RawData="tdta",e.Reference="obj ",e.String="TEXT",e.UnitFloat="UntF",e.UnitFloats="UnFl",e.ObjectArray="ObAr"}(Lx||(Lx={})),function(e){e.Angle="#Ang",e.Density="#Rsl",e.Distance="#Rlt",e.Millimeters="#Mlm",e.None="#Nne",e.Percent="#Prc",e.Pixels="#Pxl",e.Points="#Pnt"}(jx||(jx={})),function(e){e[e.PSD=1]="PSD",e[e.PSB=2]="PSB"}(Px||(Px={}));const zx=[56,66,80,83],Nx=[0,0,0,0,0,0],Vx=[1,8,16,32];function Ux(e,t,i,n,r){const o=new Sx(e),a=o.read("u16");if(!(a in Mw))throw new Gy;const{red:s,green:l,blue:c,alpha:u}=(()=>{switch(a){case Mw.RawData:return function(e,t,i){const n=(e.length-2)/i,r=e.extract(n),o=i>=2?e.extract(n):void 0,a=i>=3?e.extract(n):void 0,s=i>=4?e.extract(n):void 0;if(t===Qx.Eight)return{red:r,green:o,blue:a,alpha:s};throw new Wy(`Unsupported image bit depth: ${t}`)}(o,t,n);case Mw.RleCompressed:return function(e,t,i,n){let r=0,o=0,a=0,s=0;const l=n.rleScanlineLengthFieldReadType;for(let d=0;d<i;d++)r+=e.read(l);if(t>=2)for(let d=0;d<i;d++)o+=e.read(l);if(t>=3)for(let d=0;d<i;d++)a+=e.read(l);if(4===t)for(let d=0;d<i;d++)s+=e.read(l);const c=2+t*i*n.rleScanlineLengthFieldSize,u=e.clone(c);return{red:u.take(r),green:o?u.take(o):void 0,blue:a?u.take(a):void 0,alpha:s?u.take(s):void 0}}(o,n,i,r);default:throw new Yy}})();return{compression:a,red:s,green:l,blue:c,alpha:u}}const Hx=[56,66,73,77];function Gx(e){const t=e.take(4);if(!My(t,Hx))throw new Zy;const i=e.read("i16"),n=function(e,t=0){const i=e.read("u8"),n=e.readString(i);if(t){const n=(i+1)%t;n>0&&e.pass(t-n)}return n}(e,2),r=e.read("u32"),o=e.position+r,a=r+r%2,s=e.position;let l=null;switch(i){case Pw.GridAndGuides:l=function(e){const t=e.read("u32");if(1!==t)throw new tx;const i=e.read("u32"),n=e.read("u32"),r=e.read("u32"),o=[];for(let a=0;a<r;++a){const t=e.read("i32"),i=Uw(e.read("u8"));o.push({position:t,direction:i})}return{version:t,gridSizeX:i,gridSizeY:n,guides:o}}(e);break;case Pw.Slices:l=function(e,t){const i=e.read("u32");if(6===i){const n=e.read("i32"),r=e.read("i32"),o=e.read("i32"),a=e.read("i32"),s=e.readUnicodeString(0),l=e.read("u32"),c=[];for(;c.length<l;){const t=e.read("u32"),i=e.read("u32"),n=Hw(e.read("u32")),r=1===n?e.read("u32"):void 0;c.push({id:t,groupId:i,origin:n,associatedLayerId:r,name:e.readUnicodeString(0),type:e.read("u32"),left:e.read("i32"),top:e.read("i32"),right:e.read("i32"),bottom:e.read("i32"),url:e.readUnicodeString(0),target:e.readUnicodeString(0),message:e.readUnicodeString(0),altTag:e.readUnicodeString(0),isCellTextHtml:!!e.read("u8"),cellText:e.readUnicodeString(0),horizontalAlignment:e.read("i32"),verticalAlignment:e.read("i32"),alpha:e.read("u8"),red:e.read("u8"),green:e.read("u8"),blue:e.read("u8")})}return{version:i,boundTop:n,boundLeft:r,boundBottom:o,boundRight:a,sliceGroupName:s,slices:c,descriptor:e.position<t?l_(e):void 0}}if(7===i||8===i)return{version:i,descriptor:l_(e)};throw new nx(`Invalid Slices section version: ${i}`)}(e,o);break;case Pw.ICCProfile:l=function(e,t){return e.take(t-e.position)}(e,o);break;case Pw.ResolutionInfo:l=function(e){return{horizontal:e.readFixedPoint32bit(),horizontalUnit:e.read("u16"),widthUnit:e.read("u16"),vertical:e.readFixedPoint32bit(),verticalUnit:e.read("u16"),heightUnit:e.read("u16")}}(e);break;case Pw.GlobalLightAltitude:case Pw.GlobalLightAngle:l=e.read("i32")}const c=s+a-e.position;return c>0&&e.pass(c),{id:i,name:n,resource:l}}function Yx(e){const t={};for(const[i,n]of e)t[i]=n;return t}const Wx=(e,t,i)=>{const{top:n,left:r,bottom:o,right:a,opacity:s,clipping:l,hidden:c,transparencyLocked:u,blendMode:d,layerText:h,engineData:p,maskData:f,additionalLayerInfos:g}=t,v=Yx(g.map((e=>[e.key,e])));return{name:e,top:n,left:r,bottom:o,right:a,opacity:s,clippingMask:l,hidden:c,transparencyLocked:u,blendMode:d,groupId:i,text:h,textProperties:p,maskData:f,additionalLayerProperties:v}};class Xx{static create(e,t,i){const n=Wx(e.name,e,i);return new Xx(t,n)}constructor(e,t){this.channels=e,this.layerProperties=t}get red(){const e=this.channels.get(Qw.Red);if(void 0===e)throw new $y;return e}get green(){return this.channels.get(Qw.Green)}get blue(){return this.channels.get(Qw.Blue)}get alpha(){return this.channels.get(Qw.TransparencyMask)}get userMask(){return this.channels.get(Qw.UserSuppliedLayerMask)}get realUserMask(){return this.channels.get(Qw.RealUserSuppliedLayerMask)}get width(){const{right:e,left:t}=this.layerProperties;return e-t+1}get height(){const{bottom:e,top:t}=this.layerProperties;return e-t+1}}class $x{static create(e,t,i,n){const r=Wx(e,i,n);return new $x(t,r)}constructor(e,t){this.id=e,this.layerProperties=t}}function qx(e){return{data:l_(e)}}function Kx(e){return{fillOpacity:e.read("u8")}}function Jx(e){return{data:l_(e)}}function Zx(e){return{hue:e.read("i16"),saturation:e.read("i16"),lightness:e.read("i16")}}function ew(e){return Array.from(Array(6),(()=>function(e){return{beginRamp:e.read("i16"),beginSustain:e.read("i16"),endSustain:e.read("i16"),endRamp:e.read("i16"),...Zx(e)}}(e)))}function tw(e){const t=e.read("u16"),i=e.read("u8");return e.pass(1),{version:t,colorize:i,colorization:Zx(e),master:Zx(e),adjustment:i?void 0:ew(e)}}function iw(e){return{value:e.read("u32")}}function nw(e,t){const i=[];let n=0;const r=e.position+t;for(;e.position<r&&(n=e.read("u64"));){const t=e.position,r=rw(e);i.push(r);const o=n-(e.position-t);e.pass(o),e.padding(e.position,4)}return{layers:i}}function rw(e){const t=e.readString(4);if("liFD"!==t)throw new ux(`unknown layer type: '${t}'`);const i=e.read("i32"),n=function(e){const t=e.read("u8");return e.readString(t)}(e),r=e.readUnicodeString(0),o=e.readString(4),a=e.readString(4),s=e.read("u64");return{layerType:t,version:i,uniqueId:n,filename:r,filetype:o,creator:a,data:e.read("u8")?l_(e):void 0,contents:e.take(s),uuid:i>5?e.readUnicodeString():void 0}}function ow(e){const t=e.read("u32"),i=e.read("u32");return{version:t,descriptor:s_(e),descriptorVersion:i}}function aw(e){return{data:l_(e)}}function sw(e,t){const i=function(e){if(e in Lw)return e;throw new Uy}(e.read("u32"));if(t<12)return{dividerType:i};const n=e.readString(4);if("8BIM"!==n)throw new lx(`Invalid Section Divider Setting signature: ${n}`);const r=Fx(e.readString(4));if(t<16)return{dividerType:i,dividerSignature:n,blendMode:r};const o=e.read("u32");if(!(o in Ty))throw new lx(`Invalid Section Divider Setting subtype: ${o}`);return{dividerType:i,dividerSignature:n,blendMode:r,subType:o}}function lw(e){const t=e.readString(4),i=e.read("u32");return{data:l_(e),version:i,identifier:t}}function cw(e){return{version:e.read("u32"),data:s_(e)}}function uw(e){const t=e.read("u16");if(1!==t)throw new cx(`Invalid type tool object setting version: ${t}`);const i=e.read("f64"),n=e.read("f64"),r=e.read("f64"),o=e.read("f64"),a=e.read("f64"),s=e.read("f64"),l=e.read("u16");if(50!==l)throw new cx(`Invalid text version: ${l}`);const c=l_(e),u=e.read("u16");if(1!==u)throw new cx(`Invalid warp version: ${u}`);return{version:t,transformXX:i,transformXY:n,transformYX:r,transformYY:o,transformTX:a,transformTY:s,textVersion:l,textData:c,warpVersion:u,warpData:l_(e),left:e.read("f64"),top:e.read("f64"),right:e.read("f64"),bottom:e.read("f64")}}function dw(e){return{name:e.readUnicodeString(0)}}function hw(e){const[t,...i]=e.take(4);return t+(65536*i[0]+256*i[1]+i[2])/2**24}function pw(e){return{vert:hw(e),horiz:hw(e)}}function fw(e){const t=e.read("u16");switch(t){case Dy.OpenSubpathLength:case Dy.ClosedSubpathLength:return function(e,t){const i=e.read("i16"),n=e.read("i16"),r=e.read("i16");e.pass(6);const o=e.read("i16");return e.pass(10),{type:t,length:i,operation:n,subpathType:r,index:o}}(e,t);case Dy.PathFillRule:return e.pass(24),{type:t};case Dy.Clipboard:return function(e,t){const i=Array(4).map((()=>e.read("f32"))),n=e.read("f32");return e.pass(6),{type:t,bounds:i,resolution:n}}(e,t);case Dy.InitialFillRule:return function(e,t){const i=!!(1&e.read("i16"));return e.pass(22),{type:t,fill:i}}(e,t);case Dy.ClosedSubpathBezierKnotLinked:case Dy.ClosedSubpathBezierKnotUnlinked:case Dy.OpenSubpathBezierKnotLinked:case Dy.OpenSubpathBezierKnotUnlinked:return function(e,t){return{type:t,preceding:pw(e),anchor:pw(e),leaving:pw(e)}}(e,t);default:throw new Error(`Unknown PathRecordType: ${t} (bug in offsets?)`)}}function gw(e,t){const i=e.read("u32"),n=e.read("u32"),r=function(e,t){const i=Math.floor(t/26);return Array.from(Array(i),(()=>fw(e)))}(e,t);return{version:i,pathRecords:r,invert:!!(1&n),notLink:!!(2&n),disable:!!(4&n)}}function vw(e){return{version:e.read("u32"),data:l_(e)}}function mw(e){return{data:l_(e)}}function Aw(e,t,i=0){const n=e.readString(4);if("8BIM"!==n&&"8B64"!==n)throw new sx(`Invalid signature: ${n}`);const r=e.readString(4),o=e.read(function(e,t){if(t.aliLengthFieldSizeIsVariable)switch(e){case"LMsk":case"Lr16":case"Lr32":case"Layr":case"Mt16":case"Mt32":case"Mtrn":case"Alph":case"FMsk":case"Ink2":case"FEid":case"FXid":case"PxSD":case"cinf":return"u64"}return"u32"}(r,t)),a=e.position,s=function(e,t,i,n){switch(i){case By.NestedSectionDividerSetting:case By.SectionDividerSetting:return{signature:t,key:i,...sw(e,n)};case By.TypeToolObjectSetting:return{signature:t,key:i,...uw(e)};case By.UnicodeLayerName:return{signature:t,key:i,...dw(e)};case By.VectorStrokeData:return{signature:t,key:i,...mw(e)};case By.ObjectBasedEffects:return{signature:t,key:i,...ow(e)};case By.GradientFillSetting:return{signature:t,key:i,...Jx(e)};case By.SolidColorSheetSetting:return{signature:t,key:i,...cw(e)};case By.PatternFillSetting:return{signature:t,key:i,...aw(e)};case By.VectorStrokeContentData:return{signature:t,key:i,...vw(e)};case By.BlendOptionsCapacity:return{signature:t,key:i,...Kx(e)};case By.VectorMaskSetting1:case By.VectorMaskSetting2:return{signature:t,key:i,...gw(e,n)};case By.HueSaturation:return{signature:t,key:i,...tw(e)};case By.LayerId:return{signature:t,key:i,...iw(e)};case By.ArtboardData:return{signature:t,key:i,...qx(e)};case By.PlacedLayerData:case By.SmartObjectPlacedLayerData:return{signature:t,key:i,...lw(e)};case By.LinkedLayer:case By.LinkedLayer2:case By.LinkedLayer3:return{signature:t,key:i,...nw(e,n)};default:return{signature:t,key:i,_isUnknown:!0,data:e.take(n)}}}(e,n,r,o),l=o-(e.position-a);return e.pass(l),e.padding(o,i),s}function bw(e,t,i){const n=[];for(;n.length<t;)n.push(yw(e,i));return n.map((t=>{const n=function(e,t,i,n){const r=new Map,{length:o}=t;for(let a=0;a<o;a++){const[o,s]=t[a],l=Vw(e.read("u16"));switch(l){case Mw.RawData:{const t=e.take(s);r.set(o,{compression:l,data:t});break}case Mw.RleCompressed:{const t=e.take(s>0?ww(e,xw(i,o),n.rleScanlineLengthFieldReadType):s);r.set(o,{compression:l,data:t});break}}}return r}(e,t.channelInformation,t,i);return[t,n]})).reverse()}function yw(e,t){const[i,n,r,o]=function(e){const t=e.read("i32"),i=e.read("i32");let n=e.read("i32");0!==n&&(n-=1);let r=e.read("i32");return 0!==r&&(r-=1),[t,i,n,r]}(e),a=e.read("u16"),s=[];for(;s.length<a;){const i=e.read("i16"),n=e.read(t.layerRecordSectionChannelLengthFieldReadType)-2;s.push([i,n])}if("8BIM"!==e.readString(4))throw new Vy;const l=Fx(e.readString(4)),c=e.read("u8"),u=function(e){if(e===Dx.Base)return Dx.Base;if(e===Dx.NonBase)return Dx.NonBase;throw new qy}(e.read("u8")),{hidden:d,transparencyLocked:h}=function(e){const t=e.read("u8");return{transparencyLocked:!!(1&t),hidden:!!(2&t)}}(e);e.pass(1);const p=e.read("u32"),f=e.position,g=function(e){const t=e.read("u32"),i=e.position,[n,r,o,a]=_w(e),s=e.read("u8"),l=Ew(e),c=t>=36?function(e){const t=Ew(e),i=e.read("u8"),[n,r,o,a]=_w(e);return{top:n,left:r,bottom:o,right:a,flags:t,backgroundColor:i}}(e):void 0,u=l.masksHaveParametersApplied?function(e){const t=e.read("u8");return{userMaskDensity:t&kw.UserMaskDensity?e.read("u8"):void 0,userMaskFeather:t&kw.UserMaskFeather?e.read("f64"):void 0,vectorMaskDensity:t&kw.VectorMaskDensity?e.read("u8"):void 0,vectorMaskFeather:t&kw.VectorMaskFeather?e.read("f64"):void 0}}(e):void 0,d=t-(e.position-i);return e.pass(d),{top:n,left:r,bottom:o,right:a,backgroundColor:s,flags:l,parameters:u,realData:c}}(e);e.pass(e.read("u32"));const v=e.read("u8");let m=e.readString(v);e.padding(v+1,4);const A=[];for(;e.position-f<p;)A.push(Aw(e,t));let b,y,x;for(const w of A)if(!w._isUnknown)switch(w.key){case By.SectionDividerSetting:({dividerType:b}=w);break;case By.TypeToolObjectSetting:{const e=w.textData.descriptor.items.get("Txt ");e&&e.type===Lx.String&&(y=e.value);const t=w.textData.descriptor.items.get("EngineData");t&&t.type===Lx.RawData&&(x=k_(t.data));break}case By.UnicodeLayerName:({name:m}=w)}return{name:m,channelInformation:s,top:i,left:n,bottom:r,right:o,hidden:d,transparencyLocked:h,opacity:c,clipping:u,blendMode:l,additionalLayerInfos:A,dividerType:b,layerText:y,engineData:x,maskData:g}}function xw(e,t){switch(t){case Qw.UserSuppliedLayerMask:return Bx(e.maskData);case Qw.RealUserSuppliedLayerMask:return Bx(function(e){const t=e.maskData.realData;if(!t)throw new Error("missing real mask data");return t}(e));default:return Bx(e)+1}}function ww(e,t,i){return Array.from(Array(t),(()=>e.read(i))).reduce(((e,t)=>e+t))}function _w(e){return Array.from(Array(4),(()=>e.read("i32")))}var Cw,kw;function Ew(e){const t=e.read("u8");return{positionRelativeToLayer:!!(t&Cw.PositionRelativeToLayer),layerMaskDisabled:!!(t&Cw.LayerMaskDisabled),invertMaskWhenBlending:!!(t&Cw.InvertMaskWhenBlending),userMaskFromRenderingOtherData:!!(t&Cw.UserMaskFromRenderingOtherData),masksHaveParametersApplied:!!(t&Cw.MasksHaveParametersApplied)}}function Sw(e,t){const i=new Sx(e);i.pass(t.layerAndMaskSectionLengthFieldSize),i.pass(t.layerInfoSectionLengthFieldSize);const n=i.read("i16"),r=Math.abs(n),o=bw(i,r,t);i.padding(i.position,4),i.pass(i.read("u32"));const a=function(e,t){const i=[];for(;e.position<e.length;)i.push(Aw(e,t,4));return Yx(i.map((e=>[e.key,e])))}(i,t),s=[],l=[],c=[],u=[{startIndex:0,groupId:0,parentGroupId:0}];let d=0;for(let h=0;h<r;h++){const[e,t]=o[h],i=u[u.length-1].groupId,{dividerType:n}=e;if(n===Lw.CloseFolder||n===Lw.OpenFolder)d+=1,u.push({startIndex:s.length,groupId:d,parentGroupId:i,layerRecord:e}),c.push("G");else if(n===Lw.BoundingSection){const t=u.pop();if(void 0===t)throw new Ky;const i=t.groupId>0?t.groupId:void 0,n=t.layerRecord||e;l.push($x.create(n.name,t.groupId,n,i)),c.push("D")}else s.push(Xx.create(e,t,i)),c.push("L")}return l.sort(((e,t)=>e.id-t.id)),{layers:s,groups:l,orders:c,globalAdditionalLayerInformation:a}}function Iw(e,t,i=4){const n=(4===i?e.getUint32(t):kx(e,t))+i;return{start:t,end:t+n,size:n}}function Bw(e){const t=new DataView(e),i=function(e){const t=new Sx(e),i=t.take(4);if(!My(i,zx))throw new Ly;const n=t.read("u16");if(n!==Px.PSD&&n!==Px.PSB)throw new jy;const r=Dw(n),o=t.take(6);if(!My(o,Nx))throw new Py;const a=t.read("u16");if(!Ix(a,1,56))throw new zy;const s=t.read("u32"),l=t.read("u32");if(!Ix(s,1,r.maxPixels)||!Ix(l,1,r.maxPixels))throw new Ny;const c=t.read("u16");if(!Vx.includes(c))throw new Ry;const u=t.read("u16");if(!(u in Mx))throw new Fy;return{channelCount:a,version:n,width:l,height:s,depth:c,colorMode:u}}(new DataView(e,0,26)),n=Dw(i.version),r=Iw(t,26),o=Iw(t,r.end),a=Iw(t,o.end,n.layerAndMaskSectionLengthFieldSize);return{fileHeader:i,colorModeData:new DataView(e,r.size),imageResources:new DataView(e,o.start,o.size),layerAndMaskInformation:new DataView(e,a.start,a.size),imageData:new DataView(e,a.end)}}!function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertMaskWhenBlending=4]="InvertMaskWhenBlending",e[e.UserMaskFromRenderingOtherData=8]="UserMaskFromRenderingOtherData",e[e.MasksHaveParametersApplied=16]="MasksHaveParametersApplied"}(Cw||(Cw={})),function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"}(kw||(kw={}));const Ow={maxPixels:3e4,rleScanlineLengthFieldSize:2,rleScanlineLengthFieldReadType:"u16",layerAndMaskSectionLengthFieldSize:4,layerInfoSectionLengthFieldSize:4,layerRecordSectionChannelLengthFieldReadType:"u32",aliLengthFieldSizeIsVariable:!1},Tw={maxPixels:3e5,rleScanlineLengthFieldSize:4,rleScanlineLengthFieldReadType:"u32",layerAndMaskSectionLengthFieldSize:8,layerInfoSectionLengthFieldSize:8,layerRecordSectionChannelLengthFieldReadType:"u64",aliLengthFieldSizeIsVariable:!0};function Dw(e){switch(e){case Px.PSD:return Ow;case Px.PSB:return Tw;default:throw new jy}}var Mw,Qw,Lw,jw,Pw,Fw,Rw,zw,Nw;function Vw(e){if(!(e in Mw))throw new Gy;return e}function Uw(e){if(!(e in jw))throw new ix;return e}function Hw(e){if(!(e in Fw))throw new rx(`Invalid slice origin: ${e}`);return e}function Gw(e,t=255){if(!(0<=t&&t<=255))throw new Jy;const i=e.length/4,n=function(e){switch(e){case Qw.Red:return 0;case Qw.Green:return 1;case Qw.Blue:return 2;case Qw.TransparencyMask:return 3;default:throw new Xy}}(Qw.TransparencyMask),r=t/255;for(let o=0;o<i;o++){const t=4*o+n;e[t]=Math.floor(r*e[t])}return e}!function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"}(Mw||(Mw={})),function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Blue=2]="Blue",e[e.TransparencyMask=-1]="TransparencyMask",e[e.UserSuppliedLayerMask=-2]="UserSuppliedLayerMask",e[e.RealUserSuppliedLayerMask=-3]="RealUserSuppliedLayerMask"}(Qw||(Qw={})),function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.CloseFolder=2]="CloseFolder",e[e.BoundingSection=3]="BoundingSection"}(Lw||(Lw={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(jw||(jw={})),function(e){e[e.GridAndGuides=1032]="GridAndGuides",e[e.Slices=1050]="Slices",e[e.ICCProfile=1039]="ICCProfile",e[e.GlobalLightAngle=1037]="GlobalLightAngle",e[e.GlobalLightAltitude=1049]="GlobalLightAltitude",e[e.ResolutionInfo=1005]="ResolutionInfo"}(Pw||(Pw={})),function(e){e[e.AutoGenerated=0]="AutoGenerated",e[e.LayerGenerated=1]="LayerGenerated",e[e.UserGenerated=2]="UserGenerated"}(Fw||(Fw={})),function(e){e[e.PixelsPerInch=1]="PixelsPerInch",e[e.PixelsPerCM=2]="PixelsPerCM"}(Rw||(Rw={})),function(e){e[e.Inch=1]="Inch",e[e.CM=2]="CM",e[e.Point=3]="Point",e[e.Pica=4]="Pica",e[e.Column=5]="Column"}(zw||(zw={})),function(e){e.Class="Clss",e.Enumerated="Enmr",e.Identifier="Idnt",e.Index="indx",e.Name="name",e.Offset="rele",e.Property="prop"}(Nw||(Nw={}));let Yw,Ww,Xw,$w,qw,Kw,Jw,Zw,e_,t_,i_=(async()=>{let e;Xw=function(t){e=t};const i=new Array(128).fill(void 0);function n(e){return i[e]}i.push(void 0,null,!0,!1);let r=i.length;function o(e){const t=n(e);return function(e){e<132||(i[e]=r,r=e)}(e),t}let a=new(typeof TextDecoder>"u"?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let s=null;function l(){return(null===s||0===s.byteLength)&&(s=new Uint8Array(e.memory.buffer)),s}let c=0;function u(e,t){const i=t(1*e.length,1)>>>0;return l().set(e,i/1),c=e.length,i}let d=null;function h(){return(null===d||0===d.byteLength)&&(d=new Int32Array(e.memory.buffer)),d}function p(e,t){return e>>>=0,l().subarray(e/1,e/1+t)}e_=function(t,i,n,r,o,a,s){try{const g=e.__wbindgen_add_to_stack_pointer(-16),v=u(i,e.__wbindgen_malloc),m=c,A=u(r,e.__wbindgen_malloc),b=c,y=u(a,e.__wbindgen_malloc),x=c;e.decode_rgb(g,t,v,m,n,A,b,o,y,x,s);var l=h()[g/4+0],d=h()[g/4+1],f=p(l,d).slice();return e.__wbindgen_free(l,1*d),f}finally{e.__wbindgen_add_to_stack_pointer(16)}},t_=function(t,i,n,r,o,a,s,l,d){try{const m=e.__wbindgen_add_to_stack_pointer(-16),A=u(i,e.__wbindgen_malloc),b=c,y=u(r,e.__wbindgen_malloc),x=c,w=u(a,e.__wbindgen_malloc),_=c,C=u(l,e.__wbindgen_malloc),k=c;e.decode_rgba(m,t,A,b,n,y,x,o,w,_,s,C,k,d);var f=h()[m/4+0],g=h()[m/4+1],v=p(f,g).slice();return e.__wbindgen_free(f,1*g),v}finally{e.__wbindgen_add_to_stack_pointer(16)}},Jw=function(t,i,n){try{const s=e.__wbindgen_add_to_stack_pointer(-16),l=u(i,e.__wbindgen_malloc),d=c;e.decode_grayscale(s,t,l,d,n);var r=h()[s/4+0],o=h()[s/4+1],a=p(r,o).slice();return e.__wbindgen_free(r,1*o),a}finally{e.__wbindgen_add_to_stack_pointer(16)}},Zw=function(t,i,n,r,o){try{const d=e.__wbindgen_add_to_stack_pointer(-16),f=u(i,e.__wbindgen_malloc),g=c,v=u(r,e.__wbindgen_malloc),m=c;e.decode_grayscale_a(d,t,f,g,n,v,m,o);var a=h()[d/4+0],s=h()[d/4+1],l=p(a,s).slice();return e.__wbindgen_free(a,1*s),l}finally{e.__wbindgen_add_to_stack_pointer(16)}};let f=new(typeof TextEncoder>"u"?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8");const g="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const i=f.encode(e);return t.set(i),{read:e.length,written:i.length}};Ww=function(){return function(e){r===i.length&&i.push(i.length+1);const t=r;return r=i[t],i[t]=e,t}(new Error)},$w=function(t,i){const r=function(e,t,i){if(void 0===i){const i=f.encode(e),n=t(i.length,1)>>>0;return l().subarray(n,n+i.length).set(i),c=i.length,n}let n=e.length,r=t(n,1)>>>0;const o=l();let a=0;for(;a<n;a++){const t=e.charCodeAt(a);if(t>127)break;o[r+a]=t}if(a!==n){0!==a&&(e=e.slice(a)),r=i(r,n,n=a+3*e.length,1)>>>0;const t=l().subarray(r+a,r+n);a+=g(e,t).written}return c=a,r}(n(i).stack,e.__wbindgen_malloc,e.__wbindgen_realloc),o=c;h()[t/4+1]=o,h()[t/4+0]=r},Yw=function(t,i){let n,r;try{n=t,r=i}finally{e.__wbindgen_free(n,r,1)}},qw=function(e){o(e)},Kw=function(e,t){throw new Error(function(e,t){return e>>>=0,a.decode(l().subarray(e,e+t))}(e,t))},URL=globalThis.URL;const v=await(async(e={},t)=>{let i;if(t.startsWith("data:")){const n=t.replace(/^data:.*?base64,/,"");let r;if("function"==typeof Buffer&&"function"==typeof Buffer.from)r=Buffer.from(n,"base64");else{if("function"!=typeof atob)throw new Error("Cannot decode base64-encoded data URL");{const e=atob(n);r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t)}}i=await WebAssembly.instantiate(r,e)}else{const n=await fetch(t),r=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))i=await WebAssembly.instantiateStreaming(n,e);else{const t=await n.arrayBuffer();i=await WebAssembly.instantiate(t,e)}}return i.instance.exports})({"./webtoon_psd_decoder_bg.js":{__wbg_new_abda76e883ba8a5f:Ww,__wbg_stack_658279fe44541cf6:$w,__wbg_error_f851667af71bcfc6:Yw,__wbindgen_object_drop_ref:qw,__wbindgen_throw:Kw}},"data:application/wasm;base64,AGFzbQEAAAABbw9gAn9/AX9gAn9/AGADf39/AX9gAX8Bf2ABfwBgA39/fwBgAX8BfmAAAX9gBX9/f39/AGAAAGAEf39/fwF/YA5/f39/f39/f39/f39/fwBgC39/f39/f39/f39/AGAEf39/fwBgCH9/f39/f39/AAKYAgUbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzGl9fd2JnX25ld19hYmRhNzZlODgzYmE4YTVmAAcbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzHF9fd2JnX3N0YWNrXzY1ODI3OWZlNDQ1NDFjZjYAARsuL3dlYnRvb25fcHNkX2RlY29kZXJfYmcuanMcX193YmdfZXJyb3JfZjg1MTY2N2FmNzFiY2ZjNgABGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxpfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZgAEGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxBfX3diaW5kZ2VuX3Rocm93AAEDVVQDBAICAQAAAAAEAQcICwUMAQEIDQ4BCAEAAAAFAQICCQAJAQoBCgMBBAUBBAMDAQAKBQMAAAAAAAEDAAMDAQMAAAMJAwMDAwECAgcAAAMDAQYGBgQEBQFwASUlBQMBABEGCQF/AUGAgMAACwfHAQsGbWVtb3J5AgAHbWFpbl9qcwAkCmRlY29kZV9yZ2IAFAtkZWNvZGVfcmdiYQASEGRlY29kZV9ncmF5c2NhbGUAGxJkZWNvZGVfZ3JheXNjYWxlX2EAGR9fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyAEYRX193YmluZGdlbl9tYWxsb2MAJQ9fX3diaW5kZ2VuX2ZyZWUANhJfX3diaW5kZ2VuX3JlYWxsb2MAKhBfX3diaW5kZ2VuX3N0YXJ0ACQJKgEAQQELJFhUVFRYIgsdMCMNH1g5RRpYIgweMFZVLRYcJz1XRDs/OjhYVwr0lwFU/CACD38BfiMAQRBrIgskAAJAAkACQAJAAkACQCAAQfUBTwRAQQhBCBA0IQZBFEEIEDQhBUEQQQgQNCEBQQBBEEEIEDRBAnRrIgJBgIB8IAEgBSAGamprQXdxQQNrIgEgASACSxsgAE0NBiAAQQRqQQgQNCEEQdiQwAAoAgBFDQVBACAEayEDAn9BACAEQYACSQ0AGkEfIARB////B0sNABogBEEGIARBCHZnIgBrdkEBcSAAQQF0a0E+agsiBkECdEG8jcAAaigCACIBDQFBACEAQQAhBQwCC0EQIABBBGpBEEEIEDRBBWsgAEsbQQgQNCEEAkACQAJAAn8CQAJAQdSQwAAoAgAiASAEQQN2IgB2IgJBA3FFBEAgBEHckMAAKAIATQ0LIAINAUHYkMAAKAIAIgBFDQsgABBAaEECdEG8jcAAaigCACIBEEggBGshAyABEDEiAARAA0AgABBIIARrIgIgAyACIANJIgIbIQMgACABIAIbIQEgABAxIgANAAsLIAEgBBBQIQUgARAOQRBBCBA0IANLDQUgASAEEEIgBSADEDNB3JDAACgCACIARQ0EIABBeHFBzI7AAGohB0HkkMAAKAIAIQZB1JDAACgCACICQQEgAEEDdnQiAHFFDQIgBygCCAwDCwJAIAJBf3NBAXEgAGoiA0EDdCIAQdSOwABqKAIAIgVBCGooAgAiAiAAQcyOwABqIgBHBEAgAiAANgIMIAAgAjYCCAwBC0HUkMAAIAFBfiADd3E2AgALIAUgA0EDdBAvIAUQUiEDDAsLAkBBASAAQR9xIgB0EDcgAiAAdHEQQGgiAkEDdCIAQdSOwABqKAIAIgNBCGooAgAiASAAQcyOwABqIgBHBEAgASAANgIMIAAgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiACd3E2AgALIAMgBBBCIAMgBBBQIgUgAkEDdCAEayICEDNB3JDAACgCACIABEAgAEF4cUHMjsAAaiEHQeSQwAAoAgAhBgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgBygCCAwBC0HUkMAAIAAgAXI2AgAgBwshACAHIAY2AgggACAGNgIMIAYgBzYCDCAGIAA2AggLQeSQwAAgBTYCAEHckMAAIAI2AgAgAxBSIQMMCgtB1JDAACAAIAJyNgIAIAcLIQAgByAGNgIIIAAgBjYCDCAGIAc2AgwgBiAANgIIC0HkkMAAIAU2AgBB3JDAACADNgIADAELIAEgAyAEahAvCyABEFIiAw0FDAQLIAQgBhAydCEHQQAhAEEAIQUDQAJAIAEQSCICIARJDQAgAiAEayICIANPDQAgASEFIAIiAw0AQQAhAyABIQAMAwsgAUEUaigCACICIAAgAiABIAdBHXZBBHFqQRBqKAIAIgFHGyAAIAIbIQAgB0EBdCEHIAENAAsLIAAgBXJFBEBBACEFQQEgBnQQN0HYkMAAKAIAcSIARQ0DIAAQQGhBAnRBvI3AAGooAgAhAAsgAEUNAQsDQCAAIAUgABBIIgEgBE8gASAEayICIANJcSIBGyEFIAIgAyABGyEDIAAQMSIADQALCyAFRQ0AIARB3JDAACgCACIATSADIAAgBGtPcQ0AIAUgBBBQIQYgBRAOAkBBEEEIEDQgA00EQCAFIAQQQiAGIAMQMyADQYACTwRAIAYgAxAPDAILIANBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIANBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAY2AgggACAGNgIMIAYgAjYCDCAGIAA2AggMAQsgBSADIARqEC8LIAUQUiIDDQELAkACQAJAAkACQAJAAkAgBEHckMAAKAIAIgBLBEBB4JDAACgCACIAIARLDQJBCEEIEDQgBGpBFEEIEDRqQRBBCBA0akGAgAQQNCIAQRB2QAAhASALQQA2AgggC0EAIABBgIB8cSABQX9GIgAbNgIEIAtBACABQRB0IAAbNgIAIAsoAgAiCA0BQQAhAwwIC0HkkMAAKAIAIQJBEEEIEDQgACAEayIBSwRAQeSQwABBADYCAEHckMAAKAIAIQBB3JDAAEEANgIAIAIgABAvIAIQUiEDDAgLIAIgBBBQIQBB3JDAACABNgIAQeSQwAAgADYCACAAIAEQMyACIAQQQiACEFIhAwwHCyALKAIIIQxB7JDAACALKAIEIgpB7JDAACgCAGoiATYCAEHwkMAAQfCQwAAoAgAiACABIAAgAUsbNgIAAkACQAJAQeiQwAAoAgAEQEG8jsAAIQADQCAAEEMgCEYNAiAAKAIIIgANAAsMAgtB+JDAACgCACIARSAAIAhLcg0FDAcLIAAQSg0AIAAQSyAMRw0AIAAoAgAiAkHokMAAKAIAIgFNBH8gAiAAKAIEaiABSwVBAAsNAQtB+JDAAEH4kMAAKAIAIgAgCCAAIAhJGzYCACAIIApqIQFBvI7AACEAAkACQANAIAEgACgCAEcEQCAAKAIIIgANAQwCCwsgABBKDQAgABBLIAxGDQELQeiQwAAoAgAhCUG8jsAAIQACQANAIAkgACgCAE8EQCAAEEMgCUsNAgsgACgCCCIADQALQQAhAAsgCSAAEEMiBkEUQQgQNCIPa0EXayIBEFIiAEEIEDQgAGsgAWoiACAAQRBBCBA0IAlqSRsiDRBSIQ4gDSAPEFAhAEEIQQgQNCEDQRRBCBA0IQVBEEEIEDQhAkHokMAAIAggCBBSIgFBCBA0IAFrIgEQUCIHNgIAQeCQwAAgCkEIaiACIAMgBWpqIAFqayIDNgIAIAcgA0EBcjYCBEEIQQgQNCEFQRRBCBA0IQJBEEEIEDQhASAHIAMQUCABIAIgBUEIa2pqNgIEQfSQwABBgICAATYCACANIA8QQkG8jsAAKQIAIRAgDkEIakHEjsAAKQIANwIAIA4gEDcCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHEjsAAIA42AgADQCAAQQQQUCAAQQc2AgQiAEEEaiAGSQ0ACyAJIA1GDQcgCSANIAlrIgAgCSAAEFAQLiAAQYACTwRAIAkgABAPDAgLIABBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAk2AgggACAJNgIMIAkgAjYCDCAJIAA2AggMBwsgACgCACEDIAAgCDYCACAAIAAoAgQgCmo2AgQgCBBSIgVBCBA0IQIgAxBSIgFBCBA0IQAgCCACIAVraiIGIAQQUCEHIAYgBBBCIAMgACABa2oiACAEIAZqayEEQeiQwAAoAgAgAEcEQCAAQeSQwAAoAgBGDQMgACgCBEEDcUEBRw0FAkAgABBIIgVBgAJPBEAgABAODAELIABBDGooAgAiAiAAQQhqKAIAIgFHBEAgASACNgIMIAIgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiAFQQN2d3E2AgALIAQgBWohBCAAIAUQUCEADAULQeiQwAAgBzYCAEHgkMAAQeCQwAAoAgAgBGoiADYCACAHIABBAXI2AgQgBhBSIQMMBwsgACAAKAIEIApqNgIEQeCQwAAoAgAgCmohAUHokMAAKAIAIgAgABBSIgBBCBA0IABrIgAQUCEDQeCQwAAgASAAayIFNgIAQeiQwAAgAzYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgAMBQtB4JDAACAAIARrIgE2AgBB6JDAAEHokMAAKAIAIgIgBBBQIgA2AgAgACABQQFyNgIEIAIgBBBCIAIQUiEDDAULQeSQwAAgBzYCAEHckMAAQdyQwAAoAgAgBGoiADYCACAHIAAQMyAGEFIhAwwEC0H4kMAAIAg2AgAMAQsgByAEIAAQLiAEQYACTwRAIAcgBBAPIAYQUiEDDAMLIARBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIARBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AgggBhBSIQMMAgtB/JDAAEH/HzYCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHYjsAAQcyOwAA2AgBB4I7AAEHUjsAANgIAQdSOwABBzI7AADYCAEHojsAAQdyOwAA2AgBB3I7AAEHUjsAANgIAQfCOwABB5I7AADYCAEHkjsAAQdyOwAA2AgBB+I7AAEHsjsAANgIAQeyOwABB5I7AADYCAEGAj8AAQfSOwAA2AgBB9I7AAEHsjsAANgIAQYiPwABB/I7AADYCAEH8jsAAQfSOwAA2AgBBkI/AAEGEj8AANgIAQYSPwABB/I7AADYCAEGYj8AAQYyPwAA2AgBBjI/AAEGEj8AANgIAQZSPwABBjI/AADYCAEGgj8AAQZSPwAA2AgBBnI/AAEGUj8AANgIAQaiPwABBnI/AADYCAEGkj8AAQZyPwAA2AgBBsI/AAEGkj8AANgIAQayPwABBpI/AADYCAEG4j8AAQayPwAA2AgBBtI/AAEGsj8AANgIAQcCPwABBtI/AADYCAEG8j8AAQbSPwAA2AgBByI/AAEG8j8AANgIAQcSPwABBvI/AADYCAEHQj8AAQcSPwAA2AgBBzI/AAEHEj8AANgIAQdiPwABBzI/AADYCAEHgj8AAQdSPwAA2AgBB1I/AAEHMj8AANgIAQeiPwABB3I/AADYCAEHcj8AAQdSPwAA2AgBB8I/AAEHkj8AANgIAQeSPwABB3I/AADYCAEH4j8AAQeyPwAA2AgBB7I/AAEHkj8AANgIAQYCQwABB9I/AADYCAEH0j8AAQeyPwAA2AgBBiJDAAEH8j8AANgIAQfyPwABB9I/AADYCAEGQkMAAQYSQwAA2AgBBhJDAAEH8j8AANgIAQZiQwABBjJDAADYCAEGMkMAAQYSQwAA2AgBBoJDAAEGUkMAANgIAQZSQwABBjJDAADYCAEGokMAAQZyQwAA2AgBBnJDAAEGUkMAANgIAQbCQwABBpJDAADYCAEGkkMAAQZyQwAA2AgBBuJDAAEGskMAANgIAQayQwABBpJDAADYCAEHAkMAAQbSQwAA2AgBBtJDAAEGskMAANgIAQciQwABBvJDAADYCAEG8kMAAQbSQwAA2AgBB0JDAAEHEkMAANgIAQcSQwABBvJDAADYCAEHMkMAAQcSQwAA2AgBBCEEIEDQhBUEUQQgQNCECQRBBCBA0IQFB6JDAACAIIAgQUiIAQQgQNCAAayIAEFAiAzYCAEHgkMAAIApBCGogASACIAVqaiAAamsiBTYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgALQQAhA0HgkMAAKAIAIgAgBE0NAEHgkMAAIAAgBGsiATYCAEHokMAAQeiQwAAoAgAiAiAEEFAiADYCACAAIAFBAXI2AgQgAiAEEEIgAhBSIQMLIAtBEGokACADC5gHAQV/IAAQUyIAIAAQSCIBEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsCQCACED4EQCAAIAEgAhAuDAELAkACQAJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiICNgIAIAAgAhAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiICNgIAIAAgAkEBcjYCBCAAQeSQwAAoAgBGDQEMAgsgAhBIIgMgAWohAQJAIANBgAJPBEAgAhAODAELIAJBDGooAgAiBCACQQhqKAIAIgJHBEAgAiAENgIMIAQgAjYCCAwBC0HUkMAAQdSQwAAoAgBBfiADQQN2d3E2AgALIAAgARAzIABB5JDAACgCAEcNAkHckMAAIAE2AgAMAwtB3JDAAEEANgIAQeSQwABBADYCAAtB9JDAACgCACACTw0BQQhBCBA0IQBBFEEIEDQhAkEQQQgQNCEDQQBBEEEIEDRBAnRrIgFBgIB8IAMgACACamprQXdxQQNrIgAgACABSxtFDQFB6JDAACgCAEUNAUEIQQgQNCEAQRRBCBA0IQJBEEEIEDQhAUEAIQMCQEHgkMAAKAIAIgQgASACIABBCGtqaiIATQ0AIAQgAGtB//8DakGAgHxxIgRBgIAEayECQeiQwAAoAgAhAUG8jsAAIQACQANAIAEgACgCAE8EQCAAEEMgAUsNAgsgACgCCCIADQALQQAhAAsgABBKDQAgAEEMaigCABoMAAsQEEEAIANrRw0BQeCQwAAoAgBB9JDAACgCAE0NAUH0kMAAQX82AgAPCyABQYACSQ0BIAAgARAPQfyQwABB/JDAACgCAEEBayIANgIAIAANABAQGg8LDwsgAUF4cUHMjsAAaiECAn9B1JDAACgCACIDQQEgAUEDdnQiAXEEQCACKAIIDAELQdSQwAAgASADcjYCACACCyEDIAIgADYCCCADIAA2AgwgACACNgIMIAAgAzYCCAvIDQEMfwJAAkAgACgCCCIKIAAoAhAiA3IEQAJAIANFDQAgASACaiEIIABBFGooAgBBAWohByABIQQDQAJAIAQhAyAHQQFrIgdFDQAgAyAIRg0CAn8gAywAACIEQQBOBEAgBEH/AXEhBSADQQFqDAELIAMtAAFBP3EhCSAEQR9xIQUgBEFfTQRAIAVBBnQgCXIhBSADQQJqDAELIAMtAAJBP3EgCUEGdHIhCSAEQXBJBEAgCSAFQQx0ciEFIANBA2oMAQsgBUESdEGAgPAAcSADLQADQT9xIAlBBnRyciIFQYCAxABGDQMgA0EEagsiBCAGIANraiEGIAVBgIDEAEcNAQwCCwsgAyAIRg0AIAMsAAAiBEEATiAEQWBJciAEQXBJckUEQCAEQf8BcUESdEGAgPAAcSADLQADQT9xIAMtAAJBP3FBBnQgAy0AAUE/cUEMdHJyckGAgMQARg0BCwJAAkAgBkUNACACIAZNBEBBACEDIAIgBkYNAQwCC0EAIQMgASAGaiwAAEFASA0BCyABIQMLIAYgAiADGyECIAMgASADGyEBCyAKRQ0CIABBDGooAgAhDAJAIAJBEE8EQAJ/QQAhBUEAIQcCQAJAIAEiA0EDakF8cSIEIANrIgggAksgCEEES3INACACIAhrIglBBEkNACAJQQNxIQpBACEGAkAgAyAERg0AIAhBA3EhBQJAIAQgA0F/c2pBA0kEQCADIQQMAQsgCEF8cSELIAMhBANAIAYgBCwAAEG/f0pqIAQsAAFBv39KaiAELAACQb9/SmogBCwAA0G/f0pqIQYgBEEEaiEEIAtBBGsiCw0ACwsgBUUNAANAIAYgBCwAAEG/f0pqIQYgBEEBaiEEIAVBAWsiBQ0ACwsgAyAIaiEDAkAgCkUNACADIAlBfHFqIgQsAABBv39KIQcgCkEBRg0AIAcgBCwAAUG/f0pqIQcgCkECRg0AIAcgBCwAAkG/f0pqIQcLIAlBAnYhCCAGIAdqIQUDQCADIQYgCEUNAkHAASAIIAhBwAFPGyIHQQNxIQkgB0ECdCELAkAgB0H8AXEiCkUEQEEAIQQMAQsgBiAKQQJ0aiENQQAhBANAIANFDQEgBCADKAIAIg5Bf3NBB3YgDkEGdnJBgYKECHFqIANBBGooAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcWogA0EIaigCACIEQX9zQQd2IARBBnZyQYGChAhxaiADQQxqKAIAIgRBf3NBB3YgBEEGdnJBgYKECHFqIQQgA0EQaiIDIA1HDQALCyAIIAdrIQggBiALaiEDIARBCHZB/4H8B3EgBEH/gfwHcWpBgYAEbEEQdiAFaiEFIAlFDQALAn9BACAGRQ0AGiAGIApBAnRqIgMoAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcSIEIAlBAUYNABogBCADKAIEIgZBf3NBB3YgBkEGdnJBgYKECHFqIgQgCUECRg0AGiAEIAMoAggiA0F/c0EHdiADQQZ2ckGBgoQIcWoLIgNBCHZB/4EccSADQf+B/AdxakGBgARsQRB2IAVqDAILQQAgAkUNARogAkEDcSEEIAJBBE8EQCACQXxxIQYDQCAFIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEFIANBBGohAyAGQQRrIgYNAAsLIARFDQADQCAFIAMsAABBv39KaiEFIANBAWohAyAEQQFrIgQNAAsLIAULIQQMAQsgAkUEQEEAIQQMAQsgAkEDcSEFAkAgAkEESQRAQQAhBCABIQMMAQsgAkF8cSEHQQAhBCABIQMDQCAEIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEEIANBBGohAyAHQQRrIgcNAAsLIAVFDQADQCAEIAMsAABBv39KaiEEIANBAWohAyAFQQFrIgUNAAsLIAQgDEkEQCAMIARrIgQhBgJAAkACQCAALQAgIgNBACADQQNHGyIDQQFrDgIAAQILQQAhBiAEIQMMAQsgBEEBdiEDIARBAWpBAXYhBgsgA0EBaiEDIABBBGooAgAhBCAAKAIcIQUgACgCACEAAkADQCADQQFrIgNFDQEgACAFIAQoAhARAABFDQALQQEPC0EBIQMgBUGAgMQARg0CIAAgASACIAQoAgwRAgANAkEAIQMDQCADIAZGBEBBAA8LIANBAWohAyAAIAUgBCgCEBEAAEUNAAsgA0EBayAGSQ8LDAILIAAoAgAgASACIAAoAgQoAgwRAgAhAwsgAw8LIAAoAgAgASACIAAoAgQoAgwRAgAL9wQBCn8jAEEwayIDJAAgA0EDOgAoIANCgICAgIAENwMgIANBADYCGCADQQA2AhAgAyABNgIMIAMgADYCCAJ/AkACQCACKAIAIgpFBEAgAkEUaigCACIARQ0BIAIoAhAhASAAQQN0IQUgAEEBa0H/////AXFBAWohByACKAIIIQADQCAAQQRqKAIAIgQEQCADKAIIIAAoAgAgBCADKAIMKAIMEQIADQQLIAEoAgAgA0EIaiABQQRqKAIAEQAADQMgAUEIaiEBIABBCGohACAFQQhrIgUNAAsMAQsgAigCBCIARQ0AIABBBXQhCyAAQQFrQf///z9xQQFqIQcgAigCCCEAA0AgAEEEaigCACIBBEAgAygCCCAAKAIAIAEgAygCDCgCDBECAA0DCyADIAUgCmoiBEEcai0AADoAKCADIARBFGopAgA3AyAgBEEQaigCACEGIAIoAhAhCEEAIQlBACEBAkACQAJAIARBDGooAgBBAWsOAgACAQsgBkEDdCAIaiIMQQRqKAIAQR5HDQEgDCgCACgCACEGC0EBIQELIAMgBjYCFCADIAE2AhAgBEEIaigCACEBAkACQAJAIARBBGooAgBBAWsOAgACAQsgAUEDdCAIaiIGQQRqKAIAQR5HDQEgBigCACgCACEBC0EBIQkLIAMgATYCHCADIAk2AhggCCAEKAIAQQN0aiIBKAIAIANBCGogASgCBBEAAA0CIABBCGohACALIAVBIGoiBUcNAAsLIAJBDGooAgAgB0sEQCADKAIIIAIoAgggB0EDdGoiACgCACAAKAIEIAMoAgwoAgwRAgANAQtBAAwBC0EBCyADQTBqJAALywQBBH8gACABEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsgAhA+BEAgACABIAIQLgwCCwJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiIBNgIAIAAgARAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiIBNgIAIAAgAUEBcjYCBCAAQeSQwAAoAgBHDQFB3JDAAEEANgIAQeSQwABBADYCAA8LIAIQSCIDIAFqIQECQCADQYACTwRAIAIQDgwBCyACQQxqKAIAIgQgAkEIaigCACICRwRAIAIgBDYCDCAEIAI2AggMAQtB1JDAAEHUkMAAKAIAQX4gA0EDdndxNgIACyAAIAEQMyAAQeSQwAAoAgBHDQFB3JDAACABNgIACw8LIAFBgAJPBEAgACABEA8PCyABQXhxQcyOwABqIQICf0HUkMAAKAIAIgNBASABQQN2dCIBcQRAIAIoAggMAQtB1JDAACABIANyNgIAIAILIQEgAiAANgIIIAEgADYCDCAAIAI2AgwgACABNgIIC/cCAQV/AkACQAJAAkAgAUEJTwRAQRBBCBA0IAFLDQEMAgsgABAFIQQMAgtBEEEIEDQhAQtBCEEIEDQhA0EUQQgQNCECQRBBCBA0IQVBAEEQQQgQNEECdGsiBkGAgHwgBSACIANqamtBd3FBA2siAyADIAZLGyABayAATQ0AIAFBECAAQQRqQRBBCBA0QQVrIABLG0EIEDQiA2pBEEEIEDRqQQRrEAUiAkUNACACEFMhAAJAIAFBAWsiBCACcUUEQCAAIQEMAQsgAiAEakEAIAFrcRBTIQJBEEEIEDQhBCAAEEggAiABQQAgAiAAayAETRtqIgEgAGsiAmshBCAAEEFFBEAgASAEECwgACACECwgACACEAkMAQsgACgCACEAIAEgBDYCBCABIAAgAmo2AgALIAEQQQ0BIAEQSCICQRBBCBA0IANqTQ0BIAEgAxBQIQAgASADECwgACACIANrIgMQLCAAIAMQCQwBCyAEDwsgARBSIAEQQRoL0gIBAn8jAEEQayICJAAgACgCACEAAkAgAUH/AE0EQCAAKAIIIgMgACgCAEYEfyAAIAMQFSAAKAIIBSADCyAAKAIEaiABOgAAIAAgACgCCEEBajYCCAwBCyACQQA2AgwCfyABQYAQTwRAIAFBgIAETwRAIAIgAUE/cUGAAXI6AA8gAiABQQZ2QT9xQYABcjoADiACIAFBDHZBP3FBgAFyOgANIAIgAUESdkEHcUHwAXI6AAxBBAwCCyACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAELIAIgAUE/cUGAAXI6AA0gAiABQQZ2QcABcjoADEECCyEBIAEgACgCACAAKAIIIgNrSwRAIAAgAyABEBMgACgCCCEDCyAAKAIEIANqIAJBDGogARBOGiAAIAEgA2o2AggLIAJBEGokAEEAC9ACAQJ/IwBBEGsiAiQAIAAoAgAhAAJAIAFB/wBNBEAgACgCCCIDIAAoAgBGBEAgACADEBUgACgCCCEDCyAAIANBAWo2AgggACgCBCADaiABOgAADAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALywIBAn8jAEEQayICJAACQCABQf8ATQRAIAAoAggiAyAAKAIARgR/IAAgAxAVIAAoAggFIAMLIAAoAgRqIAE6AAAgACAAKAIIQQFqNgIIDAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALvAIBBX8gACgCGCEDAkACQCAAIAAoAgxGBEAgAEEUQRAgAEEUaiIBKAIAIgQbaigCACICDQFBACEBDAILIAAoAggiAiAAKAIMIgE2AgwgASACNgIIDAELIAEgAEEQaiAEGyEEA0AgBCEFIAIiAUEUaiICIAFBEGogAigCACICGyEEIAFBFEEQIAIbaigCACICDQALIAVBADYCAAsCQCADRQ0AAkAgACAAKAIcQQJ0QbyNwABqIgIoAgBHBEAgA0EQQRQgAygCECAARhtqIAE2AgAgAUUNAgwBCyACIAE2AgAgAQ0AQdiQwABB2JDAACgCAEF+IAAoAhx3cTYCAA8LIAEgAzYCGCAAKAIQIgIEQCABIAI2AhAgAiABNgIYCyAAQRRqKAIAIgBFDQAgAUEUaiAANgIAIAAgATYCGAsLoAIBBH8gAEIANwIQIAACf0EAIAFBgAJJDQAaQR8gAUH///8HSw0AGiABQQYgAUEIdmciAmt2QQFxIAJBAXRrQT5qCyIDNgIcIANBAnRBvI3AAGohAgJAAkACQAJAQdiQwAAoAgAiBEEBIAN0IgVxBEAgAigCACECIAMQMiEDIAIQSCABRw0BIAIhAwwCC0HYkMAAIAQgBXI2AgAgAiAANgIADAMLIAEgA3QhBANAIAIgBEEddkEEcWpBEGoiBSgCACIDRQ0CIARBAXQhBCADIgIQSCABRw0ACwsgAygCCCIBIAA2AgwgAyAANgIIIAAgAzYCDCAAIAE2AgggAEEANgIYDwsgBSAANgIACyAAIAI2AhggACAANgIIIAAgADYCDAtgAQx/QcSOwAAoAgAiAgRAQbyOwAAhBgNAIAIiASgCCCECIAEoAgQhAyABKAIAIQQgAUEMaigCABogASEGIAVBAWohBSACDQALC0H8kMAAQf8fIAUgBUH/H00bNgIAIAgLlgIBA38gACABaiEHAkACQAJAAkADQCAAIAdHBEAgAC0AACEFIABBAWoiASEAIAVBgAFGDQEgBcBBAE4EQEEAIQYDQCAAIAdGDQQgAiAETw0FIAIgA2ogAC0AADoAACACQQRqIQIgAEEBaiEAIAZB/wFxIAZBAWohBiAFSQ0ACwwCCyABIAdGDQVBASAFayEFIAFBAWohACABLQAAIQZBACEBA0AgAiAETw0FIAIgA2ogBjoAACACQQRqIQIgAUEBaiIBQf8BcSAFQf8BcUkNAAsMAQsLDwtBtIDAAEHBAEGIgcAAECAAC0GAgMAAQRlB+IDAABAgAAtBgIDAAEEZQdSBwAAQIAALQZiBwABBO0HkgcAAECAAC+oEAQt/IwBBEGsiESQAAkACQAJAIAQOAgEAAgtBASEPCwJAAkAgBw4CAQACC0EBIRALQQAhBAJAAkAgCg4CAQACC0EBIQQLQQEhBwJAAkACQCANDgIAAQILQQAhBwsgEUEIaiEYIAIhEiADIRMgDyENIAUhFCAGIRUgECEKIAghFiAJIRcgCyEPIAwhEAJAAkACQAJAAkAgAUECdCIORQRAQQEhAQwBCyAOQQBIDQEgDhArIgFFDQILAkAgDUUEQCATRQ0BQQAhDQNAIA0gDk8NBSABIA1qIBItAAA6AAAgDUEEaiENIBJBAWohEiATQQFrIhMNAAsMAQsgEiATQQAgASAOEBELAkAgCkUEQCAVRQ0BQQEhDQNAIA0gDk8NBSABIA1qIBQtAAA6AAAgDUEEaiENIBRBAWohFCAVQQFrIhUNAAsMAQsgFCAVQQEgASAOEBELAkAgBEUEQCAXRQ0BQQIhDQNAIA0gDk8NBSABIA1qIBYtAAA6AAAgDUEEaiENIBZBAWohFiAXQQFrIhcNAAsMAQsgFiAXQQIgASAOEBELAkAgB0UEQCAQRQ0BQQMhDQNAIA0gDk8NBSABIA1qIA8tAAA6AAAgDUEEaiENIA9BAWohDyAQQQFrIhANAAsMAQsgDyAQQQMgASAOEBELIBggDjYCBCAYIAE2AgAMAwsQJgALIA5BARBMAAtBgIDAAEEZQaSAwAAQIAALIBEoAgwhBCARKAIIIQEgDARAIAsQBgsgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACABNgIAIAAgBDYCBCARQRBqJAAPCwsQRwALyQEBAn8jAEEgayIDJAACQAJAIAEgASACaiIBSw0AQQggACgCACICQQF0IgQgASABIARJGyIBIAFBCE0bIgFBf3NBH3YhBAJAIAIEQCADQQE2AhggAyACNgIUIAMgAEEEaigCADYCEAwBCyADQQA2AhgLIAMgASAEIANBEGoQGCADKAIEIQIgAygCAEUEQCAAIAE2AgAgACACNgIEDAILIANBCGooAgAiAEGBgICAeEYNASAARQ0AIAIgABBMAAsQJgALIANBIGokAAuDBAEKfyMAQRBrIg8kAAJAAkACQCAEDgIBAAILQQEhDQsCQAJAIAcOAgEAAgtBASEOC0EBIQQCQAJAAkAgCg4CAAECC0EAIQQLIA9BCGohEiACIQcgAyEKIA0hEyAFIQ0gBiEQIA4hFCAIIQ4gCSERAkACQAJAAkACQCABQQJ0IgtFBEBBASEBDAELIAtBAEgNASALQQEQPCIBRQ0CCyABQf8BIAsQTSEMAkAgE0UEQCAKRQ0BQQAhAQNAIAEgC08NBSABIAxqIActAAA6AAAgAUEEaiEBIAdBAWohByAKQQFrIgoNAAsMAQsgByAKQQAgDCALEBELAkAgFEUEQCAQRQ0BQQEhAQNAIAEgC08NBSABIAxqIA0tAAA6AAAgAUEEaiEBIA1BAWohDSAQQQFrIhANAAsMAQsgDSAQQQEgDCALEBELAkAgBEUEQCARRQ0BQQIhAQNAIAEgC08NBSABIAxqIA4tAAA6AAAgAUEEaiEBIA5BAWohDiARQQFrIhENAAsMAQsgDiARQQIgDCALEBELIBIgCzYCBCASIAw2AgAMAwsQJgALIAtBARBMAAtBgIDAAEEZQaSAwAAQIAALIA8oAgwhASAPKAIIIQQgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACAENgIAIAAgATYCBCAPQRBqJAAPCwsQRwALxwEBA38jAEEgayICJAACQAJAIAFBAWoiAUUNAEEIIAAoAgAiA0EBdCIEIAEgASAESRsiASABQQhNGyIBQX9zQR92IQQCQCADBEAgAkEBNgIYIAIgAzYCFCACIABBBGooAgA2AhAMAQsgAkEANgIYCyACIAEgBCACQRBqEBggAigCBCEDIAIoAgBFBEAgACABNgIAIAAgAzYCBAwCCyACQQhqKAIAIgBBgYCAgHhGDQEgAEUNACADIAAQTAALECYACyACQSBqJAAL3AECA38BfiMAQSBrIgIkACABKAIERQRAIAEoAgwhAyACQRhqIgRBADYCACACQoCAgIAQNwMQIAIgAkEQajYCHCACQRxqQYCHwAAgAxAIGiABQQhqIAQoAgA2AgAgASACKQMQNwIACyABKQIAIQUgAUKAgICAEDcCACACQQhqIgMgAUEIaiIBKAIANgIAIAFBADYCACACIAU3AwBBDEEEEDwiAUUEQEEMQQQQTAALIAEgAikDADcCACABQQhqIAMoAgA2AgAgAEGoicAANgIEIAAgATYCACACQSBqJAAL7wEBAn8jAEEgayIFJABBuI3AAEG4jcAAKAIAIgZBAWo2AgACQAJAIAZBAEgNAEGAkcAAQYCRwAAoAgBBAWoiBjYCACAGQQJLDQAgBSAEOgAYIAUgAzYCFCAFIAI2AhAgBUHwicAANgIMIAVBmIfAADYCCEGojcAAKAIAIgJBAEgNAEGojcAAIAJBAWo2AgBBqI3AAEGwjcAAKAIABH8gBSAAIAEoAhARAQAgBSAFKQMANwMIQbCNwAAoAgAgBUEIakG0jcAAKAIAKAIUEQEAQaiNwAAoAgBBAWsFIAILNgIAIAZBAUsNACAEDQELAAsAC6sBAQF/AkAgAgRAAn8CQAJAAkAgAUEATgRAIAMoAghFDQIgAygCBCIEDQEgAQ0DIAIMBAsgAEEIakEANgIADAULIAMoAgAgBCACIAEQNQwCCyABDQAgAgwBCyABIAIQPAsiAwRAIAAgAzYCBCAAQQhqIAE2AgAgAEEANgIADwsgACABNgIEIABBCGogAjYCAAwBCyAAIAE2AgQgAEEIakEANgIACyAAQQE2AgALkQQBCX8jAEEQayIMJAACQAJAAkAgBA4CAgEACxBHAAtBASEIC0EBIQQCQAJAAkAgBw4CAAECC0EAIQQLIAxBCGohDyACIQsgAyEHIAUhDSAGIQ4gBCEQAkACQAJAAkACQCABQQJ0IglFBEBBASEKDAELIAlBAEgNASAJECsiCkUNAgsCQCAIRQRAIAdFDQFBACEIIAchASALIQQDQCAIIAlPDQUgCCAKaiAELQAAOgAAIAhBBGohCCAEQQFqIQQgAUEBayIBDQALIAchAUEBIQggCyEEA0AgCCAJTw0FIAggCmogBC0AADoAACAIQQRqIQggBEEBaiEEIAFBAWsiAQ0AC0ECIQgDQCAIIAlPDQUgCCAKaiALLQAAOgAAIAhBBGohCCALQQFqIQsgB0EBayIHDQALDAELIAsgB0EAIAogCRARIAsgB0EBIAogCRARIAsgB0ECIAogCRARCwJAIBBFBEAgDkUNAUEDIQgDQCAIIAlPDQUgCCAKaiANLQAAOgAAIAhBBGohCCANQQFqIQ0gDkEBayIODQALDAELIA0gDkEDIAogCRARCyAPIAk2AgQgDyAKNgIADAMLECYACyAJQQEQTAALQYCAwABBGUGkgMAAECAACyAMKAIMIQQgDCgCCCEBIAYEQCAFEAYLIAMEQCACEAYLIAAgATYCACAAIAQ2AgQgDEEQaiQADwsQRwALcQAjAEEwayIBJABBgI3AAC0AAARAIAFBFGpBAjYCACABQRxqQQE2AgAgAUHoh8AANgIQIAFBADYCCCABQQ82AiQgASAANgIsIAEgAUEgajYCGCABIAFBLGo2AiAgAUEIakGQiMAAECkACyABQTBqJAALpAMBB38jAEEQayIKJABBASEHAkACQAJAIAQOAgABAgtBACEHCyAKQQhqIQsgAiEEIAMhCAJAAkACQAJAAkAgAUECdCIGRQRAQQEhBQwBCyAGQQBIDQEgBkEBEDwiBUUNAgsgBUH/ASAGEE0hCQJAIAdFBEAgCEUNAUEAIQUgCCEHIAQhAQNAIAUgBk8NBSAFIAlqIAEtAAA6AAAgBUEEaiEFIAFBAWohASAHQQFrIgcNAAsgCCEHQQEhBSAEIQEDQCAFIAZPDQUgBSAJaiABLQAAOgAAIAVBBGohBSABQQFqIQEgB0EBayIHDQALQQIhBQNAIAUgBk8NBSAFIAlqIAQtAAA6AAAgBUEEaiEFIARBAWohBCAIQQFrIggNAAsMAQsgBCAIQQAgCSAGEBEgBCAIQQEgCSAGEBEgBCAIQQIgCSAGEBELIAsgBjYCBCALIAk2AgAMAwsQJgALIAZBARBMAAtBgIDAAEEZQaSAwAAQIAALIAooAgwhASAKKAIIIQQgAwRAIAIQBgsgACAENgIAIAAgATYCBCAKQRBqJAAPCxBHAAt5AQN/IwBBEGsiAiQAIAEoAgRFBEAgASgCDCEDIAJBCGoiBEEANgIAIAJCgICAgBA3AwAgAiACNgIMIAJBDGpBgIfAACADEAgaIAFBCGogBCgCADYCACABIAIpAwA3AgALIABBqInAADYCBCAAIAE2AgAgAkEQaiQAC10BAX8jAEEgayICJAAgACgCACEAIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAIgADYCBCACQQRqQaCFwAAgAkEIahAIIAJBIGokAAtdAQF/IwBBIGsiAiQAIAAoAgAhACACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACIAA2AgQgAkEEakGAh8AAIAJBCGoQCCACQSBqJAALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakGghcAAIAJBCGoQCCACQSBqJAALZQEBfyMAQTBrIgMkACADIAE2AgwgAyAANgIIIANBHGpBATYCACADQSRqQQE2AgAgA0HIisAANgIYIANBADYCECADQSA2AiwgAyADQShqNgIgIAMgA0EIajYCKCADQRBqIAIQKQALUQEBfyMAQSBrIgIkACACQQxqQQE2AgAgAkEUakEANgIAIAJByIrAADYCECACQQA2AgAgAkErNgIcIAIgADYCGCACIAJBGGo2AgggAiABECkAC0YBAX8gAiAAKAIAIgAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQALQQEBfyACIAAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQAL6QQBBn8jAEEQayIDJABBgY3AAC0AAEEDRwRAIANBAToACyADIANBC2o2AgwgA0EMaiEAIwBBIGsiASQAAkACQAJAAkACQAJAAkBBgY3AAC0AAEEBaw4DAgQBAAtBgY3AAEECOgAAIAFBgY3AADYCCCAAKAIAIgAtAAAgAEEAOgAARQ0CIwBBIGsiACQAAkACQAJAQbiNwAAoAgBB/////wdxBEAQT0UNAQtBqI3AACgCAEGojcAAQX82AgANAQJAAkBBuI3AACgCAEH/////B3FFBEBBtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIADAELEE9BtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIARQ0BC0G4jcAAKAIAQf////8HcUUNABBPDQBBrI3AAEEBOgAAC0GojcAAQQA2AgACQCAERQ0AIAQgAigCABEEACACQQRqKAIARQ0AIAJBCGooAgAaIAQQBgsgAEEgaiQADAILIABBFGpBATYCACAAQRxqQQA2AgAgAEHUiMAANgIQIABBmIfAADYCGCAAQQA2AgggAEEIakH4iMAAECkACwALIAFBAzoADCABQQhqIgAoAgAgAC0ABDoAAAsgAUEgaiQADAQLIAFBFGpBATYCACABQRxqQQA2AgAgAUGQhMAANgIQDAILQZiEwABBkIXAABAhAAsgAUEUakEBNgIAIAFBHGpBADYCACABQdyDwAA2AhALIAFBoIXAADYCGCABQQA2AgggAUEIakHggsAAECkACwsgA0EQaiQACzgBAX8CQCABaUEBRw0AQYCAgIB4IAFrIABJIgINACAABEAgAEEAIAEgAhsQPCIBRQ0BCyABDwsAC0kBAX8jAEEgayIAJAAgAEEUakEBNgIAIABBHGpBADYCACAAQbCKwAA2AhAgAEGAisAANgIYIABBADYCCCAAQQhqQbiKwAAQKQALRAECfyABKAIEIQIgASgCACEDQQhBBBA8IgFFBEBBCEEEEEwACyABIAI2AgQgASADNgIAIABBuInAADYCBCAAIAE2AgALOQACQAJ/IAJBgIDEAEcEQEEBIAAgAiABKAIQEQAADQEaCyADDQFBAAsPCyAAIANBACABKAIMEQIAC7kCAQJ/IwBBIGsiAiQAIAJBAToAGCACIAE2AhQgAiAANgIQIAJBjIvAADYCDCACQciKwAA2AggjAEEQayIAJAACQCACQQhqIgEoAgwiAgRAIAEoAggiA0UNASAAIAI2AgggACABNgIEIAAgAzYCACMAQRBrIgEkACAAKAIAIgJBFGooAgAhAwJAAn8CQAJAIAJBDGooAgAOAgABAwsgAw0CQQAhAkGYh8AADAELIAMNASACKAIIIgMoAgQhAiADKAIACyEDIAEgAjYCBCABIAM2AgAgAUHcicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALIAFBADYCBCABIAI2AgwgAUHIicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALQZiHwABBmInAABAhAAtBmIfAAEGIicAAECEACy0AAkAgA2lBAUdBgICAgHggA2sgAUlyRQRAIAAgASADIAIQNSIADQELAAsgAAslAQF/AkAgAEEBEAoiAUUNACABEFMQQQ0AIAFBACAAEE0aCyABCycAIAAgACgCBEEBcSABckECcjYCBCAAIAFqIgAgACgCBEEBcjYCBAsgAQF/AkAgAEEEaigCACIBRQ0AIAAoAgBFDQAgARAGCwsjACACIAIoAgRBfnE2AgQgACABQQFyNgIEIAAgAWogATYCAAseACAAIAFBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQLFAAgACgCAARAIABBBGooAgAQBgsLGQEBfyAAKAIQIgEEfyABBSAAQRRqKAIACwsSAEEZIABBAXZrQQAgAEEfRxsLFgAgACABQQFyNgIEIAAgAWogATYCAAsQACAAIAFqQQFrQQAgAWtxC+oFAQZ/An8gACEFAkACQAJAIAJBCU8EQCADIAIQCiIHDQFBAAwEC0EIQQgQNCEAQRRBCBA0IQFBEEEIEDQhAkEAQRBBCBA0QQJ0ayIEQYCAfCACIAAgAWpqa0F3cUEDayIAIAAgBEsbIANNDQFBECADQQRqQRBBCBA0QQVrIANLG0EIEDQhAiAFEFMiACAAEEgiBBBQIQECQAJAAkACQAJAAkACQCAAEEFFBEAgAiAETQ0BIAFB6JDAACgCAEYNAiABQeSQwAAoAgBGDQMgARA+DQcgARBIIgYgBGoiCCACSQ0HIAggAmshBCAGQYACSQ0EIAEQDgwFCyAAEEghASACQYACSQ0GIAEgAmtBgYAISSACQQRqIAFNcQ0FIAEgACgCACIBakEQaiEEIAJBH2pBgIAEEDQhAgwGC0EQQQgQNCAEIAJrIgFLDQQgACACEFAhBCAAIAIQLCAEIAEQLCAEIAEQCQwEC0HgkMAAKAIAIARqIgQgAk0NBCAAIAIQUCEBIAAgAhAsIAEgBCACayICQQFyNgIEQeCQwAAgAjYCAEHokMAAIAE2AgAMAwtB3JDAACgCACAEaiIEIAJJDQMCQEEQQQgQNCAEIAJrIgFLBEAgACAEECxBACEBQQAhBAwBCyAAIAIQUCIEIAEQUCEGIAAgAhAsIAQgARAzIAYgBigCBEF+cTYCBAtB5JDAACAENgIAQdyQwAAgATYCAAwCCyABQQxqKAIAIgkgAUEIaigCACIBRwRAIAEgCTYCDCAJIAE2AggMAQtB1JDAAEHUkMAAKAIAQX4gBkEDdndxNgIAC0EQQQgQNCAETQRAIAAgAhBQIQEgACACECwgASAEECwgASAEEAkMAQsgACAIECwLIAANAwsgAxAFIgFFDQEgASAFIAAQSEF4QXwgABBBG2oiACADIAAgA0kbEE4gBRAGDAMLIAcgBSABIAMgASADSRsQThogBRAGCyAHDAELIAAQQRogABBSCwsLACABBEAgABAGCwsPACAAQQF0IgBBACAAa3ILFQAgASAAKAIAIgAoAgAgACgCBBAHCxkAIAEoAgBB+IzAAEEFIAEoAgQoAgwRAgALEwAgASgCACABKAIEIAAoAgAQCAsUACAAKAIAIAEgACgCBCgCDBEAAAsIACAAIAEQCgsTACAAQbiJwAA2AgQgACABNgIACw0AIAAtAARBAnFBAXYLEAAgASAAKAIAIAAoAgQQBwsKAEEAIABrIABxCwsAIAAtAARBA3FFCwwAIAAgAUEDcjYCBAsNACAAKAIAIAAoAgRqCw4AIAAoAgAaA0AMAAsAC9gGAgt/An4gADUCACENIwBBMGsiBCQAQSchAAJAIA1CkM4AVARAIA0hDgwBCwNAIARBCWogAGoiAkEEayANIA1CkM4AgCIOQpDOAH59pyIDQf//A3FB5ABuIgVBAXRBsIvAAGovAAA7AAAgAkECayADIAVB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAAIABBBGshACANQv/B1y9WIA4hDQ0ACwsgDqciAkHjAEsEQCAAQQJrIgAgBEEJamogDqciAiACQf//A3FB5ABuIgJB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAACwJAIAJBCk8EQCAAQQJrIgAgBEEJamogAkEBdEGwi8AAai8AADsAAAwBCyAAQQFrIgAgBEEJamogAkEwajoAAAsCfyAEQQlqIABqIQhBK0GAgMQAIAEoAhgiA0EBcSICGyEFIAJBJyAAayIJaiECQciKwABBACADQQRxGyEHAkACQCABKAIIRQRAQQEhACABKAIAIgMgAUEEaigCACICIAUgBxAoDQEMAgsCQAJAAkACQCACIAFBDGooAgAiBkkEQCADQQhxDQQgBiACayICIQNBASABLQAgIgAgAEEDRhsiAEEBaw4CAQIDC0EBIQAgASgCACIDIAFBBGooAgAiAiAFIAcQKA0EDAULQQAhAyACIQAMAQsgAkEBdiEAIAJBAWpBAXYhAwsgAEEBaiEAIAFBBGooAgAhAiABKAIcIQYgASgCACEBAkADQCAAQQFrIgBFDQEgASAGIAIoAhARAABFDQALQQEMBAtBASEAIAZBgIDEAEYNASABIAIgBSAHECgNASABIAggCSACKAIMEQIADQFBACEAAn8DQCADIAAgA0YNARogAEEBaiEAIAEgBiACKAIQEQAARQ0ACyAAQQFrCyADSSEADAELIAEoAhwhCyABQTA2AhwgAS0AICEMQQEhACABQQE6ACAgASgCACIDIAFBBGooAgAiCiAFIAcQKA0AIAYgAmtBAWohAAJAA0AgAEEBayIARQ0BIANBMCAKKAIQEQAARQ0AC0EBDAMLQQEhACADIAggCSAKKAIMEQIADQAgASAMOgAgIAEgCzYCHEEADAILIAAMAQsgAyAIIAkgAigCDBECAAsgBEEwaiQACwsAIAAjAGokACMACwwAQfCCwABBGRAEAAsKACAAKAIEQXhxCwoAIAAoAgRBAXELCgAgACgCDEEBcQsKACAAKAIMQQF2CxkAIAAgAUGkjcAAKAIAIgBBECAAGxEBAAALrwEBA38gASEFAkAgAkEPTQRAIAAhAQwBCyAAQQAgAGtBA3EiA2ohBCADBEAgACEBA0AgASAFOgAAIAFBAWoiASAESQ0ACwsgBCACIANrIgJBfHEiA2ohASADQQBKBEAgBUH/AXFBgYKECGwhAwNAIAQgAzYCACAEQQRqIgQgAUkNAAsLIAJBA3EhAgsgAgRAIAEgAmohAgNAIAEgBToAACABQQFqIgEgAkkNAAsLIAALswIBB38CQCACIgRBD00EQCAAIQIMAQsgAEEAIABrQQNxIgNqIQUgAwRAIAAhAiABIQYDQCACIAYtAAA6AAAgBkEBaiEGIAJBAWoiAiAFSQ0ACwsgBSAEIANrIghBfHEiB2ohAgJAIAEgA2oiA0EDcSIEBEAgB0EATA0BIANBfHEiBkEEaiEBQQAgBEEDdCIJa0EYcSEEIAYoAgAhBgNAIAUgBiAJdiABKAIAIgYgBHRyNgIAIAFBBGohASAFQQRqIgUgAkkNAAsMAQsgB0EATA0AIAMhAQNAIAUgASgCADYCACABQQRqIQEgBUEEaiIFIAJJDQALCyAIQQNxIQQgAyAHaiEBCyAEBEAgAiAEaiEDA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0kNAAsLIAALCwBBgJHAACgCAEULBwAgACABagsHACAAIAFrCwcAIABBCGoLBwAgAEEIawvDBwEFfwJAIwBB0ABrIgIkACACQQA2AhggAkKAgICAEDcDECACQSBqIgQiAEEDOgAgIABCgICAgIAENwIYIABBADYCECAAQQA2AgggAEG4hcAANgIEIAAgAkEQajYCACMAQUBqIgAkAEEBIQMCQCAEKAIAIgVB7IrAAEEMIAQoAgQiBCgCDBECAA0AAkAgASgCCCIDBEAgACADNgIMIABBITYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCEUNAQwCCyABKAIAIgMgASgCBEEMaigCABEGAELB9/nozJOy0UFSDQAgACADNgIMIABBIjYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCA0BCyABKAIMIQEgAEEkakEPNgIAIABBHGpBDzYCACAAIAFBDGo2AiAgACABQQhqNgIYIABBIDYCFCAAIAE2AhAgAEEDNgI8IABBAzYCNCAAQdSKwAA2AjAgAEEANgIoIAAgAEEQajYCOCAFIAQgAEEoahAIIQMLIABBQGskAAJAIANFBEAgAigCECACKAIYIgBrQQlNBEAgAkEQaiAAQQoQEyACKAIYIQALIAIoAhQgAGoiAUH0hsAAKQAANwAAIAFBCGpB/IbAAC8AADsAACACIABBCmo2AhggAkEIahAAIgQQASACKAIIIQYgAigCDCIFIAIoAhAgAigCGCIAa0sEQCACQRBqIAAgBRATIAIoAhghAAsgAigCFCAAaiAGIAUQThogAiAAIAVqIgA2AhggAigCECAAa0EBTQRAIAJBEGogAEECEBMgAigCGCEACyACKAIUIABqQYoUOwAAIAIgAEECaiIDNgIYIAIoAhQhAAJAIAMgAigCECIBTwRAIAAhAQwBCyADRQRAQQEhASAAEAYMAQsgACABQQEgAxA1IgFFDQILIAEgAxACIAUEQCAGEAYLIARBhAFPBEAgBBADCyACQdAAaiQADAILIwBBQGoiACQAIABBNzYCDCAAQdCFwAA2AgggAEGIhsAANgIUIAAgAkHIAGo2AhAgAEEkakECNgIAIABBLGpBAjYCACAAQTxqQR82AgAgAEGgi8AANgIgIABBADYCGCAAQSA2AjQgACAAQTBqNgIoIAAgAEEQajYCOCAAIABBCGo2AjAgAEEYakHkhsAAECkACyADQQEQTAALCwwAQsH3+ejMk7LRQQsNAEKy+KXLheeH1Jt/CwwAQuLnycndnOOADQsDAAELC4cNAQBBgIDAAAv9DG91dHB1dCBzbGljZSBpcyB0b28gc21hbGxzcmMvbGliLnJzABkAEAAKAAAAggAAAA4AAABpbnB1dCB0ZXJtaW5hdGVkIHdoaWxlIGRlY29kaW5nIHVuY29tcHJlc3NlZCBzZWdtZW50IGluIFJMRSBzbGljZQAAABkAEAAKAAAAmQAAABYAAAAZABAACgAAAJYAAAAWAAAAaW5wdXQgdGVybWluYXRlZCB3aGlsZSBkZWNvZGluZyByZXBlYXQgc2VnbWVudCBpbiBSTEUgc2xpY2UAGQAQAAoAAACmAAAAFgAAABkAEAAKAAAAoQAAABIAAAAvVXNlcnMveWhrYW5nLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvY29uc29sZV9lcnJvcl9wYW5pY19ob29rLTAuMS43L3NyYy9saWIucnP0ABAAbAAAAJUAAAAOAAAAaW52YWxpZCBlbnVtIHZhbHVlIHBhc3NlZAAAAAEAAAAAAAAAAQAAAAIAAAADAAAABAAAAG9uZS10aW1lIGluaXRpYWxpemF0aW9uIG1heSBub3QgYmUgcGVyZm9ybWVkIHJlY3Vyc2l2ZWx5pAEQADgAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAAOQBEAAqAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZS9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvc3RkL3NyYy9zeW5jL29uY2UucnMAQwIQAEwAAACVAAAAMgAAAAUAAAAEAAAABAAAAAYAAAAHAAAACAAAAAkAAAAMAAAABAAAAAoAAAALAAAADAAAAGEgRGlzcGxheSBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCBhbiBlcnJvciB1bmV4cGVjdGVkbHkADQAAAAAAAAABAAAADgAAAC9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvYWxsb2Mvc3JjL3N0cmluZy5ycwAYAxAASwAAAN0JAAAOAAAACgpTdGFjazoKCgAAEQAAAAQAAAAEAAAAEgAAABMAAAAUAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZW1lbW9yeSBhbGxvY2F0aW9uIG9mICBieXRlcyBmYWlsZWQAAADDAxAAFQAAANgDEAANAAAAbGlicmFyeS9zdGQvc3JjL2FsbG9jLnJz+AMQABgAAABVAQAACQAAAGNhbm5vdCBtb2RpZnkgdGhlIHBhbmljIGhvb2sgZnJvbSBhIHBhbmlja2luZyB0aHJlYWQgBBAANAAAAGxpYnJhcnkvc3RkL3NyYy9wYW5pY2tpbmcucnNcBBAAHAAAAIcAAAAJAAAAXAQQABwAAABBAgAAHgAAAFwEEAAcAAAAQAIAAB8AAAAVAAAADAAAAAQAAAAWAAAAEQAAAAgAAAAEAAAAFwAAABgAAAAQAAAABAAAABkAAAAaAAAAEQAAAAgAAAAEAAAAGwAAABwAAAARAAAAAAAAAAEAAAAdAAAAbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93AAAAHAUQABEAAAAABRAAHAAAAAwCAAAFAAAASAUQAAAAAAA6AAAASAUQAAAAAABQBRAAAQAAAFAFEAABAAAAcGFuaWNrZWQgYXQgJycsIHgFEAABAAAAeQUQAAMAAAAjAAAAAAAAAAEAAAAkAAAAOiAAAEgFEAAAAAAAnAUQAAIAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OUVycm9yAG8JcHJvZHVjZXJzAghsYW5ndWFnZQEEUnVzdAAMcHJvY2Vzc2VkLWJ5AwVydXN0Yx0xLjcwLjAgKDkwYzU0MTgwNiAyMDIzLTA1LTMxKQZ3YWxydXMGMC4xOS4wDHdhc20tYmluZGdlbgYwLjIuODcALA90YXJnZXRfZmVhdHVyZXMCKw9tdXRhYmxlLWdsb2JhbHMrCHNpZ24tZXh0"),m=v.memory,A=v.main_js,b=v.decode_rgb,y=v.decode_rgba,x=v.decode_grayscale,w=v.decode_grayscale_a,_=v.__wbindgen_add_to_stack_pointer,C=v.__wbindgen_malloc,k=v.__wbindgen_free,E=v.__wbindgen_realloc,S=v.__wbindgen_start,I=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:_,__wbindgen_free:k,__wbindgen_malloc:C,__wbindgen_realloc:E,__wbindgen_start:S,decode_grayscale:x,decode_grayscale_a:w,decode_rgb:b,decode_rgba:y,main_js:A,memory:m},Symbol.toStringTag,{value:"Module"}));Xw(I),S()})();async function n_(e,t,i,n,r,o){const a=e*t;if(!(a>0&&Number.isInteger(a)))throw new Error(`Pixel count must be a positive integer, got ${a}`);let s;if(n&&r)s=await async function(e,t,i,n,r){return await i_,r_(t.compression),r_(n.compression),r_(t.compression),r&&r_(r.compression),r?t_(e,t.data,t.compression,i.data,i.compression,n.data,n.compression,r.data,r.compression):e_(e,t.data,t.compression,i.data,i.compression,n.data,n.compression)}(a,i,n,r,o);else{if(r||n)throw new Error(`Missing ${r?"green":"blue"} channel in RGB image`);s=await o_(a,i,o)}return new Uint8ClampedArray(s.buffer,s.byteOffset,s.byteLength)}function r_(e){switch(e){case Mw.RawData:case Mw.RleCompressed:return}throw new Yy(`Unsupported compression method: ${e}`)}async function o_(e,t,i){return await i_,r_(t.compression),i&&r_(i.compression),i?Zw(e,t.data,t.compression,i.data,i.compression):Jw(e,t.data,t.compression)}function a_(e){const t=Bw(e),{fileHeader:i}=t,n=Dw(i.version),r=function(e){const t=new Sx(e),i=[],n=t.read("u32");for(;t.position<n;){const e=Gx(t);i.push(e)}return{resources:i}}(t.imageResources);return{fileHeader:i,colorModeData:void 0,imageResources:r,layerAndMaskInfo:Sw(t.layerAndMaskInformation,n),imageData:Ux(t.imageData,i.depth,i.height,i.channelCount,n)}}function s_(e){const t=e.readUnicodeString(0),i=e.readIdString(),n=e.read("u32"),r=new Map;for(;r.size<n;){const t=e.readIdString(),i=c_(e);if(r.has(t))throw new px(`Duplicate descriptor key: ${t}`);r.set(t,i)}return{name:t,classId:i,items:r}}function l_(e){const t=e.read("u32");if(16!==t)throw new hx(`Invalid descriptor version: ${t}`);return{descriptorVersion:t,descriptor:s_(e)}}function c_(e){const t=e.readString(4);switch(t){case Lx.Alias:{const i=e.read("u32");return{type:t,data:e.take(i)}}case Lx.Boolean:return{type:t,value:!!e.read("u8")};case Lx.Class:case Lx.GlobalClass:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString()};case Lx.Descriptor:case Lx.GlobalObject:return{type:t,descriptor:s_(e)};case Lx.Double:return{type:t,value:e.read("f64")};case Lx.Enumerated:return{type:t,enumType:e.readIdString(),enumValue:e.readIdString()};case Lx.Integer:return{type:t,value:e.read("i32")};case Lx.LargeInteger:return{type:t,value:e.read("i64")};case Lx.List:{const i=e.read("u32"),n=[];for(;n.length<i;)n.push(c_(e));return{type:t,values:n}}case Lx.RawData:{const i=e.read("u32");return{type:t,data:e.take(i)}}case Lx.Reference:{const i=e.read("u32"),n=[];for(;n.length<i;)n.push(u_(e));return{type:t,references:n}}case Lx.String:return{type:t,value:e.readUnicodeString(0)};case Lx.UnitFloat:return{type:t,unitType:d_(e.readString(4)),value:e.read("f64")};case Lx.ObjectArray:{e.read("u32");const i=e.readUnicodeString(0),n=e.readIdString(),r=e.read("u32");return{type:t,classObj:{name:i,classId:n},items:Array.from(Array(r),(()=>({key:e.readIdString(),value:c_(e)})))}}case Lx.UnitFloats:{const i=d_(e.readString(4)),n=e.read("u32");return{type:t,unitType:i,values:Array.from(Array(n),(()=>e.read("f64")))}}default:throw new dx(`Unexpected descriptor type: ${t}`)}}function u_(e){const t=e.readString(4);switch(t){case Nw.Class:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString()};case Nw.Enumerated:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString(),typeId:e.readIdString(),enumValue:e.readIdString()};case Nw.Identifier:return{type:t,identifier:e.readString(4)};case Nw.Index:return{type:t,index:e.read("u32")};case Nw.Name:return{type:t,name:e.readUnicodeString(0)};case Nw.Offset:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString(),offset:e.read("u32")};case Nw.Property:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString(),keyId:e.readIdString()};default:throw new vx(`Invalid reference type: ${t}`)}}function d_(e){if(!Object.values(jx).includes(e))throw new mx(`Invalid Unit Float type: ${e}`);return e}var h_;!function(e){e[e.String=0]="String",e[e.DictBeg=1]="DictBeg",e[e.DictEnd=2]="DictEnd",e[e.ArrBeg=3]="ArrBeg",e[e.ArrEnd=4]="ArrEnd",e[e.Name=5]="Name",e[e.Number=6]="Number",e[e.Boolean=7]="Boolean"}(h_||(h_={}));const p_=new Set([0,9,12,32,10,13]),f_=new Set([102,116]),g_={"(":40,")":41,"<":60,">":62,"[":91,"]":93,"/":47,"\\":92},v_=new Set(Object.values(g_)),m_=[];for(let e=0;e<256;e+=1)m_[e]=p_.has(e)||v_.has(e);const A_=new TextDecoder("utf-8");class b_{constructor(e){this.cursor=Sx.from(e)}tokens(){const e=[];for(;!this.done();){const t=this.cursor.one();if(p_.has(t))for(;!this.done()&&p_.has(this.cursor.peek());)this.cursor.pass(1);else if(v_.has(t)){if(t===g_["("]){e.push({type:h_.String,value:this.text()});continue}if(t===g_["["]){e.push({type:h_.ArrBeg});continue}if(t===g_["]"]){e.push({type:h_.ArrEnd});continue}if(t===g_["<"]){this.cursor.pass(1),e.push({type:h_.DictBeg});continue}if(t===g_[">"]){this.cursor.pass(1),e.push({type:h_.DictEnd});continue}if(t===g_["/"]){e.push({type:h_.Name,value:this.string()});continue}}else this.cursor.unpass(1),f_.has(t)?e.push({type:h_.Boolean,value:this.boolean()}):e.push({type:h_.Number,value:this.number()})}return e}done(){return this.cursor.position>=this.cursor.length}text(){const e=this.cursor.peek();if(e===g_[")"])return this.cursor.pass(1),"";const t=255===e||254===e;let i=new TextDecoder("utf-16be");t&&(i=this.textDecoderFromBOM());const n=[],r=this.cursor.clone();for(;r.peek()!==g_[")"];)if(r.pass(1),r.peek()===g_["\\"]){const e=r.position-this.cursor.position;n.push(i.decode(this.cursor.take(e),{stream:!0})),r.pass(2),this.cursor.pass(1),n.push(i.decode(this.cursor.take(1),{stream:!0}))}const o=r.position-this.cursor.position,a=this.cursor.take(o);return n.push(i.decode(a)),this.cursor.pass(1),n.join("")}textDecoderFromBOM(){const e=this.cursor.one(),t=this.cursor.one();if(255===e&&254===t)return new TextDecoder("utf-16le");if(254===e&&255===t)return new TextDecoder("utf-16be");throw new _x(`Unknown BOM value: [${e}, ${t}]`)}string(){return function(e){const t=e.position;let i=e.position;for(const n of e.iter()){if(m_[n])break;i+=1}return A_.decode(e.take(i-t))}(this.cursor)}number(){const e=this.string(),t=Number(e);if(Number.isNaN(t))throw new bx(`parsing '${e}' as Number failed`);return t}boolean(){const e=this.string();if("true"===e)return!0;if("false"===e)return!1;throw new Ax(`'${e}' is neither 'true' nor 'false'`)}}const y_=Symbol(h_[h_.ArrBeg]),x_=Symbol(h_[h_.DictBeg]);class w_{constructor(e){this.tokens=e,this.stack=[]}parse(){this.runParser();const[e]=this.stack;if("object"==typeof e&&!Array.isArray(e))return e;throw new yx("EngineData top-level value is not a dict; is "+typeof e)}runParser(){for(const e of this.tokens)switch(e.type){case h_.Name:case h_.Number:case h_.Boolean:case h_.String:this.stack.push(e.value);continue;case h_.DictBeg:this.stack.push(x_);continue;case h_.ArrBeg:this.stack.push(y_);continue;case h_.DictEnd:this.stack.push(this.dict());continue;case h_.ArrEnd:this.stack.push(this.array().reverse());continue}}dict(){const e={};for(;;){const t=this.stack.pop();if(void 0===t)throw new xx("Stack empty when parsing dict");if(t===x_)return e;if(t===y_)throw new wx("Got ArrBeg while parsing a dict");const i=this.stack.pop();if("string"!=typeof i)throw new wx("Dict key is not Name; is "+typeof i);e[i]=t}}array(){const e=[];for(;;){const t=this.stack.pop();if(void 0===t)throw new xx("Stack empty when parsing array");if(t===x_)throw new wx("Got DictBeg while parsing array");if(t===y_)return e;e.push(t)}}}const __=new Set(["DocumentResources","EngineDict","ResourceDict"]);function C_(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k_(e){const t=new w_(new b_(e).tokens()).parse();if(function(e){let t=!0;if("object"!=typeof e||!e)return!1;for(const i of __){if(!C_(e,i))return!1;{const n=e[i];t=t&&"object"==typeof n&&!Array.isArray(n)&&!!n}}return t}(t))return t;throw new Cx(`Object with keys ${JSON.stringify(Object.keys(t))} is not valid EngineData`)}class E_{async composite(e=!0,t=!0){const{red:i,green:n,blue:r,alpha:o}=this.imageData,{width:a,height:s}=this,l=await n_(a,s,i,n,r,o);return!0===e?Gw(l,!0===t?255*this.composedOpacity:this.opacity):l}}class S_ extends E_{constructor(e,t){super(),this.layerFrame=e,this.parent=t,this.type="Layer"}get name(){return this.layerFrame.layerProperties.name}get width(){return this.layerFrame.width}get height(){return this.layerFrame.height}get top(){return this.layerFrame.layerProperties.top}get left(){return this.layerFrame.layerProperties.left}get opacity(){return this.layerFrame.layerProperties.opacity}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get maskData(){return this.layerFrame.layerProperties.maskData}async userMask(){const e=this.layerFrame.userMask;if(e)return o_(Ox(this.maskData),e)}async realUserMask(){const e=this.maskData.realData,t=this.layerFrame.realUserMask;if(e&&t)return o_(Ox(e),t)}get isHidden(){return this.layerFrame.layerProperties.hidden}get isTransparencyLocked(){return this.layerFrame.layerProperties.transparencyLocked}get additionalProperties(){return this.layerFrame.layerProperties.additionalLayerProperties}get text(){return this.layerFrame.layerProperties.text}get textProperties(){return this.layerFrame.layerProperties.textProperties}get imageData(){const{red:e,green:t,blue:i,alpha:n}=this.layerFrame;return{red:e,green:t,blue:i,alpha:n}}}function I_(e){if(!function(e){return"Psd"===e.type||"Group"===e.type}(e))throw new Qy(`Node (name = '${e.name}', type: '${e.type}') cannot be a parent node`)}class B_{constructor(e,t,i,n,r){this.origin=e,this.left=t,this.top=i,this.right=n,this.bottom=r}}function O_(e){if(e.resource.descriptor){const t=e.resource.descriptor.descriptor.items.get("slices");if(!t||t.type!==Lx.List)throw new ox('Missing key "slices" in slice descriptor');return t.values.reduce(((e,t)=>{if(t.type!==Lx.Descriptor)throw new ox(`Slice list contains a non-descriptor (type: ${t.type})`);return e.push(function(e){const t=function(e){const t=Rx(e,"origin",Lx.Enumerated);if("ESliceOrigin"!==t.enumType)throw new ox(`Unexpected enum type for slice origin: got "${t.enumType}"`);switch(t.enumValue){case"layerGenerated":return Fw.LayerGenerated;case"userGenerated":return Fw.UserGenerated;case"autoGenerated":return Fw.AutoGenerated;default:throw new ox(`Unexpected enum value for slice origin: got "${t.enumValue}"`)}}(e),i=Rx(e,"bounds",Lx.Descriptor).descriptor,n=Rx(i,"Top ",Lx.Integer).value,r=Rx(i,"Left",Lx.Integer).value,o=Rx(i,"Btom",Lx.Integer).value,a=Rx(i,"Rght",Lx.Integer).value;return new B_(t,r,n,a,o)}(t.descriptor)),e}),[])}throw new ox("No slice descriptor in slice resource block")}class T_ extends E_{static parse(e){const t=a_(e);return new T_(t)}constructor(e){super(),this.parsingResult=e,this.name="ROOT",this.type="Psd",this.opacity=255,this.composedOpacity=1,this.children=[],this.layers=[],this.guides=[],this.slices=[],this.icc_profile=void 0,this.globalLightAngle=void 0,this.globalLightAltitude=void 0,this.resolutionInfo=void 0,this.additionalLayerProperties={},this.buildTreeStructure(),this.additionalLayerProperties=e.layerAndMaskInfo.globalAdditionalLayerInformation;for(const t of e.imageResources.resources)if(null!==t.resource)switch(t.id){case Pw.GridAndGuides:this.guides=t.resource.guides;break;case Pw.Slices:this.slices=O_(t);break;case Pw.ICCProfile:this.icc_profile=t.resource;break;case Pw.GlobalLightAltitude:this.globalLightAltitude=t.resource;break;case Pw.GlobalLightAngle:this.globalLightAngle=t.resource;break;case Pw.ResolutionInfo:this.resolutionInfo=t.resource}}get width(){return this.parsingResult.fileHeader.width}get height(){return this.parsingResult.fileHeader.height}get channelCount(){return this.parsingResult.fileHeader.channelCount}get depth(){return this.parsingResult.fileHeader.depth}get colorMode(){return this.parsingResult.fileHeader.colorMode}get imageData(){const{compression:e,red:t,green:i,blue:n,alpha:r}=this.parsingResult.imageData;return{red:{compression:e,data:t},green:i?{compression:e,data:i}:void 0,blue:n?{compression:e,data:n}:void 0,alpha:r?{compression:e,data:r}:void 0}}buildTreeStructure(){const{groups:e,layers:t,orders:i}=this.parsingResult.layerAndMaskInfo,n=[this];let r=0,o=0;i.forEach((i=>{const a=n[n.length-1];switch(i){case"G":{const t=e[r];I_(a);const i=new Iy(t,a);n.push(i),a.children.push(i),r+=1;break}case"L":{const e=t[o];I_(a);const i=new S_(e,a);this.layers.push(i),a.children.push(i),o+=1;break}case"D":n.pop()}})),n.length=0,this.children.forEach((e=>{var t,i;return null===(i=(t=e).freeze)||void 0===i?void 0:i.call(t)})),Object.freeze(this.children)}}class D_{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="PsdPlugin";static apis=["insertPSD"];insertPSD(e){return new Promise(((t,i)=>{ib({accept:".psd"}).then((i=>{if(i&&i.length>0){const n=i[0],r=new FileReader;r.readAsText(n,"UTF-8"),r.onload=async()=>{const i=await n.arrayBuffer(),r=T_.parse(i),o=await Cy(r);this.loadJSON(o,e),t("")}}})).catch(i)}))}loadJSON(e,t){this.editor.loadJSON(e,t)}}const M_=(e,t)=>{const i=[],n=2*Math.PI/e;let r=-Math.PI/2;for(let o=0;o<e;o++){const e=o*n+r;i.push({x:Math.cos(e)*t,y:Math.sin(e)*t})}return i},Q_=e=>{const{left:t=0,top:i=0}=e;return{width:e.getScaledWidth(),height:e.getScaledHeight(),left:t,top:i}},L_=(e,t)=>{j_(e),j_(e,"targetId",m(t,"id")),j_(e,"targetType",m(t,"type"))},j_=(e,t="clip",i=!0)=>{Yi(e,t,i)};class P_{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="SimpleClipImagePlugin";static apis=["addClipPathToImage","removeClip"];addClipPathToImage(e){const t=this.canvas.getActiveObjects()[0];if(t&&"image"===t.type){let i=null;const[n,r]=e.split("-"),o=!!r;switch(n){case"polygon":i=((e,t)=>{const i=e.getCenterPoint(),n=M_(5,200),r=new Tm.fabric.Polygon(n,{fill:"rgba(0,0,0,0)",originY:"center",originX:"center",left:i.x,top:i.y});return L_(r,e),{shell:r,clipPath:new Tm.fabric.Polygon([...n],{absolutePositioned:!0,originX:"center",originY:"center",left:r.left,top:r.top,inverted:t})}})(t,o);break;case"rect":i=((e,t)=>{const{width:i=0,height:n=0,left:r=0,top:o=0}=Q_(e),a=Math.round(i/2),s=Math.round(n/2),l=new Tm.fabric.Rect({width:a,height:s,fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:r+i/2,top:o+n/2});return L_(l,e),{clipPath:new Tm.fabric.Rect({absolutePositioned:!0,width:l.width,height:l.height,originX:"center",originY:"center",left:l.left,top:l.top,inverted:t}),shell:l}})(t,o);break;case"circle":i=((e,t)=>{const i=e.getCenterPoint(),{width:n}=Q_(e),r=new Tm.fabric.Ellipse({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:i.x,top:i.y,rx:n/4,ry:n/4});return L_(r,e),{shell:r,clipPath:new Tm.fabric.Ellipse({absolutePositioned:!0,originX:"center",originY:"center",left:r.left,top:r.top,inverted:t,rx:r.rx,ry:r.ry})}})(t,o);break;case"triangle":i=((e,t)=>{const i=e.getCenterPoint(),{width:n=0,height:r=0}=Q_(e),o=Math.round(n/2),a=Math.round(r/2),s=new Tm.fabric.Triangle({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:i.x,top:i.y,width:o,height:a});return L_(s,e),{shell:s,clipPath:new Tm.fabric.Triangle({absolutePositioned:!0,originX:"center",originY:"center",left:s.left,top:s.top,width:s.width,height:s.height,inverted:t})}})(t,o)}if(null==i)return;const{shell:a,clipPath:s}=i;a.on("moving",(()=>{s.setPositionByOrigin(a.getCenterPoint(),"center","center"),t.set("dirty",!0)})),a.on("rotating",(()=>{s.set({angle:a.angle}),t.set("dirty",!0)})),a.on("scaling",(()=>{s.set({scaleX:a.scaleX,scaleY:a.scaleY}),s.setPositionByOrigin(a.getCenterPoint(),"center","center"),t.set("dirty",!0)})),a.on("deselected",(()=>{if(s instanceof Tm.fabric.Ellipse&&a instanceof Tm.fabric.Ellipse)s.set({rx:a.getRx(),ry:a.getRy()}),this.correctPosition(t,a,s);else if(a instanceof Tm.fabric.Polygon){this.correctPosition(t,a,s);const{scaleX:e=1,scaleY:i=1}=s,{scaleX:n=1,scaleY:r=1}=a;s.set("scaleX",e*n),s.set("scaleY",i*r)}else this.correctPosition(t,a,s),s.set("width",a.getScaledWidth()),s.set("height",a.getScaledHeight());t.set("dirty",!0),this.canvas.remove(a),this.canvas.requestRenderAll()})),t.set({clipPath:s}),this.canvas.add(a),this.canvas.setActiveObject(a)}}correctPosition(e,t,i){const n=e.toLocalPoint(t.getCenterPoint(),"center","center"),{scaleX:r=1,scaleY:o=1}=e;i.set({absolutePositioned:!1,left:n.x/r,top:n.y/o,scaleX:1/r,scaleY:1/o})}removeClip(){const e=this.canvas.getActiveObjects()[0];e&&"image"===e.type&&(e.set({clipPath:void 0}),e.set("dirty",!0),this.canvas.requestRenderAll())}}var F_={},R_={},z_={};Object.defineProperty(z_,"__esModule",{value:!0}),z_.default=function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=i.text||t,this.options=i},Object.defineProperty(R_,"__esModule",{value:!0}),R_.CODE39=void 0;var N_,V_=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),U_=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e.toUpperCase(),i.mod43&&(e+=function(e){return H_[e]}(function(e){for(var t=0,i=0;i<e.length;i++)t+=W_(e[i]);return t%=43}(e))),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),V_(t,[{key:"encode",value:function(){for(var e=Y_("*"),t=0;t<this.data.length;t++)e+=Y_(this.data[t])+"0";return{data:e+=Y_("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),t}(((N_=z_)&&N_.__esModule?N_:{default:N_}).default),H_=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],G_=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Y_(e){return function(e){return G_[e].toString(2)}(W_(e))}function W_(e){return H_.indexOf(e)}R_.CODE39=U_;var X_,$_={},q_={},K_={},J_={};function Z_(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(J_,"__esModule",{value:!0});var eC=J_.SET_A=0,tC=J_.SET_B=1,iC=J_.SET_C=2;J_.SHIFT=98;var nC=J_.START_A=103,rC=J_.START_B=104,oC=J_.START_C=105;J_.MODULO=103,J_.STOP=106,J_.FNC1=207,J_.SET_BY_CODE=(Z_(X_={},nC,eC),Z_(X_,rC,tC),Z_(X_,oC,iC),X_),J_.SWAP={101:eC,100:tC,99:iC},J_.A_START_CHAR=String.fromCharCode(208),J_.B_START_CHAR=String.fromCharCode(209),J_.C_START_CHAR=String.fromCharCode(210),J_.A_CHARS="[\0-_-]",J_.B_CHARS="[ --]",J_.C_CHARS="(*[0-9]{2}*)",J_.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(K_,"__esModule",{value:!0});var aC=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),sC=function(e){return e&&e.__esModule?e:{default:e}}(z_),lC=J_,cC=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),i));return n.bytes=e.split("").map((function(e){return e.charCodeAt(0)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),aC(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,i=e.shift()-105,n=lC.SET_BY_CODE[i];if(void 0===n)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(lC.FNC1);var r=t.next(e,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(i)+r.result+t.getBar((r.checksum+i)%lC.MODULO)+t.getBar(lC.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return lC.BARS[e]?lC.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===lC.SET_A){var i=e.shift();return i<32?i+64:i-32}return t===lC.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,i,n){if(!e.length)return{result:"",checksum:0};var r=void 0,o=void 0;if(e[0]>=200){o=e.shift()-105;var a=lC.SWAP[o];void 0!==a?r=t.next(e,i+1,a):(n!==lC.SET_A&&n!==lC.SET_B||o!==lC.SHIFT||(e[0]=n===lC.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),r=t.next(e,i+1,n))}else o=t.correctIndex(e,n),r=t.next(e,i+1,n);var s=o*i;return{result:t.getBar(o)+r.result,checksum:s+r.checksum}}}]),t}(sC.default);K_.default=cC;var uC={};Object.defineProperty(uC,"__esModule",{value:!0});var dC=J_,hC=function(e){return e.match(new RegExp("^"+dC.A_CHARS+"*"))[0].length},pC=function(e){return e.match(new RegExp("^"+dC.B_CHARS+"*"))[0].length},fC=function(e){return e.match(new RegExp("^"+dC.C_CHARS+"*"))[0]};function gC(e,t){var i=t?dC.A_CHARS:dC.B_CHARS,n=e.match(new RegExp("^("+i+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+String.fromCharCode(204)+vC(e.substring(n[1].length));var r=e.match(new RegExp("^"+i+"+"))[0];return r.length===e.length?e:r+String.fromCharCode(t?205:206)+gC(e.substring(r.length),!t)}function vC(e){var t=fC(e),i=t.length;if(i===e.length)return e;e=e.substring(i);var n=hC(e)>=pC(e);return t+String.fromCharCode(n?206:205)+gC(e,n)}uC.default=function(e){var t=void 0;if(fC(e).length>=2)t=dC.C_START_CHAR+vC(e);else{var i=hC(e)>pC(e);t=(i?dC.A_START_CHAR:dC.B_START_CHAR)+gC(e,i)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(e,t){return String.fromCharCode(203)+t}))},Object.defineProperty(q_,"__esModule",{value:!0});var mC=bC(K_),AC=bC(uC);function bC(e){return e&&e.__esModule?e:{default:e}}function yC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var xC=function(e){function t(e,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var n=yC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,AC.default)(e),i));else n=yC(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return yC(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(mC.default);q_.default=xC;var wC={};Object.defineProperty(wC,"__esModule",{value:!0});var _C=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),CC=function(e){return e&&e.__esModule?e:{default:e}}(K_),kC=J_,EC=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,kC.A_START_CHAR+e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),_C(t,[{key:"valid",value:function(){return new RegExp("^"+kC.A_CHARS+"+$").test(this.data)}}]),t}(CC.default);wC.default=EC;var SC={};Object.defineProperty(SC,"__esModule",{value:!0});var IC=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),BC=function(e){return e&&e.__esModule?e:{default:e}}(K_),OC=J_,TC=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,OC.B_START_CHAR+e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),IC(t,[{key:"valid",value:function(){return new RegExp("^"+OC.B_CHARS+"+$").test(this.data)}}]),t}(BC.default);SC.default=TC;var DC={};Object.defineProperty(DC,"__esModule",{value:!0});var MC=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),QC=function(e){return e&&e.__esModule?e:{default:e}}(K_),LC=J_,jC=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,LC.C_START_CHAR+e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),MC(t,[{key:"valid",value:function(){return new RegExp("^"+LC.C_CHARS+"+$").test(this.data)}}]),t}(QC.default);DC.default=jC,Object.defineProperty($_,"__esModule",{value:!0}),$_.CODE128C=$_.CODE128B=$_.CODE128A=$_.CODE128=void 0;var PC=NC(q_),FC=NC(wC),RC=NC(SC),zC=NC(DC);function NC(e){return e&&e.__esModule?e:{default:e}}$_.CODE128=PC.default,$_.CODE128A=FC.default,$_.CODE128B=RC.default,$_.CODE128C=zC.default;var VC={},UC={},HC={};Object.defineProperty(HC,"__esModule",{value:!0}),HC.SIDE_BIN="101",HC.MIDDLE_BIN="01010",HC.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},HC.EAN2_STRUCTURE=["LL","LG","GL","GG"],HC.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],HC.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var GC={},YC={};Object.defineProperty(YC,"__esModule",{value:!0});var WC=HC;YC.default=function(e,t,i){var n=e.split("").map((function(e,i){return WC.BINARIES[t[i]]})).map((function(t,i){return t?t[e[i]]:""}));if(i){var r=e.length-1;n=n.map((function(e,t){return t<r?e+i:e}))}return n.join("")},Object.defineProperty(GC,"__esModule",{value:!0});var XC=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),$C=HC,qC=KC(YC);function KC(e){return e&&e.__esModule?e:{default:e}}var JC=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.fontSize=!i.flat&&i.fontSize>10*i.width?10*i.width:i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),XC(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,qC.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,qC.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:$C.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:$C.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:$C.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[$C.SIDE_BIN,this.leftEncode(),$C.MIDDLE_BIN,this.rightEncode(),$C.SIDE_BIN].join(""),text:this.text}}}]),t}(KC(z_).default);GC.default=JC,Object.defineProperty(UC,"__esModule",{value:!0});var ZC=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),ek=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0},tk=HC,ik=function(e){return e&&e.__esModule?e:{default:e}}(GC),nk=function(e){var t=e.substr(0,12).split("").map((function(e){return+e})).reduce((function(e,t,i){return i%2?e+3*t:e+t}),0);return(10-t%10)%10},rk=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{12}$/)&&(e+=nk(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.lastChar=i.lastChar,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ZC(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===nk(this.data)}},{key:"leftText",value:function(){return ek(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),i=tk.EAN13_STRUCTURE[this.data[0]];return ek(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,i)}},{key:"rightText",value:function(){return ek(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return ek(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=ek(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}(ik.default);UC.default=rk;var ok={};Object.defineProperty(ok,"__esModule",{value:!0});var ak=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),sk=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,i,n)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(n):void 0},lk=function(e){return e&&e.__esModule?e:{default:e}}(GC),ck=function(e){var t=e.substr(0,7).split("").map((function(e){return+e})).reduce((function(e,t,i){return i%2?e+t:e+3*t}),0);return(10-t%10)%10},uk=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{7}$/)&&(e+=ck(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ak(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===ck(this.data)}},{key:"leftText",value:function(){return sk(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return sk(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return sk(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return sk(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),t}(lk.default);ok.default=uk;var dk={};Object.defineProperty(dk,"__esModule",{value:!0});var hk=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),pk=HC,fk=vk(YC),gk=vk(z_);function vk(e){return e&&e.__esModule?e:{default:e}}var mk=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),hk(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e=pk.EAN5_STRUCTURE[function(e){var t=e.split("").map((function(e){return+e})).reduce((function(e,t,i){return i%2?e+9*t:e+3*t}),0);return t%10}(this.data)];return{data:"1011"+(0,fk.default)(this.data,e,"01"),text:this.text}}}]),t}(gk.default);dk.default=mk;var Ak={};Object.defineProperty(Ak,"__esModule",{value:!0});var bk=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),yk=HC,xk=wk(YC);function wk(e){return e&&e.__esModule?e:{default:e}}var _k=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),bk(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=yk.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,xk.default)(this.data,e,"01"),text:this.text}}}]),t}(wk(z_).default);Ak.default=_k;var Ck={};Object.defineProperty(Ck,"__esModule",{value:!0});var kk=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Ck.checksum=Bk;var Ek=Sk(YC);function Sk(e){return e&&e.__esModule?e:{default:e}}var Ik=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{11}$/)&&(e+=Bk(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.displayValue=i.displayValue,i.fontSize>10*i.width?n.fontSize=10*i.width:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),kk(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==Bk(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,Ek.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,Ek.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,Ek.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,Ek.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,Ek.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,Ek.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),t}(Sk(z_).default);function Bk(e){var t,i=0;for(t=1;t<11;t+=2)i+=parseInt(e[t]);for(t=0;t<11;t+=2)i+=3*parseInt(e[t]);return(10-i%10)%10}Ck.default=Ik;var Ok={};Object.defineProperty(Ok,"__esModule",{value:!0});var Tk=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Dk=Lk(YC),Mk=Lk(z_),Qk=Ck;function Lk(e){return e&&e.__esModule?e:{default:e}}function jk(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Pk=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],Fk=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],Rk=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=jk(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));if(n.isValid=!1,-1!==e.search(/^[0-9]{6}$/))n.middleDigits=e,n.upcA=zk(e,"0"),n.text=i.text||""+n.upcA[0]+e+n.upcA[n.upcA.length-1],n.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return jk(n);if(n.middleDigits=e.substring(1,e.length-1),n.upcA=zk(n.middleDigits,e[0]),n.upcA[n.upcA.length-1]!==e[e.length-1])return jk(n);n.isValid=!0}return n.displayValue=i.displayValue,i.fontSize>10*i.width?n.fontSize=10*i.width:n.fontSize=i.fontSize,n.guardHeight=i.height+n.fontSize/2+i.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Tk(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],i=Fk[parseInt(t)][parseInt(e)];return(0,Dk.default)(this.middleDigits,i)}}]),t}(Mk.default);function zk(e,t){for(var i=parseInt(e[e.length-1]),n=Pk[i],r="",o=0,a=0;a<n.length;a++){var s=n[a];r+="X"===s?e[o++]:s}return(r=""+t+r)+(0,Qk.checksum)(r)}Ok.default=Rk,Object.defineProperty(VC,"__esModule",{value:!0}),VC.UPCE=VC.UPC=VC.EAN2=VC.EAN5=VC.EAN8=VC.EAN13=void 0;var Nk=Wk(UC),Vk=Wk(ok),Uk=Wk(dk),Hk=Wk(Ak),Gk=Wk(Ck),Yk=Wk(Ok);function Wk(e){return e&&e.__esModule?e:{default:e}}VC.EAN13=Nk.default,VC.EAN8=Vk.default,VC.EAN5=Uk.default,VC.EAN2=Hk.default,VC.UPC=Gk.default,VC.UPCE=Yk.default;var Xk={},$k={},qk={};Object.defineProperty(qk,"__esModule",{value:!0}),qk.START_BIN="1010",qk.END_BIN="11101",qk.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty($k,"__esModule",{value:!0});var Kk=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Jk=qk,Zk=function(e){return e&&e.__esModule?e:{default:e}}(z_),eE=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Kk(t,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map((function(t){return e.encodePair(t)})).join("");return{data:Jk.START_BIN+t+Jk.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=Jk.BINARIES[e[1]];return Jk.BINARIES[e[0]].split("").map((function(e,i){return("1"===e?"111":"1")+("1"===t[i]?"000":"0")})).join("")}}]),t}(Zk.default);$k.default=eE;var tE={};Object.defineProperty(tE,"__esModule",{value:!0});var iE=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),nE=function(e){return e&&e.__esModule?e:{default:e}}($k),rE=function(e){var t=e.substr(0,13).split("").map((function(e){return parseInt(e,10)})).reduce((function(e,t,i){return e+t*(3-i%2*2)}),0);return 10*Math.ceil(t/10)-t},oE=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{13}$/)&&(e+=rE(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),iE(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===rE(this.data)}}]),t}(nE.default);tE.default=oE,Object.defineProperty(Xk,"__esModule",{value:!0}),Xk.ITF14=Xk.ITF=void 0;var aE=lE($k),sE=lE(tE);function lE(e){return e&&e.__esModule?e:{default:e}}Xk.ITF=aE.default,Xk.ITF14=sE.default;var cE={},uE={};Object.defineProperty(uE,"__esModule",{value:!0});var dE=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),hE=function(e){return e&&e.__esModule?e:{default:e}}(z_),pE=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),dE(t,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var i=parseInt(this.data[t]).toString(2);i=fE(i,4-i.length);for(var n=0;n<i.length;n++)e+="0"==i[n]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),t}(hE.default);function fE(e,t){for(var i=0;i<t;i++)e="0"+e;return e}uE.default=pE;var gE={},vE={};Object.defineProperty(vE,"__esModule",{value:!0}),vE.mod10=function(e){for(var t=0,i=0;i<e.length;i++){var n=parseInt(e[i]);(i+e.length)%2==0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},vE.mod11=function(e){for(var t=0,i=[2,3,4,5,6,7],n=0;n<e.length;n++){var r=parseInt(e[e.length-1-n]);t+=i[n%i.length]*r}return(11-t%11)%11},Object.defineProperty(gE,"__esModule",{value:!0});var mE=function(e){return e&&e.__esModule?e:{default:e}}(uE),AE=vE,bE=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,AE.mod10)(e),i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(mE.default);gE.default=bE;var yE={};Object.defineProperty(yE,"__esModule",{value:!0});var xE=function(e){return e&&e.__esModule?e:{default:e}}(uE),wE=vE,_E=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,wE.mod11)(e),i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(xE.default);yE.default=_E;var CE={};Object.defineProperty(CE,"__esModule",{value:!0});var kE=function(e){return e&&e.__esModule?e:{default:e}}(uE),EE=vE,SE=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,EE.mod10)(e),e+=(0,EE.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(kE.default);CE.default=SE;var IE={};Object.defineProperty(IE,"__esModule",{value:!0});var BE=function(e){return e&&e.__esModule?e:{default:e}}(uE),OE=vE,TE=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,OE.mod11)(e),e+=(0,OE.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(BE.default);IE.default=TE,Object.defineProperty(cE,"__esModule",{value:!0}),cE.MSI1110=cE.MSI1010=cE.MSI11=cE.MSI10=cE.MSI=void 0;var DE=PE(uE),ME=PE(gE),QE=PE(yE),LE=PE(CE),jE=PE(IE);function PE(e){return e&&e.__esModule?e:{default:e}}cE.MSI=DE.default,cE.MSI10=ME.default,cE.MSI11=QE.default,cE.MSI1010=LE.default,cE.MSI1110=jE.default;var FE={};Object.defineProperty(FE,"__esModule",{value:!0}),FE.pharmacode=void 0;var RE=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),zE=function(e){return e&&e.__esModule?e:{default:e}}(z_),NE=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return n.number=parseInt(e,10),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),RE(t,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2==0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(zE.default);FE.pharmacode=NE;var VE={};Object.defineProperty(VE,"__esModule",{value:!0}),VE.codabar=void 0;var UE=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),HE=function(e){return e&&e.__esModule?e:{default:e}}(z_),GE=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),i));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),UE(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),i=0;i<this.data.length;i++)e.push(t[this.data.charAt(i)]),i!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(HE.default);VE.codabar=GE;var YE={};Object.defineProperty(YE,"__esModule",{value:!0}),YE.GenericBarcode=void 0;var WE=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),XE=function(e){return e&&e.__esModule?e:{default:e}}(z_),$E=function(e){function t(e,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),WE(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(XE.default);YE.GenericBarcode=$E,Object.defineProperty(F_,"__esModule",{value:!0});var qE=R_,KE=$_,JE=VC,ZE=Xk,eS=cE,tS=FE,iS=VE,nS=YE;F_.default={CODE39:qE.CODE39,CODE128:KE.CODE128,CODE128A:KE.CODE128A,CODE128B:KE.CODE128B,CODE128C:KE.CODE128C,EAN13:JE.EAN13,EAN8:JE.EAN8,EAN5:JE.EAN5,EAN2:JE.EAN2,UPC:JE.UPC,UPCE:JE.UPCE,ITF14:ZE.ITF14,ITF:ZE.ITF,MSI:eS.MSI,MSI10:eS.MSI10,MSI11:eS.MSI11,MSI1010:eS.MSI1010,MSI1110:eS.MSI1110,pharmacode:tS.pharmacode,codabar:iS.codabar,GenericBarcode:nS.GenericBarcode};var rS={};Object.defineProperty(rS,"__esModule",{value:!0});var oS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};rS.default=function(e,t){return oS({},e,t)};var aS={};Object.defineProperty(aS,"__esModule",{value:!0}),aS.default=function(e){var t=[];return function e(i){if(Array.isArray(i))for(var n=0;n<i.length;n++)e(i[n]);else i.text=i.text||"",i.data=i.data||"",t.push(i)}(e),t};var sS={};Object.defineProperty(sS,"__esModule",{value:!0}),sS.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e};var lS={},cS={},uS={};Object.defineProperty(uS,"__esModule",{value:!0}),uS.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var i in t)t.hasOwnProperty(i)&&"string"==typeof e[i=t[i]]&&(e[i]=parseInt(e[i],10));return"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue),e};var dS={};Object.defineProperty(dS,"__esModule",{value:!0});var hS={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};dS.default=hS,Object.defineProperty(cS,"__esModule",{value:!0});var pS=gS(uS),fS=gS(dS);function gS(e){return e&&e.__esModule?e:{default:e}}cS.default=function(e){var t={};for(var i in fS.default)fS.default.hasOwnProperty(i)&&(e.hasAttribute("jsbarcode-"+i.toLowerCase())&&(t[i]=e.getAttribute("jsbarcode-"+i.toLowerCase())),e.hasAttribute("data-"+i.toLowerCase())&&(t[i]=e.getAttribute("data-"+i.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,pS.default)(t)};var vS={},mS={},AS={};Object.defineProperty(AS,"__esModule",{value:!0}),AS.getTotalWidthOfEncodings=AS.calculateEncodingAttributes=AS.getBarcodePadding=AS.getEncodingHeight=AS.getMaximumHeightOfEncodings=void 0;var bS=function(e){return e&&e.__esModule?e:{default:e}}(rS);function yS(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function xS(e,t,i){if(i.displayValue&&t<e){if("center"==i.textAlign)return Math.floor((e-t)/2);if("left"==i.textAlign)return 0;if("right"==i.textAlign)return Math.floor(e-t)}return 0}function wS(e,t,i){var n;if(i)n=i;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var r=n.measureText(e);return r?r.width:0}AS.getMaximumHeightOfEncodings=function(e){for(var t=0,i=0;i<e.length;i++)e[i].height>t&&(t=e[i].height);return t},AS.getEncodingHeight=yS,AS.getBarcodePadding=xS,AS.calculateEncodingAttributes=function(e,t,i){for(var n=0;n<e.length;n++){var r,o=e[n],a=(0,bS.default)(t,o.options);r=a.displayValue?wS(o.text,a,i):0;var s=o.data.length*a.width;o.width=Math.ceil(Math.max(r,s)),o.height=yS(o,a),o.barcodePadding=xS(r,s,a)}},AS.getTotalWidthOfEncodings=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].width;return t},Object.defineProperty(mS,"__esModule",{value:!0});var _S=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),CS=function(e){return e&&e.__esModule?e:{default:e}}(rS),kS=AS,ES=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=i,this.options=n}return _S(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,CS.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,kS.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,kS.getTotalWidthOfEncodings)(this.encodings),i=(0,kS.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var i,n=this.canvas.getContext("2d"),r=t.data;i="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,n.fillStyle=e.lineColor;for(var o=0;o<r.length;o++){var a=o*e.width+t.barcodePadding;"1"===r[o]?n.fillRect(a,i,e.width,e.height):r[o]&&n.fillRect(a,i,e.width,e.height*r[o])}}},{key:"drawCanvasText",value:function(e,t){var i,n,r=this.canvas.getContext("2d"),o=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,r.font=o,"left"==e.textAlign||t.barcodePadding>0?(i=0,r.textAlign="left"):"right"==e.textAlign?(i=t.width-1,r.textAlign="right"):(i=t.width/2,r.textAlign="center"),r.fillText(t.text,i,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();mS.default=ES;var SS={};Object.defineProperty(SS,"__esModule",{value:!0});var IS=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),BS=function(e){return e&&e.__esModule?e:{default:e}}(rS),OS=AS,TS="http://www.w3.org/2000/svg",DS=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=i,this.options=n,this.document=n.xmlDocument||document}return IS(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var i=this.encodings[t],n=(0,BS.default)(this.options,i.options),r=this.createGroup(e,n.marginTop,this.svg);this.setGroupOptions(r,n),this.drawSvgBarcode(r,n,i),this.drawSVGText(r,n,i),e+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,OS.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,OS.getTotalWidthOfEncodings)(this.encodings),t=(0,OS.getMaximumHeightOfEncodings)(this.encodings),i=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,t),this.options.background&&this.drawRect(0,0,i,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,i){var n,r=i.data;n="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var o=0,a=0,s=0;s<r.length;s++)a=s*t.width+i.barcodePadding,"1"===r[s]?o++:o>0&&(this.drawRect(a-t.width*o,n,t.width*o,t.height,e),o=0);o>0&&this.drawRect(a-t.width*(o-1),n,t.width*o,t.height,e)}},{key:"drawSVGText",value:function(e,t,i){var n,r,o=this.document.createElementNS(TS,"text");t.displayValue&&(o.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),r="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||i.barcodePadding>0?(n=0,o.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=i.width-1,o.setAttribute("text-anchor","end")):(n=i.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",n),o.setAttribute("y",r),o.appendChild(this.document.createTextNode(i.text)),e.appendChild(o))}},{key:"setSvgAttributes",value:function(e,t){var i=this.svg;i.setAttribute("width",e+"px"),i.setAttribute("height",t+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+e+" "+t),i.setAttribute("xmlns",TS),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,i){var n=this.document.createElementNS(TS,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),i.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,i,n,r){var o=this.document.createElementNS(TS,"rect");return o.setAttribute("x",e),o.setAttribute("y",t),o.setAttribute("width",i),o.setAttribute("height",n),r.appendChild(o),o}}]),e}();SS.default=DS;var MS={};Object.defineProperty(MS,"__esModule",{value:!0});var QS=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),LS=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.encodings=i,this.options=n}return QS(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();MS.default=LS,Object.defineProperty(vS,"__esModule",{value:!0});var jS=RS(mS),PS=RS(SS),FS=RS(MS);function RS(e){return e&&e.__esModule?e:{default:e}}vS.default={CanvasRenderer:jS.default,SVGRenderer:PS.default,ObjectRenderer:FS.default};var zS={};function NS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VS(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function US(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(zS,"__esModule",{value:!0});var HS=function(){function e(t,i){NS(this,e);var n=VS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidInputException",n.symbology=t,n.input=i,n.message='"'+n.input+'" is not a valid input for '+n.symbology,n}return US(e,Error),e}(),GS=function(){function e(){NS(this,e);var t=VS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return US(e,Error),e}(),YS=function(){function e(){NS(this,e);var t=VS(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return US(e,Error),e}();zS.InvalidInputException=HS,zS.InvalidElementException=GS,zS.NoElementException=YS,Object.defineProperty(lS,"__esModule",{value:!0});var WS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XS=KS(cS),$S=KS(vS),qS=zS;function KS(e){return e&&e.__esModule?e:{default:e}}function JS(e){if("string"==typeof e)return function(e){var t=document.querySelectorAll(e);if(0!==t.length){for(var i=[],n=0;n<t.length;n++)i.push(JS(t[n]));return i}}(e);if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++)t.push(JS(e[i]));return t}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return function(e){var t=document.createElement("canvas");return{element:t,options:(0,XS.default)(e),renderer:$S.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",t.toDataURL())}}}(e);if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,XS.default)(e),renderer:$S.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,XS.default)(e),renderer:$S.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:$S.default.CanvasRenderer};if(e&&"object"===(void 0===e?"undefined":WS(e))&&!e.nodeName)return{element:e,renderer:$S.default.ObjectRenderer};throw new qS.InvalidElementException}lS.default=JS;var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});var eI=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),tI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}return eI(e,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(i){return this.handleCatch(i),this.api}}}]),e}();ZS.default=tI;var iI=dI(F_),nI=dI(rS),rI=dI(aS),oI=dI(sS),aI=dI(lS),sI=dI(uS),lI=dI(ZS),cI=zS,uI=dI(dS);function dI(e){return e&&e.__esModule?e:{default:e}}var hI=function(){},pI=function(e,t,i){var n=new hI;if(void 0===e)throw Error("No element to render on was provided.");return n._renderProperties=(0,aI.default)(e),n._encodings=[],n._options=uI.default,n._errorHandler=new lI.default(n),void 0!==t&&((i=i||{}).format||(i.format=mI()),n.options(i)[i.format](t,i).render()),n};for(var fI in pI.getModule=function(e){return iI.default[e]},iI.default)iI.default.hasOwnProperty(fI)&&gI(iI.default,fI);function gI(e,t){hI.prototype[t]=hI.prototype[t.toUpperCase()]=hI.prototype[t.toLowerCase()]=function(i,n){var r=this;return r._errorHandler.wrapBarcodeCall((function(){n.text=void 0===n.text?void 0:""+n.text;var o=(0,nI.default)(r._options,n);o=(0,sI.default)(o);var a=e[t],s=vI(i,a,o);return r._encodings.push(s),r}))}}function vI(e,t,i){var n=new t(e=""+e,i);if(!n.valid())throw new cI.InvalidInputException(n.constructor.name,e);var r=n.encode();r=(0,rI.default)(r);for(var o=0;o<r.length;o++)r[o].options=(0,nI.default)(i,r[o].options);return r}function mI(){return iI.default.CODE128?"CODE128":Object.keys(iI.default)[0]}function AI(e,t,i){t=(0,rI.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,nI.default)(i,t[n].options),(0,oI.default)(t[n].options);(0,oI.default)(i),new(0,e.renderer)(e.element,t,i).render(),e.afterRender&&e.afterRender()}hI.prototype.options=function(e){return this._options=(0,nI.default)(this._options,e),this},hI.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},hI.prototype.init=function(){var e;if(this._renderProperties)for(var t in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){e=this._renderProperties[t];var i=(0,nI.default)(this._options,e.options);"auto"==i.format&&(i.format=mI()),this._errorHandler.wrapBarcodeCall((function(){var t=vI(i.value,iI.default[i.format.toUpperCase()],i);AI(e,t,i)}))}},hI.prototype.render=function(){if(!this._renderProperties)throw new cI.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)AI(this._renderProperties[e],this._encodings,this._options);else AI(this._renderProperties,this._encodings,this._options);return this},hI.prototype._defaults=uI.default,"undefined"!=typeof window&&(window.JsBarcode=pI),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var i=[];return jQuery(this).each((function(){i.push(this)})),pI(i,e,t)});const bI=un(pI);var yI=(e=>(e.CODE128="CODE128",e.EAN8="EAN8",e.EAN13="EAN13",e.ITF14="ITF14",e.codabar="codabar",e.pharmacode="pharmacode",e))(yI||{});class xI{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="BarCodePlugin";static apis=["addBarcode","setBarcode","getBarcodeTypes"];async hookTransform(e){if("barcode"===e.extensionType){const t=await this._getBase64Str(e.extension);e.src=t}}_getBase64Str(e){const t=document.createElement("canvas");return bI(t,e.value,{...e}),t.toDataURL("image/png",1)}_defaultBarcodeOption(){return{value:"123456",format:"CODE128",text:"hi kuaitu",textAlign:"left",textPosition:"bottom",fontSize:12,background:"#fff",lineColor:"#000",displayValue:!1}}addBarcode(){const e=this._defaultBarcodeOption(),t=this._getBase64Str(JSON.parse(JSON.stringify(e)));Tm.fabric.Image.fromURL(t,(t=>{t.set({extensionType:"barcode",extension:e}),t.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(t),this.canvas.setActiveObject(t),this.editor.position("center")}),{crossOrigin:"anonymous"})}setBarcode(e){try{const t=this._getBase64Str(e),i=this.canvas.getActiveObjects()[0];Tm.fabric.Image.fromURL(t,(t=>{t.set({left:i.left,top:i.top,extensionType:"barcode",extension:{...e}}),t.scaleToWidth(i.getScaledWidth()),this.editor.del(),this.canvas.add(t),this.canvas.setActiveObject(t)}),{crossOrigin:"anonymous"})}catch(t){}}getBarcodeTypes(){return Object.values(yI)}destroy(){}}var wI={exports:{}};!function(e){self,e.exports=(()=>{var e={192:(e,t)=>{var i,n,r=function(){var e=function(e,t){var i=e,n=a[t],r=null,o=0,l=null,v=[],m={},b=function(e,t){r=function(e){for(var t=new Array(e),i=0;i<e;i+=1){t[i]=new Array(e);for(var n=0;n<e;n+=1)t[i][n]=null}return t}(o=4*i+17),y(0,0),y(o-7,0),y(0,o-7),w(),x(),C(e,t),i>=7&&_(e),null==l&&(l=E(i,n,v)),k(l,t)},y=function(e,t){for(var i=-1;i<=7;i+=1)if(!(e+i<=-1||o<=e+i))for(var n=-1;n<=7;n+=1)t+n<=-1||o<=t+n||(r[e+i][t+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},x=function(){for(var e=8;e<o-8;e+=1)null==r[e][6]&&(r[e][6]=e%2==0);for(var t=8;t<o-8;t+=1)null==r[6][t]&&(r[6][t]=t%2==0)},w=function(){for(var e=s.getPatternPosition(i),t=0;t<e.length;t+=1)for(var n=0;n<e.length;n+=1){var o=e[t],a=e[n];if(null==r[o][a])for(var l=-2;l<=2;l+=1)for(var c=-2;c<=2;c+=1)r[o+l][a+c]=-2==l||2==l||-2==c||2==c||0==l&&0==c}},_=function(e){for(var t=s.getBCHTypeNumber(i),n=0;n<18;n+=1){var a=!e&&1==(t>>n&1);r[Math.floor(n/3)][n%3+o-8-3]=a}for(n=0;n<18;n+=1)a=!e&&1==(t>>n&1),r[n%3+o-8-3][Math.floor(n/3)]=a},C=function(e,t){for(var i=n<<3|t,a=s.getBCHTypeInfo(i),l=0;l<15;l+=1){var c=!e&&1==(a>>l&1);l<6?r[l][8]=c:l<8?r[l+1][8]=c:r[o-15+l][8]=c}for(l=0;l<15;l+=1)c=!e&&1==(a>>l&1),l<8?r[8][o-l-1]=c:l<9?r[8][15-l-1+1]=c:r[8][15-l-1]=c;r[o-8][8]=!e},k=function(e,t){for(var i=-1,n=o-1,a=7,l=0,c=s.getMaskFunction(t),u=o-1;u>0;u-=2)for(6==u&&(u-=1);;){for(var d=0;d<2;d+=1)if(null==r[n][u-d]){var h=!1;l<e.length&&(h=1==(e[l]>>>a&1)),c(n,u-d)&&(h=!h),r[n][u-d]=h,-1==(a-=1)&&(l+=1,a=7)}if((n+=i)<0||o<=n){n-=i,i=-i;break}}},E=function(e,t,i){for(var n=u.getRSBlocks(e,t),r=d(),o=0;o<i.length;o+=1){var a=i[o];r.put(a.getMode(),4),r.put(a.getLength(),s.getLengthInBits(a.getMode(),e)),a.write(r)}var l=0;for(o=0;o<n.length;o+=1)l+=n[o].dataCount;if(r.getLengthInBits()>8*l)throw"code length overflow. ("+r.getLengthInBits()+">"+8*l+")";for(r.getLengthInBits()+4<=8*l&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*l||(r.put(236,8),r.getLengthInBits()>=8*l));)r.put(17,8);return function(e,t){for(var i=0,n=0,r=0,o=new Array(t.length),a=new Array(t.length),l=0;l<t.length;l+=1){var u=t[l].dataCount,d=t[l].totalCount-u;n=Math.max(n,u),r=Math.max(r,d),o[l]=new Array(u);for(var h=0;h<o[l].length;h+=1)o[l][h]=255&e.getBuffer()[h+i];i+=u;var p=s.getErrorCorrectPolynomial(d),f=c(o[l],p.getLength()-1).mod(p);for(a[l]=new Array(p.getLength()-1),h=0;h<a[l].length;h+=1){var g=h+f.getLength()-a[l].length;a[l][h]=g>=0?f.getAt(g):0}}var v=0;for(h=0;h<t.length;h+=1)v+=t[h].totalCount;var m=new Array(v),A=0;for(h=0;h<n;h+=1)for(l=0;l<t.length;l+=1)h<o[l].length&&(m[A]=o[l][h],A+=1);for(h=0;h<r;h+=1)for(l=0;l<t.length;l+=1)h<a[l].length&&(m[A]=a[l][h],A+=1);return m}(r,n)};m.addData=function(e,t){var i=null;switch(t=t||"Byte"){case"Numeric":i=h(e);break;case"Alphanumeric":i=p(e);break;case"Byte":i=f(e);break;case"Kanji":i=g(e);break;default:throw"mode:"+t}v.push(i),l=null},m.isDark=function(e,t){if(e<0||o<=e||t<0||o<=t)throw e+","+t;return r[e][t]},m.getModuleCount=function(){return o},m.make=function(){if(i<1){for(var e=1;e<40;e++){for(var t=u.getRSBlocks(e,n),r=d(),o=0;o<v.length;o++){var a=v[o];r.put(a.getMode(),4),r.put(a.getLength(),s.getLengthInBits(a.getMode(),e)),a.write(r)}var l=0;for(o=0;o<t.length;o++)l+=t[o].dataCount;if(r.getLengthInBits()<=8*l)break}i=e}b(!1,function(){for(var e=0,t=0,i=0;i<8;i+=1){b(!0,i);var n=s.getLostPoint(m);(0==i||e>n)&&(e=n,t=i)}return t}())},m.createTableTag=function(e,t){e=e||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",i+='">',i+="<tbody>";for(var n=0;n<m.getModuleCount();n+=1){i+="<tr>";for(var r=0;r<m.getModuleCount();r+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+e+"px;",i+=" height: "+e+"px;",i+=" background-color: ",i+=m.isDark(n,r)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return(i+="</tbody>")+"</table>"},m.createSvgTag=function(e,t,i,n){var r={};"object"==typeof arguments[0]&&(e=(r=arguments[0]).cellSize,t=r.margin,i=r.alt,n=r.title),e=e||2,t=void 0===t?4*e:t,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var o,a,s,l,c=m.getModuleCount()*e+2*t,u="";for(l="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=r.scalable?"":' width="'+c+'px" height="'+c+'px"',u+=' viewBox="0 0 '+c+" "+c+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=n.text||i.text?' role="img" aria-labelledby="'+S([n.id,i.id].join(" ").trim())+'"':"",u+=">",u+=n.text?'<title id="'+S(n.id)+'">'+S(n.text)+"</title>":"",u+=i.text?'<description id="'+S(i.id)+'">'+S(i.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',a=0;a<m.getModuleCount();a+=1)for(s=a*e+t,o=0;o<m.getModuleCount();o+=1)m.isDark(a,o)&&(u+="M"+(o*e+t)+","+s+l);return(u+='" stroke="transparent" fill="black"/>')+"</svg>"},m.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var i=m.getModuleCount()*e+2*t,n=t,r=i-t;return A(i,i,(function(t,i){if(n<=t&&t<r&&n<=i&&i<r){var o=Math.floor((t-n)/e),a=Math.floor((i-n)/e);return m.isDark(a,o)?0:1}return 1}))},m.createImgTag=function(e,t,i){e=e||2,t=void 0===t?4*e:t;var n=m.getModuleCount()*e+2*t,r="";return r+="<img",r+=' src="',r+=m.createDataURL(e,t),r+='"',r+=' width="',r+=n,r+='"',r+=' height="',r+=n,r+='"',i&&(r+=' alt="',r+=S(i),r+='"'),r+"/>"};var S=function(e){for(var t="",i=0;i<e.length;i+=1){var n=e.charAt(i);switch(n){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=n}}return t};return m.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,i,n,r,o,a=1*m.getModuleCount()+2*e,s=e,l=a-e,c={"":""," ":""," ":"","  ":" "},u={"":""," ":""," ":" ","  ":" "},d="";for(t=0;t<a;t+=2){for(n=Math.floor((t-s)/1),r=Math.floor((t+1-s)/1),i=0;i<a;i+=1)o="",s<=i&&i<l&&s<=t&&t<l&&m.isDark(n,Math.floor((i-s)/1))&&(o=" "),s<=i&&i<l&&s<=t+1&&t+1<l&&m.isDark(r,Math.floor((i-s)/1))?o+=" ":o+="",d+=e<1&&t+1>=l?u[o]:c[o];d+="\n"}return a%2&&e>0?d.substring(0,d.length-a-1)+Array(a+1).join(""):d.substring(0,d.length-1)}(t);e-=1,t=void 0===t?2*e:t;var i,n,r,o,a=m.getModuleCount()*e+2*t,s=t,l=a-t,c=Array(e+1).join(""),u=Array(e+1).join("  "),d="",h="";for(i=0;i<a;i+=1){for(r=Math.floor((i-s)/e),h="",n=0;n<a;n+=1)o=1,s<=n&&n<l&&s<=i&&i<l&&m.isDark(r,Math.floor((n-s)/e))&&(o=0),h+=o?c:u;for(r=0;r<e;r+=1)d+=h+"\n"}return d.substring(0,d.length-1)},m.renderTo2dContext=function(e,t){t=t||2;for(var i=m.getModuleCount(),n=0;n<i;n++)for(var r=0;r<i;r++)e.fillStyle=m.isDark(n,r)?"black":"white",e.fillRect(n*t,r*t,t,t)},m};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],i=0;i<e.length;i+=1){var n=e.charCodeAt(i);t.push(255&n)}return t}}).default,e.createStringToBytes=function(e,t){var i=function(){for(var i=m(e),n=function(){var e=i.read();if(-1==e)throw"eof";return e},r=0,o={};;){var a=i.read();if(-1==a)break;var s=n(),l=n()<<8|n();o[String.fromCharCode(a<<8|s)]=l,r+=1}if(r!=t)throw r+" != "+t;return o}(),n="?".charCodeAt(0);return function(e){for(var t=[],r=0;r<e.length;r+=1){var o=e.charCodeAt(r);if(o<128)t.push(o);else{var a=i[e.charAt(r)];"number"==typeof a?(255&a)==a?t.push(a):(t.push(a>>>8),t.push(255&a)):t.push(n)}}return t}};var t,i,n,r,o,a={L:1,M:0,Q:3,H:2},s=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=1335,n=7973,o=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(r={}).getBCHTypeInfo=function(e){for(var t=e<<10;o(t)-o(i)>=0;)t^=i<<o(t)-o(i);return 21522^(e<<10|t)},r.getBCHTypeNumber=function(e){for(var t=e<<12;o(t)-o(n)>=0;)t^=n<<o(t)-o(n);return e<<12|t},r.getPatternPosition=function(e){return t[e-1]},r.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},r.getErrorCorrectPolynomial=function(e){for(var t=c([1],0),i=0;i<e;i+=1)t=t.multiply(c([1,l.gexp(i)],0));return t},r.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+e}}},r.getLostPoint=function(e){for(var t=e.getModuleCount(),i=0,n=0;n<t;n+=1)for(var r=0;r<t;r+=1){for(var o=0,a=e.isDark(n,r),s=-1;s<=1;s+=1)if(!(n+s<0||t<=n+s))for(var l=-1;l<=1;l+=1)r+l<0||t<=r+l||0==s&&0==l||a==e.isDark(n+s,r+l)&&(o+=1);o>5&&(i+=3+o-5)}for(n=0;n<t-1;n+=1)for(r=0;r<t-1;r+=1){var c=0;e.isDark(n,r)&&(c+=1),e.isDark(n+1,r)&&(c+=1),e.isDark(n,r+1)&&(c+=1),e.isDark(n+1,r+1)&&(c+=1),0!=c&&4!=c||(i+=3)}for(n=0;n<t;n+=1)for(r=0;r<t-6;r+=1)e.isDark(n,r)&&!e.isDark(n,r+1)&&e.isDark(n,r+2)&&e.isDark(n,r+3)&&e.isDark(n,r+4)&&!e.isDark(n,r+5)&&e.isDark(n,r+6)&&(i+=40);for(r=0;r<t;r+=1)for(n=0;n<t-6;n+=1)e.isDark(n,r)&&!e.isDark(n+1,r)&&e.isDark(n+2,r)&&e.isDark(n+3,r)&&e.isDark(n+4,r)&&!e.isDark(n+5,r)&&e.isDark(n+6,r)&&(i+=40);var u=0;for(r=0;r<t;r+=1)for(n=0;n<t;n+=1)e.isDark(n,r)&&(u+=1);return i+Math.abs(100*u/t/t-50)/5*10},r),l=function(){for(var e=new Array(256),t=new Array(256),i=0;i<8;i+=1)e[i]=1<<i;for(i=8;i<256;i+=1)e[i]=e[i-4]^e[i-5]^e[i-6]^e[i-8];for(i=0;i<255;i+=1)t[e[i]]=i;return{glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}}}();function c(e,t){if(void 0===e.length)throw e.length+"/"+t;var i=function(){for(var i=0;i<e.length&&0==e[i];)i+=1;for(var n=new Array(e.length-i+t),r=0;r<e.length-i;r+=1)n[r]=e[r+i];return n}(),n={getAt:function(e){return i[e]},getLength:function(){return i.length},multiply:function(e){for(var t=new Array(n.getLength()+e.getLength()-1),i=0;i<n.getLength();i+=1)for(var r=0;r<e.getLength();r+=1)t[i+r]^=l.gexp(l.glog(n.getAt(i))+l.glog(e.getAt(r)));return c(t,0)},mod:function(e){if(n.getLength()-e.getLength()<0)return n;for(var t=l.glog(n.getAt(0))-l.glog(e.getAt(0)),i=new Array(n.getLength()),r=0;r<n.getLength();r+=1)i[r]=n.getAt(r);for(r=0;r<e.getLength();r+=1)i[r]^=l.gexp(l.glog(e.getAt(r))+t);return c(i,0).mod(e)}};return n}var u=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var i={};return i.totalCount=e,i.dataCount=t,i},i={getRSBlocks:function(i,n){var r=function(t,i){switch(i){case a.L:return e[4*(t-1)+0];case a.M:return e[4*(t-1)+1];case a.Q:return e[4*(t-1)+2];case a.H:return e[4*(t-1)+3];default:return}}(i,n);if(void 0===r)throw"bad rs block @ typeNumber:"+i+"/errorCorrectionLevel:"+n;for(var o=r.length/3,s=[],l=0;l<o;l+=1)for(var c=r[3*l+0],u=r[3*l+1],d=r[3*l+2],h=0;h<c;h+=1)s.push(t(u,d));return s}};return i}(),d=function(){var e=[],t=0,i={getBuffer:function(){return e},getAt:function(t){var i=Math.floor(t/8);return 1==(e[i]>>>7-t%8&1)},put:function(e,t){for(var n=0;n<t;n+=1)i.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return t},putBit:function(i){var n=Math.floor(t/8);e.length<=n&&e.push(0),i&&(e[n]|=128>>>t%8),t+=1}};return i},h=function(e){var t=e,i={getMode:function(){return 1},getLength:function(e){return t.length},write:function(e){for(var i=t,r=0;r+2<i.length;)e.put(n(i.substring(r,r+3)),10),r+=3;r<i.length&&(i.length-r==1?e.put(n(i.substring(r,r+1)),4):i.length-r==2&&e.put(n(i.substring(r,r+2)),7))}},n=function(e){for(var t=0,i=0;i<e.length;i+=1)t=10*t+r(e.charAt(i));return t},r=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return i},p=function(e){var t=e,i={getMode:function(){return 2},getLength:function(e){return t.length},write:function(e){for(var i=t,r=0;r+1<i.length;)e.put(45*n(i.charAt(r))+n(i.charAt(r+1)),11),r+=2;r<i.length&&e.put(n(i.charAt(r)),6)}},n=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return i},f=function(t){var i=e.stringToBytes(t);return{getMode:function(){return 4},getLength:function(e){return i.length},write:function(e){for(var t=0;t<i.length;t+=1)e.put(i[t],8)}}},g=function(t){var i=e.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(){var e=i("");if(2!=e.length||38726!=(e[0]<<8|e[1]))throw"sjis not supported."}();var n=i(t);return{getMode:function(){return 8},getLength:function(e){return~~(n.length/2)},write:function(e){for(var t=n,i=0;i+1<t.length;){var r=(255&t[i])<<8|255&t[i+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(i+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13),i+=2}if(i<t.length)throw"illegal char at "+(i+1)}}},v=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,i,n){i=i||0,n=n||e.length;for(var r=0;r<n;r+=1)t.writeByte(e[r+i])},writeString:function(e){for(var i=0;i<e.length;i+=1)t.writeByte(e.charCodeAt(i))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var i=0;i<e.length;i+=1)i>0&&(t+=","),t+=e[i];return t+"]"}};return t},m=function(e){var t=e,i=0,n=0,r=0,o={read:function(){for(;r<8;){if(i>=t.length){if(0==r)return-1;throw"unexpected end of file./"+r}var e=t.charAt(i);if(i+=1,"="==e)return r=0,-1;e.match(/^\s$/)||(n=n<<6|a(e.charCodeAt(0)),r+=6)}var o=n>>>r-8&255;return r-=8,o}},a=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return o},A=function(e,t,i){for(var n=function(e,t){var i=e,n=t,r=new Array(e*t),o={setPixel:function(e,t,n){r[t*i+e]=n},write:function(e){e.writeString("GIF87a"),e.writeShort(i),e.writeShort(n),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(i),e.writeShort(n),e.writeByte(0);var t=a(2);e.writeByte(2);for(var r=0;t.length-r>255;)e.writeByte(255),e.writeBytes(t,r,255),r+=255;e.writeByte(t.length-r),e.writeBytes(t,r,t.length-r),e.writeByte(0),e.writeString(";")}},a=function(e){for(var t=1<<e,i=1+(1<<e),n=e+1,o=s(),a=0;a<t;a+=1)o.add(String.fromCharCode(a));o.add(String.fromCharCode(t)),o.add(String.fromCharCode(i));var l,c,u,d=v(),h=(l=d,c=0,u=0,{write:function(e,t){if(e>>>t!=0)throw"length over";for(;c+t>=8;)l.writeByte(255&(e<<c|u)),t-=8-c,e>>>=8-c,u=0,c=0;u|=e<<c,c+=t},flush:function(){c>0&&l.writeByte(u)}});h.write(t,n);var p=0,f=String.fromCharCode(r[p]);for(p+=1;p<r.length;){var g=String.fromCharCode(r[p]);p+=1,o.contains(f+g)?f+=g:(h.write(o.indexOf(f),n),o.size()<4095&&(o.size()==1<<n&&(n+=1),o.add(f+g)),f=g)}return h.write(o.indexOf(f),n),h.write(i,n),h.flush(),d.toByteArray()},s=function(){var e={},t=0,i={add:function(n){if(i.contains(n))throw"dup key:"+n;e[n]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return i};return o}(e,t),r=0;r<t;r+=1)for(var o=0;o<e;o+=1)n.setPixel(o,r,i(o,r));var a=v();n.write(a);for(var s=function(){var e=0,t=0,i=0,n="",r={},o=function(e){n+=String.fromCharCode(a(63&e))},a=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return r.writeByte=function(n){for(e=e<<8|255&n,t+=8,i+=1;t>=6;)o(e>>>t-6),t-=6},r.flush=function(){if(t>0&&(o(e<<6-t),e=0,t=0),i%3!=0)for(var r=3-i%3,a=0;a<r;a+=1)n+="="},r.toString=function(){return n},r}(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return e}();r.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&e.charCodeAt(i)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(e)},void 0===(n="function"==typeof(i=function(){return r})?i.apply(t,[]):i)||(e.exports=n)},676:(e,t,i)=>{i.d(t,{default:()=>M});var n=function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,r++)n[r]=o[a];return n},o=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)};function a(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!t.length)return e;var s=t.shift();return void 0!==s&&o(e)&&o(s)?(e=n({},e),Object.keys(s).forEach((function(t){var i=e[t],n=s[t];Array.isArray(i)&&Array.isArray(n)?e[t]=n:o(i)&&o(n)?e[t]=a(Object.assign({},i),n):e[t]=n})),a.apply(void 0,r([e],t))):e}function s(e,t){var i=document.createElement("a");i.download=t,i.href=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function l(e){return t=this,i=void 0,r=function(){return function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){return[2,new Promise((function(t){var i=new XMLHttpRequest;i.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(i.response)},i.open("GET",e),i.responseType="blob",i.send()}))]}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(a,s)}l((r=r.apply(t,i||[])).next())}));var t,i,n,r}const c={L:.07,M:.15,Q:.25,H:.3};var u=function(){return(u=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const d=function(){function e(e){var t=e.svg,i=e.type;this._svg=t,this._type=i}return e.prototype.draw=function(e,t,i,n){var r;switch(this._type){case"dots":r=this._drawDot;break;case"classy":r=this._drawClassy;break;case"classy-rounded":r=this._drawClassyRounded;break;case"rounded":r=this._drawRounded;break;case"extra-rounded":r=this._drawExtraRounded;break;default:r=this._drawSquare}r.call(this,{x:e,y:t,size:i,getNeighbor:n})},e.prototype._rotateFigure=function(e){var t,i=e.x,n=e.y,r=e.size,o=e.rotation,a=void 0===o?0:o,s=i+r/2,l=n+r/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*a/Math.PI+","+s+","+l+")")},e.prototype._basicDot=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(u(u({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),t._element.setAttribute("cx",String(n+i/2)),t._element.setAttribute("cy",String(r+i/2)),t._element.setAttribute("r",String(i/2))}}))},e.prototype._basicSquare=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(u(u({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),t._element.setAttribute("x",String(n)),t._element.setAttribute("y",String(r)),t._element.setAttribute("width",String(i)),t._element.setAttribute("height",String(i))}}))},e.prototype._basicSideRounded=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(u(u({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+r+"v "+i+"h "+i/2+"a "+i/2+" "+i/2+", 0, 0, 0, 0 "+-i)}}))},e.prototype._basicCornerRounded=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(u(u({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+r+"v "+i+"h "+i+"v "+-i/2+"a "+i/2+" "+i/2+", 0, 0, 0, "+-i/2+" "+-i/2)}}))},e.prototype._basicCornerExtraRounded=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(u(u({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+r+"v "+i+"h "+i+"a "+i+" "+i+", 0, 0, 0, "+-i+" "+-i)}}))},e.prototype._basicCornersRounded=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(u(u({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+r+"v "+i/2+"a "+i/2+" "+i/2+", 0, 0, 0, "+i/2+" "+i/2+"h "+i/2+"v "+-i/2+"a "+i/2+" "+i/2+", 0, 0, 0, "+-i/2+" "+-i/2)}}))},e.prototype._drawDot=function(e){var t=e.x,i=e.y,n=e.size;this._basicDot({x:t,y:i,size:n,rotation:0})},e.prototype._drawSquare=function(e){var t=e.x,i=e.y,n=e.size;this._basicSquare({x:t,y:i,size:n,rotation:0})},e.prototype._drawRounded=function(e){var t=e.x,i=e.y,n=e.size,r=e.getNeighbor,o=r?+r(-1,0):0,a=r?+r(1,0):0,s=r?+r(0,-1):0,l=r?+r(0,1):0,c=o+a+s+l;if(0!==c)if(c>2||o&&a||s&&l)this._basicSquare({x:t,y:i,size:n,rotation:0});else{if(2===c){var u=0;return o&&s?u=Math.PI/2:s&&a?u=Math.PI:a&&l&&(u=-Math.PI/2),void this._basicCornerRounded({x:t,y:i,size:n,rotation:u})}if(1===c)return u=0,s?u=Math.PI/2:a?u=Math.PI:l&&(u=-Math.PI/2),void this._basicSideRounded({x:t,y:i,size:n,rotation:u})}else this._basicDot({x:t,y:i,size:n,rotation:0})},e.prototype._drawExtraRounded=function(e){var t=e.x,i=e.y,n=e.size,r=e.getNeighbor,o=r?+r(-1,0):0,a=r?+r(1,0):0,s=r?+r(0,-1):0,l=r?+r(0,1):0,c=o+a+s+l;if(0!==c)if(c>2||o&&a||s&&l)this._basicSquare({x:t,y:i,size:n,rotation:0});else{if(2===c){var u=0;return o&&s?u=Math.PI/2:s&&a?u=Math.PI:a&&l&&(u=-Math.PI/2),void this._basicCornerExtraRounded({x:t,y:i,size:n,rotation:u})}if(1===c)return u=0,s?u=Math.PI/2:a?u=Math.PI:l&&(u=-Math.PI/2),void this._basicSideRounded({x:t,y:i,size:n,rotation:u})}else this._basicDot({x:t,y:i,size:n,rotation:0})},e.prototype._drawClassy=function(e){var t=e.x,i=e.y,n=e.size,r=e.getNeighbor,o=r?+r(-1,0):0,a=r?+r(1,0):0,s=r?+r(0,-1):0,l=r?+r(0,1):0;0!==o+a+s+l?o||s?a||l?this._basicSquare({x:t,y:i,size:n,rotation:0}):this._basicCornerRounded({x:t,y:i,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:t,y:i,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:i,size:n,rotation:Math.PI/2})},e.prototype._drawClassyRounded=function(e){var t=e.x,i=e.y,n=e.size,r=e.getNeighbor,o=r?+r(-1,0):0,a=r?+r(1,0):0,s=r?+r(0,-1):0,l=r?+r(0,1):0;0!==o+a+s+l?o||s?a||l?this._basicSquare({x:t,y:i,size:n,rotation:0}):this._basicCornerExtraRounded({x:t,y:i,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:t,y:i,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:i,size:n,rotation:Math.PI/2})},e}();var h=function(){return(h=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const p=function(){function e(e){var t=e.svg,i=e.type;this._svg=t,this._type=i}return e.prototype.draw=function(e,t,i,n){var r;switch(this._type){case"square":r=this._drawSquare;break;case"extra-rounded":r=this._drawExtraRounded;break;default:r=this._drawDot}r.call(this,{x:e,y:t,size:i,rotation:n})},e.prototype._rotateFigure=function(e){var t,i=e.x,n=e.y,r=e.size,o=e.rotation,a=void 0===o?0:o,s=i+r/2,l=n+r/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*a/Math.PI+","+s+","+l+")")},e.prototype._basicDot=function(e){var t=this,i=e.size,n=e.x,r=e.y,o=i/7;this._rotateFigure(h(h({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M "+(n+i/2)+" "+r+"a "+i/2+" "+i/2+" 0 1 0 0.1 0zm 0 "+o+"a "+(i/2-o)+" "+(i/2-o)+" 0 1 1 -0.1 0Z")}}))},e.prototype._basicSquare=function(e){var t=this,i=e.size,n=e.x,r=e.y,o=i/7;this._rotateFigure(h(h({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M "+n+" "+r+"v "+i+"h "+i+"v "+-i+"zM "+(n+o)+" "+(r+o)+"h "+(i-2*o)+"v "+(i-2*o)+"h "+(2*o-i)+"z")}}))},e.prototype._basicExtraRounded=function(e){var t=this,i=e.size,n=e.x,r=e.y,o=i/7;this._rotateFigure(h(h({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M "+n+" "+(r+2.5*o)+"v "+2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*o+" "+2.5*o+"h "+2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*o+" "+2.5*-o+"v "+-2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*-o+" "+2.5*-o+"h "+-2*o+"a "+2.5*o+" "+2.5*o+", 0, 0, 0, "+2.5*-o+" "+2.5*o+"M "+(n+2.5*o)+" "+(r+o)+"h "+2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*o+" "+1.5*o+"v "+2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*-o+" "+1.5*o+"h "+-2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*-o+" "+1.5*-o+"v "+-2*o+"a "+1.5*o+" "+1.5*o+", 0, 0, 1, "+1.5*o+" "+1.5*-o)}}))},e.prototype._drawDot=function(e){var t=e.x,i=e.y,n=e.size,r=e.rotation;this._basicDot({x:t,y:i,size:n,rotation:r})},e.prototype._drawSquare=function(e){var t=e.x,i=e.y,n=e.size,r=e.rotation;this._basicSquare({x:t,y:i,size:n,rotation:r})},e.prototype._drawExtraRounded=function(e){var t=e.x,i=e.y,n=e.size,r=e.rotation;this._basicExtraRounded({x:t,y:i,size:n,rotation:r})},e}();var f=function(){return(f=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const g=function(){function e(e){var t=e.svg,i=e.type;this._svg=t,this._type=i}return e.prototype.draw=function(e,t,i,n){("square"===this._type?this._drawSquare:this._drawDot).call(this,{x:e,y:t,size:i,rotation:n})},e.prototype._rotateFigure=function(e){var t,i=e.x,n=e.y,r=e.size,o=e.rotation,a=void 0===o?0:o,s=i+r/2,l=n+r/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*a/Math.PI+","+s+","+l+")")},e.prototype._basicDot=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(f(f({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),t._element.setAttribute("cx",String(n+i/2)),t._element.setAttribute("cy",String(r+i/2)),t._element.setAttribute("r",String(i/2))}}))},e.prototype._basicSquare=function(e){var t=this,i=e.size,n=e.x,r=e.y;this._rotateFigure(f(f({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),t._element.setAttribute("x",String(n)),t._element.setAttribute("y",String(r)),t._element.setAttribute("width",String(i)),t._element.setAttribute("height",String(i))}}))},e.prototype._drawDot=function(e){var t=e.x,i=e.y,n=e.size,r=e.rotation;this._basicDot({x:t,y:i,size:n,rotation:r})},e.prototype._drawSquare=function(e){var t=e.x,i=e.y,n=e.size,r=e.rotation;this._basicSquare({x:t,y:i,size:n,rotation:r})},e}(),v="circle";var m=function(e,t,i,n){return new(i||(i=Promise))((function(t,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function a(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}s((n=n.apply(e,[])).next())}))},A=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},b=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],y=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const x=function(){function e(e){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(e.width)),this._element.setAttribute("height",String(e.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=e}return Object.defineProperty(e.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),e.prototype.getElement=function(){return this._element},e.prototype.drawQR=function(e){return m(this,void 0,void 0,(function(){var t,i,n,r,o,a,s,l,u,d,h=this;return A(this,(function(p){switch(p.label){case 0:return t=e.getModuleCount(),i=Math.min(this._options.width,this._options.height)-2*this._options.margin,n=this._options.shape===v?i/Math.sqrt(2):i,r=Math.floor(n/t),o={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=e,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(p.sent(),!this._image)return[2];a=this._options,s=a.imageOptions,l=a.qrOptions,u=s.imageSize*c[l.errorCorrectionLevel],d=Math.floor(u*t*t),o=function(e){var t=e.originalHeight,i=e.originalWidth,n=e.maxHiddenDots,r=e.maxHiddenAxisDots,o=e.dotSize,a={x:0,y:0},s={x:0,y:0};if(t<=0||i<=0||n<=0||o<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var l=t/i;return a.x=Math.floor(Math.sqrt(n/l)),a.x<=0&&(a.x=1),r&&r<a.x&&(a.x=r),a.x%2==0&&a.x--,s.x=a.x*o,a.y=1+2*Math.ceil((a.x*l-1)/2),s.y=Math.round(s.x*l),(a.y*a.x>n||r&&r<a.y)&&(r&&r<a.y?(a.y=r,a.y%2==0&&a.x--):a.y-=2,s.y=a.y*o,a.x=1+2*Math.ceil((a.y/l-1)/2),s.x=Math.round(s.y/l)),{height:s.y,width:s.x,hideYDots:a.y,hideXDots:a.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:d,maxHiddenAxisDots:t-14,dotSize:r}),p.label=2;case 2:return this.drawBackground(),this.drawDots((function(e,i){var n,r,a,s,l,c;return!(h._options.imageOptions.hideBackgroundDots&&e>=(t-o.hideXDots)/2&&e<(t+o.hideXDots)/2&&i>=(t-o.hideYDots)/2&&i<(t+o.hideYDots)/2||(null===(n=b[e])||void 0===n?void 0:n[i])||(null===(r=b[e-t+7])||void 0===r?void 0:r[i])||(null===(a=b[e])||void 0===a?void 0:a[i-t+7])||(null===(s=y[e])||void 0===s?void 0:s[i])||(null===(l=y[e-t+7])||void 0===l?void 0:l[i])||(null===(c=y[e])||void 0===c?void 0:c[i-t+7]))})),this.drawCorners(),this._options.image?[4,this.drawImage({width:o.width,height:o.height,count:t,dotSize:r})]:[3,4];case 3:p.sent(),p.label=4;case 4:return[2]}}))}))},e.prototype.drawBackground=function(){var e,t,i,n=this._element,r=this._options;if(n){var o=null===(e=r.backgroundOptions)||void 0===e?void 0:e.gradient,a=null===(t=r.backgroundOptions)||void 0===t?void 0:t.color;if((o||a)&&this._createColor({options:o,color:a,additionalRotation:0,x:0,y:0,height:r.height,width:r.width,name:"background-color"}),null===(i=r.backgroundOptions)||void 0===i?void 0:i.round){var s=Math.min(r.width,r.height),l=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),l.setAttribute("x",String((r.width-s)/2)),l.setAttribute("y",String((r.height-s)/2)),l.setAttribute("width",String(s)),l.setAttribute("height",String(s)),l.setAttribute("rx",String(s/2*r.backgroundOptions.round)),this._backgroundClipPath.appendChild(l)}}},e.prototype.drawDots=function(e){var t,i,n=this;if(!this._qr)throw"QR code is not defined";var r=this._options,o=this._qr.getModuleCount();if(o>r.width||o>r.height)throw"The canvas is too small.";var a=Math.min(r.width,r.height)-2*r.margin,s=r.shape===v?a/Math.sqrt(2):a,l=Math.floor(s/o),c=Math.floor((r.width-o*l)/2),u=Math.floor((r.height-o*l)/2),h=new d({svg:this._element,type:r.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(t=r.dotsOptions)||void 0===t?void 0:t.gradient,color:r.dotsOptions.color,additionalRotation:0,x:0,y:0,height:r.height,width:r.width,name:"dot-color"});for(var p=function(t){for(var r=function(r){return e&&!e(t,r)?"continue":(null===(i=f._qr)||void 0===i?void 0:i.isDark(t,r))?(h.draw(c+t*l,u+r*l,l,(function(i,a){return!(t+i<0||r+a<0||t+i>=o||r+a>=o)&&!(e&&!e(t+i,r+a))&&!!n._qr&&n._qr.isDark(t+i,r+a)})),void(h._element&&f._dotsClipPath&&f._dotsClipPath.appendChild(h._element))):"continue"},a=0;a<o;a++)r(a)},f=this,g=0;g<o;g++)p(g);if(r.shape===v){var m=Math.floor((a/l-o)/2),A=o+2*m,b=c-m*l,y=u-m*l,x=[],w=Math.floor(A/2);for(g=0;g<A;g++){x[g]=[];for(var _=0;_<A;_++)g>=m-1&&g<=A-m&&_>=m-1&&_<=A-m||Math.sqrt((g-w)*(g-w)+(_-w)*(_-w))>w?x[g][_]=0:x[g][_]=this._qr.isDark(_-2*m<0?_:_>=o?_-2*m:_-m,g-2*m<0?g:g>=o?g-2*m:g-m)?1:0}var C=function(e){for(var t=function(t){if(!x[e][t])return"continue";h.draw(b+e*l,y+t*l,l,(function(i,n){var r;return!!(null===(r=x[e+i])||void 0===r?void 0:r[t+n])})),h._element&&k._dotsClipPath&&k._dotsClipPath.appendChild(h._element)},i=0;i<A;i++)t(i)},k=this;for(g=0;g<A;g++)C(g)}},e.prototype.drawCorners=function(){var e=this;if(!this._qr)throw"QR code is not defined";var t=this._element,i=this._options;if(!t)throw"Element code is not defined";var n=this._qr.getModuleCount(),r=Math.min(i.width,i.height)-2*i.margin,o=i.shape===v?r/Math.sqrt(2):r,a=Math.floor(o/n),s=7*a,l=3*a,c=Math.floor((i.width-n*a)/2),u=Math.floor((i.height-n*a)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(t){var r,o,h,f,v,m,A,x,w,_,C,k,E=t[0],S=t[1],I=t[2],B=c+E*a*(n-7),O=u+S*a*(n-7),T=e._dotsClipPath,D=e._dotsClipPath;if(((null===(r=i.cornersSquareOptions)||void 0===r?void 0:r.gradient)||(null===(o=i.cornersSquareOptions)||void 0===o?void 0:o.color))&&((T=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+E+"-"+S),e._defs.appendChild(T),e._cornersSquareClipPath=e._cornersDotClipPath=D=T,e._createColor({options:null===(h=i.cornersSquareOptions)||void 0===h?void 0:h.gradient,color:null===(f=i.cornersSquareOptions)||void 0===f?void 0:f.color,additionalRotation:I,x:B,y:O,height:s,width:s,name:"corners-square-color-"+E+"-"+S})),null===(v=i.cornersSquareOptions)||void 0===v?void 0:v.type){var M=new p({svg:e._element,type:i.cornersSquareOptions.type});M.draw(B,O,s,I),M._element&&T&&T.appendChild(M._element)}else for(var Q=new d({svg:e._element,type:i.dotsOptions.type}),L=function(e){for(var t=function(t){if(!(null===(m=b[e])||void 0===m?void 0:m[t]))return"continue";Q.draw(B+e*a,O+t*a,a,(function(i,n){var r;return!!(null===(r=b[e+i])||void 0===r?void 0:r[t+n])})),Q._element&&T&&T.appendChild(Q._element)},i=0;i<b[e].length;i++)t(i)},j=0;j<b.length;j++)L(j);if(((null===(A=i.cornersDotOptions)||void 0===A?void 0:A.gradient)||(null===(x=i.cornersDotOptions)||void 0===x?void 0:x.color))&&((D=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+E+"-"+S),e._defs.appendChild(D),e._cornersDotClipPath=D,e._createColor({options:null===(w=i.cornersDotOptions)||void 0===w?void 0:w.gradient,color:null===(_=i.cornersDotOptions)||void 0===_?void 0:_.color,additionalRotation:I,x:B+2*a,y:O+2*a,height:l,width:l,name:"corners-dot-color-"+E+"-"+S})),null===(C=i.cornersDotOptions)||void 0===C?void 0:C.type){var P=new g({svg:e._element,type:i.cornersDotOptions.type});P.draw(B+2*a,O+2*a,l,I),P._element&&D&&D.appendChild(P._element)}else{Q=new d({svg:e._element,type:i.dotsOptions.type});var F=function(e){for(var t=function(t){if(!(null===(k=y[e])||void 0===k?void 0:k[t]))return"continue";Q.draw(B+e*a,O+t*a,a,(function(i,n){var r;return!!(null===(r=y[e+i])||void 0===r?void 0:r[t+n])})),Q._element&&D&&D.appendChild(Q._element)},i=0;i<y[e].length;i++)t(i)};for(j=0;j<y.length;j++)F(j)}}))},e.prototype.loadImage=function(){var e=this;return new Promise((function(t,i){var n=e._options,r=new Image;if(!n.image)return i("Image is not defined");"string"==typeof n.imageOptions.crossOrigin&&(r.crossOrigin=n.imageOptions.crossOrigin),e._image=r,r.onload=function(){t()},r.src=n.image}))},e.prototype.drawImage=function(e){var t=e.width,i=e.height,n=e.count,r=e.dotSize;return m(this,void 0,void 0,(function(){var e,o,a,s,c,u,d,h,p;return A(this,(function(f){switch(f.label){case 0:return e=this._options,o=Math.floor((e.width-n*r)/2),a=Math.floor((e.height-n*r)/2),s=o+e.imageOptions.margin+(n*r-t)/2,c=a+e.imageOptions.margin+(n*r-i)/2,u=t-2*e.imageOptions.margin,d=i-2*e.imageOptions.margin,(h=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(s)),h.setAttribute("y",String(c)),h.setAttribute("width",u+"px"),h.setAttribute("height",d+"px"),[4,l(e.image||"")];case 1:return p=f.sent(),h.setAttribute("href",p||""),this._element.appendChild(h),[2]}}))}))},e.prototype._createColor=function(e){var t=e.options,i=e.color,n=e.additionalRotation,r=e.x,o=e.y,a=e.height,s=e.width,l=e.name,c=s>a?s:a,u=document.createElementNS("http://www.w3.org/2000/svg","rect");if(u.setAttribute("x",String(r)),u.setAttribute("y",String(o)),u.setAttribute("height",String(a)),u.setAttribute("width",String(s)),u.setAttribute("clip-path","url('#clip-path-"+l+"')"),t){var d;if("radial"===t.type)(d=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",l),d.setAttribute("gradientUnits","userSpaceOnUse"),d.setAttribute("fx",String(r+s/2)),d.setAttribute("fy",String(o+a/2)),d.setAttribute("cx",String(r+s/2)),d.setAttribute("cy",String(o+a/2)),d.setAttribute("r",String(c/2));else{var h=((t.rotation||0)+n)%(2*Math.PI),p=(h+2*Math.PI)%(2*Math.PI),f=r+s/2,g=o+a/2,v=r+s/2,m=o+a/2;p>=0&&p<=.25*Math.PI||p>1.75*Math.PI&&p<=2*Math.PI?(f-=s/2,g-=a/2*Math.tan(h),v+=s/2,m+=a/2*Math.tan(h)):p>.25*Math.PI&&p<=.75*Math.PI?(g-=a/2,f-=s/2/Math.tan(h),m+=a/2,v+=s/2/Math.tan(h)):p>.75*Math.PI&&p<=1.25*Math.PI?(f+=s/2,g+=a/2*Math.tan(h),v-=s/2,m-=a/2*Math.tan(h)):p>1.25*Math.PI&&p<=1.75*Math.PI&&(g+=a/2,f+=s/2/Math.tan(h),m-=a/2,v-=s/2/Math.tan(h)),(d=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",l),d.setAttribute("gradientUnits","userSpaceOnUse"),d.setAttribute("x1",String(Math.round(f))),d.setAttribute("y1",String(Math.round(g))),d.setAttribute("x2",String(Math.round(v))),d.setAttribute("y2",String(Math.round(m)))}t.colorStops.forEach((function(e){var t=e.offset,i=e.color,n=document.createElementNS("http://www.w3.org/2000/svg","stop");n.setAttribute("offset",100*t+"%"),n.setAttribute("stop-color",i),d.appendChild(n)})),u.setAttribute("fill","url('#"+l+"')"),this._defs.appendChild(d)}else i&&u.setAttribute("fill",i);this._element.appendChild(u)},e}(),w="canvas";for(var _={},C=0;C<=40;C++)_[C]=C;const k={type:w,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:_[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var E=function(){return(E=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function S(e){var t=E({},e);if(!t.colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation?t.rotation=Number(t.rotation):t.rotation=0,t.colorStops=t.colorStops.map((function(e){return E(E({},e),{offset:Number(e.offset)})})),t}function I(e){var t=E({},e);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=E(E({},t.imageOptions),{hideBackgroundDots:Boolean(t.imageOptions.hideBackgroundDots),imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=E({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=S(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=E({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=S(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=E({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=S(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=E({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=S(t.backgroundOptions.gradient))),t}var B=i(192),O=i.n(B),T=function(e,t,i,n){return new(i||(i=Promise))((function(t,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function a(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}s((n=n.apply(e,[])).next())}))},D=function(e,t){var i,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};const M=function(){function e(e){this._options=e?I(a(k,e)):k,this.update()}return e._clearContainer=function(e){e&&(e.innerHTML="")},e.prototype._setupSvg=function(){var e=this;if(this._qr){var t=new x(this._options);this._svg=t.getElement(),this._svgDrawingPromise=t.drawQR(this._qr).then((function(){var i;e._svg&&(null===(i=e._extension)||void 0===i||i.call(e,t.getElement(),e._options))}))}},e.prototype._setupCanvas=function(){var e,t=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=null===(e=this._svgDrawingPromise)||void 0===e?void 0:e.then((function(){if(t._svg){var e=t._svg,i=(new XMLSerializer).serializeToString(e),n="data:image/svg+xml;base64,"+btoa(i),r=new Image;return new Promise((function(e){r.onload=function(){var i,n;null===(n=null===(i=t._canvas)||void 0===i?void 0:i.getContext("2d"))||void 0===n||n.drawImage(r,0,0),e()},r.src=n}))}})))},e.prototype._getElement=function(e){return void 0===e&&(e="png"),T(this,void 0,void 0,(function(){return D(this,(function(t){switch(t.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==e.toLowerCase()?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return t.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return t.sent(),[2,this._canvas]}}))}))},e.prototype.update=function(t){e._clearContainer(this._container),this._options=t?I(a(this._options,t)):this._options,this._options.data&&(this._qr=O()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(e){switch(!0){case/^[0-9]*$/.test(e):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(e):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===w?this._setupCanvas():this._setupSvg(),this.append(this._container))},e.prototype.append=function(e){if(e){if("function"!=typeof e.appendChild)throw"Container should be a single DOM node";this._options.type===w?this._canvas&&e.appendChild(this._canvas):this._svg&&e.appendChild(this._svg),this._container=e}},e.prototype.applyExtension=function(e){if(!e)throw"Extension function should be defined.";this._extension=e,this.update()},e.prototype.deleteExtension=function(){this._extension=void 0,this.update()},e.prototype.getRawData=function(e){return void 0===e&&(e="png"),T(this,void 0,void 0,(function(){var t,i,n;return D(this,(function(r){switch(r.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(e)];case 1:return(t=r.sent())?"svg"===e.toLowerCase()?(i=new XMLSerializer,n=i.serializeToString(t),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+n],{type:"image/svg+xml"})]):[2,new Promise((function(i){return t.toBlob(i,"image/"+e,1)}))]:[2,null]}}))}))},e.prototype.download=function(e){return T(this,void 0,void 0,(function(){var t,i,n,r,o;return D(this,(function(a){switch(a.label){case 0:if(!this._qr)throw"QR code is empty";return t="png",i="qr","string"==typeof e?t=e:"object"==typeof e&&null!==e&&(e.name&&(i=e.name),e.extension&&(t=e.extension)),[4,this._getElement(t)];case 1:return(n=a.sent())?("svg"===t.toLowerCase()?(r=new XMLSerializer,o='<?xml version="1.0" standalone="no"?>\r\n'+(o=r.serializeToString(n)),s("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(o),i+".svg")):s(n.toDataURL("image/"+t),i+"."+t),[2]):[2]}}))}))},e}()}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}return i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(676)})().default}(wI);const _I=un(wI.exports);var CI=(e=>(e.rounded="rounded",e.dots="dots",e.classy="classy",e.classy_rounded="classy-rounded",e.square="square",e.extra_rounded="extra-rounded",e))(CI||{}),kI=(e=>(e.dot="dot",e.square="square",e.extra_rounded="extra-rounded",e))(kI||{}),EI=(e=>(e.dot="dot",e.square="square",e))(EI||{}),SI=(e=>(e.L="L",e.M="M",e.Q="Q",e.H="H",e))(SI||{});class II{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="QrCodePlugin";static apis=["addQrCode","setQrCode","getQrCodeTypes"];async hookTransform(e){if("qrcode"===e.extensionType){const t=this._paramsToOption(e.extension),i=await this._getBase64Str(t);e.src=i}}async _getBase64Str(e){const t=new _I(e),i=await t.getRawData("png");return i&&await lb(i)||""}_defaultBarcodeOption(){return{data:"https://kuaitu.cc",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"square",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}}_paramsToOption(e){return{width:e.width,height:e.width,type:"canvas",data:e.data,margin:e.margin,qrOptions:{errorCorrectionLevel:e.errorCorrectionLevel},dotsOptions:{color:e.dotsColor,type:e.dotsType},cornersSquareOptions:{color:e.cornersSquareColor,type:e.cornersSquareType},cornersDotOptions:{color:e.cornersDotColor,type:e.cornersDotType},backgroundOptions:{color:e.background}}}async addQrCode(){const e=this._defaultBarcodeOption(),t=this._paramsToOption(e),i=await this._getBase64Str(t);Tm.fabric.Image.fromURL(i,(t=>{t.set({extensionType:"qrcode",extension:e}),t.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(t),this.canvas.setActiveObject(t),this.editor.position("center")}),{crossOrigin:"anonymous"})}async setQrCode(e){try{const t=this._paramsToOption(e),i=await this._getBase64Str(t),n=this.canvas.getActiveObjects()[0];Tm.fabric.Image.fromURL(i,(t=>{t.set({left:n.left,top:n.top,extensionType:"qrcode",extension:{...e}}),t.scaleToWidth(n.getScaledWidth()),this.editor.del(),this.canvas.add(t),this.canvas.setActiveObject(t)}),{crossOrigin:"anonymous"})}catch(t){}}getQrCodeTypes(){return{DotsType:Object.values(CI),CornersType:Object.values(kI),cornersDotType:Object.values(EI),errorCorrectionLevelType:Object.values(SI)}}destroy(){}}class BI{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="ImageStroke";static apis=["imageStrokeDraw"];addImage(e){return new Promise(((t,i)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>t(n),n.onerror=()=>i(),n.src=e}))}async imageStrokeDraw(e,t,i="source-over"){const n=this.canvas.getActiveObject();if(!n)return;const r=n.originWidth||0,o=n.originHeight||0,a=n?.originSrc||n.getSrc();let s=document.createElement("canvas");const l=s.getContext("2d");if(!l)return;if(0===t)return void n.setSrc(a,(()=>{n.canvas?.renderAll()}));l.save(),l.clearRect(0,0,s.width,s.height),l.restore(),s.width=r+2*t,s.height=o+2*t;const c=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],u=await this.addImage(a);if(!u)return;for(let h=0;h<c.length;h+=2)l.drawImage(u,t+c[h]*t,t+c[h+1]*t,r,o);l.globalCompositeOperation="source-in",l.fillStyle=e,l.fillRect(0,0,r+2*t,o+2*t),l.globalCompositeOperation=i,l.drawImage(u,t,t,r,o);const d=s?.toDataURL();s=null,d&&n.setSrc(d,(()=>{n.canvas?.renderAll()}))}destroy(){}}class OI{constructor(e,t){this.canvas=e,this.editor=t,this._init(),this._initResizeObserve(),this._addListeners()}static pluginName="ResizePlugin";static events=[];static apis=[];workspaceEl;minSize={width:1,height:1};barOpts={bWidth:30,bHeight:6,bPadding:10};hasCreatedBar=!1;isDragging=!1;dragEl=null;startPoints={x:0,y:0};barOffset={x:0,y:0};wsOffset={left:0,top:0,width:0,height:0};_init(){const e=document.querySelector("#workspace");if(!e)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=e}_initResizeObserve(){new ResizeObserver(Z((()=>{this.renderBars()}),50)).observe(this.workspaceEl)}renderBars(){const e=this.canvas.viewportTransform,[t,,,i,n,r]=e||[],o=this.getWorkspase(),a=o.width*t,s=o.height*i,l=o.left*t,c=o.top*i,{bWidth:u,bHeight:d,bPadding:h}=this.barOpts;if(!e)return;const p=this._getBarFromType("left");p.style.left=n+l-d-h+"px",p.style.top=r+c+s/2-u/2+"px";const f=this._getBarFromType("right");f.style.left=`${n+l+a+h}px`,f.style.top=r+c+s/2-u/2+"px";const g=this._getBarFromType("top");g.style.left=n+l+a/2-u/2+"px",g.style.top=r+c-d-h+"px";const v=this._getBarFromType("bottom");v.style.left=n+l+a/2-u/2+"px",v.style.top=`${r+c+s+h}px`,this.hasCreatedBar||(this.hasCreatedBar=!0,this._watchDrag())}_getBarFromType(e){let t=document.querySelector(`#resize-${e}-bar`);return t||(t=document.createElement("div"),t.id=`resize-${e}-bar`,t.className="resize-bar",["left","right"].includes(e)?t.classList.add("horizontal"):t.classList.add("vertical"),this.workspaceEl.appendChild(t),t)}_watchDrag(){Array.from(document.getElementsByClassName("resize-bar")).forEach((e=>{e.addEventListener("mousedown",(t=>{this.isDragging=!0,this.dragEl=e,this.dragEl.classList.add("active"),this.startPoints={x:t.clientX,y:t.clientY},this.barOffset={x:e.offsetLeft,y:e.offsetTop};const i=this.getWorkspase(),{width:n,height:r,left:o,top:a}=i;this.wsOffset={width:n,height:r,left:o,top:a}}))})),document.addEventListener("mousemove",this.eventHandler.onDragging),document.addEventListener("mouseup",(()=>{this.isDragging&&this.dragEl&&(this.isDragging=!1,this.dragEl.classList.remove("active"),this.dragEl=null,this.canvas.defaultCursor="default")}))}onDragging(e){if(this.isDragging&&this.dragEl){const t=this.getWorkspase(),i=this.canvas.viewportTransform,[n,,,r]=i||[],o=e.clientX-this.startPoints.x,a=e.clientY-this.startPoints.y,s=o/n,l=a/r,c=this.dragEl.id.split("-")[1];let u=0;switch(c){case"left":u=Math.round(this.wsOffset.width-2*s),u>=this.minSize.width?(this.dragEl.style.left=`${this.barOffset.x+o}px`,t.set("left",this.wsOffset.left+2*s),t.set("width",u)):(t.set("left",this.wsOffset.left+this.wsOffset.width-this.minSize.width),t.set("width",this.minSize.width));break;case"right":u=Math.round(this.wsOffset.width+2*s),u>=this.minSize.width?(this.dragEl.style.left=`${this.barOffset.x+o}px`,t.set("width",u)):t.set("width",this.minSize.width);break;case"top":u=Math.round(this.wsOffset.height-2*l),u>=this.minSize.height?(this.dragEl.style.top=`${this.barOffset.y+a}px`,t.set("top",this.wsOffset.top+2*l),t.set("height",u)):(t.set("top",this.wsOffset.top+this.wsOffset.height-this.minSize.height),t.set("height",this.minSize.height));break;case"bottom":u=Math.round(this.wsOffset.height+2*l),u>=this.minSize.height?(this.dragEl.style.top=`${this.barOffset.y+a}px`,t.set("height",u)):t.set("height",this.minSize.height)}this.editor.setCenterFromObject(t),t.clone((e=>{this.canvas.clipPath=e,this.canvas.requestRenderAll()})),["left","right"].includes(c)?this.canvas.defaultCursor="ew-resize":this.canvas.defaultCursor="ns-resize",this.editor.emit("sizeChange",t.width,t.height)}}eventHandler=(()=>({render:Z(this.renderBars.bind(this),50),onDragging:Z(this.onDragging.bind(this),30)}))();_addListeners(){this.canvas.on("after:render",this.eventHandler.render)}getWorkspase(){return this.canvas.getObjects().find((e=>"workspace"===e.id))}destroy(){}}var TI=(e=>(e.lockMovementX="lockMovementX",e.lockMovementY="lockMovementY",e.lockRotation="lockRotation",e.lockScalingX="lockScalingX",e.lockScalingY="lockScalingY",e))(TI||{});class DI{constructor(e,t){this.canvas=e,this.editor=t}static pluginName="LockPlugin";static apis=["lock","unLock"];hookImportAfter(){return this.canvas.forEachObject((e=>{!1===e.hasControls&&!1===e.selectable&&(this.canvas.setActiveObject(e),this.lock())})),Promise.resolve()}lock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!1,e.selectable=!1,e.evented=!1,Object.values(TI).forEach((t=>{e[t]=!0})),this.canvas.discardActiveObject().renderAll())}unLock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!0,e.selectable=!0,e.evented=!0,Object.values(TI).forEach((t=>{e[t]=!1})),this.canvas.discardActiveObject().renderAll())}contextMenu(){const e=this.editor.getSelectMode(),t=this.canvas.getActiveObject();if(e===IA.ONE&&t)return t.selectable?[{text:"",hotkey:"",onclick:()=>this.lock()}]:[{text:"",hotkey:"",onclick:()=>this.unLock()}]}destroy(){}}class MI{constructor(e,t){this.canvas=e,this.editor=t,this.editor=t,this.canvas=e}static pluginName="AddBaseTypePlugin";static apis=["addBaseType","createImgByElement"];addBaseType(e,t){const{event:i=!1,scale:n=!1,center:r=!0}=t||{};e.set({id:SA()}),n&&this._toScale(e),i&&this._toEvent(e,i),this.canvas.add(e),!i&&r&&this._toCenter(e),this.canvas.setActiveObject(e),this.canvas.renderAll()}_toEvent(e,t){const{left:i,top:n}=this.canvas.getSelectionElement().getBoundingClientRect();if(t.x<i||t.y<n||void 0===e.width)return;const r={x:t.x-i,y:t.y-n},o=this.canvas.restorePointerVpt(r);e.set({left:o.x,top:o.y})}_toCenter(e){this.canvas.setActiveObject(e),this.editor.position("center")}_toScale(e){const{width:t}=this.editor.getWorkspase();e.scaleToWidth(t/2)}createImgByElement(e){return new Promise((t=>{"svg"===this.getImageExtension(e.src)?Tm.fabric.loadSVGFromURL(e.src,(e=>{const i=Tm.fabric.util.groupSVGElements(e,{shadow:"",fontFamily:"arial",name:"svg"});t(i)})):Tm.fabric.Image.fromURL(e.src,(e=>{t(e)}),{crossOrigin:"anonymous"})}))}getImageExtension(e){const t=e.split("/"),i=t[t.length-1].split(".");return i[i.length-1]}destroy(){}}Tm.fabric.Rect=Tm.fabric.util.createClass(Tm.fabric.Rect,{type:"rect",initialize:function(e){e||(e={}),this.callSuper("initialize",e)},_render(e){const t=this.roundValue||0;this.rx=1/this.scaleX*t,this.ry=1/this.scaleY*t,this.callSuper("_render",e)}}),Tm.fabric.Rect.fromObject=function(e,t){return Tm.fabric.Object._fromObject("Rect",e,t)},Tm.fabric.Rect,Tm.fabric.Textbox=Tm.fabric.util.createClass(Tm.fabric.Textbox,{type:"textbox",_renderChars:function(e,t,i,n,r,o){var a,s,l,c,u,d=this.getHeightOfLine(o),h=-1!==this.textAlign.indexOf("justify"),p="",f=0,g=this.path,v=!h&&0===this.charSpacing&&this.isEmptyStyles(o)&&!g,m="ltr"===this.direction,A="ltr"===this.direction?1:-1,b=t.canvas.getAttribute("dir");if(t.save(),b!==this.direction&&(t.canvas.setAttribute("dir",m?"ltr":"rtl"),t.direction=m?"ltr":"rtl",t.textAlign=m?"left":"right"),r-=d*this._fontSizeFraction/this.lineHeight,v)return this._renderChar(e,t,o,0,i.join(""),n,r,d),void t.restore();for(var y=0,x=i.length-1;y<=x;y++)c=y===x||this.charSpacing||g,p+=i[y],l=this.__charBounds[o][y],0===f?(n+=A*(l.kernedWidth-l.width),f+=l.width):f+=l.kernedWidth,h&&!c&&this._reSpaceAndTab.test(i[y])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(o,y),s=this.getCompleteStyleDeclaration(o,y+1),c=Tm.fabric.util.hasStyleChanged(a,s,!1)),g?(t.save(),t.translate(l.renderLeft,l.renderTop),t.rotate(l.angle),this._renderChar(e,t,o,y,p,-f/2,0,d),t.restore()):(u=n,this._renderChar(e,t,o,y,p,u,r,d)),p="",a=s,n+=A*f,f=0;t.restore()},enlargeSpaces:function(){for(var e,t,i,n,r,o,a,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(n=0,r=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(a=this.textLines[s].split(""))&&a.length>1)){i=a.length,e=(this.width-t)/(i-1);for(var c=0,u=r.length;c<=u;c++)(o=this.__charBounds[s][c]).left+=n,c<u-1&&(o.width+=e,o.kernedWidth+=e,n+=e)}}}),Tm.fabric.Textbox.fromObject=function(e,t){const{text:i}=e;return t(new Tm.fabric.Textbox(i,e))},Tm.fabric.Rect;const{SelectEvent:QI,SelectMode:LI}=OA;var jI=(e=>(e.create="CGRATE",e.template="TEMPLATE",e.element="ELEMENT",e.text="TEXT",e.material="Material",e.ai="AI",e.mine="MINE",e.none="",e))(jI||{}),PI=(e=>(e.canvas="CANVASLIST",e.layer="LAYER",e.menu="MENU",e))(PI||{}),FI=(e=>(e.h1="TEXT-H1,",e.h2="TEXT-H2",e.normal="TEXT-NORMAL",e))(FI||{}),RI=(e=>(e.react="REACT",e.triangle="Triangle",e.around="Around",e.polygon="Polygon",e.line="LINE",e))(RI||{}),zI=(e=>(e.qrcode="QRCODE",e.barCode="BARCODE",e))(zI||{}),NI=(e=>(e.design="DESIGN",e.img="IMAGE",e.json="JSON",e.svg="SVG",e.psd="PSD",e))(NI||{});const VI=lr({id:"editor",state:()=>({editor:null,canvas:null,zoom:1,rulerEnable:!0,tabType:jI.template,panelType:PI.menu,showPanel:!0,panelPositoin:"left"}),actions:{setEditor(e){this.editor=e},setCanvas(e){this.canvas=e},setScale(e){this.zoom=e},updateRulerEnable(e){this.rulerEnable=e},setTabType(e){this.tabType=e},setPanelType(e){this.panelType=e},setShowPanel(e){this.showPanel=e},setPanelPositoin(e){this.panelPositoin=e}}});function UI(){return VI(sr)}function HI(){const e=UI(),{t:t}=Lt(),i=nn("mixinState");return{canvasEditor:e.editor,mixinState:i,t:t}}const GI=UI();function YI(){const{t:e}=Lt(),t=cr(),i=ur(),n=async()=>{const e=GI.editor.getJson(),t=await r();return{json:e,img:t?.id,desc:""}},r=async()=>{const e=await canvasEditor.preview(),t=await(e=>{const t=((e,t)=>{for(var i=e.split(","),n=i[0].match(/:(.*?);/)[1],r=atob(i[1]),o=r.length,a=new Uint8Array(o);o--;)a[o]=r.charCodeAt(o);return new File([a],t,{type:n})})(e,"123.png"),i=new FormData,n=new Date;return i.append("files",t,`${n.getTime()}`),gr(i).then((e=>{const[t]=e.data;return t})).catch((e=>{}))})(e);return t},o=e=>{t.replace("/?id="+e)};return{createTmpl:async(e,t,i="")=>{GI.editor.clear(),GI.editor.setSize(e,t);const r=hp().format("YYYY[]MM[]DD[]HH[]mm[]ss[]")+"",a=await n(),s=await dr({data:{...a,type:"file",parentId:String(i),name:r}});return o(s.data.data.id),s},createTmplByCommon:async()=>{const e=hp().format("YYYY[]MM[]DD[]HH[]mm[]ss[]")+"",t=await n();return await dr({data:{...t,type:"file",parentId:"",externalId:i.query?.projectid||null,name:e}})},getTemplInfo:async e=>(await hr(e)).data,updataTemplInfo:async(e,t)=>{const i=await n();t&&(i.name=t),await pr(e,{data:i})},removeTemplInfo:t=>new Promise(((i,n)=>{jt.confirm(`${e("my_spase.remove_templTip")}`,"Warning",{title:e("my_spase.remove_templ")}).then((()=>{fr(t).then(i).catch(n)}))})),routerToId:o,createdFileType:async(e,t="")=>{await dr({data:{name:e,type:"fileType",parentId:String(t)}})},reNameFileType:async(e,t)=>{await pr(t,{data:{name:e}})},removeFileType:t=>new Promise(((i,n)=>{jt.confirm(`${e("my_spase.remove_file_type_Tip")}`,"Warning",{title:e("my_spase.remove_file_type")}).then((()=>{fr(t).then(i).catch(n)}))}))}}const WI={class:"f-center pr-10px"},XI={__name:"Save",setup(e){const t=VI(),i=ur(),{createTmplByCommon:n,updataTemplInfo:r,routerToId:o}=YI(),{t:a}=Lt(),s={async clipboard(){try{await t.editor.clipboard(),Pt.success("")}catch(e){Pt.error("")}},saveJson(){t.editor.saveJson()},saveSvg(){t.editor.saveSvg()},saveImg(){t.editor.saveImg()},async clipboardBase64(){try{await t.editor.clipboardBase64(),Pt.success("")}catch(e){Pt.error("")}},async saveMyClould(){const e=Ft.service();try{if(i?.query?.id)await r(i?.query?.id);else{const e=await n();o(e.data.data.id)}}catch(t){Pt.warning("")}e.close()}},l=J((function(e){s[e]&&"function"==typeof s[e]&&s[e]()}),300),c=()=>{t.editor?.clear(),t.canvas.clearHistory(),t.editor?.historyUpdate()},u=()=>{jt.confirm(`${a("clearTip")}`,"Warning",{title:a("tip"),type:"warning",confirmButtonText:"ok",cancelButtonText:a("cancel")}).then(c)};return(e,t)=>{const i=He,n=ve,r=Rt,o=zt,a=Nt;return Ki(),Ji("div",WI,[Tn(i,{class:"ml-10px",link:"",type:"primary",onClick:u},{default:an((()=>[kn(ln(e.$t("editor.save.empty")),1)])),_:1}),Tn(a,{class:"ml-10px",onCommand:tn(l)},{dropdown:an((()=>[Tn(o,null,{default:an((()=>[Tn(r,{command:"saveMyClould"},{default:an((()=>[kn(ln(e.$t("editor.save.save_my_spase")),1)])),_:1}),Tn(r,{command:"saveImg",divided:""},{default:an((()=>[kn(ln(e.$t("editor.save.save_as_picture")),1)])),_:1}),Tn(r,{command:"saveSvg"},{default:an((()=>[kn(ln(e.$t("editor.save.save_as_svg")),1)])),_:1}),Tn(r,{command:"clipboard",divided:""},{default:an((()=>[kn(ln(e.$t("editor.save.copy_to_clipboard")),1)])),_:1}),Tn(r,{command:"clipboardBase64"},{default:an((()=>[kn(ln(e.$t("editor.save.copy_to_clipboardstr")),1)])),_:1}),Tn(r,{command:"saveJson",divided:""},{default:an((()=>[kn(ln(e.$t("editor.save.save_as_json")),1)])),_:1})])),_:1})])),default:an((()=>[Tn(i,{type:"primary"},{default:an((()=>[kn(ln(e.$t("editor.save.download"))+" ",1),Tn(n,{class:"el-icon--right"},{default:an((()=>[Tn(tn(Ge))])),_:1})])),_:1})])),_:1},8,["onCommand"])])}}},$I=Wi({__name:"PreviewCurrent",setup(e){const t=VI(),i=Xi(!1),n=Xi([]),r=()=>{i.value=!1,n.value=[]},o=()=>{t.editor.preview().then((e=>{n.value=[e],i.value=!0}))};return(e,t)=>{const a=He,s=Ig;return Ki(),Ji(Cn,null,[Tn(a,{link:"",type:"primary",onClick:o},{default:an((()=>[kn(ln(e.$t("editor.preview")),1)])),_:1}),tn(i)?(Ki(),on(s,{key:0,"url-list":tn(n),onClose:r},null,8,["url-list"])):En("",!0)],64)}}}),qI={style:{display:"inline-block"}},KI=Wi({__name:"History",setup(e){const t=VI(),i=Xi(0),n=Xi(0),r=()=>{t.editor.undo()},o=()=>{t.editor.redo()};return qi((()=>{gn((()=>{t.editor?.on("historyUpdate",((e,t)=>{i.value=e,n.value=t}))}))})),(e,t)=>{const a=Vt,s=He,l=Ye;return Ki(),Ji("div",qI,[Tn(l,{content:e.$t("editor.history.undo")+`(${tn(i)})`},{default:an((()=>[Tn(s,{onClick:r,link:"",size:"small",disabled:!tn(i)},{default:an((()=>[Tn(a,{extClass:"text-20px",color:tn(i)?"#333":"#ccc",icon:"ios-undo"},null,8,["color"])])),_:1},8,["disabled"])])),_:1},8,["content"]),Tn(l,{content:e.$t("editor.history.redo")+`(${tn(n)})`},{default:an((()=>[Tn(s,{onClick:o,link:"",size:"small",disabled:!tn(n)},{default:an((()=>[Tn(a,{extClass:"text-20px",color:tn(n)?"#333":"#ccc",icon:"ios-redo"},null,8,["color"])])),_:1},8,["disabled"])])),_:1},8,["content"])])}}}),JI=vr(KI,[["__scopeId","data-v-d8bc8611"]]),ZI={key:0,style:{display:"inline-block"}},eB={__name:"MyTemplName",setup(e){const t=VI(),i=cr(),{getTemplInfo:n,updataTemplInfo:r}=YI(),o=Xi(""),a=ur(),s=Xi(!1);fn((()=>a.query),(e=>{e?.id?n(e?.id).then((e=>{o.value=e?.data?.attributes?.name})):o.value=!1})),qi((()=>{gn((async()=>{if(a?.query?.id)n(a?.query?.id).then((e=>{o.value=e?.data?.attributes?.name,t.editor.loadJSON(JSON.stringify(e?.data?.attributes?.json))})).catch((()=>{window.location.href="/"}));else if(a?.query?.projectid){const e=await l(a?.query?.projectid);e&&n(e).then((n=>{i.replace(a.fullPath+"&id="+e),o.value=n?.data?.attributes?.name,t.editor.loadJSON(JSON.stringify(n?.data?.attributes?.json))}))}}))}));const l=e=>{const t={populate:{img:"*"},filters:{externalId:{$eq:String(e)}},pagination:{page:1,pageSize:50}};return mr(Qt.stringify(t)).then((e=>{if(e.data.data.length)return e.data.data[0].id})).catch((e=>e))},c=()=>{if(""===o.value)return Pt.warning(""),void(o.value="");s.value=!0,r(a.query.id,o.value).then().finally((()=>{s.value=!1}))},u=J((()=>{a.query.id&&c()}),3e3);return qi((()=>{t.canvas?.on("object:modified",u)})),(e,t)=>{const i=Ue,n=He,r=Ut;return tn(a)?.query?.id?(Ki(),Ji("div",ZI,[Tn(i,{modelValue:tn(o),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(o)?o.value=e:null),placeholder:"",style:{width:"190px"},size:"small",onChange:tn(u),loading:tn(s)},null,8,["modelValue","onChange","loading"]),Tn(n,{link:"",onClick:c,loading:tn(s)},null,8,["loading"]),Tn(r,{type:"vertical"})])):En("",!0)}}},tB=vr(eB,[["__scopeId","data-v-6f16963d"]]),iB={class:"f-center"},nB={class:"dialog-footer"},rB={__name:"ImportFile",setup(e){const{getImgStr:t,selectFiles:i}=cb,{canvasEditor:n}=HI(),r=On({showModal:!1,svgStr:""}),o={insertImg:function(){i({accept:"image/*",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{!function(e){if(!e)throw new Error("file is undefined");const t=document.createElement("img");t.src=e,document.body.appendChild(t),t.onload=async()=>{const e=await n.createImgByElement(t);n.addBaseType(e,{scale:!0}),t.remove()}}(e)}))}))}))},insertSvg:function(){i({accept:".svg",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{!function(e){if(!e)throw new Error("file is undefined");Tm.fabric.loadSVGFromURL(e,((e,t)=>{const i=Tm.fabric.util.groupSVGElements(e,{...t,name:"defaultSVG",id:SA()});n.addBaseType(i,{scale:!0})}))}(e)}))}))}))},insertSvgStrModal:function(){r.svgStr="",r.showModal=!0},insertSvgStr:function(){Tm.fabric.loadSVGFromString(r.svgStr,((e,t)=>{const i=Tm.fabric.util.groupSVGElements(e,{...t,name:"defaultSVG"});n.addBaseType(i,{scale:!0}),r.showModal=!1}))}},a=e=>{const t=o[e];t&&"function"==typeof t&&t()};return(e,t)=>{const i=ve,n=He,o=Rt,s=zt,l=Nt,c=Ue,u=Ht;return Ki(),Ji("div",iB,[Tn(l,{"transfer-class-name":"fix",onCommand:a},{dropdown:an((()=>[Tn(s,null,{default:an((()=>[Tn(o,{command:"insertImg"},{default:an((()=>[kn(ln(e.$t("editor.insertFile.insert_picture")),1)])),_:1}),Tn(o,{command:"insertSvg"},{default:an((()=>[kn(ln(e.$t("editor.insertFile.insert_SVG")),1)])),_:1}),Tn(o,{command:"insertSvgStrModal"},{default:an((()=>[kn(ln(e.$t("editor.insertFile.insert_SVGStr")),1)])),_:1})])),_:1})])),default:an((()=>[Tn(n,{link:"",type:"primary"},{default:an((()=>[kn(ln(e.$t("editor.insertFile.insert"))+" ",1),Tn(i,{class:"el-icon--right"},{default:an((()=>[Tn(tn(Ge))])),_:1})])),_:1})])),_:1}),Tn(u,{modelValue:tn(r).showModal,"onUpdate:modelValue":t[3]||(t[3]=e=>tn(r).showModal=e),title:e.$t("editor.insertFile.modal_tittle")},{footer:an((()=>[rn("div",nB,[Tn(n,{onClick:t[1]||(t[1]=e=>tn(r).showModal=!1)},{default:an((()=>[kn("")])),_:1}),Tn(n,{type:"primary",onClick:t[2]||(t[2]=e=>a("insertSvgStr"))},{default:an((()=>[kn("  ")])),_:1})])])),default:an((()=>[Tn(c,{modelValue:tn(r).svgStr,"onUpdate:modelValue":t[0]||(t[0]=e=>tn(r).svgStr=e),"show-word-limit":"",type:"textarea",placeholder:e.$t("editor.insertFile.insert_SVGStr_placeholder")},null,8,["modelValue","placeholder"])])),_:1},8,["modelValue","title"])])}}},oB=e=>(Ar("data-v-8b6e970d"),e=e(),br(),e),aB={class:"asa-size-wrap"},sB={class:"asa-size-wrap-item"},lB=oB((()=>rn("span",null,"",-1))),cB={class:"asa-size-wrap-item"},uB=oB((()=>rn("span",null,"",-1))),dB={"label-width":0},hB={class:"cell-wrap"},pB=["onClick"],fB={class:"cell-name"},gB={class:"cell-label"},vB={__name:"ModalSize",props:{title:{type:String,default:""}},emits:["set"],setup(e,{expose:t,emit:i}){const{canvasEditor:n}=HI(),r=i,o=e,a=Xi(!1),s=Xi(null),l=Xi(null),c=Xi([]),u=async()=>{s.value&&l.value?(r("set",s.value,l.value),a.value=!1):Pt.warning("")};return t({showSetSize:(e,t)=>{s.value=e||null,l.value=t||null,n.getSizeList().then((e=>{c.value=e})),a.value=!0}}),(e,t)=>{const i=Vg,n=He,r=Ut,d=ve,h=Ht;return Ki(),on(h,{modelValue:tn(a),"onUpdate:modelValue":t[2]||(t[2]=e=>xn(a)?a.value=e:null),title:o.title,"footer-hide":""},{default:an((()=>[rn("h3",null,ln(e.$t("editor.importFiles.createDesign.customSize")),1),rn("section",aB,[rn("div",sB,[lB,Tn(i,{style:{width:"70%"},modelValue:tn(s),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(s)?s.value=e:null),min:1,placeholder:"","controls-position":"right"},null,8,["modelValue"])]),rn("div",cB,[uB,Tn(i,{style:{width:"70%"},modelValue:tn(l),"onUpdate:modelValue":t[1]||(t[1]=e=>xn(l)?l.value=e:null),min:1,placeholder:"","controls-position":"right"},null,8,["modelValue"])]),rn("div",dB,[Tn(n,{type:"primary",onClick:u},{default:an((()=>[kn(ln(e.$t("editor.importFiles.createDesign.create")),1)])),_:1})])]),Tn(r,{direction:"horizontal"}),rn("h3",null,ln(e.$t("editor.importFiles.createDesign.systemSize")),1),rn("section",hB,[(Ki(!0),Ji(Cn,null,zn(tn(c),(e=>(Ki(),Ji("div",{key:e.name,class:"cell-main",onClick:t=>(e=>{const[t,i]=e.split("x");s.value=Number(t),l.value=Number(i)})(`${e.width}x${e.height}x${e.unit}`)},[rn("div",null,[rn("div",fB,ln(e.name),1),rn("div",gB,ln(`${e.width}x${e.height}${e.unit}`),1)]),Tn(d,null,{default:an((()=>[Tn(tn(ut))])),_:1})],8,pB)))),128))])])),_:1},8,["modelValue","title"])}}},mB=vr(vB,[["__scopeId","data-v-8b6e970d"]]),AB={class:"f-center"},bB={__name:"ImportJson",setup(e){Lt();const{canvasEditor:t}=HI(),{createTmpl:i,routerToId:n}=YI(),r=Xi(null),o=e=>{const i={importFiles:t.insert,createDesign:a,psd:async()=>{await t.insertPSD()}};i[e]?.()},a=()=>{r.value.showSetSize()},s=async(e,t)=>{const r=await i(e,t);n(r.data.data.id),Pt.success("")};return(e,t)=>{const i=ve,n=He,a=Rt,l=zt,c=Nt;return Ki(),Ji("div",AB,[Tn(c,{onCommand:o},{dropdown:an((()=>[Tn(l,null,{default:an((()=>[Tn(a,{command:"createDesign"},{default:an((()=>[kn(ln(e.$t("editor.importFiles.createDesign.title")),1)])),_:1}),Tn(a,{command:"importFiles"},{default:an((()=>[kn(ln(e.$t("editor.importFiles.importFiles")),1)])),_:1}),Tn(a,{command:"psd"},{default:an((()=>[kn("PSD")])),_:1})])),_:1})])),default:an((()=>[Tn(n,{link:"",type:"primary"},{default:an((()=>[kn(ln(e.$t("editor.importFiles.file"))+" ",1),Tn(i,{class:"el-icon--right"},{default:an((()=>[Tn(tn(Ge))])),_:1})])),_:1})])),_:1}),Tn(mB,{title:e.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:r,onSet:s},null,8,["title"])])}}},yB={class:"w-full flex justify-between items-center"},xB={class:"flex justify-start items-center"},wB={class:"flex justify-end items-center"},_B=rn("a",{class:"mr-10px",href:"https://github.com/ikuaitu/element-fabric-editor",target:"_blank"},[rn("img",{src:"https://img.shields.io/badge/GitHub-ElementFbricEditor-blue",alt:"element-fbric-editor"})],-1),CB=Wi({__name:"index",setup(e){const t=VI(),i=pn((()=>t.rulerEnable)),n=e=>{e?t.editor.rulerEnable():t.editor.rulerDisable(),t.updateRulerEnable(e),document.activeElement.blur()};return(e,t)=>{const r=Gt,o=Ut,a=bB,s=rB,l=He,c=Xn("router-link"),u=tB,d=em,h=JI,p=$I,f=XI,g=Yt;return Ki(),Ji("div",yB,[rn("div",xB,[Tn(r),Tn(o,{direction:"vertical"}),Tn(a),Tn(o,{direction:"vertical"}),Tn(s),Tn(o,{direction:"vertical"}),Tn(c,{custom:"",to:"/editor/template"},{default:an((({navigate:e})=>[Tn(l,{text:"",onClick:e},{default:an((()=>[kn("")])),_:2},1032,["onClick"])])),_:1}),Tn(o,{direction:"vertical"}),Tn(u),Tn(d,{modelValue:tn(i),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(i)?i.value=e:null),size:"large",class:"ml-10px","inline-prompt":"","active-text":"","inactive-text":"",onChange:n},null,8,["modelValue"]),Tn(o,{direction:"vertical"}),Tn(h)]),rn("div",wB,[_B,Tn(p),Tn(o,{direction:"vertical"}),Tn(f),Tn(o,{direction:"vertical"}),Tn(g)])])}}}),kB=[{name:"",icon:"add",type:jI.create},{name:"",icon:"template",type:jI.template},{name:"",icon:"element",type:jI.element},{name:"",icon:"text",type:jI.text},{name:"",icon:"img",type:jI.material},{name:"AI",icon:"ai",type:jI.ai},{name:"",icon:"mine",type:jI.mine}],EB=[{name:"",icon:"text-h1",type:FI.h1},{name:"",icon:"text-h2",type:FI.h2},{name:"",icon:"text-normal",type:FI.normal}],SB=[{name:"",icon:'<svg role="img" aria-label="shape-rectangle" focusable="false" data-icon="shape-rectangle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-rectangle"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 19V5C19.5 4.72386 19.2761 4.5 19 4.5L5 4.5C4.72386 4.5 4.5 4.72386 4.5 5L4.5 19C4.5 19.2761 4.72386 19.5 5 19.5H19C19.2761 19.5 19.5 19.2761 19.5 19ZM21 5C21 3.89543 20.1046 3 19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5Z" fill="currentColor"></path></svg>',type:RI.react},{name:"",icon:'<svg role="img" aria-label="shape-polygon" focusable="false" data-icon="shape-polygon" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-polygon"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.7949 19.1828L12.1881 3.46617C12.1068 3.31769 11.8936 3.31768 11.8122 3.46617L3.20553 19.1828C3.12732 19.3256 3.23066 19.5 3.39347 19.5H20.6069C20.7697 19.5 20.8731 19.3256 20.7949 19.1828ZM13.5038 2.74569C12.8533 1.55784 11.1471 1.55784 10.4966 2.74569L1.88988 18.4623C1.26427 19.6047 2.09097 21 3.39347 21H20.6069C21.9094 21 22.7361 19.6047 22.1105 18.4623L13.5038 2.74569Z" fill="currentColor"></path></svg>',type:RI.triangle},{name:"",icon:'<svg role="img" aria-label="shape-circle" focusable="false" data-icon="shape-circle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-circle"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"></path></svg>',type:RI.around},{name:"",icon:'<svg data-v-1eb84746="" t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="26" height="26"><path data-v-1eb84746="" d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>',type:RI.polygon},{name:"",icon:'<svg role="img" aria-label="shape-line" focusable="false" data-icon="shape-line" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-line"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.46967 20.5303C3.17678 20.2374 3.17678 19.7626 3.46967 19.4697L19.4697 3.46967C19.7626 3.17678 20.2374 3.17678 20.5303 3.46967C20.8232 3.76256 20.8232 4.23744 20.5303 4.53033L4.53033 20.5303C4.23744 20.8232 3.76256 20.8232 3.46967 20.5303Z" fill="currentColor"></path></svg>',type:RI.line}],IB=[{name:"",icon:'<svg\n          t="1717679888665"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          p-id="4558"\n          xmlns="http://www.w3.org/2000/svg"\n          width="20"\n          height="20"\n        >\n          <path\n            d="M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z"\n            fill="#333333"\n            p-id="4559"\n          ></path>\n          <path\n            d="M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z"\n            fill="#333333"\n            p-id="4560"\n          ></path>\n          <path\n            d="M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z"\n            fill="#333333"\n            p-id="4561"\n          ></path>\n        </svg>',type:zI.qrcode},{name:"",icon:'<svg\n          t="1717679973041"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n          p-id="5747"\n          width="20"\n          height="20"\n        >\n          <path\n            d="M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z"\n            p-id="5748"\n          ></path>\n        </svg>',type:zI.barCode}],BB=[{name:"",icon:"template",type:NI.design},{name:"",icon:"img",type:NI.img},{name:"SVG",icon:"svg-file",type:NI.svg},{name:"PSD",icon:"psd-file",type:NI.psd},{name:"JSON",icon:"json-file",type:NI.json}],OB={class:"my-material"},TB={key:0,class:"img-group flex justify-start flex-wrap"},DB={class:"relative tmpl-img-box"},MB={key:1,class:"tip"},QB={__name:"uploadMaterial",setup(e){const{selectFiles:t}=cb,i=VI(),n=Xi([]),r=Xi(!1),o=()=>{yr().then((e=>{n.value=e.data.data?.map((e=>({id:e.id,name:e?.attributes?.name,imgUrl:xr+e.attributes.img?.data?.attributes?.url}))),r.value=!0})).catch((e=>{r.value=!1}))};o();const a=()=>{t({accept:"image/*"}).then((e=>{const t=new FormData,i=new Date,[n]=e;t.append("files",n,`${i.getTime()}`),gr(t).then((e=>{const[t]=e.data;s(t.id,n.name)})).catch((e=>{}))}))},s=(e,t)=>{wr({data:{img:e,name:t}}).finally(o)},l=async e=>{const t=await i.editor.createImgByElement(e.target);i.editor.addBaseType(t,{scale:!0})};return(e,t)=>{const i=He,r=ve,s=Lg,c=Ye;return Ki(),Ji("div",OB,[Tn(i,{class:"w-full",icon:tn(Wt),onClick:a,long:"",type:"primary"},{default:an((()=>[kn(ln(e.$t("myMaterial.uploadBtn")),1)])),_:1},8,["icon"]),tn(n).length?(Ki(),Ji("div",TB,[(Ki(!0),Ji(Cn,null,zn(tn(n),((e,t)=>(Ki(),on(c,{content:e.name,key:`${t}-bai1-button`,placement:"top"},{default:an((()=>[rn("div",DB,[Tn(r,{class:"del-btn",color:"red",onClick:t=>{return i=e.id,void _r(i).finally(o);var i}},{default:an((()=>[Tn(tn(Xt))])),_:2},1032,["onClick"]),Tn(s,{lazy:"",src:e.imgUrl,fit:"contain",height:"100%",alt:e.name,onClick:l},null,8,["src","alt"])])])),_:2},1032,["content"])))),128))])):(Ki(),Ji("div",MB,""))])}}},LB=vr(QB,[["__scopeId","data-v-50728920"]]),jB={class:"file-type-box"},PB=["src"],FB={class:"more"},RB=vr({__name:"fileType",props:{name:{type:String,default:""},itemId:{type:[Number,String],default:""}},emits:["change","select"],setup(e,{emit:t}){const{reNameFileType:i,removeFileType:n}=YI(),r=e,o=t,a=e=>{({reName:l,delete:c})[e]()},s=Xi(""),l=()=>{s.value=r.name,jt.confirm("",{confirmButtonText:"",cancelButtonText:"",message:()=>Jn(Ue,{...Ue.$el,...Ue.$attrs,size:"large",modelValue:s.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"","onUpdate:modelValue":e=>{s.value=e}})}).then((async()=>{""!==s.value?(await i(s.value,r.itemId),o("change")):Pt.warning("")}))},c=async()=>{const e=await n(r.itemId);e?.data?.msg?Pt.error({content:e.data?.msg,duration:3}):o("change")};return(e,t)=>{const i=ve,n=He,s=Rt,l=zt,c=Nt;return Ki(),Ji("div",jB,[rn("img",{src:tn("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADICAYAAACDHY8MAAAAAXNSR0IArs4c6QAAB/ZJREFUeF7tnL9uXEUchWdWGGQSF4miBITkAhqchgpREOHdVElNBQ9BS4MU+2Xo8wLsNTUVjV/CCqKgSbGDdm3wrr12Iu+9M79z9rNEg+KZc76TT/f6D+S05qNMH43TaDZOuRymksfr/gz/7h0EculSySdpNury5KyDFwTmBPJVDOXk4VFK6RV4eiVwnA/fzLnyseUEVoQrvz+Y8kQb8G/EbDThaTcgX4Gj/xcO2eqslQ/fXHurqHMzt0QgsBgf2SpOkUuXv/trUvFGrgpEIF98g2QaKNM2ROFrum1YeU3HzNOtzfK8Wrbh3vpWhGu3AE+5duyb3ZzLycPS7PbtvhjhtnB/hGs1Ot88aUW+6b0I1xA/X8c1hN/oaoRrBP7iWl4r2/KvfjvCVUe+ciHCteVf/XaEq4589UJeKxsPUPl6hKsM/Np1/H5l6wWq3o9wVXGvvYzXyvYbVEuAcNVQ33gRwrXfoFoChKuG+uaL+DouwAiVIiBcJdC3XsPXcRFWqJIB4apgfscle9+cpM9+4n/DEGGLHjLkJy9v/K/7Ea4HwBsf8fHTlPZ/2fgYDohEoByvEw/homz05a9RkpCjVwKr4iFcr3A3OOzR9ynN/+HDkMCldAgXZV6Ei7LEMDlmZZI/fdkh3DB473Yqr5V346bwWTl1+fGLCcJFGgvhIq0xQJbRM4QbAOudj+S18s7oND4xv0a4SEshXKQ1BsiCcANA3fBIXis3BBj60894wkXbZ/4D8PkPwvlwJIBw4VbltTLcJD0GQrgeYfZzFL/m1Q/HmKcgXMhd+Dou5Cw9hEK4HiD2fwSvlf0zjXEiwsXY4UoKhAs5Sw+hEK4HiMMcwWvlMFzbnopwbfnfcjvChZ1mg2AItwG8YT+V18ph+bY5HeHacH+PWxHuPSDJ/ZFbhPvwfkr3nsg1sgrMb5zozfnB/nnm3W/XZV8j3L1PEE1vZhJHJLD77Kp4V4R78EVKO/cjRicTBDQJ7OyntPfDf9mXhEM2zUFJHZ/ApXQXwvEaGX80EmoTOH+9vBDu8VfaZUgPAQUCez/+ncsfTwvfjVRYi4zyBHY+f5vLn18XvlEiPyUFFAgshDudFIWsZISAPIHR7gzh5FekgAwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAgf/Q2l9NJcehCBwiEJ5B3/kG48CsR0IjAGcIZrUmV8AQQLvxEBHQisBBumlIaO7WiCwRCEsjpNcKFXIZQlgRK+jmX0/E4pTx/yvEBAQgMSCAfTHOen89r5YCUORoCCwL5OB/8drQQDun4OwGBYQnMn24L7Zav4Uk3LHRO30oCXUrlOB903TXhzp90z49SKq+2Eg2lIdAvgS4fTCfLR6484S5fL+ffSBmNUyqH/Mig3wU4zZ7A4km2/FRbbvwv/sNzeMKZkPkAAAAASUVORK5CYII=")},null,8,PB),rn("span",null,ln(r.name),1),rn("div",{class:"click-bg",onClick:t[0]||(t[0]=e=>o("select"))}),rn("div",FB,[Tn(c,{trigger:"click",onCommand:a},{dropdown:an((()=>[Tn(l,null,{default:an((()=>[Tn(s,{command:"reName"},{default:an((()=>[kn("")])),_:1}),Tn(s,{command:"delete"},{default:an((()=>[kn("")])),_:1})])),_:1})])),default:an((()=>[Tn(n,{size:"small",shape:"circle",text:""},{default:an((()=>[Tn(i,{size:"18px"},{default:an((()=>[Tn(tn(ut))])),_:1})])),_:1})])),_:1})])])}}},[["__scopeId","data-v-ed117189"]]),zB={class:"file-type-box"},NB={class:"more"},VB={class:"dialog-footer"},UB={__name:"file",props:{name:{type:String,default:""},src:{type:String,default:""},previewSrc:{type:String,default:""},itemId:{type:[Number,String],default:""},json:{type:Object,default:()=>({})}},emits:["change"],setup(e,{emit:t}){const i=VI(),{t:n}=Lt(),{reNameFileType:r,removeTemplInfo:o,routerToId:a,getTemplInfo:s}=YI(),l=e,c=t,u=e=>{({reName:h,delete:p,transfer:b})[e]()},d=Xi(""),h=()=>{d.value=l.name,jt.confirm({title:"",message:Jn(Ue,{...Ue.$el,...Ue.$attrs,size:"large",modelValue:d.value,autofocus:!0,placeholder:"","onUpdate:modelValue":e=>{d.value=e}})}).then((async()=>{""!==d.value?(await r(d.value,l.itemId),c("change")):Pt.warning("")}))},p=async()=>{await o(l.itemId),c("change")},f=()=>{jt.confirm(n("replaceTip"),n("tip"),{confirmButtonText:n("ok"),cancelButtonText:n("cancel"),type:"warning"}).then((()=>{g()}))},g=async()=>{const e=Ft.service({text:n("alert.loading_data")}),t=await s(l.itemId);a(l.itemId),i.editor.loadJSON(JSON.stringify(t.data.attributes.json),e.close)},v=Xi(!1),m=Xi(""),A=Xi([]),b=async()=>{A.value=[],m.value="";const e=await Cr();A.value=[e.data.data],v.value=!0},y=async()=>{const e="root"===m.value?"":m.value;await pr(l.itemId,{data:{parentId:String(e)}}),c("change")};return(e,t)=>{const i=Lg,n=ve,r=He,o=Rt,a=zt,s=Nt,c=Ye,d=Om,h=Ht;return Ki(),Ji(Cn,null,[Tn(c,{content:l.name,placement:"top"},{default:an((()=>[rn("div",zB,[Tn(i,{lazy:"",onClick:f,src:l.src,fit:"contain",height:"100%",width:"100%",alt:l.name},null,8,["src","alt"]),rn("div",NB,[Tn(s,{trigger:"click",onCommand:u},{list:an((()=>[Tn(a,null,{default:an((()=>[Tn(o,{command:"reName"},{default:an((()=>[kn("")])),_:1}),Tn(o,{command:"delete"},{default:an((()=>[kn("")])),_:1}),Tn(o,{command:"transfer"},{default:an((()=>[kn("")])),_:1})])),_:1})])),default:an((()=>[Tn(r,{size:"small",shape:"circle",text:""},{default:an((()=>[Tn(n,{size:"24px"},{default:an((()=>[Tn(tn(ut))])),_:1})])),_:1})])),_:1})])])])),_:1},8,["content"]),Tn(h,{modelValue:tn(v),"onUpdate:modelValue":t[2]||(t[2]=e=>xn(v)?v.value=e:null),title:""},{footer:an((()=>[rn("div",VB,[Tn(r,{onClick:t[1]||(t[1]=e=>v.value=!1)},{default:an((()=>[kn("")])),_:1}),Tn(r,{type:"primary",onClick:y},{default:an((()=>[kn("  ")])),_:1})])])),default:an((()=>[Tn(d,{modelValue:tn(m),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(m)?m.value=e:null),data:tn(A),width:"200px"},null,8,["modelValue","data"])])),_:1},8,["modelValue"])],64)}}},HB=vr(UB,[["__scopeId","data-v-5c695af6"]]),GB={class:"search-box"},YB={style:{height:"calc(100vh - 160px)"},id:"myFileTemplBox"},WB={__name:"myTempl",setup(e){const t=ur(),{createdFileType:i,createTmpl:n}=YI(),r=On({name:{$contains:""},parentId:{$eq:"",filterEmpty:!1}}),{pageData:o,showScroll:a,scrollHeight:s,isDownBottom:l,pageLoading:c,startPage:u,startGetList:d,nextPage:h}=$t({el:"#myFileTemplBox",apiClient:mr,filters:r,sort:["type:desc"],fields:["name","parentId","type","externalId"],formatData:e=>e.map((e=>({id:e.id,name:e.attributes.name,type:e.attributes.type||"file",desc:e.attributes.desc,json:e.attributes.json,src:qt(e.attributes.img),previewSrc:Kt(e.attributes.img)})))});qi((async()=>{await A(),u()}));const p=Xi(""),f=Xi(null),g=e=>{"fileType"===e?(p.value="",jt.confirm("",{confirmButtonText:"",cancelButtonText:"",message:()=>Jn(Ue,{...Ue.$el,...Ue.$attrs,size:"large",modelValue:p.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"","onUpdate:modelValue":e=>{p.value=e}})}).then((async()=>{""!==p.value?(await i(p.value,r.parentId.$eq),d()):Pt.warning("")}))):f.value.showSetSize()},v=async(e,t)=>{await n(e,t,r.parentId.$eq),d()},m=Xi([{name:"",parentId:""}]),A=async()=>{if(t?.query?.id){const e=await kr({id:t.query.id});m.value=e.data.data;const i=e.data.data[e.data.data.length-1];r.parentId.$eq=i.parentId}};return(e,t)=>{const i=He,n=Rt,u=zt,p=Nt,A=Ue,b=up,y=cp,x=Ut,w=wt;return Ki(),Ji("div",null,[rn("div",GB,[Tn(p,{onCommand:g,placement:"bottom-start",style:{"margin-right":"10px"},transfer:""},{dropdown:an((()=>[Tn(u,null,{default:an((()=>[Tn(n,{command:"file"},{default:an((()=>[kn("")])),_:1}),Tn(n,{command:"fileType"},{default:an((()=>[kn("")])),_:1})])),_:1})])),default:an((()=>[Tn(i,{type:"primary",icon:tn(ut)},null,8,["icon"])])),_:1}),Tn(A,{class:"input",placeholder:"",modelValue:tn(r).name.$contains,"onUpdate:modelValue":t[0]||(t[0]=e=>tn(r).name.$contains=e),search:"",disabled:tn(c),onKeyup:Ln(tn(d),["enter"])},null,8,["modelValue","disabled","onKeyup"])]),Tn(y,null,{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(m),((e,t)=>(Ki(),on(b,{onClick:i=>((e,t)=>{t===m.value.length-1||(r.parentId.$eq=e,m.value=m.value.slice(0,t+1),d())})(e.parentId,t),key:e.id},{default:an((()=>[kn(ln(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1}),rn("div",YB,[tn(a)?(Ki(),on(w,{key:"myFileTemplBox","on-reach-bottom":tn(h),height:tn(s)},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(o),(e=>(Ki(),Ji("div",{key:e.name,class:"item"},["fileType"===e.type?(Ki(),on(RB,{key:0,itemId:e.id,name:e.name,onSelect:()=>((e,t)=>{r.parentId.$eq=String(e),m.value.push({name:t,parentId:e}),d()})(e.id,e.name),onChange:tn(d)},null,8,["itemId","name","onSelect","onChange"])):(Ki(),on(HB,{key:1,src:e.src,json:e.json,previewSrc:e.previewSrc,itemId:e.id,name:e.name,onChange:tn(d)},null,8,["src","json","previewSrc","itemId","name","onChange"]))])))),128)),tn(l)?(Ki(),on(x,{key:0,plain:""},{default:an((()=>[kn("")])),_:1})):En("",!0)])),_:1},8,["on-reach-bottom","height"])):En("",!0)]),Tn(mB,{title:e.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:f,onSet:v},null,8,["title"])])}}},XB=vr(WB,[["__scopeId","data-v-d1d1015c"]]),$B={key:0,class:"box-border p-10px my-material"},qB={key:1,class:"tip"},KB=vr({__name:"index",setup(e){const t=Xi("templ"),i=Xi(!1);return yr().then((()=>{i.value=!0})).catch((()=>{i.value=!1})),(e,n)=>{const r=Jt,o=Zt;return tn(i)?(Ki(),Ji("div",$B,[Tn(o,{modelValue:tn(t),"onUpdate:modelValue":n[0]||(n[0]=e=>xn(t)?t.value=e:null)},{default:an((()=>[Tn(r,{label:"",name:"templ"},{default:an((()=>["templ"===tn(t)?(Ki(),on(XB,{key:0})):En("",!0)])),_:1}),Tn(r,{label:"",name:"img"},{default:an((()=>["img"===tn(t)?(Ki(),on(LB,{key:0})):En("",!0)])),_:1})])),_:1},8,["modelValue"])])):(Ki(),Ji("div",qB,""))}}},[["__scopeId","data-v-8263c1cb"]]),JB={class:"w-full"},ZB={class:"layer-box"},eO=["onClick"],tO=["innerHTML"],iO={class:"btn-box"},nO=["innerHTML"],rO=["innerHTML"],oO=["innerHTML"],aO=["innerHTML"],sO={key:1,class:"empty-text"},lO=Wi({__name:"index",setup(e){const t=nn("mixinState"),i=VI(),n=Xi([]),r=e=>e.id===t.mSelectId||t.mSelectIds.includes(e.id),o=(e,t)=>e.includes("text")?t.name||t.text:{group:"",image:"",rect:"",circle:"",triangle:"",polygon:"",path:""}[e]||"",a=e=>{const t=i.canvas?.getObjects().find((t=>t.id===e));i.canvas?.discardActiveObject(),i.canvas?.setActiveObject(t),i.canvas?.requestRenderAll()},s=e=>({up:'<svg t="1650442206559" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1799" width="12" height="12"><path d="M876.2 434.3L536.7 94.9c-6.6-6.6-15.5-10.3-24.7-10.3-9.3 0-18.2 3.7-24.7 10.3L147.8 434.3c-13.7 13.7-13.7 35.8 0 49.5 13.7 13.7 35.8 13.7 49.5 0L477 204.1v700.2c0 19.3 15.7 35 35 35s35-15.7 35-35V204.1l279.7 279.7c6.8 6.8 15.8 10.3 24.7 10.3s17.9-3.4 24.7-10.3c13.7-13.7 13.7-35.8 0.1-49.5z" p-id="1800"></path></svg>',down:'<svg t="1650442229022" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1997" width="12" height="12"><path d="M876.2 589.7L536.7 929.1c-6.6 6.6-15.5 10.3-24.7 10.3-9.3 0-18.2-3.7-24.7-10.3L147.8 589.7c-13.7-13.7-13.7-35.8 0-49.5 13.7-13.7 35.8-13.7 49.5 0L477 819.9V119.6c0-19.3 15.7-35 35-35s35 15.7 35 35v700.2l279.7-279.7c6.8-6.8 15.8-10.3 24.7-10.3s17.9 3.4 24.7 10.3c13.7 13.8 13.7 35.9 0.1 49.6z" p-id="1998" ></path></svg>',upTop:'<svg t="1650442106652" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1839" width="11" height="11"><path d="M548.352 219.648a58.88 58.88 0 0 0-16.896-10.752 51.2 51.2 0 0 0-38.912 0 58.88 58.88 0 0 0-16.896 10.752l-256 256a51.2 51.2 0 0 0 72.704 72.704L460.8 379.392V972.8a51.2 51.2 0 0 0 102.4 0V379.392l168.448 168.96a51.2 51.2 0 0 0 72.704-72.704zM972.8 0H51.2a51.2 51.2 0 0 0 0 102.4h921.6a51.2 51.2 0 0 0 0-102.4z" p-id="1840" ></path></svg>',downTop:'<svg t="1650442146918" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2045" width="11" height="11"><path d="M548.352 804.352a58.88 58.88 0 0 1-16.896 10.752 51.2 51.2 0 0 1-38.912 0 58.88 58.88 0 0 1-16.896-10.752l-256-256a51.2 51.2 0 0 1 72.704-72.704L460.8 644.608V51.2a51.2 51.2 0 0 1 102.4 0v593.408l168.448-168.96a51.2 51.2 0 0 1 72.704 72.704zM972.8 1024H51.2a51.2 51.2 0 0 1 0-102.4h921.6a51.2 51.2 0 0 1 0 102.4z" p-id="2046"></path></svg>'}[e]),l=()=>{i.editor.up()},c=()=>{i.editor.toFront()},u=()=>{i.editor.down()},d=()=>{i.editor.toBack()},h=()=>{n.value=[...i.canvas?.getObjects().filter((e=>!(e instanceof Tm.fabric.GuideLine||"workspace"===e.id)))||[]].reverse().map((e=>{const{type:t,id:i,name:n,text:r,selectable:o}=e;return{type:t,id:i,name:n,text:r,isLock:!o}})),n.value=hh(tn(n),"id")};return qi((()=>{h(),i.canvas?.on("after:render",h)})),Yn((()=>{i.canvas?.off("after:render",h)})),(e,h)=>{const p=Ye,f=Cf,g=He,v=yf,m=ii;return Ki(),Ji("div",JB,[tn(n).length?(Ki(),Ji(Cn,{key:0},[rn("div",ZB,[(Ki(!0),Ji(Cn,null,zn(tn(n),(e=>(Ki(),Ji("div",{onClick:t=>a(e.id),key:e.id,class:en(r(e)&&"active")},[Tn(v,{class:"ellipsis"},{default:an((()=>[Tn(f,{span:22},{default:an((()=>[Tn(p,{content:e.name||e.text||e.type,placement:"left"},{default:an((()=>{return[rn("div",null,[rn("span",{class:en(r(e)&&"active"),innerHTML:(t=e.type,{group:'<svg t="1650855307397" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2503" width="16" height="16"><path d="M839.036 130.458h-654.072c-30.102 0-54.506 24.404-54.506 54.506v654.072c0 30.102 24.404 54.506 54.506 54.506h654.072c30.102 0 54.506-24.404 54.506-54.506v-654.072c0-30.102-24.404-54.506-54.506-54.506zM839.036 811.786c0 15.050-12.196 27.249-27.249 27.249h-598.721c-15.050 0-27.249-12.196-27.249-27.249v-598.721c0-15.050 12.196-27.249 27.249-27.249h598.721c15.049 0 27.249 12.196 27.249 27.249v598.721zM730.028 421.639h-127.324v-126.817c0-30.091-24.402-54.499-54.501-54.499h-252.755c-30.098 0-54.501 24.401-54.501 54.499v253.89c0 30.091 24.402 54.499 54.501 54.499h127.324v126.817c0 30.091 24.402 54.499 54.501 54.499h252.755c30.098 0 54.501-24.401 54.501-54.499v-253.89c0-30.091-24.402-54.499-54.501-54.499zM323.36 548.137c-15.050 0-27.251-12.207-27.251-27.26v-197.694c0-15.055 12.201-27.26 27.251-27.26h196.928c15.051 0 27.251 12.207 27.251 27.26v98.458h-70.267c-30.098 0-54.501 24.401-54.501 54.499v71.998h-99.411zM547.539 477.24v43.638c0 15.055-12.202 27.26-27.251 27.26h-42.353v-43.638c0-15.055 12.202-27.26 27.251-27.26h42.353zM729.365 702.193c0 15.055-12.201 27.26-27.251 27.26h-196.928c-15.050 0-27.251-12.207-27.251-27.26v-98.981h70.267c30.098 0 54.501-24.401 54.501-54.499v-71.474h99.411c15.050 0 27.251 12.207 27.251 27.26v197.693z" p-id="2504"></path></svg>',textbox:'<svg t="1650854954008" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14038" width="16" height="16"><path d="M720.832 692.352h-12.64L530.208 260.448a19.968 19.968 0 0 0-36.416 0L316.608 692.352h-13.44c-7.904 0-15.04 3.968-17.408 11.072a19.872 19.872 0 0 0 18.208 27.68h56.96c9.504 0 18.208-6.336 19.776-15.808a18.752 18.752 0 0 0-15.808-21.344l36.384-87.808h159.776l34.816 87.808a18.88 18.88 0 0 0-15.808 21.344c1.568 9.504 10.272 15.808 19.776 15.808h121.024c7.904 0 15.04-3.968 17.408-11.072a19.2 19.2 0 0 0-17.408-27.68z m-306.112-125.76l64.864-158.208 64.864 158.208H414.72z m-246.816-80.704c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.872-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c-0.8-6.336-5.536-11.072-11.872-11.072s-11.872 5.536-11.872 11.872v23.744c0 6.336 4.736 11.072 11.872 11.072z m-11.872 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 7.104 4.736 11.872 11.872 11.872a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m665.248-227.808c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.072-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744c0.8 7.104 5.536 11.872 11.872 11.872z m-11.072 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m-347.264 119.456h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m151.872 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-228.608 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-75.136-7.904H222.496v-11.072a12.48 12.48 0 0 0-12.672-12.64h-18.976v-37.984c0-7.104-5.536-12.64-11.872-12.64s-11.872 5.536-11.872 12.64v37.984h-10.272a12.512 12.512 0 0 0-12.672 12.64v52.992a12.48 12.48 0 0 0 12.672 12.64h52.992a12.512 12.512 0 0 0 12.672-12.64v-11.072h35.584c7.104-1.568 12.672-7.904 12.672-14.24 0-7.104-12.672-16.608-12.672-16.608z m379.68 7.904h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-251.52-642.304h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-75.936 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m151.872 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-227.808 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-7.104 0.8-11.872 5.536-11.872 12.672s4.736 11.072 11.872 11.072zM257.28 167.904H221.696v-11.072a12.512 12.512 0 0 0-12.672-12.672H156.832a12.512 12.512 0 0 0-12.672 12.672v52.992c0 7.104 5.536 12.672 12.672 12.672h11.072v35.584c1.568 7.104 7.904 12.672 14.24 12.672s16.608-12.672 16.608-12.672V222.496h11.072a12.512 12.512 0 0 0 12.672-12.672v-18.976h35.584a12.16 12.16 0 0 0 11.872-11.872 12.224 12.224 0 0 0-12.672-11.072z m356.768 22.944h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m76.736 0h23.744c6.336 0 11.072-4.736 11.072-11.072s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.072 12.64 11.072z m176.384-46.656h-52.992a12.48 12.48 0 0 0-12.64 12.672v11.072h-35.584c-7.104 1.568-12.64 7.904-12.64 14.24s12.64 16.608 12.64 16.608h35.584v11.072c0 7.104 5.536 12.672 12.64 12.672h18.976v37.984c0 7.104 5.536 12.672 11.872 12.672s11.872-5.536 11.872-12.672V222.528h11.072a12.48 12.48 0 0 0 12.64-12.672V156.864a13.76 13.76 0 0 0-13.44-12.672z m0 657.312h-11.072v-35.584c-1.568-7.104-7.904-12.64-14.24-12.64-7.104 0-16.608 12.64-16.608 12.64v35.584h-11.072a12.48 12.48 0 0 0-12.64 12.64v18.976h-35.584c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h35.584v11.072a12.48 12.48 0 0 0 12.64 12.64h52.992a12.48 12.48 0 0 0 12.64-12.64v-52.992c0-7.904-5.536-13.44-12.64-13.44z" p-id="14039"></path></svg>',"i-text":'<svg t="1650875455324" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5401" width="16" height="16"><path d="M213.333333 209.92v128h85.333334v-42.666667h170.666666v433.493334H384.853333v85.333333h256v-85.333333H554.666667V295.253333h170.666666v42.666667h85.333334v-128H213.333333z" p-id="5402"></path></svg>',image:'<svg t="1650855321307" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2701" width="16" height="16"><path d="M813.752 223.168H209.584a25.168 25.168 0 0 0-25.168 25.176v528.648a25.16 25.16 0 0 0 25.168 25.168h604.168a25.152 25.152 0 0 0 25.168-25.168V248.344a25.168 25.168 0 0 0-25.168-25.176z m-8.08 544.168H217.664V258h588.008v509.336z" p-id="2702"></path><path d="M406.752 454.168a44.24 44.24 0 1 0-0.008-88.48 44.24 44.24 0 0 0 0.008 88.48zM474.72 611.368l-67.968-94.376-110.584 158.336h442.328L605.8 426.52z" p-id="2703"></path></svg>',rect:'<svg t="1650855811131" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18499" width="16" height="16"><path d="M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z" p-id="18500"></path></svg>',circle:'<svg t="1650855860236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19440" width="16" height="16"><path d="M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z" p-id="19441"></path></svg>',triangle:'<svg t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="16" height="16"><path d="M928.64 896a2.144 2.144 0 0 1-0.64 0H96a32.032 32.032 0 0 1-27.552-48.288l416-704c11.488-19.456 43.552-19.456 55.104 0l413.152 699.2A31.936 31.936 0 0 1 928.64 896zM152.064 832h719.84L512 222.912 152.064 832z" p-id="2033"></path></svg>',polygon:'<svg t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="16" height="16"><path d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>'}[t]||'<svg t="1650855578257" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17630" width="16" height="16"><path d="M620.606061 0a62.060606 62.060606 0 0 1 62.060606 62.060606v188.943515C874.945939 273.997576 1024 437.651394 1024 636.121212c0 214.217697-173.661091 387.878788-387.878788 387.878788-198.469818 0-362.123636-149.054061-385.117091-341.333333H62.060606a62.060606 62.060606 0 0 1-62.060606-62.060606V62.060606a62.060606 62.060606 0 0 1 62.060606-62.060606h558.545455z m62.060606 297.937455V620.606061a62.060606 62.060606 0 0 1-62.060606 62.060606H297.937455C320.636121 849.159758 463.39103 977.454545 636.121212 977.454545c188.509091 0 341.333333-152.824242 341.333333-341.333333 0-172.730182-128.294788-315.485091-294.787878-338.183757zM620.606061 46.545455H62.060606a15.515152 15.515152 0 0 0-15.406545 13.699878L46.545455 62.060606v558.545455a15.515152 15.515152 0 0 0 13.699878 15.406545L62.060606 636.121212h186.181818c0-214.217697 173.661091-387.878788 387.878788-387.878788V62.060606a15.515152 15.515152 0 0 0-13.699879-15.406545L620.606061 46.545455z m15.515151 248.242424c-188.509091 0-341.333333 152.824242-341.333333 341.333333h325.818182a15.515152 15.515152 0 0 0 15.406545-13.699879L636.121212 620.606061V294.787879z" p-id="17631"></path></svg>')},null,10,tO),kn(" | "+ln(o(e.type,e)),1)])];var t})),_:2},1032,["content"])])),_:2},1024),Tn(f,{span:2},{default:an((()=>[Tn(g,{icon:e.isLock?tn(ei):tn(ti),link:"",onClick:t=>(e=>{a(e.id),e.isLock?i.editor.unLock():i.editor.lock(),i.canvas?.discardActiveObject()})(e)},null,8,["icon","onClick"])])),_:2},1024)])),_:2},1024)],10,eO)))),128))]),rn("div",iO,[yn(Tn(m,null,{default:an((()=>[Tn(g,{onClick:l},{default:an((()=>[rn("span",{innerHTML:s("up")},null,8,nO)])),_:1}),Tn(g,{onClick:u},{default:an((()=>[rn("span",{innerHTML:s("down")},null,8,rO)])),_:1}),Tn(g,{onClick:c},{default:an((()=>[rn("span",{innerHTML:s("upTop")},null,8,oO)])),_:1}),Tn(g,{onClick:d},{default:an((()=>[rn("span",{innerHTML:s("downTop")},null,8,aO)])),_:1})])),_:1},512),[[jn,"one"===tn(t).mSelectMode]])])],64)):(Ki(),Ji("p",sO,""))])}}}),cO=vr(lO,[["__scopeId","data-v-660adcfa"]]),uO=vr({},[["render",function(e,t){return Ki(),Ji("div",null,"")}]]),dO={class:"w-full relative"},hO={class:"w-full h-48px box-border px-16px border-b-1px border-b-solid border-b-[rgba(0_0_0/0.08)] mb-12px"},pO={class:"w-full h-full flex justify-between items-center"},fO={class:"h-full flex justify-start items-center text-14px"},gO={class:"flex"},vO={class:"w-full h-full flex justify-start items-center"},mO={class:"box-border px-10px"},AO=Wi({__name:"index",setup(e){const t=VI(),{panelType:i}=Er(t),n={canvas:uO,layer:cO},r=Xi(!1),o=Xi("canvas"),a=pn((()=>{let e="";switch(tn(o)){case"canvas":e="";break;case"layer":e=""}return e})),s=J((function(e){o.value=e}),250),l=J((function(){r.value=!0}),250);return fn((()=>i.value),(e=>{if(e===PI.canvas)o.value="canvas";else{if(e!==PI.layer)return"";o.value="layer"}}),{immediate:!0}),(e,t)=>{const i=ve,c=He,u=Ue;return Ki(),Ji("div",dO,[rn("div",hO,[yn(rn("div",pO,[rn("ul",fO,[rn("li",{class:en(["h-full f-center cursor-pointer select-none mr-10px",["canvas"===tn(o)?"text-#333 font-500 tab-active":""]]),onClick:t[0]||(t[0]=e=>tn(s)("canvas"))},"  ",2),rn("li",{class:en(["h-full f-center cursor-pointer select-none",["layer"===tn(o)?"text-#333 font-500 tab-active":""]]),onClick:t[1]||(t[1]=e=>tn(s)("layer"))},"  ",2)]),rn("div",gO,["canvas"===tn(o)?(Ki(),on(c,{key:0,text:"",onClick:e.createTemplate,style:{padding:"0",width:"32px","border-radius":"6px"}},{default:an((()=>[Tn(i,{style:{"font-size":"20px"}},{default:an((()=>[Tn(tn(ut))])),_:1})])),_:1},8,["onClick"])):En("",!0),Tn(c,{text:"",onClick:tn(l),style:{padding:"0",width:"32px","border-radius":"6px",margin:"0"}},{default:an((()=>[Tn(i,{style:{"font-size":"20px"}},{default:an((()=>[Tn(tn(ni))])),_:1})])),_:1},8,["onClick"])])],512),[[jn,!tn(r)]]),yn(rn("div",vO,[Tn(i,{class:"mr-8px"},{default:an((()=>[Tn(tn(ni))])),_:1}),Tn(u,{placeholder:tn(a),onBlur:t[2]||(t[2]=e=>r.value=!1)},null,8,["placeholder"])],512),[[jn,tn(r)]])]),rn("div",mO,[(Ki(),on(Sr,null,[(Ki(),on(sn(n[tn(o)])))],1024))])])}}}),bO=vr(AO,[["__scopeId","data-v-64aeb02c"]]),yO={class:"box-border p-10px"},xO=vr({},[["render",function(e,t){return Ki(),Ji("div",yO,"")}]]),wO={class:"w-full h-fullr"},_O=rn("div",{class:"h-36px leading-36px font-bold ml-10px"},"",-1),CO={class:"flex justify-start items-center flex-wrap min-h-40px"},kO=["onClick"],EO={class:"text-12px mt-10px"},SO={class:"-mt-10px"},IO=rn("div",{class:"h-36px leading-36px font-bold ml-10px"},"",-1),BO={class:"flex justify-start items-center flex-wrap min-h-40px"},OO=["onClick"],TO={class:"text-12px mt-10px"},DO={class:"-mt-10px"},MO=rn("div",{class:"h-36px leading-36px font-bold ml-10px"},"",-1),QO={class:"flex justify-start items-center flex-wrap min-h-40px"},LO=["onClick"],jO=["innerHTML"],PO={class:"-mt-10px"},FO=rn("div",{class:"h-36px leading-36px font-bold ml-10px"},"",-1),RO={class:"flex justify-start items-center flex-wrap min-h-40px"},zO=["onClick"],NO=["innerHTML"],VO=Wi({__name:"index",setup(e){const{getImgStr:t,selectFiles:i}=cb,n=VI(),r=Xi(!1),o=async(e,t)=>{n.editor.clear(),n.editor.setSize(e,t),Pt.success("")},a={shadow:"",fontFamily:"arial"};J((function(){i({accept:"image/*",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{d(e)}))}))}))}),250);const s=J((async function(e){const o=Ft.service({lock:!0,body:!0});try{switch(e){case NI.design:r.value=!0;break;case NI.img:i({accept:"image/*",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{d(e)}))}))}));break;case NI.svg:i({accept:".svg",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{!function(e){if(!e)throw new Error("file is undefined");Tm.fabric.loadSVGFromURL(e,((e,t)=>{const i=Tm.fabric.util.groupSVGElements(e,{...t,name:"defaultSVG",id:SA()});n.editor.addBaseType(i,{scale:!0})}))}(e)}))}))}));break;case NI.json:n.editor.insert();break;case NI.psd:await n.editor.insertPSD()}o.close()}catch(a){o.close()}}),250),l=J((function(e){let t;switch(e){case FI.h1:t=new Tm.fabric.Textbox("",{...a,fontWeight:"bold",fontSize:80,fill:"#000000"});break;case FI.h2:t=new Tm.fabric.Textbox("",{...a,fontWeight:"bold",fontSize:60,fill:"#000000"});break;case FI.normal:t=new Tm.fabric.Textbox("",{...a,fontSize:48,fill:"#000000"})}t&&n.editor.addBaseType(t,{center:!0})}),250),c=J((function(e){switch(e){case RI.react:const e=new Tm.fabric.Rect({...a,fill:"#F57274FF",width:400,height:400,name:""});n.editor.addBaseType(e,{center:!0});break;case RI.triangle:const t=new Tm.fabric.Triangle({...a,width:400,height:400,fill:"#92706BFF",name:""});n.editor.addBaseType(t,{center:!0});break;case RI.around:const i=new Tm.fabric.Circle({...a,radius:150,fill:"#57606BFF",name:""});n.editor.addBaseType(i,{center:!0});break;case RI.polygon:const r=new Tm.fabric.Polygon(M_(5,200),{...a,fill:"#CCCCCCFF",name:""});r.set({width:400,height:400,pathOffset:{x:0,y:0}}),n.editor.addBaseType(r,{center:!0});break;case RI.line:const o=new Tm.fabric.Line([100,100,10,10],{...a,stroke:"#333",fill:"#333",name:""});n.editor.addBaseType(o,{center:!0})}}),250),u=J((function(e){switch(e){case zI.qrcode:n.editor.addQrCode();break;case zI.barCode:n.editor.addBarcode()}}),250);function d(e){if(!e)throw new Error("file is undefined");const t=document.createElement("img");t.src=e,document.body.appendChild(t),t.onload=async()=>{const e=await n.editor.createImgByElement(t);n.editor.addBaseType(e,{scale:!0}),t.remove()}}return(e,t)=>{const i=Vt;return Ki(),Ji("div",wO,[rn("section",null,[_O,rn("ul",CO,[(Ki(!0),Ji(Cn,null,zn(tn(BB),(e=>(Ki(),Ji("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:e.type,onClick:t=>tn(s)(e.type)},[Tn(i,{extClass:"text-24px",icon:e.icon,color:"#333"},null,8,["icon"]),rn("span",EO,ln(e.name),1)],8,kO)))),128))])]),rn("section",SO,[IO,rn("ul",BO,[(Ki(!0),Ji(Cn,null,zn(tn(EB),(e=>(Ki(),Ji("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:e.type,onClick:t=>tn(l)(e.type)},[Tn(i,{extClass:"text-24px",icon:e.icon,color:"#333"},null,8,["icon"]),rn("span",TO,ln(e.name),1)],8,OO)))),128))])]),rn("section",DO,[MO,rn("ul",QO,[(Ki(!0),Ji(Cn,null,zn(tn(SB),(e=>(Ki(),Ji("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:e.type,onClick:t=>tn(c)(e.type)},[rn("div",{class:"w-24px h-24px",innerHTML:e.icon},null,8,jO)],8,LO)))),128))])]),rn("section",PO,[FO,rn("ul",RO,[(Ki(!0),Ji(Cn,null,zn(tn(IB),(e=>(Ki(),Ji("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:e.type,onClick:t=>tn(u)(e.type)},[rn("div",{class:"w-24px h-24px",innerHTML:e.icon},null,8,NO)],8,zO)))),128))])]),Tn(mB,{title:"",show:tn(r),"onUpdate:show":t[0]||(t[0]=e=>xn(r)?r.value=e:null),onSet:o},null,8,["show"])])}}}),UO=e=>(Ar("data-v-abb10d09"),e=e(),br(),e),HO={class:"box-border p-10px"},GO={class:"tool-box"},YO=[UO((()=>rn("svg",{t:"1650875455324",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5401",width:"26",height:"26"},[rn("path",{d:"M213.333333 209.92v128h85.333334v-42.666667h170.666666v433.493334H384.853333v85.333333h256v-85.333333H554.666667V295.253333h170.666666v42.666667h85.333334v-128H213.333333z","p-id":"5402"})],-1)))],WO=[UO((()=>rn("svg",{t:"1650854954008",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14038",width:"26",height:"26"},[rn("path",{d:"M720.832 692.352h-12.64L530.208 260.448a19.968 19.968 0 0 0-36.416 0L316.608 692.352h-13.44c-7.904 0-15.04 3.968-17.408 11.072a19.872 19.872 0 0 0 18.208 27.68h56.96c9.504 0 18.208-6.336 19.776-15.808a18.752 18.752 0 0 0-15.808-21.344l36.384-87.808h159.776l34.816 87.808a18.88 18.88 0 0 0-15.808 21.344c1.568 9.504 10.272 15.808 19.776 15.808h121.024c7.904 0 15.04-3.968 17.408-11.072a19.2 19.2 0 0 0-17.408-27.68z m-306.112-125.76l64.864-158.208 64.864 158.208H414.72z m-246.816-80.704c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.872-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c-0.8-6.336-5.536-11.072-11.872-11.072s-11.872 5.536-11.872 11.872v23.744c0 6.336 4.736 11.072 11.872 11.072z m-11.872 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 7.104 4.736 11.872 11.872 11.872a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m665.248-227.808c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.072-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744c0.8 7.104 5.536 11.872 11.872 11.872z m-11.072 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m-347.264 119.456h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m151.872 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-228.608 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-75.136-7.904H222.496v-11.072a12.48 12.48 0 0 0-12.672-12.64h-18.976v-37.984c0-7.104-5.536-12.64-11.872-12.64s-11.872 5.536-11.872 12.64v37.984h-10.272a12.512 12.512 0 0 0-12.672 12.64v52.992a12.48 12.48 0 0 0 12.672 12.64h52.992a12.512 12.512 0 0 0 12.672-12.64v-11.072h35.584c7.104-1.568 12.672-7.904 12.672-14.24 0-7.104-12.672-16.608-12.672-16.608z m379.68 7.904h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-251.52-642.304h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-75.936 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m151.872 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-227.808 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-7.104 0.8-11.872 5.536-11.872 12.672s4.736 11.072 11.872 11.072zM257.28 167.904H221.696v-11.072a12.512 12.512 0 0 0-12.672-12.672H156.832a12.512 12.512 0 0 0-12.672 12.672v52.992c0 7.104 5.536 12.672 12.672 12.672h11.072v35.584c1.568 7.104 7.904 12.672 14.24 12.672s16.608-12.672 16.608-12.672V222.496h11.072a12.512 12.512 0 0 0 12.672-12.672v-18.976h35.584a12.16 12.16 0 0 0 11.872-11.872 12.224 12.224 0 0 0-12.672-11.072z m356.768 22.944h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m76.736 0h23.744c6.336 0 11.072-4.736 11.072-11.072s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.072 12.64 11.072z m176.384-46.656h-52.992a12.48 12.48 0 0 0-12.64 12.672v11.072h-35.584c-7.104 1.568-12.64 7.904-12.64 14.24s12.64 16.608 12.64 16.608h35.584v11.072c0 7.104 5.536 12.672 12.64 12.672h18.976v37.984c0 7.104 5.536 12.672 11.872 12.672s11.872-5.536 11.872-12.672V222.528h11.072a12.48 12.48 0 0 0 12.64-12.672V156.864a13.76 13.76 0 0 0-13.44-12.672z m0 657.312h-11.072v-35.584c-1.568-7.104-7.904-12.64-14.24-12.64-7.104 0-16.608 12.64-16.608 12.64v35.584h-11.072a12.48 12.48 0 0 0-12.64 12.64v18.976h-35.584c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h35.584v11.072a12.48 12.48 0 0 0 12.64 12.64h52.992a12.48 12.48 0 0 0 12.64-12.64v-52.992c0-7.904-5.536-13.44-12.64-13.44z","p-id":"14039"})],-1)))],XO=[UO((()=>rn("svg",{t:"1650855811131",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18499",width:"26",height:"26"},[rn("path",{d:"M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z","p-id":"18500"})],-1)))],$O=[UO((()=>rn("svg",{t:"1650855860236",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19440",width:"26",height:"26"},[rn("path",{d:"M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z","p-id":"19441"})],-1)))],qO=[UO((()=>rn("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2032",width:"26",height:"26"},[rn("path",{d:"M928.64 896a2.144 2.144 0 0 1-0.64 0H96a32.032 32.032 0 0 1-27.552-48.288l416-704c11.488-19.456 43.552-19.456 55.104 0l413.152 699.2A31.936 31.936 0 0 1 928.64 896zM152.064 832h719.84L512 222.912 152.064 832z","p-id":"2033"})],-1)))],KO=[UO((()=>rn("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2032",width:"26",height:"26"},[rn("path",{d:"M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z","p-id":"2033"})],-1)))],JO={class:"tool-box"},ZO=[UO((()=>rn("svg",{t:"1673022047861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4206",width:"20",height:"20"},[rn("path",{d:"M187.733333 1024h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066667v-170.666666c0-10.24 6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667v170.666666c0 10.24-6.826667 17.066667-17.066667 17.066667zM34.133333 989.866667h136.533334v-136.533334H34.133333v136.533334zM1006.933333 204.8h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066667v-170.666666c0-10.24 6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667v170.666666c0 10.24-6.826667 17.066667-17.066667 17.066667zM853.333333 170.666667h136.533334V34.133333h-136.533334v136.533334z",fill:"","p-id":"4207"}),rn("path",{d:"M187.733333 853.333333c-3.413333 0-10.24 0-13.653333-3.413333-6.826667-6.826667-6.826667-17.066667 0-23.893333l648.533333-648.533334c6.826667-6.826667 17.066667-6.826667 23.893334 0s6.826667 17.066667 0 23.893334l-648.533334 648.533333c0 3.413333-6.826667 3.413333-10.24 3.413333z",fill:"","p-id":"4208"})],-1)))],eT=[UO((()=>rn("svg",{t:"1673026778912",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2659",width:"20",height:"20"},[rn("path",{d:"M320 738.133333L827.733333 230.4l-29.866666-29.866667L290.133333 708.266667v-268.8h-42.666666v341.333333h341.333333v-42.666667H320z",fill:"#444444","p-id":"2660"})],-1)))],tT=[UO((()=>rn("svg",{t:"1715323097309",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"24572",width:"20",height:"20"},[rn("path",{d:"M485.954269 735.978673 643.38051 811.107852C688.831327 832.798434 686.17686 860.459274 635.3838 871.903075L81.378406 996.721881C31.19882 1008.027444-1.313538 976.266799 10.130269 925.473745L134.949081 371.468357C146.254656 321.288783 173.611855 317.095036 195.744311 363.471653L270.873453 520.897858 903.670271 62.052983C986.301645 2.136458 1004.805285 20.426857 944.799125 103.181838L485.954269 735.978673Z",fill:"#444444","p-id":"24573"})],-1)))],iT=[UO((()=>rn("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"203255",width:"26",height:"26"},[rn("path",{d:"M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z","p-id":"203355"})],-1)))],nT={class:"tool-box"},rT=[UO((()=>rn("svg",{t:"1717679888665",class:"icon",viewBox:"0 0 1024 1024",version:"1.1","p-id":"4558",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},[rn("path",{d:"M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z","p-id":"4559"}),rn("path",{d:"M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z","p-id":"4560"}),rn("path",{d:"M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z","p-id":"4561"})],-1)))],oT=[UO((()=>rn("svg",{t:"1717679973041",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5747",width:"20",height:"20"},[rn("path",{d:"M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z","p-id":"5748"})],-1)))],aT={__name:"index",setup(e){const t={polygon:"polygon",freeDraw:"freeDraw",pathText:"pathText"},i={shadow:"",fontFamily:"arial"},{t:n}=Lt(),{canvasEditor:r}=HI(),o=On({isDrawingLineMode:!1,lineType:!1}),a=e=>{A();const t=new Tm.fabric.IText(n("everything_is_fine"),{...i,fontSize:80,fill:"#000000FF"});r.addBaseType(t,{center:!0,event:e})},s=e=>{A();const t=new Tm.fabric.Textbox(n("everything_goes_well"),{...i,splitByGrapheme:!0,width:400,fontSize:80,fill:"#000000FF"});r.addBaseType(t,{center:!0,event:e})},l=e=>{A();const t=new Tm.fabric.Triangle({...i,width:400,height:400,fill:"#92706BFF",name:""});r.addBaseType(t,{center:!0,event:e})},c=e=>{A();const t=new Tm.fabric.Polygon(M_(5,200),{...i,fill:"#CCCCCCFF",name:""});t.set({width:400,height:400,pathOffset:{x:0,y:0}}),r.addBaseType(t,{center:!0,event:e})},u=e=>{A();const t=new Tm.fabric.Circle({...i,radius:150,fill:"#57606BFF",name:""});r.addBaseType(t,{center:!0,event:e})},d=e=>{A();const t=new Tm.fabric.Rect({...i,fill:"#F57274FF",width:400,height:400,name:""});r.addBaseType(t,{center:!0,event:e})},h=()=>{const e=()=>{o.lineType=!1,o.isDrawingLineMode=!1,m(!o.isDrawingLineMode,!o.isDrawingLineMode)};o.lineType!==t.polygon?(f(),g(),o.lineType=t.polygon,o.isDrawingLineMode=!0,r.beginDrawPolygon(e),r.endDraw(),m(!o.isDrawingLineMode,!o.isDrawingLineMode)):r.discardPolygon()},p=()=>{o.lineType===t.freeDraw?(r.endDraw(),o.lineType=!1,o.isDrawingLineMode=!1):(f(),g(),o.lineType=t.freeDraw,o.isDrawingLineMode=!0,r.startDraw({width:20}))},f=()=>{r.discardPolygon(),r.endDraw(),r.endTextPathDraw()},g=()=>{o.isDrawingLineMode=!1,o.lineType="",r.setMode(o.isDrawingLineMode),r.setLineType(o.lineType)},v=e=>{[t.polygon,t.freeDraw,t.pathText].includes(o.lineType)&&f(),o.lineType===e?(o.isDrawingLineMode=!1,o.lineType=""):(o.isDrawingLineMode=!0,o.lineType=e),r.setMode(o.isDrawingLineMode),r.setLineType(e),m(!o.isDrawingLineMode,!o.isDrawingLineMode)},m=(e,t)=>{r.canvas.forEachObject((i=>{"workspace"!==i.id&&(i.selectable=t,i.evented=e)}))},A=()=>{o.isDrawingLineMode&&(o.isDrawingLineMode=!1,o.lineType="",r.setMode(!1),f(),m(!0,!0))};return Ir((()=>{A()})),(e,t)=>{const i=Ut,n=Vt;return Ki(),Ji("div",HO,[Tn(i,{"content-position":"left"},{default:an((()=>[kn(ln(e.$t("editor.common_elements")),1)])),_:1}),rn("div",GO,[rn("span",{onClick:t[0]||(t[0]=()=>a()),draggable:!0,onDragend:a},YO,32),rn("span",{onClick:t[1]||(t[1]=()=>s()),draggable:!0,onDragend:s},WO,32),rn("span",{onClick:t[2]||(t[2]=()=>d()),draggable:!0,onDragend:d},XO,32),rn("span",{onClick:t[3]||(t[3]=()=>u()),draggable:!0,onDragend:u},$O,32),rn("span",{onClick:t[4]||(t[4]=()=>l()),draggable:!0,onDragend:l},qO,32),rn("span",{onClick:t[5]||(t[5]=()=>c()),draggable:!0,onDragend:c},KO,32)]),Tn(i,{"content-position":"left"},{default:an((()=>[kn(ln(e.$t("editor.draw_elements")),1)])),_:1}),rn("div",JO,[rn("span",{onClick:t[6]||(t[6]=e=>v("line")),class:en(tn(o).isDrawingLineMode&&"line"===tn(o).lineType&&"bg")},ZO,2),rn("span",{onClick:t[7]||(t[7]=e=>v("arrow")),class:en(tn(o).isDrawingLineMode&&"arrow"===tn(o).lineType&&"bg")},eT,2),rn("span",{onClick:t[8]||(t[8]=e=>v("thinTailArrow")),class:en(tn(o).isDrawingLineMode&&"thinTailArrow"===tn(o).lineType&&"bg")},tT,2),rn("span",{onClick:h,class:en(tn(o).isDrawingLineMode&&"polygon"===tn(o).lineType&&"bg")},iT,2),rn("span",{onClick:p,class:en(tn(o).isDrawingLineMode&&"freeDraw"===tn(o).lineType&&"bg")},[Tn(n,{extClass:"text-20px",icon:"editor-brush"})],2)]),Tn(i,{"content-position":"left"},{default:an((()=>[kn(ln(e.$t("editor.code_img")),1)])),_:1}),rn("div",nT,[rn("span",{onClick:t[9]||(t[9]=(...e)=>tn(r).addQrCode&&tn(r).addQrCode(...e))},rT),rn("span",{onClick:t[10]||(t[10]=(...e)=>tn(r).addBarcode&&tn(r).addBarcode(...e))},oT)])])}}},sT=vr(aT,[["__scopeId","data-v-abb10d09"]]),lT=xr,cT=e=>or.get(`${lT}/api/templs/${e}`);function uT(e,t,i,n,r,o,a){var s;return s={populate:{img:"*"},filters:{},fields:a,pagination:{page:e,pageSize:o}},[{key:n,value:t,type:"$eq"},{key:r,value:i,type:"$contains"}].forEach((e=>{const{key:t,value:i,type:n}=e;i&&(s.filters[t]={[n]:i})})),Qt.stringify(s)}function dT(e){return lT+(e?.data?.attributes?.formats?.small?.url||e?.data?.attributes?.url||"")}function hT({typeUrl:e,listUrl:t,searchTypeKey:i,searchWordKey:n,scrollElement:r,pageSize:o,fields:a=[]}){const s=Xi(!1),l=Xi(""),c=Xi(""),u=Xi([]),d=pn((()=>{const e=u.value.find((e=>e.value===c.value));return e?.lable||""})),h=Xi([]),p=Xi(1),f=On({page:0,pageCount:0,pageSize:10,total:0}),g=pn((()=>f.page===p.value&&f.page>=f.pageCount)),v=async()=>{s.value=!0;try{const i=(await(t=e,or.get(`${lT}/api/${t}?pagination[pageSize]=200`))).data.data.map((e=>({value:e.id,label:e.attributes.name})));u.value=[{label:"",value:""},...i]}catch(i){u.value=[]}var t;s.value=!1},m=async()=>{s.value=!0;try{const s=uT(p.value,c.value,l.value,i,n,o,a),u=await(e=t,r=s,or.get(`${lT}/api/${e}?${r}`)),d=u.data.data.map((e=>{return{id:e.id,name:e.attributes.name,desc:e.attributes.desc,json:e.attributes?.json,src:(t=e.attributes.img,lT+(t?.data?.attributes?.url||"")),previewSrc:dT(e.attributes.img)};var t}));Object.keys(u.data.meta.pagination).forEach((e=>{f[e]=u.data.meta.pagination[e]})),h.value=[...h.value,...d]}catch(u){}var e,r;s.value=!1},A=Xi(!1),b=Xi(0);return{startPage:async()=>{const e=document.querySelector(r);b.value=e.offsetHeight,A.value=!0,await v(),await m()},searchKeyWord:l,typeValue:c,typeText:d,typeList:u,pageLoading:s,pageData:h,isDownBottm:g,startGetList:()=>{h.value=[],p.value=1,m()},nextPage:()=>{p.value>=f.pageCount||(p.value++,setTimeout((()=>{m()}),1e3))},scrollHeight:b,showScroll:A,getInfo:cT}}const pT={class:"box-border p-10px"},fT={class:"search-box"},gT={style:{height:"calc(100vh - 108px)"},id:"myTemplBox"},vT={class:"list-box"},mT={class:"tmpl-img-box"},AT={__name:"index",setup(e){const t=VI(),i=cr(),n=ur(),{t:r}=Lt();HI();const{startPage:o,typeValue:a,typeText:s,typeList:l,pageLoading:c,pageData:u,searchKeyWord:d,isDownBottm:h,startGetList:p,nextPage:f,showScroll:g,scrollHeight:v,getInfo:m}=hT({typeUrl:"templ-types",listUrl:"templs",searchTypeKey:"templ_type",searchWordKey:"name",pageSize:10,scrollElement:"#myTemplBox",fields:["name"]});a.value=4;const A=async e=>{const o=Ft.service({text:r("alert.loading_data")}),a=await m(e.id);n.query.admin?i.replace("/?tempId="+e.id+"&admin=true"):i.replace("/?tempId="+e.id),t.editor.loadJSON(JSON.stringify(a.data.data.attributes.json),o?.close())},b=J(p,200),y=Xi(),x=Xi(0),w=Z((function(e){if(tn(c))return;const t=y.value.wrapRef;y.value.moveY=100*t.scrollTop/t.clientHeight,y.value.moveX=100*t.scrollLeft/t.clientWidth;let i=t.scrollHeight-t.clientHeight;e.scrollTop+2>=i&&(x.value=e.scrollTop,f())}),300);return qi((()=>{o(),(async()=>{if(n.query.tempId)try{const e=Ft.service({text:r("alert.loading_data")}),i=await m(n.query.tempId);t.editor.loadJSON(JSON.stringify(i.data.data.attributes.json),e?.close())}catch(e){}})()})),(e,t)=>{const i=lv,n=sv,o=Ue,f=Lg,m=Ye,x=Ut,_=wt,C=ri;return Ki(),Ji("div",pT,[rn("div",fT,[Tn(n,{class:"select",modelValue:tn(a),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(a)?a.value=e:null),onChange:tn(b),disabled:tn(c),placeholder:""},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(l),(e=>(Ki(),on(i,{value:e.value,label:e.label,key:e.value},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange","disabled"]),Tn(o,{class:"input",placeholder:`${tn(s)}`,modelValue:tn(d),"onUpdate:modelValue":t[1]||(t[1]=e=>xn(d)?d.value=e:null),search:"",disabled:tn(c),onKeyup:Ln(tn(p),["enter"])},null,8,["placeholder","modelValue","disabled","onKeyup"])]),yn((Ki(),Ji("div",gT,[tn(g)?(Ki(),on(_,{ref_key:"scrollbarRef",ref:y,key:"mysscroll",onScroll:tn(w),height:tn(v)},{default:an((()=>[rn("div",vT,[(Ki(!0),Ji(Cn,null,zn(tn(u),(e=>(Ki(),on(m,{content:e.name,key:e.src,placement:"top"},{default:an((()=>[rn("div",mT,[Tn(f,{src:e.previewSrc,fit:"contain",height:"100%",alt:e.name,onClick:t=>(e=>{jt({title:r("tip"),message:`${r("replaceTip")}`,showCancelButton:!0,confirmButtonText:r("ok"),cancelButtonText:r("cancel")}).then((()=>A(e)))})(e)},null,8,["src","alt","onClick"])])])),_:2},1032,["content"])))),128))]),tn(h)?(Ki(),on(x,{key:0},{default:an((()=>[kn("")])),_:1})):En("",!0)])),_:1},8,["onScroll","height"])):En("",!0)])),[[C,tn(c)]])])}}},bT=vr(AT,[["__scopeId","data-v-68388ea3"]]),yT={class:"search-box"},xT=vr({__name:"SearchType",props:{typeListApi:{type:Function,Object:()=>({})}},emits:["change"],setup(e,{expose:t,emit:i}){const n=e,r=i,o=Xi(!1),a=Xi(""),s=Xi(""),l=Xi([]),c=pn((()=>{const e=l.value.find((e=>e.value===a.value));return e?.label||""}));qi((async()=>{o.value=!0;try{const e=(await n.typeListApi()).data.data.map((e=>({value:e.id,label:e.attributes.name})));l.value=[{label:"",value:""},...e]}catch(e){}o.value=!1}));const u=()=>{r("change",{searchKeyWord:s.value,typeValue:a.value})},d=()=>{a.value="",s.value="",u()},h=J(u,300);return t({setType:e=>{a.value=e}}),(e,t)=>{const i=He,n=lv,r=sv,p=Ue;return Ki(),Ji("div",yT,[tn(a)||tn(s)?(Ki(),on(i,{key:0,text:"",class:"back-btn",onClick:d,icon:tn(oi)},null,8,["icon"])):En("",!0),Tn(r,{class:"select",modelValue:tn(a),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(a)?a.value=e:null),disabled:tn(o),placeholder:"",onChange:u},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(l),(e=>(Ki(),on(n,{value:e.value,label:e.label,key:e.value},null,8,["value","label"])))),128))])),_:1},8,["modelValue","disabled"]),Tn(p,{class:"input",placeholder:`${tn(c)}`,modelValue:tn(s),"onUpdate:modelValue":t[1]||(t[1]=e=>xn(s)?s.value=e:null),disabled:tn(o),clearable:"",onChange:tn(h),onSearch:u,search:""},null,8,["placeholder","modelValue","disabled","onChange"])])}}},[["__scopeId","data-v-6dc45053"]]),wT={class:"material-type"},_T={class:"top"},CT={class:"img-box"},kT=["onClick","onDragend"],ET={__name:"TypeList",props:{typeApi:{type:Function},typeListApi:{type:Function},typeKey:{type:String},formatData:{type:Function}},emits:["click","dragend"],setup(e,{emit:t}){const i=t,n=e,r=Xi([]);return qi((async()=>{await(async()=>{const e=await n.typeApi();r.value=e.data.data.map((e=>({name:e.attributes.name,id:e.id,list:[]})))})(),await(async()=>{let e=0;for(const t of r.value){const i=await n.typeListApi({populate:{img:"*"},filters:{[n.typeKey]:{$eq:t.id}},pagination:{page:1,pageSize:8}});r.value[e].list=n.formatData(i.data.data),e++}})()})),(e,t)=>{const n=He,o=Lg;return Ki(),Ji("div",wT,[(Ki(!0),Ji(Cn,null,zn(tn(r),(e=>(Ki(),Ji("div",{class:"item",key:e.id},[rn("div",_T,[rn("h3",null,ln(e.name),1),Tn(n,{link:"",size:"small",onClick:t=>i("selectType",e.id)},{default:an((()=>[kn("")])),_:2},1032,["onClick"])]),rn("div",CT,[(Ki(!0),Ji(Cn,null,zn(e.list,(e=>(Ki(),Ji("div",{class:"img-item",key:e.id,onClick:t=>i("click",{info:e,e:t}),onDragend:t=>i("dragend",{info:e,e:t})},[Tn(o,{lazy:"",src:e.src,fit:"contain",width:"100%",height:"100%",alt:e.name},null,8,["src","alt"])],40,kT)))),128))])])))),128))])}}},ST=vr(ET,[["__scopeId","data-v-bfc18003"]]),IT=["id"],BT={key:0,class:"img-box"},OT=vr({__name:"PageList",props:{pageListApi:{type:Function},filters:{type:Object},DOMId:{type:String,default:""},formatData:{type:Function}},emits:["back","click","dragend"],setup(e,{expose:t,emit:i}){const n=i,r=e,{pageData:o,showScroll:a,scrollHeight:s,isDownBottom:l,pageLoading:c,startPage:u,startGetList:d,nextPage:h}=$t({el:"#"+r.DOMId,apiClient:r.pageListApi,filters:r.filters,sort:[],fields:[],formatData:r.formatData}),p=Xi(),f=Xi(0),g=Z((function(e){if(tn(c))return;const t=p.value.wrapRef;p.value.moveY=100*t.scrollTop/t.clientHeight,p.value.moveX=100*t.scrollLeft/t.clientWidth;let i=t.scrollHeight-t.clientHeight;e.scrollTop+2>=i&&(f.value=e.scrollTop,h())}),300);return qi((async()=>{u()})),t({startGetList:d,startPage:u}),(e,t)=>{const i=Lg,u=Ye,d=Ut,h=wt,f=ri;return yn((Ki(),Ji("div",{class:"page-list-box",style:{height:"calc(100vh - 100px)"},id:r.DOMId,"element-loading-text":"Loading...","element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[tn(a)?(Ki(),on(h,{ref_key:"scrollbarRef",ref:p,key:r.DOMId,height:tn(s),onScroll:tn(g)},{default:an((()=>[tn(o).length?(Ki(),Ji("div",BT,[(Ki(!0),Ji(Cn,null,zn(tn(o),(e=>(Ki(),Ji("div",{class:"img-item",key:e.id},[Tn(u,{content:e.name,placement:"top"},{default:an((()=>[Tn(i,{lazy:"",src:e.src,fit:"contain",style:{width:"90px",height:"90px"},alt:e.name,onClick:t=>n("click",{info:e,e:t}),onDragend:t=>n("dragend",{info:e,e:t})},null,8,["src","alt","onClick","onDragend"])])),_:2},1032,["content"])])))),128))])):En("",!0),tn(l)?(Ki(),on(d,{key:1},{default:an((()=>[kn(ln(tn(o).length?"":""),1)])),_:1})):En("",!0)])),_:1},8,["height","onScroll"])):En("",!0)],8,IT)),[[f,tn(c)]])}}},[["__scopeId","data-v-09ad8c35"]]),TT=UI();function DT(){const e=()=>TT.canvas?.getSelectionElement().getBoundingClientRect();return{getCanvasBound:e,isOutsideCanvas:(t,i)=>{const{left:n,right:r,top:o,bottom:a}=e();return t<n||t>r||i<o||i>a}}}const MT={class:"box-border p-10px"},QT={__name:"index",setup(e){const{canvasEditor:t}=HI(),{isOutsideCanvas:i}=DT(),n=Xi(),r=On({material_type:{$contains:""},name:{$contains:""}}),o=e=>e.map((e=>({id:e.id,name:e.attributes.name,desc:e.attributes.desc,src:qt(e.attributes.img),previewSrc:Kt(e.attributes.img)}))),a=async({searchKeyWord:e,typeValue:t})=>{r.name.$contains="",r.material_type.$contains="",await gn(),r.name.$contains=e,r.material_type.$contains=t},s=async e=>{r.material_type.$contains=e,n.value.setType(e),await gn()},l=async({e:e})=>{if(i(e.clientX,e.clientY))return;const n=await t.createImgByElement(e.target);t.addBaseType(n,{scale:!0,event:e})},c=async({e:e})=>{const i=await t.createImgByElement(e.target);t.addBaseType(i,{scale:!0})};return qi((async()=>{const e=ur();if(e?.query?.loadFile){const t=e.query.loadFile,i=await cb.insertImgFile(t);c({target:i})}})),(e,t)=>(Ki(),Ji("div",MT,[Tn(xT,{ref_key:"selectTypeRef",ref:n,typeListApi:tn(ai),onChange:a},null,8,["typeListApi"]),yn(Tn(ST,{typeApi:tn(ai),typeListApi:tn(si),typeKey:"material_type",formatData:o,onSelectType:s,onClick:c,onDragend:l},null,8,["typeApi","typeListApi"]),[[jn,!tn(r).material_type.$contains&&!tn(r).name.$contains]]),tn(r).material_type.$contains||tn(r).name.$contains?(Ki(),on(OT,{key:0,DOMId:"materialList",pageListApi:tn(li),filters:tn(r),onClick:c,formatData:o,onDragend:l},null,8,["pageListApi","filters"])):En("",!0)]))}},LT={class:"box-border p-10px"},jT={__name:"index",setup(e){const{t:t}=Lt(),{canvasEditor:i}=HI(),{isOutsideCanvas:n}=DT(),r=async({e:e,info:r})=>{if(n(e.clientX,e.clientY))return;const o=Ft.service({text:t("alert.loading_data")});await i.downFontByJSON(JSON.stringify(r.json));const s=JSON.parse(JSON.stringify(r.json)),l=a(s.type);new Tm.fabric[l].fromObject(s,(t=>{i.addBaseType(t,{event:e}),o.close()}))},o=async({info:e})=>{const n=Ft.service({text:t("alert.loading_data")});await i.downFontByJSON(JSON.stringify(e.json));const r=JSON.parse(JSON.stringify(e.json));r.id=SA();const o=a(r.type);new Tm.fabric[o].fromObject(r,(e=>{i.addBaseType(e),n.close()}))};function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}const s=Xi(),l=On({font_style_type:{$contains:""},name:{$contains:""}}),c=e=>e.map((e=>({id:e.id,name:e.attributes.name,desc:e.attributes.desc,json:e.attributes.json,src:qt(e.attributes.img),previewSrc:Kt(e.attributes.img)}))),u=async({searchKeyWord:e,typeValue:t})=>{l.name.$contains="",l.font_style_type.$contains="",await gn(),l.name.$contains=e,l.font_style_type.$contains=t},d=async e=>{l.font_style_type.$contains=e,s.value.setType(e),await gn()};return(e,t)=>(Ki(),Ji("div",LT,[Tn(xT,{ref_key:"selectTypeRef",ref:s,typeListApi:tn(ci),onChange:u},null,8,["typeListApi"]),yn(Tn(ST,{typeApi:tn(ci),typeListApi:tn(ui),typeKey:"font_style_type",formatData:c,onSelectType:d,onClick:o,onDragend:r},null,8,["typeApi","typeListApi"]),[[jn,!tn(l)?.font_style_type.$contains&&!tn(l)?.name.$contains]]),tn(l)?.font_style_type.$contains||tn(l)?.name.$contains?(Ki(),on(OT,{key:0,DOMId:"fontMaterialList",pageListApi:tn(di),filters:tn(l),formatData:c,onClick:o,onDragend:r},null,8,["pageListApi","filters"])):En("",!0)]))}},PT={class:"flex justify-start max-w-384px basis-72px"},FT={class:"relative bg-#fff z-1 w-72px flex flex-col items-center pt-10px box-border border-r-#eef2f8 border-r-solid border-r-1px"},RT=["onClick"],zT=[(e=>(Ar("data-v-3fd73b33"),e=e(),br(),e))((()=>rn("img",{src:"data:image/svg+xml,%3csvg%20width='15'%20height='92'%20viewBox='0%200%2015%2092'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2092L2%200H3C3%203.77087%204.42026%207.40332%206.97794%2010.1742L10.4917%2013.9807C13.3904%2017.121%2015%2021.2378%2015%2025.5115V66.626C15%2071.0146%2013.3028%2075.2332%2010.2636%2078.399L7.1792%2081.6119C4.4975%2084.4054%203%2088.1277%203%2092H2Z'%20fill='white'/%3e%3cpath%20d='M2%2092H3C3%2088.1277%204.4975%2084.4054%207.17919%2081.612L10.2636%2078.3991C13.3028%2075.2332%2015%2071.0147%2015%2066.6261V25.5115C15%2021.2379%2013.3904%2017.121%2010.4917%2013.9807L6.97795%2010.1742C4.42026%207.40337%203%203.77085%203%200H2C2%201.91731%202.34422%203.80108%203%205.56777C3.71995%207.50734%204.81541%209.30577%206.24314%2010.8525L9.75686%2014.659C12.4851%2017.6146%2014%2021.4892%2014%2025.5115V66.6261C14%2070.7565%2012.4027%2074.7269%209.5422%2077.7066L6.4578%2080.9195C4.92573%2082.5154%203.75601%2084.3955%203%2086.4322C2.34449%2088.1982%202%2090.0818%202%2092Z'%20fill='black'%20fill-opacity='0.08'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.44061%2041.6074L9.05932%2042.2261L5.28535%2046.0001L9.05932%2049.7741L8.44061%2050.3928L4.04791%2046.0001L8.44061%2041.6074Z'%20fill='%234C535C'/%3e%3c/svg%3e"},null,-1)))],NT=Wi({__name:"index",setup(e){const t=VI(),{panelType:i,showPanel:n,tabType:r,panelPositoin:o}=Er(t),a={[jI.create]:VO,[jI.template]:bT,[jI.element]:sT,[jI.ai]:xO,[jI.text]:jT,[jI.material]:QT,[jI.mine]:KB,[jI.none]:""},s=J((function(){t.setShowPanel(!1),l.value=jI.none}),250),l=Xi(jI.template),c=J((function(e,r){l.value=e,!tn(n)&&t.setShowPanel(!0),"bottom"===tn(o)&&t.setPanelPositoin("left"),tn(i)!==PI.menu&&(i.value=r),t.setTabType(e)}),250);return fn((()=>r.value),(e=>{tn(l)!==e&&(l.value=e)})),(e,t)=>{const r=Vt;return Ki(),Ji("section",PT,[rn("ul",FT,[(Ki(!0),Ji(Cn,null,zn(tn(kB),(e=>(Ki(),Ji("li",{class:"flex flex-col items-center mb-20px cursor-pointer",key:e.type,onClick:t=>tn(c)(e.type,tn(PI).menu)},[rn("div",{class:en(["px-10px f-center py-4px rounded-10px tab-item editor-item",[tn(l)===e.type?"tab-item_active":""]])},[Tn(r,{extClass:"text-20px",icon:e.icon,color:tn(l)===e.type?"#000":"#333"},null,8,["icon","color"])],2),rn("span",{class:en(["text-12px",[tn(l)===e.type?"font-bold":""]])},ln(e.name),3)],8,RT)))),128))]),"left"===tn(o)?(Ki(),Ji("div",{key:0,class:en(["relative h-full transition-all transition-ease left-style-panel",[tn(n)?"":"-ml-312px",tn(i)===tn(PI).menu?"w-312px":"w-224px"]])},[tn(n)&&tn(i)===tn(PI).menu?(Ki(),Ji(Cn,{key:0},[(Ki(),on(Sr,null,[(Ki(),on(sn(a[tn(l)])))],1024)),rn("div",{class:"inline-block absolute -right-13px top-50% -translate-y-50% z-1 cursor-pointer",onClick:t[0]||(t[0]=(...e)=>tn(s)&&tn(s)(...e))},zT)],64)):(Ki(),on(tn(bO),{key:1}))],2)):En("",!0)])}}}),VT=vr(NT,[["__scopeId","data-v-3fd73b33"]]),UT={class:"absolute right-10px bottom-10px"},HT=rn("svg",{t:"1650853919128",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1271",width:"14",height:"14"},[rn("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z","p-id":"1272"}),rn("path",{d:"M652.672 431.829333h-147.84V292.010667a35.968 35.968 0 1 0-71.978667 0v139.818666H292.010667a35.968 35.968 0 1 0 0 72.021334h140.8v140.8a35.968 35.968 0 1 0 72.021333 0v-140.8h147.84a35.968 35.968 0 1 0 0-72.021334z","p-id":"1273"})],-1),GT=rn("svg",{t:"1650853934351",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1470",width:"14",height:"14"},[rn("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z","p-id":"1471"}),rn("path",{d:"M652.672 431.829333H292.010667a35.968 35.968 0 1 0 0 72.021334h360.661333a35.968 35.968 0 1 0 0-72.021334z","p-id":"1472"})],-1),YT=Wi({__name:"Zoom",setup(e){const t=VI(),i=Xi(!1),n=e=>{e?t.editor.startDring():t.editor.endDring()},r=()=>{t.editor.one()},o=()=>{t.editor.big()},a=()=>{t.editor.small()},s=()=>{t.editor.auto()};return qi((()=>{gn((()=>{t.editor?.on("startDring",(()=>i.value=!0)),t.editor?.on("endDring",(()=>i.value=!1))}))})),Yn((()=>{t.editor?.off("startDring"),t.editor?.off("endDring")})),(e,t)=>{const l=em,c=He,u=Vt,d=ii;return Ki(),Ji("div",UT,[Tn(l,{modelValue:tn(i),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(i)?i.value=e:null),size:"large",class:"mr-10px","inline-prompt":"","active-text":"","inactive-text":"",onChange:n},null,8,["modelValue"]),Tn(d,null,{default:an((()=>[Tn(c,{onClick:o},{default:an((()=>[HT])),_:1}),Tn(c,{onClick:a},{default:an((()=>[GT])),_:1}),Tn(c,{onClick:r,icon:tn(Xe)},null,8,["icon"]),Tn(c,{onClick:s},{default:an((()=>[Tn(u,{extClass:"text-20px",color:"var(--color)",icon:"editor-suoxiao"})])),_:1})])),_:1})])}}}),WT={class:"box"},XT={__name:"DragMode",setup(e){const t=VI(),i=Xi(!1),n=e=>{e?t.editor?.startDring():t.editor?.endDring()};return qi((()=>{gn((()=>{t.editor?.on("startDring",(()=>i.value=!0)),t.editor?.on("endDring",(()=>i.value=!1))}))})),Yn((()=>{t.editor?.off("startDring"),t.editor?.off("endDring")})),(e,t)=>{const r=em;return Ki(),Ji("div",WT,[Tn(r,{size:"large",modelValue:tn(i),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(i)?i.value=e:null),onChange:n,width:"60","inline-prompt":"","active-text":"Drag","inactive-text":"Drag"},null,8,["modelValue"])])}}},$T=e=>(Ar("data-v-53e577b4"),e=e(),br(),e),qT={class:"w-full absolute left-0 right-0 bottom-0"},KT={class:"main-bottom relative bottom-0"},JT={class:"flex justify-between items-start"},ZT={class:"flex justify-start items-center"},eD=$T((()=>rn("div",{class:"text-14px h-24px leading-24px"},[rn("span",{class:"mr-4px"},""),rn("span",null,"1/1")],-1))),tD={class:"flex justify-end items-center"},iD={key:0,class:"main-panel mt-8px bg-#fff box-border rounded-12px"},nD=[$T((()=>rn("div",{class:"pb-1px mx-6px"}," 1 ",-1)))],rD=Wi({__name:"index",setup(e){const t=VI(),{panelPositoin:i,showPanel:n,panelType:r}=Er(t),o=J((function(e){tn(r)===e?(t.setShowPanel(!tn(n)),"bottom"===tn(i)&&t.setPanelPositoin("left")):(t.setPanelType(e),t.setShowPanel(!0))}),250),a=J((function(){t.setShowPanel(!tn(n))}),250),s=J((function(){t.setPanelPositoin("left"===tn(i)?"bottom":"left"),!tn(n)&&t.setShowPanel(!0)}),250);return(e,t)=>{const r=Vt,l=Ut,c=XT,u=YT;return Ki(),Ji("div",qT,[rn("div",KT,[rn("div",JT,[rn("div",ZT,[rn("div",{class:"f-center p-5px rounded-6px cursor-pointer bg-#fff",onClick:t[0]||(t[0]=wn((e=>tn(o)(tn(PI).layer)),["stop"]))},[Tn(r,{icon:"editor-layer",extClass:"text-20px"})]),rn("div",{class:"ml-4px f-center p-4px rounded-6px cursor-pointer bg-#fff panel-canvas",onClick:t[3]||(t[3]=e=>tn(o)(tn(PI).canvas))},[eD,rn("div",{class:en(["ml-4px",["bottom"===tn(i)?"rotate-270":""]]),onClick:t[1]||(t[1]=wn(((...e)=>tn(a)&&tn(a)(...e)),["stop"]))},[Tn(r,{icon:"unfold",extClass:"text-16px"})],2),rn("div",{class:"hidden panel-position items-center",onClick:t[2]||(t[2]=wn(((...e)=>tn(s)&&tn(s)(...e)),["stop"]))},[Tn(l,{direction:"vertical"}),Tn(r,{class:en(["bottom"===tn(i)?"rotate-270":""]),icon:"panel-position",extClass:"text-16px"},null,8,["class"])])])]),rn("div",tD,[Tn(c),Tn(u)])]),"bottom"===tn(i)&&tn(n)?(Ki(),Ji("div",iD,nD)):En("",!0)])])}}}),oD=vr(rD,[["__scopeId","data-v-53e577b4"]]),aD={class:"flex-1 w-full relative overflow-hidden",id:"workspace"},sD={class:"relative"},lD=(e=>(Ar("data-v-06a4c87a"),e=e(),br(),e))((()=>rn("div",{class:"absolute w-full z-2 inside-shadow"},null,-1))),cD=Wi({__name:"index",setup(e){const t=VI(),i=pn((()=>t.rulerEnable));return(e,t)=>(Ki(),Ji("section",aD,[rn("div",sD,[lD,rn("canvas",{class:en(["w-300px h-300px mx-auto",tn(i)?"design-stage-grid":""]),id:"canvas"},null,2),Tn(oD)])]))}}),uD=vr(cD,[["__scopeId","data-v-06a4c87a"]]),dD={key:0,class:"mb-10px attr-item-box"},hD=rn("h4",null,"",-1),pD=Wi({__name:"AttributeId",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=On({id:0,linkData:["",""]}),o=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||t&&(r.id=t.get("id"),r.linkData=t.get("linkData")||["",""])},a=(e,t)=>{const n=i.canvas?.getActiveObjects()[0];n&&(n&&n.set(e,t),i.canvas?.renderAll())},s=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{o(),i.editor?.on("selectCancel",s),i.editor?.on("selectOne",o),i.canvas?.on("object:modified",o)}))})),Yn((()=>{i.editor?.off("selectCancel",s),i.editor?.off("selectOne",o),i.canvas?.off("object:modified",o)})),(e,i)=>{const n=Ut,o=Ue,s=hi,l=pi,c=lv,u=sv,d=Cf,h=yf;return"one"===tn(t).mSelectMode?(Ki(),Ji("div",dD,[Tn(n,{"content-position":"left"},{default:an((()=>[hD])),_:1}),Tn(l,{"label-width":40,class:"form-wrap"},{default:an((()=>[Tn(s,{label:e.$t("editor.attributes.id")},{default:an((()=>[Tn(o,{modelValue:tn(r).id,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(r).id=e),onChange:i[1]||(i[1]=e=>a("id",tn(r).id)),size:"small"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),Tn(h,{gutter:10},{default:an((()=>[Tn(d,{span:12},{default:an((()=>[Tn(u,{modelValue:tn(r).linkData[0],"onUpdate:modelValue":i[2]||(i[2]=e=>tn(r).linkData[0]=e),filterable:"","allow-create":"",onChange:i[3]||(i[3]=e=>a("linkData",tn(r).linkData))},{default:an((()=>[Tn(c,{value:"src"}),Tn(c,{value:"text"})])),_:1},8,["modelValue"])])),_:1}),Tn(d,{span:12},{default:an((()=>[Tn(o,{modelValue:tn(r).linkData[1],"onUpdate:modelValue":i[4]||(i[4]=e=>tn(r).linkData[1]=e),placeholder:""},null,8,["modelValue"])])),_:1})])),_:1})])):En("",!0)}}});function fD(e,t){return void 0===t&&(t=15),+parseFloat(Number(e).toPrecision(t))}function gD(e){var t=e.toString().split(/[eE]/),i=(t[0].split(".")[1]||"").length-+(t[1]||0);return i>0?i:0}function vD(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=gD(e);return t>0?fD(Number(e)*Math.pow(10,t)):Number(e)}function mD(e){_D&&(e>Number.MAX_SAFE_INTEGER||Number.MIN_SAFE_INTEGER)}function AD(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var n=t[0];return t.slice(1).reduce((function(t,i){return e(t,i)}),n)}}var bD=AD((function(e,t){var i=vD(e),n=vD(t),r=gD(e)+gD(t),o=i*n;return mD(o),o/Math.pow(10,r)})),yD=AD((function(e,t){var i=Math.pow(10,Math.max(gD(e),gD(t)));return(bD(e,i)+bD(t,i))/i})),xD=AD((function(e,t){var i=Math.pow(10,Math.max(gD(e),gD(t)));return(bD(e,i)-bD(t,i))/i})),wD=AD((function(e,t){var i=vD(e),n=vD(t);return mD(i),mD(n),bD(i/n,fD(Math.pow(10,gD(t)-gD(e))))})),_D=!0,CD={strip:fD,plus:yD,minus:xD,times:bD,divide:wD,round:function(e,t){var i=Math.pow(10,t),n=wD(Math.round(Math.abs(bD(e,i))),i);return e<0&&0!==n&&(n=bD(n,-1)),n},digitLength:gD,float2Fixed:vD,enableBoundaryChecking:function(e){void 0===e&&(e=!0),_D=e}};const kD=["aria-valuemax","aria-valuemin","aria-valuenow","value","disabled","autofocus","readonly","placeholder"],ED="asa-input-number",SD=Wi({__name:"InputNumber",props:{autofocus:{type:Boolean},parser:{},formatter:{},min:{default:-1/0},max:{default:1/0},precision:{default:2},step:{default:1},modelValue:{},defaultValue:{},modelEvent:{default:"change"},controlsOutside:{type:Boolean},hideButton:{type:Boolean},downDisabled:{type:Boolean},upDisabled:{type:Boolean},size:{default:"default"},disabled:{type:Boolean},readonly:{type:Boolean},placeholder:{},append:{},prepend:{}},emits:["update:modelValue","on-change","on-focus","on-blur","on-input"],setup(e,{expose:t,emit:i}){CD.enableBoundaryChecking(!1);const n=e,r=i,o=Xi(`${ED}-input-wrap`),a=Xi(`${ED}-input`),s=Xi(`${ED}-handler-wrap`),l=Xi([`${ED}-handler`,`${ED}-handler-up`,{[`${ED}-handler-up-disabled`]:n.upDisabled}]),c=Xi([`${ED}-handler`,`${ED}-handler-down`,{[`${ED}-handler-down-disabled`]:n.downDisabled}]),u=Xi(!1),d=pn((()=>[`${ED}`,{[`${ED}-${n.size}`]:!!n.size,[`${ED}-disabled`]:n.disabled,[`${ED}-focused`]:u.value,[`${ED}-controls-outside`]:n.controlsOutside}])),h=Xi(),p=pn((()=>{if(Mc(n.precision)){const e=`${n.step}`.split(".")[1],t=e&&e.length||0;return Math.max(t,n.precision)}})),f=e=>{if(!Mc(e))return"";const t=p.value?e.toFixed(p.value).replace(/\.?0+$/,""):String(e);return n.formatter?.(t)??t},g=Xi(f(n.modelValue??n.defaultValue)),v=e=>{u.value=!0,r("on-focus",e)},m=e=>{u.value=!1,r("on-blur",e)},A=e=>{k(e,"minus",!0)},b=e=>{k(e,"plus",!0)},y=e=>{"ArrowUp"===e.key?(e.preventDefault(),!n.readonly&&x("plus",e)):"ArrowDown"===e.key&&(e.preventDefault(),!n.readonly&&x("minus",e))},x=(e,t)=>{if("plus"===e&&(I.value||n.upDisabled)||"minus"===e&&(S.value||n.downDisabled))return;let i;i=Mc(E.value)?T(CD[e](E.value,n.step)):n.min===-1/0?0:n.min,g.value=f(i),B(i),r("update:modelValue",i),r("on-change",i,t)};let w=0;const _=()=>{w&&(window.clearTimeout(w),w=0)},C={onMouseup:_,onMouseleave:_},k=(e,t,i=!1)=>{e.preventDefault(),h.value?.focus(),x(t,e),i&&(w=window.setTimeout((()=>e.target.dispatchEvent(e)),150))},E=pn((()=>{if(!g.value)return;const e=Number(n.parser?.(g.value)??g.value);return Number.isNaN(e)?void 0:e})),S=Xi(Mc(E.value)&&E.value<=n.min),I=Xi(Mc(E.value)&&E.value>=n.max),B=e=>{let t=!1,i=!1;Mc(e)&&(e<=n.min&&(t=!0),e>=n.max&&(i=!0)),I.value!==i&&(I.value=i),S.value!==t&&(S.value=t)},O=e=>{let{value:t}=e.target;t=t.trim().replace(//g,"."),t=n.parser?.(t)??t,(Mc(Number(t))||/^(\.|-)$/.test(t))&&(g.value=n.formatter?.(t)??t,B(E.value),"input"===n.modelEvent&&r("update:modelValue",E.value),r("on-input",E.value,g.value,e))},T=e=>{if(!ae(e))return Mc(n.min)&&e<n.min&&(e=n.min),Mc(n.max)&&e>n.max&&(e=n.max),Mc(p.value)?CD.round(e,p.value):e},D=e=>{const t=T(E.value),i=f(t);t===E.value&&g.value===i||(g.value=i,B(t)),gn((()=>{Mc(n.modelValue)&&n.modelValue!==t&&(g.value=f(n.modelValue),B(n.modelValue))})),r("update:modelValue",t),r("on-change",t,e)},M=()=>{const e=T(E.value),t=f(e);e===E.value&&g.value===t||(g.value=t),r("update:modelValue",e)},Q=Xi(),L=Xi(),j=e=>{const t=Xi(),{posStart:i,posEnd:r}=eb(e,{threshold:0,onSwipeStart:()=>{t.value=E.value},onSwipe:e=>{if(!Mc(t.value))return;const o=t.value+CD.round(r.x-i.x,0)*n.step;g.value=f(o),"input"===n.modelEvent?O(e):D(e)}})};return qi((()=>{Q.value&&j(Q),L.value&&j(L)})),fn((()=>n.modelValue),(e=>{e!==E.value&&(g.value=f(e),B(e))})),fn((()=>n.min),(e=>{const t=Mc(E.value)&&E.value<=e;S.value!==t&&(S.value=t),Mc(E.value)&&E.value<e&&M()})),fn((()=>n.max),(e=>{const t=Mc(E.value)&&E.value>=e;I.value!==t&&(I.value=t),Mc(E.value)&&E.value>e&&M()})),t({minus:A,plus:b,input:h.value,focus:()=>{h.value?.focus()},blur:()=>{h.value?.blur()}}),(e,t)=>{const i=ve;return Ki(),Ji("div",{class:en(tn(d))},[e.controlsOutside?(Ki(),Ji(Cn,{key:0},[rn("div",Mn({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":e.downDisabled}],onMousedown:A},C),null,16),rn("div",Mn({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":e.upDisabled}],onMousedown:b},C)," 2 ",16)],64)):e.hideButton?En("",!0):(Ki(),Ji("div",{key:1,class:en(tn(s))},[rn("a",Mn({class:tn(l),onMousedown:b},C),[rn("span",null,[Tn(i,{size:"12px",color:"#999"},{default:an((()=>[Tn(tn(ct))])),_:1})])],16),rn("a",Mn({class:tn(c),onMousedown:A},C),[rn("span",null,[Tn(i,{size:"12px",color:"#999"},{default:an((()=>[Tn(tn(Ge))])),_:1})])],16)],2)),rn("div",{class:en(tn(o))},[e.$slots.prefix?Zi(e.$slots,"prefix",{key:0},void 0,!0):e.append?(Ki(),Ji("label",{key:1,ref_key:"appendLabelRef",ref:Q,class:en(`${tn(o)}__label`)},ln(e.append),3)):En("",!0),rn("input",{ref_key:"inputRef",ref:h,type:"text",autocomplete:"off",spellcheck:"false",role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":tn(g),value:tn(g),class:en(tn(a)),disabled:e.disabled,autofocus:e.autofocus,readonly:e.readonly,placeholder:e.placeholder,onFocus:v,onBlur:m,onInput:O,onChange:D,onKeydown:y},null,42,kD),e.$slots.suffix?Zi(e.$slots,"suffix",{key:2},void 0,!0):e.prepend?(Ki(),Ji("label",{key:3,ref_key:"prependLabelRef",ref:L,class:en(`${tn(o)}__label`)},ln(e.prepend),3)):En("",!0)],2)],2)}}}),ID=vr(SD,[["__scopeId","data-v-d655ccac"]]),BD={key:0,class:"box attr-item-box"},OD=rn("h4",null,"",-1),TD=Wi({__name:"AttributeRounded",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=["rect"],o=On({rx:0,ry:0}),a=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||t&&(o.rx=t.get("rx"),o.ry=t.get("ry"))},s=e=>{const t=i.canvas.getActiveObjects()[0];t&&(t.set("ry",e),t.set("rx",e),i.canvas.renderAll())},l=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{a(),i.editor?.on("selectCancel",l),i.editor?.on("selectOne",a),i.canvas?.on("object:modified",a)}))})),Yn((()=>{i.editor?.off("selectCancel",l),i.editor?.off("selectOne",a),i.canvas?.off("object:modified",a)})),(e,i)=>{const n=Ut,a=Uv,l=hi,c=pi,u=Cf,d=yf;return"one"===tn(t).mSelectMode&&r.includes(tn(t).mSelectOneType)?(Ki(),Ji("div",BD,[Tn(n,{"content-position":"left"},{default:an((()=>[OD])),_:1}),rn("div",null,[Tn(d,{gutter:10},{default:an((()=>[Tn(u,{span:18,flex:"1"},{default:an((()=>[Tn(c,{"label-width":40,class:"form-wrap"},{default:an((()=>[Tn(l,{label:e.$t("attributes.rx_ry")},{default:an((()=>[Tn(a,{modelValue:tn(o).rx,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(o).rx=e),max:300,onInput:i[1]||(i[1]=e=>s(e))},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1}),Tn(u,{span:6,flex:"1"},{default:an((()=>[Tn(tn(ID),{modelValue:tn(o).rx,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(o).rx=e),min:0,max:300,onOnChange:i[3]||(i[3]=e=>s(e))},null,8,["modelValue"])])),_:1})])),_:1})])])):En("",!0)}}}),DD={key:0,class:"attr-item-box"},MD=(e=>(Ar("data-v-50d59a3b"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),QD={class:"asa-number-warp"},LD={class:"label",style:{"margin-right":"10px"}},jD={style:{flex:"1"}},PD={class:"asa-number-warp"},FD={style:{flex:"0 0 48px","font-size":"var(--el-form-label-font-size)",color:"var(--el-text-color-regular)"}},RD={class:"content"},zD=Wi({__name:"AttributeBorder",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=["group"],o=On({stroke:"#fff",strokeWidth:0,strokeDashArray:[]}),a=[{value:{strokeUniform:!0,strokeDashArray:[],strokeLineCap:"butt"},label:"Stroke"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"butt"},label:"Dash-1"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"round"},label:"Dash-2"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"square"},label:"Dash-3"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"round"},label:"Dash-4"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"square"},label:"Dash-5"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"round"},label:"Dash-6"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"square"},label:"Dash-7"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"round"},label:"Dash-8"}],s=pn((()=>r.includes(t.mSelectOneType))),l=e=>{const t=i.canvas?.getActiveObject();if((!e||!e.target||e.target===t)&&t&&!r.includes(t.type)){o.stroke=t.get("stroke"),o.strokeWidth=t.get("strokeWidth");const e=JSON.stringify(t.get("strokeDashArray")||[]),i=a.find((i=>JSON.stringify(i.value.strokeDashArray)===e&&t.get("strokeLineCap")===i.value.strokeLineCap));i&&(o.strokeDashArray=i.label)}},c=(e,t)=>{const n=i.canvas?.getActiveObjects()[0];n&&(n.set(e,t),n.set("strokeUniform",!0),i.canvas?.renderAll())},u=e=>{const t=i.canvas?.getActiveObjects()[0];if(t){const n=a.find((t=>t.label===e));t.set(n.value),i.canvas?.renderAll()}},d=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{l(),i.editor?.on("selectCancel",d),i.editor?.on("selectOne",l),i.canvas?.on("object:modified",l)}))})),Yn((()=>{i.editor?.off("selectCancel",d),i.editor?.off("selectOne",l),i.canvas?.off("object:modified",l)})),(e,i)=>{const n=Ut,r=wg,l=Cf,d=yf,h=lv,p=sv;return"one"!==tn(t).mSelectMode||tn(s)?En("",!0):(Ki(),Ji("div",DD,[Tn(n,{"content-position":"left"},{default:an((()=>[MD])),_:1}),rn("div",null,[Tn(d,{gutter:12,style:{"margin-right":"10px"}},{default:an((()=>[Tn(l,{span:12},{default:an((()=>[rn("div",QD,[rn("span",LD,ln(e.$t("editor.color")),1),rn("div",jD,[Tn(r,{modelValue:tn(o).stroke,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(o).stroke=e),onChange:i[1]||(i[1]=e=>c("stroke",e)),"show-alpha":""},null,8,["modelValue"])])])])),_:1}),Tn(l,{span:12},{default:an((()=>[Tn(tn(ID),{modelValue:tn(o).strokeWidth,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(o).strokeWidth=e),onOnChange:i[3]||(i[3]=e=>c("strokeWidth",e)),append:e.$t("editor.width"),min:0},null,8,["modelValue","append"])])),_:1})])),_:1}),rn("div",PD,[rn("span",FD,ln(e.$t("editor.attributes.stroke")),1),rn("div",RD,[Tn(p,{modelValue:tn(o).strokeDashArray,"onUpdate:modelValue":i[4]||(i[4]=e=>tn(o).strokeDashArray=e),onChange:u},{default:an((()=>[(Ki(),Ji(Cn,null,zn(a,(e=>Tn(h,{value:e.label,label:e.label,key:`stroke-${e.label}`},{default:an((()=>[kn(ln(e.label),1)])),_:2},1032,["value","label"]))),64))])),_:1},8,["modelValue"])])])])]))}}}),ND=vr(zD,[["__scopeId","data-v-50d59a3b"]]),VD={key:0,class:"box attr-item-box"},UD=(e=>(Ar("data-v-3671ab69"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),HD={class:"f-center rounded-4px",style:{background:"#f8f8f9"}},GD={class:"label"},YD={class:"content"},WD=Wi({__name:"AttributeShadow",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=On({shadow:{}}),o=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||t&&(r.shadow=t.get("shadow")||{})},a=()=>{const e=i.canvas?.getActiveObjects()[0];e&&(e.set("shadow",new Tm.fabric.Shadow(r.shadow)),i.canvas?.renderAll())},s=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{o(),i.editor?.on("selectCancel",s),i.editor?.on("selectOne",o),i.canvas?.on("object:modified",o)}))})),Yn((()=>{i.editor?.off("selectCancel",s),i.editor?.off("selectOne",o),i.canvas?.off("object:modified",o)})),(e,i)=>{const n=Ut,o=wg,s=Cf,l=yf;return"one"===tn(t).mSelectMode?(Ki(),Ji("div",VD,[Tn(n,{"content-position":"left"},{default:an((()=>[UD])),_:1}),Tn(l,{gutter:12,style:{"margin-bottom":"10px"}},{default:an((()=>[Tn(s,{span:12},{default:an((()=>[rn("div",HD,[rn("span",GD,ln(e.$t("editor.color")),1),rn("div",YD,[Tn(o,{modelValue:tn(r).shadow.color,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(r).shadow.color=e),onChange:a,alpha:""},null,8,["modelValue"])])])])),_:1}),Tn(s,{span:12},{default:an((()=>[Tn(tn(ID),{modelValue:tn(r).shadow.blur,"onUpdate:modelValue":i[1]||(i[1]=e=>tn(r).shadow.blur=e),defaultValue:0,onOnChange:a,append:e.$t("editor.attributes.blur"),min:0},null,8,["modelValue","append"])])),_:1})])),_:1}),Tn(l,{gutter:12},{default:an((()=>[Tn(s,{span:12},{default:an((()=>[Tn(tn(ID),{modelValue:tn(r).shadow.offsetX,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(r).shadow.offsetX=e),defaultValue:0,onOnChange:a,append:e.$t("editor.attributes.offset_x")},null,8,["modelValue","append"])])),_:1}),Tn(s,{span:12},{default:an((()=>[Tn(tn(ID),{modelValue:tn(r).shadow.offsetY,"onUpdate:modelValue":i[3]||(i[3]=e=>tn(r).shadow.offsetY=e),defaultValue:0,onOnChange:a,append:e.$t("editor.attributes.offset_y")},null,8,["modelValue","append"])])),_:1})])),_:1})])):En("",!0)}}}),XD=vr(WD,[["__scopeId","data-v-3671ab69"]]),$D={key:0,class:"box attr-item-box"},qD=(e=>(Ar("data-v-642912a3"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),KD={class:"asa-number-warp"},JD={class:"asa-number-warp"},ZD=Wi({__name:"AttributePostion",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=["text","i-text","textbox","rect","circle","triangle","polygon","image","group","line","arrow","thinTailArrow"],o=On({opacity:0,angle:0,left:0,top:0,rx:0,ry:0}),a=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||t&&r.includes(t.type)&&(o.opacity=100*(t.get("opacity")??0),o.left=t.get("left"),o.top=t.get("top"),o.angle=t.get("angle")||0)},s=(e,t)=>{const n=i.canvas?.getActiveObjects()[0];if(n){if("opacity"===e)return n&&n.set(e,t/100),void i.canvas?.renderAll();if("angle"===e)return n.rotate(t),void i.canvas?.renderAll();n&&n.set(e,t),i.canvas?.renderAll()}},l=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{a(),i.editor?.on("selectCancel",l),i.editor?.on("selectOne",a),i.canvas?.on("object:modified",a)}))})),Yn((()=>{i.editor?.off("selectCancel",l),i.editor?.off("selectOne",a),i.canvas?.off("object:modified",a)})),(e,i)=>{const n=Ut,a=Cf,l=yf,c=Uv;return"one"===tn(t).mSelectMode?(Ki(),Ji("div",$D,[Tn(n,{"content-position":"left"},{default:an((()=>[qD])),_:1}),yn(rn("div",null,[Tn(l,{gutter:10,style:{"margin-bottom":"10px"}},{default:an((()=>[Tn(a,{span:12},{default:an((()=>[Tn(tn(ID),{modelValue:tn(o).left,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(o).left=e),append:e.$t("editor.attributes.left"),onOnChange:i[1]||(i[1]=e=>s("left",e))},null,8,["modelValue","append"])])),_:1}),Tn(a,{span:12},{default:an((()=>[Tn(tn(ID),{modelValue:tn(o).left,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(o).left=e),append:e.$t("editor.attributes.top"),onOnChange:i[3]||(i[3]=e=>s("top",e))},null,8,["modelValue","append"])])),_:1})])),_:1}),rn("div",KD,[rn("span",null,ln(e.$t("editor.attributes.angle")),1),Tn(c,{modelValue:tn(o).angle,"onUpdate:modelValue":i[4]||(i[4]=e=>tn(o).angle=e),max:360,onInput:i[5]||(i[5]=e=>s("angle",e))},null,8,["modelValue"])]),rn("div",JD,[rn("span",null,ln(e.$t("editor.attributes.opacity")),1),Tn(c,{modelValue:tn(o).opacity,"onUpdate:modelValue":i[6]||(i[6]=e=>tn(o).opacity=e),onInput:i[7]||(i[7]=e=>s("opacity",e))},null,8,["modelValue"])])],512),[[jn,r.includes(tn(t).mSelectOneType)]])])):En("",!0)}}}),eM=vr(ZD,[["__scopeId","data-v-642912a3"]]),tM=e=>(Ar("data-v-cd4ba0d0"),e=e(),br(),e),iM={key:0,class:"box attr-item-box"},nM=tM((()=>rn("h4",null,"",-1))),rM=tM((()=>rn("h4",null,"",-1))),oM={class:"ivu-col__box"},aM={class:"label"},sM={class:"content"},lM=Wi({__name:"AttributeTextContent",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=On({text:"",strokeWidth:1,stroke:"",showPathAttr:!1}),o=e=>{const t=i.canvas?.getActiveObject();if((!e||!e.target||e.target===t)&&t){r.text=t.get("text");const e=t.get("path");e?(r.strokeWidth=e.strokeWidth,r.stroke=e.stroke,r.showPathAttr=!0):r.showPathAttr=!1}},a=(e,t)=>{const n=i.canvas?.getActiveObjects()[0];n&&(r[e]=t,"text"===e?n.set(e,t):n.get("path").set(e,t),i.canvas?.renderAll())},s=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{i.editor?.on("selectCancel",s),i.editor?.on("selectOne",o),i.canvas?.on("object:modified",o)}))})),Yn((()=>{i.editor?.off("selectCancel",s),i.editor?.off("selectOne",o),i.canvas?.off("object:modified",o)})),(e,i)=>{const n=Ut,o=Ue,s=hi,l=pi,c=wg,u=Cf,d=yf;return"one"===tn(t)?.mSelectMode&&"i-text"===tn(t)?.mSelectOneType?(Ki(),Ji("div",iM,[Tn(n,{"content-position":"left"},{default:an((()=>[nM])),_:1}),Tn(l,{"label-width":40,class:"form-wrap"},{default:an((()=>[Tn(s,{label:e.$t("editor.attributes.id")},{default:an((()=>[Tn(o,{modelValue:tn(r).text,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(r).text=e),onChange:i[1]||(i[1]=e=>a("text",tn(r).text)),size:"small"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),tn(r).showPathAttr?(Ki(),Ji(Cn,{key:0},[Tn(n,{"content-position":"left"},{default:an((()=>[rM])),_:1}),rn("div",null,[Tn(d,{gutter:12},{default:an((()=>[Tn(u,{flex:"1"},{default:an((()=>[rn("div",oM,[rn("span",aM,ln(e.$t("editor.color")),1),rn("div",sM,[Tn(c,{modelValue:tn(r).stroke,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(r).stroke=e),onChange:i[3]||(i[3]=e=>a("stroke",e)),"show-alpha":""},null,8,["modelValue"])])])])),_:1}),Tn(u,{flex:"1"},{default:an((()=>[Tn(tn(ID),{modelValue:tn(r).strokeWidth,"onUpdate:modelValue":i[4]||(i[4]=e=>tn(r).strokeWidth=e),onOnChange:i[5]||(i[5]=e=>a("strokeWidth",e)),append:e.$t("editor.width"),min:0},null,8,["modelValue","append"])])),_:1})])),_:1})])],64)):En("",!0)])):En("",!0)}}}),cM=vr(lM,[["__scopeId","data-v-cd4ba0d0"]]),uM={key:0,class:"attr-item-box"},dM={class:"flex-view"},hM={class:"flex-item"},pM={class:"label"},fM={class:"content"},gM=Wi({__name:"AttributeTextFloat",setup(e){const t=nn("mixinState"),i=VI(),n=On({verticalAlign:"null"}),r=["i-text","textbox","text"],o=pn((()=>r.includes(t.mSelectOneType))),a=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||t&&r.includes(t.type)&&t.text.includes(".")&&(n.verticalAlign=t.get("verticalAlign"))},s=cn(),l=()=>{s?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{a(),i.editor?.on("selectCancel",l),i.editor?.on("selectOne",a),i.canvas?.on("object:modified",a)}))})),Yn((()=>{i.editor?.off("selectCancel",l),i.editor?.off("selectOne",a),i.canvas?.off("object:modified",a)})),(e,r)=>{const a=lv,s=sv;return"one"===tn(t).mSelectMode&&tn(o)?(Ki(),Ji("div",uM,[rn("div",dM,[rn("div",hM,[rn("span",pM,ln(e.$t("editor.textFloat")),1),rn("div",fM,[Tn(s,{modelValue:tn(n).verticalAlign,"onUpdate:modelValue":r[0]||(r[0]=e=>tn(n).verticalAlign=e),onChange:r[1]||(r[1]=e=>((e,t)=>{const n=i.canvas?.getActiveObjects()[0];if(n&&n.text.includes(".")){const[r]=n.text.split("."),o=r.length+1,a=n.text.length;n.styles=[],"top"===t?n.setSuperscript(o,a):"bottom"===t&&n.setSelectionStyles({fontSize:n.superscript.size*n.fontSize},o,a),n.set(e,t),i.canvas?.renderAll()}})("verticalAlign",e))},{default:an((()=>[Tn(a,{label:"",value:"null"}),Tn(a,{label:"",value:"bottom"}),Tn(a,{label:"",value:"top"})])),_:1},8,["modelValue"])])])])])):En("",!0)}}}),vM=vr(gM,[["__scopeId","data-v-89f72f6a"]]),mM={key:0,class:"box attr-item-box"},AM=(e=>(Ar("data-v-471231df"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),bM={class:"flex-view"},yM={class:"flex-item"},xM={class:"left font-selector"},wM={style:{display:"none"}},_M={class:"right"},CM={class:"flex-view",style:{"margin-bottom":"0"}},kM={class:"flex-item"},EM=["innerHTML"],SM={class:"flex-view"},IM={class:"flex-item"},BM={viewBox:"0 0 1024 1024",width:"14",height:"14"},OM=["fill"],TM={viewBox:"0 0 1024 1024",width:"14",height:"14"},DM=["fill"],MM={viewBox:"0 0 1024 1024",width:"14",height:"14"},QM=["fill"],LM={viewBox:"0 0 1024 1024",width:"14",height:"14"},jM=["fill"],PM={class:"flex-view"},FM={class:"right"},RM={class:"right"},zM={class:"flex-view"},NM={class:"flex-item"},VM={class:"label"},UM={class:"content"},HM=Wi({__name:"AttributeFont",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=["i-text","textbox","text"],o=On({fontSize:0,fontFamily:"",lineHeight:0,charSpacing:0,fontWeight:"",textBackgroundColor:"#fff",textAlign:"",fontStyle:"",underline:!1,linethrough:!1,overline:!1}),a=Xi([]);i.editor?.getFontList().then((e=>{a.value=e}));const s=["left","center","right","justify"],l=['<svg t="1650441458823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3554" width="18" height="18"><path d="M198.4 198.4h341.333333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666667h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-569.6c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666666h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533334z m0 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3555"></path></svg>','<svg t="1650441512015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3704" width="18" height="18"><path d="M313.6 198.4h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533333z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m115.2 170.666666h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533334z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3705"></path></svg>','<svg t="1650441519862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="18" height="18"><path d="M454.4 283.733333v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h341.333334c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333334c-8.533333 0-14.933333-2.133333-19.2-8.533334-4.266667-4.266667-8.533333-10.666667-8.533333-19.2z m-226.133333 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333H256c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533333-19.2z m113.066666 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533334-19.2 6.4-6.4 12.8-8.533333 19.2-8.533334h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533334-19.2z m-170.666666 170.666666v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-4.266667-8.533333-10.666667-8.533333-19.2z" p-id="3855"></path></svg>','<svg width="18.000000" height="18.000000" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="path" d="M3.48 3.48L14.48 3.48C14.63 3.48 14.75 3.52 14.82 3.63C14.93 3.75 14.97 3.86 14.97 3.97L14.97 4.98C14.97 5.13 14.93 5.25 14.82 5.32C14.71 5.43 14.6 5.47 14.48 5.47L3.48 5.47C3.33 5.47 3.22 5.43 3.15 5.32C3.03 5.21 3 5.1 3 4.98L3 3.97C3 3.82 3.03 3.71 3.15 3.63C3.22 3.56 3.37 3.48 3.48 3.48ZM3.48 6.48L14.5 6.48C14.65 6.48 14.76 6.52 14.83 6.63C14.95 6.75 14.98 6.86 14.98 6.97L14.98 7.98C14.98 8.13 14.95 8.25 14.83 8.32C14.72 8.43 14.61 8.47 14.5 8.47L3.48 8.47C3.33 8.47 3.22 8.43 3.15 8.32C3.03 8.21 3 8.1 3 7.98L3 6.97C3 6.82 3.03 6.71 3.15 6.63C3.22 6.56 3.37 6.48 3.48 6.48ZM3.48 9.48L14.47 9.48C14.62 9.48 14.73 9.52 14.81 9.63C14.92 9.75 14.96 9.86 14.96 9.97L14.96 10.98C14.96 11.13 14.92 11.25 14.81 11.32C14.7 11.43 14.58 11.47 14.47 11.47L3.48 11.47C3.33 11.47 3.22 11.43 3.15 11.32C3.03 11.21 3 11.1 3 10.98L3 9.97C3 9.82 3.03 9.71 3.15 9.63C3.22 9.56 3.37 9.48 3.48 9.48ZM3.48 12.48L14.47 12.48C14.62 12.48 14.73 12.52 14.81 12.63C14.92 12.75 14.96 12.86 14.96 12.97L14.96 13.98C14.96 14.13 14.92 14.25 14.81 14.32C14.7 14.43 14.58 14.47 14.47 14.47L3.48 14.47C3.33 14.47 3.22 14.43 3.15 14.32C3.03 14.21 3 14.1 3 13.98L3 12.97C3 12.82 3.03 12.71 3.15 12.63C3.22 12.56 3.37 12.48 3.48 12.48Z" fill-rule="nonzero"/></svg>'],c=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||t&&r.includes(t.type)&&(o.fontSize=t.get("fontSize"),o.fontFamily=t.get("fontFamily"),o.lineHeight=t.get("lineHeight"),o.textAlign=t.get("textAlign"),o.underline=t.get("underline"),o.linethrough=t.get("linethrough"),o.charSpacing=t.get("charSpacing"),o.overline=t.get("overline"),o.fontStyle=t.get("fontStyle"),o.textBackgroundColor=t.get("textBackgroundColor"),o.fontWeight=t.get("fontWeight"))},u=(e,t)=>{const n=i.canvas?.getActiveObjects()[0];n&&(n&&n.set(e,t),i.canvas?.renderAll())},d=()=>{n?.proxy?.$forceUpdate()},h=async e=>{if(!e)return;const t=Ft.service();i.editor.loadFont(e).finally((()=>t.close()))};return qi((()=>{gn((()=>{c(),i.editor?.on("selectCancel",d),i.editor?.on("selectOne",c),i.canvas?.on("object:modified",c)}))})),Yn((()=>{i.editor?.off("selectCancel",d),i.editor?.off("selectOne",c),i.canvas?.off("object:modified",c)})),(e,n)=>{const c=Ut,d=lv,p=sv,f=uf,g=cf,v=He,m=ii,A=wg;return"one"===tn(t).mSelectMode&&r.includes(tn(t).mSelectOneType)?(Ki(),Ji("div",mM,[Tn(c,{"content-position":"left"},{default:an((()=>[AM])),_:1}),rn("div",null,[rn("div",bM,[rn("div",yM,[rn("div",xM,[Tn(p,{modelValue:tn(o).fontFamily,"onUpdate:modelValue":n[0]||(n[0]=e=>tn(o).fontFamily=e),onChange:h},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(a),(e=>(Ki(),on(d,{value:e.name,label:e.name,key:`font-${e.name}`},{default:an((()=>[rn("div",{class:"font-item",style:Sn(`background-image:url('${e.img}');height: 100%;background-size: 100% 100%;`)},[kn(ln(e.img?"":e)+" ",1),rn("span",wM,ln(e.name),1)],4)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])]),rn("div",_M,[Tn(tn(ID),{modelValue:tn(o).fontSize,"onUpdate:modelValue":n[1]||(n[1]=e=>tn(o).fontSize=e),onOnChange:n[2]||(n[2]=e=>u("fontSize",e)),append:"",min:1},null,8,["modelValue"])])])]),rn("div",CM,[rn("div",kM,[Tn(g,{class:"button-group",modelValue:tn(o).textAlign,"onUpdate:modelValue":n[3]||(n[3]=e=>tn(o).textAlign=e),onChange:n[4]||(n[4]=e=>u("textAlign",e)),type:"button"},{default:an((()=>[(Ki(),Ji(Cn,null,zn(s,((e,t)=>Tn(f,{label:e,value:e,key:e},{default:an((()=>[rn("span",{innerHTML:l[t]},null,8,EM)])),_:2},1032,["label","value"]))),64))])),_:1},8,["modelValue"])])]),rn("div",SM,[rn("div",IM,[Tn(m,{class:"button-group"},{default:an((()=>[Tn(v,{style:{width:"25%"},onClick:n[5]||(n[5]=e=>((e,t)=>{const n="normal"===t?"bold":"normal";o.fontWeight=n;const r=i.canvas?.getActiveObjects()[0];r&&r.set(e,n),i.canvas?.renderAll()})("fontWeight",tn(o).fontWeight))},{default:an((()=>[(Ki(),Ji("svg",BM,[rn("path",{d:"M793.99865 476a244 244 0 0 0 54-130.42C862.75865 192.98 743.01865 64 593.85865 64H195.01865a32 32 0 0 0-32 32v96a32 32 0 0 0 32 32h63.74v576H195.01865a32 32 0 0 0-32 32v96a32 32 0 0 0 32 32h418.64c141.6 0 268.28-103.5 282-244.8 9.48-96.9-32.78-184.12-101.66-239.2zM418.33865 224h175.52a96 96 0 0 1 0 192h-175.52z m175.52 576h-175.52V576h175.52a112 112 0 0 1 0 224z",fill:"bold"===tn(o).fontWeight?"#305ef4":"#666"},null,8,OM)]))])),_:1}),Tn(v,{style:{width:"25%"},onClick:n[6]||(n[6]=e=>((e,t)=>{const n="normal"===t?"italic":"normal";o.fontStyle=n;const r=i.canvas?.getActiveObjects()[0];r&&r.set(e,n),i.canvas?.renderAll()})("fontStyle",tn(o).fontStyle))},{default:an((()=>[(Ki(),Ji("svg",TM,[rn("path",{d:"M832 96v64a32 32 0 0 1-32 32h-125.52l-160 640H608a32 32 0 0 1 32 32v64a32 32 0 0 1-32 32H224a32 32 0 0 1-32-32v-64a32 32 0 0 1 32-32h125.52l160-640H416a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32h384a32 32 0 0 1 32 32z",fill:"italic"===tn(o).fontStyle?"#305ef4":"#666"},null,8,DM)]))])),_:1}),Tn(v,{style:{width:"25%"},onClick:n[7]||(n[7]=e=>((e,t)=>{const n=!1===t;o.linethrough=n;const r=i.canvas?.getActiveObjects()[0];r&&r.set(e,n),i.canvas?.renderAll()})("linethrough",tn(o).linethrough))},{default:an((()=>[(Ki(),Ji("svg",MM,[rn("path",{d:"M893.088 501.792H125.344a32 32 0 0 0 0 64h767.744a32 32 0 0 0 0-64zM448 448h112V208h288V96H160v112h288zM448 640h112v288H448z",fill:tn(o).linethrough?"#305ef4":"#666"},null,8,QM)]))])),_:1}),Tn(v,{style:{width:"25%"},onClick:n[8]||(n[8]=e=>((e,t)=>{const n=!1===t;o.underline=n;const r=i.canvas?.getActiveObjects()[0];r&&r.set(e,n),i.canvas?.renderAll()})("underline",tn(o).underline))},{default:an((()=>[(Ki(),Ji("svg",LM,[rn("path",{d:"M703.232 67.008h127.488v413.248c0 158.016-142.656 286.016-318.72 286.016-176 0-318.72-128-318.72-286.016V67.008h127.488v413.248c0 39.872 18.176 78.144 51.136 107.776 36.8 32.96 86.528 51.072 140.096 51.072s103.36-18.112 140.032-51.136c33.024-29.632 51.2-67.968 51.2-107.776V67.008zM193.28 871.616h637.44v85.376H193.28v-85.376z",fill:tn(o).underline?"#305ef4":"#666"},null,8,jM)]))])),_:1})])),_:1})])]),rn("div",PM,[rn("div",FM,[Tn(tn(ID),{modelValue:tn(o).lineHeight,"onUpdate:modelValue":n[9]||(n[9]=e=>tn(o).lineHeight=e),onOnChange:n[10]||(n[10]=e=>u("lineHeight",e)),step:.1,append:e.$t("editor.attributes.line_height")},null,8,["modelValue","append"])]),rn("div",RM,[Tn(tn(ID),{modelValue:tn(o).charSpacing,"onUpdate:modelValue":n[11]||(n[11]=e=>tn(o).charSpacing=e),onOnChange:n[12]||(n[12]=e=>u("charSpacing",e)),append:e.$t("editor.attributes.char_spacing")},null,8,["modelValue","append"])])]),rn("div",zM,[rn("div",NM,[rn("span",VM,ln(e.$t("editor.background")),1),rn("div",UM,[Tn(A,{modelValue:tn(o).textBackgroundColor,"onUpdate:modelValue":n[13]||(n[13]=e=>tn(o).textBackgroundColor=e),onChange:n[14]||(n[14]=e=>u("textBackgroundColor",e)),"show-alpha":""},null,8,["modelValue"])])])])])])):En("",!0)}}}),GM=vr(HM,[["__scopeId","data-v-471231df"]]),YM=(e,{decimal:t=0}={})=>t>0?Number(e.toFixed(t)):Math.round(e),WM=(e,{onmousedown:t,onmousemove:i,onmouseup:n}={})=>{let r=e.getBoundingClientRect();const o={x:0,y:0},a=e=>{let t=e.pageX-r.x,i=e.pageY-r.y;t<0&&(t=0),t>r.width&&(t=r.width),i<0&&(i=0),i>r.height&&(i=r.height),o.x=YM(t/r.width,{decimal:2}),o.y=YM(i/r.height,{decimal:2})},s=e=>{a(e),i&&i(o,e)},l=e=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),n&&n(o,e)},c=i=>{r=e.getBoundingClientRect(),a(i),document.addEventListener("mousemove",s),document.addEventListener("mouseup",l),t&&t(o,i)};return e.addEventListener("mousedown",c),{destroy(){e.removeEventListener("mousedown",c)}}},XM=(e,t,i)=>{let n=Math.round(e).toString(16),r=Math.round(t).toString(16),o=Math.round(i).toString(16);return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),1===o.length&&(o="0"+o),"#"+n+r+o},$M=(e,t,i,n=1)=>{const r=XM(e,t,i);let o=Math.round(255*n).toString(16);return 1===o.length&&(o="0"+o),r+o},qM=(e,t,i)=>{e/=255,t/=255,i/=255;const n=Math.min(e,t,i),r=Math.max(e,t,i),o=r-n;let a=0,s=0;if(0===o)a=s=0;else{s=o/r;const n=((r-e)/6+o/2)/o,l=((r-t)/6+o/2)/o,c=((r-i)/6+o/2)/o;e===r?a=c-l:t===r?a=1/3+n-c:i===r&&(a=2/3+l-n),a<0?a+=1:a>1&&(a-=1)}return[360*a,100*s,100*r]},KM=(e,t,i)=>{const[n,r,o]=function(e,t,i){e=e/360*6,t/=100,i/=100;const n=Math.floor(e),r=e-n,o=i*(1-t),a=i*(1-r*t),s=i*(1-(1-r)*t),l=n%6,c=[i,a,o,o,s,i][l],u=[s,i,i,a,o,o][l],d=[o,o,s,i,i,a][l];return[Math.round(255*c),Math.round(255*u),Math.round(255*d)]}(e,t,i);return XM(n,r,o)},JM=e=>{let t=0,i=0,n=0;return 4==(e=e.slice(0,7)).length?(t=Number("0x"+e[1]+e[1]),i=Number("0x"+e[2]+e[2]),n=Number("0x"+e[3]+e[3])):7==e.length&&(t=Number("0x"+e[1]+e[2]),i=Number("0x"+e[3]+e[4]),n=Number("0x"+e[5]+e[6])),[t,i,n]},ZM=e=>{const t=JM(e),i=Number("0x"+e[7]+e[8]);return[...t,Number((i/255).toFixed(2))]},eQ=e=>{const[t,i,n,r]=ZM(e);return((e,t,i,n=1)=>[...qM(e,t,i),n])(t,i,n,r)},tQ=e=>e.startsWith("#")?"":e.startsWith("linear-gradient")?"":"",iQ=(e,t)=>{const i=[];return t.forEach((e=>{i.push(`${e.color} ${100*e.offset}%`)})),`linear-gradient(${e}deg, ${i.join(",")})`};function nQ(e){const t=function(e,t=!0){const i=document.createElement("div");return i.id="color-pipette-tooltip-container",i.innerHTML=e,i.style=`\n    position: fixed;\n    left: 50%;\n    top: 9%;\n    z-index: 10002;\n    display: ${t?"flex":"none"};\n    align-items: center;\n    background-color: rgba(0,0,0,0.4);\n    padding: 6px 12px;\n    border-radius: 4px;\n    color: #fff;\n    font-size: 18px;\n    pointer-events: none;\n  `,i}(e);document.body.appendChild(t),setTimeout((()=>t?.parentNode?.removeChild(t)),2e3)}const rQ={class:"my-tabs"},oQ={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},aQ={class:"my-tabs__header-shell relative flex justify-between"},sQ=["onClick"],lQ={class:"my-tabs__content"},cQ={name:"Tabs"},uQ=Object.assign(cQ,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup(e,{expose:t,emit:i}){const n=e,r=i;fn((()=>n.value),(()=>{c()}));const o=Xi([]),a=On({width:0,left:0});let s=0;qi((()=>{s=100/o.value.length,a.width=`${s}%`,c()}));let l=null;async function c(e=-1){e<0&&(e=o.value.findIndex((e=>e.props.label===n.value))),a.left=s*e+"%";try{await gn(),l?.exposed?.changeActive?.(!1),l=o.value[e],l.exposed?.changeActive?.(!0)}catch(t){}}return t({tabs:o}),(t,i)=>(Ki(),Ji("div",rQ,[rn("div",oQ,[rn("div",aQ,[(Ki(!0),Ji(Cn,null,zn(o.value,((t,i)=>(Ki(),Ji("div",{key:t.props.label,class:en(["my-tab__title relative flex-auto py-1 text-center",{"my-active":t.props.label===e.value}]),onClick:e=>function(e,t){r("update:value",e.props.label),c(t)}(t,i)},ln(t.props.label),11,sQ)))),128)),rn("div",{class:"my-tab__slider",style:Sn(a)},null,4)])]),rn("div",lQ,[Zi(t.$slots,"default",{},void 0,!0)])]))}}),dQ=vr(uQ,[["__scopeId","data-v-fd81b187"]]),hQ={},pQ={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},fQ=[rn("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),rn("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1)],gQ=vr(hQ,[["render",function(e,t){return Ki(),Ji("svg",pQ,fQ)}]]),vQ={name:"TabPanel"},mQ=Object.assign(vQ,{props:{label:{type:String,required:!0}},setup(e,{expose:t}){const i=cn();i.parent.exposed.tabs.value.push(i);const n=Xi(!1),r=pn((()=>({display:n.value?"block":"none"})));return t({changeActive:function(e){n.value=e}}),(e,t)=>(Ki(),Ji("div",{class:"tab-panel",style:Sn(r.value)},[Zi(e.$slots,"default")],4))}}),AQ=Wi({props:["modelValue"],emits:["change","update:modelValue"],setup(e,{emit:t}){const i=Xi(90),n=Xi(null),r=pn((()=>i.value-90));let o=!1;const a=Xi(!1);return fn((()=>i.value),(n=>{e.modelValue!==i.value&&t("update:modelValue",n),t("change")})),fn((()=>e.modelValue),(e=>{i.value=e})),{inputChange:e=>{t("change",e)},num:i,turn:e=>{if(!o)return;const t=27,n=27,r=e.offsetX-t,a=e.offsetY-n,s=180*Math.atan2(a,r)/Math.PI;i.value=Math.round(s+90)},touch:(e,t)=>{e.preventDefault(),o=t},angleInDegrees:r,numInput:n,visiable:a}}}),bQ={class:"angle-input-box"},yQ=vr(AQ,[["render",function(e,t,i,n,r,o){return Ki(),Ji("div",bQ,[yn(rn("input",{ref:"numInput","onUpdate:modelValue":t[0]||(t[0]=t=>e.num=t),class:"angle-input",onFocus:t[1]||(t[1]=t=>e.visiable=!0),onBlur:t[2]||(t[2]=t=>e.visiable=!1),onInput:t[3]||(t[3]=(...t)=>e.inputChange&&e.inputChange(...t))},null,544),[[qn,e.num]]),yn(rn("div",{class:"AngleHandle",onMousedown:t[6]||(t[6]=t=>e.touch(t,!0)),onMouseup:t[7]||(t[7]=t=>e.touch(t,!1))},[rn("div",{class:"angle",onMouseup:t[4]||(t[4]=(...t)=>e.turn&&e.turn(...t)),onMousemove:t[5]||(t[5]=(...t)=>e.turn&&e.turn(...t))},[rn("div",{style:Sn(`transform: rotate(${e.angleInDegrees}deg)`),class:"line"},null,4)],32)],544),[[jn,e.visiable]])])}]]),xQ=e=>(Ar("data-v-59acd03c"),e=e(),br(),e),wQ={class:"color-picker"},_Q={key:1,class:"title"},CQ={key:2,class:"cp__gradient flex-center"},kQ={class:"cp__gradient-bar"},EQ=["data-sort","onMousedown"],SQ=xQ((()=>rn("div",{class:"cpp__color-saturation"},null,-1))),IQ=xQ((()=>rn("div",{class:"cpp__color-value"},null,-1))),BQ={class:"cps__track"},OQ={class:"cps__track"},TQ={class:"cp__box"},DQ=["value"],MQ=["value"],QQ=["onClick"],LQ={name:"ColorPicker",inheritAttrs:!1},jQ=Object.assign(LQ,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["",""]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","change","native-pick","blur"],setup(e,{expose:t,emit:i}){const n=e,r=i,o=Xi(tQ(n.value)),a=Xi(90),s=Xi([]),l=On({h:0,s:0,l:0,a:0}),c=Xi("#f00"),u=Xi("#000"),d=Xi(0);let h=Xi({});const p="EyeDropper"in window,f=Xi(),g=Xi(),v=Xi(),m=Xi(),A=Xi(),b=Xi(),y=Xi();let x=null,w=null,_=null,C=null,k=null,E=!0,S=null;const I=Xi([]),B={color:n.defaultColor,gradient:n.defaultGradient,image:n.defaultImage},O=pn((()=>n.modes.includes(""))),T=pn((()=>{const e=JM(u.value).join(",");return{background:`linear-gradient(to right, rgba(${e}, 0) 0%, rgb(${e}) 100%)`}}));fn(h,(e=>{R(e.color)})),fn(u,(e=>{!function(e){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(e)){const i=JM(e),[n,r,o]=qM(...i);l.h=n,l.s=r,l.l=o;try{v.value.style.left=`${l.s}%`,v.value.style.top=100-l.l+"%",m.value.style.left=l.h/360*100+"%",u.value=e}catch(t){}}}(e)})),fn((()=>n.value),(e=>{const t=tQ(e);t!==o.value&&(o.value=t),P(t),Q(e),D(e)}));const D=J((async e=>{const t=I.value,i=t.indexOf(e);-1!==i&&I.value.splice(i,1),t.length>=4&&I.value.splice(t.length-1,1);const n=[e];I.value=n.concat(t)}),300),M=fn(l,(function(e){const t=((e,t,i,n=1)=>`${KM(e,t,i)}${0===n?"00":Math.round(255*n).toString(16)}`)(...Object.values(e));let i;""===o.value?i=t:""===o.value&&(h.value.color=t,i=iQ(a.value,s.value)),F(t),L(i)}),{deep:!0});function Q(e){""===o.value?B.color=e:""===o.value?B.gradient=e:""===o.value&&(B.image=e)}function L(e){Q(e),r("update:value",e),r("change",{mode:o.value,color:e,angle:Number(a.value),stops:s.value})}async function j(e){if(e===o.value)return;let t;o.value=e,""===e?t=B.color:""===e?t=B.gradient:""===e&&(t=B.image),L(t)}function P(e){""===e?R(n.value):""===e&&(0===s.value.length?n.value.match(/[^,]+/g).forEach(((e,t)=>{if(0===t)return void(a.value=Number(e.match(/\d+/)[0]));let[i,n]=e.trim().split(" ");i.startsWith("#")||(i=$M(i)),n=n.match(/\d+/)[0]/100,s.value.push({color:i,offset:n}),h.value=s.value[0]})):R(h.value.color))}function F(e){c.value=`hsl(${l.h}, 100%, 50%)`,u.value=e.slice(0,7),u.value,d.value=Math.round(100*(l.a??1))}function R(e){if(E){const i=eQ(e);l.h=i[0],l.s=i[1],l.l=i[2],l.a=i[3],F(e);try{let e=l.s;const t=Math.round(100-l.l);v.value.style.left=`${e}%`,v.value.style.top=`${t}%`,e=l.h/360,m.value.style.left=100*e+"%",b.value.style.left=100*l.a+"%"}catch(t){}}}function z(e){if(e.stopPropagation(),e.preventDefault(),!["Backspace","Delete"].includes(e.key))return;if(2===s.value.length)return;const t=s.value.indexOf(h.value);s.value.splice(t,1),h.value=s.value[0]}function N(){E=!1,S&&clearTimeout(S),S=setTimeout((()=>{E=!0}),16)}async function V(e){let t="";if(e&&e.target.value){const i=e.target.value;t=i+(7===i.length?"ff":"")}else{const e=new window.EyeDropper;nQ("Esc");try{const i=await e.open();t=i.sRGBHex+"ff"}catch(i){}}""===o.value?(h.value.color=t,h.value={...h.value}):r("update:value",t),r("native-pick",t)}qi((async function(){function e(e){N();try{const t=100*e.x,i=100*e.y;l.s=Math.round(t),l.l=Math.round(100-i),v.value.style.left=`${t}%`,v.value.style.top=`${i}%`}catch(t){}}function t(e){N(),l.h=360*e.x,m.value.style.left=100*e.x+"%"}function i(e){N(),l.a=e.x,b.value.style.left=100*e.x+"%"}v.value.style.left=`${l.s}%`,v.value.style.top=100-l.l+"%",m.value.style.left=l.h/360*100+"%",b.value.style.left=100*l.a+"%",O.value&&(x=WM(f.value,{onmousedown:function(e){if(k)return;const t=s.value.findIndex((t=>t.offset>=e.x)),i=s.value[t-1],n=ZM(i.color),r=s.value[t],o=ZM(r.color),a=[];for(let s=0;s<3;s+=1)a.push(n[s]+(o[s]-n[s])*e.x);const l=r.offset-e.x-(e.x-i.offset)>0?n[3]:o[3],c=$M(...a,l);h.value={color:c,offset:e.x},s.value.splice(t,0,h.value)},onmousemove:function(e){k&&(h.value.offset=e.x,s.value.sort(((e,t)=>e.offset-t.offset)),L(iQ(a.value,s.value)))},onmouseup:function(){k=!1}})),w=WM(g.value,{onmousemove:e,onmouseup:e}),_=WM(A.value,{onmousemove:t,onmouseup:t}),C=WM(y.value,{onmousemove:i,onmouseup:i}),P(o.value),Q(n.value)})),Yn((()=>{w?.destroy(),_?.destroy(),C?.destroy(),M(),x&&x.destroy()}));const U=e=>{const t=function(e){let t=e.replace(/\s/g,"");return e.startsWith("#")||(t="#"+t),t.length<9&&(t=t.padEnd(9,"f")),t}(e.target.value);r("blur",t),r("update:value",t)};function H(){L(iQ(a.value,s.value))}return t({updateValue:L}),(t,i)=>(Ki(),Ji("div",wQ,[e.modes.length>1?(Ki(),on(dQ,{key:0,type:"border-card",value:tn(o),"onUpdate:value":j},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(e.modes,(e=>(Ki(),on(mQ,{key:e,label:e},null,8,["label"])))),128))])),_:1},8,["value"])):(Ki(),Ji("div",_Q,ln(tn(o)),1)),tn(O)?yn((Ki(),Ji("div",CQ,[rn("div",kQ,[rn("div",{ref_key:"elGradientTrack",ref:f,class:"cpgb__track",style:Sn([{width:"100%"},{background:e.value}])},[(Ki(!0),Ji(Cn,null,zn(tn(s),((e,t)=>(Ki(),Ji("div",{key:t,class:en(["cpgb__pointer",{"cpgb__pointer--active":e===tn(h)}]),"data-sort":t,style:Sn({left:100*e.offset+"%",background:e.color}),tabindex:"-1",onMousedown:t=>{return i=e,k=!0,void(h.value=i);var i},onKeydown:wn(z,["stop"])},null,46,EQ)))),128))],4)]),Tn(yQ,{modelValue:tn(a),"onUpdate:modelValue":i[0]||(i[0]=e=>xn(a)?a.value=e:null),onChange:H},null,8,["modelValue"])],512)),[[jn,""===tn(o)]]):En("",!0),rn("div",{ref_key:"elPalette",ref:g,class:"cp__palette",style:Sn({background:tn(c)})},[SQ,IQ,rn("div",{ref_key:"elPalettePointer",ref:v,class:"cpp__pointer"},null,512)],4),rn("div",{ref_key:"elSliderHux",ref:A,class:"cp__slider cp__slider-hux"},[rn("div",BQ,[rn("div",{ref_key:"elSliderHuxPointer",ref:m,class:"cpst__pointer"},null,512)])],512),rn("div",{ref_key:"elSliderAlpha",ref:y,class:"cp__slider cp__slider-alpha"},[rn("div",{class:"cpsa__background",style:Sn(tn(T))},null,4),rn("div",OQ,[rn("div",{ref_key:"elSliderAlphaPointer",ref:b,class:"cpst__pointer"},null,512)])],512),rn("div",TQ,[rn("div",{class:"item",onClick:V},[p?(Ki(),on(gQ,{key:0})):(Ki(),Ji("input",{key:1,class:"native",type:"color",onInput:V},null,32))]),""===tn(o)?(Ki(),Ji("input",{key:0,class:"input",value:tn(h).color},null,8,DQ)):(Ki(),Ji("input",{key:1,value:e.value,class:"input",onBlur:U},null,40,MQ)),""===tn(o)?(Ki(!0),Ji(Cn,{key:2},zn(tn(I),(e=>(Ki(),Ji("div",{key:e,class:"item item-color",style:Sn({background:e}),onClick:t=>V({target:{value:e}})},null,12,QQ)))),128)):En("",!0)])]))}}),PQ=vr(jQ,[["__scopeId","data-v-59acd03c"]]),FQ={key:0,class:"box attr-item-box"},RQ=(e=>(Ar("data-v-8bdd557d"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),zQ={class:"bg-item"},NQ={style:{width:"100%","box-sizing":"border-box",padding:"10px"}},VQ="gradientAngle",UQ=Wi({__name:"AttributeColor",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=On({fill:""}),o=e=>{const n=i.canvas?.getActiveObject();if((!e||!e.target||e.target===n)&&n&&"one"===t.mSelectMode){const e=n.get("fill");r.fill="string"==typeof e?e:l(e,n)}},a=e=>{const t=i.canvas?.getActiveObjects()[0];if(t){const n=String(e.color).replace("NaN","");if(""===e.mode)t.set("fill",n);else if(""===e.mode){const i=c(An(e.stops),t.width,t.height,e.angle);t.set("fill",i,e.angle),t.set(VQ,e.angle)}i.canvas?.renderAll()}},s=e=>{a(e)},l=(e,t)=>{if(e)return`linear-gradient(${t.get(VQ,e.degree)}deg, ${e.colorStops.map((e=>e.color+" "+100*e.offset+"%"))})`},c=(e,t,i,n)=>{const r=(e=>{const t=-parseInt(e,10)*(Math.PI/180);return{x1:Math.round(50+50*Math.sin(t))/100,y1:Math.round(50+50*Math.cos(t))/100,x2:Math.round(50+50*Math.sin(t+Math.PI))/100,y2:Math.round(50+50*Math.cos(t+Math.PI))/100}})(n);return new Tm.fabric.Gradient({type:"linear",gradientUnits:"pencentage",coords:{x1:r.x1*t,y1:r.y1*i,x2:r.x2*t,y2:r.y2*i},colorStops:[...e]})},u=()=>{n?.proxy?.$forceUpdate()};return qi((()=>{gn((()=>{o(),i.editor?.on("selectCancel",u),i.editor?.on("selectOne",o),i.canvas?.on("object:modified",o)}))})),Yn((()=>{i.editor?.off("selectCancel",u),i.editor?.off("selectOne",o),i.canvas?.off("object:modified",o)})),(e,i)=>{const n=Ut,o=vv;return"one"===tn(t).mSelectMode&&"image"!==tn(t).mSelectOneType&&"group"!==tn(t).mSelectOneType?(Ki(),Ji("div",FQ,[Tn(n,{"content-position":"left"},{default:an((()=>[RQ])),_:1}),rn("div",zQ,[Tn(o,{width:"280px",placement:"top-start",effect:"light",trigger:"hover"},{reference:an((()=>[rn("div",{class:"color-bar",style:Sn({background:tn(r).fill})},null,4)])),default:an((()=>[rn("div",NQ,[Tn(PQ,{value:tn(r).fill,"onUpdate:value":i[0]||(i[0]=e=>tn(r).fill=e),modes:["",""],onChange:a,onNativePick:s},null,8,["value"])])])),_:1})])])):En("",!0)}}}),HQ=vr(UQ,[["__scopeId","data-v-8bdd557d"]]),GQ=e=>(Ar("data-v-e4ce65d1"),e=e(),br(),e),YQ={key:0,class:"box"},WQ=GQ((()=>rn("h4",null,"",-1))),XQ={class:"hd-wrap"},$Q={class:"hd"},qQ=GQ((()=>rn("span",null,"",-1))),KQ={class:"hd-wrap"},JQ=GQ((()=>rn("div",{class:"hd"},[rn("span",null,"")],-1))),ZQ={class:"operation"},eL=GQ((()=>rn("div",{class:"hd",style:{"flex-basis":"98px"}},[rn("span",null,"")],-1))),tL={style:{width:"100%"}},iL={class:"operation",style:{"justify-content":"space-between"}},nL=GQ((()=>rn("div",{class:"hd"},[rn("span",null,"")],-1))),rL=Wi({__name:"ImgStroke",setup(e){const t=VI(),{mixinState:i}=HI(),n=Xi(!1),r=Xi(!1),o=Xi(5),a=Xi("#000"),s=Xi(!1),l=()=>{const e=t.canvas?.getActiveObject();if(e&&cb.isImage(e))return e},c=()=>{const e=tn(s)?"destination-out":"source-over";t.editor.imageStrokeDraw(tn(a),tn(o),e)},u=async e=>{e?(0===tn(o)&&(o.value=5),(()=>{const e=l();e&&(e.set("originWidth",e?.get("width")),e.set("originHeight",e?.get("height")),e.set("originSrc",e?.getSrc()))})(),c()):(o.value=0,c())},d=e=>{o.value=e,c()},h=e=>{a.value=e,c()},p=()=>{n.value=!!l()};return qi((()=>{gn((()=>{t.editor?.on("selectOne",p)}))})),Yn((()=>{t.editor.off("selectOne",p)})),(e,t)=>{const l=Ut,p=ve,f=vv,g=em,v=Uv,m=wg;return"one"===tn(i).mSelectMode&&tn(n)?(Ki(),Ji("div",YQ,[Tn(l,{"content-position":"left"},{default:an((()=>[WQ])),_:1}),rn("div",XQ,[rn("div",$Q,[qQ,Tn(f,{trigger:"hover",content:"png"},{reference:an((()=>[Tn(p,{color:"#f34250"},{default:an((()=>[Tn(tn(fi))])),_:1})])),_:1})]),Tn(g,{modelValue:tn(r),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(r)?r.value=e:null),size:"large","inline-prompt":"",class:"switch","active-text":"","inactive-text":"",onChange:u},null,8,["modelValue"])]),tn(r)?(Ki(),Ji(Cn,{key:0},[rn("div",KQ,[JQ,Tn(g,{"inline-prompt":"",modelValue:tn(s),"onUpdate:modelValue":t[1]||(t[1]=e=>xn(s)?s.value=e:null),size:"large",class:"switch","active-text":"","inactive-text":"",onChange:c},null,8,["modelValue"])]),rn("div",ZQ,[eL,rn("div",tL,[Tn(v,{modelValue:tn(o),"onUpdate:modelValue":t[2]||(t[2]=e=>xn(o)?o.value=e:null),max:50,onChange:d},null,8,["modelValue"])])]),rn("div",iL,[nL,rn("div",null,[Tn(m,{modelValue:tn(a),"onUpdate:modelValue":t[3]||(t[3]=e=>xn(a)?a.value=e:null),onChange:h,placement:"left"},null,8,["modelValue"])])])],64)):En("",!0)])):En("",!0)}}}),oL=vr(rL,[["__scopeId","data-v-e4ce65d1"]]),aL={SELECT:"select",COLOR:"color",NUMBER:"number"},sL=[{type:"Brightness",status:!1,params:[{key:"brightness",value:0,uiType:aL.NUMBER,min:-1,max:1,step:.01}]},{type:"Contrast",status:!1,params:[{key:"contrast",value:0,uiType:aL.NUMBER,min:-1,max:1,step:.01}]},{type:"Saturation",status:!1,params:[{key:"saturation",value:0,uiType:aL.NUMBER,min:-1,max:1,step:.01}]},{type:"Vibrance",status:!1,params:[{key:"vibrance",value:0,uiType:aL.NUMBER,min:-1,max:1,step:.01}]},{type:"HueRotation",status:!1,params:[{key:"rotation",value:0,uiType:aL.NUMBER,min:-1,max:1,step:.01}]},{type:"Noise",status:!1,params:[{key:"noise",value:0,uiType:aL.NUMBER,min:-1,max:1e3,step:.1}]},{type:"Pixelate",status:!1,params:[{key:"blocksize",value:.01,uiType:aL.NUMBER,min:.01,max:100,step:.01}]},{type:"Blur",status:!1,params:[{key:"blur",value:0,uiType:aL.NUMBER,min:0,max:1,step:.01}]},{type:"Grayscale",status:!1,params:[{key:"mode",value:"average",uiType:aL.SELECT,list:["average","lightness","luminosity"]}]},{type:"RemoveColor",status:!1,params:[{key:"color",value:"",uiType:aL.COLOR},{key:"distance",value:0,uiType:aL.NUMBER,min:0,max:1,step:.01}]}],lL=[{type:"Gamma",status:!1,params:[{key:"red",value:0,uiType:aL.NUMBER,min:.01,max:2.2,step:.01},{key:"green",value:0,uiType:aL.NUMBER,min:.01,max:2.2,step:.01},{key:"blue",value:0,uiType:aL.NUMBER,min:.01,max:2.2,step:.01}],handler:(e,t,i)=>({gamma:[e,t,i]})}],cL={key:0,class:"box"},uL=(e=>(Ar("data-v-311ff7ef"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),dL={class:"filter-box"},hL=["src","onClick"],pL={key:0,class:"content"},fL={key:0},gL={key:1},vL={key:2},mL=Wi({__name:"Filters",setup(e){const i=nn("mixinState"),n=VI(),r=cn(),o={BlackWhite:!1,Brownie:!1,Vintage:!1,Kodachrome:!1,technicolor:!1,Polaroid:!1,Invert:!1,Sepia:!1},a=On({uiType:aL,noParamsFilters:o,paramsFilters:[...sL],combinationFilters:[...lL],type:""}),s=(e,t)=>{const i=n.canvas?.getActiveObjects()[0];a.noParamsFilters[e]=t,t?h(i,e)||d(i,e):p(i,e)},l=e=>{const t=n.canvas?.getActiveObjects()[0],i=[...a.paramsFilters,...a.combinationFilters].find((t=>t.type===e));i.status?i.handler?function(e){const t=n.canvas?.getActiveObjects()[0];p(t,e.type);const i=e.params.map((e=>e.value));d(t,e.type,e.handler(...i))}(i):i.params.forEach((t=>{!function(e,t,i){const r=n.canvas?.getActiveObjects()[0],o=h(r,e);o?o[t]=i:d(r,e)[t]=i,r.applyFilters(),n.canvas?.renderAll()}(e,t.key,t.value)})):p(t,e)},c=()=>{const e=n.canvas?.getActiveObjects()[0];e&&(a.type=e.type,"image"===a.type&&(Object.keys(o).forEach((t=>{a.noParamsFilters[t]=!!h(e,t),r?.proxy?.$forceUpdate()})),sL.forEach((t=>{const i=a.paramsFilters.find((e=>e.type===t.type)),n=h(e,t.type);i.status=!!n,i.params.forEach((e=>{e.value=n?n[e.key]:e.value}))})),lL.forEach((t=>{const i=a.combinationFilters.find((e=>e.type===t.type)),n=h(e,t.type);i.status=!!n}))),r?.proxy?.$forceUpdate())};function u(e){return new URL(Object.assign({})[`../../../assets/filters/${e}.png`],t.meta.url).href}function d(e,t,i=null){let r;const o=f(t),a=Tm.fabric.Image.filters[o];return a&&(r=new a(i),r.options=i,e.filters.push(r)),e.applyFilters(),n.canvas?.renderAll(),r}function h(e,t){let i=null;if(e){const n=f(t),{length:r}=e.filters;let o,a;for(a=0;a<r;a+=1)if(o=e.filters[a],o.type===n){i=o;break}}return i}function p(e,t){const i=f(t);e.filters=e.filters.filter((e=>e.type!==i)),e.applyFilters(),n.canvas?.renderAll()}function f(e){return e.charAt(0).toUpperCase()+e.slice(1)}return qi((()=>{gn((()=>{n.editor?.on("selectOne",c)}))})),Yn((()=>{gn((()=>{n.editor?.off("selectOne",c)}))})),(e,t)=>{const n=Ut,r=zp,c=Uf,d=lf,h=cf,p=Uv,f=wg,g=Vf;return"one"===tn(i).mSelectMode&&"image"===tn(a).type?(Ki(),Ji("div",cL,[Tn(n,{"content-position":"left"},{default:an((()=>[uL])),_:1}),Tn(g,null,{default:an((()=>[Tn(c,{name:"1"},{title:an((()=>[kn(ln(e.$t("editor.filters.simple")),1)])),default:an((()=>[rn("div",dL,[(Ki(!0),Ji(Cn,null,zn(tn(a).noParamsFilters,((t,i)=>(Ki(),Ji("div",{class:"filter-item",key:i},[rn("img",{src:u(i),onClick:e=>s(i,!o[i])},null,8,hL),Tn(r,{modelValue:tn(a).noParamsFilters[i],"onUpdate:modelValue":e=>tn(a).noParamsFilters[i]=e,onChange:e=>s(i,e)},{default:an((()=>[kn(ln(e.$t("editor.filters."+i)),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])))),128))])])),_:1}),Tn(c,{name:"2",title:e.$t("editor.filters.complex")},{default:an((()=>[rn("div",null,[(Ki(!0),Ji(Cn,null,zn([...tn(a).paramsFilters,...tn(a).combinationFilters],(t=>(Ki(),Ji("div",{class:"filter-item has-params",key:t.type},[Tn(r,{modelValue:t.status,"onUpdate:modelValue":e=>t.status=e,onChange:e=>l(t.type)},{default:an((()=>[kn(ln(e.$t("editor.filters."+t.type)),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),t.status?(Ki(),Ji("div",pL,[(Ki(!0),Ji(Cn,null,zn(t.params,(i=>(Ki(),Ji("div",{class:"content slider-box",key:i},[i.uiType===tn(aL).SELECT?(Ki(),Ji("div",fL,[Tn(h,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,onChange:e=>l(t.type)},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(i.list,(i=>(Ki(),on(d,{value:i,key:i},{default:an((()=>[kn(ln(e.$t("editor.filters."+t.type+"List."+i)),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):En("",!0),i.uiType===tn(aL).NUMBER?(Ki(),Ji("div",gL,[Tn(p,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,max:i.max,min:i.min,step:i.step,onOnInput:e=>l(t.type)},null,8,["modelValue","onUpdate:modelValue","max","min","step","onOnInput"])])):En("",!0),i.uiType===tn(aL).COLOR?(Ki(),Ji("div",vL,[Tn(f,{modelValue:i.value,"onUpdate:modelValue":e=>i.value=e,"show-alpha":"",size:"small",onChange:e=>l(t.type)},null,8,["modelValue","onUpdate:modelValue","onChange"])])):En("",!0)])))),128))])):En("",!0)])))),128))])])),_:1},8,["title"])])),_:1})])):En("",!0)}}}),AL=vr(mL,[["__scopeId","data-v-311ff7ef"]]),bL=e=>(Ar("data-v-de061f3e"),e=e(),br(),e),yL={key:0,class:"box attr-item-box"},xL=bL((()=>rn("h4",null,"",-1))),wL={class:"flex-view"},_L={class:"flex-item"},CL=bL((()=>rn("span",{class:"label"},"",-1))),kL={class:"content"},EL={class:"flex-view"},SL={class:"flex-item"},IL={class:"content number-content"},BL={class:"flex-item",style:{"margin-left":"20px"}},OL={class:"content number-content"},TL={class:"flex-view"},DL={class:"flex-item"},ML=bL((()=>rn("span",{class:"label"},"",-1))),QL={class:"content"},LL={class:"flex-item"},jL=bL((()=>rn("span",{class:"label",style:{"margin-left":"10px"}},"",-1))),PL={class:"content"},FL={class:"flex-view"},RL={class:"flex-item"},zL=bL((()=>rn("span",{class:"label"},"",-1))),NL={class:"content"},VL={class:"flex-item"},UL=bL((()=>rn("span",{class:"label",style:{"margin-left":"10px"}},"",-1))),HL={class:"content"},GL={class:"flex-view"},YL={class:"flex-item"},WL=bL((()=>rn("span",{class:"label"},"",-1))),XL={class:"content"},$L={class:"flex-item"},qL=bL((()=>rn("span",{class:"label",style:{"margin-left":"10px"}},"",-1))),KL={class:"content"},JL={class:"flex-view"},ZL={class:"flex-item"},ej=bL((()=>rn("span",{class:"label"},"",-1))),tj={class:"content"},ij={class:"flex-item"},nj=bL((()=>rn("span",{class:"label",style:{"margin-left":"10px"}},"",-1))),rj={class:"content"},oj=Wi({__name:"AttributeQrCode",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=["image"],o=Xi(""),a=pn((()=>"qrcode"===o.value)),s=On({data:"",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"dot",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}),l=e=>{const t=i.canvas?.getActiveObject();if((!e||!e.target||e.target===t)&&(o.value=t?.extensionType||"",t&&r.includes(t.type)&&"qrcode"===t?.extensionType)){const e=t.get("extension");Object.keys(e).forEach((t=>{s[t]=e[t]}))}},c=()=>{i.editor.setQrCode(An(s)),i.canvas?.renderAll()},u=()=>{o.value="",n?.proxy?.$forceUpdate()},d=On({CornersType:[],DotsType:[],cornersDotType:[],errorCorrectionLevelType:[]});return qi((()=>{gn((()=>{const e=i.editor?.getQrCodeTypes();e&&Object.assign(d,e),i.editor?.on("selectCancel",u),i.editor?.on("selectOne",l),i.canvas?.on("object:modified",l)}))})),Yn((()=>{i.editor?.off("selectCancel",u),i.editor?.off("selectOne",l),i.canvas?.off("object:modified",l)})),(e,i)=>{const n=Ut,o=Ue,l=wg,u=lv,h=sv;return"one"===tn(t).mSelectMode&&r.includes(tn(t).mSelectOneType)&&tn(a)?(Ki(),Ji("div",yL,[Tn(n,{"content-position":"left"},{default:an((()=>[xL])),_:1}),rn("div",null,[rn("div",wL,[rn("div",_L,[CL,rn("div",kL,[Tn(o,{modelValue:tn(s).data,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(s).data=e),onChange:c},null,8,["modelValue"])])])]),rn("div",EL,[rn("div",SL,[rn("div",IL,[Tn(tn(ID),{modelValue:tn(s).width,"onUpdate:modelValue":i[1]||(i[1]=e=>tn(s).width=e),onOnChange:c,append:"",min:1},null,8,["modelValue"])])]),rn("div",BL,[rn("div",OL,[Tn(tn(ID),{modelValue:tn(s).margin,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(s).margin=e),onOnChange:c,append:"",min:1},null,8,["modelValue"])])])]),rn("div",TL,[rn("div",DL,[ML,rn("div",QL,[Tn(l,{id:"dotsColor",modelValue:tn(s).dotsColor,"onUpdate:modelValue":i[3]||(i[3]=e=>tn(s).dotsColor=e),onChange:c,"show-alpha":""},null,8,["modelValue"])])]),rn("div",LL,[jL,rn("div",PL,[Tn(h,{modelValue:tn(s).dotsType,"onUpdate:modelValue":i[4]||(i[4]=e=>tn(s).dotsType=e),onChange:c,style:{width:"90px"}},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(d).DotsType,(e=>(Ki(),on(u,{value:e,key:e},{default:an((()=>[kn(ln(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])]),rn("div",FL,[rn("div",RL,[zL,rn("div",NL,[Tn(l,{id:"cornersSquareColor",modelValue:tn(s).cornersSquareColor,"onUpdate:modelValue":i[5]||(i[5]=e=>tn(s).cornersSquareColor=e),onChange:c,"show-alpha":""},null,8,["modelValue"])])]),rn("div",VL,[UL,rn("div",HL,[Tn(h,{modelValue:tn(s).cornersSquareType,"onUpdate:modelValue":i[6]||(i[6]=e=>tn(s).cornersSquareType=e),onChange:c,style:{width:"90px"}},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(d).cornersDotType,(e=>(Ki(),on(u,{value:e,key:e},{default:an((()=>[kn(ln(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])]),rn("div",GL,[rn("div",YL,[WL,rn("div",XL,[Tn(l,{id:"cornersDotColor",modelValue:tn(s).cornersDotColor,"onUpdate:modelValue":i[7]||(i[7]=e=>tn(s).cornersDotColor=e),onChange:c,"show-alpha":""},null,8,["modelValue"])])]),rn("div",$L,[qL,rn("div",KL,[Tn(h,{modelValue:tn(s).cornersDotType,"onUpdate:modelValue":i[8]||(i[8]=e=>tn(s).cornersDotType=e),onChange:c,style:{width:"90px"}},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(d).cornersDotType,(e=>(Ki(),on(u,{value:e,key:e},{default:an((()=>[kn(ln(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])]),rn("div",JL,[rn("div",ZL,[ej,rn("div",tj,[Tn(l,{id:"background",modelValue:tn(s).background,"onUpdate:modelValue":i[9]||(i[9]=e=>tn(s).background=e),onChange:c,"show-alpha":""},null,8,["modelValue"])])]),rn("div",ij,[nj,rn("div",rj,[Tn(h,{modelValue:tn(s).errorCorrectionLevel,"onUpdate:modelValue":i[10]||(i[10]=e=>tn(s).errorCorrectionLevel=e),onChange:c,style:{width:"90px"}},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(d).errorCorrectionLevelType,(e=>(Ki(),on(u,{value:e,key:e},{default:an((()=>[kn(ln(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])])])])):En("",!0)}}}),aj=vr(oj,[["__scopeId","data-v-de061f3e"]]),sj=e=>(Ar("data-v-fafd93a4"),e=e(),br(),e),lj={key:0,class:"attr-item-box"},cj=sj((()=>rn("h4",null,"",-1))),uj={class:"flex-view"},dj={class:"flex-item"},hj=sj((()=>rn("span",{class:"label"},"",-1))),pj={class:"content"},fj={key:0,class:"flex-view"},gj={class:"flex-item"},vj=sj((()=>rn("span",{class:"label"},"",-1))),mj={class:"content"},Aj={class:"flex-view"},bj={class:"flex-item"},yj=sj((()=>rn("span",{class:"label"},"",-1))),xj={class:"content"},wj={key:0,class:"flex-item"},_j=sj((()=>rn("span",{class:"label"},"",-1))),Cj={class:"content"},kj={key:1,class:"flex-view"},Ej={class:"flex-item"},Sj=["innerHTML"],Ij={class:"flex-view"},Bj={span:12,class:"flex-item"},Oj=sj((()=>rn("span",{class:"label"},"",-1))),Tj={class:"content"},Dj={key:0,span:12,class:"flex-item"},Mj={class:"content f-center"},Qj={class:"flex-view"},Lj={class:"flex-item"},jj=sj((()=>rn("span",{class:"label"},"",-1))),Pj={class:"content"},Fj={class:"flex-item"},Rj=sj((()=>rn("span",{class:"label mr-10px"},"",-1))),zj={class:"content"},Nj=Wi({__name:"AttributeBarcode",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),r=["image"],o=Xi(""),a=pn((()=>"barcode"===o.value)),s=On({value:"",format:"",text:"12121",textAlign:"left",textPosition:"bottom",fontSize:12,background:"",lineColor:"",displayValue:!1}),l=["left","center","right"],c=['<svg t="1650441458823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3554" width="18" height="18"><path d="M198.4 198.4h341.333333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666667h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-569.6c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666666h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533334z m0 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3555"></path></svg>','<svg t="1650441512015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3704" width="18" height="18"><path d="M313.6 198.4h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533333z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m115.2 170.666666h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533334z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3705"></path></svg>','<svg t="1650441519862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="18" height="18"><path d="M454.4 283.733333v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h341.333334c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333334c-8.533333 0-14.933333-2.133333-19.2-8.533334-4.266667-4.266667-8.533333-10.666667-8.533333-19.2z m-226.133333 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333H256c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533333-19.2z m113.066666 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533334-19.2 6.4-6.4 12.8-8.533333 19.2-8.533334h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533334-19.2z m-170.666666 170.666666v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-4.266667-8.533333-10.666667-8.533333-19.2z" p-id="3855"></path></svg>'],u=e=>{const t=i.canvas?.getActiveObject();e&&e.target&&e.target!==t||(o.value=t?.extensionType||"",t&&r.includes(t.type)&&"barcode"===t?.extensionType&&(s.value=t.get("extension").value,s.format=t.get("extension").format,s.text=t.get("extension").text,s.textAlign=t.get("extension").textAlign,s.textPosition=t.get("extension").textPosition,s.fontSize=t.get("extension").fontSize,s.background=t.get("extension").background,s.lineColor=t.get("extension").lineColor,s.displayValue=t.get("extension").displayValue))},d=()=>{i.editor.setBarcode(An(s)),i.canvas?.renderAll()},h=()=>{o.value="",n?.proxy?.$forceUpdate()},p=Xi([]);return qi((()=>{gn((()=>{u(),p.value=i.editor?.getBarcodeTypes(),i.editor?.on("selectCancel",h),i.editor?.on("selectOne",u),i.canvas?.on("object:modified",u)}))})),Yn((()=>{i.editor?.off("selectCancel",h),i.editor?.off("selectOne",u),i.canvas?.off("object:modified",u)})),(e,i)=>{const n=Ut,o=Ue,u=em,h=lv,f=sv,g=uf,v=cf,m=wg;return"one"===tn(t).mSelectMode&&r.includes(tn(t).mSelectOneType)&&tn(a)?(Ki(),Ji("div",lj,[Tn(n,{"content-position":"left"},{default:an((()=>[cj])),_:1}),rn("div",null,[rn("div",uj,[rn("div",dj,[hj,rn("div",pj,[Tn(o,{modelValue:tn(s).value,"onUpdate:modelValue":i[0]||(i[0]=e=>tn(s).value=e),onChange:d},null,8,["modelValue"])])])]),tn(s).displayValue?(Ki(),Ji("div",fj,[rn("div",gj,[vj,rn("div",mj,[Tn(o,{modelValue:tn(s).text,"onUpdate:modelValue":i[1]||(i[1]=e=>tn(s).text=e),onChange:d},null,8,["modelValue"])])])])):En("",!0),rn("div",Aj,[rn("div",bj,[yj,rn("div",xj,[Tn(u,{modelValue:tn(s).displayValue,"onUpdate:modelValue":i[2]||(i[2]=e=>tn(s).displayValue=e),onChange:d},null,8,["modelValue"])])]),tn(s).displayValue?(Ki(),Ji("div",wj,[_j,rn("div",Cj,[Tn(f,{modelValue:tn(s).textPosition,"onUpdate:modelValue":i[3]||(i[3]=e=>tn(s).textPosition=e),onChange:d},{default:an((()=>[Tn(h,{value:"bottom"},{default:an((()=>[kn("bottom")])),_:1}),Tn(h,{value:"top"},{default:an((()=>[kn("top")])),_:1})])),_:1},8,["modelValue"])])])):En("",!0)]),tn(s).displayValue?(Ki(),Ji("div",kj,[rn("div",Ej,[Tn(v,{class:"button-group",modelValue:tn(s).textAlign,"onUpdate:modelValue":i[4]||(i[4]=e=>tn(s).textAlign=e),onChange:d,size:"small"},{default:an((()=>[(Ki(),Ji(Cn,null,zn(l,((e,t)=>Tn(g,{label:e,value:e,key:e},{default:an((()=>[rn("span",{innerHTML:c[t]},null,8,Sj)])),_:2},1032,["label","value"]))),64))])),_:1},8,["modelValue"])])])):En("",!0),rn("div",Ij,[rn("div",Bj,[Oj,rn("div",Tj,[Tn(m,{modelValue:tn(s).lineColor,"onUpdate:modelValue":i[5]||(i[5]=e=>tn(s).lineColor=e),onChange:d,"show-alpha":""},null,8,["modelValue"])])]),tn(s).displayValue?(Ki(),Ji("div",Dj,[rn("div",Mj,[Tn(tn(ID),{modelValue:tn(s).fontSize,"onUpdate:modelValue":i[6]||(i[6]=e=>tn(s).fontSize=e),onOnChange:d,append:"",min:1},null,8,["modelValue"])])])):En("",!0)]),rn("div",Qj,[rn("div",Lj,[jj,rn("div",Pj,[Tn(m,{modelValue:tn(s).background,"onUpdate:modelValue":i[7]||(i[7]=e=>tn(s).background=e),onChange:d,"show-alpha":""},null,8,["modelValue"])])]),rn("div",Fj,[Rj,rn("div",zj,[Tn(f,{modelValue:tn(s).format,"onUpdate:modelValue":i[8]||(i[8]=e=>tn(s).format=e),onOnChange:d,style:{width:"90px"}},{default:an((()=>[(Ki(!0),Ji(Cn,null,zn(tn(p),(e=>(Ki(),on(h,{value:e,key:e},{default:an((()=>[kn(ln(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])])])])):En("",!0)}}}),Vj=vr(Nj,[["__scopeId","data-v-fafd93a4"]]),Uj=e=>(Ar("data-v-345e1c69"),e=e(),br(),e),Hj={key:0,class:"attr-item-box"},Gj={class:"bg-item"},Yj=Uj((()=>rn("svg",{t:"1650443094178",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1549",width:"14",height:"14"},[rn("path",{d:"M252.76928 299.904l146.2784 0 0 472.42752-146.2784 0 0-472.42752Z","p-id":"1550"}),rn("path",{d:"M477.48096 85.34528l70.87104 0 0 885.80608-70.87104 0 0-885.80608Z","p-id":"1551"}),rn("path",{d:"M629.80096 284.8l31.0016 0 0 502.88128-31.0016 0L629.80096 284.8zM776.42752 284.8l31.0016 0 0 502.88128-31.0016 0L776.42752 284.8zM657.09056 315.8016l0-31.0016 123.04896 0 0 31.0016L657.09056 315.8016zM657.27488 787.64544l0-31.0016 123.04896 0 0 31.0016L657.27488 787.64544z","p-id":"1552"})],-1))),Wj=Uj((()=>rn("svg",{t:"1650443104385",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1749",width:"14",height:"14"},[rn("path",{d:"M286.01856 250.91584l472.4224 0 0 146.2784-472.4224 0 0-146.2784Z","p-id":"1750"}),rn("path",{d:"M87.19872 475.62752l885.80096 0 0 70.87104-885.80096 0 0-70.87104Z","p-id":"1751"}),rn("path",{d:"M773.55008 627.94752l0 31.0016L270.6688 658.94912l0-31.0016L773.55008 627.94752zM773.55008 774.5792l0 31.0016L270.6688 805.5808l0-31.0016L773.55008 774.5792zM742.54848 655.24224l31.0016 0 0 123.04896-31.0016 0L742.54848 655.24224zM270.70464 655.42144l31.0016 0 0 123.04896-31.0016 0L270.70464 655.42144z","p-id":"1752"})],-1))),Xj=Wi({__name:"Flip",setup(e){const t=nn("mixinState"),i=VI(),n=()=>"one"!==t.mSelectMode,r=e=>{const t=i.canvas?.getActiveObject();t.set(`flip${e}`,!t[`flip${e}`]).setCoords(),i.canvas?.requestRenderAll()};return(e,i)=>{const o=He,a=Ye;return"one"===tn(t).mSelectMode?(Ki(),Ji("div",Hj,[rn("div",Gj,[Tn(a,{content:e.$t("editor.attrSetting.flip.x")},{default:an((()=>[Tn(o,{disabled:n(),onClick:i[0]||(i[0]=e=>r("X")),link:""},{default:an((()=>[Yj])),_:1},8,["disabled"])])),_:1},8,["content"]),Tn(a,{content:e.$t("editor.attrSetting.flip.y")},{default:an((()=>[Tn(o,{disabled:n(),onClick:i[1]||(i[1]=e=>r("Y")),link:""},{default:an((()=>[Wj])),_:1},8,["disabled"])])),_:1},8,["content"])])])):En("",!0)}}}),$j=vr(Xj,[["__scopeId","data-v-345e1c69"]]),qj={key:0,class:"attr-item-box"},Kj={class:"bg-item",style:{"margin-bottom":"10px"}},Jj={class:"bg-item"},Zj=Wi({__name:"ClipImage",setup(e){const t=nn("mixinState"),i=VI(),n=cn(),{t:r}=Lt(),o=Xi(""),a=[{label:r("edotpr.polygonClip"),value:"polygon"},{label:r("edotpr.rectClip"),value:"rect"},{label:r("edotpr.circleClip"),value:"circle"},{label:r("edotpr.triangleClip"),value:"triangle"},{label:r("edotpr.polygonClipInverted"),value:"polygon-inverted"},{label:r("edotpr.rectClipInverted"),value:"rect-inverted"},{label:r("edotpr.circleClipInverted"),value:"circle-inverted"},{label:r("edotpr.triangleClipInverted"),value:"triangle-inverted"}],s=async e=>{i.editor.addClipPathToImage(e)},l=()=>{i.editor.removeClip()},c=()=>{const e=i.canvas?.getActiveObjects()[0];e&&(o.value=e.type,n?.proxy?.$forceUpdate())};return qi((()=>{i.editor?.on("selectOne",c)})),Yn((()=>{i.editor?.off("selectOne",c)})),(e,i)=>{const n=He,r=Rt,c=zt,u=Nt;return"one"===tn(t).mSelectMode&&"image"===tn(o)?(Ki(),Ji("div",qj,[rn("div",Kj,[Tn(u,{style:{width:"270px"},onCommand:s},{dropdown:an((()=>[Tn(c,null,{default:an((()=>[(Ki(),Ji(Cn,null,zn(a,(e=>Tn(r,{key:e.value,command:e.value},{default:an((()=>[kn(ln(e.label),1)])),_:2},1032,["command"]))),64))])),_:1})])),default:an((()=>[Tn(n,{text:""},{default:an((()=>[kn(ln(e.$t("editor.createClip")),1)])),_:1})])),_:1})]),rn("div",Jj,[Tn(n,{onClick:l,text:""},{default:an((()=>[kn(ln(e.$t("editor.removeClip")),1)])),_:1})])])):En("",!0)}}}),eP=vr(Zj,[["__scopeId","data-v-44c69cde"]]),tP={key:0,class:"attr-item-box"},iP={class:"bg-item"},nP=Wi({__name:"ReplaceImg",setup(e){const t=nn("mixinState"),i=VI(),{getImgStr:n,selectFiles:r,insertImgFile:o}=cb,a=cn(),s=Xi(""),l=async()=>{const e=i.canvas?.getActiveObjects()[0];if(e&&"image"===e.type){const[t]=await r({accept:"image/*",multiple:!1}),a=await n(t),s=await o(a),l=e.get("width"),c=e.get("height"),u=e.get("scaleX"),d=e.get("scaleY");e.setSrc(s.src,(()=>{e.set("scaleX",l*u/s.width),e.set("scaleY",c*d/s.height),i.canvas?.renderAll()})),s.remove()}},c=()=>{const e=i.canvas?.getActiveObjects()[0];e&&(s.value=e.type,a?.proxy?.$forceUpdate())};return qi((()=>{gn((()=>{i.editor?.on("selectOne",c)}))})),Yn((()=>{i.editor?.off("selectOne",c)})),(e,i)=>{const n=He;return"one"===tn(t).mSelectMode&&"image"===tn(s)?(Ki(),Ji("div",tP,[rn("div",iP,[Tn(n,{onClick:l,text:""},{default:an((()=>[kn(ln(e.$t("editor.repleaceImg")),1)])),_:1})])])):En("",!0)}}}),rP=vr(nP,[["__scopeId","data-v-dee7b64a"]]),oP=Wi({__name:"Edit",setup(e){const t=nn("mixinState"),i=VI(),n=()=>{const e=i.editor.fabricCanvas?.getActiveObject();e&&"polygon"===e.type?i.editor.activeEdit():Pt.warning("polygon")};return(e,i)=>{const r=Vt,o=He,a=Ye;return"polygon"===tn(t).mSelectOneType?(Ki(),on(a,{key:0,content:e.$t("editor.quick.editPoly")},{default:an((()=>[Tn(o,{onClick:n,link:""},{default:an((()=>[Tn(r,{extClass:"text-20px",icon:"editor-brush"})])),_:1})])),_:1},8,["content"])):En("",!0)}}}),aP=Wi({__name:"Hide",setup(e){const t=nn("mixinState"),i=VI(),n=Xi(!1),r=e=>{const t=i.canvas?.getActiveObject();t.set("visible",!e),i.canvas?.requestRenderAll(),n.value=e},o=()=>{const e=i.canvas?.getActiveObject();n.value=!e.visible};return qi((()=>{i.editor?.on("selectOne",o)})),Yn((()=>{i.editor?.off("selectOne",o)})),(e,i)=>{const o=He;return"one"===tn(t).mSelectMode?(Ki(),on(o,{key:0,text:"",content:e.$t("editor.quick.hide")},{default:an((()=>[tn(n)?(Ki(),on(o,{key:0,onClick:i[0]||(i[0]=e=>r(!1)),icon:tn(gi),link:""},null,8,["icon"])):(Ki(),on(o,{key:1,onClick:i[1]||(i[1]=e=>r(!0)),icon:tn(vi),link:""},null,8,["icon"]))])),_:1},8,["content"])):En("",!0)}}}),sP=vr(aP,[["__scopeId","data-v-b6f376dc"]]),lP=Wi({__name:"Clone",setup(e){const t=nn("mixinState"),i=VI(),n=J((function(){i.editor.clone()}),300);return(e,i)=>{const r=He,o=Ye;return"one"===tn(t).mSelectMode?(Ki(),on(o,{key:0,content:e.$t("editor.quick.copy")},{default:an((()=>[Tn(r,{onClick:tn(n),icon:tn(mi),link:""},null,8,["onClick","icon"])])),_:1},8,["content"])):En("",!0)}}}),cP=Wi({__name:"Delete",setup(e){const t=nn("mixinState"),i=VI(),n=J((function(){i.editor.del()}),300);return(e,i)=>{const r=He,o=Ye;return tn(t).mSelectMode?(Ki(),on(o,{key:0,content:e.$t("editor.quick.del")},{default:an((()=>[Tn(r,{onClick:tn(n),icon:tn(Xt),link:""},null,8,["onClick","icon"])])),_:1},8,["content"])):En("",!0)}}}),uP=Wi({__name:"Lock",setup(e){const t=nn("mixinState"),i=VI(),n=Xi(!1),r=e=>{e?i.editor?.lock():i.editor?.unLock()},o=e=>{n.value=!e[0].selectable};return qi((()=>{gn((()=>{i.editor?.on("selectOne",o)}))})),Yn((()=>{i.editor?.off("selectOne",o)})),(e,i)=>{const o=He,a=Ye;return"one"===tn(t).mSelectMode?(Ki(),on(a,{key:0,content:e.$t("quick.lock")},{default:an((()=>[tn(n)?(Ki(),on(o,{key:0,onClick:i[0]||(i[0]=e=>r(!1)),icon:tn(ei),link:""},null,8,["icon"])):(Ki(),on(o,{key:1,onClick:i[1]||(i[1]=e=>r(!0)),icon:tn(ti),link:""},null,8,["icon"]))])),_:1},8,["content"])):En("",!0)}}}),dP=vr(uP,[["__scopeId","data-v-81ad680e"]]),hP=e=>(Ar("data-v-49e7fd80"),e=e(),br(),e),pP={key:0,class:"attr-item-box"},fP={class:"bg-item"},gP=hP((()=>rn("svg",{t:"1650442559691",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3787",width:"14",height:"14"},[rn("path",{d:"M885 607H544V417h192V227H544V24h-64v203H288v190h192v190H139v190h341v203h64V797h341z","p-id":"3788"})],-1))),vP=hP((()=>rn("svg",{t:"1650852784867",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2351",width:"14",height:"14"},[rn("path",{d:"M544 480V64h-64v416H64v64h416v416h64V544h416v-64z","p-id":"2352"}),rn("path",{d:"M123.7 241.1h119.5v64H123.7zM302.9 241.1h119.5v64H302.9zM601.6 241.1h119.5v64H601.6zM780.8 241.1h119.5v64H780.8zM123.7 718.9h119.5v64H123.7zM302.9 718.9h119.5v64H302.9zM601.6 718.9h119.5v64H601.6zM780.8 718.9h119.5v64H780.8z","p-id":"2353"})],-1))),mP=hP((()=>rn("svg",{t:"1650442510967",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3412",width:"14",height:"14"},[rn("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8z m-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6z m11.4 225.4c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z","p-id":"3413"})],-1))),AP=Wi({__name:"CenterAlign",setup(e){const t=nn("mixinState"),i=VI(),n=e=>{i.editor.position(e)};return(e,i)=>{const r=Ut,o=He,a=Ye;return tn(t).mSelectMode?(Ki(),Ji("div",pP,[Tn(r,{"content-position":"left"},{default:an((()=>[rn("h4",null,ln(e.$t("editor.attrSetting.centerAlign.name")),1)])),_:1}),rn("div",fP,[Tn(a,{content:e.$t("editor.attrSetting.centerAlign.centerX")},{default:an((()=>[Tn(o,{disabled:!tn(t).mSelectMode,onClick:i[0]||(i[0]=e=>n("centerH")),link:""},{default:an((()=>[gP])),_:1},8,["disabled"])])),_:1},8,["content"]),Tn(a,{content:e.$t("editor.attrSetting.centerAlign.center")},{default:an((()=>[Tn(o,{disabled:!tn(t).mSelectMode,onClick:i[1]||(i[1]=e=>n("center")),link:""},{default:an((()=>[vP])),_:1},8,["disabled"])])),_:1},8,["content"]),Tn(a,{content:e.$t("editor.attrSetting.centerAlign.centerY")},{default:an((()=>[Tn(o,{disabled:!tn(t).mSelectMode,onClick:i[2]||(i[2]=e=>n("centerV")),link:""},{default:an((()=>[mP])),_:1},8,["disabled"])])),_:1},8,["content"])])])):En("",!0)}}}),bP=vr(AP,[["__scopeId","data-v-49e7fd80"]]),yP={key:0,class:"attr-item-box"},xP=rn("h4",null,"",-1),wP={class:"bg-item flex flex-wrap"},_P=Wi({__name:"Align",setup(e){const t=nn("mixinState"),i=VI(),n=()=>{i.editor.left()},r=()=>{i.editor.right()},o=()=>{i.editor.xcenter()},a=()=>{i.editor.ycenter()},s=()=>{i.editor.top()},l=()=>{i.editor.bottom()},c=()=>{i.editor.xequation()},u=()=>{i.editor.yequation()};return(e,i)=>{const d=Ut,h=Vt,p=He,f=Ye;return"multiple"===tn(t).mSelectMode?(Ki(),Ji("div",yP,[Tn(d,{"content-position":"left"},{default:an((()=>[xP])),_:1}),rn("div",wP,[Tn(f,{content:e.$t("editor.attrSetting.align.left")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:n,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"left"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.centerX")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:o,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"centerx"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.right")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:r,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"right"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.top")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:s,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"top"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.centerY")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:a,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"centery"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.bottom")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:l,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"bottom"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.averageX")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:c,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"sx"})])),_:1})])),_:1},8,["content"]),Tn(f,{content:e.$t("editor.attrSetting.align.averageY")},{default:an((()=>[Tn(p,{class:"w-36px",onClick:u,size:"small",link:""},{default:an((()=>[Tn(h,{extClass:"text-20px",icon:"sy"})])),_:1})])),_:1},8,["content"])])])):En("",!0)}}}),CP=e=>(Ar("data-v-a9cdd218"),e=e(),br(),e),kP={key:0,class:"attr-item-box"},EP={class:"bg-item"},SP=CP((()=>rn("svg",{t:"1650848913991",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17131",width:"14",height:"14"},[rn("path",{d:"M341.333333 341.333333 341.333333 512 554.666667 512 554.666667 341.333333 341.333333 341.333333M42.666667 42.666667 213.333333 42.666667 213.333333 85.333333 810.666667 85.333333 810.666667 42.666667 981.333333 42.666667 981.333333 213.333333 938.666667 213.333333 938.666667 810.666667 981.333333 810.666667 981.333333 981.333333 810.666667 981.333333 810.666667 938.666667 213.333333 938.666667 213.333333 981.333333 42.666667 981.333333 42.666667 810.666667 85.333333 810.666667 85.333333 213.333333 42.666667 213.333333 42.666667 42.666667M213.333333 810.666667 213.333333 853.333333 810.666667 853.333333 810.666667 810.666667 853.333333 810.666667 853.333333 213.333333 810.666667 213.333333 810.666667 170.666667 213.333333 170.666667 213.333333 213.333333 170.666667 213.333333 170.666667 810.666667 213.333333 810.666667M256 256 640 256 640 426.666667 768 426.666667 768 768 341.333333 768 341.333333 597.333333 256 597.333333 256 256M640 597.333333 426.666667 597.333333 426.666667 682.666667 682.666667 682.666667 682.666667 512 640 512 640 597.333333Z","p-id":"17132",fill:"#303133"})],-1))),IP=CP((()=>rn("svg",{t:"1650848938557",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17281",width:"14",height:"14"},[rn("path",{d:"M85.333333 85.333333 256 85.333333 256 128 554.666667 128 554.666667 85.333333 725.333333 85.333333 725.333333 256 682.666667 256 682.666667 384 768 384 768 341.333333 938.666667 341.333333 938.666667 512 896 512 896 768 938.666667 768 938.666667 938.666667 768 938.666667 768 896 512 896 512 938.666667 341.333333 938.666667 341.333333 768 384 768 384 682.666667 256 682.666667 256 725.333333 85.333333 725.333333 85.333333 554.666667 128 554.666667 128 256 85.333333 256 85.333333 85.333333M768 512 768 469.333333 682.666667 469.333333 682.666667 554.666667 725.333333 554.666667 725.333333 725.333333 554.666667 725.333333 554.666667 682.666667 469.333333 682.666667 469.333333 768 512 768 512 810.666667 768 810.666667 768 768 810.666667 768 810.666667 512 768 512M554.666667 256 554.666667 213.333333 256 213.333333 256 256 213.333333 256 213.333333 554.666667 256 554.666667 256 597.333333 384 597.333333 384 512 341.333333 512 341.333333 341.333333 512 341.333333 512 384 597.333333 384 597.333333 256 554.666667 256M512 512 469.333333 512 469.333333 597.333333 554.666667 597.333333 554.666667 554.666667 597.333333 554.666667 597.333333 469.333333 512 469.333333 512 512Z","p-id":"17282"})],-1))),BP=Wi({__name:"Group",setup(e){const t=nn("mixinState"),i=VI();let n=pn((()=>"one"===t.mSelectMode&&"group"===t.mSelectOneType)),r=pn((()=>"multiple"===t.mSelectMode));const o=()=>{i.editor.unGroup()},a=()=>{i.editor.group()};return(e,t)=>{const i=He;return tn(r)||tn(n)?(Ki(),Ji("div",kP,[rn("div",EP,[tn(r)?(Ki(),on(i,{key:0,disabled:!tn(r),onClick:a},{default:an((()=>[SP,kn(" "+ln(e.$t("editor.attrSetting.group")),1)])),_:1},8,["disabled"])):En("",!0),tn(n)?(Ki(),on(i,{key:1,disabled:!tn(n),onClick:o},{default:an((()=>[IP,kn(" "+ln(e.$t("editor.attrSetting.unGroup")),1)])),_:1},8,["disabled"])):En("",!0)])])):En("",!0)}}}),OP=vr(BP,[["__scopeId","data-v-a9cdd218"]]),TP={key:0},DP={class:"attr-item-box"},MP={class:"attr-item-box"},QP={class:"color-list"},LP=["onClick"],jP={class:"attr-item-box"},PP=(e=>(Ar("data-v-ed1fb341"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),FP={class:"f-center"},RP=Wi({__name:"BgBar",setup(e){const t=nn("mixinState"),i=VI(),{getImgStr:n,selectFiles:r}=cb,o=Xi(["#5F2B63","#B23554","#F27E56","#FCE766","#86DCCD","#E7FDCB","#FFDC84","#F57677","#5FC2C7","#98DFE5","#C2EFF3","#DDFDFD","#9EE9D3","#2FC6C8","#2D7A9D","#48466d","#61c0bf","#bbded6","#fae3d9","#ffb6b9","#ffaaa5","#ffd3b6","#dcedc1","#a8e6cf"]),a=Xi("rgba(255, 255, 255, 1)"),s=()=>{l(a.value)};function l(e){e&&(i.canvas?.setBackgroundColor(e,i.canvas.renderAll.bind(i.canvas)),a.value=e)}const c=()=>{const e=i.canvas?.getObjects().find((e=>"workspace"===e.id));a.value=e?.fill??""},u=J((function(){r({accept:"image/*",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{n(e).then((e=>{const t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=function(){const n=i.canvas,{width:r,height:o}=t,a=i.editor.getWorkspaceSize();n&&n.setBackgroundImage(e,n?.renderAll.bind(n),{scaleX:a.width/r,scaleY:a.height/o})}}))}))}))}),250),d=J((function(){jt.confirm("?","Warning",{title:"",type:"warning",confirmButtonText:"",cancelButtonText:""}).then((()=>{i.canvas?.setBackgroundImage(null,i.canvas.renderAll.bind(i.canvas))}))}),250);return qi((()=>{gn((()=>{i.editor?.on("loadJson",c)}))})),Br((()=>{i.editor.off("loadJson",c)})),(e,i)=>{const n=Ut,r=wg,c=He;return tn(t).mSelectMode?En("",!0):(Ki(),Ji("div",TP,[rn("div",DP,[Tn(n,{"content-position":"left"},{default:an((()=>[rn("h4",null,ln(e.$t("editor.bgSeting.color")),1)])),_:1}),Tn(r,{modelValue:tn(a),"onUpdate:modelValue":i[0]||(i[0]=e=>xn(a)?a.value=e:null),onChange:s,"show-alpha":""},null,8,["modelValue"])]),rn("div",MP,[Tn(n,{"content-position":"left"},{default:an((()=>[rn("h4",null,ln(e.$t("editor.bgSeting.colorMacthing")),1)])),_:1}),rn("div",QP,[(Ki(!0),Ji(Cn,null,zn(tn(o),((e,t)=>(Ki(),Ji("span",{key:e+t,style:Sn(`background:${e}`),onClick:t=>l(e)},null,12,LP)))),128))])]),rn("div",jP,[Tn(n,{"content-position":"left"},{default:an((()=>[PP])),_:1}),rn("div",FP,[Tn(c,{onClick:tn(d)},{default:an((()=>[kn("  ")])),_:1},8,["onClick"]),Tn(c,{onClick:tn(u)},{default:an((()=>[kn("  ")])),_:1},8,["onClick"])])])]))}}}),zP=vr(RP,[["__scopeId","data-v-ed1fb341"]]),NP=e=>(Ar("data-v-ef9e57f5"),e=e(),br(),e),VP=NP((()=>rn("h3",null,"",-1))),UP={class:"asa-size-wrap"},HP={class:"asa-size-wrap-item"},GP=NP((()=>rn("span",null,"",-1))),YP={class:"asa-size-wrap-item"},WP=NP((()=>rn("span",null,"",-1))),XP={"label-width":0},$P=NP((()=>rn("h3",null,"",-1))),qP={class:"cell-wrap"},KP=["onClick"],JP={class:"cell-name"},ZP={class:"cell-label"},eF={__name:"ModalSize",props:Or({title:{type:String,default:""}},{show:{default:!1},showModifiers:{}}),emits:Or(["set"],["update:show"]),setup(e,{expose:t,emit:i}){VI();const n=i,r=e,o=Tr(e,"show"),a=Xi(null),s=Xi(null),l=[{id:1,name:"",height:1660,width:1242,unit:"px"},{id:2,name:"",height:383,width:900,unit:"px"},{id:3,name:"",height:500,width:500,unit:"px"},{id:4,name:"",height:1660,width:1242,unit:"px"},{id:5,name:"",height:2208,width:1242,unit:"px"},{id:6,name:"",height:1080,width:1920,unit:"px"},{id:7,name:"",height:800,width:800,unit:"px"},{id:8,name:"",height:1e3,width:750,unit:"px"}],c=async()=>{a.value&&s.value?(n("set",a.value,s.value),o.value=!1):Pt.warning("")};return t({showSetSize:(e,t)=>{a.value=e||null,s.value=t||null,o.value=!0}}),(e,t)=>{const i=Vg,n=He,u=Ut,d=ve,h=Ht;return Ki(),on(h,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),title:r.title,"footer-hide":""},{default:an((()=>[VP,rn("section",UP,[rn("div",HP,[GP,Tn(i,{style:{width:"70%"},modelValue:tn(a),"onUpdate:modelValue":t[0]||(t[0]=e=>xn(a)?a.value=e:null),min:1,placeholder:"","controls-position":"right"},null,8,["modelValue"])]),rn("div",YP,[WP,Tn(i,{style:{width:"70%"},modelValue:tn(s),"onUpdate:modelValue":t[1]||(t[1]=e=>xn(s)?s.value=e:null),min:1,placeholder:"","controls-position":"right"},null,8,["modelValue"])]),rn("div",XP,[Tn(n,{type:"primary",onClick:c},{default:an((()=>[kn("  ")])),_:1})])]),Tn(u,{direction:"horizontal"}),$P,rn("section",qP,[(Ki(),Ji(Cn,null,zn(l,(e=>rn("div",{key:e.name,class:"cell-main",onClick:t=>(e=>{const[t,i]=e.split("x");a.value=Number(t),s.value=Number(i)})(`${e.width}x${e.height}x${e.unit}`)},[rn("div",null,[rn("div",JP,ln(e.name),1),rn("div",ZP,ln(`${e.width}x${e.height}${e.unit}`),1)]),Tn(d,null,{default:an((()=>[Tn(tn(ut))])),_:1})],8,KP))),64))])])),_:1},8,["modelValue","title"])}}},tF=vr(eF,[["__scopeId","data-v-ef9e57f5"]]),iF={key:0,class:"attr-item-box"},nF=Wi({__name:"SetSize",setup(e){const t=nn("mixinState"),i=VI(),n=900,r=1200,o=Xi(null);let a=Xi(n),s=Xi(r);qi((()=>{i.editor?.setSize(a.value,s.value),i.editor?.on("sizeChange",((e,t)=>{a.value=e,s.value=t}))}));const l=()=>{o.value?.showSetSize(a.value,s.value)},c=(e,t)=>{a.value=e,s.value=t,i.editor?.setSize(a.value,s.value)};return(e,i)=>{const n=Ut,r=Ue,u=hi,d=ve,h=He,p=pi;return tn(t).mSelectMode?En("",!0):(Ki(),Ji("div",iF,[Tn(n,{"content-position":"left"},{default:an((()=>[rn("h4",null,ln(e.$t("editor.bgSeting.size")),1)])),_:1}),Tn(p,{"label-width":40,inline:"",class:"flex"},{default:an((()=>[Tn(u,{label:e.$t("editor.bgSeting.width"),prop:"name"},{default:an((()=>[Tn(r,{style:{width:"60px"},disabled:"",modelValue:tn(a),"onUpdate:modelValue":i[0]||(i[0]=e=>xn(a)?a.value=e:a=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),Tn(u,{label:e.$t("editor.bgSeting.height"),prop:"name"},{default:an((()=>[Tn(r,{style:{width:"60px"},disabled:"",modelValue:tn(s),"onUpdate:modelValue":i[1]||(i[1]=e=>xn(s)?s.value=e:s=e),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),Tn(u,{"label-width":0},{default:an((()=>[Tn(h,{link:"",onClick:l},{default:an((()=>[Tn(d,{size:"18"},{default:an((()=>[Tn(tn(Ai))])),_:1})])),_:1})])),_:1})])),_:1}),Tn(tF,{title:e.$t("editor.setSizeTip"),ref_key:"modalSizeRef",ref:o,onSet:c},null,8,["title"])]))}}}),rF=vr(nF,[["__scopeId","data-v-1a45ad1a"]]),oF={class:"right-bar flex-basis-304px box-border overflow-hidden p-10px"},aF={class:"attr-item-box"},sF=(e=>(Ar("data-v-5de1a6d9"),e=e(),br(),e))((()=>rn("h4",null,"",-1))),lF={class:"bg-item"},cF=Wi({__name:"index",setup(e){const t=VI(),i=pn((()=>t.editor)),n=nn("mixinState");return(e,t)=>{const r=rF,o=zP,a=OP,s=_P,l=bP,c=Ut,u=dP,d=cP,h=lP,p=sP,f=oP,g=rP,v=eP,m=$j,A=Vj,b=aj,y=AL,x=oL,w=HQ,_=GM,C=vM,k=cM,E=eM,S=XD,I=ND,B=TD,O=pD,T=He;return Ki(),Ji("section",oF,[yn(rn("div",null,[Tn(r),Tn(o)],512),[[jn,!tn(n).mSelectMode]]),yn(rn("div",null,[Tn(a),Tn(s),Tn(l)],512),[[jn,"multiple"===tn(n).mSelectMode]]),yn(rn("div",aF,[Tn(a),Tn(c,{"content-position":"left"},{default:an((()=>[sF])),_:1}),yn(rn("div",lF,[Tn(u),Tn(d),Tn(h),Tn(p),Tn(f)],512),[[jn,tn(n).mSelectMode]]),Tn(l),Tn(g),Tn(v),Tn(m),Tn(A),Tn(b),Tn(y),Tn(x),Tn(w),Tn(_),Tn(C),Tn(k),Tn(E),Tn(S),Tn(I),Tn(B),Tn(O),Tn(T,{onClick:t[0]||(t[0]=e=>tn(i).getFontJson()),size:"small"},{default:an((()=>[kn("")])),_:1})],512),[[jn,"one"===tn(n).mSelectMode]])])}}}),uF=vr(cF,[["__scopeId","data-v-5de1a6d9"]]),dF=Wi({__name:"index",setup:e=>(e,t)=>(Ki(),Ji(Cn,null,[Tn(VT),Tn(uD),Tn(uF)],64))}),hF={class:"editor-wrap"},pF=Wi({name:"Home",__name:"index",setup(e){const t=VI(),i=xr,n=new Rb;qi((()=>{const e=new Tm.fabric.Canvas("canvas",{fireRightClick:!0,stopContextMenu:!0,controlsAboveOverlay:!0,preserveObjectStacking:!0});n.init(e),n.use(zb).use(yy).use(Nb).use(Hb).use(Gb).use(Yb).use(Wb).use(Xb).use($b).use(qb).use(Zb).use(ey).use(ty).use(iy).use(ny).use(ry).use(dy).use(xy).use(wy).use(_y).use(P_).use(xI).use(II).use(gy,{repoSrc:i}).use(hy,{repoSrc:i}).use(D_).use(BI).use(OI).use(DI).use(MI),t.setEditor(n),t.setCanvas(e),t.rulerEnable&&n.rulerEnable(),ur()})),Br((()=>n.destory()));const{mixinState:r}=function(e){const t=On({mSelectMode:LI.EMPTY,mSelectOneType:"",mSelectId:"",mSelectIds:[],mSelectActive:[]}),i=e=>{t.mSelectMode=LI.ONE,t.mSelectActive=e,e[0]&&m(e[0],"clip")?r():e[0]&&(t.mSelectId=e[0].id,t.mSelectOneType=e[0].type,t.mSelectIds=e.map((e=>e.id)))},n=e=>{t.mSelectMode=LI.MULTI,t.mSelectId="",t.mSelectIds=e.map((e=>e.id))},r=()=>{t.mSelectId="",t.mSelectIds=[],t.mSelectMode=LI.EMPTY,t.mSelectOneType=""};return qi((()=>{e.on(QI.ONE,i),e.on(QI.MULTI,n),e.on(QI.CANCEL,r)})),ar((()=>{e.off(QI.ONE,i),e.off(QI.MULTI,n),e.off(QI.CANCEL,r)})),{mixinState:t}}(n);return $i("mixinState",r),(e,t)=>{const i=bi,n=yi,r=xi;return Ki(),Ji("div",hF,[Tn(r,null,{default:an((()=>[Tn(i,null,{default:an((()=>[Tn(CB)])),_:1}),Tn(n,null,{default:an((()=>[Tn(dF)])),_:1})])),_:1})])}}});e("default",vr(pF,[["__scopeId","data-v-82e2d967"]]))}}}));
