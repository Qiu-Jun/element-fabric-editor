var Yk=Object.defineProperty;var Wk=($n,Sn,Fr)=>Sn in $n?Yk($n,Sn,{enumerable:!0,configurable:!0,writable:!0,value:Fr}):$n[Sn]=Fr;var vt=($n,Sn,Fr)=>Wk($n,typeof Sn!="symbol"?Sn+"":Sn,Fr);import{t as li,W as u3,i as An,b as ha,c as wn,s as Xk,a as Un,d as h3,e as Mn,o as $k,f as Qn,g as d3,h as bo,k as qe,j as Hn,l as xn,m as Xi,n as f3,p as $i,q as da,r as an,U as p3,u as g3,v as wr,w as Co,S as fa,x as pa,y as v3,z as ga,A as qk,B as Kk,C as Jk,D as Ds,E as Zk,F as ci,G as xr,H as tB,I as A3,J as wo,K as m3,L as y3,M as b3,N as eB,O as C3,P as nB,Q as iB,R as sh,T as rB,V as oB,X as aB,Y as be,Z as Ln,_ as Ms,$ as sB,a0 as lB,a1 as cB,a2 as Ei,a3 as uB,a4 as w3,a5 as _r,a6 as hB,a7 as ui,a8 as ke,a9 as qi,aa as Ki,ab as $t,ac as re,ad as Ce,ae as ne,af as sn,ag as Ji,ah as x3,ai as Si,aj as Zi,ak as Kt,al as we,am as hi,an as tr,ao as va,ap as Ii,aq as Gn,ar as xo,as as ki,at as Er,au as Yn,av as _n,aw as lh,ax as dB,ay as Qs,az as er,aA as fB,aB as _3,aC as Ls,aD as di,aE as E3,aF as Be,aG as oe,aH as Sr,aI as We,aJ as Ue,aK as S3,aL as pB,aM as gB,aN as vB,aO as AB,aP as mB,aQ as yB,aR as bB,aS as nr,aT as CB,aU as wB,aV as xB,aW as _B,aX as fi,aY as EB,aZ as I3,a_ as _o,a$ as ch,b0 as k3,b1 as Ir,b2 as SB,b3 as IB,b4 as kB,b5 as B3,b6 as BB,b7 as OB,b8 as uh,b9 as TB,ba as Ps,bb as DB,bc as O3,bd as hh,be as MB,bf as QB,bg as T3,bh as dh,bi as LB,bj as PB,bk as jB,bl as fh,bm as ph,bn as ir,bo as Bi,bp as mn,bq as rr,br as kr,bs as Br,bt as Or,bu as or,bv as Ee,bw as gh,bx as FB,by as RB,bz as NB,bA as D3,bB as M3,bC as vh,bD as Ah,bE as zB,bF as VB,bG as Q3,bH as L3,bI as mh,bJ as P3,bK as j3,bL as UB,bM as F3,bN as HB,bO as GB,bP as R3,bQ as YB,bR as WB,bS as js,bT as Fs,bU as XB,bV as $B,bW as qB,bX as KB,bY as JB,bZ as ZB,b_ as t9,b$ as e9,__tla as n9}from"./usePageList.gLppXrWU.js";import{i as Oi,b as Wn,a as En,r as Tr,c as Ke,d as ie,e as Eo,f as Ti,h as N3,j as Di,t as Dr,k as Mr,l as fe,M as i9,S as So,m as z3,n as Oe,o as Qr,p as Rs,q as r9,s as o9,u as yh,v as a9,w as s9,x as V3,y as wt,z as ct,A as ln,B as Lt,C as tt,D as ot,E as Rt,F as dt,G as I,H as Ft,I as G,J as xt,K as nt,L as Xe,N as Et,O as ue,Q as Aa,R as pi,T as $e,U as ut,V as Dt,W as Qt,X as Je,Y as Mi,Z as Lr,_ as U3,$ as ee,a0 as he,a1 as Jt,a2 as Ns,a3 as Mt,a4 as kt,a5 as bt,a6 as qt,a7 as Qi,a8 as H3,a9 as Zt,aa as H,ab as bh,ac as ar,ad as l9,ae as cn,af as Me,ag as Io,ah as ma,ai as G3,aj as Ht,ak as Y3,al as c9,am as u9,an as h9,ao as W3,ap as Qe,aq as Ch,ar as un,as as d9,at as X3,au as f9,av as Li,aw as $3,ax as Pr,ay as p9,az as g9,aA as v9,aB as A9,aC as Xn,aD as m9,aE as y9,aF as b9,aG as wh,aH as jr,aI as xh,aJ as C9,aK as _h,aL as q3,aM as K3,aN as Nt,aO as J3,aP as je,aQ as Fe,aR as Z3,aS as Eh,aT as w9,aU as x9,aV as _9,aW as E9,aX as Sh,aY as tm,aZ as S9,a_ as em,__tla as I9}from"./index.lfLdklIi.js";let nm,k9=Promise.all([(()=>{try{return n9}catch($n){}})(),(()=>{try{return I9}catch($n){}})()]).then(async()=>{function $n(t){return typeof t=="number"?t:Oi(t)?NaN:+t}function Sn(t,e){return function(n,i){var o;if(n===void 0&&i===void 0)return e;if(n!==void 0&&(o=n),i!==void 0){if(o===void 0)return i;typeof n=="string"||typeof i=="string"?(n=Wn(n),i=Wn(i)):(n=$n(n),i=$n(i)),o=t(n,i)}return o}}var Fr=Sn(function(t,e){return t+e},0),im=1/0;function gi(t){return t?(t=li(t))===im||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:t===0?t:0}function Gt(t){var e=gi(t),n=e%1;return e==e?n?e-n:e:0}var ya=u3&&new u3,Ih=ya?function(t,e){return ya.set(t,e),t}:An;function ko(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ha(t.prototype),i=t.apply(n,e);return En(i)?i:n}}var rm=Math.max;function kh(t,e,n,i){for(var o=-1,l=t.length,f=n.length,A=-1,m=e.length,w=rm(l-f,0),x=Array(m+w),E=!i;++A<m;)x[A]=e[A];for(;++o<f;)(E||o<l)&&(x[n[o]]=t[o]);for(;w--;)x[A++]=t[o++];return x}var om=Math.max;function Bh(t,e,n,i){for(var o=-1,l=t.length,f=-1,A=n.length,m=-1,w=e.length,x=om(l-A,0),E=Array(x+w),T=!i;++o<x;)E[o]=t[o];for(var O=o;++m<w;)E[O+m]=e[m];for(;++f<A;)(T||o<l)&&(E[O+n[f]]=t[o++]);return E}function ba(){}function te(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Bo(){}te.prototype=ha(ba.prototype),te.prototype.constructor=te;var zs=ya?function(t){return ya.get(t)}:Bo,Rr={},am=Object.prototype.hasOwnProperty;function Ca(t){for(var e=t.name+"",n=Rr[e],i=am.call(Rr,e)?n.length:0;i--;){var o=n[i],l=o.func;if(l==null||l==t)return o.name}return e}function In(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}function Oh(t){if(t instanceof te)return t.clone();var e=new In(t.__wrapped__,t.__chain__);return e.__actions__=wn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}In.prototype=ha(ba.prototype),In.prototype.constructor=In;var sm=Object.prototype.hasOwnProperty;function K(t){if(Ke(t)&&!ie(t)&&!(t instanceof te)){if(t instanceof In)return t;if(sm.call(t,"__wrapped__"))return Oh(t)}return new In(t)}function Vs(t){var e=Ca(t),n=K[e];if(typeof n!="function"||!(e in te.prototype))return!1;if(t===n)return!0;var i=zs(n);return!!i&&t===i[0]}K.prototype=ba.prototype,K.prototype.constructor=K;var Th=Xk(Ih),lm=/\{\n\/\* \[wrapped with (.+)\] \*/,cm=/,? & /,um=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function wa(t,e,n,i){for(var o=t.length,l=n+(i?1:-1);i?l--:++l<o;)if(e(t[l],l,t))return l;return-1}function Dh(t){return t!=t}function Nr(t,e,n){return e==e?function(i,o,l){for(var f=l-1,A=i.length;++f<A;)if(i[f]===o)return f;return-1}(t,e,n):wa(t,Dh,n)}function xa(t,e){return!!(t!=null&&t.length)&&Nr(t,e,0)>-1}var hm=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Mh(t,e,n){var i=e+"";return h3(t,function(o,l){var f=l.length;if(!f)return o;var A=f-1;return l[A]=(f>1?"& ":"")+l[A],l=l.join(f>2?", ":" "),o.replace(um,"{\n/* [wrapped with "+l+"] */\n")}(i,function(o,l){return Un(hm,function(f){var A="_."+f[0];l&f[1]&&!xa(o,A)&&o.push(A)}),o.sort()}(function(o){var l=o.match(lm);return l?l[1].split(cm):[]}(i),n)))}function Qh(t,e,n,i,o,l,f,A,m,w){var x=8&e;e|=x?32:64,4&(e&=~(x?64:32))||(e&=-4);var E=[t,e,o,x?l:void 0,x?f:void 0,x?void 0:l,x?void 0:f,A,m,w],T=n.apply(void 0,E);return Vs(t)&&Th(T,E),T.placeholder=i,Mh(T,t,e)}function zr(t){return t.placeholder}var dm=Math.min,Lh="__lodash_placeholder__";function Pi(t,e){for(var n=-1,i=t.length,o=0,l=[];++n<i;){var f=t[n];f!==e&&f!==Lh||(t[n]=Lh,l[o++]=n)}return l}function _a(t,e,n,i,o,l,f,A,m,w){var x=128&e,E=1&e,T=2&e,O=24&e,k=512&e,S=T?void 0:ko(t);return function Q(){for(var R=arguments.length,V=Array(R),b=R;b--;)V[b]=arguments[b];if(O)var Y=zr(Q),rt=function(u,d){for(var r=u.length,a=0;r--;)u[r]===d&&++a;return a}(V,Y);if(i&&(V=kh(V,i,o,O)),l&&(V=Bh(V,l,f,O)),R-=rt,O&&R<w){var q=Pi(V,Y);return Qh(t,e,_a,Q.placeholder,n,V,q,A,m,w-R)}var h=E?n:this,s=T?h[t]:t;return R=V.length,A?V=function(u,d){for(var r=u.length,a=dm(d.length,r),c=wn(u);a--;){var p=d[a];u[a]=Eo(p,r)?c[p]:void 0}return u}(V,A):k&&R>1&&V.reverse(),x&&m<R&&(V.length=m),this&&this!==Tr&&this instanceof Q&&(s=S||ko(s)),s.apply(h,V)}}var Ph="__lodash_placeholder__",Us=128,fm=Math.min,jh=Math.max;function vi(t,e,n,i,o,l,f,A){var m=2&e;if(!m&&typeof t!="function")throw new TypeError("Expected a function");var w=i?i.length:0;if(w||(e&=-97,i=o=void 0),f=f===void 0?f:jh(Gt(f),0),A=A===void 0?A:Gt(A),w-=o?o.length:0,64&e){var x=i,E=o;i=o=void 0}var T=m?void 0:zs(t),O=[t,e,n,i,o,x,E,l,f,A];if(T&&function(S,Q){var R=S[1],V=Q[1],b=R|V,Y=b<131,rt=V==Us&&R==8||V==Us&&R==256&&S[7].length<=Q[8]||V==384&&Q[7].length<=Q[8]&&R==8;if(!Y&&!rt)return S;1&V&&(S[2]=Q[2],b|=1&R?0:4);var q=Q[3];if(q){var h=S[3];S[3]=h?kh(h,q,Q[4]):q,S[4]=h?Pi(S[3],Ph):Q[4]}(q=Q[5])&&(h=S[5],S[5]=h?Bh(h,q,Q[6]):q,S[6]=h?Pi(S[5],Ph):Q[6]),(q=Q[7])&&(S[7]=q),V&Us&&(S[8]=S[8]==null?Q[8]:fm(S[8],Q[8])),S[9]==null&&(S[9]=Q[9]),S[0]=Q[0],S[1]=b}(O,T),t=O[0],e=O[1],n=O[2],i=O[3],o=O[4],!(A=O[9]=O[9]===void 0?m?0:t.length:jh(O[9]-w,0))&&24&e&&(e&=-25),e&&e!=1)k=e==8||e==16?function(S,Q,R){var V=ko(S);return function b(){for(var Y=arguments.length,rt=Array(Y),q=Y,h=zr(b);q--;)rt[q]=arguments[q];var s=Y<3&&rt[0]!==h&&rt[Y-1]!==h?[]:Pi(rt,h);return(Y-=s.length)<R?Qh(S,Q,_a,b.placeholder,void 0,rt,s,void 0,void 0,R-Y):Mn(this&&this!==Tr&&this instanceof b?V:S,this,rt)}}(t,e,A):e!=32&&e!=33||o.length?_a.apply(void 0,O):function(S,Q,R,V){var b=1&Q,Y=ko(S);return function rt(){for(var q=-1,h=arguments.length,s=-1,u=V.length,d=Array(u+h),r=this&&this!==Tr&&this instanceof rt?Y:S;++s<u;)d[s]=V[s];for(;h--;)d[s++]=arguments[++q];return Mn(r,b?R:this,d)}}(t,e,n,i);else var k=function(S,Q,R){var V=1&Q,b=ko(S);return function Y(){return(this&&this!==Tr&&this instanceof Y?b:S).apply(V?R:this,arguments)}}(t,e,n);return Mh((T?Ih:Th)(k,O),t,e)}function Fh(t,e,n){return e=n?void 0:e,vi(t,128,void 0,void 0,void 0,void 0,e=t&&e==null?t.length:e)}function Yt(t,e){return h3($k(t,e,An),t+"")}function Ze(t,e,n){if(!En(n))return!1;var i=typeof e;return!!(i=="number"?Qn(n)&&Eo(e,n.length):i=="string"&&e in n)&&Ti(n[e],t)}function Vr(t){return Yt(function(e,n){var i=-1,o=n.length,l=o>1?n[o-1]:void 0,f=o>2?n[2]:void 0;for(l=t.length>3&&typeof l=="function"?(o--,l):void 0,f&&Ze(n[0],n[1],f)&&(l=o<3?void 0:l,o=1),e=Object(e);++i<o;){var A=n[i];A&&t(e,A,i,l)}return e})}var pm=Object.prototype.hasOwnProperty,gm=Vr(function(t,e){if(d3(e)||Qn(e))bo(e,qe(e),t);else for(var n in e)pm.call(e,n)&&N3(t,n,e[n])}),Rh=Vr(function(t,e){bo(e,Hn(e),t)}),Ea=Vr(function(t,e,n,i){bo(e,Hn(e),t,i)}),vm=Vr(function(t,e,n,i){bo(e,qe(e),t,i)});function Hs(t,e){for(var n=-1,i=e.length,o=Array(i),l=t==null;++n<i;)o[n]=l?void 0:xn(t,e[n]);return o}var Am=Xi(Hs),mm=Function.prototype,ym=Object.prototype,Nh=mm.toString,bm=ym.hasOwnProperty,Cm=Nh.call(Object);function Oo(t){if(!Ke(t)||Di(t)!="[object Object]")return!1;var e=f3(t);if(e===null)return!0;var n=bm.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Nh.call(n)==Cm}function Gs(t){if(!Ke(t))return!1;var e=Di(t);return e=="[object Error]"||e=="[object DOMException]"||typeof t.message=="string"&&typeof t.name=="string"&&!Oo(t)}var zh=Yt(function(t,e){try{return Mn(t,void 0,e)}catch(n){return Gs(n)?n:new Error(n)}});function Vh(t,e){var n;if(typeof e!="function")throw new TypeError("Expected a function");return t=Gt(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var Sa=Yt(function(t,e,n){var i=1;if(n.length){var o=Pi(n,zr(Sa));i|=32}return vi(t,i,e,n,o)});Sa.placeholder={};var wm=Xi(function(t,e){return Un(e,function(n){n=Dr(n),Mr(t,n,Sa(t[n],t))}),t}),Ys=Yt(function(t,e,n){var i=3;if(n.length){var o=Pi(n,zr(Ys));i|=32}return vi(e,i,t,n,o)});function kn(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var l=Array(o);++i<o;)l[i]=t[i+e];return l}function ji(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:kn(t,e,n)}Ys.placeholder={};var xm=RegExp("[\\u200d\uD800-\uDFFF\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ur(t){return xm.test(t)}var Uh="\uD800-\uDFFF",_m="["+Uh+"]",Ws="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xs="\uD83C[\uDFFB-\uDFFF]",Hh="[^"+Uh+"]",Gh="(?:\uD83C[\uDDE6-\uDDFF]){2}",Yh="[\uD800-\uDBFF][\uDC00-\uDFFF]",Wh="(?:"+Ws+"|"+Xs+")?",Xh="[\\ufe0e\\ufe0f]?",Em=Xh+Wh+("(?:\\u200d(?:"+[Hh,Gh,Yh].join("|")+")"+Xh+Wh+")*"),Sm="(?:"+[Hh+Ws+"?",Ws,Gh,Yh,_m].join("|")+")",Im=RegExp(Xs+"(?="+Xs+")|"+Sm+Em,"g");function Pn(t){return Ur(t)?function(e){return e.match(Im)||[]}(t):function(e){return e.split("")}(t)}function $h(t){return function(e){var n=Ur(e=fe(e))?Pn(e):void 0,i=n?n[0]:e.charAt(0),o=n?ji(n,1).join(""):e.slice(1);return i[t]()+o}}var $s=$h("toUpperCase");function qh(t){return $s(fe(t).toLowerCase())}function qs(t,e,n,i){var o=-1,l=t==null?0:t.length;for(i&&l&&(n=t[++o]);++o<l;)n=e(n,t[o],o,t);return n}function Ks(t){return function(e){return t==null?void 0:t[e]}}var km=Ks({\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"}),Bm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Om=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function Kh(t){return(t=fe(t))&&t.replace(Bm,km).replace(Om,"")}var Tm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jh="\uD800-\uDFFF",Zh="\\u2700-\\u27bf",td="a-z\\xdf-\\xf6\\xf8-\\xff",ed="A-Z\\xc0-\\xd6\\xd8-\\xde",nd="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",id="["+nd+"]",rd="\\d+",Mm="["+Zh+"]",od="["+td+"]",ad="[^"+Jh+nd+rd+Zh+td+ed+"]",sd="(?:\uD83C[\uDDE6-\uDDFF]){2}",ld="[\uD800-\uDBFF][\uDC00-\uDFFF]",Hr="["+ed+"]",cd="(?:"+od+"|"+ad+")",Qm="(?:"+Hr+"|"+ad+")",ud="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",hd="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",dd="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\uD83C[\uDFFB-\uDFFF])?",fd="[\\ufe0e\\ufe0f]?",Lm=fd+dd+("(?:\\u200d(?:"+["[^"+Jh+"]",sd,ld].join("|")+")"+fd+dd+")*"),Pm="(?:"+[Mm,sd,ld].join("|")+")"+Lm,jm=RegExp([Hr+"?"+od+"+"+ud+"(?="+[id,Hr,"$"].join("|")+")",Qm+"+"+hd+"(?="+[id,Hr+cd,"$"].join("|")+")",Hr+"?"+cd+"+"+ud,Hr+"+"+hd,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rd,Pm].join("|"),"g");function pd(t,e,n){return t=fe(t),(e=n?void 0:e)===void 0?function(i){return Dm.test(i)}(t)?function(i){return i.match(jm)||[]}(t):function(i){return i.match(Tm)||[]}(t):t.match(e)||[]}var Fm=RegExp("['\u2019]","g");function Gr(t){return function(e){return qs(pd(Kh(e).replace(Fm,"")),t,"")}}var Rm=Gr(function(t,e,n){return e=e.toLowerCase(),t+(n?qh(e):e)}),Nm=Tr.isFinite,zm=Math.min;function Js(t){var e=Math[t];return function(n,i){if(n=li(n),(i=i==null?0:zm(Gt(i),292))&&Nm(n)){var o=(fe(n)+"e").split("e"),l=e(o[0]+"e"+(+o[1]+i));return+((o=(fe(l)+"e").split("e"))[0]+"e"+(+o[1]-i))}return e(n)}}var Vm=Js("ceil");function gd(t){var e=K(t);return e.__chain__=!0,e}var Um=Math.ceil,Hm=Math.max;function sr(t,e,n){return t==t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function lr(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new i9;++e<n;)this.add(t[e])}function Zs(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function To(t,e){return t.has(e)}lr.prototype.add=lr.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},lr.prototype.has=function(t){return this.__data__.has(t)};function vd(t,e,n,i,o,l){var f=1&n,A=t.length,m=e.length;if(A!=m&&!(f&&m>A))return!1;var w=l.get(t),x=l.get(e);if(w&&x)return w==e&&x==t;var E=-1,T=!0,O=2&n?new lr:void 0;for(l.set(t,e),l.set(e,t);++E<A;){var k=t[E],S=e[E];if(i)var Q=f?i(S,k,E,e,t,l):i(k,S,E,t,e,l);if(Q!==void 0){if(Q)continue;T=!1;break}if(O){if(!Zs(e,function(R,V){if(!To(O,V)&&(k===R||o(k,R,n,i,l)))return O.push(V)})){T=!1;break}}else if(k!==S&&!o(k,S,n,i,l)){T=!1;break}}return l.delete(t),l.delete(e),T}function tl(t){var e=-1,n=Array(t.size);return t.forEach(function(i,o){n[++e]=[o,i]}),n}function Ia(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var Ad=So?So.prototype:void 0,el=Ad?Ad.valueOf:void 0,Gm=Object.prototype.hasOwnProperty,md="[object Arguments]",yd="[object Array]",ka="[object Object]",bd=Object.prototype.hasOwnProperty;function Ym(t,e,n,i,o,l){var f=ie(t),A=ie(e),m=f?yd:wr(t),w=A?yd:wr(e),x=(m=m==md?ka:m)==ka,E=(w=w==md?ka:w)==ka,T=m==w;if(T&&Co(t)){if(!Co(e))return!1;f=!0,x=!1}if(T&&!x)return l||(l=new fa),f||pa(t)?vd(t,e,n,i,o,l):function(R,V,b,Y,rt,q,h){switch(b){case"[object DataView]":if(R.byteLength!=V.byteLength||R.byteOffset!=V.byteOffset)return!1;R=R.buffer,V=V.buffer;case"[object ArrayBuffer]":return!(R.byteLength!=V.byteLength||!q(new p3(R),new p3(V)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ti(+R,+V);case"[object Error]":return R.name==V.name&&R.message==V.message;case"[object RegExp]":case"[object String]":return R==V+"";case"[object Map]":var s=tl;case"[object Set]":var u=1&Y;if(s||(s=Ia),R.size!=V.size&&!u)return!1;var d=h.get(R);if(d)return d==V;Y|=2,h.set(R,V);var r=vd(s(R),s(V),Y,rt,q,h);return h.delete(R),r;case"[object Symbol]":if(el)return el.call(R)==el.call(V)}return!1}(t,e,m,n,i,o,l);if(!(1&n)){var O=x&&bd.call(t,"__wrapped__"),k=E&&bd.call(e,"__wrapped__");if(O||k){var S=O?t.value():t,Q=k?e.value():e;return l||(l=new fa),o(S,Q,n,i,l)}}return!!T&&(l||(l=new fa),function(R,V,b,Y,rt,q){var h=1&b,s=g3(R),u=s.length;if(u!=g3(V).length&&!h)return!1;for(var d=u;d--;){var r=s[d];if(!(h?r in V:Gm.call(V,r)))return!1}var a=q.get(R),c=q.get(V);if(a&&c)return a==V&&c==R;var p=!0;q.set(R,V),q.set(V,R);for(var g=h;++d<u;){var v=R[r=s[d]],y=V[r];if(Y)var _=h?Y(y,v,r,V,R,q):Y(v,y,r,R,V,q);if(!(_===void 0?v===y||rt(v,y,b,Y,q):_)){p=!1;break}g||(g=r=="constructor")}if(p&&!g){var B=R.constructor,N=V.constructor;B==N||!("constructor"in R)||!("constructor"in V)||typeof B=="function"&&B instanceof B&&typeof N=="function"&&N instanceof N||(p=!1)}return q.delete(R),q.delete(V),p}(t,e,n,i,o,l))}function Do(t,e,n,i,o){return t===e||(t==null||e==null||!Ke(t)&&!Ke(e)?t!=t&&e!=e:Ym(t,e,n,i,Do,o))}function nl(t,e,n,i){var o=n.length,l=o,f=!i;if(t==null)return!l;for(t=Object(t);o--;){var A=n[o];if(f&&A[2]?A[1]!==t[A[0]]:!(A[0]in t))return!1}for(;++o<l;){var m=(A=n[o])[0],w=t[m],x=A[1];if(f&&A[2]){if(w===void 0&&!(m in t))return!1}else{var E=new fa;if(i)var T=i(w,x,m,t,e,E);if(!(T===void 0?Do(x,w,3,i,E):T))return!1}}return!0}function Cd(t){return t==t&&!En(t)}function il(t){for(var e=qe(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Cd(o)]}return e}function wd(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}}function xd(t){var e=il(t);return e.length==1&&e[0][2]?wd(e[0][0],e[0][1]):function(n){return n===t||nl(n,t,e)}}function _d(t,e){return z3(t)&&Cd(e)?wd(Dr(t),e):function(n){var i=xn(n,t);return i===void 0&&i===e?v3(n,t):Do(e,i,3)}}function rl(t){return function(e){return e==null?void 0:e[t]}}function Ed(t){return z3(t)?rl(Dr(t)):function(e){return function(n){return ga(n,e)}}(t)}function Vt(t){return typeof t=="function"?t:t==null?An:typeof t=="object"?ie(t)?_d(t[0],t[1]):xd(t):Ed(t)}function Sd(t,e,n){var i=n.length;if(t==null)return!i;for(t=Object(t);i--;){var o=n[i],l=e[o],f=t[o];if(f===void 0&&!(o in t)||!l(f))return!1}return!0}function Wm(t,e,n,i){for(var o=-1,l=t==null?0:t.length;++o<l;){var f=t[o];e(i,f,n(f),t)}return i}function Id(t){return function(e,n,i){for(var o=-1,l=Object(e),f=i(e),A=f.length;A--;){var m=f[t?A:++o];if(n(l[m],m,l)===!1)break}return e}}var ol=Id();function qn(t,e){return t&&ol(t,e,qe)}function kd(t,e){return function(n,i){if(n==null)return n;if(!Qn(n))return t(n,i);for(var o=n.length,l=e?o:-1,f=Object(n);(e?l--:++l<o)&&i(f[l],l,f)!==!1;);return n}}var Fi=kd(qn);function Xm(t,e,n,i){return Fi(t,function(o,l,f){e(i,o,n(o),f)}),i}function Ba(t,e){return function(n,i){var o=ie(n)?Wm:Xm,l=e?e():{};return o(n,t,Vt(i),l)}}var $m=Object.prototype.hasOwnProperty,qm=Ba(function(t,e,n){$m.call(t,n)?++t[n]:Mr(t,n,1)});function al(t,e,n){var i=vi(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return i.placeholder=al.placeholder,i}al.placeholder={};function sl(t,e,n){var i=vi(t,16,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return i.placeholder=sl.placeholder,i}sl.placeholder={};var Bd=Object.prototype,Km=Bd.hasOwnProperty,Jm=Yt(function(t,e){t=Object(t);var n=-1,i=e.length,o=i>2?e[2]:void 0;for(o&&Ze(e[0],e[1],o)&&(i=1);++n<i;)for(var l=e[n],f=Hn(l),A=-1,m=f.length;++A<m;){var w=f[A],x=t[w];(x===void 0||Ti(x,Bd[w])&&!Km.call(t,w))&&(t[w]=l[w])}return t});function ll(t,e,n){(n!==void 0&&!Ti(t[e],n)||n===void 0&&!(e in t))&&Mr(t,e,n)}function Le(t){return Ke(t)&&Qn(t)}function cl(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]}function Od(t){return bo(t,Hn(t))}function Oa(t,e,n,i,o){t!==e&&ol(e,function(l,f){if(o||(o=new fa),En(l))(function(m,w,x,E,T,O,k){var S=cl(m,x),Q=cl(w,x),R=k.get(Q);if(R)ll(m,x,R);else{var V=O?O(S,Q,x+"",m,w,k):void 0,b=V===void 0;if(b){var Y=ie(Q),rt=!Y&&Co(Q),q=!Y&&!rt&&pa(Q);V=Q,Y||rt||q?ie(S)?V=S:Le(S)?V=wn(S):rt?(b=!1,V=Kk(Q,!0)):q?(b=!1,V=Jk(Q,!0)):V=[]:Oo(Q)||Ds(Q)?(V=S,Ds(S)?V=Od(S):En(S)&&!Qr(S)||(V=Zk(Q))):b=!1}b&&(k.set(Q,V),T(V,Q,E,O,k),k.delete(Q)),ll(m,x,V)}})(t,e,f,n,Oa,i,o);else{var A=i?i(cl(t,f),l,f+"",t,e,o):void 0;A===void 0&&(A=l),ll(t,f,A)}},Hn)}function Td(t,e,n,i,o,l){return En(t)&&En(e)&&(l.set(e,t),Oa(t,e,void 0,Td,l),l.delete(e)),t}var Dd=Vr(function(t,e,n,i){Oa(t,e,n,i)}),Zm=Yt(function(t){return t.push(void 0,Td),Mn(Dd,void 0,t)});function Md(t,e,n){if(typeof t!="function")throw new TypeError("Expected a function");return setTimeout(function(){t.apply(void 0,n)},e)}var t2=Yt(function(t,e){return Md(t,1,e)}),e2=Yt(function(t,e,n){return Md(t,li(e)||0,n)});function ul(t,e,n){for(var i=-1,o=t==null?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}function Mo(t,e,n,i){var o=-1,l=xa,f=!0,A=t.length,m=[],w=e.length;if(!A)return m;n&&(e=Oe(e,ci(n))),i?(l=ul,f=!1):e.length>=200&&(l=To,f=!1,e=new lr(e));t:for(;++o<A;){var x=t[o],E=n==null?x:n(x);if(x=i||x!==0?x:0,f&&E==E){for(var T=w;T--;)if(e[T]===E)continue t;m.push(x)}else l(e,E,i)||m.push(x)}return m}var n2=Yt(function(t,e){return Le(t)?Mo(t,an(e,1,Le,!0)):[]});function yn(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var i2=Yt(function(t,e){var n=yn(e);return Le(n)&&(n=void 0),Le(t)?Mo(t,an(e,1,Le,!0),Vt(n)):[]}),r2=Yt(function(t,e){var n=yn(e);return Le(n)&&(n=void 0),Le(t)?Mo(t,an(e,1,Le,!0),void 0,n):[]}),o2=Sn(function(t,e){return t/e},1);function Ta(t,e,n,i){for(var o=t.length,l=i?o:-1;(i?l--:++l<o)&&e(t[l],l,t););return n?kn(t,i?0:l,i?l+1:o):kn(t,i?l+1:0,i?o:l)}function Kn(t){return typeof t=="function"?t:An}function Qd(t,e){return(ie(t)?Un:Fi)(t,Kn(e))}function a2(t,e){for(var n=t==null?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}var Ld=Id(!0);function hl(t,e){return t&&Ld(t,e,qe)}var Pd=kd(hl,!0);function jd(t,e){return(ie(t)?a2:Pd)(t,Kn(e))}function Fd(t){return function(e){var n=wr(e);return n=="[object Map]"?tl(e):n=="[object Set]"?function(i){var o=-1,l=Array(i.size);return i.forEach(function(f){l[++o]=[f,f]}),l}(e):function(i,o){return Oe(o,function(l){return[l,i[l]]})}(e,t(e))}}var Rd=Fd(qe),Nd=Fd(Hn),s2=Ks({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),zd=/[&<>"']/g,l2=RegExp(zd.source);function Vd(t){return(t=fe(t))&&l2.test(t)?t.replace(zd,s2):t}var Ud=/[\\^$.*+?()[\]{}|]/g,c2=RegExp(Ud.source);function Hd(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function u2(t,e){var n=!0;return Fi(t,function(i,o,l){return n=!!e(i,o,l)}),n}function Gd(t){return t?sr(Gt(t),0,4294967295):0}function Yd(t,e){var n=[];return Fi(t,function(i,o,l){e(i,o,l)&&n.push(i)}),n}function Wd(t){return function(e,n,i){var o=Object(e);if(!Qn(e)){var l=Vt(n);e=qe(e),n=function(A){return l(o[A],A,o)}}var f=t(e,n,i);return f>-1?o[l?e[f]:f]:void 0}}var h2=Math.max;function Xd(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=n==null?0:Gt(n);return o<0&&(o=h2(i+o,0)),wa(t,Vt(e),o)}var d2=Wd(Xd);function $d(t,e,n){var i;return n(t,function(o,l,f){if(e(o,l,f))return i=l,!1}),i}var f2=Math.max,p2=Math.min;function dl(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=i-1;return n!==void 0&&(o=Gt(n),o=n<0?f2(i+o,0):p2(o,i-1)),wa(t,Vt(e),o,!0)}var g2=Wd(dl);function qd(t){return t&&t.length?t[0]:void 0}function Kd(t,e){var n=-1,i=Qn(t)?Array(t.length):[];return Fi(t,function(o,l,f){i[++n]=e(o,l,f)}),i}function Da(t,e){return(ie(t)?Oe:Kd)(t,Vt(e))}var v2=1/0,A2=1/0,m2=Js("floor");function Jd(t){return Xi(function(e){var n=e.length,i=n,o=In.prototype.thru;for(t&&e.reverse();i--;){var l=e[i];if(typeof l!="function")throw new TypeError("Expected a function");if(o&&!f&&Ca(l)=="wrapper")var f=new In([],!0)}for(i=f?i:n;++i<n;){var A=Ca(l=e[i]),m=A=="wrapper"?zs(l):void 0;f=m&&Vs(m[0])&&m[1]==424&&!m[4].length&&m[9]==1?f[Ca(m[0])].apply(f,m[3]):l.length==1&&Vs(l)?f[A]():f.thru(l)}return function(){var w=arguments,x=w[0];if(f&&w.length==1&&ie(x))return f.plant(x).value();for(var E=0,T=n?e[E].apply(this,w):x;++E<n;)T=e[E].call(this,T);return T}})}var y2=Jd(),b2=Jd(!0);function Ma(t,e){return xr(e,function(n){return Qr(t[n])})}var C2=Object.prototype.hasOwnProperty,w2=Ba(function(t,e,n){C2.call(t,n)?t[n].push(e):Mr(t,n,[e])});function fl(t,e){return t>e}function Qa(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=li(e),n=li(n)),t(e,n)}}var x2=Qa(fl),_2=Qa(function(t,e){return t>=e}),E2=Object.prototype.hasOwnProperty;function S2(t,e){return t!=null&&E2.call(t,e)}var I2=Math.max,k2=Math.min;function La(t){return typeof t=="string"||!ie(t)&&Ke(t)&&Di(t)=="[object String]"}function pl(t,e){return Oe(e,function(n){return t[n]})}function Yr(t){return t==null?[]:pl(t,qe(t))}var B2=Math.max,O2=Math.max,T2=Math.min;function gl(t,e,n){for(var i=n?ul:xa,o=t[0].length,l=t.length,f=l,A=Array(l),m=1/0,w=[];f--;){var x=t[f];f&&e&&(x=Oe(x,ci(e))),m=T2(x.length,m),A[f]=!n&&(e||o>=120&&x.length>=120)?new lr(f&&x):void 0}x=t[0];var E=-1,T=A[0];t:for(;++E<o&&w.length<m;){var O=x[E],k=e?e(O):O;if(O=n||O!==0?O:0,!(T?To(T,k):i(w,k,n))){for(f=l;--f;){var S=A[f];if(!(S?To(S,k):i(t[f],k,n)))continue t}T&&T.push(k),w.push(O)}}return w}function vl(t){return Le(t)?t:[]}var D2=Yt(function(t){var e=Oe(t,vl);return e.length&&e[0]===t[0]?gl(e):[]}),M2=Yt(function(t){var e=yn(t),n=Oe(t,vl);return e===yn(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?gl(n,Vt(e)):[]}),Q2=Yt(function(t){var e=yn(t),n=Oe(t,vl);return(e=typeof e=="function"?e:void 0)&&n.pop(),n.length&&n[0]===t[0]?gl(n,void 0,e):[]});function Zd(t,e){return function(n,i){return function(o,l,f,A){return qn(o,function(m,w,x){l(A,f(m),w,x)}),A}(n,t,e(i),{})}}var L2=Object.prototype.toString,P2=Zd(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=L2.call(e)),t[e]=n},A3(An)),tf=Object.prototype,j2=tf.hasOwnProperty,F2=tf.toString,R2=Zd(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=F2.call(e)),j2.call(t,e)?t[e].push(n):t[e]=[n]},Vt);function ef(t,e){return e.length<2?t:ga(t,kn(e,0,-1))}function Qo(t,e,n){var i=(t=ef(t,e=Rs(e,t)))==null?t:t[Dr(yn(e))];return i==null?void 0:Mn(i,t,n)}var N2=Yt(Qo),z2=Yt(function(t,e,n){var i=-1,o=typeof e=="function",l=Qn(t)?Array(t.length):[];return Fi(t,function(f){l[++i]=o?Mn(e,f,n):Qo(f,e,n)}),l}),nf=wo&&wo.isArrayBuffer,V2=nf?ci(nf):function(t){return Ke(t)&&Di(t)=="[object ArrayBuffer]"},rf=wo&&wo.isDate,U2=rf?ci(rf):function(t){return Ke(t)&&Di(t)=="[object Date]"},H2=Object.prototype.hasOwnProperty;function cr(t,e){return Do(t,e)}var G2=Tr.isFinite;function of(t){return typeof t=="number"&&t==Gt(t)}function ze(t){return typeof t=="number"||Ke(t)&&Di(t)=="[object Number]"}var Y2=r9?Qr:y3,af=wo&&wo.isRegExp,Al=af?ci(af):function(t){return Ke(t)&&Di(t)=="[object RegExp]"},W2=9007199254740991,X2=Array.prototype.join,$2=Gr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),q2=Ba(function(t,e,n){Mr(t,n,e)}),K2=Math.max,J2=Math.min,Z2=Gr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ty=$h("toLowerCase");function ml(t,e){return t<e}var ey=Qa(ml),ny=Qa(function(t,e){return t<=e});function Pa(t,e,n){for(var i=-1,o=t.length;++i<o;){var l=t[i],f=e(l);if(f!=null&&(A===void 0?f==f&&!Oi(f):n(f,A)))var A=f,m=l}return m}function yl(t,e){for(var n,i=-1,o=t.length;++i<o;){var l=e(t[i]);l!==void 0&&(n=n===void 0?l:n+l)}return n}function sf(t,e){var n=t==null?0:t.length;return n?yl(t,e)/n:NaN}var iy=Vr(function(t,e,n){Oa(t,e,n)}),ry=Yt(function(t,e){return function(n){return Qo(n,t,e)}}),oy=Yt(function(t,e){return function(n){return Qo(t,n,e)}});function lf(t,e,n){var i=qe(e),o=Ma(e,i),l=!(En(n)&&"chain"in n&&!n.chain),f=Qr(t);return Un(o,function(A){var m=e[A];t[A]=m,f&&(t.prototype[A]=function(){var w=this.__chain__;if(l||w){var x=t(this.__wrapped__);return(x.__actions__=wn(this.__actions__)).push({func:m,args:arguments,thisArg:t}),x.__chain__=w,x}return m.apply(t,da([this.value()],arguments))})}),t}var ay=Sn(function(t,e){return t*e},1);function Lo(t){if(typeof t!="function")throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var bl=So?So.iterator:void 0;function cf(t){if(!t)return[];if(Qn(t))return La(t)?Pn(t):wn(t);if(bl&&t[bl])return function(n){for(var i,o=[];!(i=n.next()).done;)o.push(i.value);return o}(t[bl]());var e=wr(t);return(e=="[object Map]"?tl:e=="[object Set]"?Ia:Yr)(t)}function uf(t,e){var n=t.length;if(n)return Eo(e+=e<0?n:0,n)?t[e]:void 0}function Cl(t,e){return(t=ef(t,e=Rs(e,t)))==null||delete t[Dr(yn(e))]}function sy(t){return Oo(t)?void 0:t}var ly=Xi(function(t,e){var n={};if(t==null)return n;var i=!1;e=Oe(e,function(l){return l=Rs(l,t),i||(i=l.length>1),l}),bo(t,b3(t),n),i&&(n=$i(n,7,sy));for(var o=e.length;o--;)Cl(n,e[o]);return n});function hf(t,e){if(t==null)return{};var n=Oe(b3(t),function(i){return[i]});return e=Vt(e),eB(t,n,function(i,o){return e(i,o[0])})}function df(t,e){if(t!==e){var n=t!==void 0,i=t===null,o=t==t,l=Oi(t),f=e!==void 0,A=e===null,m=e==e,w=Oi(e);if(!A&&!w&&!l&&t>e||l&&f&&m&&!A&&!w||i&&f&&m||!n&&m||!o)return 1;if(!i&&!l&&!w&&t<e||w&&n&&o&&!i&&!l||A&&n&&o||!f&&o||!m)return-1}return 0}function ff(t,e,n){e=e.length?Oe(e,function(l){return ie(l)?function(f){return ga(f,l.length===1?l[0]:l)}:l}):[An];var i=-1;e=Oe(e,ci(Vt));var o=Kd(t,function(l,f,A){var m=Oe(e,function(w){return w(l)});return{criteria:m,index:++i,value:l}});return function(l,f){var A=l.length;for(l.sort(f);A--;)l[A]=l[A].value;return l}(o,function(l,f){return function(A,m,w){for(var x=-1,E=A.criteria,T=m.criteria,O=E.length,k=w.length;++x<O;){var S=df(E[x],T[x]);if(S)return x>=k?S:S*(w[x]=="desc"?-1:1)}return A.index-m.index}(l,f,n)})}function wl(t){return Xi(function(e){return e=Oe(e,ci(Vt)),Yt(function(n){var i=this;return t(e,function(o){return Mn(o,i,n)})})})}var cy=wl(Oe),uy=Yt,hy=Math.min,dy=uy(function(t,e){var n=(e=e.length==1&&ie(e[0])?Oe(e[0],ci(Vt)):Oe(an(e,1),ci(Vt))).length;return Yt(function(i){for(var o=-1,l=hy(i.length,n);++o<l;)i[o]=e[o].call(this,i[o]);return Mn(t,this,i)})}),fy=wl(Hd),py=wl(Zs),gy=Math.floor;function xl(t,e){var n="";if(!t||e<1||e>9007199254740991)return n;do e%2&&(n+=t),(e=gy(e/2))&&(t+=t);while(e);return n}var vy=rl("length"),pf="\uD800-\uDFFF",Ay="["+pf+"]",_l="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",El="\uD83C[\uDFFB-\uDFFF]",gf="[^"+pf+"]",vf="(?:\uD83C[\uDDE6-\uDDFF]){2}",Af="[\uD800-\uDBFF][\uDC00-\uDFFF]",mf="(?:"+_l+"|"+El+")?",yf="[\\ufe0e\\ufe0f]?",my=yf+mf+("(?:\\u200d(?:"+[gf,vf,Af].join("|")+")"+yf+mf+")*"),yy="(?:"+[gf+_l+"?",_l,vf,Af,Ay].join("|")+")",bf=RegExp(El+"(?="+El+")|"+yy+my,"g");function Wr(t){return Ur(t)?function(e){for(var n=bf.lastIndex=0;bf.test(e);)++n;return n}(t):vy(t)}var by=Math.ceil;function ja(t,e){var n=(e=e===void 0?" ":Wn(e)).length;if(n<2)return n?xl(e,t):e;var i=xl(e,by(t/Wr(e)));return Ur(e)?ji(Pn(i),0,t).join(""):i.slice(0,t)}var Cy=Math.ceil,wy=Math.floor,xy=/^\s+/,_y=Tr.parseInt,Fa=Yt(function(t,e){return vi(t,32,void 0,e,Pi(e,zr(Fa)))});Fa.placeholder={};var Sl=Yt(function(t,e){return vi(t,64,void 0,e,Pi(e,zr(Sl)))});Sl.placeholder={};var Ey=Ba(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function Sy(t,e,n,i){for(var o=n-1,l=t.length;++o<l;)if(i(t[o],e))return o;return-1}var Cf=Array.prototype.splice;function Il(t,e,n,i){var o=i?Sy:Nr,l=-1,f=e.length,A=t;for(t===e&&(e=wn(e)),n&&(A=Oe(t,ci(n)));++l<f;)for(var m=0,w=e[l],x=n?n(w):w;(m=o(A,x,m,i))>-1;)A!==t&&Cf.call(A,m,1),Cf.call(t,m,1);return t}function wf(t,e){return t&&t.length&&e&&e.length?Il(t,e):t}var Iy=Yt(wf),ky=Array.prototype.splice;function xf(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==l){var l=o;Eo(o)?ky.call(t,o,1):Cl(t,o)}}return t}var By=Xi(function(t,e){var n=t==null?0:t.length,i=Hs(t,e);return xf(t,Oe(e,function(o){return Eo(o,n)?+o:o}).sort(df)),i}),Oy=Math.floor,Ty=Math.random;function kl(t,e){return t+Oy(Ty()*(e-t+1))}var Dy=parseFloat,My=Math.min,Qy=Math.random,Ly=Math.ceil,Py=Math.max;function _f(t){return function(e,n,i){return i&&typeof i!="number"&&Ze(e,n,i)&&(n=i=void 0),e=gi(e),n===void 0?(n=e,e=0):n=gi(n),function(o,l,f,A){for(var m=-1,w=Py(Ly((l-o)/(f||1)),0),x=Array(w);w--;)x[A?w:++m]=o,o+=f;return x}(e,n,i=i===void 0?e<n?1:-1:gi(i),t)}}var jy=_f(),Fy=_f(!0),Ry=Xi(function(t,e){return vi(t,256,void 0,void 0,void 0,e)});function Ef(t,e,n,i,o){return o(t,function(l,f,A){n=i?(i=!1,l):e(n,l,f,A)}),n}function Ny(t,e,n,i){var o=t==null?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}var zy=Array.prototype.reverse;function Bl(t){return t==null?t:zy.call(t)}var Vy=Js("round");function Sf(t){var e=t.length;return e?t[kl(0,e-1)]:void 0}function Uy(t){return Sf(Yr(t))}function Ra(t,e){var n=-1,i=t.length,o=i-1;for(e=e===void 0?i:e;++n<e;){var l=kl(n,o),f=t[l];t[l]=t[n],t[n]=f}return t.length=e,t}function Hy(t,e){return Ra(wn(t),sr(e,0,t.length))}function Gy(t,e){var n=Yr(t);return Ra(n,sr(e,0,n.length))}function Yy(t){return Ra(wn(t))}function Wy(t){return Ra(Yr(t))}var Xy=Gr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function $y(t,e){var n;return Fi(t,function(i,o,l){return!(n=e(i,o,l))}),!!n}var qy=Yt(function(t,e){if(t==null)return[];var n=e.length;return n>1&&Ze(t,e[0],e[1])?e=[]:n>2&&Ze(e[0],e[1],e[2])&&(e=[e[0]]),ff(t,an(e,1),[])}),Ky=Math.floor,Jy=Math.min;function Ol(t,e,n,i){var o=0,l=t==null?0:t.length;if(l===0)return 0;for(var f=(e=n(e))!=e,A=e===null,m=Oi(e),w=e===void 0;o<l;){var x=Ky((o+l)/2),E=n(t[x]),T=E!==void 0,O=E===null,k=E==E,S=Oi(E);if(f)var Q=i||k;else Q=w?k&&(i||T):A?k&&T&&(i||!O):m?k&&T&&!O&&(i||!S):!O&&!S&&(i?E<=e:E<e);Q?o=x+1:l=x}return Jy(l,4294967294)}function Na(t,e,n){var i=0,o=t==null?i:t.length;if(typeof e=="number"&&e==e&&o<=2147483647){for(;i<o;){var l=i+o>>>1,f=t[l];f!==null&&!Oi(f)&&(n?f<=e:f<e)?i=l+1:o=l}return o}return Ol(t,e,An,n)}function If(t,e){for(var n=-1,i=t.length,o=0,l=[];++n<i;){var f=t[n],A=e?e(f):f;if(!n||!Ti(A,m)){var m=A;l[o++]=f===0?0:f}}return l}var Zy=Math.max,tb=Gr(function(t,e,n){return t+(n?" ":"")+$s(e)}),eb=Sn(function(t,e){return t-e},0),kf=Object.prototype,nb=kf.hasOwnProperty;function Bf(t,e,n,i){return t===void 0||Ti(t,kf[n])&&!nb.call(i,n)?e:t}var ib={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function rb(t){return"\\"+ib[t]}var Of=/<%=([\s\S]+?)%>/g,Tl={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Of,variable:"",imports:{_:{escape:Vd}}},ob=/\b__p \+= '';/g,ab=/\b(__p \+=) '' \+/g,sb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lb=/[()=,{}\[\]\/\s]/,cb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,za=/($^)/,ub=/['\n\r\u2028\u2029\\]/g,Tf=Object.prototype.hasOwnProperty;function Po(t,e){return e(t)}var Dl=4294967295,hb=Math.min;function Df(t,e){var n=t;return n instanceof te&&(n=n.value()),qs(e,function(i,o){return o.func.apply(o.thisArg,da([i],o.args))},n)}function Ml(){return Df(this.__wrapped__,this.__actions__)}var db=9007199254740991;function Mf(t,e){for(var n=t.length;n--&&Nr(e,t[n],0)>-1;);return n}function Qf(t,e){for(var n=-1,i=t.length;++n<i&&Nr(e,t[n],0)>-1;);return n}var fb=/^\s+/,pb=/\w*$/,gb=Ks({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Lf=/&(?:amp|lt|gt|quot|#39);/g,vb=RegExp(Lf.source),Ab=sh&&1/Ia(new sh([,-0]))[1]==1/0?function(t){return new sh(t)}:Bo;function Ri(t,e,n){var i=-1,o=xa,l=t.length,f=!0,A=[],m=A;if(n)f=!1,o=ul;else if(l>=200){var w=e?null:Ab(t);if(w)return Ia(w);f=!1,o=To,m=new lr}else m=e?[]:A;t:for(;++i<l;){var x=t[i],E=e?e(x):x;if(x=n||x!==0?x:0,f&&E==E){for(var T=m.length;T--;)if(m[T]===E)continue t;e&&m.push(E),A.push(x)}else o(m,E,n)||(m!==A&&m.push(E),A.push(x))}return A}var mb=Yt(function(t){return Ri(an(t,1,Le,!0))}),yb=Yt(function(t){var e=yn(t);return Le(e)&&(e=void 0),Ri(an(t,1,Le,!0),Vt(e))}),bb=Yt(function(t){var e=yn(t);return e=typeof e=="function"?e:void 0,Ri(an(t,1,Le,!0),void 0,e)});function Pf(t,e){return t&&t.length?Ri(t,Vt(e)):[]}var Cb=0,wb=Math.max;function Ql(t){if(!t||!t.length)return[];var e=0;return t=xr(t,function(n){if(Le(n))return e=wb(n.length,e),!0}),C3(e,function(n){return Oe(t,rl(n))})}function jf(t,e){if(!t||!t.length)return[];var n=Ql(t);return e==null?n:Oe(n,function(i){return Mn(e,void 0,i)})}function Ff(t,e,n,i){return yh(t,e,n(ga(t,e)),i)}var xb=Gr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),_b=Yt(function(t,e){return Le(t)?Mo(t,e):[]}),Eb=Xi(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(l){return Hs(l,t)};return!(e>1||this.__actions__.length)&&i instanceof te&&Eo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Po,args:[o],thisArg:void 0}),new In(i,this.__chain__).thru(function(l){return e&&!l.length&&l.push(void 0),l})):this.thru(o)});function Ll(t,e,n){var i=t.length;if(i<2)return i?Ri(t[0]):[];for(var o=-1,l=Array(i);++o<i;)for(var f=t[o],A=-1;++A<i;)A!=o&&(l[o]=Mo(l[o]||f,t[A],e,n));return Ri(an(l,1),e,n)}var Sb=Yt(function(t){return Ll(xr(t,Le))}),Ib=Yt(function(t){var e=yn(t);return Le(e)&&(e=void 0),Ll(xr(t,Le),Vt(e))}),kb=Yt(function(t){var e=yn(t);return e=typeof e=="function"?e:void 0,Ll(xr(t,Le),void 0,e)}),Bb=Yt(Ql);function Rf(t,e,n){for(var i=-1,o=t.length,l=e.length,f={};++i<o;){var A=i<l?e[i]:void 0;n(f,t[i],A)}return f}var Ob=Yt(function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n=typeof n=="function"?(t.pop(),n):void 0,jf(t,n)});const Tt={chunk:function(t,e,n){e=(n?Ze(t,e,n):e===void 0)?1:Hm(Gt(e),0);var i=t==null?0:t.length;if(!i||e<1)return[];for(var o=0,l=0,f=Array(Um(i/e));o<i;)f[l++]=kn(t,o,o+=e);return f},compact:function(t){for(var e=-1,n=t==null?0:t.length,i=0,o=[];++e<n;){var l=t[e];l&&(o[i++]=l)}return o},concat:function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return da(ie(n)?wn(n):[n],an(e,1))},difference:n2,differenceBy:i2,differenceWith:r2,drop:function(t,e,n){var i=t==null?0:t.length;return i?kn(t,(e=n||e===void 0?1:Gt(e))<0?0:e,i):[]},dropRight:function(t,e,n){var i=t==null?0:t.length;return i?kn(t,0,(e=i-(e=n||e===void 0?1:Gt(e)))<0?0:e):[]},dropRightWhile:function(t,e){return t&&t.length?Ta(t,Vt(e),!0,!0):[]},dropWhile:function(t,e){return t&&t.length?Ta(t,Vt(e),!0):[]},fill:function(t,e,n,i){var o=t==null?0:t.length;return o?(n&&typeof n!="number"&&Ze(t,e,n)&&(n=0,i=o),function(l,f,A,m){var w=l.length;for((A=Gt(A))<0&&(A=-A>w?0:w+A),(m=m===void 0||m>w?w:Gt(m))<0&&(m+=w),m=A>m?0:Gd(m);A<m;)l[A++]=f;return l}(t,e,n,i)):[]},findIndex:Xd,findLastIndex:dl,first:qd,flatten:rB,flattenDeep:function(t){return t!=null&&t.length?an(t,A2):[]},flattenDepth:function(t,e){return t!=null&&t.length?(e=e===void 0?1:Gt(e),an(t,e)):[]},fromPairs:oB,head:qd,indexOf:function(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=n==null?0:Gt(n);return o<0&&(o=O2(i+o,0)),Nr(t,e,o)},initial:function(t){return t!=null&&t.length?kn(t,0,-1):[]},intersection:D2,intersectionBy:M2,intersectionWith:Q2,join:function(t,e){return t==null?"":X2.call(t,e)},last:yn,lastIndexOf:function(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=i;return n!==void 0&&(o=(o=Gt(n))<0?K2(i+o,0):J2(o,i-1)),e==e?function(l,f,A){for(var m=A+1;m--;)if(l[m]===f)return m;return m}(t,e,o):wa(t,Dh,o,!0)},nth:function(t,e){return t&&t.length?uf(t,Gt(e)):void 0},pull:Iy,pullAll:wf,pullAllBy:function(t,e,n){return t&&t.length&&e&&e.length?Il(t,e,Vt(n)):t},pullAllWith:function(t,e,n){return t&&t.length&&e&&e.length?Il(t,e,void 0,n):t},pullAt:By,remove:function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],l=t.length;for(e=Vt(e);++i<l;){var f=t[i];e(f,i,t)&&(n.push(f),o.push(i))}return xf(t,o),n},reverse:Bl,slice:function(t,e,n){var i=t==null?0:t.length;return i?(n&&typeof n!="number"&&Ze(t,e,n)?(e=0,n=i):(e=e==null?0:Gt(e),n=n===void 0?i:Gt(n)),kn(t,e,n)):[]},sortedIndex:function(t,e){return Na(t,e)},sortedIndexBy:function(t,e,n){return Ol(t,e,Vt(n))},sortedIndexOf:function(t,e){var n=t==null?0:t.length;if(n){var i=Na(t,e);if(i<n&&Ti(t[i],e))return i}return-1},sortedLastIndex:function(t,e){return Na(t,e,!0)},sortedLastIndexBy:function(t,e,n){return Ol(t,e,Vt(n),!0)},sortedLastIndexOf:function(t,e){if(t!=null&&t.length){var n=Na(t,e,!0)-1;if(Ti(t[n],e))return n}return-1},sortedUniq:function(t){return t&&t.length?If(t):[]},sortedUniqBy:function(t,e){return t&&t.length?If(t,Vt(e)):[]},tail:function(t){var e=t==null?0:t.length;return e?kn(t,1,e):[]},take:function(t,e,n){return t&&t.length?kn(t,0,(e=n||e===void 0?1:Gt(e))<0?0:e):[]},takeRight:function(t,e,n){var i=t==null?0:t.length;return i?kn(t,(e=i-(e=n||e===void 0?1:Gt(e)))<0?0:e,i):[]},takeRightWhile:function(t,e){return t&&t.length?Ta(t,Vt(e),!1,!0):[]},takeWhile:function(t,e){return t&&t.length?Ta(t,Vt(e)):[]},union:mb,unionBy:yb,unionWith:bb,uniq:function(t){return t&&t.length?Ri(t):[]},uniqBy:Pf,uniqWith:function(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Ri(t,void 0,e):[]},unzip:Ql,unzipWith:jf,without:_b,xor:Sb,xorBy:Ib,xorWith:kb,zip:Bb,zipObject:function(t,e){return Rf(t||[],e||[],N3)},zipObjectDeep:function(t,e){return Rf(t||[],e||[],yh)},zipWith:Ob},pe={countBy:qm,each:Qd,eachRight:jd,every:function(t,e,n){var i=ie(t)?Hd:u2;return n&&Ze(t,e,n)&&(e=void 0),i(t,Vt(e))},filter:function(t,e){return(ie(t)?xr:Yd)(t,Vt(e))},find:d2,findLast:g2,flatMap:function(t,e){return an(Da(t,e),1)},flatMapDeep:function(t,e){return an(Da(t,e),v2)},flatMapDepth:function(t,e,n){return n=n===void 0?1:Gt(n),an(Da(t,e),n)},forEach:Qd,forEachRight:jd,groupBy:w2,includes:function(t,e,n,i){t=Qn(t)?t:Yr(t),n=n&&!i?Gt(n):0;var o=t.length;return n<0&&(n=B2(o+n,0)),La(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Nr(t,e,n)>-1},invokeMap:z2,keyBy:q2,map:Da,orderBy:function(t,e,n,i){return t==null?[]:(ie(e)||(e=e==null?[]:[e]),ie(n=i?void 0:n)||(n=n==null?[]:[n]),ff(t,e,n))},partition:Ey,reduce:function(t,e,n){var i=ie(t)?qs:Ef,o=arguments.length<3;return i(t,Vt(e),n,o,Fi)},reduceRight:function(t,e,n){var i=ie(t)?Ny:Ef,o=arguments.length<3;return i(t,Vt(e),n,o,Pd)},reject:function(t,e){return(ie(t)?xr:Yd)(t,Lo(Vt(e)))},sample:function(t){return(ie(t)?Sf:Uy)(t)},sampleSize:function(t,e,n){return e=(n?Ze(t,e,n):e===void 0)?1:Gt(e),(ie(t)?Hy:Gy)(t,e)},shuffle:function(t){return(ie(t)?Yy:Wy)(t)},size:function(t){if(t==null)return 0;if(Qn(t))return La(t)?Wr(t):t.length;var e=wr(t);return e=="[object Map]"||e=="[object Set]"?t.size:m3(t).length},some:function(t,e,n){var i=ie(t)?Zs:$y;return n&&Ze(t,e,n)&&(e=void 0),i(t,Vt(e))},sortBy:qy},Tb={now:aB},Te={after:function(t,e){if(typeof e!="function")throw new TypeError("Expected a function");return t=Gt(t),function(){if(--t<1)return e.apply(this,arguments)}},ary:Fh,before:Vh,bind:Sa,bindKey:Ys,curry:al,curryRight:sl,debounce:be,defer:t2,delay:e2,flip:function(t){return vi(t,512)},memoize:s9,negate:Lo,once:function(t){return Vh(2,t)},overArgs:dy,partial:Fa,partialRight:Sl,rearg:Ry,rest:function(t,e){if(typeof t!="function")throw new TypeError("Expected a function");return Yt(t,e=e===void 0?e:Gt(e))},spread:function(t,e){if(typeof t!="function")throw new TypeError("Expected a function");return e=e==null?0:Zy(Gt(e),0),Yt(function(n){var i=n[e],o=ji(n,0,e);return i&&da(o,i),Mn(t,this,o)})},throttle:Ln,unary:function(t){return Fh(t,1)},wrap:function(t,e){return Fa(Kn(e),t)}},Pt={castArray:Ms,clone:sB,cloneDeep:function(t){return $i(t,5)},cloneDeepWith:function(t,e){return $i(t,5,e=typeof e=="function"?e:void 0)},cloneWith:function(t,e){return $i(t,4,e=typeof e=="function"?e:void 0)},conformsTo:function(t,e){return e==null||Sd(t,e,qe(e))},eq:Ti,gt:x2,gte:_2,isArguments:Ds,isArray:ie,isArrayBuffer:V2,isArrayLike:Qn,isArrayLikeObject:Le,isBoolean:function(t){return t===!0||t===!1||Ke(t)&&Di(t)=="[object Boolean]"},isBuffer:Co,isDate:U2,isElement:function(t){return Ke(t)&&t.nodeType===1&&!Oo(t)},isEmpty:function(t){if(t==null)return!0;if(Qn(t)&&(ie(t)||typeof t=="string"||typeof t.splice=="function"||Co(t)||pa(t)||Ds(t)))return!t.length;var e=wr(t);if(e=="[object Map]"||e=="[object Set]")return!t.size;if(d3(t))return!m3(t).length;for(var n in t)if(H2.call(t,n))return!1;return!0},isEqual:cr,isEqualWith:function(t,e,n){var i=(n=typeof n=="function"?n:void 0)?n(t,e):void 0;return i===void 0?Do(t,e,void 0,n):!!i},isError:Gs,isFinite:function(t){return typeof t=="number"&&G2(t)},isFunction:Qr,isInteger:of,isLength:lB,isMap:cB,isMatch:function(t,e){return t===e||nl(t,e,il(e))},isMatchWith:function(t,e,n){return n=typeof n=="function"?n:void 0,nl(t,e,il(e),n)},isNaN:function(t){return ze(t)&&t!=+t},isNative:function(t){if(Y2(t))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return o9(t)},isNil:Ei,isNull:function(t){return t===null},isNumber:ze,isObject:En,isObjectLike:Ke,isPlainObject:Oo,isRegExp:Al,isSafeInteger:function(t){return of(t)&&t>=-9007199254740991&&t<=W2},isSet:uB,isString:La,isSymbol:Oi,isTypedArray:pa,isUndefined:w3,isWeakMap:function(t){return Ke(t)&&wr(t)=="[object WeakMap]"},isWeakSet:function(t){return Ke(t)&&Di(t)=="[object WeakSet]"},lt:ey,lte:ny,toArray:cf,toFinite:gi,toInteger:Gt,toLength:Gd,toNumber:li,toPlainObject:Od,toSafeInteger:function(t){return t?sr(Gt(t),-9007199254740991,db):t===0?t:0},toString:fe},tn={add:Fr,ceil:Vm,divide:o2,floor:m2,max:function(t){return t&&t.length?Pa(t,An,fl):void 0},maxBy:function(t,e){return t&&t.length?Pa(t,Vt(e),fl):void 0},mean:function(t){return sf(t,An)},meanBy:function(t,e){return sf(t,Vt(e))},min:function(t){return t&&t.length?Pa(t,An,ml):void 0},minBy:function(t,e){return t&&t.length?Pa(t,Vt(e),ml):void 0},multiply:ay,round:Vy,subtract:eb,sum:function(t){return t&&t.length?yl(t,An):0},sumBy:function(t,e){return t&&t.length?yl(t,Vt(e)):0}},Db=function(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=(n=li(n))==n?n:0),e!==void 0&&(e=(e=li(e))==e?e:0),sr(li(t),e,n)},Mb=function(t,e,n){return e=gi(e),n===void 0?(n=e,e=0):n=gi(n),function(i,o,l){return i>=k2(o,l)&&i<I2(o,l)}(t=li(t),e,n)},Qb=function(t,e,n){if(n&&typeof n!="boolean"&&Ze(t,e,n)&&(e=n=void 0),n===void 0&&(typeof e=="boolean"?(n=e,e=void 0):typeof t=="boolean"&&(n=t,t=void 0)),t===void 0&&e===void 0?(t=0,e=1):(t=gi(t),e===void 0?(e=t,t=0):e=gi(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Qy();return My(t+o*(e-t+Dy("1e-"+((o+"").length-1))),e)}return kl(t,e)},zt={assign:gm,assignIn:Rh,assignInWith:Ea,assignWith:vm,at:Am,create:function(t,e){var n=ha(t);return e==null?n:qk(n,e)},defaults:Jm,defaultsDeep:Zm,entries:Rd,entriesIn:Nd,extend:Rh,extendWith:Ea,findKey:function(t,e){return $d(t,Vt(e),qn)},findLastKey:function(t,e){return $d(t,Vt(e),hl)},forIn:function(t,e){return t==null?t:ol(t,Kn(e),Hn)},forInRight:function(t,e){return t==null?t:Ld(t,Kn(e),Hn)},forOwn:function(t,e){return t&&qn(t,Kn(e))},forOwnRight:function(t,e){return t&&hl(t,Kn(e))},functions:function(t){return t==null?[]:Ma(t,qe(t))},functionsIn:function(t){return t==null?[]:Ma(t,Hn(t))},get:xn,has:function(t,e){return t!=null&&tB(t,e,S2)},hasIn:v3,invert:P2,invertBy:R2,invoke:N2,keys:qe,keysIn:Hn,mapKeys:function(t,e){var n={};return e=Vt(e),qn(t,function(i,o,l){Mr(n,e(i,o,l),i)}),n},mapValues:function(t,e){var n={};return e=Vt(e),qn(t,function(i,o,l){Mr(n,o,e(i,o,l))}),n},merge:iy,mergeWith:Dd,omit:ly,omitBy:function(t,e){return hf(t,Lo(Vt(e)))},pick:_r,pickBy:hf,result:function(t,e,n){var i=-1,o=(e=Rs(e,t)).length;for(o||(o=1,t=void 0);++i<o;){var l=t==null?void 0:t[Dr(e[i])];l===void 0&&(i=o,l=n),t=Qr(l)?l.call(t):l}return t},set:V3,setWith:function(t,e,n,i){return i=typeof i=="function"?i:void 0,t==null?t:yh(t,e,n,i)},toPairs:Rd,toPairsIn:Nd,transform:function(t,e,n){var i=ie(t),o=i||Co(t)||pa(t);if(e=Vt(e),n==null){var l=t&&t.constructor;n=o?i?new l:[]:En(t)&&Qr(l)?ha(f3(t)):{}}return(o?Un:qn)(t,function(f,A,m){return e(n,f,A,m)}),n},unset:function(t,e){return t==null||Cl(t,e)},update:function(t,e,n){return t==null?t:Ff(t,e,Kn(n))},updateWith:function(t,e,n,i){return i=typeof i=="function"?i:void 0,t==null?t:Ff(t,e,Kn(n),i)},values:Yr,valuesIn:function(t){return t==null?[]:pl(t,Hn(t))}},Jn={at:Eb,chain:gd,commit:function(){return new In(this.value(),this.__chain__)},lodash:K,next:function(){this.__values__===void 0&&(this.__values__=cf(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?void 0:this.__values__[this.__index__++]}},plant:function(t){for(var e,n=this;n instanceof ba;){var i=Oh(n);i.__index__=0,i.__values__=void 0,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},reverse:function(){var t=this.__wrapped__;if(t instanceof te){var e=t;return this.__actions__.length&&(e=new te(this)),(e=e.reverse()).__actions__.push({func:Po,args:[Bl],thisArg:void 0}),new In(e,this.__chain__)}return this.thru(Bl)},tap:function(t,e){return e(t),t},thru:Po,toIterator:function(){return this},toJSON:Ml,value:Ml,valueOf:Ml,wrapperChain:function(){return gd(this)}},se={camelCase:Rm,capitalize:qh,deburr:Kh,endsWith:function(t,e,n){t=fe(t),e=Wn(e);var i=t.length,o=n=n===void 0?i:sr(Gt(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},escape:Vd,escapeRegExp:function(t){return(t=fe(t))&&c2.test(t)?t.replace(Ud,"\\$&"):t},kebabCase:$2,lowerCase:Z2,lowerFirst:ty,pad:function(t,e,n){t=fe(t);var i=(e=Gt(e))?Wr(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return ja(wy(o),n)+t+ja(Cy(o),n)},padEnd:function(t,e,n){t=fe(t);var i=(e=Gt(e))?Wr(t):0;return e&&i<e?t+ja(e-i,n):t},padStart:function(t,e,n){t=fe(t);var i=(e=Gt(e))?Wr(t):0;return e&&i<e?ja(e-i,n)+t:t},parseInt:function(t,e,n){return n||e==null?e=0:e&&(e=+e),_y(fe(t).replace(xy,""),e||0)},repeat:function(t,e,n){return e=(n?Ze(t,e,n):e===void 0)?1:Gt(e),xl(fe(t),e)},replace:function(){var t=arguments,e=fe(t[0]);return t.length<3?e:e.replace(t[1],t[2])},snakeCase:Xy,split:function(t,e,n){return n&&typeof n!="number"&&Ze(t,e,n)&&(e=n=void 0),(n=n===void 0?4294967295:n>>>0)?(t=fe(t))&&(typeof e=="string"||e!=null&&!Al(e))&&!(e=Wn(e))&&Ur(t)?ji(Pn(t),0,n):t.split(e,n):[]},startCase:tb,startsWith:function(t,e,n){return t=fe(t),n=n==null?0:sr(Gt(n),0,t.length),e=Wn(e),t.slice(n,n+e.length)==e},template:function(t,e,n){var i=Tl.imports._.templateSettings||Tl;n&&Ze(t,e,n)&&(e=void 0),t=fe(t),e=Ea({},e,i,Bf);var o,l,f=Ea({},e.imports,i.imports,Bf),A=qe(f),m=pl(f,A),w=0,x=e.interpolate||za,E="__p += '",T=RegExp((e.escape||za).source+"|"+x.source+"|"+(x===Of?cb:za).source+"|"+(e.evaluate||za).source+"|$","g"),O=Tf.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(T,function(Q,R,V,b,Y,rt){return V||(V=b),E+=t.slice(w,rt).replace(ub,rb),R&&(o=!0,E+="' +\n__e("+R+") +\n'"),Y&&(l=!0,E+="';\n"+Y+";\n__p += '"),V&&(E+="' +\n((__t = ("+V+")) == null ? '' : __t) +\n'"),w=rt+Q.length,Q}),E+="';\n";var k=Tf.call(e,"variable")&&e.variable;if(k){if(lb.test(k))throw new Error("Invalid `variable` option passed into `_.template`")}else E="with (obj) {\n"+E+"\n}\n";E=(l?E.replace(ob,""):E).replace(ab,"$1").replace(sb,"$1;"),E="function("+(k||"obj")+") {\n"+(k?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+E+"return __p\n}";var S=zh(function(){return Function(A,O+"return "+E).apply(void 0,m)});if(S.source=E,Gs(S))throw S;return S},templateSettings:Tl,toLower:function(t){return fe(t).toLowerCase()},toUpper:function(t){return fe(t).toUpperCase()},trim:function(t,e,n){if((t=fe(t))&&(n||e===void 0))return nB(t);if(!t||!(e=Wn(e)))return t;var i=Pn(t),o=Pn(e);return ji(i,Qf(i,o),Mf(i,o)+1).join("")},trimEnd:function(t,e,n){if((t=fe(t))&&(n||e===void 0))return t.slice(0,iB(t)+1);if(!t||!(e=Wn(e)))return t;var i=Pn(t);return ji(i,0,Mf(i,Pn(e))+1).join("")},trimStart:function(t,e,n){if((t=fe(t))&&(n||e===void 0))return t.replace(fb,"");if(!t||!(e=Wn(e)))return t;var i=Pn(t);return ji(i,Qf(i,Pn(e))).join("")},truncate:function(t,e){var n=30,i="...";if(En(e)){var o="separator"in e?e.separator:o;n="length"in e?Gt(e.length):n,i="omission"in e?Wn(e.omission):i}var l=(t=fe(t)).length;if(Ur(t)){var f=Pn(t);l=f.length}if(n>=l)return t;var A=n-Wr(i);if(A<1)return i;var m=f?ji(f,0,A).join(""):t.slice(0,A);if(o===void 0)return m+i;if(f&&(A+=m.length-A),Al(o)){if(t.slice(A).search(o)){var w,x=m;for(o.global||(o=RegExp(o.source,fe(pb.exec(o))+"g")),o.lastIndex=0;w=o.exec(x);)var E=w.index;m=m.slice(0,E===void 0?A:E)}}else if(t.indexOf(Wn(o),A)!=A){var T=m.lastIndexOf(o);T>-1&&(m=m.slice(0,T))}return m+i},unescape:function(t){return(t=fe(t))&&vb.test(t)?t.replace(Lf,gb):t},upperCase:xb,upperFirst:$s,words:pd},ce={attempt:zh,bindAll:wm,cond:function(t){var e=t==null?0:t.length,n=Vt;return t=e?Oe(t,function(i){if(typeof i[1]!="function")throw new TypeError("Expected a function");return[n(i[0]),i[1]]}):[],Yt(function(i){for(var o=-1;++o<e;){var l=t[o];if(Mn(l[0],this,i))return Mn(l[1],this,i)}})},conforms:function(t){return function(e){var n=qe(e);return function(i){return Sd(i,e,n)}}($i(t,1))},constant:A3,defaultTo:function(t,e){return t==null||t!=t?e:t},flow:y2,flowRight:b2,identity:An,iteratee:function(t){return Vt(typeof t=="function"?t:$i(t,1))},matches:function(t){return xd($i(t,1))},matchesProperty:function(t,e){return _d(t,$i(e,1))},method:ry,methodOf:oy,mixin:lf,noop:Bo,nthArg:function(t){return t=Gt(t),Yt(function(e){return uf(e,t)})},over:cy,overEvery:fy,overSome:py,property:Ed,propertyOf:function(t){return function(e){return t==null?void 0:ga(t,e)}},range:jy,rangeRight:Fy,stubArray:hB,stubFalse:y3,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(t,e){if((t=Gt(t))<1||t>9007199254740991)return[];var n=Dl,i=hb(t,Dl);e=Kn(e),t-=Dl;for(var o=C3(i,e);++n<t;)e(n);return o},toPath:function(t){return ie(t)?Oe(t,Dr):Oi(t)?[t]:wn(a9(fe(t)))},uniqueId:function(t){var e=++Cb;return fe(t)+e}};var Lb=Math.max,Pb=Math.min,jb=Math.min,Pl,Nf=4294967295,Fb=Array.prototype,zf=Object.prototype.hasOwnProperty,Vf=So?So.iterator:void 0,Rb=Math.max,Uf=Math.min,jl=function(t){return function(e,n,i){if(i==null){var o=En(n),l=o&&qe(n),f=l&&l.length&&Ma(n,l);(f?f.length:o)||(i=n,n=e,e=this)}return t(e,n,i)}}(lf);K.after=Te.after,K.ary=Te.ary,K.assign=zt.assign,K.assignIn=zt.assignIn,K.assignInWith=zt.assignInWith,K.assignWith=zt.assignWith,K.at=zt.at,K.before=Te.before,K.bind=Te.bind,K.bindAll=ce.bindAll,K.bindKey=Te.bindKey,K.castArray=Pt.castArray,K.chain=Jn.chain,K.chunk=Tt.chunk,K.compact=Tt.compact,K.concat=Tt.concat,K.cond=ce.cond,K.conforms=ce.conforms,K.constant=ce.constant,K.countBy=pe.countBy,K.create=zt.create,K.curry=Te.curry,K.curryRight=Te.curryRight,K.debounce=Te.debounce,K.defaults=zt.defaults,K.defaultsDeep=zt.defaultsDeep,K.defer=Te.defer,K.delay=Te.delay,K.difference=Tt.difference,K.differenceBy=Tt.differenceBy,K.differenceWith=Tt.differenceWith,K.drop=Tt.drop,K.dropRight=Tt.dropRight,K.dropRightWhile=Tt.dropRightWhile,K.dropWhile=Tt.dropWhile,K.fill=Tt.fill,K.filter=pe.filter,K.flatMap=pe.flatMap,K.flatMapDeep=pe.flatMapDeep,K.flatMapDepth=pe.flatMapDepth,K.flatten=Tt.flatten,K.flattenDeep=Tt.flattenDeep,K.flattenDepth=Tt.flattenDepth,K.flip=Te.flip,K.flow=ce.flow,K.flowRight=ce.flowRight,K.fromPairs=Tt.fromPairs,K.functions=zt.functions,K.functionsIn=zt.functionsIn,K.groupBy=pe.groupBy,K.initial=Tt.initial,K.intersection=Tt.intersection,K.intersectionBy=Tt.intersectionBy,K.intersectionWith=Tt.intersectionWith,K.invert=zt.invert,K.invertBy=zt.invertBy,K.invokeMap=pe.invokeMap,K.iteratee=ce.iteratee,K.keyBy=pe.keyBy,K.keys=qe,K.keysIn=zt.keysIn,K.map=pe.map,K.mapKeys=zt.mapKeys,K.mapValues=zt.mapValues,K.matches=ce.matches,K.matchesProperty=ce.matchesProperty,K.memoize=Te.memoize,K.merge=zt.merge,K.mergeWith=zt.mergeWith,K.method=ce.method,K.methodOf=ce.methodOf,K.mixin=jl,K.negate=Lo,K.nthArg=ce.nthArg,K.omit=zt.omit,K.omitBy=zt.omitBy,K.once=Te.once,K.orderBy=pe.orderBy,K.over=ce.over,K.overArgs=Te.overArgs,K.overEvery=ce.overEvery,K.overSome=ce.overSome,K.partial=Te.partial,K.partialRight=Te.partialRight,K.partition=pe.partition,K.pick=zt.pick,K.pickBy=zt.pickBy,K.property=ce.property,K.propertyOf=ce.propertyOf,K.pull=Tt.pull,K.pullAll=Tt.pullAll,K.pullAllBy=Tt.pullAllBy,K.pullAllWith=Tt.pullAllWith,K.pullAt=Tt.pullAt,K.range=ce.range,K.rangeRight=ce.rangeRight,K.rearg=Te.rearg,K.reject=pe.reject,K.remove=Tt.remove,K.rest=Te.rest,K.reverse=Tt.reverse,K.sampleSize=pe.sampleSize,K.set=zt.set,K.setWith=zt.setWith,K.shuffle=pe.shuffle,K.slice=Tt.slice,K.sortBy=pe.sortBy,K.sortedUniq=Tt.sortedUniq,K.sortedUniqBy=Tt.sortedUniqBy,K.split=se.split,K.spread=Te.spread,K.tail=Tt.tail,K.take=Tt.take,K.takeRight=Tt.takeRight,K.takeRightWhile=Tt.takeRightWhile,K.takeWhile=Tt.takeWhile,K.tap=Jn.tap,K.throttle=Te.throttle,K.thru=Po,K.toArray=Pt.toArray,K.toPairs=zt.toPairs,K.toPairsIn=zt.toPairsIn,K.toPath=ce.toPath,K.toPlainObject=Pt.toPlainObject,K.transform=zt.transform,K.unary=Te.unary,K.union=Tt.union,K.unionBy=Tt.unionBy,K.unionWith=Tt.unionWith,K.uniq=Tt.uniq,K.uniqBy=Tt.uniqBy,K.uniqWith=Tt.uniqWith,K.unset=zt.unset,K.unzip=Tt.unzip,K.unzipWith=Tt.unzipWith,K.update=zt.update,K.updateWith=zt.updateWith,K.values=zt.values,K.valuesIn=zt.valuesIn,K.without=Tt.without,K.words=se.words,K.wrap=Te.wrap,K.xor=Tt.xor,K.xorBy=Tt.xorBy,K.xorWith=Tt.xorWith,K.zip=Tt.zip,K.zipObject=Tt.zipObject,K.zipObjectDeep=Tt.zipObjectDeep,K.zipWith=Tt.zipWith,K.entries=zt.toPairs,K.entriesIn=zt.toPairsIn,K.extend=zt.assignIn,K.extendWith=zt.assignInWith,jl(K,K),K.add=tn.add,K.attempt=ce.attempt,K.camelCase=se.camelCase,K.capitalize=se.capitalize,K.ceil=tn.ceil,K.clamp=Db,K.clone=Pt.clone,K.cloneDeep=Pt.cloneDeep,K.cloneDeepWith=Pt.cloneDeepWith,K.cloneWith=Pt.cloneWith,K.conformsTo=Pt.conformsTo,K.deburr=se.deburr,K.defaultTo=ce.defaultTo,K.divide=tn.divide,K.endsWith=se.endsWith,K.eq=Pt.eq,K.escape=se.escape,K.escapeRegExp=se.escapeRegExp,K.every=pe.every,K.find=pe.find,K.findIndex=Tt.findIndex,K.findKey=zt.findKey,K.findLast=pe.findLast,K.findLastIndex=Tt.findLastIndex,K.findLastKey=zt.findLastKey,K.floor=tn.floor,K.forEach=pe.forEach,K.forEachRight=pe.forEachRight,K.forIn=zt.forIn,K.forInRight=zt.forInRight,K.forOwn=zt.forOwn,K.forOwnRight=zt.forOwnRight,K.get=zt.get,K.gt=Pt.gt,K.gte=Pt.gte,K.has=zt.has,K.hasIn=zt.hasIn,K.head=Tt.head,K.identity=An,K.includes=pe.includes,K.indexOf=Tt.indexOf,K.inRange=Mb,K.invoke=zt.invoke,K.isArguments=Pt.isArguments,K.isArray=ie,K.isArrayBuffer=Pt.isArrayBuffer,K.isArrayLike=Pt.isArrayLike,K.isArrayLikeObject=Pt.isArrayLikeObject,K.isBoolean=Pt.isBoolean,K.isBuffer=Pt.isBuffer,K.isDate=Pt.isDate,K.isElement=Pt.isElement,K.isEmpty=Pt.isEmpty,K.isEqual=Pt.isEqual,K.isEqualWith=Pt.isEqualWith,K.isError=Pt.isError,K.isFinite=Pt.isFinite,K.isFunction=Pt.isFunction,K.isInteger=Pt.isInteger,K.isLength=Pt.isLength,K.isMap=Pt.isMap,K.isMatch=Pt.isMatch,K.isMatchWith=Pt.isMatchWith,K.isNaN=Pt.isNaN,K.isNative=Pt.isNative,K.isNil=Pt.isNil,K.isNull=Pt.isNull,K.isNumber=Pt.isNumber,K.isObject=En,K.isObjectLike=Pt.isObjectLike,K.isPlainObject=Pt.isPlainObject,K.isRegExp=Pt.isRegExp,K.isSafeInteger=Pt.isSafeInteger,K.isSet=Pt.isSet,K.isString=Pt.isString,K.isSymbol=Pt.isSymbol,K.isTypedArray=Pt.isTypedArray,K.isUndefined=Pt.isUndefined,K.isWeakMap=Pt.isWeakMap,K.isWeakSet=Pt.isWeakSet,K.join=Tt.join,K.kebabCase=se.kebabCase,K.last=yn,K.lastIndexOf=Tt.lastIndexOf,K.lowerCase=se.lowerCase,K.lowerFirst=se.lowerFirst,K.lt=Pt.lt,K.lte=Pt.lte,K.max=tn.max,K.maxBy=tn.maxBy,K.mean=tn.mean,K.meanBy=tn.meanBy,K.min=tn.min,K.minBy=tn.minBy,K.stubArray=ce.stubArray,K.stubFalse=ce.stubFalse,K.stubObject=ce.stubObject,K.stubString=ce.stubString,K.stubTrue=ce.stubTrue,K.multiply=tn.multiply,K.nth=Tt.nth,K.noop=ce.noop,K.now=Tb.now,K.pad=se.pad,K.padEnd=se.padEnd,K.padStart=se.padStart,K.parseInt=se.parseInt,K.random=Qb,K.reduce=pe.reduce,K.reduceRight=pe.reduceRight,K.repeat=se.repeat,K.replace=se.replace,K.result=zt.result,K.round=tn.round,K.sample=pe.sample,K.size=pe.size,K.snakeCase=se.snakeCase,K.some=pe.some,K.sortedIndex=Tt.sortedIndex,K.sortedIndexBy=Tt.sortedIndexBy,K.sortedIndexOf=Tt.sortedIndexOf,K.sortedLastIndex=Tt.sortedLastIndex,K.sortedLastIndexBy=Tt.sortedLastIndexBy,K.sortedLastIndexOf=Tt.sortedLastIndexOf,K.startCase=se.startCase,K.startsWith=se.startsWith,K.subtract=tn.subtract,K.sum=tn.sum,K.sumBy=tn.sumBy,K.template=se.template,K.times=ce.times,K.toFinite=Pt.toFinite,K.toInteger=Gt,K.toLength=Pt.toLength,K.toLower=se.toLower,K.toNumber=Pt.toNumber,K.toSafeInteger=Pt.toSafeInteger,K.toString=Pt.toString,K.toUpper=se.toUpper,K.trim=se.trim,K.trimEnd=se.trimEnd,K.trimStart=se.trimStart,K.truncate=se.truncate,K.unescape=se.unescape,K.uniqueId=ce.uniqueId,K.upperCase=se.upperCase,K.upperFirst=se.upperFirst,K.each=pe.forEach,K.eachRight=pe.forEachRight,K.first=Tt.head,jl(K,(Pl={},qn(K,function(t,e){zf.call(K.prototype,e)||(Pl[e]=t)}),Pl),{chain:!1}),K.VERSION="4.17.21",(K.templateSettings=se.templateSettings).imports._=K,Un(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){K[t].placeholder=K}),Un(["drop","take"],function(t,e){te.prototype[t]=function(n){n=n===void 0?1:Rb(Gt(n),0);var i=this.__filtered__&&!e?new te(this):this.clone();return i.__filtered__?i.__takeCount__=Uf(n,i.__takeCount__):i.__views__.push({size:Uf(n,Nf),type:t+(i.__dir__<0?"Right":"")}),i},te.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),Un(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==1||n==3;te.prototype[t]=function(o){var l=this.clone();return l.__iteratees__.push({iteratee:Vt(o),type:n}),l.__filtered__=l.__filtered__||i,l}}),Un(["head","last"],function(t,e){var n="take"+(e?"Right":"");te.prototype[t]=function(){return this[n](1).value()[0]}}),Un(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");te.prototype[t]=function(){return this.__filtered__?new te(this):this[n](1)}}),te.prototype.compact=function(){return this.filter(An)},te.prototype.find=function(t){return this.filter(t).head()},te.prototype.findLast=function(t){return this.reverse().find(t)},te.prototype.invokeMap=Yt(function(t,e){return typeof t=="function"?new te(this):this.map(function(n){return Qo(n,t,e)})}),te.prototype.reject=function(t){return this.filter(Lo(Vt(t)))},te.prototype.slice=function(t,e){t=Gt(t);var n=this;return n.__filtered__&&(t>0||e<0)?new te(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==void 0&&(n=(e=Gt(e))<0?n.dropRight(-e):n.take(e-t)),n)},te.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},te.prototype.toArray=function(){return this.take(Nf)},qn(te.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=K[i?"take"+(e=="last"?"Right":""):e],l=i||/^find/.test(e);o&&(K.prototype[e]=function(){var f=this.__wrapped__,A=i?[1]:arguments,m=f instanceof te,w=A[0],x=m||ie(f),E=function(R){var V=o.apply(K,da([R],A));return i&&T?V[0]:V};x&&n&&typeof w=="function"&&w.length!=1&&(m=x=!1);var T=this.__chain__,O=!!this.__actions__.length,k=l&&!T,S=m&&!O;if(!l&&x){f=S?f:new te(this);var Q=t.apply(f,A);return Q.__actions__.push({func:Po,args:[E],thisArg:void 0}),new In(Q,T)}return k&&S?t.apply(this,A):(Q=this.thru(E),k?i?Q.value()[0]:Q.value():Q)})}),Un(["pop","push","shift","sort","splice","unshift"],function(t){var e=Fb[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);K.prototype[t]=function(){var o=arguments;if(i&&!this.__chain__){var l=this.value();return e.apply(ie(l)?l:[],o)}return this[n](function(f){return e.apply(ie(f)?f:[],o)})}}),qn(te.prototype,function(t,e){var n=K[e];if(n){var i=n.name+"";zf.call(Rr,i)||(Rr[i]=[]),Rr[i].push({name:e,func:n})}}),Rr[_a(void 0,2).name]=[{name:"wrapper",func:void 0}],te.prototype.clone=function(){var t=new te(this.__wrapped__);return t.__actions__=wn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=wn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=wn(this.__views__),t},te.prototype.reverse=function(){if(this.__filtered__){var t=new te(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},te.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ie(t),i=e<0,o=n?t.length:0,l=function(rt,q,h){for(var s=-1,u=h.length;++s<u;){var d=h[s],r=d.size;switch(d.type){case"drop":rt+=r;break;case"dropRight":q-=r;break;case"take":q=Pb(q,rt+r);break;case"takeRight":rt=Lb(rt,q-r)}}return{start:rt,end:q}}(0,o,this.__views__),f=l.start,A=l.end,m=A-f,w=i?A:f-1,x=this.__iteratees__,E=x.length,T=0,O=jb(m,this.__takeCount__);if(!n||!i&&o==m&&O==m)return Df(t,this.__actions__);var k=[];t:for(;m--&&T<O;){for(var S=-1,Q=t[w+=e];++S<E;){var R=x[S],V=R.iteratee,b=R.type,Y=V(Q);if(b==2)Q=Y;else if(!Y){if(b==1)continue t;break t}}k[T++]=Q}return k},K.prototype.at=Jn.at,K.prototype.chain=Jn.wrapperChain,K.prototype.commit=Jn.commit,K.prototype.next=Jn.next,K.prototype.plant=Jn.plant,K.prototype.reverse=Jn.reverse,K.prototype.toJSON=K.prototype.valueOf=K.prototype.value=Jn.value,K.prototype.first=K.prototype.head,Vf&&(K.prototype[Vf]=Jn.toIterator);const Fl=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}},Hf=Symbol("breadcrumbKey"),Nb=ke({separator:{type:String,default:"/"},separatorIcon:{type:qi}}),zb=["aria-label"],Vb=wt({name:"ElBreadcrumb"}),Ub=wt({...Vb,props:Nb,setup(t){const e=t,{t:n}=Ki(),i=$t("breadcrumb"),o=ct();return ln(Hf,e),Lt(()=>{const l=o.value.querySelectorAll(".".concat(i.e("item")));l.length&&l[l.length-1].setAttribute("aria-current","page")}),(l,f)=>(tt(),ot("div",{ref_key:"breadcrumb",ref:o,class:dt(I(i).b()),"aria-label":I(n)("el.breadcrumb.label"),role:"navigation"},[Rt(l.$slots,"default")],10,zb))}});var Hb=re(Ub,[["__file","breadcrumb.vue"]]);const Gb=ke({to:{type:Ce([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Yb=wt({name:"ElBreadcrumbItem"});var Gf=re(wt({...Yb,props:Gb,setup(t){const e=t,n=ue(),i=Ft(Hf,void 0),o=$t("breadcrumb"),l=n.appContext.config.globalProperties.$router,f=ct(),A=()=>{e.to&&l&&(e.replace?l.replace(e.to):l.push(e.to))};return(m,w)=>{var x,E;return tt(),ot("span",{class:dt(I(o).e("item"))},[G("span",{ref_key:"link",ref:f,class:dt([I(o).e("inner"),I(o).is("link",!!m.to)]),role:"link",onClick:A},[Rt(m.$slots,"default")],2),(x=I(i))!=null&&x.separatorIcon?(tt(),xt(I(ne),{key:0,class:dt(I(o).e("separator"))},{default:nt(()=>[(tt(),xt(Xe(I(i).separatorIcon)))]),_:1},8,["class"])):(tt(),ot("span",{key:1,class:dt(I(o).e("separator")),role:"presentation"},Et((E=I(i))==null?void 0:E.separator),3))],2)}}}),[["__file","breadcrumb-item.vue"]]);const Wb=sn(Hb,{BreadcrumbItem:Gf}),Xb=Ji(Gf);var Yf={exports:{}};Yf.exports=function(){var t=1e3,e=6e4,n=36e5,i="millisecond",o="second",l="minute",f="hour",A="day",m="week",w="month",x="quarter",E="year",T="date",O="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var c=["th","st","nd","rd"],p=a%100;return"["+a+(c[(p-20)%10]||c[p]||c[0])+"]"}},R=function(a,c,p){var g=String(a);return!g||g.length>=c?a:""+Array(c+1-g.length).join(p)+a},V={s:R,z:function(a){var c=-a.utcOffset(),p=Math.abs(c),g=Math.floor(p/60),v=p%60;return(c<=0?"+":"-")+R(g,2,"0")+":"+R(v,2,"0")},m:function a(c,p){if(c.date()<p.date())return-a(p,c);var g=12*(p.year()-c.year())+(p.month()-c.month()),v=c.clone().add(g,w),y=p-v<0,_=c.clone().add(g+(y?-1:1),w);return+(-(g+(p-v)/(y?v-_:_-v))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:w,y:E,w:m,d:A,D:T,h:f,m:l,s:o,ms:i,Q:x}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},b="en",Y={};Y[b]=Q;var rt="$isDayjsObject",q=function(a){return a instanceof d||!(!a||!a[rt])},h=function a(c,p,g){var v;if(!c)return b;if(typeof c=="string"){var y=c.toLowerCase();Y[y]&&(v=y),p&&(Y[y]=p,v=y);var _=c.split("-");if(!v&&_.length>1)return a(_[0])}else{var B=c.name;Y[B]=c,v=B}return!g&&v&&(b=v),v||!g&&b},s=function(a,c){if(q(a))return a.clone();var p=typeof c=="object"?c:{};return p.date=a,p.args=arguments,new d(p)},u=V;u.l=h,u.i=q,u.w=function(a,c){return s(a,{locale:c.$L,utc:c.$u,x:c.$x,$offset:c.$offset})};var d=function(){function a(p){this.$L=h(p.locale,null,!0),this.parse(p),this.$x=this.$x||p.x||{},this[rt]=!0}var c=a.prototype;return c.parse=function(p){this.$d=function(g){var v=g.date,y=g.utc;if(v===null)return new Date(NaN);if(u.u(v))return new Date;if(v instanceof Date)return new Date(v);if(typeof v=="string"&&!/Z$/i.test(v)){var _=v.match(k);if(_){var B=_[2]-1||0,N=(_[7]||"0").substring(0,3);return y?new Date(Date.UTC(_[1],B,_[3]||1,_[4]||0,_[5]||0,_[6]||0,N)):new Date(_[1],B,_[3]||1,_[4]||0,_[5]||0,_[6]||0,N)}}return new Date(v)}(p),this.init()},c.init=function(){var p=this.$d;this.$y=p.getFullYear(),this.$M=p.getMonth(),this.$D=p.getDate(),this.$W=p.getDay(),this.$H=p.getHours(),this.$m=p.getMinutes(),this.$s=p.getSeconds(),this.$ms=p.getMilliseconds()},c.$utils=function(){return u},c.isValid=function(){return this.$d.toString()!==O},c.isSame=function(p,g){var v=s(p);return this.startOf(g)<=v&&v<=this.endOf(g)},c.isAfter=function(p,g){return s(p)<this.startOf(g)},c.isBefore=function(p,g){return this.endOf(g)<s(p)},c.$g=function(p,g,v){return u.u(p)?this[g]:this.set(v,p)},c.unix=function(){return Math.floor(this.valueOf()/1e3)},c.valueOf=function(){return this.$d.getTime()},c.startOf=function(p,g){var v=this,y=!!u.u(g)||g,_=u.p(p),B=function(W,$){var M=u.w(v.$u?Date.UTC(v.$y,$,W):new Date(v.$y,$,W),v);return y?M:M.endOf(A)},N=function(W,$){return u.w(v.toDate()[W].apply(v.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice($)),v)},L=this.$W,C=this.$M,D=this.$D,F="set"+(this.$u?"UTC":"");switch(_){case E:return y?B(1,0):B(31,11);case w:return y?B(1,C):B(0,C+1);case m:var j=this.$locale().weekStart||0,U=(L<j?L+7:L)-j;return B(y?D-U:D+(6-U),C);case A:case T:return N(F+"Hours",0);case f:return N(F+"Minutes",1);case l:return N(F+"Seconds",2);case o:return N(F+"Milliseconds",3);default:return this.clone()}},c.endOf=function(p){return this.startOf(p,!1)},c.$set=function(p,g){var v,y=u.p(p),_="set"+(this.$u?"UTC":""),B=(v={},v[A]=_+"Date",v[T]=_+"Date",v[w]=_+"Month",v[E]=_+"FullYear",v[f]=_+"Hours",v[l]=_+"Minutes",v[o]=_+"Seconds",v[i]=_+"Milliseconds",v)[y],N=y===A?this.$D+(g-this.$W):g;if(y===w||y===E){var L=this.clone().set(T,1);L.$d[B](N),L.init(),this.$d=L.set(T,Math.min(this.$D,L.daysInMonth())).$d}else B&&this.$d[B](N);return this.init(),this},c.set=function(p,g){return this.clone().$set(p,g)},c.get=function(p){return this[u.p(p)]()},c.add=function(p,g){var v,y=this;p=Number(p);var _=u.p(g),B=function(C){var D=s(y);return u.w(D.date(D.date()+Math.round(C*p)),y)};if(_===w)return this.set(w,this.$M+p);if(_===E)return this.set(E,this.$y+p);if(_===A)return B(1);if(_===m)return B(7);var N=(v={},v[l]=e,v[f]=n,v[o]=t,v)[_]||1,L=this.$d.getTime()+p*N;return u.w(L,this)},c.subtract=function(p,g){return this.add(-1*p,g)},c.format=function(p){var g=this,v=this.$locale();if(!this.isValid())return v.invalidDate||O;var y=p||"YYYY-MM-DDTHH:mm:ssZ",_=u.z(this),B=this.$H,N=this.$m,L=this.$M,C=v.weekdays,D=v.months,F=v.meridiem,j=function($,M,P,z){return $&&($[M]||$(g,y))||P[M].slice(0,z)},U=function($){return u.s(B%12||12,$,"0")},W=F||function($,M,P){var z=$<12?"AM":"PM";return P?z.toLowerCase():z};return y.replace(S,function($,M){return M||function(P){switch(P){case"YY":return String(g.$y).slice(-2);case"YYYY":return u.s(g.$y,4,"0");case"M":return L+1;case"MM":return u.s(L+1,2,"0");case"MMM":return j(v.monthsShort,L,D,3);case"MMMM":return j(D,L);case"D":return g.$D;case"DD":return u.s(g.$D,2,"0");case"d":return String(g.$W);case"dd":return j(v.weekdaysMin,g.$W,C,2);case"ddd":return j(v.weekdaysShort,g.$W,C,3);case"dddd":return C[g.$W];case"H":return String(B);case"HH":return u.s(B,2,"0");case"h":return U(1);case"hh":return U(2);case"a":return W(B,N,!0);case"A":return W(B,N,!1);case"m":return String(N);case"mm":return u.s(N,2,"0");case"s":return String(g.$s);case"ss":return u.s(g.$s,2,"0");case"SSS":return u.s(g.$ms,3,"0");case"Z":return _}return null}($)||_.replace(":","")})},c.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},c.diff=function(p,g,v){var y,_=this,B=u.p(g),N=s(p),L=(N.utcOffset()-this.utcOffset())*e,C=this-N,D=function(){return u.m(_,N)};switch(B){case E:y=D()/12;break;case w:y=D();break;case x:y=D()/3;break;case m:y=(C-L)/6048e5;break;case A:y=(C-L)/864e5;break;case f:y=C/n;break;case l:y=C/e;break;case o:y=C/t;break;default:y=C}return v?y:u.a(y)},c.daysInMonth=function(){return this.endOf(w).$D},c.$locale=function(){return Y[this.$L]},c.locale=function(p,g){if(!p)return this.$L;var v=this.clone(),y=h(p,g,!0);return y&&(v.$L=y),v},c.clone=function(){return u.w(this.$d,this)},c.toDate=function(){return new Date(this.valueOf())},c.toJSON=function(){return this.isValid()?this.toISOString():null},c.toISOString=function(){return this.$d.toISOString()},c.toString=function(){return this.$d.toUTCString()},a}(),r=d.prototype;return s.prototype=r,[["$ms",i],["$s",o],["$m",l],["$H",f],["$W",A],["$M",w],["$y",E],["$D",T]].forEach(function(a){r[a[1]]=function(c){return this.$g(c,a[0],a[1])}}),s.extend=function(a,c){return a.$i||(a(c,d,s),a.$i=!0),s},s.locale=h,s.isDayjs=q,s.unix=function(a){return s(1e3*a)},s.en=Y[b],s.Ls=Y,s.p={},s}();const Wf=Aa(Yf.exports),Ni=new Map;let Xf;function $f(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:x3(e.arg)&&n.push(e.arg),function(i,o){const l=e.instance.popperRef,f=i.target,A=o==null?void 0:o.target,m=!e||!e.instance,w=!f||!A,x=t.contains(f)||t.contains(A),E=t===f,T=n.length&&n.some(k=>k==null?void 0:k.contains(f))||n.length&&n.includes(A),O=l&&(l.contains(f)||l.contains(A));m||w||x||E||T||O||e.value(i,o)}}ui&&(document.addEventListener("mousedown",t=>Xf=t),document.addEventListener("mouseup",t=>{for(const e of Ni.values())for(const{documentHandler:n}of e)n(t,Xf)}));const qf={beforeMount(t,e){Ni.has(t)||Ni.set(t,[]),Ni.get(t).push({documentHandler:$f(t,e),bindingFn:e.value})},updated(t,e){Ni.has(t)||Ni.set(t,[]);const n=Ni.get(t),i=n.findIndex(l=>l.bindingFn===e.oldValue),o={documentHandler:$f(t,e),bindingFn:e.value};i>=0?n.splice(i,1,o):n.push(o)},unmounted(t){Ni.delete(t)}},$b=100,qb=600,Kf={beforeMount(t,e){const n=e.value,{interval:i=$b,delay:o=qb}=pi(n)?{}:n;let l,f;const A=()=>pi(n)?n():n.handler(),m=()=>{f&&(clearTimeout(f),f=void 0),l&&(clearInterval(l),l=void 0)};t.addEventListener("mousedown",w=>{w.button===0&&(m(),A(),document.addEventListener("mouseup",()=>m(),{once:!0}),f=setTimeout(()=>{l=setInterval(()=>{A()},i)},o))})}},Jf={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Si,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Zi(["ariaControls"])},Zf={[Kt]:t=>$e(t)||we(t)||hi(t),change:t=>$e(t)||we(t)||hi(t)},Xr=Symbol("checkboxGroupContextKey"),Kb=(t,{model:e,isLimitExceeded:n,hasOwnLabel:i,isDisabled:o,isLabeledByFormItem:l})=>{const f=Ft(Xr,void 0),{formItem:A}=Ii(),{emit:m}=ue();function w(E){var T,O,k,S;return[!0,t.trueValue,t.trueLabel].includes(E)?(O=(T=t.trueValue)!=null?T:t.trueLabel)==null||O:(S=(k=t.falseValue)!=null?k:t.falseLabel)!=null&&S}const x=ut(()=>(f==null?void 0:f.validateEvent)||t.validateEvent);return Dt(()=>t.modelValue,()=>{x.value&&(A==null||A.validate("change").catch(E=>Gn()))}),{handleChange:function(E){if(n.value)return;const T=E.target;m("change",w(T.checked),E)},onClickRoot:async function(E){!n.value&&!i.value&&!o.value&&l.value&&(E.composedPath().some(T=>T.tagName==="LABEL")||(e.value=w([!1,t.falseValue,t.falseLabel].includes(e.value)),await Qt(),function(T,O){m("change",w(T),O)}(e.value,E)))}}},tp=(t,e)=>{const{formItem:n}=Ii(),{model:i,isGroup:o,isLimitExceeded:l}=(b=>{const Y=ct(!1),{emit:rt}=ue(),q=Ft(Xr,void 0),h=ut(()=>tr(q)===!1),s=ct(!1),u=ut({get(){var d,r;return h.value?(d=q==null?void 0:q.modelValue)==null?void 0:d.value:(r=b.modelValue)!=null?r:Y.value},set(d){var r,a;h.value&&Je(d)?(s.value=((r=q==null?void 0:q.max)==null?void 0:r.value)!==void 0&&d.length>(q==null?void 0:q.max.value)&&d.length>u.value.length,s.value===!1&&((a=q==null?void 0:q.changeEvent)==null||a.call(q,d))):(rt(Kt,d),Y.value=d)}});return{model:u,isGroup:h,isLimitExceeded:s}})(t),{isFocused:f,isChecked:A,checkboxButtonSize:m,checkboxSize:w,hasOwnLabel:x,actualValue:E}=((b,Y,{model:rt})=>{const q=Ft(Xr,void 0),h=ct(!1),s=ut(()=>xo(b.value)?b.label:b.value),u=ut(()=>{const d=rt.value;return hi(d)?d:Je(d)?Mi(s.value)?d.map(Lr).some(r=>cr(r,s.value)):d.map(Lr).includes(s.value):d!=null?d===b.trueValue||d===b.trueLabel:!!d});return{checkboxButtonSize:ki(ut(()=>{var d;return(d=q==null?void 0:q.size)==null?void 0:d.value}),{prop:!0}),isChecked:u,isFocused:h,checkboxSize:ki(ut(()=>{var d;return(d=q==null?void 0:q.size)==null?void 0:d.value})),hasOwnLabel:ut(()=>!!Y.default||!xo(s.value)),actualValue:s}})(t,e,{model:i}),{isDisabled:T}=(({model:b,isChecked:Y})=>{const rt=Ft(Xr,void 0),q=ut(()=>{var h,s;const u=(h=rt==null?void 0:rt.max)==null?void 0:h.value,d=(s=rt==null?void 0:rt.min)==null?void 0:s.value;return!tr(u)&&b.value.length>=u&&!Y.value||!tr(d)&&b.value.length<=d&&Y.value});return{isDisabled:va(ut(()=>(rt==null?void 0:rt.disabled.value)||q.value)),isLimitDisabled:q}})({model:i,isChecked:A}),{inputId:O,isLabeledByFormItem:k}=Er(t,{formItemContext:n,disableIdGeneration:x,disableIdManagement:o}),{handleChange:S,onClickRoot:Q}=Kb(t,{model:i,isLimitExceeded:l,hasOwnLabel:x,isDisabled:T,isLabeledByFormItem:k});var R,V;return t.checked&&(Je(i.value)&&!i.value.includes(E.value)?i.value.push(E.value):i.value=(V=(R=t.trueValue)!=null?R:t.trueLabel)==null||V),Yn({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ut(()=>!!t.controls)),Yn({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ut(()=>o.value&&xo(t.value))),Yn({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ut(()=>!!t.trueLabel)),Yn({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ut(()=>!!t.falseLabel)),{inputId:O,isLabeledByFormItem:k,isChecked:A,isDisabled:T,isFocused:f,checkboxButtonSize:m,checkboxSize:w,hasOwnLabel:x,model:i,actualValue:E,handleChange:S,onClickRoot:Q}},Jb=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],Zb=["id","indeterminate","disabled","value","name","tabindex"],tC=wt({name:"ElCheckbox"});var eC=re(wt({...tC,props:Jf,emits:Zf,setup(t){const e=t,n=U3(),{inputId:i,isLabeledByFormItem:o,isChecked:l,isDisabled:f,isFocused:A,checkboxSize:m,hasOwnLabel:w,model:x,actualValue:E,handleChange:T,onClickRoot:O}=tp(e,n),k=$t("checkbox"),S=ut(()=>[k.b(),k.m(m.value),k.is("disabled",f.value),k.is("bordered",e.border),k.is("checked",l.value)]),Q=ut(()=>[k.e("input"),k.is("disabled",f.value),k.is("checked",l.value),k.is("indeterminate",e.indeterminate),k.is("focus",A.value)]);return(R,V)=>(tt(),xt(Xe(!I(w)&&I(o)?"span":"label"),{class:dt(I(S)),"aria-controls":R.indeterminate?R.controls||R.ariaControls:null,onClick:I(O)},{default:nt(()=>{var b,Y;return[G("span",{class:dt(I(Q))},[R.trueValue||R.falseValue||R.trueLabel||R.falseLabel?ee((tt(),ot("input",{key:0,id:I(i),"onUpdate:modelValue":V[0]||(V[0]=rt=>he(x)?x.value=rt:null),class:dt(I(k).e("original")),type:"checkbox",indeterminate:R.indeterminate,name:R.name,tabindex:R.tabindex,disabled:I(f),"true-value":(b=R.trueValue)!=null?b:R.trueLabel,"false-value":(Y=R.falseValue)!=null?Y:R.falseLabel,onChange:V[1]||(V[1]=(...rt)=>I(T)&&I(T)(...rt)),onFocus:V[2]||(V[2]=rt=>A.value=!0),onBlur:V[3]||(V[3]=rt=>A.value=!1),onClick:V[4]||(V[4]=Jt(()=>{},["stop"]))},null,42,Jb)),[[Ns,I(x)]]):ee((tt(),ot("input",{key:1,id:I(i),"onUpdate:modelValue":V[5]||(V[5]=rt=>he(x)?x.value=rt:null),class:dt(I(k).e("original")),type:"checkbox",indeterminate:R.indeterminate,disabled:I(f),value:I(E),name:R.name,tabindex:R.tabindex,onChange:V[6]||(V[6]=(...rt)=>I(T)&&I(T)(...rt)),onFocus:V[7]||(V[7]=rt=>A.value=!0),onBlur:V[8]||(V[8]=rt=>A.value=!1),onClick:V[9]||(V[9]=Jt(()=>{},["stop"]))},null,42,Zb)),[[Ns,I(x)]]),G("span",{class:dt(I(k).e("inner"))},null,2)],2),I(w)?(tt(),ot("span",{key:0,class:dt(I(k).e("label"))},[Rt(R.$slots,"default"),R.$slots.default?bt("v-if",!0):(tt(),ot(Mt,{key:0},[kt(Et(R.label),1)],64))],2)):bt("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}}),[["__file","checkbox.vue"]]);const nC=["name","tabindex","disabled","true-value","false-value"],iC=["name","tabindex","disabled","value"],rC=wt({name:"ElCheckboxButton"});var ep=re(wt({...rC,props:Jf,emits:Zf,setup(t){const e=t,n=U3(),{isFocused:i,isChecked:o,isDisabled:l,checkboxButtonSize:f,model:A,actualValue:m,handleChange:w}=tp(e,n),x=Ft(Xr,void 0),E=$t("checkbox"),T=ut(()=>{var k,S,Q,R;const V=(S=(k=x==null?void 0:x.fill)==null?void 0:k.value)!=null?S:"";return{backgroundColor:V,borderColor:V,color:(R=(Q=x==null?void 0:x.textColor)==null?void 0:Q.value)!=null?R:"",boxShadow:V?"-1px 0 0 0 ".concat(V):void 0}}),O=ut(()=>[E.b("button"),E.bm("button",f.value),E.is("disabled",l.value),E.is("checked",o.value),E.is("focus",i.value)]);return(k,S)=>{var Q,R;return tt(),ot("label",{class:dt(I(O))},[k.trueValue||k.falseValue||k.trueLabel||k.falseLabel?ee((tt(),ot("input",{key:0,"onUpdate:modelValue":S[0]||(S[0]=V=>he(A)?A.value=V:null),class:dt(I(E).be("button","original")),type:"checkbox",name:k.name,tabindex:k.tabindex,disabled:I(l),"true-value":(Q=k.trueValue)!=null?Q:k.trueLabel,"false-value":(R=k.falseValue)!=null?R:k.falseLabel,onChange:S[1]||(S[1]=(...V)=>I(w)&&I(w)(...V)),onFocus:S[2]||(S[2]=V=>i.value=!0),onBlur:S[3]||(S[3]=V=>i.value=!1),onClick:S[4]||(S[4]=Jt(()=>{},["stop"]))},null,42,nC)),[[Ns,I(A)]]):ee((tt(),ot("input",{key:1,"onUpdate:modelValue":S[5]||(S[5]=V=>he(A)?A.value=V:null),class:dt(I(E).be("button","original")),type:"checkbox",name:k.name,tabindex:k.tabindex,disabled:I(l),value:I(m),onChange:S[6]||(S[6]=(...V)=>I(w)&&I(w)(...V)),onFocus:S[7]||(S[7]=V=>i.value=!0),onBlur:S[8]||(S[8]=V=>i.value=!1),onClick:S[9]||(S[9]=Jt(()=>{},["stop"]))},null,42,iC)),[[Ns,I(A)]]),k.$slots.default||k.label?(tt(),ot("span",{key:2,class:dt(I(E).be("button","inner")),style:qt(I(o)?I(T):void 0)},[Rt(k.$slots,"default",{},()=>[kt(Et(k.label),1)])],6)):bt("v-if",!0)],2)}}}),[["__file","checkbox-button.vue"]]);const oC=ke({modelValue:{type:Ce(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Si,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Zi(["ariaLabel"])}),aC={[Kt]:t=>Je(t),change:t=>Je(t)},sC=wt({name:"ElCheckboxGroup"});var np=re(wt({...sC,props:oC,emits:aC,setup(t,{emit:e}){const n=t,i=$t("checkbox"),{formItem:o}=Ii(),{inputId:l,isLabeledByFormItem:f}=Er(n,{formItemContext:o}),A=async w=>{e(Kt,w),await Qt(),e("change",w)},m=ut({get:()=>n.modelValue,set(w){A(w)}});return ln(Xr,{..._r(Qi(n),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:m,changeEvent:A}),Yn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},ut(()=>!!n.label)),Dt(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(w=>Gn()))}),(w,x)=>{var E;return tt(),xt(Xe(w.tag),{id:I(l),class:dt(I(i).b("group")),role:"group","aria-label":I(f)?void 0:w.label||w.ariaLabel||"checkbox-group","aria-labelledby":I(f)?(E=I(o))==null?void 0:E.labelId:void 0},{default:nt(()=>[Rt(w.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}}),[["__file","checkbox-group.vue"]]);const ip=sn(eC,{CheckboxButton:ep,CheckboxGroup:np});Ji(ep),Ji(np);const rp=ke({modelValue:{type:[String,Number,Boolean],default:void 0},size:Si,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),lC=ke({...rp,border:Boolean}),op={[Kt]:t=>$e(t)||we(t)||hi(t),[_n]:t=>$e(t)||we(t)||hi(t)},ap=Symbol("radioGroupKey"),sp=(t,e)=>{const n=ct(),i=Ft(ap,void 0),o=ut(()=>!!i),l=ut(()=>xo(t.value)?t.label:t.value),f=ut({get:()=>o.value?i.modelValue:t.modelValue,set(E){o.value?i.changeEvent(E):e&&e(Kt,E),n.value.checked=t.modelValue===l.value}}),A=ki(ut(()=>i==null?void 0:i.size)),m=va(ut(()=>i==null?void 0:i.disabled)),w=ct(!1),x=ut(()=>m.value||o.value&&f.value!==l.value?-1:0);return Yn({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},ut(()=>o.value&&xo(t.value))),{radioRef:n,isGroup:o,radioGroup:i,focus:w,size:A,disabled:m,tabIndex:x,modelValue:f,actualValue:l}},cC=["value","name","disabled"],uC=wt({name:"ElRadio"}),hC=wt({...uC,props:lC,emits:op,setup(t,{emit:e}){const n=t,i=$t("radio"),{radioRef:o,radioGroup:l,focus:f,size:A,disabled:m,modelValue:w,actualValue:x}=sp(n,e);function E(){Qt(()=>e("change",w.value))}return(T,O)=>{var k;return tt(),ot("label",{class:dt([I(i).b(),I(i).is("disabled",I(m)),I(i).is("focus",I(f)),I(i).is("bordered",T.border),I(i).is("checked",I(w)===I(x)),I(i).m(I(A))])},[G("span",{class:dt([I(i).e("input"),I(i).is("disabled",I(m)),I(i).is("checked",I(w)===I(x))])},[ee(G("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":O[0]||(O[0]=S=>he(w)?w.value=S:null),class:dt(I(i).e("original")),value:I(x),name:T.name||((k=I(l))==null?void 0:k.name),disabled:I(m),type:"radio",onFocus:O[1]||(O[1]=S=>f.value=!0),onBlur:O[2]||(O[2]=S=>f.value=!1),onChange:E,onClick:O[3]||(O[3]=Jt(()=>{},["stop"]))},null,42,cC),[[H3,I(w)]]),G("span",{class:dt(I(i).e("inner"))},null,2)],2),G("span",{class:dt(I(i).e("label")),onKeydown:O[4]||(O[4]=Jt(()=>{},["stop"]))},[Rt(T.$slots,"default",{},()=>[kt(Et(T.label),1)])],34)],2)}}});var dC=re(hC,[["__file","radio.vue"]]);const fC=ke({...rp}),pC=["value","name","disabled"],gC=wt({name:"ElRadioButton"}),vC=wt({...gC,props:fC,setup(t){const e=t,n=$t("radio"),{radioRef:i,focus:o,size:l,disabled:f,modelValue:A,radioGroup:m,actualValue:w}=sp(e),x=ut(()=>({backgroundColor:(m==null?void 0:m.fill)||"",borderColor:(m==null?void 0:m.fill)||"",boxShadow:m!=null&&m.fill?"-1px 0 0 0 ".concat(m.fill):"",color:(m==null?void 0:m.textColor)||""}));return(E,T)=>{var O;return tt(),ot("label",{class:dt([I(n).b("button"),I(n).is("active",I(A)===I(w)),I(n).is("disabled",I(f)),I(n).is("focus",I(o)),I(n).bm("button",I(l))])},[ee(G("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":T[0]||(T[0]=k=>he(A)?A.value=k:null),class:dt(I(n).be("button","original-radio")),value:I(w),type:"radio",name:E.name||((O=I(m))==null?void 0:O.name),disabled:I(f),onFocus:T[1]||(T[1]=k=>o.value=!0),onBlur:T[2]||(T[2]=k=>o.value=!1),onClick:T[3]||(T[3]=Jt(()=>{},["stop"]))},null,42,pC),[[H3,I(A)]]),G("span",{class:dt(I(n).be("button","inner")),style:qt(I(A)===I(w)?I(x):{}),onKeydown:T[4]||(T[4]=Jt(()=>{},["stop"]))},[Rt(E.$slots,"default",{},()=>[kt(Et(E.label),1)])],38)],2)}}});var lp=re(vC,[["__file","radio-button.vue"]]);const AC=ke({id:{type:String,default:void 0},size:Si,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Zi(["ariaLabel"])}),mC=op,yC=["id","aria-label","aria-labelledby"],bC=wt({name:"ElRadioGroup"}),CC=wt({...bC,props:AC,emits:mC,setup(t,{emit:e}){const n=t,i=$t("radio"),o=lh(),l=ct(),{formItem:f}=Ii(),{inputId:A,isLabeledByFormItem:m}=Er(n,{formItemContext:f});Lt(()=>{const x=l.value.querySelectorAll("[type=radio]"),E=x[0];!Array.from(x).some(T=>T.checked)&&E&&(E.tabIndex=0)});const w=ut(()=>n.name||o.value);return ln(ap,Zt({...Qi(n),changeEvent:x=>{e(Kt,x),Qt(()=>e("change",x))},name:w})),Dt(()=>n.modelValue,()=>{n.validateEvent&&(f==null||f.validate("change").catch(x=>Gn()))}),Yn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},ut(()=>!!n.label)),(x,E)=>(tt(),ot("div",{id:I(A),ref_key:"radioGroupRef",ref:l,class:dt(I(i).b("group")),role:"radiogroup","aria-label":I(m)?void 0:x.label||x.ariaLabel||"radio-group","aria-labelledby":I(m)?I(f).labelId:void 0},[Rt(x.$slots,"default")],10,yC))}});var cp=re(CC,[["__file","radio-group.vue"]]);const wC=sn(dC,{RadioButton:lp,RadioGroup:cp}),Rl=Ji(cp),up=Ji(lp),Nl=ke({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:dB},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),xC={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},_C=wt({name:"ElTag"}),EC=wt({..._C,props:Nl,emits:xC,setup(t,{emit:e}){const n=t,i=ki(),o=$t("tag"),l=ut(()=>{const{type:m,hit:w,effect:x,closable:E,round:T}=n;return[o.b(),o.is("closable",E),o.m(m||"primary"),o.m(i.value),o.m(x),o.is("hit",w),o.is("round",T)]}),f=m=>{e("close",m)},A=m=>{e("click",m)};return(m,w)=>m.disableTransitions?(tt(),ot("span",{key:0,class:dt(I(l)),style:qt({backgroundColor:m.color}),onClick:A},[G("span",{class:dt(I(o).e("content"))},[Rt(m.$slots,"default")],2),m.closable?(tt(),xt(I(ne),{key:0,class:dt(I(o).e("close")),onClick:Jt(f,["stop"])},{default:nt(()=>[H(I(Qs))]),_:1},8,["class","onClick"])):bt("v-if",!0)],6)):(tt(),xt(bh,{key:1,name:"".concat(I(o).namespace.value,"-zoom-in-center"),appear:""},{default:nt(()=>[G("span",{class:dt(I(l)),style:qt({backgroundColor:m.color}),onClick:A},[G("span",{class:dt(I(o).e("content"))},[Rt(m.$slots,"default")],2),m.closable?(tt(),xt(I(ne),{key:0,class:dt(I(o).e("close")),onClick:Jt(f,["stop"])},{default:nt(()=>[H(I(Qs))]),_:1},8,["class","onClick"])):bt("v-if",!0)],6)]),_:3},8,["name"]))}}),SC=sn(re(EC,[["__file","tag.vue"]])),hp=Symbol("rowContextKey"),IC=ke({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between","space-evenly"],default:"start"},align:{type:String,values:["top","middle","bottom"]}}),kC=wt({name:"ElRow"}),ur=sn(re(wt({...kC,props:IC,setup(t){const e=t,n=$t("row"),i=ut(()=>e.gutter);ln(hp,{gutter:i});const o=ut(()=>{const f={};return e.gutter&&(f.marginRight=f.marginLeft="-".concat(e.gutter/2,"px")),f}),l=ut(()=>[n.b(),n.is("justify-".concat(e.justify),e.justify!=="start"),n.is("align-".concat(e.align),!!e.align)]);return(f,A)=>(tt(),xt(Xe(f.tag),{class:dt(I(l)),style:qt(I(o))},{default:nt(()=>[Rt(f.$slots,"default")]),_:3},8,["class","style"]))}}),[["__file","row.vue"]])),BC=ke({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Ce([Number,Object]),default:()=>er({})},sm:{type:Ce([Number,Object]),default:()=>er({})},md:{type:Ce([Number,Object]),default:()=>er({})},lg:{type:Ce([Number,Object]),default:()=>er({})},xl:{type:Ce([Number,Object]),default:()=>er({})}}),OC=wt({name:"ElCol"}),TC=wt({...OC,props:BC,setup(t){const e=t,{gutter:n}=Ft(hp,{gutter:ut(()=>0)}),i=$t("col"),o=ut(()=>{const f={};return n.value&&(f.paddingLeft=f.paddingRight=n.value/2+"px"),f}),l=ut(()=>{const f=[];return["span","offset","pull","push"].forEach(A=>{const m=e[A];we(m)&&(A==="span"?f.push(i.b("".concat(e[A]))):m>0&&f.push(i.b("".concat(A,"-").concat(e[A]))))}),["xs","sm","md","lg","xl"].forEach(A=>{we(e[A])?f.push(i.b("".concat(A,"-").concat(e[A]))):Mi(e[A])&&Object.entries(e[A]).forEach(([m,w])=>{f.push(m!=="span"?i.b("".concat(A,"-").concat(m,"-").concat(w)):i.b("".concat(A,"-").concat(w)))})}),n.value&&f.push(i.is("guttered")),[i.b(),f]});return(f,A)=>(tt(),xt(Xe(f.tag),{class:dt(I(l)),style:qt(I(o))},{default:nt(()=>[Rt(f.$slots,"default")]),_:3},8,["class","style"]))}}),hr=sn(re(TC,[["__file","col.vue"]])),dp=t=>we(t)||$e(t)||Je(t),DC=ke({accordion:Boolean,modelValue:{type:Ce([Array,String,Number]),default:()=>er([])}}),MC={[Kt]:dp,[_n]:dp},fp=Symbol("collapseContextKey"),QC=wt({name:"ElCollapse"}),LC=wt({...QC,props:DC,emits:MC,setup(t,{expose:e,emit:n}){const i=t,{activeNames:o,setActiveNames:l}=((A,m)=>{const w=ct(Ms(A.modelValue)),x=E=>{w.value=E;const T=A.accordion?w.value[0]:w.value;m(Kt,T),m(_n,T)};return Dt(()=>A.modelValue,()=>w.value=Ms(A.modelValue),{deep:!0}),ln(fp,{activeNames:w,handleItemClick:E=>{if(A.accordion)x([w.value[0]===E?"":E]);else{const T=[...w.value],O=T.indexOf(E);O>-1?T.splice(O,1):T.push(E),x(T)}}}),{activeNames:w,setActiveNames:x}})(i,n),{rootKls:f}=(()=>{const A=$t("collapse");return{rootKls:ut(()=>A.b())}})();return e({activeNames:o,setActiveNames:l}),(A,m)=>(tt(),ot("div",{class:dt(I(f))},[Rt(A.$slots,"default")],2))}});var PC=re(LC,[["__file","collapse.vue"]]);const jC=wt({name:"ElCollapseTransition"}),FC=wt({...jC,setup(t){const e=$t("collapse-transition"),n=o=>{o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom},i={beforeEnter(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.height&&(o.dataset.elExistsHeight=o.style.height),o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0},enter(o){requestAnimationFrame(()=>{o.dataset.oldOverflow=o.style.overflow,o.dataset.elExistsHeight?o.style.maxHeight=o.dataset.elExistsHeight:o.scrollHeight!==0?o.style.maxHeight="".concat(o.scrollHeight,"px"):o.style.maxHeight=0,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom,o.style.overflow="hidden"})},afterEnter(o){o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow},enterCancelled(o){n(o)},beforeLeave(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.maxHeight="".concat(o.scrollHeight,"px"),o.style.overflow="hidden"},leave(o){o.scrollHeight!==0&&(o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){n(o)},leaveCancelled(o){n(o)}};return(o,l)=>(tt(),xt(bh,ar({name:I(e).b()},l9(i)),{default:nt(()=>[Rt(o.$slots,"default")]),_:3},16,["name"]))}});var Va=re(FC,[["__file","collapse-transition.vue"]]);Va.install=t=>{t.component(Va.name,Va)};const pp=Va,RC=ke({title:{type:String,default:""},name:{type:Ce([String,Number]),default:void 0},disabled:Boolean}),NC=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],zC=["id","aria-hidden","aria-labelledby"],VC=wt({name:"ElCollapseItem"}),UC=wt({...VC,props:RC,setup(t,{expose:e}){const n=t,{focusing:i,id:o,isActive:l,handleFocus:f,handleHeaderClick:A,handleEnterClick:m}=(Q=>{const R=Ft(fp),{namespace:V}=$t("collapse"),b=ct(!1),Y=ct(!1),rt=fB(),q=ut(()=>rt.current++),h=ut(()=>{var u;return(u=Q.name)!=null?u:"".concat(V.value,"-id-").concat(rt.prefix,"-").concat(I(q))}),s=ut(()=>R==null?void 0:R.activeNames.value.includes(I(h)));return{focusing:b,id:q,isActive:s,handleFocus:()=>{setTimeout(()=>{Y.value?Y.value=!1:b.value=!0},50)},handleHeaderClick:()=>{Q.disabled||(R==null||R.handleItemClick(I(h)),b.value=!1,Y.value=!0)},handleEnterClick:()=>{R==null||R.handleItemClick(I(h))}}})(n),{arrowKls:w,headKls:x,rootKls:E,itemWrapperKls:T,itemContentKls:O,scopedContentId:k,scopedHeadId:S}=((Q,{focusing:R,isActive:V,id:b})=>{const Y=$t("collapse"),rt=ut(()=>[Y.b("item"),Y.is("active",I(V)),Y.is("disabled",Q.disabled)]),q=ut(()=>[Y.be("item","header"),Y.is("active",I(V)),{focusing:I(R)&&!Q.disabled}]);return{arrowKls:ut(()=>[Y.be("item","arrow"),Y.is("active",I(V))]),headKls:q,rootKls:rt,itemWrapperKls:ut(()=>Y.be("item","wrap")),itemContentKls:ut(()=>Y.be("item","content")),scopedContentId:ut(()=>Y.b("content-".concat(I(b)))),scopedHeadId:ut(()=>Y.b("head-".concat(I(b))))}})(n,{focusing:i,isActive:l,id:o});return e({isActive:l}),(Q,R)=>(tt(),ot("div",{class:dt(I(E))},[G("button",{id:I(S),class:dt(I(x)),"aria-expanded":I(l),"aria-controls":I(k),"aria-describedby":I(k),tabindex:Q.disabled?-1:0,type:"button",onClick:R[0]||(R[0]=(...V)=>I(A)&&I(A)(...V)),onKeydown:R[1]||(R[1]=cn(Jt((...V)=>I(m)&&I(m)(...V),["stop","prevent"]),["space","enter"])),onFocus:R[2]||(R[2]=(...V)=>I(f)&&I(f)(...V)),onBlur:R[3]||(R[3]=V=>i.value=!1)},[Rt(Q.$slots,"title",{},()=>[kt(Et(Q.title),1)]),H(I(ne),{class:dt(I(w))},{default:nt(()=>[H(I(_3))]),_:1},8,["class"])],42,NC),H(I(pp),null,{default:nt(()=>[ee(G("div",{id:I(k),role:"region",class:dt(I(T)),"aria-hidden":!I(l),"aria-labelledby":I(S)},[G("div",{class:dt(I(O))},[Rt(Q.$slots,"default")],2)],10,zC),[[Me,I(l)]])]),_:3})],2))}});var gp=re(UC,[["__file","collapse-item.vue"]]);const HC=sn(PC,{CollapseItem:gp}),GC=Ji(gp),YC=ke({color:{type:Ce(Object),required:!0},vertical:{type:Boolean,default:!1}});let zl=!1;function jo(t,e){if(!ui)return;const n=function(l){var f;(f=e.drag)==null||f.call(e,l)},i=function(l){var f;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,zl=!1,(f=e.end)==null||f.call(e,l)},o=function(l){var f;zl||(l.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),document.addEventListener("touchmove",n),document.addEventListener("touchend",i),zl=!0,(f=e.start)==null||f.call(e,l))};t.addEventListener("mousedown",o),t.addEventListener("touchstart",o)}const WC=(t,{bar:e,thumb:n,handleDrag:i})=>{const o=ue(),l=$t("color-alpha-slider"),f=ct(0),A=ct(0),m=ct();function w(){f.value=function(){if(!n.value||t.vertical)return 0;const O=o.vnode.el,k=t.color.get("alpha");return O?Math.round(k*(O.offsetWidth-n.value.offsetWidth/2)/100):0}(),A.value=function(){if(!n.value)return 0;const O=o.vnode.el;if(!t.vertical)return 0;const k=t.color.get("alpha");return O?Math.round(k*(O.offsetHeight-n.value.offsetHeight/2)/100):0}(),m.value=function(){if(t.color&&t.color.value){const{r:O,g:k,b:S}=t.color.toRgb();return"linear-gradient(to right, rgba(".concat(O,", ").concat(k,", ").concat(S,", 0) 0%, rgba(").concat(O,", ").concat(k,", ").concat(S,", 1) 100%)")}return""}()}Lt(()=>{if(!e.value||!n.value)return;const O={drag:k=>{i(k)},end:k=>{i(k)}};jo(e.value,O),jo(n.value,O),w()}),Dt(()=>t.color.get("alpha"),()=>w()),Dt(()=>t.color.value,()=>w());const x=ut(()=>[l.b(),l.is("vertical",t.vertical)]),E=ut(()=>l.e("bar")),T=ut(()=>l.e("thumb"));return{rootKls:x,barKls:E,barStyle:ut(()=>({background:m.value})),thumbKls:T,thumbStyle:ut(()=>({left:Ls(f.value),top:Ls(A.value)})),update:w}},XC=wt({name:"ElColorAlphaSlider"}),$C=wt({...XC,props:YC,setup(t,{expose:e}){const n=t,{bar:i,thumb:o,handleDrag:l,handleClick:f}=(O=>{const k=ue(),S=Io(),Q=Io();function R(V){if(!Q.value||!S.value)return;const b=k.vnode.el.getBoundingClientRect(),{clientX:Y,clientY:rt}=Fl(V);if(O.vertical){let q=rt-b.top;q=Math.max(S.value.offsetHeight/2,q),q=Math.min(q,b.height-S.value.offsetHeight/2),O.color.set("alpha",Math.round((q-S.value.offsetHeight/2)/(b.height-S.value.offsetHeight)*100))}else{let q=Y-b.left;q=Math.max(S.value.offsetWidth/2,q),q=Math.min(q,b.width-S.value.offsetWidth/2),O.color.set("alpha",Math.round((q-S.value.offsetWidth/2)/(b.width-S.value.offsetWidth)*100))}}return{thumb:S,bar:Q,handleDrag:R,handleClick:function(V){V.target!==S.value&&R(V)}}})(n),{rootKls:A,barKls:m,barStyle:w,thumbKls:x,thumbStyle:E,update:T}=WC(n,{bar:i,thumb:o,handleDrag:l});return e({update:T,bar:i,thumb:o}),(O,k)=>(tt(),ot("div",{class:dt(I(A))},[G("div",{ref_key:"bar",ref:i,class:dt(I(m)),style:qt(I(w)),onClick:k[0]||(k[0]=(...S)=>I(f)&&I(f)(...S))},null,6),G("div",{ref_key:"thumb",ref:o,class:dt(I(x)),style:qt(I(E))},null,6)],2))}});var qC=re($C,[["__file","alpha-slider.vue"]]);const KC=wt({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=$t("color-hue-slider"),n=ue(),i=ct(),o=ct(),l=ct(0),f=ct(0),A=ut(()=>t.color.get("hue"));function m(x){if(!o.value||!i.value)return;const E=n.vnode.el.getBoundingClientRect(),{clientX:T,clientY:O}=Fl(x);let k;if(t.vertical){let S=O-E.top;S=Math.min(S,E.height-i.value.offsetHeight/2),S=Math.max(i.value.offsetHeight/2,S),k=Math.round((S-i.value.offsetHeight/2)/(E.height-i.value.offsetHeight)*360)}else{let S=T-E.left;S=Math.min(S,E.width-i.value.offsetWidth/2),S=Math.max(i.value.offsetWidth/2,S),k=Math.round((S-i.value.offsetWidth/2)/(E.width-i.value.offsetWidth)*360)}t.color.set("hue",k)}function w(){l.value=function(){if(!i.value)return 0;const x=n.vnode.el;if(t.vertical)return 0;const E=t.color.get("hue");return x?Math.round(E*(x.offsetWidth-i.value.offsetWidth/2)/360):0}(),f.value=function(){if(!i.value)return 0;const x=n.vnode.el;if(!t.vertical)return 0;const E=t.color.get("hue");return x?Math.round(E*(x.offsetHeight-i.value.offsetHeight/2)/360):0}()}return Dt(()=>A.value,()=>{w()}),Lt(()=>{if(!o.value||!i.value)return;const x={drag:E=>{m(E)},end:E=>{m(E)}};jo(o.value,x),jo(i.value,x),w()}),{bar:o,thumb:i,thumbLeft:l,thumbTop:f,hueValue:A,handleClick:function(x){x.target!==i.value&&m(x)},update:w,ns:e}}});var JC=re(KC,[["render",function(t,e,n,i,o,l){return tt(),ot("div",{class:dt([t.ns.b(),t.ns.is("vertical",t.vertical)])},[G("div",{ref:"bar",class:dt(t.ns.e("bar")),onClick:e[0]||(e[0]=(...f)=>t.handleClick&&t.handleClick(...f))},null,2),G("div",{ref:"thumb",class:dt(t.ns.e("thumb")),style:qt({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}],["__file","hue-slider.vue"]]);const ZC=ke({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Si,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:di.teleported,predefine:{type:Ce(Array)},validateEvent:{type:Boolean,default:!0},...Zi(["ariaLabel"])}),tw={[Kt]:t=>$e(t)||Ei(t),[_n]:t=>$e(t)||Ei(t),activeChange:t=>$e(t)||Ei(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},vp=Symbol("colorPickerContextKey"),Ap=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},$r=function(t,e){var n;typeof(n=t)=="string"&&n.includes(".")&&Number.parseFloat(n)===1&&(t="100%");const i=function(o){return typeof o=="string"&&o.includes("%")}(t);return t=Math.min(e,Math.max(0,Number.parseFloat("".concat(t)))),i&&(t=Number.parseInt(""+t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},mp={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Ua=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return"".concat(mp[e]||e).concat(mp[n]||n)},yp=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":"#".concat(Ua(t)).concat(Ua(e)).concat(Ua(n))},Vl={A:10,B:11,C:12,D:13,E:14,F:15},dr=function(t){return t.length===2?16*(Vl[t[0].toUpperCase()]||+t[0])+(Vl[t[1].toUpperCase()]||+t[1]):Vl[t[1].toUpperCase()]||+t[1]},bp=(t,e,n)=>{t=$r(t,255),e=$r(e,255),n=$r(n,255);const i=Math.max(t,e,n),o=Math.min(t,e,n);let l;const f=i,A=i-o,m=i===0?0:A/i;if(i===o)l=0;else{switch(i){case t:l=(e-n)/A+(e<n?6:0);break;case e:l=(n-t)/A+2;break;case n:l=(t-e)/A+4}l/=6}return{h:360*l,s:100*m,v:100*f}},Fo=function(t,e,n){t=6*$r(t,360),e=$r(e,100),n=$r(n,100);const i=Math.floor(t),o=t-i,l=n*(1-e),f=n*(1-o*e),A=n*(1-(1-o)*e),m=i%6,w=[n,f,l,l,A,n][m],x=[A,n,n,f,l,l][m],E=[l,l,A,n,n,f][m];return{r:Math.round(255*w),g:Math.round(255*x),b:Math.round(255*E)}};class Ro{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)ma(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length!==1||typeof e!="object")this["_".concat(e)]=n,this.doOnChange();else for(const i in e)ma(e,i)&&this.set(i,e[i])}get(e){return e==="alpha"?Math.floor(this["_".concat(e)]):this["_".concat(e)]}toRgb(){return Fo(this._hue,this._saturation,this._value)}fromString(e){if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();const n=(i,o,l)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,o)),this._value=Math.max(0,Math.min(100,l)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,l)=>l>2?Number.parseFloat(o):Number.parseInt(o,10));if(i.length===4?this._alpha=100*Number.parseFloat(i[3]):i.length===3&&(this._alpha=100),i.length>=3){const{h:o,s:l,v:f}=function(A,m,w){w/=100;let x=m/=100;const E=Math.max(w,.01);return m*=(w*=2)<=1?w:2-w,x*=E<=1?E:2-E,{h:A,s:100*(w===0?2*x/(E+x):2*m/(w+m)),v:(w+m)/2*100}}(i[0],i[1],i[2]);n(o,l,f)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,l)=>l>2?Number.parseFloat(o):Number.parseInt(o,10));i.length===4?this._alpha=100*Number.parseFloat(i[3]):i.length===3&&(this._alpha=100),i.length>=3&&n(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,l)=>l>2?Number.parseFloat(o):Number.parseInt(o,10));if(i.length===4?this._alpha=100*Number.parseFloat(i[3]):i.length===3&&(this._alpha=100),i.length>=3){const{h:o,s:l,v:f}=bp(i[0],i[1],i[2]);n(o,l,f)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let o,l,f;i.length===3?(o=dr(i[0]+i[0]),l=dr(i[1]+i[1]),f=dr(i[2]+i[2])):i.length!==6&&i.length!==8||(o=dr(i.slice(0,2)),l=dr(i.slice(2,4)),f=dr(i.slice(4,6))),i.length===8?this._alpha=dr(i.slice(6))/255*100:i.length!==3&&i.length!==6||(this._alpha=100);const{h:A,s:m,v:w}=bp(o,l,f);n(A,m,w)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:i,_alpha:o,format:l}=this;if(this.enableAlpha)switch(l){case"hsl":{const f=Ap(e,n/100,i/100);this.value="hsla(".concat(e,", ").concat(Math.round(100*f[1]),"%, ").concat(Math.round(100*f[2]),"%, ").concat(this.get("alpha")/100,")");break}case"hsv":this.value="hsva(".concat(e,", ").concat(Math.round(n),"%, ").concat(Math.round(i),"%, ").concat(this.get("alpha")/100,")");break;case"hex":this.value="".concat(yp(Fo(e,n,i))).concat(Ua(255*o/100));break;default:{const{r:f,g:A,b:m}=Fo(e,n,i);this.value="rgba(".concat(f,", ").concat(A,", ").concat(m,", ").concat(this.get("alpha")/100,")")}}else switch(l){case"hsl":{const f=Ap(e,n/100,i/100);this.value="hsl(".concat(e,", ").concat(Math.round(100*f[1]),"%, ").concat(Math.round(100*f[2]),"%)");break}case"hsv":this.value="hsv(".concat(e,", ").concat(Math.round(n),"%, ").concat(Math.round(i),"%)");break;case"rgb":{const{r:f,g:A,b:m}=Fo(e,n,i);this.value="rgb(".concat(f,", ").concat(A,", ").concat(m,")");break}default:this.value=yp(Fo(e,n,i))}}}const ew=wt({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const e=$t("color-predefine"),{currentColor:n}=Ft(vp),i=ct(o(t.colors,t.color));function o(l,f){return l.map(A=>{const m=new Ro;return m.enableAlpha=t.enableAlpha,m.format="rgba",m.fromString(A),m.selected=m.value===f.value,m})}return Dt(()=>n.value,l=>{const f=new Ro;f.fromString(l),i.value.forEach(A=>{A.selected=f.compare(A)})}),G3(()=>{i.value=o(t.colors,t.color)}),{rgbaColors:i,handleSelect:function(l){t.color.fromString(t.colors[l])},ns:e}}}),nw=["onClick"];var iw=re(ew,[["render",function(t,e,n,i,o,l){return tt(),ot("div",{class:dt(t.ns.b())},[G("div",{class:dt(t.ns.e("colors"))},[(tt(!0),ot(Mt,null,Ht(t.rgbaColors,(f,A)=>(tt(),ot("div",{key:t.colors[A],class:dt([t.ns.e("color-selector"),t.ns.is("alpha",f._alpha<100),{selected:f.selected}]),onClick:m=>t.handleSelect(A)},[G("div",{style:qt({backgroundColor:f.value})},null,4)],10,nw))),128))],2)],2)}],["__file","predefine.vue"]]);const rw=wt({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=$t("color-svpanel"),n=ue(),i=ct(0),o=ct(0),l=ct("hsl(0, 100%, 50%)"),f=ut(()=>({hue:t.color.get("hue"),value:t.color.get("value")}));function A(){const w=t.color.get("saturation"),x=t.color.get("value"),E=n.vnode.el,{clientWidth:T,clientHeight:O}=E;o.value=w*T/100,i.value=(100-x)*O/100,l.value="hsl(".concat(t.color.get("hue"),", 100%, 50%)")}function m(w){const x=n.vnode.el.getBoundingClientRect(),{clientX:E,clientY:T}=Fl(w);let O=E-x.left,k=T-x.top;O=Math.max(0,O),O=Math.min(O,x.width),k=Math.max(0,k),k=Math.min(k,x.height),o.value=O,i.value=k,t.color.set({saturation:O/x.width*100,value:100-k/x.height*100})}return Dt(()=>f.value,()=>{A()}),Lt(()=>{jo(n.vnode.el,{drag:w=>{m(w)},end:w=>{m(w)}}),A()}),{cursorTop:i,cursorLeft:o,background:l,colorValue:f,handleDrag:m,update:A,ns:e}}}),ow=[G("div",null,null,-1)];var aw=re(rw,[["render",function(t,e,n,i,o,l){return tt(),ot("div",{class:dt(t.ns.b()),style:qt({backgroundColor:t.background})},[G("div",{class:dt(t.ns.e("white"))},null,2),G("div",{class:dt(t.ns.e("black"))},null,2),G("div",{class:dt(t.ns.e("cursor")),style:qt({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},ow,6)],6)}],["__file","sv-panel.vue"]]);const sw=["onKeydown"],lw=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],cw=wt({name:"ElColorPicker"}),uw=wt({...cw,props:ZC,emits:tw,setup(t,{expose:e,emit:n}){const i=t,{t:o}=Ki(),l=$t("color"),{formItem:f}=Ii(),A=ki(),m=va(),{inputId:w,isLabeledByFormItem:x}=Er(i,{formItemContext:f}),E=ct(),T=ct(),O=ct(),k=ct(),S=ct(),Q=ct(),{isFocused:R,handleFocus:V,handleBlur:b}=E3(S,{beforeBlur($){var M;return(M=k.value)==null?void 0:M.isFocusInsideContent($)},afterBlur(){g(!1),B()}}),Y=$=>{if(m.value)return W();V($)};let rt=!0;const q=Zt(new Ro({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),h=ct(!1),s=ct(!1),u=ct(""),d=ut(()=>i.modelValue||s.value?function($,M){if(!($ instanceof Ro))throw new TypeError("color should be instance of _color Class");const{r:P,g:z,b:X}=$.toRgb();return M?"rgba(".concat(P,", ").concat(z,", ").concat(X,", ").concat($.get("alpha")/100,")"):"rgb(".concat(P,", ").concat(z,", ").concat(X,")")}(q,i.showAlpha):"transparent"),r=ut(()=>i.modelValue||s.value?q.value:""),a=ut(()=>x.value?void 0:i.label||i.ariaLabel||o("el.colorpicker.defaultLabel"));Yn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},ut(()=>!!i.label));const c=ut(()=>x.value?f==null?void 0:f.labelId:void 0),p=ut(()=>[l.b("picker"),l.is("disabled",m.value),l.bm("picker",A.value),l.is("focused",R.value)]);function g($){h.value=$}const v=be(g,100,{leading:!0});function y(){m.value||g(!0)}function _(){v(!1),B()}function B(){Qt(()=>{i.modelValue?q.fromString(i.modelValue):(q.value="",Qt(()=>{s.value=!1}))})}function N(){m.value||v(!h.value)}function L(){q.fromString(u.value)}function C(){const $=q.value;n(Kt,$),n("change",$),i.validateEvent&&(f==null||f.validate("change").catch(M=>Gn())),v(!1),Qt(()=>{const M=new Ro({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});q.compare(M)||B()})}function D(){v(!1),n(Kt,null),n("change",null),i.modelValue!==null&&i.validateEvent&&(f==null||f.validate("change").catch($=>Gn())),B()}function F($){if(h.value&&(_(),R.value)){const M=new FocusEvent("focus",$);b(M)}}function j($){$.preventDefault(),$.stopPropagation(),g(!1),B()}function U($){switch($.code){case Ue.enter:case Ue.space:$.preventDefault(),$.stopPropagation(),y(),Q.value.focus();break;case Ue.esc:j($)}}function W(){S.value.blur()}return Lt(()=>{i.modelValue&&(u.value=r.value)}),Dt(()=>i.modelValue,$=>{$?$&&$!==q.value&&(rt=!1,q.fromString($)):s.value=!1}),Dt(()=>r.value,$=>{u.value=$,rt&&n("activeChange",$),rt=!0}),Dt(()=>q.value,()=>{i.modelValue||s.value||(s.value=!0)}),Dt(()=>h.value,()=>{Qt(()=>{var $,M,P;($=E.value)==null||$.update(),(M=T.value)==null||M.update(),(P=O.value)==null||P.update()})}),ln(vp,{currentColor:r}),e({color:q,show:y,hide:_,focus:function(){S.value.focus()},blur:W}),($,M)=>(tt(),xt(I(We),{ref_key:"popper",ref:k,visible:h.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[I(l).be("picker","panel"),I(l).b("dropdown"),$.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:$.teleported,transition:"".concat(I(l).namespace.value,"-zoom-in-top"),persistent:"",onHide:M[2]||(M[2]=P=>g(!1))},{content:nt(()=>[ee((tt(),ot("div",{onKeydown:cn(j,["esc"])},[G("div",{class:dt(I(l).be("dropdown","main-wrapper"))},[H(JC,{ref_key:"hue",ref:E,class:"hue-slider",color:I(q),vertical:""},null,8,["color"]),H(aw,{ref_key:"sv",ref:T,color:I(q)},null,8,["color"])],2),$.showAlpha?(tt(),xt(qC,{key:0,ref_key:"alpha",ref:O,color:I(q)},null,8,["color"])):bt("v-if",!0),$.predefine?(tt(),xt(iw,{key:1,ref:"predefine","enable-alpha":$.showAlpha,color:I(q),colors:$.predefine},null,8,["enable-alpha","color","colors"])):bt("v-if",!0),G("div",{class:dt(I(l).be("dropdown","btns"))},[G("span",{class:dt(I(l).be("dropdown","value"))},[H(I(Be),{ref_key:"inputRef",ref:Q,modelValue:u.value,"onUpdate:modelValue":M[0]||(M[0]=P=>u.value=P),"validate-event":!1,size:"small",onKeyup:cn(L,["enter"]),onBlur:L},null,8,["modelValue","onKeyup"])],2),H(I(oe),{class:dt(I(l).be("dropdown","link-btn")),text:"",size:"small",onClick:D},{default:nt(()=>[kt(Et(I(o)("el.colorpicker.clear")),1)]),_:1},8,["class"]),H(I(oe),{plain:"",size:"small",class:dt(I(l).be("dropdown","btn")),onClick:C},{default:nt(()=>[kt(Et(I(o)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,sw)),[[I(qf),F]])]),default:nt(()=>[G("div",ar({id:I(w),ref_key:"triggerRef",ref:S},$.$attrs,{class:I(p),role:"button","aria-label":I(a),"aria-labelledby":I(c),"aria-description":I(o)("el.colorpicker.description",{color:$.modelValue||""}),"aria-disabled":I(m),tabindex:I(m)?-1:$.tabindex,onKeydown:U,onFocus:Y,onBlur:M[1]||(M[1]=(...P)=>I(b)&&I(b)(...P))}),[I(m)?(tt(),ot("div",{key:0,class:dt(I(l).be("picker","mask"))},null,2)):bt("v-if",!0),G("div",{class:dt(I(l).be("picker","trigger")),onClick:N},[G("span",{class:dt([I(l).be("picker","color"),I(l).is("alpha",$.showAlpha)])},[G("span",{class:dt(I(l).be("picker","color-inner")),style:qt({backgroundColor:I(d)})},[ee(H(I(ne),{class:dt([I(l).be("picker","icon"),I(l).is("icon-arrow-down")])},{default:nt(()=>[H(I(Sr))]),_:1},8,["class"]),[[Me,$.modelValue||s.value]]),ee(H(I(ne),{class:dt([I(l).be("picker","empty"),I(l).is("icon-close")])},{default:nt(()=>[H(I(Qs))]),_:1},8,["class"]),[[Me,!$.modelValue&&!s.value]])],6)],2)],2)],16,lw)]),_:1},8,["visible","popper-class","teleported","transition"]))}}),Ai=sn(re(uw,[["__file","color-picker.vue"]])),hw=ke({urlList:{type:Ce(Array),default:()=>er([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Ce(String)}}),dw={close:()=>!0,switch:t=>we(t),rotate:t=>we(t)},fw=["src","crossorigin"],pw=wt({name:"ElImageViewer"}),gw=wt({...pw,props:hw,emits:dw,setup(t,{expose:e,emit:n}){var i;const o=t,l={CONTAIN:{name:"contain",icon:Y3(S3)},ORIGINAL:{name:"original",icon:Y3(pB)}},{t:f}=Ki(),A=$t("image-viewer"),{nextZIndex:m}=gB(),w=ct(),x=ct([]),E=c9(),T=ct(!0),O=ct(o.initialIndex),k=Io(l.CONTAIN),S=ct({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Q=ct((i=o.zIndex)!=null?i:m()),R=ut(()=>{const{urlList:_}=o;return _.length<=1}),V=ut(()=>O.value===0),b=ut(()=>O.value===o.urlList.length-1),Y=ut(()=>o.urlList[O.value]),rt=ut(()=>[A.e("btn"),A.e("prev"),A.is("disabled",!o.infinite&&V.value)]),q=ut(()=>[A.e("btn"),A.e("next"),A.is("disabled",!o.infinite&&b.value)]),h=ut(()=>{const{scale:_,deg:B,offsetX:N,offsetY:L,enableTransition:C}=S.value;let D=N/_,F=L/_;switch(B%360){case 90:case-270:[D,F]=[F,-D];break;case 180:case-180:[D,F]=[-D,-F];break;case 270:case-90:[D,F]=[-F,D]}const j={transform:"scale(".concat(_,") rotate(").concat(B,"deg) translate(").concat(D,"px, ").concat(F,"px)"),transition:C?"transform .3s":""};return k.value.name===l.CONTAIN.name&&(j.maxWidth=j.maxHeight="100%"),j});function s(){E.stop(),n("close")}function u(){T.value=!1}function d(_){T.value=!1,_.target.alt=f("el.image.error")}function r(_){if(T.value||_.button!==0||!w.value)return;S.value.enableTransition=!1;const{offsetX:B,offsetY:N}=S.value,L=_.pageX,C=_.pageY,D=Ln(j=>{S.value={...S.value,offsetX:B+j.pageX-L,offsetY:N+j.pageY-C}}),F=nr(document,"mousemove",D);nr(document,"mouseup",()=>{F()}),_.preventDefault()}function a(){S.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function c(){if(T.value)return;const _=CB(l),B=Object.values(l),N=k.value.name,L=B.findIndex(D=>D.name===N),C=(L+1)%_.length;k.value=l[_[C]],a()}function p(_){const B=o.urlList.length;O.value=(_+B)%B}function g(){V.value&&!o.infinite||p(O.value-1)}function v(){b.value&&!o.infinite||p(O.value+1)}function y(_,B={}){if(T.value)return;const{minScale:N,maxScale:L}=o,{zoomRate:C,rotateDeg:D,enableTransition:F}={zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0,...B};switch(_){case"zoomOut":S.value.scale>N&&(S.value.scale=Number.parseFloat((S.value.scale/C).toFixed(3)));break;case"zoomIn":S.value.scale<L&&(S.value.scale=Number.parseFloat((S.value.scale*C).toFixed(3)));break;case"clockwise":S.value.deg+=D,n("rotate",S.value.deg);break;case"anticlockwise":S.value.deg-=D,n("rotate",S.value.deg)}S.value.enableTransition=F}return Dt(Y,()=>{Qt(()=>{const _=x.value[0];_!=null&&_.complete||(T.value=!0)})}),Dt(O,_=>{a(),n("switch",_)}),Lt(()=>{var _,B;(function(){const N=Ln(C=>{switch(C.code){case Ue.esc:o.closeOnPressEscape&&s();break;case Ue.space:c();break;case Ue.left:g();break;case Ue.up:y("zoomIn");break;case Ue.right:v();break;case Ue.down:y("zoomOut")}}),L=Ln(C=>{y((C.deltaY||C.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});E.run(()=>{nr(document,"keydown",N),nr(document,"wheel",L)})})(),(B=(_=w.value)==null?void 0:_.focus)==null||B.call(_)}),e({setActiveItem:p}),(_,B)=>(tt(),xt(u9,{to:"body",disabled:!_.teleported},[H(bh,{name:"viewer-fade",appear:""},{default:nt(()=>[G("div",{ref_key:"wrapper",ref:w,tabindex:-1,class:dt(I(A).e("wrapper")),style:qt({zIndex:Q.value})},[G("div",{class:dt(I(A).e("mask")),onClick:B[0]||(B[0]=Jt(N=>_.hideOnClickModal&&s(),["self"]))},null,2),bt(" CLOSE "),G("span",{class:dt([I(A).e("btn"),I(A).e("close")]),onClick:s},[H(I(ne),null,{default:nt(()=>[H(I(Qs))]),_:1})],2),bt(" ARROW "),I(R)?bt("v-if",!0):(tt(),ot(Mt,{key:0},[G("span",{class:dt(I(rt)),onClick:g},[H(I(ne),null,{default:nt(()=>[H(I(vB))]),_:1})],2),G("span",{class:dt(I(q)),onClick:v},[H(I(ne),null,{default:nt(()=>[H(I(_3))]),_:1})],2)],64)),bt(" ACTIONS "),G("div",{class:dt([I(A).e("btn"),I(A).e("actions")])},[G("div",{class:dt(I(A).e("actions__inner"))},[H(I(ne),{onClick:B[1]||(B[1]=N=>y("zoomOut"))},{default:nt(()=>[H(I(AB))]),_:1}),H(I(ne),{onClick:B[2]||(B[2]=N=>y("zoomIn"))},{default:nt(()=>[H(I(mB))]),_:1}),G("i",{class:dt(I(A).e("actions__divider"))},null,2),H(I(ne),{onClick:c},{default:nt(()=>[(tt(),xt(Xe(I(k).icon)))]),_:1}),G("i",{class:dt(I(A).e("actions__divider"))},null,2),H(I(ne),{onClick:B[3]||(B[3]=N=>y("anticlockwise"))},{default:nt(()=>[H(I(yB))]),_:1}),H(I(ne),{onClick:B[4]||(B[4]=N=>y("clockwise"))},{default:nt(()=>[H(I(bB))]),_:1})],2)],2),bt(" CANVAS "),G("div",{class:dt(I(A).e("canvas"))},[(tt(!0),ot(Mt,null,Ht(_.urlList,(N,L)=>ee((tt(),ot("img",{ref_for:!0,ref:C=>x.value[L]=C,key:N,src:N,style:qt(I(h)),class:dt(I(A).e("img")),crossorigin:_.crossorigin,onLoad:u,onError:d,onMousedown:r},null,46,fw)),[[Me,L===O.value]])),128))],2),Rt(_.$slots,"default")],6)]),_:3})],8,["disabled"]))}}),Cp=sn(re(gw,[["__file","image-viewer.vue"]])),vw=ke({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Ce([String,Object])},previewSrcList:{type:Ce(Array),default:()=>er([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Ce(String)}}),Aw={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>we(t),close:()=>!0,show:()=>!0},mw=["src","loading","crossorigin"],yw={key:0},bw=wt({name:"ElImage",inheritAttrs:!1}),Cw=wt({...bw,props:vw,emits:Aw,setup(t,{emit:e}){const n=t;let i="";const{t:o}=Ki(),l=$t("image"),f=h9(),A=wB(),m=ct(),w=ct(!1),x=ct(!0),E=ct(!1),T=ct(),O=ct(),k=ui&&"loading"in HTMLImageElement.prototype;let S,Q;const R=ut(()=>[l.e("inner"),Y.value&&l.e("preview"),x.value&&l.is("loading")]),V=ut(()=>f.style),b=ut(()=>{const{fit:_}=n;return ui&&_?{objectFit:_}:{}}),Y=ut(()=>{const{previewSrcList:_}=n;return Array.isArray(_)&&_.length>0}),rt=ut(()=>{const{previewSrcList:_,initialIndex:B}=n;let N=B;return B>_.length-1&&(N=0),N}),q=ut(()=>n.loading!=="eager"&&(!k&&n.loading==="lazy"||n.lazy)),h=()=>{ui&&(x.value=!0,w.value=!1,m.value=n.src)};function s(_){x.value=!1,w.value=!1,e("load",_)}function u(_){x.value=!1,w.value=!0,e("error",_)}function d(){((_,B)=>{if(!ui||!_||!B)return!1;const N=_.getBoundingClientRect();let L;return L=B instanceof Element?B.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},N.top<L.bottom&&N.bottom>L.top&&N.right>L.left&&N.left<L.right})(T.value,O.value)&&(h(),c())}const r=xB(d,200,!0);async function a(){var _;if(!ui)return;await Qt();const{scrollContainer:B}=n;x3(B)?O.value=B:$e(B)&&B!==""?O.value=(_=document.querySelector(B))!=null?_:void 0:T.value&&(O.value=_B(T.value)),O.value&&(S=nr(O,"scroll",r),setTimeout(()=>d(),100))}function c(){ui&&O.value&&r&&(S==null||S(),O.value=void 0)}function p(_){if(_.ctrlKey)return _.deltaY<0||_.deltaY>0?(_.preventDefault(),!1):void 0}function g(){Y.value&&(Q=nr("wheel",p,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",E.value=!0,e("show"))}function v(){Q==null||Q(),document.body.style.overflow=i,E.value=!1,e("close")}function y(_){e("switch",_)}return Dt(()=>n.src,()=>{q.value?(x.value=!0,w.value=!1,c(),a()):h()}),Lt(()=>{q.value?a():h()}),(_,B)=>(tt(),ot("div",{ref_key:"container",ref:T,class:dt([I(l).b(),_.$attrs.class]),style:qt(I(V))},[w.value?Rt(_.$slots,"error",{key:0},()=>[G("div",{class:dt(I(l).e("error"))},Et(I(o)("el.image.error")),3)]):(tt(),ot(Mt,{key:1},[m.value!==void 0?(tt(),ot("img",ar({key:0},I(A),{src:m.value,loading:_.loading,style:I(b),class:I(R),crossorigin:_.crossorigin,onClick:g,onLoad:s,onError:u}),null,16,mw)):bt("v-if",!0),x.value?(tt(),ot("div",{key:1,class:dt(I(l).e("wrapper"))},[Rt(_.$slots,"placeholder",{},()=>[G("div",{class:dt(I(l).e("placeholder"))},null,2)])],2)):bt("v-if",!0)],64)),I(Y)?(tt(),ot(Mt,{key:2},[E.value?(tt(),xt(I(Cp),{key:0,"z-index":_.zIndex,"initial-index":I(rt),infinite:_.infinite,"zoom-rate":_.zoomRate,"min-scale":_.minScale,"max-scale":_.maxScale,"url-list":_.previewSrcList,crossorigin:_.crossorigin,"hide-on-click-modal":_.hideOnClickModal,teleported:_.previewTeleported,"close-on-press-escape":_.closeOnPressEscape,onClose:v,onSwitch:y},{default:nt(()=>[_.$slots.viewer?(tt(),ot("div",yw,[Rt(_.$slots,"viewer")])):bt("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):bt("v-if",!0)],64)):bt("v-if",!0)],6))}}),No=sn(re(Cw,[["__file","image.vue"]])),ww=ke({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Si,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||we(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt("".concat(t),10)},validateEvent:{type:Boolean,default:!0},...Zi(["ariaLabel"])}),xw={[_n]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[fi]:t=>we(t)||Ei(t),[Kt]:t=>we(t)||Ei(t)},_w=["aria-label","onKeydown"],Ew=["aria-label","onKeydown"],Sw=wt({name:"ElInputNumber"}),Iw=wt({...Sw,props:ww,emits:xw,setup(t,{expose:e,emit:n}){const i=t,{t:o}=Ki(),l=$t("input-number"),f=ct(),A=Zt({currentValue:i.modelValue,userInput:null}),{formItem:m}=Ii(),w=ut(()=>we(i.modelValue)&&i.modelValue<=i.min),x=ut(()=>we(i.modelValue)&&i.modelValue>=i.max),E=ut(()=>{const c=R(i.step);return tr(i.precision)?Math.max(R(i.modelValue),c):(i.precision,i.precision)}),T=ut(()=>i.controls&&i.controlsPosition==="right"),O=ki(),k=va(),S=ut(()=>{if(A.userInput!==null)return A.userInput;let c=A.currentValue;if(Ei(c))return"";if(we(c)){if(Number.isNaN(c))return"";tr(i.precision)||(c=c.toFixed(i.precision))}return c}),Q=(c,p)=>{if(tr(p)&&(p=E.value),p===0)return Math.round(c);let g=String(c);const v=g.indexOf(".");if(v===-1||!g.replace(".","").split("")[v+p])return c;const y=g.length;return g.charAt(y-1)==="5"&&(g="".concat(g.slice(0,Math.max(0,y-1)),"6")),Number.parseFloat(Number(g).toFixed(p))},R=c=>{if(Ei(c))return 0;const p=c.toString(),g=p.indexOf(".");let v=0;return g!==-1&&(v=p.length-g-1),v},V=(c,p=1)=>we(c)?Q(c+i.step*p):A.currentValue,b=()=>{if(i.readonly||k.value||x.value)return;const c=Number(S.value)||0,p=V(c);q(p),n(fi,A.currentValue),r()},Y=()=>{if(i.readonly||k.value||w.value)return;const c=Number(S.value)||0,p=V(c,-1);q(p),n(fi,A.currentValue),r()},rt=(c,p)=>{const{max:g,min:v,step:y,precision:_,stepStrictly:B,valueOnClear:N}=i;g<v&&ch("InputNumber","min should not be greater than max.");let L=Number(c);if(Ei(c)||Number.isNaN(L))return null;if(c===""){if(N===null)return null;L=$e(N)?{min:v,max:g}[N]:N}return B&&(L=Q(Math.round(L/y)*y,_)),tr(_)||(L=Q(L,_)),(L>g||L<v)&&(L=L>g?g:v,p&&n(Kt,L)),L},q=(c,p=!0)=>{var g;const v=A.currentValue,y=rt(c);p?v===y&&c||(A.userInput=null,n(Kt,y),v!==y&&n(_n,y,v),i.validateEvent&&((g=m==null?void 0:m.validate)==null||g.call(m,"change").catch(_=>Gn())),A.currentValue=y):n(Kt,y)},h=c=>{A.userInput=c;const p=c===""?null:Number(c);n(fi,p),q(p,!1)},s=c=>{const p=c!==""?Number(c):"";(we(p)&&!Number.isNaN(p)||c==="")&&q(p),r(),A.userInput=null},u=c=>{n("focus",c)},d=c=>{var p;A.userInput=null,n("blur",c),i.validateEvent&&((p=m==null?void 0:m.validate)==null||p.call(m,"blur").catch(g=>Gn()))},r=()=>{A.currentValue!==i.modelValue&&(A.currentValue=i.modelValue)},a=c=>{document.activeElement===c.target&&c.preventDefault()};return Dt(()=>i.modelValue,(c,p)=>{const g=rt(c,!0);A.userInput===null&&g!==p&&(A.currentValue=g)},{immediate:!0}),Lt(()=>{var c;const{min:p,max:g,modelValue:v}=i,y=(c=f.value)==null?void 0:c.input;if(y.setAttribute("role","spinbutton"),Number.isFinite(g)?y.setAttribute("aria-valuemax",String(g)):y.removeAttribute("aria-valuemax"),Number.isFinite(p)?y.setAttribute("aria-valuemin",String(p)):y.removeAttribute("aria-valuemin"),y.setAttribute("aria-valuenow",A.currentValue||A.currentValue===0?String(A.currentValue):""),y.setAttribute("aria-disabled",String(k.value)),!we(v)&&v!=null){let _=Number(v);Number.isNaN(_)&&(_=null),n(Kt,_)}y.addEventListener("wheel",a,{passive:!1})}),W3(()=>{var c,p;const g=(c=f.value)==null?void 0:c.input;g==null||g.setAttribute("aria-valuenow","".concat((p=A.currentValue)!=null?p:""))}),Yn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},ut(()=>!!i.label)),e({focus:()=>{var c,p;(p=(c=f.value)==null?void 0:c.focus)==null||p.call(c)},blur:()=>{var c,p;(p=(c=f.value)==null?void 0:c.blur)==null||p.call(c)}}),(c,p)=>(tt(),ot("div",{class:dt([I(l).b(),I(l).m(I(O)),I(l).is("disabled",I(k)),I(l).is("without-controls",!c.controls),I(l).is("controls-right",I(T))]),onDragstart:p[0]||(p[0]=Jt(()=>{},["prevent"]))},[c.controls?ee((tt(),ot("span",{key:0,role:"button","aria-label":I(o)("el.inputNumber.decrease"),class:dt([I(l).e("decrease"),I(l).is("disabled",I(w))]),onKeydown:cn(Y,["enter"])},[Rt(c.$slots,"decrease-icon",{},()=>[H(I(ne),null,{default:nt(()=>[I(T)?(tt(),xt(I(Sr),{key:0})):(tt(),xt(I(EB),{key:1}))]),_:1})])],42,_w)),[[I(Kf),Y]]):bt("v-if",!0),c.controls?ee((tt(),ot("span",{key:1,role:"button","aria-label":I(o)("el.inputNumber.increase"),class:dt([I(l).e("increase"),I(l).is("disabled",I(x))]),onKeydown:cn(b,["enter"])},[Rt(c.$slots,"increase-icon",{},()=>[H(I(ne),null,{default:nt(()=>[I(T)?(tt(),xt(I(I3),{key:0})):(tt(),xt(I(_o),{key:1}))]),_:1})])],42,Ew)),[[I(Kf),b]]):bt("v-if",!0),H(I(Be),{id:c.id,ref_key:"input",ref:f,type:"number",step:c.step,"model-value":I(S),placeholder:c.placeholder,readonly:c.readonly,disabled:I(k),size:I(O),max:c.max,min:c.min,name:c.name,"aria-label":c.label||c.ariaLabel,"validate-event":!1,onKeydown:[cn(Jt(b,["prevent"]),["up"]),cn(Jt(Y,["prevent"]),["down"])],onBlur:d,onFocus:u,onInput:h,onChange:s},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}}),wp=sn(re(Iw,[["__file","input-number.vue"]])),xp=Symbol("ElSelectGroup"),qr=Symbol("ElSelect"),kw=wt({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const e=$t("select"),n=lh(),i=ut(()=>[e.be("dropdown","item"),e.is("disabled",I(A)),e.is("selected",I(f)),e.is("hovering",I(T))]),o=Zt({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:l,itemSelected:f,isDisabled:A,select:m,hoverItem:w,updateOption:x}=function(k,S){const Q=Ft(qr),R=Ft(xp,{disabled:!1}),V=ut(()=>Q.props.multiple?s(Q.props.modelValue,k.value):s([Q.props.modelValue],k.value)),b=ut(()=>{if(Q.props.multiple){const u=Q.props.modelValue||[];return!V.value&&u.length>=Q.props.multipleLimit&&Q.props.multipleLimit>0}return!1}),Y=ut(()=>k.label||(Mi(k.value)?"":k.value)),rt=ut(()=>k.value||k.label||""),q=ut(()=>k.disabled||S.groupDisabled||b.value),h=ue(),s=(u=[],d)=>{if(Mi(k.value)){const r=Q.props.valueKey;return u&&u.some(a=>Lr(xn(a,r))===xn(d,r))}return u&&u.includes(d)};return Dt(()=>Y.value,()=>{k.created||Q.props.remote||Q.setSelected()}),Dt(()=>k.value,(u,d)=>{const{remote:r,valueKey:a}=Q.props;if(cr(u,d)||(Q.onOptionDestroy(d,h.proxy),Q.onOptionCreate(h.proxy)),!k.created&&!r){if(a&&Mi(u)&&Mi(d)&&u[a]===d[a])return;Q.setSelected()}}),Dt(()=>R.disabled,()=>{S.groupDisabled=R.disabled},{immediate:!0}),{select:Q,currentLabel:Y,currentValue:rt,itemSelected:V,isDisabled:q,hoverItem:()=>{k.disabled||R.disabled||(Q.states.hoveringIndex=Q.optionsArray.indexOf(h.proxy))},updateOption:u=>{const d=new RegExp(k3(u),"i");S.visible=d.test(Y.value)||k.created}}}(t,o),{visible:E,hover:T}=Qi(o),O=ue().proxy;return m.onOptionCreate(O),Qe(()=>{const k=O.value,{selected:S}=m.states,Q=(m.props.multiple?S:[S]).some(R=>R.value===O.value);Qt(()=>{m.states.cachedOptions.get(k)!==O||Q||m.states.cachedOptions.delete(k)}),m.onOptionDestroy(k,O)}),{ns:e,id:n,containerKls:i,currentLabel:l,itemSelected:f,isDisabled:A,select:m,hoverItem:w,updateOption:x,visible:E,hover:T,selectOptionClick:function(){t.disabled!==!0&&o.groupDisabled!==!0&&m.handleOptionSelect(O)},states:o}}}),Bw=["id","aria-disabled","aria-selected"];var Ul=re(kw,[["render",function(t,e,n,i,o,l){return ee((tt(),ot("li",{id:t.id,class:dt(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:e[0]||(e[0]=(...f)=>t.hoverItem&&t.hoverItem(...f)),onClick:e[1]||(e[1]=Jt((...f)=>t.selectOptionClick&&t.selectOptionClick(...f),["stop"]))},[Rt(t.$slots,"default",{},()=>[G("span",null,Et(t.currentLabel),1)])],42,Bw)),[[Me,t.visible]])}],["__file","option.vue"]]),Ow=re(wt({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=Ft(qr),e=$t("select"),n=ut(()=>t.props.popperClass),i=ut(()=>t.props.multiple),o=ut(()=>t.props.fitInputWidth),l=ct("");function f(){var A;l.value="".concat((A=t.selectRef)==null?void 0:A.offsetWidth,"px")}return Lt(()=>{f(),Ir(t.selectRef,f)}),{ns:e,minWidth:l,popperClass:n,isMultiple:i,isFitInputWidth:o}}}),[["render",function(t,e,n,i,o,l){return tt(),ot("div",{class:dt([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:qt({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(tt(),ot("div",{key:0,class:dt(t.ns.be("dropdown","header"))},[Rt(t.$slots,"header")],2)):bt("v-if",!0),Rt(t.$slots,"default"),t.$slots.footer?(tt(),ot("div",{key:1,class:dt(t.ns.be("dropdown","footer"))},[Rt(t.$slots,"footer")],2)):bt("v-if",!0)],6)}],["__file","select-dropdown.vue"]]);const Tw=(t,e)=>{const{t:n}=Ki(),i=lh(),o=$t("select"),l=$t("input"),f=Zt({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),A=ct(null),m=ct(null),w=ct(null),x=ct(null),E=ct(null),T=ct(null),O=ct(null),k=ct(null),S=ct(null),Q=ct(null),R=ct(null),V=ct(null),{wrapperRef:b,isFocused:Y,handleFocus:rt,handleBlur:q}=E3(E,{afterFocus(){t.automaticDropdown&&!h.value&&(h.value=!0,f.menuVisibleOnFocus=!0)},beforeBlur(gt){var St,ae;return((St=w.value)==null?void 0:St.isFocusInsideContent(gt))||((ae=x.value)==null?void 0:ae.isFocusInsideContent(gt))},afterBlur(){h.value=!1,f.menuVisibleOnFocus=!1}}),h=ct(!1),s=ct(),{form:u,formItem:d}=Ii(),{inputId:r}=Er(t,{formItemContext:d}),{valueOnClear:a,isEmptyValue:c}=IB(t),p=ut(()=>t.disabled||(u==null?void 0:u.disabled)),g=ut(()=>t.multiple?Je(t.modelValue)&&t.modelValue.length>0:!c(t.modelValue)),v=ut(()=>t.clearable&&!p.value&&f.inputHovering&&g.value),y=ut(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),_=ut(()=>o.is("reverse",y.value&&h.value)),B=ut(()=>(d==null?void 0:d.validateState)||""),N=ut(()=>kB[B.value]),L=ut(()=>t.remote?300:0),C=ut(()=>t.loading?t.loadingText||n("el.select.loading"):!(t.remote&&!f.inputValue&&f.options.size===0)&&(t.filterable&&f.inputValue&&f.options.size>0&&D.value===0?t.noMatchText||n("el.select.noMatch"):f.options.size===0?t.noDataText||n("el.select.noData"):null)),D=ut(()=>F.value.filter(gt=>gt.visible).length),F=ut(()=>{const gt=Array.from(f.options.values()),St=[];return f.optionValues.forEach(ae=>{const ye=gt.findIndex(Dn=>Dn.value===ae);ye>-1&&St.push(gt[ye])}),St.length>=gt.length?St:gt}),j=ut(()=>Array.from(f.cachedOptions.values())),U=ut(()=>{const gt=F.value.filter(St=>!St.created).some(St=>St.currentLabel===f.inputValue);return t.filterable&&t.allowCreate&&f.inputValue!==""&&!gt}),W=()=>{t.filterable&&pi(t.filterMethod)||t.filterable&&t.remote&&pi(t.remoteMethod)||F.value.forEach(gt=>{var St;(St=gt.updateOption)==null||St.call(gt,f.inputValue)})},$=ki(),M=ut(()=>["small"].includes($.value)?"small":"default"),P=ut({get:()=>h.value&&C.value!==!1,set(gt){h.value=gt}}),z=ut(()=>Je(t.modelValue)?t.modelValue.length===0&&!f.inputValue:!t.filterable||!f.inputValue),X=ut(()=>{var gt;const St=(gt=t.placeholder)!=null?gt:n("el.select.placeholder");return t.multiple||!g.value?St:f.selectedLabel}),et=ut(()=>B3?null:"mouseenter");Dt(()=>t.modelValue,(gt,St)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(f.inputValue="",J("")),it(),!cr(gt,St)&&t.validateEvent&&(d==null||d.validate("change").catch(ae=>Gn()))},{flush:"post",deep:!0}),Dt(()=>h.value,gt=>{gt?J(f.inputValue):(f.inputValue="",f.previousQuery=null,f.isBeforeHide=!0),e("visible-change",gt)}),Dt(()=>f.options.entries(),()=>{var gt;if(!ui)return;const St=((gt=A.value)==null?void 0:gt.querySelectorAll("input"))||[];(t.filterable||t.defaultFirstOption||tr(t.modelValue))&&Array.from(St).includes(document.activeElement)||it(),t.defaultFirstOption&&(t.filterable||t.remote)&&D.value&&Z()},{flush:"post"}),Dt(()=>f.hoveringIndex,gt=>{we(gt)&&gt>-1?s.value=F.value[gt]||{}:s.value={},F.value.forEach(St=>{St.hover=s.value===St})}),G3(()=>{f.isBeforeHide||W()});const J=gt=>{f.previousQuery!==gt&&(f.previousQuery=gt,t.filterable&&pi(t.filterMethod)?t.filterMethod(gt):t.filterable&&t.remote&&pi(t.remoteMethod)&&t.remoteMethod(gt),t.defaultFirstOption&&(t.filterable||t.remote)&&D.value?Qt(Z):Qt(lt))},Z=()=>{const gt=F.value.filter(ye=>ye.visible&&!ye.disabled&&!ye.states.groupDisabled),St=gt.find(ye=>ye.created),ae=gt[0];f.hoveringIndex=Bt(F.value,St||ae)},it=()=>{if(!t.multiple){const St=at(t.modelValue);return f.selectedLabel=St.currentLabel,void(f.selected=St)}f.selectedLabel="";const gt=[];Je(t.modelValue)&&t.modelValue.forEach(St=>{gt.push(at(St))}),f.selected=gt},at=gt=>{let St;const ae=Ch(gt).toLowerCase()==="object",ye=Ch(gt).toLowerCase()==="null",Dn=Ch(gt).toLowerCase()==="undefined";for(let si=f.cachedOptions.size-1;si>=0;si--){const Wi=j.value[si];if(ae?xn(Wi.value,t.valueKey)===xn(gt,t.valueKey):Wi.value===gt){St={value:gt,currentLabel:Wi.currentLabel,get isDisabled(){return Wi.isDisabled}};break}}return St||{value:gt,currentLabel:ae?gt.label:ye||Dn?"":gt}},lt=()=>{t.multiple?f.hoveringIndex=F.value.findIndex(gt=>f.selected.some(St=>nn(St)===nn(gt))):f.hoveringIndex=F.value.findIndex(gt=>nn(gt)===nn(f.selected))},ht=()=>{f.calculatorWidth=T.value.getBoundingClientRect().width},Ct=()=>{var gt,St;(St=(gt=w.value)==null?void 0:gt.updatePopper)==null||St.call(gt)},ft=()=>{var gt,St;(St=(gt=x.value)==null?void 0:gt.updatePopper)==null||St.call(gt)},At=()=>{f.inputValue.length>0&&!h.value&&(h.value=!0),J(f.inputValue)},pt=gt=>{if(f.inputValue=gt.target.value,!t.remote)return At();mt()},mt=be(()=>{At()},L.value),_t=gt=>{cr(t.modelValue,gt)||e(_n,gt)},It=gt=>{gt.stopPropagation();const St=t.multiple?[]:a.value;if(t.multiple)for(const ae of f.selected)ae.isDisabled&&St.push(ae.value);e(Kt,St),_t(St),f.hoveringIndex=-1,h.value=!1,e("clear"),_e()},yt=gt=>{if(t.multiple){const St=(t.modelValue||[]).slice(),ae=Bt(St,gt.value);ae>-1?St.splice(ae,1):(t.multipleLimit<=0||St.length<t.multipleLimit)&&St.push(gt.value),e(Kt,St),_t(St),gt.created&&J(""),t.filterable&&!t.reserveKeyword&&(f.inputValue="")}else e(Kt,gt.value),_t(gt.value),h.value=!1;_e(),h.value||Qt(()=>{Ot(gt)})},Bt=(gt=[],St)=>{if(!Mi(St))return gt.indexOf(St);const ae=t.valueKey;let ye=-1;return gt.some((Dn,si)=>Lr(xn(Dn,ae))===xn(St,ae)&&(ye=si,!0)),ye},Ot=gt=>{var St,ae,ye,Dn,si;const Wi=Je(gt)?gt[0]:gt;let ah=null;if(Wi!=null&&Wi.value){const ua=F.value.filter(Gk=>Gk.value===Wi.value);ua.length>0&&(ah=ua[0].$el)}if(w.value&&ah){const ua=(Dn=(ye=(ae=(St=w.value)==null?void 0:St.popperRef)==null?void 0:ae.contentRef)==null?void 0:ye.querySelector)==null?void 0:Dn.call(ye,".".concat(o.be("dropdown","wrap")));ua&&BB(ua,ah)}(si=V.value)==null||si.handleScroll()},{handleCompositionStart:Wt,handleCompositionUpdate:le,handleCompositionEnd:ve}=function(gt){const St=ct(!1);return{handleCompositionStart:()=>{St.value=!0},handleCompositionUpdate:ae=>{const ye=ae.target.value,Dn=ye[ye.length-1]||"";St.value=!SB(Dn)},handleCompositionEnd:ae=>{St.value&&(St.value=!1,pi(gt)&&gt(ae))}}}(gt=>pt(gt)),Xt=ut(()=>{var gt,St;return(St=(gt=w.value)==null?void 0:gt.popperRef)==null?void 0:St.contentRef}),_e=()=>{var gt;(gt=E.value)==null||gt.focus()},vn=gt=>{if(h.value=!1,Y.value){const St=new FocusEvent("focus",gt);Qt(()=>q(St))}},Ye=()=>{p.value||(B3&&(f.inputHovering=!0),f.menuVisibleOnFocus?f.menuVisibleOnFocus=!1:h.value=!h.value)},nn=gt=>Mi(gt.value)?xn(gt.value,t.valueKey):gt.value,br=ut(()=>F.value.filter(gt=>gt.visible).every(gt=>gt.disabled)),Ve=ut(()=>t.multiple?t.collapseTags?f.selected.slice(0,t.maxCollapseTags):f.selected:[]),Yi=ut(()=>t.multiple&&t.collapseTags?f.selected.slice(t.maxCollapseTags):[]),rn=gt=>{if(h.value){if(f.options.size!==0&&D.value!==0&&!br.value){gt==="next"?(f.hoveringIndex++,f.hoveringIndex===f.options.size&&(f.hoveringIndex=0)):gt==="prev"&&(f.hoveringIndex--,f.hoveringIndex<0&&(f.hoveringIndex=f.options.size-1));const St=F.value[f.hoveringIndex];St.disabled!==!0&&St.states.groupDisabled!==!0&&St.visible||rn(gt),Qt(()=>Ot(s.value))}}else h.value=!0},on=ut(()=>{const gt=(()=>{if(!m.value)return 0;const St=window.getComputedStyle(m.value);return Number.parseFloat(St.gap||"6px")})();return{maxWidth:"".concat(R.value&&t.maxCollapseTags===1?f.selectionWidth-f.collapseItemWidth-gt:f.selectionWidth,"px")}}),Cr=ut(()=>({maxWidth:"".concat(f.selectionWidth,"px")})),_i=ut(()=>({width:"".concat(Math.max(f.calculatorWidth,11),"px")}));return t.multiple&&!Je(t.modelValue)&&e(Kt,[]),!t.multiple&&Je(t.modelValue)&&e(Kt,""),Ir(m,()=>{f.selectionWidth=m.value.getBoundingClientRect().width}),Ir(T,ht),Ir(S,Ct),Ir(b,Ct),Ir(Q,ft),Ir(R,()=>{f.collapseItemWidth=R.value.getBoundingClientRect().width}),Lt(()=>{it()}),{inputId:r,contentId:i,nsSelect:o,nsInput:l,states:f,isFocused:Y,expanded:h,optionsArray:F,hoverOption:s,selectSize:$,filteredOptionsCount:D,resetCalculatorWidth:ht,updateTooltip:Ct,updateTagTooltip:ft,debouncedOnInputChange:mt,onInput:pt,deletePrevTag:gt=>{if(t.multiple&&gt.code!==Ue.delete&&gt.target.value.length<=0){const St=t.modelValue.slice(),ae=(Dn=>dl(Dn,si=>!f.disabledOptions.has(si)))(St);if(ae<0)return;const ye=St[ae];St.splice(ae,1),e(Kt,St),_t(St),e("remove-tag",ye)}},deleteTag:(gt,St)=>{const ae=f.selected.indexOf(St);if(ae>-1&&!p.value){const ye=t.modelValue.slice();ye.splice(ae,1),e(Kt,ye),_t(ye),e("remove-tag",St.value)}gt.stopPropagation(),_e()},deleteSelected:It,handleOptionSelect:yt,scrollToOption:Ot,hasModelValue:g,shouldShowPlaceholder:z,currentPlaceholder:X,mouseEnterEventName:et,showClose:v,iconComponent:y,iconReverse:_,validateState:B,validateIcon:N,showNewOption:U,updateOptions:W,collapseTagSize:M,setSelected:it,selectDisabled:p,emptyText:C,handleCompositionStart:Wt,handleCompositionUpdate:le,handleCompositionEnd:ve,onOptionCreate:gt=>{f.options.set(gt.value,gt),f.cachedOptions.set(gt.value,gt),gt.disabled&&f.disabledOptions.set(gt.value,gt)},onOptionDestroy:(gt,St)=>{f.options.get(gt)===St&&f.options.delete(gt)},handleMenuEnter:()=>{f.isBeforeHide=!1,Qt(()=>Ot(f.selected))},handleFocus:rt,focus:_e,blur:()=>{vn()},handleBlur:q,handleClearClick:gt=>{It(gt)},handleClickOutside:vn,handleEsc:()=>{f.inputValue.length>0?f.inputValue="":h.value=!1},toggleMenu:Ye,selectOption:()=>{h.value?F.value[f.hoveringIndex]&&yt(F.value[f.hoveringIndex]):Ye()},getValueKey:nn,navigateOptions:rn,dropdownMenuVisible:P,showTagList:Ve,collapseTagList:Yi,tagStyle:on,collapseTagStyle:Cr,inputStyle:_i,popperRef:Xt,inputRef:E,tooltipRef:w,tagTooltipRef:x,calculatorRef:T,prefixRef:O,suffixRef:k,selectRef:A,wrapperRef:b,selectionRef:m,scrollbarRef:V,menuRef:S,tagMenuRef:Q,collapseItemRef:R}};var Dw=wt({name:"ElOptions",setup(t,{slots:e}){const n=Ft(qr);let i=[];return()=>{var o,l;const f=(o=e.default)==null?void 0:o.call(e),A=[];return f.length&&function m(w){Je(w)&&w.forEach(x=>{var E,T,O,k;const S=(E=(x==null?void 0:x.type)||{})==null?void 0:E.name;S==="ElOptionGroup"?m($e(x.children)||Je(x.children)||!pi((T=x.children)==null?void 0:T.default)?x.children:(O=x.children)==null?void 0:O.default()):S==="ElOption"?A.push((k=x.props)==null?void 0:k.value):Je(x.children)&&m(x.children)})}((l=f[0])==null?void 0:l.children),cr(A,i)||(i=A,n&&(n.states.optionValues=A)),f}}});const Mw=ke({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Si,effect:{type:Ce(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ce(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:di.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:qi,default:OB},fitInputWidth:Boolean,suffixIcon:{type:qi,default:Sr},tagType:{...Nl.type,default:"info"},tagEffect:{...Nl.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:Ce(String),values:uh,default:"bottom-start"},fallbackPlacements:{type:Ce(Array),default:["bottom-start","top-start","right","left"]},...TB,...Zi(["ariaLabel"])}),_p="ElSelect",Qw=wt({name:_p,componentName:_p,components:{ElInput:Be,ElSelectMenu:Ow,ElOption:Ul,ElOptions:Dw,ElTag:SC,ElScrollbar:Ps,ElTooltip:We,ElIcon:ne},directives:{ClickOutside:qf},props:Mw,emits:[Kt,_n,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=Tw(t,e);return ln(qr,Zt({props:t,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected})),{...n}}}),Lw=["id","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],Pw=["textContent"],jw={key:1};var Fw=re(Qw,[["render",function(t,e,n,i,o,l){const f=un("el-tag"),A=un("el-tooltip"),m=un("el-icon"),w=un("el-option"),x=un("el-options"),E=un("el-scrollbar"),T=un("el-select-menu"),O=d9("click-outside");return ee((tt(),ot("div",{ref:"selectRef",class:dt([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),[f9(t.mouseEnterEventName)]:e[16]||(e[16]=k=>t.states.inputHovering=!0),onMouseleave:e[17]||(e[17]=k=>t.states.inputHovering=!1),onClick:e[18]||(e[18]=Jt((...k)=>t.toggleMenu&&t.toggleMenu(...k),["prevent","stop"]))},[H(A,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:"".concat(t.nsSelect.namespace.value,"-zoom-in-top"),"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[15]||(e[15]=k=>t.states.isBeforeHide=!1)},{default:nt(()=>{var k;return[G("div",{ref:"wrapperRef",class:dt([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?(tt(),ot("div",{key:0,ref:"prefixRef",class:dt(t.nsSelect.e("prefix"))},[Rt(t.$slots,"prefix")],2)):bt("v-if",!0),G("div",{ref:"selectionRef",class:dt([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?Rt(t.$slots,"tag",{key:0},()=>[(tt(!0),ot(Mt,null,Ht(t.showTagList,S=>(tt(),ot("div",{key:t.getValueKey(S),class:dt(t.nsSelect.e("selected-item"))},[H(f,{closable:!t.selectDisabled&&!S.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:qt(t.tagStyle),onClose:Q=>t.deleteTag(Q,S)},{default:nt(()=>[G("span",{class:dt(t.nsSelect.e("tags-text"))},[Rt(t.$slots,"label",{label:S.currentLabel,value:S.value},()=>[kt(Et(S.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(tt(),xt(A,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:nt(()=>[G("div",{ref:"collapseItemRef",class:dt(t.nsSelect.e("selected-item"))},[H(f,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:qt(t.collapseTagStyle)},{default:nt(()=>[G("span",{class:dt(t.nsSelect.e("tags-text"))}," + "+Et(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:nt(()=>[G("div",{ref:"tagMenuRef",class:dt(t.nsSelect.e("selection"))},[(tt(!0),ot(Mt,null,Ht(t.collapseTagList,S=>(tt(),ot("div",{key:t.getValueKey(S),class:dt(t.nsSelect.e("selected-item"))},[H(f,{class:"in-tooltip",closable:!t.selectDisabled&&!S.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:Q=>t.deleteTag(Q,S)},{default:nt(()=>[G("span",{class:dt(t.nsSelect.e("tags-text"))},[Rt(t.$slots,"label",{label:S.currentLabel,value:S.value},()=>[kt(Et(S.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):bt("v-if",!0)]):bt("v-if",!0),t.selectDisabled?bt("v-if",!0):(tt(),ot("div",{key:1,class:dt([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[ee(G("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=S=>t.states.inputValue=S),type:"text",name:t.name,class:dt([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:qt(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((k=t.hoverOption)==null?void 0:k.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:e[1]||(e[1]=(...S)=>t.handleFocus&&t.handleFocus(...S)),onBlur:e[2]||(e[2]=(...S)=>t.handleBlur&&t.handleBlur(...S)),onKeydown:[e[3]||(e[3]=cn(Jt(S=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[4]||(e[4]=cn(Jt(S=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),e[5]||(e[5]=cn(Jt((...S)=>t.handleEsc&&t.handleEsc(...S),["stop","prevent"]),["esc"])),e[6]||(e[6]=cn(Jt((...S)=>t.selectOption&&t.selectOption(...S),["stop","prevent"]),["enter"])),e[7]||(e[7]=cn(Jt((...S)=>t.deletePrevTag&&t.deletePrevTag(...S),["stop"]),["delete"]))],onCompositionstart:e[8]||(e[8]=(...S)=>t.handleCompositionStart&&t.handleCompositionStart(...S)),onCompositionupdate:e[9]||(e[9]=(...S)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...S)),onCompositionend:e[10]||(e[10]=(...S)=>t.handleCompositionEnd&&t.handleCompositionEnd(...S)),onInput:e[11]||(e[11]=(...S)=>t.onInput&&t.onInput(...S)),onClick:e[12]||(e[12]=Jt((...S)=>t.toggleMenu&&t.toggleMenu(...S),["stop"]))},null,46,Lw),[[X3,t.states.inputValue]]),t.filterable?(tt(),ot("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:dt(t.nsSelect.e("input-calculator")),textContent:Et(t.states.inputValue)},null,10,Pw)):bt("v-if",!0)],2)),t.shouldShowPlaceholder?(tt(),ot("div",{key:2,class:dt([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?Rt(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[G("span",null,Et(t.currentPlaceholder),1)]):(tt(),ot("span",jw,Et(t.currentPlaceholder),1))],2)):bt("v-if",!0)],2),G("div",{ref:"suffixRef",class:dt(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(tt(),xt(m,{key:0,class:dt([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:nt(()=>[(tt(),xt(Xe(t.iconComponent)))]),_:1},8,["class"])):bt("v-if",!0),t.showClose&&t.clearIcon?(tt(),xt(m,{key:1,class:dt([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:nt(()=>[(tt(),xt(Xe(t.clearIcon)))]),_:1},8,["class","onClick"])):bt("v-if",!0),t.validateState&&t.validateIcon?(tt(),xt(m,{key:2,class:dt([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:nt(()=>[(tt(),xt(Xe(t.validateIcon)))]),_:1},8,["class"])):bt("v-if",!0)],2)],2)]}),content:nt(()=>[H(T,{ref:"menuRef"},{default:nt(()=>[t.$slots.header?(tt(),ot("div",{key:0,class:dt(t.nsSelect.be("dropdown","header")),onClick:e[13]||(e[13]=Jt(()=>{},["stop"]))},[Rt(t.$slots,"header")],2)):bt("v-if",!0),ee(H(E,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:dt([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:nt(()=>[t.showNewOption?(tt(),xt(w,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):bt("v-if",!0),H(x,null,{default:nt(()=>[Rt(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Me,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(tt(),ot("div",{key:1,class:dt(t.nsSelect.be("dropdown","loading"))},[Rt(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(tt(),ot("div",{key:2,class:dt(t.nsSelect.be("dropdown","empty"))},[Rt(t.$slots,"empty",{},()=>[G("span",null,Et(t.emptyText),1)])],2)):bt("v-if",!0),t.$slots.footer?(tt(),ot("div",{key:3,class:dt(t.nsSelect.be("dropdown","footer")),onClick:e[14]||(e[14]=Jt(()=>{},["stop"]))},[Rt(t.$slots,"footer")],2)):bt("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],16)),[[O,t.handleClickOutside,t.popperRef]])}],["__file","select.vue"]]),Ep=re(wt({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=$t("select"),n=ct(null),i=ue(),o=ct([]);ln(xp,Zt({...Qi(t)}));const l=ut(()=>o.value.some(m=>m.visible===!0)),f=m=>{const w=Ms(m),x=[];return w.forEach(E=>{var T,O;(k=>{var S,Q;return((S=k.type)==null?void 0:S.name)==="ElOption"&&!!((Q=k.component)!=null&&Q.proxy)})(E)?x.push(E.component.proxy):(T=E.children)!=null&&T.length?x.push(...f(E.children)):(O=E.component)!=null&&O.subTree&&x.push(...f(E.component.subTree))}),x},A=()=>{o.value=f(i.subTree)};return Lt(()=>{A()}),DB(n,A,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:l,ns:e}}}),[["render",function(t,e,n,i,o,l){return ee((tt(),ot("ul",{ref:"groupRef",class:dt(t.ns.be("group","wrap"))},[G("li",{class:dt(t.ns.be("group","title"))},Et(t.label),3),G("li",null,[G("ul",{class:dt(t.ns.b("group"))},[Rt(t.$slots,"default")],2)])],2)),[[Me,t.visible]])}],["__file","option-group.vue"]]);const jn=sn(Fw,{Option:Ul,OptionGroup:Ep}),Zn=Ji(Ul);Ji(Ep);const Rw=ke({trigger:O3.trigger,placement:hh.placement,disabled:O3.disabled,visible:di.visible,transition:di.transition,popperOptions:hh.popperOptions,tabindex:hh.tabindex,content:di.content,popperStyle:di.popperStyle,popperClass:di.popperClass,enterable:{...di.enterable,default:!0},effect:{...di.effect,default:"light"},teleported:di.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Nw={"update:visible":t=>hi(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},zw=wt({name:"ElPopover"}),Vw=wt({...zw,props:Rw,emits:Nw,setup(t,{expose:e,emit:n}){const i=t,o=ut(()=>i["onUpdate:visible"]),l=$t("popover"),f=ct(),A=ut(()=>{var S;return(S=I(f))==null?void 0:S.popperRef}),m=ut(()=>[{width:Ls(i.width)},i.popperStyle]),w=ut(()=>[l.b(),i.popperClass,{[l.m("plain")]:!!i.content}]),x=ut(()=>i.transition==="".concat(l.namespace.value,"-fade-in-linear")),E=()=>{n("before-enter")},T=()=>{n("before-leave")},O=()=>{n("after-enter")},k=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:A,hide:()=>{var S;(S=f.value)==null||S.hide()}}),(S,Q)=>(tt(),xt(I(We),ar({ref_key:"tooltipRef",ref:f},S.$attrs,{trigger:S.trigger,placement:S.placement,disabled:S.disabled,visible:S.visible,transition:S.transition,"popper-options":S.popperOptions,tabindex:S.tabindex,content:S.content,offset:S.offset,"show-after":S.showAfter,"hide-after":S.hideAfter,"auto-close":S.autoClose,"show-arrow":S.showArrow,"aria-label":S.title,effect:S.effect,enterable:S.enterable,"popper-class":I(w),"popper-style":I(m),teleported:S.teleported,persistent:S.persistent,"gpu-acceleration":I(x),"onUpdate:visible":I(o),onBeforeShow:E,onBeforeHide:T,onShow:O,onHide:k}),{content:nt(()=>[S.title?(tt(),ot("div",{key:0,class:dt(I(l).e("title")),role:"title"},Et(S.title),3)):bt("v-if",!0),Rt(S.$slots,"default",{},()=>[kt(Et(S.content),1)])]),default:nt(()=>[S.$slots.reference?Rt(S.$slots,"reference",{key:0}):bt("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}}),Sp=(t,e)=>{const n=e.arg||e.value,i=n==null?void 0:n.popperRef;i&&(i.triggerRef=t)},Ip=sn(re(Vw,[["__file","popover.vue"]]),{directive:MB({mounted(t,e){Sp(t,e)},updated(t,e){Sp(t,e)}},"popover")}),kp=Symbol("sliderContextKey"),Uw=ke({modelValue:{type:Ce([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Si,inputSize:Si,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Ce(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Ce(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:uh,default:"top"},marks:{type:Ce(Object)},validateEvent:{type:Boolean,default:!0},...Zi(["ariaLabel"])}),Hl=t=>we(t)||Je(t)&&t.every(we),Hw={[Kt]:Hl,[fi]:Hl,[_n]:Hl},Gw=(t,e,n)=>{const{form:i,formItem:o}=Ii(),l=Io(),f=ct(),A=ct(),m={firstButton:f,secondButton:A},w=ut(()=>t.disabled||(i==null?void 0:i.disabled)||!1),x=ut(()=>Math.min(e.firstValue,e.secondValue)),E=ut(()=>Math.max(e.firstValue,e.secondValue)),T=ut(()=>t.range?100*(E.value-x.value)/(t.max-t.min)+"%":100*(e.firstValue-t.min)/(t.max-t.min)+"%"),O=ut(()=>t.range?100*(x.value-t.min)/(t.max-t.min)+"%":"0%"),k=ut(()=>t.vertical?{height:t.height}:{}),S=ut(()=>t.vertical?{height:T.value,bottom:O.value}:{width:T.value,left:O.value}),Q=()=>{l.value&&(e.sliderSize=l.value["client"+(t.vertical?"Height":"Width")])},R=rt=>{const q=(h=>{const s=t.min+h*(t.max-t.min)/100;if(!t.range)return f;let u;return u=Math.abs(x.value-s)<Math.abs(E.value-s)?e.firstValue<e.secondValue?"firstButton":"secondButton":e.firstValue>e.secondValue?"firstButton":"secondButton",m[u]})(rt);return q.value.setPosition(rt),q},V=rt=>{n(Kt,rt),n(fi,rt)},b=async()=>{await Qt(),n(_n,t.range?[x.value,E.value]:t.modelValue)},Y=rt=>{var q,h,s,u,d,r;if(w.value||e.dragging)return;Q();let a=0;if(t.vertical){const c=(s=(h=(q=rt.touches)==null?void 0:q.item(0))==null?void 0:h.clientY)!=null?s:rt.clientY;a=(l.value.getBoundingClientRect().bottom-c)/e.sliderSize*100}else a=(((r=(d=(u=rt.touches)==null?void 0:u.item(0))==null?void 0:d.clientX)!=null?r:rt.clientX)-l.value.getBoundingClientRect().left)/e.sliderSize*100;return a<0||a>100?void 0:R(a)};return{elFormItem:o,slider:l,firstButton:f,secondButton:A,sliderDisabled:w,minValue:x,maxValue:E,runwayStyle:k,barStyle:S,resetSize:Q,setPosition:R,emitChange:b,onSliderWrapperPrevent:rt=>{var q,h;((q=m.firstButton.value)!=null&&q.dragging||(h=m.secondButton.value)!=null&&h.dragging)&&rt.preventDefault()},onSliderClick:rt=>{Y(rt)&&b()},onSliderDown:async rt=>{const q=Y(rt);q&&(await Qt(),q.value.onButtonDown(rt))},setFirstValue:rt=>{e.firstValue=rt,V(t.range?[x.value,E.value]:rt)},setSecondValue:rt=>{e.secondValue=rt,t.range&&V([x.value,E.value])}}},{left:Yw,down:Ww,right:Xw,up:$w,home:qw,end:Kw,pageUp:Jw,pageDown:Zw}=Ue,t6=(t,e,n)=>{const{disabled:i,min:o,max:l,step:f,showTooltip:A,precision:m,sliderSize:w,formatTooltip:x,emitChange:E,resetSize:T,updateDragging:O}=Ft(kp),{tooltip:k,tooltipVisible:S,formatValue:Q,displayTooltip:R,hideTooltip:V}=((a,c,p)=>{const g=ct(),v=ct(!1),y=ut(()=>c.value instanceof Function),_=ut(()=>y.value&&c.value(a.modelValue)||a.modelValue),B=be(()=>{p.value&&(v.value=!0)},50),N=be(()=>{p.value&&(v.value=!1)},50);return{tooltip:g,tooltipVisible:v,formatValue:_,displayTooltip:B,hideTooltip:N}})(t,x,A),b=ct(),Y=ut(()=>(t.modelValue-o.value)/(l.value-o.value)*100+"%"),rt=ut(()=>t.vertical?{bottom:Y.value}:{left:Y.value}),q=a=>{i.value||(e.newPosition=Number.parseFloat(Y.value)+a/(l.value-o.value)*100,r(e.newPosition),E())},h=a=>{let c,p;return a.type.startsWith("touch")?(p=a.touches[0].clientY,c=a.touches[0].clientX):(p=a.clientY,c=a.clientX),{clientX:c,clientY:p}},s=a=>{e.dragging=!0,e.isClick=!0;const{clientX:c,clientY:p}=h(a);t.vertical?e.startY=p:e.startX=c,e.startPosition=Number.parseFloat(Y.value),e.newPosition=e.startPosition},u=a=>{if(e.dragging){let c;e.isClick=!1,R(),T();const{clientX:p,clientY:g}=h(a);t.vertical?(e.currentY=g,c=(e.startY-e.currentY)/w.value*100):(e.currentX=p,c=(e.currentX-e.startX)/w.value*100),e.newPosition=e.startPosition+c,r(e.newPosition)}},d=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||V(),e.isClick||r(e.newPosition),E()},0),window.removeEventListener("mousemove",u),window.removeEventListener("touchmove",u),window.removeEventListener("mouseup",d),window.removeEventListener("touchend",d),window.removeEventListener("contextmenu",d))},r=async a=>{if(a===null||Number.isNaN(+a))return;a<0?a=0:a>100&&(a=100);const c=100/((l.value-o.value)/f.value);let p=Math.round(a/c)*c*(l.value-o.value)*.01+o.value;p=Number.parseFloat(p.toFixed(m.value)),p!==t.modelValue&&n(Kt,p),e.dragging||t.modelValue===e.oldValue||(e.oldValue=t.modelValue),await Qt(),e.dragging&&R(),k.value.updatePopper()};return Dt(()=>e.dragging,a=>{O(a)}),{disabled:i,button:b,tooltip:k,tooltipVisible:S,showTooltip:A,wrapperStyle:rt,formatValue:Q,handleMouseEnter:()=>{e.hovering=!0,R()},handleMouseLeave:()=>{e.hovering=!1,e.dragging||V()},onButtonDown:a=>{i.value||(a.preventDefault(),s(a),window.addEventListener("mousemove",u),window.addEventListener("touchmove",u),window.addEventListener("mouseup",d),window.addEventListener("touchend",d),window.addEventListener("contextmenu",d),b.value.focus())},onKeyDown:a=>{let c=!0;[Yw,Ww].includes(a.key)?q(-f.value):[Xw,$w].includes(a.key)?q(f.value):a.key===qw?i.value||(r(0),E()):a.key===Kw?i.value||(r(100),E()):a.key===Zw?q(4*-f.value):a.key===Jw?q(4*f.value):c=!1,c&&a.preventDefault()},setPosition:r}},e6=ke({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:uh,default:"top"}}),n6={[Kt]:t=>we(t)},i6=["tabindex"],r6=wt({name:"ElSliderButton"});var Bp=re(wt({...r6,props:e6,emits:n6,setup(t,{expose:e,emit:n}){const i=t,o=$t("slider"),l=Zt({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:f,button:A,tooltip:m,showTooltip:w,tooltipVisible:x,wrapperStyle:E,formatValue:T,handleMouseEnter:O,handleMouseLeave:k,onButtonDown:S,onKeyDown:Q,setPosition:R}=t6(i,l,n),{hovering:V,dragging:b}=Qi(l);return e({onButtonDown:S,onKeyDown:Q,setPosition:R,hovering:V,dragging:b}),(Y,rt)=>(tt(),ot("div",{ref_key:"button",ref:A,class:dt([I(o).e("button-wrapper"),{hover:I(V),dragging:I(b)}]),style:qt(I(E)),tabindex:I(f)?-1:0,onMouseenter:rt[0]||(rt[0]=(...q)=>I(O)&&I(O)(...q)),onMouseleave:rt[1]||(rt[1]=(...q)=>I(k)&&I(k)(...q)),onMousedown:rt[2]||(rt[2]=(...q)=>I(S)&&I(S)(...q)),onTouchstart:rt[3]||(rt[3]=(...q)=>I(S)&&I(S)(...q)),onFocus:rt[4]||(rt[4]=(...q)=>I(O)&&I(O)(...q)),onBlur:rt[5]||(rt[5]=(...q)=>I(k)&&I(k)(...q)),onKeydown:rt[6]||(rt[6]=(...q)=>I(Q)&&I(Q)(...q))},[H(I(We),{ref_key:"tooltip",ref:m,visible:I(x),placement:Y.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":Y.tooltipClass,disabled:!I(w),persistent:""},{content:nt(()=>[G("span",null,Et(I(T)),1)]),default:nt(()=>[G("div",{class:dt([I(o).e("button"),{hover:I(V),dragging:I(b)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,i6))}}),[["__file","button.vue"]]),o6=wt({name:"ElSliderMarker",props:ke({mark:{type:Ce([String,Object]),default:void 0}}),setup(t){const e=$t("slider"),n=ut(()=>$e(t.mark)?t.mark:t.mark.label),i=ut(()=>$e(t.mark)?void 0:t.mark.style);return()=>Li("div",{class:e.e("marks-text"),style:i.value},n.value)}});const a6=["id","role","aria-label","aria-labelledby"],s6={key:1},l6=wt({name:"ElSlider"}),c6=wt({...l6,props:Uw,emits:Hw,setup(t,{expose:e,emit:n}){const i=t,o=$t("slider"),{t:l}=Ki(),f=Zt({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:A,slider:m,firstButton:w,secondButton:x,sliderDisabled:E,minValue:T,maxValue:O,runwayStyle:k,barStyle:S,resetSize:Q,emitChange:R,onSliderWrapperPrevent:V,onSliderClick:b,onSliderDown:Y,setFirstValue:rt,setSecondValue:q}=Gw(i,f,n),{stops:h,getStopStyle:s}=((j,U,W,$)=>({stops:ut(()=>{if(!j.showStops||j.min>j.max)return[];if(j.step===0)return[];const P=(j.max-j.min)/j.step,z=100*j.step/(j.max-j.min),X=Array.from({length:P-1}).map((et,J)=>(J+1)*z);return j.range?X.filter(et=>et<100*(W.value-j.min)/(j.max-j.min)||et>100*($.value-j.min)/(j.max-j.min)):X.filter(et=>et>100*(U.firstValue-j.min)/(j.max-j.min))}),getStopStyle:P=>j.vertical?{bottom:"".concat(P,"%")}:{left:"".concat(P,"%")}}))(i,f,T,O),{inputId:u,isLabeledByFormItem:d}=Er(i,{formItemContext:A}),r=ki(),a=ut(()=>i.inputSize||r.value),c=ut(()=>i.label||i.ariaLabel||l("el.slider.defaultLabel",{min:i.min,max:i.max})),p=ut(()=>i.range?i.rangeStartLabel||l("el.slider.defaultRangeStartLabel"):c.value),g=ut(()=>i.formatValueText?i.formatValueText(C.value):"".concat(C.value)),v=ut(()=>i.rangeEndLabel||l("el.slider.defaultRangeEndLabel")),y=ut(()=>i.formatValueText?i.formatValueText(D.value):"".concat(D.value)),_=ut(()=>[o.b(),o.m(r.value),o.is("vertical",i.vertical),{[o.m("with-input")]:i.showInput}]),B=(j=>ut(()=>j.marks?Object.keys(j.marks).map(Number.parseFloat).sort((U,W)=>U-W).filter(U=>U<=j.max&&U>=j.min).map(U=>({point:U,position:100*(U-j.min)/(j.max-j.min),mark:j.marks[U]})):[]))(i);((j,U,W,$,M,P)=>{const z=J=>{M(Kt,J),M(fi,J)},X=()=>j.range?![W.value,$.value].every((J,Z)=>J===U.oldValue[Z]):j.modelValue!==U.oldValue,et=()=>{var J,Z;j.min>j.max&&ch("Slider","min should not be greater than max.");const it=j.modelValue;j.range&&Array.isArray(it)?it[1]<j.min?z([j.min,j.min]):it[0]>j.max?z([j.max,j.max]):it[0]<j.min?z([j.min,it[1]]):it[1]>j.max?z([it[0],j.max]):(U.firstValue=it[0],U.secondValue=it[1],X()&&(j.validateEvent&&((J=P==null?void 0:P.validate)==null||J.call(P,"change").catch(at=>Gn())),U.oldValue=it.slice())):j.range||typeof it!="number"||Number.isNaN(it)||(it<j.min?z(j.min):it>j.max?z(j.max):(U.firstValue=it,X()&&(j.validateEvent&&((Z=P==null?void 0:P.validate)==null||Z.call(P,"change").catch(at=>Gn())),U.oldValue=it)))};et(),Dt(()=>U.dragging,J=>{J||et()}),Dt(()=>j.modelValue,(J,Z)=>{U.dragging||Array.isArray(J)&&Array.isArray(Z)&&J.every((it,at)=>it===Z[at])&&U.firstValue===J[0]&&U.secondValue===J[1]||et()},{deep:!0}),Dt(()=>[j.min,j.max],()=>{et()})})(i,f,T,O,n,A);const N=ut(()=>{const j=[i.min,i.max,i.step].map(U=>{const W="".concat(U).split(".")[1];return W?W.length:0});return Math.max.apply(null,j)}),{sliderWrapper:L}=((j,U,W)=>{const $=ct();return Lt(async()=>{j.range?(Array.isArray(j.modelValue)?(U.firstValue=Math.max(j.min,j.modelValue[0]),U.secondValue=Math.min(j.max,j.modelValue[1])):(U.firstValue=j.min,U.secondValue=j.max),U.oldValue=[U.firstValue,U.secondValue]):(typeof j.modelValue!="number"||Number.isNaN(j.modelValue)?U.firstValue=j.min:U.firstValue=Math.min(j.max,Math.max(j.min,j.modelValue)),U.oldValue=U.firstValue),nr(window,"resize",W),await Qt(),W()}),{sliderWrapper:$}})(i,f,Q),{firstValue:C,secondValue:D,sliderSize:F}=Qi(f);return ln(kp,{...Qi(i),sliderSize:F,disabled:E,precision:N,emitChange:R,resetSize:Q,updateDragging:j=>{f.dragging=j}}),Yn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},ut(()=>!!i.label)),e({onSliderClick:b}),(j,U)=>{var W,$;return tt(),ot("div",{id:j.range?I(u):void 0,ref_key:"sliderWrapper",ref:L,class:dt(I(_)),role:j.range?"group":void 0,"aria-label":j.range&&!I(d)?I(c):void 0,"aria-labelledby":j.range&&I(d)?(W=I(A))==null?void 0:W.labelId:void 0,onTouchstart:U[2]||(U[2]=(...M)=>I(V)&&I(V)(...M)),onTouchmove:U[3]||(U[3]=(...M)=>I(V)&&I(V)(...M))},[G("div",{ref_key:"slider",ref:m,class:dt([I(o).e("runway"),{"show-input":j.showInput&&!j.range},I(o).is("disabled",I(E))]),style:qt(I(k)),onMousedown:U[0]||(U[0]=(...M)=>I(Y)&&I(Y)(...M)),onTouchstart:U[1]||(U[1]=(...M)=>I(Y)&&I(Y)(...M))},[G("div",{class:dt(I(o).e("bar")),style:qt(I(S))},null,6),H(Bp,{id:j.range?void 0:I(u),ref_key:"firstButton",ref:w,"model-value":I(C),vertical:j.vertical,"tooltip-class":j.tooltipClass,placement:j.placement,role:"slider","aria-label":j.range||!I(d)?I(p):void 0,"aria-labelledby":!j.range&&I(d)?($=I(A))==null?void 0:$.labelId:void 0,"aria-valuemin":j.min,"aria-valuemax":j.range?I(D):j.max,"aria-valuenow":I(C),"aria-valuetext":I(g),"aria-orientation":j.vertical?"vertical":"horizontal","aria-disabled":I(E),"onUpdate:modelValue":I(rt)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),j.range?(tt(),xt(Bp,{key:0,ref_key:"secondButton",ref:x,"model-value":I(D),vertical:j.vertical,"tooltip-class":j.tooltipClass,placement:j.placement,role:"slider","aria-label":I(v),"aria-valuemin":I(C),"aria-valuemax":j.max,"aria-valuenow":I(D),"aria-valuetext":I(y),"aria-orientation":j.vertical?"vertical":"horizontal","aria-disabled":I(E),"onUpdate:modelValue":I(q)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):bt("v-if",!0),j.showStops?(tt(),ot("div",s6,[(tt(!0),ot(Mt,null,Ht(I(h),(M,P)=>(tt(),ot("div",{key:P,class:dt(I(o).e("stop")),style:qt(I(s)(M))},null,6))),128))])):bt("v-if",!0),I(B).length>0?(tt(),ot(Mt,{key:2},[G("div",null,[(tt(!0),ot(Mt,null,Ht(I(B),(M,P)=>(tt(),ot("div",{key:P,style:qt(I(s)(M.position)),class:dt([I(o).e("stop"),I(o).e("marks-stop")])},null,6))),128))]),G("div",{class:dt(I(o).e("marks"))},[(tt(!0),ot(Mt,null,Ht(I(B),(M,P)=>(tt(),xt(I(o6),{key:P,mark:M.mark,style:qt(I(s)(M.position))},null,8,["mark","style"]))),128))],2)],64)):bt("v-if",!0)],38),j.showInput&&!j.range?(tt(),xt(I(wp),{key:0,ref:"input","model-value":I(C),class:dt(I(o).e("input")),step:j.step,disabled:I(E),controls:j.showInputControls,min:j.min,max:j.max,debounce:j.debounce,size:I(a),"onUpdate:modelValue":I(rt),onChange:I(R)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):bt("v-if",!0)],42,a6)}}}),Ha=sn(re(c6,[["__file","slider.vue"]])),u6=ke({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:QB},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:qi},activeActionIcon:{type:qi},activeIcon:{type:qi},inactiveIcon:{type:qi},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Ce(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0},...Zi(["ariaLabel"])}),h6={[Kt]:t=>hi(t)||$e(t)||we(t),[_n]:t=>hi(t)||$e(t)||we(t),[fi]:t=>hi(t)||$e(t)||we(t)},d6=["onClick"],f6=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],p6=["aria-hidden"],g6=["aria-hidden"],v6=["aria-hidden"],Op="ElSwitch",A6=wt({name:Op}),m6=wt({...A6,props:u6,emits:h6,setup(t,{expose:e,emit:n}){const i=t,{formItem:o}=Ii(),l=ki(),f=$t("switch"),{inputId:A}=Er(i,{formItemContext:o}),m=va(ut(()=>i.loading)),w=ct(i.modelValue!==!1),x=ct(),E=ct(),T=ut(()=>[f.b(),f.m(l.value),f.is("disabled",m.value),f.is("checked",R.value)]),O=ut(()=>[f.e("label"),f.em("label","left"),f.is("active",!R.value)]),k=ut(()=>[f.e("label"),f.em("label","right"),f.is("active",R.value)]),S=ut(()=>({width:Ls(i.width)}));Dt(()=>i.modelValue,()=>{w.value=!0});const Q=ut(()=>!!w.value&&i.modelValue),R=ut(()=>Q.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(Q.value)||(n(Kt,i.inactiveValue),n(_n,i.inactiveValue),n(fi,i.inactiveValue)),Dt(R,Y=>{var rt;x.value.checked=Y,i.validateEvent&&((rt=o==null?void 0:o.validate)==null||rt.call(o,"change").catch(q=>Gn()))});const V=()=>{const Y=R.value?i.inactiveValue:i.activeValue;n(Kt,Y),n(_n,Y),n(fi,Y),Qt(()=>{x.value.checked=R.value})},b=()=>{if(m.value)return;const{beforeChange:Y}=i;if(!Y)return void V();const rt=Y();[$3(rt),hi(rt)].includes(!0)||ch(Op,"beforeChange must return type `Promise<boolean>` or `boolean`"),$3(rt)?rt.then(q=>{q&&V()}).catch(q=>{}):rt&&V()};return Lt(()=>{x.value.checked=R.value}),Yn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},ut(()=>!!i.label)),e({focus:()=>{var Y,rt;(rt=(Y=x.value)==null?void 0:Y.focus)==null||rt.call(Y)},checked:R}),(Y,rt)=>(tt(),ot("div",{class:dt(I(T)),onClick:Jt(b,["prevent"])},[G("input",{id:I(A),ref_key:"input",ref:x,class:dt(I(f).e("input")),type:"checkbox",role:"switch","aria-checked":I(R),"aria-disabled":I(m),"aria-label":Y.label||Y.ariaLabel,name:Y.name,"true-value":Y.activeValue,"false-value":Y.inactiveValue,disabled:I(m),tabindex:Y.tabindex,onChange:V,onKeydown:cn(b,["enter"])},null,42,f6),Y.inlinePrompt||!Y.inactiveIcon&&!Y.inactiveText?bt("v-if",!0):(tt(),ot("span",{key:0,class:dt(I(O))},[Y.inactiveIcon?(tt(),xt(I(ne),{key:0},{default:nt(()=>[(tt(),xt(Xe(Y.inactiveIcon)))]),_:1})):bt("v-if",!0),!Y.inactiveIcon&&Y.inactiveText?(tt(),ot("span",{key:1,"aria-hidden":I(R)},Et(Y.inactiveText),9,p6)):bt("v-if",!0)],2)),G("span",{ref_key:"core",ref:E,class:dt(I(f).e("core")),style:qt(I(S))},[Y.inlinePrompt?(tt(),ot("div",{key:0,class:dt(I(f).e("inner"))},[Y.activeIcon||Y.inactiveIcon?(tt(),xt(I(ne),{key:0,class:dt(I(f).is("icon"))},{default:nt(()=>[(tt(),xt(Xe(I(R)?Y.activeIcon:Y.inactiveIcon)))]),_:1},8,["class"])):Y.activeText||Y.inactiveText?(tt(),ot("span",{key:1,class:dt(I(f).is("text")),"aria-hidden":!I(R)},Et(I(R)?Y.activeText:Y.inactiveText),11,g6)):bt("v-if",!0)],2)):bt("v-if",!0),G("div",{class:dt(I(f).e("action"))},[Y.loading?(tt(),xt(I(ne),{key:0,class:dt(I(f).is("loading"))},{default:nt(()=>[H(I(T3))]),_:1},8,["class"])):I(R)?Rt(Y.$slots,"active-action",{key:1},()=>[Y.activeActionIcon?(tt(),xt(I(ne),{key:0},{default:nt(()=>[(tt(),xt(Xe(Y.activeActionIcon)))]),_:1})):bt("v-if",!0)]):I(R)?bt("v-if",!0):Rt(Y.$slots,"inactive-action",{key:2},()=>[Y.inactiveActionIcon?(tt(),xt(I(ne),{key:0},{default:nt(()=>[(tt(),xt(Xe(Y.inactiveActionIcon)))]),_:1})):bt("v-if",!0)])],2)],6),Y.inlinePrompt||!Y.activeIcon&&!Y.activeText?bt("v-if",!0):(tt(),ot("span",{key:1,class:dt(I(k))},[Y.activeIcon?(tt(),xt(I(ne),{key:0},{default:nt(()=>[(tt(),xt(Xe(Y.activeIcon)))]),_:1})):bt("v-if",!0),!Y.activeIcon&&Y.activeText?(tt(),ot("span",{key:1,"aria-hidden":!I(R)},Et(Y.activeText),9,v6)):bt("v-if",!0)],2))],10,d6))}}),zo=sn(re(m6,[["__file","switch.vue"]])),Kr="$treeNodeId",Tp=function(t,e){e&&!e[Kr]&&Object.defineProperty(e,Kr,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Gl=function(t,e){return t?e[t]:e[Kr]},Yl=(t,e,n)=>{const i=t.value.currentNode;n();const o=t.value.currentNode;i!==o&&e("current-change",o?o.data:null,o)},Wl=t=>{let e=!0,n=!0,i=!0;for(let o=0,l=t.length;o<l;o++){const f=t[o];(f.checked!==!0||f.indeterminate)&&(e=!1,f.disabled||(i=!1)),(f.checked!==!1||f.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:i,half:!e&&!n}},Vo=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:i}=Wl(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):i?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const o=t.parent;o&&o.level!==0&&(t.store.checkStrictly||Vo(o))},Ga=function(t,e){const n=t.store.props,i=t.data||{},o=n[e];if(typeof o=="function")return o(i,t);if(typeof o=="string")return i[o];if(o===void 0){const l=i[e];return l===void 0?"":l}};let y6=0;class fr{constructor(e){this.id=y6++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)ma(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&n.isLeaf!==void 0){const l=Ga(this,"isLeaf");typeof l=="boolean"&&(this.isLeafByUser=l)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Tp(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,o=e.key;o&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),o&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),!this.parent||this.level!==1&&this.parent.expanded!==!0||(this.canFocus=!0)}setData(e){let n;Array.isArray(e)||Tp(this,e),this.data=e,this.childNodes=[],n=this.level===0&&Array.isArray(this.data)?this.data:Ga(this,"children")||[];for(let i=0,o=n.length;i<o;i++)this.insertChild({data:n[i]})}get label(){return Ga(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Ga(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(i=>i===e||n&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof fr)){if(!i){const o=this.getChildren(!0);o.includes(e.data)||(n===void 0||n<0?o.push(e.data):o.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),(e=Zt(new fr(e)))instanceof fr&&e.initialize()}e.level=this.level+1,n===void 0||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let i;n&&(i=this.childNodes.indexOf(n)),this.insertChild(e,i)}insertAfter(e,n){let i;n&&(i=this.childNodes.indexOf(n),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const n=this.getChildren()||[],i=n.indexOf(e.data);i>-1&&n.splice(i,1);const o=this.childNodes.indexOf(e);o>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){n=this.childNodes[i];break}n&&this.removeChild(n)}expand(e,n){const i=()=>{if(n){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Vo(this),i())}):i()}doCreateChildren(e,n={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&this.isLeafByUser!==void 0)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||this.store.lazy===!0&&this.loaded===!0?this.isLeaf=!e||e.length===0:this.isLeaf=!1}setChecked(e,n,i,o){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:f,allWithoutDisable:A}=Wl(this.childNodes);this.isLeaf||f||!A||(this.checked=!1,e=!1);const m=()=>{if(n){const w=this.childNodes;for(let T=0,O=w.length;T<O;T++){const k=w[T];o=o||e!==!1;const S=k.disabled?k.checked:o;k.setChecked(S,n,!0,o)}const{half:x,all:E}=Wl(w);E||(this.checked=E,this.indeterminate=x)}};if(this.shouldLoadData())return void this.loadData(()=>{m(),Vo(this)},{checked:e!==!1});m()}const l=this.parent;l&&l.level!==0&&(i||Vo(l))}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const i=this.store.props;let o="children";return i&&(o=i.children||"children"),n[o]===void 0&&(n[o]=null),e&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(l=>l.data),i={},o=[];e.forEach((l,f)=>{const A=l[Kr];A&&n.findIndex(m=>m[Kr]===A)>=0?i[A]={index:f,data:l}:o.push({index:f,data:l})}),this.store.lazy||n.forEach(l=>{i[l[Kr]]||this.removeChildByData(l)}),o.forEach(({index:l,data:f})=>{this.insertChild({data:f},l)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy!==!0||!this.store.load||this.loaded||this.loading&&!Object.keys(n).length)e&&e.call(this);else{this.loading=!0;const i=l=>{this.childNodes=[],this.doCreateChildren(l,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,l)},o=()=>{this.loading=!1};this.store.load(this,i,o)}}eachNode(e){const n=[this];for(;n.length;){const i=n.shift();n.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||Vo(this)}}class b6{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)ma(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){this.root=new fr({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?(0,this.load)(this.root,e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,i=this.lazy,o=function(l){const f=l.root?l.root.childNodes:l.childNodes;if(f.forEach(A=>{A.visible=n.call(A,e,A.data,A),o(A)}),!l.visible&&f.length){let A=!0;A=!f.some(m=>m.visible),l.root?l.root.visible=A===!1:l.visible=A===!1}e&&l.visible&&!l.isLeaf&&(i&&!l.loaded||l.expand())};o(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof fr)return e;const n=Mi(e)?Gl(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const i=this.getNode(n);i.parent.insertBefore({data:e},i)}insertAfter(e,n){const i=this.getNode(n);i.parent.insertAfter({data:e},i)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const i=xo(n)?this.root:this.getNode(n);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(i=>{const o=n[i];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;e&&e.data&&(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){this.key&&e&&e.data&&(e.childNodes.forEach(n=>{this.deregisterNode(n)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const i=[],o=function(l){(l.root?l.root.childNodes:l.childNodes).forEach(f=>{(f.checked||n&&f.indeterminate)&&(!e||e&&f.isLeaf)&&i.push(f.data),o(f)})};return o(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),n(o)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const i in n)ma(n,i)&&e.push(n[i]);return e}updateChildren(e,n){const i=this.nodesMap[e];if(!i)return;const o=i.childNodes;for(let l=o.length-1;l>=0;l--){const f=o[l];this.remove(f.data)}for(let l=0,f=n.length;l<f;l++){const A=n[l];this.append(A,i.data)}}_setCheckedKeys(e,n=!1,i){const o=this._getAllNodes().sort((m,w)=>m.level-w.level),l=Object.create(null),f=Object.keys(i);o.forEach(m=>m.setChecked(!1,!1));const A=m=>{m.childNodes.forEach(w=>{var x;l[w.data[e]]=!0,(x=w.childNodes)!=null&&x.length&&A(w)})};for(let m=0,w=o.length;m<w;m++){const x=o[m],E=x.data[e].toString();if(f.includes(E)){if(x.childNodes.length&&A(x),x.isLeaf||this.checkStrictly)x.setChecked(!0,!1);else if(x.setChecked(!0,!0),n){x.setChecked(!1,!1);const T=function(O){O.childNodes.forEach(k=>{k.isLeaf||k.setChecked(!1,!1),T(k)})};T(x)}}else x.checked&&!l[E]&&x.setChecked(!1,!1)}}setCheckedNodes(e,n=!1){const i=this.key,o={};e.forEach(l=>{o[(l||{})[i]]=!0}),this._setCheckedKeys(i,n,o)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const i=this.key,o={};e.forEach(l=>{o[l]=!0}),this._setCheckedKeys(i,n,o)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const i=this.getNode(n);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,n,i){const o=this.getNode(e);o&&o.setChecked(!!n,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const i=e[this.key],o=this.nodesMap[i];this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const i=this.getNode(e);i&&(this.setCurrentNode(i),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const C6=wt({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=$t("tree"),n=Ft("NodeInstance"),i=Ft("RootTree");return()=>{const o=t.node,{data:l,store:f}=o;return t.renderContent?t.renderContent(Li,{_self:n,node:o,data:l,store:f}):Rt(i.ctx.slots,"default",{node:o,data:l},()=>[Li("span",{class:e.be("node","label")},[o.label])])}}});var w6=re(C6,[["__file","tree-node-content.vue"]]);function Dp(t){const e=Ft("TreeNodeMap",null),n={treeNodeExpand:i=>{t.node!==i&&t.node.collapse()},children:[]};return e&&e.children.push(n),ln("TreeNodeMap",n),{broadcastExpanded:i=>{if(t.accordion)for(const o of n.children)o.treeNodeExpand(i)}}}const Mp=Symbol("dragEvents"),x6=wt({name:"ElTreeNode",components:{ElCollapseTransition:pp,ElCheckbox:ip,NodeContent:w6,ElIcon:ne,Loading:T3},props:{node:{type:fr,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=$t("tree"),{broadcastExpanded:i}=Dp(t),o=Ft("RootTree"),l=ct(!1),f=ct(!1),A=ct(null),m=ct(null),w=ct(null),x=Ft(Mp),E=ue();ln("NodeInstance",E),t.node.expanded&&(l.value=!0,f.value=!0);const T=o.props.props.children||"children";Dt(()=>{const Q=t.node.data[T];return Q&&[...Q]},()=>{t.node.updateChildren()}),Dt(()=>t.node.indeterminate,Q=>{O(t.node.checked,Q)}),Dt(()=>t.node.checked,Q=>{O(Q,t.node.indeterminate)}),Dt(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),Dt(()=>t.node.expanded,Q=>{Qt(()=>l.value=Q),Q&&(f.value=!0)});const O=(Q,R)=>{A.value===Q&&m.value===R||o.ctx.emit("check-change",t.node.data,Q,R),A.value=Q,m.value=R},k=()=>{t.node.isLeaf||(l.value?(o.ctx.emit("node-collapse",t.node.data,t.node,E),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,E)))},S=(Q,R)=>{t.node.setChecked(R.target.checked,!o.props.checkStrictly),Qt(()=>{const V=o.store.value;o.ctx.emit("check",t.node.data,{checkedNodes:V.getCheckedNodes(),checkedKeys:V.getCheckedKeys(),halfCheckedNodes:V.getHalfCheckedNodes(),halfCheckedKeys:V.getHalfCheckedKeys()})})};return{ns:n,node$:w,tree:o,expanded:l,childNodeRendered:f,oldChecked:A,oldIndeterminate:m,getNodeKey:Q=>Gl(o.props.nodeKey,Q.data),getNodeClass:Q=>{const R=t.props.class;if(!R)return{};let V;if(pi(R)){const{data:b}=Q;V=R(b,Q)}else V=R;return $e(V)?{[V]:!0}:V},handleSelectChange:O,handleClick:Q=>{Yl(o.store,o.ctx.emit,()=>o.store.value.setCurrentNode(t.node)),o.currentNode.value=t.node,o.props.expandOnClickNode&&k(),o.props.checkOnClickNode&&!t.node.disabled&&S(null,{target:{checked:!t.node.checked}}),o.ctx.emit("node-click",t.node.data,t.node,E,Q)},handleContextMenu:Q=>{o.instance.vnode.props.onNodeContextmenu&&(Q.stopPropagation(),Q.preventDefault()),o.ctx.emit("node-contextmenu",Q,t.node.data,t.node,E)},handleExpandIconClick:k,handleCheckChange:S,handleChildNodeExpand:(Q,R,V)=>{i(R),o.ctx.emit("node-expand",Q,R,V)},handleDragStart:Q=>{o.props.draggable&&x.treeNodeDragStart({event:Q,treeNode:t})},handleDragOver:Q=>{Q.preventDefault(),o.props.draggable&&x.treeNodeDragOver({event:Q,treeNode:{$el:w.value,node:t.node}})},handleDrop:Q=>{Q.preventDefault()},handleDragEnd:Q=>{o.props.draggable&&x.treeNodeDragEnd(Q)},CaretRight:PB}}}),_6=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],E6=["aria-expanded"],S6=wt({name:"ElTree",components:{ElTreeNode:re(x6,[["render",function(t,e,n,i,o,l){const f=un("el-icon"),A=un("el-checkbox"),m=un("loading"),w=un("node-content"),x=un("el-tree-node"),E=un("el-collapse-transition");return ee((tt(),ot("div",{ref:"node$",class:dt([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=Jt((...T)=>t.handleClick&&t.handleClick(...T),["stop"])),onContextmenu:e[2]||(e[2]=(...T)=>t.handleContextMenu&&t.handleContextMenu(...T)),onDragstart:e[3]||(e[3]=Jt((...T)=>t.handleDragStart&&t.handleDragStart(...T),["stop"])),onDragover:e[4]||(e[4]=Jt((...T)=>t.handleDragOver&&t.handleDragOver(...T),["stop"])),onDragend:e[5]||(e[5]=Jt((...T)=>t.handleDragEnd&&t.handleDragEnd(...T),["stop"])),onDrop:e[6]||(e[6]=Jt((...T)=>t.handleDrop&&t.handleDrop(...T),["stop"]))},[G("div",{class:dt(t.ns.be("node","content")),style:qt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(tt(),xt(f,{key:0,class:dt([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:Jt(t.handleExpandIconClick,["stop"])},{default:nt(()=>[(tt(),xt(Xe(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):bt("v-if",!0),t.showCheckbox?(tt(),xt(A,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=Jt(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):bt("v-if",!0),t.node.loading?(tt(),xt(f,{key:2,class:dt([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:nt(()=>[H(m)]),_:1},8,["class"])):bt("v-if",!0),H(w,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),H(E,null,{default:nt(()=>[!t.renderAfterExpand||t.childNodeRendered?ee((tt(),ot("div",{key:0,class:dt(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(tt(!0),ot(Mt,null,Ht(t.node.childNodes,T=>(tt(),xt(x,{key:t.getNodeKey(T),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:T,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,E6)),[[Me,t.expanded]]):bt("v-if",!0)]),_:1})],42,_6)),[[Me,t.node.visible]])}],["__file","tree-node.vue"]])},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:qi}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Ki(),i=$t("tree"),o=Ft(qr,null),l=ct(new b6({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));l.value.initialize();const f=ct(l.value.root),A=ct(null),m=ct(null),w=ct(null),{broadcastExpanded:x}=Dp(t),{dragState:E}=function({props:k,ctx:S,el$:Q,dropIndicator$:R,store:V}){const b=$t("tree"),Y=ct({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return ln(Mp,{treeNodeDragStart:({event:rt,treeNode:q})=>{if(typeof k.allowDrag=="function"&&!k.allowDrag(q.node))return rt.preventDefault(),!1;rt.dataTransfer.effectAllowed="move";try{rt.dataTransfer.setData("text/plain","")}catch(h){}Y.value.draggingNode=q,S.emit("node-drag-start",q.node,rt)},treeNodeDragOver:({event:rt,treeNode:q})=>{const h=q,s=Y.value.dropNode;s&&s.node.id!==h.node.id&&dh(s.$el,b.is("drop-inner"));const u=Y.value.draggingNode;if(!u||!h)return;let d=!0,r=!0,a=!0,c=!0;typeof k.allowDrop=="function"&&(d=k.allowDrop(u.node,h.node,"prev"),c=r=k.allowDrop(u.node,h.node,"inner"),a=k.allowDrop(u.node,h.node,"next")),rt.dataTransfer.dropEffect=r||d||a?"move":"none",(d||r||a)&&(s==null?void 0:s.node.id)!==h.node.id&&(s&&S.emit("node-drag-leave",u.node,s.node,rt),S.emit("node-drag-enter",u.node,h.node,rt)),Y.value.dropNode=d||r||a?h:null,h.node.nextSibling===u.node&&(a=!1),h.node.previousSibling===u.node&&(d=!1),h.node.contains(u.node,!1)&&(r=!1),(u.node===h.node||u.node.contains(h.node))&&(d=!1,r=!1,a=!1);const p=h.$el.querySelector(".".concat(b.be("node","content"))).getBoundingClientRect(),g=Q.value.getBoundingClientRect();let v;const y=d?r?.25:a?.45:1:-1,_=a?r?.75:d?.55:0:1;let B=-9999;const N=rt.clientY-p.top;v=N<p.height*y?"before":N>p.height*_?"after":r?"inner":"none";const L=h.$el.querySelector(".".concat(b.be("node","expand-icon"))).getBoundingClientRect(),C=R.value;v==="before"?B=L.top-g.top:v==="after"&&(B=L.bottom-g.top),C.style.top="".concat(B,"px"),C.style.left=L.right-g.left+"px",v==="inner"?LB(h.$el,b.is("drop-inner")):dh(h.$el,b.is("drop-inner")),Y.value.showDropIndicator=v==="before"||v==="after",Y.value.allowDrop=Y.value.showDropIndicator||c,Y.value.dropType=v,S.emit("node-drag-over",u.node,h.node,rt)},treeNodeDragEnd:rt=>{const{draggingNode:q,dropType:h,dropNode:s}=Y.value;if(rt.preventDefault(),rt.dataTransfer.dropEffect="move",q&&s){const u={data:q.node.data};h!=="none"&&q.node.remove(),h==="before"?s.node.parent.insertBefore(u,s.node):h==="after"?s.node.parent.insertAfter(u,s.node):h==="inner"&&s.node.insertChild(u),h!=="none"&&(V.value.registerNode(u),V.value.key&&q.node.eachNode(d=>{var r;(r=V.value.nodesMap[d.data[V.value.key]])==null||r.setChecked(d.checked,!V.value.checkStrictly)})),dh(s.$el,b.is("drop-inner")),S.emit("node-drag-end",q.node,s.node,h,rt),h!=="none"&&S.emit("node-drop",q.node,s.node,h,rt)}q&&!s&&S.emit("node-drag-end",q.node,null,h,rt),Y.value.showDropIndicator=!1,Y.value.draggingNode=null,Y.value.dropNode=null,Y.value.allowDrop=!0}}),{dragState:Y}}({props:t,ctx:e,el$:m,dropIndicator$:w,store:l});(function({el$:k},S){const Q=$t("tree"),R=Io([]),V=Io([]);Lt(()=>{b()}),W3(()=>{R.value=Array.from(k.value.querySelectorAll("[role=treeitem]")),V.value=Array.from(k.value.querySelectorAll("input[type=checkbox]"))}),Dt(V,Y=>{Y.forEach(rt=>{rt.setAttribute("tabindex","-1")})}),nr(k,"keydown",Y=>{const rt=Y.target;if(!rt.className.includes(Q.b("node")))return;const q=Y.code;R.value=Array.from(k.value.querySelectorAll(".".concat(Q.is("focusable"),"[role=treeitem]")));const h=R.value.indexOf(rt);let s;if([Ue.up,Ue.down].includes(q)){if(Y.preventDefault(),q===Ue.up){s=h===-1?0:h!==0?h-1:R.value.length-1;const d=s;for(;!S.value.getNode(R.value[s].dataset.key).canFocus;){if(s--,s===d){s=-1;break}s<0&&(s=R.value.length-1)}}else{s=h===-1?0:h<R.value.length-1?h+1:0;const d=s;for(;!S.value.getNode(R.value[s].dataset.key).canFocus;){if(s++,s===d){s=-1;break}s>=R.value.length&&(s=0)}}s!==-1&&R.value[s].focus()}[Ue.left,Ue.right].includes(q)&&(Y.preventDefault(),rt.click());const u=rt.querySelector('[type="checkbox"]');[Ue.enter,Ue.space].includes(q)&&u&&(Y.preventDefault(),u.click())});const b=()=>{var Y;R.value=Array.from(k.value.querySelectorAll(".".concat(Q.is("focusable"),"[role=treeitem]"))),V.value=Array.from(k.value.querySelectorAll("input[type=checkbox]"));const rt=k.value.querySelectorAll(".".concat(Q.is("checked"),"[role=treeitem]"));rt.length?rt[0].setAttribute("tabindex","0"):(Y=R.value[0])==null||Y.setAttribute("tabindex","0")}})({el$:m},l);const T=ut(()=>{const{childNodes:k}=f.value,S=!!o&&o.hasFilteredOptions!==0;return(!k||k.length===0||k.every(({visible:Q})=>!Q))&&!S});Dt(()=>t.currentNodeKey,k=>{l.value.setCurrentNodeKey(k)}),Dt(()=>t.defaultCheckedKeys,k=>{l.value.setDefaultCheckedKey(k)}),Dt(()=>t.defaultExpandedKeys,k=>{l.value.setDefaultExpandedKeys(k)}),Dt(()=>t.data,k=>{l.value.setData(k)},{deep:!0}),Dt(()=>t.checkStrictly,k=>{l.value.checkStrictly=k});const O=()=>{const k=l.value.getCurrentNode();return k?k.data:null};return ln("RootTree",{ctx:e,props:t,store:l,root:f,currentNode:A,instance:ue()}),ln(jB,void 0),{ns:i,store:l,root:f,currentNode:A,dragState:E,el$:m,dropIndicator$:w,isEmpty:T,filter:k=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");l.value.filter(k)},getNodeKey:k=>Gl(t.nodeKey,k.data),getNodePath:k=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const S=l.value.getNode(k);if(!S)return[];const Q=[S.data];let R=S.parent;for(;R&&R!==f.value;)Q.push(R.data),R=R.parent;return Q.reverse()},getCheckedNodes:(k,S)=>l.value.getCheckedNodes(k,S),getCheckedKeys:k=>l.value.getCheckedKeys(k),getCurrentNode:O,getCurrentKey:()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const k=O();return k?k[t.nodeKey]:null},setCheckedNodes:(k,S)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");l.value.setCheckedNodes(k,S)},setCheckedKeys:(k,S)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");l.value.setCheckedKeys(k,S)},setChecked:(k,S,Q)=>{l.value.setChecked(k,S,Q)},getHalfCheckedNodes:()=>l.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>l.value.getHalfCheckedKeys(),setCurrentNode:(k,S=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Yl(l,e.emit,()=>l.value.setUserCurrentNode(k,S))},setCurrentKey:(k,S=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Yl(l,e.emit,()=>l.value.setCurrentNodeKey(k,S))},t:n,getNode:k=>l.value.getNode(k),remove:k=>{l.value.remove(k)},append:(k,S)=>{l.value.append(k,S)},insertBefore:(k,S)=>{l.value.insertBefore(k,S)},insertAfter:(k,S)=>{l.value.insertAfter(k,S)},handleNodeExpand:(k,S,Q)=>{x(S),e.emit("node-expand",k,S,Q)},updateKeyChildren:(k,S)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");l.value.updateChildren(k,S)}}}});var Ya=re(S6,[["render",function(t,e,n,i,o,l){const f=un("el-tree-node");return tt(),ot("div",{ref:"el$",class:dt([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(tt(!0),ot(Mt,null,Ht(t.root.childNodes,A=>(tt(),xt(f,{key:t.getNodeKey(A),node:A,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(tt(),ot("div",{key:0,class:dt(t.ns.e("empty-block"))},[Rt(t.$slots,"empty",{},()=>{var A;return[G("span",{class:dt(t.ns.e("empty-text"))},Et((A=t.emptyText)!=null?A:t.t("el.tree.emptyText")),3)]})],2)):bt("v-if",!0),ee(G("div",{ref:"dropIndicator$",class:dt(t.ns.e("drop-indicator"))},null,2),[[Me,t.dragState.showDropIndicator]])],2)}],["__file","tree.vue"]]);Ya.install=t=>{t.component(Ya.name,Ya)};const Xl=Ya,I6=wt({extends:Zn,setup(t,e){const n=Zn.setup(t,e);delete n.selectOptionClick;const i=ue().proxy;return Qt(()=>{n.select.states.cachedOptions.get(i.value)||n.select.onOptionCreate(i)}),Dt(()=>e.attrs.visible,o=>{n.states.visible=o},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function $l(t){return t||t===0}function ql(t){return Array.isArray(t)&&t.length}function Uo(t){return Array.isArray(t)?t:$l(t)?[t]:[]}function Wa(t,e,n,i,o){for(let l=0;l<t.length;l++){const f=t[l];if(e(f,l,t,o))return i?i(f,l,t,o):f;{const A=n(f);if(ql(A)){const m=Wa(A,e,n,i,f);if(m)return m}}}}function Kl(t,e,n,i){for(let o=0;o<t.length;o++){const l=t[o];e(l,o,t,i);const f=n(l);ql(f)&&Kl(f,e,n,l)}}var k6=wt({props:{data:{type:Array,default:()=>[]}},setup(t){const e=Ft(qr);return Dt(()=>t.data,()=>{var n;t.data.forEach(o=>{e.states.cachedOptions.has(o.value)||e.states.cachedOptions.set(o.value,o)});const i=((n=e.selectRef)==null?void 0:n.querySelectorAll("input"))||[];ui&&!Array.from(i).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const B6=wt({name:"ElTreeSelect",inheritAttrs:!1,props:{...jn.props,...Xl.props,cacheData:{type:Array,default:()=>[]}},setup(t,e){const{slots:n,expose:i}=e,o=ct(),l=ct(),f=ut(()=>t.nodeKey||t.valueKey||"value"),A=((E,{attrs:T,emit:O},{select:k,tree:S,key:Q})=>{const R=$t("tree-select");return Dt(()=>E.data,()=>{E.filterable&&Qt(()=>{var V,b;(b=S.value)==null||b.filter((V=k.value)==null?void 0:V.states.inputValue)})},{flush:"post"}),{..._r(Qi(E),Object.keys(jn.props)),...T,"onUpdate:modelValue":V=>O(Kt,V),valueKey:Q,popperClass:ut(()=>{const V=[R.e("popper")];return E.popperClass&&V.push(E.popperClass),V.join(" ")}),filterMethod:(V="")=>{var b;E.filterMethod?E.filterMethod(V):E.remoteMethod?E.remoteMethod(V):(b=S.value)==null||b.filter(V)}}})(t,e,{select:o,tree:l,key:f}),{cacheOptions:m,...w}=((E,{attrs:T,slots:O,emit:k},{select:S,tree:Q,key:R})=>{Dt(()=>E.modelValue,()=>{E.showCheckbox&&Qt(()=>{const q=Q.value;q&&!cr(q.getCheckedKeys(),Uo(E.modelValue))&&q.setCheckedKeys(Uo(E.modelValue))})},{immediate:!0,deep:!0});const V=ut(()=>({value:R.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...E.props})),b=(q,h)=>{var s;const u=V.value[q];return pi(u)?u(h,(s=Q.value)==null?void 0:s.getNode(b("value",h))):h[u]},Y=Uo(E.modelValue).map(q=>Wa(E.data||[],h=>b("value",h)===q,h=>b("children",h),(h,s,u,d)=>d&&b("value",d))).filter(q=>$l(q)),rt=ut(()=>{if(!E.renderAfterExpand&&!E.lazy)return[];const q=[];return Kl(E.data.concat(E.cacheData),h=>{const s=b("value",h);q.push({value:s,currentLabel:b("label",h),isDisabled:b("disabled",h)})},h=>b("children",h)),q});return{..._r(Qi(E),Object.keys(Xl.props)),...T,nodeKey:R,expandOnClickNode:ut(()=>!E.checkStrictly&&E.expandOnClickNode),defaultExpandedKeys:ut(()=>E.defaultExpandedKeys?E.defaultExpandedKeys.concat(Y):Y),renderContent:(q,{node:h,data:s,store:u})=>q(I6,{value:b("value",s),label:b("label",s),disabled:b("disabled",s),visible:h.visible},E.renderContent?()=>E.renderContent(q,{node:h,data:s,store:u}):O.default?()=>O.default({node:h,data:s,store:u}):void 0),filterNodeMethod:(q,h,s)=>E.filterNodeMethod?E.filterNodeMethod(q,h,s):!q||new RegExp(k3(q),"i").test(b("label",h)||""),onNodeClick:(q,h,s)=>{var u,d,r,a;if((u=T.onNodeClick)==null||u.call(T,q,h,s),!E.showCheckbox||!E.checkOnClickNode){if(E.showCheckbox||!E.checkStrictly&&!h.isLeaf)E.expandOnClickNode&&s.proxy.handleExpandIconClick();else if(!b("disabled",q)){const c=(d=S.value)==null?void 0:d.states.options.get(b("value",q));(r=S.value)==null||r.handleOptionSelect(c)}(a=S.value)==null||a.focus()}},onCheck:(q,h)=>{var s;if(!E.showCheckbox)return;const u=b("value",q),d={};Kl([Q.value.store.root],p=>d[p.key]=p,p=>p.childNodes);const r=h.checkedKeys,a=E.multiple?Uo(E.modelValue).filter(p=>!(p in d)&&!r.includes(p)):[],c=a.concat(r);if(E.checkStrictly)k(Kt,E.multiple?c:c.includes(u)?u:void 0);else if(E.multiple)k(Kt,a.concat(Q.value.getCheckedKeys(!0)));else{const p=Wa([q],y=>!ql(b("children",y))&&!b("disabled",y),y=>b("children",y)),g=p?b("value",p):void 0,v=$l(E.modelValue)&&!!Wa([q],y=>b("value",y)===E.modelValue,y=>b("children",y));k(Kt,g===E.modelValue||v?void 0:g)}Qt(()=>{var p;const g=Uo(E.modelValue);Q.value.setCheckedKeys(g),(p=T.onCheck)==null||p.call(T,q,{checkedKeys:Q.value.getCheckedKeys(),checkedNodes:Q.value.getCheckedNodes(),halfCheckedKeys:Q.value.getHalfCheckedKeys(),halfCheckedNodes:Q.value.getHalfCheckedNodes()})}),(s=S.value)==null||s.focus()},cacheOptions:rt}})(t,e,{select:o,tree:l,key:f}),x=Zt({});return i(x),Lt(()=>{Object.assign(x,{..._r(l.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),..._r(o.value,["focus","blur"])})}),()=>Li(jn,Zt({...A,ref:E=>o.value=E}),{...n,default:()=>[Li(k6,{data:m.value}),Li(Xl,Zt({...w,ref:E=>l.value=E}))]})}});var Xa=re(B6,[["__file","tree-select.vue"]]);Xa.install=t=>{t.component(Xa.name,Xa)};const O6=Xa;var st={};(function(t){var e,n,i,o,l,f,A,m,w,x,E,T,O,k,S,Q,R,V,b=b||{version:"5.3.0"};if(t.fabric=b,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?b.document=document:b.document=document.implementation.createHTMLDocument(""),b.window=window;else{var Y=new fh.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;b.document=Y.document,b.jsdomImplForWrapper=fh.implForWrapper,b.nodeCanvas=fh.Canvas,b.window=Y,DOMParser=b.window.DOMParser}function rt(h,s){var u=h.canvas,d=s.targetCanvas,r=d.getContext("2d");r.translate(0,d.height),r.scale(1,-1);var a=u.height-d.height;r.drawImage(u,0,a,d.width,d.height,0,0,d.width,d.height)}function q(h,s){var u=s.targetCanvas.getContext("2d"),d=s.destinationWidth,r=s.destinationHeight,a=d*r*4,c=new Uint8Array(this.imageBuffer,0,a),p=new Uint8ClampedArray(this.imageBuffer,0,a);h.readPixels(0,0,d,r,h.RGBA,h.UNSIGNED_BYTE,c);var g=new ImageData(p,d,r);u.putImageData(g,0,0)}b.isTouchSupported="ontouchstart"in b.window||"ontouchstart"in b.document||b.window&&b.window.navigator&&b.window.navigator.maxTouchPoints>0,b.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",b.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],b.DPI=96,b.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",b.commaWsp="(?:\\s+,?\\s*|,\\s*)",b.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,b.reNonWord=/[ \n\.,;!\?\-]/,b.fontPaths={},b.iMatrix=[1,0,0,1,0,0],b.svgNS="http://www.w3.org/2000/svg",b.perfLimitSizeTotal=2097152,b.maxCacheSideLimit=4096,b.minCacheSideLimit=256,b.charWidthsCache={},b.textureSize=2048,b.disableStyleCopyPaste=!1,b.enableGLFiltering=!0,b.devicePixelRatio=b.window.devicePixelRatio||b.window.webkitDevicePixelRatio||b.window.mozDevicePixelRatio||1,b.browserShadowBlurConstant=1,b.arcToSegmentsCache={},b.boundsOfCurveCache={},b.cachesBoundsOfCurve=!0,b.forceGLPutImageData=!1,b.initFilterBackend=function(){return b.enableGLFiltering&&b.isWebglSupported&&b.isWebglSupported(b.textureSize)?new b.WebglFilterBackend({tileSize:b.textureSize}):b.Canvas2dFilterBackend?new b.Canvas2dFilterBackend:void 0},typeof document<"u"&&typeof window<"u"&&(window.fabric=b),function(){function h(u,d){if(this.__eventListeners[u]){var r=this.__eventListeners[u];d?r[r.indexOf(d)]=!1:b.util.array.fill(r,!1)}}function s(u,d){var r=(function(){d.apply(this,arguments),this.off(u,r)}).bind(this);this.on(u,r)}b.Observable={fire:function(u,d){if(!this.__eventListeners)return this;var r=this.__eventListeners[u];if(!r)return this;for(var a=0,c=r.length;a<c;a++)r[a]&&r[a].call(this,d||{});return this.__eventListeners[u]=r.filter(function(p){return p!==!1}),this},on:function(u,d){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var r in u)this.on(r,u[r]);else this.__eventListeners[u]||(this.__eventListeners[u]=[]),this.__eventListeners[u].push(d);return this},once:function(u,d){if(arguments.length===1)for(var r in u)s.call(this,r,u[r]);else s.call(this,u,d);return this},off:function(u,d){if(!this.__eventListeners)return this;if(arguments.length===0)for(u in this.__eventListeners)h.call(this,u);else if(arguments.length===1&&typeof arguments[0]=="object")for(var r in u)h.call(this,r,u[r]);else h.call(this,u,d);return this}}}(),b.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var h=0,s=arguments.length;h<s;h++)this._onObjectAdded(arguments[h]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(h,s,u){var d=this._objects;return u?d[s]=h:d.splice(s,0,h),this._onObjectAdded&&this._onObjectAdded(h),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var h,s=this._objects,u=!1,d=0,r=arguments.length;d<r;d++)(h=s.indexOf(arguments[d]))!==-1&&(u=!0,s.splice(h,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[d]));return this.renderOnAddRemove&&u&&this.requestRenderAll(),this},forEachObject:function(h,s){for(var u=this.getObjects(),d=0,r=u.length;d<r;d++)h.call(s,u[d],d,u);return this},getObjects:function(h){return h===void 0?this._objects.concat():this._objects.filter(function(s){return s.type===h})},item:function(h){return this._objects[h]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(h,s){return this._objects.indexOf(h)>-1||!!s&&this._objects.some(function(u){return typeof u.contains=="function"&&u.contains(h,!0)})},complexity:function(){return this._objects.reduce(function(h,s){return h+=s.complexity?s.complexity():0},0)}},b.CommonMethods={_setOptions:function(h){for(var s in h)this.set(s,h[s])},_initGradient:function(h,s){!h||!h.colorStops||h instanceof b.Gradient||this.set(s,new b.Gradient(h))},_initPattern:function(h,s,u){!h||!h.source||h instanceof b.Pattern?u&&u():this.set(s,new b.Pattern(h,u))},_setObject:function(h){for(var s in h)this._set(s,h[s])},set:function(h,s){return typeof h=="object"?this._setObject(h):this._set(h,s),this},_set:function(h,s){this[h]=s},toggle:function(h){var s=this.get(h);return typeof s=="boolean"&&this.set(h,!s),this},get:function(h){return this[h]}},e=t,n=Math.sqrt,i=Math.atan2,o=Math.pow,l=Math.PI/180,f=Math.PI/2,b.util={cos:function(h){if(h===0)return 1;switch(h<0&&(h=-h),h/f){case 1:case 3:return 0;case 2:return-1}return Math.cos(h)},sin:function(h){if(h===0)return 0;var s=1;switch(h<0&&(s=-1),h/f){case 1:return s;case 2:return 0;case 3:return-s}return Math.sin(h)},removeFromArray:function(h,s){var u=h.indexOf(s);return u!==-1&&h.splice(u,1),h},getRandomInt:function(h,s){return Math.floor(Math.random()*(s-h+1))+h},degreesToRadians:function(h){return h*l},radiansToDegrees:function(h){return h/l},rotatePoint:function(h,s,u){var d=new b.Point(h.x-s.x,h.y-s.y),r=b.util.rotateVector(d,u);return new b.Point(r.x,r.y).addEquals(s)},rotateVector:function(h,s){var u=b.util.sin(s),d=b.util.cos(s);return{x:h.x*d-h.y*u,y:h.x*u+h.y*d}},createVector:function(h,s){return new b.Point(s.x-h.x,s.y-h.y)},calcAngleBetweenVectors:function(h,s){return Math.acos((h.x*s.x+h.y*s.y)/(Math.hypot(h.x,h.y)*Math.hypot(s.x,s.y)))},getHatVector:function(h){return new b.Point(h.x,h.y).multiply(1/Math.hypot(h.x,h.y))},getBisector:function(h,s,u){var d=b.util.createVector(h,s),r=b.util.createVector(h,u),a=b.util.calcAngleBetweenVectors(d,r),c=a*(b.util.calcAngleBetweenVectors(b.util.rotateVector(d,a),r)===0?1:-1)/2;return{vector:b.util.getHatVector(b.util.rotateVector(d,c)),angle:a}},projectStrokeOnPoints:function(h,s,u){var d=[],r=s.strokeWidth/2,a=s.strokeUniform?new b.Point(1/s.scaleX,1/s.scaleY):new b.Point(1,1),c=function(p){var g=r/Math.hypot(p.x,p.y);return new b.Point(p.x*g*a.x,p.y*g*a.y)};return h.length<=1||h.forEach(function(p,g){var v,y,_=new b.Point(p.x,p.y);g===0?(y=h[g+1],v=u?c(b.util.createVector(y,_)).addEquals(_):h[h.length-1]):g===h.length-1?(v=h[g-1],y=u?c(b.util.createVector(v,_)).addEquals(_):h[0]):(v=h[g-1],y=h[g+1]);var B,N,L=b.util.getBisector(_,v,y),C=L.vector,D=L.angle;if(s.strokeLineJoin==="miter"&&(B=-r/Math.sin(D/2),N=new b.Point(C.x*B*a.x,C.y*B*a.y),Math.hypot(N.x,N.y)/r<=s.strokeMiterLimit))return d.push(_.add(N)),void d.push(_.subtract(N));B=-r*Math.SQRT2,N=new b.Point(C.x*B*a.x,C.y*B*a.y),d.push(_.add(N)),d.push(_.subtract(N))}),d},transformPoint:function(h,s,u){return u?new b.Point(s[0]*h.x+s[2]*h.y,s[1]*h.x+s[3]*h.y):new b.Point(s[0]*h.x+s[2]*h.y+s[4],s[1]*h.x+s[3]*h.y+s[5])},makeBoundingBoxFromPoints:function(h,s){if(s)for(var u=0;u<h.length;u++)h[u]=b.util.transformPoint(h[u],s);var d=[h[0].x,h[1].x,h[2].x,h[3].x],r=b.util.array.min(d),a=b.util.array.max(d)-r,c=[h[0].y,h[1].y,h[2].y,h[3].y],p=b.util.array.min(c);return{left:r,top:p,width:a,height:b.util.array.max(c)-p}},invertTransform:function(h){var s=1/(h[0]*h[3]-h[1]*h[2]),u=[s*h[3],-s*h[1],-s*h[2],s*h[0]],d=b.util.transformPoint({x:h[4],y:h[5]},u,!0);return u[4]=-d.x,u[5]=-d.y,u},toFixed:function(h,s){return parseFloat(Number(h).toFixed(s))},parseUnit:function(h,s){var u=/\D{0,2}$/.exec(h),d=parseFloat(h);switch(s||(s=b.Text.DEFAULT_SVG_FONT_SIZE),u[0]){case"mm":return d*b.DPI/25.4;case"cm":return d*b.DPI/2.54;case"in":return d*b.DPI;case"pt":return d*b.DPI/72;case"pc":return d*b.DPI/72*12;case"em":return d*s;default:return d}},falseFunction:function(){return!1},getKlass:function(h,s){return h=b.util.string.camelize(h.charAt(0).toUpperCase()+h.slice(1)),b.util.resolveNamespace(s)[h]},getSvgAttributes:function(h){var s=["instantiated_by_use","style","id","class"];switch(h){case"linearGradient":s=s.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":s=s.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":s=s.concat(["offset","stop-color","stop-opacity"])}return s},resolveNamespace:function(h){if(!h)return b;var s,u=h.split("."),d=u.length,r=e||b.window;for(s=0;s<d;++s)r=r[u[s]];return r},loadImage:function(h,s,u,d){if(h){var r=b.util.createImage(),a=function(){s&&s.call(u,r,!1),r=r.onload=r.onerror=null};r.onload=a,r.onerror=function(){b.log("Error loading "+r.src),s&&s.call(u,null,!0),r=r.onload=r.onerror=null},h.indexOf("data")!==0&&d!=null&&(r.crossOrigin=d),h.substring(0,14)==="data:image/svg"&&(r.onload=null,b.util.loadImageInDom(r,a)),r.src=h}else s&&s.call(u,h)},loadImageInDom:function(h,s){var u=b.document.createElement("div");u.style.width=u.style.height="1px",u.style.left=u.style.top="-100%",u.style.position="absolute",u.appendChild(h),b.document.querySelector("body").appendChild(u),h.onload=function(){s(),u.parentNode.removeChild(u),u=null}},enlivenObjects:function(h,s,u,d){var r=[],a=0,c=(h=h||[]).length;function p(){++a===c&&s&&s(r.filter(function(g){return g}))}c?h.forEach(function(g,v){g&&g.type?b.util.getKlass(g.type,u).fromObject(g,function(y,_){_||(r[v]=y),d&&d(g,y,_),p()}):p()}):s&&s(r)},enlivenObjectEnlivables:function(h,s,u){var d=b.Object.ENLIVEN_PROPS.filter(function(r){return!!h[r]});b.util.enlivenObjects(d.map(function(r){return h[r]}),function(r){var a={};d.forEach(function(c,p){a[c]=r[p],s&&(s[c]=r[p])}),u&&u(a)})},enlivenPatterns:function(h,s){function u(){++r===a&&s&&s(d)}var d=[],r=0,a=(h=h||[]).length;a?h.forEach(function(c,p){c&&c.source?new b.Pattern(c,function(g){d[p]=g,u()}):(d[p]=c,u())}):s&&s(d)},groupSVGElements:function(h,s,u){var d;return h&&h.length===1?(u!==void 0&&(h[0].sourcePath=u),h[0]):(s&&(s.width&&s.height?s.centerPoint={x:s.width/2,y:s.height/2}:(delete s.width,delete s.height)),d=new b.Group(h,s),u!==void 0&&(d.sourcePath=u),d)},populateWithProperties:function(h,s,u){if(u&&Array.isArray(u))for(var d=0,r=u.length;d<r;d++)u[d]in h&&(s[u[d]]=h[u[d]])},createCanvasElement:function(){return b.document.createElement("canvas")},copyCanvasElement:function(h){var s=b.util.createCanvasElement();return s.width=h.width,s.height=h.height,s.getContext("2d").drawImage(h,0,0),s},toDataURL:function(h,s,u){return h.toDataURL("image/"+s,u)},createImage:function(){return b.document.createElement("img")},multiplyTransformMatrices:function(h,s,u){return[h[0]*s[0]+h[2]*s[1],h[1]*s[0]+h[3]*s[1],h[0]*s[2]+h[2]*s[3],h[1]*s[2]+h[3]*s[3],u?0:h[0]*s[4]+h[2]*s[5]+h[4],u?0:h[1]*s[4]+h[3]*s[5]+h[5]]},qrDecompose:function(h){var s=i(h[1],h[0]),u=o(h[0],2)+o(h[1],2),d=n(u),r=(h[0]*h[3]-h[2]*h[1])/d,a=i(h[0]*h[2]+h[1]*h[3],u);return{angle:s/l,scaleX:d,scaleY:r,skewX:a/l,skewY:0,translateX:h[4],translateY:h[5]}},calcRotateMatrix:function(h){if(!h.angle)return b.iMatrix.concat();var s=b.util.degreesToRadians(h.angle),u=b.util.cos(s),d=b.util.sin(s);return[u,d,-d,u,0,0]},calcDimensionsMatrix:function(h){var s=h.scaleX===void 0?1:h.scaleX,u=h.scaleY===void 0?1:h.scaleY,d=[h.flipX?-s:s,0,0,h.flipY?-u:u,0,0],r=b.util.multiplyTransformMatrices,a=b.util.degreesToRadians;return h.skewX&&(d=r(d,[1,0,Math.tan(a(h.skewX)),1],!0)),h.skewY&&(d=r(d,[1,Math.tan(a(h.skewY)),0,1],!0)),d},composeMatrix:function(h){var s=[1,0,0,1,h.translateX||0,h.translateY||0],u=b.util.multiplyTransformMatrices;return h.angle&&(s=u(s,b.util.calcRotateMatrix(h))),(h.scaleX!==1||h.scaleY!==1||h.skewX||h.skewY||h.flipX||h.flipY)&&(s=u(s,b.util.calcDimensionsMatrix(h))),s},resetObjectTransform:function(h){h.scaleX=1,h.scaleY=1,h.skewX=0,h.skewY=0,h.flipX=!1,h.flipY=!1,h.rotate(0)},saveObjectTransform:function(h){return{scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,angle:h.angle,left:h.left,flipX:h.flipX,flipY:h.flipY,top:h.top}},isTransparent:function(h,s,u,d){d>0&&(s>d?s-=d:s=0,u>d?u-=d:u=0);var r,a=!0,c=h.getImageData(s,u,2*d||1,2*d||1),p=c.data.length;for(r=3;r<p&&(a=c.data[r]<=0);r+=4);return c=null,a},parsePreserveAspectRatioAttribute:function(h){var s,u="meet",d=h.split(" ");return d&&d.length&&((u=d.pop())!=="meet"&&u!=="slice"?(s=u,u="meet"):d.length&&(s=d.pop())),{meetOrSlice:u,alignX:s!=="none"?s.slice(1,4):"none",alignY:s!=="none"?s.slice(5,8):"none"}},clearFabricFontCache:function(h){(h=(h||"").toLowerCase())?b.charWidthsCache[h]&&delete b.charWidthsCache[h]:b.charWidthsCache={}},limitDimsByArea:function(h,s){var u=Math.sqrt(s*h),d=Math.floor(s/u);return{x:Math.floor(u),y:d}},capValue:function(h,s,u){return Math.max(h,Math.min(s,u))},findScaleToFit:function(h,s){return Math.min(s.width/h.width,s.height/h.height)},findScaleToCover:function(h,s){return Math.max(s.width/h.width,s.height/h.height)},matrixToSVG:function(h){return"matrix("+h.map(function(s){return b.util.toFixed(s,b.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(h,s){var u=b.util.invertTransform(s),d=b.util.multiplyTransformMatrices(u,h.calcOwnMatrix());b.util.applyTransformToObject(h,d)},addTransformToObject:function(h,s){b.util.applyTransformToObject(h,b.util.multiplyTransformMatrices(s,h.calcOwnMatrix()))},applyTransformToObject:function(h,s){var u=b.util.qrDecompose(s),d=new b.Point(u.translateX,u.translateY);h.flipX=!1,h.flipY=!1,h.set("scaleX",u.scaleX),h.set("scaleY",u.scaleY),h.skewX=u.skewX,h.skewY=u.skewY,h.angle=u.angle,h.setPositionByOrigin(d,"center","center")},sizeAfterTransform:function(h,s,u){var d=h/2,r=s/2,a=[{x:-d,y:-r},{x:d,y:-r},{x:-d,y:r},{x:d,y:r}],c=b.util.calcDimensionsMatrix(u),p=b.util.makeBoundingBoxFromPoints(a,c);return{x:p.width,y:p.height}},mergeClipPaths:function(h,s){var u=h,d=s;u.inverted&&!d.inverted&&(u=s,d=h),b.util.applyTransformToObject(d,b.util.multiplyTransformMatrices(b.util.invertTransform(u.calcTransformMatrix()),d.calcTransformMatrix()));var r=u.inverted&&d.inverted;return r&&(u.inverted=d.inverted=!1),new b.Group([u],{clipPath:d,inverted:r})},hasStyleChanged:function(h,s,u){return u=u||!1,h.fill!==s.fill||h.stroke!==s.stroke||h.strokeWidth!==s.strokeWidth||h.fontSize!==s.fontSize||h.fontFamily!==s.fontFamily||h.fontWeight!==s.fontWeight||h.fontStyle!==s.fontStyle||h.textBackgroundColor!==s.textBackgroundColor||h.deltaY!==s.deltaY||u&&(h.overline!==s.overline||h.underline!==s.underline||h.linethrough!==s.linethrough)},stylesToArray:function(h,s){h=b.util.object.clone(h,!0);for(var u=s.split("\n"),d=-1,r={},a=[],c=0;c<u.length;c++)if(h[c])for(var p=0;p<u[c].length;p++){d++;var g=h[c][p];g&&Object.keys(g).length>0&&(b.util.hasStyleChanged(r,g,!0)?a.push({start:d,end:d+1,style:g}):a[a.length-1].end++),r=g||{}}else d+=u[c].length;return a},stylesFromArray:function(h,s){if(!Array.isArray(h))return h;for(var u=s.split("\n"),d=-1,r=0,a={},c=0;c<u.length;c++)for(var p=0;p<u[c].length;p++)d++,h[r]&&h[r].start<=d&&d<h[r].end&&(a[c]=a[c]||{},a[c][p]=Object.assign({},h[r].style),d===h[r].end-1&&r++);return a}},function(){var h=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},u={m:"l",M:"L"};function d(L,C,D,F,j,U,W,$,M,P,z){var X=b.util.cos(L),et=b.util.sin(L),J=b.util.cos(C),Z=b.util.sin(C),it=D*j*J-F*U*Z+W,at=F*j*J+D*U*Z+$;return["C",P+M*(-D*j*et-F*U*X),z+M*(-F*j*et+D*U*X),it+M*(D*j*Z+F*U*J),at+M*(F*j*Z-D*U*J),it,at]}function r(L,C,D,F){var j=Math.atan2(C,L),U=Math.atan2(F,D);return U>=j?U-j:2*Math.PI-(j-U)}function a(L,C,D){for(var F=D[1],j=D[2],U=D[3],W=D[4],$=D[5],M=function(X,et,J,Z,it,at,lt){var ht=Math.PI,Ct=lt*ht/180,ft=b.util.sin(Ct),At=b.util.cos(Ct),pt=0,mt=0,_t=-At*X*.5-ft*et*.5,It=-At*et*.5+ft*X*.5,yt=(J=Math.abs(J))*J,Bt=(Z=Math.abs(Z))*Z,Ot=It*It,Wt=_t*_t,le=yt*Bt-yt*Ot-Bt*Wt,ve=0;if(le<0){var Xt=Math.sqrt(1-le/(yt*Bt));J*=Xt,Z*=Xt}else ve=(it===at?-1:1)*Math.sqrt(le/(yt*Ot+Bt*Wt));var _e=ve*J*It/Z,vn=-ve*Z*_t/J,Ye=At*_e-ft*vn+.5*X,nn=ft*_e+At*vn+.5*et,br=r(1,0,(_t-_e)/J,(It-vn)/Z),Ve=r((_t-_e)/J,(It-vn)/Z,(-_t-_e)/J,(-It-vn)/Z);at===0&&Ve>0?Ve-=2*ht:at===1&&Ve<0&&(Ve+=2*ht);for(var Yi=Math.ceil(Math.abs(Ve/ht*2)),rn=[],on=Ve/Yi,Cr=8/3*Math.sin(on/4)*Math.sin(on/4)/Math.sin(on/2),_i=br+on,gt=0;gt<Yi;gt++)rn[gt]=d(br,_i,At,ft,J,Z,Ye,nn,Cr,pt,mt),pt=rn[gt][5],mt=rn[gt][6],br=_i,_i+=on;return rn}(D[6]-L,D[7]-C,F,j,W,$,U),P=0,z=M.length;P<z;P++)M[P][1]+=L,M[P][2]+=C,M[P][3]+=L,M[P][4]+=C,M[P][5]+=L,M[P][6]+=C;return M}function c(L,C,D,F){return Math.sqrt((D-L)*(D-L)+(F-C)*(F-C))}function p(L,C,D,F,j,U,W,$){return function(M){var P=function(J){return J*J*J}(M),z=function(J){return 3*J*J*(1-J)}(M),X=function(J){return 3*J*(1-J)*(1-J)}(M),et=function(J){return(1-J)*(1-J)*(1-J)}(M);return{x:W*P+j*z+D*X+L*et,y:$*P+U*z+F*X+C*et}}}function g(L,C,D,F,j,U,W,$){return function(M){var P=1-M,z=3*P*P*(D-L)+6*P*M*(j-D)+3*M*M*(W-j),X=3*P*P*(F-C)+6*P*M*(U-F)+3*M*M*($-U);return Math.atan2(X,z)}}function v(L,C,D,F,j,U){return function(W){var $=function(z){return z*z}(W),M=function(z){return 2*z*(1-z)}(W),P=function(z){return(1-z)*(1-z)}(W);return{x:j*$+D*M+L*P,y:U*$+F*M+C*P}}}function y(L,C,D,F,j,U){return function(W){var $=1-W,M=2*$*(D-L)+2*W*(j-D),P=2*$*(F-C)+2*W*(U-F);return Math.atan2(P,M)}}function _(L,C,D){var F,j,U={x:C,y:D},W=0;for(j=1;j<=100;j+=1)F=L(j/100),W+=c(U.x,U.y,F.x,F.y),U=F;return W}function B(L,C){for(var D,F,j,U=0,W=0,$=L.iterator,M={x:L.x,y:L.y},P=.01,z=L.angleFinder;W<C&&P>1e-4;)D=$(U),j=U,(F=c(M.x,M.y,D.x,D.y))+W>C?(U-=P,P/=2):(M=D,U+=P,W+=F);return D.angle=z(j),D}function N(L){for(var C,D,F,j,U=0,W=L.length,$=0,M=0,P=0,z=0,X=[],et=0;et<W;et++){switch(F={x:$,y:M,command:(C=L[et])[0]},C[0]){case"M":F.length=0,P=$=C[1],z=M=C[2];break;case"L":F.length=c($,M,C[1],C[2]),$=C[1],M=C[2];break;case"C":D=p($,M,C[1],C[2],C[3],C[4],C[5],C[6]),j=g($,M,C[1],C[2],C[3],C[4],C[5],C[6]),F.iterator=D,F.angleFinder=j,F.length=_(D,$,M),$=C[5],M=C[6];break;case"Q":D=v($,M,C[1],C[2],C[3],C[4]),j=y($,M,C[1],C[2],C[3],C[4]),F.iterator=D,F.angleFinder=j,F.length=_(D,$,M),$=C[3],M=C[4];break;case"Z":case"z":F.destX=P,F.destY=z,F.length=c($,M,P,z),$=P,M=z}U+=F.length,X.push(F)}return X.push({length:U,x:$,y:M}),X}b.util.joinPath=function(L){return L.map(function(C){return C.join(" ")}).join(" ")},b.util.parsePath=function(L){var C,D,F,j,U,W=[],$=[],M=b.rePathCommand,P="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+P+")"+b.commaWsp,X="([01])"+b.commaWsp+"?",et=new RegExp(z+"?"+z+"?"+z+X+X+z+"?("+P+")","g");if(!L||!L.match)return W;for(var J,Z=0,it=(U=L.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;Z<it;Z++){j=(C=U[Z]).slice(1).trim(),$.length=0;var at=C.charAt(0);if(J=[at],at.toLowerCase()==="a")for(var lt;lt=et.exec(j);)for(var ht=1;ht<lt.length;ht++)$.push(lt[ht]);else for(;F=M.exec(j);)$.push(F[0]);ht=0;for(var Ct=$.length;ht<Ct;ht++)D=parseFloat($[ht]),isNaN(D)||J.push(D);var ft=s[at.toLowerCase()],At=u[at]||at;if(J.length-1>ft)for(var pt=1,mt=J.length;pt<mt;pt+=ft)W.push([at].concat(J.slice(pt,pt+ft))),at=At;else W.push(J)}return W},b.util.makePathSimpler=function(L){var C,D,F,j,U,W,$=0,M=0,P=L.length,z=0,X=0,et=[];for(D=0;D<P;++D){switch(F=!1,(C=L[D].slice(0))[0]){case"l":C[0]="L",C[1]+=$,C[2]+=M;case"L":$=C[1],M=C[2];break;case"h":C[1]+=$;case"H":C[0]="L",C[2]=M,$=C[1];break;case"v":C[1]+=M;case"V":C[0]="L",M=C[1],C[1]=$,C[2]=M;break;case"m":C[0]="M",C[1]+=$,C[2]+=M;case"M":$=C[1],M=C[2],z=C[1],X=C[2];break;case"c":C[0]="C",C[1]+=$,C[2]+=M,C[3]+=$,C[4]+=M,C[5]+=$,C[6]+=M;case"C":U=C[3],W=C[4],$=C[5],M=C[6];break;case"s":C[0]="S",C[1]+=$,C[2]+=M,C[3]+=$,C[4]+=M;case"S":j==="C"?(U=2*$-U,W=2*M-W):(U=$,W=M),$=C[3],M=C[4],C[0]="C",C[5]=C[3],C[6]=C[4],C[3]=C[1],C[4]=C[2],C[1]=U,C[2]=W,U=C[3],W=C[4];break;case"q":C[0]="Q",C[1]+=$,C[2]+=M,C[3]+=$,C[4]+=M;case"Q":U=C[1],W=C[2],$=C[3],M=C[4];break;case"t":C[0]="T",C[1]+=$,C[2]+=M;case"T":j==="Q"?(U=2*$-U,W=2*M-W):(U=$,W=M),C[0]="Q",$=C[1],M=C[2],C[1]=U,C[2]=W,C[3]=$,C[4]=M;break;case"a":C[0]="A",C[6]+=$,C[7]+=M;case"A":F=!0,et=et.concat(a($,M,C)),$=C[6],M=C[7];break;case"z":case"Z":$=z,M=X}F||et.push(C),j=C[0]}return et},b.util.getSmoothPathFromPoints=function(L,C){var D,F=[],j=new b.Point(L[0].x,L[0].y),U=new b.Point(L[1].x,L[1].y),W=L.length,$=1,M=0,P=W>2;for(C=C||0,P&&($=L[2].x<U.x?-1:L[2].x===U.x?0:1,M=L[2].y<U.y?-1:L[2].y===U.y?0:1),F.push(["M",j.x-$*C,j.y-M*C]),D=1;D<W;D++){if(!j.eq(U)){var z=j.midPointFrom(U);F.push(["Q",j.x,j.y,z.x,z.y])}j=L[D],D+1<L.length&&(U=L[D+1])}return P&&($=j.x>L[D-2].x?1:j.x===L[D-2].x?0:-1,M=j.y>L[D-2].y?1:j.y===L[D-2].y?0:-1),F.push(["L",j.x+$*C,j.y+M*C]),F},b.util.getPathSegmentsInfo=N,b.util.getBoundsOfCurve=function(L,C,D,F,j,U,W,$){var M;if(b.cachesBoundsOfCurve&&(M=h.call(arguments),b.boundsOfCurveCache[M]))return b.boundsOfCurveCache[M];var P,z,X,et,J,Z,it,at,lt=Math.sqrt,ht=Math.min,Ct=Math.max,ft=Math.abs,At=[],pt=[[],[]];z=6*L-12*D+6*j,P=-3*L+9*D-9*j+3*W,X=3*D-3*L;for(var mt=0;mt<2;++mt)if(mt>0&&(z=6*C-12*F+6*U,P=-3*C+9*F-9*U+3*$,X=3*F-3*C),ft(P)<1e-12){if(ft(z)<1e-12)continue;0<(et=-X/z)&&et<1&&At.push(et)}else(it=z*z-4*X*P)<0||(0<(J=(-z+(at=lt(it)))/(2*P))&&J<1&&At.push(J),0<(Z=(-z-at)/(2*P))&&Z<1&&At.push(Z));for(var _t,It,yt,Bt=At.length,Ot=Bt;Bt--;)_t=(yt=1-(et=At[Bt]))*yt*yt*L+3*yt*yt*et*D+3*yt*et*et*j+et*et*et*W,pt[0][Bt]=_t,It=yt*yt*yt*C+3*yt*yt*et*F+3*yt*et*et*U+et*et*et*$,pt[1][Bt]=It;pt[0][Ot]=L,pt[1][Ot]=C,pt[0][Ot+1]=W,pt[1][Ot+1]=$;var Wt=[{x:ht.apply(null,pt[0]),y:ht.apply(null,pt[1])},{x:Ct.apply(null,pt[0]),y:Ct.apply(null,pt[1])}];return b.cachesBoundsOfCurve&&(b.boundsOfCurveCache[M]=Wt),Wt},b.util.getPointOnPath=function(L,C,D){D||(D=N(L));for(var F=0;C-D[F].length>0&&F<D.length-2;)C-=D[F].length,F++;var j,U=D[F],W=C/U.length,$=U.command,M=L[F];switch($){case"M":return{x:U.x,y:U.y,angle:0};case"Z":case"z":return(j=new b.Point(U.x,U.y).lerp(new b.Point(U.destX,U.destY),W)).angle=Math.atan2(U.destY-U.y,U.destX-U.x),j;case"L":return(j=new b.Point(U.x,U.y).lerp(new b.Point(M[1],M[2]),W)).angle=Math.atan2(M[2]-U.y,M[1]-U.x),j;case"C":case"Q":return B(U,C)}},b.util.transformPath=function(L,C,D){return D&&(C=b.util.multiplyTransformMatrices(C,[1,0,0,1,-D.x,-D.y])),L.map(function(F){for(var j=F.slice(0),U={},W=1;W<F.length-1;W+=2)U.x=F[W],U.y=F[W+1],U=b.util.transformPoint(U,C),j[W]=U.x,j[W+1]=U.y;return j})}}(),function(){var h=Array.prototype.slice;function s(u,d,r){if(u&&u.length!==0){var a=u.length-1,c=d?u[a][d]:u[a];if(d)for(;a--;)r(u[a][d],c)&&(c=u[a][d]);else for(;a--;)r(u[a],c)&&(c=u[a]);return c}}b.util.array={fill:function(u,d){for(var r=u.length;r--;)u[r]=d;return u},invoke:function(u,d){for(var r=h.call(arguments,2),a=[],c=0,p=u.length;c<p;c++)a[c]=r.length?u[c][d].apply(u[c],r):u[c][d].call(u[c]);return a},min:function(u,d){return s(u,d,function(r,a){return r<a})},max:function(u,d){return s(u,d,function(r,a){return r>=a})}}}(),function(){function h(s,u,d){if(d)if(!b.isLikelyNode&&u instanceof Element)s=u;else if(u instanceof Array){s=[];for(var r=0,a=u.length;r<a;r++)s[r]=h({},u[r],d)}else if(u&&typeof u=="object")for(var c in u)c==="canvas"||c==="group"?s[c]=null:u.hasOwnProperty(c)&&(s[c]=h({},u[c],d));else s=u;else for(var c in u)s[c]=u[c];return s}b.util.object={extend:h,clone:function(s,u){return h({},s,u)}},b.util.object.extend(b.util,b.Observable)}(),function(){function h(s,u){var d=s.charCodeAt(u);if(isNaN(d))return"";if(d<55296||d>57343)return s.charAt(u);if(55296<=d&&d<=56319){if(s.length<=u+1)throw"High surrogate without following low surrogate";var r=s.charCodeAt(u+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return s.charAt(u)+s.charAt(u+1)}if(u===0)throw"Low surrogate without preceding high surrogate";var a=s.charCodeAt(u-1);if(55296>a||a>56319)throw"Low surrogate without preceding high surrogate";return!1}b.util.string={camelize:function(s){return s.replace(/-+(.)?/g,function(u,d){return d?d.toUpperCase():""})},capitalize:function(s,u){return s.charAt(0).toUpperCase()+(u?s.slice(1):s.slice(1).toLowerCase())},escapeXml:function(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(s){var u,d=0,r=[];for(d=0;d<s.length;d++)(u=h(s,d))!==!1&&r.push(u);return r}}}(),function(){var h=Array.prototype.slice,s=function(){},u=function(){for(var c in{toString:1})if(c==="toString")return!1;return!0}(),d=function(c,p,g){for(var v in p)v in c.prototype&&typeof c.prototype[v]=="function"&&(p[v]+"").indexOf("callSuper")>-1?c.prototype[v]=function(y){return function(){var _=this.constructor.superclass;this.constructor.superclass=g;var B=p[y].apply(this,arguments);if(this.constructor.superclass=_,y!=="initialize")return B}}(v):c.prototype[v]=p[v],u&&(p.toString!==Object.prototype.toString&&(c.prototype.toString=p.toString),p.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=p.valueOf))};function r(){}function a(c){for(var p=null,g=this;g.constructor.superclass;){var v=g.constructor.superclass.prototype[c];if(g[c]!==v){p=v;break}g=g.constructor.superclass.prototype}if(p)return arguments.length>1?p.apply(this,h.call(arguments,1)):p.call(this)}b.util.createClass=function(){var c=null,p=h.call(arguments,0);function g(){this.initialize.apply(this,arguments)}typeof p[0]=="function"&&(c=p.shift()),g.superclass=c,g.subclasses=[],c&&(r.prototype=c.prototype,g.prototype=new r,c.subclasses.push(g));for(var v=0,y=p.length;v<y;v++)d(g,p[v],c);return g.prototype.initialize||(g.prototype.initialize=s),g.prototype.constructor=g,g.prototype.callSuper=a,g}}(),A=!!b.document.createElement("div").attachEvent,m=["touchstart","touchmove","touchend"],b.util.addListener=function(h,s,u,d){h&&h.addEventListener(s,u,!A&&d)},b.util.removeListener=function(h,s,u,d){h&&h.removeEventListener(s,u,!A&&d)},b.util.getPointer=function(h){var s=h.target,u=b.util.getScrollLeftTop(s),d=function(r){var a=r.changedTouches;return a&&a[0]?a[0]:r}(h);return{x:d.clientX+u.left,y:d.clientY+u.top}},b.util.isTouchEvent=function(h){return m.indexOf(h.type)>-1||h.pointerType==="touch"},w=b.document.createElement("div"),x=typeof w.style.opacity=="string",E=typeof w.style.filter=="string",T=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,O=function(h){return h},x?O=function(h,s){return h.style.opacity=s,h}:E&&(O=function(h,s){var u=h.style;return h.currentStyle&&!h.currentStyle.hasLayout&&(u.zoom=1),T.test(u.filter)?(s=s>=.9999?"":"alpha(opacity="+100*s+")",u.filter=u.filter.replace(T,s)):u.filter+=" alpha(opacity="+100*s+")",h}),b.util.setStyle=function(h,s){var u=h.style;if(!u)return h;if(typeof s=="string")return h.style.cssText+=";"+s,s.indexOf("opacity")>-1?O(h,s.match(/opacity:\s*(\d?\.?\d*)/)[1]):h;for(var d in s)if(d==="opacity")O(h,s[d]);else{var r=d==="float"||d==="cssFloat"?u.styleFloat===void 0?"cssFloat":"styleFloat":d;u.setProperty(r,s[d])}return h},function(){var h=Array.prototype.slice,s,u,d,r,a=function(g){return h.call(g,0)};try{s=a(b.document.childNodes)instanceof Array}catch(g){}function c(g,v){var y=b.document.createElement(g);for(var _ in v)_==="class"?y.className=v[_]:_==="for"?y.htmlFor=v[_]:y.setAttribute(_,v[_]);return y}function p(g){for(var v=0,y=0,_=b.document.documentElement,B=b.document.body||{scrollLeft:0,scrollTop:0};g&&(g.parentNode||g.host)&&((g=g.parentNode||g.host)===b.document?(v=B.scrollLeft||_.scrollLeft||0,y=B.scrollTop||_.scrollTop||0):(v+=g.scrollLeft||0,y+=g.scrollTop||0),g.nodeType!==1||g.style.position!=="fixed"););return{left:v,top:y}}s||(a=function(g){for(var v=new Array(g.length),y=g.length;y--;)v[y]=g[y];return v}),u=b.document.defaultView&&b.document.defaultView.getComputedStyle?function(g,v){var y=b.document.defaultView.getComputedStyle(g,null);return y?y[v]:void 0}:function(g,v){var y=g.style[v];return!y&&g.currentStyle&&(y=g.currentStyle[v]),y},d=b.document.documentElement.style,r="userSelect"in d?"userSelect":"MozUserSelect"in d?"MozUserSelect":"WebkitUserSelect"in d?"WebkitUserSelect":"KhtmlUserSelect"in d?"KhtmlUserSelect":"",b.util.makeElementUnselectable=function(g){return g.onselectstart!==void 0&&(g.onselectstart=b.util.falseFunction),r?g.style[r]="none":typeof g.unselectable=="string"&&(g.unselectable="on"),g},b.util.makeElementSelectable=function(g){return g.onselectstart!==void 0&&(g.onselectstart=null),r?g.style[r]="":typeof g.unselectable=="string"&&(g.unselectable=""),g},b.util.setImageSmoothing=function(g,v){g.imageSmoothingEnabled=g.imageSmoothingEnabled||g.webkitImageSmoothingEnabled||g.mozImageSmoothingEnabled||g.msImageSmoothingEnabled||g.oImageSmoothingEnabled,g.imageSmoothingEnabled=v},b.util.getById=function(g){return typeof g=="string"?b.document.getElementById(g):g},b.util.toArray=a,b.util.addClass=function(g,v){g&&(" "+g.className+" ").indexOf(" "+v+" ")===-1&&(g.className+=(g.className?" ":"")+v)},b.util.makeElement=c,b.util.wrapElement=function(g,v,y){return typeof v=="string"&&(v=c(v,y)),g.parentNode&&g.parentNode.replaceChild(v,g),v.appendChild(g),v},b.util.getScrollLeftTop=p,b.util.getElementOffset=function(g){var v,y,_=g&&g.ownerDocument,B={left:0,top:0},N={left:0,top:0},L={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!_)return N;for(var C in L)N[L[C]]+=parseInt(u(g,C),10)||0;return v=_.documentElement,g.getBoundingClientRect!==void 0&&(B=g.getBoundingClientRect()),y=p(g),{left:B.left+y.left-(v.clientLeft||0)+N.left,top:B.top+y.top-(v.clientTop||0)+N.top}},b.util.getNodeCanvas=function(g){var v=b.jsdomImplForWrapper(g);return v._canvas||v._image},b.util.cleanUpJsdomNode=function(g){if(b.isLikelyNode){var v=b.jsdomImplForWrapper(g);v&&(v._image=null,v._canvas=null,v._currentSrc=null,v._attributes=null,v._classList=null)}}}(),function(){function h(){}b.util.request=function(s,u){u||(u={});var d=u.method?u.method.toUpperCase():"GET",r=u.onComplete||function(){},a=new b.window.XMLHttpRequest,c=u.body||u.parameters;return a.onreadystatechange=function(){a.readyState===4&&(r(a),a.onreadystatechange=h)},d==="GET"&&(c=null,typeof u.parameters=="string"&&(s=function(p,g){return p+(/\?/.test(p)?"&":"?")+g}(s,u.parameters))),a.open(d,s,!0),d!=="POST"&&d!=="PUT"||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(c),a}}(),b.log=console.log,b.warn=console.warn,function(){var h=b.util.object.extend,s=b.util.object.clone,u=[];function d(){return!1}function r(g,v,y,_){return-y*Math.cos(g/_*(Math.PI/2))+y+v}b.util.object.extend(u,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(v){v.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var v=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===g});return v.forEach(function(y){y.cancel()}),v},cancelByTarget:function(g){var v=this.findAnimationsByTarget(g);return v.forEach(function(y){y.cancel()}),v},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(v){return v.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(v){return v.target===g}):[]}});var a=b.window.requestAnimationFrame||b.window.webkitRequestAnimationFrame||b.window.mozRequestAnimationFrame||b.window.oRequestAnimationFrame||b.window.msRequestAnimationFrame||function(g){return b.window.setTimeout(g,1e3/60)},c=b.window.cancelAnimationFrame||b.window.clearTimeout;function p(){return a.apply(b.window,arguments)}b.util.animate=function(g){g||(g={});var v,y=!1,_=function(){var B=b.runningAnimations.indexOf(v);return B>-1&&b.runningAnimations.splice(B,1)[0]};return v=h(s(g),{cancel:function(){return y=!0,_()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),b.runningAnimations.push(v),p(function(B){var N,L=B||+new Date,C=g.duration||500,D=L+C,F=g.onChange||d,j=g.abort||d,U=g.onComplete||d,W=g.easing||r,$="startValue"in g&&g.startValue.length>0,M="startValue"in g?g.startValue:0,P="endValue"in g?g.endValue:100,z=g.byValue||($?M.map(function(X,et){return P[et]-M[et]}):P-M);g.onStart&&g.onStart(),function X(et){var J=(N=et||+new Date)>D?C:N-L,Z=J/C,it=$?M.map(function(lt,ht){return W(J,M[ht],z[ht],C)}):W(J,M,z,C),at=Math.abs($?(it[0]-M[0])/z[0]:(it-M)/z);if(v.currentValue=$?it.slice():it,v.completionRate=at,v.durationRate=Z,!y){if(!j(it,at,Z))return N>D?(v.currentValue=$?P.slice():P,v.completionRate=1,v.durationRate=1,F($?P.slice():P,1,1),U(P,1,1),void _()):(F(it,at,Z),void p(X));_()}}(L)}),v.cancel},b.util.requestAnimFrame=p,b.util.cancelAnimFrame=function(){return c.apply(b.window,arguments)},b.runningAnimations=u}(),function(){function h(s,u,d){var r="rgba("+parseInt(s[0]+d*(u[0]-s[0]),10)+","+parseInt(s[1]+d*(u[1]-s[1]),10)+","+parseInt(s[2]+d*(u[2]-s[2]),10);return r+=","+(s&&u?parseFloat(s[3]+d*(u[3]-s[3])):1),r+=")"}b.util.animateColor=function(s,u,d,r){var a=new b.Color(s).getSource(),c=new b.Color(u).getSource(),p=r.onComplete,g=r.onChange;return r=r||{},b.util.animate(b.util.object.extend(r,{duration:d||500,startValue:a,endValue:c,byValue:c,easing:function(v,y,_,B){return h(y,_,r.colorEasing?r.colorEasing(v,B):1-Math.cos(v/B*(Math.PI/2)))},onComplete:function(v,y,_){if(p)return p(h(c,c,0),y,_)},onChange:function(v,y,_){if(g){if(Array.isArray(v))return g(h(v,v,0),y,_);g(v,y,_)}}}))}}(),function(){function h(r,a,c,p){return r<Math.abs(a)?(r=a,p=c/4):p=a===0&&r===0?c/(2*Math.PI)*Math.asin(1):c/(2*Math.PI)*Math.asin(a/r),{a:r,c:a,p:c,s:p}}function s(r,a,c){return r.a*Math.pow(2,10*(a-=1))*Math.sin((a*c-r.s)*(2*Math.PI)/r.p)}function u(r,a,c,p){return c-d(p-r,0,c,p)+a}function d(r,a,c,p){return(r/=p)<1/2.75?c*(7.5625*r*r)+a:r<2/2.75?c*(7.5625*(r-=1.5/2.75)*r+.75)+a:r<2.5/2.75?c*(7.5625*(r-=2.25/2.75)*r+.9375)+a:c*(7.5625*(r-=2.625/2.75)*r+.984375)+a}b.util.ease={easeInQuad:function(r,a,c,p){return c*(r/=p)*r+a},easeOutQuad:function(r,a,c,p){return-c*(r/=p)*(r-2)+a},easeInOutQuad:function(r,a,c,p){return(r/=p/2)<1?c/2*r*r+a:-c/2*(--r*(r-2)-1)+a},easeInCubic:function(r,a,c,p){return c*(r/=p)*r*r+a},easeOutCubic:function(r,a,c,p){return c*((r=r/p-1)*r*r+1)+a},easeInOutCubic:function(r,a,c,p){return(r/=p/2)<1?c/2*r*r*r+a:c/2*((r-=2)*r*r+2)+a},easeInQuart:function(r,a,c,p){return c*(r/=p)*r*r*r+a},easeOutQuart:function(r,a,c,p){return-c*((r=r/p-1)*r*r*r-1)+a},easeInOutQuart:function(r,a,c,p){return(r/=p/2)<1?c/2*r*r*r*r+a:-c/2*((r-=2)*r*r*r-2)+a},easeInQuint:function(r,a,c,p){return c*(r/=p)*r*r*r*r+a},easeOutQuint:function(r,a,c,p){return c*((r=r/p-1)*r*r*r*r+1)+a},easeInOutQuint:function(r,a,c,p){return(r/=p/2)<1?c/2*r*r*r*r*r+a:c/2*((r-=2)*r*r*r*r+2)+a},easeInSine:function(r,a,c,p){return-c*Math.cos(r/p*(Math.PI/2))+c+a},easeOutSine:function(r,a,c,p){return c*Math.sin(r/p*(Math.PI/2))+a},easeInOutSine:function(r,a,c,p){return-c/2*(Math.cos(Math.PI*r/p)-1)+a},easeInExpo:function(r,a,c,p){return r===0?a:c*Math.pow(2,10*(r/p-1))+a},easeOutExpo:function(r,a,c,p){return r===p?a+c:c*(1-Math.pow(2,-10*r/p))+a},easeInOutExpo:function(r,a,c,p){return r===0?a:r===p?a+c:(r/=p/2)<1?c/2*Math.pow(2,10*(r-1))+a:c/2*(2-Math.pow(2,-10*--r))+a},easeInCirc:function(r,a,c,p){return-c*(Math.sqrt(1-(r/=p)*r)-1)+a},easeOutCirc:function(r,a,c,p){return c*Math.sqrt(1-(r=r/p-1)*r)+a},easeInOutCirc:function(r,a,c,p){return(r/=p/2)<1?-c/2*(Math.sqrt(1-r*r)-1)+a:c/2*(Math.sqrt(1-(r-=2)*r)+1)+a},easeInElastic:function(r,a,c,p){var g=0;return r===0?a:(r/=p)===1?a+c:(g||(g=.3*p),-s(h(c,c,g,1.70158),r,p)+a)},easeOutElastic:function(r,a,c,p){var g=0;if(r===0)return a;if((r/=p)===1)return a+c;g||(g=.3*p);var v=h(c,c,g,1.70158);return v.a*Math.pow(2,-10*r)*Math.sin((r*p-v.s)*(2*Math.PI)/v.p)+v.c+a},easeInOutElastic:function(r,a,c,p){var g=0;if(r===0)return a;if((r/=p/2)===2)return a+c;g||(g=p*(.3*1.5));var v=h(c,c,g,1.70158);return r<1?-.5*s(v,r,p)+a:v.a*Math.pow(2,-10*(r-=1))*Math.sin((r*p-v.s)*(2*Math.PI)/v.p)*.5+v.c+a},easeInBack:function(r,a,c,p,g){return g===void 0&&(g=1.70158),c*(r/=p)*r*((g+1)*r-g)+a},easeOutBack:function(r,a,c,p,g){return g===void 0&&(g=1.70158),c*((r=r/p-1)*r*((g+1)*r+g)+1)+a},easeInOutBack:function(r,a,c,p,g){return g===void 0&&(g=1.70158),(r/=p/2)<1?c/2*(r*r*((1+(g*=1.525))*r-g))+a:c/2*((r-=2)*r*((1+(g*=1.525))*r+g)+2)+a},easeInBounce:u,easeOutBounce:d,easeInOutBounce:function(r,a,c,p){return r<p/2?.5*u(2*r,0,c,p)+a:.5*d(2*r-p,0,c,p)+.5*c+a}}}(),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.util.object.clone,r=s.util.toFixed,a=s.util.parseUnit,c=s.util.multiplyTransformMatrices,p={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},g={stroke:"strokeOpacity",fill:"fillOpacity"},v="font-size",y="clip-path";function _(M){return M in p?p[M]:M}function B(M,P,z,X){var et,J=Array.isArray(P);if(M!=="fill"&&M!=="stroke"||P!=="none"){if(M==="strokeUniform")return P==="non-scaling-stroke";if(M==="strokeDashArray")P=P==="none"?null:P.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(M==="transformMatrix")P=z&&z.transformMatrix?c(z.transformMatrix,s.parseTransformAttribute(P)):s.parseTransformAttribute(P);else if(M==="visible")P=P!=="none"&&P!=="hidden",z&&z.visible===!1&&(P=!1);else if(M==="opacity")P=parseFloat(P),z&&z.opacity!==void 0&&(P*=z.opacity);else if(M==="textAnchor")P=P==="start"?"left":P==="end"?"right":"center";else if(M==="charSpacing")et=a(P,X)/X*1e3;else if(M==="paintFirst"){var Z=P.indexOf("fill"),it=P.indexOf("stroke");P="fill",(Z>-1&&it>-1&&it<Z||Z===-1&&it>-1)&&(P="stroke")}else{if(M==="href"||M==="xlink:href"||M==="font")return P;if(M==="imageSmoothing")return P==="optimizeQuality";et=J?P.map(a):a(P,X)}}else P="";return!J&&isNaN(et)?P:et}function N(M){return new RegExp("^("+M.join("|")+")\\b","i")}function L(M,P){var z,X,et,J,Z=[];for(et=0,J=P.length;et<J;et++)z=P[et],X=M.getElementsByTagName(z),Z=Z.concat(Array.prototype.slice.call(X));return Z}function C(M,P){var z,X=!0;return(z=D(M,P.pop()))&&P.length&&(X=function(et,J){for(var Z,it=!0;et.parentNode&&et.parentNode.nodeType===1&&J.length;)it&&(Z=J.pop()),it=D(et=et.parentNode,Z);return J.length===0}(M,P)),z&&X&&P.length===0}function D(M,P){var z,X,et=M.nodeName,J=M.getAttribute("class"),Z=M.getAttribute("id");if(z=new RegExp("^"+et,"i"),P=P.replace(z,""),Z&&P.length&&(z=new RegExp("#"+Z+"(?![a-zA-Z\\-]+)","i"),P=P.replace(z,"")),J&&P.length)for(X=(J=J.split(" ")).length;X--;)z=new RegExp("\\."+J[X]+"(?![a-zA-Z\\-]+)","i"),P=P.replace(z,"");return P.length===0}function F(M,P){var z;if(M.getElementById&&(z=M.getElementById(P)),z)return z;var X,et,J,Z=M.getElementsByTagName("*");for(et=0,J=Z.length;et<J;et++)if(P===(X=Z[et]).getAttribute("id"))return X}s.svgValidTagNamesRegEx=N(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),s.svgViewBoxElementsRegEx=N(["symbol","image","marker","pattern","view","svg"]),s.svgInvalidAncestorsRegEx=N(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),s.svgValidParentsRegEx=N(["symbol","g","a","svg","clipPath","defs"]),s.cssRules={},s.gradientDefs={},s.clipPaths={},s.parseTransformAttribute=function(){function M(it,at,lt){it[lt]=Math.tan(s.util.degreesToRadians(at[0]))}var P=s.iMatrix,z=s.reNum,X=s.commaWsp,et="(?:"+("(?:(matrix)\\s*\\(\\s*("+z+")"+X+"("+z+")"+X+"("+z+")"+X+"("+z+")"+X+"("+z+")"+X+"("+z+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+z+")(?:"+X+"("+z+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+z+")(?:"+X+"("+z+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+z+")(?:"+X+"("+z+")"+X+"("+z+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+z+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+z+")\\s*\\))")+")",J=new RegExp("^\\s*(?:"+("(?:"+et+"(?:"+X+"*"+et+")*)")+"?)\\s*$"),Z=new RegExp(et,"g");return function(it){var at=P.concat(),lt=[];if(!it||it&&!J.test(it))return at;it.replace(Z,function(Ct){var ft=new RegExp(et).exec(Ct).filter(function(mt){return!!mt}),At=ft[1],pt=ft.slice(2).map(parseFloat);switch(At){case"translate":(function(mt,_t){mt[4]=_t[0],_t.length===2&&(mt[5]=_t[1])})(at,pt);break;case"rotate":pt[0]=s.util.degreesToRadians(pt[0]),function(mt,_t){var It=s.util.cos(_t[0]),yt=s.util.sin(_t[0]),Bt=0,Ot=0;_t.length===3&&(Bt=_t[1],Ot=_t[2]),mt[0]=It,mt[1]=yt,mt[2]=-yt,mt[3]=It,mt[4]=Bt-(It*Bt-yt*Ot),mt[5]=Ot-(yt*Bt+It*Ot)}(at,pt);break;case"scale":(function(mt,_t){var It=_t[0],yt=_t.length===2?_t[1]:_t[0];mt[0]=It,mt[3]=yt})(at,pt);break;case"skewX":M(at,pt,2);break;case"skewY":M(at,pt,1);break;case"matrix":at=pt}lt.push(at.concat()),at=P.concat()});for(var ht=lt[0];lt.length>1;)lt.shift(),ht=s.util.multiplyTransformMatrices(ht,lt[0]);return ht}}();var j=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function U(M){if(!s.svgViewBoxElementsRegEx.test(M.nodeName))return{};var P,z,X,et,J,Z,it=M.getAttribute("viewBox"),at=1,lt=1,ht=M.getAttribute("width"),Ct=M.getAttribute("height"),ft=M.getAttribute("x")||0,At=M.getAttribute("y")||0,pt=M.getAttribute("preserveAspectRatio")||"",mt=!it||!(it=it.match(j)),_t=!ht||!Ct||ht==="100%"||Ct==="100%",It=mt&&_t,yt={},Bt="",Ot=0,Wt=0;if(yt.width=0,yt.height=0,yt.toBeParsed=It,mt&&(ft||At)&&M.parentNode&&M.parentNode.nodeName!=="#document"&&(Bt=" translate("+a(ft)+" "+a(At)+") ",J=(M.getAttribute("transform")||"")+Bt,M.setAttribute("transform",J),M.removeAttribute("x"),M.removeAttribute("y")),It)return yt;if(mt)return yt.width=a(ht),yt.height=a(Ct),yt;if(P=-parseFloat(it[1]),z=-parseFloat(it[2]),X=parseFloat(it[3]),et=parseFloat(it[4]),yt.minX=P,yt.minY=z,yt.viewBoxWidth=X,yt.viewBoxHeight=et,_t?(yt.width=X,yt.height=et):(yt.width=a(ht),yt.height=a(Ct),at=yt.width/X,lt=yt.height/et),(pt=s.util.parsePreserveAspectRatioAttribute(pt)).alignX!=="none"&&(pt.meetOrSlice==="meet"&&(lt=at=at>lt?lt:at),pt.meetOrSlice==="slice"&&(lt=at=at>lt?at:lt),Ot=yt.width-X*at,Wt=yt.height-et*at,pt.alignX==="Mid"&&(Ot/=2),pt.alignY==="Mid"&&(Wt/=2),pt.alignX==="Min"&&(Ot=0),pt.alignY==="Min"&&(Wt=0)),at===1&&lt===1&&P===0&&z===0&&ft===0&&At===0)return yt;if((ft||At)&&M.parentNode.nodeName!=="#document"&&(Bt=" translate("+a(ft)+" "+a(At)+") "),J=Bt+" matrix("+at+" 0 0 "+lt+" "+(P*at+Ot)+" "+(z*lt+Wt)+") ",M.nodeName==="svg"){for(Z=M.ownerDocument.createElementNS(s.svgNS,"g");M.firstChild;)Z.appendChild(M.firstChild);M.appendChild(Z)}else(Z=M).removeAttribute("x"),Z.removeAttribute("y"),J=Z.getAttribute("transform")+J;return Z.setAttribute("transform",J),yt}function W(M,P){var z="xlink:href",X=F(M,P.getAttribute(z).slice(1));if(X&&X.getAttribute(z)&&W(M,X),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(J){X&&!P.hasAttribute(J)&&X.hasAttribute(J)&&P.setAttribute(J,X.getAttribute(J))}),!P.children.length)for(var et=X.cloneNode(!0);et.firstChild;)P.appendChild(et.firstChild);P.removeAttribute(z)}s.parseSVGDocument=function(M,P,z,X){if(M){(function(ft){for(var At=L(ft,["use","svg:use"]),pt=0;At.length&&pt<At.length;){var mt=At[pt],_t=mt.getAttribute("xlink:href")||mt.getAttribute("href");if(_t===null)return;var It,yt,Bt,Ot,Wt=_t.slice(1),le=mt.getAttribute("x")||0,ve=mt.getAttribute("y")||0,Xt=F(ft,Wt).cloneNode(!0),_e=(Xt.getAttribute("transform")||"")+" translate("+le+", "+ve+")",vn=At.length,Ye=s.svgNS;if(U(Xt),/^svg$/i.test(Xt.nodeName)){var nn=Xt.ownerDocument.createElementNS(Ye,"g");for(yt=0,Ot=(Bt=Xt.attributes).length;yt<Ot;yt++)It=Bt.item(yt),nn.setAttributeNS(Ye,It.nodeName,It.nodeValue);for(;Xt.firstChild;)nn.appendChild(Xt.firstChild);Xt=nn}for(yt=0,Ot=(Bt=mt.attributes).length;yt<Ot;yt++)(It=Bt.item(yt)).nodeName!=="x"&&It.nodeName!=="y"&&It.nodeName!=="xlink:href"&&It.nodeName!=="href"&&(It.nodeName==="transform"?_e=It.nodeValue+" "+_e:Xt.setAttribute(It.nodeName,It.nodeValue));Xt.setAttribute("transform",_e),Xt.setAttribute("instantiated_by_use","1"),Xt.removeAttribute("id"),mt.parentNode.replaceChild(Xt,mt),At.length===vn&&pt++}})(M);var et,J,Z=s.Object.__uid++,it=U(M),at=s.util.toArray(M.getElementsByTagName("*"));if(it.crossOrigin=X&&X.crossOrigin,it.svgUid=Z,at.length===0&&s.isLikelyNode){var lt=[];for(et=0,J=(at=M.selectNodes('//*[name(.)!="svg"]')).length;et<J;et++)lt[et]=at[et];at=lt}var ht=at.filter(function(ft){return U(ft),s.svgValidTagNamesRegEx.test(ft.nodeName.replace("svg:",""))&&!function(At,pt){for(;At&&(At=At.parentNode);)if(At.nodeName&&pt.test(At.nodeName.replace("svg:",""))&&!At.getAttribute("instantiated_by_use"))return!0;return!1}(ft,s.svgInvalidAncestorsRegEx)});if(!ht||ht&&!ht.length)P&&P([],{});else{var Ct={};at.filter(function(ft){return ft.nodeName.replace("svg:","")==="clipPath"}).forEach(function(ft){var At=ft.getAttribute("id");Ct[At]=s.util.toArray(ft.getElementsByTagName("*")).filter(function(pt){return s.svgValidTagNamesRegEx.test(pt.nodeName.replace("svg:",""))})}),s.gradientDefs[Z]=s.getGradientDefs(M),s.cssRules[Z]=s.getCSSRules(M),s.clipPaths[Z]=Ct,s.parseElements(ht,function(ft,At){P&&(P(ft,it,At,at),delete s.gradientDefs[Z],delete s.cssRules[Z],delete s.clipPaths[Z])},d(it),z,X)}}};var $=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");u(s,{parseFontDeclaration:function(M,P){var z=M.match($);if(z){var X=z[1],et=z[3],J=z[4],Z=z[5],it=z[6];X&&(P.fontStyle=X),et&&(P.fontWeight=isNaN(parseFloat(et))?et:parseFloat(et)),J&&(P.fontSize=a(J)),it&&(P.fontFamily=it),Z&&(P.lineHeight=Z==="normal"?1:Z)}},getGradientDefs:function(M){var P,z=L(M,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),X=0,et={};for(X=z.length;X--;)(P=z[X]).getAttribute("xlink:href")&&W(M,P),et[P.getAttribute("id")]=P;return et},parseAttributes:function(M,P,z){if(M){var X,et,J,Z={};z===void 0&&(z=M.getAttribute("svgUid")),M.parentNode&&s.svgValidParentsRegEx.test(M.parentNode.nodeName)&&(Z=s.parseAttributes(M.parentNode,P,z));var it=P.reduce(function(pt,mt){return(X=M.getAttribute(mt))&&(pt[mt]=X),pt},{}),at=u(function(pt,mt){var _t={};for(var It in s.cssRules[mt])if(C(pt,It.split(" ")))for(var yt in s.cssRules[mt][It])_t[yt]=s.cssRules[mt][It][yt];return _t}(M,z),s.parseStyleAttribute(M));it=u(it,at),at[y]&&M.setAttribute(y,at[y]),et=J=Z.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,it[v]&&(it[v]=et=a(it[v],J));var lt,ht,Ct={};for(var ft in it)ht=B(lt=_(ft),it[ft],Z,et),Ct[lt]=ht;Ct&&Ct.font&&s.parseFontDeclaration(Ct.font,Ct);var At=u(Z,Ct);return s.svgValidParentsRegEx.test(M.nodeName)?At:function(pt){for(var mt in g)if(pt[g[mt]]!==void 0&&pt[mt]!==""){if(pt[mt]===void 0){if(!s.Object.prototype[mt])continue;pt[mt]=s.Object.prototype[mt]}if(pt[mt].indexOf("url(")!==0){var _t=new s.Color(pt[mt]);pt[mt]=_t.setAlpha(r(_t.getAlpha()*pt[g[mt]],2)).toRgba()}}return pt}(At)}},parseElements:function(M,P,z,X,et){new s.ElementsParser(M,P,z,X,et).parse()},parseStyleAttribute:function(M){var P={},z=M.getAttribute("style");return z&&(typeof z=="string"?function(X,et){var J,Z;X.replace(/;\s*$/,"").split(";").forEach(function(it){var at=it.split(":");J=at[0].trim().toLowerCase(),Z=at[1].trim(),et[J]=Z})}(z,P):function(X,et){var J,Z;for(var it in X)X[it]!==void 0&&(J=it.toLowerCase(),Z=X[it],et[J]=Z)}(z,P)),P},parsePointsAttribute:function(M){if(!M)return null;var P,z,X=[];for(P=0,z=(M=(M=M.replace(/,/g," ").trim()).split(/\s+/)).length;P<z;P+=2)X.push({x:parseFloat(M[P]),y:parseFloat(M[P+1])});return X},getCSSRules:function(M){var P,z,X=M.getElementsByTagName("style"),et={};for(P=0,z=X.length;P<z;P++){var J=X[P].textContent;(J=J.replace(/\/\*[\s\S]*?\*\//g,"")).trim()!==""&&J.split("}").filter(function(Z){return Z.trim()}).forEach(function(Z){var it=Z.split("{"),at={},lt=it[1].trim().split(";").filter(function(At){return At.trim()});for(P=0,z=lt.length;P<z;P++){var ht=lt[P].split(":"),Ct=ht[0].trim(),ft=ht[1].trim();at[Ct]=ft}(Z=it[0].trim()).split(",").forEach(function(At){(At=At.replace(/^svg/i,"").trim())!==""&&(et[At]?s.util.object.extend(et[At],at):et[At]=s.util.object.clone(at))})})}return et},loadSVGFromURL:function(M,P,z,X){M=M.replace(/^\n\s*/,"").trim(),new s.util.request(M,{method:"get",onComplete:function(et){var J=et.responseXML;if(!J||!J.documentElement)return P&&P(null),!1;s.parseSVGDocument(J.documentElement,function(Z,it,at,lt){P&&P(Z,it,at,lt)},z,X)}})},loadSVGFromString:function(M,P,z,X){var et=new s.window.DOMParser().parseFromString(M.trim(),"text/xml");s.parseSVGDocument(et.documentElement,function(J,Z,it,at){P(J,Z,it,at)},z,X)}})}(t),b.ElementsParser=function(h,s,u,d,r,a){this.elements=h,this.callback=s,this.options=u,this.reviver=d,this.svgUid=u&&u.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=a},(k=b.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},k.createObjects=function(){var h=this;this.elements.forEach(function(s,u){s.setAttribute("svgUid",h.svgUid),h.createObject(s,u)})},k.findTag=function(h){return b[b.util.string.capitalize(h.tagName.replace("svg:",""))]},k.createObject=function(h,s){var u=this.findTag(h);if(u&&u.fromElement)try{u.fromElement(h,this.createCallback(s,h),this.options)}catch(d){b.log(d)}else this.checkIfDone()},k.createCallback=function(h,s){var u=this;return function(d){var r;u.resolveGradient(d,s,"fill"),u.resolveGradient(d,s,"stroke"),d instanceof b.Image&&d._originalElement&&(r=d.parsePreserveAspectRatioAttribute(s)),d._removeTransformMatrix(r),u.resolveClipPath(d,s),u.reviver&&u.reviver(s,d),u.instances[h]=d,u.checkIfDone()}},k.extractPropertyDefinition=function(h,s,u){var d=h[s],r=this.regexUrl;if(r.test(d)){r.lastIndex=0;var a=r.exec(d)[1];return r.lastIndex=0,b[u][this.svgUid][a]}},k.resolveGradient=function(h,s,u){var d=this.extractPropertyDefinition(h,u,"gradientDefs");if(d){var r=s.getAttribute(u+"-opacity"),a=b.Gradient.fromElement(d,h,r,this.options);h.set(u,a)}},k.createClipPathCallback=function(h,s){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,s.push(u)}},k.resolveClipPath=function(h,s){var u,d,r,a,c=this.extractPropertyDefinition(h,"clipPath","clipPaths");if(c){r=[],d=b.util.invertTransform(h.calcTransformMatrix());for(var p=c[0].parentNode,g=s;g.parentNode&&g.getAttribute("clip-path")!==h.clipPath;)g=g.parentNode;g.parentNode.appendChild(p);for(var v=0;v<c.length;v++)u=c[v],this.findTag(u).fromElement(u,this.createClipPathCallback(h,r),this.options);c=r.length===1?r[0]:new b.Group(r),a=b.util.multiplyTransformMatrices(d,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,g);var y=b.util.qrDecompose(a);c.flipX=!1,c.flipY=!1,c.set("scaleX",y.scaleX),c.set("scaleY",y.scaleY),c.angle=y.angle,c.skewX=y.skewX,c.skewY=0,c.setPositionByOrigin({x:y.translateX,y:y.translateY},"center","center"),h.clipPath=c}else delete h.clipPath},k.checkIfDone=function(){--this.numElements==0&&(this.instances=this.instances.filter(function(h){return h!=null}),this.callback(this.instances,this.elements))},function(h){var s=h.fabric||(h.fabric={});function u(d,r){this.x=d,this.y=r}s.Point?s.warn("fabric.Point is already defined"):(s.Point=u,u.prototype={type:"point",constructor:u,add:function(d){return new u(this.x+d.x,this.y+d.y)},addEquals:function(d){return this.x+=d.x,this.y+=d.y,this},scalarAdd:function(d){return new u(this.x+d,this.y+d)},scalarAddEquals:function(d){return this.x+=d,this.y+=d,this},subtract:function(d){return new u(this.x-d.x,this.y-d.y)},subtractEquals:function(d){return this.x-=d.x,this.y-=d.y,this},scalarSubtract:function(d){return new u(this.x-d,this.y-d)},scalarSubtractEquals:function(d){return this.x-=d,this.y-=d,this},multiply:function(d){return new u(this.x*d,this.y*d)},multiplyEquals:function(d){return this.x*=d,this.y*=d,this},divide:function(d){return new u(this.x/d,this.y/d)},divideEquals:function(d){return this.x/=d,this.y/=d,this},eq:function(d){return this.x===d.x&&this.y===d.y},lt:function(d){return this.x<d.x&&this.y<d.y},lte:function(d){return this.x<=d.x&&this.y<=d.y},gt:function(d){return this.x>d.x&&this.y>d.y},gte:function(d){return this.x>=d.x&&this.y>=d.y},lerp:function(d,r){return r===void 0&&(r=.5),r=Math.max(Math.min(1,r),0),new u(this.x+(d.x-this.x)*r,this.y+(d.y-this.y)*r)},distanceFrom:function(d){var r=this.x-d.x,a=this.y-d.y;return Math.sqrt(r*r+a*a)},midPointFrom:function(d){return this.lerp(d)},min:function(d){return new u(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new u(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,r){return this.x=d,this.y=r,this},setX:function(d){return this.x=d,this},setY:function(d){return this.y=d,this},setFromPoint:function(d){return this.x=d.x,this.y=d.y,this},swap:function(d){var r=this.x,a=this.y;this.x=d.x,this.y=d.y,d.x=r,d.y=a},clone:function(){return new u(this.x,this.y)}})}(t),function(h){var s=h.fabric||(h.fabric={});function u(d){this.status=d,this.points=[]}s.Intersection?s.warn("fabric.Intersection is already defined"):(s.Intersection=u,s.Intersection.prototype={constructor:u,appendPoint:function(d){return this.points.push(d),this},appendPoints:function(d){return this.points=this.points.concat(d),this}},s.Intersection.intersectLineLine=function(d,r,a,c){var p,g=(c.x-a.x)*(d.y-a.y)-(c.y-a.y)*(d.x-a.x),v=(r.x-d.x)*(d.y-a.y)-(r.y-d.y)*(d.x-a.x),y=(c.y-a.y)*(r.x-d.x)-(c.x-a.x)*(r.y-d.y);if(y!==0){var _=g/y,B=v/y;0<=_&&_<=1&&0<=B&&B<=1?(p=new u("Intersection")).appendPoint(new s.Point(d.x+_*(r.x-d.x),d.y+_*(r.y-d.y))):p=new u}else p=new u(g===0||v===0?"Coincident":"Parallel");return p},s.Intersection.intersectLinePolygon=function(d,r,a){var c,p,g,v,y=new u,_=a.length;for(v=0;v<_;v++)c=a[v],p=a[(v+1)%_],g=u.intersectLineLine(d,r,c,p),y.appendPoints(g.points);return y.points.length>0&&(y.status="Intersection"),y},s.Intersection.intersectPolygonPolygon=function(d,r){var a,c=new u,p=d.length;for(a=0;a<p;a++){var g=d[a],v=d[(a+1)%p],y=u.intersectLinePolygon(g,v,r);c.appendPoints(y.points)}return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonRectangle=function(d,r,a){var c=r.min(a),p=r.max(a),g=new s.Point(p.x,c.y),v=new s.Point(c.x,p.y),y=u.intersectLinePolygon(c,g,d),_=u.intersectLinePolygon(g,p,d),B=u.intersectLinePolygon(p,v,d),N=u.intersectLinePolygon(v,c,d),L=new u;return L.appendPoints(y.points),L.appendPoints(_.points),L.appendPoints(B.points),L.appendPoints(N.points),L.points.length>0&&(L.status="Intersection"),L})}(t),function(h){var s=h.fabric||(h.fabric={});function u(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}function d(r,a,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?r+6*(a-r)*c:c<.5?a:c<2/3?r+(a-r)*(2/3-c)*6:r}s.Color?s.warn("fabric.Color is already defined."):(s.Color=u,s.Color.prototype={_tryParsingColor:function(r){var a;r in u.colorNameMap&&(r=u.colorNameMap[r]),r==="transparent"&&(a=[255,255,255,0]),a||(a=u.sourceFromHex(r)),a||(a=u.sourceFromRgb(r)),a||(a=u.sourceFromHsl(r)),a||(a=[0,0,0,1]),a&&this.setSource(a)},_rgbToHsl:function(r,a,c){r/=255,a/=255,c/=255;var p,g,v,y=s.util.array.max([r,a,c]),_=s.util.array.min([r,a,c]);if(v=(y+_)/2,y===_)p=g=0;else{var B=y-_;switch(g=v>.5?B/(2-y-_):B/(y+_),y){case r:p=(a-c)/B+(a<c?6:0);break;case a:p=(c-r)/B+2;break;case c:p=(r-a)/B+4}p/=6}return[Math.round(360*p),Math.round(100*g),Math.round(100*v)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),a=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+a[0]+","+a[1]+"%,"+a[2]+"%)"},toHsla:function(){var r=this.getSource(),a=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+r[3]+")"},toHex:function(){var r,a,c,p=this.getSource();return r=(r=p[0].toString(16)).length===1?"0"+r:r,a=(a=p[1].toString(16)).length===1?"0"+a:a,c=(c=p[2].toString(16)).length===1?"0"+c:c,r.toUpperCase()+a.toUpperCase()+c.toUpperCase()},toHexa:function(){var r,a=this.getSource();return r=(r=(r=Math.round(255*a[3])).toString(16)).length===1?"0"+r:r,this.toHex()+r.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var a=this.getSource();return a[3]=r,this.setSource(a),this},toGrayscale:function(){var r=this.getSource(),a=parseInt((.3*r[0]+.59*r[1]+.11*r[2]).toFixed(0),10),c=r[3];return this.setSource([a,a,a,c]),this},toBlackWhite:function(r){var a=this.getSource(),c=(.3*a[0]+.59*a[1]+.11*a[2]).toFixed(0),p=a[3];return r=r||127,c=Number(c)<Number(r)?0:255,this.setSource([c,c,c,p]),this},overlayWith:function(r){r instanceof u||(r=new u(r));var a,c=[],p=this.getAlpha(),g=this.getSource(),v=r.getSource();for(a=0;a<3;a++)c.push(Math.round(.5*g[a]+.5*v[a]));return c[3]=p,this.setSource(c),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},s.Color.fromRgb=function(r){return u.fromSource(u.sourceFromRgb(r))},s.Color.sourceFromRgb=function(r){var a=r.match(u.reRGBa);if(a){var c=parseInt(a[1],10)/(/%$/.test(a[1])?100:1)*(/%$/.test(a[1])?255:1),p=parseInt(a[2],10)/(/%$/.test(a[2])?100:1)*(/%$/.test(a[2])?255:1),g=parseInt(a[3],10)/(/%$/.test(a[3])?100:1)*(/%$/.test(a[3])?255:1);return[parseInt(c,10),parseInt(p,10),parseInt(g,10),a[4]?parseFloat(a[4]):1]}},s.Color.fromRgba=u.fromRgb,s.Color.fromHsl=function(r){return u.fromSource(u.sourceFromHsl(r))},s.Color.sourceFromHsl=function(r){var a=r.match(u.reHSLa);if(a){var c,p,g,v=(parseFloat(a[1])%360+360)%360/360,y=parseFloat(a[2])/(/%$/.test(a[2])?100:1),_=parseFloat(a[3])/(/%$/.test(a[3])?100:1);if(y===0)c=p=g=_;else{var B=_<=.5?_*(y+1):_+y-_*y,N=2*_-B;c=d(N,B,v+1/3),p=d(N,B,v),g=d(N,B,v-1/3)}return[Math.round(255*c),Math.round(255*p),Math.round(255*g),a[4]?parseFloat(a[4]):1]}},s.Color.fromHsla=u.fromHsl,s.Color.fromHex=function(r){return u.fromSource(u.sourceFromHex(r))},s.Color.sourceFromHex=function(r){if(r.match(u.reHex)){var a=r.slice(r.indexOf("#")+1),c=a.length===3||a.length===4,p=a.length===8||a.length===4,g=c?a.charAt(0)+a.charAt(0):a.substring(0,2),v=c?a.charAt(1)+a.charAt(1):a.substring(2,4),y=c?a.charAt(2)+a.charAt(2):a.substring(4,6),_=p?c?a.charAt(3)+a.charAt(3):a.substring(6,8):"FF";return[parseInt(g,16),parseInt(v,16),parseInt(y,16),parseFloat((parseInt(_,16)/255).toFixed(2))]}},s.Color.fromSource=function(r){var a=new u;return a.setSource(r),a})}(t),function(h){var s=h.fabric||(h.fabric={}),u=["e","se","s","sw","w","nw","n","ne","e"],d=["ns","nesw","ew","nwse"],r={},a="left",c="top",p="right",g="bottom",v="center",y={top:g,bottom:c,left:p,right:a,center:v},_=s.util.radiansToDegrees,B=Math.sign||function(J){return(J>0)-(J<0)||+J};function N(J,Z){var it=J.angle+_(Math.atan2(Z.y,Z.x))+360;return Math.round(it%360/45)}function L(J,Z){var it=Z.transform.target,at=it.canvas,lt=s.util.object.clone(Z);lt.target=it,at&&at.fire("object:"+J,lt),it.fire(J,Z)}function C(J,Z){var it=Z.canvas,at=J[it.uniScaleKey];return it.uniformScaling&&!at||!it.uniformScaling&&at}function D(J){return J.originX===v&&J.originY===v}function F(J,Z,it){var at=J.lockScalingX,lt=J.lockScalingY;return!(!at||!lt)||!(Z||!at&&!lt||!it)||!(!at||Z!=="x")||!(!lt||Z!=="y")}function j(J,Z,it,at){return{e:J,transform:Z,pointer:{x:it,y:at}}}function U(J){return function(Z,it,at,lt){var ht=it.target,Ct=ht.getCenterPoint(),ft=ht.translateToOriginPoint(Ct,it.originX,it.originY),At=J(Z,it,at,lt);return ht.setPositionByOrigin(ft,it.originX,it.originY),At}}function W(J,Z){return function(it,at,lt,ht){var Ct=Z(it,at,lt,ht);return Ct&&L(J,j(it,at,lt,ht)),Ct}}function $(J,Z,it,at,lt){var ht=J.target,Ct=ht.controls[J.corner],ft=ht.canvas.getZoom(),At=ht.padding/ft,pt=ht.toLocalPoint(new s.Point(at,lt),Z,it);return pt.x>=At&&(pt.x-=At),pt.x<=-At&&(pt.x+=At),pt.y>=At&&(pt.y-=At),pt.y<=At&&(pt.y+=At),pt.x-=Ct.offsetX,pt.y-=Ct.offsetY,pt}function M(J){return J.flipX!==J.flipY}function P(J,Z,it,at,lt){if(J[Z]!==0){var ht=lt/J._getTransformedDimensions()[at]*J[it];J.set(it,ht)}}function z(J,Z,it,at){var lt,ht=Z.target,Ct=ht._getTransformedDimensions(0,ht.skewY),ft=$(Z,Z.originX,Z.originY,it,at),At=Math.abs(2*ft.x)-Ct.x,pt=ht.skewX;At<2?lt=0:(lt=_(Math.atan2(At/ht.scaleX,Ct.y/ht.scaleY)),Z.originX===a&&Z.originY===g&&(lt=-lt),Z.originX===p&&Z.originY===c&&(lt=-lt),M(ht)&&(lt=-lt));var mt=pt!==lt;if(mt){var _t=ht._getTransformedDimensions().y;ht.set("skewX",lt),P(ht,"skewY","scaleY","y",_t)}return mt}function X(J,Z,it,at){var lt,ht=Z.target,Ct=ht._getTransformedDimensions(ht.skewX,0),ft=$(Z,Z.originX,Z.originY,it,at),At=Math.abs(2*ft.y)-Ct.y,pt=ht.skewY;At<2?lt=0:(lt=_(Math.atan2(At/ht.scaleY,Ct.x/ht.scaleX)),Z.originX===a&&Z.originY===g&&(lt=-lt),Z.originX===p&&Z.originY===c&&(lt=-lt),M(ht)&&(lt=-lt));var mt=pt!==lt;if(mt){var _t=ht._getTransformedDimensions().x;ht.set("skewY",lt),P(ht,"skewX","scaleX","x",_t)}return mt}function et(J,Z,it,at,lt){lt=lt||{};var ht,Ct,ft,At,pt,mt,_t=Z.target,It=_t.lockScalingX,yt=_t.lockScalingY,Bt=lt.by,Ot=C(J,_t),Wt=F(_t,Bt,Ot),le=Z.gestureScale;if(Wt)return!1;if(le)Ct=Z.scaleX*le,ft=Z.scaleY*le;else{if(ht=$(Z,Z.originX,Z.originY,it,at),pt=Bt!=="y"?B(ht.x):1,mt=Bt!=="x"?B(ht.y):1,Z.signX||(Z.signX=pt),Z.signY||(Z.signY=mt),_t.lockScalingFlip&&(Z.signX!==pt||Z.signY!==mt))return!1;if(At=_t._getTransformedDimensions(),Ot&&!Bt){var ve=Math.abs(ht.x)+Math.abs(ht.y),Xt=Z.original,_e=ve/(Math.abs(At.x*Xt.scaleX/_t.scaleX)+Math.abs(At.y*Xt.scaleY/_t.scaleY));Ct=Xt.scaleX*_e,ft=Xt.scaleY*_e}else Ct=Math.abs(ht.x*_t.scaleX/At.x),ft=Math.abs(ht.y*_t.scaleY/At.y);D(Z)&&(Ct*=2,ft*=2),Z.signX!==pt&&Bt!=="y"&&(Z.originX=y[Z.originX],Ct*=-1,Z.signX=pt),Z.signY!==mt&&Bt!=="x"&&(Z.originY=y[Z.originY],ft*=-1,Z.signY=mt)}var vn=_t.scaleX,Ye=_t.scaleY;return Bt?(Bt==="x"&&_t.set("scaleX",Ct),Bt==="y"&&_t.set("scaleY",ft)):(!It&&_t.set("scaleX",Ct),!yt&&_t.set("scaleY",ft)),vn!==_t.scaleX||Ye!==_t.scaleY}r.scaleCursorStyleHandler=function(J,Z,it){var at=C(J,it),lt="";if(Z.x!==0&&Z.y===0?lt="x":Z.x===0&&Z.y!==0&&(lt="y"),F(it,lt,at))return"not-allowed";var ht=N(it,Z);return u[ht]+"-resize"},r.skewCursorStyleHandler=function(J,Z,it){var at="not-allowed";if(Z.x!==0&&it.lockSkewingY||Z.y!==0&&it.lockSkewingX)return at;var lt=N(it,Z)%4;return d[lt]+"-resize"},r.scaleSkewCursorStyleHandler=function(J,Z,it){return J[it.canvas.altActionKey]?r.skewCursorStyleHandler(J,Z,it):r.scaleCursorStyleHandler(J,Z,it)},r.rotationWithSnapping=W("rotating",U(function(J,Z,it,at){var lt=Z,ht=lt.target,Ct=ht.translateToOriginPoint(ht.getCenterPoint(),lt.originX,lt.originY);if(ht.lockRotation)return!1;var ft,At=Math.atan2(lt.ey-Ct.y,lt.ex-Ct.x),pt=Math.atan2(at-Ct.y,it-Ct.x),mt=_(pt-At+lt.theta);if(ht.snapAngle>0){var _t=ht.snapAngle,It=ht.snapThreshold||_t,yt=Math.ceil(mt/_t)*_t,Bt=Math.floor(mt/_t)*_t;Math.abs(mt-Bt)<It?mt=Bt:Math.abs(mt-yt)<It&&(mt=yt)}return mt<0&&(mt=360+mt),mt%=360,ft=ht.angle!==mt,ht.angle=mt,ft})),r.scalingEqually=W("scaling",U(function(J,Z,it,at){return et(J,Z,it,at)})),r.scalingX=W("scaling",U(function(J,Z,it,at){return et(J,Z,it,at,{by:"x"})})),r.scalingY=W("scaling",U(function(J,Z,it,at){return et(J,Z,it,at,{by:"y"})})),r.scalingYOrSkewingX=function(J,Z,it,at){return J[Z.target.canvas.altActionKey]?r.skewHandlerX(J,Z,it,at):r.scalingY(J,Z,it,at)},r.scalingXOrSkewingY=function(J,Z,it,at){return J[Z.target.canvas.altActionKey]?r.skewHandlerY(J,Z,it,at):r.scalingX(J,Z,it,at)},r.changeWidth=W("resizing",U(function(J,Z,it,at){var lt=Z.target,ht=$(Z,Z.originX,Z.originY,it,at),Ct=lt.strokeWidth/(lt.strokeUniform?lt.scaleX:1),ft=D(Z)?2:1,At=lt.width,pt=Math.abs(ht.x*ft/lt.scaleX)-Ct;return lt.set("width",Math.max(pt,0)),At!==pt})),r.skewHandlerX=function(J,Z,it,at){var lt,ht=Z.target,Ct=ht.skewX,ft=Z.originY;return!ht.lockSkewingX&&(Ct===0?lt=$(Z,v,v,it,at).x>0?a:p:(Ct>0&&(lt=ft===c?a:p),Ct<0&&(lt=ft===c?p:a),M(ht)&&(lt=lt===a?p:a)),Z.originX=lt,W("skewing",U(z))(J,Z,it,at))},r.skewHandlerY=function(J,Z,it,at){var lt,ht=Z.target,Ct=ht.skewY,ft=Z.originX;return!ht.lockSkewingY&&(Ct===0?lt=$(Z,v,v,it,at).y>0?c:g:(Ct>0&&(lt=ft===a?c:g),Ct<0&&(lt=ft===a?g:c),M(ht)&&(lt=lt===c?g:c)),Z.originY=lt,W("skewing",U(X))(J,Z,it,at))},r.dragHandler=function(J,Z,it,at){var lt=Z.target,ht=it-Z.offsetX,Ct=at-Z.offsetY,ft=!lt.get("lockMovementX")&&lt.left!==ht,At=!lt.get("lockMovementY")&&lt.top!==Ct;return ft&&lt.set("left",ht),At&&lt.set("top",Ct),(ft||At)&&L("moving",j(J,Z,it,at)),ft||At},r.scaleOrSkewActionName=function(J,Z,it){var at=J[it.canvas.altActionKey];return Z.x===0?at?"skewX":"scaleY":Z.y===0?at?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(J,Z,it){return it.lockRotation?"not-allowed":Z.cursorStyle},r.fireEvent=L,r.wrapWithFixedAnchor=U,r.wrapWithFireEvent=W,r.getLocalPoint=$,s.controlsUtils=r}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.degreesToRadians,d=s.controlsUtils;d.renderCircleControl=function(r,a,c,p,g){p=p||{};var v,y=this.sizeX||p.cornerSize||g.cornerSize,_=this.sizeY||p.cornerSize||g.cornerSize,B=p.transparentCorners!==void 0?p.transparentCorners:g.transparentCorners,N=B?"stroke":"fill",L=!B&&(p.cornerStrokeColor||g.cornerStrokeColor),C=a,D=c;r.save(),r.fillStyle=p.cornerColor||g.cornerColor,r.strokeStyle=p.cornerStrokeColor||g.cornerStrokeColor,y>_?(v=y,r.scale(1,_/y),D=c*y/_):_>y?(v=_,r.scale(y/_,1),C=a*_/y):v=y,r.lineWidth=1,r.beginPath(),r.arc(C,D,v/2,0,2*Math.PI,!1),r[N](),L&&r.stroke(),r.restore()},d.renderSquareControl=function(r,a,c,p,g){p=p||{};var v=this.sizeX||p.cornerSize||g.cornerSize,y=this.sizeY||p.cornerSize||g.cornerSize,_=p.transparentCorners!==void 0?p.transparentCorners:g.transparentCorners,B=_?"stroke":"fill",N=!_&&(p.cornerStrokeColor||g.cornerStrokeColor),L=v/2,C=y/2;r.save(),r.fillStyle=p.cornerColor||g.cornerColor,r.strokeStyle=p.cornerStrokeColor||g.cornerStrokeColor,r.lineWidth=1,r.translate(a,c),r.rotate(u(g.angle)),r[B+"Rect"](-L,-C,v,y),N&&r.strokeRect(-L,-C,v,y),r.restore()}}(t),function(h){var s=h.fabric||(h.fabric={});s.Control=function(u){for(var d in u)this[d]=u[d]},s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,d){return d.cursorStyle},getActionName:function(u,d){return d.actionName},getVisibility:function(u,d){var r=u._controlsVisibility;return r&&r[d]!==void 0?r[d]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,d){return s.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},d)},calcCornerCoords:function(u,d,r,a,c){var p,g,v,y,_=c?this.touchSizeX:this.sizeX,B=c?this.touchSizeY:this.sizeY;if(_&&B&&_!==B){var N=Math.atan2(B,_),L=Math.sqrt(_*_+B*B)/2,C=N-s.util.degreesToRadians(u),D=Math.PI/2-N-s.util.degreesToRadians(u);p=L*s.util.cos(C),g=L*s.util.sin(C),v=L*s.util.cos(D),y=L*s.util.sin(D)}else L=.7071067812*(_&&B?_:d),C=s.util.degreesToRadians(45-u),p=v=L*s.util.cos(C),g=y=L*s.util.sin(C);return{tl:{x:r-y,y:a-v},tr:{x:r+p,y:a-g},bl:{x:r-p,y:a+g},br:{x:r+y,y:a+v}}},render:function(u,d,r,a,c){((a=a||{}).cornerStyle||c.cornerStyle)==="circle"?s.controlsUtils.renderCircleControl.call(this,u,d,r,a,c):s.controlsUtils.renderSquareControl.call(this,u,d,r,a,c)}}}(t),function(){function h(u,d){var r,a,c,p,g=u.getAttribute("style"),v=u.getAttribute("offset")||0;if(v=(v=parseFloat(v)/(/%$/.test(v)?100:1))<0?0:v>1?1:v,g){var y=g.split(/\s*;\s*/);for(y[y.length-1]===""&&y.pop(),p=y.length;p--;){var _=y[p].split(/\s*:\s*/),B=_[0].trim(),N=_[1].trim();B==="stop-color"?r=N:B==="stop-opacity"&&(c=N)}}return r||(r=u.getAttribute("stop-color")||"rgb(0,0,0)"),c||(c=u.getAttribute("stop-opacity")),a=(r=new b.Color(r)).getAlpha(),c=isNaN(parseFloat(c))?1:parseFloat(c),c*=a*d,{offset:v,color:r.toRgb(),opacity:c}}var s=b.util.object.clone;b.Gradient=b.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(u){u||(u={}),u.coords||(u.coords={});var d,r=this;Object.keys(u).forEach(function(a){r[a]=u[a]}),this.id?this.id+="_"+b.Object.__uid++:this.id=b.Object.__uid++,d={x1:u.coords.x1||0,y1:u.coords.y1||0,x2:u.coords.x2||0,y2:u.coords.y2||0},this.type==="radial"&&(d.r1=u.coords.r1||0,d.r2=u.coords.r2||0),this.coords=d,this.colorStops=u.colorStops.slice()},addColorStop:function(u){for(var d in u){var r=new b.Color(u[d]);this.colorStops.push({offset:parseFloat(d),color:r.toRgb(),opacity:r.getAlpha()})}return this},toObject:function(u){var d={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return b.util.populateWithProperties(this,d,u),d},toSVG:function(u,d){var r,a,c,p,g=s(this.coords,!0),v=(d=d||{},s(this.colorStops,!0)),y=g.r1>g.r2,_=this.gradientTransform?this.gradientTransform.concat():b.iMatrix.concat(),B=-this.offsetX,N=-this.offsetY,L=!!d.additionalTransform,C=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(v.sort(function(U,W){return U.offset-W.offset}),C==="objectBoundingBox"?(B/=u.width,N/=u.height):(B+=u.width/2,N+=u.height/2),u.type==="path"&&this.gradientUnits!=="percentage"&&(B-=u.pathOffset.x,N-=u.pathOffset.y),_[4]-=B,_[5]-=N,p='id="SVGID_'+this.id+'" gradientUnits="'+C+'"',p+=' gradientTransform="'+(L?d.additionalTransform+" ":"")+b.util.matrixToSVG(_)+'" ',this.type==="linear"?c=["<linearGradient ",p,' x1="',g.x1,'" y1="',g.y1,'" x2="',g.x2,'" y2="',g.y2,'">\n']:this.type==="radial"&&(c=["<radialGradient ",p,' cx="',y?g.x1:g.x2,'" cy="',y?g.y1:g.y2,'" r="',y?g.r1:g.r2,'" fx="',y?g.x2:g.x1,'" fy="',y?g.y2:g.y1,'">\n']),this.type==="radial"){if(y)for((v=v.concat()).reverse(),r=0,a=v.length;r<a;r++)v[r].offset=1-v[r].offset;var D=Math.min(g.r1,g.r2);if(D>0){var F=D/Math.max(g.r1,g.r2);for(r=0,a=v.length;r<a;r++)v[r].offset+=F*(1-v[r].offset)}}for(r=0,a=v.length;r<a;r++){var j=v[r];c.push("<stop ",'offset="',100*j.offset+"%",'" style="stop-color:',j.color,j.opacity!==void 0?";stop-opacity: "+j.opacity:";",'"/>\n')}return c.push(this.type==="linear"?"</linearGradient>\n":"</radialGradient>\n"),c.join("")},toLive:function(u){var d,r,a,c=b.util.object.clone(this.coords);if(this.type){for(this.type==="linear"?d=u.createLinearGradient(c.x1,c.y1,c.x2,c.y2):this.type==="radial"&&(d=u.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),r=0,a=this.colorStops.length;r<a;r++){var p=this.colorStops[r].color,g=this.colorStops[r].opacity,v=this.colorStops[r].offset;g!==void 0&&(p=new b.Color(p).setAlpha(g).toRgba()),d.addColorStop(v,p)}return d}}}),b.util.object.extend(b.Gradient,{fromElement:function(u,d,r,a){var c=parseFloat(r)/(/%$/.test(r)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var p,g,v,y,_=u.getElementsByTagName("stop"),B=u.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",N=u.getAttribute("gradientTransform")||"",L=[],C=0,D=0;for(u.nodeName==="linearGradient"||u.nodeName==="LINEARGRADIENT"?(p="linear",g=function(F){return{x1:F.getAttribute("x1")||0,y1:F.getAttribute("y1")||0,x2:F.getAttribute("x2")||"100%",y2:F.getAttribute("y2")||0}}(u)):(p="radial",g=function(F){return{x1:F.getAttribute("fx")||F.getAttribute("cx")||"50%",y1:F.getAttribute("fy")||F.getAttribute("cy")||"50%",r1:0,x2:F.getAttribute("cx")||"50%",y2:F.getAttribute("cy")||"50%",r2:F.getAttribute("r")||"50%"}}(u)),v=_.length;v--;)L.push(h(_[v],c));return y=b.parseTransformAttribute(N),function(F,j,U,W){var $,M;Object.keys(j).forEach(function(P){($=j[P])==="Infinity"?M=1:$==="-Infinity"?M=0:(M=parseFloat(j[P],10),typeof $=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test($)&&(M*=.01,W==="pixels"&&(P!=="x1"&&P!=="x2"&&P!=="r2"||(M*=U.viewBoxWidth||U.width),P!=="y1"&&P!=="y2"||(M*=U.viewBoxHeight||U.height)))),j[P]=M})}(0,g,a,B),B==="pixels"&&(C=-d.left,D=-d.top),new b.Gradient({id:u.getAttribute("id"),type:p,coords:g,colorStops:L,gradientUnits:B,gradientTransform:y,offsetX:C,offsetY:D})}})}(),S=b.util.toFixed,b.Pattern=b.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(h,s){if(h||(h={}),this.id=b.Object.__uid++,this.setOptions(h),!h.source||h.source&&typeof h.source!="string")s&&s(this);else{var u=this;this.source=b.util.createImage(),b.util.loadImage(h.source,function(d,r){u.source=d,s&&s(u,r)},null,this.crossOrigin)}},toObject:function(h){var s,u,d=b.Object.NUM_FRACTION_DIGITS;return typeof this.source.src=="string"?s=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(s=this.source.toDataURL()),u={type:"pattern",source:s,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:S(this.offsetX,d),offsetY:S(this.offsetY,d),patternTransform:this.patternTransform?this.patternTransform.concat():null},b.util.populateWithProperties(this,u,h),u},toSVG:function(h){var s=typeof this.source=="function"?this.source():this.source,u=s.width/h.width,d=s.height/h.height,r=this.offsetX/h.width,a=this.offsetY/h.height,c="";return this.repeat!=="repeat-x"&&this.repeat!=="no-repeat"||(d=1,a&&(d+=Math.abs(a))),this.repeat!=="repeat-y"&&this.repeat!=="no-repeat"||(u=1,r&&(u+=Math.abs(r))),s.src?c=s.src:s.toDataURL&&(c=s.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+a+'" width="'+u+'" height="'+d+'">\n<image x="0" y="0" width="'+s.width+'" height="'+s.height+'" xlink:href="'+c+'"></image>\n</pattern>\n'},setOptions:function(h){for(var s in h)this[s]=h[s]},toLive:function(h){var s=this.source;return!s||s.src!==void 0&&(!s.complete||s.naturalWidth===0||s.naturalHeight===0)?"":h.createPattern(s,this.repeat)}}),function(h){var s=h.fabric||(h.fabric={}),u=s.util.toFixed;s.Shadow?s.warn("fabric.Shadow is already defined."):(s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(d){for(var r in typeof d=="string"&&(d=this._parseShadow(d)),d)this[r]=d[r];this.id=s.Object.__uid++},_parseShadow:function(d){var r=d.trim(),a=s.Shadow.reOffsetsAndBlur.exec(r)||[];return{color:(r.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(a[1],10)||0,offsetY:parseFloat(a[2],10)||0,blur:parseFloat(a[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(d){var r=40,a=40,c=s.Object.NUM_FRACTION_DIGITS,p=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-d.angle)),g=new s.Color(this.color);return d.width&&d.height&&(r=100*u((Math.abs(p.x)+this.blur)/d.width,c)+20,a=100*u((Math.abs(p.y)+this.blur)/d.height,c)+20),d.flipX&&(p.x*=-1),d.flipY&&(p.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+a+'%" height="'+(100+2*a)+'%" x="-'+r+'%" width="'+(100+2*r)+'%" >\n	<feGaussianBlur in="SourceAlpha" stdDeviation="'+u(this.blur?this.blur/2:0,c)+'"></feGaussianBlur>\n	<feOffset dx="'+u(p.x,c)+'" dy="'+u(p.y,c)+'" result="oBlur" ></feOffset>\n	<feFlood flood-color="'+g.toRgb()+'" flood-opacity="'+g.getAlpha()+'"/>\n	<feComposite in2="oBlur" operator="in" />\n	<feMerge>\n		<feMergeNode></feMergeNode>\n		<feMergeNode in="SourceGraphic"></feMergeNode>\n	</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var d={},r=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(a){this[a]!==r[a]&&(d[a]=this[a])},this),d}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(t),function(){if(b.StaticCanvas)b.warn("fabric.StaticCanvas is already defined.");else{var h=b.util.object.extend,s=b.util.getElementOffset,u=b.util.removeFromArray,d=b.util.toFixed,r=b.util.transformPoint,a=b.util.invertTransform,c=b.util.getNodeCanvas,p=b.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");b.StaticCanvas=b.util.createClass(b.CommonMethods,{initialize:function(v,y){y||(y={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(v,y)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:b.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(v,y){var _=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(v),this._initOptions(y),this.interactive||this._initRetinaScaling(),y.overlayImage&&this.setOverlayImage(y.overlayImage,_),y.backgroundImage&&this.setBackgroundImage(y.backgroundImage,_),y.backgroundColor&&this.setBackgroundColor(y.backgroundColor,_),y.overlayColor&&this.setOverlayColor(y.overlayColor,_),this.calcOffset()},_isRetinaScaling:function(){return b.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,b.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var v=b.devicePixelRatio;this.__initRetinaScaling(v,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(v,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(v,y,_){y.setAttribute("width",this.width*v),y.setAttribute("height",this.height*v),_.scale(v,v)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(v,y,_){return this.__setBgOverlayImage("overlayImage",v,y,_)},setBackgroundImage:function(v,y,_){return this.__setBgOverlayImage("backgroundImage",v,y,_)},setOverlayColor:function(v,y){return this.__setBgOverlayColor("overlayColor",v,y)},setBackgroundColor:function(v,y){return this.__setBgOverlayColor("backgroundColor",v,y)},__setBgOverlayImage:function(v,y,_,B){return typeof y=="string"?b.util.loadImage(y,function(N,L){if(N){var C=new b.Image(N,B);this[v]=C,C.canvas=this}_&&_(N,L)},this,B&&B.crossOrigin):(B&&y.setOptions(B),this[v]=y,y&&(y.canvas=this),_&&_(y,!1)),this},__setBgOverlayColor:function(v,y,_){return this[v]=y,this._initGradient(y,v),this._initPattern(y,v,_),this},_createCanvasElement:function(){var v=p();if(!v||(v.style||(v.style={}),v.getContext===void 0))throw g;return v},_initOptions:function(v){var y=this.lowerCanvasEl;this._setOptions(v),this.width=this.width||parseInt(y.width,10)||0,this.height=this.height||parseInt(y.height,10)||0,this.lowerCanvasEl.style&&(y.width=this.width,y.height=this.height,y.style.width=this.width+"px",y.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(v){v&&v.getContext?this.lowerCanvasEl=v:this.lowerCanvasEl=b.util.getById(v)||this._createCanvasElement(),b.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(v,y){return this.setDimensions({width:v},y)},setHeight:function(v,y){return this.setDimensions({height:v},y)},setDimensions:function(v,y){var _;for(var B in y=y||{},v)_=v[B],y.cssOnly||(this._setBackstoreDimension(B,v[B]),_+="px",this.hasLostContext=!0),y.backstoreOnly||this._setCssDimension(B,_);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),y.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(v,y){return this.lowerCanvasEl[v]=y,this.upperCanvasEl&&(this.upperCanvasEl[v]=y),this.cacheCanvasEl&&(this.cacheCanvasEl[v]=y),this[v]=y,this},_setCssDimension:function(v,y){return this.lowerCanvasEl.style[v]=y,this.upperCanvasEl&&(this.upperCanvasEl.style[v]=y),this.wrapperEl&&(this.wrapperEl.style[v]=y),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(v){var y,_,B,N=this._activeObject,L=this.backgroundImage,C=this.overlayImage;for(this.viewportTransform=v,_=0,B=this._objects.length;_<B;_++)(y=this._objects[_]).group||y.setCoords(!0);return N&&N.setCoords(),L&&L.setCoords(!0),C&&C.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(v,y){var _=v,B=this.viewportTransform.slice(0);v=r(v,a(this.viewportTransform)),B[0]=y,B[3]=y;var N=r(v,B);return B[4]+=_.x-N.x,B[5]+=_.y-N.y,this.setViewportTransform(B)},setZoom:function(v){return this.zoomToPoint(new b.Point(0,0),v),this},absolutePan:function(v){var y=this.viewportTransform.slice(0);return y[4]=-v.x,y[5]=-v.y,this.setViewportTransform(y)},relativePan:function(v){return this.absolutePan(new b.Point(-v.x-this.viewportTransform[4],-v.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(v){this.stateful&&v.setupState(),v._set("canvas",this),v.setCoords(),this.fire("object:added",{target:v}),v.fire("added")},_onObjectRemoved:function(v){this.fire("object:removed",{target:v}),v.fire("removed"),delete v.canvas},clearContext:function(v){return v.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var v=this.contextContainer;return this.renderCanvas(v,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=b.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var v={},y=this.width,_=this.height,B=a(this.viewportTransform);return v.tl=r({x:0,y:0},B),v.br=r({x:y,y:_},B),v.tr=new b.Point(v.br.x,v.tl.y),v.bl=new b.Point(v.tl.x,v.br.y),this.vptCoords=v,v},cancelRequestedRender:function(){this.isRendering&&(b.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(v,y){var _=this.viewportTransform,B=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(v),b.util.setImageSmoothing(v,this.imageSmoothingEnabled),this.fire("before:render",{ctx:v}),this._renderBackground(v),v.save(),v.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._renderObjects(v,y),v.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(v),B&&(B.canvas=this,B.shouldCache(),B._transformDone=!0,B.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(v)),this._renderOverlay(v),this.controlsAboveOverlay&&this.interactive&&this.drawControls(v),this.fire("after:render",{ctx:v})},drawClipPathOnCanvas:function(v){var y=this.viewportTransform,_=this.clipPath;v.save(),v.transform(y[0],y[1],y[2],y[3],y[4],y[5]),v.globalCompositeOperation="destination-in",_.transform(v),v.scale(1/_.zoomX,1/_.zoomY),v.drawImage(_._cacheCanvas,-_.cacheTranslationX,-_.cacheTranslationY),v.restore()},_renderObjects:function(v,y){var _,B;for(_=0,B=y.length;_<B;++_)y[_]&&y[_].render(v)},_renderBackgroundOrOverlay:function(v,y){var _=this[y+"Color"],B=this[y+"Image"],N=this.viewportTransform,L=this[y+"Vpt"];if(_||B){if(_){v.save(),v.beginPath(),v.moveTo(0,0),v.lineTo(this.width,0),v.lineTo(this.width,this.height),v.lineTo(0,this.height),v.closePath(),v.fillStyle=_.toLive?_.toLive(v,this):_,L&&v.transform(N[0],N[1],N[2],N[3],N[4],N[5]),v.transform(1,0,0,1,_.offsetX||0,_.offsetY||0);var C=_.gradientTransform||_.patternTransform;C&&v.transform(C[0],C[1],C[2],C[3],C[4],C[5]),v.fill(),v.restore()}B&&(v.save(),L&&v.transform(N[0],N[1],N[2],N[3],N[4],N[5]),B.render(v),v.restore())}},_renderBackground:function(v){this._renderBackgroundOrOverlay(v,"background")},_renderOverlay:function(v){this._renderBackgroundOrOverlay(v,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new b.Point(this.width/2,this.height/2)},centerObjectH:function(v){return this._centerObject(v,new b.Point(this.getCenterPoint().x,v.getCenterPoint().y))},centerObjectV:function(v){return this._centerObject(v,new b.Point(v.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(v){var y=this.getCenterPoint();return this._centerObject(v,y)},viewportCenterObject:function(v){var y=this.getVpCenter();return this._centerObject(v,y)},viewportCenterObjectH:function(v){var y=this.getVpCenter();return this._centerObject(v,new b.Point(y.x,v.getCenterPoint().y)),this},viewportCenterObjectV:function(v){var y=this.getVpCenter();return this._centerObject(v,new b.Point(v.getCenterPoint().x,y.y))},getVpCenter:function(){var v=this.getCenterPoint(),y=a(this.viewportTransform);return r(v,y)},_centerObject:function(v,y){return v.setPositionByOrigin(y,"center","center"),v.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(v){return this.toDatalessObject(v)},toObject:function(v){return this._toObjectMethod("toObject",v)},toDatalessObject:function(v){return this._toObjectMethod("toDatalessObject",v)},_toObjectMethod:function(v,y){var _=this.clipPath,B={version:b.version,objects:this._toObjects(v,y)};return _&&!_.excludeFromExport&&(B.clipPath=this._toObject(this.clipPath,v,y)),h(B,this.__serializeBgOverlay(v,y)),b.util.populateWithProperties(this,B,y),B},_toObjects:function(v,y){return this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){return this._toObject(_,v,y)},this)},_toObject:function(v,y,_){var B;this.includeDefaultValues||(B=v.includeDefaultValues,v.includeDefaultValues=!1);var N=v[y](_);return this.includeDefaultValues||(v.includeDefaultValues=B),N},__serializeBgOverlay:function(v,y){var _={},B=this.backgroundImage,N=this.overlayImage,L=this.backgroundColor,C=this.overlayColor;return L&&L.toObject?L.excludeFromExport||(_.background=L.toObject(y)):L&&(_.background=L),C&&C.toObject?C.excludeFromExport||(_.overlay=C.toObject(y)):C&&(_.overlay=C),B&&!B.excludeFromExport&&(_.backgroundImage=this._toObject(B,v,y)),N&&!N.excludeFromExport&&(_.overlayImage=this._toObject(N,v,y)),_},svgViewportTransformation:!0,toSVG:function(v,y){v||(v={}),v.reviver=y;var _=[];return this._setSVGPreamble(_,v),this._setSVGHeader(_,v),this.clipPath&&_.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(_,"background"),this._setSVGBgOverlayImage(_,"backgroundImage",y),this._setSVGObjects(_,y),this.clipPath&&_.push("</g>\n"),this._setSVGBgOverlayColor(_,"overlay"),this._setSVGBgOverlayImage(_,"overlayImage",y),_.push("</svg>"),_.join("")},_setSVGPreamble:function(v,y){y.suppressPreamble||v.push('<?xml version="1.0" encoding="',y.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(v,y){var _,B=y.width||this.width,N=y.height||this.height,L='viewBox="0 0 '+this.width+" "+this.height+'" ',C=b.Object.NUM_FRACTION_DIGITS;y.viewBox?L='viewBox="'+y.viewBox.x+" "+y.viewBox.y+" "+y.viewBox.width+" "+y.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,L='viewBox="'+d(-_[4]/_[0],C)+" "+d(-_[5]/_[3],C)+" "+d(this.width/_[0],C)+" "+d(this.height/_[3],C)+'" '),v.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',B,'" ','height="',N,'" ',L,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",b.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(y),"</defs>\n")},createSVGClipPathMarkup:function(v){var y=this.clipPath;return y?(y.clipPathId="CLIPPATH_"+b.Object.__uid++,'<clipPath id="'+y.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(v.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var v=this,y=["background","overlay"].map(function(_){var B=v[_+"Color"];if(B&&B.toLive){var N=v[_+"Vpt"],L=v.viewportTransform,C={width:v.width/(N?L[0]:1),height:v.height/(N?L[3]:1)};return B.toSVG(C,{additionalTransform:N?b.util.matrixToSVG(L):""})}});return y.join("")},createSVGFontFacesMarkup:function(){var v,y,_,B,N,L,C,D,F="",j={},U=b.fontPaths,W=[];for(this._objects.forEach(function M(P){W.push(P),P._objects&&P._objects.forEach(M)}),C=0,D=W.length;C<D;C++)if(y=(v=W[C]).fontFamily,v.type.indexOf("text")!==-1&&!j[y]&&U[y]&&(j[y]=!0,v.styles))for(N in _=v.styles)for(L in B=_[N])!j[y=B[L].fontFamily]&&U[y]&&(j[y]=!0);for(var $ in j)F+=["		@font-face {\n","			font-family: '",$,"';\n","			src: url('",U[$],"');\n","		}\n"].join("");return F&&(F=['	<style type="text/css">',"<![CDATA[\n",F,"]]>","</style>\n"].join("")),F},_setSVGObjects:function(v,y){var _,B,N,L=this._objects;for(B=0,N=L.length;B<N;B++)(_=L[B]).excludeFromExport||this._setSVGObject(v,_,y)},_setSVGObject:function(v,y,_){v.push(y.toSVG(_))},_setSVGBgOverlayImage:function(v,y,_){this[y]&&!this[y].excludeFromExport&&this[y].toSVG&&v.push(this[y].toSVG(_))},_setSVGBgOverlayColor:function(v,y){var _=this[y+"Color"],B=this.viewportTransform,N=this.width,L=this.height;if(_)if(_.toLive){var C=_.repeat,D=b.util.invertTransform(B),F=this[y+"Vpt"]?b.util.matrixToSVG(D):"";v.push('<rect transform="'+F+" translate(",N/2,",",L/2,')"',' x="',_.offsetX-N/2,'" y="',_.offsetY-L/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?_.source.width:N,'" height="',C==="repeat-x"||C==="no-repeat"?_.source.height:L,'" fill="url(#SVGID_'+_.id+')"',"></rect>\n")}else v.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',_,'"',"></rect>\n")},sendToBack:function(v){if(!v)return this;var y,_,B,N=this._activeObject;if(v===N&&v.type==="activeSelection")for(y=(B=N._objects).length;y--;)_=B[y],u(this._objects,_),this._objects.unshift(_);else u(this._objects,v),this._objects.unshift(v);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(v){if(!v)return this;var y,_,B,N=this._activeObject;if(v===N&&v.type==="activeSelection")for(B=N._objects,y=0;y<B.length;y++)_=B[y],u(this._objects,_),this._objects.push(_);else u(this._objects,v),this._objects.push(v);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(v,y){if(!v)return this;var _,B,N,L,C,D=this._activeObject,F=0;if(v===D&&v.type==="activeSelection")for(C=D._objects,_=0;_<C.length;_++)B=C[_],(N=this._objects.indexOf(B))>0+F&&(L=N-1,u(this._objects,B),this._objects.splice(L,0,B)),F++;else(N=this._objects.indexOf(v))!==0&&(L=this._findNewLowerIndex(v,N,y),u(this._objects,v),this._objects.splice(L,0,v));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(v,y,_){var B,N;if(_){for(B=y,N=y-1;N>=0;--N)if(v.intersectsWithObject(this._objects[N])||v.isContainedWithinObject(this._objects[N])||this._objects[N].isContainedWithinObject(v)){B=N;break}}else B=y-1;return B},bringForward:function(v,y){if(!v)return this;var _,B,N,L,C,D=this._activeObject,F=0;if(v===D&&v.type==="activeSelection")for(_=(C=D._objects).length;_--;)B=C[_],(N=this._objects.indexOf(B))<this._objects.length-1-F&&(L=N+1,u(this._objects,B),this._objects.splice(L,0,B)),F++;else(N=this._objects.indexOf(v))!==this._objects.length-1&&(L=this._findNewUpperIndex(v,N,y),u(this._objects,v),this._objects.splice(L,0,v));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(v,y,_){var B,N,L;if(_){for(B=y,N=y+1,L=this._objects.length;N<L;++N)if(v.intersectsWithObject(this._objects[N])||v.isContainedWithinObject(this._objects[N])||this._objects[N].isContainedWithinObject(v)){B=N;break}}else B=y+1;return B},moveTo:function(v,y){return u(this._objects,v),this._objects.splice(y,0,v),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(b.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(v){v.dispose&&v.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),b.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),b.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),h(b.StaticCanvas.prototype,b.Observable),h(b.StaticCanvas.prototype,b.Collection),h(b.StaticCanvas.prototype,b.DataURLExporter),h(b.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(v){var y=p();if(!y||!y.getContext)return null;var _=y.getContext("2d");return _&&v==="setLineDash"?_.setLineDash!==void 0:null}}),b.StaticCanvas.prototype.toJSON=b.StaticCanvas.prototype.toObject,b.isLikelyNode&&(b.StaticCanvas.prototype.createPNGStream=function(){var v=c(this.lowerCanvasEl);return v&&v.createPNGStream()},b.StaticCanvas.prototype.createJPEGStream=function(v){var y=c(this.lowerCanvasEl);return y&&y.createJPEGStream(v)})}}(),b.BaseBrush=b.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(h){h.strokeStyle=this.color,h.lineWidth=this.width,h.lineCap=this.strokeLineCap,h.miterLimit=this.strokeMiterLimit,h.lineJoin=this.strokeLineJoin,h.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(h){var s=this.canvas.viewportTransform;h.save(),h.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var h=this.canvas,s=this.shadow,u=h.contextTop,d=h.getZoom();h&&h._isRetinaScaling()&&(d*=b.devicePixelRatio),u.shadowColor=s.color,u.shadowBlur=s.blur*d,u.shadowOffsetX=s.offsetX*d,u.shadowOffsetY=s.offsetY*d}},needsFullRender:function(){return new b.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var h=this.canvas.contextTop;h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0},_isOutSideCanvas:function(h){return h.x<0||h.x>this.canvas.getWidth()||h.y<0||h.y>this.canvas.getHeight()}}),b.PencilBrush=b.util.createClass(b.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(h){this.canvas=h,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(h,s,u){var d=s.midPointFrom(u);return h.quadraticCurveTo(s.x,s.y,d.x,d.y),d},onMouseDown:function(h,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(h),this._captureDrawingPath(h),this._render())},onMouseMove:function(h,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(h))&&this._captureDrawingPath(h)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var u=this._points,d=u.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,u[d-2],u[d-1],!0),r.stroke(),r.restore()}},onMouseUp:function(h){return!this.canvas._isMainEvent(h.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(h){var s=new b.Point(h.x,h.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(h){return!(this._points.length>1&&h.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(h),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(h){var s=new b.Point(h.x,h.y);return this._addPoint(s)},_render:function(h){var s,u,d=this._points[0],r=this._points[1];if(h=h||this.canvas.contextTop,this._saveAndTransform(h),h.beginPath(),this._points.length===2&&d.x===r.x&&d.y===r.y){var a=this.width/1e3;d=new b.Point(d.x,d.y),r=new b.Point(r.x,r.y),d.x-=a,r.x+=a}for(h.moveTo(d.x,d.y),s=1,u=this._points.length;s<u;s++)this._drawSegment(h,d,r),d=this._points[s],r=this._points[s+1];h.lineTo(d.x,d.y),h.stroke(),h.restore()},convertPointsToSVGPath:function(h){var s=this.width/1e3;return b.util.getSmoothPathFromPoints(h,s)},_isEmptySVGPath:function(h){return b.util.joinPath(h)==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(h){var s=new b.Path(h,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new b.Shadow(this.shadow)),s},decimatePoints:function(h,s){if(h.length<=2)return h;var u,d=this.canvas.getZoom(),r=Math.pow(s/d,2),a=h.length-1,c=h[0],p=[c];for(u=1;u<a-1;u++)Math.pow(c.x-h[u].x,2)+Math.pow(c.y-h[u].y,2)>=r&&(c=h[u],p.push(c));return p.push(h[a]),p},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var h=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(h))this.canvas.requestRenderAll();else{var s=this.createPath(h);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.requestRenderAll(),s.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:s})}}}),b.CircleBrush=b.util.createClass(b.BaseBrush,{width:10,initialize:function(h){this.canvas=h,this.points=[]},drawDot:function(h){var s=this.addPoint(h),u=this.canvas.contextTop;this._saveAndTransform(u),this.dot(u,s),u.restore()},dot:function(h,s){h.fillStyle=s.fill,h.beginPath(),h.arc(s.x,s.y,s.radius,0,2*Math.PI,!1),h.closePath(),h.fill()},onMouseDown:function(h){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(h)},_render:function(){var h,s,u=this.canvas.contextTop,d=this.points;for(this._saveAndTransform(u),h=0,s=d.length;h<s;h++)this.dot(u,d[h]);u.restore()},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(h),this._render()):this.drawDot(h))},onMouseUp:function(){var h,s,u=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var d=[];for(h=0,s=this.points.length;h<s;h++){var r=this.points[h],a=new b.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(a.shadow=new b.Shadow(this.shadow)),d.push(a)}var c=new b.Group(d);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},addPoint:function(h){var s=new b.Point(h.x,h.y),u=b.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,d=new b.Color(this.color).setAlpha(b.util.getRandomInt(0,100)/100).toRgba();return s.radius=u,s.fill=d,this.points.push(s),s}}),b.SprayBrush=b.util.createClass(b.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(h){this.canvas=h,this.sprayChunks=[]},onMouseDown:function(h){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(h),this.render(this.sprayChunkPoints)},onMouseMove:function(h){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(h)||(this.addSprayChunk(h),this.render(this.sprayChunkPoints))},onMouseUp:function(){var h=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],u=0,d=this.sprayChunks.length;u<d;u++)for(var r=this.sprayChunks[u],a=0,c=r.length;a<c;a++){var p=new b.Rect({width:r[a].width,height:r[a].width,left:r[a].x+1,top:r[a].y+1,originX:"center",originY:"center",fill:this.color});s.push(p)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var g=new b.Group(s);this.shadow&&g.set("shadow",new b.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=h,this.canvas.requestRenderAll()},_getOptimizedRects:function(h){var s,u,d,r={};for(u=0,d=h.length;u<d;u++)r[s=h[u].left+""+h[u].top]||(r[s]=h[u]);var a=[];for(s in r)a.push(r[s]);return a},render:function(h){var s,u,d=this.canvas.contextTop;for(d.fillStyle=this.color,this._saveAndTransform(d),s=0,u=h.length;s<u;s++){var r=h[s];r.opacity!==void 0&&(d.globalAlpha=r.opacity),d.fillRect(r.x,r.y,r.width,r.width)}d.restore()},_render:function(){var h,s,u=this.canvas.contextTop;for(u.fillStyle=this.color,this._saveAndTransform(u),h=0,s=this.sprayChunks.length;h<s;h++)this.render(this.sprayChunks[h]);u.restore()},addSprayChunk:function(h){this.sprayChunkPoints=[];var s,u,d,r,a=this.width/2;for(r=0;r<this.density;r++){s=b.util.getRandomInt(h.x-a,h.x+a),u=b.util.getRandomInt(h.y-a,h.y+a),d=this.dotWidthVariance?b.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var c=new b.Point(s,u);c.width=d,this.randomOpacity&&(c.opacity=b.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),b.PatternBrush=b.util.createClass(b.PencilBrush,{getPatternSrc:function(){var h=b.util.createCanvasElement(),s=h.getContext("2d");return h.width=h.height=25,s.fillStyle=this.color,s.beginPath(),s.arc(10,10,10,0,2*Math.PI,!1),s.closePath(),s.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(h){return h.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(h){this.callSuper("_setBrushStyles",h),h.strokeStyle=this.getPattern(h)},createPath:function(h){var s=this.callSuper("createPath",h),u=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new b.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-u.x,offsetY:-u.y}),s}}),function(){var h=b.util.getPointer,s=b.util.degreesToRadians,u=b.util.isTouchEvent;for(var d in b.Canvas=b.util.createClass(b.StaticCanvas,{initialize:function(r,a){a||(a={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,a),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=b.PencilBrush&&new b.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var r,a,c,p=this.getActiveObjects();if(p.length>0&&!this.preserveObjectStacking){a=[],c=[];for(var g=0,v=this._objects.length;g<v;g++)r=this._objects[g],p.indexOf(r)===-1?a.push(r):c.push(r);p.length>1&&(this._activeObject._objects=c),a.push.apply(a,c)}else a=this._objects;return a},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var r=this.contextContainer;return this.renderCanvas(r,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,a){var c=r.calcTransformMatrix(),p=b.util.invertTransform(c),g=this.restorePointerVpt(a);return b.util.transformPoint(g,p)},isTargetTransparent:function(r,a,c){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var p=this._normalizePointer(r,{x:a,y:c}),g=Math.max(r.cacheTranslationX+p.x*r.zoomX,0),v=Math.max(r.cacheTranslationY+p.y*r.zoomY,0);return b.util.isTransparent(r._cacheContext,Math.round(g),Math.round(v),this.targetFindTolerance)}var y=this.contextCache,_=r.selectionBackgroundColor,B=this.viewportTransform;return r.selectionBackgroundColor="",this.clearContext(y),y.save(),y.transform(B[0],B[1],B[2],B[3],B[4],B[5]),r.render(y),y.restore(),r.selectionBackgroundColor=_,b.util.isTransparent(y,a,c,this.targetFindTolerance)},_isSelectionKeyPressed:function(r){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(a){return r[a]===!0}):r[this.selectionKey]},_shouldClearSelection:function(r,a){var c=this.getActiveObjects(),p=this._activeObject;return!a||a&&p&&c.length>1&&c.indexOf(a)===-1&&p!==a&&!this._isSelectionKeyPressed(r)||a&&!a.evented||a&&!a.selectable&&p&&p!==a},_shouldCenterTransform:function(r,a,c){var p;if(r)return a==="scale"||a==="scaleX"||a==="scaleY"||a==="resizing"?p=this.centeredScaling||r.centeredScaling:a==="rotate"&&(p=this.centeredRotation||r.centeredRotation),p?!c:c},_getOriginFromCorner:function(r,a){var c={x:r.originX,y:r.originY};return a==="ml"||a==="tl"||a==="bl"?c.x="right":a!=="mr"&&a!=="tr"&&a!=="br"||(c.x="left"),a==="tl"||a==="mt"||a==="tr"?c.y="bottom":a!=="bl"&&a!=="mb"&&a!=="br"||(c.y="top"),c},_getActionFromCorner:function(r,a,c,p){if(!a||!r)return"drag";var g=p.controls[a];return g.getActionName(c,g,p)},_setupCurrentTransform:function(r,a,c){if(a){var p=this.getPointer(r),g=a.__corner,v=a.controls[g],y=c&&g?v.getActionHandler(r,a,v):b.controlsUtils.dragHandler,_=this._getActionFromCorner(c,g,r,a),B=this._getOriginFromCorner(a,g),N=r[this.centeredKey],L={target:a,action:_,actionHandler:y,corner:g,scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,offsetX:p.x-a.left,offsetY:p.y-a.top,originX:B.x,originY:B.y,ex:p.x,ey:p.y,lastX:p.x,lastY:p.y,theta:s(a.angle),width:a.width*a.scaleX,shiftKey:r.shiftKey,altKey:N,original:b.util.saveObjectTransform(a)};this._shouldCenterTransform(a,_,N)&&(L.originX="center",L.originY="center"),L.original.originX=B.x,L.original.originY=B.y,this._currentTransform=L,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var a=this._groupSelector,c=new b.Point(a.ex,a.ey),p=b.util.transformPoint(c,this.viewportTransform),g=new b.Point(a.ex+a.left,a.ey+a.top),v=b.util.transformPoint(g,this.viewportTransform),y=Math.min(p.x,v.x),_=Math.min(p.y,v.y),B=Math.max(p.x,v.x),N=Math.max(p.y,v.y),L=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(y,_,B-y,N-_)),this.selectionLineWidth&&this.selectionBorderColor&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,y+=L,_+=L,B-=L,N-=L,b.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(y,_,B-y,N-_))},findTarget:function(r,a){if(!this.skipTargetFind){var c,p,g=this.getPointer(r,!0),v=this._activeObject,y=this.getActiveObjects(),_=u(r),B=y.length>1&&!a||y.length===1;if(this.targets=[],B&&v._findTargetCorner(g,_)||y.length>1&&!a&&v===this._searchPossibleTargets([v],g))return v;if(y.length===1&&v===this._searchPossibleTargets([v],g)){if(!this.preserveObjectStacking)return v;c=v,p=this.targets,this.targets=[]}var N=this._searchPossibleTargets(this._objects,g);return r[this.altSelectionKey]&&N&&c&&N!==c&&(N=c,this.targets=p),N}},_checkTarget:function(r,a,c){if(a&&a.visible&&a.evented&&a.containsPoint(r)&&(!this.perPixelTargetFind&&!a.perPixelTargetFind||a.isEditing||!this.isTargetTransparent(a,c.x,c.y)))return!0},_searchPossibleTargets:function(r,a){for(var c,p,g=r.length;g--;){var v=r[g],y=v.group?this._normalizePointer(v.group,a):a;if(this._checkTarget(y,v,a)){(c=r[g]).subTargetCheck&&c instanceof b.Group&&(p=this._searchPossibleTargets(c._objects,a))&&this.targets.push(p);break}}return c},restorePointerVpt:function(r){return b.util.transformPoint(r,b.util.invertTransform(this.viewportTransform))},getPointer:function(r,a){if(this._absolutePointer&&!a)return this._absolutePointer;if(this._pointer&&a)return this._pointer;var c,p=h(r),g=this.upperCanvasEl,v=g.getBoundingClientRect(),y=v.width||0,_=v.height||0;y&&_||("top"in v&&"bottom"in v&&(_=Math.abs(v.top-v.bottom)),"right"in v&&"left"in v&&(y=Math.abs(v.right-v.left))),this.calcOffset(),p.x=p.x-this._offset.left,p.y=p.y-this._offset.top,a||(p=this.restorePointerVpt(p));var B=this.getRetinaScaling();return B!==1&&(p.x/=B,p.y/=B),c=y===0||_===0?{width:1,height:1}:{width:g.width/y,height:g.height/_},{x:p.x*c.width,y:p.y*c.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),a=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),b.util.addClass(c,"upper-canvas "+r),this.wrapperEl.appendChild(c),this._copyCanvasStyle(a,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=b.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),b.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),b.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var a=this.width||r.width,c=this.height||r.height;b.util.setStyle(r,{position:"absolute",width:a+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=a,r.height=c,b.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,a){a.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?r.type==="activeSelection"&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,a){var c=!1,p=this.getActiveObjects(),g=[],v=[];r.forEach(function(y){p.indexOf(y)===-1&&(c=!0,y.fire("deselected",{e:a,target:y}),v.push(y))}),p.forEach(function(y){r.indexOf(y)===-1&&(c=!0,y.fire("selected",{e:a,target:y}),g.push(y))}),r.length>0&&p.length>0?c&&this.fire("selection:updated",{e:a,selected:g,deselected:v}):p.length>0?this.fire("selection:created",{e:a,selected:g}):r.length>0&&this.fire("selection:cleared",{e:a,deselected:v})},setActiveObject:function(r,a){var c=this.getActiveObjects();return this._setActiveObject(r,a),this._fireSelectionEvents(c,a),this},_setActiveObject:function(r,a){return this._activeObject!==r&&!!this._discardActiveObject(a,r)&&!r.onSelect({e:a})&&(this._activeObject=r,!0)},_discardActiveObject:function(r,a){var c=this._activeObject;if(c){if(c.onDeselect({e:r,object:a}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var a=this.getActiveObjects(),c=this.getActiveObject();return a.length&&this.fire("before:selection:cleared",{target:c,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(a,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(a){b.util.cleanUpJsdomNode(this[a]),this[a]=void 0}).bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,b.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var a=this._activeObject;a&&a._renderControls(r)},_toObject:function(r,a,c){var p=this._realizeGroupTransformOnObject(r),g=this.callSuper("_toObject",r,a,c);return this._unwindGroupTransformOnObject(r,p),g},_realizeGroupTransformOnObject:function(r){if(r.group&&r.group.type==="activeSelection"&&this._activeObject===r.group){var a={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(c){a[c]=r[c]}),b.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),a}return null},_unwindGroupTransformOnObject:function(r,a){a&&r.set(a)},_setSVGObject:function(r,a,c){var p=this._realizeGroupTransformOnObject(a);this.callSuper("_setSVGObject",r,a,c),this._unwindGroupTransformOnObject(a,p)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),b.StaticCanvas.prototype.setViewportTransform.call(this,r)}}),b.StaticCanvas)d!=="prototype"&&(b.Canvas[d]=b.StaticCanvas[d])}(),function(){var h=b.util.addListener,s=b.util.removeListener,u={passive:!1};function d(r,a){return r.button&&r.button===a-1}b.util.object.extend(b.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(h,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(r,a){var c=this.upperCanvasEl,p=this._getEventPrefix();r(b.window,"resize",this._onResize),r(c,p+"down",this._onMouseDown),r(c,p+"move",this._onMouseMove,u),r(c,p+"out",this._onMouseOut),r(c,p+"enter",this._onMouseEnter),r(c,"wheel",this._onMouseWheel),r(c,"contextmenu",this._onContextMenu),r(c,"dblclick",this._onDoubleClick),r(c,"dragover",this._onDragOver),r(c,"dragenter",this._onDragEnter),r(c,"dragleave",this._onDragLeave),r(c,"drop",this._onDrop),this.enablePointerEvents||r(c,"touchstart",this._onTouchStart,u),typeof eventjs<"u"&&a in eventjs&&(eventjs[a](c,"gesture",this._onGesture),eventjs[a](c,"drag",this._onDrag),eventjs[a](c,"orientation",this._onOrientationChange),eventjs[a](c,"shake",this._onShake),eventjs[a](c,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var r=this._getEventPrefix();s(b.document,r+"up",this._onMouseUp),s(b.document,"touchend",this._onTouchEnd,u),s(b.document,r+"move",this._onMouseMove,u),s(b.document,"touchmove",this._onMouseMove,u)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(r,a){this.__onTransformGesture&&this.__onTransformGesture(r,a)},_onDrag:function(r,a){this.__onDrag&&this.__onDrag(r,a)},_onMouseWheel:function(r){this.__onMouseWheel(r)},_onMouseOut:function(r){var a=this._hoveredTarget;this.fire("mouse:out",{target:a,e:r}),this._hoveredTarget=null,a&&a.fire("mouseout",{e:r});var c=this;this._hoveredTargets.forEach(function(p){c.fire("mouse:out",{target:a,e:r}),p&&a.fire("mouseout",{e:r})}),this._hoveredTargets=[]},_onMouseEnter:function(r){this._currentTransform||this.findTarget(r)||(this.fire("mouse:over",{target:null,e:r}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(r,a){this.__onOrientationChange&&this.__onOrientationChange(r,a)},_onShake:function(r,a){this.__onShake&&this.__onShake(r,a)},_onLongPress:function(r,a){this.__onLongPress&&this.__onLongPress(r,a)},_onDragOver:function(r){r.preventDefault();var a=this._simpleEventHandler("dragover",r);this._fireEnterLeaveEvents(a,r)},_onDrop:function(r){return this._simpleEventHandler("drop:before",r),this._simpleEventHandler("drop",r)},_onContextMenu:function(r){return this.stopContextMenu&&(r.stopPropagation(),r.preventDefault()),!1},_onDoubleClick:function(r){this._cacheTransformEventData(r),this._handleEvent(r,"dblclick"),this._resetTransformEventData(r)},getPointerId:function(r){var a=r.changedTouches;return a?a[0]&&a[0].identifier:this.enablePointerEvents?r.pointerId:-1},_isMainEvent:function(r){return r.isPrimary===!0||r.isPrimary!==!1&&(r.type==="touchend"&&r.touches.length===0||!r.changedTouches||r.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(r){r.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(r)),this.__onMouseDown(r),this._resetTransformEventData();var a=this.upperCanvasEl,c=this._getEventPrefix();h(b.document,"touchend",this._onTouchEnd,u),h(b.document,"touchmove",this._onMouseMove,u),s(a,c+"down",this._onMouseDown)},_onMouseDown:function(r){this.__onMouseDown(r),this._resetTransformEventData();var a=this.upperCanvasEl,c=this._getEventPrefix();s(a,c+"move",this._onMouseMove,u),h(b.document,c+"up",this._onMouseUp),h(b.document,c+"move",this._onMouseMove,u)},_onTouchEnd:function(r){if(!(r.touches.length>0)){this.__onMouseUp(r),this._resetTransformEventData(),this.mainTouchId=null;var a=this._getEventPrefix();s(b.document,"touchend",this._onTouchEnd,u),s(b.document,"touchmove",this._onMouseMove,u);var c=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){h(c.upperCanvasEl,a+"down",c._onMouseDown),c._willAddMouseDown=0},400)}},_onMouseUp:function(r){this.__onMouseUp(r),this._resetTransformEventData();var a=this.upperCanvasEl,c=this._getEventPrefix();this._isMainEvent(r)&&(s(b.document,c+"up",this._onMouseUp),s(b.document,c+"move",this._onMouseMove,u),h(a,c+"move",this._onMouseMove,u))},_onMouseMove:function(r){!this.allowTouchScrolling&&r.preventDefault&&r.preventDefault(),this.__onMouseMove(r)},_onResize:function(){this.calcOffset()},_shouldRender:function(r){var a=this._activeObject;return!!(!!a!=!!r||a&&r&&a!==r)||(a&&a.isEditing,!1)},__onMouseUp:function(r){var a,c=this._currentTransform,p=this._groupSelector,g=!1,v=!p||p.left===0&&p.top===0;if(this._cacheTransformEventData(r),a=this._target,this._handleEvent(r,"up:before"),d(r,3))this.fireRightClick&&this._handleEvent(r,"up",3,v);else{if(d(r,2))return this.fireMiddleClick&&this._handleEvent(r,"up",2,v),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(r);else if(this._isMainEvent(r)){if(c&&(this._finalizeCurrentTransform(r),g=c.actionPerformed),!v){var y=a===this._activeObject;this._maybeGroupObjects(r),g||(g=this._shouldRender(a)||!y&&a===this._activeObject)}var _,B;if(a){if(_=a._findTargetCorner(this.getPointer(r,!0),b.util.isTouchEvent(r)),a.selectable&&a!==this._activeObject&&a.activeOn==="up")this.setActiveObject(a,r),g=!0;else{var N=a.controls[_],L=N&&N.getMouseUpHandler(r,a,N);L&&L(r,c,(B=this.getPointer(r)).x,B.y)}a.isMoving=!1}if(c&&(c.target!==a||c.corner!==_)){var C=c.target&&c.target.controls[c.corner],D=C&&C.getMouseUpHandler(r,a,N);B=B||this.getPointer(r),D&&D(r,c,B.x,B.y)}this._setCursorFromEvent(r,a),this._handleEvent(r,"up",1,v),this._groupSelector=null,this._currentTransform=null,a&&(a.__corner=0),g?this.requestRenderAll():v||this.renderTop()}}},_simpleEventHandler:function(r,a){var c=this.findTarget(a),p=this.targets,g={e:a,target:c,subTargets:p};if(this.fire(r,g),c&&c.fire(r,g),!p)return c;for(var v=0;v<p.length;v++)p[v].fire(r,g);return c},_handleEvent:function(r,a,c,p){var g=this._target,v=this.targets||[],y={e:r,target:g,subTargets:v,button:c||1,isClick:p||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};a==="up"&&(y.currentTarget=this.findTarget(r),y.currentSubTargets=this.targets),this.fire("mouse:"+a,y),g&&g.fire("mouse"+a,y);for(var _=0;_<v.length;_++)v[_].fire("mouse"+a,y)},_finalizeCurrentTransform:function(r){var a=this._currentTransform,c=a.target,p={e:r,target:c,transform:a,action:a.action};c._scaling&&(c._scaling=!1),c.setCoords(),(a.actionPerformed||this.stateful&&c.hasStateChanged())&&this._fire("modified",p)},_onMouseDownInDrawingMode:function(r){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(r).requestRenderAll();var a=this.getPointer(r);this.freeDrawingBrush.onMouseDown(a,{e:r,pointer:a}),this._handleEvent(r,"down")},_onMouseMoveInDrawingMode:function(r){if(this._isCurrentlyDrawing){var a=this.getPointer(r);this.freeDrawingBrush.onMouseMove(a,{e:r,pointer:a})}this.setCursor(this.freeDrawingCursor),this._handleEvent(r,"move")},_onMouseUpInDrawingMode:function(r){var a=this.getPointer(r);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:r,pointer:a}),this._handleEvent(r,"up")},__onMouseDown:function(r){this._cacheTransformEventData(r),this._handleEvent(r,"down:before");var a=this._target;if(d(r,3))this.fireRightClick&&this._handleEvent(r,"down",3);else if(d(r,2))this.fireMiddleClick&&this._handleEvent(r,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(r);else if(this._isMainEvent(r)&&!this._currentTransform){var c=this._pointer;this._previousPointer=c;var p=this._shouldRender(a),g=this._shouldGroup(r,a);if(this._shouldClearSelection(r,a)?this.discardActiveObject(r):g&&(this._handleGrouping(r,a),a=this._activeObject),!this.selection||a&&(a.selectable||a.isEditing||a===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),a){var v=a===this._activeObject;a.selectable&&a.activeOn==="down"&&this.setActiveObject(a,r);var y=a._findTargetCorner(this.getPointer(r,!0),b.util.isTouchEvent(r));if(a.__corner=y,a===this._activeObject&&(y||!g)){this._setupCurrentTransform(r,a,v);var _=a.controls[y],B=(c=this.getPointer(r),_&&_.getMouseDownHandler(r,a,_));B&&B(r,this._currentTransform,c.x,c.y)}}this._handleEvent(r,"down"),(p||g)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(r){this._resetTransformEventData(),this._pointer=this.getPointer(r,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(r)||null},_beforeTransform:function(r){var a=this._currentTransform;this.stateful&&a.target.saveState(),this.fire("before:transform",{e:r,transform:a})},__onMouseMove:function(r){var a,c;if(this._handleEvent(r,"move:before"),this._cacheTransformEventData(r),this.isDrawingMode)this._onMouseMoveInDrawingMode(r);else if(this._isMainEvent(r)){var p=this._groupSelector;p?(c=this._absolutePointer,p.left=c.x-p.ex,p.top=c.y-p.ey,this.renderTop()):this._currentTransform?this._transformObject(r):(a=this.findTarget(r)||null,this._setCursorFromEvent(r,a),this._fireOverOutEvents(a,r)),this._handleEvent(r,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(r,a){var c=this._hoveredTarget,p=this._hoveredTargets,g=this.targets,v=Math.max(p.length,g.length);this.fireSyntheticInOutEvents(r,a,{oldTarget:c,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var y=0;y<v;y++)this.fireSyntheticInOutEvents(g[y],a,{oldTarget:p[y],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(r,a){var c=this._draggedoverTarget,p=this._hoveredTargets,g=this.targets,v=Math.max(p.length,g.length);this.fireSyntheticInOutEvents(r,a,{oldTarget:c,evtOut:"dragleave",evtIn:"dragenter"});for(var y=0;y<v;y++)this.fireSyntheticInOutEvents(g[y],a,{oldTarget:p[y],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=r},fireSyntheticInOutEvents:function(r,a,c){var p,g,v,y=c.oldTarget,_=y!==r,B=c.canvasEvtIn,N=c.canvasEvtOut;_&&(p={e:a,target:r,previousTarget:y},g={e:a,target:y,nextTarget:r}),v=r&&_,y&&_&&(N&&this.fire(N,g),y.fire(c.evtOut,g)),v&&(B&&this.fire(B,p),r.fire(c.evtIn,p))},__onMouseWheel:function(r){this._cacheTransformEventData(r),this._handleEvent(r,"wheel"),this._resetTransformEventData()},_transformObject:function(r){var a=this.getPointer(r),c=this._currentTransform;c.reset=!1,c.shiftKey=r.shiftKey,c.altKey=r[this.centeredKey],this._performTransformAction(r,c,a),c.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(r,a,c){var p=c.x,g=c.y,v=a.action,y=!1,_=a.actionHandler;_&&(y=_(r,a,p,g)),v==="drag"&&y&&(a.target.isMoving=!0,this.setCursor(a.target.moveCursor||this.moveCursor)),a.actionPerformed=a.actionPerformed||y},_fire:b.controlsUtils.fireEvent,_setCursorFromEvent:function(r,a){if(!a)return this.setCursor(this.defaultCursor),!1;var c=a.hoverCursor||this.hoverCursor,p=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,g=(!p||!p.contains(a))&&a._findTargetCorner(this.getPointer(r,!0));g?this.setCursor(this.getCornerCursor(g,a,r)):(a.subTargetCheck&&this.targets.concat().reverse().map(function(v){c=v.hoverCursor||c}),this.setCursor(c))},getCornerCursor:function(r,a,c){var p=a.controls[r];return p.cursorStyleHandler(c,p,a)}})}(),function(){var h=Math.min,s=Math.max;b.util.object.extend(b.Canvas.prototype,{_shouldGroup:function(u,d){var r=this._activeObject;return r&&this._isSelectionKeyPressed(u)&&d&&d.selectable&&this.selection&&(r!==d||r.type==="activeSelection")&&!d.onSelect({e:u})},_handleGrouping:function(u,d){var r=this._activeObject;r.__corner||(d!==r||(d=this.findTarget(u,!0))&&d.selectable)&&(r&&r.type==="activeSelection"?this._updateActiveSelection(d,u):this._createActiveSelection(d,u))},_updateActiveSelection:function(u,d){var r=this._activeObject,a=r._objects.slice(0);r.contains(u)?(r.removeWithUpdate(u),this._hoveredTarget=u,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),d)):(r.addWithUpdate(u),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(a,d)},_createActiveSelection:function(u,d){var r=this.getActiveObjects(),a=this._createGroup(u);this._hoveredTarget=a,this._setActiveObject(a,d),this._fireSelectionEvents(r,d)},_createGroup:function(u){var d=this._objects,r=d.indexOf(this._activeObject)<d.indexOf(u)?[this._activeObject,u]:[u,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new b.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(u){var d,r=this._collectObjects(u);r.length===1?this.setActiveObject(r[0],u):r.length>1&&(d=new b.ActiveSelection(r.reverse(),{canvas:this}),this.setActiveObject(d,u))},_collectObjects:function(u){for(var d,r=[],a=this._groupSelector.ex,c=this._groupSelector.ey,p=a+this._groupSelector.left,g=c+this._groupSelector.top,v=new b.Point(h(a,p),h(c,g)),y=new b.Point(s(a,p),s(c,g)),_=!this.selectionFullyContained,B=a===p&&c===g,N=this._objects.length;N--&&!((d=this._objects[N])&&d.selectable&&d.visible&&(_&&d.intersectsWithRect(v,y,!0)||d.isContainedWithinRect(v,y,!0)||_&&d.containsPoint(v,null,!0)||_&&d.containsPoint(y,null,!0))&&(r.push(d),B)););return r.length>1&&(r=r.filter(function(L){return!L.onSelect({e:u})})),r},_maybeGroupObjects:function(u){this.selection&&this._groupSelector&&this._groupSelectedObjects(u),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),b.util.object.extend(b.StaticCanvas.prototype,{toDataURL:function(h){h||(h={});var s=h.format||"png",u=h.quality||1,d=(h.multiplier||1)*(h.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(d,h);return b.util.toDataURL(r,s,u)},toCanvasElement:function(h,s){h=h||1;var u=((s=s||{}).width||this.width)*h,d=(s.height||this.height)*h,r=this.getZoom(),a=this.width,c=this.height,p=r*h,g=this.viewportTransform,v=(g[4]-(s.left||0))*h,y=(g[5]-(s.top||0))*h,_=this.interactive,B=[p,0,0,p,v,y],N=this.enableRetinaScaling,L=b.util.createCanvasElement(),C=this.contextTop;return L.width=u,L.height=d,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=B,this.width=u,this.height=d,this.calcViewportBoundaries(),this.renderCanvas(L.getContext("2d"),this._objects),this.viewportTransform=g,this.width=a,this.height=c,this.calcViewportBoundaries(),this.interactive=_,this.enableRetinaScaling=N,this.contextTop=C,L}}),b.util.object.extend(b.StaticCanvas.prototype,{loadFromJSON:function(h,s,u){if(h){var d=typeof h=="string"?JSON.parse(h):b.util.object.clone(h),r=this,a=d.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete d.clipPath,this._enlivenObjects(d.objects,function(p){r.clear(),r._setBgOverlay(d,function(){a?r._enlivenObjects([a],function(g){r.clipPath=g[0],r.__setupCanvas.call(r,d,p,c,s)}):r.__setupCanvas.call(r,d,p,c,s)})},u),this}},__setupCanvas:function(h,s,u,d){var r=this;s.forEach(function(a,c){r.insertAt(a,c)}),this.renderOnAddRemove=u,delete h.objects,delete h.backgroundImage,delete h.overlayImage,delete h.background,delete h.overlay,this._setOptions(h),this.renderAll(),d&&d()},_setBgOverlay:function(h,s){var u={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(h.backgroundImage||h.overlayImage||h.background||h.overlay){var d=function(){u.backgroundImage&&u.overlayImage&&u.backgroundColor&&u.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",h.backgroundImage,u,d),this.__setBgOverlay("overlayImage",h.overlayImage,u,d),this.__setBgOverlay("backgroundColor",h.background,u,d),this.__setBgOverlay("overlayColor",h.overlay,u,d)}else s&&s()},__setBgOverlay:function(h,s,u,d){var r=this;if(!s)return u[h]=!0,void(d&&d());h==="backgroundImage"||h==="overlayImage"?b.util.enlivenObjects([s],function(a){r[h]=a[0],u[h]=!0,d&&d()}):this["set"+b.util.string.capitalize(h,!0)](s,function(){u[h]=!0,d&&d()})},_enlivenObjects:function(h,s,u){h&&h.length!==0?b.util.enlivenObjects(h,function(d){s&&s(d)},null,u):s&&s([])},_toDataURL:function(h,s){this.clone(function(u){s(u.toDataURL(h))})},_toDataURLWithMultiplier:function(h,s,u){this.clone(function(d){u(d.toDataURLWithMultiplier(h,s))})},clone:function(h,s){var u=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(d){d.loadFromJSON(u,function(){h&&h(d)})})},cloneWithoutData:function(h){var s=b.util.createCanvasElement();s.width=this.width,s.height=this.height;var u=new b.Canvas(s);this.backgroundImage?(u.setBackgroundImage(this.backgroundImage.src,function(){u.renderAll(),h&&h(u)}),u.backgroundImageOpacity=this.backgroundImageOpacity,u.backgroundImageStretch=this.backgroundImageStretch):h&&h(u)}}),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.util.object.clone,r=s.util.toFixed,a=s.util.string.capitalize,c=s.util.degreesToRadians,p=!s.isLikelyNode;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:p,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(g){g&&this.setOptions(g)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(g){var v=s.perfLimitSizeTotal,y=g.width,_=g.height,B=s.maxCacheSideLimit,N=s.minCacheSideLimit;if(y<=B&&_<=B&&y*_<=v)return y<N&&(g.width=N),_<N&&(g.height=N),g;var L=y/_,C=s.util.limitDimsByArea(L,v),D=s.util.capValue,F=D(N,C.x,B),j=D(N,C.y,B);return y>F&&(g.zoomX/=y/F,g.width=F,g.capped=!0),_>j&&(g.zoomY/=_/j,g.height=j,g.capped=!0),g},_getCacheCanvasDimensions:function(){var g=this.getTotalObjectScaling(),v=this._getTransformedDimensions(0,0),y=v.x*g.scaleX/this.scaleX,_=v.y*g.scaleY/this.scaleY;return{width:y+2,height:_+2,zoomX:g.scaleX,zoomY:g.scaleY,x:y,y:_}},_updateCacheCanvas:function(){var g=this.canvas;if(this.noScaleCache&&g&&g._currentTransform){var v=g._currentTransform.target,y=g._currentTransform.action;if(this===v&&y.slice&&y.slice(0,5)==="scale")return!1}var _,B,N=this._cacheCanvas,L=this._limitCacheSize(this._getCacheCanvasDimensions()),C=s.minCacheSideLimit,D=L.width,F=L.height,j=L.zoomX,U=L.zoomY,W=D!==this.cacheWidth||F!==this.cacheHeight,$=this.zoomX!==j||this.zoomY!==U,M=W||$,P=0,z=0,X=!1;if(W){var et=this._cacheCanvas.width,J=this._cacheCanvas.height,Z=D>et||F>J;X=Z||(D<.9*et||F<.9*J)&&et>C&&J>C,Z&&!L.capped&&(D>C||F>C)&&(P=.1*D,z=.1*F)}return this instanceof s.Text&&this.path&&(M=!0,X=!0,P+=this.getHeightOfLine(0)*this.zoomX,z+=this.getHeightOfLine(0)*this.zoomY),!!M&&(X?(N.width=Math.ceil(D+P),N.height=Math.ceil(F+z)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,N.width,N.height)),_=L.x/2,B=L.y/2,this.cacheTranslationX=Math.round(N.width/2-_)+_,this.cacheTranslationY=Math.round(N.height/2-B)+B,this.cacheWidth=D,this.cacheHeight=F,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(j,U),this.zoomX=j,this.zoomY=U,!0)},setOptions:function(g){this._setOptions(g),this._initGradient(g.fill,"fill"),this._initGradient(g.stroke,"stroke"),this._initPattern(g.fill,"fill"),this._initPattern(g.stroke,"stroke")},transform:function(g){var v=this.group&&!this.group._transformDone||this.group&&this.canvas&&g===this.canvas.contextTop,y=this.calcTransformMatrix(!v);g.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(g){var v=s.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:r(this.left,v),top:r(this.top,v),width:r(this.width,v),height:r(this.height,v),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,v),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,v),scaleX:r(this.scaleX,v),scaleY:r(this.scaleY,v),angle:r(this.angle,v),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,v),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,v),skewY:r(this.skewY,v)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(g),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,y,g),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(g){return this.toObject(g)},_removeDefaultValues:function(g){var v=s.util.getKlass(g.type).prototype;return v.stateProperties.forEach(function(y){y!=="left"&&y!=="top"&&(g[y]===v[y]&&delete g[y],Array.isArray(g[y])&&Array.isArray(v[y])&&g[y].length===0&&v[y].length===0&&delete g[y])}),g},toString:function(){return"#<fabric."+a(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var g=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(g.scaleX),scaleY:Math.abs(g.scaleY)}},getTotalObjectScaling:function(){var g=this.getObjectScaling(),v=g.scaleX,y=g.scaleY;if(this.canvas){var _=this.canvas.getZoom(),B=this.canvas.getRetinaScaling();v*=_*B,y*=_*B}return{scaleX:v,scaleY:y}},getObjectOpacity:function(){var g=this.opacity;return this.group&&(g*=this.group.getObjectOpacity()),g},_set:function(g,v){var y=g==="scaleX"||g==="scaleY",_=this[g]!==v,B=!1;return y&&(v=this._constrainScale(v)),g==="scaleX"&&v<0?(this.flipX=!this.flipX,v*=-1):g==="scaleY"&&v<0?(this.flipY=!this.flipY,v*=-1):g!=="shadow"||!v||v instanceof s.Shadow?g==="dirty"&&this.group&&this.group.set("dirty",v):v=new s.Shadow(v),this[g]=v,_&&(B=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(g)>-1?(this.dirty=!0,B&&this.group.set("dirty",!0)):B&&this.stateProperties.indexOf(g)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(g){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(g.save(),this._setupCompositeOperation(g),this.drawSelectionBackground(g),this.transform(g),this._setOpacity(g),this._setShadow(g,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(g)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(g),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),g.restore())},renderCache:function(g){g=g||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,g.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!(this.paintFirst!=="stroke"||!this.hasFill()||!this.hasStroke()||typeof this.shadow!="object")||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(g,v){if(g.save(),v.inverted?g.globalCompositeOperation="destination-out":g.globalCompositeOperation="destination-in",v.absolutePositioned){var y=s.util.invertTransform(this.calcTransformMatrix());g.transform(y[0],y[1],y[2],y[3],y[4],y[5])}v.transform(g),g.scale(1/v.zoomX,1/v.zoomY),g.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),g.restore()},drawObject:function(g,v){var y=this.fill,_=this.stroke;v?(this.fill="black",this.stroke="",this._setClippingProperties(g)):this._renderBackground(g),this._render(g),this._drawClipPath(g,this.clipPath),this.fill=y,this.stroke=_},_drawClipPath:function(g,v){v&&(v.canvas=this.canvas,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCache(g,v))},drawCacheOnCanvas:function(g){g.scale(1/this.zoomX,1/this.zoomY),g.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(g){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!g&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!g){var v=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-v/2,-y/2,v,y)}return!0}return!1},_renderBackground:function(g){if(this.backgroundColor){var v=this._getNonTransformedDimensions();g.fillStyle=this.backgroundColor,g.fillRect(-v.x/2,-v.y/2,v.x,v.y),this._removeShadow(g)}},_setOpacity:function(g){this.group&&!this.group._transformDone?g.globalAlpha=this.getObjectOpacity():g.globalAlpha*=this.opacity},_setStrokeStyles:function(g,v){var y=v.stroke;y&&(g.lineWidth=v.strokeWidth,g.lineCap=v.strokeLineCap,g.lineDashOffset=v.strokeDashOffset,g.lineJoin=v.strokeLineJoin,g.miterLimit=v.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(g,y):(g.strokeStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,y)):g.strokeStyle=v.stroke)},_setFillStyles:function(g,v){var y=v.fill;y&&(y.toLive?(g.fillStyle=y.toLive(g,this),this._applyPatternGradientTransform(g,v.fill)):g.fillStyle=y)},_setClippingProperties:function(g){g.globalAlpha=1,g.strokeStyle="transparent",g.fillStyle="#000000"},_setLineDash:function(g,v){v&&v.length!==0&&(1&v.length&&v.push.apply(v,v),g.setLineDash(v))},_renderControls:function(g,v){var y,_,B,N=this.getViewportTransform(),L=this.calcTransformMatrix();_=(v=v||{}).hasBorders!==void 0?v.hasBorders:this.hasBorders,B=v.hasControls!==void 0?v.hasControls:this.hasControls,L=s.util.multiplyTransformMatrices(N,L),y=s.util.qrDecompose(L),g.save(),g.translate(y.translateX,y.translateY),g.lineWidth=1*this.borderScaleFactor,this.group||(g.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(y.angle-=180),g.rotate(c(this.group?y.angle:this.angle)),v.forActiveSelection||this.group?_&&this.drawBordersInGroup(g,y,v):_&&this.drawBorders(g,v),B&&this.drawControls(g,v),g.restore()},_setShadow:function(g){if(this.shadow){var v,y=this.shadow,_=this.canvas,B=_&&_.viewportTransform[0]||1,N=_&&_.viewportTransform[3]||1;v=y.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),_&&_._isRetinaScaling()&&(B*=s.devicePixelRatio,N*=s.devicePixelRatio),g.shadowColor=y.color,g.shadowBlur=y.blur*s.browserShadowBlurConstant*(B+N)*(v.scaleX+v.scaleY)/4,g.shadowOffsetX=y.offsetX*B*v.scaleX,g.shadowOffsetY=y.offsetY*N*v.scaleY}},_removeShadow:function(g){this.shadow&&(g.shadowColor="",g.shadowBlur=g.shadowOffsetX=g.shadowOffsetY=0)},_applyPatternGradientTransform:function(g,v){if(!v||!v.toLive)return{offsetX:0,offsetY:0};var y=v.gradientTransform||v.patternTransform,_=-this.width/2+v.offsetX||0,B=-this.height/2+v.offsetY||0;return v.gradientUnits==="percentage"?g.transform(this.width,0,0,this.height,_,B):g.transform(1,0,0,1,_,B),y&&g.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:_,offsetY:B}},_renderPaintInOrder:function(g){this.paintFirst==="stroke"?(this._renderStroke(g),this._renderFill(g)):(this._renderFill(g),this._renderStroke(g))},_render:function(){},_renderFill:function(g){this.fill&&(g.save(),this._setFillStyles(g,this),this.fillRule==="evenodd"?g.fill("evenodd"):g.fill(),g.restore())},_renderStroke:function(g){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(g),g.save(),this.strokeUniform&&this.group){var v=this.getObjectScaling();g.scale(1/v.scaleX,1/v.scaleY)}else this.strokeUniform&&g.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(g,this.strokeDashArray),this._setStrokeStyles(g,this),g.stroke(),g.restore()}},_applyPatternForTransformedGradient:function(g,v){var y,_=this._limitCacheSize(this._getCacheCanvasDimensions()),B=s.util.createCanvasElement(),N=this.canvas.getRetinaScaling(),L=_.x/this.scaleX/N,C=_.y/this.scaleY/N;B.width=L,B.height=C,(y=B.getContext("2d")).beginPath(),y.moveTo(0,0),y.lineTo(L,0),y.lineTo(L,C),y.lineTo(0,C),y.closePath(),y.translate(L/2,C/2),y.scale(_.zoomX/this.scaleX/N,_.zoomY/this.scaleY/N),this._applyPatternGradientTransform(y,v),y.fillStyle=v.toLive(g),y.fill(),g.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),g.scale(N*this.scaleX/_.zoomX,N*this.scaleY/_.zoomY),g.strokeStyle=y.createPattern(B,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var g=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",g.scaleX),this.set("scaleY",g.scaleY),this.angle=g.angle,this.skewX=g.skewX,this.skewY=0}},_removeTransformMatrix:function(g){var v=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),v=s.util.transformPoint(v,this.transformMatrix)),this.transformMatrix=null,g&&(this.scaleX*=g.scaleX,this.scaleY*=g.scaleY,this.cropX=g.cropX,this.cropY=g.cropY,v.x+=g.offsetLeft,v.y+=g.offsetTop,this.width=g.width,this.height=g.height),this.setPositionByOrigin(v,"center","center")},clone:function(g,v){var y=this.toObject(v);this.constructor.fromObject?this.constructor.fromObject(y,g):s.Object._fromObject("Object",y,g)},cloneAsImage:function(g,v){var y=this.toCanvasElement(v);return g&&g(new s.Image(y)),this},toCanvasElement:function(g){g||(g={});var v=s.util,y=v.saveObjectTransform(this),_=this.group,B=this.shadow,N=Math.abs,L=(g.multiplier||1)*(g.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,g.withoutTransform&&v.resetObjectTransform(this),g.withoutShadow&&(this.shadow=null);var C,D,F,j,U=s.util.createCanvasElement(),W=this.getBoundingRect(!0,!0),$=this.shadow,M={x:0,y:0};$&&(D=$.blur,C=$.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),M.x=2*Math.round(N($.offsetX)+D)*N(C.scaleX),M.y=2*Math.round(N($.offsetY)+D)*N(C.scaleY)),F=W.width+M.x,j=W.height+M.y,U.width=Math.ceil(F),U.height=Math.ceil(j);var P=new s.StaticCanvas(U,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});g.format==="jpeg"&&(P.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(P.width/2,P.height/2),"center","center");var z=this.canvas;P.add(this);var X=P.toCanvasElement(L||1,g);return this.shadow=B,this.set("canvas",z),_&&(this.group=_),this.set(y).setCoords(),P._objects=[],P.dispose(),P=null,X},toDataURL:function(g){return g||(g={}),s.util.toDataURL(this.toCanvasElement(g),g.format||"png",g.quality||1)},isType:function(g){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===g},complexity:function(){return 1},toJSON:function(g){return this.toObject(g)},rotate:function(g){var v=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return v&&this._setOriginToCenter(),this.set("angle",g),v&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(g,v){v=v||this.canvas.getPointer(g);var y=new s.Point(v.x,v.y),_=this._getLeftTopCoords();return this.angle&&(y=s.util.rotatePoint(y,_,c(-this.angle))),{x:y.x-_.x,y:y.y-_.y}},_setupCompositeOperation:function(g){this.globalCompositeOperation&&(g.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),u(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(g,v,y,_){var B=s[g];v=d(v,!0),s.util.enlivenPatterns([v.fill,v.stroke],function(N){N[0]!==void 0&&(v.fill=N[0]),N[1]!==void 0&&(v.stroke=N[1]),s.util.enlivenObjectEnlivables(v,v,function(){var L=_?new B(v[_],v):new B(v);y&&y(L)})})},s.Object.__uid=0)}(t),Q=b.util.degreesToRadians,R={left:-.5,center:0,right:.5},V={top:-.5,center:0,bottom:.5},b.util.object.extend(b.Object.prototype,{translateToGivenOrigin:function(h,s,u,d,r){var a,c,p,g=h.x,v=h.y;return typeof s=="string"?s=R[s]:s-=.5,typeof d=="string"?d=R[d]:d-=.5,typeof u=="string"?u=V[u]:u-=.5,typeof r=="string"?r=V[r]:r-=.5,c=r-u,((a=d-s)||c)&&(p=this._getTransformedDimensions(),g=h.x+a*p.x,v=h.y+c*p.y),new b.Point(g,v)},translateToCenterPoint:function(h,s,u){var d=this.translateToGivenOrigin(h,s,u,"center","center");return this.angle?b.util.rotatePoint(d,h,Q(this.angle)):d},translateToOriginPoint:function(h,s,u){var d=this.translateToGivenOrigin(h,"center","center",s,u);return this.angle?b.util.rotatePoint(d,h,Q(this.angle)):d},getCenterPoint:function(){var h=new b.Point(this.left,this.top);return this.translateToCenterPoint(h,this.originX,this.originY)},getPointByOrigin:function(h,s){var u=this.getCenterPoint();return this.translateToOriginPoint(u,h,s)},toLocalPoint:function(h,s,u){var d,r,a=this.getCenterPoint();return d=s!==void 0&&u!==void 0?this.translateToGivenOrigin(a,"center","center",s,u):new b.Point(this.left,this.top),r=new b.Point(h.x,h.y),this.angle&&(r=b.util.rotatePoint(r,a,-Q(this.angle))),r.subtractEquals(d)},setPositionByOrigin:function(h,s,u){var d=this.translateToCenterPoint(h,s,u),r=this.translateToOriginPoint(d,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(h){var s,u,d=Q(this.angle),r=this.getScaledWidth(),a=b.util.cos(d)*r,c=b.util.sin(d)*r;s=typeof this.originX=="string"?R[this.originX]:this.originX-.5,u=typeof h=="string"?R[h]:h-.5,this.left+=a*(u-s),this.top+=c*(u-s),this.setCoords(),this.originX=h},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var h=this.getCenterPoint();this.originX="center",this.originY="center",this.left=h.x,this.top=h.y},_resetOrigin:function(){var h=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=h.x,this.top=h.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var h=b.util,s=h.degreesToRadians,u=h.multiplyTransformMatrices,d=h.transformPoint;h.object.extend(b.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(r,a){return a?r?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),r?this.aCoords:this.lineCoords)},getCoords:function(r,a){return c=this._getCoords(r,a),[new b.Point(c.tl.x,c.tl.y),new b.Point(c.tr.x,c.tr.y),new b.Point(c.br.x,c.br.y),new b.Point(c.bl.x,c.bl.y)];var c},intersectsWithRect:function(r,a,c,p){var g=this.getCoords(c,p);return b.Intersection.intersectPolygonRectangle(g,r,a).status==="Intersection"},intersectsWithObject:function(r,a,c){return b.Intersection.intersectPolygonPolygon(this.getCoords(a,c),r.getCoords(a,c)).status==="Intersection"||r.isContainedWithinObject(this,a,c)||this.isContainedWithinObject(r,a,c)},isContainedWithinObject:function(r,a,c){for(var p=this.getCoords(a,c),g=a?r.aCoords:r.lineCoords,v=0,y=r._getImageLines(g);v<4;v++)if(!r.containsPoint(p[v],y))return!1;return!0},isContainedWithinRect:function(r,a,c,p){var g=this.getBoundingRect(c,p);return g.left>=r.x&&g.left+g.width<=a.x&&g.top>=r.y&&g.top+g.height<=a.y},containsPoint:function(r,a,c,p){var g=this._getCoords(c,p),v=(a=a||this._getImageLines(g),this._findCrossPoints(r,a));return v!==0&&v%2==1},isOnScreen:function(r){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;return!!this.getCoords(!0,r).some(function(p){return p.x<=c.x&&p.x>=a.x&&p.y<=c.y&&p.y>=a.y})||!!this.intersectsWithRect(a,c,!0,r)||this._containsCenterOfCanvas(a,c,r)},_containsCenterOfCanvas:function(r,a,c){var p={x:(r.x+a.x)/2,y:(r.y+a.y)/2};return!!this.containsPoint(p,null,!0,c)},isPartiallyOnScreen:function(r){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;return!!this.intersectsWithRect(a,c,!0,r)||this.getCoords(!0,r).every(function(p){return(p.x>=c.x||p.x<=a.x)&&(p.y>=c.y||p.y<=a.y)})&&this._containsCenterOfCanvas(a,c,r)},_getImageLines:function(r){return{topline:{o:r.tl,d:r.tr},rightline:{o:r.tr,d:r.br},bottomline:{o:r.br,d:r.bl},leftline:{o:r.bl,d:r.tl}}},_findCrossPoints:function(r,a){var c,p,g,v=0;for(var y in a)if(!((g=a[y]).o.y<r.y&&g.d.y<r.y||g.o.y>=r.y&&g.d.y>=r.y||(g.o.x===g.d.x&&g.o.x>=r.x?p=g.o.x:(c=(g.d.y-g.o.y)/(g.d.x-g.o.x),p=-(r.y-0*r.x-(g.o.y-c*g.o.x))/(0-c)),p>=r.x&&(v+=1),v!==2)))break;return v},getBoundingRect:function(r,a){var c=this.getCoords(r,a);return h.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(r){return Math.abs(r)<this.minScaleLimit?r<0?-this.minScaleLimit:this.minScaleLimit:r===0?1e-4:r},scale:function(r){return this._set("scaleX",r),this._set("scaleY",r),this.setCoords()},scaleToWidth:function(r,a){var c=this.getBoundingRect(a).width/this.getScaledWidth();return this.scale(r/this.width/c)},scaleToHeight:function(r,a){var c=this.getBoundingRect(a).height/this.getScaledHeight();return this.scale(r/this.height/c)},calcLineCoords:function(){var r=this.getViewportTransform(),a=this.padding,c=s(this.angle),p=h.cos(c)*a,g=h.sin(c)*a,v=p+g,y=p-g,_=this.calcACoords(),B={tl:d(_.tl,r),tr:d(_.tr,r),bl:d(_.bl,r),br:d(_.br,r)};return a&&(B.tl.x-=y,B.tl.y-=v,B.tr.x+=v,B.tr.y-=y,B.bl.x-=v,B.bl.y+=y,B.br.x+=y,B.br.y+=v),B},calcOCoords:function(){var r=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),c=this.getViewportTransform(),p=u(c,a),g=u(p,r),v=(g=u(g,[1/c[0],0,0,1/c[3],0,0]),this._calculateCurrentDimensions()),y={};return this.forEachControl(function(_,B,N){y[B]=_.positionHandler(v,g,N)}),y},calcACoords:function(){var r=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),c=u(a,r),p=this._getTransformedDimensions(),g=p.x/2,v=p.y/2;return{tl:d({x:-g,y:-v},c),tr:d({x:g,y:-v},c),bl:d({x:-g,y:v},c),br:d({x:g,y:v},c)}},setCoords:function(r){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),r||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return h.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var r=this.getCenterPoint();return[1,0,0,1,r.x,r.y]},transformMatrixKey:function(r){var a="_",c="";return!r&&this.group&&(c=this.group.transformMatrixKey(r)+a),c+this.top+a+this.left+a+this.scaleX+a+this.scaleY+a+this.skewX+a+this.skewY+a+this.angle+a+this.originX+a+this.originY+a+this.width+a+this.height+a+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(r){var a=this.calcOwnMatrix();if(r||!this.group)return a;var c=this.transformMatrixKey(r),p=this.matrixCache||(this.matrixCache={});return p.key===c?p.value:(this.group&&(a=u(this.group.calcTransformMatrix(!1),a)),p.key=c,p.value=a,a)},calcOwnMatrix:function(){var r=this.transformMatrixKey(!0),a=this.ownMatrixCache||(this.ownMatrixCache={});if(a.key===r)return a.value;var c=this._calcTranslateMatrix(),p={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return a.key=r,a.value=h.composeMatrix(p),a.value},_getNonTransformedDimensions:function(){var r=this.strokeWidth;return{x:this.width+r,y:this.height+r}},_getTransformedDimensions:function(r,a){r===void 0&&(r=this.skewX),a===void 0&&(a=this.skewY);var c,p,g,v=r===0&&a===0;if(this.strokeUniform?(p=this.width,g=this.height):(p=(c=this._getNonTransformedDimensions()).x,g=c.y),v)return this._finalizeDimensions(p*this.scaleX,g*this.scaleY);var y=h.sizeAfterTransform(p,g,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:r,skewY:a});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(r,a){return this.strokeUniform?{x:r+this.strokeWidth,y:a+this.strokeWidth}:{x:r,y:a}},_calculateCurrentDimensions:function(){var r=this.getViewportTransform(),a=this._getTransformedDimensions();return d(a,r,!0).scalarAdd(2*this.padding)}})}(),b.util.object.extend(b.Object.prototype,{sendToBack:function(){return this.group?b.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?b.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(h){return this.group?b.StaticCanvas.prototype.sendBackwards.call(this.group,this,h):this.canvas&&this.canvas.sendBackwards(this,h),this},bringForward:function(h){return this.group?b.StaticCanvas.prototype.bringForward.call(this.group,this,h):this.canvas&&this.canvas.bringForward(this,h),this},moveTo:function(h){return this.group&&this.group.type!=="activeSelection"?b.StaticCanvas.prototype.moveTo.call(this.group,this,h):this.canvas&&this.canvas.moveTo(this,h),this}}),function(){function h(u,d){if(d){if(d.toLive)return u+": url(#SVGID_"+d.id+"); ";var r=new b.Color(d),a=u+": "+r.toRgb()+"; ",c=r.getAlpha();return c!==1&&(a+=u+"-opacity: "+c.toString()+"; "),a}return u+": none; "}var s=b.util.toFixed;b.util.object.extend(b.Object.prototype,{getSvgStyles:function(u){var d=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",a=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",p=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",v=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=this.opacity!==void 0?this.opacity:"1",_=this.visible?"":" visibility: hidden;",B=u?"":this.getSvgFilter(),N=h("fill",this.fill);return[h("stroke",this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",a,"; ","stroke-linecap: ",p,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",v,"; ",N,"fill-rule: ",d,"; ","opacity: ",y,";",B,_].join("")},getSvgSpanStyles:function(u,d){var r="; ",a=u.fontFamily?"font-family: "+(u.fontFamily.indexOf("'")===-1&&u.fontFamily.indexOf('"')===-1?"'"+u.fontFamily+"'":u.fontFamily)+r:"",c=u.strokeWidth?"stroke-width: "+u.strokeWidth+r:"",p=(a=a,u.fontSize?"font-size: "+u.fontSize+"px"+r:""),g=u.fontStyle?"font-style: "+u.fontStyle+r:"",v=u.fontWeight?"font-weight: "+u.fontWeight+r:"",y=u.fill?h("fill",u.fill):"",_=u.stroke?h("stroke",u.stroke):"",B=this.getSvgTextDecoration(u);return B&&(B="text-decoration: "+B+r),[_,c,a,p,g,v,B,y,u.deltaY?"baseline-shift: "+-u.deltaY+"; ":"",d?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(u){return["overline","underline","line-through"].filter(function(d){return u[d.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(u,d){var r=u?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+b.util.matrixToSVG(r)+(d||"")+'" '},_setSVGBg:function(u){if(this.backgroundColor){var d=b.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,d),'" y="',s(-this.height/2,d),'" width="',s(this.width,d),'" height="',s(this.height,d),'"></rect>\n')}},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(u),{reviver:u})},toClipPathSVG:function(u){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(u),{reviver:u})},_createBaseClipPathSVGMarkup:function(u,d){var r=(d=d||{}).reviver,a=d.additionalTransform||"",c=[this.getSvgTransform(!0,a),this.getSvgCommons()].join(""),p=u.indexOf("COMMON_PARTS");return u[p]=c,r?r(u.join("")):u.join("")},_createBaseSVGMarkup:function(u,d){var r,a,c=(d=d||{}).noStyle,p=d.reviver,g=c?"":'style="'+this.getSvgStyles()+'" ',v=d.withShadow?'style="'+this.getSvgFilter()+'" ':"",y=this.clipPath,_=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",B=y&&y.absolutePositioned,N=this.stroke,L=this.fill,C=this.shadow,D=[],F=u.indexOf("COMMON_PARTS"),j=d.additionalTransform;return y&&(y.clipPathId="CLIPPATH_"+b.Object.__uid++,a='<clipPath id="'+y.clipPathId+'" >\n'+y.toClipPathSVG(p)+"</clipPath>\n"),B&&D.push("<g ",v,this.getSvgCommons()," >\n"),D.push("<g ",this.getSvgTransform(!1),B?"":v+this.getSvgCommons()," >\n"),r=[g,_,c?"":this.addPaintOrder()," ",j?'transform="'+j+'" ':""].join(""),u[F]=r,L&&L.toLive&&D.push(L.toSVG(this)),N&&N.toLive&&D.push(N.toSVG(this)),C&&D.push(C.toSVG(this)),y&&D.push(a),D.push(u.join("")),D.push("</g>\n"),B&&D.push("</g>\n"),p?p(D.join("")):D.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var h=b.util.object.extend,s="stateProperties";function u(r,a,c){var p={};c.forEach(function(g){p[g]=r[g]}),h(r[a],p,!0)}function d(r,a,c){if(r===a)return!0;if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(var p=0,g=r.length;p<g;p++)if(!d(r[p],a[p]))return!1;return!0}if(r&&typeof r=="object"){var v,y=Object.keys(r);if(!a||typeof a!="object"||!c&&y.length!==Object.keys(a).length)return!1;for(p=0,g=y.length;p<g;p++)if((v=y[p])!=="canvas"&&v!=="group"&&!d(r[v],a[v]))return!1;return!0}}b.util.object.extend(b.Object.prototype,{hasStateChanged:function(r){var a="_"+(r=r||s);return Object.keys(this[a]).length<this[r].length||!d(this[a],this,!0)},saveState:function(r){var a=r&&r.propertySet||s,c="_"+a;return this[c]?(u(this,c,this[a]),r&&r.stateProperties&&u(this,c,r.stateProperties),this):this.setupState(r)},setupState:function(r){var a=(r=r||{}).propertySet||s;return r.propertySet=a,this["_"+a]={},this.saveState(r),this}})}(),function(){var h=b.util.degreesToRadians;b.util.object.extend(b.Object.prototype,{_findTargetCorner:function(s,u){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var d,r,a,c=s.x,p=s.y,g=Object.keys(this.oCoords),v=g.length-1;for(this.__corner=0;v>=0;v--)if(a=g[v],this.isControlVisible(a)&&(r=this._getImageLines(u?this.oCoords[a].touchCorner:this.oCoords[a].corner),(d=this._findCrossPoints({x:c,y:p},r))!==0&&d%2==1))return this.__corner=a,a;return!1},forEachControl:function(s){for(var u in this.controls)s(this.controls[u],u,this)},_setCornerCoords:function(){var s=this.oCoords;for(var u in s){var d=this.controls[u];s[u].corner=d.calcCornerCoords(this.angle,this.cornerSize,s[u].x,s[u].y,!1),s[u].touchCorner=d.calcCornerCoords(this.angle,this.touchCornerSize,s[u].x,s[u].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var u=this.getCenterPoint(),d=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return s.translate(u.x,u.y),s.scale(1/r[0],1/r[3]),s.rotate(h(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-d.x/2,-d.y/2,d.x,d.y),s.restore(),this},drawBorders:function(s,u){u=u||{};var d=this._calculateCurrentDimensions(),r=this.borderScaleFactor,a=d.x+r,c=d.y+r,p=u.hasControls!==void 0?u.hasControls:this.hasControls,g=!1;return s.save(),s.strokeStyle=u.borderColor||this.borderColor,this._setLineDash(s,u.borderDashArray||this.borderDashArray),s.strokeRect(-a/2,-c/2,a,c),p&&(s.beginPath(),this.forEachControl(function(v,y,_){v.withConnection&&v.getVisibility(_,y)&&(g=!0,s.moveTo(v.x*a,v.y*c),s.lineTo(v.x*a+v.offsetX,v.y*c+v.offsetY))}),g&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,u,d){d=d||{};var r=b.util.sizeAfterTransform(this.width,this.height,u),a=this.strokeWidth,c=this.strokeUniform,p=this.borderScaleFactor,g=r.x+a*(c?this.canvas.getZoom():u.scaleX)+p,v=r.y+a*(c?this.canvas.getZoom():u.scaleY)+p;return s.save(),this._setLineDash(s,d.borderDashArray||this.borderDashArray),s.strokeStyle=d.borderColor||this.borderColor,s.strokeRect(-g/2,-v/2,g,v),s.restore(),this},drawControls:function(s,u){u=u||{},s.save();var d,r,a=this.canvas.getRetinaScaling();return s.setTransform(a,0,0,a,0,0),s.strokeStyle=s.fillStyle=u.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=u.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,u.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(d=this.group.calcTransformMatrix()),this.forEachControl(function(c,p,g){r=g.oCoords[p],c.getVisibility(g,p)&&(d&&(r=b.util.transformPoint(r,d)),c.render(s,r.x,r.y,u,g))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,u){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=u,this},setControlsVisibility:function(s){for(var u in s||(s={}),s)this.setControlVisible(u,s[u]);return this},onDeselect:function(){},onSelect:function(){}})}(),b.util.object.extend(b.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(h,s){var u=function(){},d=(s=s||{}).onComplete||u,r=s.onChange||u,a=this;return b.util.animate({target:this,startValue:h.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){h.set("left",c),a.requestRenderAll(),r()},onComplete:function(){h.setCoords(),d()}})},fxCenterObjectV:function(h,s){var u=function(){},d=(s=s||{}).onComplete||u,r=s.onChange||u,a=this;return b.util.animate({target:this,startValue:h.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){h.set("top",c),a.requestRenderAll(),r()},onComplete:function(){h.setCoords(),d()}})},fxRemove:function(h,s){var u=function(){},d=(s=s||{}).onComplete||u,r=s.onChange||u,a=this;return b.util.animate({target:this,startValue:h.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){h.set("opacity",c),a.requestRenderAll(),r()},onComplete:function(){a.remove(h),d()}})}}),b.util.object.extend(b.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var h,s,u=[],d=[];for(h in arguments[0])u.push(h);for(var r=0,a=u.length;r<a;r++)h=u[r],s=r!==a-1,d.push(this._animate(h,arguments[0][h],arguments[1],s));return d}return this._animate.apply(this,arguments)},_animate:function(h,s,u,d){var r,a=this;s=s.toString(),u=u?b.util.object.clone(u):{},~h.indexOf(".")&&(r=h.split("."));var c=a.colorProperties.indexOf(h)>-1||r&&a.colorProperties.indexOf(r[1])>-1,p=r?this.get(r[0])[r[1]]:this.get(h);"from"in u||(u.from=p),c||(s=~s.indexOf("=")?p+parseFloat(s.replace("=","")):parseFloat(s));var g={target:this,startValue:u.from,endValue:s,byValue:u.by,easing:u.easing,duration:u.duration,abort:u.abort&&function(v,y,_){return u.abort.call(a,v,y,_)},onChange:function(v,y,_){r?a[r[0]][r[1]]=v:a.set(h,v),d||u.onChange&&u.onChange(v,y,_)},onComplete:function(v,y,_){d||(a.setCoords(),u.onComplete&&u.onComplete(v,y,_))}};return c?b.util.animateColor(g.startValue,g.endValue,g.duration,g):b.util.animate(g)}}),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function a(c,p){var g=c.origin,v=c.axis1,y=c.axis2,_=c.dimension,B=p.nearest,N=p.center,L=p.farthest;return function(){switch(this.get(g)){case B:return Math.min(this.get(v),this.get(y));case N:return Math.min(this.get(v),this.get(y))+.5*this.get(_);case L:return Math.max(this.get(v),this.get(y))}}}s.Line?s.warn("fabric.Line is already defined"):(s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,p){c||(c=[0,0,0,0]),this.callSuper("initialize",p),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(p)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,p){return this.callSuper("_set",c,p),r[c]!==void 0&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var p=this.calcLinePoints();c.moveTo(p.x1,p.y1),c.lineTo(p.x2,p.y2),c.lineWidth=this.strokeWidth;var g=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return u(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(c.y-=this.strokeWidth),this.height===0&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,p=this.y1<=this.y2?-1:1,g=c*this.width*.5,v=p*this.height*.5;return{x1:g,x2:c*this.width*-.5,y1:v,y2:p*this.height*-.5}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'" />\n']}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(c,p,g){g=g||{};var v=s.parseAttributes(c,s.Line.ATTRIBUTE_NAMES),y=[v.x1||0,v.y1||0,v.x2||0,v.y2||0];p(new s.Line(y,u(v,g)))},s.Line.fromObject=function(c,p){var g=d(c,!0);g.points=[c.x1,c.y1,c.x2,c.y2],s.Object._fromObject("Line",g,function(v){delete v.points,p&&p(v)},"points")})}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.degreesToRadians;s.Circle?s.warn("fabric.Circle is already defined."):(s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(d,r){return this.callSuper("_set",d,r),d==="radius"&&this.setRadius(r),this},toObject:function(d){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(d))},_toSVG:function(){var d,r=(this.endAngle-this.startAngle)%360;if(r===0)d=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var a=u(this.startAngle),c=u(this.endAngle),p=this.radius;d=['<path d="M '+s.util.cos(a)*p+" "+s.util.sin(a)*p," A "+p+" "+p," 0 ",+(r>180?"1":"0")+" 1"," "+s.util.cos(c)*p+" "+s.util.sin(c)*p,'" ',"COMMON_PARTS"," />\n"]}return d},_render:function(d){d.beginPath(),d.arc(0,0,this.radius,u(this.startAngle),u(this.endAngle),!1),this._renderPaintInOrder(d)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(d){return this.radius=d,this.set("width",2*d).set("height",2*d)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(d,r){var a,c=s.parseAttributes(d,s.Circle.ATTRIBUTE_NAMES);if(!("radius"in(a=c)&&a.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,r(new s.Circle(c))},s.Circle.fromObject=function(d,r){s.Object._fromObject("Circle",d,r)})}(t),function(h){var s=h.fabric||(h.fabric={});s.Triangle?s.warn("fabric.Triangle is already defined"):(s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(u){var d=this.width/2,r=this.height/2;u.beginPath(),u.moveTo(-d,r),u.lineTo(0,-r),u.lineTo(d,r),u.closePath(),this._renderPaintInOrder(u)},_toSVG:function(){var u=this.width/2,d=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-u+" "+d,"0 "+-d,u+" "+d].join(","),'" />']}}),s.Triangle.fromObject=function(u,d){return s.Object._fromObject("Triangle",u,d)})}(t),function(h){var s=h.fabric||(h.fabric={}),u=2*Math.PI;s.Ellipse?s.warn("fabric.Ellipse is already defined."):(s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this.set("rx",d&&d.rx||0),this.set("ry",d&&d.ry||0)},_set:function(d,r){switch(this.callSuper("_set",d,r),d){case"rx":this.rx=r,this.set("width",2*r);break;case"ry":this.ry=r,this.set("height",2*r)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(d){d.beginPath(),d.save(),d.transform(1,0,0,this.ry/this.rx,0,0),d.arc(0,0,this.rx,0,u,!1),d.restore(),this._renderPaintInOrder(d)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(d,r){var a=s.parseAttributes(d,s.Ellipse.ATTRIBUTE_NAMES);a.left=(a.left||0)-a.rx,a.top=(a.top||0)-a.ry,r(new s.Ellipse(a))},s.Ellipse.fromObject=function(d,r){s.Object._fromObject("Ellipse",d,r)})}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend;s.Rect?s.warn("fabric.Rect is already defined"):(s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(d){this.callSuper("initialize",d),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(d){var r=this.rx?Math.min(this.rx,this.width/2):0,a=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,p=this.height,g=-this.width/2,v=-this.height/2,y=r!==0||a!==0,_=.4477152502;d.beginPath(),d.moveTo(g+r,v),d.lineTo(g+c-r,v),y&&d.bezierCurveTo(g+c-_*r,v,g+c,v+_*a,g+c,v+a),d.lineTo(g+c,v+p-a),y&&d.bezierCurveTo(g+c,v+p-_*a,g+c-_*r,v+p,g+c-r,v+p),d.lineTo(g+r,v+p),y&&d.bezierCurveTo(g+_*r,v+p,g,v+p-_*a,g,v+p-a),d.lineTo(g,v+a),y&&d.bezierCurveTo(g,v+_*a,g+_*r,v,g+r,v),d.closePath(),this._renderPaintInOrder(d)},toObject:function(d){return this.callSuper("toObject",["rx","ry"].concat(d))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(d,r,a){if(!d)return r(null);a=a||{};var c=s.parseAttributes(d,s.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var p=new s.Rect(u(a?s.util.object.clone(a):{},c));p.visible=p.visible&&p.width>0&&p.height>0,r(p)},s.Rect.fromObject=function(d,r){return s.Object._fromObject("Rect",d,r)})}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.util.array.min,r=s.util.array.max,a=s.util.toFixed,c=s.util.projectStrokeOnPoints;s.Polyline?s.warn("fabric.Polyline is already defined"):(s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(p,g){g=g||{},this.points=p||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(p){var g,v=this._calcDimensions(p),y=this.exactBoundingBox?this.strokeWidth:0;this.width=v.width-y,this.height=v.height-y,p.fromSVG||(g=this.translateToGivenOrigin({x:v.left-this.strokeWidth/2+y/2,y:v.top-this.strokeWidth/2+y/2},"left","top",this.originX,this.originY)),p.left===void 0&&(this.left=p.fromSVG?v.left:g.x),p.top===void 0&&(this.top=p.fromSVG?v.top:g.y),this.pathOffset={x:v.left+this.width/2+y/2,y:v.top+this.height/2+y/2}},_calcDimensions:function(){var p=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=d(p,"x")||0,v=d(p,"y")||0;return{left:g,top:v,width:(r(p,"x")||0)-g,height:(r(p,"y")||0)-v}},toObject:function(p){return u(this.callSuper("toObject",p),{points:this.points.concat()})},_toSVG:function(){for(var p=[],g=this.pathOffset.x,v=this.pathOffset.y,y=s.Object.NUM_FRACTION_DIGITS,_=0,B=this.points.length;_<B;_++)p.push(a(this.points[_].x-g,y),",",a(this.points[_].y-v,y)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',p.join(""),'" />\n']},commonRender:function(p){var g,v=this.points.length,y=this.pathOffset.x,_=this.pathOffset.y;if(!v||isNaN(this.points[v-1].y))return!1;p.beginPath(),p.moveTo(this.points[0].x-y,this.points[0].y-_);for(var B=0;B<v;B++)g=this.points[B],p.lineTo(g.x-y,g.y-_);return!0},_render:function(p){this.commonRender(p)&&this._renderPaintInOrder(p)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(p){return function(g,v,y){if(!g)return v(null);y||(y={});var _=s.parsePointsAttribute(g.getAttribute("points")),B=s.parseAttributes(g,s[p].ATTRIBUTE_NAMES);B.fromSVG=!0,v(new s[p](_,u(B,y)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(p,g){return s.Object._fromObject("Polyline",p,g,"points")})}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.projectStrokeOnPoints;s.Polygon?s.warn("fabric.Polygon is already defined"):(s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return u(this.points,this)},_render:function(d){this.commonRender(d)&&(d.closePath(),this._renderPaintInOrder(d))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(d,r){s.Object._fromObject("Polygon",d,r,"points")})}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.array.min,d=s.util.array.max,r=s.util.object.extend,a=s.util.object.clone,c=s.util.toFixed;s.Path?s.warn("fabric.Path is already defined"):(s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(p,g){delete(g=a(g||{})).path,this.callSuper("initialize",g),this._setPath(p||[],g)},_setPath:function(p,g){this.path=s.util.makePathSimpler(Array.isArray(p)?p:s.util.parsePath(p)),s.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(p){var g,v=0,y=0,_=0,B=0,N=0,L=0,C=-this.pathOffset.x,D=-this.pathOffset.y;p.beginPath();for(var F=0,j=this.path.length;F<j;++F)switch((g=this.path[F])[0]){case"L":_=g[1],B=g[2],p.lineTo(_+C,B+D);break;case"M":v=_=g[1],y=B=g[2],p.moveTo(_+C,B+D);break;case"C":_=g[5],B=g[6],N=g[3],L=g[4],p.bezierCurveTo(g[1]+C,g[2]+D,N+C,L+D,_+C,B+D);break;case"Q":p.quadraticCurveTo(g[1]+C,g[2]+D,g[3]+C,g[4]+D),_=g[3],B=g[4],N=g[1],L=g[2];break;case"z":case"Z":_=v,B=y,p.closePath()}},_render:function(p){this._renderPathCommands(p),this._renderPaintInOrder(p)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(p){return r(this.callSuper("toObject",p),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(p){var g=this.toObject(["sourcePath"].concat(p));return g.sourcePath&&delete g.path,g},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',s.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var p=s.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,p)+", "+c(-this.pathOffset.y,p)+")"},toClipPathSVG:function(p){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:g})},toSVG:function(p){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:p,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var p,g,v=[],y=[],_=0,B=0,N=0,L=0,C=0,D=this.path.length;C<D;++C){switch((p=this.path[C])[0]){case"L":N=p[1],L=p[2],g=[];break;case"M":_=N=p[1],B=L=p[2],g=[];break;case"C":g=s.util.getBoundsOfCurve(N,L,p[1],p[2],p[3],p[4],p[5],p[6]),N=p[5],L=p[6];break;case"Q":g=s.util.getBoundsOfCurve(N,L,p[1],p[2],p[1],p[2],p[3],p[4]),N=p[3],L=p[4];break;case"z":case"Z":N=_,L=B}g.forEach(function(U){v.push(U.x),y.push(U.y)}),v.push(N),y.push(L)}var F=u(v)||0,j=u(y)||0;return{left:F,top:j,width:(d(v)||0)-F,height:(d(y)||0)-j}}}),s.Path.fromObject=function(p,g){if(typeof p.sourcePath=="string"){var v=p.sourcePath;s.loadSVGFromURL(v,function(y){var _=y[0];_.setOptions(p),p.clipPath?s.util.enlivenObjects([p.clipPath],function(B){_.clipPath=B[0],g&&g(_)}):g&&g(_)})}else s.Object._fromObject("Path",p,g,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(p,g,v){var y=s.parseAttributes(p,s.Path.ATTRIBUTE_NAMES);y.fromSVG=!0,g(new s.Path(y.d,r(y,v)))})}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.array.min,d=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,a,c){a=a||{},this._objects=[],c&&this.callSuper("initialize",a),this._objects=r||[];for(var p=this._objects.length;p--;)this._objects[p].group=this;if(c)this._updateObjectsACoords();else{var g=a&&a.centerPoint;a.originX!==void 0&&(this.originX=a.originX),a.originY!==void 0&&(this.originY=a.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete a.centerPoint,this.callSuper("initialize",a)}this.setCoords()},_updateObjectsACoords:function(){for(var r=this._objects.length;r--;)this._objects[r].setCoords(!0)},_updateObjectsCoords:function(r){r=r||this.getCenterPoint();for(var a=this._objects.length;a--;)this._updateObjectCoords(this._objects[a],r)},_updateObjectCoords:function(r,a){var c=r.left,p=r.top;r.set({left:c-a.x,top:p-a.y}),r.group=this,r.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var a=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),r&&(a&&s.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,a?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,a){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(r,a);if(r==="canvas")for(;c--;)this._objects[c]._set(r,a);s.Object.prototype._set.call(this,r,a)},toObject:function(r){var a=this.includeDefaultValues,c=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var v=g.includeDefaultValues;g.includeDefaultValues=a;var y=g.toObject(r);return g.includeDefaultValues=v,y}),p=s.Object.prototype.toObject.call(this,r);return p.objects=c,p},toDatalessObject:function(r){var a,c=this.sourcePath;if(c)a=c;else{var p=this.includeDefaultValues;a=this._objects.map(function(v){var y=v.includeDefaultValues;v.includeDefaultValues=p;var _=v.toDatalessObject(r);return v.includeDefaultValues=y,_})}var g=s.Object.prototype.toDatalessObject.call(this,r);return g.objects=a,g},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=s.Object.prototype.shouldCache.call(this);if(r){for(var a=0,c=this._objects.length;a<c;a++)if(this._objects[a].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,a=this._objects.length;r<a;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var a=0,c=this._objects.length;a<c;a++)this._objects[a].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var a=0,c=this._objects.length;a<c;a++)if(this._objects[a].isCacheDirty(!0)){if(this._cacheCanvas){var p=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-p/2,-g/2,p,g)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(a){s.util.addTransformToObject(a,r),delete a.group,a.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var r=this._objects,a=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var p=new s.ActiveSelection([]);return p.set(c),p.type="activeSelection",a.remove(this),r.forEach(function(g){g.group=p,g.dirty=!0,a.add(g)}),p.canvas=a,p._objects=r,a._activeObject=p,p.setCoords(),p}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(r){r.setCoords(!0)}),this},_calcBounds:function(r){for(var a,c,p,g,v=[],y=[],_=["tr","br","bl","tl"],B=0,N=this._objects.length,L=_.length;B<N;++B){for(p=(a=this._objects[B]).calcACoords(),g=0;g<L;g++)c=_[g],v.push(p[c].x),y.push(p[c].y);a.aCoords=p}this._getBounds(v,y,r)},_getBounds:function(r,a,c){var p=new s.Point(u(r),u(a)),g=new s.Point(d(r),d(a)),v=p.y||0,y=p.x||0,_=g.x-p.x||0,B=g.y-p.y||0;this.width=_,this.height=B,c||this.setPositionByOrigin({x:y,y:v},"left","top")},_toSVG:function(r){for(var a=["<g ","COMMON_PARTS"," >\n"],c=0,p=this._objects.length;c<p;c++)a.push("		",this._objects[c].toSVG(r));return a.push("</g>\n"),a},getSvgStyles:function(){var r=this.opacity!==void 0&&this.opacity!==1?"opacity: "+this.opacity+";":"",a=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),a].join("")},toClipPathSVG:function(r){for(var a=[],c=0,p=this._objects.length;c<p;c++)a.push("	",this._objects[c].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(a,{reviver:r})}}),s.Group.fromObject=function(r,a){var c=r.objects,p=s.util.object.clone(r,!0);delete p.objects,typeof c!="string"?s.util.enlivenObjects(c,function(g){s.util.enlivenObjectEnlivables(r,p,function(){a&&a(new s.Group(g,p,!0))})}):s.loadSVGFromURL(c,function(g){var v=s.util.groupSVGElements(g,r,c),y=p.clipPath;delete p.clipPath,v.set(p),y?s.util.enlivenObjects([y],function(_){v.clipPath=_[0],a&&a(v)}):a&&a(v)})})}(t),function(h){var s=h.fabric||(h.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(u,d){d=d||{},this._objects=u||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;d.originX&&(this.originX=d.originX),d.originY&&(this.originY=d.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,d),this.setCoords()},toGroup:function(){var u=this._objects.concat();this._objects=[];var d=s.Object.prototype.toObject.call(this),r=new s.Group([]);if(delete d.type,r.set(d),u.forEach(function(c){c.canvas.remove(c),c.group=r}),r._objects=u,!this.canvas)return r;var a=this.canvas;return a.add(r),a._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(u,d,r){u.save(),u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",u,d),(r=r||{}).hasControls===void 0&&(r.hasControls=!1),r.forActiveSelection=!0;for(var a=0,c=this._objects.length;a<c;a++)this._objects[a]._renderControls(u,r);u.restore()}}),s.ActiveSelection.fromObject=function(u,d){s.util.enlivenObjects(u.objects,function(r){delete u.objects,d&&d(new s.ActiveSelection(r,u,!0))})})}(t),function(h){var s=b.util.object.extend;h.fabric||(h.fabric={}),h.fabric.Image?b.warn("fabric.Image is already defined."):(b.Image=b.util.createClass(b.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:b.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:b.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(u,d){d||(d={}),this.filters=[],this.cacheKey="texture"+b.Object.__uid++,this.callSuper("initialize",d),this._initElement(u,d)},getElement:function(){return this._element||{}},setElement:function(u,d){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=u,this._originalElement=u,this._initConfig(d),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(u){var d=b.filterBackend;d&&d.evictCachesForKey&&d.evictCachesForKey(u)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(u){b.util.cleanUpJsdomNode(this[u]),this[u]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var u=this.getElement();return{width:u.naturalWidth||u.width,height:u.naturalHeight||u.height}},_stroke:function(u){if(this.stroke&&this.strokeWidth!==0){var d=this.width/2,r=this.height/2;u.beginPath(),u.moveTo(-d,-r),u.lineTo(d,-r),u.lineTo(d,r),u.lineTo(-d,r),u.lineTo(-d,-r),u.closePath()}},toObject:function(u){var d=[];this.filters.forEach(function(a){a&&d.push(a.toObject())});var r=s(this.callSuper("toObject",["cropX","cropY"].concat(u)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:d});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var u,d=[],r=[],a=this._element,c=-this.width/2,p=-this.height/2,g="",v="";if(!a)return[];if(this.hasCrop()){var y=b.Object.__uid++;d.push('<clipPath id="imageCrop_'+y+'">\n','	<rect x="'+c+'" y="'+p+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),g=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(v='" image-rendering="optimizeSpeed'),r.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',p-this.cropY,'" width="',a.width||a.naturalWidth,'" height="',a.height||a.height,v,'"',g,"></image>\n"),this.stroke||this.strokeDashArray){var _=this.fill;this.fill=null,u=["	<rect ",'x="',c,'" y="',p,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=_}return d=this.paintFirst!=="fill"?d.concat(u,r):d.concat(r,u)},getSrc:function(u){var d=u?this._element:this._originalElement;return d?d.toDataURL?d.toDataURL():this.srcFromAttribute?d.getAttribute("src"):d.src:this.src||""},setSrc:function(u,d,r){return b.util.loadImage(u,function(a,c){this.setElement(a,r),this._setWidthHeight(),d&&d(this,c)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var u=this.resizeFilter,d=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),a=r.scaleX,c=r.scaleY,p=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!u||a>d&&c>d)return this._element=p,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=a,void(this._lastScaleY=c);b.filterBackend||(b.filterBackend=b.initFilterBackend());var g=b.util.createCanvasElement(),v=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,y=p.width,_=p.height;g.width=y,g.height=_,this._element=g,this._lastScaleX=u.scaleX=a,this._lastScaleY=u.scaleY=c,b.filterBackend.applyFilters([u],p,y,_,this._element,v),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(u){if(u=(u=u||this.filters||[]).filter(function(p){return p&&!p.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),u.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var d=this._originalElement,r=d.naturalWidth||d.width,a=d.naturalHeight||d.height;if(this._element===this._originalElement){var c=b.util.createCanvasElement();c.width=r,c.height=a,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,a),this._lastScaleX=1,this._lastScaleY=1;return b.filterBackend||(b.filterBackend=b.initFilterBackend()),b.filterBackend.applyFilters(u,this._originalElement,r,a,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(u){b.util.setImageSmoothing(u,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(u),this._renderPaintInOrder(u)},drawCacheOnCanvas:function(u){b.util.setImageSmoothing(u,this.imageSmoothing),b.Object.prototype.drawCacheOnCanvas.call(this,u)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(u){var d=this._element;if(d){var r=this._filterScalingX,a=this._filterScalingY,c=this.width,p=this.height,g=Math.min,v=Math.max,y=v(this.cropX,0),_=v(this.cropY,0),B=d.naturalWidth||d.width,N=d.naturalHeight||d.height,L=y*r,C=_*a,D=g(c*r,B-L),F=g(p*a,N-C),j=-c/2,U=-p/2,W=g(c,B/r-y),$=g(p,N/a-_);d&&u.drawImage(d,L,C,D,F,j,U,W,$)}},_needsResize:function(){var u=this.getTotalObjectScaling();return u.scaleX!==this._lastScaleX||u.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(u,d){this.setElement(b.util.getById(u),d),b.util.addClass(this.getElement(),b.Image.CSS_CANVAS)},_initConfig:function(u){u||(u={}),this.setOptions(u),this._setWidthHeight(u)},_initFilters:function(u,d){u&&u.length?b.util.enlivenObjects(u,function(r){d&&d(r)},"fabric.Image.filters"):d&&d()},_setWidthHeight:function(u){u||(u={});var d=this.getElement();this.width=u.width||d.naturalWidth||d.width||0,this.height=u.height||d.naturalHeight||d.height||0},parsePreserveAspectRatioAttribute:function(){var u,d=b.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),r=this._element.width,a=this._element.height,c=1,p=1,g=0,v=0,y=0,_=0,B=this.width,N=this.height,L={width:B,height:N};return!d||d.alignX==="none"&&d.alignY==="none"?(c=B/r,p=N/a):(d.meetOrSlice==="meet"&&(u=(B-r*(c=p=b.util.findScaleToFit(this._element,L)))/2,d.alignX==="Min"&&(g=-u),d.alignX==="Max"&&(g=u),u=(N-a*p)/2,d.alignY==="Min"&&(v=-u),d.alignY==="Max"&&(v=u)),d.meetOrSlice==="slice"&&(u=r-B/(c=p=b.util.findScaleToCover(this._element,L)),d.alignX==="Mid"&&(y=u/2),d.alignX==="Max"&&(y=u),u=a-N/p,d.alignY==="Mid"&&(_=u/2),d.alignY==="Max"&&(_=u),r=B/c,a=N/p)),{width:r,height:a,scaleX:c,scaleY:p,offsetLeft:g,offsetTop:v,cropX:y,cropY:_}}}),b.Image.CSS_CANVAS="canvas-img",b.Image.prototype.getSvgSrc=b.Image.prototype.getSrc,b.Image.fromObject=function(u,d){var r=b.util.object.clone(u);b.util.loadImage(r.src,function(a,c){c?d&&d(null,!0):b.Image.prototype._initFilters.call(r,r.filters,function(p){r.filters=p||[],b.Image.prototype._initFilters.call(r,[r.resizeFilter],function(g){r.resizeFilter=g[0],b.util.enlivenObjectEnlivables(r,r,function(){var v=new b.Image(a,r);d(v,!1)})})})},null,r.crossOrigin)},b.Image.fromURL=function(u,d,r){b.util.loadImage(u,function(a,c){d&&d(new b.Image(a,r),c)},null,r&&r.crossOrigin)},b.Image.ATTRIBUTE_NAMES=b.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),b.Image.fromElement=function(u,d,r){var a=b.parseAttributes(u,b.Image.ATTRIBUTE_NAMES);b.Image.fromURL(a["xlink:href"],d,s(r?b.util.object.clone(r):{},a))})}(t),b.util.object.extend(b.Object.prototype,{_getAngleValueForStraighten:function(){var h=this.angle%360;return h>0?90*Math.round((h-1)/90):90*Math.round(h/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(h){var s=function(){},u=(h=h||{}).onComplete||s,d=h.onChange||s,r=this;return b.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(a){r.rotate(a),d()},onComplete:function(){r.setCoords(),u()}})}}),b.util.object.extend(b.StaticCanvas.prototype,{straightenObject:function(h){return h.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(h){return h.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function h(u,d){var r="precision "+d+" float;\nvoid main(){}",a=u.createShader(u.FRAGMENT_SHADER);return u.shaderSource(a,r),u.compileShader(a),!!u.getShaderParameter(a,u.COMPILE_STATUS)}function s(u){u&&u.tileSize&&(this.tileSize=u.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}b.isWebglSupported=function(u){if(b.isLikelyNode)return!1;u=u||b.WebglFilterBackend.prototype.tileSize;var d=document.createElement("canvas"),r=d.getContext("webgl")||d.getContext("experimental-webgl"),a=!1;if(r){b.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),a=b.maxTextureSize>=u;for(var c=["highp","mediump","lowp"],p=0;p<3;p++)if(h(r,c[p])){b.webGlPrecision=c[p];break}}return this.isSupported=a,a},b.WebglFilterBackend=s,s.prototype={tileSize:2048,resources:{},setupGLContext:function(u,d){this.dispose(),this.createWebGLCanvas(u,d),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(u,d)},chooseFastestCopyGLTo2DMethod:function(u,d){var r,a=window.performance!==void 0;try{new ImageData(1,1),r=!0}catch(N){r=!1}var c=typeof ArrayBuffer<"u",p=typeof Uint8ClampedArray<"u";if(a&&r&&c&&p){var g=b.util.createCanvasElement(),v=new ArrayBuffer(u*d*4);if(b.forceGLPutImageData)return this.imageBuffer=v,void(this.copyGLTo2D=q);var y,_,B={imageBuffer:v,destinationWidth:u,destinationHeight:d,targetCanvas:g};g.width=u,g.height=d,y=window.performance.now(),rt.call(B,this.gl,B),_=window.performance.now()-y,y=window.performance.now(),q.call(B,this.gl,B),_>window.performance.now()-y?(this.imageBuffer=v,this.copyGLTo2D=q):this.copyGLTo2D=rt}},createWebGLCanvas:function(u,d){var r=b.util.createCanvasElement();r.width=u,r.height=d;var a={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=r.getContext("webgl",a);c||(c=r.getContext("experimental-webgl",a)),c&&(c.clearColor(0,0,0,0),this.canvas=r,this.gl=c)},applyFilters:function(u,d,r,a,c,p){var g,v=this.gl;p&&(g=this.getCachedTexture(p,d));var y={originalWidth:d.width||d.originalWidth,originalHeight:d.height||d.originalHeight,sourceWidth:r,sourceHeight:a,destinationWidth:r,destinationHeight:a,context:v,sourceTexture:this.createTexture(v,r,a,!g&&d),targetTexture:this.createTexture(v,r,a),originalTexture:g||this.createTexture(v,r,a,!g&&d),passes:u.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},_=v.createFramebuffer();return v.bindFramebuffer(v.FRAMEBUFFER,_),u.forEach(function(B){B&&B.applyTo(y)}),function(B){var N=B.targetCanvas,L=N.width,C=N.height,D=B.destinationWidth,F=B.destinationHeight;L===D&&C===F||(N.width=D,N.height=F)}(y),this.copyGLTo2D(v,y),v.bindTexture(v.TEXTURE_2D,null),v.deleteTexture(y.sourceTexture),v.deleteTexture(y.targetTexture),v.deleteFramebuffer(_),c.getContext("2d").setTransform(1,0,0,1,0,0),y},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(u,d,r,a,c){var p=u.createTexture();return u.bindTexture(u.TEXTURE_2D,p),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,c||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,c||u.NEAREST),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),a?u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,a):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,d,r,0,u.RGBA,u.UNSIGNED_BYTE,null),p},getCachedTexture:function(u,d){if(this.textureCache[u])return this.textureCache[u];var r=this.createTexture(this.gl,d.width,d.height,d);return this.textureCache[u]=r,r},evictCachesForKey:function(u){this.textureCache[u]&&(this.gl.deleteTexture(this.textureCache[u]),delete this.textureCache[u])},copyGLTo2D:rt,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var u=this.gl,d={renderer:"",vendor:""};if(!u)return d;var r=u.getExtension("WEBGL_debug_renderer_info");if(r){var a=u.getParameter(r.UNMASKED_RENDERER_WEBGL),c=u.getParameter(r.UNMASKED_VENDOR_WEBGL);a&&(d.renderer=a.toLowerCase()),c&&(d.vendor=c.toLowerCase())}return this.gpuInfo=d,d}}}(),function(){var h=function(){};function s(){}b.Canvas2dFilterBackend=s,s.prototype={evictCachesForKey:h,dispose:h,clearWebGLCaches:h,resources:{},applyFilters:function(u,d,r,a,c){var p=c.getContext("2d");p.drawImage(d,0,0,r,a);var g={sourceWidth:r,sourceHeight:a,imageData:p.getImageData(0,0,r,a),originalEl:d,originalImageData:p.getImageData(0,0,r,a),canvasEl:c,ctx:p,filterBackend:this};return u.forEach(function(v){v.applyTo(g)}),g.imageData.width===r&&g.imageData.height===a||(c.width=g.imageData.width,c.height=g.imageData.height),p.putImageData(g.imageData,0,0),g}}}(),b.Image=b.Image||{},b.Image.filters=b.Image.filters||{},b.Image.filters.BaseFilter=b.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(h){h&&this.setOptions(h)},setOptions:function(h){for(var s in h)this[s]=h[s]},createProgram:function(h,s,u){s=s||this.fragmentSource,u=u||this.vertexSource,b.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+b.webGlPrecision+" float"));var d=h.createShader(h.VERTEX_SHADER);if(h.shaderSource(d,u),h.compileShader(d),!h.getShaderParameter(d,h.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+h.getShaderInfoLog(d));var r=h.createShader(h.FRAGMENT_SHADER);if(h.shaderSource(r,s),h.compileShader(r),!h.getShaderParameter(r,h.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+h.getShaderInfoLog(r));var a=h.createProgram();if(h.attachShader(a,d),h.attachShader(a,r),h.linkProgram(a),!h.getProgramParameter(a,h.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+h.getProgramInfoLog(a));var c=this.getAttributeLocations(h,a),p=this.getUniformLocations(h,a)||{};return p.uStepW=h.getUniformLocation(a,"uStepW"),p.uStepH=h.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:c,uniformLocations:p}},getAttributeLocations:function(h,s){return{aPosition:h.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(h,s,u){var d=s.aPosition,r=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,r),h.enableVertexAttribArray(d),h.vertexAttribPointer(d,2,h.FLOAT,!1,0,0),h.bufferData(h.ARRAY_BUFFER,u,h.STATIC_DRAW)},_setupFrameBuffer:function(h){var s,u,d=h.context;h.passes>1?(s=h.destinationWidth,u=h.destinationHeight,h.sourceWidth===s&&h.sourceHeight===u||(d.deleteTexture(h.targetTexture),h.targetTexture=h.filterBackend.createTexture(d,s,u)),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,h.targetTexture,0)):(d.bindFramebuffer(d.FRAMEBUFFER,null),d.finish())},_swapTextures:function(h){h.passes--,h.pass++;var s=h.targetTexture;h.targetTexture=h.sourceTexture,h.sourceTexture=s},isNeutralState:function(){var h=this.mainParameter,s=b.Image.filters[this.type].prototype;if(h){if(Array.isArray(s[h])){for(var u=s[h].length;u--;)if(this[h][u]!==s[h][u])return!1;return!0}return s[h]===this[h]}return!1},applyTo:function(h){h.webgl?(this._setupFrameBuffer(h),this.applyToWebGL(h),this._swapTextures(h)):this.applyTo2d(h)},retrieveShader:function(h){return h.programCache.hasOwnProperty(this.type)||(h.programCache[this.type]=this.createProgram(h.context)),h.programCache[this.type]},applyToWebGL:function(h){var s=h.context,u=this.retrieveShader(h);h.pass===0&&h.originalTexture?s.bindTexture(s.TEXTURE_2D,h.originalTexture):s.bindTexture(s.TEXTURE_2D,h.sourceTexture),s.useProgram(u.program),this.sendAttributeData(s,u.attributeLocations,h.aPosition),s.uniform1f(u.uniformLocations.uStepW,1/h.sourceWidth),s.uniform1f(u.uniformLocations.uStepH,1/h.sourceHeight),this.sendUniformData(s,u.uniformLocations),s.viewport(0,0,h.destinationWidth,h.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(h,s,u){h.activeTexture(u),h.bindTexture(h.TEXTURE_2D,s),h.activeTexture(h.TEXTURE0)},unbindAdditionalTexture:function(h,s){h.activeTexture(s),h.bindTexture(h.TEXTURE_2D,null),h.activeTexture(h.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(h){this[this.mainParameter]=h},sendUniformData:function(){},createHelpLayer:function(h){if(!h.helpLayer){var s=document.createElement("canvas");s.width=h.sourceWidth,s.height=h.sourceHeight,h.helpLayer=s}},toObject:function(){var h={type:this.type},s=this.mainParameter;return s&&(h[s]=this[s]),h},toJSON:function(){return this.toObject()}}),b.Image.filters.BaseFilter.fromObject=function(h,s){var u=new b.Image.filters[h.type](h);return s&&s(u),u},function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.ColorMatrix=d(u.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var a,c,p,g,v,y=r.imageData.data,_=y.length,B=this.matrix,N=this.colorsOnly;for(v=0;v<_;v+=4)a=y[v],c=y[v+1],p=y[v+2],N?(y[v]=a*B[0]+c*B[1]+p*B[2]+255*B[4],y[v+1]=a*B[5]+c*B[6]+p*B[7]+255*B[9],y[v+2]=a*B[10]+c*B[11]+p*B[12]+255*B[14]):(g=y[v+3],y[v]=a*B[0]+c*B[1]+p*B[2]+g*B[3]+255*B[4],y[v+1]=a*B[5]+c*B[6]+p*B[7]+g*B[8]+255*B[9],y[v+2]=a*B[10]+c*B[11]+p*B[12]+g*B[13]+255*B[14],y[v+3]=a*B[15]+c*B[16]+p*B[17]+g*B[18]+255*B[19])},getUniformLocations:function(r,a){return{uColorMatrix:r.getUniformLocation(a,"uColorMatrix"),uConstants:r.getUniformLocation(a,"uConstants")}},sendUniformData:function(r,a){var c=this.matrix,p=[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]],g=[c[4],c[9],c[14],c[19]];r.uniformMatrix4fv(a.uColorMatrix,!1,p),r.uniform4fv(a.uConstants,g)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Brightness=d(u.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var a,c=r.imageData.data,p=c.length,g=Math.round(255*this.brightness);for(a=0;a<p;a+=4)c[a]=c[a]+g,c[a+1]=c[a+1]+g,c[a+2]=c[a+2]+g}},getUniformLocations:function(r,a){return{uBrightness:r.getUniformLocation(a,"uBrightness")}},sendUniformData:function(r,a){r.uniform1f(a.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.Image.filters,r=s.util.createClass;d.Convolute=r(d.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(a){var c=Math.sqrt(this.matrix.length),p=this.type+"_"+c+"_"+(this.opaque?1:0),g=this.fragmentSource[p];return a.programCache.hasOwnProperty(p)||(a.programCache[p]=this.createProgram(a.context,g)),a.programCache[p]},applyTo2d:function(a){var c,p,g,v,y,_,B,N,L,C,D,F,j,U=a.imageData,W=U.data,$=this.matrix,M=Math.round(Math.sqrt($.length)),P=Math.floor(M/2),z=U.width,X=U.height,et=a.ctx.createImageData(z,X),J=et.data,Z=this.opaque?1:0;for(D=0;D<X;D++)for(C=0;C<z;C++){for(y=4*(D*z+C),c=0,p=0,g=0,v=0,j=0;j<M;j++)for(F=0;F<M;F++)_=C+F-P,(B=D+j-P)<0||B>=X||_<0||_>=z||(N=4*(B*z+_),L=$[j*M+F],c+=W[N]*L,p+=W[N+1]*L,g+=W[N+2]*L,Z||(v+=W[N+3]*L));J[y]=c,J[y+1]=p,J[y+2]=g,J[y+3]=Z?W[y+3]:v}a.imageData=et},getUniformLocations:function(a,c){return{uMatrix:a.getUniformLocation(c,"uMatrix"),uOpaque:a.getUniformLocation(c,"uOpaque"),uHalfSize:a.getUniformLocation(c,"uHalfSize"),uSize:a.getUniformLocation(c,"uSize")}},sendUniformData:function(a,c){a.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return u(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Grayscale=d(u.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(r){var a,c,p=r.imageData.data,g=p.length,v=this.mode;for(a=0;a<g;a+=4)v==="average"?c=(p[a]+p[a+1]+p[a+2])/3:v==="lightness"?c=(Math.min(p[a],p[a+1],p[a+2])+Math.max(p[a],p[a+1],p[a+2]))/2:v==="luminosity"&&(c=.21*p[a]+.72*p[a+1]+.07*p[a+2]),p[a]=c,p[a+1]=c,p[a+2]=c},retrieveShader:function(r){var a=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(a)){var c=this.fragmentSource[this.mode];r.programCache[a]=this.createProgram(r.context,c)}return r.programCache[a]},getUniformLocations:function(r,a){return{uMode:r.getUniformLocation(a,"uMode")}},sendUniformData:function(r,a){r.uniform1i(a.uMode,1)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Invert=d(u.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(r){var a,c=r.imageData.data,p=c.length;for(a=0;a<p;a+=4)c[a]=255-c[a],c[a+1]=255-c[a+1],c[a+2]=255-c[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,a){return{uInvert:r.getUniformLocation(a,"uInvert")}},sendUniformData:function(r,a){r.uniform1i(a.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.Image.filters,r=s.util.createClass;d.Noise=r(d.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(a){if(this.noise!==0){var c,p,g=a.imageData.data,v=g.length,y=this.noise;for(c=0,v=g.length;c<v;c+=4)p=(.5-Math.random())*y,g[c]+=p,g[c+1]+=p,g[c+2]+=p}},getUniformLocations:function(a,c){return{uNoise:a.getUniformLocation(c,"uNoise"),uSeed:a.getUniformLocation(c,"uSeed")}},sendUniformData:function(a,c){a.uniform1f(c.uNoise,this.noise/255),a.uniform1f(c.uSeed,Math.random())},toObject:function(){return u(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Pixelate=d(u.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(r){var a,c,p,g,v,y,_,B,N,L,C,D=r.imageData,F=D.data,j=D.height,U=D.width;for(c=0;c<j;c+=this.blocksize)for(p=0;p<U;p+=this.blocksize)for(g=F[a=4*c*U+4*p],v=F[a+1],y=F[a+2],_=F[a+3],L=Math.min(c+this.blocksize,j),C=Math.min(p+this.blocksize,U),B=c;B<L;B++)for(N=p;N<C;N++)F[a=4*B*U+4*N]=g,F[a+1]=v,F[a+2]=y,F[a+3]=_},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,a){return{uBlocksize:r.getUniformLocation(a,"uBlocksize"),uStepW:r.getUniformLocation(a,"uStepW"),uStepH:r.getUniformLocation(a,"uStepH")}},sendUniformData:function(r,a){r.uniform1f(a.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.extend,d=s.Image.filters,r=s.util.createClass;d.RemoveColor=r(d.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(a){var c,p,g,v,y=a.imageData.data,_=255*this.distance,B=new s.Color(this.color).getSource(),N=[B[0]-_,B[1]-_,B[2]-_],L=[B[0]+_,B[1]+_,B[2]+_];for(c=0;c<y.length;c+=4)p=y[c],g=y[c+1],v=y[c+2],p>N[0]&&g>N[1]&&v>N[2]&&p<L[0]&&g<L[1]&&v<L[2]&&(y[c+3]=0)},getUniformLocations:function(a,c){return{uLow:a.getUniformLocation(c,"uLow"),uHigh:a.getUniformLocation(c,"uHigh")}},sendUniformData:function(a,c){var p=new s.Color(this.color).getSource(),g=parseFloat(this.distance),v=[0+p[0]/255-g,0+p[1]/255-g,0+p[2]/255-g,1],y=[p[0]/255+g,p[1]/255+g,p[2]/255+g,1];a.uniform4fv(c.uLow,v),a.uniform4fv(c.uHigh,y)},toObject:function(){return u(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var a in r)u[a]=d(u.ColorMatrix,{type:a,matrix:r[a],mainParameter:!1,colorsOnly:!0}),s.Image.filters[a].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric,u=s.Image.filters,d=s.util.createClass;u.BlendColor=d(u.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(r){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[r]+"}\n}"},retrieveShader:function(r){var a,c=this.type+"_"+this.mode;return r.programCache.hasOwnProperty(c)||(a=this.buildSource(this.mode),r.programCache[c]=this.createProgram(r.context,a)),r.programCache[c]},applyTo2d:function(r){var a,c,p,g,v,y,_,B=r.imageData.data,N=B.length,L=1-this.alpha;a=(_=new s.Color(this.color).getSource())[0]*this.alpha,c=_[1]*this.alpha,p=_[2]*this.alpha;for(var C=0;C<N;C+=4)switch(g=B[C],v=B[C+1],y=B[C+2],this.mode){case"multiply":B[C]=g*a/255,B[C+1]=v*c/255,B[C+2]=y*p/255;break;case"screen":B[C]=255-(255-g)*(255-a)/255,B[C+1]=255-(255-v)*(255-c)/255,B[C+2]=255-(255-y)*(255-p)/255;break;case"add":B[C]=g+a,B[C+1]=v+c,B[C+2]=y+p;break;case"diff":case"difference":B[C]=Math.abs(g-a),B[C+1]=Math.abs(v-c),B[C+2]=Math.abs(y-p);break;case"subtract":B[C]=g-a,B[C+1]=v-c,B[C+2]=y-p;break;case"darken":B[C]=Math.min(g,a),B[C+1]=Math.min(v,c),B[C+2]=Math.min(y,p);break;case"lighten":B[C]=Math.max(g,a),B[C+1]=Math.max(v,c),B[C+2]=Math.max(y,p);break;case"overlay":B[C]=a<128?2*g*a/255:255-2*(255-g)*(255-a)/255,B[C+1]=c<128?2*v*c/255:255-2*(255-v)*(255-c)/255,B[C+2]=p<128?2*y*p/255:255-2*(255-y)*(255-p)/255;break;case"exclusion":B[C]=a+g-2*a*g/255,B[C+1]=c+v-2*c*v/255,B[C+2]=p+y-2*p*y/255;break;case"tint":B[C]=a+g*L,B[C+1]=c+v*L,B[C+2]=p+y*L}},getUniformLocations:function(r,a){return{uColor:r.getUniformLocation(a,"uColor")}},sendUniformData:function(r,a){var c=new s.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,r.uniform4fv(a.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric,u=s.Image.filters,d=s.util.createClass;u.BlendImage=d(u.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(r){var a=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(a)||(r.programCache[a]=this.createProgram(r.context,c)),r.programCache[a]},applyToWebGL:function(r){var a=r.context,c=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(a,c,a.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(a,a.TEXTURE1)},createTexture:function(r,a){return r.getCachedTexture(a.cacheKey,a._element)},calculateMatrix:function(){var r=this.image,a=r._element.width,c=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/a,-r.top/c,1]},applyTo2d:function(r){var a,c,p,g,v,y,_,B,N,L,C,D=r.imageData,F=r.filterBackend.resources,j=D.data,U=j.length,W=D.width,$=D.height,M=this.image;F.blendImage||(F.blendImage=s.util.createCanvasElement()),L=(N=F.blendImage).getContext("2d"),N.width!==W||N.height!==$?(N.width=W,N.height=$):L.clearRect(0,0,W,$),L.setTransform(M.scaleX,0,0,M.scaleY,M.left,M.top),L.drawImage(M._element,0,0,W,$),C=L.getImageData(0,0,W,$).data;for(var P=0;P<U;P+=4)switch(v=j[P],y=j[P+1],_=j[P+2],B=j[P+3],a=C[P],c=C[P+1],p=C[P+2],g=C[P+3],this.mode){case"multiply":j[P]=v*a/255,j[P+1]=y*c/255,j[P+2]=_*p/255,j[P+3]=B*g/255;break;case"mask":j[P+3]=g}},getUniformLocations:function(r,a){return{uTransformMatrix:r.getUniformLocation(a,"uTransformMatrix"),uImage:r.getUniformLocation(a,"uImage")}},sendUniformData:function(r,a){var c=this.calculateMatrix();r.uniform1i(a.uImage,1),r.uniformMatrix3fv(a.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(r,a){s.Image.fromObject(r.image,function(c){var p=s.util.object.clone(r);p.image=c,a(new s.Image.filters.BlendImage(p))})}}(t),function(h){var s=h.fabric||(h.fabric={}),u=Math.pow,d=Math.floor,r=Math.sqrt,a=Math.abs,c=Math.round,p=Math.sin,g=Math.ceil,v=s.Image.filters,y=s.util.createClass;v.Resize=y(v.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(_,B){return{uDelta:_.getUniformLocation(B,"uDelta"),uTaps:_.getUniformLocation(B,"uTaps")}},sendUniformData:function(_,B){_.uniform2fv(B.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),_.uniform1fv(B.uTaps,this.taps)},retrieveShader:function(_){var B=this.getFilterWindow(),N=this.type+"_"+B;if(!_.programCache.hasOwnProperty(N)){var L=this.generateShader(B);_.programCache[N]=this.createProgram(_.context,L)}return _.programCache[N]},getFilterWindow:function(){var _=this.tempScale;return Math.ceil(this.lanczosLobes/_)},getTaps:function(){for(var _=this.lanczosCreate(this.lanczosLobes),B=this.tempScale,N=this.getFilterWindow(),L=new Array(N),C=1;C<=N;C++)L[C-1]=_(C*B);return L},generateShader:function(_){for(var B=new Array(_),N=this.fragmentSourceTOP,L=1;L<=_;L++)B[L-1]=L+".0 * uDelta";return N+="uniform float uTaps["+_+"];\n",N+="void main() {\n",N+="  vec4 color = texture2D(uTexture, vTexCoord);\n",N+="  float sum = 1.0;\n",B.forEach(function(C,D){N+="  color += texture2D(uTexture, vTexCoord + "+C+") * uTaps["+D+"];\n",N+="  color += texture2D(uTexture, vTexCoord - "+C+") * uTaps["+D+"];\n",N+="  sum += 2.0 * uTaps["+D+"];\n"}),N+="  gl_FragColor = color / sum;\n",N+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(_){_.webgl?(_.passes++,this.width=_.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=_.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),_.destinationWidth=this.dW,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceWidth=_.destinationWidth,this.height=_.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),_.destinationHeight=this.dH,this._setupFrameBuffer(_),this.applyToWebGL(_),this._swapTextures(_),_.sourceHeight=_.destinationHeight):this.applyTo2d(_)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(_){return function(B){if(B>=_||B<=-_)return 0;if(B<11920929e-14&&B>-11920929e-14)return 1;var N=(B*=Math.PI)/_;return p(B)/B*p(N)/N}},applyTo2d:function(_){var B=_.imageData,N=this.scaleX,L=this.scaleY;this.rcpScaleX=1/N,this.rcpScaleY=1/L;var C,D=B.width,F=B.height,j=c(D*N),U=c(F*L);this.resizeType==="sliceHack"?C=this.sliceByTwo(_,D,F,j,U):this.resizeType==="hermite"?C=this.hermiteFastResize(_,D,F,j,U):this.resizeType==="bilinear"?C=this.bilinearFiltering(_,D,F,j,U):this.resizeType==="lanczos"&&(C=this.lanczosResize(_,D,F,j,U)),_.imageData=C},sliceByTwo:function(_,B,N,L,C){var D,F,j=_.imageData,U=.5,W=!1,$=!1,M=B*U,P=N*U,z=s.filterBackend.resources,X=0,et=0,J=B,Z=0;for(z.sliceByTwo||(z.sliceByTwo=document.createElement("canvas")),((D=z.sliceByTwo).width<1.5*B||D.height<N)&&(D.width=1.5*B,D.height=N),(F=D.getContext("2d")).clearRect(0,0,1.5*B,N),F.putImageData(j,0,0),L=d(L),C=d(C);!W||!$;)B=M,N=P,L<d(M*U)?M=d(M*U):(M=L,W=!0),C<d(P*U)?P=d(P*U):(P=C,$=!0),F.drawImage(D,X,et,B,N,J,Z,M,P),X=J,et=Z,Z+=P;return F.getImageData(X,et,L,C)},lanczosResize:function(_,B,N,L,C){var D=_.imageData.data,F=_.ctx.createImageData(L,C),j=F.data,U=this.lanczosCreate(this.lanczosLobes),W=this.rcpScaleX,$=this.rcpScaleY,M=2/this.rcpScaleX,P=2/this.rcpScaleY,z=g(W*this.lanczosLobes/2),X=g($*this.lanczosLobes/2),et={},J={},Z={};return function it(at){var lt,ht,Ct,ft,At,pt,mt,_t,It,yt,Bt;for(J.x=(at+.5)*W,Z.x=d(J.x),lt=0;lt<C;lt++){for(J.y=(lt+.5)*$,Z.y=d(J.y),At=0,pt=0,mt=0,_t=0,It=0,ht=Z.x-z;ht<=Z.x+z;ht++)if(!(ht<0||ht>=B)){yt=d(1e3*a(ht-J.x)),et[yt]||(et[yt]={});for(var Ot=Z.y-X;Ot<=Z.y+X;Ot++)Ot<0||Ot>=N||(Bt=d(1e3*a(Ot-J.y)),et[yt][Bt]||(et[yt][Bt]=U(r(u(yt*M,2)+u(Bt*P,2))/1e3)),(Ct=et[yt][Bt])>0&&(At+=Ct,pt+=Ct*D[ft=4*(Ot*B+ht)],mt+=Ct*D[ft+1],_t+=Ct*D[ft+2],It+=Ct*D[ft+3]))}j[ft=4*(lt*L+at)]=pt/At,j[ft+1]=mt/At,j[ft+2]=_t/At,j[ft+3]=It/At}return++at<L?it(at):F}(0)},bilinearFiltering:function(_,B,N,L,C){var D,F,j,U,W,$,M,P,z,X=0,et=this.rcpScaleX,J=this.rcpScaleY,Z=4*(B-1),it=_.imageData.data,at=_.ctx.createImageData(L,C),lt=at.data;for(j=0;j<C;j++)for(U=0;U<L;U++)for(W=et*U-(D=d(et*U)),$=J*j-(F=d(J*j)),z=4*(F*B+D),M=0;M<4;M++)P=it[z+M]*(1-W)*(1-$)+it[z+4+M]*W*(1-$)+it[z+Z+M]*$*(1-W)+it[z+Z+4+M]*W*$,lt[X++]=P;return at},hermiteFastResize:function(_,B,N,L,C){for(var D=this.rcpScaleX,F=this.rcpScaleY,j=g(D/2),U=g(F/2),W=_.imageData.data,$=_.ctx.createImageData(L,C),M=$.data,P=0;P<C;P++)for(var z=0;z<L;z++){for(var X=4*(z+P*L),et=0,J=0,Z=0,it=0,at=0,lt=0,ht=0,Ct=(P+.5)*F,ft=d(P*F);ft<(P+1)*F;ft++)for(var At=a(Ct-(ft+.5))/U,pt=(z+.5)*D,mt=At*At,_t=d(z*D);_t<(z+1)*D;_t++){var It=a(pt-(_t+.5))/j,yt=r(mt+It*It);yt>1&&yt<-1||(et=2*yt*yt*yt-3*yt*yt+1)>0&&(ht+=et*W[(It=4*(_t+ft*B))+3],Z+=et,W[It+3]<255&&(et=et*W[It+3]/250),it+=et*W[It],at+=et*W[It+1],lt+=et*W[It+2],J+=et)}M[X]=it/J,M[X+1]=at/J,M[X+2]=lt/J,M[X+3]=ht/Z}return $},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Contrast=d(u.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var a,c=r.imageData.data,p=c.length,g=Math.floor(255*this.contrast),v=259*(g+255)/(255*(259-g));for(a=0;a<p;a+=4)c[a]=v*(c[a]-128)+128,c[a+1]=v*(c[a+1]-128)+128,c[a+2]=v*(c[a+2]-128)+128}},getUniformLocations:function(r,a){return{uContrast:r.getUniformLocation(a,"uContrast")}},sendUniformData:function(r,a){r.uniform1f(a.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Saturation=d(u.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var a,c,p=r.imageData.data,g=p.length,v=-this.saturation;for(a=0;a<g;a+=4)c=Math.max(p[a],p[a+1],p[a+2]),p[a]+=c!==p[a]?(c-p[a])*v:0,p[a+1]+=c!==p[a+1]?(c-p[a+1])*v:0,p[a+2]+=c!==p[a+2]?(c-p[a+2])*v:0}},getUniformLocations:function(r,a){return{uSaturation:r.getUniformLocation(a,"uSaturation")}},sendUniformData:function(r,a){r.uniform1f(a.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Vibrance=d(u.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(this.vibrance!==0){var a,c,p,g,v=r.imageData.data,y=v.length,_=-this.vibrance;for(a=0;a<y;a+=4)c=Math.max(v[a],v[a+1],v[a+2]),p=(v[a]+v[a+1]+v[a+2])/3,g=2*Math.abs(c-p)/255*_,v[a]+=c!==v[a]?(c-v[a])*g:0,v[a+1]+=c!==v[a+1]?(c-v[a+1])*g:0,v[a+2]+=c!==v[a+2]?(c-v[a+2])*g:0}},getUniformLocations:function(r,a){return{uVibrance:r.getUniformLocation(a,"uVibrance")}},sendUniformData:function(r,a){r.uniform1f(a.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Blur=d(u.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var a,c,p=r.filterBackend.resources,g=r.imageData.width,v=r.imageData.height;p.blurLayer1||(p.blurLayer1=s.util.createCanvasElement(),p.blurLayer2=s.util.createCanvasElement()),a=p.blurLayer1,c=p.blurLayer2,a.width===g&&a.height===v||(c.width=a.width=g,c.height=a.height=v);var y,_,B,N,L=a.getContext("2d"),C=c.getContext("2d"),D=15,F=.06*this.blur*.5;for(L.putImageData(r.imageData,0,0),C.clearRect(0,0,g,v),N=-15;N<=D;N++)B=F*(_=N/D)*g+(y=(Math.random()-.5)/4),C.globalAlpha=1-Math.abs(_),C.drawImage(a,B,y),L.drawImage(c,0,0),C.globalAlpha=1,C.clearRect(0,0,c.width,c.height);for(N=-15;N<=D;N++)B=F*(_=N/D)*v+(y=(Math.random()-.5)/4),C.globalAlpha=1-Math.abs(_),C.drawImage(a,y,B),L.drawImage(c,0,0),C.globalAlpha=1,C.clearRect(0,0,c.width,c.height);r.ctx.drawImage(a,0,0);var j=r.ctx.getImageData(0,0,a.width,a.height);return L.globalAlpha=1,L.clearRect(0,0,a.width,a.height),j},getUniformLocations:function(r,a){return{delta:r.getUniformLocation(a,"uDelta")}},sendUniformData:function(r,a){var c=this.chooseRightDelta();r.uniform2fv(a.delta,c)},chooseRightDelta:function(){var r,a=1,c=[0,0];return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),r=a*this.blur*.12,this.horizontal?c[0]=r:c[1]=r,c}}),u.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Gamma=d(u.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],u.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var a,c=r.imageData.data,p=this.gamma,g=c.length,v=1/p[0],y=1/p[1],_=1/p[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),a=0,g=256;a<g;a++)this.rVals[a]=255*Math.pow(a/255,v),this.gVals[a]=255*Math.pow(a/255,y),this.bVals[a]=255*Math.pow(a/255,_);for(a=0,g=c.length;a<g;a+=4)c[a]=this.rVals[c[a]],c[a+1]=this.gVals[c[a+1]],c[a+2]=this.bVals[c[a+2]]},getUniformLocations:function(r,a){return{uGamma:r.getUniformLocation(a,"uGamma")}},sendUniformData:function(r,a){r.uniform3fv(a.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.Composed=d(u.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(a){a.applyTo(r)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(r,a){var c=(r.subFilters||[]).map(function(g){return new s.Image.filters[g.type](g)}),p=new s.Image.filters.Composed({subFilters:c});return a&&a(p),p}}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.Image.filters,d=s.util.createClass;u.HueRotation=d(u.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,a=s.util.cos(r),c=s.util.sin(r),p=1/3,g=Math.sqrt(p)*c,v=1-a;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=a+v/3,this.matrix[1]=p*v-g,this.matrix[2]=p*v+g,this.matrix[5]=p*v+g,this.matrix[6]=a+p*v,this.matrix[7]=p*v-g,this.matrix[10]=p*v-g,this.matrix[11]=p*v+g,this.matrix[12]=a+p*v},isNeutralState:function(r){return this.calculateMatrix(),u.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),u.BaseFilter.prototype.applyTo.call(this,r)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(h){var s=h.fabric||(h.fabric={}),u=s.util.object.clone;if(s.Text)s.warn("fabric.Text is already defined");else{var d="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(d),cacheProperties:s.Object.prototype.cacheProperties.concat(d),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,a){this.styles=a&&a.styles||{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",a),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=s.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,a,c,p,g,v,y,_=0,B=this._textLines.length;_<B;_++)if((this.textAlign==="justify"||_!==B-1&&!this.isEndOfWrapping(_))&&(p=0,g=this._textLines[_],(a=this.getLineWidth(_))<this.width&&(y=this.textLines[_].match(this._reSpacesAndTabs)))){c=y.length,r=(this.width-a)/c;for(var N=0,L=g.length;N<=L;N++)v=this.__charBounds[_][N],this._reSpaceAndTab.test(g[N])?(v.width+=r,v.kernedWidth+=r,v.left+=p,p+=r):v.left+=p}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),a=this.fontSize;return r.width+=a*r.zoomX,r.height+=a*r.zoomY,r},_render:function(r){var a=this.path;a&&!a.isNotVisible()&&a._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,a,c){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom"}r.font=this._getFontDeclaration(a,c)},calcTextWidth:function(){for(var r=this.getLineWidth(0),a=1,c=this._textLines.length;a<c;a++){var p=this.getLineWidth(a);p>r&&(r=p)}return r},_renderTextLine:function(r,a,c,p,g,v){this._renderChars(r,a,c,p,g,v)},_renderTextLinesBackground:function(r){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var a,c,p,g,v,y,_,B=r.fillStyle,N=this._getLeftOffset(),L=this._getTopOffset(),C=0,D=0,F=this.path,j=0,U=this._textLines.length;j<U;j++)if(a=this.getHeightOfLine(j),this.textBackgroundColor||this.styleHas("textBackgroundColor",j)){p=this._textLines[j],c=this._getLineLeftOffset(j),D=0,C=0,g=this.getValueOfPropertyAt(j,0,"textBackgroundColor");for(var W=0,$=p.length;W<$;W++)v=this.__charBounds[j][W],y=this.getValueOfPropertyAt(j,W,"textBackgroundColor"),F?(r.save(),r.translate(v.renderLeft,v.renderTop),r.rotate(v.angle),r.fillStyle=y,y&&r.fillRect(-v.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),v.width,a/this.lineHeight),r.restore()):y!==g?(_=N+c+C,this.direction==="rtl"&&(_=this.width-_-D),r.fillStyle=g,g&&r.fillRect(_,L,D,a/this.lineHeight),C=v.left,D=v.width,g=y):D+=v.kernedWidth;y&&!F&&(_=N+c+C,this.direction==="rtl"&&(_=this.width-_-D),r.fillStyle=y,r.fillRect(_,L,D,a/this.lineHeight)),L+=a}else L+=a;r.fillStyle=B,this._removeShadow(r)}},getFontCache:function(r){var a=r.fontFamily.toLowerCase();s.charWidthsCache[a]||(s.charWidthsCache[a]={});var c=s.charWidthsCache[a],p=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return c[p]||(c[p]={}),c[p]},_measureChar:function(r,a,c,p){var g,v,y,_,B=this.getFontCache(a),N=c+r,L=this._getFontDeclaration(a)===this._getFontDeclaration(p),C=a.fontSize/this.CACHE_FONT_SIZE;if(c&&B[c]!==void 0&&(y=B[c]),B[r]!==void 0&&(_=g=B[r]),L&&B[N]!==void 0&&(_=(v=B[N])-y),g===void 0||y===void 0||v===void 0){var D=this.getMeasuringContext();this._setTextStyles(D,a,!0)}return g===void 0&&(_=g=D.measureText(r).width,B[r]=g),y===void 0&&L&&c&&(y=D.measureText(c).width,B[c]=y),L&&v===void 0&&(v=D.measureText(N).width,B[N]=v,_=v-y),{width:g*C,kernedWidth:_*C}},getHeightOfChar:function(r,a){return this.getValueOfPropertyAt(r,a,"fontSize")},measureLine:function(r){var a=this._measureLine(r);return this.charSpacing!==0&&(a.width-=this._getWidthOfCharSpacing()),a.width<0&&(a.width=0),a},_measureLine:function(r){var a,c,p,g,v,y,_=0,B=this._textLines[r],N=new Array(B.length),L=0,C=this.path,D=this.pathSide==="right";for(this.__charBounds[r]=N,a=0;a<B.length;a++)c=B[a],g=this._getGraphemeBox(c,r,a,p),N[a]=g,_+=g.kernedWidth,p=c;if(N[a]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},C){switch(y=C.segmentsInfo[C.segmentsInfo.length-1].length,(v=s.util.getPointOnPath(C.path,0,C.segmentsInfo)).x+=C.pathOffset.x,v.y+=C.pathOffset.y,this.textAlign){case"left":L=D?y-_:0;break;case"center":L=(y-_)/2;break;case"right":L=D?0:y-_}for(L+=this.pathStartOffset*(D?-1:1),a=D?B.length-1:0;D?a>=0:a<B.length;D?a--:a++)g=N[a],L>y?L%=y:L<0&&(L+=y),this._setGraphemeOnPath(L,g,v),L+=g.kernedWidth}return{width:_,numOfSpaces:0}},_setGraphemeOnPath:function(r,a,c){var p=r+a.kernedWidth/2,g=this.path,v=s.util.getPointOnPath(g.path,p,g.segmentsInfo);a.renderLeft=v.x-c.x,a.renderTop=v.y-c.y,a.angle=v.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(r,a,c,p,g){var v,y=this.getCompleteStyleDeclaration(a,c),_=p?this.getCompleteStyleDeclaration(a,c-1):{},B=this._measureChar(r,y,p,_),N=B.kernedWidth,L=B.width;this.charSpacing!==0&&(L+=v=this._getWidthOfCharSpacing(),N+=v);var C={width:L,left:0,height:y.fontSize,kernedWidth:N,deltaY:y.deltaY};if(c>0&&!g){var D=this.__charBounds[a][c-1];C.left=D.left+D.width+B.kernedWidth-B.width}return C},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var a=this._textLines[r],c=this.getHeightOfChar(r,0),p=1,g=a.length;p<g;p++)c=Math.max(this.getHeightOfChar(r,p),c);return this.__lineHeights[r]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,a=0,c=0,p=this._textLines.length;c<p;c++)r=this.getHeightOfLine(c),a+=c===p-1?r/this.lineHeight:r;return a},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,a){r.save();for(var c=0,p=this._getLeftOffset(),g=this._getTopOffset(),v=0,y=this._textLines.length;v<y;v++){var _=this.getHeightOfLine(v),B=_/this.lineHeight,N=this._getLineLeftOffset(v);this._renderTextLine(a,r,this._textLines[v],p+N,g+c+B,v),c+=_}r.restore()},_renderTextFill:function(r){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,a,c,p,g,v){var y,_,B,N,L,C=this.getHeightOfLine(v),D=this.textAlign.indexOf("justify")!==-1,F="",j=0,U=this.path,W=!D&&this.charSpacing===0&&this.isEmptyStyles(v)&&!U,$=this.direction==="ltr",M=this.direction==="ltr"?1:-1,P=a.canvas.getAttribute("dir");if(a.save(),P!==this.direction&&(a.canvas.setAttribute("dir",$?"ltr":"rtl"),a.direction=$?"ltr":"rtl",a.textAlign=$?"left":"right"),g-=C*this._fontSizeFraction/this.lineHeight,W)return this._renderChar(r,a,v,0,c.join(""),p,g,C),void a.restore();for(var z=0,X=c.length-1;z<=X;z++)N=z===X||this.charSpacing||U,F+=c[z],B=this.__charBounds[v][z],j===0?(p+=M*(B.kernedWidth-B.width),j+=B.width):j+=B.kernedWidth,D&&!N&&this._reSpaceAndTab.test(c[z])&&(N=!0),N||(y=y||this.getCompleteStyleDeclaration(v,z),_=this.getCompleteStyleDeclaration(v,z+1),N=s.util.hasStyleChanged(y,_,!1)),N&&(U?(a.save(),a.translate(B.renderLeft,B.renderTop),a.rotate(B.angle),this._renderChar(r,a,v,z,F,-j/2,0,C),a.restore()):(L=p,this._renderChar(r,a,v,z,F,L,g,C)),F="",y=_,p+=M*j,j=0);a.restore()},_applyPatternGradientTransformText:function(r){var a,c=s.util.createCanvasElement(),p=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return c.width=p,c.height=g,(a=c.getContext("2d")).beginPath(),a.moveTo(0,0),a.lineTo(p,0),a.lineTo(p,g),a.lineTo(0,g),a.closePath(),a.translate(p/2,g/2),a.fillStyle=r.toLive(a),this._applyPatternGradientTransform(a,r),a.fill(),a.createPattern(c,"no-repeat")},handleFiller:function(r,a,c){var p,g;return c.toLive?c.gradientUnits==="percentage"||c.gradientTransform||c.patternTransform?(p=-this.width/2,g=-this.height/2,r.translate(p,g),r[a]=this._applyPatternGradientTransformText(c),{offsetX:p,offsetY:g}):(r[a]=c.toLive(r,this),this._applyPatternGradientTransform(r,c)):(r[a]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,a){return r.lineWidth=a.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",a.stroke)},_setFillStyles:function(r,a){return this.handleFiller(r,"fillStyle",a.fill)},_renderChar:function(r,a,c,p,g,v,y){var _,B,N=this._getStyleDeclaration(c,p),L=this.getCompleteStyleDeclaration(c,p),C=r==="fillText"&&L.fill,D=r==="strokeText"&&L.stroke&&L.strokeWidth;(D||C)&&(a.save(),C&&(_=this._setFillStyles(a,L)),D&&(B=this._setStrokeStyles(a,L)),a.font=this._getFontDeclaration(L),N&&N.textBackgroundColor&&this._removeShadow(a),N&&N.deltaY&&(y+=N.deltaY),C&&a.fillText(g,v-_.offsetX,y-_.offsetY),D&&a.strokeText(g,v-B.offsetX,y-B.offsetY),a.restore())},setSuperscript:function(r,a){return this._setScript(r,a,this.superscript)},setSubscript:function(r,a){return this._setScript(r,a,this.subscript)},_setScript:function(r,a,c){var p=this.get2DCursorLocation(r,!0),g=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"fontSize"),v=this.getValueOfPropertyAt(p.lineIndex,p.charIndex,"deltaY"),y={fontSize:g*c.size,deltaY:v+g*c.baseline};return this.setSelectionStyles(y,r,a),this},_getLineLeftOffset:function(r){var a=this.getLineWidth(r),c=this.width-a,p=this.textAlign,g=this.direction,v=0,y=this.isEndOfWrapping(r);return p==="justify"||p==="justify-center"&&!y||p==="justify-right"&&!y||p==="justify-left"&&!y?0:(p==="center"&&(v=c/2),p==="right"&&(v=c),p==="justify-center"&&(v=c/2),p==="justify-right"&&(v=c),g==="rtl"&&(v-=c),v)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r]!==void 0)return this.__lineWidths[r];var a=this.measureLine(r).width;return this.__lineWidths[r]=a,a},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,a,c){var p=this._getStyleDeclaration(r,a);return p&&p[c]!==void 0?p[c]:this[c]},_renderTextDecoration:function(r,a){if(this[a]||this.styleHas(a)){for(var c,p,g,v,y,_,B,N,L,C,D,F,j,U,W,$,M=this._getLeftOffset(),P=this._getTopOffset(),z=this.path,X=this._getWidthOfCharSpacing(),et=this.offsets[a],J=0,Z=this._textLines.length;J<Z;J++)if(c=this.getHeightOfLine(J),this[a]||this.styleHas(a,J)){B=this._textLines[J],U=c/this.lineHeight,v=this._getLineLeftOffset(J),C=0,D=0,N=this.getValueOfPropertyAt(J,0,a),$=this.getValueOfPropertyAt(J,0,"fill"),L=P+U*(1-this._fontSizeFraction),p=this.getHeightOfChar(J,0),y=this.getValueOfPropertyAt(J,0,"deltaY");for(var it=0,at=B.length;it<at;it++)if(F=this.__charBounds[J][it],j=this.getValueOfPropertyAt(J,it,a),W=this.getValueOfPropertyAt(J,it,"fill"),g=this.getHeightOfChar(J,it),_=this.getValueOfPropertyAt(J,it,"deltaY"),z&&j&&W)r.save(),r.fillStyle=$,r.translate(F.renderLeft,F.renderTop),r.rotate(F.angle),r.fillRect(-F.kernedWidth/2,et*g+_,F.kernedWidth,this.fontSize/15),r.restore();else if((j!==N||W!==$||g!==p||_!==y)&&D>0){var lt=M+v+C;this.direction==="rtl"&&(lt=this.width-lt-D),N&&$&&(r.fillStyle=$,r.fillRect(lt,L+et*p+y,D,this.fontSize/15)),C=F.left,D=F.width,N=j,$=W,p=g,y=_}else D+=F.kernedWidth;lt=M+v+C,this.direction==="rtl"&&(lt=this.width-lt-D),r.fillStyle=W,j&&W&&r.fillRect(lt,L+et*p+y,D-X,this.fontSize/15),P+=c}else P+=c;this._removeShadow(r)}},_getFontDeclaration:function(r,a){var c=r||this,p=this.fontFamily,g=s.Text.genericFonts.indexOf(p.toLowerCase())>-1,v=p===void 0||p.indexOf("'")>-1||p.indexOf(",")>-1||p.indexOf('"')>-1||g?c.fontFamily:'"'+c.fontFamily+'"';return[s.isLikelyNode?c.fontWeight:c.fontStyle,s.isLikelyNode?c.fontStyle:c.fontWeight,a?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",v].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var a=r.split(this._reNewline),c=new Array(a.length),p=["\n"],g=[],v=0;v<a.length;v++)c[v]=s.util.string.graphemeSplit(a[v]),g=g.concat(c[v],p);return g.pop(),{_unwrappedLines:c,lines:a,graphemeText:g,graphemeLines:c}},toObject:function(r){var a=d.concat(r),c=this.callSuper("toObject",a);return c.styles=s.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(r,a){this.callSuper("set",r,a);var c=!1,p=!1;if(typeof r=="object")for(var g in r)g==="path"&&this.setPathInfo(),c=c||this._dimensionAffectingProps.indexOf(g)!==-1,p=p||g==="path";else c=this._dimensionAffectingProps.indexOf(r)!==-1,p=r==="path";return p&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(r,a,c){if(!r)return a(null);var p=s.parseAttributes(r,s.Text.ATTRIBUTE_NAMES),g=p.textAnchor||"left";if((c=s.util.object.extend(c?u(c):{},p)).top=c.top||0,c.left=c.left||0,p.textDecoration){var v=p.textDecoration;v.indexOf("underline")!==-1&&(c.underline=!0),v.indexOf("overline")!==-1&&(c.overline=!0),v.indexOf("line-through")!==-1&&(c.linethrough=!0),delete c.textDecoration}"dx"in p&&(c.left+=p.dx),"dy"in p&&(c.top+=p.dy),"fontSize"in c||(c.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var y="";"textContent"in r?y=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(y=r.firstChild.data),y=y.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var _=c.strokeWidth;c.strokeWidth=0;var B=new s.Text(y,c),N=B.getScaledHeight()/B.height,L=((B.height+B.strokeWidth)*B.lineHeight-B.height)*N,C=B.getScaledHeight()+L,D=0;g==="center"&&(D=B.getScaledWidth()/2),g==="right"&&(D=B.getScaledWidth()),B.set({left:B.left-D,top:B.top-(C-B.fontSize*(.07+B._fontSizeFraction))/B.lineHeight,strokeWidth:_!==void 0?_:1}),a(B)},s.Text.fromObject=function(r,a){var c=u(r),p=r.path;return delete c.path,s.Object._fromObject("Text",c,function(g){g.styles=s.util.stylesFromArray(r.styles,r.text),p?s.Object._fromObject("Path",p,function(v){g.set("path",v),a(g)},"path"):a(g)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}}(t),b.util.object.extend(b.Text.prototype,{isEmptyStyles:function(h){if(!this.styles||h!==void 0&&!this.styles[h])return!0;var s=h===void 0?this.styles:{line:this.styles[h]};for(var u in s)for(var d in s[u])for(var r in s[u][d])return!1;return!0},styleHas:function(h,s){if(!this.styles||!h||h===""||s!==void 0&&!this.styles[s])return!1;var u=s===void 0?this.styles:{0:this.styles[s]};for(var d in u)for(var r in u[d])if(u[d][r][h]!==void 0)return!0;return!1},cleanStyle:function(h){if(!this.styles||!h||h==="")return!1;var s,u,d=this.styles,r=0,a=!0,c=0;for(var p in d){for(var g in s=0,d[p]){var v;r++,(v=d[p][g]).hasOwnProperty(h)?(u?v[h]!==u&&(a=!1):u=v[h],v[h]===this[h]&&delete v[h]):a=!1,Object.keys(v).length!==0?s++:delete d[p][g]}s===0&&delete d[p]}for(var y=0;y<this._textLines.length;y++)c+=this._textLines[y].length;a&&r===c&&(this[h]=u,this.removeStyle(h))},removeStyle:function(h){if(this.styles&&h&&h!==""){var s,u,d,r=this.styles;for(u in r){for(d in s=r[u])delete s[d][h],Object.keys(s[d]).length===0&&delete s[d];Object.keys(s).length===0&&delete r[u]}}},_extendStyles:function(h,s){var u=this.get2DCursorLocation(h);this._getLineStyle(u.lineIndex)||this._setLineStyle(u.lineIndex),this._getStyleDeclaration(u.lineIndex,u.charIndex)||this._setStyleDeclaration(u.lineIndex,u.charIndex,{}),b.util.object.extend(this._getStyleDeclaration(u.lineIndex,u.charIndex),s)},get2DCursorLocation:function(h,s){h===void 0&&(h=this.selectionStart);for(var u=s?this._unwrappedTextLines:this._textLines,d=u.length,r=0;r<d;r++){if(h<=u[r].length)return{lineIndex:r,charIndex:h};h-=u[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:u[r-1].length<h?u[r-1].length:h}},getSelectionStyles:function(h,s,u){h===void 0&&(h=this.selectionStart||0),s===void 0&&(s=this.selectionEnd||h);for(var d=[],r=h;r<s;r++)d.push(this.getStyleAtPosition(r,u));return d},getStyleAtPosition:function(h,s){var u=this.get2DCursorLocation(h);return(s?this.getCompleteStyleDeclaration(u.lineIndex,u.charIndex):this._getStyleDeclaration(u.lineIndex,u.charIndex))||{}},setSelectionStyles:function(h,s,u){s===void 0&&(s=this.selectionStart||0),u===void 0&&(u=this.selectionEnd||s);for(var d=s;d<u;d++)this._extendStyles(d,h);return this._forceClearCache=!0,this},_getStyleDeclaration:function(h,s){var u=this.styles&&this.styles[h];return u?u[s]:null},getCompleteStyleDeclaration:function(h,s){for(var u,d=this._getStyleDeclaration(h,s)||{},r={},a=0;a<this._styleProperties.length;a++)r[u=this._styleProperties[a]]=d[u]===void 0?this[u]:d[u];return r},_setStyleDeclaration:function(h,s,u){this.styles[h][s]=u},_deleteStyleDeclaration:function(h,s){delete this.styles[h][s]},_getLineStyle:function(h){return!!this.styles[h]},_setLineStyle:function(h){this.styles[h]={}},_deleteLineStyle:function(h){delete this.styles[h]}}),function(){function h(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}b.IText=b.util.createClass(b.Text,b.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,u){this.callSuper("initialize",s,u),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,u){this[s]!==u&&(this._fireSelectionChanged(),this[s]=u),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var u=this.canvas.contextTop,d=this.canvas.viewportTransform;u.save(),u.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this.transform(u),this._clearTextArea(u),s||u.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var s=this._getCursorBoundaries(),u=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,u):this.renderSelection(s,u),u.restore()}},_clearTextArea:function(s){var u=this.width+4,d=this.height+4;s.clearRect(-u/2,-d/2,u,d)},_getCursorBoundaries:function(s){s===void 0&&(s=this.selectionStart);var u=this._getLeftOffset(),d=this._getTopOffset(),r=this._getCursorBoundariesOffsets(s);return{left:u,top:d,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var u,d,r,a,c=0,p=0,g=this.get2DCursorLocation(s);r=g.charIndex,d=g.lineIndex;for(var v=0;v<d;v++)c+=this.getHeightOfLine(v);u=this._getLineLeftOffset(d);var y=this.__charBounds[d][r];return y&&(p=y.left),this.charSpacing!==0&&r===this._textLines[d].length&&(p-=this._getWidthOfCharSpacing()),a={top:c,left:u+(p>0?p:0)},this.direction==="rtl"&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(s,u){var d=this.get2DCursorLocation(),r=d.lineIndex,a=d.charIndex>0?d.charIndex-1:0,c=this.getValueOfPropertyAt(r,a,"fontSize"),p=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/p,v=s.topOffset,y=this.getValueOfPropertyAt(r,a,"deltaY");v+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,u),u.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,a,"fill"),u.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,u.fillRect(s.left+s.leftOffset-g/2,v+s.top+y,g,c)},renderSelection:function(s,u){for(var d=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,a=this.textAlign.indexOf("justify")!==-1,c=this.get2DCursorLocation(d),p=this.get2DCursorLocation(r),g=c.lineIndex,v=p.lineIndex,y=c.charIndex<0?0:c.charIndex,_=p.charIndex<0?0:p.charIndex,B=g;B<=v;B++){var N,L=this._getLineLeftOffset(B)||0,C=this.getHeightOfLine(B),D=0,F=0;if(B===g&&(D=this.__charBounds[g][y].left),B>=g&&B<v)F=a&&!this.isEndOfWrapping(B)?this.width:this.getLineWidth(B)||5;else if(B===v)if(_===0)F=this.__charBounds[v][_].left;else{var j=this._getWidthOfCharSpacing();F=this.__charBounds[v][_-1].left+this.__charBounds[v][_-1].width-j}N=C,(this.lineHeight<1||B===v&&this.lineHeight>1)&&(C/=this.lineHeight);var U=s.left+L+D,W=F-D,$=C,M=0;this.inCompositionMode?(u.fillStyle=this.compositionColor||"black",$=1,M=C):u.fillStyle=this.selectionColor,this.direction==="rtl"&&(U=this.width-U-W),u.fillRect(U,s.top+s.topOffset+M,W,$),s.topOffset+=N}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),u=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:u}}}),b.IText.fromObject=function(s,u){var d=b.util.stylesFromArray(s.styles,s.text),r=Object.assign({},s,{styles:d});if(h(r),r.styles)for(var a in r.styles)for(var c in r.styles[a])h(r.styles[a][c]);b.Object._fromObject("IText",r,u,"text")}}(),function(){var h=b.util.object.clone;b.util.object.extend(b.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var u=s.canvas;u&&(u._hasITextHandlers||(u._hasITextHandlers=!0,s._initCanvasHandlers(u)),u._iTextInstances=u._iTextInstances||[],u._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var u=s.canvas;u&&(u._iTextInstances=u._iTextInstances||[],b.util.removeFromArray(u._iTextInstances,s),u._iTextInstances.length===0&&(u._hasITextHandlers=!1,s._removeCanvasHandlers(u)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,u,d,r){var a;return a={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",u,{duration:d,onComplete:function(){a.isAborted||s[r]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return a.isAborted}}),a},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var u=this,d=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){u._tick()},d)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,u=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&u&&u.clearContext(u.contextTop||u.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var u=0,d=s-1;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)u++,d--;for(;/\S/.test(this._text[d])&&d>-1;)u++,d--;return s-u},findWordBoundaryRight:function(s){var u=0,d=s;if(this._reSpace.test(this._text[d]))for(;this._reSpace.test(this._text[d]);)u++,d++;for(;/\S/.test(this._text[d])&&d<this._text.length;)u++,d++;return s+u},findLineBoundaryLeft:function(s){for(var u=0,d=s-1;!/\n/.test(this._text[d])&&d>-1;)u++,d--;return s-u},findLineBoundaryRight:function(s){for(var u=0,d=s;!/\n/.test(this._text[d])&&d<this._text.length;)u++,d++;return s+u},searchWordBoundary:function(s,u){for(var d=this._text,r=this._reSpace.test(d[s])?s-1:s,a=d[r],c=b.reNonWord;!c.test(a)&&r>0&&r<d.length;)a=d[r+=u];return c.test(a)&&(r+=u===1?0:1),r},selectWord:function(s){s=s||this.selectionStart;var u=this.searchWordBoundary(s,-1),d=this.searchWordBoundary(s,1);this.selectionStart=u,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var u=this.findLineBoundaryLeft(s),d=this.findLineBoundaryRight(s);return this.selectionStart=u,this.selectionEnd=d,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(u){u.selected=!1,u.isEditing&&u.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var u=this.getSelectionStartFromPointer(s.e),d=this.selectionStart,r=this.selectionEnd;(u===this.__selectionStartOnMouseDown&&d!==r||d!==u&&r!==u)&&(u>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=u):(this.selectionStart=u,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===d&&this.selectionEnd===r||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,u,d){var r=d.slice(0,s),a=b.util.string.graphemeSplit(r).length;if(s===u)return{selectionStart:a,selectionEnd:a};var c=d.slice(s,u);return{selectionStart:a,selectionEnd:a+b.util.string.graphemeSplit(c).length}},fromGraphemeToStringSelection:function(s,u,d){var r=d.slice(0,s).join("").length;return s===u?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+d.slice(s,u).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,u=this._getCursorBoundaries(s),d=this.get2DCursorLocation(s),r=d.lineIndex,a=d.charIndex,c=this.getValueOfPropertyAt(r,a,"fontSize")*this.lineHeight,p=u.leftOffset,g=this.calcTransformMatrix(),v={x:u.left+p,y:u.top+u.topOffset+c},y=this.canvas.getRetinaScaling(),_=this.canvas.upperCanvasEl,B=_.width/y,N=_.height/y,L=B-c,C=N-c,D=_.clientWidth/B,F=_.clientHeight/N;return v=b.util.transformPoint(v,g),(v=b.util.transformPoint(v,this.canvas.viewportTransform)).x*=D,v.y*=F,v.x<0&&(v.x=0),v.x>L&&(v.x=L),v.y<0&&(v.y=0),v.y>C&&(v.y=C),v.x+=this.canvas._offset.left,v.y+=this.canvas._offset.top,{left:v.x+"px",top:v.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,u=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,u&&(u.blur&&u.blur(),u.parentNode&&u.parentNode.removeChild(u)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,u){var d,r,a=this.get2DCursorLocation(s,!0),c=this.get2DCursorLocation(u,!0),p=a.lineIndex,g=a.charIndex,v=c.lineIndex,y=c.charIndex;if(p!==v){if(this.styles[p])for(d=g;d<this._unwrappedTextLines[p].length;d++)delete this.styles[p][d];if(this.styles[v])for(d=y;d<this._unwrappedTextLines[v].length;d++)(r=this.styles[v][d])&&(this.styles[p]||(this.styles[p]={}),this.styles[p][g+d-y]=r);for(d=p+1;d<=v;d++)delete this.styles[d];this.shiftLineStyles(v,p-v)}else if(this.styles[p]){r=this.styles[p];var _,B,N=y-g;for(d=g;d<y;d++)delete r[d];for(B in this.styles[p])(_=parseInt(B,10))>=y&&(r[_-N]=r[B],delete r[B])}},shiftLineStyles:function(s,u){var d=h(this.styles);for(var r in this.styles){var a=parseInt(r,10);a>s&&(this.styles[a+u]=d[a],d[a-u]||delete this.styles[a])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(s,u,d,r){var a,c={},p=!1,g=this._unwrappedTextLines[s].length===u;for(var v in d||(d=1),this.shiftLineStyles(s,d),this.styles[s]&&(a=this.styles[s][u===0?u:u-1]),this.styles[s]){var y=parseInt(v,10);y>=u&&(p=!0,c[y-u]=this.styles[s][v],g&&u===0||delete this.styles[s][v])}var _=!1;for(p&&!g&&(this.styles[s+d]=c,_=!0),_&&d--;d>0;)r&&r[d-1]?this.styles[s+d]={0:h(r[d-1])}:a?this.styles[s+d]={0:h(a)}:delete this.styles[s+d],d--;this._forceClearCache=!0},insertCharStyleObject:function(s,u,d,r){this.styles||(this.styles={});var a=this.styles[s],c=a?h(a):{};for(var p in d||(d=1),c){var g=parseInt(p,10);g>=u&&(a[g+d]=c[g],c[g-d]||delete a[g])}if(this._forceClearCache=!0,r)for(;d--;)Object.keys(r[d]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][u+d]=h(r[d]));else if(a)for(var v=a[u?u-1:1];v&&d--;)this.styles[s][u+d]=h(v)},insertNewStyleBlock:function(s,u,d){for(var r=this.get2DCursorLocation(u,!0),a=[0],c=0,p=0;p<s.length;p++)s[p]==="\n"?a[++c]=0:a[c]++;for(a[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,a[0],d),d=d&&d.slice(a[0]+1)),c&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+a[0],c),p=1;p<c;p++)a[p]>0?this.insertCharStyleObject(r.lineIndex+p,0,a[p],d):d&&this.styles[r.lineIndex+p]&&d[0]&&(this.styles[r.lineIndex+p][0]=d[0]),d=d&&d.slice(a[p]+1);a[p]>0&&this.insertCharStyleObject(r.lineIndex+p,0,a[p],d)},setSelectionStartEndWithShift:function(s,u,d){d<=s?(u===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=d):d>s&&d<u?this._selectionDirection==="right"?this.selectionEnd=d:this.selectionStart=d:(u===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=u),this.selectionEnd=d)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),b.util.object.extend(b.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(h){if(this.canvas){this.__newClickTime=+new Date;var s=h.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",h),this._stopEvent(h.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(h){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===h.x&&this.__lastPointer.y===h.y},_stopEvent:function(h){h.preventDefault&&h.preventDefault(),h.stopPropagation&&h.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(h){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(h.e))},tripleClickHandler:function(h){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(h.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(h.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(h){!this.canvas||!this.editable||h.e.button&&h.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(h){if(this.__isMousedown=!1,!(!this.editable||this.group||h.transform&&h.transform.actionPerformed||h.e.button&&h.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(h.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(h){var s=this.getSelectionStartFromPointer(h),u=this.selectionStart,d=this.selectionEnd;h.shiftKey?this.setSelectionStartEndWithShift(u,d,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(h){for(var s,u=this.getLocalPointer(h),d=0,r=0,a=0,c=0,p=0,g=0,v=this._textLines.length;g<v&&a<=u.y;g++)a+=this.getHeightOfLine(g)*this.scaleY,p=g,g>0&&(c+=this._textLines[g-1].length+this.missingNewlineOffset(g-1));r=this._getLineLeftOffset(p)*this.scaleX,s=this._textLines[p],this.direction==="rtl"&&(u.x=this.width*this.scaleX-u.x+r);for(var y=0,_=s.length;y<_&&(d=r,(r+=this.__charBounds[p][y].kernedWidth*this.scaleX)<=u.x);y++)c++;return this._getNewSelectionStartFromOffset(u,d,r,c,_)},_getNewSelectionStartFromOffset:function(h,s,u,d,r){var a=h.x-s,c=u-h.x,p=d+(c>a||c<0?0:1);return this.flipX&&(p=r-p),p>this._text.length&&(p=this._text.length),p}}),b.util.object.extend(b.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=b.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var h=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+h.top+"; left: "+h.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+h.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):b.document.body.appendChild(this.hiddenTextarea),b.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),b.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),b.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),b.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),b.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),b.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),b.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),b.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),b.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(b.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(h){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(h.keyCode in s)this[s[h.keyCode]](h);else{if(!(h.keyCode in this.ctrlKeysMapDown)||!h.ctrlKey&&!h.metaKey)return;this[this.ctrlKeysMapDown[h.keyCode]](h)}h.stopImmediatePropagation(),h.preventDefault(),h.keyCode>=33&&h.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(h){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:h.keyCode in this.ctrlKeysMapUp&&(h.ctrlKey||h.metaKey)&&(this[this.ctrlKeysMapUp[h.keyCode]](h),h.stopImmediatePropagation(),h.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(h){var s=this.fromPaste;if(this.fromPaste=!1,h&&h.stopPropagation(),this.isEditing){var u,d,r,a,c,p=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,g=this._text.length,v=p.length,y=v-g,_=this.selectionStart,B=this.selectionEnd,N=_!==B;if(this.hiddenTextarea.value==="")return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var L=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=_>L.selectionStart;N?(u=this._text.slice(_,B),y+=B-_):v<g&&(u=C?this._text.slice(B+y,B):this._text.slice(_,_-y)),d=p.slice(L.selectionEnd-y,L.selectionEnd),u&&u.length&&(d.length&&(r=this.getSelectionStyles(_,_+1,!1),r=d.map(function(){return r[0]})),N?(a=_,c=B):C?(a=B-u.length,c=B):(a=B,c=B+u.length),this.removeStyleFromTo(a,c)),d.length&&(s&&d.join("")===b.copiedText&&!b.disableStyleCopyPaste&&(r=b.copiedTextStyle),this.insertNewStyleBlock(d,_,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(h){this.compositionStart=h.target.selectionStart,this.compositionEnd=h.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(b.copiedText=this.getSelectedText(),b.disableStyleCopyPaste?b.copiedTextStyle=null:b.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(h){return h&&h.clipboardData||b.window.clipboardData},_getWidthBeforeCursor:function(h,s){var u,d=this._getLineLeftOffset(h);return s>0&&(d+=(u=this.__charBounds[h][s-1]).left+u.width),d},getDownCursorOffset:function(h,s){var u=this._getSelectionForOffset(h,s),d=this.get2DCursorLocation(u),r=d.lineIndex;if(r===this._textLines.length-1||h.metaKey||h.keyCode===34)return this._text.length-u;var a=d.charIndex,c=this._getWidthBeforeCursor(r,a),p=this._getIndexOnLine(r+1,c);return this._textLines[r].slice(a).length+p+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(h,s){return h.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(h,s){var u=this._getSelectionForOffset(h,s),d=this.get2DCursorLocation(u),r=d.lineIndex;if(r===0||h.metaKey||h.keyCode===33)return-u;var a=d.charIndex,c=this._getWidthBeforeCursor(r,a),p=this._getIndexOnLine(r-1,c),g=this._textLines[r].slice(0,a),v=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+p-g.length+(1-v)},_getIndexOnLine:function(h,s){for(var u,d,r=this._textLines[h],a=this._getLineLeftOffset(h),c=0,p=0,g=r.length;p<g;p++)if((a+=u=this.__charBounds[h][p].width)>s){d=!0;var v=a-u,y=a,_=Math.abs(v-s);c=Math.abs(y-s)<_?p:p-1;break}return d||(c=r.length-1),c},moveCursorDown:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",h)},moveCursorUp:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",h)},_moveCursorUpOrDown:function(h,s){var u=this["get"+h+"CursorOffset"](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(h){var s=this._selectionDirection==="left"?this.selectionStart+h:this.selectionEnd+h;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),h!==0},moveCursorWithoutShift:function(h){return h<0?(this.selectionStart+=h,this.selectionEnd=this.selectionStart):(this.selectionEnd+=h,this.selectionStart=this.selectionEnd),h!==0},moveCursorLeft:function(h){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",h)},_move:function(h,s,u){var d;if(h.altKey)d=this["findWordBoundary"+u](this[s]);else{if(!h.metaKey&&h.keyCode!==35&&h.keyCode!==36)return this[s]+=u==="Left"?-1:1,!0;d=this["findLineBoundary"+u](this[s])}if(d!==void 0&&this[s]!==d)return this[s]=d,!0},_moveLeft:function(h,s){return this._move(h,s,"Left")},_moveRight:function(h,s){return this._move(h,s,"Right")},moveCursorLeftWithoutShift:function(h){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(h,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(h){return this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd?this._moveLeft(h,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection="left",this._moveLeft(h,"selectionStart")):void 0},moveCursorRight:function(h){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",h)},_moveCursorLeftOrRight:function(h,s){var u="moveCursor"+h+"With";this._currentCursorOpacity=1,s.shiftKey?u+="Shift":u+="outShift",this[u](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(h){return this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd?this._moveRight(h,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(h,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(h){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(h,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(h,s){s===void 0&&(s=h+1),this.removeStyleFromTo(h,s),this._text.splice(h,s-h),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(h,s,u,d){d===void 0&&(d=u),d>u&&this.removeStyleFromTo(u,d);var r=b.util.string.graphemeSplit(h);this.insertNewStyleBlock(r,u,s),this._text=[].concat(this._text.slice(0,u),r,this._text.slice(d)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var h=b.util.toFixed,s=/  +/g;b.util.object.extend(b.Text.prototype,{_toSVG:function(){var u=this._getSVGLeftTopOffsets(),d=this._getSVGTextAndBg(u.textTop,u.textLeft);return this._wrapSVGTextAndBg(d)},toSVG:function(u){return this._createBaseSVGMarkup(this._toSVG(),{reviver:u,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(u){var d=this.getSvgTextDecoration(this);return[u.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",d?'text-decoration="'+d+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",u.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(u,d){var r,a=[],c=[],p=u;this._setSVGBg(c);for(var g=0,v=this._textLines.length;g<v;g++)r=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(c,g,d+r,p),this._setSVGTextLineText(a,g,d+r,p),p+=this.getHeightOfLine(g);return{textSpans:a,textBgRects:c}},_createTextCharSpan:function(u,d,r,a){var c=u!==u.trim()||u.match(s),p=this.getSvgSpanStyles(d,c),g=p?'style="'+p+'"':"",v=d.deltaY,y="",_=b.Object.NUM_FRACTION_DIGITS;return v&&(y=' dy="'+h(v,_)+'" '),['<tspan x="',h(r,_),'" y="',h(a,_),'" ',y,g,">",b.util.string.escapeXml(u),"</tspan>"].join("")},_setSVGTextLineText:function(u,d,r,a){var c,p,g,v,y,_=this.getHeightOfLine(d),B=this.textAlign.indexOf("justify")!==-1,N="",L=0,C=this._textLines[d];a+=_*(1-this._fontSizeFraction)/this.lineHeight;for(var D=0,F=C.length-1;D<=F;D++)y=D===F||this.charSpacing,N+=C[D],g=this.__charBounds[d][D],L===0?(r+=g.kernedWidth-g.width,L+=g.width):L+=g.kernedWidth,B&&!y&&this._reSpaceAndTab.test(C[D])&&(y=!0),y||(c=c||this.getCompleteStyleDeclaration(d,D),p=this.getCompleteStyleDeclaration(d,D+1),y=b.util.hasStyleChanged(c,p,!0)),y&&(v=this._getStyleDeclaration(d,D)||{},u.push(this._createTextCharSpan(N,v,r,a)),N="",c=p,r+=L,L=0)},_pushTextBgRect:function(u,d,r,a,c,p){var g=b.Object.NUM_FRACTION_DIGITS;u.push("		<rect ",this._getFillAttributes(d),' x="',h(r,g),'" y="',h(a,g),'" width="',h(c,g),'" height="',h(p,g),'"></rect>\n')},_setSVGTextLineBg:function(u,d,r,a){for(var c,p,g=this._textLines[d],v=this.getHeightOfLine(d)/this.lineHeight,y=0,_=0,B=this.getValueOfPropertyAt(d,0,"textBackgroundColor"),N=0,L=g.length;N<L;N++)c=this.__charBounds[d][N],(p=this.getValueOfPropertyAt(d,N,"textBackgroundColor"))!==B?(B&&this._pushTextBgRect(u,B,r+_,a,y,v),_=c.left,y=c.width,B=p):y+=c.kernedWidth;p&&this._pushTextBgRect(u,p,r+_,a,y,v)},_getFillAttributes:function(u){var d=u&&typeof u=="string"?new b.Color(u):"";return d&&d.getSource()&&d.getAlpha()!==1?'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"':'fill="'+u+'"'},_getSVGLineTopOffset:function(u){for(var d,r=0,a=0;a<u;a++)r+=this.getHeightOfLine(a);return d=this.getHeightOfLine(a),{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*d/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(u){return b.Object.prototype.getSvgStyles.call(this,u)+" white-space: pre;"}})}(),function(h){var s=h.fabric||(h.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(u){for(var d=0,r=0,a=0,c={},p=0;p<u.graphemeLines.length;p++)u.graphemeText[a]==="\n"&&p>0?(r=0,a++,d++):!this.splitByGrapheme&&this._reSpaceAndTab.test(u.graphemeText[a])&&p>0&&(r++,a++),c[p]={line:d,offset:r},a+=u.graphemeLines[p].length,r+=u.graphemeLines[p].length;return c},styleHas:function(u,d){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[d];r&&(d=r.line)}return s.Text.prototype.styleHas.call(this,u,d)},isEmptyStyles:function(u){if(!this.styles)return!0;var d,r,a=0,c=!1,p=this._styleMap[u],g=this._styleMap[u+1];for(var v in p&&(u=p.line,a=p.offset),g&&(c=g.line===u,d=g.offset),r=u===void 0?this.styles:{line:this.styles[u]})for(var y in r[v])if(y>=a&&(!c||y<d))for(var _ in r[v][y])return!1;return!0},_getStyleDeclaration:function(u,d){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[u];if(!r)return null;u=r.line,d=r.offset+d}return this.callSuper("_getStyleDeclaration",u,d)},_setStyleDeclaration:function(u,d,r){var a=this._styleMap[u];u=a.line,d=a.offset+d,this.styles[u][d]=r},_deleteStyleDeclaration:function(u,d){var r=this._styleMap[u];u=r.line,d=r.offset+d,delete this.styles[u][d]},_getLineStyle:function(u){var d=this._styleMap[u];return!!this.styles[d.line]},_setLineStyle:function(u){var d=this._styleMap[u];this.styles[d.line]={}},_wrapText:function(u,d){var r,a=[];for(this.isWrapping=!0,r=0;r<u.length;r++)a=a.concat(this._wrapLine(u[r],r,d));return this.isWrapping=!1,a},_measureWord:function(u,d,r){var a,c=0;r=r||0;for(var p=0,g=u.length;p<g;p++)c+=this._getGraphemeBox(u[p],d,p+r,a,!0).kernedWidth,a=u[p];return c},_wrapLine:function(u,d,r,a){var c=0,p=this.splitByGrapheme,g=[],v=[],y=p?s.util.string.graphemeSplit(u):u.split(this._wordJoiners),_="",B=0,N=p?"":" ",L=0,C=0,D=0,F=!0,j=this._getWidthOfCharSpacing();a=a||0,y.length===0&&y.push([]),r-=a;for(var U=0;U<y.length;U++)_=p?y[U]:s.util.string.graphemeSplit(y[U]),L=this._measureWord(_,d,B),B+=_.length,(c+=C+L-j)>r&&!F?(g.push(v),v=[],c=L,F=!0):c+=j,F||p||v.push(N),v=v.concat(_),C=p?0:this._measureWord([N],d,B),B++,F=!1,L>D&&(D=L);return U&&g.push(v),D+a>this.dynamicMinWidth&&(this.dynamicMinWidth=D-j+a),g},isEndOfWrapping:function(u){return!this._styleMap[u+1]||this._styleMap[u+1].line!==this._styleMap[u].line},missingNewlineOffset:function(u){return this.splitByGrapheme?this.isEndOfWrapping(u)?1:0:1},_splitTextIntoLines:function(u){for(var d=s.Text.prototype._splitTextIntoLines.call(this,u),r=this._wrapText(d.lines,this.width),a=new Array(r.length),c=0;c<r.length;c++)a[c]=r[c].join("");return d.lines=a,d.graphemeLines=r,d},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var u={};for(var d in this._styleMap)this._textLines[d]&&(u[this._styleMap[d].line]=1);for(var d in this.styles)u[d]||delete this.styles[d]},toObject:function(u){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(u))}}),s.Textbox.fromObject=function(u,d){var r=s.util.stylesFromArray(u.styles,u.text),a=Object.assign({},u,{styles:r});return s.Object._fromObject("Textbox",a,d,"text")}}(t),function(){var h=b.controlsUtils,s=h.scaleSkewCursorStyleHandler,u=h.scaleCursorStyleHandler,d=h.scalingEqually,r=h.scalingYOrSkewingX,a=h.scalingXOrSkewingY,c=h.scaleOrSkewActionName,p=b.Object.prototype.controls;if(p.ml=new b.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:a,getActionName:c}),p.mr=new b.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:a,getActionName:c}),p.mb=new b.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:r,getActionName:c}),p.mt=new b.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:r,getActionName:c}),p.tl=new b.Control({x:-.5,y:-.5,cursorStyleHandler:u,actionHandler:d}),p.tr=new b.Control({x:.5,y:-.5,cursorStyleHandler:u,actionHandler:d}),p.bl=new b.Control({x:-.5,y:.5,cursorStyleHandler:u,actionHandler:d}),p.br=new b.Control({x:.5,y:.5,cursorStyleHandler:u,actionHandler:d}),p.mtr=new b.Control({x:0,y:-.5,actionHandler:h.rotationWithSnapping,cursorStyleHandler:h.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),b.Textbox){var g=b.Textbox.prototype.controls={};g.mtr=p.mtr,g.tr=p.tr,g.br=p.br,g.tl=p.tl,g.bl=p.bl,g.mt=p.mt,g.mb=p.mb,g.mr=new b.Control({x:.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),g.ml=new b.Control({x:-.5,y:0,actionHandler:h.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(st);var Qp,Jl={exports:{}},Jr=typeof Reflect=="object"?Reflect:null,Lp=Jr&&typeof Jr.apply=="function"?Jr.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Qp=Jr&&typeof Jr.ownKeys=="function"?Jr.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Pp=Number.isNaN||function(t){return t!=t};function ge(){ge.init.call(this)}Jl.exports=ge,Jl.exports.once=function(t,e){return new Promise(function(n,i){function o(f){t.removeListener(e,l),i(f)}function l(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}Hp(t,e,l,{once:!0}),e!=="error"&&function(f,A,m){typeof f.on=="function"&&Hp(f,"error",A,m)}(t,o,{once:!0})})},ge.EventEmitter=ge,ge.prototype._events=void 0,ge.prototype._eventsCount=0,ge.prototype._maxListeners=void 0;var jp=10;function $a(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function Fp(t){return t._maxListeners===void 0?ge.defaultMaxListeners:t._maxListeners}function Rp(t,e,n,i){var o,l,f;if($a(n),(l=t._events)===void 0?(l=t._events=Object.create(null),t._eventsCount=0):(l.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),l=t._events),f=l[e]),f===void 0)f=l[e]=n,++t._eventsCount;else if(typeof f=="function"?f=l[e]=i?[n,f]:[f,n]:i?f.unshift(n):f.push(n),(o=Fp(t))>0&&f.length>o&&!f.warned){f.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=t,A.type=e,A.count=f.length}return t}function T6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Np(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=T6.bind(i);return o.listener=n,i.wrapFn=o,o}function zp(t,e,n){var i=t._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?function(l){for(var f=new Array(l.length),A=0;A<f.length;++A)f[A]=l[A].listener||l[A];return f}(o):Up(o,o.length)}function Vp(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function Up(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function Hp(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function o(l){i.once&&t.removeEventListener(e,o),n(l)})}}Object.defineProperty(ge,"defaultMaxListeners",{enumerable:!0,get:function(){return jp},set:function(t){if(typeof t!="number"||t<0||Pp(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");jp=t}}),ge.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ge.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Pp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},ge.prototype.getMaxListeners=function(){return Fp(this)},ge.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var l;if(e.length>0&&(l=e[0]),l instanceof Error)throw l;var f=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw f.context=l,f}var A=o[t];if(A===void 0)return!1;if(typeof A=="function")Lp(A,this,e);else{var m=A.length,w=Up(A,m);for(n=0;n<m;++n)Lp(w[n],this,e)}return!0},ge.prototype.addListener=function(t,e){return Rp(this,t,e,!1)},ge.prototype.on=ge.prototype.addListener,ge.prototype.prependListener=function(t,e){return Rp(this,t,e,!0)},ge.prototype.once=function(t,e){return $a(e),this.on(t,Np(this,t,e)),this},ge.prototype.prependOnceListener=function(t,e){return $a(e),this.prependListener(t,Np(this,t,e)),this},ge.prototype.removeListener=function(t,e){var n,i,o,l,f;if($a(e),(i=this._events)===void 0)return this;if((n=i[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(o=-1,l=n.length-1;l>=0;l--)if(n[l]===e||n[l].listener===e){f=n[l].listener,o=l;break}if(o<0)return this;o===0?n.shift():function(A,m){for(;m+1<A.length;m++)A[m]=A[m+1];A.pop()}(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,f||e)}return this},ge.prototype.off=ge.prototype.removeListener,ge.prototype.removeAllListeners=function(t){var e,n,i;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o,l=Object.keys(n);for(i=0;i<l.length;++i)(o=l[i])!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},ge.prototype.listeners=function(t){return zp(this,t,!0)},ge.prototype.rawListeners=function(t){return zp(this,t,!1)},ge.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Vp.call(t,e)},ge.prototype.listenerCount=Vp,ge.prototype.eventNames=function(){return this._eventsCount>0?Qp(this._events):[]};const D6=Aa(Jl.exports),Zl=typeof navigator<"u"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function tc(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on".concat(e),n)}function Ho(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on".concat(e),n)}function Gp(t,e){const n=e.slice(0,e.length-1);for(let i=0;i<n.length;i++)n[i]=t[n[i].toLowerCase()];return n}function Yp(t){typeof t!="string"&&(t="");const e=(t=t.replace(/\s/g,"")).split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}const Go={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Zl?173:189,"=":Zl?61:187,";":Zl?59:186,"'":222,"[":219,"]":221,"\\":220},ti={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},ec={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},He={16:!1,18:!1,17:!1,91:!1},Se={};for(let t=1;t<20;t++)Go["f".concat(t)]=111+t;let Ae=[],Yo=null,Wp="all";const mi=new Map,Wo=t=>Go[t.toLowerCase()]||ti[t.toLowerCase()]||t.toUpperCase().charCodeAt(0);function Xp(t){Wp=t||"all"}function Xo(){return Wp||"all"}function $p(t){if(t===void 0)Object.keys(Se).forEach(o=>{Array.isArray(Se[o])&&Se[o].forEach(l=>qa(l)),delete Se[o]}),nc(null);else if(Array.isArray(t))t.forEach(o=>{o.key&&qa(o)});else if(typeof t=="object")t.key&&qa(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];let[o,l]=n;typeof o=="function"&&(l=o,o=""),qa({key:t,scope:o,method:l,splitKey:"+"})}}const qa=t=>{let{key:e,scope:n,method:i,splitKey:o="+"}=t;Yp(e).forEach(l=>{const f=l.split(o),A=f.length,m=f[A-1],w=m==="*"?"*":Wo(m);if(!Se[w])return;n||(n=Xo());const x=A>1?Gp(ti,f):[],E=[];Se[w]=Se[w].filter(T=>{const O=(!i||T.method===i)&&T.scope===n&&function(k,S){const Q=k.length>=S.length?k:S,R=k.length>=S.length?S:k;let V=!0;for(let b=0;b<Q.length;b++)R.indexOf(Q[b])===-1&&(V=!1);return V}(T.mods,x);return O&&E.push(T.element),!O}),E.forEach(T=>nc(T))})};function qp(t,e,n,i){if(e.element!==i)return;let o;if(e.scope===n||e.scope==="all"){o=e.mods.length>0;for(const l in He)Object.prototype.hasOwnProperty.call(He,l)&&(!He[l]&&e.mods.indexOf(+l)>-1||He[l]&&e.mods.indexOf(+l)===-1)&&(o=!1);(e.mods.length!==0||He[16]||He[18]||He[17]||He[91])&&!o&&e.shortcut!=="*"||(e.keys=[],e.keys=e.keys.concat(Ae),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function Kp(t,e){const n=Se["*"];let i=t.keyCode||t.which||t.charCode;if(!yi.filter.call(this,t))return;if(i!==93&&i!==224||(i=91),Ae.indexOf(i)===-1&&i!==229&&Ae.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(A=>{const m=ec[A];t[A]&&Ae.indexOf(m)===-1?Ae.push(m):!t[A]&&Ae.indexOf(m)>-1?Ae.splice(Ae.indexOf(m),1):A==="metaKey"&&t[A]&&Ae.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Ae=Ae.slice(Ae.indexOf(m))))}),i in He){He[i]=!0;for(const A in ti)ti[A]===i&&(yi[A]=!0);if(!n)return}for(const A in He)Object.prototype.hasOwnProperty.call(He,A)&&(He[A]=t[ec[A]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState("AltGraph")&&(Ae.indexOf(17)===-1&&Ae.push(17),Ae.indexOf(18)===-1&&Ae.push(18),He[17]=!0,He[18]=!0);const o=Xo();if(n)for(let A=0;A<n.length;A++)n[A].scope===o&&(t.type==="keydown"&&n[A].keydown||t.type==="keyup"&&n[A].keyup)&&qp(t,n[A],o,e);if(!(i in Se))return;const l=Se[i],f=l.length;for(let A=0;A<f;A++)if((t.type==="keydown"&&l[A].keydown||t.type==="keyup"&&l[A].keyup)&&l[A].key){const m=l[A],{splitKey:w}=m,x=m.key.split(w),E=[];for(let T=0;T<x.length;T++)E.push(Wo(x[T]));E.sort().join("")===Ae.sort().join("")&&qp(t,m,o,e)}}function yi(t,e,n){Ae=[];const i=Yp(t);let o=[],l="all",f=document,A=0,m=!1,w=!0,x="+",E=!1,T=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(l=e.scope),e.element&&(f=e.element),e.keyup&&(m=e.keyup),e.keydown!==void 0&&(w=e.keydown),e.capture!==void 0&&(E=e.capture),typeof e.splitKey=="string"&&(x=e.splitKey),e.single===!0&&(T=!0)),typeof e=="string"&&(l=e),T&&$p(t,l);A<i.length;A++)o=[],(t=i[A].split(x)).length>1&&(o=Gp(ti,t)),(t=(t=t[t.length-1])==="*"?"*":Wo(t))in Se||(Se[t]=[]),Se[t].push({keyup:m,keydown:w,scope:l,mods:o,shortcut:i[A],method:n,key:i[A],splitKey:x,element:f});if(f!==void 0&&window){if(!mi.has(f)){const O=function(){return Kp(arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,f)},k=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Kp(S,f),function(Q){let R=Q.keyCode||Q.which||Q.charCode;const V=Ae.indexOf(R);if(V>=0&&Ae.splice(V,1),Q.key&&Q.key.toLowerCase()==="meta"&&Ae.splice(0,Ae.length),R!==93&&R!==224||(R=91),R in He){He[R]=!1;for(const b in ti)ti[b]===R&&(yi[b]=!1)}}(S)};mi.set(f,{keydownListener:O,keyupListenr:k,capture:E}),tc(f,"keydown",O,E),tc(f,"keyup",k,E)}if(!Yo){const O=()=>{Ae=[]};Yo={listener:O,capture:E},tc(window,"focus",O,E)}}}function nc(t){const e=Object.values(Se).flat();if(e.findIndex(n=>{let{element:i}=n;return i===t})<0){const{keydownListener:n,keyupListenr:i,capture:o}=mi.get(t)||{};n&&i&&(Ho(t,"keyup",i,o),Ho(t,"keydown",n,o),mi.delete(t))}if((e.length<=0||mi.size<=0)&&(Object.keys(mi).forEach(n=>{const{keydownListener:i,keyupListenr:o,capture:l}=mi.get(n)||{};i&&o&&(Ho(n,"keyup",o,l),Ho(n,"keydown",i,l),mi.delete(n))}),mi.clear(),Object.keys(Se).forEach(n=>delete Se[n]),Yo)){const{listener:n,capture:i}=Yo;Ho(window,"focus",n,i),Yo=null}}const ic={getPressedKeyString:function(){return Ae.map(t=>{return e=t,Object.keys(Go).find(n=>Go[n]===e)||(n=>Object.keys(ti).find(i=>ti[i]===n))(t)||String.fromCharCode(t);var e})},setScope:Xp,getScope:Xo,deleteScope:function(t,e){let n,i;t||(t=Xo());for(const o in Se)if(Object.prototype.hasOwnProperty.call(Se,o))for(n=Se[o],i=0;i<n.length;)n[i].scope===t?n.splice(i,1).forEach(l=>{let{element:f}=l;return nc(f)}):i++;Xo()===t&&Xp(e||"all")},getPressedKeyCodes:function(){return Ae.slice(0)},getAllKeyCodes:function(){const t=[];return Object.keys(Se).forEach(e=>{Se[e].forEach(n=>{let{key:i,scope:o,mods:l,shortcut:f}=n;t.push({scope:o,shortcut:f,mods:l,keys:i.split("+").map(A=>Wo(A))})})}),t},isPressed:function(t){return typeof t=="string"&&(t=Wo(t)),Ae.indexOf(t)!==-1},filter:function(t){const e=t.target||t.srcElement,{tagName:n}=e;let i=!0;const o=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(o||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(i=!1),i},trigger:function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Se).forEach(n=>{Se[n].filter(i=>i.scope===e&&i.shortcut===t).forEach(i=>{i&&i.method&&i.method()})})},unbind:$p,keyMap:Go,modifier:ti,modifierMap:ec};for(const t in ic)Object.prototype.hasOwnProperty.call(ic,t)&&(yi[t]=ic[t]);if(typeof window<"u"){const t=window.hotkeys;yi.noConflict=e=>(e&&window.hotkeys===yi&&(window.hotkeys=t),yi),window.hotkeys=yi}class Ka{constructor(e,n){this.container=e,this.dom=null,this.shown=!1,this.root=!0,this.parent=null,this.submenus=[],this.items=n,this._onclick=i=>{!this.dom||i.target==this.dom||i.target.parentElement==this.dom||i.target.classList.contains("item")||i.target.parentElement.classList.contains("item")||this.hideAll()},this._oncontextmenu=i=>{i.preventDefault(),i.target==this.dom||i.target.parentElement==this.dom||i.target.classList.contains("item")||i.target.parentElement.classList.contains("item")||(this.hideAll(),this.show(i.clientX,i.clientY))},this._oncontextmenu_keydown=i=>{i.keyCode==93&&(i.preventDefault(),this.hideAll(),this.show(i.clientX,i.clientY))},this._onblur=()=>{this.hideAll()}}getMenuDom(){const e=document.createElement("div");e.classList.add("context");for(const n of this.items)e.appendChild(this.itemToDomEl(n));return e}itemToDomEl(e){const n=document.createElement("div");if(e===null)return n.classList="separator",n;e.hasOwnProperty("color")&&/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.color.toString())&&(n.style.cssText="color: ".concat(e.color)),n.classList.add("item");const i=document.createElement("span");i.classList="label",i.innerText=e.hasOwnProperty("text")?e.text.toString():"",n.appendChild(i),e.hasOwnProperty("disabled")&&e.disabled?n.classList.add("disabled"):n.classList.add("enabled");const o=document.createElement("span");if(o.classList="hotkey",o.innerText=e.hasOwnProperty("hotkey")?e.hotkey.toString():"",n.appendChild(o),e.hasOwnProperty("subitems")&&Array.isArray(e.subitems)&&e.subitems.length>0){const l=new Ka(this.container,e.subitems);l.root=!1,l.parent=this;const f=()=>{if(e.hasOwnProperty("disabled")&&e.disabled==1)return;this.hideSubMenus();const A=this.dom.offsetLeft+this.dom.clientWidth+n.offsetLeft,m=this.dom.offsetTop+n.offsetTop;l.shown?l.hide():l.show(A,m)};this.submenus.push(l),n.classList.add("has-subitems"),n.addEventListener("click",f),n.addEventListener("mousemove",f)}else if(e.hasOwnProperty("submenu")&&e.submenu instanceof Ka){const l=e.submenu;l.root=!1,l.parent=this;const f=()=>{if(e.hasOwnProperty("disabled")&&e.disabled==1)return;this.hideSubMenus();const A=this.dom.offsetLeft+this.dom.clientWidth+n.offsetLeft,m=this.dom.offsetTop+n.offsetTop;l.shown?l.hide():l.show(A,m)};this.submenus.push(l),n.classList.add("has-subitems"),n.addEventListener("click",f),n.addEventListener("mousemove",f)}else n.addEventListener("click",()=>{if(this.hideSubMenus(),!n.classList.contains("disabled"))if(e.hasOwnProperty("onclick")&&typeof e.onclick=="function"){const l={handled:!1,item:n,label:i,hotkey:o,items:this.items,data:e};e.onclick(l),l.handled||this.hide()}else this.hide()}),n.addEventListener("mousemove",()=>{this.hideSubMenus()});return n}hideAll(){!this.root||this.parent?this.parent.hide():this.shown&&(this.hideSubMenus(),this.shown=!1,this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hide(){this.dom&&this.shown&&(this.shown=!1,this.hideSubMenus(),this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hideSubMenus(){for(const e of this.submenus)e.shown&&(e.shown=!1,e.container.removeChild(e.dom)),e.hideSubMenus()}show(e,n){this.dom=this.getMenuDom(),this.dom.style.left="".concat(e,"px"),this.dom.style.top="".concat(n,"px"),this.shown=!0,this.container.appendChild(this.dom)}install(){this.container.addEventListener("contextmenu",this._oncontextmenu),this.container.addEventListener("keydown",this._oncontextmenu_keydown),this.container.addEventListener("click",this._onclick),window.addEventListener("blur",this._onblur)}setData(e){this.items=e}uninstall(){this.dom=null,this.container.removeEventListener("keydown",this._oncontextmenu_keydown),this.container.removeEventListener("click",this._onclick),window.removeEventListener("blur",this._onblur)}}for(var rc,Ge=[],oc=0;oc<256;++oc)Ge.push((oc+256).toString(16).slice(1));var M6=new Uint8Array(16);function Q6(){if(!rc&&!(rc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rc(M6)}const Jp={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ie(t,e,n){if(Jp.randomUUID&&!e&&!t)return Jp.randomUUID();var i=(t=t||{}).random||(t.rng||Q6)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=i[o];return e}return function(l,f=0){return(Ge[l[f+0]]+Ge[l[f+1]]+Ge[l[f+2]]+Ge[l[f+3]]+"-"+Ge[l[f+4]]+Ge[l[f+5]]+"-"+Ge[l[f+6]]+Ge[l[f+7]]+"-"+Ge[l[f+8]]+Ge[l[f+9]]+"-"+Ge[l[f+10]]+Ge[l[f+11]]+Ge[l[f+12]]+Ge[l[f+13]]+Ge[l[f+14]]+Ge[l[f+15]]).toLowerCase()}(i)}var bi=(t=>(t.EMPTY="",t.ONE="one",t.MULTI="multiple",t))(bi||{}),Zr=(t=>(t.ONE="selectOne",t.MULTI="selectMultiple",t.CANCEL="selectCancel",t))(Zr||{});const L6={SelectMode:bi,SelectEvent:Zr};function ac(t){return!!p9()&&(g9(t),!0)}function $o(t){return typeof t=="function"?t():I(t)}const qo=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&WorkerGlobalScope;const P6=Object.prototype.toString,Zp=()=>{};function j6(t,e=!0,n){ue()?Lt(t,n):e?t():Qt(t)}function F6(t){var e;const n=$o(t);return(e=n==null?void 0:n.$el)!=null?e:n}const R6=qo?window:void 0,N6=qo?window.document:void 0,t0=qo?window.navigator:void 0;function Ko(...t){let e,n,i,o;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,i,o]=t,e=R6):[e,n,i,o]=t,!e)return Zp;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const l=[],f=()=>{l.forEach(w=>w()),l.length=0},A=Dt(()=>[F6(e),$o(o)],([w,x])=>{if(f(),!w)return;const E=(T=x,P6.call(T)==="[object Object]"?{...x}:x);var T;l.push(...n.flatMap(O=>i.map(k=>((S,Q,R,V)=>(S.addEventListener(Q,R,V),()=>S.removeEventListener(Q,R,V)))(w,O,k,E))))},{immediate:!0,flush:"post"}),m=()=>{A(),f()};return ac(m),m}function e0(t){const e=function(){const n=ct(!1),i=ue();return i&&Lt(()=>{n.value=!0},i),n}();return ut(()=>(e.value,!!t()))}const z6=t=>JSON.stringify(t),V6=t=>JSON.stringify(t),U6=t=>JSON.stringify(Array.from(t)),H6=t=>JSON.stringify(Object.fromEntries(t)),G6=()=>"";function Y6(t,e){const n=ct(""),i=ct();function o(){if(qo)return i.value=new Promise((l,f)=>{try{const A=$o(t);if(A==null)l("");else if(typeof A=="string")l(sc(new Blob([A],{type:"text/plain"})));else if(A instanceof Blob)l(sc(A));else if(A instanceof ArrayBuffer)l(window.btoa(String.fromCharCode(...new Uint8Array(A))));else if(A instanceof HTMLCanvasElement)l(A.toDataURL(e==null?void 0:e.type,e==null?void 0:e.quality));else if(A instanceof HTMLImageElement){const m=A.cloneNode(!1);m.crossOrigin="Anonymous",function(w){return new Promise((x,E)=>{w.complete?x():(w.onload=()=>{x()},w.onerror=E)})}(m).then(()=>{const w=document.createElement("canvas"),x=w.getContext("2d");w.width=m.width,w.height=m.height,x.drawImage(m,0,0,w.width,w.height),l(w.toDataURL(e==null?void 0:e.type,e==null?void 0:e.quality))}).catch(f)}else{if(typeof A=="object"){const m=(e==null?void 0:e.serializer)||function(x){return x?x instanceof Map?H6:x instanceof Set?U6:Array.isArray(x)?z6:V6:G6}(A),w=m(A);return l(sc(new Blob([w],{type:"application/json"})))}f(new Error("target is unsupported types"))}}catch(A){f(A)}}),i.value.then(l=>n.value=l),i.value}return he(t)||typeof t=="function"?Dt(t,o,{immediate:!0}):o(),{base64:n,promise:i,execute:o}}function sc(t){return new Promise((e,n)=>{const i=new FileReader;i.onload=o=>{e(o.target.result)},i.onerror=n,i.readAsDataURL(t)})}function n0(t,e={}){const{controls:n=!1,navigator:i=t0}=e,o=e0(()=>i&&"permissions"in i);let l;const f=typeof t=="string"?{name:t}:t,A=ct(),m=()=>{l&&(A.value=l.state)},w=function(x){let E;function T(){return E||(E=x()),E}return T.reset=async()=>{const O=E;E=void 0,O&&await O},T}(async()=>{if(o.value){if(!l)try{l=await i.permissions.query(f),Ko(l,"change",m),m()}catch(x){A.value="prompt"}return l}});return w(),n?{state:A,isSupported:o,query:w}:A}function W6(t={}){const{navigator:e=t0,read:n=!1,source:i,copiedDuring:o=1500,legacy:l=!1}=t,f=e0(()=>e&&"clipboard"in e),A=n0("clipboard-read"),m=n0("clipboard-write"),w=ut(()=>f.value||l),x=ct(""),E=ct(!1),T=function(k,S,Q={}){const{immediate:R=!0}=Q,V=ct(!1);let b=null;function Y(){b&&(clearTimeout(b),b=null)}function rt(){V.value=!1,Y()}function q(...h){Y(),V.value=!0,b=setTimeout(()=>{V.value=!1,b=null,k(...h)},$o(S))}return R&&(V.value=!0,qo&&q()),ac(rt),{isPending:Pr(V),start:q,stop:rt}}(()=>E.value=!1,o);function O(k){return k==="granted"||k==="prompt"}return w.value&&n&&Ko(["copy","cut"],function(){var k,S,Q;f.value&&O(A.value)?e.clipboard.readText().then(R=>{x.value=R}):x.value=(Q=(S=(k=document==null?void 0:document.getSelection)==null?void 0:k.call(document))==null?void 0:S.toString())!=null?Q:""}),{isSupported:w,text:x,copied:E,copy:async function(k=$o(i)){w.value&&k!=null&&(f.value&&O(m.value)?await e.clipboard.writeText(k):function(S){const Q=document.createElement("textarea");Q.value=S!=null?S:"",Q.style.position="absolute",Q.style.opacity="0",document.body.appendChild(Q),Q.select(),document.execCommand("copy"),Q.remove()}(k),x.value=k,E.value=!0,T.start())}}}const X6={multiple:!0,accept:"*",reset:!1,directory:!1};function $6(t={}){const{document:e=N6}=t,n=ct(null),{on:i,trigger:o}=function(){const A=new Set,m=w=>{A.delete(w)};return{on:w=>{A.add(w);const x=()=>m(w);return ac(x),{off:x}},off:m,trigger:(...w)=>Promise.all(Array.from(A).map(x=>x(...w)))}}();let l;e&&(l=e.createElement("input"),l.type="file",l.onchange=A=>{const m=A.target;n.value=m.files,o(n.value)});const f=()=>{n.value=null,l&&l.value&&(l.value="",o(null))};return{files:Pr(n),open:A=>{if(!l)return;const m={...X6,...t,...A};var w,x;l.multiple=m.multiple,l.accept=m.accept,l.webkitdirectory=m.directory,w=m,x="capture",Object.prototype.hasOwnProperty.call(w,x)&&(l.capture=m.capture),m.reset&&f(),l.click()},reset:f,onChange:i}}function q6(t,e={}){const n=function(...rt){if(rt.length!==1)return v9(...rt);const q=rt[0];return typeof q=="function"?Pr(A9(()=>({get:q,set:Zp}))):ct(q)}(t),{threshold:i=50,onSwipe:o,onSwipeEnd:l,onSwipeStart:f,disableTextSelect:A=!1}=e,m=Zt({x:0,y:0}),w=Zt({x:0,y:0}),x=(rt,q)=>{w.x=rt,w.y=q},E=ut(()=>m.x-w.x),T=ut(()=>m.y-w.y),{max:O,abs:k}=Math,S=ut(()=>O(k(E.value),k(T.value))>=i),Q=ct(!1),R=ct(!1),V=ut(()=>S.value?k(E.value)>k(T.value)?E.value>0?"left":"right":T.value>0?"up":"down":"none"),b=rt=>{var q,h,s;const u=rt.buttons===0,d=rt.buttons===1;return(s=(h=(q=e.pointerTypes)==null?void 0:q.includes(rt.pointerType))!=null?h:u||d)==null||s},Y=[Ko(t,"pointerdown",rt=>{if(!b(rt))return;R.value=!0;const q=rt.target;q==null||q.setPointerCapture(rt.pointerId);const{clientX:h,clientY:s}=rt;((u,d)=>{m.x=u,m.y=d})(h,s),x(h,s),f==null||f(rt)}),Ko(t,"pointermove",rt=>{if(!b(rt)||!R.value)return;const{clientX:q,clientY:h}=rt;x(q,h),!Q.value&&S.value&&(Q.value=!0),Q.value&&(o==null||o(rt))}),Ko(t,"pointerup",rt=>{b(rt)&&(Q.value&&(l==null||l(rt,V.value)),R.value=!1,Q.value=!1)})];return j6(()=>{var rt,q,h,s,u,d,r,a;(q=(rt=n.value)==null?void 0:rt.style)==null||q.setProperty("touch-action","none"),A&&((s=(h=n.value)==null?void 0:h.style)==null||s.setProperty("-webkit-user-select","none"),(d=(u=n.value)==null?void 0:u.style)==null||d.setProperty("-ms-user-select","none"),(a=(r=n.value)==null?void 0:r.style)==null||a.setProperty("user-select","none"))}),{isSwiping:Pr(Q),direction:Pr(V),posStart:Pr(m),posEnd:Pr(w),distanceX:E,distanceY:T,stop:()=>Y.forEach(rt=>rt())}}function i0(t){return Y6(t).promise.value}function lc(t){return new Promise(e=>{const{onChange:n,open:i}=$6(t);n(o=>{e(o)}),i()})}const cc=(t,e)=>W6({source:t,...e}).copy();function to(t,e){const n=document.createElement("a");n.href=t,n.download="".concat(Ie(),".").concat(e),document.body.appendChild(n),n.click(),n.remove()}function r0(t,e,n,i,o,l,f){f!==void 0&&(t.save(),t.translate(e,n),t.rotate(f),t.drawImage(i,-o/2,-l/2,o,l),t.restore())}const Jo=t=>t instanceof fabric.Group,o0=t=>t instanceof fabric.ActiveSelection;function a0(t){return new Promise(e=>{const n=new FileReader;n.addEventListener("load",()=>{e(n.result)}),n.readAsDataURL(t)})}const zi={getImgStr:i0,downFile:to,selectFiles:lc,insertImgFile:function(t){return new Promise(e=>{const n=document.createElement("img");n.src=t,document.body.appendChild(n),n.onload=()=>{e(n)}})},clipboardText:cc,drawImg:r0,isImage:t=>t instanceof fabric.Image,isGroup:Jo,isIText:t=>t instanceof fabric.IText,isActiveSelection:o0,blobToBase64:a0,base64ToBlob:function(t){var f;if(!t)return null;const e=t.split(","),n=(f=e[0])==null?void 0:f.match(/:(.*?);/)[1],i=window.atob(e[1]),o=new ArrayBuffer(i.length),l=new Uint8Array(o);for(let A=0;A<i.length;A++)l[A]=i.charCodeAt(A);return[new Blob([o],{type:n}),n.slice(6)]}};function s0(t){t&&t.forEach(e=>{e.objects?s0(e.objects):e.type==="text"&&(e.type="textbox")})}class Ja{constructor(e,n){vt(this,"canvas");vt(this,"editor");vt(this,"selectedMode");this.canvas=e,this.editor=n,this.selectedMode=bi.EMPTY,this._initSelectEvent()}_initSelectEvent(){this.canvas.on("selection:created",()=>this._emitSelectEvent()),this.canvas.on("selection:updated",()=>this._emitSelectEvent()),this.canvas.on("selection:cleared",()=>this._emitSelectEvent())}_emitSelectEvent(){if(!this.canvas)throw TypeError("\u8FD8\u672A\u521D\u59CB\u5316");const e=this.canvas.getActiveObjects().filter(n=>!(n instanceof st.fabric.GuideLine));e&&e.length===1?(this.selectedMode=bi.ONE,this.editor.emit(Zr.ONE,e)):e&&e.length>1?(this.selectedMode=bi.MULTI,this.editor.emit(Zr.MULTI,e)):this.editor.emit(Zr.CANCEL)}getSelectMode(){return String(this.selectedMode)}insert(e){lc({accept:".json"}).then(n=>{if(n&&n.length>0){const i=n[0],o=new FileReader;o.readAsText(i,"UTF-8"),o.onload=()=>{this.loadJSON(o.result,e)}}})}renderITextPath(e){e.forEach(n=>{const i=this.canvas.getObjects().find(o=>o.id===n.id);i&&st.fabric.Path.fromObject(n.path,o=>{i.set("path",o)})})}async loadJSON(e,n){const i=typeof e=="string"?JSON.parse(e):e,o=[];i.objects.forEach(f=>{!f.id&&(f.id=Ie()),f.type==="i-text"&&f.path&&(o.push({id:f.id,path:f.path}),f.path=null)});const l=await this._transform(i);e=JSON.stringify(l),this.editor.hooksEntity.hookImportBefore.callAsync(e,()=>{this.canvas.loadFromJSON(e,()=>{this.renderITextPath(o),this.canvas.renderAll(),this.editor.hooksEntity.hookImportAfter.callAsync(e,()=>{var f;(f=this.editor)!=null&&f.updateDrawStatus&&typeof this.editor.updateDrawStatus=="function"&&this.editor.updateDrawStatus(!!i.overlayImage),this.canvas.renderAll(),n&&n(),this.editor.emit("loadJson")})})})}async _transform(e){if(await this.promiseCallAsync(e),e.objects){const n=e.objects.map(i=>this._transform(i));await Promise.all(n)}return e}promiseCallAsync(e){return new Promise(n=>{this.editor.hooksEntity.hookTransform.callAsync(e,()=>{n(e)})})}getJson(){const e=this.getExtensionKey();return this.canvas.toJSON(e)}getExtensionKey(){return["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension","verticalAlign"]}dragAddItem(e,n){if(n){const{left:o,top:l}=this.canvas.getSelectionElement().getBoundingClientRect();if(n.x<o||n.y<l||e.width===void 0)return;const f={x:n.x-o,y:n.y-l},A=this.canvas.restorePointerVpt(f);e.left=A.x-e.width/2,e.top=A.y}const{width:i}=this._getSaveOption();i&&e.scaleToWidth(i/2),this.canvas.add(e),this.canvas.setActiveObject(e),!n&&this.editor.position("center"),this.canvas.requestRenderAll()}clipboard(){const e=this.getJson();return cc(JSON.stringify(e,null,"	"))}async clipboardBase64(){const e=await this.preview();return cc(e)}async saveJson(){const e=this.getJson();await s0(e.objects),to("data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e,null,"	"))),"json")}saveSvg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",()=>{const{fontOption:e,svgOption:n}=this._getSaveSvgOption();st.fabric.fontPaths={...e};const i=this.canvas.toSVG(n),o="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(i));this.editor.hooksEntity.hookSaveAfter.callAsync(o,()=>{to(o,"svg")})})}saveImg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",()=>{const e=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]);const n=this.canvas.toDataURL(e);this.editor.hooksEntity.hookSaveAfter.callAsync(n,()=>{to(n,"png")})})}preview(){return new Promise(e=>{this.editor.hooksEntity.hookSaveBefore.callAsync("",()=>{const n=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]),this.canvas.renderAll();const i=this.canvas.toDataURL(n);this.editor.hooksEntity.hookSaveAfter.callAsync(i,()=>{e(i)})})})}_getSaveSvgOption(){const e=this.canvas.getObjects().find(w=>w.id==="workspace");let n=this.canvas.getObjects().filter(w=>w.type=="textbox").map(w=>w.fontFamily);n=Array.from(new Set(n));const i=this.editor.getPlugin("FontPlugin").cacheList,o={};for(const w of n){const x=i.find(E=>E.name===w);o[w]=x.file}const{left:l,top:f,width:A,height:m}=e;return{fontOption:o,svgOption:{width:A,height:m,viewBox:{x:l,y:f,width:A,height:m}}}}_getSaveOption(){const e=this.canvas.getObjects().find(f=>f.id==="workspace"),{left:n,top:i,width:o,height:l}=e;return{name:"New Image",format:"png",quality:1,width:o,height:l,left:n,top:i}}clear(){var e;this.canvas.getObjects().forEach(n=>{n.id!=="workspace"&&this.canvas.remove(n)}),(e=this.editor)==null||e.setWorkspaseBg("#fff"),this.canvas.discardActiveObject(),this.canvas.renderAll()}destroy(){}}vt(Ja,"pluginName","ServersPlugin"),vt(Ja,"apis",["insert","loadJSON","getJson","dragAddItem","clipboard","clipboardBase64","saveJson","saveSvg","saveImg","clear","preview","getSelectMode","getExtensionKey"]),vt(Ja,"events",[bi.ONE,bi.MULTI,Zr.CANCEL]);var uc={};uc.deprecate=(t,e)=>{let n=!0;return function(){return n&&(n=!1),t.apply(this,arguments)}};const K6=uc.deprecate(()=>{},"Hook.context is deprecated and will be removed"),l0=function(...t){return this.call=this._createCall("sync"),this.call(...t)},c0=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},u0=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};let h0=class{constructor(t=[],e=void 0){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=l0,this.call=l0,this._callAsync=c0,this.callAsync=c0,this._promise=u0,this.promise=u0,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,n){if(typeof e=="string")e={name:e.trim()};else if(typeof e!="object"||e===null)throw new Error("Invalid tap options");if(typeof e.name!="string"||e.name==="")throw new Error("Missing name for tap");e.context!==void 0&&K6(),e=Object.assign({type:t,fn:n},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const n=e.register(t);n!==void 0&&(t=n)}return t}withOptions(t){const e=n=>Object.assign({},t,typeof n=="string"?{name:n}:n);return{name:this.name,tap:(n,i)=>this.tap(e(n),i),tapAsync:(n,i)=>this.tapAsync(e(n),i),tapPromise:(n,i)=>this.tapPromise(e(n),i),intercept:n=>this.intercept(n),isUsed:()=>this.isUsed(),withOptions:n=>this.withOptions(e(n))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){let e;this._resetCompilation(),typeof t.before=="string"?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let n=0;typeof t.stage=="number"&&(n=t.stage);let i=this.taps.length;for(;i>0;){i--;const o=this.taps[i];this.taps[i+1]=o;const l=o.stage||0;if(e){if(e.has(o.name)){e.delete(o.name);continue}if(e.size>0)continue}if(!(l>n)){i++;break}}this.taps[i]=t}};Object.setPrototypeOf(h0.prototype,null);var J6=h0,ei=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){let e;switch(this.init(t),this.options.type){case"sync":e=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:l=>"throw ".concat(l,";\n"),onResult:l=>"return ".concat(l,";\n"),resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:l=>"_callback(".concat(l,");\n"),onResult:l=>"_callback(null, ".concat(l,");\n"),onDone:()=>"_callback();\n"}));break;case"promise":let n=!1;const i=this.contentWithInterceptors({onError:l=>(n=!0,"_error(".concat(l,");\n")),onResult:l=>"_resolve(".concat(l,");\n"),onDone:()=>"_resolve();\n"});let o="";o+='"use strict";\n',o+=this.header(),o+="return new Promise((function(_resolve, _reject) {\n",n&&(o+="var _sync = true;\n",o+="function _error(_err) {\n",o+="if(_sync)\n",o+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",o+="else\n",o+="_reject(_err);\n",o+="};\n"),o+=i,n&&(o+="_sync = false;\n"),o+="}));\n",e=new Function(this.args(),o)}return this.deinit(),e}setup(t,e){t._x=e.taps.map(n=>n.fn)}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,n=t.onResult,i=t.onDone;let o="";for(let l=0;l<this.options.interceptors.length;l++){const f=this.options.interceptors[l];f.call&&(o+="".concat(this.getInterceptor(l),".call(").concat(this.args({before:f.context?"_context":void 0}),");\n"))}return o+=this.content(Object.assign(t,{onError:e&&(l=>{let f="";for(let A=0;A<this.options.interceptors.length;A++)this.options.interceptors[A].error&&(f+="".concat(this.getInterceptor(A),".error(").concat(l,");\n"));return f+=e(l),f}),onResult:n&&(l=>{let f="";for(let A=0;A<this.options.interceptors.length;A++)this.options.interceptors[A].result&&(f+="".concat(this.getInterceptor(A),".result(").concat(l,");\n"));return f+=n(l),f}),onDone:i&&(()=>{let l="";for(let f=0;f<this.options.interceptors.length;f++)this.options.interceptors[f].done&&(l+="".concat(this.getInterceptor(f),".done();\n"));return l+=i(),l})})),o}return this.content(t)}header(){let t="";return this.needContext()?t+="var _context = {};\n":t+="var _context;\n",t+="var _x = this._x;\n",this.options.interceptors.length>0&&(t+="var _taps = this.taps;\n",t+="var _interceptors = this.interceptors;\n"),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:n,onDone:i,rethrowIfPossible:o}){let l="",f=!1;for(let m=0;m<this.options.interceptors.length;m++){const w=this.options.interceptors[m];w.tap&&(f||(l+="var _tap".concat(t," = ").concat(this.getTap(t),";\n"),f=!0),l+="".concat(this.getInterceptor(m),".tap(").concat(w.context?"_context, ":"","_tap").concat(t,");\n"))}l+="var _fn".concat(t," = ").concat(this.getTapFn(t),";\n");const A=this.options.taps[t];switch(A.type){case"sync":o||(l+="var _hasError".concat(t," = false;\n"),l+="try {\n"),l+=n?"var _result".concat(t," = _fn").concat(t,"(").concat(this.args({before:A.context?"_context":void 0}),");\n"):"_fn".concat(t,"(").concat(this.args({before:A.context?"_context":void 0}),");\n"),o||(l+="} catch(_err) {\n",l+="_hasError".concat(t," = true;\n"),l+=e("_err"),l+="}\n",l+="if(!_hasError".concat(t,") {\n")),n&&(l+=n("_result".concat(t))),i&&(l+=i()),o||(l+="}\n");break;case"async":let m="";m+=n?"(function(_err".concat(t,", _result").concat(t,") {\n"):"(function(_err".concat(t,") {\n"),m+="if(_err".concat(t,") {\n"),m+=e("_err".concat(t)),m+="} else {\n",n&&(m+=n("_result".concat(t))),i&&(m+=i()),m+="}\n",m+="})",l+="_fn".concat(t,"(").concat(this.args({before:A.context?"_context":void 0,after:m}),");\n");break;case"promise":l+="var _hasResult".concat(t," = false;\n"),l+="var _promise".concat(t," = _fn").concat(t,"(").concat(this.args({before:A.context?"_context":void 0}),");\n"),l+="if (!_promise".concat(t," || !_promise").concat(t,".then)\n"),l+="  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise".concat(t," + ')');\n"),l+="_promise".concat(t,".then((function(_result").concat(t,") {\n"),l+="_hasResult".concat(t," = true;\n"),n&&(l+=n("_result".concat(t))),i&&(l+=i()),l+="}), function(_err".concat(t,") {\n"),l+="if(_hasResult".concat(t,") throw _err").concat(t,";\n"),l+=e("_err".concat(t)),l+="});\n"}return l}callTapsSeries({onError:t,onResult:e,resultReturns:n,onDone:i,doneReturns:o,rethrowIfPossible:l}){if(this.options.taps.length===0)return i();const f=this.options.taps.findIndex(E=>E.type!=="sync"),A=n||o;let m="",w=i,x=0;for(let E=this.options.taps.length-1;E>=0;E--){const T=E;w!==i&&(this.options.taps[T].type!=="sync"||x++>20)&&(x=0,m+="function _next".concat(T,"() {\n"),m+=w(),m+="}\n",w=()=>"".concat(A?"return ":"","_next").concat(T,"();\n"));const O=w,k=Q=>Q?"":i(),S=this.callTap(T,{onError:Q=>t(T,Q,O,k),onResult:e&&(Q=>e(T,Q,O,k)),onDone:!e&&O,rethrowIfPossible:l&&(f<0||T<f)});w=()=>S}return m+=w(),m}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:n}){if(this.options.taps.length===0)return e();const i=this.options.taps.every(l=>l.type==="sync");let o="";i||(o+="var _looper = (function() {\n",o+="var _loopAsync = false;\n"),o+="var _loop;\n",o+="do {\n",o+="_loop = false;\n";for(let l=0;l<this.options.interceptors.length;l++){const f=this.options.interceptors[l];f.loop&&(o+="".concat(this.getInterceptor(l),".loop(").concat(this.args({before:f.context?"_context":void 0}),");\n"))}return o+=this.callTapsSeries({onError:t,onResult:(l,f,A,m)=>{let w="";return w+="if(".concat(f," !== undefined) {\n"),w+="_loop = true;\n",i||(w+="if(_loopAsync) _looper();\n"),w+=m(!0),w+="} else {\n",w+=A(),w+="}\n",w},onDone:e&&(()=>{let l="";return l+="if(!_loop) {\n",l+=e(),l+="}\n",l}),rethrowIfPossible:n&&i}),o+="} while(_loop);\n",i||(o+="_loopAsync = true;\n",o+="});\n",o+="_looper();\n"),o}callTapsParallel({onError:t,onResult:e,onDone:n,rethrowIfPossible:i,onTap:o=(l,f)=>f()}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:n,rethrowIfPossible:i});let l="";l+="do {\n",l+="var _counter = ".concat(this.options.taps.length,";\n"),n&&(l+="var _done = (function() {\n",l+=n(),l+="});\n");for(let f=0;f<this.options.taps.length;f++){const A=()=>n?"if(--_counter === 0) _done();\n":"--_counter;",m=w=>w||!n?"_counter = 0;\n":"_counter = 0;\n_done();\n";l+="if(_counter <= 0) break;\n",l+=o(f,()=>this.callTap(f,{onError:w=>{let x="";return x+="if(_counter > 0) {\n",x+=t(f,w,A,m),x+="}\n",x},onResult:e&&(w=>{let x="";return x+="if(_counter > 0) {\n",x+=e(f,w,A,m),x+="}\n",x}),onDone:!e&&(()=>A()),rethrowIfPossible:i}),A,m)}return l+="} while(false);\n",l}args({before:t,after:e}={}){let n=this._args;return t&&(n=[t].concat(n)),e&&(n=n.concat(e)),n.length===0?"":n.join(", ")}getTapFn(t){return"_x[".concat(t,"]")}getTap(t){return"_taps[".concat(t,"]")}getInterceptor(t){return"_interceptors[".concat(t,"]")}};const Z6=ei;new class extends Z6{content({onError:t,onDone:e,rethrowIfPossible:n}){return this.callTapsSeries({onError:(i,o)=>t(o),onDone:e,rethrowIfPossible:n})}};const tx=ei;new class extends tx{content({onError:t,onResult:e,resultReturns:n,onDone:i,rethrowIfPossible:o}){return this.callTapsSeries({onError:(l,f)=>t(f),onResult:(l,f,A)=>"if(".concat(f," !== undefined) {\n").concat(e(f),";\n} else {\n").concat(A(),"}\n"),resultReturns:n,onDone:i,rethrowIfPossible:o})}};const ex=ei;new class extends ex{content({onError:t,onResult:e,resultReturns:n,rethrowIfPossible:i}){return this.callTapsSeries({onError:(o,l)=>t(l),onResult:(o,l,f)=>{let A="";return A+="if(".concat(l," !== undefined) {\n"),A+="".concat(this._args[0]," = ").concat(l,";\n"),A+="}\n",A+=f(),A},onDone:()=>e(this._args[0]),doneReturns:n,rethrowIfPossible:i})}};const nx=ei;new class extends nx{content({onError:t,onDone:e,rethrowIfPossible:n}){return this.callTapsLooping({onError:(i,o)=>t(o),onDone:e,rethrowIfPossible:n})}};const ix=ei;new class extends ix{content({onError:t,onDone:e}){return this.callTapsParallel({onError:(n,i,o,l)=>t(i)+l(!0),onDone:e})}};const rx=ei;new class extends rx{content({onError:t,onResult:e,onDone:n}){let i="";return i+="var _results = new Array(".concat(this.options.taps.length,");\n"),i+="var _checkDone = function() {\n",i+="for(var i = 0; i < _results.length; i++) {\n",i+="var item = _results[i];\n",i+="if(item === undefined) return false;\n",i+="if(item.result !== undefined) {\n",i+=e("item.result"),i+="return true;\n",i+="}\n",i+="if(item.error) {\n",i+=t("item.error"),i+="return true;\n",i+="}\n",i+="}\n",i+="return false;\n",i+="}\n",i+=this.callTapsParallel({onError:(o,l,f,A)=>{let m="";return m+="if(".concat(o," < _results.length && ((_results.length = ").concat(o+1,"), (_results[").concat(o,"] = { error: ").concat(l," }), _checkDone())) {\n"),m+=A(!0),m+="} else {\n",m+=f(),m+="}\n",m},onResult:(o,l,f,A)=>{let m="";return m+="if(".concat(o," < _results.length && (").concat(l," !== undefined && (_results.length = ").concat(o+1,"), (_results[").concat(o,"] = { result: ").concat(l," }), _checkDone())) {\n"),m+=A(!0),m+="} else {\n",m+=f(),m+="}\n",m},onTap:(o,l,f,A)=>{let m="";return o>0&&(m+="if(".concat(o," >= _results.length) {\n"),m+=f(),m+="} else {\n"),m+=l(),o>0&&(m+="}\n"),m},onDone:n}),i}};const ox=J6,ax=ei,d0=new class extends ax{content({onError:t,onDone:e}){return this.callTapsSeries({onError:(n,i,o,l)=>t(i)+l(!0),onDone:e})}},sx=function(t){return d0.setup(this,t),d0.create(t)};function hc(t=[],e=void 0){const n=new ox(t,e);return n.constructor=hc,n.compile=sx,n._call=void 0,n.call=void 0,n}hc.prototype=null;var lx=hc;const cx=ei;new class extends cx{content({onError:t,onResult:e,resultReturns:n,onDone:i}){return this.callTapsSeries({onError:(o,l,f,A)=>t(l)+A(!0),onResult:(o,l,f)=>"if(".concat(l," !== undefined) {\n").concat(e(l),"\n} else {\n").concat(f(),"}\n"),resultReturns:n,onDone:i})}};const ux=ei;new class extends ux{content({onError:t,onDone:e}){return this.callTapsLooping({onError:(n,i,o,l)=>t(i)+l(!0),onDone:e})}};const hx=ei;new class extends hx{content({onError:t,onResult:e,onDone:n}){return this.callTapsSeries({onError:(i,o,l,f)=>t(o)+f(!0),onResult:(i,o,l)=>{let f="";return f+="if(".concat(o," !== undefined) {\n"),f+="".concat(this._args[0]," = ").concat(o,";\n"),f+="}\n",f+=l(),f},onDone:()=>e(this._args[0])})}};const dc=uc,dx=(t,e)=>e;class fc{constructor(e,n=void 0){this._map=new Map,this.name=n,this._factory=e,this._interceptors=[]}get(e){return this._map.get(e)}for(e){const n=this.get(e);if(n!==void 0)return n;let i=this._factory(e);const o=this._interceptors;for(let l=0;l<o.length;l++)i=o[l].factory(e,i);return this._map.set(e,i),i}intercept(e){this._interceptors.push(Object.assign({factory:dx},e))}}fc.prototype.tap=dc.deprecate(function(t,e,n){return this.for(t).tap(e,n)},"HookMap#tap(key,\u2026) is deprecated. Use HookMap#for(key).tap(\u2026) instead."),fc.prototype.tapAsync=dc.deprecate(function(t,e,n){return this.for(t).tapAsync(e,n)},"HookMap#tapAsync(key,\u2026) is deprecated. Use HookMap#for(key).tapAsync(\u2026) instead."),fc.prototype.tapPromise=dc.deprecate(function(t,e,n){return this.for(t).tapPromise(e,n)},"HookMap#tapPromise(key,\u2026) is deprecated. Use HookMap#for(key).tapPromise(\u2026) instead.");var fx=lx;class px extends D6{constructor(){super(...arguments);vt(this,"canvas",null);vt(this,"contextMenu",null);vt(this,"pluginMap",{});vt(this,"customEvents",[]);vt(this,"customApis",[]);vt(this,"hooks",["hookImportBefore","hookImportAfter","hookSaveBefore","hookSaveAfter","hookTransform"]);vt(this,"hooksEntity",{})}init(n){this.canvas=n,this._initContextMenu(),this._bindContextMenu(),this._initActionHooks(),this._initServersPlugin(),this.Utils=zi}get fabricCanvas(){return this.canvas}use(n,i){if(this._checkPlugin(n)&&this.canvas){this._saveCustomAttr(n);const o=new n(this.canvas,this,i||{});o.pluginName=n.pluginName,this.pluginMap[n.pluginName]=o,this._bindingHooks(o),this._bindingHotkeys(o),this._bindingApis(o)}return this}destory(){this.canvas=null,this.contextMenu=null,this.pluginMap={},this.customEvents=[],this.customApis=[],this.hooksEntity={}}getPlugin(n){if(this.pluginMap[n])return this.pluginMap[n]}_checkPlugin(n){const{pluginName:i,events:o=[],apis:l=[]}=n;if(this.pluginMap[i])throw new Error(i+"\u63D2\u4EF6\u91CD\u590D\u521D\u59CB\u5316");return o.forEach(f=>{if(this.customEvents.find(A=>A===f))throw new Error(i+"\u63D2\u4EF6\u4E2D"+f+"\u91CD\u590D")}),l.forEach(f=>{if(this.customApis.find(A=>A===f))throw new Error(i+"\u63D2\u4EF6\u4E2D"+f+"\u91CD\u590D")}),!0}_bindingHooks(n){this.hooks.forEach(i=>{const o=n[i];o&&this.hooksEntity[i].tapPromise(n.pluginName+i,function(){const l=o.apply(n,[...arguments]);return l instanceof Promise?l:Promise.resolve(l)})})}_bindingHotkeys(n){var i;(i=n==null?void 0:n.hotkeys)==null||i.forEach(o=>{yi(o,{keyup:!0},l=>{n.hotkeyEvent&&n.hotkeyEvent(o,l)})})}_saveCustomAttr(n){const{events:i=[],apis:o=[]}=n;this.customApis=this.customApis.concat(o),this.customEvents=this.customEvents.concat(i)}_bindingApis(n){const{apis:i=[]}=n.constructor||{};i.forEach(o=>{this[o]=function(){return n[o].apply(n,[...arguments])}})}_bindContextMenu(){this.canvas&&this.canvas.on("mouse:down",n=>{if(n.button===3){let i=[];Object.keys(this.pluginMap).forEach(o=>{const l=this.pluginMap[o],f=l.contextMenu&&l.contextMenu();f&&(i=i.concat(f))}),this._renderMenu(n,i)}})}_renderMenu(n,i){i.length!==0&&this.contextMenu&&(this.contextMenu.hideAll(),this.contextMenu.setData(i),this.contextMenu.show(n.e.clientX,n.e.clientY))}_initActionHooks(){this.hooks.forEach(n=>{this.hooksEntity[n]=new fx(["data"])})}_initContextMenu(){this.contextMenu=new Ka(this.canvas.wrapperEl,[]),this.contextMenu.install()}_initServersPlugin(){this.use(Ja)}off(n,i){return i?super.off(n,i):this}}class Za{constructor(e,n){vt(this,"defautOption",{});vt(this,"hotkeys",["space"]);vt(this,"dragMode",!1);this.canvas=e,this.editor=n,this.dragMode=!1,this.init()}init(){this._initDring()}startDring(){this.dragMode=!0,this.canvas.setCursor("grab"),this.editor.emit("startDring"),this.canvas.renderAll()}endDring(){this.dragMode=!1,this.canvas.setCursor("default"),this.canvas.isDragging=!1,this.editor.emit("endDring"),this.canvas.renderAll()}_initDring(){const e=this;this.canvas.on("mouse:down",function(n){const i=n.e;(i.altKey||e.dragMode)&&(e.canvas.setCursor("grabbing"),e.canvas.discardActiveObject(),e._setDring(),this.selection=!1,this.isDragging=!0,this.lastPosX=i.clientX,this.lastPosY=i.clientY,this.requestRenderAll())}),this.canvas.on("mouse:move",function(n){if(e.dragMode&&e.canvas.setCursor("grab"),this.isDragging){e.canvas.discardActiveObject(),e.canvas.setCursor("grabbing");const{e:i}=n;if(!this.viewportTransform)return;const o=this.viewportTransform;o[4]+=i.clientX-this.lastPosX,o[5]+=i.clientY-this.lastPosY,this.lastPosX=i.clientX,this.lastPosY=i.clientY,this.requestRenderAll()}}),this.canvas.on("mouse:up",function(){this.viewportTransform&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,this.getObjects().forEach(n=>{n.id!=="workspace"&&n.hasControls&&(n.selectable=!0)}),e.dragMode&&e.canvas.setCursor("grab"),this.requestRenderAll())})}_setDring(){this.canvas.selection=!1,this.canvas.getObjects().forEach(e=>{e.selectable=!1}),this.canvas.requestRenderAll()}destroy(){}hotkeyEvent(e,n){n.code==="Space"&&n.type==="keydown"&&(this.dragMode||this.startDring()),n.code==="Space"&&n.type==="keyup"&&this.endDring()}}vt(Za,"pluginName","DringPlugin"),vt(Za,"events",["startDring","endDring"]),vt(Za,"apis",["startDring","endDring"]);class f0{constructor(e,n){vt(this,"defautOption",{color:"rgba(255,95,95,1)",width:1});vt(this,"dragMode",!1);this.canvas=e,this.editor=n,this.dragMode=!1,this.init()}init(){const{canvas:e}=this,n=e.getSelectionContext(),i=this;let o,l=1;function f(E){A(E.x1>E.x2?E.x2:E.x1,E.y+.5,E.x2>E.x1?E.x2:E.x1,E.y+.5)}function A(E,T,O,k){o!=null&&(n.moveTo(E*l+o[4],T*l+o[5]),n.lineTo(O*l+o[4],k*l+o[5]))}function m(E,T){E=Math.round(E),T=Math.round(T);for(let O=E-4,k=E+4;O<=k;O++)if(O===T)return!0;return!1}const w=[],x=[];e.on("mouse:down",()=>{o=e.viewportTransform,l=e.getZoom()}),e.on("object:moving",E=>{if(o===void 0||E.target===void 0)return;const T=E.target,O=e.getObjects(),k=T.getCenterPoint(),S=k.x,Q=k.y,R=T.getBoundingRect(),V=R.height/o[3],b=R.width/o[0];let Y=!1,rt=!1;if(e._currentTransform){for(let q=O.length;q--;){if(O[q]===T||T instanceof st.fabric.GuideLine&&O[q]instanceof st.fabric.GuideLine)continue;const h=O[q].getCenterPoint(),s=h.x,u=h.y,d=O[q].getBoundingRect(),r=d.height/o[3],a=d.width/o[0];m(s,S)&&(rt=!0,w.push({x:s,y1:u<Q?u-r/2-5:u+r/2+5,y2:Q>u?Q+V/2+5:Q-V/2-5}),T.setPositionByOrigin(new st.fabric.Point(s,Q),"center","center")),m(s-a/2,S-b/2)&&(rt=!0,w.push({x:s-a/2,y1:u<Q?u-r/2-5:u+r/2+5,y2:Q>u?Q+V/2+5:Q-V/2-5}),T.setPositionByOrigin(new st.fabric.Point(s-a/2+b/2,Q),"center","center")),m(s+a/2,S+b/2)&&(rt=!0,w.push({x:s+a/2,y1:u<Q?u-r/2-5:u+r/2+5,y2:Q>u?Q+V/2+5:Q-V/2-5}),T.setPositionByOrigin(new st.fabric.Point(s+a/2-b/2,Q),"center","center")),m(u,Q)&&(Y=!0,x.push({y:u,x1:s<S?s-a/2-5:s+a/2+5,x2:S>s?S+b/2+5:S-b/2-5}),T.setPositionByOrigin(new st.fabric.Point(S,u),"center","center")),m(u-r/2,Q-V/2)&&(Y=!0,x.push({y:u-r/2,x1:s<S?s-a/2-5:s+a/2+5,x2:S>s?S+b/2+5:S-b/2-5}),T.setPositionByOrigin(new st.fabric.Point(S,u-r/2+V/2),"center","center")),m(u+r/2,Q+V/2)&&(Y=!0,x.push({y:u+r/2,x1:s<S?s-a/2-5:s+a/2+5,x2:S>s?S+b/2+5:S-b/2-5}),T.setPositionByOrigin(new st.fabric.Point(S,u+r/2-V/2),"center","center"))}Y||(x.length=0),rt||(w.length=0)}}),e.on("before:render",()=>{if(e.contextTop!==null)try{e.clearContext(e.contextTop)}catch(E){}}),e.on("after:render",()=>{n.save(),n.beginPath(),n.lineWidth=i.defautOption.width,n.strokeStyle=i.defautOption.color;for(let T=w.length;T--;)A((E=w[T]).x+.5,E.y1>E.y2?E.y2:E.y1,E.x+.5,E.y2>E.y1?E.y2:E.y1);var E;for(let T=x.length;T--;)f(x[T]);n.stroke(),n.restore(),w.length=0,x.length=0}),e.on("mouse:up",()=>{w.length=0,x.length=0,e.renderAll()})}destroy(){}}vt(f0,"pluginName","AlignGuidLinePlugin");const p0="data:image/svg+xml,%3csvg%20width='19'%20height='18'%20viewBox='0%200%2019%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0.996094'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";function ts(t,e,n,i,o,l,f){f!==void 0&&(t.save(),t.translate(e,n),t.rotate(st.fabric.util.degreesToRadians(f)),t.drawImage(i,-o/2,-l/2,o,l),t.restore())}st.fabric.Object.NUM_FRACTION_DIGITS=4;class g0{constructor(e,n){this.canvas=e,this.editor=n,this.init()}init(){(function(){const e=document.createElement("img");function n(i,o,l,f,A){ts(i,o,l,e,25,25,A.angle)}e.src=p0,st.fabric.Object.prototype.controls.tl=new st.fabric.Control({x:-.5,y:-.5,cursorStyleHandler:st.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingEqually,render:n}),st.fabric.Object.prototype.controls.bl=new st.fabric.Control({x:-.5,y:.5,cursorStyleHandler:st.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingEqually,render:n}),st.fabric.Object.prototype.controls.tr=new st.fabric.Control({x:.5,y:-.5,cursorStyleHandler:st.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingEqually,render:n}),st.fabric.Object.prototype.controls.br=new st.fabric.Control({x:.5,y:.5,cursorStyleHandler:st.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingEqually,render:n})})(),function(){const e=document.createElement("img");e.src="data:image/svg+xml,%3csvg%20width='12'%20height='24'%20viewBox='0%200%2012%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='4'%20y='4'%20width='4'%20height='16'%20rx='2'%20fill='white'/%3e%3crect%20x='4.25'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='12'%20height='24'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";const n=document.createElement("img");function i(l,f,A,m,w){ts(l,f,A,e,20,25,w.angle)}function o(l,f,A,m,w){ts(l,f,A,n,25,20,w.angle)}n.src="data:image/svg+xml,%3csvg%20width='24'%20height='12'%20viewBox='0%200%2024%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='20'%20y='4'%20width='4'%20height='16'%20rx='2'%20transform='rotate(90%2020%204)'%20fill='white'/%3e%3crect%20x='19.75'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20transform='rotate(90%2019.75%204.25)'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='24'%20height='12'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",st.fabric.Object.prototype.controls.ml=new st.fabric.Control({x:-.5,y:0,offsetX:-1,cursorStyleHandler:st.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingXOrSkewingY,getActionName:st.fabric.controlsUtils.scaleOrSkewActionName,render:i}),st.fabric.Object.prototype.controls.mr=new st.fabric.Control({x:.5,y:0,offsetX:1,cursorStyleHandler:st.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingXOrSkewingY,getActionName:st.fabric.controlsUtils.scaleOrSkewActionName,render:i}),st.fabric.Object.prototype.controls.mb=new st.fabric.Control({x:0,y:.5,offsetY:1,cursorStyleHandler:st.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingYOrSkewingX,getActionName:st.fabric.controlsUtils.scaleOrSkewActionName,render:o}),st.fabric.Object.prototype.controls.mt=new st.fabric.Control({x:0,y:-.5,offsetY:-1,cursorStyleHandler:st.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:st.fabric.controlsUtils.scalingYOrSkewingX,getActionName:st.fabric.controlsUtils.scaleOrSkewActionName,render:o})}(),function(){const e=document.createElement("img");e.src="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cpath%20d='M10.8047%2011.1242L9.49934%2011.1242L9.49934%209.81885'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.94856%206.72607L8.25391%206.72607L8.25391%208.03142'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.69517%206.92267C10.007%207.03301%2010.2858%207.22054%2010.5055%207.46776C10.7252%207.71497%2010.8787%208.01382%2010.9517%208.33642C11.0247%208.65902%2011.0148%208.99485%2010.9229%209.31258C10.831%209.63031%2010.6601%209.91958%2010.4262%2010.1534L9.49701%2011.0421M8.25792%206.72607L7.30937%207.73554C7.07543%207.96936%206.90454%208.25863%206.81264%208.57636C6.72073%208.89408%206.71081%209.22992%206.78381%209.55251C6.8568%209.87511%207.01032%2010.174%207.23005%2010.4212C7.44978%2010.6684%207.72855%2010.8559%208.04036%2010.9663'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",st.fabric.Object.prototype.controls.mtr=new st.fabric.Control({x:0,y:.5,cursorStyleHandler:st.fabric.controlsUtils.rotationStyleHandler,actionHandler:st.fabric.controlsUtils.rotationWithSnapping,offsetY:30,actionName:"rotate",render:function(n,i,o,l,f){ts(n,i,o,e,40,40,f.angle)}})}(),st.fabric.Object.prototype.set({transparentCorners:!1,borderColor:"#51B9F9",cornerColor:"#FFF",borderScaleFactor:2.5,cornerStyle:"circle",cornerStrokeColor:"#0E98FC",borderOpacityWhenMoving:1})}destroy(){}}vt(g0,"pluginName","ControlsPlugin");class pc{constructor(e,n){this.canvas=e,this.editor=n}center(e,n){const i=e.getCenterPoint();return this.canvas._centerObject(n,i)}centerV(e,n){return this.canvas._centerObject(n,new st.fabric.Point(n.getCenterPoint().x,e.getCenterPoint().y))}centerH(e,n){return this.canvas._centerObject(n,new st.fabric.Point(e.getCenterPoint().x,n.getCenterPoint().y))}position(e){const n=this.canvas.getActiveObject();if(["centerH","center","centerV"].includes(e)&&n){const i=this.canvas.getObjects().find(o=>o.id==="workspace");i&&this[e](i,n),this.canvas.renderAll()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"\u6C34\u5E73\u5782\u76F4\u5C45\u4E2D",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.position("center")}]}destroy(){}}vt(pc,"pluginName","CenterAlignPlugin"),vt(pc,"apis",["centerH","center","position","centerV"]);class gc{constructor(e,n){this.canvas=e,this.editor=n}_getWorkspace(){return this.canvas.getObjects().find(e=>e.id==="workspace")}_workspaceSendToBack(){const e=this._getWorkspace();e&&e.sendToBack()}up(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.bringForward(),this.canvas.renderAll(),this._workspaceSendToBack()}}down(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.sendBackwards(),this.canvas.renderAll(),this._workspaceSendToBack()}}toFront(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.bringToFront(),this.canvas.renderAll(),this._workspaceSendToBack()}}toBack(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.sendToBack(),this.canvas.renderAll(),this._workspaceSendToBack()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"\u56FE\u5C42\u7BA1\u7406",hotkey:"\u276F",subitems:[{text:"\u4E0A\u4E00\u4E2A",hotkey:"",onclick:()=>this.up()},{text:"\u4E0B\u4E00\u4E2A",hotkey:"",onclick:()=>this.down()},{text:"\u7F6E\u9876",hotkey:"",onclick:()=>this.toFront()},{text:"\u7F6E\u5E95",hotkey:"",onclick:()=>this.toBack()}]}]}destroy(){}}vt(gc,"pluginName","LayerPlugin"),vt(gc,"apis",["up","down","toFront","toBack"]);class vc{constructor(e,n){vt(this,"hotkeys",["ctrl+v","ctrl+c"]);vt(this,"cache",null);this.canvas=e,this.editor=n,this.initPaste()}_copyActiveSelection(e){const n=this.canvas,i=this.editor.getExtensionKey();e==null||e.clone(o=>{o.clone(l=>{n.discardActiveObject(),l.left!==void 0&&l.top!==void 0&&(l.canvas=n,l.set({left:l.left+10,top:l.top+10,evented:!0,id:Ie()}),l.forEachObject(f=>{f.id=Ie(),n.add(f)}),l.setCoords(),n.setActiveObject(l),n.requestRenderAll())})},i)}_copyObject(e){const n=this.canvas,i=this.editor.getExtensionKey();e==null||e.clone(o=>{o.left!==void 0&&o.top!==void 0&&(n.discardActiveObject(),o.set({left:o.left+10,top:o.top+10,evented:!0,id:Ie()}),n.add(o),n.setActiveObject(o),n.requestRenderAll())},i)}clone(e){const n=e||this.canvas.getActiveObject();n&&((n==null?void 0:n.type)==="activeSelection"?this._copyActiveSelection(n):this._copyObject(n))}hotkeyEvent(e,n){if(e==="ctrl+c"&&n.type==="keydown"){const i=this.canvas.getActiveObject();this.cache=i,navigator.clipboard.writeText("")}e==="ctrl+v"&&n.type==="keydown"&&setTimeout(()=>{this.cache&&this.clone(this.cache)},0)}contextMenu(){if(this.canvas.getActiveObject())return[{text:"\u590D\u5236",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.clone()}]}destroy(){window.removeEventListener("paste",e=>this.pasteListener(e))}initPaste(){window.addEventListener("paste",e=>this.pasteListener(e))}async pasteListener(e){const n=this.canvas;if(document.activeElement!==document.body)return;e.preventDefault();const i=(e.clipboardData||e.originalEvent.clipboardData).items;for(const o of i)if(o.kind==="file"){const l=o.getAsFile(),f=l.name.split(".").pop();if(!".pdf,.psd,.cdr,.ai,.svg,.jpg,.jpeg,.png,.webp,.json".split(",").includes(".".concat(f)))return;if(f==="svg"){const A=await i0(l);if(!A)throw new Error("file is undefined");st.fabric.loadSVGFromURL(A,(m,w)=>{const x=st.fabric.util.groupSVGElements(m,{...w,name:"defaultSVG",id:Ie()});n.add(x).centerObject(x).renderAll()})}if(o.type.indexOf("image/")===0){const A=URL.createObjectURL(l),m=document.createElement("img");m.src=A,document.body.appendChild(m),m.onload=()=>{const w=new st.fabric.Image(m,{id:Ie(),name:"\u56FE\u72471",left:100,top:100});n.add(w),n.setActiveObject(w),n.renderAll(),m.remove()}}}else o.kind==="string"&&o.type.indexOf("text/plain")===0&&o.getAsString(l=>{const f=n.getActiveObject();if(f&&(f.type==="textbox"||f.type==="i-text")&&f.text){const A=f.selectionStart,m=f.text.substring(0,A),w=f.text.substring(A);f.set("text",m+l+w),f.selectionStart=A+l.length,f.selectionEnd=A+l.length,f.dirty=!0,n.renderAll()}else{const A=new st.fabric.IText(l,{left:100,top:100,fontSize:80,id:Ie()});n.add(A),n.setActiveObject(A)}});i.length&&(this.cache=null)}}vt(vc,"pluginName","CopyPlugin"),vt(vc,"apis",["clone"]);class v0{constructor(e,n){vt(this,"hotkeys",["left","right","down","up"]);this.canvas=e,this.editor=n}hotkeyEvent(e,n){if(n.type==="keydown"){const{canvas:i}=this,o=i.getActiveObject();if(!o)return;switch(e){case"left":if(o.left===void 0)return;o.set("left",o.left-1);break;case"right":if(o.left===void 0)return;o.set("left",o.left+1);break;case"down":if(o.top===void 0)return;o.set("top",o.top+1);break;case"up":if(o.top===void 0)return;o.set("top",o.top-1)}i.renderAll()}}destroy(){}}vt(v0,"pluginName","MoveHotKeyPlugin");class Ac{constructor(e,n){vt(this,"hotkeys",["backspace"]);this.canvas=e,this.editor=n}hotkeyEvent(e,n){n.type==="keydown"&&e==="backspace"&&this.del()}del(){const{canvas:e}=this,n=e.getActiveObjects();n&&(n.map(i=>e.remove(i)),e.requestRenderAll(),e.discardActiveObject())}contextMenu(){if(this.canvas.getActiveObject())return[null,{text:"\u5220\u9664",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.del()}]}destroy(){}}vt(Ac,"pluginName","DeleteHotKeyPlugin"),vt(Ac,"apis",["del"]);class mc{constructor(e,n){this.canvas=e,this.editor=n}unGroup(){const e=this.canvas.getActiveObject();if(!e)return;const n=e.getObjects();e.toActiveSelection();for(const i of n)i.set("id",Ie());this.canvas.discardActiveObject().renderAll()}group(){const e=this.canvas.getActiveObject();if(!e)return;const n=e.toGroup(),i=n.getObjects();n.clone(o=>{o.set("id",Ie()),this.canvas.remove(n),i.forEach(l=>{this.canvas.remove(l)}),this.canvas.add(o),this.canvas.setActiveObject(o)})}contextMenu(){const e=this.canvas.getActiveObject();return o0(e)?[{text:"\u7EC4\u5408",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.group()}]:Jo(e)?[{text:"\u62C6\u5206\u7EC4\u5408",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.unGroup()}]:void 0}destroy(){}}vt(mc,"pluginName","GroupPlugin"),vt(mc,"apis",["unGroup","group"]),st.fabric.Arrow=st.fabric.util.createClass(st.fabric.Line,{type:"arrow",superType:"drawing",initialize(t,e){if(!t){const{x1:n,x2:i,y1:o,y2:l}=e;t=[n,o,i,l]}e=e||{},this.callSuper("initialize",t,e)},_render(t){this.callSuper("_render",t),t.save(),t.scale(1/this.scaleX,1/this.scaleY);const e=(this.x2-this.x1)*this.scaleX,n=(this.y2-this.y1)*this.scaleY,i=Math.atan2(n,e);t.translate((this.x2-this.x1)/2*this.scaleX,(this.y2-this.y1)/2*this.scaleY),t.rotate(i),t.beginPath(),t.moveTo(5,0),t.lineTo(-5,5),t.lineTo(-5,-5),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.stroke,t.fillStyle=this.fill,t.stroke(),t.fill(),t.restore()}}),st.fabric.Arrow.fromObject=(t,e)=>{const{x1:n,x2:i,y1:o,y2:l}=t;return e(new st.fabric.Arrow([n,o,i,l],t))};const gx=st.fabric.Arrow;st.fabric.ThinTailArrow=st.fabric.util.createClass(st.fabric.Line,{type:"thinTailArrow",superType:"drawing",initialize(t,e){if(!t){const{x1:n,x2:i,y1:o,y2:l}=e;t=[n,o,i,l]}e=e||{},this.callSuper("initialize",t,e)},_render(t){t.save(),t.scale(1/this.scaleX,1/this.scaleY);const e=(this.x2-this.x1)*this.scaleX,n=(this.y2-this.y1)*this.scaleY;t.translate(-e/2,-n/2);const i=Math.atan2(n,e);t.rotate(i);let o=Math.hypot(e,n);o=o<20?20:o,t.beginPath(),t.moveTo(0,0),t.lineTo(o-18,-5),t.lineTo(o-20,-12),t.lineTo(o,0),t.lineTo(o-20,12),t.lineTo(o-18,5),t.lineTo(0,0),t.lineWidth=this.strokeWidth,t.strokeStyle=this.stroke,t.fillStyle=this.fill,t.stroke(),t.fill(),t.restore()}}),st.fabric.ThinTailArrow.fromObject=(t,e)=>{const{x1:n,x2:i,y1:o,y2:l}=t;return e(new st.fabric.ThinTailArrow([n,o,i,l],t))};const vx=st.fabric.ThinTailArrow;class yc{constructor(e,n){vt(this,"isDrawingLineMode");vt(this,"lineType");vt(this,"lineToDraw");vt(this,"pointer");vt(this,"pointerPoints");vt(this,"isDrawingLine");this.canvas=e,this.editor=n,this.isDrawingLine=!1,this.isDrawingLineMode=!1,this.lineType="",this.lineToDraw=null,this.pointer=null,this.pointerPoints=null,this.init()}init(){const{canvas:e}=this;e.on("mouse:down",n=>{if(!this.isDrawingLineMode)return;let i;e.discardActiveObject(),e.getObjects().forEach(l=>{l.selectable=!1,l.hasControls=!1}),e.requestRenderAll(),this.isDrawingLine=!0,this.pointer=e.getPointer(n.e),this.pointerPoints=[this.pointer.x,this.pointer.y,this.pointer.x,this.pointer.y];let o={strokeWidth:2,stroke:"#000000",id:Ie()};switch(this.lineType){case"line":i=st.fabric.Line;break;case"arrow":i=gx;break;case"thinTailArrow":i=vx,o={strokeWidth:2,stroke:"#ff0000",fill:"#ff0000",id:Ie()}}if(!i)throw new Error("Draw failed: invalid lineType.");this.lineToDraw=new i(this.pointerPoints,o),this.lineToDraw.selectable=!1,this.lineToDraw.evented=!1,this.lineToDraw.strokeUniform=!0,e.add(this.lineToDraw)}),e.on("mouse:move",n=>{if(!(!this.isDrawingLine||!["line","arrow","thinTailArrow"].includes(this.lineType))&&(e.discardActiveObject(),!e.getActiveObject())){if(this.pointer=e.getPointer(n.e),n.e.shiftKey){const i=this.pointerPoints[0],o=this.pointerPoints[1],l=this.pointer.x-i,f=this.pointer.y-o,A=Math.sqrt(l*l+f*f);let m=Math.atan2(f,l)/Math.PI*180;m=15*~~((m+7.5)%360/15);const w=A*Math.cos(m*Math.PI/180),x=A*Math.sin(m*Math.PI/180);this.lineToDraw.set({x2:w+i,y2:x+o})}else this.lineToDraw.set({x2:this.pointer.x,y2:this.pointer.y});e.renderAll()}}),e.on("mouse:up",()=>{this.isDrawingLine&&(this.lineToDraw.setCoords(),this.isDrawingLine=!1,e.discardActiveObject())})}setLineType(e){this.lineType=e}setMode(e){this.isDrawingLineMode=e,this.isDrawingLineMode||this.endRest()}endRest(){this.canvas.getObjects().forEach(e=>{e.id!=="workspace"&&(e.selectable=!0,e.hasControls=!0)})}destroy(){}}vt(yc,"pluginName","DrawLinePlugin"),vt(yc,"apis",["setLineType","setMode"]);class A0{constructor(e,n){vt(this,"isDown",!1);this.canvas=e,this.editor=n,this._init()}_init(){this.canvas.on("mouse:down",e=>{this.isDown=!0,!e.target||e.target.lockMovementX||e.target.lockMovementY||e.target.lockRotation||e.target.lockScalingX||e.target.lockScalingY||(e.target.hasControls=!0)}),this.canvas.on("mouse:up",()=>{this.isDown=!1}),this.canvas.on("mouse:dblclick",e=>{if(Jo(e.target)){const n=this._getGroupObj(e);if(!n)return;if(n.selectable=!0,n.hasControls&&(n.hasControls=!1),this.isText(n))return void this._bedingTextEditingEvent(n,e.target);this.canvas.setActiveObject(n),this.canvas.renderAll()}})}_getGroupTextObj(e){const n=this.canvas.getPointer(e.e,!0);if(!Jo(e.target))return!1;const i=this.canvas._searchPossibleTargets(e.target._objects,n);return!(!i||!this.isText(i))&&i}_getGroupObj(e){const n=this.canvas.getPointer(e.e,!0);return Jo(e.target)?this.canvas._searchPossibleTargets(e.target._objects,n):!1}_bedingTextEditingEvent(e,n){var k,S,Q,R,V;const i=e.toObject(),o=n.calcTransformMatrix(),l=o[0],f=o[1],A=o[2],m=o[3],w=o[4],x=o[5],E=l*((k=e.left)!=null?k:0)+A*((S=e.top)!=null?S:0)+w,T=f*((Q=e.left)!=null?Q:0)+m*((R=e.top)!=null?R:0)+x,O=new e.constructor((V=e.text)!=null?V:"",{...i,scaleX:i.scaleX*l,scaleY:i.scaleY*l,textAlign:e.textAlign,left:E,top:T,styles:e.styles,groupCopyed:e.group});O.id=Ie(),e.visible=!1,n.addWithUpdate(),O.visible=!0,O.selectable=!0,O.hasControls=!1,O.editable=!0,this.canvas.add(O),this.canvas.setActiveObject(O),O.enterEditing(),O.selectAll(),O.on("editing:exited",()=>{const b=O.toObject();e.set({..._r(b,["fill","fontSize","fontStyle","fontFamily","lineHeight","backgroundColor"]),text:O.text,visible:!0}),n.addWithUpdate(),O.visible=!1,this.canvas.remove(O),this.canvas.setActiveObject(n)})}_bedingEditingEvent(e,n){if(!n.target)return;const i=n.target.left,o=n.target.top,l=this._unGroup()||[],f=()=>{const A=this.canvas.getObjects().filter(w=>w.id&&l.includes(w.id));A.forEach(w=>this.canvas.remove(w));const m=new st.fabric.Group([...A]);m.set("left",i),m.set("top",o),m.set("id",Ie()),e.off("editing:exited",f),this.canvas.add(m),this.canvas.discardActiveObject().renderAll()};e.on("editing:exited",f)}_unGroup(){const e=[],n=this.canvas.getActiveObject();if(n)return n.getObjects().forEach(i=>{const o=Ie();e.push(o),i.set("id",o)}),n.toActiveSelection(),e}isText(e){return e.type&&["i-text","text","textbox"].includes(e.type)}destroy(){}}vt(A0,"pluginName","GroupTextEditorPlugin");class bc{constructor(e,n){this.canvas=e,this.editor=n}left(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{left:o=0}=n;e.discardActiveObject(),i.forEach(f=>{const A=f.getBoundingRect(!0);f.set({left:o-A.left+Number(f.left)}),f.setCoords()});const l=new st.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(l),e.requestRenderAll()}}right(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{left:o=0,width:l=0}=n;e.discardActiveObject(),i.forEach(A=>{const m=A.getBoundingRect(!0);A.set({left:o+l-(m.left+m.width)+Number(A.left)})});const f=new st.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(f),e.requestRenderAll()}}xcenter(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{left:o=0,width:l=0}=n;e.discardActiveObject(),i.forEach(A=>{const m=A.getBoundingRect(!0);A.set({left:o+l/2-(m.left+m.width/2)+Number(A.left)})});const f=new st.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(f),e.requestRenderAll()}}ycenter(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{top:o=0,height:l=0}=n;e.discardActiveObject(),i.forEach(A=>{const m=A.getBoundingRect(!0);A.set({top:o+l/2-(m.top+m.height/2)+Number(A.top)})});const f=new st.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(f),e.requestRenderAll()}}top(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{top:o=0}=n;e.discardActiveObject(),i.forEach(f=>{const A=f.getBoundingRect(!0);f.set({top:o-A.top+Number(f.top)})});const l=new st.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(l),e.requestRenderAll()}}bottom(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{top:o=0,height:l=0}=n;e.discardActiveObject(),i.forEach(A=>{const m=A.getBoundingRect(!0);A.set({top:o+l-(m.top+m.height)+Number(A.top)})});const f=new st.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(f),e.requestRenderAll()}}xequation(){const{canvas:e}=this,n=e.getActiveObject();function i(f){let A=1/0,m=-1/0;for(const w in f.aCoords)f.aCoords[w].x<A&&(A=f.aCoords[w].x),f.aCoords[w].x>m&&(m=f.aCoords[w].x);return m-A}if(n&&n.type==="activeSelection"){n._objects.sort((m,w)=>m.left-w.left);const f=function(){const m=function(){let w=0;return n&&n.forEachObject(x=>{w+=i(x)}),w}();if(n)return(Number(n.width)-m)/(n._objects.length-1)}(),A=Number(n.width)/2;n.forEachObject((m,w)=>{const x=function(T){if(T===0)return 0;let O=0;if(n)for(let k=0;k<T;k++)O+=i(n._objects[k]);return O}(w),E=f*w+x-A;m.set("left",E)})}const o=e.getActiveObjects();e.discardActiveObject(),o.forEach(f=>{let A=1/0;for(const m in f.aCoords)f.aCoords[m].x<A&&(A=f.aCoords[m].x);f.set("left",2*f.left-A)});const l=new st.fabric.ActiveSelection(o,{canvas:e});e.setActiveObject(l),e.requestRenderAll()}yequation(){const{canvas:e}=this,n=e.getActiveObject()||{top:0,height:0};function i(f){let A=1/0,m=-1/0;for(const w in f.aCoords)f.aCoords[w].y<A&&(A=f.aCoords[w].y),f.aCoords[w].y>m&&(m=f.aCoords[w].y);return m-A}if(n&&n.type==="activeSelection"){n._objects.sort((m,w)=>m.top-w.top);const f=function(){const m=function(){let w=0;return n.forEachObject(x=>{w+=i(x)}),w}();return(n.height-m)/(n._objects.length-1)}(),A=Number(n.height)/2;n.forEachObject((m,w)=>{const x=function(T){if(T===0)return 0;let O=0;for(let k=0;k<T;k++)O+=i(n._objects[k]);return O}(w),E=f*w+x-A;m.set("top",E)})}const o=e.getActiveObjects();e.discardActiveObject(),o.forEach(f=>{let A=1/0;for(const m in f.aCoords)f.aCoords[m].y<A&&(A=f.aCoords[m].y);f.set("top",2*f.top-A)});const l=new st.fabric.ActiveSelection(o,{canvas:e});e.setActiveObject(l),e.requestRenderAll()}destroy(){}}vt(bc,"pluginName","GroupAlignPlugin"),vt(bc,"apis",["left","right","xcenter","ycenter","top","bottom","xequation","yequation"]);class es{constructor(e,n){vt(this,"workspaceEl");vt(this,"workspace");vt(this,"resizeObserver");vt(this,"option");vt(this,"zoomRatio");this.canvas=e,this.editor=n,this.workspace=null,this.init({width:900,height:2e3}),this.zoomRatio=.85}init(e){const n=document.querySelector("#workspace");if(!n)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=n,this.workspace=null,this.option=e,this._initBackground(),this._initWorkspace(),this._initResizeObserve(),this._bindWheel()}hookImportAfter(){return new Promise(e=>{const n=this.canvas.getObjects().find(i=>i.id==="workspace");n&&(n.set("selectable",!1),n.set("hasControls",!1),n.set("evented",!1),n.width&&n.height&&(this.setSize(n.width,n.height),this.editor.emit("sizeChange",n.width,n.height))),e("")})}hookSaveAfter(){return new Promise(e=>{this.auto(),e(!0)})}_initBackground(){this.canvas.backgroundImage="",this.canvas.setBackgroundColor("#ffffff",this.canvas.renderAll.bind(this.canvas)),this.canvas.setWidth(this.workspaceEl.offsetWidth),this.canvas.setHeight(this.workspaceEl.offsetHeight)}_initWorkspace(){const{width:e,height:n}=this.option,i=new st.fabric.Rect({fill:"transparent",width:e,height:n,id:"workspace",strokeWidth:0});i.set("selectable",!1),i.set("hasControls",!1),i.hoverCursor="default",this.canvas.add(i),this.canvas.renderAll(),this.workspace=i,this.canvas.clearHistory&&this.canvas.clearHistory(),this.auto()}getWorkspase(){return this.canvas.getObjects().find(e=>e.id==="workspace")}setCenterFromObject(e){const{canvas:n}=this,i=e.getCenterPoint(),o=n.viewportTransform;n.width!==void 0&&n.height!==void 0&&o&&(o[4]=n.width/2-i.x*o[0],o[5]=n.height/2-i.y*o[3],n.setViewportTransform(o),n.renderAll())}getWorkspaceSize(){return this.option}_initResizeObserve(){const e=new ResizeObserver(Ln(()=>{this.auto()},50));this.resizeObserver=e,this.resizeObserver.observe(this.workspaceEl)}setSize(e,n){this._initBackground(),this.option.width=e,this.option.height=n,this.workspace=this.canvas.getObjects().find(i=>i.id==="workspace"),this.workspace.set("width",e),this.workspace.set("height",n),this.editor.emit("sizeChange",this.workspace.width,this.workspace.height),this.auto()}setZoomAuto(e,n){const{workspaceEl:i}=this,o=i.offsetWidth,l=i.offsetHeight;this.canvas.setWidth(o),this.canvas.setHeight(l);const f=this.canvas.getCenter();this.canvas.setViewportTransform(st.fabric.iMatrix.concat()),this.canvas.zoomToPoint(new st.fabric.Point(f.left,f.top),e),this.workspace&&(this.setCenterFromObject(this.workspace),this.workspace.clone(A=>{this.canvas.clipPath=A,this.canvas.requestRenderAll()}),n&&n(this.workspace.left,this.workspace.top))}getScale(){return st.fabric.util.findScaleToFit(this.getWorkspase(),{width:this.workspaceEl.offsetWidth,height:this.workspaceEl.offsetHeight})}big(){let e=this.canvas.getZoom();e+=.05;const n=this.canvas.getCenter();this.canvas.zoomToPoint(new st.fabric.Point(n.left,n.top),e)}small(){let e=this.canvas.getZoom();e-=.05;const n=this.canvas.getCenter();this.canvas.zoomToPoint(new st.fabric.Point(n.left,n.top),e<0?.01:e)}auto(){const e=this.getScale();this.setZoomAuto(e*this.zoomRatio)}one(){this.setZoomAuto(1*this.zoomRatio),this.canvas.requestRenderAll()}setWorkspaseBg(e){const n=this.getWorkspase();n==null||n.set("fill",e)}_bindWheel(){this.canvas.on("mouse:wheel",function(e){const n=e.e.deltaY;let i=this.getZoom();i*=.999**n,i>20&&(i=20),i<.01&&(i=.01);const o=this.getCenter();this.zoomToPoint(new st.fabric.Point(o.left,o.top),i),e.e.preventDefault(),e.e.stopPropagation()})}destroy(){this.resizeObserver.disconnect(),this.canvas.off()}}vt(es,"pluginName","WorkspacePlugin"),vt(es,"events",["sizeChange"]),vt(es,"apis",["big","small","auto","one","setSize","getWorkspase","setWorkspaseBg","setCenterFromObject","getScale","getWorkspaceSize"]),st.fabric.Canvas.prototype.initialize=function(t){return function(...e){return t.call(this,...e),this._historyInit(),this}}(st.fabric.Canvas.prototype.initialize),st.fabric.Canvas.prototype.dispose=function(t){return function(...e){return t.call(this,...e),this._historyDispose(),this}}(st.fabric.Canvas.prototype.dispose),st.fabric.Canvas.prototype._historyNext=function(){return JSON.stringify(this.toDatalessJSON(this.extraProps))},st.fabric.Canvas.prototype._historyEvents=function(){return{"object:added":t=>this._historySaveAction(t),"object:removed":t=>this._historySaveAction(t),"object:modified":t=>this._historySaveAction(t),"object:skewing":t=>this._historySaveAction(t)}},st.fabric.Canvas.prototype._historyInit=function(){this.historyUndo=[],this.historyRedo=[],this.extraProps=["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension"],this.historyNextState=this._historyNext(),this.on(this._historyEvents())},st.fabric.Canvas.prototype._historyDispose=function(){this.off(this._historyEvents())},st.fabric.Canvas.prototype._historySaveAction=function(t){if(!this.historyProcessing&&(!t||t.target&&!t.target.excludeFromExport)){const e=this._historyNext();this.historyUndo.push(e),this.historyNextState=this._historyNext(),this.fire("history:append",{json:e})}},st.fabric.Canvas.prototype.undo=function(t){this.historyProcessing=!0;const e=this.historyUndo.pop();e?(this.historyRedo.push(this._historyNext()),this.historyNextState=e,this._loadHistory(e,"history:undo",t)):this.historyProcessing=!1},st.fabric.Canvas.prototype.redo=function(t){this.historyProcessing=!0;const e=this.historyRedo.pop();e?(this.historyUndo.push(this._historyNext()),this.historyNextState=e,this._loadHistory(e,"history:redo",t)):this.historyProcessing=!1},st.fabric.Canvas.prototype._loadHistory=function(t,e,n){var i=this;this.loadFromJSON(t,function(){i.renderAll(),i.fire(e),i.historyProcessing=!1,n&&typeof n=="function"&&n()})},st.fabric.Canvas.prototype.clearHistory=function(t){if(t){const e=this.historyUndo.pop();this.historyUndo=[e],this.historyRedo=[],this.fire("history:clear")}else this.historyUndo=[],this.historyRedo=[],this.fire("history:clear")},st.fabric.Canvas.prototype.clearUndo=function(){this.historyUndo=[]},st.fabric.Canvas.prototype.onHistory=function(){this.historyProcessing=!1,this._historySaveAction()},st.fabric.Canvas.prototype.canUndo=function(){return this.historyUndo.length>0},st.fabric.Canvas.prototype.canRedo=function(){return this.historyRedo.length>0},st.fabric.Canvas.prototype.offHistory=function(){this.historyProcessing=!0};class ns{constructor(e,n){vt(this,"hotkeys",["ctrl+z","ctrl+shift+z","\u2318+z","\u2318+shift+z"]);this.canvas=e,this.editor=n,st.fabric.Canvas.prototype._historyNext=()=>this.editor.getJson(),this._init()}_init(){this.canvas.on("history:append",()=>{this.historyUpdate()}),window.addEventListener("beforeunload",e=>{this.canvas.historyUndo.length>0&&((e||window.event).returnValue="\u786E\u8BA4\u79BB\u5F00")})}historyUpdate(){const{historyUndo:e,historyRedo:n}=this.canvas;this.editor.emit("historyUpdate",e.length,n.length)}hookImportAfter(){return this.canvas.clearHistory(!0),this.historyUpdate(),Promise.resolve()}undo(){this.canvas.undo(),this.historyUpdate()}redo(){this.canvas.redo(),this.historyUpdate()}hotkeyEvent(e,n){if(n.type==="keydown")switch(e){case"ctrl+z":case"\u2318+z":this.undo();break;case"ctrl+shift+z":case"\u2318+shift+z":this.redo()}}}vt(ns,"pluginName","HistoryPlugin"),vt(ns,"apis",["undo","redo","historyUpdate"]),vt(ns,"events",["historyUpdate"]);class Cc{constructor(e,n){this.canvas=e,this.editor=n}flip(e){const n=this.canvas.getActiveObject();n&&(n.set("flip".concat(e),!n["flip".concat(e)]).setCoords(),this.canvas.requestRenderAll())}contextMenu(){if(this.editor.getSelectMode()===bi.ONE)return[{text:"\u7FFB\u8F6C",hotkey:"\u276F",subitems:[{text:"flip.x",hotkey:"|",onclick:()=>this.flip("X")},{text:"flip.y",hotkey:"-",onclick:()=>this.flip("Y")}]}]}destroy(){}}vt(Cc,"pluginName","FlipPlugin"),vt(Cc,"apis",["flip"]);const m0=(t,e)=>{const n=e?"left":"top",i=e?"width":"height";t.sort((f,A)=>f[n]-A[n]);const o=[];let l=Object.assign({},t[0]);for(const f of t){const A=Object.assign({},f);l[n]+l[i]>=A[n]?l[i]=Math.max(l[n]+l[i],A[n]+A[i])-l[n]:(o.push(l),l=Object.assign({},A))}return o.push(l),o},wc=(t,e)=>{t.save();const{left:n,top:i,width:o,height:l,stroke:f,lineWidth:A}=e;t.beginPath(),f&&(t.strokeStyle=f),t.lineWidth=A!=null?A:1,t.moveTo(n,i),t.lineTo(n+o,i+l),t.stroke(),t.restore()},xc=(t,e)=>{t.save();const{left:n,top:i,text:o,fill:l,align:f,angle:A,fontSize:m}=e;l&&(t.fillStyle=l),t.textAlign=f!=null?f:"left",t.textBaseline="top",t.font="".concat(m!=null?m:10,"px sans-serif"),A&&(t.translate(n,i),t.rotate(Math.PI/180*A),t.translate(-n,-i)),t.fillText(o,n,i),t.restore()},_c=(t,e)=>{t.save();const{left:n,top:i,width:o,height:l,fill:f,stroke:A,strokeWidth:m}=e;t.beginPath(),f&&(t.fillStyle=f),t.rect(n,i,o,l),t.fill(),A&&(t.strokeStyle=A,t.lineWidth=m!=null?m:1,t.stroke()),t.restore()},is=(t,e)=>{t.save();const{isHorizontal:n,left:i,top:o,width:l,height:f,backgroundColor:A}=e,m=n?t.createLinearGradient(i,f/2,i+l,f/2):t.createLinearGradient(l/2,o,l/2,f+o),w=new st.fabric.Color(A);w.setAlpha(0),m.addColorStop(0,w.toRgba()),m.addColorStop(.33,A),m.addColorStop(.67,A),m.addColorStop(1,w.toRgba()),_c(t,{left:i,top:o,width:l,height:f,fill:m}),t.restore()};st.fabric.GuideLine;class Ax{constructor(e){vt(this,"ctx");vt(this,"options");vt(this,"startCalibration");vt(this,"activeOn","up");vt(this,"objectRect");vt(this,"eventHandler",{calcObjectRect:Ln(this.calcObjectRect.bind(this),15),clearStatus:this.clearStatus.bind(this),canvasMouseDown:this.canvasMouseDown.bind(this),canvasMouseMove:Ln(this.canvasMouseMove.bind(this),15),canvasMouseUp:this.canvasMouseUp.bind(this),render:e=>{e.ctx&&this.render()}});vt(this,"lastAttr",{status:"out",cursor:void 0,selection:void 0});vt(this,"tempGuidelLine");vt(this,"getCommonEventInfo",e=>{if(this.tempGuidelLine&&e.absolutePointer)return{e:e.e,transform:this.tempGuidelLine.get("transform"),pointer:{x:e.absolutePointer.x,y:e.absolutePointer.y},target:this.tempGuidelLine}});this.options=Object.assign({ruleSize:20,fontSize:10,enabled:!1,backgroundColor:"#fff",borderColor:"transparent",highlightColor:"#007fff",textColor:"#888"},e),this.ctx=this.options.canvas.getContext(),st.fabric.util.object.extend(this.options.canvas,{ruler:this}),st.fabric.GuideLine||(st.fabric.GuideLine=st.fabric.util.createClass(st.fabric.Line,{type:"GuideLine",selectable:!1,hasControls:!1,hasBorders:!1,stroke:"#4bec13",originX:"center",originY:"center",padding:4,globalCompositeOperation:"difference",axis:"horizontal",initialize(n,i){const o=i.axis==="horizontal";this.hoverCursor=o?"ns-resize":"ew-resize";const l=o?[-999999,n,999999,n]:[n,-999999,n,999999];i[o?"lockMovementX":"lockMovementY"]=!0,this.callSuper("initialize",l,i),this.on("mousedown:before",f=>{this.activeOn==="down"&&this.canvas&&this.canvas.setActiveObject(this,f.e)}),this.on("moving",f=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(f.e)?this.moveCursor="not-allowed":this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:moving",{target:this,e:f.e})}),this.on("mouseup",f=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(f.e)?this.canvas.remove(this):(this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:mouseup",{target:this,e:f.e}))}),this.on("removed",()=>{this.off("removed"),this.off("mousedown:before"),this.off("moving"),this.off("mouseup")})},getBoundingRect(n,i){this.bringToFront();const o=this.isHorizontal(),l=this.callSuper("getBoundingRect",n,i);return l[o?"top":"left"]+=l[o?"height":"width"]/2,l[o?"height":"width"]=0,l},isPointOnRuler(n){const i=this.isHorizontal(),o=this.canvas&&this.canvas.ruler.isPointOnRuler(new st.fabric.Point(n.offsetX,n.offsetY));return!!(i&&o==="horizontal"||!i&&o==="vertical")&&o},isHorizontal(){return this.height===0}}),st.fabric.GuideLine.fromObject=function(n,i){const o=(0,st.fabric.util.object.clone)(n,!0),l=o.height===0;o.xy=l?o.y1:o.x1,o.axis=l?"horizontal":"vertical",st.fabric.Object._fromObject(o.type,o,function(f){delete f.xy,i&&i(f)},"xy")}),this.options.enabled&&this.enable()}destroy(){this.disable()}clearGuideline(){this.options.canvas.remove(...this.options.canvas.getObjects(st.fabric.GuideLine.prototype.type))}showGuideline(){this.options.canvas.getObjects(st.fabric.GuideLine.prototype.type).forEach(e=>{e.set("visible",!0)}),this.options.canvas.renderAll()}hideGuideline(){this.options.canvas.getObjects(st.fabric.GuideLine.prototype.type).forEach(e=>{e.set("visible",!1)}),this.options.canvas.renderAll()}enable(){this.options.enabled=!0,this.options.canvas.on("after:render",this.eventHandler.calcObjectRect),this.options.canvas.on("after:render",this.eventHandler.render),this.options.canvas.on("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.on("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.on("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.on("selection:cleared",this.eventHandler.clearStatus),this.showGuideline(),this.render()}disable(){this.options.canvas.off("after:render",this.eventHandler.calcObjectRect),this.options.canvas.off("after:render",this.eventHandler.render),this.options.canvas.off("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.off("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.off("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.off("selection:cleared",this.eventHandler.clearStatus),this.hideGuideline(),this.options.enabled=!1}render(){var n,i;const e=this.options.canvas.viewportTransform;e&&(this.draw({isHorizontal:!0,rulerLength:this.getSize().width,startCalibration:(n=this.startCalibration)!=null&&n.x?this.startCalibration.x:-e[4]/e[0]}),this.draw({isHorizontal:!1,rulerLength:this.getSize().height,startCalibration:(i=this.startCalibration)!=null&&i.y?this.startCalibration.y:-e[5]/e[3]}),is(this.ctx,{isHorizontal:!0,left:-10,top:-10,width:2*this.options.ruleSize+10,height:this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}),is(this.ctx,{isHorizontal:!1,left:-10,top:-10,width:this.options.ruleSize+10,height:2*this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}))}getSize(){var e,n;return{width:(e=this.options.canvas.width)!=null?e:0,height:(n=this.options.canvas.height)!=null?n:0}}getZoom(){return this.options.canvas.getZoom()}draw(e){const{isHorizontal:n,rulerLength:i,startCalibration:o}=e,l=this.getZoom(),f=(T=>{const O=[.02,.03,.05,.1,.2,.5,1,2,5,10,18];let k=0;for(;k<O.length&&O[k]<T;)k++;return[5e3,2500,1e3,500,250,100,50,25,10,5,2][k-1]||5e3})(l),A=i/l,m=Math[o>0?"floor":"ceil"](o/f)*f,w=m-o,x=this.getSize();_c(this.ctx,{left:0,top:0,width:n?x.width:this.options.ruleSize,height:n?this.options.ruleSize:x.height,fill:this.options.backgroundColor,stroke:this.options.borderColor});const E=new st.fabric.Color(this.options.textColor);for(let T=0;T+w<=Math.ceil(A);T+=f){const O=(w+T)*l,k=m+T+"",S=10*k.length/4,Q=n?O-S-1:this.options.ruleSize/2-this.options.fontSize/2-4,R=n?this.options.ruleSize/2-this.options.fontSize/2-4:O+S;xc(this.ctx,{text:k,left:Q,top:R,fill:E.toRgb(),angle:n?0:-90})}for(let T=0;T+w<=Math.ceil(A);T+=f){const O=Math.round((w+T)*l),k=n?O:this.options.ruleSize-8,S=n?this.options.ruleSize-8:O,Q=n?0:8,R=n?8:0;wc(this.ctx,{left:k,top:S,width:Q,height:R,stroke:E.toRgb()})}if(this.objectRect){const T=n?"x":"y";this.objectRect[T].forEach(O=>{if(O.skip===T)return;const k=s=>Math.round(s/l+o)+"",S=k(n?O.left:O.top),Q=k(n?O.left+O.width:O.top+O.height),R=S===Q,V={isHorizontal:n,width:n?160:this.options.ruleSize-8,height:n?this.options.ruleSize-8:160,backgroundColor:this.options.backgroundColor};is(this.ctx,{...V,left:n?O.left-80:0,top:n?0:O.top-80}),R||is(this.ctx,{...V,left:n?O.width+O.left-80:0,top:n?0:O.height+O.top-80});const b=new st.fabric.Color(this.options.highlightColor);b.setAlpha(.5),_c(this.ctx,{left:n?O.left:this.options.ruleSize-8,top:n?this.options.ruleSize-8:O.top,width:n?O.width:8,height:n?8:O.height,fill:b.toRgba()});const Y=this.options.ruleSize/2-this.options.fontSize/2-4,rt={fill:b.toRgba(),angle:n?0:-90};xc(this.ctx,{...rt,text:S,left:n?O.left-2:Y,top:n?Y:O.top-2,align:R?"center":n?"right":"left"}),R||xc(this.ctx,{...rt,text:Q,left:n?O.left+O.width+2:Y,top:n?Y:O.top+O.height+2,align:n?"left":"right"});const q=R?8:14;b.setAlpha(1);const h={width:n?0:q,height:n?q:0,stroke:b.toRgba()};wc(this.ctx,{...h,left:n?O.left:this.options.ruleSize-q,top:n?this.options.ruleSize-q:O.top}),R||wc(this.ctx,{...h,left:n?O.left+O.width:this.options.ruleSize-q,top:n?this.options.ruleSize-q:O.top+O.height})})}}calcObjectRect(){const e=this.options.canvas.getActiveObjects();if(e.length===0)return;const n=e.reduce((i,o)=>{var f,A;const l=o.getBoundingRect(!1,!0);if(o.group){const m={top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,...o.group};l.width*=m.scaleX,l.height*=m.scaleY;const w=m.width/2+m.left,x=(m.width/2+((f=o.left)!=null?f:0))*(1-m.scaleX);l.left+=(w-x)*this.getZoom();const E=m.height/2+m.top,T=(m.height/2+((A=o.top)!=null?A:0))*(1-m.scaleY);l.top+=(E-T)*this.getZoom()}return o instanceof st.fabric.GuideLine&&(l.skip=o.isHorizontal()?"x":"y"),i.push(l),i},[]);n.length!==0&&(this.objectRect={x:m0(n,!0),y:m0(n,!1)})}clearStatus(){this.objectRect=void 0}isPointOnRuler(e){return new st.fabric.Rect({left:0,top:0,width:this.options.ruleSize,height:this.options.canvas.height}).containsPoint(e)?"vertical":!!new st.fabric.Rect({left:0,top:0,width:this.options.canvas.width,height:this.options.ruleSize}).containsPoint(e)&&"horizontal"}canvasMouseDown(e){if(!e.pointer||!e.absolutePointer)return;const n=this.isPointOnRuler(e.pointer);n&&this.activeOn==="up"&&(this.lastAttr.selection=this.options.canvas.selection,this.options.canvas.selection=!1,this.activeOn="down",this.tempGuidelLine=new st.fabric.GuideLine(n==="horizontal"?e.absolutePointer.y:e.absolutePointer.x,{axis:n,visible:!1}),this.options.canvas.add(this.tempGuidelLine),this.options.canvas.setActiveObject(this.tempGuidelLine),this.options.canvas._setupCurrentTransform(e.e,this.tempGuidelLine,!0),this.tempGuidelLine.fire("down",this.getCommonEventInfo(e)))}canvasMouseMove(e){if(!e.pointer)return;if(this.tempGuidelLine&&e.absolutePointer){const i={};this.tempGuidelLine.axis==="horizontal"?i.top=e.absolutePointer.y:i.left=e.absolutePointer.x,this.tempGuidelLine.set({...i,visible:!0}),this.options.canvas.requestRenderAll();const o=this.getCommonEventInfo(e);this.options.canvas.fire("object:moving",o),this.tempGuidelLine.fire("moving",o)}const n=this.isPointOnRuler(e.pointer);n?this.lastAttr.status!=="out"&&n===this.lastAttr.status||(this.lastAttr.cursor=this.options.canvas.defaultCursor,this.options.canvas.defaultCursor=n==="horizontal"?"ns-resize":"ew-resize",this.lastAttr.status=n):this.lastAttr.status!=="out"&&(this.options.canvas.defaultCursor=this.lastAttr.cursor,this.lastAttr.status="out")}canvasMouseUp(e){var n;this.activeOn==="down"&&(this.options.canvas.selection=this.lastAttr.selection,this.activeOn="up",(n=this.tempGuidelLine)==null||n.fire("up",this.getCommonEventInfo(e)),this.tempGuidelLine=void 0)}}class Ec{constructor(e,n){vt(this,"ruler");this.canvas=e,this.editor=n,this.init()}hookSaveBefore(){return new Promise(e=>{this.hideGuideline(),e(!0)})}hookSaveAfter(){return new Promise(e=>{this.showGuideline(),e(!0)})}init(){this.ruler=function(e,n){const i=new Ax({canvas:e,...n});let o;const l=()=>{o=e.getObjects().find(A=>A.id==="workspace")},f=(A,m)=>{const{top:w,height:x,left:E,width:T}=A;if(w===void 0||x===void 0||E===void 0||T===void 0)return!1;const O=m.getBoundingRect(!0,!0),{top:k,height:S,left:Q,width:R}=O;return!(!m.isHorizontal()||!(w>k+1||w+x<k+S-1))||!m.isHorizontal()&&(E>Q+1||E+T<Q+R-1)};return e.on("guideline:moving",A=>{if(!o)return void l();const{target:m}=A;f(o,m)&&(m.moveCursor="not-allowed")}),e.on("guideline:mouseup",A=>{var w;if(!o)return void l();const{target:m}=A;f(o,m)&&(e.remove(m),e.setCursor((w=e.defaultCursor)!=null?w:""))}),i}(this.canvas)}hideGuideline(){this.ruler.hideGuideline()}showGuideline(){this.ruler.showGuideline()}rulerEnable(){this.ruler.enable()}rulerDisable(){this.ruler.disable()}destroy(){}}vt(Ec,"pluginName","RulerPlugin"),vt(Ec,"apis",["hideGuideline","showGuideline","rulerEnable","rulerDisable"]);class Sc{constructor(e,n,i){vt(this,"apiMapUrl");vt(this,"repoSrc");this.canvas=e,this.editor=n,this.repoSrc=i.repoSrc,this.apiMapUrl={template:i.repoSrc+"/template/type.json",svg:i.repoSrc+"/svg/type.json"}}getTemplTypeList(){return Xn.get("".concat(this.repoSrc,"/api/templ-types?pagination[pageSize]=100")).then(e=>e.data.data.map(n=>({value:n.id,label:n.attributes.name})))}getTemplList(e="",n=1,i=""){const o={fields:"*",populate:{img:"*"},filters:{},pagination:{page:n,pageSize:10}},l=this._getQueryParams(o,[{key:"templ_type",value:e,type:"$eq"},{key:"name",value:i,type:"$contains"}]);return Xn.get("".concat(this.repoSrc,"/api/templs?").concat(l)).then(f=>{var A,m;return{list:f.data.data.map(w=>({name:w.attributes.name,desc:w.attributes.desc,src:this._getMaterialPreviewUrl(w.attributes.img),json:w.attributes.json})),pagination:(m=(A=f==null?void 0:f.data)==null?void 0:A.meta)==null?void 0:m.pagination}})}getMaterialTypeList(){return Xn.get("".concat(this.repoSrc,"/api/material-types?pagination[pageSize]=100")).then(e=>e.data.data.map(n=>({value:n.id,label:n.attributes.name})))}getMaterialList(e="",n=1,i=""){const o={populate:{img:"*"},filters:{},pagination:{page:n,pageSize:50}},l=this._getQueryParams(o,[{key:"material_type",value:e,type:"$eq"},{key:"name",value:i,type:"$contains"}]);return Xn.get("".concat(this.repoSrc,"/api/materials?").concat(l)).then(f=>{var A,m;return{list:f.data.data.map(w=>({name:w.attributes.name,desc:w.attributes.desc,src:this._getMaterialInfoUrl(w.attributes.img),previewSrc:this._getMaterialPreviewUrl(w.attributes.img)})),pagination:(m=(A=f==null?void 0:f.data)==null?void 0:A.meta)==null?void 0:m.pagination}})}getSizeList(){return Xn.get("".concat(this.repoSrc,"/api/sizes?pagination[pageSize]=100")).then(e=>e.data.data.map(n=>({value:n.id,name:n.attributes.name,width:Number(n.attributes.width),height:Number(n.attributes.height),unit:n.attributes.unit})))}getFontList(){return Xn.get("".concat(this.repoSrc,"/api/fonts?pagination[pageSize]=100")).then(e=>e.data.data.map(n=>({value:n.id,label:n.attributes.name})))}_getMaterialInfoUrl(e){var i,o;const n=((o=(i=e==null?void 0:e.data)==null?void 0:i.attributes)==null?void 0:o.url)||"";return this.repoSrc+n}_getMaterialPreviewUrl(e){var i,o,l,f,A,m;const n=((f=(l=(o=(i=e==null?void 0:e.data)==null?void 0:i.attributes)==null?void 0:o.formats)==null?void 0:l.small)==null?void 0:f.url)||((m=(A=e==null?void 0:e.data)==null?void 0:A.attributes)==null?void 0:m.url)||"";return this.repoSrc+n}_getQueryParams(e,n){return n.forEach(i=>{const{key:o,value:l,type:f}=i;l&&(e.filters[o]={[f]:l})}),ph.stringify(e)}async getMaterialInfo(e){const n=this.apiMapUrl[e];return(await Xn.get(n,{params:{typeId:e}})).data.data}}vt(Sc,"pluginName","MaterialPlugin"),vt(Sc,"apis",["getTemplTypeList","getTemplList","getMaterialTypeList","getMaterialList","getSizeList"]);var y0={exports:{}};(function(t){(function(){function e(O,k){document.addEventListener?O.addEventListener("scroll",k,!1):O.attachEvent("scroll",k)}function n(O){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(O)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(O,k){O.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+k+";"}function o(O){var k=O.g.offsetWidth,S=k+100;return O.j.style.width=S+"px",O.i.scrollLeft=S,O.h.scrollLeft=O.h.scrollWidth+100,O.l!==k&&(O.l=k,!0)}function l(O,k){function S(){var R=Q;o(R)&&R.g.parentNode!==null&&k(R.l)}var Q=O;e(O.h,S),e(O.i,S),o(O)}function f(O,k,S){k=k||{},S=S||window,this.family=O,this.style=k.style||"normal",this.weight=k.weight||"normal",this.stretch=k.stretch||"normal",this.context=S}var A=null,m=null,w=null,x=null;function E(O){return x===null&&(x=!!O.document.fonts),x}function T(O,k){var S=O.style,Q=O.weight;if(w===null){var R=document.createElement("div");try{R.style.font="condensed 100px sans-serif"}catch(V){}w=R.style.font!==""}return[S,Q,w?O.stretch:"","100px",k].join(" ")}f.prototype.load=function(O,k){var S=this,Q=O||"BESbswy",R=0,V=k||3e3,b=new Date().getTime();return new Promise(function(Y,rt){if(E(S.context)&&!function(s){return m===null&&(E(s)&&/Apple/.test(window.navigator.vendor)?(s=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),m=!!s&&603>parseInt(s[1],10)):m=!1),m}(S.context)){var q=new Promise(function(s,u){(function d(){new Date().getTime()-b>=V?u(Error(V+"ms timeout exceeded")):S.context.document.fonts.load(T(S,'"'+S.family+'"'),Q).then(function(r){1<=r.length?s():setTimeout(d,25)},u)})()}),h=new Promise(function(s,u){R=setTimeout(function(){u(Error(V+"ms timeout exceeded"))},V)});Promise.race([h,q]).then(function(){clearTimeout(R),Y(S)},rt)}else(function(s){document.body?s():document.addEventListener?document.addEventListener("DOMContentLoaded",function u(){document.removeEventListener("DOMContentLoaded",u),s()}):document.attachEvent("onreadystatechange",function u(){document.readyState!="interactive"&&document.readyState!="complete"||(document.detachEvent("onreadystatechange",u),s())})})(function(){function s(){var B;(B=a!=-1&&c!=-1||a!=-1&&p!=-1||c!=-1&&p!=-1)&&((B=a!=c&&a!=p&&c!=p)||(A===null&&(B=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),A=!!B&&(536>parseInt(B[1],10)||parseInt(B[1],10)===536&&11>=parseInt(B[2],10))),B=A&&(a==g&&c==g&&p==g||a==v&&c==v&&p==v||a==y&&c==y&&p==y)),B=!B),B&&(_.parentNode!==null&&_.parentNode.removeChild(_),clearTimeout(R),Y(S))}var u=new n(Q),d=new n(Q),r=new n(Q),a=-1,c=-1,p=-1,g=-1,v=-1,y=-1,_=document.createElement("div");_.dir="ltr",i(u,T(S,"sans-serif")),i(d,T(S,"serif")),i(r,T(S,"monospace")),_.appendChild(u.g),_.appendChild(d.g),_.appendChild(r.g),S.context.document.body.appendChild(_),g=u.g.offsetWidth,v=d.g.offsetWidth,y=r.g.offsetWidth,function B(){if(new Date().getTime()-b>=V)_.parentNode!==null&&_.parentNode.removeChild(_),rt(Error(V+"ms timeout exceeded"));else{var N=S.context.document.hidden;N!==!0&&N!==void 0||(a=u.g.offsetWidth,c=d.g.offsetWidth,p=r.g.offsetWidth,s()),R=setTimeout(B,50)}}(),l(u,function(B){a=B,s()}),i(u,T(S,'"'+S.family+'",sans-serif')),l(d,function(B){c=B,s()}),i(d,T(S,'"'+S.family+'",serif')),l(r,function(B){p=B,s()}),i(r,T(S,'"'+S.family+'",monospace'))})})},t.exports=f})()})(y0);const b0=Aa(y0.exports);class Ic{constructor(e,n,i){vt(this,"tempPromise");vt(this,"repoSrc");vt(this,"cacheList");this.canvas=e,this.editor=n,this.repoSrc=i.repoSrc,this.cacheList=[],this.tempPromise=null}hookImportBefore(e){return this.downFontByJSON(e)}getFontList(){return this.cacheList.length?Promise.resolve(this.cacheList):(this.tempPromise||(this.tempPromise=Xn.get("".concat(this.repoSrc,"/api/fonts?populate=*&pagination[pageSize]=100")).then(e=>{var i;const n=(i=e.data.data)==null?void 0:i.map(o=>({name:o.attributes.name,type:o.attributes.type,file:this.repoSrc+o.attributes.file.data.attributes.url,img:this.repoSrc+o.attributes.img.data.attributes.url}));return this.cacheList=n,this.createFontCSS(n),n})),this.tempPromise)}downFontByJSON(e){const n=JSON.parse(e);let i=[];const o=["arial"];i=n.objects?JSON.parse(e).objects.filter(f=>{const A=this.cacheList.find(m=>m.name===f.fontFamily);return f.type.includes("text")&&!o.includes(f.fontFamily)&&A}).map(f=>f.fontFamily):o.includes(n.fontFamily)?[]:[n.fontFamily];const l=i.map(f=>new b0(f).load(null,15e4));return Promise.all(l)}getFontJson(){const e=this.canvas.getActiveObject();if(e){const n=e.toJSON(["id","gradientAngle","selectable","hasControls"]),i="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(n,null,"	"))),o=e.toDataURL({});to(i,"font.json"),to(o,"font.png")}}loadFont(e){return new b0(e).load(null,15e4).then(()=>{const n=this.canvas.getActiveObjects()[0];n&&(n.set("fontFamily",e),this.canvas.renderAll())})}createFontCSS(e){let n="";e.forEach(o=>{n+="\n    @font-face {\n      font-family: ".concat(o.name,";\n      src: url('").concat(o.file,"');\n    }\n    ")});const i=document.createElement("style");try{i.appendChild(document.createTextNode(n))}catch(o){}document.getElementsByTagName("head")[0].appendChild(i)}destroy(){}}vt(Ic,"pluginName","FontPlugin"),vt(Ic,"apis",["getFontList","loadFont","getFontJson","downFontByJSON"]);const mx=function(t,e,n,i){const o=e.target,l=o.controls[o.__corner],f=o.toLocalPoint(new st.fabric.Point(n,i),"center","center"),A=C0(o),m=o._getTransformedDimensions(0,0);return o.points!=null&&(o.points[l.pointIndex]=new st.fabric.Point(f.x*A.x/m.x+o.pathOffset.x,f.y*A.y/m.y+o.pathOffset.y),!0)},yx=function(t,e){return function(n,i,o,l){const f=i.target;if(f.points==null)return!1;const A=st.fabric.util.transformPoint(new st.fabric.Point(f.points[t].x-f.pathOffset.x,f.points[t].y-f.pathOffset.y),f.calcTransformMatrix()),m=e(n,i,o,l),w=C0(f),x=(f.points[t].x-f.pathOffset.x)/w.x+.5,E=(f.points[t].y-f.pathOffset.y)/w.y+.5;return f.setPositionByOrigin(A,x,E),m}},C0=function(t){const e=new st.fabric.Point(t.strokeUniform?1/t.scaleX:1,t.strokeUniform?1/t.scaleY:1).multiply(t.strokeWidth);return new st.fabric.Point(t.width+e.x,t.height+e.y)},bx=function(t,e,n){const i=n.points[this.pointIndex].x-n.pathOffset.x,o=n.points[this.pointIndex].y-n.pathOffset.y;return st.fabric.util.transformPoint(new st.fabric.Point(i,o),st.fabric.util.multiplyTransformMatrices(n.canvas.viewportTransform,n.calcTransformMatrix()))};class rs{constructor(e,n){vt(this,"isEdit");vt(this,"img");vt(this,"_onDeselected",Bo);this.canvas=e,this.editor=n,this.isEdit=!1;const i=document.createElement("img");i.src=p0,this.img=i,this.init()}init(){}_ensureEvent(e){e.off("deselected",this._onDeselected)}toggleEdit(){this.isEdit?this.inActiveEdit():this.activeEdit()}activeEdit(){this.isEdit=!0;const e=this.canvas.getActiveObject();if(e&&e.type==="polygon"){if(this._ensureEvent(e),e.points==null)return;const n=e.points.length-1,i=this;e.controls=e.points.reduce(function(o,l,f){return o["p"+f]=new st.fabric.Control({positionHandler:bx,actionHandler:yx(f>0?f-1:n,mx),actionName:"modifyPolygon",render:(...A)=>function(m,w,x,E,T,O){r0(m,w,x,O,25,25,st.fabric.util.degreesToRadians(T.angle||0))}(...A,i.img)}),Object.defineProperty(o["p"+f],"pointIndex",{value:f}),o},{}),e.set({objectCaching:!1}),e.hasBorders=!this.isEdit,this.canvas.requestRenderAll(),this._onDeselected=()=>this.inActiveEdit(e),e.on("deselected",this._onDeselected)}}inActiveEdit(e){this.isEdit=!1,(e=e||this.canvas.getActiveObject())&&e.type==="polygon"&&(e.cornerColor="blue",e.cornerStyle="rect",e.controls=st.fabric.Object.prototype.controls,e.hasBorders=!this.isEdit,e.set({objectCaching:!0}),this._onDeselected&&(e.off("deselected",this._onDeselected),this._onDeselected=Bo)),this.canvas.requestRenderAll()}}vt(rs,"pluginName","PolygonModifyPlugin"),vt(rs,"events",[]),vt(rs,"apis",["toggleEdit","activeEdit","inActiveEdit"]);class kc{constructor(e,n){vt(this,"isDrawingPolygon",!1);vt(this,"points",[]);vt(this,"lines",[]);vt(this,"anchors",[]);vt(this,"tempPoint");vt(this,"tempLine");vt(this,"lastPoint");vt(this,"onEnd");vt(this,"delta",5);vt(this,"_escListener",e=>{e.key!=="Escape"&&e.keyCode!==27||this._confirmBuildPolygon()});vt(this,"_downHandler",e=>{if(!this.isDrawingPolygon)return;const n=e.absolutePointer,i=new st.fabric.Point(n.x,n.y),o=this._mackAnchor(n);if(this.anchors.push(o),this.tempLine==null){const l=new st.fabric.Point(n.x,n.y);this.tempLine=this._makeLine([l,l]),this.canvas.add(this.tempLine)}else e.e.shiftKey&&i.setXY(this.tempLine.x2,this.tempLine.y2),o.set({left:i.x,top:i.y}),this.tempLine.set({x1:i.x,y1:i.y,x2:i.x,y2:i.y});if(this.lastPoint){const l=this._makeLine([this.lastPoint,i]);if(this.lines.push(l),this.canvas.add(l),this.points[0].distanceFrom(i)/this.canvas.getZoom()<=this.delta)return void this._confirmBuildPolygon()}this.canvas.add(o),this.lastPoint=i,this.points.push(i),this._ensureAnchorsForward()});vt(this,"_moveHandler",e=>{if(!this.isDrawingPolygon||!this.tempLine)return;const n=e.absolutePointer;if(e.e.shiftKey&&this.lastPoint){const i=function(o,l){const f=o.x,A=o.y,m=l.x-f,w=l.y-A,x=Math.sqrt(m*m+w*w);let E=Math.atan2(w,m)/Math.PI*180;return E=15*~~((E+7.5)%360/15),{x:x*Math.cos(E*Math.PI/180)+f,y:x*Math.sin(E*Math.PI/180)+A}}(this.lastPoint,n);this.tempLine.set({x2:i.x,y2:i.y})}else this.tempLine.set({x2:n.x,y2:n.y});this.canvas.renderAll()});this.canvas=e,this.editor=n}_isUsingHistory(){return this.canvas.offHistory&&typeof this.canvas.offHistory=="function"}_bindEvent(){window.addEventListener("keydown",this._escListener),this.canvas.on("mouse:down",this._downHandler),this.canvas.on("mouse:move",this._moveHandler)}_ensureAnchorsForward(){this.anchors.forEach(e=>{e.bringForward()})}_unbindEvent(){window.removeEventListener("keydown",this._escListener),this.canvas.off("mouse:down",this._downHandler),this.canvas.off("mouse:move",this._moveHandler)}_createPolygon(e){return new st.fabric.Polygon(e,{fill:"#ccccccff",id:Ie()})}_makeLine(e){const[n,i]=e;return new st.fabric.Line([n.x,n.y,i.x,i.y],{fill:"#000",stroke:"#000",strokeWidth:1,selectable:!1,evented:!1})}_mackAnchor(e){return new st.fabric.Circle({radius:5,left:e.x,top:e.y,fill:"rgb(178, 53, 84)",scaleX:1/this.canvas.getZoom(),scaleY:1/this.canvas.getZoom(),strokeWidth:1/this.canvas.getZoom(),originX:"center",originY:"center",evented:!1,selectable:!1})}_confirmBuildPolygon(){const e=this.points;if(this.discardPolygon(),this._isUsingHistory()&&(this.canvas.historyProcessing=!1),e.length>=3){const n=this._createPolygon(e);this.canvas.add(n)}}_prepare(){this.canvas.discardActiveObject(),this.canvas.getObjects().forEach(e=>{e.selectable=!1,e.hasControls=!1})}beginDrawPolygon(e){this._prepare(),this.onEnd=e,this._isUsingHistory()&&(this.canvas.historyProcessing=!0),this.canvas.requestRenderAll(),this.isDrawingPolygon=!0,this._bindEvent()}endDrawPolygon(){this.canvas.discardActiveObject(),this.isDrawingPolygon=!1,this.lastPoint=void 0,this.tempPoint=void 0,this._unbindEvent(),this.onEnd&&this.onEnd(),this.onEnd=void 0}discardPolygon(){this.lines.forEach(e=>{this.canvas.remove(e)}),this.anchors.forEach(e=>{this.canvas.remove(e)}),this.tempLine&&this.canvas.remove(this.tempLine),this.tempLine=void 0,this.anchors=[],this.lines=[],this.points=[],this.endDrawPolygon()}}vt(kc,"pluginName","DrawPolygonPlugin"),vt(kc,"apis",["beginDrawPolygon","endDrawPolygon","discardPolygon"]);class Bc{constructor(e,n){vt(this,"_createdHandler",e=>{e.path.set("id",Ie())});this.canvas=e,this.editor=n}_bindEvent(){this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("path:created",this._createdHandler)}startDraw(e){this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new st.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.width=e.width,this._bindEvent()}endDraw(){if(this.canvas.isDrawingMode)return this.canvas.isDrawingMode=!1,void this._unbindEvent()}}vt(Bc,"pluginName","FreeDrawPlugin"),vt(Bc,"apis",["startDraw","endDraw"]);class Oc{constructor(e,n){vt(this,"options");vt(this,"_beforeHandler",e=>{if(this.options==null)return;const n=e.path,i=st.fabric.util.getPathSegmentsInfo;n.segmentsInfo=i(n.path),n.set({stroke:this.options.lineColor});const o=this.options.defaultText,l=this.options.defaultFontSize,f=new st.fabric.IText(o,{shadow:"",fontFamily:"arial",fontSize:l,top:n.top,left:n.left,fill:this.options.color,path:n,id:Ie(),editable:!1});this.canvas.add(f)});vt(this,"_createdHandler",e=>{this.canvas.remove(e.path)});this.canvas=e,this.editor=n}_bindEvent(){this.canvas.on("before:path:created",this._beforeHandler),this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("before:path:created",this._beforeHandler),this.canvas.off("path:created",this._createdHandler)}startTextPathDraw(e={}){this.options={decimate:8,width:2,defaultText:"\u8BF8\u4E8B\u987A\u9042 \u4E07\u4E8B\u5927\u5409",color:"#000000",lineColor:"#000000",defaultFontSize:20,...e},this.canvas.isDrawingMode=!0;const n=this.canvas.freeDrawingBrush=new st.fabric.PencilBrush(this.canvas);n.decimate=this.options.decimate,n.width=this.options.width,n.color=this.options.color,this._bindEvent()}endTextPathDraw(){this.canvas.isDrawingMode=!1,this._unbindEvent()}}vt(Oc,"pluginName","PathTextPlugin"),vt(Oc,"apis",["startTextPathDraw","endTextPathDraw"]);async function Cx(t){const e=function(){return{version:"5.3.0",objects:[],clipPath:null}}(),{clipPath:n,workspase:i}=function(f){const{width:A,height:m}=f;return{clipPath:{type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:A,height:m,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0},workspase:{type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:A,height:m,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,id:"workspace",selectable:!1,hasControls:!0}}}(t);e.clipPath=n,e.objects.push(i);const o=function(f){const A=[];function m(w){w.forEach(x=>{x.children?m(x.children):A.push(x)})}return m(f),A}(t.children),l=await async function(f){function A(m){return m.filter(w=>(w.text&&(w.type="text"),!w.isHidden)).map(async w=>{const x=w0(["left","top",["width",k=>k.width+50],"height","name",["visible",()=>!0],["opacity",k=>255/k.opacity],["id",Ie]])(w),E=[{sourceType:"Layer",targetType:"image",attr:[],customTransform:async k=>({src:await async function(S){try{const Q=await S.composite(),R=document.createElement("canvas"),V=R.getContext("2d"),b=new ImageData(Q,S.width,S.height);return R.width=S.width,R.height=S.height,V.putImageData(b,0,0),R.toDataURL("image/png")}catch(Q){return""}}(k)})},{sourceType:"text",targetType:"textbox",attr:["text"],async customTransform(k){const{FontSize:S,FillColor:Q,Tracking:R}=k.textProperties.EngineDict.StyleRun.RunArray[0].StyleSheet.StyleSheetData;return{charSpacing:R,fontFamily:"\u7AD9\u9177\u5FEB\u4E50\u4F53",fill:wx(Q.Values),fontSize:S||12}}}],T="type",O=E.find(k=>k.sourceType===w[T]);if(O){const k=x0(O.targetType),S=w0(O.attr)(w),Q=O.customTransform?await O.customTransform(w):null;return K.assign(k,x,k,S,Q)}return{...x0("textbox")}})}return await Promise.all(A(f))}(o);return e.objects.push(...l.reverse()),JSON.stringify(e,null,2)}function w0(t){return function(e){const n={desc:{}};return t.forEach(i=>{if(typeof i=="string"){const o=K.get(e,i);K.set(n,i,o)}else{const[o,l]=i;if(typeof l=="function"){const f=l(e);f&&K.set(n,o,f)}else{const f=K.get(e,l);K.set(n,o,f)}}}),n}}function x0(t){return{group:{type:"group",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,selectable:!0,hasControls:!0},textbox:{type:"textbox",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:"",backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,fontFamily:"arial",fontWeight:"normal",fontSize:80,text:"\u8BF8\u4E8B\u987A\u9042",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",charSpacing:0,styles:[],direction:"ltr",path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",minWidth:20,splitByGrapheme:!0,selectable:!0,hasControls:!0},image:{type:"image",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,cropX:0,cropY:0,selectable:!0,hasControls:!0,src:"",crossOrigin:"anonymous",filters:[]},rect:{type:"rect",version:"5.3.0",originX:"center",originY:"center",left:0,top:0,width:226,height:302,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0,inverted:!1,absolutePositioned:!1}}[t]}function wx(t){const[,e,n,i]=t;return"rgb(".concat(255*e,", ").concat(255*n,", ").concat(255*i,")")}class xx{constructor(e,n){this.layerFrame=e,this.parent=n,this.type="Group",this.children=[]}get name(){var e,n;return(n=(e=this.layerFrame)===null||e===void 0?void 0:e.layerProperties.name)!==null&&n!==void 0?n:""}get opacity(){var e,n;return(n=(e=this.layerFrame)===null||e===void 0?void 0:e.layerProperties.opacity)!==null&&n!==void 0?n:0}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get additionalProperties(){var e;return(e=this.layerFrame)===null||e===void 0?void 0:e.layerProperties.additionalLayerProperties}addChild(e){this.children.push(e)}hasChildren(){return this.children.length!==0}freeze(){this.children.forEach(e=>{var n,i;return(i=(n=e).freeze)===null||i===void 0?void 0:i.call(n)}),Object.freeze(this.children)}}var me,Pe,Tc,Fn;(Pe=me||(me={})).SectionDividerSetting="lsct",Pe.TypeToolObjectSetting="TySh",Pe.UnicodeLayerName="luni",Pe.VectorStrokeData="vstk",Pe.ObjectBasedEffects="lfx2",Pe.GradientFillSetting="GdFl",Pe.SolidColorSheetSetting="SoCo",Pe.PatternFillSetting="PtFl",Pe.VectorStrokeContentData="vscg",Pe.BlendOptionsCapacity="iOpa",Pe.VectorMaskSetting1="vmsk",Pe.VectorMaskSetting2="vsms",Pe.HueSaturation="hue2",Pe.NestedSectionDividerSetting="lsdk",Pe.LayerId="lyid",Pe.ArtboardData="artb",Pe.SmartObjectPlacedLayerData="SoLE",Pe.PlacedLayerData="SoLd",Pe.LinkedLayer="lnkD",Pe.LinkedLayer2="lnk2",Pe.LinkedLayer3="lnk3",function(t){t[t.Normal=0]="Normal",t[t.SceneGroup=1]="SceneGroup"}(Tc||(Tc={})),function(t){t[t.ClosedSubpathLength=0]="ClosedSubpathLength",t[t.ClosedSubpathBezierKnotLinked=1]="ClosedSubpathBezierKnotLinked",t[t.ClosedSubpathBezierKnotUnlinked=2]="ClosedSubpathBezierKnotUnlinked",t[t.OpenSubpathLength=3]="OpenSubpathLength",t[t.OpenSubpathBezierKnotLinked=4]="OpenSubpathBezierKnotLinked",t[t.OpenSubpathBezierKnotUnlinked=5]="OpenSubpathBezierKnotUnlinked",t[t.PathFillRule=6]="PathFillRule",t[t.Clipboard=7]="Clipboard",t[t.InitialFillRule=8]="InitialFillRule"}(Fn||(Fn={}));const Dc=(t,e)=>{const n=Math.max(t.length,e.length);for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0};class Ut extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name}}class _x extends Ut{}class _0 extends Ut{}class Ex extends Ut{}class Sx extends Ut{}class Ix extends Ut{}class kx extends Ut{}class Bx extends Ut{}class Ox extends Ut{}class Tx extends Ut{}class Dx extends Ut{}class E0 extends Ut{}class S0 extends Ut{}class Mx extends Ut{}class Qx extends Ut{}class Lx extends Ut{}class Px extends Ut{}class jx extends Ut{}class Fx extends Ut{}class Rx extends Ut{}class Nx extends Ut{}class zx extends Ut{}class Vx extends Ut{}class Ux extends Ut{}class Hx extends Ut{}class Zo extends Ut{}class I0 extends Ut{}class Gx extends Ut{}class k0 extends Ut{}class Mc extends Ut{}class Yx extends Ut{}class Wx extends Ut{}class Xx extends Ut{}class $x extends Ut{}class qx extends Ut{}class Kx extends Ut{}class Jx extends Ut{}class Zx extends Ut{}class t_ extends Ut{}class e_ extends Ut{}class n_ extends Ut{}class B0 extends Ut{}class Qc extends Ut{}class i_ extends Ut{}class r_ extends Ut{}function O0(t,e){const n=t.getUint32(e),i=t.getUint32(e+4);if(n>=2097152)throw new I0;return 4294967296*n+i}const o_={u8:1,i8:1,u16:2,i16:2,u32:4,i32:4,f32:4,u64:8,i64:8,f64:8};class Vi{static from(e){return new Vi(new DataView(e.buffer,e.byteOffset,e.byteLength))}constructor(e,n=0){this.dataView=e,this.position=n}get length(){return this.dataView.byteLength}clone(e){const n=e!==void 0?e:this.position;return new Vi(new DataView(this.dataView.buffer,this.dataView.byteOffset,this.dataView.byteLength),n)}pass(e){this.position+=e}unpass(e){this.position-=e}extract(e){if(this.position+e>this.dataView.byteLength)throw new Nx;return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e)}iter(){return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position)}take(e){const n=this.extract(e);return this.pass(e),n}peek(){return this.dataView.getUint8(this.position)}one(){const e=this.dataView.getUint8(this.position);return this.position+=1,e}read(e){const{dataView:n,position:i}=this;switch(this.pass(o_[e]),e){case"u8":return n.getUint8(i);case"u16":return n.getUint16(i);case"u32":return n.getUint32(i);case"u64":return O0(n,i);case"i8":return n.getInt8(i);case"i16":return n.getInt16(i);case"i32":return n.getInt32(i);case"i64":return function(o,l){const f=o.getInt32(l),A=o.getUint32(l+4);if(f>=2097152||f<-2097152||f===-2097152&&A===0)throw new I0;return 4294967296*f+A}(n,i);case"f32":return n.getFloat32(i);case"f64":return n.getFloat64(i);default:throw new TypeError("Invalid ReadType: ".concat(e))}}readString(e){const n=this.take(e);return new TextDecoder().decode(n)}readUnicodeString(e=4){const n=2*this.read("u32"),i=this.take(n),o=new TextDecoder("utf-16be").decode(i);return this.padding(4+n,e),o.charCodeAt(o.length-1)===0?o.slice(0,-1):o}readFixedPoint32bit(){return this.read("u32")/65536}readIdString(){const e=this.read("u32");return this.readString(e||4)}padding(e,n){const i=e%n;i>0&&this.pass(n-i)}}const Lc=(t,e,n)=>e<=t&&t<=n;function os(t){return t.bottom-t.top}function T0(t){return function(e){return e.right-e.left}(t)*os(t)}var as,eo,Pc,jc,de,Fc,no;function D0(t){const e=Object.keys(as);for(const n of e)if(as[n]===t)return t;throw new Dx}function io(t,e,n){const i=t.items.get(e);if(!i)throw new qx('Cannot find key "'.concat(e,'" in descriptor'));if(i.type!==n)throw new Kx('Unexpected descriptor value type: expected "'.concat(n,'" but got "').concat(i.type,'"'));return i}(function(t){t.PassThrough="pass",t.Normal="norm",t.Dissolve="diss",t.Darken="dark",t.Multiply="mul ",t.ColorBurn="idiv",t.LinearBurn="lbrn",t.DarkerColor="dkCl",t.Lighten="lite",t.Screen="scrn",t.ColorDodge="div ",t.LinearDodge="lddg",t.LighterColor="lgCl",t.Overlay="over",t.SoftLight="sLit",t.HardLight="hLit",t.VividLight="vLit",t.LinearLight="lLit",t.PinLight="pLit",t.HardMix="hMix",t.Difference="diff",t.Exclusion="smud",t.Subtract="fsub",t.Divide="fdiv",t.Hue="hue ",t.Saturation="sat ",t.Color="colr",t.Luminosity="lum "})(as||(as={})),function(t){t[t.Base=0]="Base",t[t.NonBase=1]="NonBase"}(eo||(eo={})),function(t){t[t.Bitmap=0]="Bitmap",t[t.Grayscale=1]="Grayscale",t[t.Indexed=2]="Indexed",t[t.Rgb=3]="Rgb",t[t.Cmyk=4]="Cmyk",t[t.Multichannel=7]="Multichannel",t[t.Duotone=8]="Duotone",t[t.Lab=9]="Lab"}(Pc||(Pc={})),function(t){t[t.One=1]="One",t[t.Eight=8]="Eight",t[t.Sixteen=16]="Sixteen",t[t.ThirtyTwo=32]="ThirtyTwo"}(jc||(jc={})),function(t){t.Alias="alis",t.Boolean="bool",t.Class="type",t.Descriptor="Objc",t.Double="doub",t.Enumerated="enum",t.GlobalClass="GlbC",t.GlobalObject="GlbO",t.Integer="long",t.LargeInteger="comp",t.List="VlLs",t.RawData="tdta",t.Reference="obj ",t.String="TEXT",t.UnitFloat="UntF",t.UnitFloats="UnFl",t.ObjectArray="ObAr"}(de||(de={})),function(t){t.Angle="#Ang",t.Density="#Rsl",t.Distance="#Rlt",t.Millimeters="#Mlm",t.None="#Nne",t.Percent="#Prc",t.Pixels="#Pxl",t.Points="#Pnt"}(Fc||(Fc={})),function(t){t[t.PSD=1]="PSD",t[t.PSB=2]="PSB"}(no||(no={}));const a_=[56,66,80,83],s_=[0,0,0,0,0,0],l_=[1,8,16,32];function c_(t,e,n,i,o){const l=new Vi(t),f=l.read("u16");if(!(f in ni))throw new E0;const{red:A,green:m,blue:w,alpha:x}=(()=>{switch(f){case ni.RawData:return function(E,T,O){const k=(E.length-2)/O,S=E.extract(k),Q=O>=2?E.extract(k):void 0,R=O>=3?E.extract(k):void 0,V=O>=4?E.extract(k):void 0;if(T===jc.Eight)return{red:S,green:Q,blue:R,alpha:V};throw new Mx("Unsupported image bit depth: ".concat(T))}(l,e,i);case ni.RleCompressed:return function(E,T,O,k){let S=0,Q=0,R=0,V=0;const b=k.rleScanlineLengthFieldReadType;for(let q=0;q<O;q++)S+=E.read(b);if(T>=2)for(let q=0;q<O;q++)Q+=E.read(b);if(T>=3)for(let q=0;q<O;q++)R+=E.read(b);if(T===4)for(let q=0;q<O;q++)V+=E.read(b);const Y=2+T*O*k.rleScanlineLengthFieldSize,rt=E.clone(Y);return{red:rt.take(S),green:Q?rt.take(Q):void 0,blue:R?rt.take(R):void 0,alpha:V?rt.take(V):void 0}}(l,i,n,o);default:throw new S0}})();return{compression:f,red:A,green:m,blue:w,alpha:x}}const u_=[56,66,73,77];function h_(t){const e=t.take(4);if(!Dc(e,u_))throw new Rx;const n=t.read("i16"),i=function(x,E=0){const T=x.read("u8"),O=x.readString(T);if(E){const k=(T+1)%E;k>0&&x.pass(E-k)}return O}(t,2),o=t.read("u32"),l=t.position+o,f=o+o%2,A=t.position;let m=null;switch(n){case hn.GridAndGuides:m=function(x){const E=x.read("u32");if(E!==1)throw new zx;const T=x.read("u32"),O=x.read("u32"),k=x.read("u32"),S=[];for(let Q=0;Q<k;++Q){const R=x.read("i32"),V=N_(x.read("u8"));S.push({position:R,direction:V})}return{version:E,gridSizeX:T,gridSizeY:O,guides:S}}(t);break;case hn.Slices:m=function(x,E){const T=x.read("u32");if(T===6){const O=x.read("i32"),k=x.read("i32"),S=x.read("i32"),Q=x.read("i32"),R=x.readUnicodeString(0),V=x.read("u32"),b=[];for(;b.length<V;){const Y=x.read("u32"),rt=x.read("u32"),q=z_(x.read("u32")),h=q===1?x.read("u32"):void 0;b.push({id:Y,groupId:rt,origin:q,associatedLayerId:h,name:x.readUnicodeString(0),type:x.read("u32"),left:x.read("i32"),top:x.read("i32"),right:x.read("i32"),bottom:x.read("i32"),url:x.readUnicodeString(0),target:x.readUnicodeString(0),message:x.readUnicodeString(0),altTag:x.readUnicodeString(0),isCellTextHtml:!!x.read("u8"),cellText:x.readUnicodeString(0),horizontalAlignment:x.read("i32"),verticalAlignment:x.read("i32"),alpha:x.read("u8"),red:x.read("u8"),green:x.read("u8"),blue:x.read("u8")})}return{version:T,boundTop:O,boundLeft:k,boundBottom:S,boundRight:Q,sliceGroupName:R,slices:b,descriptor:x.position<E?Rn(x):void 0}}if(T===7||T===8)return{version:T,descriptor:Rn(x)};throw new Ux("Invalid Slices section version: ".concat(T))}(t,l);break;case hn.ICCProfile:m=function(x,E){return x.take(E-x.position)}(t,l);break;case hn.ResolutionInfo:m=function(x){return{horizontal:x.readFixedPoint32bit(),horizontalUnit:x.read("u16"),widthUnit:x.read("u16"),vertical:x.readFixedPoint32bit(),verticalUnit:x.read("u16"),heightUnit:x.read("u16")}}(t);break;case hn.GlobalLightAltitude:case hn.GlobalLightAngle:m=t.read("i32")}const w=A+f-t.position;return w>0&&t.pass(w),{id:n,name:i,resource:m}}function M0(t){const e={};for(const[n,i]of t)e[n]=i;return e}const Q0=(t,e,n)=>{const{top:i,left:o,bottom:l,right:f,opacity:A,clipping:m,hidden:w,transparencyLocked:x,blendMode:E,layerText:T,engineData:O,maskData:k,additionalLayerInfos:S}=e,Q=M0(S.map(R=>[R.key,R]));return{name:t,top:i,left:o,bottom:l,right:f,opacity:A,clippingMask:m,hidden:w,transparencyLocked:x,blendMode:E,groupId:n,text:T,textProperties:O,maskData:k,additionalLayerProperties:Q}};class Rc{static create(e,n,i){const o=Q0(e.name,e,i);return new Rc(n,o)}constructor(e,n){this.channels=e,this.layerProperties=n}get red(){const e=this.channels.get(en.Red);if(e===void 0)throw new Lx;return e}get green(){return this.channels.get(en.Green)}get blue(){return this.channels.get(en.Blue)}get alpha(){return this.channels.get(en.TransparencyMask)}get userMask(){return this.channels.get(en.UserSuppliedLayerMask)}get realUserMask(){return this.channels.get(en.RealUserSuppliedLayerMask)}get width(){const{right:e,left:n}=this.layerProperties;return e-n+1}get height(){const{bottom:e,top:n}=this.layerProperties;return e-n+1}}class Nc{static create(e,n,i,o){const l=Q0(e,i,o);return new Nc(n,l)}constructor(e,n){this.id=e,this.layerProperties=n}}function d_(t){return{data:Rn(t)}}function f_(t){return{fillOpacity:t.read("u8")}}function p_(t){return{data:Rn(t)}}function zc(t){return{hue:t.read("i16"),saturation:t.read("i16"),lightness:t.read("i16")}}function g_(t){return Array.from(Array(6),()=>function(e){return{beginRamp:e.read("i16"),beginSustain:e.read("i16"),endSustain:e.read("i16"),endRamp:e.read("i16"),...zc(e)}}(t))}function v_(t){const e=t.read("u16"),n=t.read("u8");return t.pass(1),{version:e,colorize:n,colorization:zc(t),master:zc(t),adjustment:n?void 0:g_(t)}}function A_(t){return{value:t.read("u32")}}function m_(t,e){const n=[];let i=0;const o=t.position+e;for(;t.position<o&&(i=t.read("u64"));){const l=t.position,f=y_(t);n.push(f);const A=i-(t.position-l);t.pass(A),t.padding(t.position,4)}return{layers:n}}function y_(t){const e=t.readString(4);if(e!=="liFD")throw new Yx("unknown layer type: '".concat(e,"'"));const n=t.read("i32"),i=function(m){const w=m.read("u8");return m.readString(w)}(t),o=t.readUnicodeString(0),l=t.readString(4),f=t.readString(4),A=t.read("u64");return{layerType:e,version:n,uniqueId:i,filename:o,filetype:l,creator:f,data:t.read("u8")?Rn(t):void 0,contents:t.take(A),uuid:n>5?t.readUnicodeString():void 0}}function b_(t){const e=t.read("u32"),n=t.read("u32");return{version:e,descriptor:ss(t),descriptorVersion:n}}function C_(t){return{data:Rn(t)}}function w_(t,e){const n=function(f){if(f in oo)return f;throw new Tx}(t.read("u32"));if(e<12)return{dividerType:n};const i=t.readString(4);if(i!=="8BIM")throw new k0("Invalid Section Divider Setting signature: ".concat(i));const o=D0(t.readString(4));if(e<16)return{dividerType:n,dividerSignature:i,blendMode:o};const l=t.read("u32");if(!(l in Tc))throw new k0("Invalid Section Divider Setting subtype: ".concat(l));return{dividerType:n,dividerSignature:i,blendMode:o,subType:l}}function x_(t){const e=t.readString(4),n=t.read("u32");return{data:Rn(t),version:n,identifier:e}}function __(t){return{version:t.read("u32"),data:ss(t)}}function E_(t){const e=t.read("u16");if(e!==1)throw new Mc("Invalid type tool object setting version: ".concat(e));const n=t.read("f64"),i=t.read("f64"),o=t.read("f64"),l=t.read("f64"),f=t.read("f64"),A=t.read("f64"),m=t.read("u16");if(m!==50)throw new Mc("Invalid text version: ".concat(m));const w=Rn(t),x=t.read("u16");if(x!==1)throw new Mc("Invalid warp version: ".concat(x));return{version:e,transformXX:n,transformXY:i,transformYX:o,transformYY:l,transformTX:f,transformTY:A,textVersion:m,textData:w,warpVersion:x,warpData:Rn(t),left:t.read("f64"),top:t.read("f64"),right:t.read("f64"),bottom:t.read("f64")}}function S_(t){return{name:t.readUnicodeString(0)}}function L0(t){const[e,...n]=t.take(4);return e+(65536*n[0]+256*n[1]+n[2])/2**24}function Vc(t){return{vert:L0(t),horiz:L0(t)}}function I_(t){const e=t.read("u16");switch(e){case Fn.OpenSubpathLength:case Fn.ClosedSubpathLength:return function(n,i){const o=n.read("i16"),l=n.read("i16"),f=n.read("i16");n.pass(6);const A=n.read("i16");return n.pass(10),{type:i,length:o,operation:l,subpathType:f,index:A}}(t,e);case Fn.PathFillRule:return t.pass(24),{type:e};case Fn.Clipboard:return function(n,i){const o=Array(4).map(()=>n.read("f32")),l=n.read("f32");return n.pass(6),{type:i,bounds:o,resolution:l}}(t,e);case Fn.InitialFillRule:return function(n,i){const o=!!(1&n.read("i16"));return n.pass(22),{type:i,fill:o}}(t,e);case Fn.ClosedSubpathBezierKnotLinked:case Fn.ClosedSubpathBezierKnotUnlinked:case Fn.OpenSubpathBezierKnotLinked:case Fn.OpenSubpathBezierKnotUnlinked:return function(n,i){return{type:i,preceding:Vc(n),anchor:Vc(n),leaving:Vc(n)}}(t,e);default:throw new Error("Unknown PathRecordType: ".concat(e," (bug in offsets?)"))}}function k_(t,e){const n=t.read("u32"),i=t.read("u32"),o=function(l,f){const A=Math.floor(f/26);return Array.from(Array(A),()=>I_(l))}(t,e);return{version:n,pathRecords:o,invert:!!(1&i),notLink:!!(2&i),disable:!!(4&i)}}function B_(t){return{version:t.read("u32"),data:Rn(t)}}function O_(t){return{data:Rn(t)}}function P0(t,e,n=0){const i=t.readString(4);if(i!=="8BIM"&&i!=="8B64")throw new Gx("Invalid signature: ".concat(i));const o=t.readString(4),l=t.read(function(w,x){if(x.aliLengthFieldSizeIsVariable)switch(w){case"LMsk":case"Lr16":case"Lr32":case"Layr":case"Mt16":case"Mt32":case"Mtrn":case"Alph":case"FMsk":case"Ink2":case"FEid":case"FXid":case"PxSD":case"cinf":return"u64"}return"u32"}(o,e)),f=t.position,A=function(w,x,E,T){switch(E){case me.NestedSectionDividerSetting:case me.SectionDividerSetting:return{signature:x,key:E,...w_(w,T)};case me.TypeToolObjectSetting:return{signature:x,key:E,...E_(w)};case me.UnicodeLayerName:return{signature:x,key:E,...S_(w)};case me.VectorStrokeData:return{signature:x,key:E,...O_(w)};case me.ObjectBasedEffects:return{signature:x,key:E,...b_(w)};case me.GradientFillSetting:return{signature:x,key:E,...p_(w)};case me.SolidColorSheetSetting:return{signature:x,key:E,...__(w)};case me.PatternFillSetting:return{signature:x,key:E,...C_(w)};case me.VectorStrokeContentData:return{signature:x,key:E,...B_(w)};case me.BlendOptionsCapacity:return{signature:x,key:E,...f_(w)};case me.VectorMaskSetting1:case me.VectorMaskSetting2:return{signature:x,key:E,...k_(w,T)};case me.HueSaturation:return{signature:x,key:E,...v_(w)};case me.LayerId:return{signature:x,key:E,...A_(w)};case me.ArtboardData:return{signature:x,key:E,...d_(w)};case me.PlacedLayerData:case me.SmartObjectPlacedLayerData:return{signature:x,key:E,...x_(w)};case me.LinkedLayer:case me.LinkedLayer2:case me.LinkedLayer3:return{signature:x,key:E,...m_(w,T)};default:return{signature:x,key:E,_isUnknown:!0,data:w.take(T)}}}(t,i,o,l),m=l-(t.position-f);return t.pass(m),t.padding(l,n),A}function T_(t,e,n){const i=[];for(;i.length<e;)i.push(D_(t,n));return i.map(o=>{const l=function(f,A,m,w){const x=new Map,{length:E}=A;for(let T=0;T<E;T++){const[O,k]=A[T],S=R_(f.read("u16"));switch(S){case ni.RawData:{const Q=f.take(k);x.set(O,{compression:S,data:Q});break}case ni.RleCompressed:{const Q=f.take(k>0?Q_(f,M_(m,O),w.rleScanlineLengthFieldReadType):k);x.set(O,{compression:S,data:Q});break}}}return x}(t,o.channelInformation,o,n);return[o,l]}).reverse()}function D_(t,e){const[n,i,o,l]=function(q){const h=q.read("i32"),s=q.read("i32");let u=q.read("i32");u!==0&&(u-=1);let d=q.read("i32");return d!==0&&(d-=1),[h,s,u,d]}(t),f=t.read("u16"),A=[];for(;A.length<f;){const q=t.read("i16"),h=t.read(e.layerRecordSectionChannelLengthFieldReadType)-2;A.push([q,h])}if(t.readString(4)!=="8BIM")throw new Ox;const m=D0(t.readString(4)),w=t.read("u8"),x=function(q){if(q===eo.Base)return eo.Base;if(q===eo.NonBase)return eo.NonBase;throw new Px}(t.read("u8")),{hidden:E,transparencyLocked:T}=function(q){const h=q.read("u8");return{transparencyLocked:!!(1&h),hidden:!!(2&h)}}(t);t.pass(1);const O=t.read("u32"),k=t.position,S=function(q){const h=q.read("u32"),s=q.position,[u,d,r,a]=j0(q),c=q.read("u8"),p=F0(q),g=h>=36?function(_){const B=F0(_),N=_.read("u8"),[L,C,D,F]=j0(_);return{top:L,left:C,bottom:D,right:F,flags:B,backgroundColor:N}}(q):void 0,v=p.masksHaveParametersApplied?function(_){const B=_.read("u8");return{userMaskDensity:B&ro.UserMaskDensity?_.read("u8"):void 0,userMaskFeather:B&ro.UserMaskFeather?_.read("f64"):void 0,vectorMaskDensity:B&ro.VectorMaskDensity?_.read("u8"):void 0,vectorMaskFeather:B&ro.VectorMaskFeather?_.read("f64"):void 0}}(q):void 0,y=h-(q.position-s);return q.pass(y),{top:u,left:d,bottom:r,right:a,backgroundColor:c,flags:p,parameters:v,realData:g}}(t);t.pass(t.read("u32"));const Q=t.read("u8");let R=t.readString(Q);t.padding(Q+1,4);const V=[];for(;t.position-k<O;)V.push(P0(t,e));let b,Y,rt;for(const q of V)if(!q._isUnknown)switch(q.key){case me.SectionDividerSetting:({dividerType:b}=q);break;case me.TypeToolObjectSetting:{const h=q.textData.descriptor.items.get("Txt ");h&&h.type===de.String&&(Y=h.value);const s=q.textData.descriptor.items.get("EngineData");s&&s.type===de.RawData&&(rt=K_(s.data));break}case me.UnicodeLayerName:({name:R}=q)}return{name:R,channelInformation:A,top:n,left:i,bottom:o,right:l,hidden:E,transparencyLocked:T,opacity:w,clipping:x,blendMode:m,additionalLayerInfos:V,dividerType:b,layerText:Y,engineData:rt,maskData:S}}function M_(t,e){switch(e){case en.UserSuppliedLayerMask:return os(t.maskData);case en.RealUserSuppliedLayerMask:return os(function(n){const i=n.maskData.realData;if(!i)throw new Error("missing real mask data");return i}(t));default:return os(t)+1}}function Q_(t,e,n){return Array.from(Array(e),()=>t.read(n)).reduce((i,o)=>i+o)}function j0(t){return Array.from(Array(4),()=>t.read("i32"))}var pr,ro;function F0(t){const e=t.read("u8");return{positionRelativeToLayer:!!(e&pr.PositionRelativeToLayer),layerMaskDisabled:!!(e&pr.LayerMaskDisabled),invertMaskWhenBlending:!!(e&pr.InvertMaskWhenBlending),userMaskFromRenderingOtherData:!!(e&pr.UserMaskFromRenderingOtherData),masksHaveParametersApplied:!!(e&pr.MasksHaveParametersApplied)}}function L_(t,e){const n=new Vi(t);n.pass(e.layerAndMaskSectionLengthFieldSize),n.pass(e.layerInfoSectionLengthFieldSize);const i=n.read("i16"),o=Math.abs(i),l=T_(n,o,e);n.padding(n.position,4),n.pass(n.read("u32"));const f=function(T,O){const k=[];for(;T.position<T.length;)k.push(P0(T,O,4));return M0(k.map(S=>[S.key,S]))}(n,e),A=[],m=[],w=[],x=[{startIndex:0,groupId:0,parentGroupId:0}];let E=0;for(let T=0;T<o;T++){const[O,k]=l[T],S=x[x.length-1].groupId,{dividerType:Q}=O;if(Q===oo.CloseFolder||Q===oo.OpenFolder)E+=1,x.push({startIndex:A.length,groupId:E,parentGroupId:S,layerRecord:O}),w.push("G");else if(Q===oo.BoundingSection){const R=x.pop();if(R===void 0)throw new jx;const V=R.groupId>0?R.groupId:void 0,b=R.layerRecord||O;m.push(Nc.create(b.name,R.groupId,b,V)),w.push("D")}else A.push(Rc.create(O,k,S)),w.push("L")}return m.sort((T,O)=>T.id-O.id),{layers:A,groups:m,orders:w,globalAdditionalLayerInformation:f}}(function(t){t[t.PositionRelativeToLayer=1]="PositionRelativeToLayer",t[t.LayerMaskDisabled=2]="LayerMaskDisabled",t[t.InvertMaskWhenBlending=4]="InvertMaskWhenBlending",t[t.UserMaskFromRenderingOtherData=8]="UserMaskFromRenderingOtherData",t[t.MasksHaveParametersApplied=16]="MasksHaveParametersApplied"})(pr||(pr={})),function(t){t[t.UserMaskDensity=1]="UserMaskDensity",t[t.UserMaskFeather=2]="UserMaskFeather",t[t.VectorMaskDensity=4]="VectorMaskDensity",t[t.VectorMaskFeather=8]="VectorMaskFeather"}(ro||(ro={}));function Uc(t,e,n=4){const i=(n===4?t.getUint32(e):O0(t,e))+n;return{start:e,end:e+i,size:i}}function P_(t){const e=new DataView(t),n=function(A){const m=new Vi(A),w=m.take(4);if(!Dc(w,a_))throw new _x;const x=m.read("u16");if(x!==no.PSD&&x!==no.PSB)throw new _0;const E=Hc(x),T=m.take(6);if(!Dc(T,s_))throw new Ex;const O=m.read("u16");if(!Lc(O,1,56))throw new kx;const k=m.read("u32"),S=m.read("u32");if(!Lc(k,1,E.maxPixels)||!Lc(S,1,E.maxPixels))throw new Bx;const Q=m.read("u16");if(!l_.includes(Q))throw new Ix;const R=m.read("u16");if(!(R in Pc))throw new Sx;return{channelCount:O,version:x,width:S,height:k,depth:Q,colorMode:R}}(new DataView(t,0,26)),i=Hc(n.version),o=Uc(e,26),l=Uc(e,o.end),f=Uc(e,l.end,i.layerAndMaskSectionLengthFieldSize);return{fileHeader:n,colorModeData:new DataView(t,o.size),imageResources:new DataView(t,l.start,l.size),layerAndMaskInformation:new DataView(t,f.start,f.size),imageData:new DataView(t,f.end)}}const j_={maxPixels:3e4,rleScanlineLengthFieldSize:2,rleScanlineLengthFieldReadType:"u16",layerAndMaskSectionLengthFieldSize:4,layerInfoSectionLengthFieldSize:4,layerRecordSectionChannelLengthFieldReadType:"u32",aliLengthFieldSizeIsVariable:!1},F_={maxPixels:3e5,rleScanlineLengthFieldSize:4,rleScanlineLengthFieldReadType:"u32",layerAndMaskSectionLengthFieldSize:8,layerInfoSectionLengthFieldSize:8,layerRecordSectionChannelLengthFieldReadType:"u64",aliLengthFieldSizeIsVariable:!0};function Hc(t){switch(t){case no.PSD:return j_;case no.PSB:return F_;default:throw new _0}}var ni,en,oo,Gc,hn,ao,R0,N0,Ci;function R_(t){if(!(t in ni))throw new E0;return t}function N_(t){if(!(t in Gc))throw new Vx;return t}function z_(t){if(!(t in ao))throw new Hx("Invalid slice origin: ".concat(t));return t}function z0(t,e=255){if(!(0<=e&&e<=255))throw new Fx;const n=t.length/4,i=function(l){switch(l){case en.Red:return 0;case en.Green:return 1;case en.Blue:return 2;case en.TransparencyMask:return 3;default:throw new Qx}}(en.TransparencyMask),o=e/255;for(let l=0;l<n;l++){const f=4*l+i;t[f]=Math.floor(o*t[f])}return t}(function(t){t[t.RawData=0]="RawData",t[t.RleCompressed=1]="RleCompressed",t[t.ZipWithoutPrediction=2]="ZipWithoutPrediction",t[t.ZipWithPrediction=3]="ZipWithPrediction"})(ni||(ni={})),function(t){t[t.Red=0]="Red",t[t.Green=1]="Green",t[t.Blue=2]="Blue",t[t.TransparencyMask=-1]="TransparencyMask",t[t.UserSuppliedLayerMask=-2]="UserSuppliedLayerMask",t[t.RealUserSuppliedLayerMask=-3]="RealUserSuppliedLayerMask"}(en||(en={})),function(t){t[t.Other=0]="Other",t[t.OpenFolder=1]="OpenFolder",t[t.CloseFolder=2]="CloseFolder",t[t.BoundingSection=3]="BoundingSection"}(oo||(oo={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal"}(Gc||(Gc={})),function(t){t[t.GridAndGuides=1032]="GridAndGuides",t[t.Slices=1050]="Slices",t[t.ICCProfile=1039]="ICCProfile",t[t.GlobalLightAngle=1037]="GlobalLightAngle",t[t.GlobalLightAltitude=1049]="GlobalLightAltitude",t[t.ResolutionInfo=1005]="ResolutionInfo"}(hn||(hn={})),function(t){t[t.AutoGenerated=0]="AutoGenerated",t[t.LayerGenerated=1]="LayerGenerated",t[t.UserGenerated=2]="UserGenerated"}(ao||(ao={})),function(t){t[t.PixelsPerInch=1]="PixelsPerInch",t[t.PixelsPerCM=2]="PixelsPerCM"}(R0||(R0={})),function(t){t[t.Inch=1]="Inch",t[t.CM=2]="CM",t[t.Point=3]="Point",t[t.Pica=4]="Pica",t[t.Column=5]="Column"}(N0||(N0={})),function(t){t.Class="Clss",t.Enumerated="Enmr",t.Identifier="Idnt",t.Index="indx",t.Name="name",t.Offset="rele",t.Property="prop"}(Ci||(Ci={}));let V0,U0,H0,G0,Y0,W0,X0,$0,q0,K0,J0=(async()=>{let t;H0=function(a){t=a};const e=new Array(128).fill(void 0);function n(a){return e[a]}e.push(void 0,null,!0,!1);let i=e.length;function o(a){const c=n(a);return function(p){p<132||(e[p]=i,i=p)}(a),c}let l=new(typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});l.decode();let f=null;function A(){return(f===null||f.byteLength===0)&&(f=new Uint8Array(t.memory.buffer)),f}let m=0;function w(a,c){const p=c(1*a.length,1)>>>0;return A().set(a,p/1),m=a.length,p}let x=null;function E(){return(x===null||x.byteLength===0)&&(x=new Int32Array(t.memory.buffer)),x}function T(a,c){return a>>>=0,A().subarray(a/1,a/1+c)}q0=function(a,c,p,g,v,y,_){try{const C=t.__wbindgen_add_to_stack_pointer(-16),D=w(c,t.__wbindgen_malloc),F=m,j=w(g,t.__wbindgen_malloc),U=m,W=w(y,t.__wbindgen_malloc),$=m;t.decode_rgb(C,a,D,F,p,j,U,v,W,$,_);var B=E()[C/4+0],N=E()[C/4+1],L=T(B,N).slice();return t.__wbindgen_free(B,1*N),L}finally{t.__wbindgen_add_to_stack_pointer(16)}},K0=function(a,c,p,g,v,y,_,B,N){try{const F=t.__wbindgen_add_to_stack_pointer(-16),j=w(c,t.__wbindgen_malloc),U=m,W=w(g,t.__wbindgen_malloc),$=m,M=w(y,t.__wbindgen_malloc),P=m,z=w(B,t.__wbindgen_malloc),X=m;t.decode_rgba(F,a,j,U,p,W,$,v,M,P,_,z,X,N);var L=E()[F/4+0],C=E()[F/4+1],D=T(L,C).slice();return t.__wbindgen_free(L,1*C),D}finally{t.__wbindgen_add_to_stack_pointer(16)}},X0=function(a,c,p){try{const _=t.__wbindgen_add_to_stack_pointer(-16),B=w(c,t.__wbindgen_malloc),N=m;t.decode_grayscale(_,a,B,N,p);var g=E()[_/4+0],v=E()[_/4+1],y=T(g,v).slice();return t.__wbindgen_free(g,1*v),y}finally{t.__wbindgen_add_to_stack_pointer(16)}},$0=function(a,c,p,g,v){try{const N=t.__wbindgen_add_to_stack_pointer(-16),L=w(c,t.__wbindgen_malloc),C=m,D=w(g,t.__wbindgen_malloc),F=m;t.decode_grayscale_a(N,a,L,C,p,D,F,v);var y=E()[N/4+0],_=E()[N/4+1],B=T(y,_).slice();return t.__wbindgen_free(y,1*_),B}finally{t.__wbindgen_add_to_stack_pointer(16)}};let O=new(typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const k=typeof O.encodeInto=="function"?function(a,c){return O.encodeInto(a,c)}:function(a,c){const p=O.encode(a);return c.set(p),{read:a.length,written:p.length}};U0=function(){return function(a){i===e.length&&e.push(e.length+1);const c=i;return i=e[c],e[c]=a,c}(new Error)},G0=function(a,c){const p=function(v,y,_){if(_===void 0){const D=O.encode(v),F=y(D.length,1)>>>0;return A().subarray(F,F+D.length).set(D),m=D.length,F}let B=v.length,N=y(B,1)>>>0;const L=A();let C=0;for(;C<B;C++){const D=v.charCodeAt(C);if(D>127)break;L[N+C]=D}if(C!==B){C!==0&&(v=v.slice(C)),N=_(N,B,B=C+3*v.length,1)>>>0;const D=A().subarray(N+C,N+B);C+=k(v,D).written}return m=C,N}(n(c).stack,t.__wbindgen_malloc,t.__wbindgen_realloc),g=m;E()[a/4+1]=g,E()[a/4+0]=p},V0=function(a,c){let p,g;try{p=a,g=c}finally{t.__wbindgen_free(p,g,1)}},Y0=function(a){o(a)},W0=function(a,c){throw new Error(function(p,g){return p>>>=0,l.decode(A().subarray(p,p+g))}(a,c))},URL=globalThis.URL;const S=await(async(a={},c)=>{let p;if(c.startsWith("data:")){const g=c.replace(/^data:.*?base64,/,"");let v;if(typeof Buffer=="function"&&typeof Buffer.from=="function")v=Buffer.from(g,"base64");else{if(typeof atob!="function")throw new Error("Cannot decode base64-encoded data URL");{const y=atob(g);v=new Uint8Array(y.length);for(let _=0;_<y.length;_++)v[_]=y.charCodeAt(_)}}p=await WebAssembly.instantiate(v,a)}else{const g=await fetch(c),v=g.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&v.startsWith("application/wasm"))p=await WebAssembly.instantiateStreaming(g,a);else{const y=await g.arrayBuffer();p=await WebAssembly.instantiate(y,a)}}return p.instance.exports})({"./webtoon_psd_decoder_bg.js":{__wbg_new_abda76e883ba8a5f:U0,__wbg_stack_658279fe44541cf6:G0,__wbg_error_f851667af71bcfc6:V0,__wbindgen_object_drop_ref:Y0,__wbindgen_throw:W0}},"data:application/wasm;base64,AGFzbQEAAAABbw9gAn9/AX9gAn9/AGADf39/AX9gAX8Bf2ABfwBgA39/fwBgAX8BfmAAAX9gBX9/f39/AGAAAGAEf39/fwF/YA5/f39/f39/f39/f39/fwBgC39/f39/f39/f39/AGAEf39/fwBgCH9/f39/f39/AAKYAgUbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzGl9fd2JnX25ld19hYmRhNzZlODgzYmE4YTVmAAcbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzHF9fd2JnX3N0YWNrXzY1ODI3OWZlNDQ1NDFjZjYAARsuL3dlYnRvb25fcHNkX2RlY29kZXJfYmcuanMcX193YmdfZXJyb3JfZjg1MTY2N2FmNzFiY2ZjNgABGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxpfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZgAEGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxBfX3diaW5kZ2VuX3Rocm93AAEDVVQDBAICAQAAAAAEAQcICwUMAQEIDQ4BCAEAAAAFAQICCQAJAQoBCgMBBAUBBAMDAQAKBQMAAAAAAAEDAAMDAQMAAAMJAwMDAwECAgcAAAMDAQYGBgQEBQFwASUlBQMBABEGCQF/AUGAgMAACwfHAQsGbWVtb3J5AgAHbWFpbl9qcwAkCmRlY29kZV9yZ2IAFAtkZWNvZGVfcmdiYQASEGRlY29kZV9ncmF5c2NhbGUAGxJkZWNvZGVfZ3JheXNjYWxlX2EAGR9fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyAEYRX193YmluZGdlbl9tYWxsb2MAJQ9fX3diaW5kZ2VuX2ZyZWUANhJfX3diaW5kZ2VuX3JlYWxsb2MAKhBfX3diaW5kZ2VuX3N0YXJ0ACQJKgEAQQELJFhUVFRYIgsdMCMNH1g5RRpYIgweMFZVLRYcJz1XRDs/OjhYVwr0lwFU/CACD38BfiMAQRBrIgskAAJAAkACQAJAAkACQCAAQfUBTwRAQQhBCBA0IQZBFEEIEDQhBUEQQQgQNCEBQQBBEEEIEDRBAnRrIgJBgIB8IAEgBSAGamprQXdxQQNrIgEgASACSxsgAE0NBiAAQQRqQQgQNCEEQdiQwAAoAgBFDQVBACAEayEDAn9BACAEQYACSQ0AGkEfIARB////B0sNABogBEEGIARBCHZnIgBrdkEBcSAAQQF0a0E+agsiBkECdEG8jcAAaigCACIBDQFBACEAQQAhBQwCC0EQIABBBGpBEEEIEDRBBWsgAEsbQQgQNCEEAkACQAJAAn8CQAJAQdSQwAAoAgAiASAEQQN2IgB2IgJBA3FFBEAgBEHckMAAKAIATQ0LIAINAUHYkMAAKAIAIgBFDQsgABBAaEECdEG8jcAAaigCACIBEEggBGshAyABEDEiAARAA0AgABBIIARrIgIgAyACIANJIgIbIQMgACABIAIbIQEgABAxIgANAAsLIAEgBBBQIQUgARAOQRBBCBA0IANLDQUgASAEEEIgBSADEDNB3JDAACgCACIARQ0EIABBeHFBzI7AAGohB0HkkMAAKAIAIQZB1JDAACgCACICQQEgAEEDdnQiAHFFDQIgBygCCAwDCwJAIAJBf3NBAXEgAGoiA0EDdCIAQdSOwABqKAIAIgVBCGooAgAiAiAAQcyOwABqIgBHBEAgAiAANgIMIAAgAjYCCAwBC0HUkMAAIAFBfiADd3E2AgALIAUgA0EDdBAvIAUQUiEDDAsLAkBBASAAQR9xIgB0EDcgAiAAdHEQQGgiAkEDdCIAQdSOwABqKAIAIgNBCGooAgAiASAAQcyOwABqIgBHBEAgASAANgIMIAAgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiACd3E2AgALIAMgBBBCIAMgBBBQIgUgAkEDdCAEayICEDNB3JDAACgCACIABEAgAEF4cUHMjsAAaiEHQeSQwAAoAgAhBgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgBygCCAwBC0HUkMAAIAAgAXI2AgAgBwshACAHIAY2AgggACAGNgIMIAYgBzYCDCAGIAA2AggLQeSQwAAgBTYCAEHckMAAIAI2AgAgAxBSIQMMCgtB1JDAACAAIAJyNgIAIAcLIQAgByAGNgIIIAAgBjYCDCAGIAc2AgwgBiAANgIIC0HkkMAAIAU2AgBB3JDAACADNgIADAELIAEgAyAEahAvCyABEFIiAw0FDAQLIAQgBhAydCEHQQAhAEEAIQUDQAJAIAEQSCICIARJDQAgAiAEayICIANPDQAgASEFIAIiAw0AQQAhAyABIQAMAwsgAUEUaigCACICIAAgAiABIAdBHXZBBHFqQRBqKAIAIgFHGyAAIAIbIQAgB0EBdCEHIAENAAsLIAAgBXJFBEBBACEFQQEgBnQQN0HYkMAAKAIAcSIARQ0DIAAQQGhBAnRBvI3AAGooAgAhAAsgAEUNAQsDQCAAIAUgABBIIgEgBE8gASAEayICIANJcSIBGyEFIAIgAyABGyEDIAAQMSIADQALCyAFRQ0AIARB3JDAACgCACIATSADIAAgBGtPcQ0AIAUgBBBQIQYgBRAOAkBBEEEIEDQgA00EQCAFIAQQQiAGIAMQMyADQYACTwRAIAYgAxAPDAILIANBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIANBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAY2AgggACAGNgIMIAYgAjYCDCAGIAA2AggMAQsgBSADIARqEC8LIAUQUiIDDQELAkACQAJAAkACQAJAAkAgBEHckMAAKAIAIgBLBEBB4JDAACgCACIAIARLDQJBCEEIEDQgBGpBFEEIEDRqQRBBCBA0akGAgAQQNCIAQRB2QAAhASALQQA2AgggC0EAIABBgIB8cSABQX9GIgAbNgIEIAtBACABQRB0IAAbNgIAIAsoAgAiCA0BQQAhAwwIC0HkkMAAKAIAIQJBEEEIEDQgACAEayIBSwRAQeSQwABBADYCAEHckMAAKAIAIQBB3JDAAEEANgIAIAIgABAvIAIQUiEDDAgLIAIgBBBQIQBB3JDAACABNgIAQeSQwAAgADYCACAAIAEQMyACIAQQQiACEFIhAwwHCyALKAIIIQxB7JDAACALKAIEIgpB7JDAACgCAGoiATYCAEHwkMAAQfCQwAAoAgAiACABIAAgAUsbNgIAAkACQAJAQeiQwAAoAgAEQEG8jsAAIQADQCAAEEMgCEYNAiAAKAIIIgANAAsMAgtB+JDAACgCACIARSAAIAhLcg0FDAcLIAAQSg0AIAAQSyAMRw0AIAAoAgAiAkHokMAAKAIAIgFNBH8gAiAAKAIEaiABSwVBAAsNAQtB+JDAAEH4kMAAKAIAIgAgCCAAIAhJGzYCACAIIApqIQFBvI7AACEAAkACQANAIAEgACgCAEcEQCAAKAIIIgANAQwCCwsgABBKDQAgABBLIAxGDQELQeiQwAAoAgAhCUG8jsAAIQACQANAIAkgACgCAE8EQCAAEEMgCUsNAgsgACgCCCIADQALQQAhAAsgCSAAEEMiBkEUQQgQNCIPa0EXayIBEFIiAEEIEDQgAGsgAWoiACAAQRBBCBA0IAlqSRsiDRBSIQ4gDSAPEFAhAEEIQQgQNCEDQRRBCBA0IQVBEEEIEDQhAkHokMAAIAggCBBSIgFBCBA0IAFrIgEQUCIHNgIAQeCQwAAgCkEIaiACIAMgBWpqIAFqayIDNgIAIAcgA0EBcjYCBEEIQQgQNCEFQRRBCBA0IQJBEEEIEDQhASAHIAMQUCABIAIgBUEIa2pqNgIEQfSQwABBgICAATYCACANIA8QQkG8jsAAKQIAIRAgDkEIakHEjsAAKQIANwIAIA4gEDcCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHEjsAAIA42AgADQCAAQQQQUCAAQQc2AgQiAEEEaiAGSQ0ACyAJIA1GDQcgCSANIAlrIgAgCSAAEFAQLiAAQYACTwRAIAkgABAPDAgLIABBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAk2AgggACAJNgIMIAkgAjYCDCAJIAA2AggMBwsgACgCACEDIAAgCDYCACAAIAAoAgQgCmo2AgQgCBBSIgVBCBA0IQIgAxBSIgFBCBA0IQAgCCACIAVraiIGIAQQUCEHIAYgBBBCIAMgACABa2oiACAEIAZqayEEQeiQwAAoAgAgAEcEQCAAQeSQwAAoAgBGDQMgACgCBEEDcUEBRw0FAkAgABBIIgVBgAJPBEAgABAODAELIABBDGooAgAiAiAAQQhqKAIAIgFHBEAgASACNgIMIAIgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiAFQQN2d3E2AgALIAQgBWohBCAAIAUQUCEADAULQeiQwAAgBzYCAEHgkMAAQeCQwAAoAgAgBGoiADYCACAHIABBAXI2AgQgBhBSIQMMBwsgACAAKAIEIApqNgIEQeCQwAAoAgAgCmohAUHokMAAKAIAIgAgABBSIgBBCBA0IABrIgAQUCEDQeCQwAAgASAAayIFNgIAQeiQwAAgAzYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgAMBQtB4JDAACAAIARrIgE2AgBB6JDAAEHokMAAKAIAIgIgBBBQIgA2AgAgACABQQFyNgIEIAIgBBBCIAIQUiEDDAULQeSQwAAgBzYCAEHckMAAQdyQwAAoAgAgBGoiADYCACAHIAAQMyAGEFIhAwwEC0H4kMAAIAg2AgAMAQsgByAEIAAQLiAEQYACTwRAIAcgBBAPIAYQUiEDDAMLIARBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIARBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AgggBhBSIQMMAgtB/JDAAEH/HzYCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHYjsAAQcyOwAA2AgBB4I7AAEHUjsAANgIAQdSOwABBzI7AADYCAEHojsAAQdyOwAA2AgBB3I7AAEHUjsAANgIAQfCOwABB5I7AADYCAEHkjsAAQdyOwAA2AgBB+I7AAEHsjsAANgIAQeyOwABB5I7AADYCAEGAj8AAQfSOwAA2AgBB9I7AAEHsjsAANgIAQYiPwABB/I7AADYCAEH8jsAAQfSOwAA2AgBBkI/AAEGEj8AANgIAQYSPwABB/I7AADYCAEGYj8AAQYyPwAA2AgBBjI/AAEGEj8AANgIAQZSPwABBjI/AADYCAEGgj8AAQZSPwAA2AgBBnI/AAEGUj8AANgIAQaiPwABBnI/AADYCAEGkj8AAQZyPwAA2AgBBsI/AAEGkj8AANgIAQayPwABBpI/AADYCAEG4j8AAQayPwAA2AgBBtI/AAEGsj8AANgIAQcCPwABBtI/AADYCAEG8j8AAQbSPwAA2AgBByI/AAEG8j8AANgIAQcSPwABBvI/AADYCAEHQj8AAQcSPwAA2AgBBzI/AAEHEj8AANgIAQdiPwABBzI/AADYCAEHgj8AAQdSPwAA2AgBB1I/AAEHMj8AANgIAQeiPwABB3I/AADYCAEHcj8AAQdSPwAA2AgBB8I/AAEHkj8AANgIAQeSPwABB3I/AADYCAEH4j8AAQeyPwAA2AgBB7I/AAEHkj8AANgIAQYCQwABB9I/AADYCAEH0j8AAQeyPwAA2AgBBiJDAAEH8j8AANgIAQfyPwABB9I/AADYCAEGQkMAAQYSQwAA2AgBBhJDAAEH8j8AANgIAQZiQwABBjJDAADYCAEGMkMAAQYSQwAA2AgBBoJDAAEGUkMAANgIAQZSQwABBjJDAADYCAEGokMAAQZyQwAA2AgBBnJDAAEGUkMAANgIAQbCQwABBpJDAADYCAEGkkMAAQZyQwAA2AgBBuJDAAEGskMAANgIAQayQwABBpJDAADYCAEHAkMAAQbSQwAA2AgBBtJDAAEGskMAANgIAQciQwABBvJDAADYCAEG8kMAAQbSQwAA2AgBB0JDAAEHEkMAANgIAQcSQwABBvJDAADYCAEHMkMAAQcSQwAA2AgBBCEEIEDQhBUEUQQgQNCECQRBBCBA0IQFB6JDAACAIIAgQUiIAQQgQNCAAayIAEFAiAzYCAEHgkMAAIApBCGogASACIAVqaiAAamsiBTYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgALQQAhA0HgkMAAKAIAIgAgBE0NAEHgkMAAIAAgBGsiATYCAEHokMAAQeiQwAAoAgAiAiAEEFAiADYCACAAIAFBAXI2AgQgAiAEEEIgAhBSIQMLIAtBEGokACADC5gHAQV/IAAQUyIAIAAQSCIBEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsCQCACED4EQCAAIAEgAhAuDAELAkACQAJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiICNgIAIAAgAhAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiICNgIAIAAgAkEBcjYCBCAAQeSQwAAoAgBGDQEMAgsgAhBIIgMgAWohAQJAIANBgAJPBEAgAhAODAELIAJBDGooAgAiBCACQQhqKAIAIgJHBEAgAiAENgIMIAQgAjYCCAwBC0HUkMAAQdSQwAAoAgBBfiADQQN2d3E2AgALIAAgARAzIABB5JDAACgCAEcNAkHckMAAIAE2AgAMAwtB3JDAAEEANgIAQeSQwABBADYCAAtB9JDAACgCACACTw0BQQhBCBA0IQBBFEEIEDQhAkEQQQgQNCEDQQBBEEEIEDRBAnRrIgFBgIB8IAMgACACamprQXdxQQNrIgAgACABSxtFDQFB6JDAACgCAEUNAUEIQQgQNCEAQRRBCBA0IQJBEEEIEDQhAUEAIQMCQEHgkMAAKAIAIgQgASACIABBCGtqaiIATQ0AIAQgAGtB//8DakGAgHxxIgRBgIAEayECQeiQwAAoAgAhAUG8jsAAIQACQANAIAEgACgCAE8EQCAAEEMgAUsNAgsgACgCCCIADQALQQAhAAsgABBKDQAgAEEMaigCABoMAAsQEEEAIANrRw0BQeCQwAAoAgBB9JDAACgCAE0NAUH0kMAAQX82AgAPCyABQYACSQ0BIAAgARAPQfyQwABB/JDAACgCAEEBayIANgIAIAANABAQGg8LDwsgAUF4cUHMjsAAaiECAn9B1JDAACgCACIDQQEgAUEDdnQiAXEEQCACKAIIDAELQdSQwAAgASADcjYCACACCyEDIAIgADYCCCADIAA2AgwgACACNgIMIAAgAzYCCAvIDQEMfwJAAkAgACgCCCIKIAAoAhAiA3IEQAJAIANFDQAgASACaiEIIABBFGooAgBBAWohByABIQQDQAJAIAQhAyAHQQFrIgdFDQAgAyAIRg0CAn8gAywAACIEQQBOBEAgBEH/AXEhBSADQQFqDAELIAMtAAFBP3EhCSAEQR9xIQUgBEFfTQRAIAVBBnQgCXIhBSADQQJqDAELIAMtAAJBP3EgCUEGdHIhCSAEQXBJBEAgCSAFQQx0ciEFIANBA2oMAQsgBUESdEGAgPAAcSADLQADQT9xIAlBBnRyciIFQYCAxABGDQMgA0EEagsiBCAGIANraiEGIAVBgIDEAEcNAQwCCwsgAyAIRg0AIAMsAAAiBEEATiAEQWBJciAEQXBJckUEQCAEQf8BcUESdEGAgPAAcSADLQADQT9xIAMtAAJBP3FBBnQgAy0AAUE/cUEMdHJyckGAgMQARg0BCwJAAkAgBkUNACACIAZNBEBBACEDIAIgBkYNAQwCC0EAIQMgASAGaiwAAEFASA0BCyABIQMLIAYgAiADGyECIAMgASADGyEBCyAKRQ0CIABBDGooAgAhDAJAIAJBEE8EQAJ/QQAhBUEAIQcCQAJAIAEiA0EDakF8cSIEIANrIgggAksgCEEES3INACACIAhrIglBBEkNACAJQQNxIQpBACEGAkAgAyAERg0AIAhBA3EhBQJAIAQgA0F/c2pBA0kEQCADIQQMAQsgCEF8cSELIAMhBANAIAYgBCwAAEG/f0pqIAQsAAFBv39KaiAELAACQb9/SmogBCwAA0G/f0pqIQYgBEEEaiEEIAtBBGsiCw0ACwsgBUUNAANAIAYgBCwAAEG/f0pqIQYgBEEBaiEEIAVBAWsiBQ0ACwsgAyAIaiEDAkAgCkUNACADIAlBfHFqIgQsAABBv39KIQcgCkEBRg0AIAcgBCwAAUG/f0pqIQcgCkECRg0AIAcgBCwAAkG/f0pqIQcLIAlBAnYhCCAGIAdqIQUDQCADIQYgCEUNAkHAASAIIAhBwAFPGyIHQQNxIQkgB0ECdCELAkAgB0H8AXEiCkUEQEEAIQQMAQsgBiAKQQJ0aiENQQAhBANAIANFDQEgBCADKAIAIg5Bf3NBB3YgDkEGdnJBgYKECHFqIANBBGooAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcWogA0EIaigCACIEQX9zQQd2IARBBnZyQYGChAhxaiADQQxqKAIAIgRBf3NBB3YgBEEGdnJBgYKECHFqIQQgA0EQaiIDIA1HDQALCyAIIAdrIQggBiALaiEDIARBCHZB/4H8B3EgBEH/gfwHcWpBgYAEbEEQdiAFaiEFIAlFDQALAn9BACAGRQ0AGiAGIApBAnRqIgMoAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcSIEIAlBAUYNABogBCADKAIEIgZBf3NBB3YgBkEGdnJBgYKECHFqIgQgCUECRg0AGiAEIAMoAggiA0F/c0EHdiADQQZ2ckGBgoQIcWoLIgNBCHZB/4EccSADQf+B/AdxakGBgARsQRB2IAVqDAILQQAgAkUNARogAkEDcSEEIAJBBE8EQCACQXxxIQYDQCAFIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEFIANBBGohAyAGQQRrIgYNAAsLIARFDQADQCAFIAMsAABBv39KaiEFIANBAWohAyAEQQFrIgQNAAsLIAULIQQMAQsgAkUEQEEAIQQMAQsgAkEDcSEFAkAgAkEESQRAQQAhBCABIQMMAQsgAkF8cSEHQQAhBCABIQMDQCAEIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEEIANBBGohAyAHQQRrIgcNAAsLIAVFDQADQCAEIAMsAABBv39KaiEEIANBAWohAyAFQQFrIgUNAAsLIAQgDEkEQCAMIARrIgQhBgJAAkACQCAALQAgIgNBACADQQNHGyIDQQFrDgIAAQILQQAhBiAEIQMMAQsgBEEBdiEDIARBAWpBAXYhBgsgA0EBaiEDIABBBGooAgAhBCAAKAIcIQUgACgCACEAAkADQCADQQFrIgNFDQEgACAFIAQoAhARAABFDQALQQEPC0EBIQMgBUGAgMQARg0CIAAgASACIAQoAgwRAgANAkEAIQMDQCADIAZGBEBBAA8LIANBAWohAyAAIAUgBCgCEBEAAEUNAAsgA0EBayAGSQ8LDAILIAAoAgAgASACIAAoAgQoAgwRAgAhAwsgAw8LIAAoAgAgASACIAAoAgQoAgwRAgAL9wQBCn8jAEEwayIDJAAgA0EDOgAoIANCgICAgIAENwMgIANBADYCGCADQQA2AhAgAyABNgIMIAMgADYCCAJ/AkACQCACKAIAIgpFBEAgAkEUaigCACIARQ0BIAIoAhAhASAAQQN0IQUgAEEBa0H/////AXFBAWohByACKAIIIQADQCAAQQRqKAIAIgQEQCADKAIIIAAoAgAgBCADKAIMKAIMEQIADQQLIAEoAgAgA0EIaiABQQRqKAIAEQAADQMgAUEIaiEBIABBCGohACAFQQhrIgUNAAsMAQsgAigCBCIARQ0AIABBBXQhCyAAQQFrQf///z9xQQFqIQcgAigCCCEAA0AgAEEEaigCACIBBEAgAygCCCAAKAIAIAEgAygCDCgCDBECAA0DCyADIAUgCmoiBEEcai0AADoAKCADIARBFGopAgA3AyAgBEEQaigCACEGIAIoAhAhCEEAIQlBACEBAkACQAJAIARBDGooAgBBAWsOAgACAQsgBkEDdCAIaiIMQQRqKAIAQR5HDQEgDCgCACgCACEGC0EBIQELIAMgBjYCFCADIAE2AhAgBEEIaigCACEBAkACQAJAIARBBGooAgBBAWsOAgACAQsgAUEDdCAIaiIGQQRqKAIAQR5HDQEgBigCACgCACEBC0EBIQkLIAMgATYCHCADIAk2AhggCCAEKAIAQQN0aiIBKAIAIANBCGogASgCBBEAAA0CIABBCGohACALIAVBIGoiBUcNAAsLIAJBDGooAgAgB0sEQCADKAIIIAIoAgggB0EDdGoiACgCACAAKAIEIAMoAgwoAgwRAgANAQtBAAwBC0EBCyADQTBqJAALywQBBH8gACABEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsgAhA+BEAgACABIAIQLgwCCwJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiIBNgIAIAAgARAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiIBNgIAIAAgAUEBcjYCBCAAQeSQwAAoAgBHDQFB3JDAAEEANgIAQeSQwABBADYCAA8LIAIQSCIDIAFqIQECQCADQYACTwRAIAIQDgwBCyACQQxqKAIAIgQgAkEIaigCACICRwRAIAIgBDYCDCAEIAI2AggMAQtB1JDAAEHUkMAAKAIAQX4gA0EDdndxNgIACyAAIAEQMyAAQeSQwAAoAgBHDQFB3JDAACABNgIACw8LIAFBgAJPBEAgACABEA8PCyABQXhxQcyOwABqIQICf0HUkMAAKAIAIgNBASABQQN2dCIBcQRAIAIoAggMAQtB1JDAACABIANyNgIAIAILIQEgAiAANgIIIAEgADYCDCAAIAI2AgwgACABNgIIC/cCAQV/AkACQAJAAkAgAUEJTwRAQRBBCBA0IAFLDQEMAgsgABAFIQQMAgtBEEEIEDQhAQtBCEEIEDQhA0EUQQgQNCECQRBBCBA0IQVBAEEQQQgQNEECdGsiBkGAgHwgBSACIANqamtBd3FBA2siAyADIAZLGyABayAATQ0AIAFBECAAQQRqQRBBCBA0QQVrIABLG0EIEDQiA2pBEEEIEDRqQQRrEAUiAkUNACACEFMhAAJAIAFBAWsiBCACcUUEQCAAIQEMAQsgAiAEakEAIAFrcRBTIQJBEEEIEDQhBCAAEEggAiABQQAgAiAAayAETRtqIgEgAGsiAmshBCAAEEFFBEAgASAEECwgACACECwgACACEAkMAQsgACgCACEAIAEgBDYCBCABIAAgAmo2AgALIAEQQQ0BIAEQSCICQRBBCBA0IANqTQ0BIAEgAxBQIQAgASADECwgACACIANrIgMQLCAAIAMQCQwBCyAEDwsgARBSIAEQQRoL0gIBAn8jAEEQayICJAAgACgCACEAAkAgAUH/AE0EQCAAKAIIIgMgACgCAEYEfyAAIAMQFSAAKAIIBSADCyAAKAIEaiABOgAAIAAgACgCCEEBajYCCAwBCyACQQA2AgwCfyABQYAQTwRAIAFBgIAETwRAIAIgAUE/cUGAAXI6AA8gAiABQQZ2QT9xQYABcjoADiACIAFBDHZBP3FBgAFyOgANIAIgAUESdkEHcUHwAXI6AAxBBAwCCyACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAELIAIgAUE/cUGAAXI6AA0gAiABQQZ2QcABcjoADEECCyEBIAEgACgCACAAKAIIIgNrSwRAIAAgAyABEBMgACgCCCEDCyAAKAIEIANqIAJBDGogARBOGiAAIAEgA2o2AggLIAJBEGokAEEAC9ACAQJ/IwBBEGsiAiQAIAAoAgAhAAJAIAFB/wBNBEAgACgCCCIDIAAoAgBGBEAgACADEBUgACgCCCEDCyAAIANBAWo2AgggACgCBCADaiABOgAADAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALywIBAn8jAEEQayICJAACQCABQf8ATQRAIAAoAggiAyAAKAIARgR/IAAgAxAVIAAoAggFIAMLIAAoAgRqIAE6AAAgACAAKAIIQQFqNgIIDAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALvAIBBX8gACgCGCEDAkACQCAAIAAoAgxGBEAgAEEUQRAgAEEUaiIBKAIAIgQbaigCACICDQFBACEBDAILIAAoAggiAiAAKAIMIgE2AgwgASACNgIIDAELIAEgAEEQaiAEGyEEA0AgBCEFIAIiAUEUaiICIAFBEGogAigCACICGyEEIAFBFEEQIAIbaigCACICDQALIAVBADYCAAsCQCADRQ0AAkAgACAAKAIcQQJ0QbyNwABqIgIoAgBHBEAgA0EQQRQgAygCECAARhtqIAE2AgAgAUUNAgwBCyACIAE2AgAgAQ0AQdiQwABB2JDAACgCAEF+IAAoAhx3cTYCAA8LIAEgAzYCGCAAKAIQIgIEQCABIAI2AhAgAiABNgIYCyAAQRRqKAIAIgBFDQAgAUEUaiAANgIAIAAgATYCGAsLoAIBBH8gAEIANwIQIAACf0EAIAFBgAJJDQAaQR8gAUH///8HSw0AGiABQQYgAUEIdmciAmt2QQFxIAJBAXRrQT5qCyIDNgIcIANBAnRBvI3AAGohAgJAAkACQAJAQdiQwAAoAgAiBEEBIAN0IgVxBEAgAigCACECIAMQMiEDIAIQSCABRw0BIAIhAwwCC0HYkMAAIAQgBXI2AgAgAiAANgIADAMLIAEgA3QhBANAIAIgBEEddkEEcWpBEGoiBSgCACIDRQ0CIARBAXQhBCADIgIQSCABRw0ACwsgAygCCCIBIAA2AgwgAyAANgIIIAAgAzYCDCAAIAE2AgggAEEANgIYDwsgBSAANgIACyAAIAI2AhggACAANgIIIAAgADYCDAtgAQx/QcSOwAAoAgAiAgRAQbyOwAAhBgNAIAIiASgCCCECIAEoAgQhAyABKAIAIQQgAUEMaigCABogASEGIAVBAWohBSACDQALC0H8kMAAQf8fIAUgBUH/H00bNgIAIAgLlgIBA38gACABaiEHAkACQAJAAkADQCAAIAdHBEAgAC0AACEFIABBAWoiASEAIAVBgAFGDQEgBcBBAE4EQEEAIQYDQCAAIAdGDQQgAiAETw0FIAIgA2ogAC0AADoAACACQQRqIQIgAEEBaiEAIAZB/wFxIAZBAWohBiAFSQ0ACwwCCyABIAdGDQVBASAFayEFIAFBAWohACABLQAAIQZBACEBA0AgAiAETw0FIAIgA2ogBjoAACACQQRqIQIgAUEBaiIBQf8BcSAFQf8BcUkNAAsMAQsLDwtBtIDAAEHBAEGIgcAAECAAC0GAgMAAQRlB+IDAABAgAAtBgIDAAEEZQdSBwAAQIAALQZiBwABBO0HkgcAAECAAC+oEAQt/IwBBEGsiESQAAkACQAJAIAQOAgEAAgtBASEPCwJAAkAgBw4CAQACC0EBIRALQQAhBAJAAkAgCg4CAQACC0EBIQQLQQEhBwJAAkACQCANDgIAAQILQQAhBwsgEUEIaiEYIAIhEiADIRMgDyENIAUhFCAGIRUgECEKIAghFiAJIRcgCyEPIAwhEAJAAkACQAJAAkAgAUECdCIORQRAQQEhAQwBCyAOQQBIDQEgDhArIgFFDQILAkAgDUUEQCATRQ0BQQAhDQNAIA0gDk8NBSABIA1qIBItAAA6AAAgDUEEaiENIBJBAWohEiATQQFrIhMNAAsMAQsgEiATQQAgASAOEBELAkAgCkUEQCAVRQ0BQQEhDQNAIA0gDk8NBSABIA1qIBQtAAA6AAAgDUEEaiENIBRBAWohFCAVQQFrIhUNAAsMAQsgFCAVQQEgASAOEBELAkAgBEUEQCAXRQ0BQQIhDQNAIA0gDk8NBSABIA1qIBYtAAA6AAAgDUEEaiENIBZBAWohFiAXQQFrIhcNAAsMAQsgFiAXQQIgASAOEBELAkAgB0UEQCAQRQ0BQQMhDQNAIA0gDk8NBSABIA1qIA8tAAA6AAAgDUEEaiENIA9BAWohDyAQQQFrIhANAAsMAQsgDyAQQQMgASAOEBELIBggDjYCBCAYIAE2AgAMAwsQJgALIA5BARBMAAtBgIDAAEEZQaSAwAAQIAALIBEoAgwhBCARKAIIIQEgDARAIAsQBgsgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACABNgIAIAAgBDYCBCARQRBqJAAPCwsQRwALyQEBAn8jAEEgayIDJAACQAJAIAEgASACaiIBSw0AQQggACgCACICQQF0IgQgASABIARJGyIBIAFBCE0bIgFBf3NBH3YhBAJAIAIEQCADQQE2AhggAyACNgIUIAMgAEEEaigCADYCEAwBCyADQQA2AhgLIAMgASAEIANBEGoQGCADKAIEIQIgAygCAEUEQCAAIAE2AgAgACACNgIEDAILIANBCGooAgAiAEGBgICAeEYNASAARQ0AIAIgABBMAAsQJgALIANBIGokAAuDBAEKfyMAQRBrIg8kAAJAAkACQCAEDgIBAAILQQEhDQsCQAJAIAcOAgEAAgtBASEOC0EBIQQCQAJAAkAgCg4CAAECC0EAIQQLIA9BCGohEiACIQcgAyEKIA0hEyAFIQ0gBiEQIA4hFCAIIQ4gCSERAkACQAJAAkACQCABQQJ0IgtFBEBBASEBDAELIAtBAEgNASALQQEQPCIBRQ0CCyABQf8BIAsQTSEMAkAgE0UEQCAKRQ0BQQAhAQNAIAEgC08NBSABIAxqIActAAA6AAAgAUEEaiEBIAdBAWohByAKQQFrIgoNAAsMAQsgByAKQQAgDCALEBELAkAgFEUEQCAQRQ0BQQEhAQNAIAEgC08NBSABIAxqIA0tAAA6AAAgAUEEaiEBIA1BAWohDSAQQQFrIhANAAsMAQsgDSAQQQEgDCALEBELAkAgBEUEQCARRQ0BQQIhAQNAIAEgC08NBSABIAxqIA4tAAA6AAAgAUEEaiEBIA5BAWohDiARQQFrIhENAAsMAQsgDiARQQIgDCALEBELIBIgCzYCBCASIAw2AgAMAwsQJgALIAtBARBMAAtBgIDAAEEZQaSAwAAQIAALIA8oAgwhASAPKAIIIQQgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACAENgIAIAAgATYCBCAPQRBqJAAPCwsQRwALxwEBA38jAEEgayICJAACQAJAIAFBAWoiAUUNAEEIIAAoAgAiA0EBdCIEIAEgASAESRsiASABQQhNGyIBQX9zQR92IQQCQCADBEAgAkEBNgIYIAIgAzYCFCACIABBBGooAgA2AhAMAQsgAkEANgIYCyACIAEgBCACQRBqEBggAigCBCEDIAIoAgBFBEAgACABNgIAIAAgAzYCBAwCCyACQQhqKAIAIgBBgYCAgHhGDQEgAEUNACADIAAQTAALECYACyACQSBqJAAL3AECA38BfiMAQSBrIgIkACABKAIERQRAIAEoAgwhAyACQRhqIgRBADYCACACQoCAgIAQNwMQIAIgAkEQajYCHCACQRxqQYCHwAAgAxAIGiABQQhqIAQoAgA2AgAgASACKQMQNwIACyABKQIAIQUgAUKAgICAEDcCACACQQhqIgMgAUEIaiIBKAIANgIAIAFBADYCACACIAU3AwBBDEEEEDwiAUUEQEEMQQQQTAALIAEgAikDADcCACABQQhqIAMoAgA2AgAgAEGoicAANgIEIAAgATYCACACQSBqJAAL7wEBAn8jAEEgayIFJABBuI3AAEG4jcAAKAIAIgZBAWo2AgACQAJAIAZBAEgNAEGAkcAAQYCRwAAoAgBBAWoiBjYCACAGQQJLDQAgBSAEOgAYIAUgAzYCFCAFIAI2AhAgBUHwicAANgIMIAVBmIfAADYCCEGojcAAKAIAIgJBAEgNAEGojcAAIAJBAWo2AgBBqI3AAEGwjcAAKAIABH8gBSAAIAEoAhARAQAgBSAFKQMANwMIQbCNwAAoAgAgBUEIakG0jcAAKAIAKAIUEQEAQaiNwAAoAgBBAWsFIAILNgIAIAZBAUsNACAEDQELAAsAC6sBAQF/AkAgAgRAAn8CQAJAAkAgAUEATgRAIAMoAghFDQIgAygCBCIEDQEgAQ0DIAIMBAsgAEEIakEANgIADAULIAMoAgAgBCACIAEQNQwCCyABDQAgAgwBCyABIAIQPAsiAwRAIAAgAzYCBCAAQQhqIAE2AgAgAEEANgIADwsgACABNgIEIABBCGogAjYCAAwBCyAAIAE2AgQgAEEIakEANgIACyAAQQE2AgALkQQBCX8jAEEQayIMJAACQAJAAkAgBA4CAgEACxBHAAtBASEIC0EBIQQCQAJAAkAgBw4CAAECC0EAIQQLIAxBCGohDyACIQsgAyEHIAUhDSAGIQ4gBCEQAkACQAJAAkACQCABQQJ0IglFBEBBASEKDAELIAlBAEgNASAJECsiCkUNAgsCQCAIRQRAIAdFDQFBACEIIAchASALIQQDQCAIIAlPDQUgCCAKaiAELQAAOgAAIAhBBGohCCAEQQFqIQQgAUEBayIBDQALIAchAUEBIQggCyEEA0AgCCAJTw0FIAggCmogBC0AADoAACAIQQRqIQggBEEBaiEEIAFBAWsiAQ0AC0ECIQgDQCAIIAlPDQUgCCAKaiALLQAAOgAAIAhBBGohCCALQQFqIQsgB0EBayIHDQALDAELIAsgB0EAIAogCRARIAsgB0EBIAogCRARIAsgB0ECIAogCRARCwJAIBBFBEAgDkUNAUEDIQgDQCAIIAlPDQUgCCAKaiANLQAAOgAAIAhBBGohCCANQQFqIQ0gDkEBayIODQALDAELIA0gDkEDIAogCRARCyAPIAk2AgQgDyAKNgIADAMLECYACyAJQQEQTAALQYCAwABBGUGkgMAAECAACyAMKAIMIQQgDCgCCCEBIAYEQCAFEAYLIAMEQCACEAYLIAAgATYCACAAIAQ2AgQgDEEQaiQADwsQRwALcQAjAEEwayIBJABBgI3AAC0AAARAIAFBFGpBAjYCACABQRxqQQE2AgAgAUHoh8AANgIQIAFBADYCCCABQQ82AiQgASAANgIsIAEgAUEgajYCGCABIAFBLGo2AiAgAUEIakGQiMAAECkACyABQTBqJAALpAMBB38jAEEQayIKJABBASEHAkACQAJAIAQOAgABAgtBACEHCyAKQQhqIQsgAiEEIAMhCAJAAkACQAJAAkAgAUECdCIGRQRAQQEhBQwBCyAGQQBIDQEgBkEBEDwiBUUNAgsgBUH/ASAGEE0hCQJAIAdFBEAgCEUNAUEAIQUgCCEHIAQhAQNAIAUgBk8NBSAFIAlqIAEtAAA6AAAgBUEEaiEFIAFBAWohASAHQQFrIgcNAAsgCCEHQQEhBSAEIQEDQCAFIAZPDQUgBSAJaiABLQAAOgAAIAVBBGohBSABQQFqIQEgB0EBayIHDQALQQIhBQNAIAUgBk8NBSAFIAlqIAQtAAA6AAAgBUEEaiEFIARBAWohBCAIQQFrIggNAAsMAQsgBCAIQQAgCSAGEBEgBCAIQQEgCSAGEBEgBCAIQQIgCSAGEBELIAsgBjYCBCALIAk2AgAMAwsQJgALIAZBARBMAAtBgIDAAEEZQaSAwAAQIAALIAooAgwhASAKKAIIIQQgAwRAIAIQBgsgACAENgIAIAAgATYCBCAKQRBqJAAPCxBHAAt5AQN/IwBBEGsiAiQAIAEoAgRFBEAgASgCDCEDIAJBCGoiBEEANgIAIAJCgICAgBA3AwAgAiACNgIMIAJBDGpBgIfAACADEAgaIAFBCGogBCgCADYCACABIAIpAwA3AgALIABBqInAADYCBCAAIAE2AgAgAkEQaiQAC10BAX8jAEEgayICJAAgACgCACEAIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAIgADYCBCACQQRqQaCFwAAgAkEIahAIIAJBIGokAAtdAQF/IwBBIGsiAiQAIAAoAgAhACACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACIAA2AgQgAkEEakGAh8AAIAJBCGoQCCACQSBqJAALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakGghcAAIAJBCGoQCCACQSBqJAALZQEBfyMAQTBrIgMkACADIAE2AgwgAyAANgIIIANBHGpBATYCACADQSRqQQE2AgAgA0HIisAANgIYIANBADYCECADQSA2AiwgAyADQShqNgIgIAMgA0EIajYCKCADQRBqIAIQKQALUQEBfyMAQSBrIgIkACACQQxqQQE2AgAgAkEUakEANgIAIAJByIrAADYCECACQQA2AgAgAkErNgIcIAIgADYCGCACIAJBGGo2AgggAiABECkAC0YBAX8gAiAAKAIAIgAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQALQQEBfyACIAAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQAL6QQBBn8jAEEQayIDJABBgY3AAC0AAEEDRwRAIANBAToACyADIANBC2o2AgwgA0EMaiEAIwBBIGsiASQAAkACQAJAAkACQAJAAkBBgY3AAC0AAEEBaw4DAgQBAAtBgY3AAEECOgAAIAFBgY3AADYCCCAAKAIAIgAtAAAgAEEAOgAARQ0CIwBBIGsiACQAAkACQAJAQbiNwAAoAgBB/////wdxBEAQT0UNAQtBqI3AACgCAEGojcAAQX82AgANAQJAAkBBuI3AACgCAEH/////B3FFBEBBtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIADAELEE9BtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIARQ0BC0G4jcAAKAIAQf////8HcUUNABBPDQBBrI3AAEEBOgAAC0GojcAAQQA2AgACQCAERQ0AIAQgAigCABEEACACQQRqKAIARQ0AIAJBCGooAgAaIAQQBgsgAEEgaiQADAILIABBFGpBATYCACAAQRxqQQA2AgAgAEHUiMAANgIQIABBmIfAADYCGCAAQQA2AgggAEEIakH4iMAAECkACwALIAFBAzoADCABQQhqIgAoAgAgAC0ABDoAAAsgAUEgaiQADAQLIAFBFGpBATYCACABQRxqQQA2AgAgAUGQhMAANgIQDAILQZiEwABBkIXAABAhAAsgAUEUakEBNgIAIAFBHGpBADYCACABQdyDwAA2AhALIAFBoIXAADYCGCABQQA2AgggAUEIakHggsAAECkACwsgA0EQaiQACzgBAX8CQCABaUEBRw0AQYCAgIB4IAFrIABJIgINACAABEAgAEEAIAEgAhsQPCIBRQ0BCyABDwsAC0kBAX8jAEEgayIAJAAgAEEUakEBNgIAIABBHGpBADYCACAAQbCKwAA2AhAgAEGAisAANgIYIABBADYCCCAAQQhqQbiKwAAQKQALRAECfyABKAIEIQIgASgCACEDQQhBBBA8IgFFBEBBCEEEEEwACyABIAI2AgQgASADNgIAIABBuInAADYCBCAAIAE2AgALOQACQAJ/IAJBgIDEAEcEQEEBIAAgAiABKAIQEQAADQEaCyADDQFBAAsPCyAAIANBACABKAIMEQIAC7kCAQJ/IwBBIGsiAiQAIAJBAToAGCACIAE2AhQgAiAANgIQIAJBjIvAADYCDCACQciKwAA2AggjAEEQayIAJAACQCACQQhqIgEoAgwiAgRAIAEoAggiA0UNASAAIAI2AgggACABNgIEIAAgAzYCACMAQRBrIgEkACAAKAIAIgJBFGooAgAhAwJAAn8CQAJAIAJBDGooAgAOAgABAwsgAw0CQQAhAkGYh8AADAELIAMNASACKAIIIgMoAgQhAiADKAIACyEDIAEgAjYCBCABIAM2AgAgAUHcicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALIAFBADYCBCABIAI2AgwgAUHIicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALQZiHwABBmInAABAhAAtBmIfAAEGIicAAECEACy0AAkAgA2lBAUdBgICAgHggA2sgAUlyRQRAIAAgASADIAIQNSIADQELAAsgAAslAQF/AkAgAEEBEAoiAUUNACABEFMQQQ0AIAFBACAAEE0aCyABCycAIAAgACgCBEEBcSABckECcjYCBCAAIAFqIgAgACgCBEEBcjYCBAsgAQF/AkAgAEEEaigCACIBRQ0AIAAoAgBFDQAgARAGCwsjACACIAIoAgRBfnE2AgQgACABQQFyNgIEIAAgAWogATYCAAseACAAIAFBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQLFAAgACgCAARAIABBBGooAgAQBgsLGQEBfyAAKAIQIgEEfyABBSAAQRRqKAIACwsSAEEZIABBAXZrQQAgAEEfRxsLFgAgACABQQFyNgIEIAAgAWogATYCAAsQACAAIAFqQQFrQQAgAWtxC+oFAQZ/An8gACEFAkACQAJAIAJBCU8EQCADIAIQCiIHDQFBAAwEC0EIQQgQNCEAQRRBCBA0IQFBEEEIEDQhAkEAQRBBCBA0QQJ0ayIEQYCAfCACIAAgAWpqa0F3cUEDayIAIAAgBEsbIANNDQFBECADQQRqQRBBCBA0QQVrIANLG0EIEDQhAiAFEFMiACAAEEgiBBBQIQECQAJAAkACQAJAAkACQCAAEEFFBEAgAiAETQ0BIAFB6JDAACgCAEYNAiABQeSQwAAoAgBGDQMgARA+DQcgARBIIgYgBGoiCCACSQ0HIAggAmshBCAGQYACSQ0EIAEQDgwFCyAAEEghASACQYACSQ0GIAEgAmtBgYAISSACQQRqIAFNcQ0FIAEgACgCACIBakEQaiEEIAJBH2pBgIAEEDQhAgwGC0EQQQgQNCAEIAJrIgFLDQQgACACEFAhBCAAIAIQLCAEIAEQLCAEIAEQCQwEC0HgkMAAKAIAIARqIgQgAk0NBCAAIAIQUCEBIAAgAhAsIAEgBCACayICQQFyNgIEQeCQwAAgAjYCAEHokMAAIAE2AgAMAwtB3JDAACgCACAEaiIEIAJJDQMCQEEQQQgQNCAEIAJrIgFLBEAgACAEECxBACEBQQAhBAwBCyAAIAIQUCIEIAEQUCEGIAAgAhAsIAQgARAzIAYgBigCBEF+cTYCBAtB5JDAACAENgIAQdyQwAAgATYCAAwCCyABQQxqKAIAIgkgAUEIaigCACIBRwRAIAEgCTYCDCAJIAE2AggMAQtB1JDAAEHUkMAAKAIAQX4gBkEDdndxNgIAC0EQQQgQNCAETQRAIAAgAhBQIQEgACACECwgASAEECwgASAEEAkMAQsgACAIECwLIAANAwsgAxAFIgFFDQEgASAFIAAQSEF4QXwgABBBG2oiACADIAAgA0kbEE4gBRAGDAMLIAcgBSABIAMgASADSRsQThogBRAGCyAHDAELIAAQQRogABBSCwsLACABBEAgABAGCwsPACAAQQF0IgBBACAAa3ILFQAgASAAKAIAIgAoAgAgACgCBBAHCxkAIAEoAgBB+IzAAEEFIAEoAgQoAgwRAgALEwAgASgCACABKAIEIAAoAgAQCAsUACAAKAIAIAEgACgCBCgCDBEAAAsIACAAIAEQCgsTACAAQbiJwAA2AgQgACABNgIACw0AIAAtAARBAnFBAXYLEAAgASAAKAIAIAAoAgQQBwsKAEEAIABrIABxCwsAIAAtAARBA3FFCwwAIAAgAUEDcjYCBAsNACAAKAIAIAAoAgRqCw4AIAAoAgAaA0AMAAsAC9gGAgt/An4gADUCACENIwBBMGsiBCQAQSchAAJAIA1CkM4AVARAIA0hDgwBCwNAIARBCWogAGoiAkEEayANIA1CkM4AgCIOQpDOAH59pyIDQf//A3FB5ABuIgVBAXRBsIvAAGovAAA7AAAgAkECayADIAVB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAAIABBBGshACANQv/B1y9WIA4hDQ0ACwsgDqciAkHjAEsEQCAAQQJrIgAgBEEJamogDqciAiACQf//A3FB5ABuIgJB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAACwJAIAJBCk8EQCAAQQJrIgAgBEEJamogAkEBdEGwi8AAai8AADsAAAwBCyAAQQFrIgAgBEEJamogAkEwajoAAAsCfyAEQQlqIABqIQhBK0GAgMQAIAEoAhgiA0EBcSICGyEFIAJBJyAAayIJaiECQciKwABBACADQQRxGyEHAkACQCABKAIIRQRAQQEhACABKAIAIgMgAUEEaigCACICIAUgBxAoDQEMAgsCQAJAAkACQCACIAFBDGooAgAiBkkEQCADQQhxDQQgBiACayICIQNBASABLQAgIgAgAEEDRhsiAEEBaw4CAQIDC0EBIQAgASgCACIDIAFBBGooAgAiAiAFIAcQKA0EDAULQQAhAyACIQAMAQsgAkEBdiEAIAJBAWpBAXYhAwsgAEEBaiEAIAFBBGooAgAhAiABKAIcIQYgASgCACEBAkADQCAAQQFrIgBFDQEgASAGIAIoAhARAABFDQALQQEMBAtBASEAIAZBgIDEAEYNASABIAIgBSAHECgNASABIAggCSACKAIMEQIADQFBACEAAn8DQCADIAAgA0YNARogAEEBaiEAIAEgBiACKAIQEQAARQ0ACyAAQQFrCyADSSEADAELIAEoAhwhCyABQTA2AhwgAS0AICEMQQEhACABQQE6ACAgASgCACIDIAFBBGooAgAiCiAFIAcQKA0AIAYgAmtBAWohAAJAA0AgAEEBayIARQ0BIANBMCAKKAIQEQAARQ0AC0EBDAMLQQEhACADIAggCSAKKAIMEQIADQAgASAMOgAgIAEgCzYCHEEADAILIAAMAQsgAyAIIAkgAigCDBECAAsgBEEwaiQACwsAIAAjAGokACMACwwAQfCCwABBGRAEAAsKACAAKAIEQXhxCwoAIAAoAgRBAXELCgAgACgCDEEBcQsKACAAKAIMQQF2CxkAIAAgAUGkjcAAKAIAIgBBECAAGxEBAAALrwEBA38gASEFAkAgAkEPTQRAIAAhAQwBCyAAQQAgAGtBA3EiA2ohBCADBEAgACEBA0AgASAFOgAAIAFBAWoiASAESQ0ACwsgBCACIANrIgJBfHEiA2ohASADQQBKBEAgBUH/AXFBgYKECGwhAwNAIAQgAzYCACAEQQRqIgQgAUkNAAsLIAJBA3EhAgsgAgRAIAEgAmohAgNAIAEgBToAACABQQFqIgEgAkkNAAsLIAALswIBB38CQCACIgRBD00EQCAAIQIMAQsgAEEAIABrQQNxIgNqIQUgAwRAIAAhAiABIQYDQCACIAYtAAA6AAAgBkEBaiEGIAJBAWoiAiAFSQ0ACwsgBSAEIANrIghBfHEiB2ohAgJAIAEgA2oiA0EDcSIEBEAgB0EATA0BIANBfHEiBkEEaiEBQQAgBEEDdCIJa0EYcSEEIAYoAgAhBgNAIAUgBiAJdiABKAIAIgYgBHRyNgIAIAFBBGohASAFQQRqIgUgAkkNAAsMAQsgB0EATA0AIAMhAQNAIAUgASgCADYCACABQQRqIQEgBUEEaiIFIAJJDQALCyAIQQNxIQQgAyAHaiEBCyAEBEAgAiAEaiEDA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0kNAAsLIAALCwBBgJHAACgCAEULBwAgACABagsHACAAIAFrCwcAIABBCGoLBwAgAEEIawvDBwEFfwJAIwBB0ABrIgIkACACQQA2AhggAkKAgICAEDcDECACQSBqIgQiAEEDOgAgIABCgICAgIAENwIYIABBADYCECAAQQA2AgggAEG4hcAANgIEIAAgAkEQajYCACMAQUBqIgAkAEEBIQMCQCAEKAIAIgVB7IrAAEEMIAQoAgQiBCgCDBECAA0AAkAgASgCCCIDBEAgACADNgIMIABBITYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCEUNAQwCCyABKAIAIgMgASgCBEEMaigCABEGAELB9/nozJOy0UFSDQAgACADNgIMIABBIjYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCA0BCyABKAIMIQEgAEEkakEPNgIAIABBHGpBDzYCACAAIAFBDGo2AiAgACABQQhqNgIYIABBIDYCFCAAIAE2AhAgAEEDNgI8IABBAzYCNCAAQdSKwAA2AjAgAEEANgIoIAAgAEEQajYCOCAFIAQgAEEoahAIIQMLIABBQGskAAJAIANFBEAgAigCECACKAIYIgBrQQlNBEAgAkEQaiAAQQoQEyACKAIYIQALIAIoAhQgAGoiAUH0hsAAKQAANwAAIAFBCGpB/IbAAC8AADsAACACIABBCmo2AhggAkEIahAAIgQQASACKAIIIQYgAigCDCIFIAIoAhAgAigCGCIAa0sEQCACQRBqIAAgBRATIAIoAhghAAsgAigCFCAAaiAGIAUQThogAiAAIAVqIgA2AhggAigCECAAa0EBTQRAIAJBEGogAEECEBMgAigCGCEACyACKAIUIABqQYoUOwAAIAIgAEECaiIDNgIYIAIoAhQhAAJAIAMgAigCECIBTwRAIAAhAQwBCyADRQRAQQEhASAAEAYMAQsgACABQQEgAxA1IgFFDQILIAEgAxACIAUEQCAGEAYLIARBhAFPBEAgBBADCyACQdAAaiQADAILIwBBQGoiACQAIABBNzYCDCAAQdCFwAA2AgggAEGIhsAANgIUIAAgAkHIAGo2AhAgAEEkakECNgIAIABBLGpBAjYCACAAQTxqQR82AgAgAEGgi8AANgIgIABBADYCGCAAQSA2AjQgACAAQTBqNgIoIAAgAEEQajYCOCAAIABBCGo2AjAgAEEYakHkhsAAECkACyADQQEQTAALCwwAQsH3+ejMk7LRQQsNAEKy+KXLheeH1Jt/CwwAQuLnycndnOOADQsDAAELC4cNAQBBgIDAAAv9DG91dHB1dCBzbGljZSBpcyB0b28gc21hbGxzcmMvbGliLnJzABkAEAAKAAAAggAAAA4AAABpbnB1dCB0ZXJtaW5hdGVkIHdoaWxlIGRlY29kaW5nIHVuY29tcHJlc3NlZCBzZWdtZW50IGluIFJMRSBzbGljZQAAABkAEAAKAAAAmQAAABYAAAAZABAACgAAAJYAAAAWAAAAaW5wdXQgdGVybWluYXRlZCB3aGlsZSBkZWNvZGluZyByZXBlYXQgc2VnbWVudCBpbiBSTEUgc2xpY2UAGQAQAAoAAACmAAAAFgAAABkAEAAKAAAAoQAAABIAAAAvVXNlcnMveWhrYW5nLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvY29uc29sZV9lcnJvcl9wYW5pY19ob29rLTAuMS43L3NyYy9saWIucnP0ABAAbAAAAJUAAAAOAAAAaW52YWxpZCBlbnVtIHZhbHVlIHBhc3NlZAAAAAEAAAAAAAAAAQAAAAIAAAADAAAABAAAAG9uZS10aW1lIGluaXRpYWxpemF0aW9uIG1heSBub3QgYmUgcGVyZm9ybWVkIHJlY3Vyc2l2ZWx5pAEQADgAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAAOQBEAAqAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZS9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvc3RkL3NyYy9zeW5jL29uY2UucnMAQwIQAEwAAACVAAAAMgAAAAUAAAAEAAAABAAAAAYAAAAHAAAACAAAAAkAAAAMAAAABAAAAAoAAAALAAAADAAAAGEgRGlzcGxheSBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCBhbiBlcnJvciB1bmV4cGVjdGVkbHkADQAAAAAAAAABAAAADgAAAC9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvYWxsb2Mvc3JjL3N0cmluZy5ycwAYAxAASwAAAN0JAAAOAAAACgpTdGFjazoKCgAAEQAAAAQAAAAEAAAAEgAAABMAAAAUAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZW1lbW9yeSBhbGxvY2F0aW9uIG9mICBieXRlcyBmYWlsZWQAAADDAxAAFQAAANgDEAANAAAAbGlicmFyeS9zdGQvc3JjL2FsbG9jLnJz+AMQABgAAABVAQAACQAAAGNhbm5vdCBtb2RpZnkgdGhlIHBhbmljIGhvb2sgZnJvbSBhIHBhbmlja2luZyB0aHJlYWQgBBAANAAAAGxpYnJhcnkvc3RkL3NyYy9wYW5pY2tpbmcucnNcBBAAHAAAAIcAAAAJAAAAXAQQABwAAABBAgAAHgAAAFwEEAAcAAAAQAIAAB8AAAAVAAAADAAAAAQAAAAWAAAAEQAAAAgAAAAEAAAAFwAAABgAAAAQAAAABAAAABkAAAAaAAAAEQAAAAgAAAAEAAAAGwAAABwAAAARAAAAAAAAAAEAAAAdAAAAbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93AAAAHAUQABEAAAAABRAAHAAAAAwCAAAFAAAASAUQAAAAAAA6AAAASAUQAAAAAABQBRAAAQAAAFAFEAABAAAAcGFuaWNrZWQgYXQgJycsIHgFEAABAAAAeQUQAAMAAAAjAAAAAAAAAAEAAAAkAAAAOiAAAEgFEAAAAAAAnAUQAAIAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OUVycm9yAG8JcHJvZHVjZXJzAghsYW5ndWFnZQEEUnVzdAAMcHJvY2Vzc2VkLWJ5AwVydXN0Yx0xLjcwLjAgKDkwYzU0MTgwNiAyMDIzLTA1LTMxKQZ3YWxydXMGMC4xOS4wDHdhc20tYmluZGdlbgYwLjIuODcALA90YXJnZXRfZmVhdHVyZXMCKw9tdXRhYmxlLWdsb2JhbHMrCHNpZ24tZXh0"),Q=S.memory,R=S.main_js,V=S.decode_rgb,b=S.decode_rgba,Y=S.decode_grayscale,rt=S.decode_grayscale_a,q=S.__wbindgen_add_to_stack_pointer,h=S.__wbindgen_malloc,s=S.__wbindgen_free,u=S.__wbindgen_realloc,d=S.__wbindgen_start,r=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:q,__wbindgen_free:s,__wbindgen_malloc:h,__wbindgen_realloc:u,__wbindgen_start:d,decode_grayscale:Y,decode_grayscale_a:rt,decode_rgb:V,decode_rgba:b,main_js:R,memory:Q},Symbol.toStringTag,{value:"Module"}));H0(r),d()})();async function V_(t,e,n,i,o,l){const f=t*e;if(!(f>0&&Number.isInteger(f)))throw new Error("Pixel count must be a positive integer, got ".concat(f));let A;if(i&&o)A=await async function(m,w,x,E,T){return await J0,so(w.compression),so(E.compression),so(w.compression),T&&so(T.compression),T?K0(m,w.data,w.compression,x.data,x.compression,E.data,E.compression,T.data,T.compression):q0(m,w.data,w.compression,x.data,x.compression,E.data,E.compression)}(f,n,i,o,l);else{if(o||i)throw new Error("Missing ".concat(o?"green":"blue"," channel in RGB image"));A=await Yc(f,n,l)}return new Uint8ClampedArray(A.buffer,A.byteOffset,A.byteLength)}function so(t){switch(t){case ni.RawData:case ni.RleCompressed:return}throw new S0("Unsupported compression method: ".concat(t))}async function Yc(t,e,n){return await J0,so(e.compression),n&&so(n.compression),n?$0(t,e.data,e.compression,n.data,n.compression):X0(t,e.data,e.compression)}function U_(t){const e=P_(t),{fileHeader:n}=e,i=Hc(n.version),o=function(l){const f=new Vi(l),A=[],m=f.read("u32");for(;f.position<m;){const w=h_(f);A.push(w)}return{resources:A}}(e.imageResources);return{fileHeader:n,colorModeData:void 0,imageResources:o,layerAndMaskInfo:L_(e.layerAndMaskInformation,i),imageData:c_(e.imageData,n.depth,n.height,n.channelCount,i)}}function ss(t){const e=t.readUnicodeString(0),n=t.readIdString(),i=t.read("u32"),o=new Map;for(;o.size<i;){const l=t.readIdString(),f=Wc(t);if(o.has(l))throw new $x("Duplicate descriptor key: ".concat(l));o.set(l,f)}return{name:e,classId:n,items:o}}function Rn(t){const e=t.read("u32");if(e!==16)throw new Xx("Invalid descriptor version: ".concat(e));return{descriptorVersion:e,descriptor:ss(t)}}function Wc(t){const e=t.readString(4);switch(e){case de.Alias:{const n=t.read("u32");return{type:e,data:t.take(n)}}case de.Boolean:return{type:e,value:!!t.read("u8")};case de.Class:case de.GlobalClass:return{type:e,name:t.readUnicodeString(0),classId:t.readIdString()};case de.Descriptor:case de.GlobalObject:return{type:e,descriptor:ss(t)};case de.Double:return{type:e,value:t.read("f64")};case de.Enumerated:return{type:e,enumType:t.readIdString(),enumValue:t.readIdString()};case de.Integer:return{type:e,value:t.read("i32")};case de.LargeInteger:return{type:e,value:t.read("i64")};case de.List:{const n=t.read("u32"),i=[];for(;i.length<n;)i.push(Wc(t));return{type:e,values:i}}case de.RawData:{const n=t.read("u32");return{type:e,data:t.take(n)}}case de.Reference:{const n=t.read("u32"),i=[];for(;i.length<n;)i.push(H_(t));return{type:e,references:i}}case de.String:return{type:e,value:t.readUnicodeString(0)};case de.UnitFloat:return{type:e,unitType:Z0(t.readString(4)),value:t.read("f64")};case de.ObjectArray:{t.read("u32");const n=t.readUnicodeString(0),i=t.readIdString(),o=t.read("u32");return{type:e,classObj:{name:n,classId:i},items:Array.from(Array(o),()=>({key:t.readIdString(),value:Wc(t)}))}}case de.UnitFloats:{const n=Z0(t.readString(4)),i=t.read("u32");return{type:e,unitType:n,values:Array.from(Array(i),()=>t.read("f64"))}}default:throw new Wx("Unexpected descriptor type: ".concat(e))}}function H_(t){const e=t.readString(4);switch(e){case Ci.Class:return{type:e,name:t.readUnicodeString(0),classId:t.readIdString()};case Ci.Enumerated:return{type:e,name:t.readUnicodeString(0),classId:t.readIdString(),typeId:t.readIdString(),enumValue:t.readIdString()};case Ci.Identifier:return{type:e,identifier:t.readString(4)};case Ci.Index:return{type:e,index:t.read("u32")};case Ci.Name:return{type:e,name:t.readUnicodeString(0)};case Ci.Offset:return{type:e,name:t.readUnicodeString(0),classId:t.readIdString(),offset:t.read("u32")};case Ci.Property:return{type:e,name:t.readUnicodeString(0),classId:t.readIdString(),keyId:t.readIdString()};default:throw new Jx("Invalid reference type: ".concat(e))}}function Z0(t){if(!Object.values(Fc).includes(t))throw new Zx("Invalid Unit Float type: ".concat(t));return t}var De;(function(t){t[t.String=0]="String",t[t.DictBeg=1]="DictBeg",t[t.DictEnd=2]="DictEnd",t[t.ArrBeg=3]="ArrBeg",t[t.ArrEnd=4]="ArrEnd",t[t.Name=5]="Name",t[t.Number=6]="Number",t[t.Boolean=7]="Boolean"})(De||(De={}));const Xc=new Set([0,9,12,32,10,13]),G_=new Set([102,116]),ii={"(":40,")":41,"<":60,">":62,"[":91,"]":93,"/":47,"\\":92},tg=new Set(Object.values(ii)),eg=[];for(let t=0;t<256;t+=1)eg[t]=Xc.has(t)||tg.has(t);const Y_=new TextDecoder("utf-8");class W_{constructor(e){this.cursor=Vi.from(e)}tokens(){const e=[];for(;!this.done();){const n=this.cursor.one();if(Xc.has(n))for(;!this.done()&&Xc.has(this.cursor.peek());)this.cursor.pass(1);else if(tg.has(n)){if(n===ii["("]){e.push({type:De.String,value:this.text()});continue}if(n===ii["["]){e.push({type:De.ArrBeg});continue}if(n===ii["]"]){e.push({type:De.ArrEnd});continue}if(n===ii["<"]){this.cursor.pass(1),e.push({type:De.DictBeg});continue}if(n===ii[">"]){this.cursor.pass(1),e.push({type:De.DictEnd});continue}if(n===ii["/"]){e.push({type:De.Name,value:this.string()});continue}}else this.cursor.unpass(1),G_.has(n)?e.push({type:De.Boolean,value:this.boolean()}):e.push({type:De.Number,value:this.number()})}return e}done(){return this.cursor.position>=this.cursor.length}text(){const e=this.cursor.peek();if(e===ii[")"])return this.cursor.pass(1),"";const n=e===255||e===254;let i=new TextDecoder("utf-16be");n&&(i=this.textDecoderFromBOM());const o=[],l=this.cursor.clone();for(;l.peek()!==ii[")"];)if(l.pass(1),l.peek()===ii["\\"]){const m=l.position-this.cursor.position;o.push(i.decode(this.cursor.take(m),{stream:!0})),l.pass(2),this.cursor.pass(1),o.push(i.decode(this.cursor.take(1),{stream:!0}))}const f=l.position-this.cursor.position,A=this.cursor.take(f);return o.push(i.decode(A)),this.cursor.pass(1),o.join("")}textDecoderFromBOM(){const e=this.cursor.one(),n=this.cursor.one();if(e===255&&n===254)return new TextDecoder("utf-16le");if(e===254&&n===255)return new TextDecoder("utf-16be");throw new i_("Unknown BOM value: [".concat(e,", ").concat(n,"]"))}string(){return function(e){const n=e.position;let i=e.position;for(const o of e.iter()){if(eg[o])break;i+=1}return Y_.decode(e.take(i-n))}(this.cursor)}number(){const e=this.string(),n=Number(e);if(Number.isNaN(n))throw new e_("parsing '".concat(e,"' as Number failed"));return n}boolean(){const e=this.string();if(e==="true")return!0;if(e==="false")return!1;throw new t_("'".concat(e,"' is neither 'true' nor 'false'"))}}const $c=Symbol(De[De.ArrBeg]),qc=Symbol(De[De.DictBeg]);class X_{constructor(e){this.tokens=e,this.stack=[]}parse(){this.runParser();const[e]=this.stack;if(typeof e=="object"&&!Array.isArray(e))return e;throw new n_("EngineData top-level value is not a dict; is "+typeof e)}runParser(){for(const e of this.tokens)switch(e.type){case De.Name:case De.Number:case De.Boolean:case De.String:this.stack.push(e.value);continue;case De.DictBeg:this.stack.push(qc);continue;case De.ArrBeg:this.stack.push($c);continue;case De.DictEnd:this.stack.push(this.dict());continue;case De.ArrEnd:this.stack.push(this.array().reverse());continue}}dict(){const e={};for(;;){const n=this.stack.pop();if(n===void 0)throw new B0("Stack empty when parsing dict");if(n===qc)return e;if(n===$c)throw new Qc("Got ArrBeg while parsing a dict");const i=this.stack.pop();if(typeof i!="string")throw new Qc("Dict key is not Name; is "+typeof i);e[i]=n}}array(){const e=[];for(;;){const n=this.stack.pop();if(n===void 0)throw new B0("Stack empty when parsing array");if(n===qc)throw new Qc("Got DictBeg while parsing array");if(n===$c)return e;e.push(n)}}}const $_=new Set(["DocumentResources","EngineDict","ResourceDict"]);function q_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function K_(t){const e=new X_(new W_(t).tokens()).parse();if(function(n){let i=!0;if(typeof n!="object"||!n)return!1;for(const o of $_){if(!q_(n,o))return!1;{const l=n[o];i=i&&typeof l=="object"&&!Array.isArray(l)&&!!l}}return i}(e))return e;throw new r_("Object with keys ".concat(JSON.stringify(Object.keys(e))," is not valid EngineData"))}class ng{async composite(e=!0,n=!0){const{red:i,green:o,blue:l,alpha:f}=this.imageData,{width:A,height:m}=this,w=await V_(A,m,i,o,l,f);return e===!0?n===!0?z0(w,255*this.composedOpacity):z0(w,this.opacity):w}}class J_ extends ng{constructor(e,n){super(),this.layerFrame=e,this.parent=n,this.type="Layer"}get name(){return this.layerFrame.layerProperties.name}get width(){return this.layerFrame.width}get height(){return this.layerFrame.height}get top(){return this.layerFrame.layerProperties.top}get left(){return this.layerFrame.layerProperties.left}get opacity(){return this.layerFrame.layerProperties.opacity}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get maskData(){return this.layerFrame.layerProperties.maskData}async userMask(){const e=this.layerFrame.userMask;if(e)return Yc(T0(this.maskData),e)}async realUserMask(){const e=this.maskData.realData,n=this.layerFrame.realUserMask;if(e&&n)return Yc(T0(e),n)}get isHidden(){return this.layerFrame.layerProperties.hidden}get isTransparencyLocked(){return this.layerFrame.layerProperties.transparencyLocked}get additionalProperties(){return this.layerFrame.layerProperties.additionalLayerProperties}get text(){return this.layerFrame.layerProperties.text}get textProperties(){return this.layerFrame.layerProperties.textProperties}get imageData(){const{red:e,green:n,blue:i,alpha:o}=this.layerFrame;return{red:e,green:n,blue:i,alpha:o}}}function ig(t){if(!function(e){return e.type==="Psd"||e.type==="Group"}(t))throw new Ut("Node (name = '".concat(t.name,"', type: '").concat(t.type,"') cannot be a parent node"))}class Z_{constructor(e,n,i,o,l){this.origin=e,this.left=n,this.top=i,this.right=o,this.bottom=l}}function t5(t){if(t.resource.descriptor){const e=t.resource.descriptor.descriptor.items.get("slices");if(!e||e.type!==de.List)throw new Zo('Missing key "slices" in slice descriptor');return e.values.reduce((n,i)=>{if(i.type!==de.Descriptor)throw new Zo("Slice list contains a non-descriptor (type: ".concat(i.type,")"));return n.push(function(o){const l=function(E){const T=io(E,"origin",de.Enumerated);if(T.enumType!=="ESliceOrigin")throw new Zo('Unexpected enum type for slice origin: got "'.concat(T.enumType,'"'));switch(T.enumValue){case"layerGenerated":return ao.LayerGenerated;case"userGenerated":return ao.UserGenerated;case"autoGenerated":return ao.AutoGenerated;default:throw new Zo('Unexpected enum value for slice origin: got "'.concat(T.enumValue,'"'))}}(o),f=io(o,"bounds",de.Descriptor).descriptor,A=io(f,"Top ",de.Integer).value,m=io(f,"Left",de.Integer).value,w=io(f,"Btom",de.Integer).value,x=io(f,"Rght",de.Integer).value;return new Z_(l,m,A,x,w)}(i.descriptor)),n},[])}throw new Zo("No slice descriptor in slice resource block")}class Kc extends ng{static parse(e){const n=U_(e);return new Kc(n)}constructor(e){super(),this.parsingResult=e,this.name="ROOT",this.type="Psd",this.opacity=255,this.composedOpacity=1,this.children=[],this.layers=[],this.guides=[],this.slices=[],this.icc_profile=void 0,this.globalLightAngle=void 0,this.globalLightAltitude=void 0,this.resolutionInfo=void 0,this.additionalLayerProperties={},this.buildTreeStructure(),this.additionalLayerProperties=e.layerAndMaskInfo.globalAdditionalLayerInformation;for(const n of e.imageResources.resources)if(n.resource!==null)switch(n.id){case hn.GridAndGuides:this.guides=n.resource.guides;break;case hn.Slices:this.slices=t5(n);break;case hn.ICCProfile:this.icc_profile=n.resource;break;case hn.GlobalLightAltitude:this.globalLightAltitude=n.resource;break;case hn.GlobalLightAngle:this.globalLightAngle=n.resource;break;case hn.ResolutionInfo:this.resolutionInfo=n.resource}}get width(){return this.parsingResult.fileHeader.width}get height(){return this.parsingResult.fileHeader.height}get channelCount(){return this.parsingResult.fileHeader.channelCount}get depth(){return this.parsingResult.fileHeader.depth}get colorMode(){return this.parsingResult.fileHeader.colorMode}get imageData(){const{compression:e,red:n,green:i,blue:o,alpha:l}=this.parsingResult.imageData;return{red:{compression:e,data:n},green:i?{compression:e,data:i}:void 0,blue:o?{compression:e,data:o}:void 0,alpha:l?{compression:e,data:l}:void 0}}buildTreeStructure(){const{groups:e,layers:n,orders:i}=this.parsingResult.layerAndMaskInfo,o=[this];let l=0,f=0;i.forEach(A=>{const m=o[o.length-1];switch(A){case"G":{const w=e[l];ig(m);const x=new xx(w,m);o.push(x),m.children.push(x),l+=1;break}case"L":{const w=n[f];ig(m);const x=new J_(w,m);this.layers.push(x),m.children.push(x),f+=1;break}case"D":o.pop()}}),o.length=0,this.children.forEach(A=>{var m,w;return(w=(m=A).freeze)===null||w===void 0?void 0:w.call(m)}),Object.freeze(this.children)}}class Jc{constructor(e,n){this.canvas=e,this.editor=n}insertPSD(e){return new Promise((n,i)=>{lc({accept:".psd"}).then(o=>{if(o&&o.length>0){const l=o[0],f=new FileReader;f.readAsText(l,"UTF-8"),f.onload=async()=>{const A=await l.arrayBuffer(),m=Kc.parse(A),w=await Cx(m);this.loadJSON(w,e),n("")}}}).catch(i)})}loadJSON(e,n){this.editor.loadJSON(e,n)}}vt(Jc,"pluginName","PsdPlugin"),vt(Jc,"apis",["insertPSD"]);const Zc=(t,e)=>{const n=[],i=2*Math.PI/t;let o=-Math.PI/2;for(let l=0;l<t;l++){const f=l*i+o;n.push({x:Math.cos(f)*e,y:Math.sin(f)*e})}return n},tu=t=>{const{left:e=0,top:n=0}=t;return{width:t.getScaledWidth(),height:t.getScaledHeight(),left:e,top:n}},ls=(t,e)=>{eu(t),eu(t,"targetId",xn(e,"id")),eu(t,"targetType",xn(e,"type"))},eu=(t,e="clip",n=!0)=>{V3(t,e,n)};class nu{constructor(e,n){this.canvas=e,this.editor=n}addClipPathToImage(e){const n=this.canvas.getActiveObjects()[0];if(n&&n.type==="image"){let i=null;const[o,l]=e.split("-"),f=!!l;switch(o){case"polygon":i=((w,x)=>{const E=w.getCenterPoint(),T=Zc(5,200),O=new st.fabric.Polygon(T,{fill:"rgba(0,0,0,0)",originY:"center",originX:"center",left:E.x,top:E.y});return ls(O,w),{shell:O,clipPath:new st.fabric.Polygon([...T],{absolutePositioned:!0,originX:"center",originY:"center",left:O.left,top:O.top,inverted:x})}})(n,f);break;case"rect":i=((w,x)=>{const{width:E=0,height:T=0,left:O=0,top:k=0}=tu(w),S=Math.round(E/2),Q=Math.round(T/2),R=new st.fabric.Rect({width:S,height:Q,fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:O+E/2,top:k+T/2});return ls(R,w),{clipPath:new st.fabric.Rect({absolutePositioned:!0,width:R.width,height:R.height,originX:"center",originY:"center",left:R.left,top:R.top,inverted:x}),shell:R}})(n,f);break;case"circle":i=((w,x)=>{const E=w.getCenterPoint(),{width:T}=tu(w),O=new st.fabric.Ellipse({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:E.x,top:E.y,rx:T/4,ry:T/4});return ls(O,w),{shell:O,clipPath:new st.fabric.Ellipse({absolutePositioned:!0,originX:"center",originY:"center",left:O.left,top:O.top,inverted:x,rx:O.rx,ry:O.ry})}})(n,f);break;case"triangle":i=((w,x)=>{const E=w.getCenterPoint(),{width:T=0,height:O=0}=tu(w),k=Math.round(T/2),S=Math.round(O/2),Q=new st.fabric.Triangle({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:E.x,top:E.y,width:k,height:S});return ls(Q,w),{shell:Q,clipPath:new st.fabric.Triangle({absolutePositioned:!0,originX:"center",originY:"center",left:Q.left,top:Q.top,width:Q.width,height:Q.height,inverted:x})}})(n,f)}if(i==null)return;const{shell:A,clipPath:m}=i;A.on("moving",()=>{m.setPositionByOrigin(A.getCenterPoint(),"center","center"),n.set("dirty",!0)}),A.on("rotating",()=>{m.set({angle:A.angle}),n.set("dirty",!0)}),A.on("scaling",()=>{m.set({scaleX:A.scaleX,scaleY:A.scaleY}),m.setPositionByOrigin(A.getCenterPoint(),"center","center"),n.set("dirty",!0)}),A.on("deselected",()=>{if(m instanceof st.fabric.Ellipse&&A instanceof st.fabric.Ellipse)m.set({rx:A.getRx(),ry:A.getRy()}),this.correctPosition(n,A,m);else if(A instanceof st.fabric.Polygon){this.correctPosition(n,A,m);const{scaleX:w=1,scaleY:x=1}=m,{scaleX:E=1,scaleY:T=1}=A;m.set("scaleX",w*E),m.set("scaleY",x*T)}else this.correctPosition(n,A,m),m.set("width",A.getScaledWidth()),m.set("height",A.getScaledHeight());n.set("dirty",!0),this.canvas.remove(A),this.canvas.requestRenderAll()}),n.set({clipPath:m}),this.canvas.add(A),this.canvas.setActiveObject(A)}}correctPosition(e,n,i){const o=e.toLocalPoint(n.getCenterPoint(),"center","center"),{scaleX:l=1,scaleY:f=1}=e;i.set({absolutePositioned:!1,left:o.x/l,top:o.y/f,scaleX:1/l,scaleY:1/f})}removeClip(){const e=this.canvas.getActiveObjects()[0];e&&e.type==="image"&&(e.set({clipPath:void 0}),e.set("dirty",!0),this.canvas.requestRenderAll())}}vt(nu,"pluginName","SimpleClipImagePlugin"),vt(nu,"apis",["addClipPathToImage","removeClip"]);var iu={},cs={},dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.default=function t(e,n){(function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),this.data=e,this.text=n.text||e,this.options=n},Object.defineProperty(cs,"__esModule",{value:!0}),cs.CODE39=void 0;var us,e5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n5=(us=dn)&&us.__esModule?us:{default:us},i5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),e=e.toUpperCase(),n.mod43&&(e+=function(i){return rg[i]}(function(i){for(var o=0,l=0;l<i.length;l++)o+=og(i[l]);return o%=43,o}(e))),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,n5.default),e5(t,[{key:"encode",value:function(){for(var e=ru("*"),n=0;n<this.data.length;n++)e+=ru(this.data[n])+"0";return{data:e+=ru("*"),text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),t}(),rg=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],r5=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function ru(t){return function(e){return r5[e].toString(2)}(og(t))}function og(t){return rg.indexOf(t)}cs.CODE39=i5;var hs,ri={},ou={},lo={},xe={};function au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(xe,"__esModule",{value:!0});var ag=xe.SET_A=0,sg=xe.SET_B=1,lg=xe.SET_C=2;xe.SHIFT=98;var o5=xe.START_A=103,a5=xe.START_B=104,s5=xe.START_C=105;xe.MODULO=103,xe.STOP=106,xe.FNC1=207,xe.SET_BY_CODE=(au(hs={},o5,ag),au(hs,a5,sg),au(hs,s5,lg),hs),xe.SWAP={101:ag,100:sg,99:lg},xe.A_START_CHAR="\xD0",xe.B_START_CHAR="\xD1",xe.C_START_CHAR="\xD2",xe.A_CHARS="[\0-_\xC8-\xCF]",xe.B_CHARS="[ -\x7F\xC8-\xCF]",xe.C_CHARS="(\xCF*[0-9]{2}\xCF*)",xe.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(lo,"__esModule",{value:!0});var l5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c5=function(t){return t&&t.__esModule?t:{default:t}}(dn),bn=xe,u5=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t);var i=function(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?o:l}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),n));return i.bytes=e.split("").map(function(o){return o.charCodeAt(0)}),i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,c5.default),l5(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,n=e.shift()-105,i=bn.SET_BY_CODE[n];if(i===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&e.unshift(bn.FNC1);var o=t.next(e,1,i);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(n)+o.result+t.getBar((o.checksum+n)%bn.MODULO)+t.getBar(bn.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return typeof e=="string"&&(e=e.toLowerCase()==="true"),e}}],[{key:"getBar",value:function(e){return bn.BARS[e]?bn.BARS[e].toString():""}},{key:"correctIndex",value:function(e,n){if(n===bn.SET_A){var i=e.shift();return i<32?i+64:i-32}return n===bn.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,n,i){if(!e.length)return{result:"",checksum:0};var o=void 0,l=void 0;if(e[0]>=200){l=e.shift()-105;var f=bn.SWAP[l];f!==void 0?o=t.next(e,n+1,f):(i!==bn.SET_A&&i!==bn.SET_B||l!==bn.SHIFT||(e[0]=i===bn.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),o=t.next(e,n+1,i))}else l=t.correctIndex(e,i),o=t.next(e,n+1,i);var A=l*n;return{result:t.getBar(l)+o.result,checksum:A+o.checksum}}}]),t}();lo.default=u5;var su={};Object.defineProperty(su,"__esModule",{value:!0});var Ui=xe,cg=function(t){return t.match(new RegExp("^"+Ui.A_CHARS+"*"))[0].length},ug=function(t){return t.match(new RegExp("^"+Ui.B_CHARS+"*"))[0].length},hg=function(t){return t.match(new RegExp("^"+Ui.C_CHARS+"*"))[0]};function lu(t,e){var n=e?Ui.A_CHARS:Ui.B_CHARS,i=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"\xCC"+dg(t.substring(i[1].length));var o=t.match(new RegExp("^"+n+"+"))[0];return o.length===t.length?t:o+String.fromCharCode(e?205:206)+lu(t.substring(o.length),!e)}function dg(t){var e=hg(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var i=cg(t)>=ug(t);return e+String.fromCharCode(i?206:205)+lu(t,i)}su.default=function(t){var e=void 0;if(hg(t).length>=2)e=Ui.C_START_CHAR+dg(t);else{var n=cg(t)>ug(t);e=(n?Ui.A_START_CHAR:Ui.B_START_CHAR)+lu(t,n)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(i,o){return"\xCB"+o})},Object.defineProperty(ou,"__esModule",{value:!0});var h5=fg(lo),d5=fg(su);function fg(t){return t&&t.__esModule?t:{default:t}}function cu(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?t:e}var f5=function(){function t(e,n){if(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var i=cu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,d5.default)(e),n));else i=cu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return cu(i)}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,h5.default),t}();ou.default=f5;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});var p5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),g5=function(t){return t&&t.__esModule?t:{default:t}}(lo),pg=xe,v5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,pg.A_START_CHAR+e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,g5.default),p5(t,[{key:"valid",value:function(){return new RegExp("^"+pg.A_CHARS+"+$").test(this.data)}}]),t}();uu.default=v5;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});var A5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m5=function(t){return t&&t.__esModule?t:{default:t}}(lo),gg=xe,y5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,gg.B_START_CHAR+e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,m5.default),A5(t,[{key:"valid",value:function(){return new RegExp("^"+gg.B_CHARS+"+$").test(this.data)}}]),t}();hu.default=y5;var du={};Object.defineProperty(du,"__esModule",{value:!0});var b5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),C5=function(t){return t&&t.__esModule?t:{default:t}}(lo),vg=xe,w5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,vg.C_START_CHAR+e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,C5.default),b5(t,[{key:"valid",value:function(){return new RegExp("^"+vg.C_CHARS+"+$").test(this.data)}}]),t}();du.default=w5,Object.defineProperty(ri,"__esModule",{value:!0}),ri.CODE128C=ri.CODE128B=ri.CODE128A=ri.CODE128=void 0;var x5=ds(ou),_5=ds(uu),E5=ds(hu),S5=ds(du);function ds(t){return t&&t.__esModule?t:{default:t}}ri.CODE128=x5.default,ri.CODE128A=_5.default,ri.CODE128B=E5.default,ri.CODE128C=S5.default;var fn={},fu={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.SIDE_BIN="101",Bn.MIDDLE_BIN="01010",Bn.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},Bn.EAN2_STRUCTURE=["LL","LG","GL","GG"],Bn.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],Bn.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var fs={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});var I5=Bn;gr.default=function(t,e,n){var i=t.split("").map(function(l,f){return I5.BINARIES[e[f]]}).map(function(l,f){return l?l[t[f]]:""});if(n){var o=t.length-1;i=i.map(function(l,f){return f<o?l+n:l})}return i.join("")},Object.defineProperty(fs,"__esModule",{value:!0});var k5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),co=Bn,Ag=mg(gr),B5=mg(dn);function mg(t){return t&&t.__esModule?t:{default:t}}var O5=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t);var i=function(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?o:l}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.fontSize=!n.flat&&n.fontSize>10*n.width?10*n.width:n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,B5.default),k5(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,n){return this.text.substr(e,n)}},{key:"leftEncode",value:function(e,n){return(0,Ag.default)(e,n)}},{key:"rightText",value:function(e,n){return this.text.substr(e,n)}},{key:"rightEncode",value:function(e,n){return(0,Ag.default)(e,n)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},n={height:this.guardHeight};return[{data:co.SIDE_BIN,options:n},{data:this.leftEncode(),text:this.leftText(),options:e},{data:co.MIDDLE_BIN,options:n},{data:this.rightEncode(),text:this.rightText(),options:e},{data:co.SIDE_BIN,options:n}]}},{key:"encodeFlat",value:function(){return{data:[co.SIDE_BIN,this.leftEncode(),co.MIDDLE_BIN,this.rightEncode(),co.SIDE_BIN].join(""),text:this.text}}}]),t}();fs.default=O5,Object.defineProperty(fu,"__esModule",{value:!0});var T5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ta=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:t(l,n,i)}if("value"in o)return o.value;var f=o.get;return f!==void 0?f.call(i):void 0},D5=Bn,M5=function(t){return t&&t.__esModule?t:{default:t}}(fs),yg=function(t){var e=t.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+3*i:n+i},0);return(10-e%10)%10},Q5=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),e.search(/^[0-9]{12}$/)!==-1&&(e+=yg(e));var i=function(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?o:l}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.lastChar=n.lastChar,i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,M5.default),T5(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===yg(this.data)}},{key:"leftText",value:function(){return ta(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),n=D5.EAN13_STRUCTURE[this.data[0]];return ta(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,n)}},{key:"rightText",value:function(){return ta(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return ta(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=ta(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}();fu.default=Q5;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});var L5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ps=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var l=Object.getPrototypeOf(e);return l===null?void 0:t(l,n,i)}if("value"in o)return o.value;var f=o.get;return f!==void 0?f.call(i):void 0},P5=function(t){return t&&t.__esModule?t:{default:t}}(fs),bg=function(t){var e=t.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i:n+3*i},0);return(10-e%10)%10},j5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),e.search(/^[0-9]{7}$/)!==-1&&(e+=bg(e)),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,P5.default),L5(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===bg(this.data)}},{key:"leftText",value:function(){return ps(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return ps(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return ps(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return ps(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),t}();pu.default=j5;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});var F5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),R5=Bn,N5=Cg(gr),z5=Cg(dn);function Cg(t){return t&&t.__esModule?t:{default:t}}var V5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,z5.default),F5(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var e=R5.EAN5_STRUCTURE[function(n){var i=n.split("").map(function(o){return+o}).reduce(function(o,l,f){return f%2?o+9*l:o+3*l},0);return i%10}(this.data)];return{data:"1011"+(0,N5.default)(this.data,e,"01"),text:this.text}}}]),t}();gu.default=V5;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});var U5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),H5=Bn,G5=wg(gr),Y5=wg(dn);function wg(t){return t&&t.__esModule?t:{default:t}}var W5=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,Y5.default),U5(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var e=H5.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,G5.default)(this.data,e,"01"),text:this.text}}}]),t}();vu.default=W5;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});var X5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();ea.checksum=Au;var uo=xg(gr),$5=xg(dn);function xg(t){return t&&t.__esModule?t:{default:t}}var q5=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),e.search(/^[0-9]{11}$/)!==-1&&(e+=Au(e));var i=function(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?o:l}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.displayValue=n.displayValue,n.fontSize>10*n.width?i.fontSize=10*n.width:i.fontSize=n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,$5.default),X5(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Au(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,uo.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,uo.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,uo.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,uo.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,uo.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,uo.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),t}();function Au(t){var e,n=0;for(e=1;e<11;e+=2)n+=parseInt(t[e]);for(e=0;e<11;e+=2)n+=3*parseInt(t[e]);return(10-n%10)%10}ea.default=q5;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});var K5=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),J5=_g(gr),Z5=_g(dn),t8=ea;function _g(t){return t&&t.__esModule?t:{default:t}}function yu(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?t:e}var e8=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],n8=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],i8=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t);var i=yu(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(i.isValid=!1,e.search(/^[0-9]{6}$/)!==-1)i.middleDigits=e,i.upcA=Eg(e,"0"),i.text=n.text||""+i.upcA[0]+e+i.upcA[i.upcA.length-1],i.isValid=!0;else{if(e.search(/^[01][0-9]{7}$/)===-1||(i.middleDigits=e.substring(1,e.length-1),i.upcA=Eg(i.middleDigits,e[0]),i.upcA[i.upcA.length-1]!==e[e.length-1]))return yu(i);i.isValid=!0}return i.displayValue=n.displayValue,n.fontSize>10*n.width?i.fontSize=10*n.width:i.fontSize=n.fontSize,i.guardHeight=n.height+i.fontSize/2+n.textMargin,i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,Z5.default),K5(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],n=this.upcA[this.upcA.length-1],i=n8[parseInt(n)][parseInt(e)];return(0,J5.default)(this.middleDigits,i)}}]),t}();function Eg(t,e){for(var n=parseInt(t[t.length-1]),i=e8[n],o="",l=0,f=0;f<i.length;f++){var A=i[f];o+=A==="X"?t[l++]:A}return(o=""+e+o)+(0,t8.checksum)(o)}mu.default=i8,Object.defineProperty(fn,"__esModule",{value:!0}),fn.UPCE=fn.UPC=fn.EAN2=fn.EAN5=fn.EAN8=fn.EAN13=void 0;var r8=ho(fu),o8=ho(pu),a8=ho(gu),s8=ho(vu),l8=ho(ea),c8=ho(mu);function ho(t){return t&&t.__esModule?t:{default:t}}fn.EAN13=r8.default,fn.EAN8=o8.default,fn.EAN5=a8.default,fn.EAN2=s8.default,fn.UPC=l8.default,fn.UPCE=c8.default;var fo={},gs={},na={};Object.defineProperty(na,"__esModule",{value:!0}),na.START_BIN="1010",na.END_BIN="11101",na.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty(gs,"__esModule",{value:!0});var u8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),vs=na,h8=function(t){return t&&t.__esModule?t:{default:t}}(dn),d8=function(){function t(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||typeof n!="object"&&typeof n!="function"?e:n}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,h8.default),u8(t,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var e=this,n=this.data.match(/.{2}/g).map(function(i){return e.encodePair(i)}).join("");return{data:vs.START_BIN+n+vs.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var n=vs.BINARIES[e[1]];return vs.BINARIES[e[0]].split("").map(function(i,o){return(i==="1"?"111":"1")+(n[o]==="1"?"000":"0")}).join("")}}]),t}();gs.default=d8;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});var f8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p8=function(t){return t&&t.__esModule?t:{default:t}}(gs),Sg=function(t){var e=t.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,i,o){return n+i*(3-o%2*2)},0);return 10*Math.ceil(e/10)-e},g8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),e.search(/^[0-9]{13}$/)!==-1&&(e+=Sg(e)),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,p8.default),f8(t,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===Sg(this.data)}}]),t}();bu.default=g8,Object.defineProperty(fo,"__esModule",{value:!0}),fo.ITF14=fo.ITF=void 0;var v8=Ig(gs),A8=Ig(bu);function Ig(t){return t&&t.__esModule?t:{default:t}}fo.ITF=v8.default,fo.ITF14=A8.default;var On={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});var m8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),y8=function(t){return t&&t.__esModule?t:{default:t}}(dn),b8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,y8.default),m8(t,[{key:"encode",value:function(){for(var e="110",n=0;n<this.data.length;n++){var i=parseInt(this.data[n]).toString(2);i=C8(i,4-i.length);for(var o=0;o<i.length;o++)e+=i[o]=="0"?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),t}();function C8(t,e){for(var n=0;n<e;n++)t="0"+t;return t}vr.default=b8;var Cu={},Ar={};Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.mod10=function(t){for(var e=0,n=0;n<t.length;n++){var i=parseInt(t[n]);(n+t.length)%2==0?e+=i:e+=2*i%10+Math.floor(2*i/10)}return(10-e%10)%10},Ar.mod11=function(t){for(var e=0,n=[2,3,4,5,6,7],i=0;i<t.length;i++){var o=parseInt(t[t.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11},Object.defineProperty(Cu,"__esModule",{value:!0});var w8=function(t){return t&&t.__esModule?t:{default:t}}(vr),x8=Ar,_8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,x8.mod10)(e),n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,w8.default),t}();Cu.default=_8;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});var E8=function(t){return t&&t.__esModule?t:{default:t}}(vr),S8=Ar,I8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,S8.mod11)(e),n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,E8.default),t}();wu.default=I8;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});var k8=function(t){return t&&t.__esModule?t:{default:t}}(vr),kg=Ar,B8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,kg.mod10)(e),e+=(0,kg.mod10)(e),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,k8.default),t}();xu.default=B8;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});var O8=function(t){return t&&t.__esModule?t:{default:t}}(vr),Bg=Ar,T8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,Bg.mod11)(e),e+=(0,Bg.mod10)(e),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,O8.default),t}();_u.default=T8,Object.defineProperty(On,"__esModule",{value:!0}),On.MSI1110=On.MSI1010=On.MSI11=On.MSI10=On.MSI=void 0;var D8=ia(vr),M8=ia(Cu),Q8=ia(wu),L8=ia(xu),P8=ia(_u);function ia(t){return t&&t.__esModule?t:{default:t}}On.MSI=D8.default,On.MSI10=M8.default,On.MSI11=Q8.default,On.MSI1010=L8.default,On.MSI1110=P8.default;var As={};Object.defineProperty(As,"__esModule",{value:!0}),As.pharmacode=void 0;var j8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),F8=function(t){return t&&t.__esModule?t:{default:t}}(dn),R8=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t);var i=function(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?o:l}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.number=parseInt(e,10),i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,F8.default),j8(t,[{key:"encode",value:function(){for(var e=this.number,n="";!isNaN(e)&&e!=0;)e%2==0?(n="11100"+n,e=(e-2)/2):(n="100"+n,e=(e-1)/2);return{data:n=n.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}();As.pharmacode=R8;var ms={};Object.defineProperty(ms,"__esModule",{value:!0}),ms.codabar=void 0;var N8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),z8=function(t){return t&&t.__esModule?t:{default:t}}(dn),V8=function(){function t(e,n){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),e.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(e="A"+e+"A");var i=function(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||typeof l!="object"&&typeof l!="function"?o:l}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),n));return i.text=i.options.text||i.text.replace(/[A-D]/g,""),i}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,z8.default),N8(t,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var e=[],n=this.getEncodings(),i=0;i<this.data.length;i++)e.push(n[this.data.charAt(i)]),i!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}();ms.codabar=V8;var ys={};Object.defineProperty(ys,"__esModule",{value:!0}),ys.GenericBarcode=void 0;var U8=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),H8=function(t){return t&&t.__esModule?t:{default:t}}(dn),G8=function(){function t(e,n){return function(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),function(i,o){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||typeof o!="object"&&typeof o!="function"?i:o}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,H8.default),U8(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}();ys.GenericBarcode=G8,Object.defineProperty(iu,"__esModule",{value:!0});var Y8=cs,bs=ri,po=fn,Og=fo,ra=On,W8=As,X8=ms,$8=ys;iu.default={CODE39:Y8.CODE39,CODE128:bs.CODE128,CODE128A:bs.CODE128A,CODE128B:bs.CODE128B,CODE128C:bs.CODE128C,EAN13:po.EAN13,EAN8:po.EAN8,EAN5:po.EAN5,EAN2:po.EAN2,UPC:po.UPC,UPCE:po.UPCE,ITF14:Og.ITF14,ITF:Og.ITF,MSI:ra.MSI,MSI10:ra.MSI10,MSI11:ra.MSI11,MSI1010:ra.MSI1010,MSI1110:ra.MSI1110,pharmacode:W8.pharmacode,codabar:X8.codabar,GenericBarcode:$8.GenericBarcode};var go={};Object.defineProperty(go,"__esModule",{value:!0});var q8=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};go.default=function(t,e){return q8({},t,e)};var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.default=function(t){var e=[];return function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}(t),e};var Su={};Object.defineProperty(Su,"__esModule",{value:!0}),Su.default=function(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t};var Iu={},ku={},Cs={};Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=function(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&typeof t[n=e[n]]=="string"&&(t[n]=parseInt(t[n],10));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t};var ws={};Object.defineProperty(ws,"__esModule",{value:!0});var K8={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};ws.default=K8,Object.defineProperty(ku,"__esModule",{value:!0});var J8=Dg(Cs),Tg=Dg(ws);function Dg(t){return t&&t.__esModule?t:{default:t}}ku.default=function(t){var e={};for(var n in Tg.default)Tg.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,J8.default)(e)};var Bu={},Ou={},Cn={};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.getTotalWidthOfEncodings=Cn.calculateEncodingAttributes=Cn.getBarcodePadding=Cn.getEncodingHeight=Cn.getMaximumHeightOfEncodings=void 0;var Z8=function(t){return t&&t.__esModule?t:{default:t}}(go);function Mg(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function Qg(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function t4(t,e,n){var i;if(n)i=n;else{if(typeof document>"u")return 0;i=document.createElement("canvas").getContext("2d")}i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(t);return o?o.width:0}Cn.getMaximumHeightOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e},Cn.getEncodingHeight=Mg,Cn.getBarcodePadding=Qg,Cn.calculateEncodingAttributes=function(t,e,n){for(var i=0;i<t.length;i++){var o,l=t[i],f=(0,Z8.default)(e,l.options);o=f.displayValue?t4(l.text,f,n):0;var A=l.data.length*f.width;l.width=Math.ceil(Math.max(o,A)),l.height=Mg(l,f),l.barcodePadding=Qg(o,A,f)}},Cn.getTotalWidthOfEncodings=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e},Object.defineProperty(Ou,"__esModule",{value:!0});var e4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n4=function(t){return t&&t.__esModule?t:{default:t}}(go),Tu=Cn,i4=function(){function t(e,n,i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),this.canvas=e,this.encodings=n,this.options=i}return e4(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var n=(0,n4.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(n,this.encodings[e]),this.drawCanvasText(n,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,Tu.calculateEncodingAttributes)(this.encodings,this.options,e);var n=(0,Tu.getTotalWidthOfEncodings)(this.encodings),i=(0,Tu.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,n){var i,o=this.canvas.getContext("2d"),l=n.data;i=e.textPosition=="top"?e.marginTop+e.fontSize+e.textMargin:e.marginTop,o.fillStyle=e.lineColor;for(var f=0;f<l.length;f++){var A=f*e.width+n.barcodePadding;l[f]==="1"?o.fillRect(A,i,e.width,e.height):l[f]&&o.fillRect(A,i,e.width,e.height*l[f])}}},{key:"drawCanvasText",value:function(e,n){var i,o,l=this.canvas.getContext("2d"),f=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(o=e.textPosition=="top"?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,l.font=f,e.textAlign=="left"||n.barcodePadding>0?(i=0,l.textAlign="left"):e.textAlign=="right"?(i=n.width-1,l.textAlign="right"):(i=n.width/2,l.textAlign="center"),l.fillText(n.text,i,o))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),t}();Ou.default=i4;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});var r4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o4=function(t){return t&&t.__esModule?t:{default:t}}(go),Mu=Cn,xs="http://www.w3.org/2000/svg",a4=function(){function t(e,n,i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return r4(t,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var i=this.encodings[n],o=(0,o4.default)(this.options,i.options),l=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(l,o),this.drawSvgBarcode(l,o,i),this.drawSVGText(l,o,i),e+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,Mu.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,Mu.getTotalWidthOfEncodings)(this.encodings),n=(0,Mu.getMaximumHeightOfEncodings)(this.encodings),i=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,n),this.options.background&&this.drawRect(0,0,i,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,n,i){var o,l=i.data;o=n.textPosition=="top"?n.fontSize+n.textMargin:0;for(var f=0,A=0,m=0;m<l.length;m++)A=m*n.width+i.barcodePadding,l[m]==="1"?f++:f>0&&(this.drawRect(A-n.width*f,o,n.width*f,n.height,e),f=0);f>0&&this.drawRect(A-n.width*(f-1),o,n.width*f,n.height,e)}},{key:"drawSVGText",value:function(e,n,i){var o,l,f=this.document.createElementNS(xs,"text");n.displayValue&&(f.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),l=n.textPosition=="top"?n.fontSize-n.textMargin:n.height+n.textMargin+n.fontSize,n.textAlign=="left"||i.barcodePadding>0?(o=0,f.setAttribute("text-anchor","start")):n.textAlign=="right"?(o=i.width-1,f.setAttribute("text-anchor","end")):(o=i.width/2,f.setAttribute("text-anchor","middle")),f.setAttribute("x",o),f.setAttribute("y",l),f.appendChild(this.document.createTextNode(i.text)),e.appendChild(f))}},{key:"setSvgAttributes",value:function(e,n){var i=this.svg;i.setAttribute("width",e+"px"),i.setAttribute("height",n+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+e+" "+n),i.setAttribute("xmlns",xs),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,n,i){var o=this.document.createElementNS(xs,"g");return o.setAttribute("transform","translate("+e+", "+n+")"),i.appendChild(o),o}},{key:"setGroupOptions",value:function(e,n){e.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(e,n,i,o,l){var f=this.document.createElementNS(xs,"rect");return f.setAttribute("x",e),f.setAttribute("y",n),f.setAttribute("width",i),f.setAttribute("height",o),l.appendChild(f),f}}]),t}();Du.default=a4;var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});var s4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l4=function(){function t(e,n,i){(function(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),this.object=e,this.encodings=n,this.options=i}return s4(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();Qu.default=l4,Object.defineProperty(Bu,"__esModule",{value:!0});var c4=Lu(Ou),u4=Lu(Du),h4=Lu(Qu);function Lu(t){return t&&t.__esModule?t:{default:t}}Bu.default={CanvasRenderer:c4.default,SVGRenderer:u4.default,ObjectRenderer:h4.default};var vo={};function Pu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ju(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?t:e}function Fu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(vo,"__esModule",{value:!0});var d4=function(){function t(e,n){Pu(this,t);var i=ju(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.name="InvalidInputException",i.symbology=e,i.input=n,i.message='"'+i.input+'" is not a valid input for '+i.symbology,i}return Fu(t,Error),t}(),f4=function(){function t(){Pu(this,t);var e=ju(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="InvalidElementException",e.message="Not supported type to render on",e}return Fu(t,Error),t}(),p4=function(){function t(){Pu(this,t);var e=ju(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="NoElementException",e.message="No element to render on.",e}return Fu(t,Error),t}();vo.InvalidInputException=d4,vo.InvalidElementException=f4,vo.NoElementException=p4,Object.defineProperty(Iu,"__esModule",{value:!0});var g4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru=Lg(ku),oa=Lg(Bu),v4=vo;function Lg(t){return t&&t.__esModule?t:{default:t}}function Nu(t){if(typeof t=="string")return function(i){var o=document.querySelectorAll(i);if(o.length!==0){for(var l=[],f=0;f<o.length;f++)l.push(Nu(o[f]));return l}}(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(Nu(t[n]));return e}if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return function(i){var o=document.createElement("canvas");return{element:o,options:(0,Ru.default)(i),renderer:oa.default.CanvasRenderer,afterRender:function(){i.setAttribute("src",o.toDataURL())}}}(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,Ru.default)(t),renderer:oa.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,Ru.default)(t),renderer:oa.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:oa.default.CanvasRenderer};if(t&&(t===void 0?"undefined":g4(t))==="object"&&!t.nodeName)return{element:t,renderer:oa.default.ObjectRenderer};throw new v4.InvalidElementException}Iu.default=Nu;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});var A4=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m4=function(){function t(e){(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),this.api=e}return A4(t,[{key:"handleCatch",value:function(e){if(e.name!=="InvalidInputException")throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var n=e.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(i){return this.handleCatch(i),this.api}}}]),t}();zu.default=m4;var mr=Hi(iu),aa=Hi(go),Pg=Hi(Eu),jg=Hi(Su),y4=Hi(Iu),b4=Hi(Cs),C4=Hi(zu),Fg=vo,Rg=Hi(ws);function Hi(t){return t&&t.__esModule?t:{default:t}}var wi=function(){},_s=function(t,e,n){var i=new wi;if(t===void 0)throw Error("No element to render on was provided.");return i._renderProperties=(0,y4.default)(t),i._encodings=[],i._options=Rg.default,i._errorHandler=new C4.default(i),e!==void 0&&((n=n||{}).format||(n.format=Vg()),i.options(n)[n.format](e,n).render()),i};for(var Ng in _s.getModule=function(t){return mr.default[t]},mr.default)mr.default.hasOwnProperty(Ng)&&w4(mr.default,Ng);function w4(t,e){wi.prototype[e]=wi.prototype[e.toUpperCase()]=wi.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=i.text===void 0?void 0:""+i.text;var l=(0,aa.default)(o._options,i);l=(0,b4.default)(l);var f=t[e],A=zg(n,f,l);return o._encodings.push(A),o})}}function zg(t,e,n){var i=new e(t=""+t,n);if(!i.valid())throw new Fg.InvalidInputException(i.constructor.name,t);var o=i.encode();o=(0,Pg.default)(o);for(var l=0;l<o.length;l++)o[l].options=(0,aa.default)(n,o[l].options);return o}function Vg(){return mr.default.CODE128?"CODE128":Object.keys(mr.default)[0]}function Vu(t,e,n){e=(0,Pg.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,aa.default)(n,e[i].options),(0,jg.default)(e[i].options);(0,jg.default)(n),new t.renderer(t.element,e,n).render(),t.afterRender&&t.afterRender()}wi.prototype.options=function(t){return this._options=(0,aa.default)(this._options,t),this},wi.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this},wi.prototype.init=function(){var t;if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){t=this._renderProperties[e];var n=(0,aa.default)(this._options,t.options);n.format=="auto"&&(n.format=Vg()),this._errorHandler.wrapBarcodeCall(function(){var i=zg(n.value,mr.default[n.format.toUpperCase()],n);Vu(t,i,n)})}},wi.prototype.render=function(){if(!this._renderProperties)throw new Fg.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)Vu(this._renderProperties[t],this._encodings,this._options);else Vu(this._renderProperties,this._encodings,this._options);return this},wi.prototype._defaults=Rg.default,typeof window<"u"&&(window.JsBarcode=_s),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),_s(n,t,e)});const x4=Aa(_s);var Ug=(t=>(t.CODE128="CODE128",t.EAN8="EAN8",t.EAN13="EAN13",t.ITF14="ITF14",t.codabar="codabar",t.pharmacode="pharmacode",t))(Ug||{});class Uu{constructor(e,n){this.canvas=e,this.editor=n}async hookTransform(e){if(e.extensionType==="barcode"){const n=await this._getBase64Str(e.extension);e.src=n}}_getBase64Str(e){const n=document.createElement("canvas");return x4(n,e.value,{...e}),n.toDataURL("image/png",1)}_defaultBarcodeOption(){return{value:"123456",format:"CODE128",text:"hi kuaitu",textAlign:"left",textPosition:"bottom",fontSize:12,background:"#fff",lineColor:"#000",displayValue:!1}}addBarcode(){const e=this._defaultBarcodeOption(),n=this._getBase64Str(JSON.parse(JSON.stringify(e)));st.fabric.Image.fromURL(n,i=>{i.set({extensionType:"barcode",extension:e}),i.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(i),this.canvas.setActiveObject(i),this.editor.position("center")},{crossOrigin:"anonymous"})}setBarcode(e){try{const n=this._getBase64Str(e),i=this.canvas.getActiveObjects()[0];st.fabric.Image.fromURL(n,o=>{o.set({left:i.left,top:i.top,extensionType:"barcode",extension:{...e}}),o.scaleToWidth(i.getScaledWidth()),this.editor.del(),this.canvas.add(o),this.canvas.setActiveObject(o)},{crossOrigin:"anonymous"})}catch(n){}}getBarcodeTypes(){return Object.values(Ug)}destroy(){}}vt(Uu,"pluginName","BarCodePlugin"),vt(Uu,"apis",["addBarcode","setBarcode","getBarcodeTypes"]);var Hg={exports:{}};Hg.exports=(()=>{var t={192:(i,o)=>{var l,f,A=function(){var m=function(r,a){var c=r,p=k[a],g=null,v=0,y=null,_=[],B={},N=function(M,P){g=function(z){for(var X=new Array(z),et=0;et<z;et+=1){X[et]=new Array(z);for(var J=0;J<z;J+=1)X[et][J]=null}return X}(v=4*c+17),L(0,0),L(v-7,0),L(0,v-7),D(),C(),j(M,P),c>=7&&F(M),y==null&&(y=W(c,p,_)),U(y,P)},L=function(M,P){for(var z=-1;z<=7;z+=1)if(!(M+z<=-1||v<=M+z))for(var X=-1;X<=7;X+=1)P+X<=-1||v<=P+X||(g[M+z][P+X]=0<=z&&z<=6&&(X==0||X==6)||0<=X&&X<=6&&(z==0||z==6)||2<=z&&z<=4&&2<=X&&X<=4)},C=function(){for(var M=8;M<v-8;M+=1)g[M][6]==null&&(g[M][6]=M%2==0);for(var P=8;P<v-8;P+=1)g[6][P]==null&&(g[6][P]=P%2==0)},D=function(){for(var M=S.getPatternPosition(c),P=0;P<M.length;P+=1)for(var z=0;z<M.length;z+=1){var X=M[P],et=M[z];if(g[X][et]==null)for(var J=-2;J<=2;J+=1)for(var Z=-2;Z<=2;Z+=1)g[X+J][et+Z]=J==-2||J==2||Z==-2||Z==2||J==0&&Z==0}},F=function(M){for(var P=S.getBCHTypeNumber(c),z=0;z<18;z+=1){var X=!M&&(P>>z&1)==1;g[Math.floor(z/3)][z%3+v-8-3]=X}for(z=0;z<18;z+=1)X=!M&&(P>>z&1)==1,g[z%3+v-8-3][Math.floor(z/3)]=X},j=function(M,P){for(var z=p<<3|P,X=S.getBCHTypeInfo(z),et=0;et<15;et+=1){var J=!M&&(X>>et&1)==1;et<6?g[et][8]=J:et<8?g[et+1][8]=J:g[v-15+et][8]=J}for(et=0;et<15;et+=1)J=!M&&(X>>et&1)==1,et<8?g[8][v-et-1]=J:et<9?g[8][15-et-1+1]=J:g[8][15-et-1]=J;g[v-8][8]=!M},U=function(M,P){for(var z=-1,X=v-1,et=7,J=0,Z=S.getMaskFunction(P),it=v-1;it>0;it-=2)for(it==6&&(it-=1);;){for(var at=0;at<2;at+=1)if(g[X][it-at]==null){var lt=!1;J<M.length&&(lt=(M[J]>>>et&1)==1),Z(X,it-at)&&(lt=!lt),g[X][it-at]=lt,(et-=1)==-1&&(J+=1,et=7)}if((X+=z)<0||v<=X){X-=z,z=-z;break}}},W=function(M,P,z){for(var X=V.getRSBlocks(M,P),et=b(),J=0;J<z.length;J+=1){var Z=z[J];et.put(Z.getMode(),4),et.put(Z.getLength(),S.getLengthInBits(Z.getMode(),M)),Z.write(et)}var it=0;for(J=0;J<X.length;J+=1)it+=X[J].dataCount;if(et.getLengthInBits()>8*it)throw"code length overflow. ("+et.getLengthInBits()+">"+8*it+")";for(et.getLengthInBits()+4<=8*it&&et.put(0,4);et.getLengthInBits()%8!=0;)et.putBit(!1);for(;!(et.getLengthInBits()>=8*it||(et.put(236,8),et.getLengthInBits()>=8*it));)et.put(17,8);return function(at,lt){for(var ht=0,Ct=0,ft=0,At=new Array(lt.length),pt=new Array(lt.length),mt=0;mt<lt.length;mt+=1){var _t=lt[mt].dataCount,It=lt[mt].totalCount-_t;Ct=Math.max(Ct,_t),ft=Math.max(ft,It),At[mt]=new Array(_t);for(var yt=0;yt<At[mt].length;yt+=1)At[mt][yt]=255&at.getBuffer()[yt+ht];ht+=_t;var Bt=S.getErrorCorrectPolynomial(It),Ot=R(At[mt],Bt.getLength()-1).mod(Bt);for(pt[mt]=new Array(Bt.getLength()-1),yt=0;yt<pt[mt].length;yt+=1){var Wt=yt+Ot.getLength()-pt[mt].length;pt[mt][yt]=Wt>=0?Ot.getAt(Wt):0}}var le=0;for(yt=0;yt<lt.length;yt+=1)le+=lt[yt].totalCount;var ve=new Array(le),Xt=0;for(yt=0;yt<Ct;yt+=1)for(mt=0;mt<lt.length;mt+=1)yt<At[mt].length&&(ve[Xt]=At[mt][yt],Xt+=1);for(yt=0;yt<ft;yt+=1)for(mt=0;mt<lt.length;mt+=1)yt<pt[mt].length&&(ve[Xt]=pt[mt][yt],Xt+=1);return ve}(et,X)};B.addData=function(M,P){var z=null;switch(P=P||"Byte"){case"Numeric":z=Y(M);break;case"Alphanumeric":z=rt(M);break;case"Byte":z=q(M);break;case"Kanji":z=h(M);break;default:throw"mode:"+P}_.push(z),y=null},B.isDark=function(M,P){if(M<0||v<=M||P<0||v<=P)throw M+","+P;return g[M][P]},B.getModuleCount=function(){return v},B.make=function(){if(c<1){for(var M=1;M<40;M++){for(var P=V.getRSBlocks(M,p),z=b(),X=0;X<_.length;X++){var et=_[X];z.put(et.getMode(),4),z.put(et.getLength(),S.getLengthInBits(et.getMode(),M)),et.write(z)}var J=0;for(X=0;X<P.length;X++)J+=P[X].dataCount;if(z.getLengthInBits()<=8*J)break}c=M}N(!1,function(){for(var Z=0,it=0,at=0;at<8;at+=1){N(!0,at);var lt=S.getLostPoint(B);(at==0||Z>lt)&&(Z=lt,it=at)}return it}())},B.createTableTag=function(M,P){M=M||2;var z="";z+='<table style="',z+=" border-width: 0px; border-style: none;",z+=" border-collapse: collapse;",z+=" padding: 0px; margin: "+(P=P===void 0?4*M:P)+"px;",z+='">',z+="<tbody>";for(var X=0;X<B.getModuleCount();X+=1){z+="<tr>";for(var et=0;et<B.getModuleCount();et+=1)z+='<td style="',z+=" border-width: 0px; border-style: none;",z+=" border-collapse: collapse;",z+=" padding: 0px; margin: 0px;",z+=" width: "+M+"px;",z+=" height: "+M+"px;",z+=" background-color: ",z+=B.isDark(X,et)?"#000000":"#ffffff",z+=";",z+='"/>';z+="</tr>"}return(z+="</tbody>")+"</table>"},B.createSvgTag=function(M,P,z,X){var et={};typeof arguments[0]=="object"&&(M=(et=arguments[0]).cellSize,P=et.margin,z=et.alt,X=et.title),M=M||2,P=P===void 0?4*M:P,(z=typeof z=="string"?{text:z}:z||{}).text=z.text||null,z.id=z.text?z.id||"qrcode-description":null,(X=typeof X=="string"?{text:X}:X||{}).text=X.text||null,X.id=X.text?X.id||"qrcode-title":null;var J,Z,it,at,lt=B.getModuleCount()*M+2*P,ht="";for(at="l"+M+",0 0,"+M+" -"+M+",0 0,-"+M+"z ",ht+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',ht+=et.scalable?"":' width="'+lt+'px" height="'+lt+'px"',ht+=' viewBox="0 0 '+lt+" "+lt+'" ',ht+=' preserveAspectRatio="xMinYMin meet"',ht+=X.text||z.text?' role="img" aria-labelledby="'+$([X.id,z.id].join(" ").trim())+'"':"",ht+=">",ht+=X.text?'<title id="'+$(X.id)+'">'+$(X.text)+"</title>":"",ht+=z.text?'<description id="'+$(z.id)+'">'+$(z.text)+"</description>":"",ht+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',ht+='<path d="',Z=0;Z<B.getModuleCount();Z+=1)for(it=Z*M+P,J=0;J<B.getModuleCount();J+=1)B.isDark(Z,J)&&(ht+="M"+(J*M+P)+","+it+at);return(ht+='" stroke="transparent" fill="black"/>')+"</svg>"},B.createDataURL=function(M,P){M=M||2,P=P===void 0?4*M:P;var z=B.getModuleCount()*M+2*P,X=P,et=z-P;return d(z,z,function(J,Z){if(X<=J&&J<et&&X<=Z&&Z<et){var it=Math.floor((J-X)/M),at=Math.floor((Z-X)/M);return B.isDark(at,it)?0:1}return 1})},B.createImgTag=function(M,P,z){M=M||2,P=P===void 0?4*M:P;var X=B.getModuleCount()*M+2*P,et="";return et+="<img",et+=' src="',et+=B.createDataURL(M,P),et+='"',et+=' width="',et+=X,et+='"',et+=' height="',et+=X,et+='"',z&&(et+=' alt="',et+=$(z),et+='"'),et+"/>"};var $=function(M){for(var P="",z=0;z<M.length;z+=1){var X=M.charAt(z);switch(X){case"<":P+="&lt;";break;case">":P+="&gt;";break;case"&":P+="&amp;";break;case'"':P+="&quot;";break;default:P+=X}}return P};return B.createASCII=function(M,P){if((M=M||1)<2)return function(At){At=At===void 0?2:At;var pt,mt,_t,It,yt,Bt=1*B.getModuleCount()+2*At,Ot=At,Wt=Bt-At,le={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},ve={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},Xt="";for(pt=0;pt<Bt;pt+=2){for(_t=Math.floor((pt-Ot)/1),It=Math.floor((pt+1-Ot)/1),mt=0;mt<Bt;mt+=1)yt="\u2588",Ot<=mt&&mt<Wt&&Ot<=pt&&pt<Wt&&B.isDark(_t,Math.floor((mt-Ot)/1))&&(yt=" "),Ot<=mt&&mt<Wt&&Ot<=pt+1&&pt+1<Wt&&B.isDark(It,Math.floor((mt-Ot)/1))?yt+=" ":yt+="\u2588",Xt+=At<1&&pt+1>=Wt?ve[yt]:le[yt];Xt+="\n"}return Bt%2&&At>0?Xt.substring(0,Xt.length-Bt-1)+Array(Bt+1).join("\u2580"):Xt.substring(0,Xt.length-1)}(P);M-=1,P=P===void 0?2*M:P;var z,X,et,J,Z=B.getModuleCount()*M+2*P,it=P,at=Z-P,lt=Array(M+1).join("\u2588\u2588"),ht=Array(M+1).join("  "),Ct="",ft="";for(z=0;z<Z;z+=1){for(et=Math.floor((z-it)/M),ft="",X=0;X<Z;X+=1)J=1,it<=X&&X<at&&it<=z&&z<at&&B.isDark(et,Math.floor((X-it)/M))&&(J=0),ft+=J?lt:ht;for(et=0;et<M;et+=1)Ct+=ft+"\n"}return Ct.substring(0,Ct.length-1)},B.renderTo2dContext=function(M,P){P=P||2;for(var z=B.getModuleCount(),X=0;X<z;X++)for(var et=0;et<z;et++)M.fillStyle=B.isDark(X,et)?"black":"white",M.fillRect(X*P,et*P,P,P)},B};m.stringToBytes=(m.stringToBytesFuncs={default:function(r){for(var a=[],c=0;c<r.length;c+=1){var p=r.charCodeAt(c);a.push(255&p)}return a}}).default,m.createStringToBytes=function(r,a){var c=function(){for(var g=u(r),v=function(){var C=g.read();if(C==-1)throw"eof";return C},y=0,_={};;){var B=g.read();if(B==-1)break;var N=v(),L=v()<<8|v();_[String.fromCharCode(B<<8|N)]=L,y+=1}if(y!=a)throw y+" != "+a;return _}(),p=63;return function(g){for(var v=[],y=0;y<g.length;y+=1){var _=g.charCodeAt(y);if(_<128)v.push(_);else{var B=c[g.charAt(y)];typeof B=="number"?(255&B)==B?v.push(B):(v.push(B>>>8),v.push(255&B)):v.push(p)}}return v}};var w,x,E,T,O,k={L:1,M:0,Q:3,H:2},S=(w=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],x=1335,E=7973,O=function(r){for(var a=0;r!=0;)a+=1,r>>>=1;return a},(T={}).getBCHTypeInfo=function(r){for(var a=r<<10;O(a)-O(x)>=0;)a^=x<<O(a)-O(x);return 21522^(r<<10|a)},T.getBCHTypeNumber=function(r){for(var a=r<<12;O(a)-O(E)>=0;)a^=E<<O(a)-O(E);return r<<12|a},T.getPatternPosition=function(r){return w[r-1]},T.getMaskFunction=function(r){switch(r){case 0:return function(a,c){return(a+c)%2==0};case 1:return function(a,c){return a%2==0};case 2:return function(a,c){return c%3==0};case 3:return function(a,c){return(a+c)%3==0};case 4:return function(a,c){return(Math.floor(a/2)+Math.floor(c/3))%2==0};case 5:return function(a,c){return a*c%2+a*c%3==0};case 6:return function(a,c){return(a*c%2+a*c%3)%2==0};case 7:return function(a,c){return(a*c%3+(a+c)%2)%2==0};default:throw"bad maskPattern:"+r}},T.getErrorCorrectPolynomial=function(r){for(var a=R([1],0),c=0;c<r;c+=1)a=a.multiply(R([1,Q.gexp(c)],0));return a},T.getLengthInBits=function(r,a){if(1<=a&&a<10)switch(r){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+r}else if(a<27)switch(r){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+r}else{if(!(a<41))throw"type:"+a;switch(r){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+r}}},T.getLostPoint=function(r){for(var a=r.getModuleCount(),c=0,p=0;p<a;p+=1)for(var g=0;g<a;g+=1){for(var v=0,y=r.isDark(p,g),_=-1;_<=1;_+=1)if(!(p+_<0||a<=p+_))for(var B=-1;B<=1;B+=1)g+B<0||a<=g+B||_==0&&B==0||y==r.isDark(p+_,g+B)&&(v+=1);v>5&&(c+=3+v-5)}for(p=0;p<a-1;p+=1)for(g=0;g<a-1;g+=1){var N=0;r.isDark(p,g)&&(N+=1),r.isDark(p+1,g)&&(N+=1),r.isDark(p,g+1)&&(N+=1),r.isDark(p+1,g+1)&&(N+=1),N!=0&&N!=4||(c+=3)}for(p=0;p<a;p+=1)for(g=0;g<a-6;g+=1)r.isDark(p,g)&&!r.isDark(p,g+1)&&r.isDark(p,g+2)&&r.isDark(p,g+3)&&r.isDark(p,g+4)&&!r.isDark(p,g+5)&&r.isDark(p,g+6)&&(c+=40);for(g=0;g<a;g+=1)for(p=0;p<a-6;p+=1)r.isDark(p,g)&&!r.isDark(p+1,g)&&r.isDark(p+2,g)&&r.isDark(p+3,g)&&r.isDark(p+4,g)&&!r.isDark(p+5,g)&&r.isDark(p+6,g)&&(c+=40);var L=0;for(g=0;g<a;g+=1)for(p=0;p<a;p+=1)r.isDark(p,g)&&(L+=1);return c+Math.abs(100*L/a/a-50)/5*10},T),Q=function(){for(var r=new Array(256),a=new Array(256),c=0;c<8;c+=1)r[c]=1<<c;for(c=8;c<256;c+=1)r[c]=r[c-4]^r[c-5]^r[c-6]^r[c-8];for(c=0;c<255;c+=1)a[r[c]]=c;return{glog:function(p){if(p<1)throw"glog("+p+")";return a[p]},gexp:function(p){for(;p<0;)p+=255;for(;p>=256;)p-=255;return r[p]}}}();function R(r,a){if(r.length===void 0)throw r.length+"/"+a;var c=function(){for(var g=0;g<r.length&&r[g]==0;)g+=1;for(var v=new Array(r.length-g+a),y=0;y<r.length-g;y+=1)v[y]=r[y+g];return v}(),p={getAt:function(g){return c[g]},getLength:function(){return c.length},multiply:function(g){for(var v=new Array(p.getLength()+g.getLength()-1),y=0;y<p.getLength();y+=1)for(var _=0;_<g.getLength();_+=1)v[y+_]^=Q.gexp(Q.glog(p.getAt(y))+Q.glog(g.getAt(_)));return R(v,0)},mod:function(g){if(p.getLength()-g.getLength()<0)return p;for(var v=Q.glog(p.getAt(0))-Q.glog(g.getAt(0)),y=new Array(p.getLength()),_=0;_<p.getLength();_+=1)y[_]=p.getAt(_);for(_=0;_<g.getLength();_+=1)y[_]^=Q.gexp(Q.glog(g.getAt(_))+v);return R(y,0).mod(g)}};return p}var V=function(){var r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a=function(p,g){var v={};return v.totalCount=p,v.dataCount=g,v},c={getRSBlocks:function(p,g){var v=function(F,j){switch(j){case k.L:return r[4*(F-1)+0];case k.M:return r[4*(F-1)+1];case k.Q:return r[4*(F-1)+2];case k.H:return r[4*(F-1)+3];default:return}}(p,g);if(v===void 0)throw"bad rs block @ typeNumber:"+p+"/errorCorrectionLevel:"+g;for(var y=v.length/3,_=[],B=0;B<y;B+=1)for(var N=v[3*B+0],L=v[3*B+1],C=v[3*B+2],D=0;D<N;D+=1)_.push(a(L,C));return _}};return c}(),b=function(){var r=[],a=0,c={getBuffer:function(){return r},getAt:function(p){var g=Math.floor(p/8);return(r[g]>>>7-p%8&1)==1},put:function(p,g){for(var v=0;v<g;v+=1)c.putBit((p>>>g-v-1&1)==1)},getLengthInBits:function(){return a},putBit:function(p){var g=Math.floor(a/8);r.length<=g&&r.push(0),p&&(r[g]|=128>>>a%8),a+=1}};return c},Y=function(r){var a=r,c={getMode:function(){return 1},getLength:function(v){return a.length},write:function(v){for(var y=a,_=0;_+2<y.length;)v.put(p(y.substring(_,_+3)),10),_+=3;_<y.length&&(y.length-_==1?v.put(p(y.substring(_,_+1)),4):y.length-_==2&&v.put(p(y.substring(_,_+2)),7))}},p=function(v){for(var y=0,_=0;_<v.length;_+=1)y=10*y+g(v.charAt(_));return y},g=function(v){if("0"<=v&&v<="9")return v.charCodeAt(0)-48;throw"illegal char :"+v};return c},rt=function(r){var a=r,c={getMode:function(){return 2},getLength:function(g){return a.length},write:function(g){for(var v=a,y=0;y+1<v.length;)g.put(45*p(v.charAt(y))+p(v.charAt(y+1)),11),y+=2;y<v.length&&g.put(p(v.charAt(y)),6)}},p=function(g){if("0"<=g&&g<="9")return g.charCodeAt(0)-48;if("A"<=g&&g<="Z")return g.charCodeAt(0)-65+10;switch(g){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+g}};return c},q=function(r){var a=m.stringToBytes(r);return{getMode:function(){return 4},getLength:function(c){return a.length},write:function(c){for(var p=0;p<a.length;p+=1)c.put(a[p],8)}}},h=function(r){var a=m.stringToBytesFuncs.SJIS;if(!a)throw"sjis not supported.";(function(){var p=a("\u53CB");if(p.length!=2||(p[0]<<8|p[1])!=38726)throw"sjis not supported."})();var c=a(r);return{getMode:function(){return 8},getLength:function(p){return~~(c.length/2)},write:function(p){for(var g=c,v=0;v+1<g.length;){var y=(255&g[v])<<8|255&g[v+1];if(33088<=y&&y<=40956)y-=33088;else{if(!(57408<=y&&y<=60351))throw"illegal char at "+(v+1)+"/"+y;y-=49472}y=192*(y>>>8&255)+(255&y),p.put(y,13),v+=2}if(v<g.length)throw"illegal char at "+(v+1)}}},s=function(){var r=[],a={writeByte:function(c){r.push(255&c)},writeShort:function(c){a.writeByte(c),a.writeByte(c>>>8)},writeBytes:function(c,p,g){p=p||0,g=g||c.length;for(var v=0;v<g;v+=1)a.writeByte(c[v+p])},writeString:function(c){for(var p=0;p<c.length;p+=1)a.writeByte(c.charCodeAt(p))},toByteArray:function(){return r},toString:function(){var c="";c+="[";for(var p=0;p<r.length;p+=1)p>0&&(c+=","),c+=r[p];return c+"]"}};return a},u=function(r){var a=r,c=0,p=0,g=0,v={read:function(){for(;g<8;){if(c>=a.length){if(g==0)return-1;throw"unexpected end of file./"+g}var _=a.charAt(c);if(c+=1,_=="=")return g=0,-1;_.match(/^\s$/)||(p=p<<6|y(_.charCodeAt(0)),g+=6)}var B=p>>>g-8&255;return g-=8,B}},y=function(_){if(65<=_&&_<=90)return _-65;if(97<=_&&_<=122)return _-97+26;if(48<=_&&_<=57)return _-48+52;if(_==43)return 62;if(_==47)return 63;throw"c:"+_};return v},d=function(r,a,c){for(var p=function(L,C){var D=L,F=C,j=new Array(L*C),U={setPixel:function(M,P,z){j[P*D+M]=z},write:function(M){M.writeString("GIF87a"),M.writeShort(D),M.writeShort(F),M.writeByte(128),M.writeByte(0),M.writeByte(0),M.writeByte(0),M.writeByte(0),M.writeByte(0),M.writeByte(255),M.writeByte(255),M.writeByte(255),M.writeString(","),M.writeShort(0),M.writeShort(0),M.writeShort(D),M.writeShort(F),M.writeByte(0);var P=W(2);M.writeByte(2);for(var z=0;P.length-z>255;)M.writeByte(255),M.writeBytes(P,z,255),z+=255;M.writeByte(P.length-z),M.writeBytes(P,z,P.length-z),M.writeByte(0),M.writeString(";")}},W=function(M){for(var P=1<<M,z=1+(1<<M),X=M+1,et=$(),J=0;J<P;J+=1)et.add(String.fromCharCode(J));et.add(String.fromCharCode(P)),et.add(String.fromCharCode(z));var Z,it,at,lt=s(),ht=(Z=lt,it=0,at=0,{write:function(pt,mt){if(pt>>>mt)throw"length over";for(;it+mt>=8;)Z.writeByte(255&(pt<<it|at)),mt-=8-it,pt>>>=8-it,at=0,it=0;at|=pt<<it,it+=mt},flush:function(){it>0&&Z.writeByte(at)}});ht.write(P,X);var Ct=0,ft=String.fromCharCode(j[Ct]);for(Ct+=1;Ct<j.length;){var At=String.fromCharCode(j[Ct]);Ct+=1,et.contains(ft+At)?ft+=At:(ht.write(et.indexOf(ft),X),et.size()<4095&&(et.size()==1<<X&&(X+=1),et.add(ft+At)),ft=At)}return ht.write(et.indexOf(ft),X),ht.write(z,X),ht.flush(),lt.toByteArray()},$=function(){var M={},P=0,z={add:function(X){if(z.contains(X))throw"dup key:"+X;M[X]=P,P+=1},size:function(){return P},indexOf:function(X){return M[X]},contains:function(X){return M[X]!==void 0}};return z};return U}(r,a),g=0;g<a;g+=1)for(var v=0;v<r;v+=1)p.setPixel(v,g,c(v,g));var y=s();p.write(y);for(var _=function(){var L=0,C=0,D=0,F="",j={},U=function($){F+=String.fromCharCode(W(63&$))},W=function($){if(!($<0)){if($<26)return 65+$;if($<52)return $-26+97;if($<62)return $-52+48;if($==62)return 43;if($==63)return 47}throw"n:"+$};return j.writeByte=function($){for(L=L<<8|255&$,C+=8,D+=1;C>=6;)U(L>>>C-6),C-=6},j.flush=function(){if(C>0&&(U(L<<6-C),L=0,C=0),D%3!=0)for(var $=3-D%3,M=0;M<$;M+=1)F+="="},j.toString=function(){return F},j}(),B=y.toByteArray(),N=0;N<B.length;N+=1)_.writeByte(B[N]);return _.flush(),"data:image/gif;base64,"+_};return m}();A.stringToBytesFuncs["UTF-8"]=function(m){return function(w){for(var x=[],E=0;E<w.length;E++){var T=w.charCodeAt(E);T<128?x.push(T):T<2048?x.push(192|T>>6,128|63&T):T<55296||T>=57344?x.push(224|T>>12,128|T>>6&63,128|63&T):(E++,T=65536+((1023&T)<<10|1023&w.charCodeAt(E)),x.push(240|T>>18,128|T>>12&63,128|T>>6&63,128|63&T))}return x}(m)},(f=typeof(l=function(){return A})=="function"?l.apply(o,[]):l)===void 0||(i.exports=f)},676:(i,o,l)=>{l.d(o,{default:()=>N});var f=function(){return(f=Object.assign||function(L){for(var C,D=1,F=arguments.length;D<F;D++)for(var j in C=arguments[D])Object.prototype.hasOwnProperty.call(C,j)&&(L[j]=C[j]);return L}).apply(this,arguments)},A=function(){for(var L=0,C=0,D=arguments.length;C<D;C++)L+=arguments[C].length;var F=Array(L),j=0;for(C=0;C<D;C++)for(var U=arguments[C],W=0,$=U.length;W<$;W++,j++)F[j]=U[W];return F},m=function(L){return!!L&&typeof L=="object"&&!Array.isArray(L)};function w(L){for(var C=[],D=1;D<arguments.length;D++)C[D-1]=arguments[D];if(!C.length)return L;var F=C.shift();return F!==void 0&&m(L)&&m(F)?(L=f({},L),Object.keys(F).forEach(function(j){var U=L[j],W=F[j];Array.isArray(U)&&Array.isArray(W)?L[j]=W:m(U)&&m(W)?L[j]=w(Object.assign({},U),W):L[j]=W}),w.apply(void 0,A([L],C))):L}function x(L,C){var D=document.createElement("a");D.download=C,D.href=L,document.body.appendChild(D),D.click(),document.body.removeChild(D)}function E(L){return C=this,D=void 0,j=function(){return function(U,W){var $,M,P,z,X={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return z={next:et(0),throw:et(1),return:et(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function et(J){return function(Z){return function(it){if($)throw new TypeError("Generator is already executing.");for(;X;)try{if($=1,M&&(P=2&it[0]?M.return:it[0]?M.throw||((P=M.return)&&P.call(M),0):M.next)&&!(P=P.call(M,it[1])).done)return P;switch(M=0,P&&(it=[2&it[0],P.value]),it[0]){case 0:case 1:P=it;break;case 4:return X.label++,{value:it[1],done:!1};case 5:X.label++,M=it[1],it=[0];continue;case 7:it=X.ops.pop(),X.trys.pop();continue;default:if(!((P=(P=X.trys).length>0&&P[P.length-1])||it[0]!==6&&it[0]!==2)){X=0;continue}if(it[0]===3&&(!P||it[1]>P[0]&&it[1]<P[3])){X.label=it[1];break}if(it[0]===6&&X.label<P[1]){X.label=P[1],P=it;break}if(P&&X.label<P[2]){X.label=P[2],X.ops.push(it);break}P[2]&&X.ops.pop(),X.trys.pop();continue}it=W.call(U,X)}catch(at){it=[6,at],M=0}finally{$=P=0}if(5&it[0])throw it[1];return{value:it[0]?it[1]:void 0,done:!0}}([J,Z])}}}(this,function(U){return[2,new Promise(function(W){var $=new XMLHttpRequest;$.onload=function(){var M=new FileReader;M.onloadend=function(){W(M.result)},M.readAsDataURL($.response)},$.open("GET",L),$.responseType="blob",$.send()})]})},new((F=void 0)||(F=Promise))(function(U,W){function $(z){try{P(j.next(z))}catch(X){W(X)}}function M(z){try{P(j.throw(z))}catch(X){W(X)}}function P(z){var X;z.done?U(z.value):(X=z.value,X instanceof F?X:new F(function(et){et(X)})).then($,M)}P((j=j.apply(C,D||[])).next())});var C,D,F,j}const T={L:.07,M:.15,Q:.25,H:.3};var O=function(){return(O=Object.assign||function(L){for(var C,D=1,F=arguments.length;D<F;D++)for(var j in C=arguments[D])Object.prototype.hasOwnProperty.call(C,j)&&(L[j]=C[j]);return L}).apply(this,arguments)};const k=function(){function L(C){var D=C.svg,F=C.type;this._svg=D,this._type=F}return L.prototype.draw=function(C,D,F,j){var U;switch(this._type){case"dots":U=this._drawDot;break;case"classy":U=this._drawClassy;break;case"classy-rounded":U=this._drawClassyRounded;break;case"rounded":U=this._drawRounded;break;case"extra-rounded":U=this._drawExtraRounded;break;default:U=this._drawSquare}U.call(this,{x:C,y:D,size:F,getNeighbor:j})},L.prototype._rotateFigure=function(C){var D,F=C.x,j=C.y,U=C.size,W=C.rotation,$=W===void 0?0:W,M=F+U/2,P=j+U/2;(0,C.draw)(),(D=this._element)===null||D===void 0||D.setAttribute("transform","rotate("+180*$/Math.PI+","+M+","+P+")")},L.prototype._basicDot=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(O(O({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),D._element.setAttribute("cx",String(j+F/2)),D._element.setAttribute("cy",String(U+F/2)),D._element.setAttribute("r",String(F/2))}}))},L.prototype._basicSquare=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(O(O({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),D._element.setAttribute("x",String(j)),D._element.setAttribute("y",String(U)),D._element.setAttribute("width",String(F)),D._element.setAttribute("height",String(F))}}))},L.prototype._basicSideRounded=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(O(O({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("d","M "+j+" "+U+"v "+F+"h "+F/2+"a "+F/2+" "+F/2+", 0, 0, 0, 0 "+-F)}}))},L.prototype._basicCornerRounded=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(O(O({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("d","M "+j+" "+U+"v "+F+"h "+F+"v "+-F/2+"a "+F/2+" "+F/2+", 0, 0, 0, "+-F/2+" "+-F/2)}}))},L.prototype._basicCornerExtraRounded=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(O(O({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("d","M "+j+" "+U+"v "+F+"h "+F+"a "+F+" "+F+", 0, 0, 0, "+-F+" "+-F)}}))},L.prototype._basicCornersRounded=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(O(O({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("d","M "+j+" "+U+"v "+F/2+"a "+F/2+" "+F/2+", 0, 0, 0, "+F/2+" "+F/2+"h "+F/2+"v "+-F/2+"a "+F/2+" "+F/2+", 0, 0, 0, "+-F/2+" "+-F/2)}}))},L.prototype._drawDot=function(C){var D=C.x,F=C.y,j=C.size;this._basicDot({x:D,y:F,size:j,rotation:0})},L.prototype._drawSquare=function(C){var D=C.x,F=C.y,j=C.size;this._basicSquare({x:D,y:F,size:j,rotation:0})},L.prototype._drawRounded=function(C){var D=C.x,F=C.y,j=C.size,U=C.getNeighbor,W=U?+U(-1,0):0,$=U?+U(1,0):0,M=U?+U(0,-1):0,P=U?+U(0,1):0,z=W+$+M+P;if(z!==0)if(z>2||W&&$||M&&P)this._basicSquare({x:D,y:F,size:j,rotation:0});else{if(z===2){var X=0;return W&&M?X=Math.PI/2:M&&$?X=Math.PI:$&&P&&(X=-Math.PI/2),void this._basicCornerRounded({x:D,y:F,size:j,rotation:X})}if(z===1)return X=0,M?X=Math.PI/2:$?X=Math.PI:P&&(X=-Math.PI/2),void this._basicSideRounded({x:D,y:F,size:j,rotation:X})}else this._basicDot({x:D,y:F,size:j,rotation:0})},L.prototype._drawExtraRounded=function(C){var D=C.x,F=C.y,j=C.size,U=C.getNeighbor,W=U?+U(-1,0):0,$=U?+U(1,0):0,M=U?+U(0,-1):0,P=U?+U(0,1):0,z=W+$+M+P;if(z!==0)if(z>2||W&&$||M&&P)this._basicSquare({x:D,y:F,size:j,rotation:0});else{if(z===2){var X=0;return W&&M?X=Math.PI/2:M&&$?X=Math.PI:$&&P&&(X=-Math.PI/2),void this._basicCornerExtraRounded({x:D,y:F,size:j,rotation:X})}if(z===1)return X=0,M?X=Math.PI/2:$?X=Math.PI:P&&(X=-Math.PI/2),void this._basicSideRounded({x:D,y:F,size:j,rotation:X})}else this._basicDot({x:D,y:F,size:j,rotation:0})},L.prototype._drawClassy=function(C){var D=C.x,F=C.y,j=C.size,U=C.getNeighbor,W=U?+U(-1,0):0,$=U?+U(1,0):0,M=U?+U(0,-1):0,P=U?+U(0,1):0;W+$+M+P!==0?W||M?$||P?this._basicSquare({x:D,y:F,size:j,rotation:0}):this._basicCornerRounded({x:D,y:F,size:j,rotation:Math.PI/2}):this._basicCornerRounded({x:D,y:F,size:j,rotation:-Math.PI/2}):this._basicCornersRounded({x:D,y:F,size:j,rotation:Math.PI/2})},L.prototype._drawClassyRounded=function(C){var D=C.x,F=C.y,j=C.size,U=C.getNeighbor,W=U?+U(-1,0):0,$=U?+U(1,0):0,M=U?+U(0,-1):0,P=U?+U(0,1):0;W+$+M+P!==0?W||M?$||P?this._basicSquare({x:D,y:F,size:j,rotation:0}):this._basicCornerExtraRounded({x:D,y:F,size:j,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:D,y:F,size:j,rotation:-Math.PI/2}):this._basicCornersRounded({x:D,y:F,size:j,rotation:Math.PI/2})},L}();var S=function(){return(S=Object.assign||function(L){for(var C,D=1,F=arguments.length;D<F;D++)for(var j in C=arguments[D])Object.prototype.hasOwnProperty.call(C,j)&&(L[j]=C[j]);return L}).apply(this,arguments)};const Q=function(){function L(C){var D=C.svg,F=C.type;this._svg=D,this._type=F}return L.prototype.draw=function(C,D,F,j){var U;switch(this._type){case"square":U=this._drawSquare;break;case"extra-rounded":U=this._drawExtraRounded;break;default:U=this._drawDot}U.call(this,{x:C,y:D,size:F,rotation:j})},L.prototype._rotateFigure=function(C){var D,F=C.x,j=C.y,U=C.size,W=C.rotation,$=W===void 0?0:W,M=F+U/2,P=j+U/2;(0,C.draw)(),(D=this._element)===null||D===void 0||D.setAttribute("transform","rotate("+180*$/Math.PI+","+M+","+P+")")},L.prototype._basicDot=function(C){var D=this,F=C.size,j=C.x,U=C.y,W=F/7;this._rotateFigure(S(S({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("clip-rule","evenodd"),D._element.setAttribute("d","M "+(j+F/2)+" "+U+"a "+F/2+" "+F/2+" 0 1 0 0.1 0zm 0 "+W+"a "+(F/2-W)+" "+(F/2-W)+" 0 1 1 -0.1 0Z")}}))},L.prototype._basicSquare=function(C){var D=this,F=C.size,j=C.x,U=C.y,W=F/7;this._rotateFigure(S(S({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("clip-rule","evenodd"),D._element.setAttribute("d","M "+j+" "+U+"v "+F+"h "+F+"v "+-F+"zM "+(j+W)+" "+(U+W)+"h "+(F-2*W)+"v "+(F-2*W)+"h "+(2*W-F)+"z")}}))},L.prototype._basicExtraRounded=function(C){var D=this,F=C.size,j=C.x,U=C.y,W=F/7;this._rotateFigure(S(S({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","path"),D._element.setAttribute("clip-rule","evenodd"),D._element.setAttribute("d","M "+j+" "+(U+2.5*W)+"v "+2*W+"a "+2.5*W+" "+2.5*W+", 0, 0, 0, "+2.5*W+" "+2.5*W+"h "+2*W+"a "+2.5*W+" "+2.5*W+", 0, 0, 0, "+2.5*W+" "+2.5*-W+"v "+-2*W+"a "+2.5*W+" "+2.5*W+", 0, 0, 0, "+2.5*-W+" "+2.5*-W+"h "+-2*W+"a "+2.5*W+" "+2.5*W+", 0, 0, 0, "+2.5*-W+" "+2.5*W+"M "+(j+2.5*W)+" "+(U+W)+"h "+2*W+"a "+1.5*W+" "+1.5*W+", 0, 0, 1, "+1.5*W+" "+1.5*W+"v "+2*W+"a "+1.5*W+" "+1.5*W+", 0, 0, 1, "+1.5*-W+" "+1.5*W+"h "+-2*W+"a "+1.5*W+" "+1.5*W+", 0, 0, 1, "+1.5*-W+" "+1.5*-W+"v "+-2*W+"a "+1.5*W+" "+1.5*W+", 0, 0, 1, "+1.5*W+" "+1.5*-W)}}))},L.prototype._drawDot=function(C){var D=C.x,F=C.y,j=C.size,U=C.rotation;this._basicDot({x:D,y:F,size:j,rotation:U})},L.prototype._drawSquare=function(C){var D=C.x,F=C.y,j=C.size,U=C.rotation;this._basicSquare({x:D,y:F,size:j,rotation:U})},L.prototype._drawExtraRounded=function(C){var D=C.x,F=C.y,j=C.size,U=C.rotation;this._basicExtraRounded({x:D,y:F,size:j,rotation:U})},L}();var R=function(){return(R=Object.assign||function(L){for(var C,D=1,F=arguments.length;D<F;D++)for(var j in C=arguments[D])Object.prototype.hasOwnProperty.call(C,j)&&(L[j]=C[j]);return L}).apply(this,arguments)};const V=function(){function L(C){var D=C.svg,F=C.type;this._svg=D,this._type=F}return L.prototype.draw=function(C,D,F,j){(this._type==="square"?this._drawSquare:this._drawDot).call(this,{x:C,y:D,size:F,rotation:j})},L.prototype._rotateFigure=function(C){var D,F=C.x,j=C.y,U=C.size,W=C.rotation,$=W===void 0?0:W,M=F+U/2,P=j+U/2;(0,C.draw)(),(D=this._element)===null||D===void 0||D.setAttribute("transform","rotate("+180*$/Math.PI+","+M+","+P+")")},L.prototype._basicDot=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(R(R({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),D._element.setAttribute("cx",String(j+F/2)),D._element.setAttribute("cy",String(U+F/2)),D._element.setAttribute("r",String(F/2))}}))},L.prototype._basicSquare=function(C){var D=this,F=C.size,j=C.x,U=C.y;this._rotateFigure(R(R({},C),{draw:function(){D._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),D._element.setAttribute("x",String(j)),D._element.setAttribute("y",String(U)),D._element.setAttribute("width",String(F)),D._element.setAttribute("height",String(F))}}))},L.prototype._drawDot=function(C){var D=C.x,F=C.y,j=C.size,U=C.rotation;this._basicDot({x:D,y:F,size:j,rotation:U})},L.prototype._drawSquare=function(C){var D=C.x,F=C.y,j=C.size,U=C.rotation;this._basicSquare({x:D,y:F,size:j,rotation:U})},L}(),b="circle";var Y=function(L,C,D,F){return new(D||(D=Promise))(function(j,U){function W(P){try{M(F.next(P))}catch(z){U(z)}}function $(P){try{M(F.throw(P))}catch(z){U(z)}}function M(P){var z;P.done?j(P.value):(z=P.value,z instanceof D?z:new D(function(X){X(z)})).then(W,$)}M((F=F.apply(L,[])).next())})},rt=function(L,C){var D,F,j,U,W={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return U={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function $(M){return function(P){return function(z){if(D)throw new TypeError("Generator is already executing.");for(;W;)try{if(D=1,F&&(j=2&z[0]?F.return:z[0]?F.throw||((j=F.return)&&j.call(F),0):F.next)&&!(j=j.call(F,z[1])).done)return j;switch(F=0,j&&(z=[2&z[0],j.value]),z[0]){case 0:case 1:j=z;break;case 4:return W.label++,{value:z[1],done:!1};case 5:W.label++,F=z[1],z=[0];continue;case 7:z=W.ops.pop(),W.trys.pop();continue;default:if(!((j=(j=W.trys).length>0&&j[j.length-1])||z[0]!==6&&z[0]!==2)){W=0;continue}if(z[0]===3&&(!j||z[1]>j[0]&&z[1]<j[3])){W.label=z[1];break}if(z[0]===6&&W.label<j[1]){W.label=j[1],j=z;break}if(j&&W.label<j[2]){W.label=j[2],W.ops.push(z);break}j[2]&&W.ops.pop(),W.trys.pop();continue}z=C.call(L,W)}catch(X){z=[6,X],F=0}finally{D=j=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([M,P])}}},q=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],h=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const s=function(){function L(C){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(C.width)),this._element.setAttribute("height",String(C.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=C}return Object.defineProperty(L.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),L.prototype.getElement=function(){return this._element},L.prototype.drawQR=function(C){return Y(this,void 0,void 0,function(){var D,F,j,U,W,$,M,P,z,X,et=this;return rt(this,function(J){switch(J.label){case 0:return D=C.getModuleCount(),F=Math.min(this._options.width,this._options.height)-2*this._options.margin,j=this._options.shape===b?F/Math.sqrt(2):F,U=Math.floor(j/D),W={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=C,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(J.sent(),!this._image)return[2];$=this._options,M=$.imageOptions,P=$.qrOptions,z=M.imageSize*T[P.errorCorrectionLevel],X=Math.floor(z*D*D),W=function(Z){var it=Z.originalHeight,at=Z.originalWidth,lt=Z.maxHiddenDots,ht=Z.maxHiddenAxisDots,Ct=Z.dotSize,ft={x:0,y:0},At={x:0,y:0};if(it<=0||at<=0||lt<=0||Ct<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var pt=it/at;return ft.x=Math.floor(Math.sqrt(lt/pt)),ft.x<=0&&(ft.x=1),ht&&ht<ft.x&&(ft.x=ht),ft.x%2==0&&ft.x--,At.x=ft.x*Ct,ft.y=1+2*Math.ceil((ft.x*pt-1)/2),At.y=Math.round(At.x*pt),(ft.y*ft.x>lt||ht&&ht<ft.y)&&(ht&&ht<ft.y?(ft.y=ht,ft.y%2==0&&ft.x--):ft.y-=2,At.y=ft.y*Ct,ft.x=1+2*Math.ceil((ft.y/pt-1)/2),At.x=Math.round(At.y/pt)),{height:At.y,width:At.x,hideYDots:ft.y,hideXDots:ft.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:X,maxHiddenAxisDots:D-14,dotSize:U}),J.label=2;case 2:return this.drawBackground(),this.drawDots(function(Z,it){var at,lt,ht,Ct,ft,At;return!(et._options.imageOptions.hideBackgroundDots&&Z>=(D-W.hideXDots)/2&&Z<(D+W.hideXDots)/2&&it>=(D-W.hideYDots)/2&&it<(D+W.hideYDots)/2||!((at=q[Z])===null||at===void 0)&&at[it]||!((lt=q[Z-D+7])===null||lt===void 0)&&lt[it]||!((ht=q[Z])===null||ht===void 0)&&ht[it-D+7]||!((Ct=h[Z])===null||Ct===void 0)&&Ct[it]||!((ft=h[Z-D+7])===null||ft===void 0)&&ft[it]||!((At=h[Z])===null||At===void 0)&&At[it-D+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:W.width,height:W.height,count:D,dotSize:U})]:[3,4];case 3:J.sent(),J.label=4;case 4:return[2]}})})},L.prototype.drawBackground=function(){var C,D,F,j=this._element,U=this._options;if(j){var W=(C=U.backgroundOptions)===null||C===void 0?void 0:C.gradient,$=(D=U.backgroundOptions)===null||D===void 0?void 0:D.color;if((W||$)&&this._createColor({options:W,color:$,additionalRotation:0,x:0,y:0,height:U.height,width:U.width,name:"background-color"}),(F=U.backgroundOptions)===null||F===void 0?void 0:F.round){var M=Math.min(U.width,U.height),P=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),P.setAttribute("x",String((U.width-M)/2)),P.setAttribute("y",String((U.height-M)/2)),P.setAttribute("width",String(M)),P.setAttribute("height",String(M)),P.setAttribute("rx",String(M/2*U.backgroundOptions.round)),this._backgroundClipPath.appendChild(P)}}},L.prototype.drawDots=function(C){var D,F,j=this;if(!this._qr)throw"QR code is not defined";var U=this._options,W=this._qr.getModuleCount();if(W>U.width||W>U.height)throw"The canvas is too small.";var $=Math.min(U.width,U.height)-2*U.margin,M=U.shape===b?$/Math.sqrt(2):$,P=Math.floor(M/W),z=Math.floor((U.width-W*P)/2),X=Math.floor((U.height-W*P)/2),et=new k({svg:this._element,type:U.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(D=U.dotsOptions)===null||D===void 0?void 0:D.gradient,color:U.dotsOptions.color,additionalRotation:0,x:0,y:0,height:U.height,width:U.width,name:"dot-color"});for(var J=function(It){for(var yt=function(Ot){return C&&!C(It,Ot)?"continue":!((F=Z._qr)===null||F===void 0)&&F.isDark(It,Ot)?(et.draw(z+It*P,X+Ot*P,P,function(Wt,le){return!(It+Wt<0||Ot+le<0||It+Wt>=W||Ot+le>=W)&&!(C&&!C(It+Wt,Ot+le))&&!!j._qr&&j._qr.isDark(It+Wt,Ot+le)}),void(et._element&&Z._dotsClipPath&&Z._dotsClipPath.appendChild(et._element))):"continue"},Bt=0;Bt<W;Bt++)yt(Bt)},Z=this,it=0;it<W;it++)J(it);if(U.shape===b){var at=Math.floor(($/P-W)/2),lt=W+2*at,ht=z-at*P,Ct=X-at*P,ft=[],At=Math.floor(lt/2);for(it=0;it<lt;it++){ft[it]=[];for(var pt=0;pt<lt;pt++)it>=at-1&&it<=lt-at&&pt>=at-1&&pt<=lt-at||Math.sqrt((it-At)*(it-At)+(pt-At)*(pt-At))>At?ft[it][pt]=0:ft[it][pt]=this._qr.isDark(pt-2*at<0?pt:pt>=W?pt-2*at:pt-at,it-2*at<0?it:it>=W?it-2*at:it-at)?1:0}var mt=function(It){for(var yt=function(Ot){if(!ft[It][Ot])return"continue";et.draw(ht+It*P,Ct+Ot*P,P,function(Wt,le){var ve;return!!(!((ve=ft[It+Wt])===null||ve===void 0)&&ve[Ot+le])}),et._element&&_t._dotsClipPath&&_t._dotsClipPath.appendChild(et._element)},Bt=0;Bt<lt;Bt++)yt(Bt)},_t=this;for(it=0;it<lt;it++)mt(it)}},L.prototype.drawCorners=function(){var C=this;if(!this._qr)throw"QR code is not defined";var D=this._element,F=this._options;if(!D)throw"Element code is not defined";var j=this._qr.getModuleCount(),U=Math.min(F.width,F.height)-2*F.margin,W=F.shape===b?U/Math.sqrt(2):U,$=Math.floor(W/j),M=7*$,P=3*$,z=Math.floor((F.width-j*$)/2),X=Math.floor((F.height-j*$)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(et){var J,Z,it,at,lt,ht,Ct,ft,At,pt,mt,_t,It=et[0],yt=et[1],Bt=et[2],Ot=z+It*$*(j-7),Wt=X+yt*$*(j-7),le=C._dotsClipPath,ve=C._dotsClipPath;if((!((J=F.cornersSquareOptions)===null||J===void 0)&&J.gradient||!((Z=F.cornersSquareOptions)===null||Z===void 0)&&Z.color)&&((le=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+It+"-"+yt),C._defs.appendChild(le),C._cornersSquareClipPath=C._cornersDotClipPath=ve=le,C._createColor({options:(it=F.cornersSquareOptions)===null||it===void 0?void 0:it.gradient,color:(at=F.cornersSquareOptions)===null||at===void 0?void 0:at.color,additionalRotation:Bt,x:Ot,y:Wt,height:M,width:M,name:"corners-square-color-"+It+"-"+yt})),(lt=F.cornersSquareOptions)===null||lt===void 0?void 0:lt.type){var Xt=new Q({svg:C._element,type:F.cornersSquareOptions.type});Xt.draw(Ot,Wt,M,Bt),Xt._element&&le&&le.appendChild(Xt._element)}else for(var _e=new k({svg:C._element,type:F.dotsOptions.type}),vn=function(Ve){for(var Yi=function(on){if(!(!((ht=q[Ve])===null||ht===void 0)&&ht[on]))return"continue";_e.draw(Ot+Ve*$,Wt+on*$,$,function(Cr,_i){var gt;return!!(!((gt=q[Ve+Cr])===null||gt===void 0)&&gt[on+_i])}),_e._element&&le&&le.appendChild(_e._element)},rn=0;rn<q[Ve].length;rn++)Yi(rn)},Ye=0;Ye<q.length;Ye++)vn(Ye);if((!((Ct=F.cornersDotOptions)===null||Ct===void 0)&&Ct.gradient||!((ft=F.cornersDotOptions)===null||ft===void 0)&&ft.color)&&((ve=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+It+"-"+yt),C._defs.appendChild(ve),C._cornersDotClipPath=ve,C._createColor({options:(At=F.cornersDotOptions)===null||At===void 0?void 0:At.gradient,color:(pt=F.cornersDotOptions)===null||pt===void 0?void 0:pt.color,additionalRotation:Bt,x:Ot+2*$,y:Wt+2*$,height:P,width:P,name:"corners-dot-color-"+It+"-"+yt})),(mt=F.cornersDotOptions)===null||mt===void 0?void 0:mt.type){var nn=new V({svg:C._element,type:F.cornersDotOptions.type});nn.draw(Ot+2*$,Wt+2*$,P,Bt),nn._element&&ve&&ve.appendChild(nn._element)}else{_e=new k({svg:C._element,type:F.dotsOptions.type});var br=function(Ve){for(var Yi=function(on){if(!(!((_t=h[Ve])===null||_t===void 0)&&_t[on]))return"continue";_e.draw(Ot+Ve*$,Wt+on*$,$,function(Cr,_i){var gt;return!!(!((gt=h[Ve+Cr])===null||gt===void 0)&&gt[on+_i])}),_e._element&&ve&&ve.appendChild(_e._element)},rn=0;rn<h[Ve].length;rn++)Yi(rn)};for(Ye=0;Ye<h.length;Ye++)br(Ye)}})},L.prototype.loadImage=function(){var C=this;return new Promise(function(D,F){var j=C._options,U=new Image;if(!j.image)return F("Image is not defined");typeof j.imageOptions.crossOrigin=="string"&&(U.crossOrigin=j.imageOptions.crossOrigin),C._image=U,U.onload=function(){D()},U.src=j.image})},L.prototype.drawImage=function(C){var D=C.width,F=C.height,j=C.count,U=C.dotSize;return Y(this,void 0,void 0,function(){var W,$,M,P,z,X,et,J,Z;return rt(this,function(it){switch(it.label){case 0:return W=this._options,$=Math.floor((W.width-j*U)/2),M=Math.floor((W.height-j*U)/2),P=$+W.imageOptions.margin+(j*U-D)/2,z=M+W.imageOptions.margin+(j*U-F)/2,X=D-2*W.imageOptions.margin,et=F-2*W.imageOptions.margin,(J=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(P)),J.setAttribute("y",String(z)),J.setAttribute("width",X+"px"),J.setAttribute("height",et+"px"),[4,E(W.image||"")];case 1:return Z=it.sent(),J.setAttribute("href",Z||""),this._element.appendChild(J),[2]}})})},L.prototype._createColor=function(C){var D=C.options,F=C.color,j=C.additionalRotation,U=C.x,W=C.y,$=C.height,M=C.width,P=C.name,z=M>$?M:$,X=document.createElementNS("http://www.w3.org/2000/svg","rect");if(X.setAttribute("x",String(U)),X.setAttribute("y",String(W)),X.setAttribute("height",String($)),X.setAttribute("width",String(M)),X.setAttribute("clip-path","url('#clip-path-"+P+"')"),D){var et;if(D.type==="radial")(et=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",P),et.setAttribute("gradientUnits","userSpaceOnUse"),et.setAttribute("fx",String(U+M/2)),et.setAttribute("fy",String(W+$/2)),et.setAttribute("cx",String(U+M/2)),et.setAttribute("cy",String(W+$/2)),et.setAttribute("r",String(z/2));else{var J=((D.rotation||0)+j)%(2*Math.PI),Z=(J+2*Math.PI)%(2*Math.PI),it=U+M/2,at=W+$/2,lt=U+M/2,ht=W+$/2;Z>=0&&Z<=.25*Math.PI||Z>1.75*Math.PI&&Z<=2*Math.PI?(it-=M/2,at-=$/2*Math.tan(J),lt+=M/2,ht+=$/2*Math.tan(J)):Z>.25*Math.PI&&Z<=.75*Math.PI?(at-=$/2,it-=M/2/Math.tan(J),ht+=$/2,lt+=M/2/Math.tan(J)):Z>.75*Math.PI&&Z<=1.25*Math.PI?(it+=M/2,at+=$/2*Math.tan(J),lt-=M/2,ht-=$/2*Math.tan(J)):Z>1.25*Math.PI&&Z<=1.75*Math.PI&&(at+=$/2,it+=M/2/Math.tan(J),ht-=$/2,lt-=M/2/Math.tan(J)),(et=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",P),et.setAttribute("gradientUnits","userSpaceOnUse"),et.setAttribute("x1",String(Math.round(it))),et.setAttribute("y1",String(Math.round(at))),et.setAttribute("x2",String(Math.round(lt))),et.setAttribute("y2",String(Math.round(ht)))}D.colorStops.forEach(function(Ct){var ft=Ct.offset,At=Ct.color,pt=document.createElementNS("http://www.w3.org/2000/svg","stop");pt.setAttribute("offset",100*ft+"%"),pt.setAttribute("stop-color",At),et.appendChild(pt)}),X.setAttribute("fill","url('#"+P+"')"),this._defs.appendChild(et)}else F&&X.setAttribute("fill",F);this._element.appendChild(X)},L}(),u="canvas";for(var d={},r=0;r<=40;r++)d[r]=r;const a={type:u,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:d[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var c=function(){return(c=Object.assign||function(L){for(var C,D=1,F=arguments.length;D<F;D++)for(var j in C=arguments[D])Object.prototype.hasOwnProperty.call(C,j)&&(L[j]=C[j]);return L}).apply(this,arguments)};function p(L){var C=c({},L);if(!C.colorStops||!C.colorStops.length)throw"Field 'colorStops' is required in gradient";return C.rotation?C.rotation=Number(C.rotation):C.rotation=0,C.colorStops=C.colorStops.map(function(D){return c(c({},D),{offset:Number(D.offset)})}),C}function g(L){var C=c({},L);return C.width=Number(C.width),C.height=Number(C.height),C.margin=Number(C.margin),C.imageOptions=c(c({},C.imageOptions),{hideBackgroundDots:!!C.imageOptions.hideBackgroundDots,imageSize:Number(C.imageOptions.imageSize),margin:Number(C.imageOptions.margin)}),C.margin>Math.min(C.width,C.height)&&(C.margin=Math.min(C.width,C.height)),C.dotsOptions=c({},C.dotsOptions),C.dotsOptions.gradient&&(C.dotsOptions.gradient=p(C.dotsOptions.gradient)),C.cornersSquareOptions&&(C.cornersSquareOptions=c({},C.cornersSquareOptions),C.cornersSquareOptions.gradient&&(C.cornersSquareOptions.gradient=p(C.cornersSquareOptions.gradient))),C.cornersDotOptions&&(C.cornersDotOptions=c({},C.cornersDotOptions),C.cornersDotOptions.gradient&&(C.cornersDotOptions.gradient=p(C.cornersDotOptions.gradient))),C.backgroundOptions&&(C.backgroundOptions=c({},C.backgroundOptions),C.backgroundOptions.gradient&&(C.backgroundOptions.gradient=p(C.backgroundOptions.gradient))),C}var v=l(192),y=l.n(v),_=function(L,C,D,F){return new(D||(D=Promise))(function(j,U){function W(P){try{M(F.next(P))}catch(z){U(z)}}function $(P){try{M(F.throw(P))}catch(z){U(z)}}function M(P){var z;P.done?j(P.value):(z=P.value,z instanceof D?z:new D(function(X){X(z)})).then(W,$)}M((F=F.apply(L,[])).next())})},B=function(L,C){var D,F,j,U,W={label:0,sent:function(){if(1&j[0])throw j[1];return j[1]},trys:[],ops:[]};return U={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(U[Symbol.iterator]=function(){return this}),U;function $(M){return function(P){return function(z){if(D)throw new TypeError("Generator is already executing.");for(;W;)try{if(D=1,F&&(j=2&z[0]?F.return:z[0]?F.throw||((j=F.return)&&j.call(F),0):F.next)&&!(j=j.call(F,z[1])).done)return j;switch(F=0,j&&(z=[2&z[0],j.value]),z[0]){case 0:case 1:j=z;break;case 4:return W.label++,{value:z[1],done:!1};case 5:W.label++,F=z[1],z=[0];continue;case 7:z=W.ops.pop(),W.trys.pop();continue;default:if(!((j=(j=W.trys).length>0&&j[j.length-1])||z[0]!==6&&z[0]!==2)){W=0;continue}if(z[0]===3&&(!j||z[1]>j[0]&&z[1]<j[3])){W.label=z[1];break}if(z[0]===6&&W.label<j[1]){W.label=j[1],j=z;break}if(j&&W.label<j[2]){W.label=j[2],W.ops.push(z);break}j[2]&&W.ops.pop(),W.trys.pop();continue}z=C.call(L,W)}catch(X){z=[6,X],F=0}finally{D=j=0}if(5&z[0])throw z[1];return{value:z[0]?z[1]:void 0,done:!0}}([M,P])}}};const N=function(){function L(C){this._options=C?g(w(a,C)):a,this.update()}return L._clearContainer=function(C){C&&(C.innerHTML="")},L.prototype._setupSvg=function(){var C=this;if(this._qr){var D=new s(this._options);this._svg=D.getElement(),this._svgDrawingPromise=D.drawQR(this._qr).then(function(){var F;C._svg&&((F=C._extension)===null||F===void 0||F.call(C,D.getElement(),C._options))})}},L.prototype._setupCanvas=function(){var C,D=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=(C=this._svgDrawingPromise)===null||C===void 0?void 0:C.then(function(){if(D._svg){var F=D._svg,j=new XMLSerializer().serializeToString(F),U="data:image/svg+xml;base64,"+btoa(j),W=new Image;return new Promise(function($){W.onload=function(){var M,P;(P=(M=D._canvas)===null||M===void 0?void 0:M.getContext("2d"))===null||P===void 0||P.drawImage(W,0,0),$()},W.src=U})}}))},L.prototype._getElement=function(C){return C===void 0&&(C="png"),_(this,void 0,void 0,function(){return B(this,function(D){switch(D.label){case 0:if(!this._qr)throw"QR code is empty";return C.toLowerCase()!=="svg"?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return D.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return D.sent(),[2,this._canvas]}})})},L.prototype.update=function(C){L._clearContainer(this._container),this._options=C?g(w(this._options,C)):this._options,this._options.data&&(this._qr=y()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(D){switch(!0){case/^[0-9]*$/.test(D):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(D):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===u?this._setupCanvas():this._setupSvg(),this.append(this._container))},L.prototype.append=function(C){if(C){if(typeof C.appendChild!="function")throw"Container should be a single DOM node";this._options.type===u?this._canvas&&C.appendChild(this._canvas):this._svg&&C.appendChild(this._svg),this._container=C}},L.prototype.applyExtension=function(C){if(!C)throw"Extension function should be defined.";this._extension=C,this.update()},L.prototype.deleteExtension=function(){this._extension=void 0,this.update()},L.prototype.getRawData=function(C){return C===void 0&&(C="png"),_(this,void 0,void 0,function(){var D,F,j;return B(this,function(U){switch(U.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(C)];case 1:return(D=U.sent())?C.toLowerCase()==="svg"?(F=new XMLSerializer,j=F.serializeToString(D),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+j],{type:"image/svg+xml"})]):[2,new Promise(function(W){return D.toBlob(W,"image/"+C,1)})]:[2,null]}})})},L.prototype.download=function(C){return _(this,void 0,void 0,function(){var D,F,j,U,W;return B(this,function($){switch($.label){case 0:if(!this._qr)throw"QR code is empty";return D="png",F="qr",typeof C=="string"?D=C:typeof C=="object"&&C!==null&&(C.name&&(F=C.name),C.extension&&(D=C.extension)),[4,this._getElement(D)];case 1:return(j=$.sent())?(D.toLowerCase()==="svg"?(U=new XMLSerializer,W='<?xml version="1.0" standalone="no"?>\r\n'+(W=U.serializeToString(j)),x("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(W),F+".svg")):x(j.toDataURL("image/"+D),F+"."+D),[2]):[2]}})})},L}()}},e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}return n.n=i=>{var o=i&&i.__esModule?()=>i.default:()=>i;return n.d(o,{a:o}),o},n.d=(i,o)=>{for(var l in o)n.o(o,l)&&!n.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:o[l]})},n.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),n(676)})().default;const _4=Aa(Hg.exports);var Gg=(t=>(t.rounded="rounded",t.dots="dots",t.classy="classy",t.classy_rounded="classy-rounded",t.square="square",t.extra_rounded="extra-rounded",t))(Gg||{}),Yg=(t=>(t.dot="dot",t.square="square",t.extra_rounded="extra-rounded",t))(Yg||{}),Wg=(t=>(t.dot="dot",t.square="square",t))(Wg||{}),Xg=(t=>(t.L="L",t.M="M",t.Q="Q",t.H="H",t))(Xg||{});class Hu{constructor(e,n){this.canvas=e,this.editor=n}async hookTransform(e){if(e.extensionType==="qrcode"){const n=this._paramsToOption(e.extension),i=await this._getBase64Str(n);e.src=i}}async _getBase64Str(e){const n=new _4(e),i=await n.getRawData("png");return i&&await a0(i)||""}_defaultBarcodeOption(){return{data:"https://kuaitu.cc",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"square",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}}_paramsToOption(e){return{width:e.width,height:e.width,type:"canvas",data:e.data,margin:e.margin,qrOptions:{errorCorrectionLevel:e.errorCorrectionLevel},dotsOptions:{color:e.dotsColor,type:e.dotsType},cornersSquareOptions:{color:e.cornersSquareColor,type:e.cornersSquareType},cornersDotOptions:{color:e.cornersDotColor,type:e.cornersDotType},backgroundOptions:{color:e.background}}}async addQrCode(){const e=this._defaultBarcodeOption(),n=this._paramsToOption(e),i=await this._getBase64Str(n);st.fabric.Image.fromURL(i,o=>{o.set({extensionType:"qrcode",extension:e}),o.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(o),this.canvas.setActiveObject(o),this.editor.position("center")},{crossOrigin:"anonymous"})}async setQrCode(e){try{const n=this._paramsToOption(e),i=await this._getBase64Str(n),o=this.canvas.getActiveObjects()[0];st.fabric.Image.fromURL(i,l=>{l.set({left:o.left,top:o.top,extensionType:"qrcode",extension:{...e}}),l.scaleToWidth(o.getScaledWidth()),this.editor.del(),this.canvas.add(l),this.canvas.setActiveObject(l)},{crossOrigin:"anonymous"})}catch(n){}}getQrCodeTypes(){return{DotsType:Object.values(Gg),CornersType:Object.values(Yg),cornersDotType:Object.values(Wg),errorCorrectionLevelType:Object.values(Xg)}}destroy(){}}vt(Hu,"pluginName","QrCodePlugin"),vt(Hu,"apis",["addQrCode","setQrCode","getQrCodeTypes"]);class Gu{constructor(e,n){this.canvas=e,this.editor=n}addImage(e){return new Promise((n,i)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>n(o),o.onerror=()=>i(),o.src=e})}async imageStrokeDraw(e,n,i="source-over"){const o=this.canvas.getActiveObject();if(!o)return;const l=o.originWidth||0,f=o.originHeight||0,A=(o==null?void 0:o.originSrc)||o.getSrc();let m=document.createElement("canvas");const w=m.getContext("2d");if(!w)return;if(n===0)return void o.setSrc(A,()=>{var O;(O=o.canvas)==null||O.renderAll()});w.save(),w.clearRect(0,0,m.width,m.height),w.restore(),m.width=l+2*n,m.height=f+2*n;const x=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],E=await this.addImage(A);if(!E)return;for(let O=0;O<x.length;O+=2)w.drawImage(E,n+x[O]*n,n+x[O+1]*n,l,f);w.globalCompositeOperation="source-in",w.fillStyle=e,w.fillRect(0,0,l+2*n,f+2*n),w.globalCompositeOperation=i,w.drawImage(E,n,n,l,f);const T=m==null?void 0:m.toDataURL();m=null,T&&o.setSrc(T,()=>{var O;(O=o.canvas)==null||O.renderAll()})}destroy(){}}vt(Gu,"pluginName","ImageStroke"),vt(Gu,"apis",["imageStrokeDraw"]);class Es{constructor(e,n){vt(this,"workspaceEl");vt(this,"minSize",{width:1,height:1});vt(this,"barOpts",{bWidth:30,bHeight:6,bPadding:10});vt(this,"hasCreatedBar",!1);vt(this,"isDragging",!1);vt(this,"dragEl",null);vt(this,"startPoints",{x:0,y:0});vt(this,"barOffset",{x:0,y:0});vt(this,"wsOffset",{left:0,top:0,width:0,height:0});vt(this,"eventHandler",{render:Ln(this.renderBars.bind(this),50),onDragging:Ln(this.onDragging.bind(this),30)});this.canvas=e,this.editor=n,this._init(),this._initResizeObserve(),this._addListeners()}_init(){const e=document.querySelector("#workspace");if(!e)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=e}_initResizeObserve(){new ResizeObserver(Ln(()=>{this.renderBars()},50)).observe(this.workspaceEl)}renderBars(){const e=this.canvas.viewportTransform,[n,,,i,o,l]=e||[],f=this.getWorkspase(),A=f.width*n,m=f.height*i,w=f.left*n,x=f.top*i,{bWidth:E,bHeight:T,bPadding:O}=this.barOpts;if(!e)return;const k=this._getBarFromType("left");k.style.left=o+w-T-O+"px",k.style.top=l+x+m/2-E/2+"px";const S=this._getBarFromType("right");S.style.left="".concat(o+w+A+O,"px"),S.style.top=l+x+m/2-E/2+"px";const Q=this._getBarFromType("top");Q.style.left=o+w+A/2-E/2+"px",Q.style.top=l+x-T-O+"px";const R=this._getBarFromType("bottom");R.style.left=o+w+A/2-E/2+"px",R.style.top="".concat(l+x+m+O,"px"),this.hasCreatedBar||(this.hasCreatedBar=!0,this._watchDrag())}_getBarFromType(e){let n=document.querySelector("#resize-".concat(e,"-bar"));return n||(n=document.createElement("div"),n.id="resize-".concat(e,"-bar"),n.className="resize-bar",["left","right"].includes(e)?n.classList.add("horizontal"):n.classList.add("vertical"),this.workspaceEl.appendChild(n),n)}_watchDrag(){Array.from(document.getElementsByClassName("resize-bar")).forEach(e=>{e.addEventListener("mousedown",n=>{this.isDragging=!0,this.dragEl=e,this.dragEl.classList.add("active"),this.startPoints={x:n.clientX,y:n.clientY},this.barOffset={x:e.offsetLeft,y:e.offsetTop};const i=this.getWorkspase(),{width:o,height:l,left:f,top:A}=i;this.wsOffset={width:o,height:l,left:f,top:A}})}),document.addEventListener("mousemove",this.eventHandler.onDragging),document.addEventListener("mouseup",()=>{this.isDragging&&this.dragEl&&(this.isDragging=!1,this.dragEl.classList.remove("active"),this.dragEl=null,this.canvas.defaultCursor="default")})}onDragging(e){if(this.isDragging&&this.dragEl){const n=this.getWorkspase(),i=this.canvas.viewportTransform,[o,,,l]=i||[],f=e.clientX-this.startPoints.x,A=e.clientY-this.startPoints.y,m=f/o,w=A/l,x=this.dragEl.id.split("-")[1];let E=0;switch(x){case"left":E=Math.round(this.wsOffset.width-2*m),E>=this.minSize.width?(this.dragEl.style.left="".concat(this.barOffset.x+f,"px"),n.set("left",this.wsOffset.left+2*m),n.set("width",E)):(n.set("left",this.wsOffset.left+this.wsOffset.width-this.minSize.width),n.set("width",this.minSize.width));break;case"right":E=Math.round(this.wsOffset.width+2*m),E>=this.minSize.width?(this.dragEl.style.left="".concat(this.barOffset.x+f,"px"),n.set("width",E)):n.set("width",this.minSize.width);break;case"top":E=Math.round(this.wsOffset.height-2*w),E>=this.minSize.height?(this.dragEl.style.top="".concat(this.barOffset.y+A,"px"),n.set("top",this.wsOffset.top+2*w),n.set("height",E)):(n.set("top",this.wsOffset.top+this.wsOffset.height-this.minSize.height),n.set("height",this.minSize.height));break;case"bottom":E=Math.round(this.wsOffset.height+2*w),E>=this.minSize.height?(this.dragEl.style.top="".concat(this.barOffset.y+A,"px"),n.set("height",E)):n.set("height",this.minSize.height)}this.editor.setCenterFromObject(n),n.clone(T=>{this.canvas.clipPath=T,this.canvas.requestRenderAll()}),["left","right"].includes(x)?this.canvas.defaultCursor="ew-resize":this.canvas.defaultCursor="ns-resize",this.editor.emit("sizeChange",n.width,n.height)}}_addListeners(){this.canvas.on("after:render",this.eventHandler.render)}getWorkspase(){return this.canvas.getObjects().find(e=>e.id==="workspace")}destroy(){}}vt(Es,"pluginName","ResizePlugin"),vt(Es,"events",[]),vt(Es,"apis",[]);var Yu=(t=>(t.lockMovementX="lockMovementX",t.lockMovementY="lockMovementY",t.lockRotation="lockRotation",t.lockScalingX="lockScalingX",t.lockScalingY="lockScalingY",t))(Yu||{});class Wu{constructor(e,n){this.canvas=e,this.editor=n}hookImportAfter(){return this.canvas.forEachObject(e=>{e.hasControls===!1&&e.selectable===!1&&(this.canvas.setActiveObject(e),this.lock())}),Promise.resolve()}lock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!1,e.selectable=!1,e.evented=!1,Object.values(Yu).forEach(n=>{e[n]=!0}),this.canvas.discardActiveObject().renderAll())}unLock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!0,e.selectable=!0,e.evented=!0,Object.values(Yu).forEach(n=>{e[n]=!1}),this.canvas.discardActiveObject().renderAll())}contextMenu(){const e=this.editor.getSelectMode(),n=this.canvas.getActiveObject();if(e===bi.ONE&&n)return n.selectable?[{text:"\u9501\u5B9A",hotkey:"",onclick:()=>this.lock()}]:[{text:"\u89E3\u9501",hotkey:"",onclick:()=>this.unLock()}]}destroy(){}}vt(Wu,"pluginName","LockPlugin"),vt(Wu,"apis",["lock","unLock"]);class Xu{constructor(e,n){this.canvas=e,this.editor=n,this.editor=n,this.canvas=e}addBaseType(e,n){const{event:i=!1,scale:o=!1,center:l=!0}=n||{};e.set({id:Ie()}),o&&this._toScale(e),i&&this._toEvent(e,i),this.canvas.add(e),!i&&l&&this._toCenter(e),this.canvas.setActiveObject(e),this.canvas.renderAll()}_toEvent(e,n){const{left:i,top:o}=this.canvas.getSelectionElement().getBoundingClientRect();if(n.x<i||n.y<o||e.width===void 0)return;const l={x:n.x-i,y:n.y-o},f=this.canvas.restorePointerVpt(l);e.set({left:f.x,top:f.y})}_toCenter(e){this.canvas.setActiveObject(e),this.editor.position("center")}_toScale(e){const{width:n}=this.editor.getWorkspase();e.scaleToWidth(n/2)}createImgByElement(e){return new Promise(n=>{this.getImageExtension(e.src)==="svg"?st.fabric.loadSVGFromURL(e.src,i=>{const o=st.fabric.util.groupSVGElements(i,{shadow:"",fontFamily:"arial",name:"svg\u5143\u7D20"});n(o)}):st.fabric.Image.fromURL(e.src,i=>{n(i)},{crossOrigin:"anonymous"})})}getImageExtension(e){const n=e.split("/"),i=n[n.length-1].split(".");return i[i.length-1]}destroy(){}}vt(Xu,"pluginName","AddBaseTypePlugin"),vt(Xu,"apis",["addBaseType","createImgByElement"]),st.fabric.Rect=st.fabric.util.createClass(st.fabric.Rect,{type:"rect",initialize:function(t){t||(t={}),this.callSuper("initialize",t)},_render(t){const e=this.roundValue||0;this.rx=1/this.scaleX*e,this.ry=1/this.scaleY*e,this.callSuper("_render",t)}}),st.fabric.Rect.fromObject=function(t,e){return st.fabric.Object._fromObject("Rect",t,e)},st.fabric.Rect,st.fabric.Textbox=st.fabric.util.createClass(st.fabric.Textbox,{type:"textbox",_renderChars:function(t,e,n,i,o,l){var f,A,m,w,x,E=this.getHeightOfLine(l),T=this.textAlign.indexOf("justify")!==-1,O="",k=0,S=this.path,Q=!T&&this.charSpacing===0&&this.isEmptyStyles(l)&&!S,R=this.direction==="ltr",V=this.direction==="ltr"?1:-1,b=e.canvas.getAttribute("dir");if(e.save(),b!==this.direction&&(e.canvas.setAttribute("dir",R?"ltr":"rtl"),e.direction=R?"ltr":"rtl",e.textAlign=R?"left":"right"),o-=E*this._fontSizeFraction/this.lineHeight,Q)return this._renderChar(t,e,l,0,n.join(""),i,o,E),void e.restore();for(var Y=0,rt=n.length-1;Y<=rt;Y++)w=Y===rt||this.charSpacing||S,O+=n[Y],m=this.__charBounds[l][Y],k===0?(i+=V*(m.kernedWidth-m.width),k+=m.width):k+=m.kernedWidth,T&&!w&&this._reSpaceAndTab.test(n[Y])&&(w=!0),w||(f=f||this.getCompleteStyleDeclaration(l,Y),A=this.getCompleteStyleDeclaration(l,Y+1),w=st.fabric.util.hasStyleChanged(f,A,!1)),S?(e.save(),e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),this._renderChar(t,e,l,Y,O,-k/2,0,E),e.restore()):(x=i,this._renderChar(t,e,l,Y,O,x,o,E)),O="",f=A,i+=V*k,k=0;e.restore()},enlargeSpaces:function(){for(var t,e,n,i,o,l,f,A=0,m=this._textLines.length;A<m;A++)if((this.textAlign==="justify"||A!==m-1&&!this.isEndOfWrapping(A))&&(i=0,o=this._textLines[A],(e=this.getLineWidth(A))<this.width&&(f=this.textLines[A].split(""))&&f.length>1)){n=f.length,t=(this.width-e)/(n-1);for(var w=0,x=o.length;w<=x;w++)(l=this.__charBounds[A][w]).left+=i,w<x-1&&(l.width+=t,l.kernedWidth+=t,i+=t)}}}),st.fabric.Textbox.fromObject=function(t,e){const{text:n}=t;return e(new st.fabric.Textbox(n,t))},st.fabric.Rect;const{SelectEvent:Ao,SelectMode:Ss}=L6;var Re=(t=>(t.create="CGRATE",t.template="TEMPLATE",t.element="ELEMENT",t.text="TEXT",t.material="Material",t.ai="AI",t.mine="MINE",t.none="",t))(Re||{}),oi=(t=>(t.canvas="CANVASLIST",t.layer="LAYER",t.menu="MENU",t))(oi||{}),yr=(t=>(t.h1="TEXT-H1,",t.h2="TEXT-H2",t.normal="TEXT-NORMAL",t))(yr||{}),Nn=(t=>(t.react="REACT",t.triangle="Triangle",t.around="Around",t.polygon="Polygon",t.line="LINE",t))(Nn||{}),sa=(t=>(t.qrcode="QRCODE",t.barCode="BARCODE",t))(sa||{}),zn=(t=>(t.design="DESIGN",t.img="IMAGE",t.json="JSON",t.svg="SVG",t.psd="PSD",t))(zn||{});const jt=b9({id:"editor",state:()=>({editor:null,canvas:null,zoom:1,rulerEnable:!0,tabType:Re.template,panelType:oi.menu,showPanel:!0,panelPositoin:"left"}),actions:{setEditor(t){this.editor=t},setCanvas(t){this.canvas=t},setScale(t){this.zoom=t},updateRulerEnable(t){this.rulerEnable=t},setTabType(t){this.tabType=t},setPanelType(t){this.panelType=t},setShowPanel(t){this.showPanel=t},setPanelPositoin(t){this.panelPositoin=t}}});function $u(){return jt(y9)}const qu=$u();function mo(){const{t}=ir(),e=wh(),n=jr(),i=async()=>{const f=qu.editor.getJson(),A=await o();return{json:f,img:A==null?void 0:A.id,desc:""}},o=async()=>{const f=await canvasEditor.preview();return await(m=>{const w=((T,O)=>{for(var k=T.split(","),S=k[0].match(/:(.*?);/)[1],Q=atob(k[1]),R=Q.length,V=new Uint8Array(R);R--;)V[R]=Q.charCodeAt(R);return new File([V],O,{type:S})})(m,"123.png"),x=new FormData,E=new Date;return x.append("files",w,"".concat(E.getTime())),K3(x).then(T=>{const[O]=T.data;return O}).catch(T=>{})})(f)},l=f=>{e.replace("/?id="+f)};return{createTmpl:async(f,A,m="")=>{qu.editor.clear(),qu.editor.setSize(f,A);const w=Wf().format("YYYY[\u5E74]MM[\u6708]DD[\u65E5]HH[\u5C0F\u65F6]mm[\u5206\u949F]ss[\u79D2]")+"\u521B\u5EFA\u7684\u4F5C\u54C1",x=await i(),E=await xh({data:{...x,type:"file",parentId:String(m),name:w}});return l(E.data.data.id),E},createTmplByCommon:async()=>{var m;const f=Wf().format("YYYY[\u5E74]MM[\u6708]DD[\u65E5]HH[\u5C0F\u65F6]mm[\u5206\u949F]ss[\u79D2]")+"\u521B\u5EFA\u7684\u4F5C\u54C1",A=await i();return await xh({data:{...A,type:"file",parentId:"",externalId:((m=n.query)==null?void 0:m.projectid)||null,name:f}})},getTemplInfo:async f=>(await C9(f)).data,updataTemplInfo:async(f,A)=>{const m=await i();A&&(m.name=A),await _h(f,{data:m})},removeTemplInfo:f=>new Promise((A,m)=>{Bi.confirm("".concat(t("my_spase.remove_templTip")),"Warning",{title:t("my_spase.remove_templ")}).then(()=>{q3(f).then(A).catch(m)})}),routerToId:l,createdFileType:async(f,A="")=>{await xh({data:{name:f,type:"fileType",parentId:String(A)}})},reNameFileType:async(f,A)=>{await _h(A,{data:{name:f}})},removeFileType:f=>new Promise((A,m)=>{Bi.confirm("".concat(t("my_spase.remove_file_type_Tip")),"Warning",{title:t("my_spase.remove_file_type")}).then(()=>{q3(f).then(A).catch(m)})})}}const E4={class:"f-center pr-10px"},S4={__name:"Save",setup(t){const e=jt(),n=jr(),{createTmplByCommon:i,updataTemplInfo:o,routerToId:l}=mo(),{t:f}=ir(),A={async clipboard(){try{await e.editor.clipboard(),mn.success("\u590D\u5236\u6210\u529F")}catch(E){mn.error("\u590D\u5236\u5931\u8D25")}},saveJson(){e.editor.saveJson()},saveSvg(){e.editor.saveSvg()},saveImg(){e.editor.saveImg()},async clipboardBase64(){try{await e.editor.clipboardBase64(),mn.success("\u590D\u5236\u6210\u529F")}catch(E){mn.error("\u590D\u5236\u5931\u8D25")}},async saveMyClould(){var T,O;const E=rr.service();try{if((T=n==null?void 0:n.query)!=null&&T.id)await o((O=n==null?void 0:n.query)==null?void 0:O.id);else{const k=await i();l(k.data.data.id)}}catch(k){mn.warning("\u8BF7\u767B\u5F55")}E.close()}},m=be(function(E){A[E]&&typeof A[E]=="function"&&A[E]()},300),w=()=>{var E,T;(E=e.editor)==null||E.clear(),e.canvas.clearHistory(),(T=e.editor)==null||T.historyUpdate()},x=()=>{Bi.confirm("".concat(f("clearTip")),"Warning",{title:f("tip"),type:"warning",confirmButtonText:"ok",cancelButtonText:f("cancel")}).then(w)};return(E,T)=>{const O=oe,k=ne,S=kr,Q=Br,R=Or;return tt(),ot("div",E4,[H(O,{class:"ml-10px",link:"",type:"primary",onClick:x},{default:nt(()=>[kt(Et(E.$t("editor.save.empty")),1)]),_:1}),H(R,{class:"ml-10px",onCommand:I(m)},{dropdown:nt(()=>[H(Q,null,{default:nt(()=>[H(S,{command:"saveMyClould"},{default:nt(()=>[kt(Et(E.$t("editor.save.save_my_spase")),1)]),_:1}),H(S,{command:"saveImg",divided:""},{default:nt(()=>[kt(Et(E.$t("editor.save.save_as_picture")),1)]),_:1}),H(S,{command:"saveSvg"},{default:nt(()=>[kt(Et(E.$t("editor.save.save_as_svg")),1)]),_:1}),H(S,{command:"clipboard",divided:""},{default:nt(()=>[kt(Et(E.$t("editor.save.copy_to_clipboard")),1)]),_:1}),H(S,{command:"clipboardBase64"},{default:nt(()=>[kt(Et(E.$t("editor.save.copy_to_clipboardstr")),1)]),_:1}),H(S,{command:"saveJson",divided:""},{default:nt(()=>[kt(Et(E.$t("editor.save.save_as_json")),1)]),_:1})]),_:1})]),default:nt(()=>[H(O,{type:"primary"},{default:nt(()=>[kt(Et(E.$t("editor.save.download"))+" ",1),H(k,{class:"el-icon--right"},{default:nt(()=>[H(I(Sr))]),_:1})]),_:1})]),_:1},8,["onCommand"])])}}},I4=wt({__name:"PreviewCurrent",setup(t){const e=jt(),n=ct(!1),i=ct([]),o=()=>{n.value=!1,i.value=[]},l=()=>{e.editor.preview().then(f=>{i.value=[f],n.value=!0})};return(f,A)=>{const m=oe,w=Cp;return tt(),ot(Mt,null,[H(m,{link:"",type:"primary",onClick:l},{default:nt(()=>[kt(Et(f.$t("editor.preview")),1)]),_:1}),I(n)?(tt(),xt(w,{key:0,"url-list":I(i),onClose:o},null,8,["url-list"])):bt("",!0)],64)}}}),k4={style:{display:"inline-block"}},B4=wt({__name:"History",setup(t){const e=jt(),n=ct(0),i=ct(0),o=()=>{e.editor.undo()},l=()=>{e.editor.redo()};return Lt(()=>{Qt(()=>{var f;(f=e.editor)==null||f.on("historyUpdate",(A,m)=>{n.value=A,i.value=m})})}),(f,A)=>{const m=or,w=oe,x=We;return tt(),ot("div",k4,[H(x,{content:f.$t("editor.history.undo")+"(".concat(I(n),")")},{default:nt(()=>[H(w,{onClick:o,link:"",size:"small",disabled:!I(n)},{default:nt(()=>[H(m,{extClass:"text-20px",color:I(n)?"#333":"#ccc",icon:"ios-undo"},null,8,["color"])]),_:1},8,["disabled"])]),_:1},8,["content"]),H(x,{content:f.$t("editor.history.redo")+"(".concat(I(i),")")},{default:nt(()=>[H(w,{onClick:l,link:"",size:"small",disabled:!I(i)},{default:nt(()=>[H(m,{extClass:"text-20px",color:I(i)?"#333":"#ccc",icon:"ios-redo"},null,8,["color"])]),_:1},8,["disabled"])]),_:1},8,["content"])])}}}),O4=Nt(B4,[["__scopeId","data-v-d8bc8611"]]),T4={key:0,style:{display:"inline-block"}},D4={__name:"MyTemplName",setup(t){const e=jt(),n=wh(),{getTemplInfo:i,updataTemplInfo:o}=mo(),l=ct(""),f=jr(),A=ct(!1);Dt(()=>f.query,E=>{E!=null&&E.id?i(E==null?void 0:E.id).then(T=>{var O,k;l.value=(k=(O=T==null?void 0:T.data)==null?void 0:O.attributes)==null?void 0:k.name}):l.value=!1}),Lt(()=>{Qt(async()=>{var E,T,O,k;if((E=f==null?void 0:f.query)!=null&&E.id)i((T=f==null?void 0:f.query)==null?void 0:T.id).then(S=>{var Q,R,V,b;l.value=(R=(Q=S==null?void 0:S.data)==null?void 0:Q.attributes)==null?void 0:R.name,e.editor.loadJSON(JSON.stringify((b=(V=S==null?void 0:S.data)==null?void 0:V.attributes)==null?void 0:b.json))}).catch(()=>{window.location.href="/"});else if((O=f==null?void 0:f.query)!=null&&O.projectid){const S=await m((k=f==null?void 0:f.query)==null?void 0:k.projectid);S&&i(S).then(Q=>{var R,V,b,Y;n.replace(f.fullPath+"&id="+S),l.value=(V=(R=Q==null?void 0:Q.data)==null?void 0:R.attributes)==null?void 0:V.name,e.editor.loadJSON(JSON.stringify((Y=(b=Q==null?void 0:Q.data)==null?void 0:b.attributes)==null?void 0:Y.json))})}})});const m=E=>{const T={populate:{img:"*"},filters:{externalId:{$eq:String(E)}},pagination:{page:1,pageSize:50}};return J3(ph.stringify(T)).then(O=>{if(O.data.data.length)return O.data.data[0].id}).catch(O=>O)},w=()=>{if(l.value==="")return mn.warning("\u6587\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),void(l.value="\u9ED8\u8BA4\u6587\u4EF6\u540D\u79F0");A.value=!0,o(f.query.id,l.value).then().finally(()=>{A.value=!1})},x=be(()=>{f.query.id&&w()},3e3);return Lt(()=>{var E;(E=e.canvas)==null||E.on("object:modified",x)}),(E,T)=>{var Q,R;const O=Be,k=oe,S=Ee;return(R=(Q=I(f))==null?void 0:Q.query)!=null&&R.id?(tt(),ot("div",T4,[H(O,{modelValue:I(l),"onUpdate:modelValue":T[0]||(T[0]=V=>he(l)?l.value=V:null),placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\u79F0",style:{width:"190px"},size:"small",onChange:I(x),loading:I(A)},null,8,["modelValue","onChange","loading"]),H(k,{link:"",onClick:w,loading:I(A)},null,8,["loading"]),H(S,{type:"vertical"})])):bt("",!0)}}},M4=Nt(D4,[["__scopeId","data-v-6f16963d"]]),Q4={class:"f-center"},L4={class:"dialog-footer"},P4={__name:"ImportFile",setup(t){const e=jt(),{getImgStr:n,selectFiles:i}=zi,o=Zt({showModal:!1,svgStr:""}),l={insertImg:function(){i({accept:"image/*",multiple:!0}).then(A=>{Array.from(A).forEach(m=>{n(m).then(w=>{(function(x){if(!x)throw new Error("file is undefined");const E=document.createElement("img");E.src=x,document.body.appendChild(E),E.onload=async()=>{const T=await e.editor.createImgByElement(E);e.editor.addBaseType(T,{scale:!0}),E.remove()}})(w)})})})},insertSvg:function(){i({accept:".svg",multiple:!0}).then(A=>{Array.from(A).forEach(m=>{n(m).then(w=>{(function(x){if(!x)throw new Error("file is undefined");st.fabric.loadSVGFromURL(x,(E,T)=>{const O=st.fabric.util.groupSVGElements(E,{...T,name:"defaultSVG",id:Ie()});e.editor.addBaseType(O,{scale:!0})})})(w)})})})},insertSvgStrModal:function(){o.svgStr="",o.showModal=!0},insertSvgStr:function(){st.fabric.loadSVGFromString(o.svgStr,(A,m)=>{const w=st.fabric.util.groupSVGElements(A,{...m,name:"defaultSVG"});e.editor.addBaseType(w,{scale:!0}),o.showModal=!1})}},f=A=>{const m=l[A];m&&typeof m=="function"&&m()};return(A,m)=>{const w=ne,x=oe,E=kr,T=Br,O=Or,k=Be,S=gh;return tt(),ot("div",Q4,[H(O,{"transfer-class-name":"fix",onCommand:f},{dropdown:nt(()=>[H(T,null,{default:nt(()=>[H(E,{command:"insertImg"},{default:nt(()=>[kt(Et(A.$t("editor.insertFile.insert_picture")),1)]),_:1}),H(E,{command:"insertSvg"},{default:nt(()=>[kt(Et(A.$t("editor.insertFile.insert_SVG")),1)]),_:1}),H(E,{command:"insertSvgStrModal"},{default:nt(()=>[kt(Et(A.$t("editor.insertFile.insert_SVGStr")),1)]),_:1})]),_:1})]),default:nt(()=>[H(x,{link:"",type:"primary"},{default:nt(()=>[kt(Et(A.$t("editor.insertFile.insert"))+" ",1),H(w,{class:"el-icon--right"},{default:nt(()=>[H(I(Sr))]),_:1})]),_:1})]),_:1}),H(S,{modelValue:I(o).showModal,"onUpdate:modelValue":m[3]||(m[3]=Q=>I(o).showModal=Q),title:A.$t("editor.insertFile.modal_tittle")},{footer:nt(()=>[G("div",L4,[H(x,{onClick:m[1]||(m[1]=Q=>I(o).showModal=!1)},{default:nt(()=>[kt("\u53D6\u6D88")]),_:1}),H(x,{type:"primary",onClick:m[2]||(m[2]=Q=>f("insertSvgStr"))},{default:nt(()=>[kt(" \u786E\u8BA4 ")]),_:1})])]),default:nt(()=>[H(k,{modelValue:I(o).svgStr,"onUpdate:modelValue":m[0]||(m[0]=Q=>I(o).svgStr=Q),"show-word-limit":"",type:"textarea",placeholder:A.$t("editor.insertFile.insert_SVGStr_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])])}}},$g=t=>(je("data-v-c4d15195"),t=t(),Fe(),t),j4={class:"asa-size-wrap"},F4={class:"asa-size-wrap-item"},R4=$g(()=>G("span",null,"\u5BBD\u5EA6",-1)),N4={class:"asa-size-wrap-item"},z4=$g(()=>G("span",null,"\u9AD8\u5EA6",-1)),V4={"label-width":0},U4={class:"cell-wrap"},H4=["onClick"],G4={class:"cell-name"},Y4={class:"cell-label"},W4={__name:"ModalSize",props:{title:{type:String,default:""}},emits:["set"],setup(t,{expose:e,emit:n}){const i=jt(),o=n,l=t,f=ct(!1),A=ct(null),m=ct(null),w=ct([]),x=async()=>{A.value&&m.value?(o("set",A.value,m.value),f.value=!1):mn.warning("\u8BF7\u68C0\u67E5\u5C3A\u5BF8")};return e({showSetSize:(E,T)=>{A.value=E||null,m.value=T||null,i.editor.getSizeList().then(O=>{w.value=O}),f.value=!0}}),(E,T)=>{const O=wp,k=oe,S=Ee,Q=ne,R=gh;return tt(),xt(R,{modelValue:I(f),"onUpdate:modelValue":T[2]||(T[2]=V=>he(f)?f.value=V:null),title:l.title,"footer-hide":""},{default:nt(()=>[G("h3",null,Et(E.$t("editor.importFiles.createDesign.customSize")),1),G("section",j4,[G("div",F4,[R4,H(O,{style:{width:"70%"},modelValue:I(A),"onUpdate:modelValue":T[0]||(T[0]=V=>he(A)?A.value=V:null),min:1,placeholder:"\u8BF7\u8F93\u5165","controls-position":"right"},null,8,["modelValue"])]),G("div",N4,[z4,H(O,{style:{width:"70%"},modelValue:I(m),"onUpdate:modelValue":T[1]||(T[1]=V=>he(m)?m.value=V:null),min:1,placeholder:"\u8BF7\u8F93\u5165","controls-position":"right"},null,8,["modelValue"])]),G("div",V4,[H(k,{type:"primary",onClick:x},{default:nt(()=>[kt(Et(E.$t("editor.importFiles.createDesign.create")),1)]),_:1})])]),H(S,{direction:"horizontal"}),G("h3",null,Et(E.$t("editor.importFiles.createDesign.systemSize")),1),G("section",U4,[(tt(!0),ot(Mt,null,Ht(I(w),V=>(tt(),ot("div",{key:V.name,class:"cell-main",onClick:b=>(Y=>{const[rt,q]=Y.split("x");A.value=Number(rt),m.value=Number(q)})("".concat(V.width,"x").concat(V.height,"x").concat(V.unit))},[G("div",null,[G("div",G4,Et(V.name),1),G("div",Y4,Et("".concat(V.width,"x").concat(V.height).concat(V.unit)),1)]),H(Q,null,{default:nt(()=>[H(I(_o))]),_:1})],8,H4))),128))])]),_:1},8,["modelValue","title"])}}},Is=Nt(W4,[["__scopeId","data-v-c4d15195"]]),X4={class:"f-center"},$4={__name:"ImportJson",setup(t){var m;const e=jt(),{createTmpl:n,routerToId:i}=mo(),o=ct(null),l={importFiles:(m=e.editor)==null?void 0:m.insert(),createDesign:()=>{var w;return(w=o.value)==null?void 0:w.showSetSize()},psd:async()=>{await e.editor.insertPSD()}},f=w=>{var x;(x=l[w])==null||x.call(l)},A=async(w,x)=>{const E=await n(w,x);i(E.data.data.id),mn.success("\u521B\u5EFA\u6210\u529F")};return(w,x)=>{const E=ne,T=oe,O=kr,k=Br,S=Or;return tt(),ot("div",X4,[H(S,{onCommand:f},{dropdown:nt(()=>[H(k,null,{default:nt(()=>[H(O,{command:"createDesign"},{default:nt(()=>[kt(Et(w.$t("editor.importFiles.createDesign.title")),1)]),_:1}),H(O,{command:"importFiles"},{default:nt(()=>[kt(Et(w.$t("editor.importFiles.importFiles")),1)]),_:1}),H(O,{command:"psd"},{default:nt(()=>[kt("PSD")]),_:1})]),_:1})]),default:nt(()=>[H(T,{link:"",type:"primary"},{default:nt(()=>[kt(Et(w.$t("editor.importFiles.file"))+" ",1),H(E,{class:"el-icon--right"},{default:nt(()=>[H(I(Sr))]),_:1})]),_:1})]),_:1}),H(Is,{title:w.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:o,onSet:A},null,8,["title"])])}}},q4={class:"w-full flex justify-between items-center"},K4={class:"flex justify-start items-center"},J4={class:"flex justify-end items-center"},Z4=G("a",{class:"mr-10px",href:"https://github.com/ikuaitu/element-fabric-editor",target:"_blank"},[G("img",{src:"https://img.shields.io/badge/GitHub-ElementFbricEditor-blue",alt:"element-fbric-editor"})],-1),tE=wt({__name:"index",setup(t){const e=jt(),n=ut(()=>e.rulerEnable),i=o=>{o?e.editor.rulerEnable():e.editor.rulerDisable(),e.updateRulerEnable(o),document.activeElement.blur()};return(o,l)=>{const f=FB,A=Ee,m=$4,w=P4,x=oe,E=un("router-link"),T=M4,O=zo,k=O4,S=I4,Q=S4,R=RB;return tt(),ot("div",q4,[G("div",K4,[H(f),H(A,{direction:"vertical"}),H(m),H(A,{direction:"vertical"}),H(w),H(A,{direction:"vertical"}),H(E,{custom:"",to:"/editor/template"},{default:nt(({navigate:V})=>[H(x,{text:"",onClick:V},{default:nt(()=>[kt("\u5168\u90E8\u6A21\u677F")]),_:2},1032,["onClick"])]),_:1}),H(A,{direction:"vertical"}),H(T),H(O,{modelValue:I(n),"onUpdate:modelValue":l[0]||(l[0]=V=>he(n)?n.value=V:null),size:"large",class:"ml-10px","inline-prompt":"","active-text":"\u6807\u5C3A","inactive-text":"\u6807\u5C3A",onChange:i},null,8,["modelValue"]),H(A,{direction:"vertical"}),H(k)]),G("div",J4,[Z4,H(S),H(A,{direction:"vertical"}),H(Q),H(A,{direction:"vertical"}),H(R)])])}}}),eE=[{name:"\u6DFB\u52A0",icon:"add",type:Re.create},{name:"\u6A21\u677F",icon:"template",type:Re.template},{name:"\u5143\u7D20",icon:"element",type:Re.element},{name:"\u6587\u5B57",icon:"text",type:Re.text},{name:"\u7D20\u6750",icon:"img",type:Re.material},{name:"AI",icon:"ai",type:Re.ai},{name:"\u6211\u7684",icon:"mine",type:Re.mine}],nE=[{name:"\u6807\u9898",icon:"text-h1",type:yr.h1},{name:"\u526F\u6807\u9898",icon:"text-h2",type:yr.h2},{name:"\u6B63\u6587",icon:"text-normal",type:yr.normal}],iE=[{name:"\u77E9\u5F62",icon:'<svg role="img" aria-label="shape-rectangle" focusable="false" data-icon="shape-rectangle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-rectangle"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 19V5C19.5 4.72386 19.2761 4.5 19 4.5L5 4.5C4.72386 4.5 4.5 4.72386 4.5 5L4.5 19C4.5 19.2761 4.72386 19.5 5 19.5H19C19.2761 19.5 19.5 19.2761 19.5 19ZM21 5C21 3.89543 20.1046 3 19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5Z" fill="currentColor"></path></svg>',type:Nn.react},{name:"\u4E09\u89D2\u5F62",icon:'<svg role="img" aria-label="shape-polygon" focusable="false" data-icon="shape-polygon" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-polygon"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.7949 19.1828L12.1881 3.46617C12.1068 3.31769 11.8936 3.31768 11.8122 3.46617L3.20553 19.1828C3.12732 19.3256 3.23066 19.5 3.39347 19.5H20.6069C20.7697 19.5 20.8731 19.3256 20.7949 19.1828ZM13.5038 2.74569C12.8533 1.55784 11.1471 1.55784 10.4966 2.74569L1.88988 18.4623C1.26427 19.6047 2.09097 21 3.39347 21H20.6069C21.9094 21 22.7361 19.6047 22.1105 18.4623L13.5038 2.74569Z" fill="currentColor"></path></svg>',type:Nn.triangle},{name:"\u5706\u5F62",icon:'<svg role="img" aria-label="shape-circle" focusable="false" data-icon="shape-circle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-circle"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"></path></svg>',type:Nn.around},{name:"\u591A\u8FB9\u5F62",icon:'<svg data-v-1eb84746="" t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="26" height="26"><path data-v-1eb84746="" d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>',type:Nn.polygon},{name:"\u76F4\u7EBF",icon:'<svg role="img" aria-label="shape-line" focusable="false" data-icon="shape-line" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-line"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.46967 20.5303C3.17678 20.2374 3.17678 19.7626 3.46967 19.4697L19.4697 3.46967C19.7626 3.17678 20.2374 3.17678 20.5303 3.46967C20.8232 3.76256 20.8232 4.23744 20.5303 4.53033L4.53033 20.5303C4.23744 20.8232 3.76256 20.8232 3.46967 20.5303Z" fill="currentColor"></path></svg>',type:Nn.line}],rE=[{name:"\u4E8C\u7EF4\u7801",icon:'<svg\n          t="1717679888665"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          p-id="4558"\n          xmlns="http://www.w3.org/2000/svg"\n          width="20"\n          height="20"\n        >\n          <path\n            d="M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z"\n            fill="#333333"\n            p-id="4559"\n          ></path>\n          <path\n            d="M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z"\n            fill="#333333"\n            p-id="4560"\n          ></path>\n          <path\n            d="M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z"\n            fill="#333333"\n            p-id="4561"\n          ></path>\n        </svg>',type:sa.qrcode},{name:"\u6761\u7801",icon:'<svg\n          t="1717679973041"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n          p-id="5747"\n          width="20"\n          height="20"\n        >\n          <path\n            d="M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z"\n            p-id="5748"\n          ></path>\n        </svg>',type:sa.barCode}],oE=[{name:"\u65B0\u5EFA\u6A21\u677F",icon:"template",type:zn.design},{name:"\u63D2\u5165\u56FE\u7247",icon:"img",type:zn.img},{name:"\u63D2\u5165SVG",icon:"svg-file",type:zn.svg},{name:"\u63D2\u5165PSD",icon:"psd-file",type:zn.psd},{name:"\u63D2\u5165JSON",icon:"json-file",type:zn.json}],aE={class:"my-material"},sE={key:0,class:"img-group flex justify-start flex-wrap"},lE={class:"relative tmpl-img-box"},cE={key:1,class:"tip"},uE={__name:"uploadMaterial",setup(t){const{selectFiles:e}=zi,n=jt(),i=ct([]),o=ct(!1),l=()=>{Z3().then(w=>{var x;i.value=(x=w.data.data)==null?void 0:x.map(E=>{var T,O,k,S;return{id:E.id,name:(T=E==null?void 0:E.attributes)==null?void 0:T.name,imgUrl:Eh+((S=(k=(O=E.attributes.img)==null?void 0:O.data)==null?void 0:k.attributes)==null?void 0:S.url)}}),o.value=!0}).catch(w=>{o.value=!1})};l();const f=()=>{e({accept:"image/*"}).then(w=>{const x=new FormData,E=new Date,[T]=w;x.append("files",T,"".concat(E.getTime())),K3(x).then(O=>{const[k]=O.data;A(k.id,T.name)}).catch(O=>{})})},A=(w,x)=>{w9({data:{img:w,name:x}}).finally(l)},m=async w=>{const x=await n.editor.createImgByElement(w.target);n.editor.addBaseType(x,{scale:!0})};return(w,x)=>{const E=oe,T=ne,O=No,k=We;return tt(),ot("div",aE,[H(E,{class:"w-full",icon:I(NB),onClick:f,long:"",type:"primary"},{default:nt(()=>[kt(Et(w.$t("myMaterial.uploadBtn")),1)]),_:1},8,["icon"]),I(i).length?(tt(),ot("div",sE,[(tt(!0),ot(Mt,null,Ht(I(i),(S,Q)=>(tt(),xt(k,{content:S.name,key:"".concat(Q,"-bai1-button"),placement:"top"},{default:nt(()=>[G("div",lE,[H(T,{class:"del-btn",color:"red",onClick:R=>{return V=S.id,void x9(V).finally(l);var V}},{default:nt(()=>[H(I(D3))]),_:2},1032,["onClick"]),H(O,{lazy:"",src:S.imgUrl,fit:"contain",height:"100%",alt:S.name,onClick:m},null,8,["src","alt"])])]),_:2},1032,["content"]))),128))])):(tt(),ot("div",cE,"\u6682\u65E0\u7D20\u6750"))])}}},hE=Nt(uE,[["__scopeId","data-v-50728920"]]),dE={class:"file-type-box"},fE=["src"],pE={class:"more"},gE=Nt({__name:"fileType",props:{name:{type:String,default:""},itemId:{type:[Number,String],default:""}},emits:["change","select"],setup(t,{emit:e}){const{reNameFileType:n,removeFileType:i}=mo(),o=t,l=e,f=x=>{({reName:m,delete:w})[x]()},A=ct(""),m=()=>{A.value=o.name,Bi.confirm("\u91CD\u547D\u540D\u6587\u4EF6\u5939",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",message:()=>Li(Be,{...Be.$el,...Be.$attrs,size:"large",modelValue:A.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0","onUpdate:modelValue":x=>{A.value=x}})}).then(async()=>{A.value!==""?(await n(A.value,o.itemId),l("change")):mn.warning("\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A")})},w=async()=>{var E,T;const x=await i(o.itemId);(E=x==null?void 0:x.data)!=null&&E.msg?mn.error({content:(T=x.data)==null?void 0:T.msg,duration:3}):l("change")};return(x,E)=>{const T=ne,O=oe,k=kr,S=Br,Q=Or;return tt(),ot("div",dE,[G("img",{src:I("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADICAYAAACDHY8MAAAAAXNSR0IArs4c6QAAB/ZJREFUeF7tnL9uXEUchWdWGGQSF4miBITkAhqchgpREOHdVElNBQ9BS4MU+2Xo8wLsNTUVjV/CCqKgSbGDdm3wrr12Iu+9M79z9rNEg+KZc76TT/f6D+S05qNMH43TaDZOuRymksfr/gz/7h0EculSySdpNury5KyDFwTmBPJVDOXk4VFK6RV4eiVwnA/fzLnyseUEVoQrvz+Y8kQb8G/EbDThaTcgX4Gj/xcO2eqslQ/fXHurqHMzt0QgsBgf2SpOkUuXv/trUvFGrgpEIF98g2QaKNM2ROFrum1YeU3HzNOtzfK8Wrbh3vpWhGu3AE+5duyb3ZzLycPS7PbtvhjhtnB/hGs1Ot88aUW+6b0I1xA/X8c1hN/oaoRrBP7iWl4r2/KvfjvCVUe+ciHCteVf/XaEq4589UJeKxsPUPl6hKsM/Np1/H5l6wWq3o9wVXGvvYzXyvYbVEuAcNVQ33gRwrXfoFoChKuG+uaL+DouwAiVIiBcJdC3XsPXcRFWqJIB4apgfscle9+cpM9+4n/DEGGLHjLkJy9v/K/7Ea4HwBsf8fHTlPZ/2fgYDohEoByvEw/homz05a9RkpCjVwKr4iFcr3A3OOzR9ynN/+HDkMCldAgXZV6Ei7LEMDlmZZI/fdkh3DB473Yqr5V346bwWTl1+fGLCcJFGgvhIq0xQJbRM4QbAOudj+S18s7oND4xv0a4SEshXKQ1BsiCcANA3fBIXis3BBj60894wkXbZ/4D8PkPwvlwJIBw4VbltTLcJD0GQrgeYfZzFL/m1Q/HmKcgXMhd+Dou5Cw9hEK4HiD2fwSvlf0zjXEiwsXY4UoKhAs5Sw+hEK4HiMMcwWvlMFzbnopwbfnfcjvChZ1mg2AItwG8YT+V18ph+bY5HeHacH+PWxHuPSDJ/ZFbhPvwfkr3nsg1sgrMb5zozfnB/nnm3W/XZV8j3L1PEE1vZhJHJLD77Kp4V4R78EVKO/cjRicTBDQJ7OyntPfDf9mXhEM2zUFJHZ/ApXQXwvEaGX80EmoTOH+9vBDu8VfaZUgPAQUCez/+ncsfTwvfjVRYi4zyBHY+f5vLn18XvlEiPyUFFAgshDudFIWsZISAPIHR7gzh5FekgAwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAgf/Q2l9NJcehCBwiEJ5B3/kG48CsR0IjAGcIZrUmV8AQQLvxEBHQisBBumlIaO7WiCwRCEsjpNcKFXIZQlgRK+jmX0/E4pTx/yvEBAQgMSCAfTHOen89r5YCUORoCCwL5OB/8drQQDun4OwGBYQnMn24L7Zav4Uk3LHRO30oCXUrlOB903TXhzp90z49SKq+2Eg2lIdAvgS4fTCfLR6484S5fL+ffSBmNUyqH/Mig3wU4zZ7A4km2/FRbbvwv/sNzeMKZkPkAAAAASUVORK5CYII=")},null,8,fE),G("span",null,Et(o.name),1),G("div",{class:"click-bg",onClick:E[0]||(E[0]=R=>l("select"))}),G("div",pE,[H(Q,{trigger:"click",onCommand:f},{dropdown:nt(()=>[H(S,null,{default:nt(()=>[H(k,{command:"reName"},{default:nt(()=>[kt("\u91CD\u547D\u540D")]),_:1}),H(k,{command:"delete"},{default:nt(()=>[kt("\u5220\u9664")]),_:1})]),_:1})]),default:nt(()=>[H(O,{size:"small",shape:"circle",text:""},{default:nt(()=>[H(T,{size:"18px"},{default:nt(()=>[H(I(_o))]),_:1})]),_:1})]),_:1})])])}}},[["__scopeId","data-v-ed117189"]]),vE={class:"file-type-box"},AE={class:"more"},mE={class:"dialog-footer"},yE={__name:"file",props:{name:{type:String,default:""},src:{type:String,default:""},previewSrc:{type:String,default:""},itemId:{type:[Number,String],default:""},json:{type:Object,default:()=>({})}},emits:["change"],setup(t,{emit:e}){const n=jt(),{t:i}=ir(),{reNameFileType:o,removeTemplInfo:l,routerToId:f,getTemplInfo:A}=mo(),m=t,w=e,x=rt=>{({reName:T,delete:O,transfer:b})[rt]()},E=ct(""),T=()=>{E.value=m.name,Bi.confirm({title:"\u91CD\u547D\u540D",message:Li(Be,{...Be.$el,...Be.$attrs,size:"large",modelValue:E.value,autofocus:!0,placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\u79F0","onUpdate:modelValue":rt=>{E.value=rt}})}).then(async()=>{E.value!==""?(await o(E.value,m.itemId),w("change")):mn.warning("\u6587\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A")})},O=async()=>{await l(m.itemId),w("change")},k=()=>{Bi.confirm(i("replaceTip"),i("tip"),{confirmButtonText:i("ok"),cancelButtonText:i("cancel"),type:"warning"}).then(()=>{S()})},S=async()=>{const rt=rr.service({text:i("alert.loading_data")}),q=await A(m.itemId);f(m.itemId),n.editor.loadJSON(JSON.stringify(q.data.attributes.json),rt.close)},Q=ct(!1),R=ct(""),V=ct([]),b=async()=>{V.value=[],R.value="";const rt=await _9();V.value=[rt.data.data],Q.value=!0},Y=async()=>{const rt=R.value==="root"?"":R.value;await _h(m.itemId,{data:{parentId:String(rt)}}),w("change")};return(rt,q)=>{const h=No,s=ne,u=oe,d=kr,r=Br,a=Or,c=We,p=O6,g=gh;return tt(),ot(Mt,null,[H(c,{content:m.name,placement:"top"},{default:nt(()=>[G("div",vE,[H(h,{lazy:"",onClick:k,src:m.src,fit:"contain",height:"100%",width:"100%",alt:m.name},null,8,["src","alt"]),G("div",AE,[H(a,{trigger:"click",onCommand:x},{list:nt(()=>[H(r,null,{default:nt(()=>[H(d,{command:"reName"},{default:nt(()=>[kt("\u91CD\u547D\u540D")]),_:1}),H(d,{command:"delete"},{default:nt(()=>[kt("\u5220\u9664")]),_:1}),H(d,{command:"transfer"},{default:nt(()=>[kt("\u8FC1\u79FB\u76EE\u5F55")]),_:1})]),_:1})]),default:nt(()=>[H(u,{size:"small",shape:"circle",text:""},{default:nt(()=>[H(s,{size:"24px"},{default:nt(()=>[H(I(_o))]),_:1})]),_:1})]),_:1})])])]),_:1},8,["content"]),H(g,{modelValue:I(Q),"onUpdate:modelValue":q[2]||(q[2]=v=>he(Q)?Q.value=v:null),title:"\u8BF7\u9009\u62E9\u8FC1\u79FB\u76EE\u5F55"},{footer:nt(()=>[G("div",mE,[H(u,{onClick:q[1]||(q[1]=v=>Q.value=!1)},{default:nt(()=>[kt("\u53D6\u6D88")]),_:1}),H(u,{type:"primary",onClick:Y},{default:nt(()=>[kt(" \u786E\u8BA4 ")]),_:1})])]),default:nt(()=>[H(p,{modelValue:I(R),"onUpdate:modelValue":q[0]||(q[0]=v=>he(R)?R.value=v:null),data:I(V),width:"200px"},null,8,["modelValue","data"])]),_:1},8,["modelValue"])],64)}}},bE=Nt(yE,[["__scopeId","data-v-5c695af6"]]),CE={class:"search-box"},wE={style:{height:"calc(100vh - 160px)"},id:"myFileTemplBox"},xE={__name:"myTempl",setup(t){const e=jr(),{createdFileType:n,createTmpl:i}=mo(),o=Zt({name:{$contains:""},parentId:{$eq:"",filterEmpty:!1}}),{pageData:l,showScroll:f,scrollHeight:A,isDownBottom:m,pageLoading:w,startPage:x,startGetList:E,nextPage:T}=M3({el:"#myFileTemplBox",apiClient:J3,filters:o,sort:["type:desc"],fields:["name","parentId","type","externalId"],formatData:b=>b.map(Y=>({id:Y.id,name:Y.attributes.name,type:Y.attributes.type||"file",desc:Y.attributes.desc,json:Y.attributes.json,src:vh(Y.attributes.img),previewSrc:Ah(Y.attributes.img)}))});Lt(async()=>{await V(),x()});const O=ct(""),k=ct(null),S=b=>{b==="fileType"?(O.value="",Bi.confirm("\u65B0\u5EFA\u6587\u4EF6\u5939",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",message:()=>Li(Be,{...Be.$el,...Be.$attrs,size:"large",modelValue:O.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0","onUpdate:modelValue":Y=>{O.value=Y}})}).then(async()=>{O.value!==""?(await n(O.value,o.parentId.$eq),E()):mn.warning("\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A")})):k.value.showSetSize()},Q=async(b,Y)=>{await i(b,Y,o.parentId.$eq),E()},R=ct([{name:"\u5168\u90E8",parentId:""}]),V=async()=>{var b;if((b=e==null?void 0:e.query)!=null&&b.id){const Y=await E9({id:e.query.id});R.value=Y.data.data;const rt=Y.data.data[Y.data.data.length-1];o.parentId.$eq=rt.parentId}};return(b,Y)=>{const rt=oe,q=kr,h=Br,s=Or,u=Be,d=Xb,r=Wb,a=Ee,c=Ps;return tt(),ot("div",null,[G("div",CE,[H(s,{onCommand:S,placement:"bottom-start",style:{"margin-right":"10px"},transfer:""},{dropdown:nt(()=>[H(h,null,{default:nt(()=>[H(q,{command:"file"},{default:nt(()=>[kt("\u65B0\u5EFA\u8BBE\u8BA1")]),_:1}),H(q,{command:"fileType"},{default:nt(()=>[kt("\u65B0\u5EFA\u6587\u4EF6\u5939")]),_:1})]),_:1})]),default:nt(()=>[H(rt,{type:"primary",icon:I(_o)},null,8,["icon"])]),_:1}),H(u,{class:"input",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",modelValue:I(o).name.$contains,"onUpdate:modelValue":Y[0]||(Y[0]=p=>I(o).name.$contains=p),search:"",disabled:I(w),onKeyup:cn(I(E),["enter"])},null,8,["modelValue","disabled","onKeyup"])]),H(r,null,{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(R),(p,g)=>(tt(),xt(d,{onClick:v=>((y,_)=>{_===R.value.length-1||(o.parentId.$eq=y,R.value=R.value.slice(0,_+1),E())})(p.parentId,g),key:p.id},{default:nt(()=>[kt(Et(p.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),G("div",wE,[I(f)?(tt(),xt(c,{key:"myFileTemplBox","on-reach-bottom":I(T),height:I(A)},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(l),p=>(tt(),ot("div",{key:p.name,class:"item"},[p.type==="fileType"?(tt(),xt(gE,{key:0,itemId:p.id,name:p.name,onSelect:()=>((g,v)=>{o.parentId.$eq=String(g),R.value.push({name:v,parentId:g}),E()})(p.id,p.name),onChange:I(E)},null,8,["itemId","name","onSelect","onChange"])):(tt(),xt(bE,{key:1,src:p.src,json:p.json,previewSrc:p.previewSrc,itemId:p.id,name:p.name,onChange:I(E)},null,8,["src","json","previewSrc","itemId","name","onChange"]))]))),128)),I(m)?(tt(),xt(a,{key:0,plain:""},{default:nt(()=>[kt("\u5DF2\u7ECF\u5230\u5E95\u4E86")]),_:1})):bt("",!0)]),_:1},8,["on-reach-bottom","height"])):bt("",!0)]),H(Is,{title:b.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:k,onSet:Q},null,8,["title"])])}}},_E=Nt(xE,[["__scopeId","data-v-7a6e101c"]]),EE={key:0,class:"box-border p-10px my-material"},SE={key:1,class:"tip"},IE=Nt({__name:"index",setup(t){const e=ct("templ"),n=ct(!1);return Z3().then(()=>{n.value=!0}).catch(()=>{n.value=!1}),(i,o)=>{const l=zB,f=VB;return I(n)?(tt(),ot("div",EE,[H(f,{modelValue:I(e),"onUpdate:modelValue":o[0]||(o[0]=A=>he(e)?e.value=A:null)},{default:nt(()=>[H(l,{label:"\u6A21\u677F",name:"templ"},{default:nt(()=>[I(e)==="templ"?(tt(),xt(_E,{key:0})):bt("",!0)]),_:1}),H(l,{label:"\u56FE\u7247",name:"img"},{default:nt(()=>[I(e)==="img"?(tt(),xt(hE,{key:0})):bt("",!0)]),_:1})]),_:1},8,["modelValue"])])):(tt(),ot("div",SE,"\u8BF7\u5148\u767B\u5F55"))}}},[["__scopeId","data-v-8263c1cb"]]),kE={class:"w-full"},BE={class:"layer-box"},OE=["onClick"],TE=["innerHTML"],DE={class:"btn-box"},ME=["innerHTML"],QE=["innerHTML"],LE=["innerHTML"],PE=["innerHTML"],jE={key:1,class:"empty-text"},FE=wt({__name:"index",setup(t){const e=Ft("mixinState"),n=jt(),i=ct([]),o=O=>O.id===e.mSelectId||e.mSelectIds.includes(O.id),l=(O,k)=>O.includes("text")?k.name||k.text:{group:"\u7EC4\u5408",image:"\u56FE\u7247",rect:"\u77E9\u5F62",circle:"\u5706\u5F62",triangle:"\u4E09\u89D2\u5F62",polygon:"\u591A\u8FB9\u5F62",path:"\u8DEF\u5F84"}[O]||"\u9ED8\u8BA4\u5143\u7D20",f=O=>{var S,Q,R,V;const k=(S=n.canvas)==null?void 0:S.getObjects().find(b=>b.id===O);(Q=n.canvas)==null||Q.discardActiveObject(),(R=n.canvas)==null||R.setActiveObject(k),(V=n.canvas)==null||V.requestRenderAll()},A=O=>({up:'<svg t="1650442206559" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1799" width="12" height="12"><path d="M876.2 434.3L536.7 94.9c-6.6-6.6-15.5-10.3-24.7-10.3-9.3 0-18.2 3.7-24.7 10.3L147.8 434.3c-13.7 13.7-13.7 35.8 0 49.5 13.7 13.7 35.8 13.7 49.5 0L477 204.1v700.2c0 19.3 15.7 35 35 35s35-15.7 35-35V204.1l279.7 279.7c6.8 6.8 15.8 10.3 24.7 10.3s17.9-3.4 24.7-10.3c13.7-13.7 13.7-35.8 0.1-49.5z" p-id="1800"></path></svg>',down:'<svg t="1650442229022" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1997" width="12" height="12"><path d="M876.2 589.7L536.7 929.1c-6.6 6.6-15.5 10.3-24.7 10.3-9.3 0-18.2-3.7-24.7-10.3L147.8 589.7c-13.7-13.7-13.7-35.8 0-49.5 13.7-13.7 35.8-13.7 49.5 0L477 819.9V119.6c0-19.3 15.7-35 35-35s35 15.7 35 35v700.2l279.7-279.7c6.8-6.8 15.8-10.3 24.7-10.3s17.9 3.4 24.7 10.3c13.7 13.8 13.7 35.9 0.1 49.6z" p-id="1998" ></path></svg>',upTop:'<svg t="1650442106652" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1839" width="11" height="11"><path d="M548.352 219.648a58.88 58.88 0 0 0-16.896-10.752 51.2 51.2 0 0 0-38.912 0 58.88 58.88 0 0 0-16.896 10.752l-256 256a51.2 51.2 0 0 0 72.704 72.704L460.8 379.392V972.8a51.2 51.2 0 0 0 102.4 0V379.392l168.448 168.96a51.2 51.2 0 0 0 72.704-72.704zM972.8 0H51.2a51.2 51.2 0 0 0 0 102.4h921.6a51.2 51.2 0 0 0 0-102.4z" p-id="1840" ></path></svg>',downTop:'<svg t="1650442146918" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2045" width="11" height="11"><path d="M548.352 804.352a58.88 58.88 0 0 1-16.896 10.752 51.2 51.2 0 0 1-38.912 0 58.88 58.88 0 0 1-16.896-10.752l-256-256a51.2 51.2 0 0 1 72.704-72.704L460.8 644.608V51.2a51.2 51.2 0 0 1 102.4 0v593.408l168.448-168.96a51.2 51.2 0 0 1 72.704 72.704zM972.8 1024H51.2a51.2 51.2 0 0 1 0-102.4h921.6a51.2 51.2 0 0 1 0 102.4z" p-id="2046"></path></svg>'})[O],m=()=>{n.editor.up()},w=()=>{n.editor.toFront()},x=()=>{n.editor.down()},E=()=>{n.editor.toBack()},T=()=>{var O;i.value=[...((O=n.canvas)==null?void 0:O.getObjects().filter(k=>!(k instanceof st.fabric.GuideLine||k.id==="workspace")))||[]].reverse().map(k=>{const{type:S,id:Q,name:R,text:V,selectable:b}=k;return{type:S,id:Q,name:R,text:V,isLock:!b}}),i.value=Pf(I(i),"id")};return Lt(()=>{var O;T(),(O=n.canvas)==null||O.on("after:render",T)}),Qe(()=>{var O;(O=n.canvas)==null||O.off("after:render",T)}),(O,k)=>{const S=We,Q=hr,R=oe,V=ur,b=mh;return tt(),ot("div",kE,[I(i).length?(tt(),ot(Mt,{key:0},[G("div",BE,[(tt(!0),ot(Mt,null,Ht(I(i),Y=>(tt(),ot("div",{onClick:rt=>f(Y.id),key:Y.id,class:dt(o(Y)&&"active")},[H(V,{class:"ellipsis"},{default:nt(()=>[H(Q,{span:22},{default:nt(()=>[H(S,{content:Y.name||Y.text||Y.type,placement:"left"},{default:nt(()=>{return[G("div",null,[G("span",{class:dt(o(Y)&&"active"),innerHTML:(rt=Y.type,{group:'<svg t="1650855307397" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2503" width="16" height="16"><path d="M839.036 130.458h-654.072c-30.102 0-54.506 24.404-54.506 54.506v654.072c0 30.102 24.404 54.506 54.506 54.506h654.072c30.102 0 54.506-24.404 54.506-54.506v-654.072c0-30.102-24.404-54.506-54.506-54.506zM839.036 811.786c0 15.050-12.196 27.249-27.249 27.249h-598.721c-15.050 0-27.249-12.196-27.249-27.249v-598.721c0-15.050 12.196-27.249 27.249-27.249h598.721c15.049 0 27.249 12.196 27.249 27.249v598.721zM730.028 421.639h-127.324v-126.817c0-30.091-24.402-54.499-54.501-54.499h-252.755c-30.098 0-54.501 24.401-54.501 54.499v253.89c0 30.091 24.402 54.499 54.501 54.499h127.324v126.817c0 30.091 24.402 54.499 54.501 54.499h252.755c30.098 0 54.501-24.401 54.501-54.499v-253.89c0-30.091-24.402-54.499-54.501-54.499zM323.36 548.137c-15.050 0-27.251-12.207-27.251-27.26v-197.694c0-15.055 12.201-27.26 27.251-27.26h196.928c15.051 0 27.251 12.207 27.251 27.26v98.458h-70.267c-30.098 0-54.501 24.401-54.501 54.499v71.998h-99.411zM547.539 477.24v43.638c0 15.055-12.202 27.26-27.251 27.26h-42.353v-43.638c0-15.055 12.202-27.26 27.251-27.26h42.353zM729.365 702.193c0 15.055-12.201 27.26-27.251 27.26h-196.928c-15.050 0-27.251-12.207-27.251-27.26v-98.981h70.267c30.098 0 54.501-24.401 54.501-54.499v-71.474h99.411c15.050 0 27.251 12.207 27.251 27.26v197.693z" p-id="2504"></path></svg>',textbox:'<svg t="1650854954008" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14038" width="16" height="16"><path d="M720.832 692.352h-12.64L530.208 260.448a19.968 19.968 0 0 0-36.416 0L316.608 692.352h-13.44c-7.904 0-15.04 3.968-17.408 11.072a19.872 19.872 0 0 0 18.208 27.68h56.96c9.504 0 18.208-6.336 19.776-15.808a18.752 18.752 0 0 0-15.808-21.344l36.384-87.808h159.776l34.816 87.808a18.88 18.88 0 0 0-15.808 21.344c1.568 9.504 10.272 15.808 19.776 15.808h121.024c7.904 0 15.04-3.968 17.408-11.072a19.2 19.2 0 0 0-17.408-27.68z m-306.112-125.76l64.864-158.208 64.864 158.208H414.72z m-246.816-80.704c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.872-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c-0.8-6.336-5.536-11.072-11.872-11.072s-11.872 5.536-11.872 11.872v23.744c0 6.336 4.736 11.072 11.872 11.072z m-11.872 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 7.104 4.736 11.872 11.872 11.872a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m665.248-227.808c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.072-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744c0.8 7.104 5.536 11.872 11.872 11.872z m-11.072 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m-347.264 119.456h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m151.872 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-228.608 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-75.136-7.904H222.496v-11.072a12.48 12.48 0 0 0-12.672-12.64h-18.976v-37.984c0-7.104-5.536-12.64-11.872-12.64s-11.872 5.536-11.872 12.64v37.984h-10.272a12.512 12.512 0 0 0-12.672 12.64v52.992a12.48 12.48 0 0 0 12.672 12.64h52.992a12.512 12.512 0 0 0 12.672-12.64v-11.072h35.584c7.104-1.568 12.672-7.904 12.672-14.24 0-7.104-12.672-16.608-12.672-16.608z m379.68 7.904h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-251.52-642.304h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-75.936 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m151.872 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-227.808 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-7.104 0.8-11.872 5.536-11.872 12.672s4.736 11.072 11.872 11.072zM257.28 167.904H221.696v-11.072a12.512 12.512 0 0 0-12.672-12.672H156.832a12.512 12.512 0 0 0-12.672 12.672v52.992c0 7.104 5.536 12.672 12.672 12.672h11.072v35.584c1.568 7.104 7.904 12.672 14.24 12.672s16.608-12.672 16.608-12.672V222.496h11.072a12.512 12.512 0 0 0 12.672-12.672v-18.976h35.584a12.16 12.16 0 0 0 11.872-11.872 12.224 12.224 0 0 0-12.672-11.072z m356.768 22.944h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m76.736 0h23.744c6.336 0 11.072-4.736 11.072-11.072s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.072 12.64 11.072z m176.384-46.656h-52.992a12.48 12.48 0 0 0-12.64 12.672v11.072h-35.584c-7.104 1.568-12.64 7.904-12.64 14.24s12.64 16.608 12.64 16.608h35.584v11.072c0 7.104 5.536 12.672 12.64 12.672h18.976v37.984c0 7.104 5.536 12.672 11.872 12.672s11.872-5.536 11.872-12.672V222.528h11.072a12.48 12.48 0 0 0 12.64-12.672V156.864a13.76 13.76 0 0 0-13.44-12.672z m0 657.312h-11.072v-35.584c-1.568-7.104-7.904-12.64-14.24-12.64-7.104 0-16.608 12.64-16.608 12.64v35.584h-11.072a12.48 12.48 0 0 0-12.64 12.64v18.976h-35.584c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h35.584v11.072a12.48 12.48 0 0 0 12.64 12.64h52.992a12.48 12.48 0 0 0 12.64-12.64v-52.992c0-7.904-5.536-13.44-12.64-13.44z" p-id="14039"></path></svg>',"i-text":'<svg t="1650875455324" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5401" width="16" height="16"><path d="M213.333333 209.92v128h85.333334v-42.666667h170.666666v433.493334H384.853333v85.333333h256v-85.333333H554.666667V295.253333h170.666666v42.666667h85.333334v-128H213.333333z" p-id="5402"></path></svg>',image:'<svg t="1650855321307" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2701" width="16" height="16"><path d="M813.752 223.168H209.584a25.168 25.168 0 0 0-25.168 25.176v528.648a25.16 25.16 0 0 0 25.168 25.168h604.168a25.152 25.152 0 0 0 25.168-25.168V248.344a25.168 25.168 0 0 0-25.168-25.176z m-8.08 544.168H217.664V258h588.008v509.336z" p-id="2702"></path><path d="M406.752 454.168a44.24 44.24 0 1 0-0.008-88.48 44.24 44.24 0 0 0 0.008 88.48zM474.72 611.368l-67.968-94.376-110.584 158.336h442.328L605.8 426.52z" p-id="2703"></path></svg>',rect:'<svg t="1650855811131" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18499" width="16" height="16"><path d="M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z" p-id="18500"></path></svg>',circle:'<svg t="1650855860236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19440" width="16" height="16"><path d="M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z" p-id="19441"></path></svg>',triangle:'<svg t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="16" height="16"><path d="M928.64 896a2.144 2.144 0 0 1-0.64 0H96a32.032 32.032 0 0 1-27.552-48.288l416-704c11.488-19.456 43.552-19.456 55.104 0l413.152 699.2A31.936 31.936 0 0 1 928.64 896zM152.064 832h719.84L512 222.912 152.064 832z" p-id="2033"></path></svg>',polygon:'<svg t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="16" height="16"><path d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>'}[rt]||'<svg t="1650855578257" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17630" width="16" height="16"><path d="M620.606061 0a62.060606 62.060606 0 0 1 62.060606 62.060606v188.943515C874.945939 273.997576 1024 437.651394 1024 636.121212c0 214.217697-173.661091 387.878788-387.878788 387.878788-198.469818 0-362.123636-149.054061-385.117091-341.333333H62.060606a62.060606 62.060606 0 0 1-62.060606-62.060606V62.060606a62.060606 62.060606 0 0 1 62.060606-62.060606h558.545455z m62.060606 297.937455V620.606061a62.060606 62.060606 0 0 1-62.060606 62.060606H297.937455C320.636121 849.159758 463.39103 977.454545 636.121212 977.454545c188.509091 0 341.333333-152.824242 341.333333-341.333333 0-172.730182-128.294788-315.485091-294.787878-338.183757zM620.606061 46.545455H62.060606a15.515152 15.515152 0 0 0-15.406545 13.699878L46.545455 62.060606v558.545455a15.515152 15.515152 0 0 0 13.699878 15.406545L62.060606 636.121212h186.181818c0-214.217697 173.661091-387.878788 387.878788-387.878788V62.060606a15.515152 15.515152 0 0 0-13.699879-15.406545L620.606061 46.545455z m15.515151 248.242424c-188.509091 0-341.333333 152.824242-341.333333 341.333333h325.818182a15.515152 15.515152 0 0 0 15.406545-13.699879L636.121212 620.606061V294.787879z" p-id="17631"></path></svg>')},null,10,TE),kt(" | "+Et(l(Y.type,Y)),1)])];var rt}),_:2},1032,["content"])]),_:2},1024),H(Q,{span:2},{default:nt(()=>[H(R,{icon:Y.isLock?I(Q3):I(L3),link:"",onClick:rt=>(q=>{var h;f(q.id),q.isLock?n.editor.unLock():n.editor.lock(),(h=n.canvas)==null||h.discardActiveObject()})(Y)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024)],10,OE))),128))]),G("div",DE,[ee(H(b,null,{default:nt(()=>[H(R,{onClick:m},{default:nt(()=>[G("span",{innerHTML:A("up")},null,8,ME)]),_:1}),H(R,{onClick:x},{default:nt(()=>[G("span",{innerHTML:A("down")},null,8,QE)]),_:1}),H(R,{onClick:w},{default:nt(()=>[G("span",{innerHTML:A("upTop")},null,8,LE)]),_:1}),H(R,{onClick:E},{default:nt(()=>[G("span",{innerHTML:A("downTop")},null,8,PE)]),_:1})]),_:1},512),[[Me,I(e).mSelectMode==="one"]])])],64)):(tt(),ot("p",jE,"\u6682\u65E0\u56FE\u5C42"))])}}}),RE=Nt(FE,[["__scopeId","data-v-660adcfa"]]),NE=Nt({},[["render",function(t,e){return tt(),ot("div",null,"\u5F00\u53D1\u4E2D")}]]),zE={class:"w-full relative"},VE={class:"w-full h-48px box-border px-16px border-b-1px border-b-solid border-b-[rgba(0_0_0/0.08)] mb-12px"},UE={class:"w-full h-full flex justify-between items-center"},HE={class:"h-full flex justify-start items-center text-14px"},GE={class:"flex"},YE={class:"w-full h-full flex justify-start items-center"},WE={class:"box-border px-10px"},XE=wt({__name:"index",setup(t){const e=jt(),{panelType:n}=Sh(e),i={canvas:NE,layer:RE},o=ct(!1),l=ct("canvas"),f=ut(()=>{let w="";switch(I(l)){case"canvas":w="\u641C\u7D22\u753B\u677F";break;case"layer":w="\u641C\u7D22\u56FE\u5C42"}return w}),A=be(function(w){l.value=w},250),m=be(function(){o.value=!0},250);return Dt(()=>n.value,w=>{if(w===oi.canvas)l.value="canvas";else{if(w!==oi.layer)return"";l.value="layer"}},{immediate:!0}),(w,x)=>{const E=ne,T=oe,O=Be;return tt(),ot("div",zE,[G("div",VE,[ee(G("div",UE,[G("ul",HE,[G("li",{class:dt(["h-full f-center cursor-pointer select-none mr-10px",[I(l)==="canvas"?"text-#333 font-500 tab-active":""]]),onClick:x[0]||(x[0]=k=>I(A)("canvas"))}," \u753B\u677F ",2),G("li",{class:dt(["h-full f-center cursor-pointer select-none",[I(l)==="layer"?"text-#333 font-500 tab-active":""]]),onClick:x[1]||(x[1]=k=>I(A)("layer"))}," \u56FE\u5C42 ",2)]),G("div",GE,[I(l)==="canvas"?(tt(),xt(T,{key:0,text:"",onClick:w.createTemplate,style:{padding:"0",width:"32px","border-radius":"6px"}},{default:nt(()=>[H(E,{style:{"font-size":"20px"}},{default:nt(()=>[H(I(_o))]),_:1})]),_:1},8,["onClick"])):bt("",!0),H(T,{text:"",onClick:I(m),style:{padding:"0",width:"32px","border-radius":"6px",margin:"0"}},{default:nt(()=>[H(E,{style:{"font-size":"20px"}},{default:nt(()=>[H(I(P3))]),_:1})]),_:1},8,["onClick"])])],512),[[Me,!I(o)]]),ee(G("div",YE,[H(E,{class:"mr-8px"},{default:nt(()=>[H(I(P3))]),_:1}),H(O,{placeholder:I(f),onBlur:x[2]||(x[2]=k=>o.value=!1)},null,8,["placeholder"])],512),[[Me,I(o)]])]),G("div",WE,[(tt(),xt(tm,null,[(tt(),xt(Xe(i[I(l)])))],1024))])])}}}),$E=Nt(XE,[["__scopeId","data-v-64aeb02c"]]),qE={class:"box-border p-10px"},KE=Nt({},[["render",function(t,e){return tt(),ot("div",qE,"\u8BA1\u5212\u4E2D")}]]),JE={class:"w-full h-fullr"},ZE=G("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u56FE\u7247",-1),tS={class:"flex justify-start items-center flex-wrap min-h-40px"},eS=["onClick"],nS={class:"text-12px mt-10px"},iS={class:"-mt-10px"},rS=G("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u6587\u5B57",-1),oS={class:"flex justify-start items-center flex-wrap min-h-40px"},aS=["onClick"],sS={class:"text-12px mt-10px"},lS={class:"-mt-10px"},cS=G("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u5F62\u72B6",-1),uS={class:"flex justify-start items-center flex-wrap min-h-40px"},hS=["onClick"],dS=["innerHTML"],fS={class:"-mt-10px"},pS=G("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u6761\u7801\u56FE\u7247",-1),gS={class:"flex justify-start items-center flex-wrap min-h-40px"},vS=["onClick"],AS=["innerHTML"],mS=wt({__name:"index",setup(t){const{getImgStr:e,selectFiles:n}=zi,i=jt(),o=ct(!1),l=async(T,O)=>{i.editor.clear(),i.editor.setSize(T,O),mn.success("\u521B\u5EFA\u6210\u529F")},f={shadow:"",fontFamily:"arial"};be(function(){n({accept:"image/*",multiple:!0}).then(T=>{Array.from(T).forEach(O=>{e(O).then(k=>{E(k)})})})},250);const A=be(async function(T){const O=rr.service({lock:!0,body:!0});try{switch(T){case zn.design:o.value=!0;break;case zn.img:n({accept:"image/*",multiple:!0}).then(k=>{Array.from(k).forEach(S=>{e(S).then(Q=>{E(Q)})})});break;case zn.svg:n({accept:".svg",multiple:!0}).then(k=>{Array.from(k).forEach(S=>{e(S).then(Q=>{(function(R){if(!R)throw new Error("file is undefined");st.fabric.loadSVGFromURL(R,(V,b)=>{const Y=st.fabric.util.groupSVGElements(V,{...b,name:"defaultSVG",id:Ie()});i.editor.addBaseType(Y,{scale:!0})})})(Q)})})});break;case zn.json:i.editor.insert();break;case zn.psd:await i.editor.insertPSD()}O.close()}catch(k){O.close()}},250),m=be(function(T){let O;switch(T){case yr.h1:O=new st.fabric.Textbox("\u53CC\u51FB\u7F16\u8F91\u6807\u9898",{...f,fontWeight:"bold",fontSize:80,fill:"#000000"});break;case yr.h2:O=new st.fabric.Textbox("\u53CC\u51FB\u7F16\u8F91\u6807\u9898",{...f,fontWeight:"bold",fontSize:60,fill:"#000000"});break;case yr.normal:O=new st.fabric.Textbox("\u53CC\u51FB\u7F16\u8F91\u6807\u9898",{...f,fontSize:48,fill:"#000000"})}O&&i.editor.addBaseType(O,{center:!0})},250),w=be(function(T){switch(T){case Nn.react:const O=new st.fabric.Rect({...f,fill:"#F57274FF",width:400,height:400,name:"\u77E9\u5F62"});i.editor.addBaseType(O,{center:!0});break;case Nn.triangle:const k=new st.fabric.Triangle({...f,width:400,height:400,fill:"#92706BFF",name:"\u4E09\u89D2\u5F62"});i.editor.addBaseType(k,{center:!0});break;case Nn.around:const S=new st.fabric.Circle({...f,radius:150,fill:"#57606BFF",name:"\u5706\u5F62"});i.editor.addBaseType(S,{center:!0});break;case Nn.polygon:const Q=new st.fabric.Polygon(Zc(5,200),{...f,fill:"#CCCCCCFF",name:"\u591A\u8FB9\u5F62"});Q.set({width:400,height:400,pathOffset:{x:0,y:0}}),i.editor.addBaseType(Q,{center:!0});break;case Nn.line:const R=new st.fabric.Line([100,100,10,10],{...f,stroke:"#333",fill:"#333",name:"\u76F4\u7EBF"});i.editor.addBaseType(R,{center:!0})}},250),x=be(function(T){switch(T){case sa.qrcode:i.editor.addQrCode();break;case sa.barCode:i.editor.addBarcode()}},250);function E(T){if(!T)throw new Error("file is undefined");const O=document.createElement("img");O.src=T,document.body.appendChild(O),O.onload=async()=>{const k=await i.editor.createImgByElement(O);i.editor.addBaseType(k,{scale:!0}),O.remove()}}return(T,O)=>{const k=or;return tt(),ot("div",JE,[G("section",null,[ZE,G("ul",tS,[(tt(!0),ot(Mt,null,Ht(I(oE),S=>(tt(),ot("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:S.type,onClick:Q=>I(A)(S.type)},[H(k,{extClass:"text-24px",icon:S.icon,color:"#333"},null,8,["icon"]),G("span",nS,Et(S.name),1)],8,eS))),128))])]),G("section",iS,[rS,G("ul",oS,[(tt(!0),ot(Mt,null,Ht(I(nE),S=>(tt(),ot("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:S.type,onClick:Q=>I(m)(S.type)},[H(k,{extClass:"text-24px",icon:S.icon,color:"#333"},null,8,["icon"]),G("span",sS,Et(S.name),1)],8,aS))),128))])]),G("section",lS,[cS,G("ul",uS,[(tt(!0),ot(Mt,null,Ht(I(iE),S=>(tt(),ot("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:S.type,onClick:Q=>I(w)(S.type)},[G("div",{class:"w-24px h-24px",innerHTML:S.icon},null,8,dS)],8,hS))),128))])]),G("section",fS,[pS,G("ul",gS,[(tt(!0),ot(Mt,null,Ht(I(rE),S=>(tt(),ot("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:S.type,onClick:Q=>I(x)(S.type)},[G("div",{class:"w-24px h-24px",innerHTML:S.icon},null,8,AS)],8,vS))),128))])]),H(Is,{title:"\u65B0\u5EFA\u8BBE\u8BA1",show:I(o),"onUpdate:show":O[0]||(O[0]=S=>he(o)?o.value=S:null),onSet:l},null,8,["show"])])}}}),Tn=t=>(je("data-v-d3b6d4a6"),t=t(),Fe(),t),yS={class:"box-border p-10px"},bS={class:"tool-box"},CS=[Tn(()=>G("svg",{t:"1650875455324",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5401",width:"26",height:"26"},[G("path",{d:"M213.333333 209.92v128h85.333334v-42.666667h170.666666v433.493334H384.853333v85.333333h256v-85.333333H554.666667V295.253333h170.666666v42.666667h85.333334v-128H213.333333z","p-id":"5402"})],-1))],wS=[Tn(()=>G("svg",{t:"1650854954008",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14038",width:"26",height:"26"},[G("path",{d:"M720.832 692.352h-12.64L530.208 260.448a19.968 19.968 0 0 0-36.416 0L316.608 692.352h-13.44c-7.904 0-15.04 3.968-17.408 11.072a19.872 19.872 0 0 0 18.208 27.68h56.96c9.504 0 18.208-6.336 19.776-15.808a18.752 18.752 0 0 0-15.808-21.344l36.384-87.808h159.776l34.816 87.808a18.88 18.88 0 0 0-15.808 21.344c1.568 9.504 10.272 15.808 19.776 15.808h121.024c7.904 0 15.04-3.968 17.408-11.072a19.2 19.2 0 0 0-17.408-27.68z m-306.112-125.76l64.864-158.208 64.864 158.208H414.72z m-246.816-80.704c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.872-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c-0.8-6.336-5.536-11.072-11.872-11.072s-11.872 5.536-11.872 11.872v23.744c0 6.336 4.736 11.072 11.872 11.072z m-11.872 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 7.104 4.736 11.872 11.872 11.872a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m665.248-227.808c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.072-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744c0.8 7.104 5.536 11.872 11.872 11.872z m-11.072 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m-347.264 119.456h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m151.872 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-228.608 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-75.136-7.904H222.496v-11.072a12.48 12.48 0 0 0-12.672-12.64h-18.976v-37.984c0-7.104-5.536-12.64-11.872-12.64s-11.872 5.536-11.872 12.64v37.984h-10.272a12.512 12.512 0 0 0-12.672 12.64v52.992a12.48 12.48 0 0 0 12.672 12.64h52.992a12.512 12.512 0 0 0 12.672-12.64v-11.072h35.584c7.104-1.568 12.672-7.904 12.672-14.24 0-7.104-12.672-16.608-12.672-16.608z m379.68 7.904h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-251.52-642.304h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-75.936 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m151.872 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-227.808 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-7.104 0.8-11.872 5.536-11.872 12.672s4.736 11.072 11.872 11.072zM257.28 167.904H221.696v-11.072a12.512 12.512 0 0 0-12.672-12.672H156.832a12.512 12.512 0 0 0-12.672 12.672v52.992c0 7.104 5.536 12.672 12.672 12.672h11.072v35.584c1.568 7.104 7.904 12.672 14.24 12.672s16.608-12.672 16.608-12.672V222.496h11.072a12.512 12.512 0 0 0 12.672-12.672v-18.976h35.584a12.16 12.16 0 0 0 11.872-11.872 12.224 12.224 0 0 0-12.672-11.072z m356.768 22.944h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m76.736 0h23.744c6.336 0 11.072-4.736 11.072-11.072s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.072 12.64 11.072z m176.384-46.656h-52.992a12.48 12.48 0 0 0-12.64 12.672v11.072h-35.584c-7.104 1.568-12.64 7.904-12.64 14.24s12.64 16.608 12.64 16.608h35.584v11.072c0 7.104 5.536 12.672 12.64 12.672h18.976v37.984c0 7.104 5.536 12.672 11.872 12.672s11.872-5.536 11.872-12.672V222.528h11.072a12.48 12.48 0 0 0 12.64-12.672V156.864a13.76 13.76 0 0 0-13.44-12.672z m0 657.312h-11.072v-35.584c-1.568-7.104-7.904-12.64-14.24-12.64-7.104 0-16.608 12.64-16.608 12.64v35.584h-11.072a12.48 12.48 0 0 0-12.64 12.64v18.976h-35.584c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h35.584v11.072a12.48 12.48 0 0 0 12.64 12.64h52.992a12.48 12.48 0 0 0 12.64-12.64v-52.992c0-7.904-5.536-13.44-12.64-13.44z","p-id":"14039"})],-1))],xS=[Tn(()=>G("svg",{t:"1650855811131",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18499",width:"26",height:"26"},[G("path",{d:"M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z","p-id":"18500"})],-1))],_S=[Tn(()=>G("svg",{t:"1650855860236",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19440",width:"26",height:"26"},[G("path",{d:"M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z","p-id":"19441"})],-1))],ES=[Tn(()=>G("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2032",width:"26",height:"26"},[G("path",{d:"M928.64 896a2.144 2.144 0 0 1-0.64 0H96a32.032 32.032 0 0 1-27.552-48.288l416-704c11.488-19.456 43.552-19.456 55.104 0l413.152 699.2A31.936 31.936 0 0 1 928.64 896zM152.064 832h719.84L512 222.912 152.064 832z","p-id":"2033"})],-1))],SS=[Tn(()=>G("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2032",width:"26",height:"26"},[G("path",{d:"M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z","p-id":"2033"})],-1))],IS={class:"tool-box"},kS=[Tn(()=>G("svg",{t:"1673022047861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4206",width:"20",height:"20"},[G("path",{d:"M187.733333 1024h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066667v-170.666666c0-10.24 6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667v170.666666c0 10.24-6.826667 17.066667-17.066667 17.066667zM34.133333 989.866667h136.533334v-136.533334H34.133333v136.533334zM1006.933333 204.8h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066667v-170.666666c0-10.24 6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667v170.666666c0 10.24-6.826667 17.066667-17.066667 17.066667zM853.333333 170.666667h136.533334V34.133333h-136.533334v136.533334z",fill:"","p-id":"4207"}),G("path",{d:"M187.733333 853.333333c-3.413333 0-10.24 0-13.653333-3.413333-6.826667-6.826667-6.826667-17.066667 0-23.893333l648.533333-648.533334c6.826667-6.826667 17.066667-6.826667 23.893334 0s6.826667 17.066667 0 23.893334l-648.533334 648.533333c0 3.413333-6.826667 3.413333-10.24 3.413333z",fill:"","p-id":"4208"})],-1))],BS=[Tn(()=>G("svg",{t:"1673026778912",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2659",width:"20",height:"20"},[G("path",{d:"M320 738.133333L827.733333 230.4l-29.866666-29.866667L290.133333 708.266667v-268.8h-42.666666v341.333333h341.333333v-42.666667H320z",fill:"#444444","p-id":"2660"})],-1))],OS=[Tn(()=>G("svg",{t:"1715323097309",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"24572",width:"20",height:"20"},[G("path",{d:"M485.954269 735.978673 643.38051 811.107852C688.831327 832.798434 686.17686 860.459274 635.3838 871.903075L81.378406 996.721881C31.19882 1008.027444-1.313538 976.266799 10.130269 925.473745L134.949081 371.468357C146.254656 321.288783 173.611855 317.095036 195.744311 363.471653L270.873453 520.897858 903.670271 62.052983C986.301645 2.136458 1004.805285 20.426857 944.799125 103.181838L485.954269 735.978673Z",fill:"#444444","p-id":"24573"})],-1))],TS=[Tn(()=>G("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"203255",width:"26",height:"26"},[G("path",{d:"M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z","p-id":"203355"})],-1))],DS={class:"tool-box"},MS=[Tn(()=>G("svg",{t:"1717679888665",class:"icon",viewBox:"0 0 1024 1024",version:"1.1","p-id":"4558",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},[G("path",{d:"M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z","p-id":"4559"}),G("path",{d:"M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z","p-id":"4560"}),G("path",{d:"M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z","p-id":"4561"})],-1))],QS=[Tn(()=>G("svg",{t:"1717679973041",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5747",width:"20",height:"20"},[G("path",{d:"M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z","p-id":"5748"})],-1))],LS={__name:"index",setup(t){const e=jt(),n={polygon:"polygon",freeDraw:"freeDraw",pathText:"pathText"},i={shadow:"",fontFamily:"arial"},{t:o}=ir(),l=Zt({isDrawingLineMode:!1,lineType:!1}),f=b=>{V();const Y=new st.fabric.IText(o("everything_is_fine"),{...i,fontSize:80,fill:"#000000FF"});e.editor.addBaseType(Y,{center:!0,event:b})},A=b=>{V();const Y=new st.fabric.Textbox(o("everything_goes_well"),{...i,splitByGrapheme:!0,width:400,fontSize:80,fill:"#000000FF"});e.editor.addBaseType(Y,{center:!0,event:b})},m=b=>{V();const Y=new st.fabric.Triangle({...i,width:400,height:400,fill:"#92706BFF",name:"\u4E09\u89D2\u5F62"});e.editor.addBaseType(Y,{center:!0,event:b})},w=b=>{V();const Y=new st.fabric.Polygon(Zc(5,200),{...i,fill:"#CCCCCCFF",name:"\u591A\u8FB9\u5F62"});Y.set({width:400,height:400,pathOffset:{x:0,y:0}}),e.editor.addBaseType(Y,{center:!0,event:b})},x=b=>{V();const Y=new st.fabric.Circle({...i,radius:150,fill:"#57606BFF",name:"\u5706\u5F62"});e.editor.addBaseType(Y,{center:!0,event:b})},E=b=>{V();const Y=new st.fabric.Rect({...i,fill:"#F57274FF",width:400,height:400,name:"\u77E9\u5F62"});e.editor.addBaseType(Y,{center:!0,event:b})},T=()=>{const b=()=>{l.lineType=!1,l.isDrawingLineMode=!1,R(!l.isDrawingLineMode,!l.isDrawingLineMode)};l.lineType!==n.polygon?(k(),S(),l.lineType=n.polygon,l.isDrawingLineMode=!0,e.editor.beginDrawPolygon(b),e.editor.endDraw(),R(!l.isDrawingLineMode,!l.isDrawingLineMode)):e.editor.discardPolygon()},O=()=>{l.lineType===n.freeDraw?(e.editor.endDraw(),l.lineType=!1,l.isDrawingLineMode=!1):(k(),S(),l.lineType=n.freeDraw,l.isDrawingLineMode=!0,e.editor.startDraw({width:20}))},k=()=>{e.editor.discardPolygon(),e.editor.endDraw(),e.editor.endTextPathDraw()},S=()=>{l.isDrawingLineMode=!1,l.lineType="",e.editor.setMode(l.isDrawingLineMode),e.editor.setLineType(l.lineType)},Q=b=>{[n.polygon,n.freeDraw,n.pathText].includes(l.lineType)&&k(),l.lineType===b?(l.isDrawingLineMode=!1,l.lineType=""):(l.isDrawingLineMode=!0,l.lineType=b),e.editor.setMode(l.isDrawingLineMode),e.editor.setLineType(b),R(!l.isDrawingLineMode,!l.isDrawingLineMode)},R=(b,Y)=>{e.editor.canvas.forEachObject(rt=>{rt.id!=="workspace"&&(rt.selectable=Y,rt.evented=b)})},V=()=>{l.isDrawingLineMode&&(l.isDrawingLineMode=!1,l.lineType="",e.editor.setMode(!1),k(),R(!0,!0))};return S9(()=>{V()}),(b,Y)=>{const rt=Ee,q=or;return tt(),ot("div",yS,[H(rt,{"content-position":"left"},{default:nt(()=>[kt(Et(b.$t("editor.common_elements")),1)]),_:1}),G("div",bS,[G("span",{onClick:Y[0]||(Y[0]=()=>f()),draggable:!0,onDragend:f},CS,32),G("span",{onClick:Y[1]||(Y[1]=()=>A()),draggable:!0,onDragend:A},wS,32),G("span",{onClick:Y[2]||(Y[2]=()=>E()),draggable:!0,onDragend:E},xS,32),G("span",{onClick:Y[3]||(Y[3]=()=>x()),draggable:!0,onDragend:x},_S,32),G("span",{onClick:Y[4]||(Y[4]=()=>m()),draggable:!0,onDragend:m},ES,32),G("span",{onClick:Y[5]||(Y[5]=()=>w()),draggable:!0,onDragend:w},SS,32)]),H(rt,{"content-position":"left"},{default:nt(()=>[kt(Et(b.$t("editor.draw_elements")),1)]),_:1}),G("div",IS,[G("span",{onClick:Y[6]||(Y[6]=h=>Q("line")),class:dt(I(l).isDrawingLineMode&&I(l).lineType==="line"&&"bg")},kS,2),G("span",{onClick:Y[7]||(Y[7]=h=>Q("arrow")),class:dt(I(l).isDrawingLineMode&&I(l).lineType==="arrow"&&"bg")},BS,2),G("span",{onClick:Y[8]||(Y[8]=h=>Q("thinTailArrow")),class:dt(I(l).isDrawingLineMode&&I(l).lineType==="thinTailArrow"&&"bg")},OS,2),G("span",{onClick:T,class:dt(I(l).isDrawingLineMode&&I(l).lineType==="polygon"&&"bg")},TS,2),G("span",{onClick:O,class:dt(I(l).isDrawingLineMode&&I(l).lineType==="freeDraw"&&"bg")},[H(q,{extClass:"text-20px",icon:"editor-brush"})],2)]),H(rt,{"content-position":"left"},{default:nt(()=>[kt(Et(b.$t("editor.code_img")),1)]),_:1}),G("div",DS,[G("span",{onClick:Y[9]||(Y[9]=(...h)=>I(e).editor.addQrCode&&I(e).editor.addQrCode(...h))},MS),G("span",{onClick:Y[10]||(Y[10]=(...h)=>I(e).editor.addBarcode&&I(e).editor.addBarcode(...h))},QS)])])}}},PS=Nt(LS,[["__scopeId","data-v-d3b6d4a6"]]),la=Eh,jS=t=>Xn.get("".concat(la,"/api/templs/").concat(t));function FS(t,e,n,i,o,l,f){var A;return A={populate:{img:"*"},filters:{},fields:f,pagination:{page:t,pageSize:l}},[{key:i,value:e,type:"$eq"},{key:o,value:n,type:"$contains"}].forEach(m=>{const{key:w,value:x,type:E}=m;x&&(A.filters[w]={[E]:x})}),ph.stringify(A)}function RS(t){var e,n,i,o,l,f;return la+(((o=(i=(n=(e=t==null?void 0:t.data)==null?void 0:e.attributes)==null?void 0:n.formats)==null?void 0:i.small)==null?void 0:o.url)||((f=(l=t==null?void 0:t.data)==null?void 0:l.attributes)==null?void 0:f.url)||"")}function NS({typeUrl:t,listUrl:e,searchTypeKey:n,searchWordKey:i,scrollElement:o,pageSize:l,fields:f=[]}){const A=ct(!1),m=ct(""),w=ct(""),x=ct([]),E=ut(()=>{const Y=x.value.find(rt=>rt.value===w.value);return(Y==null?void 0:Y.lable)||"\u5168\u90E8"}),T=ct([]),O=ct(1),k=Zt({page:0,pageCount:0,pageSize:10,total:0}),S=ut(()=>k.page===O.value&&k.page>=k.pageCount),Q=async()=>{A.value=!0;try{const rt=(await(Y=t,Xn.get("".concat(la,"/api/").concat(Y,"?pagination[pageSize]=200")))).data.data.map(q=>({value:q.id,label:q.attributes.name}));x.value=[{label:"\u5168\u90E8",value:""},...rt]}catch(rt){x.value=[]}var Y;A.value=!1},R=async()=>{A.value=!0;try{const q=FS(O.value,w.value,m.value,n,i,l,f),h=await(Y=e,rt=q,Xn.get("".concat(la,"/api/").concat(Y,"?").concat(rt))),s=h.data.data.map(u=>{var r,a,c;return{id:u.id,name:u.attributes.name,desc:u.attributes.desc,json:(r=u.attributes)==null?void 0:r.json,src:(d=u.attributes.img,la+(((c=(a=d==null?void 0:d.data)==null?void 0:a.attributes)==null?void 0:c.url)||"")),previewSrc:RS(u.attributes.img)};var d});Object.keys(h.data.meta.pagination).forEach(u=>{k[u]=h.data.meta.pagination[u]}),T.value=[...T.value,...s]}catch(q){}var Y,rt;A.value=!1},V=ct(!1),b=ct(0);return{startPage:async()=>{const Y=document.querySelector(o);b.value=Y.offsetHeight,V.value=!0,await Q(),await R()},searchKeyWord:m,typeValue:w,typeText:E,typeList:x,pageLoading:A,pageData:T,isDownBottm:S,startGetList:()=>{T.value=[],O.value=1,R()},nextPage:()=>{O.value>=k.pageCount||(O.value++,setTimeout(()=>{R()},1e3))},scrollHeight:b,showScroll:V,getInfo:jS}}const zS={class:"box-border p-10px"},VS={class:"search-box"},US={style:{height:"calc(100vh - 108px)"},id:"myTemplBox"},HS={class:"list-box"},GS={class:"tmpl-img-box"},YS={__name:"index",setup(t){const e=jt(),n=wh(),i=jr(),{t:o}=ir(),{startPage:l,typeValue:f,typeText:A,typeList:m,pageLoading:w,pageData:x,searchKeyWord:E,isDownBottm:T,startGetList:O,nextPage:k,showScroll:S,scrollHeight:Q,getInfo:R}=NS({typeUrl:"templ-types",listUrl:"templs",searchTypeKey:"templ_type",searchWordKey:"name",pageSize:10,scrollElement:"#myTemplBox",fields:["name"]});f.value=4;const V=async h=>{const s=rr.service({text:o("alert.loading_data")}),u=await R(h.id);i.query.admin?n.replace("/?tempId="+h.id+"&admin=true"):n.replace("/?tempId="+h.id),e.editor.loadJSON(JSON.stringify(u.data.data.attributes.json),s==null?void 0:s.close())},b=be(O,200),Y=ct(),rt=ct(0),q=Ln(function(h){if(I(w))return;const s=Y.value.wrapRef;Y.value.moveY=100*s.scrollTop/s.clientHeight,Y.value.moveX=100*s.scrollLeft/s.clientWidth;let u=s.scrollHeight-s.clientHeight;h.scrollTop+2>=u&&(rt.value=h.scrollTop,k())},300);return Lt(()=>{l(),(async()=>{if(i.query.tempId)try{const h=rr.service({text:o("alert.loading_data")}),s=await R(i.query.tempId);e.editor.loadJSON(JSON.stringify(s.data.data.attributes.json),h==null?void 0:h.close())}catch(h){}})()}),(h,s)=>{const u=Zn,d=jn,r=Be,a=No,c=We,p=Ee,g=Ps,v=j3;return tt(),ot("div",zS,[G("div",VS,[H(d,{class:"select",modelValue:I(f),"onUpdate:modelValue":s[0]||(s[0]=y=>he(f)?f.value=y:null),onChange:I(b),disabled:I(w),placeholder:"\u8BF7\u9009\u62E9"},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(m),y=>(tt(),xt(u,{value:y.value,label:y.label,key:y.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onChange","disabled"]),H(r,{class:"input",placeholder:"\u5728".concat(I(A),"\u4E2D\u641C\u7D22"),modelValue:I(E),"onUpdate:modelValue":s[1]||(s[1]=y=>he(E)?E.value=y:null),search:"",disabled:I(w),onKeyup:cn(I(O),["enter"])},null,8,["placeholder","modelValue","disabled","onKeyup"])]),ee((tt(),ot("div",US,[I(S)?(tt(),xt(g,{ref_key:"scrollbarRef",ref:Y,key:"mysscroll",onScroll:I(q),height:I(Q)},{default:nt(()=>[G("div",HS,[(tt(!0),ot(Mt,null,Ht(I(x),y=>(tt(),xt(c,{content:y.name,key:y.src,placement:"top"},{default:nt(()=>[G("div",GS,[H(a,{src:y.previewSrc,fit:"contain",height:"100%",alt:y.name,onClick:_=>(B=>{Bi({title:o("tip"),message:"".concat(o("replaceTip")),showCancelButton:!0,confirmButtonText:o("ok"),cancelButtonText:o("cancel")}).then(()=>V(B))})(y)},null,8,["src","alt","onClick"])])]),_:2},1032,["content"]))),128))]),I(T)?(tt(),xt(p,{key:0},{default:nt(()=>[kt("\u5DF2\u7ECF\u5230\u5E95\u4E86")]),_:1})):bt("",!0)]),_:1},8,["onScroll","height"])):bt("",!0)])),[[v,I(w)]])])}}},WS=Nt(YS,[["__scopeId","data-v-a8456e68"]]),XS={class:"search-box"},qg=Nt({__name:"SearchType",props:{typeListApi:{type:Function,Object:()=>({})}},emits:["change"],setup(t,{expose:e,emit:n}){const i=t,o=n,l=ct(!1),f=ct(""),A=ct(""),m=ct([]),w=ut(()=>{const O=m.value.find(k=>k.value===f.value);return(O==null?void 0:O.label)||"\u5168\u90E8"});Lt(async()=>{l.value=!0;try{const O=(await i.typeListApi()).data.data.map(k=>({value:k.id,label:k.attributes.name}));m.value=[{label:"\u5168\u90E8",value:""},...O]}catch(O){}l.value=!1});const x=()=>{o("change",{searchKeyWord:A.value,typeValue:f.value})},E=()=>{f.value="",A.value="",x()},T=be(x,300);return e({setType:O=>{f.value=O}}),(O,k)=>{const S=oe,Q=Zn,R=jn,V=Be;return tt(),ot("div",XS,[I(f)||I(A)?(tt(),xt(S,{key:0,text:"",class:"back-btn",onClick:E,icon:I(UB)},null,8,["icon"])):bt("",!0),H(R,{class:"select",modelValue:I(f),"onUpdate:modelValue":k[0]||(k[0]=b=>he(f)?f.value=b:null),disabled:I(l),placeholder:"\u8BF7\u9009\u62E9",onChange:x},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(m),b=>(tt(),xt(Q,{value:b.value,label:b.label,key:b.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"]),H(V,{class:"input",placeholder:"\u5728".concat(I(w),"\u4E2D\u641C\u7D22"),modelValue:I(A),"onUpdate:modelValue":k[1]||(k[1]=b=>he(A)?A.value=b:null),disabled:I(l),clearable:"",onChange:I(T),onSearch:x,search:""},null,8,["placeholder","modelValue","disabled","onChange"])])}}},[["__scopeId","data-v-6dc45053"]]),$S={class:"material-type"},qS={class:"top"},KS={class:"img-box"},JS=["onClick","onDragend"],ZS={__name:"TypeList",props:{typeApi:{type:Function},typeListApi:{type:Function},typeKey:{type:String},formatData:{type:Function}},emits:["click","dragend"],setup(t,{emit:e}){const n=e,i=t,o=ct([]);return Lt(async()=>{await(async()=>{const l=await i.typeApi();o.value=l.data.data.map(f=>({name:f.attributes.name,id:f.id,list:[]}))})(),await(async()=>{let l=0;for(const f of o.value){const A=await i.typeListApi({populate:{img:"*"},filters:{[i.typeKey]:{$eq:f.id}},pagination:{page:1,pageSize:8}});o.value[l].list=i.formatData(A.data.data),l++}})()}),(l,f)=>{const A=oe,m=No;return tt(),ot("div",$S,[(tt(!0),ot(Mt,null,Ht(I(o),w=>(tt(),ot("div",{class:"item",key:w.id},[G("div",qS,[G("h3",null,Et(w.name),1),H(A,{link:"",size:"small",onClick:x=>n("selectType",w.id)},{default:nt(()=>[kt("\u67E5\u770B\u66F4\u591A")]),_:2},1032,["onClick"])]),G("div",KS,[(tt(!0),ot(Mt,null,Ht(w.list,x=>(tt(),ot("div",{class:"img-item",key:x.id,onClick:E=>n("click",{info:x,e:E}),onDragend:E=>n("dragend",{info:x,e:E})},[H(m,{lazy:"",src:x.src,fit:"contain",width:"100%",height:"100%",alt:x.name},null,8,["src","alt"])],40,JS))),128))])]))),128))])}}},Kg=Nt(ZS,[["__scopeId","data-v-bfc18003"]]),tI=["id"],eI={key:0,class:"img-box"},Jg=Nt({__name:"PageList",props:{pageListApi:{type:Function},filters:{type:Object},DOMId:{type:String,default:""},formatData:{type:Function}},emits:["back","click","dragend"],setup(t,{expose:e,emit:n}){const i=n,o=t,{pageData:l,showScroll:f,scrollHeight:A,isDownBottom:m,pageLoading:w,startPage:x,startGetList:E,nextPage:T}=M3({el:"#"+o.DOMId,apiClient:o.pageListApi,filters:o.filters,sort:[],fields:[],formatData:o.formatData}),O=ct(),k=ct(0),S=Ln(function(Q){if(I(w))return;const R=O.value.wrapRef;O.value.moveY=100*R.scrollTop/R.clientHeight,O.value.moveX=100*R.scrollLeft/R.clientWidth;let V=R.scrollHeight-R.clientHeight;Q.scrollTop+2>=V&&(k.value=Q.scrollTop,T())},300);return Lt(async()=>{x()}),e({startGetList:E,startPage:x}),(Q,R)=>{const V=No,b=We,Y=Ee,rt=Ps,q=j3;return ee((tt(),ot("div",{class:"page-list-box",style:{height:"calc(100vh - 100px)"},id:o.DOMId,"element-loading-text":"Loading...","element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[I(f)?(tt(),xt(rt,{ref_key:"scrollbarRef",ref:O,key:o.DOMId,height:I(A),onScroll:I(S)},{default:nt(()=>[I(l).length?(tt(),ot("div",eI,[(tt(!0),ot(Mt,null,Ht(I(l),h=>(tt(),ot("div",{class:"img-item",key:h.id},[H(b,{content:h.name,placement:"top"},{default:nt(()=>[H(V,{lazy:"",src:h.src,fit:"contain",style:{width:"90px",height:"90px"},alt:h.name,onClick:s=>i("click",{info:h,e:s}),onDragend:s=>i("dragend",{info:h,e:s})},null,8,["src","alt","onClick","onDragend"])]),_:2},1032,["content"])]))),128))])):bt("",!0),I(m)?(tt(),xt(Y,{key:1},{default:nt(()=>[kt(Et(I(l).length?"\u5DF2\u7ECF\u5230\u5E95\u4E86":"\u6682\u65E0\u5185\u5BB9"),1)]),_:1})):bt("",!0)]),_:1},8,["height","onScroll"])):bt("",!0)],8,tI)),[[q,I(w)]])}}},[["__scopeId","data-v-3e213793"]]),nI=$u();function Zg(){const t=()=>{var e;return(e=nI.canvas)==null?void 0:e.getSelectionElement().getBoundingClientRect()};return{getCanvasBound:t,isOutsideCanvas:(e,n)=>{const{left:i,right:o,top:l,bottom:f}=t();return e<i||e>o||n<l||n>f}}}const iI={class:"box-border p-10px"},rI={__name:"index",setup(t){const e=jt(),{isOutsideCanvas:n}=Zg(),i=ct(),o=Zt({material_type:{$contains:""},name:{$contains:""}}),l=x=>x.map(E=>({id:E.id,name:E.attributes.name,desc:E.attributes.desc,src:vh(E.attributes.img),previewSrc:Ah(E.attributes.img)})),f=async({searchKeyWord:x,typeValue:E})=>{o.name.$contains="",o.material_type.$contains="",await Qt(),o.name.$contains=x,o.material_type.$contains=E},A=async x=>{o.material_type.$contains=x,i.value.setType(x),await Qt()},m=async({e:x})=>{if(n(x.clientX,x.clientY))return;const E=await e.editor.createImgByElement(x.target);e.editor.addBaseType(E,{scale:!0,event:x})},w=async({e:x})=>{const E=await e.editor.createImgByElement(x.target);e.editor.addBaseType(E,{scale:!0})};return Lt(async()=>{var E;const x=jr();if((E=x==null?void 0:x.query)!=null&&E.loadFile){const T=x.query.loadFile,O=await zi.insertImgFile(T);w({target:O})}}),(x,E)=>(tt(),ot("div",iI,[H(qg,{ref_key:"selectTypeRef",ref:i,typeListApi:I(F3),onChange:f},null,8,["typeListApi"]),ee(H(Kg,{typeApi:I(F3),typeListApi:I(HB),typeKey:"material_type",formatData:l,onSelectType:A,onClick:w,onDragend:m},null,8,["typeApi","typeListApi"]),[[Me,!I(o).material_type.$contains&&!I(o).name.$contains]]),I(o).material_type.$contains||I(o).name.$contains?(tt(),xt(Jg,{key:0,DOMId:"materialList",pageListApi:I(GB),filters:I(o),onClick:w,formatData:l,onDragend:m},null,8,["pageListApi","filters"])):bt("",!0)]))}},oI={class:"box-border p-10px"},aI={__name:"index",setup(t){const e=jt(),{t:n}=ir(),{isOutsideCanvas:i}=Zg(),o=async({e:T,info:O})=>{if(i(T.clientX,T.clientY))return;const k=rr.service({text:n("alert.loading_data")});await e.editor.downFontByJSON(JSON.stringify(O.json));const S=JSON.parse(JSON.stringify(O.json)),Q=f(S.type);new st.fabric[Q].fromObject(S,R=>{e.editor.addBaseType(R,{event:T}),k.close()})},l=async({info:T})=>{const O=rr.service({text:n("alert.loading_data")});await e.editor.downFontByJSON(JSON.stringify(T.json));const k=JSON.parse(JSON.stringify(T.json));k.id=Ie();const S=f(k.type);new st.fabric[S].fromObject(k,Q=>{e.editor.addBaseType(Q),O.close()})};function f(T){return T.charAt(0).toUpperCase()+T.slice(1)}const A=ct(),m=Zt({font_style_type:{$contains:""},name:{$contains:""}}),w=T=>T.map(O=>({id:O.id,name:O.attributes.name,desc:O.attributes.desc,json:O.attributes.json,src:vh(O.attributes.img),previewSrc:Ah(O.attributes.img)})),x=async({searchKeyWord:T,typeValue:O})=>{m.name.$contains="",m.font_style_type.$contains="",await Qt(),m.name.$contains=T,m.font_style_type.$contains=O},E=async T=>{m.font_style_type.$contains=T,A.value.setType(T),await Qt()};return(T,O)=>{var k,S,Q,R;return tt(),ot("div",oI,[H(qg,{ref_key:"selectTypeRef",ref:A,typeListApi:I(R3),onChange:x},null,8,["typeListApi"]),ee(H(Kg,{typeApi:I(R3),typeListApi:I(YB),typeKey:"font_style_type",formatData:w,onSelectType:E,onClick:l,onDragend:o},null,8,["typeApi","typeListApi"]),[[Me,!((k=I(m))!=null&&k.font_style_type.$contains)&&!((S=I(m))!=null&&S.name.$contains)]]),(Q=I(m))!=null&&Q.font_style_type.$contains||(R=I(m))!=null&&R.name.$contains?(tt(),xt(Jg,{key:0,DOMId:"fontMaterialList",pageListApi:I(WB),filters:I(m),formatData:w,onClick:l,onDragend:o},null,8,["pageListApi","filters"])):bt("",!0)])}}},sI={class:"flex justify-start max-w-384px basis-72px"},lI={class:"relative bg-#fff z-1 w-72px flex flex-col items-center pt-10px box-border border-r-#eef2f8 border-r-solid border-r-1px"},cI=["onClick"],uI=[(t=>(je("data-v-3fd73b33"),t=t(),Fe(),t))(()=>G("img",{src:"data:image/svg+xml,%3csvg%20width='15'%20height='92'%20viewBox='0%200%2015%2092'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2092L2%200H3C3%203.77087%204.42026%207.40332%206.97794%2010.1742L10.4917%2013.9807C13.3904%2017.121%2015%2021.2378%2015%2025.5115V66.626C15%2071.0146%2013.3028%2075.2332%2010.2636%2078.399L7.1792%2081.6119C4.4975%2084.4054%203%2088.1277%203%2092H2Z'%20fill='white'/%3e%3cpath%20d='M2%2092H3C3%2088.1277%204.4975%2084.4054%207.17919%2081.612L10.2636%2078.3991C13.3028%2075.2332%2015%2071.0147%2015%2066.6261V25.5115C15%2021.2379%2013.3904%2017.121%2010.4917%2013.9807L6.97795%2010.1742C4.42026%207.40337%203%203.77085%203%200H2C2%201.91731%202.34422%203.80108%203%205.56777C3.71995%207.50734%204.81541%209.30577%206.24314%2010.8525L9.75686%2014.659C12.4851%2017.6146%2014%2021.4892%2014%2025.5115V66.6261C14%2070.7565%2012.4027%2074.7269%209.5422%2077.7066L6.4578%2080.9195C4.92573%2082.5154%203.75601%2084.3955%203%2086.4322C2.34449%2088.1982%202%2090.0818%202%2092Z'%20fill='black'%20fill-opacity='0.08'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.44061%2041.6074L9.05932%2042.2261L5.28535%2046.0001L9.05932%2049.7741L8.44061%2050.3928L4.04791%2046.0001L8.44061%2041.6074Z'%20fill='%234C535C'/%3e%3c/svg%3e"},null,-1))],hI=wt({__name:"index",setup(t){const e=jt(),{panelType:n,showPanel:i,tabType:o,panelPositoin:l}=Sh(e),f={[Re.create]:mS,[Re.template]:WS,[Re.element]:PS,[Re.ai]:KE,[Re.text]:aI,[Re.material]:rI,[Re.mine]:IE,[Re.none]:""},A=be(function(){e.setShowPanel(!1),m.value=Re.none},250),m=ct(Re.template),w=be(function(x,E){m.value=x,!I(i)&&e.setShowPanel(!0),I(l)==="bottom"&&e.setPanelPositoin("left"),I(n)!==oi.menu&&(n.value=E),e.setTabType(x)},250);return Dt(()=>o.value,x=>{I(m)!==x&&(m.value=x)}),(x,E)=>{const T=or;return tt(),ot("section",sI,[G("ul",lI,[(tt(!0),ot(Mt,null,Ht(I(eE),O=>(tt(),ot("li",{class:"flex flex-col items-center mb-20px cursor-pointer",key:O.type,onClick:k=>I(w)(O.type,I(oi).menu)},[G("div",{class:dt(["px-10px f-center py-4px rounded-10px tab-item editor-item",[I(m)===O.type?"tab-item_active":""]])},[H(T,{extClass:"text-20px",icon:O.icon,color:I(m)===O.type?"#000":"#333"},null,8,["icon","color"])],2),G("span",{class:dt(["text-12px",[I(m)===O.type?"font-bold":""]])},Et(O.name),3)],8,cI))),128))]),I(l)==="left"?(tt(),ot("div",{key:0,class:dt(["relative h-full transition-all transition-ease left-style-panel",[I(i)?"":"-ml-312px",I(n)===I(oi).menu?"w-312px":"w-224px"]])},[I(i)&&I(n)===I(oi).menu?(tt(),ot(Mt,{key:0},[(tt(),xt(tm,null,[(tt(),xt(Xe(f[I(m)])))],1024)),G("div",{class:"inline-block absolute -right-13px top-50% -translate-y-50% z-1 cursor-pointer",onClick:E[0]||(E[0]=(...O)=>I(A)&&I(A)(...O))},uI)],64)):(tt(),xt(I($E),{key:1}))],2)):bt("",!0)])}}}),dI=Nt(hI,[["__scopeId","data-v-3fd73b33"]]),fI={class:"absolute right-10px bottom-10px"},pI=G("svg",{t:"1650853919128",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1271",width:"14",height:"14"},[G("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z","p-id":"1272"}),G("path",{d:"M652.672 431.829333h-147.84V292.010667a35.968 35.968 0 1 0-71.978667 0v139.818666H292.010667a35.968 35.968 0 1 0 0 72.021334h140.8v140.8a35.968 35.968 0 1 0 72.021333 0v-140.8h147.84a35.968 35.968 0 1 0 0-72.021334z","p-id":"1273"})],-1),gI=G("svg",{t:"1650853934351",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1470",width:"14",height:"14"},[G("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z","p-id":"1471"}),G("path",{d:"M652.672 431.829333H292.010667a35.968 35.968 0 1 0 0 72.021334h360.661333a35.968 35.968 0 1 0 0-72.021334z","p-id":"1472"})],-1),vI=wt({__name:"Zoom",setup(t){const e=jt(),n=ct(!1),i=m=>{m?e.editor.startDring():e.editor.endDring()},o=()=>{e.editor.one()},l=()=>{e.editor.big()},f=()=>{e.editor.small()},A=()=>{e.editor.auto()};return Lt(()=>{Qt(()=>{var m,w;(m=e.editor)==null||m.on("startDring",()=>n.value=!0),(w=e.editor)==null||w.on("endDring",()=>n.value=!1)})}),Qe(()=>{var m,w;(m=e.editor)==null||m.off("startDring"),(w=e.editor)==null||w.off("endDring")}),(m,w)=>{const x=zo,E=oe,T=or,O=mh;return tt(),ot("div",fI,[H(x,{modelValue:I(n),"onUpdate:modelValue":w[0]||(w[0]=k=>he(n)?n.value=k:null),size:"large",class:"mr-10px","inline-prompt":"","active-text":"\u62D6\u66F3","inactive-text":"\u62D6\u66F3",onChange:i},null,8,["modelValue"]),H(O,null,{default:nt(()=>[H(E,{onClick:l},{default:nt(()=>[pI]),_:1}),H(E,{onClick:f},{default:nt(()=>[gI]),_:1}),H(E,{onClick:o,icon:I(S3)},null,8,["icon"]),H(E,{onClick:A},{default:nt(()=>[H(T,{extClass:"text-20px",color:"var(--color)",icon:"editor-suoxiao"})]),_:1})]),_:1})])}}}),AI={class:"box"},mI={__name:"DragMode",setup(t){const e=jt(),n=ct(!1),i=o=>{var l,f;o?(l=e.editor)==null||l.startDring():(f=e.editor)==null||f.endDring()};return Lt(()=>{Qt(()=>{var o,l;(o=e.editor)==null||o.on("startDring",()=>n.value=!0),(l=e.editor)==null||l.on("endDring",()=>n.value=!1)})}),Qe(()=>{var o,l;(o=e.editor)==null||o.off("startDring"),(l=e.editor)==null||l.off("endDring")}),(o,l)=>{const f=zo;return tt(),ot("div",AI,[H(f,{size:"large",modelValue:I(n),"onUpdate:modelValue":l[0]||(l[0]=A=>he(n)?n.value=A:null),onChange:i,width:"60","inline-prompt":"","active-text":"Drag","inactive-text":"Drag"},null,8,["modelValue"])])}}},t1=t=>(je("data-v-53e577b4"),t=t(),Fe(),t),yI={class:"w-full absolute left-0 right-0 bottom-0"},bI={class:"main-bottom relative bottom-0"},CI={class:"flex justify-between items-start"},wI={class:"flex justify-start items-center"},xI=t1(()=>G("div",{class:"text-14px h-24px leading-24px"},[G("span",{class:"mr-4px"},"\u753B\u677F"),G("span",null,"1/1")],-1)),_I={class:"flex justify-end items-center"},EI={key:0,class:"main-panel mt-8px bg-#fff box-border rounded-12px"},SI=[t1(()=>G("div",{class:"pb-1px mx-6px"}," 1 ",-1))],II=wt({__name:"index",setup(t){const e=jt(),{panelPositoin:n,showPanel:i,panelType:o}=Sh(e),l=be(function(m){I(o)===m?(e.setShowPanel(!I(i)),I(n)==="bottom"&&e.setPanelPositoin("left")):(e.setPanelType(m),e.setShowPanel(!0))},250),f=be(function(){e.setShowPanel(!I(i))},250),A=be(function(){e.setPanelPositoin(I(n)==="left"?"bottom":"left"),!I(i)&&e.setShowPanel(!0)},250);return(m,w)=>{const x=or,E=Ee,T=mI,O=vI;return tt(),ot("div",yI,[G("div",bI,[G("div",CI,[G("div",wI,[G("div",{class:"f-center p-5px rounded-6px cursor-pointer bg-#fff",onClick:w[0]||(w[0]=Jt(k=>I(l)(I(oi).layer),["stop"]))},[H(x,{icon:"editor-layer",extClass:"text-20px"})]),G("div",{class:"ml-4px f-center p-4px rounded-6px cursor-pointer bg-#fff panel-canvas",onClick:w[3]||(w[3]=k=>I(l)(I(oi).canvas))},[xI,G("div",{class:dt(["ml-4px",[I(n)==="bottom"?"rotate-270":""]]),onClick:w[1]||(w[1]=Jt((...k)=>I(f)&&I(f)(...k),["stop"]))},[H(x,{icon:"unfold",extClass:"text-16px"})],2),G("div",{class:"hidden panel-position items-center",onClick:w[2]||(w[2]=Jt((...k)=>I(A)&&I(A)(...k),["stop"]))},[H(E,{direction:"vertical"}),H(x,{class:dt([I(n)==="bottom"?"rotate-270":""]),icon:"panel-position",extClass:"text-16px"},null,8,["class"])])])]),G("div",_I,[H(T),H(O)])]),I(n)==="bottom"&&I(i)?(tt(),ot("div",EI,SI)):bt("",!0)])])}}}),kI=Nt(II,[["__scopeId","data-v-53e577b4"]]),BI={class:"flex-1 w-full relative overflow-hidden",id:"workspace"},OI={class:"relative"},TI=(t=>(je("data-v-06a4c87a"),t=t(),Fe(),t))(()=>G("div",{class:"absolute w-full z-2 inside-shadow"},null,-1)),DI=wt({__name:"index",setup(t){const e=jt(),n=ut(()=>e.rulerEnable);return(i,o)=>(tt(),ot("section",BI,[G("div",OI,[TI,G("canvas",{class:dt(["w-300px h-300px mx-auto",I(n)?"design-stage-grid":""]),id:"canvas"},null,2),H(kI)])]))}}),MI=Nt(DI,[["__scopeId","data-v-06a4c87a"]]),QI={key:0,class:"mb-10px attr-item-box"},LI=G("h4",null,"\u6570\u636E",-1),PI=wt({__name:"AttributeId",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=Zt({id:0,linkData:["",""]}),l=m=>{var x;const w=(x=n.canvas)==null?void 0:x.getActiveObject();m&&m.target&&m.target!==w||w&&(o.id=w.get("id"),o.linkData=w.get("linkData")||["",""])},f=(m,w)=>{var E,T;const x=(E=n.canvas)==null?void 0:E.getActiveObjects()[0];x&&(x&&x.set(m,w),(T=n.canvas)==null||T.renderAll())},A=()=>{var m;(m=i==null?void 0:i.proxy)==null||m.$forceUpdate()};return Lt(()=>{Qt(()=>{var m,w,x;l(),(m=n.editor)==null||m.on("selectCancel",A),(w=n.editor)==null||w.on("selectOne",l),(x=n.canvas)==null||x.on("object:modified",l)})}),Qe(()=>{var m,w,x;(m=n.editor)==null||m.off("selectCancel",A),(w=n.editor)==null||w.off("selectOne",l),(x=n.canvas)==null||x.off("object:modified",l)}),(m,w)=>{const x=Ee,E=Be,T=js,O=Fs,k=Zn,S=jn,Q=hr,R=ur;return I(e).mSelectMode==="one"?(tt(),ot("div",QI,[H(x,{"content-position":"left"},{default:nt(()=>[LI]),_:1}),H(O,{"label-width":40,class:"form-wrap"},{default:nt(()=>[H(T,{label:m.$t("editor.attributes.id")},{default:nt(()=>[H(E,{modelValue:I(o).id,"onUpdate:modelValue":w[0]||(w[0]=V=>I(o).id=V),onChange:w[1]||(w[1]=V=>f("id",I(o).id)),size:"small"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),H(R,{gutter:10},{default:nt(()=>[H(Q,{span:12},{default:nt(()=>[H(S,{modelValue:I(o).linkData[0],"onUpdate:modelValue":w[2]||(w[2]=V=>I(o).linkData[0]=V),filterable:"","allow-create":"",onChange:w[3]||(w[3]=V=>f("linkData",I(o).linkData))},{default:nt(()=>[H(k,{value:"src"}),H(k,{value:"text"})]),_:1},8,["modelValue"])]),_:1}),H(Q,{span:12},{default:nt(()=>[H(E,{modelValue:I(o).linkData[1],"onUpdate:modelValue":w[4]||(w[4]=V=>I(o).linkData[1]=V),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1})])):bt("",!0)}}});function Ku(t,e){return e===void 0&&(e=15),+parseFloat(Number(t).toPrecision(e))}function ai(t){var e=t.toString().split(/[eE]/),n=(e[0].split(".")[1]||"").length-+(e[1]||0);return n>0?n:0}function ca(t){if(t.toString().indexOf("e")===-1)return Number(t.toString().replace(".",""));var e=ai(t);return e>0?Ku(Number(t)*Math.pow(10,e)):Number(t)}function Ju(t){n1&&(t>Number.MAX_SAFE_INTEGER||Number.MIN_SAFE_INTEGER)}function ks(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0];return e.slice(1).reduce(function(o,l){return t(o,l)},i)}}var Gi=ks(function(t,e){var n=ca(t),i=ca(e),o=ai(t)+ai(e),l=n*i;return Ju(l),l/Math.pow(10,o)}),jI=ks(function(t,e){var n=Math.pow(10,Math.max(ai(t),ai(e)));return(Gi(t,n)+Gi(e,n))/n}),FI=ks(function(t,e){var n=Math.pow(10,Math.max(ai(t),ai(e)));return(Gi(t,n)-Gi(e,n))/n}),e1=ks(function(t,e){var n=ca(t),i=ca(e);return Ju(n),Ju(i),Gi(n/i,Ku(Math.pow(10,ai(e)-ai(t))))}),n1=!0,Bs={strip:Ku,plus:jI,minus:FI,times:Gi,divide:e1,round:function(t,e){var n=Math.pow(10,e),i=e1(Math.round(Math.abs(Gi(t,n))),n);return t<0&&i!==0&&(i=Gi(i,-1)),i},digitLength:ai,float2Fixed:ca,enableBoundaryChecking:function(t){t===void 0&&(t=!0),n1=t}};const RI=["aria-valuemax","aria-valuemin","aria-valuenow","value","disabled","autofocus","readonly","placeholder"],pn="asa-input-number",NI=wt({__name:"InputNumber",props:{autofocus:{type:Boolean},parser:{},formatter:{},min:{default:-1/0},max:{default:1/0},precision:{default:2},step:{default:1},modelValue:{},defaultValue:{},modelEvent:{default:"change"},controlsOutside:{type:Boolean},hideButton:{type:Boolean},downDisabled:{type:Boolean},upDisabled:{type:Boolean},size:{default:"default"},disabled:{type:Boolean},readonly:{type:Boolean},placeholder:{},append:{},prepend:{}},emits:["update:modelValue","on-change","on-focus","on-blur","on-input"],setup(t,{expose:e,emit:n}){var L;Bs.enableBoundaryChecking(!1);const i=t,o=n,l=ct("".concat(pn,"-input-wrap")),f=ct("".concat(pn,"-input")),A=ct("".concat(pn,"-handler-wrap")),m=ct(["".concat(pn,"-handler"),"".concat(pn,"-handler-up"),{["".concat(pn,"-handler-up-disabled")]:i.upDisabled}]),w=ct(["".concat(pn,"-handler"),"".concat(pn,"-handler-down"),{["".concat(pn,"-handler-down-disabled")]:i.downDisabled}]),x=ct(!1),E=ut(()=>["".concat(pn),{["".concat(pn,"-").concat(i.size)]:!!i.size,["".concat(pn,"-disabled")]:i.disabled,["".concat(pn,"-focused")]:x.value,["".concat(pn,"-controls-outside")]:i.controlsOutside}]),T=ct(),O=ut(()=>{if(ze(i.precision)){const C="".concat(i.step).split(".")[1],D=C&&C.length||0;return Math.max(D,i.precision)}}),k=C=>{var F,j;if(!ze(C))return"";const D=O.value?C.toFixed(O.value).replace(/\.?0+$/,""):String(C);return(j=(F=i.formatter)==null?void 0:F.call(i,D))!=null?j:D},S=ct(k((L=i.modelValue)!=null?L:i.defaultValue)),Q=C=>{x.value=!0,o("on-focus",C)},R=C=>{x.value=!1,o("on-blur",C)},V=C=>{u(C,"minus",!0)},b=C=>{u(C,"plus",!0)},Y=C=>{C.key==="ArrowUp"?(C.preventDefault(),!i.readonly&&rt("plus",C)):C.key==="ArrowDown"&&(C.preventDefault(),!i.readonly&&rt("minus",C))},rt=(C,D)=>{if(C==="plus"&&(a.value||i.upDisabled)||C==="minus"&&(r.value||i.downDisabled))return;let F;F=ze(d.value)?g(Bs[C](d.value,i.step)):i.min===-1/0?0:i.min,S.value=k(F),c(F),o("update:modelValue",F),o("on-change",F,D)};let q=0;const h=()=>{q&&(window.clearTimeout(q),q=0)},s={onMouseup:h,onMouseleave:h},u=(C,D,F=!1)=>{var j;C.preventDefault(),(j=T.value)==null||j.focus(),rt(D,C),F&&(q=window.setTimeout(()=>C.target.dispatchEvent(C),150))},d=ut(()=>{var D,F;if(!S.value)return;const C=Number((F=(D=i.parser)==null?void 0:D.call(i,S.value))!=null?F:S.value);return Number.isNaN(C)?void 0:C}),r=ct(ze(d.value)&&d.value<=i.min),a=ct(ze(d.value)&&d.value>=i.max),c=C=>{let D=!1,F=!1;ze(C)&&(C<=i.min&&(D=!0),C>=i.max&&(F=!0)),a.value!==F&&(a.value=F),r.value!==D&&(r.value=D)},p=C=>{var F,j,U,W;let{value:D}=C.target;D=D.trim().replace(//g,"."),D=(j=(F=i.parser)==null?void 0:F.call(i,D))!=null?j:D,(ze(Number(D))||/^(\.|-)$/.test(D))&&(S.value=(W=(U=i.formatter)==null?void 0:U.call(i,D))!=null?W:D,c(d.value),i.modelEvent==="input"&&o("update:modelValue",d.value),o("on-input",d.value,S.value,C))},g=C=>{if(!w3(C))return ze(i.min)&&C<i.min&&(C=i.min),ze(i.max)&&C>i.max&&(C=i.max),ze(O.value)?Bs.round(C,O.value):C},v=C=>{const D=g(d.value),F=k(D);D===d.value&&S.value===F||(S.value=F,c(D)),Qt(()=>{ze(i.modelValue)&&i.modelValue!==D&&(S.value=k(i.modelValue),c(i.modelValue))}),o("update:modelValue",D),o("on-change",D,C)},y=()=>{const C=g(d.value),D=k(C);C===d.value&&S.value===D||(S.value=D),o("update:modelValue",C)},_=ct(),B=ct(),N=C=>{const D=ct(),{posStart:F,posEnd:j}=q6(C,{threshold:0,onSwipeStart:()=>{D.value=d.value},onSwipe:U=>{if(!ze(D.value))return;const W=D.value+Bs.round(j.x-F.x,0)*i.step;S.value=k(W),i.modelEvent==="input"?p(U):v(U)}})};return Lt(()=>{_.value&&N(_),B.value&&N(B)}),Dt(()=>i.modelValue,C=>{C!==d.value&&(S.value=k(C),c(C))}),Dt(()=>i.min,C=>{const D=ze(d.value)&&d.value<=C;r.value!==D&&(r.value=D),ze(d.value)&&d.value<C&&y()}),Dt(()=>i.max,C=>{const D=ze(d.value)&&d.value>=C;a.value!==D&&(a.value=D),ze(d.value)&&d.value>C&&y()}),e({minus:V,plus:b,input:T.value,focus:()=>{var C;(C=T.value)==null||C.focus()},blur:()=>{var C;(C=T.value)==null||C.blur()}}),(C,D)=>{const F=ne;return tt(),ot("div",{class:dt(I(E))},[C.controlsOutside?(tt(),ot(Mt,{key:0},[G("div",ar({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":C.downDisabled}],onMousedown:V},s),null,16),G("div",ar({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":C.upDisabled}],onMousedown:b},s)," 2 ",16)],64)):C.hideButton?bt("",!0):(tt(),ot("div",{key:1,class:dt(I(A))},[G("a",ar({class:I(m),onMousedown:b},s),[G("span",null,[H(F,{size:"12px",color:"#999"},{default:nt(()=>[H(I(I3))]),_:1})])],16),G("a",ar({class:I(w),onMousedown:V},s),[G("span",null,[H(F,{size:"12px",color:"#999"},{default:nt(()=>[H(I(Sr))]),_:1})])],16)],2)),G("div",{class:dt(I(l))},[C.$slots.prefix?Rt(C.$slots,"prefix",{key:0},void 0,!0):C.append?(tt(),ot("label",{key:1,ref_key:"appendLabelRef",ref:_,class:dt("".concat(I(l),"__label"))},Et(C.append),3)):bt("",!0),G("input",{ref_key:"inputRef",ref:T,type:"text",autocomplete:"off",spellcheck:"false",role:"spinbutton","aria-valuemax":C.max,"aria-valuemin":C.min,"aria-valuenow":I(S),value:I(S),class:dt(I(f)),disabled:C.disabled,autofocus:C.autofocus,readonly:C.readonly,placeholder:C.placeholder,onFocus:Q,onBlur:R,onInput:p,onChange:v,onKeydown:Y},null,42,RI),C.$slots.suffix?Rt(C.$slots,"suffix",{key:2},void 0,!0):C.prepend?(tt(),ot("label",{key:3,ref_key:"prependLabelRef",ref:B,class:dt("".concat(I(l),"__label"))},Et(C.prepend),3)):bt("",!0)],2)],2)}}}),gn=Nt(NI,[["__scopeId","data-v-d655ccac"]]),zI={key:0,class:"box attr-item-box"},VI=G("h4",null,"\u5706\u89D2",-1),UI=wt({__name:"AttributeRounded",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=["rect"],l=Zt({rx:0,ry:0}),f=w=>{var E;const x=(E=n.canvas)==null?void 0:E.getActiveObject();w&&w.target&&w.target!==x||x&&(l.rx=x.get("rx"),l.ry=x.get("ry"))},A=w=>{const x=n.canvas.getActiveObjects()[0];x&&(x.set("ry",w),x.set("rx",w),n.canvas.renderAll())},m=()=>{var w;(w=i==null?void 0:i.proxy)==null||w.$forceUpdate()};return Lt(()=>{Qt(()=>{var w,x,E;f(),(w=n.editor)==null||w.on("selectCancel",m),(x=n.editor)==null||x.on("selectOne",f),(E=n.canvas)==null||E.on("object:modified",f)})}),Qe(()=>{var w,x,E;(w=n.editor)==null||w.off("selectCancel",m),(x=n.editor)==null||x.off("selectOne",f),(E=n.canvas)==null||E.off("object:modified",f)}),(w,x)=>{const E=Ee,T=Ha,O=js,k=Fs,S=hr,Q=ur;return I(e).mSelectMode==="one"&&o.includes(I(e).mSelectOneType)?(tt(),ot("div",zI,[H(E,{"content-position":"left"},{default:nt(()=>[VI]),_:1}),G("div",null,[H(Q,{gutter:10},{default:nt(()=>[H(S,{span:18,flex:"1"},{default:nt(()=>[H(k,{"label-width":40,class:"form-wrap"},{default:nt(()=>[H(O,{label:w.$t("attributes.rx_ry")},{default:nt(()=>[H(T,{modelValue:I(l).rx,"onUpdate:modelValue":x[0]||(x[0]=R=>I(l).rx=R),max:300,onInput:x[1]||(x[1]=R=>A(R))},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),H(S,{span:6,flex:"1"},{default:nt(()=>[H(I(gn),{modelValue:I(l).rx,"onUpdate:modelValue":x[2]||(x[2]=R=>I(l).rx=R),min:0,max:300,onOnChange:x[3]||(x[3]=R=>A(R))},null,8,["modelValue"])]),_:1})]),_:1})])])):bt("",!0)}}}),HI={key:0,class:"attr-item-box"},GI=(t=>(je("data-v-50d59a3b"),t=t(),Fe(),t))(()=>G("h4",null,"\u8FB9\u6846",-1)),YI={class:"asa-number-warp"},WI={class:"label",style:{"margin-right":"10px"}},XI={style:{flex:"1"}},$I={class:"asa-number-warp"},qI={style:{flex:"0 0 48px","font-size":"var(--el-form-label-font-size)",color:"var(--el-text-color-regular)"}},KI={class:"content"},JI=wt({__name:"AttributeBorder",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=["group"],l=Zt({stroke:"#fff",strokeWidth:0,strokeDashArray:[]}),f=[{value:{strokeUniform:!0,strokeDashArray:[],strokeLineCap:"butt"},label:"Stroke"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"butt"},label:"Dash-1"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"round"},label:"Dash-2"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"square"},label:"Dash-3"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"round"},label:"Dash-4"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"square"},label:"Dash-5"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"round"},label:"Dash-6"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"square"},label:"Dash-7"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"round"},label:"Dash-8"}],A=ut(()=>o.includes(e.mSelectOneType)),m=T=>{var k;const O=(k=n.canvas)==null?void 0:k.getActiveObject();if((!T||!T.target||T.target===O)&&O&&!o.includes(O.type)){l.stroke=O.get("stroke"),l.strokeWidth=O.get("strokeWidth");const S=JSON.stringify(O.get("strokeDashArray")||[]),Q=f.find(R=>JSON.stringify(R.value.strokeDashArray)===S&&O.get("strokeLineCap")===R.value.strokeLineCap);Q&&(l.strokeDashArray=Q.label)}},w=(T,O)=>{var S,Q;const k=(S=n.canvas)==null?void 0:S.getActiveObjects()[0];k&&(k.set(T,O),k.set("strokeUniform",!0),(Q=n.canvas)==null||Q.renderAll())},x=T=>{var k,S;const O=(k=n.canvas)==null?void 0:k.getActiveObjects()[0];if(O){const Q=f.find(R=>R.label===T);O.set(Q.value),(S=n.canvas)==null||S.renderAll()}},E=()=>{var T;(T=i==null?void 0:i.proxy)==null||T.$forceUpdate()};return Lt(()=>{Qt(()=>{var T,O,k;m(),(T=n.editor)==null||T.on("selectCancel",E),(O=n.editor)==null||O.on("selectOne",m),(k=n.canvas)==null||k.on("object:modified",m)})}),Qe(()=>{var T,O,k;(T=n.editor)==null||T.off("selectCancel",E),(O=n.editor)==null||O.off("selectOne",m),(k=n.canvas)==null||k.off("object:modified",m)}),(T,O)=>{const k=Ee,S=Ai,Q=hr,R=ur,V=Zn,b=jn;return I(e).mSelectMode!=="one"||I(A)?bt("",!0):(tt(),ot("div",HI,[H(k,{"content-position":"left"},{default:nt(()=>[GI]),_:1}),G("div",null,[H(R,{gutter:12,style:{"margin-right":"10px"}},{default:nt(()=>[H(Q,{span:12},{default:nt(()=>[G("div",YI,[G("span",WI,Et(T.$t("editor.color")),1),G("div",XI,[H(S,{modelValue:I(l).stroke,"onUpdate:modelValue":O[0]||(O[0]=Y=>I(l).stroke=Y),onChange:O[1]||(O[1]=Y=>w("stroke",Y)),"show-alpha":""},null,8,["modelValue"])])])]),_:1}),H(Q,{span:12},{default:nt(()=>[H(I(gn),{modelValue:I(l).strokeWidth,"onUpdate:modelValue":O[2]||(O[2]=Y=>I(l).strokeWidth=Y),onOnChange:O[3]||(O[3]=Y=>w("strokeWidth",Y)),append:T.$t("editor.width"),min:0},null,8,["modelValue","append"])]),_:1})]),_:1}),G("div",$I,[G("span",qI,Et(T.$t("editor.attributes.stroke")),1),G("div",KI,[H(b,{modelValue:I(l).strokeDashArray,"onUpdate:modelValue":O[4]||(O[4]=Y=>I(l).strokeDashArray=Y),onChange:x},{default:nt(()=>[(tt(),ot(Mt,null,Ht(f,Y=>H(V,{value:Y.label,label:Y.label,key:"stroke-".concat(Y.label)},{default:nt(()=>[kt(Et(Y.label),1)]),_:2},1032,["value","label"])),64))]),_:1},8,["modelValue"])])])])]))}}}),ZI=Nt(JI,[["__scopeId","data-v-50d59a3b"]]),t7={key:0,class:"box attr-item-box"},e7=(t=>(je("data-v-3671ab69"),t=t(),Fe(),t))(()=>G("h4",null,"\u9634\u5F71",-1)),n7={class:"f-center rounded-4px",style:{background:"#f8f8f9"}},i7={class:"label"},r7={class:"content"},o7=wt({__name:"AttributeShadow",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=Zt({shadow:{}}),l=m=>{var x;const w=(x=n.canvas)==null?void 0:x.getActiveObject();m&&m.target&&m.target!==w||w&&(o.shadow=w.get("shadow")||{})},f=()=>{var w,x;const m=(w=n.canvas)==null?void 0:w.getActiveObjects()[0];m&&(m.set("shadow",new st.fabric.Shadow(o.shadow)),(x=n.canvas)==null||x.renderAll())},A=()=>{var m;(m=i==null?void 0:i.proxy)==null||m.$forceUpdate()};return Lt(()=>{Qt(()=>{var m,w,x;l(),(m=n.editor)==null||m.on("selectCancel",A),(w=n.editor)==null||w.on("selectOne",l),(x=n.canvas)==null||x.on("object:modified",l)})}),Qe(()=>{var m,w,x;(m=n.editor)==null||m.off("selectCancel",A),(w=n.editor)==null||w.off("selectOne",l),(x=n.canvas)==null||x.off("object:modified",l)}),(m,w)=>{const x=Ee,E=Ai,T=hr,O=ur;return I(e).mSelectMode==="one"?(tt(),ot("div",t7,[H(x,{"content-position":"left"},{default:nt(()=>[e7]),_:1}),H(O,{gutter:12,style:{"margin-bottom":"10px"}},{default:nt(()=>[H(T,{span:12},{default:nt(()=>[G("div",n7,[G("span",i7,Et(m.$t("editor.color")),1),G("div",r7,[H(E,{modelValue:I(o).shadow.color,"onUpdate:modelValue":w[0]||(w[0]=k=>I(o).shadow.color=k),onChange:f,alpha:""},null,8,["modelValue"])])])]),_:1}),H(T,{span:12},{default:nt(()=>[H(I(gn),{modelValue:I(o).shadow.blur,"onUpdate:modelValue":w[1]||(w[1]=k=>I(o).shadow.blur=k),defaultValue:0,onOnChange:f,append:m.$t("editor.attributes.blur"),min:0},null,8,["modelValue","append"])]),_:1})]),_:1}),H(O,{gutter:12},{default:nt(()=>[H(T,{span:12},{default:nt(()=>[H(I(gn),{modelValue:I(o).shadow.offsetX,"onUpdate:modelValue":w[2]||(w[2]=k=>I(o).shadow.offsetX=k),defaultValue:0,onOnChange:f,append:m.$t("editor.attributes.offset_x")},null,8,["modelValue","append"])]),_:1}),H(T,{span:12},{default:nt(()=>[H(I(gn),{modelValue:I(o).shadow.offsetY,"onUpdate:modelValue":w[3]||(w[3]=k=>I(o).shadow.offsetY=k),defaultValue:0,onOnChange:f,append:m.$t("editor.attributes.offset_y")},null,8,["modelValue","append"])]),_:1})]),_:1})])):bt("",!0)}}}),a7=Nt(o7,[["__scopeId","data-v-3671ab69"]]),s7={key:0,class:"box attr-item-box"},l7=(t=>(je("data-v-642912a3"),t=t(),Fe(),t))(()=>G("h4",null,"\u4F4D\u7F6E\u4FE1\u606F",-1)),c7={class:"asa-number-warp"},u7={class:"asa-number-warp"},h7=wt({__name:"AttributePostion",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=["text","i-text","textbox","rect","circle","triangle","polygon","image","group","line","arrow","thinTailArrow"],l=Zt({opacity:0,angle:0,left:0,top:0,rx:0,ry:0}),f=w=>{var E,T;const x=(E=n.canvas)==null?void 0:E.getActiveObject();w&&w.target&&w.target!==x||x&&o.includes(x.type)&&(l.opacity=100*((T=x.get("opacity"))!=null?T:0),l.left=x.get("left"),l.top=x.get("top"),l.angle=x.get("angle")||0)},A=(w,x)=>{var T,O,k,S;const E=(T=n.canvas)==null?void 0:T.getActiveObjects()[0];if(E){if(w==="opacity")return E&&E.set(w,x/100),void((O=n.canvas)==null?void 0:O.renderAll());if(w==="angle")return E.rotate(x),void((k=n.canvas)==null?void 0:k.renderAll());E&&E.set(w,x),(S=n.canvas)==null||S.renderAll()}},m=()=>{var w;(w=i==null?void 0:i.proxy)==null||w.$forceUpdate()};return Lt(()=>{Qt(()=>{var w,x,E;f(),(w=n.editor)==null||w.on("selectCancel",m),(x=n.editor)==null||x.on("selectOne",f),(E=n.canvas)==null||E.on("object:modified",f)})}),Qe(()=>{var w,x,E;(w=n.editor)==null||w.off("selectCancel",m),(x=n.editor)==null||x.off("selectOne",f),(E=n.canvas)==null||E.off("object:modified",f)}),(w,x)=>{const E=Ee,T=hr,O=ur,k=Ha;return I(e).mSelectMode==="one"?(tt(),ot("div",s7,[H(E,{"content-position":"left"},{default:nt(()=>[l7]),_:1}),ee(G("div",null,[H(O,{gutter:10,style:{"margin-bottom":"10px"}},{default:nt(()=>[H(T,{span:12},{default:nt(()=>[H(I(gn),{modelValue:I(l).left,"onUpdate:modelValue":x[0]||(x[0]=S=>I(l).left=S),append:w.$t("editor.attributes.left"),onOnChange:x[1]||(x[1]=S=>A("left",S))},null,8,["modelValue","append"])]),_:1}),H(T,{span:12},{default:nt(()=>[H(I(gn),{modelValue:I(l).left,"onUpdate:modelValue":x[2]||(x[2]=S=>I(l).left=S),append:w.$t("editor.attributes.top"),onOnChange:x[3]||(x[3]=S=>A("top",S))},null,8,["modelValue","append"])]),_:1})]),_:1}),G("div",c7,[G("span",null,Et(w.$t("editor.attributes.angle")),1),H(k,{modelValue:I(l).angle,"onUpdate:modelValue":x[4]||(x[4]=S=>I(l).angle=S),max:360,onInput:x[5]||(x[5]=S=>A("angle",S))},null,8,["modelValue"])]),G("div",u7,[G("span",null,Et(w.$t("editor.attributes.opacity")),1),H(k,{modelValue:I(l).opacity,"onUpdate:modelValue":x[6]||(x[6]=S=>I(l).opacity=S),onInput:x[7]||(x[7]=S=>A("opacity",S))},null,8,["modelValue"])])],512),[[Me,o.includes(I(e).mSelectOneType)]])])):bt("",!0)}}}),d7=Nt(h7,[["__scopeId","data-v-642912a3"]]),i1=t=>(je("data-v-cd4ba0d0"),t=t(),Fe(),t),f7={key:0,class:"box attr-item-box"},p7=i1(()=>G("h4",null,"\u6587\u672C\u5185\u5BB9",-1)),g7=i1(()=>G("h4",null,"\u6587\u672C\u8DEF\u5F84",-1)),v7={class:"ivu-col__box"},A7={class:"label"},m7={class:"content"},y7=wt({__name:"AttributeTextContent",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=Zt({text:"",strokeWidth:1,stroke:"",showPathAttr:!1}),l=m=>{var x;const w=(x=n.canvas)==null?void 0:x.getActiveObject();if((!m||!m.target||m.target===w)&&w){o.text=w.get("text");const E=w.get("path");E?(o.strokeWidth=E.strokeWidth,o.stroke=E.stroke,o.showPathAttr=!0):o.showPathAttr=!1}},f=(m,w)=>{var E,T;const x=(E=n.canvas)==null?void 0:E.getActiveObjects()[0];x&&(o[m]=w,m==="text"?x.set(m,w):x.get("path").set(m,w),(T=n.canvas)==null||T.renderAll())},A=()=>{var m;(m=i==null?void 0:i.proxy)==null||m.$forceUpdate()};return Lt(()=>{Qt(()=>{var m,w,x;(m=n.editor)==null||m.on("selectCancel",A),(w=n.editor)==null||w.on("selectOne",l),(x=n.canvas)==null||x.on("object:modified",l)})}),Qe(()=>{var m,w,x;(m=n.editor)==null||m.off("selectCancel",A),(w=n.editor)==null||w.off("selectOne",l),(x=n.canvas)==null||x.off("object:modified",l)}),(m,w)=>{var R,V;const x=Ee,E=Be,T=js,O=Fs,k=Ai,S=hr,Q=ur;return((R=I(e))==null?void 0:R.mSelectMode)==="one"&&((V=I(e))==null?void 0:V.mSelectOneType)==="i-text"?(tt(),ot("div",f7,[H(x,{"content-position":"left"},{default:nt(()=>[p7]),_:1}),H(O,{"label-width":40,class:"form-wrap"},{default:nt(()=>[H(T,{label:m.$t("editor.attributes.id")},{default:nt(()=>[H(E,{modelValue:I(o).text,"onUpdate:modelValue":w[0]||(w[0]=b=>I(o).text=b),onChange:w[1]||(w[1]=b=>f("text",I(o).text)),size:"small"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),I(o).showPathAttr?(tt(),ot(Mt,{key:0},[H(x,{"content-position":"left"},{default:nt(()=>[g7]),_:1}),G("div",null,[H(Q,{gutter:12},{default:nt(()=>[H(S,{flex:"1"},{default:nt(()=>[G("div",v7,[G("span",A7,Et(m.$t("editor.color")),1),G("div",m7,[H(k,{modelValue:I(o).stroke,"onUpdate:modelValue":w[2]||(w[2]=b=>I(o).stroke=b),onChange:w[3]||(w[3]=b=>f("stroke",b)),"show-alpha":""},null,8,["modelValue"])])])]),_:1}),H(S,{flex:"1"},{default:nt(()=>[H(I(gn),{modelValue:I(o).strokeWidth,"onUpdate:modelValue":w[4]||(w[4]=b=>I(o).strokeWidth=b),onOnChange:w[5]||(w[5]=b=>f("strokeWidth",b)),append:m.$t("editor.width"),min:0},null,8,["modelValue","append"])]),_:1})]),_:1})])],64)):bt("",!0)])):bt("",!0)}}}),b7=Nt(y7,[["__scopeId","data-v-cd4ba0d0"]]),C7={key:0,class:"attr-item-box"},w7={class:"flex-view"},x7={class:"flex-item"},_7={class:"label"},E7={class:"content"},S7=wt({__name:"AttributeTextFloat",setup(t){const e=Ft("mixinState"),n=jt(),i=Zt({verticalAlign:"null"}),o=["i-text","textbox","text"],l=ut(()=>o.includes(e.mSelectOneType)),f=w=>{var E;const x=(E=n.canvas)==null?void 0:E.getActiveObject();w&&w.target&&w.target!==x||x&&o.includes(x.type)&&x.text.includes(".")&&(i.verticalAlign=x.get("verticalAlign"))},A=ue(),m=()=>{var w;(w=A==null?void 0:A.proxy)==null||w.$forceUpdate()};return Lt(()=>{Qt(()=>{var w,x,E;f(),(w=n.editor)==null||w.on("selectCancel",m),(x=n.editor)==null||x.on("selectOne",f),(E=n.canvas)==null||E.on("object:modified",f)})}),Qe(()=>{var w,x,E;(w=n.editor)==null||w.off("selectCancel",m),(x=n.editor)==null||x.off("selectOne",f),(E=n.canvas)==null||E.off("object:modified",f)}),(w,x)=>{const E=Zn,T=jn;return I(e).mSelectMode==="one"&&I(l)?(tt(),ot("div",C7,[G("div",w7,[G("div",x7,[G("span",_7,Et(w.$t("editor.textFloat")),1),G("div",E7,[H(T,{modelValue:I(i).verticalAlign,"onUpdate:modelValue":x[0]||(x[0]=O=>I(i).verticalAlign=O),onChange:x[1]||(x[1]=O=>((k,S)=>{var R,V;const Q=(R=n.canvas)==null?void 0:R.getActiveObjects()[0];if(Q&&Q.text.includes(".")){const[b]=Q.text.split("."),Y=b.length+1,rt=Q.text.length;Q.styles=[],S==="top"?Q.setSuperscript(Y,rt):S==="bottom"&&Q.setSelectionStyles({fontSize:Q.superscript.size*Q.fontSize},Y,rt),Q.set(k,S),(V=n.canvas)==null||V.renderAll()}})("verticalAlign",O))},{default:nt(()=>[H(E,{label:"\u65E0",value:"null"}),H(E,{label:"\u4E0B\u6807",value:"bottom"}),H(E,{label:"\u4E0A\u6807",value:"top"})]),_:1},8,["modelValue"])])])])])):bt("",!0)}}}),I7=Nt(S7,[["__scopeId","data-v-89f72f6a"]]),k7={key:0,class:"box attr-item-box"},B7=(t=>(je("data-v-471231df"),t=t(),Fe(),t))(()=>G("h4",null,"\u5B57\u4F53\u5C5E\u6027",-1)),O7={class:"flex-view"},T7={class:"flex-item"},D7={class:"left font-selector"},M7={style:{display:"none"}},Q7={class:"right"},L7={class:"flex-view",style:{"margin-bottom":"0"}},P7={class:"flex-item"},j7=["innerHTML"],F7={class:"flex-view"},R7={class:"flex-item"},N7={viewBox:"0 0 1024 1024",width:"14",height:"14"},z7=["fill"],V7={viewBox:"0 0 1024 1024",width:"14",height:"14"},U7=["fill"],H7={viewBox:"0 0 1024 1024",width:"14",height:"14"},G7=["fill"],Y7={viewBox:"0 0 1024 1024",width:"14",height:"14"},W7=["fill"],X7={class:"flex-view"},$7={class:"right"},q7={class:"right"},K7={class:"flex-view"},J7={class:"flex-item"},Z7={class:"label"},tk={class:"content"},ek=wt({__name:"AttributeFont",setup(t){var O;const e=Ft("mixinState"),n=jt(),i=ue(),o=["i-text","textbox","text"],l=Zt({fontSize:0,fontFamily:"",lineHeight:0,charSpacing:0,fontWeight:"",textBackgroundColor:"#fff",textAlign:"",fontStyle:"",underline:!1,linethrough:!1,overline:!1}),f=ct([]);(O=n.editor)==null||O.getFontList().then(k=>{f.value=k});const A=["left","center","right","justify"],m=['<svg t="1650441458823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3554" width="18" height="18"><path d="M198.4 198.4h341.333333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666667h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-569.6c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666666h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533334z m0 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3555"></path></svg>','<svg t="1650441512015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3704" width="18" height="18"><path d="M313.6 198.4h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533333z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m115.2 170.666666h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533334z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3705"></path></svg>','<svg t="1650441519862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="18" height="18"><path d="M454.4 283.733333v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h341.333334c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333334c-8.533333 0-14.933333-2.133333-19.2-8.533334-4.266667-4.266667-8.533333-10.666667-8.533333-19.2z m-226.133333 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333H256c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533333-19.2z m113.066666 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533334-19.2 6.4-6.4 12.8-8.533333 19.2-8.533334h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533334-19.2z m-170.666666 170.666666v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-4.266667-8.533333-10.666667-8.533333-19.2z" p-id="3855"></path></svg>','<svg width="18.000000" height="18.000000" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="path" d="M3.48 3.48L14.48 3.48C14.63 3.48 14.75 3.52 14.82 3.63C14.93 3.75 14.97 3.86 14.97 3.97L14.97 4.98C14.97 5.13 14.93 5.25 14.82 5.32C14.71 5.43 14.6 5.47 14.48 5.47L3.48 5.47C3.33 5.47 3.22 5.43 3.15 5.32C3.03 5.21 3 5.1 3 4.98L3 3.97C3 3.82 3.03 3.71 3.15 3.63C3.22 3.56 3.37 3.48 3.48 3.48ZM3.48 6.48L14.5 6.48C14.65 6.48 14.76 6.52 14.83 6.63C14.95 6.75 14.98 6.86 14.98 6.97L14.98 7.98C14.98 8.13 14.95 8.25 14.83 8.32C14.72 8.43 14.61 8.47 14.5 8.47L3.48 8.47C3.33 8.47 3.22 8.43 3.15 8.32C3.03 8.21 3 8.1 3 7.98L3 6.97C3 6.82 3.03 6.71 3.15 6.63C3.22 6.56 3.37 6.48 3.48 6.48ZM3.48 9.48L14.47 9.48C14.62 9.48 14.73 9.52 14.81 9.63C14.92 9.75 14.96 9.86 14.96 9.97L14.96 10.98C14.96 11.13 14.92 11.25 14.81 11.32C14.7 11.43 14.58 11.47 14.47 11.47L3.48 11.47C3.33 11.47 3.22 11.43 3.15 11.32C3.03 11.21 3 11.1 3 10.98L3 9.97C3 9.82 3.03 9.71 3.15 9.63C3.22 9.56 3.37 9.48 3.48 9.48ZM3.48 12.48L14.47 12.48C14.62 12.48 14.73 12.52 14.81 12.63C14.92 12.75 14.96 12.86 14.96 12.97L14.96 13.98C14.96 14.13 14.92 14.25 14.81 14.32C14.7 14.43 14.58 14.47 14.47 14.47L3.48 14.47C3.33 14.47 3.22 14.43 3.15 14.32C3.03 14.21 3 14.1 3 13.98L3 12.97C3 12.82 3.03 12.71 3.15 12.63C3.22 12.56 3.37 12.48 3.48 12.48Z" fill-rule="nonzero"/></svg>'],w=k=>{var Q;const S=(Q=n.canvas)==null?void 0:Q.getActiveObject();k&&k.target&&k.target!==S||S&&o.includes(S.type)&&(l.fontSize=S.get("fontSize"),l.fontFamily=S.get("fontFamily"),l.lineHeight=S.get("lineHeight"),l.textAlign=S.get("textAlign"),l.underline=S.get("underline"),l.linethrough=S.get("linethrough"),l.charSpacing=S.get("charSpacing"),l.overline=S.get("overline"),l.fontStyle=S.get("fontStyle"),l.textBackgroundColor=S.get("textBackgroundColor"),l.fontWeight=S.get("fontWeight"))},x=(k,S)=>{var R,V;const Q=(R=n.canvas)==null?void 0:R.getActiveObjects()[0];Q&&(Q&&Q.set(k,S),(V=n.canvas)==null||V.renderAll())},E=()=>{var k;(k=i==null?void 0:i.proxy)==null||k.$forceUpdate()},T=async k=>{if(!k)return;const S=rr.service();n.editor.loadFont(k).finally(()=>S.close())};return Lt(()=>{Qt(()=>{var k,S,Q;w(),(k=n.editor)==null||k.on("selectCancel",E),(S=n.editor)==null||S.on("selectOne",w),(Q=n.canvas)==null||Q.on("object:modified",w)})}),Qe(()=>{var k,S,Q;(k=n.editor)==null||k.off("selectCancel",E),(S=n.editor)==null||S.off("selectOne",w),(Q=n.canvas)==null||Q.off("object:modified",w)}),(k,S)=>{const Q=Ee,R=Zn,V=jn,b=up,Y=Rl,rt=oe,q=mh,h=Ai;return I(e).mSelectMode==="one"&&o.includes(I(e).mSelectOneType)?(tt(),ot("div",k7,[H(Q,{"content-position":"left"},{default:nt(()=>[B7]),_:1}),G("div",null,[G("div",O7,[G("div",T7,[G("div",D7,[H(V,{modelValue:I(l).fontFamily,"onUpdate:modelValue":S[0]||(S[0]=s=>I(l).fontFamily=s),onChange:T},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(f),s=>(tt(),xt(R,{value:s.name,label:s.name,key:"font-".concat(s.name)},{default:nt(()=>[G("div",{class:"font-item",style:qt("background-image:url('".concat(s.img,"');height: 100%;background-size: 100% 100%;"))},[kt(Et(s.img?"":s)+" ",1),G("span",M7,Et(s.name),1)],4)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),G("div",Q7,[H(I(gn),{modelValue:I(l).fontSize,"onUpdate:modelValue":S[1]||(S[1]=s=>I(l).fontSize=s),onOnChange:S[2]||(S[2]=s=>x("fontSize",s)),append:"\u5B57\u53F7",min:1},null,8,["modelValue"])])])]),G("div",L7,[G("div",P7,[H(Y,{class:"button-group",modelValue:I(l).textAlign,"onUpdate:modelValue":S[3]||(S[3]=s=>I(l).textAlign=s),onChange:S[4]||(S[4]=s=>x("textAlign",s)),type:"button"},{default:nt(()=>[(tt(),ot(Mt,null,Ht(A,(s,u)=>H(b,{label:s,value:s,key:s},{default:nt(()=>[G("span",{innerHTML:m[u]},null,8,j7)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])])]),G("div",F7,[G("div",R7,[H(q,{class:"button-group"},{default:nt(()=>[H(rt,{style:{width:"25%"},onClick:S[5]||(S[5]=s=>((u,d)=>{var c,p;const r=d==="normal"?"bold":"normal";l.fontWeight=r;const a=(c=n.canvas)==null?void 0:c.getActiveObjects()[0];a&&a.set(u,r),(p=n.canvas)==null||p.renderAll()})("fontWeight",I(l).fontWeight))},{default:nt(()=>[(tt(),ot("svg",N7,[G("path",{d:"M793.99865 476a244 244 0 0 0 54-130.42C862.75865 192.98 743.01865 64 593.85865 64H195.01865a32 32 0 0 0-32 32v96a32 32 0 0 0 32 32h63.74v576H195.01865a32 32 0 0 0-32 32v96a32 32 0 0 0 32 32h418.64c141.6 0 268.28-103.5 282-244.8 9.48-96.9-32.78-184.12-101.66-239.2zM418.33865 224h175.52a96 96 0 0 1 0 192h-175.52z m175.52 576h-175.52V576h175.52a112 112 0 0 1 0 224z",fill:I(l).fontWeight==="bold"?"#305ef4":"#666"},null,8,z7)]))]),_:1}),H(rt,{style:{width:"25%"},onClick:S[6]||(S[6]=s=>((u,d)=>{var c,p;const r=d==="normal"?"italic":"normal";l.fontStyle=r;const a=(c=n.canvas)==null?void 0:c.getActiveObjects()[0];a&&a.set(u,r),(p=n.canvas)==null||p.renderAll()})("fontStyle",I(l).fontStyle))},{default:nt(()=>[(tt(),ot("svg",V7,[G("path",{d:"M832 96v64a32 32 0 0 1-32 32h-125.52l-160 640H608a32 32 0 0 1 32 32v64a32 32 0 0 1-32 32H224a32 32 0 0 1-32-32v-64a32 32 0 0 1 32-32h125.52l160-640H416a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32h384a32 32 0 0 1 32 32z",fill:I(l).fontStyle==="italic"?"#305ef4":"#666"},null,8,U7)]))]),_:1}),H(rt,{style:{width:"25%"},onClick:S[7]||(S[7]=s=>((u,d)=>{var c,p;const r=d===!1;l.linethrough=r;const a=(c=n.canvas)==null?void 0:c.getActiveObjects()[0];a&&a.set(u,r),(p=n.canvas)==null||p.renderAll()})("linethrough",I(l).linethrough))},{default:nt(()=>[(tt(),ot("svg",H7,[G("path",{d:"M893.088 501.792H125.344a32 32 0 0 0 0 64h767.744a32 32 0 0 0 0-64zM448 448h112V208h288V96H160v112h288zM448 640h112v288H448z",fill:I(l).linethrough?"#305ef4":"#666"},null,8,G7)]))]),_:1}),H(rt,{style:{width:"25%"},onClick:S[8]||(S[8]=s=>((u,d)=>{var c,p;const r=d===!1;l.underline=r;const a=(c=n.canvas)==null?void 0:c.getActiveObjects()[0];a&&a.set(u,r),(p=n.canvas)==null||p.renderAll()})("underline",I(l).underline))},{default:nt(()=>[(tt(),ot("svg",Y7,[G("path",{d:"M703.232 67.008h127.488v413.248c0 158.016-142.656 286.016-318.72 286.016-176 0-318.72-128-318.72-286.016V67.008h127.488v413.248c0 39.872 18.176 78.144 51.136 107.776 36.8 32.96 86.528 51.072 140.096 51.072s103.36-18.112 140.032-51.136c33.024-29.632 51.2-67.968 51.2-107.776V67.008zM193.28 871.616h637.44v85.376H193.28v-85.376z",fill:I(l).underline?"#305ef4":"#666"},null,8,W7)]))]),_:1})]),_:1})])]),G("div",X7,[G("div",$7,[H(I(gn),{modelValue:I(l).lineHeight,"onUpdate:modelValue":S[9]||(S[9]=s=>I(l).lineHeight=s),onOnChange:S[10]||(S[10]=s=>x("lineHeight",s)),step:.1,append:k.$t("editor.attributes.line_height")},null,8,["modelValue","append"])]),G("div",q7,[H(I(gn),{modelValue:I(l).charSpacing,"onUpdate:modelValue":S[11]||(S[11]=s=>I(l).charSpacing=s),onOnChange:S[12]||(S[12]=s=>x("charSpacing",s)),append:k.$t("editor.attributes.char_spacing")},null,8,["modelValue","append"])])]),G("div",K7,[G("div",J7,[G("span",Z7,Et(k.$t("editor.background")),1),G("div",tk,[H(h,{modelValue:I(l).textBackgroundColor,"onUpdate:modelValue":S[13]||(S[13]=s=>I(l).textBackgroundColor=s),onChange:S[14]||(S[14]=s=>x("textBackgroundColor",s)),"show-alpha":""},null,8,["modelValue"])])])])])])):bt("",!0)}}}),nk=Nt(ek,[["__scopeId","data-v-471231df"]]),r1=(t,{decimal:e=0}={})=>e>0?Number(t.toFixed(e)):Math.round(t),Os=(t,{onmousedown:e,onmousemove:n,onmouseup:i}={})=>{let o=t.getBoundingClientRect();const l={x:0,y:0},f=x=>{let E=x.pageX-o.x,T=x.pageY-o.y;E<0&&(E=0),E>o.width&&(E=o.width),T<0&&(T=0),T>o.height&&(T=o.height),l.x=r1(E/o.width,{decimal:2}),l.y=r1(T/o.height,{decimal:2})},A=x=>{f(x),n&&n(l,x)},m=x=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",m),i&&i(l,x)},w=x=>{o=t.getBoundingClientRect(),f(x),document.addEventListener("mousemove",A),document.addEventListener("mouseup",m),e&&e(l,x)};return t.addEventListener("mousedown",w),{destroy(){t.removeEventListener("mousedown",w)}}},o1=(t,e,n)=>{let i=Math.round(t).toString(16),o=Math.round(e).toString(16),l=Math.round(n).toString(16);return i.length===1&&(i="0"+i),o.length===1&&(o="0"+o),l.length===1&&(l="0"+l),"#"+i+o+l},a1=(t,e,n,i=1)=>{const o=o1(t,e,n);let l=Math.round(255*i).toString(16);return l.length===1&&(l="0"+l),o+l},s1=(t,e,n)=>{t/=255,e/=255,n/=255;const i=Math.min(t,e,n),o=Math.max(t,e,n),l=o-i;let f=0,A=0;if(l===0)f=A=0;else{A=l/o;const m=((o-t)/6+l/2)/l,w=((o-e)/6+l/2)/l,x=((o-n)/6+l/2)/l;t===o?f=x-w:e===o?f=1/3+m-x:n===o&&(f=2/3+w-m),f<0?f+=1:f>1&&(f-=1)}return[360*f,100*A,100*o]},ik=(t,e,n)=>{const[i,o,l]=function(f,A,m){f=f/360*6,A/=100,m/=100;const w=Math.floor(f),x=f-w,E=m*(1-A),T=m*(1-x*A),O=m*(1-(1-x)*A),k=w%6,S=[m,T,E,E,O,m][k],Q=[O,m,m,T,E,E][k],R=[E,E,O,m,m,T][k];return[Math.round(255*S),Math.round(255*Q),Math.round(255*R)]}(t,e,n);return o1(i,o,l)},Zu=t=>{let e=0,n=0,i=0;return(t=t.slice(0,7)).length==4?(e=+("0x"+t[1]+t[1]),n=+("0x"+t[2]+t[2]),i=+("0x"+t[3]+t[3])):t.length==7&&(e=+("0x"+t[1]+t[2]),n=+("0x"+t[3]+t[4]),i=+("0x"+t[5]+t[6])),[e,n,i]},th=t=>{const e=Zu(t),n=+("0x"+t[7]+t[8]);return[...e,Number((n/255).toFixed(2))]},rk=t=>{const[e,n,i,o]=th(t);return((l,f,A,m=1)=>[...s1(l,f,A),m])(e,n,i,o)},l1=t=>t.startsWith("#")?"\u7EAF\u8272":t.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",eh=(t,e)=>{const n=[];return e.forEach(i=>{n.push("".concat(i.color," ").concat(100*i.offset,"%"))}),"linear-gradient(".concat(t,"deg, ").concat(n.join(","),")")};function ok(t){const e=function(n,i=!0){const o=document.createElement("div");return o.id="color-pipette-tooltip-container",o.innerHTML=n,o.style="\n    position: fixed;\n    left: 50%;\n    top: 9%;\n    z-index: 10002;\n    display: ".concat(i?"flex":"none",";\n    align-items: center;\n    background-color: rgba(0,0,0,0.4);\n    padding: 6px 12px;\n    border-radius: 4px;\n    color: #fff;\n    font-size: 18px;\n    pointer-events: none;\n  "),o}(t);document.body.appendChild(e),setTimeout(()=>{var n;return(n=e==null?void 0:e.parentNode)==null?void 0:n.removeChild(e)},2e3)}const ak={class:"my-tabs"},sk={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},lk={class:"my-tabs__header-shell relative flex justify-between"},ck=["onClick"],uk={class:"my-tabs__content"},hk={name:"Tabs"},dk=Object.assign(hk,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup(t,{expose:e,emit:n}){const i=t,o=n;Dt(()=>i.value,()=>{w()});const l=ct([]),f=Zt({width:0,left:0});let A=0;Lt(()=>{A=100/l.value.length,f.width="".concat(A,"%"),w()});let m=null;async function w(x=-1){var E,T,O,k;x<0&&(x=l.value.findIndex(S=>S.props.label===i.value)),f.left=A*x+"%";try{await Qt(),(T=(E=m==null?void 0:m.exposed)==null?void 0:E.changeActive)==null||T.call(E,!1),m=l.value[x],(k=(O=m.exposed)==null?void 0:O.changeActive)==null||k.call(O,!0)}catch(S){}}return e({tabs:l}),(x,E)=>(tt(),ot("div",ak,[G("div",sk,[G("div",lk,[(tt(!0),ot(Mt,null,Ht(l.value,(T,O)=>(tt(),ot("div",{key:T.props.label,class:dt(["my-tab__title relative flex-auto py-1 text-center",{"my-active":T.props.label===t.value}]),onClick:k=>function(S,Q){o("update:value",S.props.label),w(Q)}(T,O)},Et(T.props.label),11,ck))),128)),G("div",{class:"my-tab__slider",style:qt(f)},null,4)])]),G("div",uk,[Rt(x.$slots,"default",{},void 0,!0)])]))}}),fk=Nt(dk,[["__scopeId","data-v-fd81b187"]]),pk={},gk={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},vk=[G("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),G("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1)],Ak=Nt(pk,[["render",function(t,e){return tt(),ot("svg",gk,vk)}]]),mk={name:"TabPanel"},yk=Object.assign(mk,{props:{label:{type:String,required:!0}},setup(t,{expose:e}){const n=ue();n.parent.exposed.tabs.value.push(n);const i=ct(!1),o=ut(()=>({display:i.value?"block":"none"}));return e({changeActive:function(l){i.value=l}}),(l,f)=>(tt(),ot("div",{class:"tab-panel",style:qt(o.value)},[Rt(l.$slots,"default")],4))}}),bk=wt({props:["modelValue"],emits:["change","update:modelValue"],setup(t,{emit:e}){const n=ct(90),i=ct(null),o=ut(()=>n.value-90);let l=!1;const f=ct(!1);return Dt(()=>n.value,A=>{t.modelValue!==n.value&&e("update:modelValue",A),e("change")}),Dt(()=>t.modelValue,A=>{n.value=A}),{inputChange:A=>{e("change",A)},num:n,turn:A=>{if(!l)return;const m=27,w=27,x=A.offsetX-m,E=A.offsetY-w,T=180*Math.atan2(E,x)/Math.PI;n.value=Math.round(T+90)},touch:(A,m)=>{A.preventDefault(),l=m},angleInDegrees:o,numInput:i,visiable:f}}}),Ck={class:"angle-input-box"},wk=Nt(bk,[["render",function(t,e,n,i,o,l){return tt(),ot("div",Ck,[ee(G("input",{ref:"numInput","onUpdate:modelValue":e[0]||(e[0]=f=>t.num=f),class:"angle-input",onFocus:e[1]||(e[1]=f=>t.visiable=!0),onBlur:e[2]||(e[2]=f=>t.visiable=!1),onInput:e[3]||(e[3]=(...f)=>t.inputChange&&t.inputChange(...f))},null,544),[[X3,t.num]]),ee(G("div",{class:"AngleHandle",onMousedown:e[6]||(e[6]=f=>t.touch(f,!0)),onMouseup:e[7]||(e[7]=f=>t.touch(f,!1))},[G("div",{class:"angle",onMouseup:e[4]||(e[4]=(...f)=>t.turn&&t.turn(...f)),onMousemove:e[5]||(e[5]=(...f)=>t.turn&&t.turn(...f))},[G("div",{style:qt("transform: rotate(".concat(t.angleInDegrees,"deg)")),class:"line"},null,4)],32)],544),[[Me,t.visiable]])])}]]),c1=t=>(je("data-v-59acd03c"),t=t(),Fe(),t),xk={class:"color-picker"},_k={key:1,class:"title"},Ek={key:2,class:"cp__gradient flex-center"},Sk={class:"cp__gradient-bar"},Ik=["data-sort","onMousedown"],kk=c1(()=>G("div",{class:"cpp__color-saturation"},null,-1)),Bk=c1(()=>G("div",{class:"cpp__color-value"},null,-1)),Ok={class:"cps__track"},Tk={class:"cps__track"},Dk={class:"cp__box"},Mk=["value"],Qk=["value"],Lk=["onClick"],Pk={name:"ColorPicker",inheritAttrs:!1},jk=Object.assign(Pk,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","change","native-pick","blur"],setup(t,{expose:e,emit:n}){const i=t,o=n,l=ct(l1(i.value)),f=ct(90),A=ct([]),m=Zt({h:0,s:0,l:0,a:0}),w=ct("#f00"),x=ct("#000"),E=ct(0);let T=ct({});const O="EyeDropper"in window,k=ct(),S=ct(),Q=ct(),R=ct(),V=ct(),b=ct(),Y=ct();let rt=null,q=null,h=null,s=null,u=null,d=!0,r=null;const a=ct([]),c={color:i.defaultColor,gradient:i.defaultGradient,image:i.defaultImage},p=ut(()=>i.modes.includes("\u6E10\u53D8")),g=ut(()=>{const M=Zu(x.value).join(",");return{background:"linear-gradient(to right, rgba(".concat(M,", 0) 0%, rgb(").concat(M,") 100%)")}});Dt(T,M=>{D(M.color)}),Dt(x,M=>{(function(P){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(P)){const z=Zu(P),[X,et,J]=s1(...z);m.h=X,m.s=et,m.l=J;try{Q.value.style.left="".concat(m.s,"%"),Q.value.style.top=100-m.l+"%",R.value.style.left=m.h/360*100+"%",x.value=P}catch(Z){}}})(M)}),Dt(()=>i.value,M=>{const P=l1(M);P!==l.value&&(l.value=P),L(P),_(M),v(M)});const v=be(async M=>{const P=a.value,z=P.indexOf(M);z!==-1&&a.value.splice(z,1),P.length>=4&&a.value.splice(P.length-1,1);const X=[M];a.value=X.concat(P)},300),y=Dt(m,function(M){const P=((X,et,J,Z=1)=>"".concat(ik(X,et,J)).concat(Z===0?"00":Math.round(255*Z).toString(16)))(...Object.values(M));let z;l.value==="\u7EAF\u8272"?z=P:l.value==="\u6E10\u53D8"&&(T.value.color=P,z=eh(f.value,A.value)),C(P),B(z)},{deep:!0});function _(M){l.value==="\u7EAF\u8272"?c.color=M:l.value==="\u6E10\u53D8"?c.gradient=M:l.value==="\u56FE\u6848"&&(c.image=M)}function B(M){_(M),o("update:value",M),o("change",{mode:l.value,color:M,angle:Number(f.value),stops:A.value})}async function N(M){if(M===l.value)return;let P;l.value=M,M==="\u7EAF\u8272"?P=c.color:M==="\u6E10\u53D8"?P=c.gradient:M==="\u56FE\u6848"&&(P=c.image),B(P)}function L(M){M==="\u7EAF\u8272"?D(i.value):M==="\u6E10\u53D8"&&(A.value.length===0?i.value.match(/[^,]+/g).forEach((P,z)=>{if(z===0)return void(f.value=Number(P.match(/\d+/)[0]));let[X,et]=P.trim().split(" ");X.startsWith("#")||(X=a1(X)),et=et.match(/\d+/)[0]/100,A.value.push({color:X,offset:et}),T.value=A.value[0]}):D(T.value.color))}function C(M){var P;w.value="hsl(".concat(m.h,", 100%, 50%)"),x.value=M.slice(0,7),x.value,E.value=Math.round(100*((P=m.a)!=null?P:1))}function D(M){if(d){const P=rk(M);m.h=P[0],m.s=P[1],m.l=P[2],m.a=P[3],C(M);try{let z=m.s;const X=Math.round(100-m.l);Q.value.style.left="".concat(z,"%"),Q.value.style.top="".concat(X,"%"),z=m.h/360,R.value.style.left=100*z+"%",b.value.style.left=100*m.a+"%"}catch(z){}}}function F(M){if(M.stopPropagation(),M.preventDefault(),!["Backspace","Delete"].includes(M.key)||A.value.length===2)return;const P=A.value.indexOf(T.value);A.value.splice(P,1),T.value=A.value[0]}function j(){d=!1,r&&clearTimeout(r),r=setTimeout(()=>{d=!0},16)}async function U(M){let P="";if(M&&M.target.value){const z=M.target.value;P=z+(z.length===7?"ff":"")}else{const z=new window.EyeDropper;ok("\u6309Esc\u53EF\u9000\u51FA");try{P=(await z.open()).sRGBHex+"ff"}catch(X){}}l.value==="\u6E10\u53D8"?(T.value.color=P,T.value={...T.value}):o("update:value",P),o("native-pick",P)}Lt(async function(){Q.value.style.left="".concat(m.s,"%"),Q.value.style.top=100-m.l+"%",R.value.style.left=m.h/360*100+"%",b.value.style.left=100*m.a+"%",p.value&&(rt=Os(k.value,{onmousedown:function(X){if(u)return;const et=A.value.findIndex(ft=>ft.offset>=X.x),J=A.value[et-1],Z=th(J.color),it=A.value[et],at=th(it.color),lt=[];for(let ft=0;ft<3;ft+=1)lt.push(Z[ft]+(at[ft]-Z[ft])*X.x);const ht=it.offset-X.x-(X.x-J.offset)>0?Z[3]:at[3],Ct=a1(...lt,ht);T.value={color:Ct,offset:X.x},A.value.splice(et,0,T.value)},onmousemove:function(X){u&&(T.value.offset=X.x,A.value.sort((et,J)=>et.offset-J.offset),B(eh(f.value,A.value)))},onmouseup:function(){u=!1}}));function M(X){j();try{const et=100*X.x,J=100*X.y;m.s=Math.round(et),m.l=Math.round(100-J),Q.value.style.left="".concat(et,"%"),Q.value.style.top="".concat(J,"%")}catch(et){}}function P(X){j(),m.h=360*X.x,R.value.style.left=100*X.x+"%"}function z(X){j(),m.a=X.x,b.value.style.left=100*X.x+"%"}q=Os(S.value,{onmousemove:M,onmouseup:M}),h=Os(V.value,{onmousemove:P,onmouseup:P}),s=Os(Y.value,{onmousemove:z,onmouseup:z}),L(l.value),_(i.value)}),Qe(()=>{q==null||q.destroy(),h==null||h.destroy(),s==null||s.destroy(),y(),rt&&rt.destroy()});const W=M=>{const P=function(z){let X=z.replace(/\s/g,"");return z.startsWith("#")||(X="#"+X),X.length<9&&(X=X.padEnd(9,"f")),X}(M.target.value);o("blur",P),o("update:value",P)};function $(){B(eh(f.value,A.value))}return e({updateValue:B}),(M,P)=>(tt(),ot("div",xk,[t.modes.length>1?(tt(),xt(fk,{key:0,type:"border-card",value:I(l),"onUpdate:value":N},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(t.modes,z=>(tt(),xt(yk,{key:z,label:z},null,8,["label"]))),128))]),_:1},8,["value"])):(tt(),ot("div",_k,Et(I(l)),1)),I(p)?ee((tt(),ot("div",Ek,[G("div",Sk,[G("div",{ref_key:"elGradientTrack",ref:k,class:"cpgb__track",style:qt([{width:"100%"},{background:t.value}])},[(tt(!0),ot(Mt,null,Ht(I(A),(z,X)=>(tt(),ot("div",{key:X,class:dt(["cpgb__pointer",{"cpgb__pointer--active":z===I(T)}]),"data-sort":X,style:qt({left:100*z.offset+"%",background:z.color}),tabindex:"-1",onMousedown:et=>{return J=z,u=!0,void(T.value=J);var J},onKeydown:Jt(F,["stop"])},null,46,Ik))),128))],4)]),H(wk,{modelValue:I(f),"onUpdate:modelValue":P[0]||(P[0]=z=>he(f)?f.value=z:null),onChange:$},null,8,["modelValue"])],512)),[[Me,I(l)==="\u6E10\u53D8"]]):bt("",!0),G("div",{ref_key:"elPalette",ref:S,class:"cp__palette",style:qt({background:I(w)})},[kk,Bk,G("div",{ref_key:"elPalettePointer",ref:Q,class:"cpp__pointer"},null,512)],4),G("div",{ref_key:"elSliderHux",ref:V,class:"cp__slider cp__slider-hux"},[G("div",Ok,[G("div",{ref_key:"elSliderHuxPointer",ref:R,class:"cpst__pointer"},null,512)])],512),G("div",{ref_key:"elSliderAlpha",ref:Y,class:"cp__slider cp__slider-alpha"},[G("div",{class:"cpsa__background",style:qt(I(g))},null,4),G("div",Tk,[G("div",{ref_key:"elSliderAlphaPointer",ref:b,class:"cpst__pointer"},null,512)])],512),G("div",Dk,[G("div",{class:"item",onClick:U},[O?(tt(),xt(Ak,{key:0})):(tt(),ot("input",{key:1,class:"native",type:"color",onInput:U},null,32))]),I(l)==="\u6E10\u53D8"?(tt(),ot("input",{key:0,class:"input",value:I(T).color},null,8,Mk)):(tt(),ot("input",{key:1,value:t.value,class:"input",onBlur:W},null,40,Qk)),I(l)==="\u7EAF\u8272"?(tt(!0),ot(Mt,{key:2},Ht(I(a),z=>(tt(),ot("div",{key:z,class:"item item-color",style:qt({background:z}),onClick:X=>U({target:{value:z}})},null,12,Lk))),128)):bt("",!0)])]))}}),Fk=Nt(jk,[["__scopeId","data-v-59acd03c"]]),Rk={key:0,class:"box attr-item-box"},Nk=(t=>(je("data-v-8bdd557d"),t=t(),Fe(),t))(()=>G("h4",null,"\u989C\u8272",-1)),zk={class:"bg-item"},Vk={style:{width:"100%","box-sizing":"border-box",padding:"10px"}},u1="gradientAngle",Uk=wt({__name:"AttributeColor",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=Zt({fill:""}),l=E=>{var O;const T=(O=n.canvas)==null?void 0:O.getActiveObject();if((!E||!E.target||E.target===T)&&T&&e.mSelectMode==="one"){const k=T.get("fill");o.fill=typeof k=="string"?k:m(k,T)}},f=E=>{var O,k;const T=(O=n.canvas)==null?void 0:O.getActiveObjects()[0];if(T){const S=String(E.color).replace("NaN","");if(E.mode==="\u7EAF\u8272")T.set("fill",S);else if(E.mode==="\u6E10\u53D8"){const Q=w(Lr(E.stops),T.width,T.height,E.angle);T.set("fill",Q,E.angle),T.set(u1,E.angle)}(k=n.canvas)==null||k.renderAll()}},A=E=>{f(E)},m=(E,T)=>{if(E)return"linear-gradient(".concat(T.get(u1,E.degree),"deg, ").concat(E.colorStops.map(O=>O.color+" "+100*O.offset+"%"),")")},w=(E,T,O,k)=>{const S=(Q=>{const R=-parseInt(Q,10)*(Math.PI/180);return{x1:Math.round(50+50*Math.sin(R))/100,y1:Math.round(50+50*Math.cos(R))/100,x2:Math.round(50+50*Math.sin(R+Math.PI))/100,y2:Math.round(50+50*Math.cos(R+Math.PI))/100}})(k);return new st.fabric.Gradient({type:"linear",gradientUnits:"pencentage",coords:{x1:S.x1*T,y1:S.y1*O,x2:S.x2*T,y2:S.y2*O},colorStops:[...E]})},x=()=>{var E;(E=i==null?void 0:i.proxy)==null||E.$forceUpdate()};return Lt(()=>{Qt(()=>{var E,T,O;l(),(E=n.editor)==null||E.on("selectCancel",x),(T=n.editor)==null||T.on("selectOne",l),(O=n.canvas)==null||O.on("object:modified",l)})}),Qe(()=>{var E,T,O;(E=n.editor)==null||E.off("selectCancel",x),(T=n.editor)==null||T.off("selectOne",l),(O=n.canvas)==null||O.off("object:modified",l)}),(E,T)=>{const O=Ee,k=Ip;return I(e).mSelectMode==="one"&&I(e).mSelectOneType!=="image"&&I(e).mSelectOneType!=="group"?(tt(),ot("div",Rk,[H(O,{"content-position":"left"},{default:nt(()=>[Nk]),_:1}),G("div",zk,[H(k,{width:"280px",placement:"top-start",effect:"light",trigger:"hover"},{reference:nt(()=>[G("div",{class:"color-bar",style:qt({background:I(o).fill})},null,4)]),default:nt(()=>[G("div",Vk,[H(Fk,{value:I(o).fill,"onUpdate:value":T[0]||(T[0]=S=>I(o).fill=S),modes:["\u6E10\u53D8","\u7EAF\u8272"],onChange:f,onNativePick:A},null,8,["value"])])]),_:1})])])):bt("",!0)}}}),Hk=Nt(Uk,[["__scopeId","data-v-8bdd557d"]]);let yo,h1,d1,f1,p1,g1,v1,A1,m1,y1,b1,C1,w1,x1,_1,Ne,nh,ih,E1,S1,I1,k1,B1,O1,T1,D1,M1,Q1,Vn,L1,P1,j1,F1,R1,N1,z1,V1,U1,H1,G1,Y1,W1,X1,$1,q1,K1,J1,Z1,tv,ev,nv,iv,rv,ov,av,sv,lv,cv,uv,hv,dv,fv,pv,gv,vv,Av,mv,yv,bv,Cv,xi,wv,xv,_v,Ev,Sv,Iv,kv,Bv,Ov,Tv,Dv,Mv,Qv,Lv,Pv,jv,Fv,Rv,Nv,zv,Vv,Uv,Hv,Gv,Yv,Wv,Xv,$v,qv,Kv,Jv,Zv,tA,eA,nA,rh,iA,rA,oA,aA,sA,lA,cA,uA,hA,dA,fA,pA,gA,vA,AA,mA,yA,bA,CA,wA,xA,_A,Ts,EA,SA,IA,kA,BA,OA,TA,DA,MA,QA,LA,oh,PA,jA,FA,RA,NA,zA,VA,UA,HA,GA,YA,WA,XA,$A,qA,KA,JA,ZA,t3,e3,n3,i3,r3,o3,a3,s3,l3,c3;yo=t=>(je("data-v-f6eba257"),t=t(),Fe(),t),h1={key:0,class:"box"},d1=yo(()=>G("h4",null,"\u56FE\u50CF\u63CF\u8FB9",-1)),f1={class:"hd-wrap"},p1={class:"hd"},g1=yo(()=>G("span",null,"\u542F\u7528\u56FE\u50CF\u63CF\u8FB9",-1)),v1={class:"hd-wrap"},A1=yo(()=>G("div",{class:"hd"},[G("span",null,"\u662F\u5426\u53EA\u663E\u793A\u63CF\u8FB9")],-1)),m1={class:"operation"},y1=yo(()=>G("div",{class:"hd",style:{"flex-basis":"98px"}},[G("span",null,"\u63CF\u8FB9\u5927\u5C0F")],-1)),b1={style:{width:"100%"}},C1={class:"operation",style:{"justify-content":"space-between"}},w1=yo(()=>G("div",{class:"hd"},[G("span",null,"\u63CF\u8FB9\u989C\u8272")],-1)),x1=wt({__name:"ImgStroke",setup(t){const e=jt(),{mixinState:n}=function(){const k=$u(),{t:S}=ir(),Q=Ft("mixinState");return{canvasEditor:k.editor,mixinState:Q,t:S}}(),i=ct(!1),o=ct(!1),l=ct(5),f=ct("#000"),A=ct(!1),m=()=>{var S;const k=(S=e.canvas)==null?void 0:S.getActiveObject();if(k&&zi.isImage(k))return k},w=()=>{const k=I(A)?"destination-out":"source-over";e.editor.imageStrokeDraw(I(f),I(l),k)},x=async k=>{k?(I(l)===0&&(l.value=5),(()=>{const S=m();S&&(S.set("originWidth",S==null?void 0:S.get("width")),S.set("originHeight",S==null?void 0:S.get("height")),S.set("originSrc",S==null?void 0:S.getSrc()))})(),w()):(l.value=0,w())},E=k=>{l.value=k,w()},T=k=>{f.value=k,w()},O=()=>{i.value=!!m()};return Lt(()=>{Qt(()=>{var k;(k=e.editor)==null||k.on("selectOne",O)})}),Qe(()=>{e.editor.off("selectOne",O)}),(k,S)=>{const Q=Ee,R=ne,V=Ip,b=zo,Y=Ha,rt=Ai;return I(n).mSelectMode==="one"&&I(i)?(tt(),ot("div",h1,[H(Q,{"content-position":"left"},{default:nt(()=>[d1]),_:1}),G("div",f1,[G("div",p1,[g1,H(V,{trigger:"hover",content:"\u53EA\u652F\u6301png\u900F\u660E\u56FE\u50CF"},{reference:nt(()=>[H(R,{color:"#f34250"},{default:nt(()=>[H(I(XB))]),_:1})]),_:1})]),H(b,{modelValue:I(o),"onUpdate:modelValue":S[0]||(S[0]=q=>he(o)?o.value=q:null),size:"large","inline-prompt":"",class:"switch","active-text":"\u5F00\u542F","inactive-text":"\u5173\u95ED",onChange:x},null,8,["modelValue"])]),I(o)?(tt(),ot(Mt,{key:0},[G("div",v1,[A1,H(b,{"inline-prompt":"",modelValue:I(A),"onUpdate:modelValue":S[1]||(S[1]=q=>he(A)?A.value=q:null),size:"large",class:"switch","active-text":"\u662F","inactive-text":"\u5426",onChange:w},null,8,["modelValue"])]),G("div",m1,[y1,G("div",b1,[H(Y,{modelValue:I(l),"onUpdate:modelValue":S[2]||(S[2]=q=>he(l)?l.value=q:null),max:50,onChange:E},null,8,["modelValue"])])]),G("div",C1,[w1,G("div",null,[H(rt,{modelValue:I(f),"onUpdate:modelValue":S[3]||(S[3]=q=>he(f)?f.value=q:null),onChange:T,placement:"left"},null,8,["modelValue"])])])],64)):bt("",!0)])):bt("",!0)}}}),_1=Nt(x1,[["__scopeId","data-v-f6eba257"]]),Ne={SELECT:"select",COLOR:"color",NUMBER:"number"},nh=[{type:"Brightness",status:!1,params:[{key:"brightness",value:0,uiType:Ne.NUMBER,min:-1,max:1,step:.01}]},{type:"Contrast",status:!1,params:[{key:"contrast",value:0,uiType:Ne.NUMBER,min:-1,max:1,step:.01}]},{type:"Saturation",status:!1,params:[{key:"saturation",value:0,uiType:Ne.NUMBER,min:-1,max:1,step:.01}]},{type:"Vibrance",status:!1,params:[{key:"vibrance",value:0,uiType:Ne.NUMBER,min:-1,max:1,step:.01}]},{type:"HueRotation",status:!1,params:[{key:"rotation",value:0,uiType:Ne.NUMBER,min:-1,max:1,step:.01}]},{type:"Noise",status:!1,params:[{key:"noise",value:0,uiType:Ne.NUMBER,min:-1,max:1e3,step:.1}]},{type:"Pixelate",status:!1,params:[{key:"blocksize",value:.01,uiType:Ne.NUMBER,min:.01,max:100,step:.01}]},{type:"Blur",status:!1,params:[{key:"blur",value:0,uiType:Ne.NUMBER,min:0,max:1,step:.01}]},{type:"Grayscale",status:!1,params:[{key:"mode",value:"average",uiType:Ne.SELECT,list:["average","lightness","luminosity"]}]},{type:"RemoveColor",status:!1,params:[{key:"color",value:"",uiType:Ne.COLOR},{key:"distance",value:0,uiType:Ne.NUMBER,min:0,max:1,step:.01}]}],ih=[{type:"Gamma",status:!1,params:[{key:"red",value:0,uiType:Ne.NUMBER,min:.01,max:2.2,step:.01},{key:"green",value:0,uiType:Ne.NUMBER,min:.01,max:2.2,step:.01},{key:"blue",value:0,uiType:Ne.NUMBER,min:.01,max:2.2,step:.01}],handler:(t,e,n)=>({gamma:[t,e,n]})}],E1={key:0,class:"box"},S1=(t=>(je("data-v-311ff7ef"),t=t(),Fe(),t))(()=>G("h4",null,"\u56FE\u7247\u6EE4\u955C",-1)),I1={class:"filter-box"},k1=["src","onClick"],B1={key:0,class:"content"},O1={key:0},T1={key:1},D1={key:2},M1=wt({__name:"Filters",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o={BlackWhite:!1,Brownie:!1,Vintage:!1,Kodachrome:!1,technicolor:!1,Polaroid:!1,Invert:!1,Sepia:!1},l=Zt({uiType:Ne,noParamsFilters:o,paramsFilters:[...nh],combinationFilters:[...ih],type:""}),f=(k,S)=>{var R;const Q=(R=n.canvas)==null?void 0:R.getActiveObjects()[0];l.noParamsFilters[k]=S,S?E(Q,k)||x(Q,k):T(Q,k)},A=k=>{var R;const S=(R=n.canvas)==null?void 0:R.getActiveObjects()[0],Q=[...l.paramsFilters,...l.combinationFilters].find(V=>V.type===k);Q.status?Q.handler?function(V){var rt;const b=(rt=n.canvas)==null?void 0:rt.getActiveObjects()[0];T(b,V.type);const Y=V.params.map(q=>q.value);x(b,V.type,V.handler(...Y))}(Q):Q.params.forEach(V=>{(function(b,Y,rt){var s,u;const q=(s=n.canvas)==null?void 0:s.getActiveObjects()[0],h=E(q,b);h?h[Y]=rt:x(q,b)[Y]=rt,q.applyFilters(),(u=n.canvas)==null||u.renderAll()})(k,V.key,V.value)}):T(S,k)},m=()=>{var S,Q;const k=(S=n.canvas)==null?void 0:S.getActiveObjects()[0];k&&(l.type=k.type,l.type==="image"&&(Object.keys(o).forEach(R=>{var V;l.noParamsFilters[R]=!!E(k,R),(V=i==null?void 0:i.proxy)==null||V.$forceUpdate()}),nh.forEach(R=>{const V=l.paramsFilters.find(Y=>Y.type===R.type),b=E(k,R.type);V.status=!!b,V.params.forEach(Y=>{Y.value=b?b[Y.key]:Y.value})}),ih.forEach(R=>{const V=l.combinationFilters.find(Y=>Y.type===R.type),b=E(k,R.type);V.status=!!b})),(Q=i==null?void 0:i.proxy)==null||Q.$forceUpdate())};function w(k){return new URL(Object.assign({})["../../../assets/filters/".concat(k,".png")],import.meta.url).href}function x(k,S,Q=null){var Y;let R;const V=O(S),b=st.fabric.Image.filters[V];return b&&(R=new b(Q),R.options=Q,k.filters.push(R)),k.applyFilters(),(Y=n.canvas)==null||Y.renderAll(),R}function E(k,S){let Q=null;if(k){const R=O(S),{length:V}=k.filters;let b,Y;for(Y=0;Y<V;Y+=1)if(b=k.filters[Y],b.type===R){Q=b;break}}return Q}function T(k,S){var R;const Q=O(S);k.filters=k.filters.filter(V=>V.type!==Q),k.applyFilters(),(R=n.canvas)==null||R.renderAll()}function O(k){return k.charAt(0).toUpperCase()+k.slice(1)}return Lt(()=>{Qt(()=>{var k;(k=n.editor)==null||k.on("selectOne",m)})}),Qe(()=>{Qt(()=>{var k;(k=n.editor)==null||k.off("selectOne",m)})}),(k,S)=>{const Q=Ee,R=ip,V=GC,b=wC,Y=Rl,rt=Ha,q=Ai,h=HC;return I(e).mSelectMode==="one"&&I(l).type==="image"?(tt(),ot("div",E1,[H(Q,{"content-position":"left"},{default:nt(()=>[S1]),_:1}),H(h,null,{default:nt(()=>[H(V,{name:"1"},{title:nt(()=>[kt(Et(k.$t("editor.filters.simple")),1)]),default:nt(()=>[G("div",I1,[(tt(!0),ot(Mt,null,Ht(I(l).noParamsFilters,(s,u)=>(tt(),ot("div",{class:"filter-item",key:u},[G("img",{src:w(u),onClick:d=>f(u,!o[u])},null,8,k1),H(R,{modelValue:I(l).noParamsFilters[u],"onUpdate:modelValue":d=>I(l).noParamsFilters[u]=d,onChange:d=>f(u,d)},{default:nt(()=>[kt(Et(k.$t("editor.filters."+u)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))])]),_:1}),H(V,{name:"2",title:k.$t("editor.filters.complex")},{default:nt(()=>[G("div",null,[(tt(!0),ot(Mt,null,Ht([...I(l).paramsFilters,...I(l).combinationFilters],s=>(tt(),ot("div",{class:"filter-item has-params",key:s.type},[H(R,{modelValue:s.status,"onUpdate:modelValue":u=>s.status=u,onChange:u=>A(s.type)},{default:nt(()=>[kt(Et(k.$t("editor.filters."+s.type)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),s.status?(tt(),ot("div",B1,[(tt(!0),ot(Mt,null,Ht(s.params,u=>(tt(),ot("div",{class:"content slider-box",key:u},[u.uiType===I(Ne).SELECT?(tt(),ot("div",O1,[H(Y,{modelValue:u.value,"onUpdate:modelValue":d=>u.value=d,onChange:d=>A(s.type)},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(u.list,d=>(tt(),xt(b,{value:d,key:d},{default:nt(()=>[kt(Et(k.$t("editor.filters."+s.type+"List."+d)),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):bt("",!0),u.uiType===I(Ne).NUMBER?(tt(),ot("div",T1,[H(rt,{modelValue:u.value,"onUpdate:modelValue":d=>u.value=d,max:u.max,min:u.min,step:u.step,onOnInput:d=>A(s.type)},null,8,["modelValue","onUpdate:modelValue","max","min","step","onOnInput"])])):bt("",!0),u.uiType===I(Ne).COLOR?(tt(),ot("div",D1,[H(q,{modelValue:u.value,"onUpdate:modelValue":d=>u.value=d,"show-alpha":"",size:"small",onChange:d=>A(s.type)},null,8,["modelValue","onUpdate:modelValue","onChange"])])):bt("",!0)]))),128))])):bt("",!0)]))),128))])]),_:1},8,["title"])]),_:1})])):bt("",!0)}}}),Q1=Nt(M1,[["__scopeId","data-v-311ff7ef"]]),Vn=t=>(je("data-v-de061f3e"),t=t(),Fe(),t),L1={key:0,class:"box attr-item-box"},P1=Vn(()=>G("h4",null,"\u4E8C\u4F4D\u7801\u5C5E\u6027",-1)),j1={class:"flex-view"},F1={class:"flex-item"},R1=Vn(()=>G("span",{class:"label"},"\u5185\u5BB9",-1)),N1={class:"content"},z1={class:"flex-view"},V1={class:"flex-item"},U1={class:"content number-content"},H1={class:"flex-item",style:{"margin-left":"20px"}},G1={class:"content number-content"},Y1={class:"flex-view"},W1={class:"flex-item"},X1=Vn(()=>G("span",{class:"label"},"\u6563\u70B9",-1)),$1={class:"content"},q1={class:"flex-item"},K1=Vn(()=>G("span",{class:"label",style:{"margin-left":"10px"}},"\u7C7B\u578B",-1)),J1={class:"content"},Z1={class:"flex-view"},tv={class:"flex-item"},ev=Vn(()=>G("span",{class:"label"},"\u5916\u89D2",-1)),nv={class:"content"},iv={class:"flex-item"},rv=Vn(()=>G("span",{class:"label",style:{"margin-left":"10px"}},"\u7C7B\u578B",-1)),ov={class:"content"},av={class:"flex-view"},sv={class:"flex-item"},lv=Vn(()=>G("span",{class:"label"},"\u5185\u89D2",-1)),cv={class:"content"},uv={class:"flex-item"},hv=Vn(()=>G("span",{class:"label",style:{"margin-left":"10px"}},"\u7C7B\u578B",-1)),dv={class:"content"},fv={class:"flex-view"},pv={class:"flex-item"},gv=Vn(()=>G("span",{class:"label"},"\u80CC\u666F",-1)),vv={class:"content"},Av={class:"flex-item"},mv=Vn(()=>G("span",{class:"label",style:{"margin-left":"10px"}},"\u5BB9\u9519",-1)),yv={class:"content"},bv=wt({__name:"AttributeQrCode",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=["image"],l=ct(""),f=ut(()=>l.value==="qrcode"),A=Zt({data:"",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"dot",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}),m=T=>{var k;const O=(k=n.canvas)==null?void 0:k.getActiveObject();if((!T||!T.target||T.target===O)&&(l.value=(O==null?void 0:O.extensionType)||"",O&&o.includes(O.type)&&(O==null?void 0:O.extensionType)==="qrcode")){const S=O.get("extension");Object.keys(S).forEach(Q=>{A[Q]=S[Q]})}},w=()=>{var T;n.editor.setQrCode(Lr(A)),(T=n.canvas)==null||T.renderAll()},x=()=>{var T;l.value="",(T=i==null?void 0:i.proxy)==null||T.$forceUpdate()},E=Zt({CornersType:[],DotsType:[],cornersDotType:[],errorCorrectionLevelType:[]});return Lt(()=>{Qt(()=>{var O,k,S,Q;const T=(O=n.editor)==null?void 0:O.getQrCodeTypes();T&&Object.assign(E,T),(k=n.editor)==null||k.on("selectCancel",x),(S=n.editor)==null||S.on("selectOne",m),(Q=n.canvas)==null||Q.on("object:modified",m)})}),Qe(()=>{var T,O,k;(T=n.editor)==null||T.off("selectCancel",x),(O=n.editor)==null||O.off("selectOne",m),(k=n.canvas)==null||k.off("object:modified",m)}),(T,O)=>{const k=Ee,S=Be,Q=Ai,R=Zn,V=jn;return I(e).mSelectMode==="one"&&o.includes(I(e).mSelectOneType)&&I(f)?(tt(),ot("div",L1,[H(k,{"content-position":"left"},{default:nt(()=>[P1]),_:1}),G("div",null,[G("div",j1,[G("div",F1,[R1,G("div",N1,[H(S,{modelValue:I(A).data,"onUpdate:modelValue":O[0]||(O[0]=b=>I(A).data=b),onChange:w},null,8,["modelValue"])])])]),G("div",z1,[G("div",V1,[G("div",U1,[H(I(gn),{modelValue:I(A).width,"onUpdate:modelValue":O[1]||(O[1]=b=>I(A).width=b),onOnChange:w,append:"\u5BBD\u5EA6",min:1},null,8,["modelValue"])])]),G("div",H1,[G("div",G1,[H(I(gn),{modelValue:I(A).margin,"onUpdate:modelValue":O[2]||(O[2]=b=>I(A).margin=b),onOnChange:w,append:"\u8FB9\u8DDD",min:1},null,8,["modelValue"])])])]),G("div",Y1,[G("div",W1,[X1,G("div",$1,[H(Q,{id:"dotsColor",modelValue:I(A).dotsColor,"onUpdate:modelValue":O[3]||(O[3]=b=>I(A).dotsColor=b),onChange:w,"show-alpha":""},null,8,["modelValue"])])]),G("div",q1,[K1,G("div",J1,[H(V,{modelValue:I(A).dotsType,"onUpdate:modelValue":O[4]||(O[4]=b=>I(A).dotsType=b),onChange:w,style:{width:"90px"}},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(E).DotsType,b=>(tt(),xt(R,{value:b,key:b},{default:nt(()=>[kt(Et(b),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),G("div",Z1,[G("div",tv,[ev,G("div",nv,[H(Q,{id:"cornersSquareColor",modelValue:I(A).cornersSquareColor,"onUpdate:modelValue":O[5]||(O[5]=b=>I(A).cornersSquareColor=b),onChange:w,"show-alpha":""},null,8,["modelValue"])])]),G("div",iv,[rv,G("div",ov,[H(V,{modelValue:I(A).cornersSquareType,"onUpdate:modelValue":O[6]||(O[6]=b=>I(A).cornersSquareType=b),onChange:w,style:{width:"90px"}},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(E).cornersDotType,b=>(tt(),xt(R,{value:b,key:b},{default:nt(()=>[kt(Et(b),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),G("div",av,[G("div",sv,[lv,G("div",cv,[H(Q,{id:"cornersDotColor",modelValue:I(A).cornersDotColor,"onUpdate:modelValue":O[7]||(O[7]=b=>I(A).cornersDotColor=b),onChange:w,"show-alpha":""},null,8,["modelValue"])])]),G("div",uv,[hv,G("div",dv,[H(V,{modelValue:I(A).cornersDotType,"onUpdate:modelValue":O[8]||(O[8]=b=>I(A).cornersDotType=b),onChange:w,style:{width:"90px"}},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(E).cornersDotType,b=>(tt(),xt(R,{value:b,key:b},{default:nt(()=>[kt(Et(b),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),G("div",fv,[G("div",pv,[gv,G("div",vv,[H(Q,{id:"background",modelValue:I(A).background,"onUpdate:modelValue":O[9]||(O[9]=b=>I(A).background=b),onChange:w,"show-alpha":""},null,8,["modelValue"])])]),G("div",Av,[mv,G("div",yv,[H(V,{modelValue:I(A).errorCorrectionLevel,"onUpdate:modelValue":O[10]||(O[10]=b=>I(A).errorCorrectionLevel=b),onChange:w,style:{width:"90px"}},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(E).errorCorrectionLevelType,b=>(tt(),xt(R,{value:b,key:b},{default:nt(()=>[kt(Et(b),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])])])])):bt("",!0)}}}),Cv=Nt(bv,[["__scopeId","data-v-de061f3e"]]),xi=t=>(je("data-v-fafd93a4"),t=t(),Fe(),t),wv={key:0,class:"attr-item-box"},xv=xi(()=>G("h4",null,"\u6761\u5F62\u7801\u5C5E\u6027",-1)),_v={class:"flex-view"},Ev={class:"flex-item"},Sv=xi(()=>G("span",{class:"label"},"\u4EE3\u7801",-1)),Iv={class:"content"},kv={key:0,class:"flex-view"},Bv={class:"flex-item"},Ov=xi(()=>G("span",{class:"label"},"\u6587\u5B57",-1)),Tv={class:"content"},Dv={class:"flex-view"},Mv={class:"flex-item"},Qv=xi(()=>G("span",{class:"label"},"\u663E\u793A",-1)),Lv={class:"content"},Pv={key:0,class:"flex-item"},jv=xi(()=>G("span",{class:"label"},"\u5782\u76F4",-1)),Fv={class:"content"},Rv={key:1,class:"flex-view"},Nv={class:"flex-item"},zv=["innerHTML"],Vv={class:"flex-view"},Uv={span:12,class:"flex-item"},Hv=xi(()=>G("span",{class:"label"},"\u6761\u7801",-1)),Gv={class:"content"},Yv={key:0,span:12,class:"flex-item"},Wv={class:"content f-center"},Xv={class:"flex-view"},$v={class:"flex-item"},qv=xi(()=>G("span",{class:"label"},"\u80CC\u666F",-1)),Kv={class:"content"},Jv={class:"flex-item"},Zv=xi(()=>G("span",{class:"label mr-10px"},"\u7C7B\u578B",-1)),tA={class:"content"},eA=wt({__name:"AttributeBarcode",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),o=["image"],l=ct(""),f=ut(()=>l.value==="barcode"),A=Zt({value:"",format:"",text:"12121",textAlign:"left",textPosition:"bottom",fontSize:12,background:"",lineColor:"",displayValue:!1}),m=["left","center","right"],w=['<svg t="1650441458823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3554" width="18" height="18"><path d="M198.4 198.4h341.333333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666667h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-569.6c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666666h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533334z m0 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3555"></path></svg>','<svg t="1650441512015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3704" width="18" height="18"><path d="M313.6 198.4h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533333z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m115.2 170.666666h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533334z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3705"></path></svg>','<svg t="1650441519862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="18" height="18"><path d="M454.4 283.733333v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h341.333334c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333334c-8.533333 0-14.933333-2.133333-19.2-8.533334-4.266667-4.266667-8.533333-10.666667-8.533333-19.2z m-226.133333 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333H256c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533333-19.2z m113.066666 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533334-19.2 6.4-6.4 12.8-8.533333 19.2-8.533334h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533334-19.2z m-170.666666 170.666666v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-4.266667-8.533333-10.666667-8.533333-19.2z" p-id="3855"></path></svg>'],x=k=>{var Q;const S=(Q=n.canvas)==null?void 0:Q.getActiveObject();k&&k.target&&k.target!==S||(l.value=(S==null?void 0:S.extensionType)||"",S&&o.includes(S.type)&&(S==null?void 0:S.extensionType)==="barcode"&&(A.value=S.get("extension").value,A.format=S.get("extension").format,A.text=S.get("extension").text,A.textAlign=S.get("extension").textAlign,A.textPosition=S.get("extension").textPosition,A.fontSize=S.get("extension").fontSize,A.background=S.get("extension").background,A.lineColor=S.get("extension").lineColor,A.displayValue=S.get("extension").displayValue))},E=()=>{var k;n.editor.setBarcode(Lr(A)),(k=n.canvas)==null||k.renderAll()},T=()=>{var k;l.value="",(k=i==null?void 0:i.proxy)==null||k.$forceUpdate()},O=ct([]);return Lt(()=>{Qt(()=>{var k,S,Q,R;x(),O.value=(k=n.editor)==null?void 0:k.getBarcodeTypes(),(S=n.editor)==null||S.on("selectCancel",T),(Q=n.editor)==null||Q.on("selectOne",x),(R=n.canvas)==null||R.on("object:modified",x)})}),Qe(()=>{var k,S,Q;(k=n.editor)==null||k.off("selectCancel",T),(S=n.editor)==null||S.off("selectOne",x),(Q=n.canvas)==null||Q.off("object:modified",x)}),(k,S)=>{const Q=Ee,R=Be,V=zo,b=Zn,Y=jn,rt=up,q=Rl,h=Ai;return I(e).mSelectMode==="one"&&o.includes(I(e).mSelectOneType)&&I(f)?(tt(),ot("div",wv,[H(Q,{"content-position":"left"},{default:nt(()=>[xv]),_:1}),G("div",null,[G("div",_v,[G("div",Ev,[Sv,G("div",Iv,[H(R,{modelValue:I(A).value,"onUpdate:modelValue":S[0]||(S[0]=s=>I(A).value=s),onChange:E},null,8,["modelValue"])])])]),I(A).displayValue?(tt(),ot("div",kv,[G("div",Bv,[Ov,G("div",Tv,[H(R,{modelValue:I(A).text,"onUpdate:modelValue":S[1]||(S[1]=s=>I(A).text=s),onChange:E},null,8,["modelValue"])])])])):bt("",!0),G("div",Dv,[G("div",Mv,[Qv,G("div",Lv,[H(V,{modelValue:I(A).displayValue,"onUpdate:modelValue":S[2]||(S[2]=s=>I(A).displayValue=s),onChange:E},null,8,["modelValue"])])]),I(A).displayValue?(tt(),ot("div",Pv,[jv,G("div",Fv,[H(Y,{modelValue:I(A).textPosition,"onUpdate:modelValue":S[3]||(S[3]=s=>I(A).textPosition=s),onChange:E},{default:nt(()=>[H(b,{value:"bottom"},{default:nt(()=>[kt("bottom")]),_:1}),H(b,{value:"top"},{default:nt(()=>[kt("top")]),_:1})]),_:1},8,["modelValue"])])])):bt("",!0)]),I(A).displayValue?(tt(),ot("div",Rv,[G("div",Nv,[H(q,{class:"button-group",modelValue:I(A).textAlign,"onUpdate:modelValue":S[4]||(S[4]=s=>I(A).textAlign=s),onChange:E,size:"small"},{default:nt(()=>[(tt(),ot(Mt,null,Ht(m,(s,u)=>H(rt,{label:s,value:s,key:s},{default:nt(()=>[G("span",{innerHTML:w[u]},null,8,zv)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])])])):bt("",!0),G("div",Vv,[G("div",Uv,[Hv,G("div",Gv,[H(h,{modelValue:I(A).lineColor,"onUpdate:modelValue":S[5]||(S[5]=s=>I(A).lineColor=s),onChange:E,"show-alpha":""},null,8,["modelValue"])])]),I(A).displayValue?(tt(),ot("div",Yv,[G("div",Wv,[H(I(gn),{modelValue:I(A).fontSize,"onUpdate:modelValue":S[6]||(S[6]=s=>I(A).fontSize=s),onOnChange:E,append:"\u5B57\u53F7",min:1},null,8,["modelValue"])])])):bt("",!0)]),G("div",Xv,[G("div",$v,[qv,G("div",Kv,[H(h,{modelValue:I(A).background,"onUpdate:modelValue":S[7]||(S[7]=s=>I(A).background=s),onChange:E,"show-alpha":""},null,8,["modelValue"])])]),G("div",Jv,[Zv,G("div",tA,[H(Y,{modelValue:I(A).format,"onUpdate:modelValue":S[8]||(S[8]=s=>I(A).format=s),onOnChange:E,style:{width:"90px"}},{default:nt(()=>[(tt(!0),ot(Mt,null,Ht(I(O),s=>(tt(),xt(b,{value:s,key:s},{default:nt(()=>[kt(Et(s),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])])])])):bt("",!0)}}}),nA=Nt(eA,[["__scopeId","data-v-fafd93a4"]]),rh=t=>(je("data-v-345e1c69"),t=t(),Fe(),t),iA={key:0,class:"attr-item-box"},rA={class:"bg-item"},oA=rh(()=>G("svg",{t:"1650443094178",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1549",width:"14",height:"14"},[G("path",{d:"M252.76928 299.904l146.2784 0 0 472.42752-146.2784 0 0-472.42752Z","p-id":"1550"}),G("path",{d:"M477.48096 85.34528l70.87104 0 0 885.80608-70.87104 0 0-885.80608Z","p-id":"1551"}),G("path",{d:"M629.80096 284.8l31.0016 0 0 502.88128-31.0016 0L629.80096 284.8zM776.42752 284.8l31.0016 0 0 502.88128-31.0016 0L776.42752 284.8zM657.09056 315.8016l0-31.0016 123.04896 0 0 31.0016L657.09056 315.8016zM657.27488 787.64544l0-31.0016 123.04896 0 0 31.0016L657.27488 787.64544z","p-id":"1552"})],-1)),aA=rh(()=>G("svg",{t:"1650443104385",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1749",width:"14",height:"14"},[G("path",{d:"M286.01856 250.91584l472.4224 0 0 146.2784-472.4224 0 0-146.2784Z","p-id":"1750"}),G("path",{d:"M87.19872 475.62752l885.80096 0 0 70.87104-885.80096 0 0-70.87104Z","p-id":"1751"}),G("path",{d:"M773.55008 627.94752l0 31.0016L270.6688 658.94912l0-31.0016L773.55008 627.94752zM773.55008 774.5792l0 31.0016L270.6688 805.5808l0-31.0016L773.55008 774.5792zM742.54848 655.24224l31.0016 0 0 123.04896-31.0016 0L742.54848 655.24224zM270.70464 655.42144l31.0016 0 0 123.04896-31.0016 0L270.70464 655.42144z","p-id":"1752"})],-1)),sA=wt({__name:"Flip",setup(t){const e=Ft("mixinState"),n=jt(),i=()=>e.mSelectMode!=="one",o=l=>{var A,m;const f=(A=n.canvas)==null?void 0:A.getActiveObject();f.set("flip".concat(l),!f["flip".concat(l)]).setCoords(),(m=n.canvas)==null||m.requestRenderAll()};return(l,f)=>{const A=oe,m=We;return I(e).mSelectMode==="one"?(tt(),ot("div",iA,[G("div",rA,[H(m,{content:l.$t("editor.attrSetting.flip.x")},{default:nt(()=>[H(A,{disabled:i(),onClick:f[0]||(f[0]=w=>o("X")),link:""},{default:nt(()=>[oA]),_:1},8,["disabled"])]),_:1},8,["content"]),H(m,{content:l.$t("editor.attrSetting.flip.y")},{default:nt(()=>[H(A,{disabled:i(),onClick:f[1]||(f[1]=w=>o("Y")),link:""},{default:nt(()=>[aA]),_:1},8,["disabled"])]),_:1},8,["content"])])])):bt("",!0)}}}),lA=Nt(sA,[["__scopeId","data-v-345e1c69"]]),cA={key:0,class:"attr-item-box"},uA={class:"bg-item",style:{"margin-bottom":"10px"}},hA={class:"bg-item"},dA=wt({__name:"ClipImage",setup(t){const e=Ft("mixinState"),n=jt(),i=ue(),{t:o}=ir(),l=ct(""),f=[{label:o("edotpr.polygonClip"),value:"polygon"},{label:o("edotpr.rectClip"),value:"rect"},{label:o("edotpr.circleClip"),value:"circle"},{label:o("edotpr.triangleClip"),value:"triangle"},{label:o("edotpr.polygonClipInverted"),value:"polygon-inverted"},{label:o("edotpr.rectClipInverted"),value:"rect-inverted"},{label:o("edotpr.circleClipInverted"),value:"circle-inverted"},{label:o("edotpr.triangleClipInverted"),value:"triangle-inverted"}],A=async x=>{n.editor.addClipPathToImage(x)},m=()=>{n.editor.removeClip()},w=()=>{var E,T;const x=(E=n.canvas)==null?void 0:E.getActiveObjects()[0];x&&(l.value=x.type,(T=i==null?void 0:i.proxy)==null||T.$forceUpdate())};return Lt(()=>{var x;(x=n.editor)==null||x.on("selectOne",w)}),Qe(()=>{var x;(x=n.editor)==null||x.off("selectOne",w)}),(x,E)=>{const T=oe,O=kr,k=Br,S=Or;return I(e).mSelectMode==="one"&&I(l)==="image"?(tt(),ot("div",cA,[G("div",uA,[H(S,{style:{width:"270px"},onCommand:A},{dropdown:nt(()=>[H(k,null,{default:nt(()=>[(tt(),ot(Mt,null,Ht(f,Q=>H(O,{key:Q.value,command:Q.value},{default:nt(()=>[kt(Et(Q.label),1)]),_:2},1032,["command"])),64))]),_:1})]),default:nt(()=>[H(T,{text:""},{default:nt(()=>[kt(Et(x.$t("editor.createClip")),1)]),_:1})]),_:1})]),G("div",hA,[H(T,{onClick:m,text:""},{default:nt(()=>[kt(Et(x.$t("editor.removeClip")),1)]),_:1})])])):bt("",!0)}}}),fA=Nt(dA,[["__scopeId","data-v-44c69cde"]]),pA={key:0,class:"attr-item-box"},gA={class:"bg-item"},vA=wt({__name:"ReplaceImg",setup(t){const e=Ft("mixinState"),n=jt(),{getImgStr:i,selectFiles:o,insertImgFile:l}=zi,f=ue(),A=ct(""),m=async()=>{var E;const x=(E=n.canvas)==null?void 0:E.getActiveObjects()[0];if(x&&x.type==="image"){const[T]=await o({accept:"image/*",multiple:!1}),O=await i(T),k=await l(O),S=x.get("width"),Q=x.get("height"),R=x.get("scaleX"),V=x.get("scaleY");x.setSrc(k.src,()=>{var b;x.set("scaleX",S*R/k.width),x.set("scaleY",Q*V/k.height),(b=n.canvas)==null||b.renderAll()}),k.remove()}},w=()=>{var E,T;const x=(E=n.canvas)==null?void 0:E.getActiveObjects()[0];x&&(A.value=x.type,(T=f==null?void 0:f.proxy)==null||T.$forceUpdate())};return Lt(()=>{Qt(()=>{var x;(x=n.editor)==null||x.on("selectOne",w)})}),Qe(()=>{var x;(x=n.editor)==null||x.off("selectOne",w)}),(x,E)=>{const T=oe;return I(e).mSelectMode==="one"&&I(A)==="image"?(tt(),ot("div",pA,[G("div",gA,[H(T,{onClick:m,text:""},{default:nt(()=>[kt(Et(x.$t("editor.repleaceImg")),1)]),_:1})])])):bt("",!0)}}}),AA=Nt(vA,[["__scopeId","data-v-dee7b64a"]]),mA=wt({__name:"Edit",setup(t){const e=Ft("mixinState"),n=jt(),i=()=>{var l;const o=(l=n.editor.fabricCanvas)==null?void 0:l.getActiveObject();o&&o.type==="polygon"?n.editor.activeEdit():mn.warning("\u8BF7\u68C0\u67E5\u9009\u62E9polygon")};return(o,l)=>{const f=or,A=oe,m=We;return I(e).mSelectOneType==="polygon"?(tt(),xt(m,{key:0,content:o.$t("editor.quick.editPoly")},{default:nt(()=>[H(A,{onClick:i,link:""},{default:nt(()=>[H(f,{extClass:"text-20px",icon:"editor-brush"})]),_:1})]),_:1},8,["content"])):bt("",!0)}}}),yA=wt({__name:"Hide",setup(t){const e=Ft("mixinState"),n=jt(),i=ct(!1),o=f=>{var m,w;((m=n.canvas)==null?void 0:m.getActiveObject()).set("visible",!f),(w=n.canvas)==null||w.requestRenderAll(),i.value=f},l=()=>{var A;const f=(A=n.canvas)==null?void 0:A.getActiveObject();i.value=!f.visible};return Lt(()=>{var f;(f=n.editor)==null||f.on("selectOne",l)}),Qe(()=>{var f;(f=n.editor)==null||f.off("selectOne",l)}),(f,A)=>{const m=oe;return I(e).mSelectMode==="one"?(tt(),xt(m,{key:0,text:"",content:f.$t("editor.quick.hide")},{default:nt(()=>[I(i)?(tt(),xt(m,{key:0,onClick:A[0]||(A[0]=w=>o(!1)),icon:I($B),link:""},null,8,["icon"])):(tt(),xt(m,{key:1,onClick:A[1]||(A[1]=w=>o(!0)),icon:I(qB),link:""},null,8,["icon"]))]),_:1},8,["content"])):bt("",!0)}}}),bA=Nt(yA,[["__scopeId","data-v-b6f376dc"]]),CA=wt({__name:"Clone",setup(t){const e=Ft("mixinState"),n=jt(),i=be(function(){n.editor.clone()},300);return(o,l)=>{const f=oe,A=We;return I(e).mSelectMode==="one"?(tt(),xt(A,{key:0,content:o.$t("editor.quick.copy")},{default:nt(()=>[H(f,{onClick:I(i),icon:I(KB),link:""},null,8,["onClick","icon"])]),_:1},8,["content"])):bt("",!0)}}}),wA=wt({__name:"Delete",setup(t){const e=Ft("mixinState"),n=jt(),i=be(function(){n.editor.del()},300);return(o,l)=>{const f=oe,A=We;return I(e).mSelectMode?(tt(),xt(A,{key:0,content:o.$t("editor.quick.del")},{default:nt(()=>[H(f,{onClick:I(i),icon:I(D3),link:""},null,8,["onClick","icon"])]),_:1},8,["content"])):bt("",!0)}}}),xA=wt({__name:"Lock",setup(t){const e=Ft("mixinState"),n=jt(),i=ct(!1),o=f=>{var A,m;f?(A=n.editor)==null||A.lock():(m=n.editor)==null||m.unLock()},l=f=>{i.value=!f[0].selectable};return Lt(()=>{Qt(()=>{var f;(f=n.editor)==null||f.on("selectOne",l)})}),Qe(()=>{var f;(f=n.editor)==null||f.off("selectOne",l)}),(f,A)=>{const m=oe,w=We;return I(e).mSelectMode==="one"?(tt(),xt(w,{key:0,content:f.$t("quick.lock")},{default:nt(()=>[I(i)?(tt(),xt(m,{key:0,onClick:A[0]||(A[0]=x=>o(!1)),icon:I(Q3),link:""},null,8,["icon"])):(tt(),xt(m,{key:1,onClick:A[1]||(A[1]=x=>o(!0)),icon:I(L3),link:""},null,8,["icon"]))]),_:1},8,["content"])):bt("",!0)}}}),_A=Nt(xA,[["__scopeId","data-v-81ad680e"]]),Ts=t=>(je("data-v-49e7fd80"),t=t(),Fe(),t),EA={key:0,class:"attr-item-box"},SA={class:"bg-item"},IA=Ts(()=>G("svg",{t:"1650442559691",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3787",width:"14",height:"14"},[G("path",{d:"M885 607H544V417h192V227H544V24h-64v203H288v190h192v190H139v190h341v203h64V797h341z","p-id":"3788"})],-1)),kA=Ts(()=>G("svg",{t:"1650852784867",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2351",width:"14",height:"14"},[G("path",{d:"M544 480V64h-64v416H64v64h416v416h64V544h416v-64z","p-id":"2352"}),G("path",{d:"M123.7 241.1h119.5v64H123.7zM302.9 241.1h119.5v64H302.9zM601.6 241.1h119.5v64H601.6zM780.8 241.1h119.5v64H780.8zM123.7 718.9h119.5v64H123.7zM302.9 718.9h119.5v64H302.9zM601.6 718.9h119.5v64H601.6zM780.8 718.9h119.5v64H780.8z","p-id":"2353"})],-1)),BA=Ts(()=>G("svg",{t:"1650442510967",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3412",width:"14",height:"14"},[G("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8z m-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6z m11.4 225.4c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z","p-id":"3413"})],-1)),OA=wt({__name:"CenterAlign",setup(t){const e=Ft("mixinState"),n=jt(),i=o=>{n.editor.position(o)};return(o,l)=>{const f=Ee,A=oe,m=We;return I(e).mSelectMode?(tt(),ot("div",EA,[H(f,{"content-position":"left"},{default:nt(()=>[G("h4",null,Et(o.$t("editor.attrSetting.centerAlign.name")),1)]),_:1}),G("div",SA,[H(m,{content:o.$t("editor.attrSetting.centerAlign.centerX")},{default:nt(()=>[H(A,{disabled:!I(e).mSelectMode,onClick:l[0]||(l[0]=w=>i("centerH")),link:""},{default:nt(()=>[IA]),_:1},8,["disabled"])]),_:1},8,["content"]),H(m,{content:o.$t("editor.attrSetting.centerAlign.center")},{default:nt(()=>[H(A,{disabled:!I(e).mSelectMode,onClick:l[1]||(l[1]=w=>i("center")),link:""},{default:nt(()=>[kA]),_:1},8,["disabled"])]),_:1},8,["content"]),H(m,{content:o.$t("editor.attrSetting.centerAlign.centerY")},{default:nt(()=>[H(A,{disabled:!I(e).mSelectMode,onClick:l[2]||(l[2]=w=>i("centerV")),link:""},{default:nt(()=>[BA]),_:1},8,["disabled"])]),_:1},8,["content"])])])):bt("",!0)}}}),TA=Nt(OA,[["__scopeId","data-v-49e7fd80"]]),DA={key:0,class:"attr-item-box"},MA=G("h4",null,"\u5BF9\u9F50",-1),QA={class:"bg-item flex flex-wrap"},LA=wt({__name:"Align",setup(t){const e=Ft("mixinState"),n=jt(),i=()=>{n.editor.left()},o=()=>{n.editor.right()},l=()=>{n.editor.xcenter()},f=()=>{n.editor.ycenter()},A=()=>{n.editor.top()},m=()=>{n.editor.bottom()},w=()=>{n.editor.xequation()},x=()=>{n.editor.yequation()};return(E,T)=>{const O=Ee,k=or,S=oe,Q=We;return I(e).mSelectMode==="multiple"?(tt(),ot("div",DA,[H(O,{"content-position":"left"},{default:nt(()=>[MA]),_:1}),G("div",QA,[H(Q,{content:E.$t("editor.attrSetting.align.left")},{default:nt(()=>[H(S,{class:"w-36px",onClick:i,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"left"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.centerX")},{default:nt(()=>[H(S,{class:"w-36px",onClick:l,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"centerx"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.right")},{default:nt(()=>[H(S,{class:"w-36px",onClick:o,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"right"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.top")},{default:nt(()=>[H(S,{class:"w-36px",onClick:A,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"top"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.centerY")},{default:nt(()=>[H(S,{class:"w-36px",onClick:f,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"centery"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.bottom")},{default:nt(()=>[H(S,{class:"w-36px",onClick:m,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"bottom"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.averageX")},{default:nt(()=>[H(S,{class:"w-36px",onClick:w,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"sx"})]),_:1})]),_:1},8,["content"]),H(Q,{content:E.$t("editor.attrSetting.align.averageY")},{default:nt(()=>[H(S,{class:"w-36px",onClick:x,size:"small",link:""},{default:nt(()=>[H(k,{extClass:"text-20px",icon:"sy"})]),_:1})]),_:1},8,["content"])])])):bt("",!0)}}}),oh=t=>(je("data-v-a9cdd218"),t=t(),Fe(),t),PA={key:0,class:"attr-item-box"},jA={class:"bg-item"},FA=oh(()=>G("svg",{t:"1650848913991",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17131",width:"14",height:"14"},[G("path",{d:"M341.333333 341.333333 341.333333 512 554.666667 512 554.666667 341.333333 341.333333 341.333333M42.666667 42.666667 213.333333 42.666667 213.333333 85.333333 810.666667 85.333333 810.666667 42.666667 981.333333 42.666667 981.333333 213.333333 938.666667 213.333333 938.666667 810.666667 981.333333 810.666667 981.333333 981.333333 810.666667 981.333333 810.666667 938.666667 213.333333 938.666667 213.333333 981.333333 42.666667 981.333333 42.666667 810.666667 85.333333 810.666667 85.333333 213.333333 42.666667 213.333333 42.666667 42.666667M213.333333 810.666667 213.333333 853.333333 810.666667 853.333333 810.666667 810.666667 853.333333 810.666667 853.333333 213.333333 810.666667 213.333333 810.666667 170.666667 213.333333 170.666667 213.333333 213.333333 170.666667 213.333333 170.666667 810.666667 213.333333 810.666667M256 256 640 256 640 426.666667 768 426.666667 768 768 341.333333 768 341.333333 597.333333 256 597.333333 256 256M640 597.333333 426.666667 597.333333 426.666667 682.666667 682.666667 682.666667 682.666667 512 640 512 640 597.333333Z","p-id":"17132",fill:"#303133"})],-1)),RA=oh(()=>G("svg",{t:"1650848938557",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17281",width:"14",height:"14"},[G("path",{d:"M85.333333 85.333333 256 85.333333 256 128 554.666667 128 554.666667 85.333333 725.333333 85.333333 725.333333 256 682.666667 256 682.666667 384 768 384 768 341.333333 938.666667 341.333333 938.666667 512 896 512 896 768 938.666667 768 938.666667 938.666667 768 938.666667 768 896 512 896 512 938.666667 341.333333 938.666667 341.333333 768 384 768 384 682.666667 256 682.666667 256 725.333333 85.333333 725.333333 85.333333 554.666667 128 554.666667 128 256 85.333333 256 85.333333 85.333333M768 512 768 469.333333 682.666667 469.333333 682.666667 554.666667 725.333333 554.666667 725.333333 725.333333 554.666667 725.333333 554.666667 682.666667 469.333333 682.666667 469.333333 768 512 768 512 810.666667 768 810.666667 768 768 810.666667 768 810.666667 512 768 512M554.666667 256 554.666667 213.333333 256 213.333333 256 256 213.333333 256 213.333333 554.666667 256 554.666667 256 597.333333 384 597.333333 384 512 341.333333 512 341.333333 341.333333 512 341.333333 512 384 597.333333 384 597.333333 256 554.666667 256M512 512 469.333333 512 469.333333 597.333333 554.666667 597.333333 554.666667 554.666667 597.333333 554.666667 597.333333 469.333333 512 469.333333 512 512Z","p-id":"17282"})],-1)),NA=wt({__name:"Group",setup(t){const e=Ft("mixinState"),n=jt();let i=ut(()=>e.mSelectMode==="one"&&e.mSelectOneType==="group"),o=ut(()=>e.mSelectMode==="multiple");const l=()=>{n.editor.unGroup()},f=()=>{n.editor.group()};return(A,m)=>{const w=oe;return I(o)||I(i)?(tt(),ot("div",PA,[G("div",jA,[I(o)?(tt(),xt(w,{key:0,disabled:!I(o),onClick:f},{default:nt(()=>[FA,kt(" "+Et(A.$t("editor.attrSetting.group")),1)]),_:1},8,["disabled"])):bt("",!0),I(i)?(tt(),xt(w,{key:1,disabled:!I(i),onClick:l},{default:nt(()=>[RA,kt(" "+Et(A.$t("editor.attrSetting.unGroup")),1)]),_:1},8,["disabled"])):bt("",!0)])])):bt("",!0)}}}),zA=Nt(NA,[["__scopeId","data-v-a9cdd218"]]),VA={key:0},UA={class:"attr-item-box"},HA={class:"attr-item-box"},GA={class:"color-list"},YA=["onClick"],WA={class:"attr-item-box"},XA=(t=>(je("data-v-ed1fb341"),t=t(),Fe(),t))(()=>G("h4",null,"\u80CC\u666F\u56FE",-1)),$A={class:"f-center"},qA=wt({__name:"BgBar",setup(t){const e=Ft("mixinState"),n=jt(),{getImgStr:i,selectFiles:o}=zi,l=ct(["#5F2B63","#B23554","#F27E56","#FCE766","#86DCCD","#E7FDCB","#FFDC84","#F57677","#5FC2C7","#98DFE5","#C2EFF3","#DDFDFD","#9EE9D3","#2FC6C8","#2D7A9D","#48466d","#61c0bf","#bbded6","#fae3d9","#ffb6b9","#ffaaa5","#ffd3b6","#dcedc1","#a8e6cf"]),f=ct("rgba(255, 255, 255, 1)"),A=()=>{m(f.value)};function m(T){var O;T&&((O=n.canvas)==null||O.setBackgroundColor(T,n.canvas.renderAll.bind(n.canvas)),f.value=T)}const w=()=>{var O,k;const T=(O=n.canvas)==null?void 0:O.getObjects().find(S=>S.id==="workspace");f.value=(k=T==null?void 0:T.fill)!=null?k:""},x=be(function(){o({accept:"image/*",multiple:!0}).then(T=>{Array.from(T).forEach(O=>{i(O).then(k=>{const S=new Image;S.crossOrigin="anonymous",S.src=k,S.onload=function(){const Q=n.canvas,{width:R,height:V}=S,b=n.editor.getWorkspaceSize();Q&&Q.setBackgroundImage(k,Q==null?void 0:Q.renderAll.bind(Q),{scaleX:b.width/R,scaleY:b.height/V})}})})})},250),E=be(function(){Bi.confirm("\u60A8\u786E\u5B9A\u79FB\u9664\u753B\u5E03\u5417?","Warning",{title:"\u63D0\u793A",type:"warning",confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88"}).then(()=>{var T;(T=n.canvas)==null||T.setBackgroundImage(null,n.canvas.renderAll.bind(n.canvas))})},250);return Lt(()=>{Qt(()=>{var T;(T=n.editor)==null||T.on("loadJson",w)})}),em(()=>{n.editor.off("loadJson",w)}),(T,O)=>{const k=Ee,S=Ai,Q=oe;return I(e).mSelectMode?bt("",!0):(tt(),ot("div",VA,[G("div",UA,[H(k,{"content-position":"left"},{default:nt(()=>[G("h4",null,Et(T.$t("editor.bgSeting.color")),1)]),_:1}),H(S,{modelValue:I(f),"onUpdate:modelValue":O[0]||(O[0]=R=>he(f)?f.value=R:null),onChange:A,"show-alpha":""},null,8,["modelValue"])]),G("div",HA,[H(k,{"content-position":"left"},{default:nt(()=>[G("h4",null,Et(T.$t("editor.bgSeting.colorMacthing")),1)]),_:1}),G("div",GA,[(tt(!0),ot(Mt,null,Ht(I(l),(R,V)=>(tt(),ot("span",{key:R+V,style:qt("background:".concat(R)),onClick:b=>m(R)},null,12,YA))),128))])]),G("div",WA,[H(k,{"content-position":"left"},{default:nt(()=>[XA]),_:1}),G("div",$A,[H(Q,{onClick:I(E)},{default:nt(()=>[kt(" \u79FB\u9664\u80CC\u666F\u56FE ")]),_:1},8,["onClick"]),H(Q,{onClick:I(x)},{default:nt(()=>[kt(" \u8BBE\u7F6E\u80CC\u666F\u56FE ")]),_:1},8,["onClick"])])])]))}}}),KA=Nt(qA,[["__scopeId","data-v-ed1fb341"]]),JA={key:0,class:"attr-item-box"},ZA=wt({__name:"SetSize",setup(t){const e=Ft("mixinState"),n=jt(),i=900,o=1200,l=ct(null);let f=ct(i),A=ct(o);Lt(()=>{var x,E;(x=n.editor)==null||x.setSize(f.value,A.value),(E=n.editor)==null||E.on("sizeChange",(T,O)=>{f.value=T,A.value=O})});const m=()=>{var x;(x=l.value)==null||x.showSetSize(f.value,A.value)},w=(x,E)=>{var T;f.value=x,A.value=E,(T=n.editor)==null||T.setSize(f.value,A.value)};return(x,E)=>{const T=Ee,O=Be,k=js,S=ne,Q=oe,R=Fs;return I(e).mSelectMode?bt("",!0):(tt(),ot("div",JA,[H(T,{"content-position":"left"},{default:nt(()=>[G("h4",null,Et(x.$t("editor.bgSeting.size")),1)]),_:1}),H(R,{"label-width":40,inline:"",class:"flex"},{default:nt(()=>[H(k,{label:x.$t("editor.bgSeting.width"),prop:"name"},{default:nt(()=>[H(O,{style:{width:"60px"},disabled:"",modelValue:I(f),"onUpdate:modelValue":E[0]||(E[0]=V=>he(f)?f.value=V:f=V),readonly:""},null,8,["modelValue"])]),_:1},8,["label"]),H(k,{label:x.$t("editor.bgSeting.height"),prop:"name"},{default:nt(()=>[H(O,{style:{width:"60px"},disabled:"",modelValue:I(A),"onUpdate:modelValue":E[1]||(E[1]=V=>he(A)?A.value=V:A=V),readonly:""},null,8,["modelValue"])]),_:1},8,["label"]),H(k,{"label-width":0},{default:nt(()=>[H(Q,{link:"",onClick:m},{default:nt(()=>[H(S,{size:"18"},{default:nt(()=>[H(I(JB))]),_:1})]),_:1})]),_:1})]),_:1}),H(Is,{title:x.$t("editor.setSizeTip"),ref_key:"modalSizeRef",ref:l,onSet:w},null,8,["title"])]))}}}),t3=Nt(ZA,[["__scopeId","data-v-1a45ad1a"]]),e3={class:"right-bar flex-basis-304px box-border overflow-hidden p-10px"},n3={class:"attr-item-box"},i3=(t=>(je("data-v-5de1a6d9"),t=t(),Fe(),t))(()=>G("h4",null,"\u5FEB\u6377\u64CD\u4F5C",-1)),r3={class:"bg-item"},o3=wt({__name:"index",setup(t){const e=jt(),n=ut(()=>e.editor),i=Ft("mixinState");return(o,l)=>{const f=t3,A=KA,m=zA,w=LA,x=TA,E=Ee,T=_A,O=wA,k=CA,S=bA,Q=mA,R=AA,V=fA,b=lA,Y=nA,rt=Cv,q=Q1,h=_1,s=Hk,u=nk,d=I7,r=b7,a=d7,c=a7,p=ZI,g=UI,v=PI,y=oe;return tt(),ot("section",e3,[ee(G("div",null,[H(f),H(A)],512),[[Me,!I(i).mSelectMode]]),ee(G("div",null,[H(m),H(w),H(x)],512),[[Me,I(i).mSelectMode==="multiple"]]),ee(G("div",n3,[H(m),H(E,{"content-position":"left"},{default:nt(()=>[i3]),_:1}),ee(G("div",r3,[H(T),H(O),H(k),H(S),H(Q)],512),[[Me,I(i).mSelectMode]]),H(x),H(R),H(V),H(b),H(Y),H(rt),H(q),H(h),H(s),H(u),H(d),H(r),H(a),H(c),H(p),H(g),H(v),H(y,{onClick:l[0]||(l[0]=_=>I(n).getFontJson()),size:"small"},{default:nt(()=>[kt("\u83B7\u53D6\u5143\u7D20\u6570\u636E")]),_:1})],512),[[Me,I(i).mSelectMode==="one"]])])}}}),a3=Nt(o3,[["__scopeId","data-v-5de1a6d9"]]),s3=wt({__name:"index",setup:t=>(e,n)=>(tt(),ot(Mt,null,[H(dI),H(MI),H(a3)],64))}),l3={class:"editor-wrap"},c3=wt({name:"Home",__name:"index",setup(t){const e=jt(),n=Eh,i=new px;Lt(()=>{const l=new st.fabric.Canvas("canvas",{fireRightClick:!0,stopContextMenu:!0,controlsAboveOverlay:!0,preserveObjectStacking:!0});i.init(l),i.use(Za).use(rs).use(f0).use(g0).use(pc).use(gc).use(vc).use(v0).use(Ac).use(mc).use(yc).use(A0).use(bc).use(es).use(ns).use(Cc).use(Ec).use(kc).use(Bc).use(Oc).use(nu).use(Uu).use(Hu).use(Ic,{repoSrc:n}).use(Sc,{repoSrc:n}).use(Jc).use(Gu).use(Es).use(Wu).use(Xu),e.setEditor(i),e.setCanvas(l),e.rulerEnable&&i.rulerEnable(),jr()}),em(()=>i.destory());const{mixinState:o}=function(l){const f=Zt({mSelectMode:Ss.EMPTY,mSelectOneType:"",mSelectId:"",mSelectIds:[],mSelectActive:[]}),A=x=>{f.mSelectMode=Ss.ONE,f.mSelectActive=x,x[0]&&xn(x[0],"clip")?w():x[0]&&(f.mSelectId=x[0].id,f.mSelectOneType=x[0].type,f.mSelectIds=x.map(E=>E.id))},m=x=>{f.mSelectMode=Ss.MULTI,f.mSelectId="",f.mSelectIds=x.map(E=>E.id)},w=()=>{f.mSelectId="",f.mSelectIds=[],f.mSelectMode=Ss.EMPTY,f.mSelectOneType=""};return Lt(()=>{l.on(Ao.ONE,A),l.on(Ao.MULTI,m),l.on(Ao.CANCEL,w)}),m9(()=>{l.off(Ao.ONE,A),l.off(Ao.MULTI,m),l.off(Ao.CANCEL,w)}),{mixinState:f}}(i);return ln("mixinState",o),(l,f)=>{const A=ZB,m=t9,w=e9;return tt(),ot("div",l3,[H(w,null,{default:nt(()=>[H(A,null,{default:nt(()=>[H(tE)]),_:1}),H(m,null,{default:nt(()=>[H(s3)]),_:1})]),_:1})])}}}),nm=Nt(c3,[["__scopeId","data-v-c0095cfe"]])});export{k9 as __tla,nm as default};
