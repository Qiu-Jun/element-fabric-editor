var _U=Object.defineProperty,SU=Object.defineProperties;var EU=Object.getOwnPropertyDescriptors;var Ws=Object.getOwnPropertySymbols;var Y3=Object.prototype.hasOwnProperty,W3=Object.prototype.propertyIsEnumerable;var Ea=Math.pow,Th=(St,kt,yt)=>kt in St?_U(St,kt,{enumerable:!0,configurable:!0,writable:!0,value:yt}):St[kt]=yt,ve=(St,kt)=>{for(var yt in kt||(kt={}))Y3.call(kt,yt)&&Th(St,yt,kt[yt]);if(Ws)for(var yt of Ws(kt))W3.call(kt,yt)&&Th(St,yt,kt[yt]);return St},De=(St,kt)=>SU(St,EU(kt));var X3=(St,kt)=>{var yt={};for(var yn in St)Y3.call(St,yn)&&kt.indexOf(yn)<0&&(yt[yn]=St[yn]);if(St!=null&&Ws)for(var yn of Ws(St))kt.indexOf(yn)<0&&W3.call(St,yn)&&(yt[yn]=St[yn]);return yt};var pe=(St,kt,yt)=>Th(St,typeof kt!="symbol"?kt+"":kt,yt);var we=(St,kt,yt)=>new Promise((yn,Qo)=>{var rl=vi=>{try{ze(yt.next(vi))}catch(Lo){Qo(Lo)}},Ln=vi=>{try{ze(yt.throw(vi))}catch(Lo){Qo(Lo)}},ze=vi=>vi.done?yn(vi.value):Promise.resolve(vi.value).then(rl,Ln);ze((yt=yt.apply(St,kt)).next())});const hG={};import{t as ci,W as $3,i as mn,b as Ia,c as xn,s as IU,a as Gn,d as q3,e as Tn,o as kU,f as Mn,g as K3,h as Eo,k as Zt,j as Yn,l as _n,m as tr,n as J3,p as nr,q as ka,r as sn,U as Z3,u as e2,v as Ir,w as Io,S as Ba,x as Oa,y as t2,z as Da,A as BU,B as OU,C as DU,D as Xs,E as TU,F as ui,G as kr,H as MU,I as n2,J as ko,K as i2,L as r2,M as o2,N as QU,O as a2,P as LU,Q as jU,R as Mh,T as PU,V as FU,X as RU,Y as Ot,Z as Qn,_ as $s,$ as NU,a0 as zU,a1 as VU,a2 as ki,a3 as UU,a4 as s2,a5 as Br,a6 as HU,a7 as hi,a8 as Qt,a9 as ir,aa as rr,ab as Je,ac as at,ad as xt,ae as it,af as ln,ag as or,ah as l2,ai as Bi,aj as ar,ak as Ze,al as _t,am as di,an as sr,ao as Ta,ap as Oi,aq as Wn,ar as Bo,as as Di,at as Or,au as Xn,av as Sn,aw as Qh,ax as GU,ay as qs,az as lr,aA as YU,aB as c2,aC as Ks,aD as fi,aE as u2,aF as Ft,aG as st,aH as Dr,aI as Kt,aJ as Wt,aK as h2,aL as WU,aM as XU,aN as $U,aO as qU,aP as KU,aQ as JU,aR as ZU,aS as cr,aT as eH,aU as tH,aV as nH,aW as iH,aX as pi,aY as rH,aZ as d2,a_ as Oo,a$ as Lh,b0 as f2,b1 as Tr,b2 as oH,b3 as aH,b4 as sH,b5 as p2,b6 as lH,b7 as cH,b8 as jh,b9 as uH,ba as Js,bb as hH,bc as g2,bd as Ph,be as dH,bf as fH,bg as v2,bh as Fh,bi as pH,bj as gH,bk as vH,bl as Rh,bm as Nh,bn as Ti,bo as Mi,bp as cn,bq as ur,br as Mr,bs as Qr,bt as Lr,bu as hr,bv as It,bw as Zs,bx as AH,by as mH,bz as A2,bA as m2,bB as zh,bC as y2,bD as yH,bE as b2,bF as C2,bG as bH,bH as CH,bI as Vh,bJ as Uh,bK as w2,bL as wH,bM as xH,bN as _H,bO as x2,bP as SH,bQ as EH,bR as el,bS as tl,bT as IH,bU as kH,bV as BH,bW as OH,bX as DH,bY as TH,bZ as MH,b_ as QH,__tla as LH}from"./usePageList.crqY3owG.js";import{i as Qi,b as $n,a as En,r as jr,c as en,d as rt,e as Do,f as Li,h as _2,j as ji,t as Pr,k as Fr,l as vt,M as jH,S as To,m as S2,n as Lt,o as Rr,p as nl,q as PH,s as FH,u as Hh,v as RH,w as NH,x as E2,y as Ce,z as ce,A as un,B as je,C as $,D as se,E as Ne,F as de,G as C,H as Re,I as T,J as _e,K,L as tn,N as Se,O as ft,P as zH,Q as Ma,R as gi,T as Jt,U as ue,V as Me,W as Le,X as nn,Y as Pi,Z as Nr,_ as I2,$ as lt,a0 as ut,a1 as ot,a2 as il,a3 as Qe,a4 as Be,a5 as be,a6 as $e,a7 as Fi,a8 as k2,a9 as et,aa as M,ab as Gh,ac as dr,ad as VH,ae as hn,af as Ut,ag as Mo,ah as Qa,ai as B2,aj as We,ak as O2,al as UH,am as HH,an as GH,ao as D2,ap as Rt,aq as Yh,ar as dn,as as YH,at as T2,au as WH,av as Ri,aw as M2,ax as zr,ay as XH,az as $H,aA as qH,aB as KH,aC as qn,aD as JH,aE as ZH,aF as eG,aG as Wh,aH as Vr,aI as Xh,aJ as tG,aK as $h,aL as Q2,aM as L2,aN as Ue,aO as j2,aP as zt,aQ as Vt,aR as nG,aS as qh,aT as P2,aU as iG,aV as rG,aW as oG,aX as aG,aY as F2,aZ as sG,a_ as R2,a$ as N2,b0 as lG,__tla as cG}from"./index.mGYWpAOr.js";let z2,uG=Promise.all([(()=>{try{return LH}catch(St){}})(),(()=>{try{return cG}catch(St){}})()]).then(()=>we(void 0,null,function*(){var St=NaN;function kt(t){return typeof t=="number"?t:Qi(t)?St:+t}function yt(t,e){return function(n,i){var o;if(n===void 0&&i===void 0)return e;if(n!==void 0&&(o=n),i!==void 0){if(o===void 0)return i;typeof n=="string"||typeof i=="string"?(n=$n(n),i=$n(i)):(n=kt(n),i=kt(i)),o=t(n,i)}return o}}var yn=yt(function(t,e){return t+e},0),Qo=1/0,rl=17976931348623157e292;function Ln(t){if(!t)return t===0?t:0;if(t=ci(t),t===Qo||t===-Qo){var e=t<0?-1:1;return e*rl}return t===t?t:0}function ze(t){var e=Ln(t),n=e%1;return e===e?n?e-n:e:0}var vi="Expected a function";function Lo(t,e){if(typeof e!="function")throw new TypeError(vi);return t=ze(t),function(){if(--t<1)return e.apply(this,arguments)}}var La=$3&&new $3,Kh=La?function(t,e){return La.set(t,e),t}:mn;function jo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ia(t.prototype),i=t.apply(n,e);return En(i)?i:n}}var V2=1;function U2(t,e,n){var i=e&V2,o=jo(t);function p(){var v=this&&this!==jr&&this instanceof p?o:t;return v.apply(i?n:this,arguments)}return p}var H2=Math.max;function Jh(t,e,n,i){for(var o=-1,p=t.length,v=n.length,c=-1,r=e.length,d=H2(p-v,0),u=Array(r+d),a=!i;++c<r;)u[c]=e[c];for(;++o<v;)(a||o<p)&&(u[n[o]]=t[o]);for(;d--;)u[c++]=t[o++];return u}var G2=Math.max;function Zh(t,e,n,i){for(var o=-1,p=t.length,v=-1,c=n.length,r=-1,d=e.length,u=G2(p-c,0),a=Array(u+d),l=!i;++o<u;)a[o]=t[o];for(var s=o;++r<d;)a[s+r]=e[r];for(;++v<c;)(l||o<p)&&(a[s+n[v]]=t[o++]);return a}function Y2(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function ja(){}var W2=4294967295;function tt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=W2,this.__views__=[]}tt.prototype=Ia(ja.prototype),tt.prototype.constructor=tt;function Po(){}var ol=La?function(t){return La.get(t)}:Po,Ur={},X2=Object.prototype,$2=X2.hasOwnProperty;function Pa(t){for(var e=t.name+"",n=Ur[e],i=$2.call(Ur,e)?n.length:0;i--;){var o=n[i],p=o.func;if(p==null||p==t)return o.name}return e}function In(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}In.prototype=Ia(ja.prototype),In.prototype.constructor=In;function ed(t){if(t instanceof tt)return t.clone();var e=new In(t.__wrapped__,t.__chain__);return e.__actions__=xn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var q2=Object.prototype,K2=q2.hasOwnProperty;function G(t){if(en(t)&&!rt(t)&&!(t instanceof tt)){if(t instanceof In)return t;if(K2.call(t,"__wrapped__"))return ed(t)}return new In(t)}G.prototype=ja.prototype,G.prototype.constructor=G;function al(t){var e=Pa(t),n=G[e];if(typeof n!="function"||!(e in tt.prototype))return!1;if(t===n)return!0;var i=ol(n);return!!i&&t===i[0]}var td=IU(Kh),J2=/\{\n\/\* \[wrapped with (.+)\] \*/,Z2=/,? & /;function ey(t){var e=t.match(J2);return e?e[1].split(Z2):[]}var ty=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function ny(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ty,`{
/* [wrapped with `+e+`] */
`)}function Fa(t,e,n,i){for(var o=t.length,p=n+(i?1:-1);i?p--:++p<o;)if(e(t[p],p,t))return p;return-1}function nd(t){return t!==t}function iy(t,e,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===e)return i;return-1}function Hr(t,e,n){return e===e?iy(t,e,n):Fa(t,nd,n)}function Ra(t,e){var n=t==null?0:t.length;return!!n&&Hr(t,e,0)>-1}var ry=1,oy=2,ay=8,sy=16,ly=32,cy=64,uy=128,hy=256,dy=512,fy=[["ary",uy],["bind",ry],["bindKey",oy],["curry",ay],["curryRight",sy],["flip",dy],["partial",ly],["partialRight",cy],["rearg",hy]];function py(t,e){return Gn(fy,function(n){var i="_."+n[0];e&n[1]&&!Ra(t,i)&&t.push(i)}),t.sort()}function id(t,e,n){var i=e+"";return q3(t,ny(i,py(ey(i),n)))}var gy=1,vy=2,Ay=4,my=8,rd=32,od=64;function ad(t,e,n,i,o,p,v,c,r,d){var u=e&my,a=u?v:void 0,l=u?void 0:v,s=u?p:void 0,h=u?void 0:p;e|=u?rd:od,e&=~(u?od:rd),e&Ay||(e&=~(gy|vy));var g=[t,e,o,s,a,h,l,c,r,d],f=n.apply(void 0,g);return al(t)&&td(f,g),f.placeholder=i,id(f,t,e)}function Gr(t){var e=t;return e.placeholder}var yy=Math.min;function by(t,e){for(var n=t.length,i=yy(e.length,n),o=xn(t);i--;){var p=e[i];t[i]=Do(p,n)?o[p]:void 0}return t}var sd="__lodash_placeholder__";function Ni(t,e){for(var n=-1,i=t.length,o=0,p=[];++n<i;){var v=t[n];(v===e||v===sd)&&(t[n]=sd,p[o++]=n)}return p}var Cy=1,wy=2,xy=8,_y=16,Sy=128,Ey=512;function Na(t,e,n,i,o,p,v,c,r,d){var u=e&Sy,a=e&Cy,l=e&wy,s=e&(xy|_y),h=e&Ey,g=l?void 0:jo(t);function f(){for(var A=arguments.length,m=Array(A),y=A;y--;)m[y]=arguments[y];if(s)var b=Gr(f),x=Y2(m,b);if(i&&(m=Jh(m,i,o,s)),p&&(m=Zh(m,p,v,s)),A-=x,s&&A<d){var S=Ni(m,b);return ad(t,e,Na,f.placeholder,n,m,S,c,r,d-A)}var O=a?n:this,R=l?O[t]:t;return A=m.length,c?m=by(m,c):h&&A>1&&m.reverse(),u&&r<A&&(m.length=r),this&&this!==jr&&this instanceof f&&(R=g||jo(R)),R.apply(O,m)}return f}function Iy(t,e,n){var i=jo(t);function o(){for(var p=arguments.length,v=Array(p),c=p,r=Gr(o);c--;)v[c]=arguments[c];var d=p<3&&v[0]!==r&&v[p-1]!==r?[]:Ni(v,r);if(p-=d.length,p<n)return ad(t,e,Na,o.placeholder,void 0,v,d,void 0,void 0,n-p);var u=this&&this!==jr&&this instanceof o?i:t;return Tn(u,this,v)}return o}var ky=1;function By(t,e,n,i){var o=e&ky,p=jo(t);function v(){for(var c=-1,r=arguments.length,d=-1,u=i.length,a=Array(u+r),l=this&&this!==jr&&this instanceof v?p:t;++d<u;)a[d]=i[d];for(;r--;)a[d++]=arguments[++c];return Tn(l,o?n:this,a)}return v}var ld="__lodash_placeholder__",sl=1,Oy=2,Dy=4,cd=8,Fo=128,ud=256,Ty=Math.min;function My(t,e){var n=t[1],i=e[1],o=n|i,p=o<(sl|Oy|Fo),v=i==Fo&&n==cd||i==Fo&&n==ud&&t[7].length<=e[8]||i==(Fo|ud)&&e[7].length<=e[8]&&n==cd;if(!(p||v))return t;i&sl&&(t[2]=e[2],o|=n&sl?0:Dy);var c=e[3];if(c){var r=t[3];t[3]=r?Jh(r,c,e[4]):c,t[4]=r?Ni(t[3],ld):e[4]}return c=e[5],c&&(r=t[5],t[5]=r?Zh(r,c,e[6]):c,t[6]=r?Ni(t[5],ld):e[6]),c=e[7],c&&(t[7]=c),i&Fo&&(t[8]=t[8]==null?e[8]:Ty(t[8],e[8])),t[9]==null&&(t[9]=e[9]),t[0]=e[0],t[1]=o,t}var Qy="Expected a function",hd=1,Ly=2,ll=8,cl=16,ul=32,dd=64,fd=Math.max;function Ai(t,e,n,i,o,p,v,c){var r=e&Ly;if(!r&&typeof t!="function")throw new TypeError(Qy);var d=i?i.length:0;if(d||(e&=~(ul|dd),i=o=void 0),v=v===void 0?v:fd(ze(v),0),c=c===void 0?c:ze(c),d-=o?o.length:0,e&dd){var u=i,a=o;i=o=void 0}var l=r?void 0:ol(t),s=[t,e,n,i,o,u,a,p,v,c];if(l&&My(s,l),t=s[0],e=s[1],n=s[2],i=s[3],o=s[4],c=s[9]=s[9]===void 0?r?0:t.length:fd(s[9]-d,0),!c&&e&(ll|cl)&&(e&=~(ll|cl)),!e||e==hd)var h=U2(t,e,n);else e==ll||e==cl?h=Iy(t,e,c):(e==ul||e==(hd|ul))&&!o.length?h=By(t,e,n,i):h=Na.apply(void 0,s);var g=l?Kh:td;return id(g(h,s),t,e)}var jy=128;function pd(t,e,n){return e=n?void 0:e,e=t&&e==null?t.length:e,Ai(t,jy,void 0,void 0,void 0,void 0,e)}function qe(t,e){return q3(kU(t,e,mn),t+"")}function rn(t,e,n){if(!En(n))return!1;var i=typeof e;return(i=="number"?Mn(n)&&Do(e,n.length):i=="string"&&e in n)?Li(n[e],t):!1}function Yr(t){return qe(function(e,n){var i=-1,o=n.length,p=o>1?n[o-1]:void 0,v=o>2?n[2]:void 0;for(p=t.length>3&&typeof p=="function"?(o--,p):void 0,v&&rn(n[0],n[1],v)&&(p=o<3?void 0:p,o=1),e=Object(e);++i<o;){var c=n[i];c&&t(e,c,i,p)}return e})}var Py=Object.prototype,Fy=Py.hasOwnProperty,Ry=Yr(function(t,e){if(K3(e)||Mn(e)){Eo(e,Zt(e),t);return}for(var n in e)Fy.call(e,n)&&_2(t,n,e[n])}),gd=Yr(function(t,e){Eo(e,Yn(e),t)}),za=Yr(function(t,e,n,i){Eo(e,Yn(e),t,i)}),Ny=Yr(function(t,e,n,i){Eo(e,Zt(e),t,i)});function hl(t,e){for(var n=-1,i=e.length,o=Array(i),p=t==null;++n<i;)o[n]=p?void 0:_n(t,e[n]);return o}var zy=tr(hl),Vy="[object Object]",Uy=Function.prototype,Hy=Object.prototype,vd=Uy.toString,Gy=Hy.hasOwnProperty,Yy=vd.call(Object);function Ro(t){if(!en(t)||ji(t)!=Vy)return!1;var e=J3(t);if(e===null)return!0;var n=Gy.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&vd.call(n)==Yy}var Wy="[object DOMException]",Xy="[object Error]";function dl(t){if(!en(t))return!1;var e=ji(t);return e==Xy||e==Wy||typeof t.message=="string"&&typeof t.name=="string"&&!Ro(t)}var Ad=qe(function(t,e){try{return Tn(t,void 0,e)}catch(n){return dl(n)?n:new Error(n)}}),$y="Expected a function";function md(t,e){var n;if(typeof e!="function")throw new TypeError($y);return t=ze(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}var qy=1,Ky=32,Va=qe(function(t,e,n){var i=qy;if(n.length){var o=Ni(n,Gr(Va));i|=Ky}return Ai(t,i,e,n,o)});Va.placeholder={};var Jy=tr(function(t,e){return Gn(e,function(n){n=Pr(n),Fr(t,n,Va(t[n],t))}),t}),Zy=1,eb=2,tb=32,fl=qe(function(t,e,n){var i=Zy|eb;if(n.length){var o=Ni(n,Gr(fl));i|=tb}return Ai(e,i,t,n,o)});fl.placeholder={};function kn(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var p=Array(o);++i<o;)p[i]=t[i+e];return p}function zi(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:kn(t,e,n)}var nb="\uD800-\uDFFF",ib="\\u0300-\\u036f",rb="\\ufe20-\\ufe2f",ob="\\u20d0-\\u20ff",ab=ib+rb+ob,sb="\\ufe0e\\ufe0f",lb="\\u200d",cb=RegExp("["+lb+nb+ab+sb+"]");function Wr(t){return cb.test(t)}function ub(t){return t.split("")}var yd="\uD800-\uDFFF",hb="\\u0300-\\u036f",db="\\ufe20-\\ufe2f",fb="\\u20d0-\\u20ff",pb=hb+db+fb,gb="\\ufe0e\\ufe0f",vb="["+yd+"]",pl="["+pb+"]",gl="\uD83C[\uDFFB-\uDFFF]",Ab="(?:"+pl+"|"+gl+")",bd="[^"+yd+"]",Cd="(?:\uD83C[\uDDE6-\uDDFF]){2}",wd="[\uD800-\uDBFF][\uDC00-\uDFFF]",mb="\\u200d",xd=Ab+"?",_d="["+gb+"]?",yb="(?:"+mb+"(?:"+[bd,Cd,wd].join("|")+")"+_d+xd+")*",bb=_d+xd+yb,Cb="(?:"+[bd+pl+"?",pl,Cd,wd,vb].join("|")+")",wb=RegExp(gl+"(?="+gl+")|"+Cb+bb,"g");function xb(t){return t.match(wb)||[]}function jn(t){return Wr(t)?xb(t):ub(t)}function Sd(t){return function(e){e=vt(e);var n=Wr(e)?jn(e):void 0,i=n?n[0]:e.charAt(0),o=n?zi(n,1).join(""):e.slice(1);return i[t]()+o}}var vl=Sd("toUpperCase");function Ed(t){return vl(vt(t).toLowerCase())}function Al(t,e,n,i){var o=-1,p=t==null?0:t.length;for(i&&p&&(n=t[++o]);++o<p;)n=e(n,t[o],o,t);return n}function ml(t){return function(e){return t==null?void 0:t[e]}}var _b={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Sb=ml(_b),Eb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ib="\\u0300-\\u036f",kb="\\ufe20-\\ufe2f",Bb="\\u20d0-\\u20ff",Ob=Ib+kb+Bb,Db="["+Ob+"]",Tb=RegExp(Db,"g");function Id(t){return t=vt(t),t&&t.replace(Eb,Sb).replace(Tb,"")}var Mb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Qb(t){return t.match(Mb)||[]}var Lb=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function jb(t){return Lb.test(t)}var kd="\uD800-\uDFFF",Pb="\\u0300-\\u036f",Fb="\\ufe20-\\ufe2f",Rb="\\u20d0-\\u20ff",Nb=Pb+Fb+Rb,Bd="\\u2700-\\u27bf",Od="a-z\\xdf-\\xf6\\xf8-\\xff",zb="\\xac\\xb1\\xd7\\xf7",Vb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ub="\\u2000-\\u206f",Hb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dd="A-Z\\xc0-\\xd6\\xd8-\\xde",Gb="\\ufe0e\\ufe0f",Td=zb+Vb+Ub+Hb,Md="['\u2019]",Qd="["+Td+"]",Yb="["+Nb+"]",Ld="\\d+",Wb="["+Bd+"]",jd="["+Od+"]",Pd="[^"+kd+Td+Ld+Bd+Od+Dd+"]",Xb="\uD83C[\uDFFB-\uDFFF]",$b="(?:"+Yb+"|"+Xb+")",qb="[^"+kd+"]",Fd="(?:\uD83C[\uDDE6-\uDDFF]){2}",Rd="[\uD800-\uDBFF][\uDC00-\uDFFF]",Xr="["+Dd+"]",Kb="\\u200d",Nd="(?:"+jd+"|"+Pd+")",Jb="(?:"+Xr+"|"+Pd+")",zd="(?:"+Md+"(?:d|ll|m|re|s|t|ve))?",Vd="(?:"+Md+"(?:D|LL|M|RE|S|T|VE))?",Ud=$b+"?",Hd="["+Gb+"]?",Zb="(?:"+Kb+"(?:"+[qb,Fd,Rd].join("|")+")"+Hd+Ud+")*",eC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nC=Hd+Ud+Zb,iC="(?:"+[Wb,Fd,Rd].join("|")+")"+nC,rC=RegExp([Xr+"?"+jd+"+"+zd+"(?="+[Qd,Xr,"$"].join("|")+")",Jb+"+"+Vd+"(?="+[Qd,Xr+Nd,"$"].join("|")+")",Xr+"?"+Nd+"+"+zd,Xr+"+"+Vd,tC,eC,Ld,iC].join("|"),"g");function oC(t){return t.match(rC)||[]}function Gd(t,e,n){return t=vt(t),e=n?void 0:e,e===void 0?jb(t)?oC(t):Qb(t):t.match(e)||[]}var aC="['\u2019]",sC=RegExp(aC,"g");function $r(t){return function(e){return Al(Gd(Id(e).replace(sC,"")),t,"")}}var lC=$r(function(t,e,n){return e=e.toLowerCase(),t+(n?Ed(e):e)}),cC=jr.isFinite,uC=Math.min;function yl(t){var e=Math[t];return function(n,i){if(n=ci(n),i=i==null?0:uC(ze(i),292),i&&cC(n)){var o=(vt(n)+"e").split("e"),p=e(o[0]+"e"+(+o[1]+i));return o=(vt(p)+"e").split("e"),+(o[0]+"e"+(+o[1]-i))}return e(n)}}var hC=yl("ceil");function Yd(t){var e=G(t);return e.__chain__=!0,e}var dC=Math.ceil,fC=Math.max;function pC(t,e,n){(n?rn(t,e,n):e===void 0)?e=1:e=fC(ze(e),0);var i=t==null?0:t.length;if(!i||e<1)return[];for(var o=0,p=0,v=Array(dC(i/e));o<i;)v[p++]=kn(t,o,o+=e);return v}function fr(t,e,n){return t===t&&(n!==void 0&&(t=t<=n?t:n),e!==void 0&&(t=t>=e?t:e)),t}function gC(t,e,n){return n===void 0&&(n=e,e=void 0),n!==void 0&&(n=ci(n),n=n===n?n:0),e!==void 0&&(e=ci(e),e=e===e?e:0),fr(ci(t),e,n)}var vC=1,AC=4;function mC(t){return nr(t,vC|AC)}var yC=1,bC=4;function CC(t,e){return e=typeof e=="function"?e:void 0,nr(t,yC|bC,e)}var wC=4;function xC(t,e){return e=typeof e=="function"?e:void 0,nr(t,wC,e)}function _C(){return new In(this.value(),this.__chain__)}function SC(t){for(var e=-1,n=t==null?0:t.length,i=0,o=[];++e<n;){var p=t[e];p&&(o[i++]=p)}return o}function EC(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return ka(rt(n)?xn(n):[n],sn(e,1))}var IC="__lodash_hash_undefined__";function kC(t){return this.__data__.set(t,IC),this}function BC(t){return this.__data__.has(t)}function pr(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new jH;++e<n;)this.add(t[e])}pr.prototype.add=pr.prototype.push=kC,pr.prototype.has=BC;function bl(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function No(t,e){return t.has(e)}var OC=1,DC=2;function Wd(t,e,n,i,o,p){var v=n&OC,c=t.length,r=e.length;if(c!=r&&!(v&&r>c))return!1;var d=p.get(t),u=p.get(e);if(d&&u)return d==e&&u==t;var a=-1,l=!0,s=n&DC?new pr:void 0;for(p.set(t,e),p.set(e,t);++a<c;){var h=t[a],g=e[a];if(i)var f=v?i(g,h,a,e,t,p):i(h,g,a,t,e,p);if(f!==void 0){if(f)continue;l=!1;break}if(s){if(!bl(e,function(A,m){if(!No(s,m)&&(h===A||o(h,A,n,i,p)))return s.push(m)})){l=!1;break}}else if(!(h===g||o(h,g,n,i,p))){l=!1;break}}return p.delete(t),p.delete(e),l}function Cl(t){var e=-1,n=Array(t.size);return t.forEach(function(i,o){n[++e]=[o,i]}),n}function Ua(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var TC=1,MC=2,QC="[object Boolean]",LC="[object Date]",jC="[object Error]",PC="[object Map]",FC="[object Number]",RC="[object RegExp]",NC="[object Set]",zC="[object String]",VC="[object Symbol]",UC="[object ArrayBuffer]",HC="[object DataView]",Xd=To?To.prototype:void 0,wl=Xd?Xd.valueOf:void 0;function GC(t,e,n,i,o,p,v){switch(n){case HC:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case UC:return!(t.byteLength!=e.byteLength||!p(new Z3(t),new Z3(e)));case QC:case LC:case FC:return Li(+t,+e);case jC:return t.name==e.name&&t.message==e.message;case RC:case zC:return t==e+"";case PC:var c=Cl;case NC:var r=i&TC;if(c||(c=Ua),t.size!=e.size&&!r)return!1;var d=v.get(t);if(d)return d==e;i|=MC,v.set(t,e);var u=Wd(c(t),c(e),i,o,p,v);return v.delete(t),u;case VC:if(wl)return wl.call(t)==wl.call(e)}return!1}var YC=1,WC=Object.prototype,XC=WC.hasOwnProperty;function $C(t,e,n,i,o,p){var v=n&YC,c=e2(t),r=c.length,d=e2(e),u=d.length;if(r!=u&&!v)return!1;for(var a=r;a--;){var l=c[a];if(!(v?l in e:XC.call(e,l)))return!1}var s=p.get(t),h=p.get(e);if(s&&h)return s==e&&h==t;var g=!0;p.set(t,e),p.set(e,t);for(var f=v;++a<r;){l=c[a];var A=t[l],m=e[l];if(i)var y=v?i(m,A,l,e,t,p):i(A,m,l,t,e,p);if(!(y===void 0?A===m||o(A,m,n,i,p):y)){g=!1;break}f||(f=l=="constructor")}if(g&&!f){var b=t.constructor,x=e.constructor;b!=x&&"constructor"in t&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(g=!1)}return p.delete(t),p.delete(e),g}var qC=1,$d="[object Arguments]",qd="[object Array]",Ha="[object Object]",KC=Object.prototype,Kd=KC.hasOwnProperty;function JC(t,e,n,i,o,p){var v=rt(t),c=rt(e),r=v?qd:Ir(t),d=c?qd:Ir(e);r=r==$d?Ha:r,d=d==$d?Ha:d;var u=r==Ha,a=d==Ha,l=r==d;if(l&&Io(t)){if(!Io(e))return!1;v=!0,u=!1}if(l&&!u)return p||(p=new Ba),v||Oa(t)?Wd(t,e,n,i,o,p):GC(t,e,r,n,i,o,p);if(!(n&qC)){var s=u&&Kd.call(t,"__wrapped__"),h=a&&Kd.call(e,"__wrapped__");if(s||h){var g=s?t.value():t,f=h?e.value():e;return p||(p=new Ba),o(g,f,n,i,p)}}return l?(p||(p=new Ba),$C(t,e,n,i,o,p)):!1}function zo(t,e,n,i,o){return t===e?!0:t==null||e==null||!en(t)&&!en(e)?t!==t&&e!==e:JC(t,e,n,i,zo,o)}var ZC=1,ew=2;function xl(t,e,n,i){var o=n.length,p=o,v=!i;if(t==null)return!p;for(t=Object(t);o--;){var c=n[o];if(v&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<p;){c=n[o];var r=c[0],d=t[r],u=c[1];if(v&&c[2]){if(d===void 0&&!(r in t))return!1}else{var a=new Ba;if(i)var l=i(d,u,r,t,e,a);if(!(l===void 0?zo(u,d,ZC|ew,i,a):l))return!1}}return!0}function Jd(t){return t===t&&!En(t)}function _l(t){for(var e=Zt(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,Jd(o)]}return e}function Zd(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function ef(t){var e=_l(t);return e.length==1&&e[0][2]?Zd(e[0][0],e[0][1]):function(n){return n===t||xl(n,t,e)}}var tw=1,nw=2;function tf(t,e){return S2(t)&&Jd(e)?Zd(Pr(t),e):function(n){var i=_n(n,t);return i===void 0&&i===e?t2(n,t):zo(e,i,tw|nw)}}function Sl(t){return function(e){return e==null?void 0:e[t]}}function iw(t){return function(e){return Da(e,t)}}function nf(t){return S2(t)?Sl(Pr(t)):iw(t)}function He(t){return typeof t=="function"?t:t==null?mn:typeof t=="object"?rt(t)?tf(t[0],t[1]):ef(t):nf(t)}var rw="Expected a function";function ow(t){var e=t==null?0:t.length,n=He;return t=e?Lt(t,function(i){if(typeof i[1]!="function")throw new TypeError(rw);return[n(i[0]),i[1]]}):[],qe(function(i){for(var o=-1;++o<e;){var p=t[o];if(Tn(p[0],this,i))return Tn(p[1],this,i)}})}function rf(t,e,n){var i=n.length;if(t==null)return!i;for(t=Object(t);i--;){var o=n[i],p=e[o],v=t[o];if(v===void 0&&!(o in t)||!p(v))return!1}return!0}function aw(t){var e=Zt(t);return function(n){return rf(n,t,e)}}var sw=1;function lw(t){return aw(nr(t,sw))}function cw(t,e){return e==null||rf(t,e,Zt(e))}function uw(t,e,n,i){for(var o=-1,p=t==null?0:t.length;++o<p;){var v=t[o];e(i,v,n(v),t)}return i}function of(t){return function(e,n,i){for(var o=-1,p=Object(e),v=i(e),c=v.length;c--;){var r=v[t?c:++o];if(n(p[r],r,p)===!1)break}return e}}var El=of();function Kn(t,e){return t&&El(t,e,Zt)}function af(t,e){return function(n,i){if(n==null)return n;if(!Mn(n))return t(n,i);for(var o=n.length,p=e?o:-1,v=Object(n);(e?p--:++p<o)&&i(v[p],p,v)!==!1;);return n}}var Vi=af(Kn);function hw(t,e,n,i){return Vi(t,function(o,p,v){e(i,o,n(o),v)}),i}function Ga(t,e){return function(n,i){var o=rt(n)?uw:hw,p=e?e():{};return o(n,t,He(i),p)}}var dw=Object.prototype,fw=dw.hasOwnProperty,pw=Ga(function(t,e,n){fw.call(t,n)?++t[n]:Fr(t,n,1)});function gw(t,e){var n=Ia(t);return e==null?n:BU(n,e)}var vw=8;function Il(t,e,n){e=n?void 0:e;var i=Ai(t,vw,void 0,void 0,void 0,void 0,void 0,e);return i.placeholder=Il.placeholder,i}Il.placeholder={};var Aw=16;function kl(t,e,n){e=n?void 0:e;var i=Ai(t,Aw,void 0,void 0,void 0,void 0,void 0,e);return i.placeholder=kl.placeholder,i}kl.placeholder={};function mw(t,e){return t==null||t!==t?e:t}var sf=Object.prototype,yw=sf.hasOwnProperty,bw=qe(function(t,e){t=Object(t);var n=-1,i=e.length,o=i>2?e[2]:void 0;for(o&&rn(e[0],e[1],o)&&(i=1);++n<i;)for(var p=e[n],v=Yn(p),c=-1,r=v.length;++c<r;){var d=v[c],u=t[d];(u===void 0||Li(u,sf[d])&&!yw.call(t,d))&&(t[d]=p[d])}return t});function Bl(t,e,n){(n!==void 0&&!Li(t[e],n)||n===void 0&&!(e in t))&&Fr(t,e,n)}function Nt(t){return en(t)&&Mn(t)}function Ol(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function lf(t){return Eo(t,Yn(t))}function Cw(t,e,n,i,o,p,v){var c=Ol(t,n),r=Ol(e,n),d=v.get(r);if(d){Bl(t,n,d);return}var u=p?p(c,r,n+"",t,e,v):void 0,a=u===void 0;if(a){var l=rt(r),s=!l&&Io(r),h=!l&&!s&&Oa(r);u=r,l||s||h?rt(c)?u=c:Nt(c)?u=xn(c):s?(a=!1,u=OU(r,!0)):h?(a=!1,u=DU(r,!0)):u=[]:Ro(r)||Xs(r)?(u=c,Xs(c)?u=lf(c):(!En(c)||Rr(c))&&(u=TU(r))):a=!1}a&&(v.set(r,u),o(u,r,i,p,v),v.delete(r)),Bl(t,n,u)}function Ya(t,e,n,i,o){t!==e&&El(e,function(p,v){if(o||(o=new Ba),En(p))Cw(t,e,v,n,Ya,i,o);else{var c=i?i(Ol(t,v),p,v+"",t,e,o):void 0;c===void 0&&(c=p),Bl(t,v,c)}},Yn)}function cf(t,e,n,i,o,p){return En(t)&&En(e)&&(p.set(e,t),Ya(t,e,void 0,cf,p),p.delete(e)),t}var uf=Yr(function(t,e,n,i){Ya(t,e,n,i)}),ww=qe(function(t){return t.push(void 0,cf),Tn(uf,void 0,t)}),xw="Expected a function";function hf(t,e,n){if(typeof t!="function")throw new TypeError(xw);return setTimeout(function(){t.apply(void 0,n)},e)}var _w=qe(function(t,e){return hf(t,1,e)}),Sw=qe(function(t,e,n){return hf(t,ci(e)||0,n)});function Dl(t,e,n){for(var i=-1,o=t==null?0:t.length;++i<o;)if(n(e,t[i]))return!0;return!1}var Ew=200;function Vo(t,e,n,i){var o=-1,p=Ra,v=!0,c=t.length,r=[],d=e.length;if(!c)return r;n&&(e=Lt(e,ui(n))),i?(p=Dl,v=!1):e.length>=Ew&&(p=No,v=!1,e=new pr(e));e:for(;++o<c;){var u=t[o],a=n==null?u:n(u);if(u=i||u!==0?u:0,v&&a===a){for(var l=d;l--;)if(e[l]===a)continue e;r.push(u)}else p(e,a,i)||r.push(u)}return r}var Iw=qe(function(t,e){return Nt(t)?Vo(t,sn(e,1,Nt,!0)):[]});function bn(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var kw=qe(function(t,e){var n=bn(e);return Nt(n)&&(n=void 0),Nt(t)?Vo(t,sn(e,1,Nt,!0),He(n)):[]}),Bw=qe(function(t,e){var n=bn(e);return Nt(n)&&(n=void 0),Nt(t)?Vo(t,sn(e,1,Nt,!0),void 0,n):[]}),Ow=yt(function(t,e){return t/e},1);function Dw(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===void 0?1:ze(e),kn(t,e<0?0:e,i)):[]}function Tw(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===void 0?1:ze(e),e=i-e,kn(t,0,e<0?0:e)):[]}function Wa(t,e,n,i){for(var o=t.length,p=i?o:-1;(i?p--:++p<o)&&e(t[p],p,t););return n?kn(t,i?0:p,i?p+1:o):kn(t,i?p+1:0,i?o:p)}function Mw(t,e){return t&&t.length?Wa(t,He(e),!0,!0):[]}function Qw(t,e){return t&&t.length?Wa(t,He(e),!0):[]}function Jn(t){return typeof t=="function"?t:mn}function df(t,e){var n=rt(t)?Gn:Vi;return n(t,Jn(e))}function Lw(t,e){for(var n=t==null?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}var ff=of(!0);function Tl(t,e){return t&&ff(t,e,Zt)}var pf=af(Tl,!0);function gf(t,e){var n=rt(t)?Lw:pf;return n(t,Jn(e))}function jw(t,e,n){t=vt(t),e=$n(e);var i=t.length;n=n===void 0?i:fr(ze(n),0,i);var o=n;return n-=e.length,n>=0&&t.slice(n,o)==e}function Pw(t,e){return Lt(e,function(n){return[n,t[n]]})}function Fw(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=[i,i]}),n}var Rw="[object Map]",Nw="[object Set]";function vf(t){return function(e){var n=Ir(e);return n==Rw?Cl(e):n==Nw?Fw(e):Pw(e,t(e))}}var Af=vf(Zt),mf=vf(Yn),zw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vw=ml(zw),yf=/[&<>"']/g,Uw=RegExp(yf.source);function bf(t){return t=vt(t),t&&Uw.test(t)?t.replace(yf,Vw):t}var Cf=/[\\^$.*+?()[\]{}|]/g,Hw=RegExp(Cf.source);function Gw(t){return t=vt(t),t&&Hw.test(t)?t.replace(Cf,"\\$&"):t}function wf(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Yw(t,e){var n=!0;return Vi(t,function(i,o,p){return n=!!e(i,o,p),n}),n}function Ww(t,e,n){var i=rt(t)?wf:Yw;return n&&rn(t,e,n)&&(e=void 0),i(t,He(e))}var Xw=4294967295;function xf(t){return t?fr(ze(t),0,Xw):0}function $w(t,e,n,i){var o=t.length;for(n=ze(n),n<0&&(n=-n>o?0:o+n),i=i===void 0||i>o?o:ze(i),i<0&&(i+=o),i=n>i?0:xf(i);n<i;)t[n++]=e;return t}function qw(t,e,n,i){var o=t==null?0:t.length;return o?(n&&typeof n!="number"&&rn(t,e,n)&&(n=0,i=o),$w(t,e,n,i)):[]}function _f(t,e){var n=[];return Vi(t,function(i,o,p){e(i,o,p)&&n.push(i)}),n}function Kw(t,e){var n=rt(t)?kr:_f;return n(t,He(e))}function Sf(t){return function(e,n,i){var o=Object(e);if(!Mn(e)){var p=He(n);e=Zt(e),n=function(c){return p(o[c],c,o)}}var v=t(e,n,i);return v>-1?o[p?e[v]:v]:void 0}}var Jw=Math.max;function Ef(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=n==null?0:ze(n);return o<0&&(o=Jw(i+o,0)),Fa(t,He(e),o)}var Zw=Sf(Ef);function If(t,e,n){var i;return n(t,function(o,p,v){if(e(o,p,v))return i=p,!1}),i}function e6(t,e){return If(t,He(e),Kn)}var t6=Math.max,n6=Math.min;function Ml(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=i-1;return n!==void 0&&(o=ze(n),o=n<0?t6(i+o,0):n6(o,i-1)),Fa(t,He(e),o,!0)}var i6=Sf(Ml);function r6(t,e){return If(t,He(e),Tl)}function kf(t){return t&&t.length?t[0]:void 0}function Bf(t,e){var n=-1,i=Mn(t)?Array(t.length):[];return Vi(t,function(o,p,v){i[++n]=e(o,p,v)}),i}function Xa(t,e){var n=rt(t)?Lt:Bf;return n(t,He(e))}function o6(t,e){return sn(Xa(t,e),1)}var a6=1/0;function s6(t,e){return sn(Xa(t,e),a6)}function l6(t,e,n){return n=n===void 0?1:ze(n),sn(Xa(t,e),n)}var c6=1/0;function u6(t){var e=t==null?0:t.length;return e?sn(t,c6):[]}function h6(t,e){var n=t==null?0:t.length;return n?(e=e===void 0?1:ze(e),sn(t,e)):[]}var d6=512;function f6(t){return Ai(t,d6)}var p6=yl("floor"),g6="Expected a function",v6=8,A6=32,m6=128,y6=256;function Of(t){return tr(function(e){var n=e.length,i=n,o=In.prototype.thru;for(t&&e.reverse();i--;){var p=e[i];if(typeof p!="function")throw new TypeError(g6);if(o&&!v&&Pa(p)=="wrapper")var v=new In([],!0)}for(i=v?i:n;++i<n;){p=e[i];var c=Pa(p),r=c=="wrapper"?ol(p):void 0;r&&al(r[0])&&r[1]==(m6|v6|A6|y6)&&!r[4].length&&r[9]==1?v=v[Pa(r[0])].apply(v,r[3]):v=p.length==1&&al(p)?v[c]():v.thru(p)}return function(){var d=arguments,u=d[0];if(v&&d.length==1&&rt(u))return v.plant(u).value();for(var a=0,l=n?e[a].apply(this,d):u;++a<n;)l=e[a].call(this,l);return l}})}var b6=Of(),C6=Of(!0);function w6(t,e){return t==null?t:El(t,Jn(e),Yn)}function x6(t,e){return t==null?t:ff(t,Jn(e),Yn)}function _6(t,e){return t&&Kn(t,Jn(e))}function S6(t,e){return t&&Tl(t,Jn(e))}function $a(t,e){return kr(e,function(n){return Rr(t[n])})}function E6(t){return t==null?[]:$a(t,Zt(t))}function I6(t){return t==null?[]:$a(t,Yn(t))}var k6=Object.prototype,B6=k6.hasOwnProperty,O6=Ga(function(t,e,n){B6.call(t,n)?t[n].push(e):Fr(t,n,[e])});function Ql(t,e){return t>e}function qa(t){return function(e,n){return typeof e=="string"&&typeof n=="string"||(e=ci(e),n=ci(n)),t(e,n)}}var D6=qa(Ql),T6=qa(function(t,e){return t>=e}),M6=Object.prototype,Q6=M6.hasOwnProperty;function L6(t,e){return t!=null&&Q6.call(t,e)}function j6(t,e){return t!=null&&MU(t,e,L6)}var P6=Math.max,F6=Math.min;function R6(t,e,n){return t>=F6(e,n)&&t<P6(e,n)}function N6(t,e,n){return e=Ln(e),n===void 0?(n=e,e=0):n=Ln(n),t=ci(t),R6(t,e,n)}var z6="[object String]";function Ka(t){return typeof t=="string"||!rt(t)&&en(t)&&ji(t)==z6}function Ll(t,e){return Lt(e,function(n){return t[n]})}function qr(t){return t==null?[]:Ll(t,Zt(t))}var V6=Math.max;function U6(t,e,n,i){t=Mn(t)?t:qr(t),n=n&&!i?ze(n):0;var o=t.length;return n<0&&(n=V6(o+n,0)),Ka(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Hr(t,e,n)>-1}var H6=Math.max;function G6(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=n==null?0:ze(n);return o<0&&(o=H6(i+o,0)),Hr(t,e,o)}function Y6(t){var e=t==null?0:t.length;return e?kn(t,0,-1):[]}var W6=Math.min;function jl(t,e,n){for(var i=n?Dl:Ra,o=t[0].length,p=t.length,v=p,c=Array(p),r=1/0,d=[];v--;){var u=t[v];v&&e&&(u=Lt(u,ui(e))),r=W6(u.length,r),c[v]=!n&&(e||o>=120&&u.length>=120)?new pr(v&&u):void 0}u=t[0];var a=-1,l=c[0];e:for(;++a<o&&d.length<r;){var s=u[a],h=e?e(s):s;if(s=n||s!==0?s:0,!(l?No(l,h):i(d,h,n))){for(v=p;--v;){var g=c[v];if(!(g?No(g,h):i(t[v],h,n)))continue e}l&&l.push(h),d.push(s)}}return d}function Pl(t){return Nt(t)?t:[]}var X6=qe(function(t){var e=Lt(t,Pl);return e.length&&e[0]===t[0]?jl(e):[]}),$6=qe(function(t){var e=bn(t),n=Lt(t,Pl);return e===bn(n)?e=void 0:n.pop(),n.length&&n[0]===t[0]?jl(n,He(e)):[]}),q6=qe(function(t){var e=bn(t),n=Lt(t,Pl);return e=typeof e=="function"?e:void 0,e&&n.pop(),n.length&&n[0]===t[0]?jl(n,void 0,e):[]});function K6(t,e,n,i){return Kn(t,function(o,p,v){e(i,n(o),p,v)}),i}function Df(t,e){return function(n,i){return K6(n,t,e(i),{})}}var J6=Object.prototype,Z6=J6.toString,ex=Df(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=Z6.call(e)),t[e]=n},n2(mn)),Tf=Object.prototype,tx=Tf.hasOwnProperty,nx=Tf.toString,ix=Df(function(t,e,n){e!=null&&typeof e.toString!="function"&&(e=nx.call(e)),tx.call(t,e)?t[e].push(n):t[e]=[n]},He);function Mf(t,e){return e.length<2?t:Da(t,kn(e,0,-1))}function Uo(t,e,n){e=nl(e,t),t=Mf(t,e);var i=t==null?t:t[Pr(bn(e))];return i==null?void 0:Tn(i,t,n)}var rx=qe(Uo),ox=qe(function(t,e,n){var i=-1,o=typeof e=="function",p=Mn(t)?Array(t.length):[];return Vi(t,function(v){p[++i]=o?Tn(e,v,n):Uo(v,e,n)}),p}),ax="[object ArrayBuffer]";function sx(t){return en(t)&&ji(t)==ax}var Qf=ko&&ko.isArrayBuffer,lx=Qf?ui(Qf):sx,cx="[object Boolean]";function ux(t){return t===!0||t===!1||en(t)&&ji(t)==cx}var hx="[object Date]";function dx(t){return en(t)&&ji(t)==hx}var Lf=ko&&ko.isDate,fx=Lf?ui(Lf):dx;function px(t){return en(t)&&t.nodeType===1&&!Ro(t)}var gx="[object Map]",vx="[object Set]",Ax=Object.prototype,mx=Ax.hasOwnProperty;function yx(t){if(t==null)return!0;if(Mn(t)&&(rt(t)||typeof t=="string"||typeof t.splice=="function"||Io(t)||Oa(t)||Xs(t)))return!t.length;var e=Ir(t);if(e==gx||e==vx)return!t.size;if(K3(t))return!i2(t).length;for(var n in t)if(mx.call(t,n))return!1;return!0}function gr(t,e){return zo(t,e)}function bx(t,e,n){n=typeof n=="function"?n:void 0;var i=n?n(t,e):void 0;return i===void 0?zo(t,e,void 0,n):!!i}var Cx=jr.isFinite;function wx(t){return typeof t=="number"&&Cx(t)}function jf(t){return typeof t=="number"&&t==ze(t)}function xx(t,e){return t===e||xl(t,e,_l(e))}function _x(t,e,n){return n=typeof n=="function"?n:void 0,xl(t,e,_l(e),n)}var Sx="[object Number]";function Yt(t){return typeof t=="number"||en(t)&&ji(t)==Sx}function Ex(t){return Yt(t)&&t!=+t}var Ix=PH?Rr:r2,kx="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function Bx(t){if(Ix(t))throw new Error(kx);return FH(t)}function Ox(t){return t===null}var Dx="[object RegExp]";function Tx(t){return en(t)&&ji(t)==Dx}var Pf=ko&&ko.isRegExp,Fl=Pf?ui(Pf):Tx,Ff=9007199254740991;function Mx(t){return jf(t)&&t>=-Ff&&t<=Ff}var Qx="[object WeakMap]";function Lx(t){return en(t)&&Ir(t)==Qx}var jx="[object WeakSet]";function Px(t){return en(t)&&ji(t)==jx}var Fx=1;function Rx(t){return He(typeof t=="function"?t:nr(t,Fx))}var Nx=Array.prototype,zx=Nx.join;function Vx(t,e){return t==null?"":zx.call(t,e)}var Ux=$r(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Hx=Ga(function(t,e,n){Fr(t,n,e)});function Gx(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}var Yx=Math.max,Wx=Math.min;function Xx(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var o=i;return n!==void 0&&(o=ze(n),o=o<0?Yx(i+o,0):Wx(o,i-1)),e===e?Gx(t,e,o):Fa(t,nd,o,!0)}var $x=$r(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),qx=Sd("toLowerCase");function Rl(t,e){return t<e}var Kx=qa(Rl),Jx=qa(function(t,e){return t<=e});function Zx(t,e){var n={};return e=He(e),Kn(t,function(i,o,p){Fr(n,e(i,o,p),i)}),n}function e_(t,e){var n={};return e=He(e),Kn(t,function(i,o,p){Fr(n,o,e(i,o,p))}),n}var t_=1;function n_(t){return ef(nr(t,t_))}var i_=1;function r_(t,e){return tf(t,nr(e,i_))}function Ja(t,e,n){for(var i=-1,o=t.length;++i<o;){var p=t[i],v=e(p);if(v!=null&&(c===void 0?v===v&&!Qi(v):n(v,c)))var c=v,r=p}return r}function o_(t){return t&&t.length?Ja(t,mn,Ql):void 0}function a_(t,e){return t&&t.length?Ja(t,He(e),Ql):void 0}function Nl(t,e){for(var n,i=-1,o=t.length;++i<o;){var p=e(t[i]);p!==void 0&&(n=n===void 0?p:n+p)}return n}var s_=NaN;function Rf(t,e){var n=t==null?0:t.length;return n?Nl(t,e)/n:s_}function l_(t){return Rf(t,mn)}function c_(t,e){return Rf(t,He(e))}var u_=Yr(function(t,e,n){Ya(t,e,n)}),h_=qe(function(t,e){return function(n){return Uo(n,t,e)}}),d_=qe(function(t,e){return function(n){return Uo(t,n,e)}});function f_(t){return t&&t.length?Ja(t,mn,Rl):void 0}function p_(t,e){return t&&t.length?Ja(t,He(e),Rl):void 0}function Nf(t,e,n){var i=Zt(e),o=$a(e,i),p=!(En(n)&&"chain"in n)||!!n.chain,v=Rr(t);return Gn(o,function(c){var r=e[c];t[c]=r,v&&(t.prototype[c]=function(){var d=this.__chain__;if(p||d){var u=t(this.__wrapped__),a=u.__actions__=xn(this.__actions__);return a.push({func:r,args:arguments,thisArg:t}),u.__chain__=d,u}return r.apply(t,ka([this.value()],arguments))})}),t}var g_=yt(function(t,e){return t*e},1),v_="Expected a function";function Ho(t){if(typeof t!="function")throw new TypeError(v_);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function A_(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var m_="[object Map]",y_="[object Set]",zl=To?To.iterator:void 0;function zf(t){if(!t)return[];if(Mn(t))return Ka(t)?jn(t):xn(t);if(zl&&t[zl])return A_(t[zl]());var e=Ir(t),n=e==m_?Cl:e==y_?Ua:qr;return n(t)}function b_(){this.__values__===void 0&&(this.__values__=zf(this.value()));var t=this.__index__>=this.__values__.length,e=t?void 0:this.__values__[this.__index__++];return{done:t,value:e}}function Vf(t,e){var n=t.length;if(n)return e+=e<0?n:0,Do(e,n)?t[e]:void 0}function C_(t,e){return t&&t.length?Vf(t,ze(e)):void 0}function w_(t){return t=ze(t),qe(function(e){return Vf(e,t)})}function Vl(t,e){return e=nl(e,t),t=Mf(t,e),t==null||delete t[Pr(bn(e))]}function x_(t){return Ro(t)?void 0:t}var __=1,S_=2,E_=4,I_=tr(function(t,e){var n={};if(t==null)return n;var i=!1;e=Lt(e,function(p){return p=nl(p,t),i||(i=p.length>1),p}),Eo(t,o2(t),n),i&&(n=nr(n,__|S_|E_,x_));for(var o=e.length;o--;)Vl(n,e[o]);return n});function Uf(t,e){if(t==null)return{};var n=Lt(o2(t),function(i){return[i]});return e=He(e),QU(t,n,function(i,o){return e(i,o[0])})}function k_(t,e){return Uf(t,Ho(He(e)))}function B_(t){return md(2,t)}function O_(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Hf(t,e){if(t!==e){var n=t!==void 0,i=t===null,o=t===t,p=Qi(t),v=e!==void 0,c=e===null,r=e===e,d=Qi(e);if(!c&&!d&&!p&&t>e||p&&v&&r&&!c&&!d||i&&v&&r||!n&&r||!o)return 1;if(!i&&!p&&!d&&t<e||d&&n&&o&&!i&&!p||c&&n&&o||!v&&o||!r)return-1}return 0}function D_(t,e,n){for(var i=-1,o=t.criteria,p=e.criteria,v=o.length,c=n.length;++i<v;){var r=Hf(o[i],p[i]);if(r){if(i>=c)return r;var d=n[i];return r*(d=="desc"?-1:1)}}return t.index-e.index}function Gf(t,e,n){e.length?e=Lt(e,function(p){return rt(p)?function(v){return Da(v,p.length===1?p[0]:p)}:p}):e=[mn];var i=-1;e=Lt(e,ui(He));var o=Bf(t,function(p,v,c){var r=Lt(e,function(d){return d(p)});return{criteria:r,index:++i,value:p}});return O_(o,function(p,v){return D_(p,v,n)})}function T_(t,e,n,i){return t==null?[]:(rt(e)||(e=e==null?[]:[e]),n=i?void 0:n,rt(n)||(n=n==null?[]:[n]),Gf(t,e,n))}function Ul(t){return tr(function(e){return e=Lt(e,ui(He)),qe(function(n){var i=this;return t(e,function(o){return Tn(o,i,n)})})})}var M_=Ul(Lt),Q_=qe,L_=Math.min,j_=Q_(function(t,e){e=e.length==1&&rt(e[0])?Lt(e[0],ui(He)):Lt(sn(e,1),ui(He));var n=e.length;return qe(function(i){for(var o=-1,p=L_(i.length,n);++o<p;)i[o]=e[o].call(this,i[o]);return Tn(t,this,i)})}),P_=Ul(wf),F_=Ul(bl),R_=9007199254740991,N_=Math.floor;function Hl(t,e){var n="";if(!t||e<1||e>R_)return n;do e%2&&(n+=t),e=N_(e/2),e&&(t+=t);while(e);return n}var z_=Sl("length"),Yf="\uD800-\uDFFF",V_="\\u0300-\\u036f",U_="\\ufe20-\\ufe2f",H_="\\u20d0-\\u20ff",G_=V_+U_+H_,Y_="\\ufe0e\\ufe0f",W_="["+Yf+"]",Gl="["+G_+"]",Yl="\uD83C[\uDFFB-\uDFFF]",X_="(?:"+Gl+"|"+Yl+")",Wf="[^"+Yf+"]",Xf="(?:\uD83C[\uDDE6-\uDDFF]){2}",$f="[\uD800-\uDBFF][\uDC00-\uDFFF]",$_="\\u200d",qf=X_+"?",Kf="["+Y_+"]?",q_="(?:"+$_+"(?:"+[Wf,Xf,$f].join("|")+")"+Kf+qf+")*",K_=Kf+qf+q_,J_="(?:"+[Wf+Gl+"?",Gl,Xf,$f,W_].join("|")+")",Jf=RegExp(Yl+"(?="+Yl+")|"+J_+K_,"g");function Z_(t){for(var e=Jf.lastIndex=0;Jf.test(t);)++e;return e}function Kr(t){return Wr(t)?Z_(t):z_(t)}var e5=Math.ceil;function Za(t,e){e=e===void 0?" ":$n(e);var n=e.length;if(n<2)return n?Hl(e,t):e;var i=Hl(e,e5(t/Kr(e)));return Wr(e)?zi(jn(i),0,t).join(""):i.slice(0,t)}var t5=Math.ceil,n5=Math.floor;function i5(t,e,n){t=vt(t),e=ze(e);var i=e?Kr(t):0;if(!e||i>=e)return t;var o=(e-i)/2;return Za(n5(o),n)+t+Za(t5(o),n)}function r5(t,e,n){t=vt(t),e=ze(e);var i=e?Kr(t):0;return e&&i<e?t+Za(e-i,n):t}function o5(t,e,n){t=vt(t),e=ze(e);var i=e?Kr(t):0;return e&&i<e?Za(e-i,n)+t:t}var a5=/^\s+/,s5=jr.parseInt;function l5(t,e,n){return n||e==null?e=0:e&&(e=+e),s5(vt(t).replace(a5,""),e||0)}var c5=32,es=qe(function(t,e){var n=Ni(e,Gr(es));return Ai(t,c5,void 0,e,n)});es.placeholder={};var u5=64,Wl=qe(function(t,e){var n=Ni(e,Gr(Wl));return Ai(t,u5,void 0,e,n)});Wl.placeholder={};var h5=Ga(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function d5(t){for(var e,n=this;n instanceof ja;){var i=ed(n);i.__index__=0,i.__values__=void 0,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function f5(t){return function(e){return t==null?void 0:Da(t,e)}}function p5(t,e,n,i){for(var o=n-1,p=t.length;++o<p;)if(i(t[o],e))return o;return-1}var g5=Array.prototype,Zf=g5.splice;function Xl(t,e,n,i){var o=i?p5:Hr,p=-1,v=e.length,c=t;for(t===e&&(e=xn(e)),n&&(c=Lt(t,ui(n)));++p<v;)for(var r=0,d=e[p],u=n?n(d):d;(r=o(c,u,r,i))>-1;)c!==t&&Zf.call(c,r,1),Zf.call(t,r,1);return t}function ep(t,e){return t&&t.length&&e&&e.length?Xl(t,e):t}var v5=qe(ep);function A5(t,e,n){return t&&t.length&&e&&e.length?Xl(t,e,He(n)):t}function m5(t,e,n){return t&&t.length&&e&&e.length?Xl(t,e,void 0,n):t}var y5=Array.prototype,b5=y5.splice;function tp(t,e){for(var n=t?e.length:0,i=n-1;n--;){var o=e[n];if(n==i||o!==p){var p=o;Do(o)?b5.call(t,o,1):Vl(t,o)}}return t}var C5=tr(function(t,e){var n=t==null?0:t.length,i=hl(t,e);return tp(t,Lt(e,function(o){return Do(o,n)?+o:o}).sort(Hf)),i}),w5=Math.floor,x5=Math.random;function $l(t,e){return t+w5(x5()*(e-t+1))}var _5=parseFloat,S5=Math.min,E5=Math.random;function I5(t,e,n){if(n&&typeof n!="boolean"&&rn(t,e,n)&&(e=n=void 0),n===void 0&&(typeof e=="boolean"?(n=e,e=void 0):typeof t=="boolean"&&(n=t,t=void 0)),t===void 0&&e===void 0?(t=0,e=1):(t=Ln(t),e===void 0?(e=t,t=0):e=Ln(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=E5();return S5(t+o*(e-t+_5("1e-"+((o+"").length-1))),e)}return $l(t,e)}var k5=Math.ceil,B5=Math.max;function O5(t,e,n,i){for(var o=-1,p=B5(k5((e-t)/(n||1)),0),v=Array(p);p--;)v[i?p:++o]=t,t+=n;return v}function np(t){return function(e,n,i){return i&&typeof i!="number"&&rn(e,n,i)&&(n=i=void 0),e=Ln(e),n===void 0?(n=e,e=0):n=Ln(n),i=i===void 0?e<n?1:-1:Ln(i),O5(e,n,i,t)}}var D5=np(),T5=np(!0),M5=256,Q5=tr(function(t,e){return Ai(t,M5,void 0,void 0,void 0,e)});function ip(t,e,n,i,o){return o(t,function(p,v,c){n=i?(i=!1,p):e(n,p,v,c)}),n}function L5(t,e,n){var i=rt(t)?Al:ip,o=arguments.length<3;return i(t,He(e),n,o,Vi)}function j5(t,e,n,i){var o=t==null?0:t.length;for(i&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function P5(t,e,n){var i=rt(t)?j5:ip,o=arguments.length<3;return i(t,He(e),n,o,pf)}function F5(t,e){var n=rt(t)?kr:_f;return n(t,Ho(He(e)))}function R5(t,e){var n=[];if(!(t&&t.length))return n;var i=-1,o=[],p=t.length;for(e=He(e);++i<p;){var v=t[i];e(v,i,t)&&(n.push(v),o.push(i))}return tp(t,o),n}function N5(t,e,n){return(n?rn(t,e,n):e===void 0)?e=1:e=ze(e),Hl(vt(t),e)}function z5(){var t=arguments,e=vt(t[0]);return t.length<3?e:e.replace(t[1],t[2])}var V5="Expected a function";function U5(t,e){if(typeof t!="function")throw new TypeError(V5);return e=e===void 0?e:ze(e),qe(t,e)}function H5(t,e,n){e=nl(e,t);var i=-1,o=e.length;for(o||(o=1,t=void 0);++i<o;){var p=t==null?void 0:t[Pr(e[i])];p===void 0&&(i=o,p=n),t=Rr(p)?p.call(t):p}return t}var G5=Array.prototype,Y5=G5.reverse;function ql(t){return t==null?t:Y5.call(t)}var W5=yl("round");function rp(t){var e=t.length;return e?t[$l(0,e-1)]:void 0}function X5(t){return rp(qr(t))}function $5(t){var e=rt(t)?rp:X5;return e(t)}function ts(t,e){var n=-1,i=t.length,o=i-1;for(e=e===void 0?i:e;++n<e;){var p=$l(n,o),v=t[p];t[p]=t[n],t[n]=v}return t.length=e,t}function q5(t,e){return ts(xn(t),fr(e,0,t.length))}function K5(t,e){var n=qr(t);return ts(n,fr(e,0,n.length))}function J5(t,e,n){(n?rn(t,e,n):e===void 0)?e=1:e=ze(e);var i=rt(t)?q5:K5;return i(t,e)}function Z5(t,e,n,i){return i=typeof i=="function"?i:void 0,t==null?t:Hh(t,e,n,i)}function e8(t){return ts(xn(t))}function t8(t){return ts(qr(t))}function n8(t){var e=rt(t)?e8:t8;return e(t)}var i8="[object Map]",r8="[object Set]";function o8(t){if(t==null)return 0;if(Mn(t))return Ka(t)?Kr(t):t.length;var e=Ir(t);return e==i8||e==r8?t.size:i2(t).length}function a8(t,e,n){var i=t==null?0:t.length;return i?(n&&typeof n!="number"&&rn(t,e,n)?(e=0,n=i):(e=e==null?0:ze(e),n=n===void 0?i:ze(n)),kn(t,e,n)):[]}var s8=$r(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function l8(t,e){var n;return Vi(t,function(i,o,p){return n=e(i,o,p),!n}),!!n}function c8(t,e,n){var i=rt(t)?bl:l8;return n&&rn(t,e,n)&&(e=void 0),i(t,He(e))}var u8=qe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&rn(t,e[0],e[1])?e=[]:n>2&&rn(e[0],e[1],e[2])&&(e=[e[0]]),Gf(t,sn(e,1),[])}),h8=4294967295,d8=h8-1,f8=Math.floor,p8=Math.min;function Kl(t,e,n,i){var o=0,p=t==null?0:t.length;if(p===0)return 0;e=n(e);for(var v=e!==e,c=e===null,r=Qi(e),d=e===void 0;o<p;){var u=f8((o+p)/2),a=n(t[u]),l=a!==void 0,s=a===null,h=a===a,g=Qi(a);if(v)var f=i||h;else d?f=h&&(i||l):c?f=h&&l&&(i||!s):r?f=h&&l&&!s&&(i||!g):s||g?f=!1:f=i?a<=e:a<e;f?o=u+1:p=u}return p8(p,d8)}var g8=4294967295,v8=g8>>>1;function ns(t,e,n){var i=0,o=t==null?i:t.length;if(typeof e=="number"&&e===e&&o<=v8){for(;i<o;){var p=i+o>>>1,v=t[p];v!==null&&!Qi(v)&&(n?v<=e:v<e)?i=p+1:o=p}return o}return Kl(t,e,mn,n)}function A8(t,e){return ns(t,e)}function m8(t,e,n){return Kl(t,e,He(n))}function y8(t,e){var n=t==null?0:t.length;if(n){var i=ns(t,e);if(i<n&&Li(t[i],e))return i}return-1}function b8(t,e){return ns(t,e,!0)}function C8(t,e,n){return Kl(t,e,He(n),!0)}function w8(t,e){var n=t==null?0:t.length;if(n){var i=ns(t,e,!0)-1;if(Li(t[i],e))return i}return-1}function op(t,e){for(var n=-1,i=t.length,o=0,p=[];++n<i;){var v=t[n],c=e?e(v):v;if(!n||!Li(c,r)){var r=c;p[o++]=v===0?0:v}}return p}function x8(t){return t&&t.length?op(t):[]}function _8(t,e){return t&&t.length?op(t,He(e)):[]}var S8=4294967295;function E8(t,e,n){return n&&typeof n!="number"&&rn(t,e,n)&&(e=n=void 0),n=n===void 0?S8:n>>>0,n?(t=vt(t),t&&(typeof e=="string"||e!=null&&!Fl(e))&&(e=$n(e),!e&&Wr(t))?zi(jn(t),0,n):t.split(e,n)):[]}var I8="Expected a function",k8=Math.max;function B8(t,e){if(typeof t!="function")throw new TypeError(I8);return e=e==null?0:k8(ze(e),0),qe(function(n){var i=n[e],o=zi(n,0,e);return i&&ka(o,i),Tn(t,this,o)})}var O8=$r(function(t,e,n){return t+(n?" ":"")+vl(e)});function D8(t,e,n){return t=vt(t),n=n==null?0:fr(ze(n),0,t.length),e=$n(e),t.slice(n,n+e.length)==e}function T8(){return{}}function M8(){return""}function Q8(){return!0}var L8=yt(function(t,e){return t-e},0);function j8(t){return t&&t.length?Nl(t,mn):0}function P8(t,e){return t&&t.length?Nl(t,He(e)):0}function F8(t){var e=t==null?0:t.length;return e?kn(t,1,e):[]}function R8(t,e,n){return t&&t.length?(e=n||e===void 0?1:ze(e),kn(t,0,e<0?0:e)):[]}function N8(t,e,n){var i=t==null?0:t.length;return i?(e=n||e===void 0?1:ze(e),e=i-e,kn(t,e<0?0:e,i)):[]}function z8(t,e){return t&&t.length?Wa(t,He(e),!1,!0):[]}function V8(t,e){return t&&t.length?Wa(t,He(e)):[]}function U8(t,e){return e(t),t}var ap=Object.prototype,H8=ap.hasOwnProperty;function sp(t,e,n,i){return t===void 0||Li(t,ap[n])&&!H8.call(i,n)?e:t}var G8={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function Y8(t){return"\\"+G8[t]}var lp=/<%=([\s\S]+?)%>/g,W8=/<%-([\s\S]+?)%>/g,X8=/<%([\s\S]+?)%>/g,Jl={escape:W8,evaluate:X8,interpolate:lp,variable:"",imports:{_:{escape:bf}}},$8="Invalid `variable` option passed into `_.template`",q8=/\b__p \+= '';/g,K8=/\b(__p \+=) '' \+/g,J8=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z8=/[()=,{}\[\]\/\s]/,e4=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,is=/($^)/,t4=/['\n\r\u2028\u2029\\]/g,n4=Object.prototype,cp=n4.hasOwnProperty;function i4(t,e,n){var i=Jl.imports._.templateSettings||Jl;n&&rn(t,e,n)&&(e=void 0),t=vt(t),e=za({},e,i,sp);var o=za({},e.imports,i.imports,sp),p=Zt(o),v=Ll(o,p),c,r,d=0,u=e.interpolate||is,a="__p += '",l=RegExp((e.escape||is).source+"|"+u.source+"|"+(u===lp?e4:is).source+"|"+(e.evaluate||is).source+"|$","g"),s=cp.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+`
`:"";t.replace(l,function(f,A,m,y,b,x){return m||(m=y),a+=t.slice(d,x).replace(t4,Y8),A&&(c=!0,a+=`' +
__e(`+A+`) +
'`),b&&(r=!0,a+=`';
`+b+`;
__p += '`),m&&(a+=`' +
((__t = (`+m+`)) == null ? '' : __t) +
'`),d=x+f.length,f}),a+=`';
`;var h=cp.call(e,"variable")&&e.variable;if(!h)a=`with (obj) {
`+a+`
}
`;else if(Z8.test(h))throw new Error($8);a=(r?a.replace(q8,""):a).replace(K8,"$1").replace(J8,"$1;"),a="function("+(h||"obj")+`) {
`+(h?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(c?", __e = _.escape":"")+(r?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+a+`return __p
}`;var g=Ad(function(){return Function(p,s+"return "+a).apply(void 0,v)});if(g.source=a,dl(g))throw g;return g}function Go(t,e){return e(t)}var r4=9007199254740991,Zl=4294967295,o4=Math.min;function a4(t,e){if(t=ze(t),t<1||t>r4)return[];var n=Zl,i=o4(t,Zl);e=Jn(e),t-=Zl;for(var o=a2(i,e);++n<t;)e(n);return o}function s4(){return this}function up(t,e){var n=t;return n instanceof tt&&(n=n.value()),Al(e,function(i,o){return o.func.apply(o.thisArg,ka([i],o.args))},n)}function ec(){return up(this.__wrapped__,this.__actions__)}function l4(t){return vt(t).toLowerCase()}function c4(t){return rt(t)?Lt(t,Pr):Qi(t)?[t]:xn(RH(vt(t)))}var hp=9007199254740991;function u4(t){return t?fr(ze(t),-hp,hp):t===0?t:0}function h4(t){return vt(t).toUpperCase()}function d4(t,e,n){var i=rt(t),o=i||Io(t)||Oa(t);if(e=He(e),n==null){var p=t&&t.constructor;o?n=i?new p:[]:En(t)?n=Rr(p)?Ia(J3(t)):{}:n={}}return(o?Gn:Kn)(t,function(v,c,r){return e(n,v,c,r)}),n}function dp(t,e){for(var n=t.length;n--&&Hr(e,t[n],0)>-1;);return n}function fp(t,e){for(var n=-1,i=t.length;++n<i&&Hr(e,t[n],0)>-1;);return n}function f4(t,e,n){if(t=vt(t),t&&(n||e===void 0))return LU(t);if(!t||!(e=$n(e)))return t;var i=jn(t),o=jn(e),p=fp(i,o),v=dp(i,o)+1;return zi(i,p,v).join("")}function p4(t,e,n){if(t=vt(t),t&&(n||e===void 0))return t.slice(0,jU(t)+1);if(!t||!(e=$n(e)))return t;var i=jn(t),o=dp(i,jn(e))+1;return zi(i,0,o).join("")}var g4=/^\s+/;function v4(t,e,n){if(t=vt(t),t&&(n||e===void 0))return t.replace(g4,"");if(!t||!(e=$n(e)))return t;var i=jn(t),o=fp(i,jn(e));return zi(i,o).join("")}var A4=30,m4="...",y4=/\w*$/;function b4(t,e){var n=A4,i=m4;if(En(e)){var o="separator"in e?e.separator:o;n="length"in e?ze(e.length):n,i="omission"in e?$n(e.omission):i}t=vt(t);var p=t.length;if(Wr(t)){var v=jn(t);p=v.length}if(n>=p)return t;var c=n-Kr(i);if(c<1)return i;var r=v?zi(v,0,c).join(""):t.slice(0,c);if(o===void 0)return r+i;if(v&&(c+=r.length-c),Fl(o)){if(t.slice(c).search(o)){var d,u=r;for(o.global||(o=RegExp(o.source,vt(y4.exec(o))+"g")),o.lastIndex=0;d=o.exec(u);)var a=d.index;r=r.slice(0,a===void 0?c:a)}}else if(t.indexOf($n(o),c)!=c){var l=r.lastIndexOf(o);l>-1&&(r=r.slice(0,l))}return r+i}function C4(t){return pd(t,1)}var w4={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},x4=ml(w4),pp=/&(?:amp|lt|gt|quot|#39);/g,_4=RegExp(pp.source);function S4(t){return t=vt(t),t&&_4.test(t)?t.replace(pp,x4):t}var E4=1/0,I4=Mh&&1/Ua(new Mh([,-0]))[1]==E4?function(t){return new Mh(t)}:Po,k4=200;function Ui(t,e,n){var i=-1,o=Ra,p=t.length,v=!0,c=[],r=c;if(n)v=!1,o=Dl;else if(p>=k4){var d=e?null:I4(t);if(d)return Ua(d);v=!1,o=No,r=new pr}else r=e?[]:c;e:for(;++i<p;){var u=t[i],a=e?e(u):u;if(u=n||u!==0?u:0,v&&a===a){for(var l=r.length;l--;)if(r[l]===a)continue e;e&&r.push(a),c.push(u)}else o(r,a,n)||(r!==c&&r.push(a),c.push(u))}return c}var B4=qe(function(t){return Ui(sn(t,1,Nt,!0))}),O4=qe(function(t){var e=bn(t);return Nt(e)&&(e=void 0),Ui(sn(t,1,Nt,!0),He(e))}),D4=qe(function(t){var e=bn(t);return e=typeof e=="function"?e:void 0,Ui(sn(t,1,Nt,!0),void 0,e)});function T4(t){return t&&t.length?Ui(t):[]}function gp(t,e){return t&&t.length?Ui(t,He(e)):[]}function M4(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?Ui(t,void 0,e):[]}var Q4=0;function L4(t){var e=++Q4;return vt(t)+e}function j4(t,e){return t==null?!0:Vl(t,e)}var P4=Math.max;function tc(t){if(!(t&&t.length))return[];var e=0;return t=kr(t,function(n){if(Nt(n))return e=P4(n.length,e),!0}),a2(e,function(n){return Lt(t,Sl(n))})}function vp(t,e){if(!(t&&t.length))return[];var n=tc(t);return e==null?n:Lt(n,function(i){return Tn(e,void 0,i)})}function Ap(t,e,n,i){return Hh(t,e,n(Da(t,e)),i)}function F4(t,e,n){return t==null?t:Ap(t,e,Jn(n))}function R4(t,e,n,i){return i=typeof i=="function"?i:void 0,t==null?t:Ap(t,e,Jn(n),i)}var N4=$r(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()});function z4(t){return t==null?[]:Ll(t,Yn(t))}var V4=qe(function(t,e){return Nt(t)?Vo(t,e):[]});function U4(t,e){return es(Jn(e),t)}var H4=tr(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(p){return hl(p,t)};return e>1||this.__actions__.length||!(i instanceof tt)||!Do(n)?this.thru(o):(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Go,args:[o],thisArg:void 0}),new In(i,this.__chain__).thru(function(p){return e&&!p.length&&p.push(void 0),p}))});function G4(){return Yd(this)}function Y4(){var t=this.__wrapped__;if(t instanceof tt){var e=t;return this.__actions__.length&&(e=new tt(this)),e=e.reverse(),e.__actions__.push({func:Go,args:[ql],thisArg:void 0}),new In(e,this.__chain__)}return this.thru(ql)}function nc(t,e,n){var i=t.length;if(i<2)return i?Ui(t[0]):[];for(var o=-1,p=Array(i);++o<i;)for(var v=t[o],c=-1;++c<i;)c!=o&&(p[o]=Vo(p[o]||v,t[c],e,n));return Ui(sn(p,1),e,n)}var W4=qe(function(t){return nc(kr(t,Nt))}),X4=qe(function(t){var e=bn(t);return Nt(e)&&(e=void 0),nc(kr(t,Nt),He(e))}),$4=qe(function(t){var e=bn(t);return e=typeof e=="function"?e:void 0,nc(kr(t,Nt),void 0,e)}),q4=qe(tc);function mp(t,e,n){for(var i=-1,o=t.length,p=e.length,v={};++i<o;){var c=i<p?e[i]:void 0;n(v,t[i],c)}return v}function K4(t,e){return mp(t||[],e||[],_2)}function J4(t,e){return mp(t||[],e||[],Hh)}var Z4=qe(function(t){var e=t.length,n=e>1?t[e-1]:void 0;return n=typeof n=="function"?(t.pop(),n):void 0,vp(t,n)});const Te={chunk:pC,compact:SC,concat:EC,difference:Iw,differenceBy:kw,differenceWith:Bw,drop:Dw,dropRight:Tw,dropRightWhile:Mw,dropWhile:Qw,fill:qw,findIndex:Ef,findLastIndex:Ml,first:kf,flatten:PU,flattenDeep:u6,flattenDepth:h6,fromPairs:FU,head:kf,indexOf:G6,initial:Y6,intersection:X6,intersectionBy:$6,intersectionWith:q6,join:Vx,last:bn,lastIndexOf:Xx,nth:C_,pull:v5,pullAll:ep,pullAllBy:A5,pullAllWith:m5,pullAt:C5,remove:R5,reverse:ql,slice:a8,sortedIndex:A8,sortedIndexBy:m8,sortedIndexOf:y8,sortedLastIndex:b8,sortedLastIndexBy:C8,sortedLastIndexOf:w8,sortedUniq:x8,sortedUniqBy:_8,tail:F8,take:R8,takeRight:N8,takeRightWhile:z8,takeWhile:V8,union:B4,unionBy:O4,unionWith:D4,uniq:T4,uniqBy:gp,uniqWith:M4,unzip:tc,unzipWith:vp,without:V4,xor:W4,xorBy:X4,xorWith:$4,zip:q4,zipObject:K4,zipObjectDeep:J4,zipWith:Z4},At={countBy:pw,each:df,eachRight:gf,every:Ww,filter:Kw,find:Zw,findLast:i6,flatMap:o6,flatMapDeep:s6,flatMapDepth:l6,forEach:df,forEachRight:gf,groupBy:O6,includes:U6,invokeMap:ox,keyBy:Hx,map:Xa,orderBy:T_,partition:h5,reduce:L5,reduceRight:P5,reject:F5,sample:$5,sampleSize:J5,shuffle:n8,size:o8,some:c8,sortBy:u8},eS={now:RU},jt={after:Lo,ary:pd,before:md,bind:Va,bindKey:fl,curry:Il,curryRight:kl,debounce:Ot,defer:_w,delay:Sw,flip:f6,memoize:NH,negate:Ho,once:B_,overArgs:j_,partial:es,partialRight:Wl,rearg:Q5,rest:U5,spread:B8,throttle:Qn,unary:C4,wrap:U4},Pe={castArray:$s,clone:NU,cloneDeep:mC,cloneDeepWith:CC,cloneWith:xC,conformsTo:cw,eq:Li,gt:D6,gte:T6,isArguments:Xs,isArray:rt,isArrayBuffer:lx,isArrayLike:Mn,isArrayLikeObject:Nt,isBoolean:ux,isBuffer:Io,isDate:fx,isElement:px,isEmpty:yx,isEqual:gr,isEqualWith:bx,isError:dl,isFinite:wx,isFunction:Rr,isInteger:jf,isLength:zU,isMap:VU,isMatch:xx,isMatchWith:_x,isNaN:Ex,isNative:Bx,isNil:ki,isNull:Ox,isNumber:Yt,isObject:En,isObjectLike:en,isPlainObject:Ro,isRegExp:Fl,isSafeInteger:Mx,isSet:UU,isString:Ka,isSymbol:Qi,isTypedArray:Oa,isUndefined:s2,isWeakMap:Lx,isWeakSet:Px,lt:Kx,lte:Jx,toArray:zf,toFinite:Ln,toInteger:ze,toLength:xf,toNumber:ci,toPlainObject:lf,toSafeInteger:u4,toString:vt},on={add:yn,ceil:hC,divide:Ow,floor:p6,max:o_,maxBy:a_,mean:l_,meanBy:c_,min:f_,minBy:p_,multiply:g_,round:W5,subtract:L8,sum:j8,sumBy:P8},ic={clamp:gC,inRange:N6,random:I5},Ve={assign:Ry,assignIn:gd,assignInWith:za,assignWith:Ny,at:zy,create:gw,defaults:bw,defaultsDeep:ww,entries:Af,entriesIn:mf,extend:gd,extendWith:za,findKey:e6,findLastKey:r6,forIn:w6,forInRight:x6,forOwn:_6,forOwnRight:S6,functions:E6,functionsIn:I6,get:_n,has:j6,hasIn:t2,invert:ex,invertBy:ix,invoke:rx,keys:Zt,keysIn:Yn,mapKeys:Zx,mapValues:e_,merge:u_,mergeWith:uf,omit:I_,omitBy:k_,pick:Br,pickBy:Uf,result:H5,set:E2,setWith:Z5,toPairs:Af,toPairsIn:mf,transform:d4,unset:j4,update:F4,updateWith:R4,values:qr,valuesIn:z4},Zn={at:H4,chain:Yd,commit:_C,lodash:G,next:b_,plant:d5,reverse:Y4,tap:U8,thru:Go,toIterator:s4,toJSON:ec,value:ec,valueOf:ec,wrapperChain:G4},ht={camelCase:lC,capitalize:Ed,deburr:Id,endsWith:jw,escape:bf,escapeRegExp:Gw,kebabCase:Ux,lowerCase:$x,lowerFirst:qx,pad:i5,padEnd:r5,padStart:o5,parseInt:l5,repeat:N5,replace:z5,snakeCase:s8,split:E8,startCase:O8,startsWith:D8,template:i4,templateSettings:Jl,toLower:l4,toUpper:h4,trim:f4,trimEnd:p4,trimStart:v4,truncate:b4,unescape:S4,upperCase:N4,upperFirst:vl,words:Gd},dt={attempt:Ad,bindAll:Jy,cond:ow,conforms:lw,constant:n2,defaultTo:mw,flow:b6,flowRight:C6,identity:mn,iteratee:Rx,matches:n_,matchesProperty:r_,method:h_,methodOf:d_,mixin:Nf,noop:Po,nthArg:w_,over:M_,overEvery:P_,overSome:F_,property:nf,propertyOf:f5,range:D5,rangeRight:T5,stubArray:HU,stubFalse:r2,stubObject:T8,stubString:M8,stubTrue:Q8,times:a4,toPath:c4,uniqueId:L4};function tS(){var t=new tt(this.__wrapped__);return t.__actions__=xn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=xn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=xn(this.__views__),t}function nS(){if(this.__filtered__){var t=new tt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}var iS=Math.max,rS=Math.min;function oS(t,e,n){for(var i=-1,o=n.length;++i<o;){var p=n[i],v=p.size;switch(p.type){case"drop":t+=v;break;case"dropRight":e-=v;break;case"take":e=rS(e,t+v);break;case"takeRight":t=iS(t,e-v);break}}return{start:t,end:e}}var aS=1,sS=2,lS=Math.min;function cS(){var t=this.__wrapped__.value(),e=this.__dir__,n=rt(t),i=e<0,o=n?t.length:0,p=oS(0,o,this.__views__),v=p.start,c=p.end,r=c-v,d=i?c:v-1,u=this.__iteratees__,a=u.length,l=0,s=lS(r,this.__takeCount__);if(!n||!i&&o==r&&s==r)return up(t,this.__actions__);var h=[];e:for(;r--&&l<s;){d+=e;for(var g=-1,f=t[d];++g<a;){var A=u[g],m=A.iteratee,y=A.type,b=m(f);if(y==sS)f=b;else if(!b){if(y==aS)continue e;break e}}h[l++]=f}return h}var uS="4.17.21",hS=2,dS=1,fS=3,yp=4294967295,pS=Array.prototype,gS=Object.prototype,bp=gS.hasOwnProperty,Cp=To?To.iterator:void 0,vS=Math.max,wp=Math.min,rc=function(t){return function(e,n,i){if(i==null){var o=En(n),p=o&&Zt(n),v=p&&p.length&&$a(n,p);(v?v.length:o)||(i=n,n=e,e=this)}return t(e,n,i)}}(Nf);G.after=jt.after,G.ary=jt.ary,G.assign=Ve.assign,G.assignIn=Ve.assignIn,G.assignInWith=Ve.assignInWith,G.assignWith=Ve.assignWith,G.at=Ve.at,G.before=jt.before,G.bind=jt.bind,G.bindAll=dt.bindAll,G.bindKey=jt.bindKey,G.castArray=Pe.castArray,G.chain=Zn.chain,G.chunk=Te.chunk,G.compact=Te.compact,G.concat=Te.concat,G.cond=dt.cond,G.conforms=dt.conforms,G.constant=dt.constant,G.countBy=At.countBy,G.create=Ve.create,G.curry=jt.curry,G.curryRight=jt.curryRight,G.debounce=jt.debounce,G.defaults=Ve.defaults,G.defaultsDeep=Ve.defaultsDeep,G.defer=jt.defer,G.delay=jt.delay,G.difference=Te.difference,G.differenceBy=Te.differenceBy,G.differenceWith=Te.differenceWith,G.drop=Te.drop,G.dropRight=Te.dropRight,G.dropRightWhile=Te.dropRightWhile,G.dropWhile=Te.dropWhile,G.fill=Te.fill,G.filter=At.filter,G.flatMap=At.flatMap,G.flatMapDeep=At.flatMapDeep,G.flatMapDepth=At.flatMapDepth,G.flatten=Te.flatten,G.flattenDeep=Te.flattenDeep,G.flattenDepth=Te.flattenDepth,G.flip=jt.flip,G.flow=dt.flow,G.flowRight=dt.flowRight,G.fromPairs=Te.fromPairs,G.functions=Ve.functions,G.functionsIn=Ve.functionsIn,G.groupBy=At.groupBy,G.initial=Te.initial,G.intersection=Te.intersection,G.intersectionBy=Te.intersectionBy,G.intersectionWith=Te.intersectionWith,G.invert=Ve.invert,G.invertBy=Ve.invertBy,G.invokeMap=At.invokeMap,G.iteratee=dt.iteratee,G.keyBy=At.keyBy,G.keys=Zt,G.keysIn=Ve.keysIn,G.map=At.map,G.mapKeys=Ve.mapKeys,G.mapValues=Ve.mapValues,G.matches=dt.matches,G.matchesProperty=dt.matchesProperty,G.memoize=jt.memoize,G.merge=Ve.merge,G.mergeWith=Ve.mergeWith,G.method=dt.method,G.methodOf=dt.methodOf,G.mixin=rc,G.negate=Ho,G.nthArg=dt.nthArg,G.omit=Ve.omit,G.omitBy=Ve.omitBy,G.once=jt.once,G.orderBy=At.orderBy,G.over=dt.over,G.overArgs=jt.overArgs,G.overEvery=dt.overEvery,G.overSome=dt.overSome,G.partial=jt.partial,G.partialRight=jt.partialRight,G.partition=At.partition,G.pick=Ve.pick,G.pickBy=Ve.pickBy,G.property=dt.property,G.propertyOf=dt.propertyOf,G.pull=Te.pull,G.pullAll=Te.pullAll,G.pullAllBy=Te.pullAllBy,G.pullAllWith=Te.pullAllWith,G.pullAt=Te.pullAt,G.range=dt.range,G.rangeRight=dt.rangeRight,G.rearg=jt.rearg,G.reject=At.reject,G.remove=Te.remove,G.rest=jt.rest,G.reverse=Te.reverse,G.sampleSize=At.sampleSize,G.set=Ve.set,G.setWith=Ve.setWith,G.shuffle=At.shuffle,G.slice=Te.slice,G.sortBy=At.sortBy,G.sortedUniq=Te.sortedUniq,G.sortedUniqBy=Te.sortedUniqBy,G.split=ht.split,G.spread=jt.spread,G.tail=Te.tail,G.take=Te.take,G.takeRight=Te.takeRight,G.takeRightWhile=Te.takeRightWhile,G.takeWhile=Te.takeWhile,G.tap=Zn.tap,G.throttle=jt.throttle,G.thru=Go,G.toArray=Pe.toArray,G.toPairs=Ve.toPairs,G.toPairsIn=Ve.toPairsIn,G.toPath=dt.toPath,G.toPlainObject=Pe.toPlainObject,G.transform=Ve.transform,G.unary=jt.unary,G.union=Te.union,G.unionBy=Te.unionBy,G.unionWith=Te.unionWith,G.uniq=Te.uniq,G.uniqBy=Te.uniqBy,G.uniqWith=Te.uniqWith,G.unset=Ve.unset,G.unzip=Te.unzip,G.unzipWith=Te.unzipWith,G.update=Ve.update,G.updateWith=Ve.updateWith,G.values=Ve.values,G.valuesIn=Ve.valuesIn,G.without=Te.without,G.words=ht.words,G.wrap=jt.wrap,G.xor=Te.xor,G.xorBy=Te.xorBy,G.xorWith=Te.xorWith,G.zip=Te.zip,G.zipObject=Te.zipObject,G.zipObjectDeep=Te.zipObjectDeep,G.zipWith=Te.zipWith,G.entries=Ve.toPairs,G.entriesIn=Ve.toPairsIn,G.extend=Ve.assignIn,G.extendWith=Ve.assignInWith,rc(G,G),G.add=on.add,G.attempt=dt.attempt,G.camelCase=ht.camelCase,G.capitalize=ht.capitalize,G.ceil=on.ceil,G.clamp=ic.clamp,G.clone=Pe.clone,G.cloneDeep=Pe.cloneDeep,G.cloneDeepWith=Pe.cloneDeepWith,G.cloneWith=Pe.cloneWith,G.conformsTo=Pe.conformsTo,G.deburr=ht.deburr,G.defaultTo=dt.defaultTo,G.divide=on.divide,G.endsWith=ht.endsWith,G.eq=Pe.eq,G.escape=ht.escape,G.escapeRegExp=ht.escapeRegExp,G.every=At.every,G.find=At.find,G.findIndex=Te.findIndex,G.findKey=Ve.findKey,G.findLast=At.findLast,G.findLastIndex=Te.findLastIndex,G.findLastKey=Ve.findLastKey,G.floor=on.floor,G.forEach=At.forEach,G.forEachRight=At.forEachRight,G.forIn=Ve.forIn,G.forInRight=Ve.forInRight,G.forOwn=Ve.forOwn,G.forOwnRight=Ve.forOwnRight,G.get=Ve.get,G.gt=Pe.gt,G.gte=Pe.gte,G.has=Ve.has,G.hasIn=Ve.hasIn,G.head=Te.head,G.identity=mn,G.includes=At.includes,G.indexOf=Te.indexOf,G.inRange=ic.inRange,G.invoke=Ve.invoke,G.isArguments=Pe.isArguments,G.isArray=rt,G.isArrayBuffer=Pe.isArrayBuffer,G.isArrayLike=Pe.isArrayLike,G.isArrayLikeObject=Pe.isArrayLikeObject,G.isBoolean=Pe.isBoolean,G.isBuffer=Pe.isBuffer,G.isDate=Pe.isDate,G.isElement=Pe.isElement,G.isEmpty=Pe.isEmpty,G.isEqual=Pe.isEqual,G.isEqualWith=Pe.isEqualWith,G.isError=Pe.isError,G.isFinite=Pe.isFinite,G.isFunction=Pe.isFunction,G.isInteger=Pe.isInteger,G.isLength=Pe.isLength,G.isMap=Pe.isMap,G.isMatch=Pe.isMatch,G.isMatchWith=Pe.isMatchWith,G.isNaN=Pe.isNaN,G.isNative=Pe.isNative,G.isNil=Pe.isNil,G.isNull=Pe.isNull,G.isNumber=Pe.isNumber,G.isObject=En,G.isObjectLike=Pe.isObjectLike,G.isPlainObject=Pe.isPlainObject,G.isRegExp=Pe.isRegExp,G.isSafeInteger=Pe.isSafeInteger,G.isSet=Pe.isSet,G.isString=Pe.isString,G.isSymbol=Pe.isSymbol,G.isTypedArray=Pe.isTypedArray,G.isUndefined=Pe.isUndefined,G.isWeakMap=Pe.isWeakMap,G.isWeakSet=Pe.isWeakSet,G.join=Te.join,G.kebabCase=ht.kebabCase,G.last=bn,G.lastIndexOf=Te.lastIndexOf,G.lowerCase=ht.lowerCase,G.lowerFirst=ht.lowerFirst,G.lt=Pe.lt,G.lte=Pe.lte,G.max=on.max,G.maxBy=on.maxBy,G.mean=on.mean,G.meanBy=on.meanBy,G.min=on.min,G.minBy=on.minBy,G.stubArray=dt.stubArray,G.stubFalse=dt.stubFalse,G.stubObject=dt.stubObject,G.stubString=dt.stubString,G.stubTrue=dt.stubTrue,G.multiply=on.multiply,G.nth=Te.nth,G.noop=dt.noop,G.now=eS.now,G.pad=ht.pad,G.padEnd=ht.padEnd,G.padStart=ht.padStart,G.parseInt=ht.parseInt,G.random=ic.random,G.reduce=At.reduce,G.reduceRight=At.reduceRight,G.repeat=ht.repeat,G.replace=ht.replace,G.result=Ve.result,G.round=on.round,G.sample=At.sample,G.size=At.size,G.snakeCase=ht.snakeCase,G.some=At.some,G.sortedIndex=Te.sortedIndex,G.sortedIndexBy=Te.sortedIndexBy,G.sortedIndexOf=Te.sortedIndexOf,G.sortedLastIndex=Te.sortedLastIndex,G.sortedLastIndexBy=Te.sortedLastIndexBy,G.sortedLastIndexOf=Te.sortedLastIndexOf,G.startCase=ht.startCase,G.startsWith=ht.startsWith,G.subtract=on.subtract,G.sum=on.sum,G.sumBy=on.sumBy,G.template=ht.template,G.times=dt.times,G.toFinite=Pe.toFinite,G.toInteger=ze,G.toLength=Pe.toLength,G.toLower=ht.toLower,G.toNumber=Pe.toNumber,G.toSafeInteger=Pe.toSafeInteger,G.toString=Pe.toString,G.toUpper=ht.toUpper,G.trim=ht.trim,G.trimEnd=ht.trimEnd,G.trimStart=ht.trimStart,G.truncate=ht.truncate,G.unescape=ht.unescape,G.uniqueId=dt.uniqueId,G.upperCase=ht.upperCase,G.upperFirst=ht.upperFirst,G.each=At.forEach,G.eachRight=At.forEachRight,G.first=Te.head,rc(G,function(){var t={};return Kn(G,function(e,n){bp.call(G.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),G.VERSION=uS,(G.templateSettings=ht.templateSettings).imports._=G,Gn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){G[t].placeholder=G}),Gn(["drop","take"],function(t,e){tt.prototype[t]=function(n){n=n===void 0?1:vS(ze(n),0);var i=this.__filtered__&&!e?new tt(this):this.clone();return i.__filtered__?i.__takeCount__=wp(n,i.__takeCount__):i.__views__.push({size:wp(n,yp),type:t+(i.__dir__<0?"Right":"")}),i},tt.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),Gn(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==dS||n==fS;tt.prototype[t]=function(o){var p=this.clone();return p.__iteratees__.push({iteratee:He(o),type:n}),p.__filtered__=p.__filtered__||i,p}}),Gn(["head","last"],function(t,e){var n="take"+(e?"Right":"");tt.prototype[t]=function(){return this[n](1).value()[0]}}),Gn(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");tt.prototype[t]=function(){return this.__filtered__?new tt(this):this[n](1)}}),tt.prototype.compact=function(){return this.filter(mn)},tt.prototype.find=function(t){return this.filter(t).head()},tt.prototype.findLast=function(t){return this.reverse().find(t)},tt.prototype.invokeMap=qe(function(t,e){return typeof t=="function"?new tt(this):this.map(function(n){return Uo(n,t,e)})}),tt.prototype.reject=function(t){return this.filter(Ho(He(t)))},tt.prototype.slice=function(t,e){t=ze(t);var n=this;return n.__filtered__&&(t>0||e<0)?new tt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==void 0&&(e=ze(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},tt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},tt.prototype.toArray=function(){return this.take(yp)},Kn(tt.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=G[i?"take"+(e=="last"?"Right":""):e],p=i||/^find/.test(e);o&&(G.prototype[e]=function(){var v=this.__wrapped__,c=i?[1]:arguments,r=v instanceof tt,d=c[0],u=r||rt(v),a=function(A){var m=o.apply(G,ka([A],c));return i&&l?m[0]:m};u&&n&&typeof d=="function"&&d.length!=1&&(r=u=!1);var l=this.__chain__,s=!!this.__actions__.length,h=p&&!l,g=r&&!s;if(!p&&u){v=g?v:new tt(this);var f=t.apply(v,c);return f.__actions__.push({func:Go,args:[a],thisArg:void 0}),new In(f,l)}return h&&g?t.apply(this,c):(f=this.thru(a),h?i?f.value()[0]:f.value():f)})}),Gn(["pop","push","shift","sort","splice","unshift"],function(t){var e=pS[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);G.prototype[t]=function(){var o=arguments;if(i&&!this.__chain__){var p=this.value();return e.apply(rt(p)?p:[],o)}return this[n](function(v){return e.apply(rt(v)?v:[],o)})}}),Kn(tt.prototype,function(t,e){var n=G[e];if(n){var i=n.name+"";bp.call(Ur,i)||(Ur[i]=[]),Ur[i].push({name:e,func:n})}}),Ur[Na(void 0,hS).name]=[{name:"wrapper",func:void 0}],tt.prototype.clone=tS,tt.prototype.reverse=nS,tt.prototype.value=cS,G.prototype.at=Zn.at,G.prototype.chain=Zn.wrapperChain,G.prototype.commit=Zn.commit,G.prototype.next=Zn.next,G.prototype.plant=Zn.plant,G.prototype.reverse=Zn.reverse,G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Zn.value,G.prototype.first=G.prototype.head,Cp&&(G.prototype[Cp]=Zn.toIterator);const AS=(t,e)=>{if(!hi||!t||!e)return!1;const n=t.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right},oc=t=>{let e,n;return t.type==="touchend"?(n=t.changedTouches[0].clientY,e=t.changedTouches[0].clientX):t.type.startsWith("touch")?(n=t.touches[0].clientY,e=t.touches[0].clientX):(n=t.clientY,e=t.clientX),{clientX:e,clientY:n}},xp=Symbol("breadcrumbKey"),mS=Qt({separator:{type:String,default:"/"},separatorIcon:{type:ir}}),yS=["aria-label"],bS=Ce({name:"ElBreadcrumb"}),CS=Ce(De(ve({},bS),{props:mS,setup(t){const e=t,{t:n}=rr(),i=Je("breadcrumb"),o=ce();return un(xp,e),je(()=>{const p=o.value.querySelectorAll(`.${i.e("item")}`);p.length&&p[p.length-1].setAttribute("aria-current","page")}),(p,v)=>($(),se("div",{ref_key:"breadcrumb",ref:o,class:de(C(i).b()),"aria-label":C(n)("el.breadcrumb.label"),role:"navigation"},[Ne(p.$slots,"default")],10,yS))}}));var wS=at(CS,[["__file","breadcrumb.vue"]]);const xS=Qt({to:{type:xt([String,Object]),default:""},replace:{type:Boolean,default:!1}}),_S=Ce({name:"ElBreadcrumbItem"}),SS=Ce(De(ve({},_S),{props:xS,setup(t){const e=t,n=ft(),i=Re(xp,void 0),o=Je("breadcrumb"),p=n.appContext.config.globalProperties.$router,v=ce(),c=()=>{!e.to||!p||(e.replace?p.replace(e.to):p.push(e.to))};return(r,d)=>{var u,a;return $(),se("span",{class:de(C(o).e("item"))},[T("span",{ref_key:"link",ref:v,class:de([C(o).e("inner"),C(o).is("link",!!r.to)]),role:"link",onClick:c},[Ne(r.$slots,"default")],2),(u=C(i))!=null&&u.separatorIcon?($(),_e(C(it),{key:0,class:de(C(o).e("separator"))},{default:K(()=>[($(),_e(tn(C(i).separatorIcon)))]),_:1},8,["class"])):($(),se("span",{key:1,class:de(C(o).e("separator")),role:"presentation"},Se((a=C(i))==null?void 0:a.separator),3))],2)}}}));var _p=at(SS,[["__file","breadcrumb-item.vue"]]);const ES=ln(wS,{BreadcrumbItem:_p}),IS=or(_p);var Sp={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(zH,function(){var n=1e3,i=6e4,o=36e5,p="millisecond",v="second",c="minute",r="hour",d="day",u="week",a="month",l="quarter",s="year",h="date",g="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(J){var P=["th","st","nd","rd"],U=J%100;return"["+J+(P[(U-20)%10]||P[U]||P[0])+"]"}},y=function(J,P,U){var W=String(J);return!W||W.length>=P?J:""+Array(P+1-W.length).join(U)+J},b={s:y,z:function(J){var P=-J.utcOffset(),U=Math.abs(P),W=Math.floor(U/60),F=U%60;return(P<=0?"+":"-")+y(W,2,"0")+":"+y(F,2,"0")},m:function J(P,U){if(P.date()<U.date())return-J(U,P);var W=12*(U.year()-P.year())+(U.month()-P.month()),F=P.clone().add(W,a),E=U-F<0,k=P.clone().add(W+(E?-1:1),a);return+(-(W+(U-F)/(E?F-k:k-F))||0)},a:function(J){return J<0?Math.ceil(J)||0:Math.floor(J)},p:function(J){return{M:a,y:s,w:u,d,D:h,h:r,m:c,s:v,ms:p,Q:l}[J]||String(J||"").toLowerCase().replace(/s$/,"")},u:function(J){return J===void 0}},x="en",S={};S[x]=m;var O="$isDayjsObject",R=function(J){return J instanceof ae||!(!J||!J[O])},Z=function J(P,U,W){var F;if(!P)return x;if(typeof P=="string"){var E=P.toLowerCase();S[E]&&(F=E),U&&(S[E]=U,F=E);var k=P.split("-");if(!F&&k.length>1)return J(k[0])}else{var L=P.name;S[L]=P,F=L}return!W&&F&&(x=F),F||!W&&x},ee=function(J,P){if(R(J))return J.clone();var U=typeof P=="object"?P:{};return U.date=J,U.args=arguments,new ae(U)},re=b;re.l=Z,re.i=R,re.w=function(J,P){return ee(J,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var ae=function(){function J(U){this.$L=Z(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[O]=!0}var P=J.prototype;return P.parse=function(U){this.$d=function(W){var F=W.date,E=W.utc;if(F===null)return new Date(NaN);if(re.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var k=F.match(f);if(k){var L=k[2]-1||0,B=(k[7]||"0").substring(0,3);return E?new Date(Date.UTC(k[1],L,k[3]||1,k[4]||0,k[5]||0,k[6]||0,B)):new Date(k[1],L,k[3]||1,k[4]||0,k[5]||0,k[6]||0,B)}}return new Date(F)}(U),this.init()},P.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},P.$utils=function(){return re},P.isValid=function(){return this.$d.toString()!==g},P.isSame=function(U,W){var F=ee(U);return this.startOf(W)<=F&&F<=this.endOf(W)},P.isAfter=function(U,W){return ee(U)<this.startOf(W)},P.isBefore=function(U,W){return this.endOf(W)<ee(U)},P.$g=function(U,W,F){return re.u(U)?this[W]:this.set(F,U)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(U,W){var F=this,E=!!re.u(W)||W,k=re.p(U),L=function(V,Y){var z=re.w(F.$u?Date.UTC(F.$y,Y,V):new Date(F.$y,Y,V),F);return E?z:z.endOf(d)},B=function(V,Y){return re.w(F.toDate()[V].apply(F.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(Y)),F)},Q=this.$W,w=this.$M,_=this.$D,I="set"+(this.$u?"UTC":"");switch(k){case s:return E?L(1,0):L(31,11);case a:return E?L(1,w):L(0,w+1);case u:var D=this.$locale().weekStart||0,H=(Q<D?Q+7:Q)-D;return L(E?_-H:_+(6-H),w);case d:case h:return B(I+"Hours",0);case r:return B(I+"Minutes",1);case c:return B(I+"Seconds",2);case v:return B(I+"Milliseconds",3);default:return this.clone()}},P.endOf=function(U){return this.startOf(U,!1)},P.$set=function(U,W){var F,E=re.p(U),k="set"+(this.$u?"UTC":""),L=(F={},F[d]=k+"Date",F[h]=k+"Date",F[a]=k+"Month",F[s]=k+"FullYear",F[r]=k+"Hours",F[c]=k+"Minutes",F[v]=k+"Seconds",F[p]=k+"Milliseconds",F)[E],B=E===d?this.$D+(W-this.$W):W;if(E===a||E===s){var Q=this.clone().set(h,1);Q.$d[L](B),Q.init(),this.$d=Q.set(h,Math.min(this.$D,Q.daysInMonth())).$d}else L&&this.$d[L](B);return this.init(),this},P.set=function(U,W){return this.clone().$set(U,W)},P.get=function(U){return this[re.p(U)]()},P.add=function(U,W){var F,E=this;U=Number(U);var k=re.p(W),L=function(w){var _=ee(E);return re.w(_.date(_.date()+Math.round(w*U)),E)};if(k===a)return this.set(a,this.$M+U);if(k===s)return this.set(s,this.$y+U);if(k===d)return L(1);if(k===u)return L(7);var B=(F={},F[c]=i,F[r]=o,F[v]=n,F)[k]||1,Q=this.$d.getTime()+U*B;return re.w(Q,this)},P.subtract=function(U,W){return this.add(-1*U,W)},P.format=function(U){var W=this,F=this.$locale();if(!this.isValid())return F.invalidDate||g;var E=U||"YYYY-MM-DDTHH:mm:ssZ",k=re.z(this),L=this.$H,B=this.$m,Q=this.$M,w=F.weekdays,_=F.months,I=F.meridiem,D=function(Y,z,X,N){return Y&&(Y[z]||Y(W,E))||X[z].slice(0,N)},H=function(Y){return re.s(L%12||12,Y,"0")},V=I||function(Y,z,X){var N=Y<12?"AM":"PM";return X?N.toLowerCase():N};return E.replace(A,function(Y,z){return z||function(X){switch(X){case"YY":return String(W.$y).slice(-2);case"YYYY":return re.s(W.$y,4,"0");case"M":return Q+1;case"MM":return re.s(Q+1,2,"0");case"MMM":return D(F.monthsShort,Q,_,3);case"MMMM":return D(_,Q);case"D":return W.$D;case"DD":return re.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return D(F.weekdaysMin,W.$W,w,2);case"ddd":return D(F.weekdaysShort,W.$W,w,3);case"dddd":return w[W.$W];case"H":return String(L);case"HH":return re.s(L,2,"0");case"h":return H(1);case"hh":return H(2);case"a":return V(L,B,!0);case"A":return V(L,B,!1);case"m":return String(B);case"mm":return re.s(B,2,"0");case"s":return String(W.$s);case"ss":return re.s(W.$s,2,"0");case"SSS":return re.s(W.$ms,3,"0");case"Z":return k}return null}(Y)||k.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(U,W,F){var E,k=this,L=re.p(W),B=ee(U),Q=(B.utcOffset()-this.utcOffset())*i,w=this-B,_=function(){return re.m(k,B)};switch(L){case s:E=_()/12;break;case a:E=_();break;case l:E=_()/3;break;case u:E=(w-Q)/6048e5;break;case d:E=(w-Q)/864e5;break;case r:E=w/o;break;case c:E=w/i;break;case v:E=w/n;break;default:E=w}return F?E:re.a(E)},P.daysInMonth=function(){return this.endOf(a).$D},P.$locale=function(){return S[this.$L]},P.locale=function(U,W){if(!U)return this.$L;var F=this.clone(),E=Z(U,W,!0);return E&&(F.$L=E),F},P.clone=function(){return re.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},J}(),ne=ae.prototype;return ee.prototype=ne,[["$ms",p],["$s",v],["$m",c],["$H",r],["$W",d],["$M",a],["$y",s],["$D",h]].forEach(function(J){ne[J[1]]=function(P){return this.$g(P,J[0],J[1])}}),ee.extend=function(J,P){return J.$i||(J(P,ae,ee),J.$i=!0),ee},ee.locale=Z,ee.isDayjs=R,ee.unix=function(J){return ee(1e3*J)},ee.en=S[x],ee.Ls=S,ee.p={},ee})})(Sp);var kS=Sp.exports;const Ep=Ma(kS),Hi=new Map;let Ip;hi&&(document.addEventListener("mousedown",t=>Ip=t),document.addEventListener("mouseup",t=>{for(const e of Hi.values())for(const{documentHandler:n}of e)n(t,Ip)}));function kp(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:l2(e.arg)&&n.push(e.arg),function(i,o){const p=e.instance.popperRef,v=i.target,c=o==null?void 0:o.target,r=!e||!e.instance,d=!v||!c,u=t.contains(v)||t.contains(c),a=t===v,l=n.length&&n.some(h=>h==null?void 0:h.contains(v))||n.length&&n.includes(c),s=p&&(p.contains(v)||p.contains(c));r||d||u||a||l||s||e.value(i,o)}}const Bp={beforeMount(t,e){Hi.has(t)||Hi.set(t,[]),Hi.get(t).push({documentHandler:kp(t,e),bindingFn:e.value})},updated(t,e){Hi.has(t)||Hi.set(t,[]);const n=Hi.get(t),i=n.findIndex(p=>p.bindingFn===e.oldValue),o={documentHandler:kp(t,e),bindingFn:e.value};i>=0?n.splice(i,1,o):n.push(o)},unmounted(t){Hi.delete(t)}},BS=100,OS=600,Op={beforeMount(t,e){const n=e.value,{interval:i=BS,delay:o=OS}=gi(n)?{}:n;let p,v;const c=()=>gi(n)?n():n.handler(),r=()=>{v&&(clearTimeout(v),v=void 0),p&&(clearInterval(p),p=void 0)};t.addEventListener("mousedown",d=>{d.button===0&&(r(),c(),document.addEventListener("mouseup",()=>r(),{once:!0}),v=setTimeout(()=>{p=setInterval(()=>{c()},i)},o))})}},Dp=ve({modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Bi,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},ar(["ariaControls"])),Tp={[Ze]:t=>Jt(t)||_t(t)||di(t),change:t=>Jt(t)||_t(t)||di(t)},Jr=Symbol("checkboxGroupContextKey"),DS=({model:t,isChecked:e})=>{const n=Re(Jr,void 0),i=ue(()=>{var o,p;const v=(o=n==null?void 0:n.max)==null?void 0:o.value,c=(p=n==null?void 0:n.min)==null?void 0:p.value;return!sr(v)&&t.value.length>=v&&!e.value||!sr(c)&&t.value.length<=c&&e.value});return{isDisabled:Ta(ue(()=>(n==null?void 0:n.disabled.value)||i.value)),isLimitDisabled:i}},TS=(t,{model:e,isLimitExceeded:n,hasOwnLabel:i,isDisabled:o,isLabeledByFormItem:p})=>{const v=Re(Jr,void 0),{formItem:c}=Oi(),{emit:r}=ft();function d(h){var g,f,A,m;return[!0,t.trueValue,t.trueLabel].includes(h)?(f=(g=t.trueValue)!=null?g:t.trueLabel)!=null?f:!0:(m=(A=t.falseValue)!=null?A:t.falseLabel)!=null?m:!1}function u(h,g){r("change",d(h),g)}function a(h){if(n.value)return;const g=h.target;r("change",d(g.checked),h)}function l(h){return we(this,null,function*(){n.value||!i.value&&!o.value&&p.value&&(h.composedPath().some(g=>g.tagName==="LABEL")||(e.value=d([!1,t.falseValue,t.falseLabel].includes(e.value)),yield Le(),u(e.value,h)))})}const s=ue(()=>(v==null?void 0:v.validateEvent)||t.validateEvent);return Me(()=>t.modelValue,()=>{s.value&&(c==null||c.validate("change").catch(h=>Wn()))}),{handleChange:a,onClickRoot:l}},MS=t=>{const e=ce(!1),{emit:n}=ft(),i=Re(Jr,void 0),o=ue(()=>sr(i)===!1),p=ce(!1),v=ue({get(){var c,r;return o.value?(c=i==null?void 0:i.modelValue)==null?void 0:c.value:(r=t.modelValue)!=null?r:e.value},set(c){var r,d;o.value&&nn(c)?(p.value=((r=i==null?void 0:i.max)==null?void 0:r.value)!==void 0&&c.length>(i==null?void 0:i.max.value)&&c.length>v.value.length,p.value===!1&&((d=i==null?void 0:i.changeEvent)==null||d.call(i,c))):(n(Ze,c),e.value=c)}});return{model:v,isGroup:o,isLimitExceeded:p}},QS=(t,e,{model:n})=>{const i=Re(Jr,void 0),o=ce(!1),p=ue(()=>Bo(t.value)?t.label:t.value),v=ue(()=>{const u=n.value;return di(u)?u:nn(u)?Pi(p.value)?u.map(Nr).some(a=>gr(a,p.value)):u.map(Nr).includes(p.value):u!=null?u===t.trueValue||u===t.trueLabel:!!u}),c=Di(ue(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value}),{prop:!0}),r=Di(ue(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value})),d=ue(()=>!!e.default||!Bo(p.value));return{checkboxButtonSize:c,isChecked:v,isFocused:o,checkboxSize:r,hasOwnLabel:d,actualValue:p}},Mp=(t,e)=>{const{formItem:n}=Oi(),{model:i,isGroup:o,isLimitExceeded:p}=MS(t),{isFocused:v,isChecked:c,checkboxButtonSize:r,checkboxSize:d,hasOwnLabel:u,actualValue:a}=QS(t,e,{model:i}),{isDisabled:l}=DS({model:i,isChecked:c}),{inputId:s,isLabeledByFormItem:h}=Or(t,{formItemContext:n,disableIdGeneration:u,disableIdManagement:o}),{handleChange:g,onClickRoot:f}=TS(t,{model:i,isLimitExceeded:p,hasOwnLabel:u,isDisabled:l,isLabeledByFormItem:h});return(()=>{function A(){var m,y;nn(i.value)&&!i.value.includes(a.value)?i.value.push(a.value):i.value=(y=(m=t.trueValue)!=null?m:t.trueLabel)!=null?y:!0}t.checked&&A()})(),Xn({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ue(()=>!!t.controls)),Xn({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ue(()=>o.value&&Bo(t.value))),Xn({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ue(()=>!!t.trueLabel)),Xn({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},ue(()=>!!t.falseLabel)),{inputId:s,isLabeledByFormItem:h,isChecked:c,isDisabled:l,isFocused:v,checkboxButtonSize:r,checkboxSize:d,hasOwnLabel:u,model:i,actualValue:a,handleChange:g,onClickRoot:f}},LS=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],jS=["id","indeterminate","disabled","value","name","tabindex"],PS=Ce({name:"ElCheckbox"}),FS=Ce(De(ve({},PS),{props:Dp,emits:Tp,setup(t){const e=t,n=I2(),{inputId:i,isLabeledByFormItem:o,isChecked:p,isDisabled:v,isFocused:c,checkboxSize:r,hasOwnLabel:d,model:u,actualValue:a,handleChange:l,onClickRoot:s}=Mp(e,n),h=Je("checkbox"),g=ue(()=>[h.b(),h.m(r.value),h.is("disabled",v.value),h.is("bordered",e.border),h.is("checked",p.value)]),f=ue(()=>[h.e("input"),h.is("disabled",v.value),h.is("checked",p.value),h.is("indeterminate",e.indeterminate),h.is("focus",c.value)]);return(A,m)=>($(),_e(tn(!C(d)&&C(o)?"span":"label"),{class:de(C(g)),"aria-controls":A.indeterminate?A.controls||A.ariaControls:null,onClick:C(s)},{default:K(()=>{var y,b;return[T("span",{class:de(C(f))},[A.trueValue||A.falseValue||A.trueLabel||A.falseLabel?lt(($(),se("input",{key:0,id:C(i),"onUpdate:modelValue":m[0]||(m[0]=x=>ut(u)?u.value=x:null),class:de(C(h).e("original")),type:"checkbox",indeterminate:A.indeterminate,name:A.name,tabindex:A.tabindex,disabled:C(v),"true-value":(y=A.trueValue)!=null?y:A.trueLabel,"false-value":(b=A.falseValue)!=null?b:A.falseLabel,onChange:m[1]||(m[1]=(...x)=>C(l)&&C(l)(...x)),onFocus:m[2]||(m[2]=x=>c.value=!0),onBlur:m[3]||(m[3]=x=>c.value=!1),onClick:m[4]||(m[4]=ot(()=>{},["stop"]))},null,42,LS)),[[il,C(u)]]):lt(($(),se("input",{key:1,id:C(i),"onUpdate:modelValue":m[5]||(m[5]=x=>ut(u)?u.value=x:null),class:de(C(h).e("original")),type:"checkbox",indeterminate:A.indeterminate,disabled:C(v),value:C(a),name:A.name,tabindex:A.tabindex,onChange:m[6]||(m[6]=(...x)=>C(l)&&C(l)(...x)),onFocus:m[7]||(m[7]=x=>c.value=!0),onBlur:m[8]||(m[8]=x=>c.value=!1),onClick:m[9]||(m[9]=ot(()=>{},["stop"]))},null,42,jS)),[[il,C(u)]]),T("span",{class:de(C(h).e("inner"))},null,2)],2),C(d)?($(),se("span",{key:0,class:de(C(h).e("label"))},[Ne(A.$slots,"default"),A.$slots.default?be("v-if",!0):($(),se(Qe,{key:0},[Be(Se(A.label),1)],64))],2)):be("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}}));var RS=at(FS,[["__file","checkbox.vue"]]);const NS=["name","tabindex","disabled","true-value","false-value"],zS=["name","tabindex","disabled","value"],VS=Ce({name:"ElCheckboxButton"}),US=Ce(De(ve({},VS),{props:Dp,emits:Tp,setup(t){const e=t,n=I2(),{isFocused:i,isChecked:o,isDisabled:p,checkboxButtonSize:v,model:c,actualValue:r,handleChange:d}=Mp(e,n),u=Re(Jr,void 0),a=Je("checkbox"),l=ue(()=>{var h,g,f,A;const m=(g=(h=u==null?void 0:u.fill)==null?void 0:h.value)!=null?g:"";return{backgroundColor:m,borderColor:m,color:(A=(f=u==null?void 0:u.textColor)==null?void 0:f.value)!=null?A:"",boxShadow:m?`-1px 0 0 0 ${m}`:void 0}}),s=ue(()=>[a.b("button"),a.bm("button",v.value),a.is("disabled",p.value),a.is("checked",o.value),a.is("focus",i.value)]);return(h,g)=>{var f,A;return $(),se("label",{class:de(C(s))},[h.trueValue||h.falseValue||h.trueLabel||h.falseLabel?lt(($(),se("input",{key:0,"onUpdate:modelValue":g[0]||(g[0]=m=>ut(c)?c.value=m:null),class:de(C(a).be("button","original")),type:"checkbox",name:h.name,tabindex:h.tabindex,disabled:C(p),"true-value":(f=h.trueValue)!=null?f:h.trueLabel,"false-value":(A=h.falseValue)!=null?A:h.falseLabel,onChange:g[1]||(g[1]=(...m)=>C(d)&&C(d)(...m)),onFocus:g[2]||(g[2]=m=>i.value=!0),onBlur:g[3]||(g[3]=m=>i.value=!1),onClick:g[4]||(g[4]=ot(()=>{},["stop"]))},null,42,NS)),[[il,C(c)]]):lt(($(),se("input",{key:1,"onUpdate:modelValue":g[5]||(g[5]=m=>ut(c)?c.value=m:null),class:de(C(a).be("button","original")),type:"checkbox",name:h.name,tabindex:h.tabindex,disabled:C(p),value:C(r),onChange:g[6]||(g[6]=(...m)=>C(d)&&C(d)(...m)),onFocus:g[7]||(g[7]=m=>i.value=!0),onBlur:g[8]||(g[8]=m=>i.value=!1),onClick:g[9]||(g[9]=ot(()=>{},["stop"]))},null,42,zS)),[[il,C(c)]]),h.$slots.default||h.label?($(),se("span",{key:2,class:de(C(a).be("button","inner")),style:$e(C(o)?C(l):void 0)},[Ne(h.$slots,"default",{},()=>[Be(Se(h.label),1)])],6)):be("v-if",!0)],2)}}}));var Qp=at(US,[["__file","checkbox-button.vue"]]);const HS=Qt(ve({modelValue:{type:xt(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Bi,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}},ar(["ariaLabel"]))),GS={[Ze]:t=>nn(t),change:t=>nn(t)},YS=Ce({name:"ElCheckboxGroup"}),WS=Ce(De(ve({},YS),{props:HS,emits:GS,setup(t,{emit:e}){const n=t,i=Je("checkbox"),{formItem:o}=Oi(),{inputId:p,isLabeledByFormItem:v}=Or(n,{formItemContext:o}),c=d=>we(this,null,function*(){e(Ze,d),yield Le(),e("change",d)}),r=ue({get(){return n.modelValue},set(d){c(d)}});return un(Jr,De(ve({},Br(Fi(n),["size","min","max","disabled","validateEvent","fill","textColor"])),{modelValue:r,changeEvent:c})),Xn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},ue(()=>!!n.label)),Me(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(d=>Wn()))}),(d,u)=>{var a;return $(),_e(tn(d.tag),{id:C(p),class:de(C(i).b("group")),role:"group","aria-label":C(v)?void 0:d.label||d.ariaLabel||"checkbox-group","aria-labelledby":C(v)?(a=C(o))==null?void 0:a.labelId:void 0},{default:K(()=>[Ne(d.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}}));var Lp=at(WS,[["__file","checkbox-group.vue"]]);const jp=ln(RS,{CheckboxButton:Qp,CheckboxGroup:Lp});or(Qp),or(Lp);const Pp=Qt({modelValue:{type:[String,Number,Boolean],default:void 0},size:Bi,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),XS=Qt(De(ve({},Pp),{border:Boolean})),Fp={[Ze]:t=>Jt(t)||_t(t)||di(t),[Sn]:t=>Jt(t)||_t(t)||di(t)},Rp=Symbol("radioGroupKey"),Np=(t,e)=>{const n=ce(),i=Re(Rp,void 0),o=ue(()=>!!i),p=ue(()=>Bo(t.value)?t.label:t.value),v=ue({get(){return o.value?i.modelValue:t.modelValue},set(a){o.value?i.changeEvent(a):e&&e(Ze,a),n.value.checked=t.modelValue===p.value}}),c=Di(ue(()=>i==null?void 0:i.size)),r=Ta(ue(()=>i==null?void 0:i.disabled)),d=ce(!1),u=ue(()=>r.value||o.value&&v.value!==p.value?-1:0);return Xn({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},ue(()=>o.value&&Bo(t.value))),{radioRef:n,isGroup:o,radioGroup:i,focus:d,size:c,disabled:r,tabIndex:u,modelValue:v,actualValue:p}},$S=["value","name","disabled"],qS=Ce({name:"ElRadio"}),KS=Ce(De(ve({},qS),{props:XS,emits:Fp,setup(t,{emit:e}){const n=t,i=Je("radio"),{radioRef:o,radioGroup:p,focus:v,size:c,disabled:r,modelValue:d,actualValue:u}=Np(n,e);function a(){Le(()=>e("change",d.value))}return(l,s)=>{var h;return $(),se("label",{class:de([C(i).b(),C(i).is("disabled",C(r)),C(i).is("focus",C(v)),C(i).is("bordered",l.border),C(i).is("checked",C(d)===C(u)),C(i).m(C(c))])},[T("span",{class:de([C(i).e("input"),C(i).is("disabled",C(r)),C(i).is("checked",C(d)===C(u))])},[lt(T("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":s[0]||(s[0]=g=>ut(d)?d.value=g:null),class:de(C(i).e("original")),value:C(u),name:l.name||((h=C(p))==null?void 0:h.name),disabled:C(r),type:"radio",onFocus:s[1]||(s[1]=g=>v.value=!0),onBlur:s[2]||(s[2]=g=>v.value=!1),onChange:a,onClick:s[3]||(s[3]=ot(()=>{},["stop"]))},null,42,$S),[[k2,C(d)]]),T("span",{class:de(C(i).e("inner"))},null,2)],2),T("span",{class:de(C(i).e("label")),onKeydown:s[4]||(s[4]=ot(()=>{},["stop"]))},[Ne(l.$slots,"default",{},()=>[Be(Se(l.label),1)])],34)],2)}}}));var JS=at(KS,[["__file","radio.vue"]]);const ZS=Qt(ve({},Pp)),eE=["value","name","disabled"],tE=Ce({name:"ElRadioButton"}),nE=Ce(De(ve({},tE),{props:ZS,setup(t){const e=t,n=Je("radio"),{radioRef:i,focus:o,size:p,disabled:v,modelValue:c,radioGroup:r,actualValue:d}=Np(e),u=ue(()=>({backgroundColor:(r==null?void 0:r.fill)||"",borderColor:(r==null?void 0:r.fill)||"",boxShadow:r!=null&&r.fill?`-1px 0 0 0 ${r.fill}`:"",color:(r==null?void 0:r.textColor)||""}));return(a,l)=>{var s;return $(),se("label",{class:de([C(n).b("button"),C(n).is("active",C(c)===C(d)),C(n).is("disabled",C(v)),C(n).is("focus",C(o)),C(n).bm("button",C(p))])},[lt(T("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":l[0]||(l[0]=h=>ut(c)?c.value=h:null),class:de(C(n).be("button","original-radio")),value:C(d),type:"radio",name:a.name||((s=C(r))==null?void 0:s.name),disabled:C(v),onFocus:l[1]||(l[1]=h=>o.value=!0),onBlur:l[2]||(l[2]=h=>o.value=!1),onClick:l[3]||(l[3]=ot(()=>{},["stop"]))},null,42,eE),[[k2,C(c)]]),T("span",{class:de(C(n).be("button","inner")),style:$e(C(c)===C(d)?C(u):{}),onKeydown:l[4]||(l[4]=ot(()=>{},["stop"]))},[Ne(a.$slots,"default",{},()=>[Be(Se(a.label),1)])],38)],2)}}}));var zp=at(nE,[["__file","radio-button.vue"]]);const iE=Qt(ve({id:{type:String,default:void 0},size:Bi,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}},ar(["ariaLabel"]))),rE=Fp,oE=["id","aria-label","aria-labelledby"],aE=Ce({name:"ElRadioGroup"}),sE=Ce(De(ve({},aE),{props:iE,emits:rE,setup(t,{emit:e}){const n=t,i=Je("radio"),o=Qh(),p=ce(),{formItem:v}=Oi(),{inputId:c,isLabeledByFormItem:r}=Or(n,{formItemContext:v}),d=a=>{e(Ze,a),Le(()=>e("change",a))};je(()=>{const a=p.value.querySelectorAll("[type=radio]"),l=a[0];!Array.from(a).some(s=>s.checked)&&l&&(l.tabIndex=0)});const u=ue(()=>n.name||o.value);return un(Rp,et(De(ve({},Fi(n)),{changeEvent:d,name:u}))),Me(()=>n.modelValue,()=>{n.validateEvent&&(v==null||v.validate("change").catch(a=>Wn()))}),Xn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},ue(()=>!!n.label)),(a,l)=>($(),se("div",{id:C(c),ref_key:"radioGroupRef",ref:p,class:de(C(i).b("group")),role:"radiogroup","aria-label":C(r)?void 0:a.label||a.ariaLabel||"radio-group","aria-labelledby":C(r)?C(v).labelId:void 0},[Ne(a.$slots,"default")],10,oE))}}));var Vp=at(sE,[["__file","radio-group.vue"]]);const lE=ln(JS,{RadioButton:zp,RadioGroup:Vp}),ac=or(Vp),Up=or(zp),sc=Qt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:GU},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),cE={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},uE=Ce({name:"ElTag"}),hE=Ce(De(ve({},uE),{props:sc,emits:cE,setup(t,{emit:e}){const n=t,i=Di(),o=Je("tag"),p=ue(()=>{const{type:r,hit:d,effect:u,closable:a,round:l}=n;return[o.b(),o.is("closable",a),o.m(r||"primary"),o.m(i.value),o.m(u),o.is("hit",d),o.is("round",l)]}),v=r=>{e("close",r)},c=r=>{e("click",r)};return(r,d)=>r.disableTransitions?($(),se("span",{key:0,class:de(C(p)),style:$e({backgroundColor:r.color}),onClick:c},[T("span",{class:de(C(o).e("content"))},[Ne(r.$slots,"default")],2),r.closable?($(),_e(C(it),{key:0,class:de(C(o).e("close")),onClick:ot(v,["stop"])},{default:K(()=>[M(C(qs))]),_:1},8,["class","onClick"])):be("v-if",!0)],6)):($(),_e(Gh,{key:1,name:`${C(o).namespace.value}-zoom-in-center`,appear:""},{default:K(()=>[T("span",{class:de(C(p)),style:$e({backgroundColor:r.color}),onClick:c},[T("span",{class:de(C(o).e("content"))},[Ne(r.$slots,"default")],2),r.closable?($(),_e(C(it),{key:0,class:de(C(o).e("close")),onClick:ot(v,["stop"])},{default:K(()=>[M(C(qs))]),_:1},8,["class","onClick"])):be("v-if",!0)],6)]),_:3},8,["name"]))}}));var dE=at(hE,[["__file","tag.vue"]]);const fE=ln(dE),Hp=Symbol("rowContextKey"),pE=["start","center","end","space-around","space-between","space-evenly"],gE=["top","middle","bottom"],vE=Qt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:pE,default:"start"},align:{type:String,values:gE}}),AE=Ce({name:"ElRow"}),mE=Ce(De(ve({},AE),{props:vE,setup(t){const e=t,n=Je("row"),i=ue(()=>e.gutter);un(Hp,{gutter:i});const o=ue(()=>{const v={};return e.gutter&&(v.marginRight=v.marginLeft=`-${e.gutter/2}px`),v}),p=ue(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,!!e.align)]);return(v,c)=>($(),_e(tn(v.tag),{class:de(C(p)),style:$e(C(o))},{default:K(()=>[Ne(v.$slots,"default")]),_:3},8,["class","style"]))}}));var yE=at(mE,[["__file","row.vue"]]);const vr=ln(yE),bE=Qt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:xt([Number,Object]),default:()=>lr({})},sm:{type:xt([Number,Object]),default:()=>lr({})},md:{type:xt([Number,Object]),default:()=>lr({})},lg:{type:xt([Number,Object]),default:()=>lr({})},xl:{type:xt([Number,Object]),default:()=>lr({})}}),CE=Ce({name:"ElCol"}),wE=Ce(De(ve({},CE),{props:bE,setup(t){const e=t,{gutter:n}=Re(Hp,{gutter:ue(()=>0)}),i=Je("col"),o=ue(()=>{const v={};return n.value&&(v.paddingLeft=v.paddingRight=`${n.value/2}px`),v}),p=ue(()=>{const v=[];return["span","offset","pull","push"].forEach(c=>{const r=e[c];_t(r)&&(c==="span"?v.push(i.b(`${e[c]}`)):r>0&&v.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{_t(e[c])?v.push(i.b(`${c}-${e[c]}`)):Pi(e[c])&&Object.entries(e[c]).forEach(([r,d])=>{v.push(r!=="span"?i.b(`${c}-${r}-${d}`):i.b(`${c}-${d}`))})}),n.value&&v.push(i.is("guttered")),[i.b(),v]});return(v,c)=>($(),_e(tn(v.tag),{class:de(C(p)),style:$e(C(o))},{default:K(()=>[Ne(v.$slots,"default")]),_:3},8,["class","style"]))}}));var xE=at(wE,[["__file","col.vue"]]);const Ar=ln(xE),Gp=t=>_t(t)||Jt(t)||nn(t),_E=Qt({accordion:Boolean,modelValue:{type:xt([Array,String,Number]),default:()=>lr([])}}),SE={[Ze]:Gp,[Sn]:Gp},Yp=Symbol("collapseContextKey"),EE=(t,e)=>{const n=ce($s(t.modelValue)),i=p=>{n.value=p;const v=t.accordion?n.value[0]:n.value;e(Ze,v),e(Sn,v)},o=p=>{if(t.accordion)i([n.value[0]===p?"":p]);else{const v=[...n.value],c=v.indexOf(p);c>-1?v.splice(c,1):v.push(p),i(v)}};return Me(()=>t.modelValue,()=>n.value=$s(t.modelValue),{deep:!0}),un(Yp,{activeNames:n,handleItemClick:o}),{activeNames:n,setActiveNames:i}},IE=()=>{const t=Je("collapse");return{rootKls:ue(()=>t.b())}},kE=Ce({name:"ElCollapse"}),BE=Ce(De(ve({},kE),{props:_E,emits:SE,setup(t,{expose:e,emit:n}){const i=t,{activeNames:o,setActiveNames:p}=EE(i,n),{rootKls:v}=IE();return e({activeNames:o,setActiveNames:p}),(c,r)=>($(),se("div",{class:de(C(v))},[Ne(c.$slots,"default")],2))}}));var OE=at(BE,[["__file","collapse.vue"]]);const DE=Ce({name:"ElCollapseTransition"}),TE=Ce(De(ve({},DE),{setup(t){const e=Je("collapse-transition"),n=o=>{o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom},i={beforeEnter(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.height&&(o.dataset.elExistsHeight=o.style.height),o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0},enter(o){requestAnimationFrame(()=>{o.dataset.oldOverflow=o.style.overflow,o.dataset.elExistsHeight?o.style.maxHeight=o.dataset.elExistsHeight:o.scrollHeight!==0?o.style.maxHeight=`${o.scrollHeight}px`:o.style.maxHeight=0,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom,o.style.overflow="hidden"})},afterEnter(o){o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow},enterCancelled(o){n(o)},beforeLeave(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.maxHeight=`${o.scrollHeight}px`,o.style.overflow="hidden"},leave(o){o.scrollHeight!==0&&(o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){n(o)},leaveCancelled(o){n(o)}};return(o,p)=>($(),_e(Gh,dr({name:C(e).b()},VH(i)),{default:K(()=>[Ne(o.$slots,"default")]),_:3},16,["name"]))}}));var rs=at(TE,[["__file","collapse-transition.vue"]]);rs.install=t=>{t.component(rs.name,rs)};const Wp=rs,ME=Qt({title:{type:String,default:""},name:{type:xt([String,Number]),default:void 0},disabled:Boolean}),QE=t=>{const e=Re(Yp),{namespace:n}=Je("collapse"),i=ce(!1),o=ce(!1),p=YU(),v=ue(()=>p.current++),c=ue(()=>{var d;return(d=t.name)!=null?d:`${n.value}-id-${p.prefix}-${C(v)}`}),r=ue(()=>e==null?void 0:e.activeNames.value.includes(C(c)));return{focusing:i,id:v,isActive:r,handleFocus:()=>{setTimeout(()=>{o.value?o.value=!1:i.value=!0},50)},handleHeaderClick:()=>{t.disabled||(e==null||e.handleItemClick(C(c)),i.value=!1,o.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(C(c))}}},LE=(t,{focusing:e,isActive:n,id:i})=>{const o=Je("collapse"),p=ue(()=>[o.b("item"),o.is("active",C(n)),o.is("disabled",t.disabled)]),v=ue(()=>[o.be("item","header"),o.is("active",C(n)),{focusing:C(e)&&!t.disabled}]),c=ue(()=>[o.be("item","arrow"),o.is("active",C(n))]),r=ue(()=>o.be("item","wrap")),d=ue(()=>o.be("item","content")),u=ue(()=>o.b(`content-${C(i)}`)),a=ue(()=>o.b(`head-${C(i)}`));return{arrowKls:c,headKls:v,rootKls:p,itemWrapperKls:r,itemContentKls:d,scopedContentId:u,scopedHeadId:a}},jE=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],PE=["id","aria-hidden","aria-labelledby"],FE=Ce({name:"ElCollapseItem"}),RE=Ce(De(ve({},FE),{props:ME,setup(t,{expose:e}){const n=t,{focusing:i,id:o,isActive:p,handleFocus:v,handleHeaderClick:c,handleEnterClick:r}=QE(n),{arrowKls:d,headKls:u,rootKls:a,itemWrapperKls:l,itemContentKls:s,scopedContentId:h,scopedHeadId:g}=LE(n,{focusing:i,isActive:p,id:o});return e({isActive:p}),(f,A)=>($(),se("div",{class:de(C(a))},[T("button",{id:C(g),class:de(C(u)),"aria-expanded":C(p),"aria-controls":C(h),"aria-describedby":C(h),tabindex:f.disabled?-1:0,type:"button",onClick:A[0]||(A[0]=(...m)=>C(c)&&C(c)(...m)),onKeydown:A[1]||(A[1]=hn(ot((...m)=>C(r)&&C(r)(...m),["stop","prevent"]),["space","enter"])),onFocus:A[2]||(A[2]=(...m)=>C(v)&&C(v)(...m)),onBlur:A[3]||(A[3]=m=>i.value=!1)},[Ne(f.$slots,"title",{},()=>[Be(Se(f.title),1)]),M(C(it),{class:de(C(d))},{default:K(()=>[M(C(c2))]),_:1},8,["class"])],42,jE),M(C(Wp),null,{default:K(()=>[lt(T("div",{id:C(h),role:"region",class:de(C(l)),"aria-hidden":!C(p),"aria-labelledby":C(g)},[T("div",{class:de(C(s))},[Ne(f.$slots,"default")],2)],10,PE),[[Ut,C(p)]])]),_:3})],2))}}));var Xp=at(RE,[["__file","collapse-item.vue"]]);const NE=ln(OE,{CollapseItem:Xp}),zE=or(Xp),VE=Qt({color:{type:xt(Object),required:!0},vertical:{type:Boolean,default:!1}});let lc=!1;function Yo(t,e){if(!hi)return;const n=function(p){var v;(v=e.drag)==null||v.call(e,p)},i=function(p){var v;document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,lc=!1,(v=e.end)==null||v.call(e,p)},o=function(p){var v;lc||(p.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),document.addEventListener("touchmove",n),document.addEventListener("touchend",i),lc=!0,(v=e.start)==null||v.call(e,p))};t.addEventListener("mousedown",o),t.addEventListener("touchstart",o)}const UE=t=>{const e=ft(),n=Mo(),i=Mo();function o(v){v.target!==n.value&&p(v)}function p(v){if(!i.value||!n.value)return;const c=e.vnode.el.getBoundingClientRect(),{clientX:r,clientY:d}=oc(v);if(t.vertical){let u=d-c.top;u=Math.max(n.value.offsetHeight/2,u),u=Math.min(u,c.height-n.value.offsetHeight/2),t.color.set("alpha",Math.round((u-n.value.offsetHeight/2)/(c.height-n.value.offsetHeight)*100))}else{let u=r-c.left;u=Math.max(n.value.offsetWidth/2,u),u=Math.min(u,c.width-n.value.offsetWidth/2),t.color.set("alpha",Math.round((u-n.value.offsetWidth/2)/(c.width-n.value.offsetWidth)*100))}}return{thumb:n,bar:i,handleDrag:p,handleClick:o}},HE=(t,{bar:e,thumb:n,handleDrag:i})=>{const o=ft(),p=Je("color-alpha-slider"),v=ce(0),c=ce(0),r=ce();function d(){if(!n.value||t.vertical)return 0;const m=o.vnode.el,y=t.color.get("alpha");return m?Math.round(y*(m.offsetWidth-n.value.offsetWidth/2)/100):0}function u(){if(!n.value)return 0;const m=o.vnode.el;if(!t.vertical)return 0;const y=t.color.get("alpha");return m?Math.round(y*(m.offsetHeight-n.value.offsetHeight/2)/100):0}function a(){if(t.color&&t.color.value){const{r:m,g:y,b}=t.color.toRgb();return`linear-gradient(to right, rgba(${m}, ${y}, ${b}, 0) 0%, rgba(${m}, ${y}, ${b}, 1) 100%)`}return""}function l(){v.value=d(),c.value=u(),r.value=a()}je(()=>{if(!e.value||!n.value)return;const m={drag:y=>{i(y)},end:y=>{i(y)}};Yo(e.value,m),Yo(n.value,m),l()}),Me(()=>t.color.get("alpha"),()=>l()),Me(()=>t.color.value,()=>l());const s=ue(()=>[p.b(),p.is("vertical",t.vertical)]),h=ue(()=>p.e("bar")),g=ue(()=>p.e("thumb")),f=ue(()=>({background:r.value})),A=ue(()=>({left:Ks(v.value),top:Ks(c.value)}));return{rootKls:s,barKls:h,barStyle:f,thumbKls:g,thumbStyle:A,update:l}},GE="ElColorAlphaSlider",YE=Ce({name:GE}),WE=Ce(De(ve({},YE),{props:VE,setup(t,{expose:e}){const n=t,{bar:i,thumb:o,handleDrag:p,handleClick:v}=UE(n),{rootKls:c,barKls:r,barStyle:d,thumbKls:u,thumbStyle:a,update:l}=HE(n,{bar:i,thumb:o,handleDrag:p});return e({update:l,bar:i,thumb:o}),(s,h)=>($(),se("div",{class:de(C(c))},[T("div",{ref_key:"bar",ref:i,class:de(C(r)),style:$e(C(d)),onClick:h[0]||(h[0]=(...g)=>C(v)&&C(v)(...g))},null,6),T("div",{ref_key:"thumb",ref:o,class:de(C(u)),style:$e(C(a))},null,6)],2))}}));var XE=at(WE,[["__file","alpha-slider.vue"]]);const $E=Ce({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(t){const e=Je("color-hue-slider"),n=ft(),i=ce(),o=ce(),p=ce(0),v=ce(0),c=ue(()=>t.color.get("hue"));Me(()=>c.value,()=>{l()});function r(s){s.target!==i.value&&d(s)}function d(s){if(!o.value||!i.value)return;const h=n.vnode.el.getBoundingClientRect(),{clientX:g,clientY:f}=oc(s);let A;if(t.vertical){let m=f-h.top;m=Math.min(m,h.height-i.value.offsetHeight/2),m=Math.max(i.value.offsetHeight/2,m),A=Math.round((m-i.value.offsetHeight/2)/(h.height-i.value.offsetHeight)*360)}else{let m=g-h.left;m=Math.min(m,h.width-i.value.offsetWidth/2),m=Math.max(i.value.offsetWidth/2,m),A=Math.round((m-i.value.offsetWidth/2)/(h.width-i.value.offsetWidth)*360)}t.color.set("hue",A)}function u(){if(!i.value)return 0;const s=n.vnode.el;if(t.vertical)return 0;const h=t.color.get("hue");return s?Math.round(h*(s.offsetWidth-i.value.offsetWidth/2)/360):0}function a(){if(!i.value)return 0;const s=n.vnode.el;if(!t.vertical)return 0;const h=t.color.get("hue");return s?Math.round(h*(s.offsetHeight-i.value.offsetHeight/2)/360):0}function l(){p.value=u(),v.value=a()}return je(()=>{if(!o.value||!i.value)return;const s={drag:h=>{d(h)},end:h=>{d(h)}};Yo(o.value,s),Yo(i.value,s),l()}),{bar:o,thumb:i,thumbLeft:p,thumbTop:v,hueValue:c,handleClick:r,update:l,ns:e}}});function qE(t,e,n,i,o,p){return $(),se("div",{class:de([t.ns.b(),t.ns.is("vertical",t.vertical)])},[T("div",{ref:"bar",class:de(t.ns.e("bar")),onClick:e[0]||(e[0]=(...v)=>t.handleClick&&t.handleClick(...v))},null,2),T("div",{ref:"thumb",class:de(t.ns.e("thumb")),style:$e({left:t.thumbLeft+"px",top:t.thumbTop+"px"})},null,6)],2)}var KE=at($E,[["render",qE],["__file","hue-slider.vue"]]);const JE=Qt(ve({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Bi,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:fi.teleported,predefine:{type:xt(Array)},validateEvent:{type:Boolean,default:!0}},ar(["ariaLabel"]))),ZE={[Ze]:t=>Jt(t)||ki(t),[Sn]:t=>Jt(t)||ki(t),activeChange:t=>Jt(t)||ki(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent},$p=Symbol("colorPickerContextKey"),qp=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},eI=function(t){return typeof t=="string"&&t.includes(".")&&Number.parseFloat(t)===1},tI=function(t){return typeof t=="string"&&t.includes("%")},Zr=function(t,e){eI(t)&&(t="100%");const n=tI(t);return t=Math.min(e,Math.max(0,Number.parseFloat(`${t}`))),n&&(t=Number.parseInt(`${t*e}`,10)/100),Math.abs(t-e)<1e-6?1:t%e/Number.parseFloat(e)},Kp={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},os=t=>{t=Math.min(Math.round(t),255);const e=Math.floor(t/16),n=t%16;return`${Kp[e]||e}${Kp[n]||n}`},Jp=function({r:t,g:e,b:n}){return Number.isNaN(+t)||Number.isNaN(+e)||Number.isNaN(+n)?"":`#${os(t)}${os(e)}${os(n)}`},cc={A:10,B:11,C:12,D:13,E:14,F:15},mr=function(t){return t.length===2?(cc[t[0].toUpperCase()]||+t[0])*16+(cc[t[1].toUpperCase()]||+t[1]):cc[t[1].toUpperCase()]||+t[1]},nI=function(t,e,n){e=e/100,n=n/100;let i=e;const o=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,i*=o<=1?o:2-o;const p=(n+e)/2,v=n===0?2*i/(o+i):2*e/(n+e);return{h:t,s:v*100,v:p*100}},Zp=(t,e,n)=>{t=Zr(t,255),e=Zr(e,255),n=Zr(n,255);const i=Math.max(t,e,n),o=Math.min(t,e,n);let p;const v=i,c=i-o,r=i===0?0:c/i;if(i===o)p=0;else{switch(i){case t:{p=(e-n)/c+(e<n?6:0);break}case e:{p=(n-t)/c+2;break}case n:{p=(t-e)/c+4;break}}p/=6}return{h:p*360,s:r*100,v:v*100}},Wo=function(t,e,n){t=Zr(t,360)*6,e=Zr(e,100),n=Zr(n,100);const i=Math.floor(t),o=t-i,p=n*(1-e),v=n*(1-o*e),c=n*(1-(1-o)*e),r=i%6,d=[n,v,p,p,c,n][r],u=[c,n,n,v,p,p][r],a=[p,p,c,n,n,v][r];return{r:Math.round(d*255),g:Math.round(u*255),b:Math.round(a*255)}};class Xo{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const n in e)Qa(e,n)&&(this[n]=e[n]);e.value?this.fromString(e.value):this.doOnChange()}set(e,n){if(arguments.length===1&&typeof e=="object"){for(const i in e)Qa(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=n,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Wo(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(i,o,p)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,o)),this._value=Math.max(0,Math.min(100,p)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,p)=>p>2?Number.parseFloat(o):Number.parseInt(o,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:o,s:p,v}=nI(i[0],i[1],i[2]);n(o,p,v)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,p)=>p>2?Number.parseFloat(o):Number.parseInt(o,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&n(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,p)=>p>2?Number.parseFloat(o):Number.parseInt(o,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:o,s:p,v}=Zp(i[0],i[1],i[2]);n(o,p,v)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let o,p,v;i.length===3?(o=mr(i[0]+i[0]),p=mr(i[1]+i[1]),v=mr(i[2]+i[2])):(i.length===6||i.length===8)&&(o=mr(i.slice(0,2)),p=mr(i.slice(2,4)),v=mr(i.slice(4,6))),i.length===8?this._alpha=mr(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:c,s:r,v:d}=Zp(o,p,v);n(c,r,d)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:n,_value:i,_alpha:o,format:p}=this;if(this.enableAlpha)switch(p){case"hsl":{const v=qp(e,n/100,i/100);this.value=`hsla(${e}, ${Math.round(v[1]*100)}%, ${Math.round(v[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(n)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Jp(Wo(e,n,i))}${os(o*255/100)}`;break}default:{const{r:v,g:c,b:r}=Wo(e,n,i);this.value=`rgba(${v}, ${c}, ${r}, ${this.get("alpha")/100})`}}else switch(p){case"hsl":{const v=qp(e,n/100,i/100);this.value=`hsl(${e}, ${Math.round(v[1]*100)}%, ${Math.round(v[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(n)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:v,g:c,b:r}=Wo(e,n,i);this.value=`rgb(${v}, ${c}, ${r})`;break}default:this.value=Jp(Wo(e,n,i))}}}const iI=Ce({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(t){const e=Je("color-predefine"),{currentColor:n}=Re($p),i=ce(p(t.colors,t.color));Me(()=>n.value,v=>{const c=new Xo;c.fromString(v),i.value.forEach(r=>{r.selected=c.compare(r)})}),B2(()=>{i.value=p(t.colors,t.color)});function o(v){t.color.fromString(t.colors[v])}function p(v,c){return v.map(r=>{const d=new Xo;return d.enableAlpha=t.enableAlpha,d.format="rgba",d.fromString(r),d.selected=d.value===c.value,d})}return{rgbaColors:i,handleSelect:o,ns:e}}}),rI=["onClick"];function oI(t,e,n,i,o,p){return $(),se("div",{class:de(t.ns.b())},[T("div",{class:de(t.ns.e("colors"))},[($(!0),se(Qe,null,We(t.rgbaColors,(v,c)=>($(),se("div",{key:t.colors[c],class:de([t.ns.e("color-selector"),t.ns.is("alpha",v._alpha<100),{selected:v.selected}]),onClick:r=>t.handleSelect(c)},[T("div",{style:$e({backgroundColor:v.value})},null,4)],10,rI))),128))],2)],2)}var aI=at(iI,[["render",oI],["__file","predefine.vue"]]);const sI=Ce({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(t){const e=Je("color-svpanel"),n=ft(),i=ce(0),o=ce(0),p=ce("hsl(0, 100%, 50%)"),v=ue(()=>{const d=t.color.get("hue"),u=t.color.get("value");return{hue:d,value:u}});function c(){const d=t.color.get("saturation"),u=t.color.get("value"),a=n.vnode.el,{clientWidth:l,clientHeight:s}=a;o.value=d*l/100,i.value=(100-u)*s/100,p.value=`hsl(${t.color.get("hue")}, 100%, 50%)`}function r(d){const u=n.vnode.el.getBoundingClientRect(),{clientX:a,clientY:l}=oc(d);let s=a-u.left,h=l-u.top;s=Math.max(0,s),s=Math.min(s,u.width),h=Math.max(0,h),h=Math.min(h,u.height),o.value=s,i.value=h,t.color.set({saturation:s/u.width*100,value:100-h/u.height*100})}return Me(()=>v.value,()=>{c()}),je(()=>{Yo(n.vnode.el,{drag:d=>{r(d)},end:d=>{r(d)}}),c()}),{cursorTop:i,cursorLeft:o,background:p,colorValue:v,handleDrag:r,update:c,ns:e}}}),lI=T("div",null,null,-1),cI=[lI];function uI(t,e,n,i,o,p){return $(),se("div",{class:de(t.ns.b()),style:$e({backgroundColor:t.background})},[T("div",{class:de(t.ns.e("white"))},null,2),T("div",{class:de(t.ns.e("black"))},null,2),T("div",{class:de(t.ns.e("cursor")),style:$e({top:t.cursorTop+"px",left:t.cursorLeft+"px"})},cI,6)],6)}var hI=at(sI,[["render",uI],["__file","sv-panel.vue"]]);const dI=["onKeydown"],fI=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],pI=Ce({name:"ElColorPicker"}),gI=Ce(De(ve({},pI),{props:JE,emits:ZE,setup(t,{expose:e,emit:n}){const i=t,{t:o}=rr(),p=Je("color"),{formItem:v}=Oi(),c=Di(),r=Ta(),{inputId:d,isLabeledByFormItem:u}=Or(i,{formItemContext:v}),a=ce(),l=ce(),s=ce(),h=ce(),g=ce(),f=ce(),{isFocused:A,handleFocus:m,handleBlur:y}=u2(g,{beforeBlur(Y){var z;return(z=h.value)==null?void 0:z.isFocusInsideContent(Y)},afterBlur(){U(!1),k()}}),b=Y=>{if(r.value)return V();m(Y)};let x=!0;const S=et(new Xo({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),O=ce(!1),R=ce(!1),Z=ce(""),ee=ue(()=>!i.modelValue&&!R.value?"transparent":P(S,i.showAlpha)),re=ue(()=>!i.modelValue&&!R.value?"":S.value),ae=ue(()=>u.value?void 0:i.label||i.ariaLabel||o("el.colorpicker.defaultLabel"));Xn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},ue(()=>!!i.label));const ne=ue(()=>u.value?v==null?void 0:v.labelId:void 0),J=ue(()=>[p.b("picker"),p.is("disabled",r.value),p.bm("picker",c.value),p.is("focused",A.value)]);function P(Y,z){if(!(Y instanceof Xo))throw new TypeError("color should be instance of _color Class");const{r:X,g:N,b:j}=Y.toRgb();return z?`rgba(${X}, ${N}, ${j}, ${Y.get("alpha")/100})`:`rgb(${X}, ${N}, ${j})`}function U(Y){O.value=Y}const W=Ot(U,100,{leading:!0});function F(){r.value||U(!0)}function E(){W(!1),k()}function k(){Le(()=>{i.modelValue?S.fromString(i.modelValue):(S.value="",Le(()=>{R.value=!1}))})}function L(){r.value||W(!O.value)}function B(){S.fromString(Z.value)}function Q(){const Y=S.value;n(Ze,Y),n("change",Y),i.validateEvent&&(v==null||v.validate("change").catch(z=>Wn())),W(!1),Le(()=>{const z=new Xo({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});S.compare(z)||k()})}function w(){W(!1),n(Ze,null),n("change",null),i.modelValue!==null&&i.validateEvent&&(v==null||v.validate("change").catch(Y=>Wn())),k()}function _(Y){if(O.value&&(E(),A.value)){const z=new FocusEvent("focus",Y);y(z)}}function I(Y){Y.preventDefault(),Y.stopPropagation(),U(!1),k()}function D(Y){switch(Y.code){case Wt.enter:case Wt.space:Y.preventDefault(),Y.stopPropagation(),F(),f.value.focus();break;case Wt.esc:I(Y);break}}function H(){g.value.focus()}function V(){g.value.blur()}return je(()=>{i.modelValue&&(Z.value=re.value)}),Me(()=>i.modelValue,Y=>{Y?Y&&Y!==S.value&&(x=!1,S.fromString(Y)):R.value=!1}),Me(()=>re.value,Y=>{Z.value=Y,x&&n("activeChange",Y),x=!0}),Me(()=>S.value,()=>{!i.modelValue&&!R.value&&(R.value=!0)}),Me(()=>O.value,()=>{Le(()=>{var Y,z,X;(Y=a.value)==null||Y.update(),(z=l.value)==null||z.update(),(X=s.value)==null||X.update()})}),un($p,{currentColor:re}),e({color:S,show:F,hide:E,focus:H,blur:V}),(Y,z)=>($(),_e(C(Kt),{ref_key:"popper",ref:h,visible:O.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[C(p).be("picker","panel"),C(p).b("dropdown"),Y.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Y.teleported,transition:`${C(p).namespace.value}-zoom-in-top`,persistent:"",onHide:z[2]||(z[2]=X=>U(!1))},{content:K(()=>[lt(($(),se("div",{onKeydown:hn(I,["esc"])},[T("div",{class:de(C(p).be("dropdown","main-wrapper"))},[M(KE,{ref_key:"hue",ref:a,class:"hue-slider",color:C(S),vertical:""},null,8,["color"]),M(hI,{ref_key:"sv",ref:l,color:C(S)},null,8,["color"])],2),Y.showAlpha?($(),_e(XE,{key:0,ref_key:"alpha",ref:s,color:C(S)},null,8,["color"])):be("v-if",!0),Y.predefine?($(),_e(aI,{key:1,ref:"predefine","enable-alpha":Y.showAlpha,color:C(S),colors:Y.predefine},null,8,["enable-alpha","color","colors"])):be("v-if",!0),T("div",{class:de(C(p).be("dropdown","btns"))},[T("span",{class:de(C(p).be("dropdown","value"))},[M(C(Ft),{ref_key:"inputRef",ref:f,modelValue:Z.value,"onUpdate:modelValue":z[0]||(z[0]=X=>Z.value=X),"validate-event":!1,size:"small",onKeyup:hn(B,["enter"]),onBlur:B},null,8,["modelValue","onKeyup"])],2),M(C(st),{class:de(C(p).be("dropdown","link-btn")),text:"",size:"small",onClick:w},{default:K(()=>[Be(Se(C(o)("el.colorpicker.clear")),1)]),_:1},8,["class"]),M(C(st),{plain:"",size:"small",class:de(C(p).be("dropdown","btn")),onClick:Q},{default:K(()=>[Be(Se(C(o)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,dI)),[[C(Bp),_]])]),default:K(()=>[T("div",dr({id:C(d),ref_key:"triggerRef",ref:g},Y.$attrs,{class:C(J),role:"button","aria-label":C(ae),"aria-labelledby":C(ne),"aria-description":C(o)("el.colorpicker.description",{color:Y.modelValue||""}),"aria-disabled":C(r),tabindex:C(r)?-1:Y.tabindex,onKeydown:D,onFocus:b,onBlur:z[1]||(z[1]=(...X)=>C(y)&&C(y)(...X))}),[C(r)?($(),se("div",{key:0,class:de(C(p).be("picker","mask"))},null,2)):be("v-if",!0),T("div",{class:de(C(p).be("picker","trigger")),onClick:L},[T("span",{class:de([C(p).be("picker","color"),C(p).is("alpha",Y.showAlpha)])},[T("span",{class:de(C(p).be("picker","color-inner")),style:$e({backgroundColor:C(ee)})},[lt(M(C(it),{class:de([C(p).be("picker","icon"),C(p).is("icon-arrow-down")])},{default:K(()=>[M(C(Dr))]),_:1},8,["class"]),[[Ut,Y.modelValue||R.value]]),lt(M(C(it),{class:de([C(p).be("picker","empty"),C(p).is("icon-close")])},{default:K(()=>[M(C(qs))]),_:1},8,["class"]),[[Ut,!Y.modelValue&&!R.value]])],6)],2)],2)],16,fI)]),_:1},8,["visible","popper-class","teleported","transition"]))}}));var vI=at(gI,[["__file","color-picker.vue"]]);const mi=ln(vI),AI=Qt({urlList:{type:xt(Array),default:()=>lr([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:xt(String)}}),mI={close:()=>!0,switch:t=>_t(t),rotate:t=>_t(t)},yI=["src","crossorigin"],bI=Ce({name:"ElImageViewer"}),CI=Ce(De(ve({},bI),{props:AI,emits:mI,setup(t,{expose:e,emit:n}){var i;const o=t,p={CONTAIN:{name:"contain",icon:O2(h2)},ORIGINAL:{name:"original",icon:O2(WU)}},{t:v}=rr(),c=Je("image-viewer"),{nextZIndex:r}=XU(),d=ce(),u=ce([]),a=UH(),l=ce(!0),s=ce(o.initialIndex),h=Mo(p.CONTAIN),g=ce({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),f=ce((i=o.zIndex)!=null?i:r()),A=ue(()=>{const{urlList:k}=o;return k.length<=1}),m=ue(()=>s.value===0),y=ue(()=>s.value===o.urlList.length-1),b=ue(()=>o.urlList[s.value]),x=ue(()=>[c.e("btn"),c.e("prev"),c.is("disabled",!o.infinite&&m.value)]),S=ue(()=>[c.e("btn"),c.e("next"),c.is("disabled",!o.infinite&&y.value)]),O=ue(()=>{const{scale:k,deg:L,offsetX:B,offsetY:Q,enableTransition:w}=g.value;let _=B/k,I=Q/k;switch(L%360){case 90:case-270:[_,I]=[I,-_];break;case 180:case-180:[_,I]=[-_,-I];break;case 270:case-90:[_,I]=[-I,_];break}const D={transform:`scale(${k}) rotate(${L}deg) translate(${_}px, ${I}px)`,transition:w?"transform .3s":""};return h.value.name===p.CONTAIN.name&&(D.maxWidth=D.maxHeight="100%"),D});function R(){ee(),n("close")}function Z(){const k=Qn(B=>{switch(B.code){case Wt.esc:o.closeOnPressEscape&&R();break;case Wt.space:P();break;case Wt.left:W();break;case Wt.up:E("zoomIn");break;case Wt.right:F();break;case Wt.down:E("zoomOut");break}}),L=Qn(B=>{const Q=B.deltaY||B.deltaX;E(Q<0?"zoomIn":"zoomOut",{zoomRate:o.zoomRate,enableTransition:!1})});a.run(()=>{cr(document,"keydown",k),cr(document,"wheel",L)})}function ee(){a.stop()}function re(){l.value=!1}function ae(k){l.value=!1,k.target.alt=v("el.image.error")}function ne(k){if(l.value||k.button!==0||!d.value)return;g.value.enableTransition=!1;const{offsetX:L,offsetY:B}=g.value,Q=k.pageX,w=k.pageY,_=Qn(D=>{g.value=De(ve({},g.value),{offsetX:L+D.pageX-Q,offsetY:B+D.pageY-w})}),I=cr(document,"mousemove",_);cr(document,"mouseup",()=>{I()}),k.preventDefault()}function J(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function P(){if(l.value)return;const k=eH(p),L=Object.values(p),B=h.value.name,Q=(L.findIndex(w=>w.name===B)+1)%k.length;h.value=p[k[Q]],J()}function U(k){const L=o.urlList.length;s.value=(k+L)%L}function W(){m.value&&!o.infinite||U(s.value-1)}function F(){y.value&&!o.infinite||U(s.value+1)}function E(k,L={}){if(l.value)return;const{minScale:B,maxScale:Q}=o,{zoomRate:w,rotateDeg:_,enableTransition:I}=ve({zoomRate:o.zoomRate,rotateDeg:90,enableTransition:!0},L);switch(k){case"zoomOut":g.value.scale>B&&(g.value.scale=Number.parseFloat((g.value.scale/w).toFixed(3)));break;case"zoomIn":g.value.scale<Q&&(g.value.scale=Number.parseFloat((g.value.scale*w).toFixed(3)));break;case"clockwise":g.value.deg+=_,n("rotate",g.value.deg);break;case"anticlockwise":g.value.deg-=_,n("rotate",g.value.deg);break}g.value.enableTransition=I}return Me(b,()=>{Le(()=>{const k=u.value[0];k!=null&&k.complete||(l.value=!0)})}),Me(s,k=>{J(),n("switch",k)}),je(()=>{var k,L;Z(),(L=(k=d.value)==null?void 0:k.focus)==null||L.call(k)}),e({setActiveItem:U}),(k,L)=>($(),_e(HH,{to:"body",disabled:!k.teleported},[M(Gh,{name:"viewer-fade",appear:""},{default:K(()=>[T("div",{ref_key:"wrapper",ref:d,tabindex:-1,class:de(C(c).e("wrapper")),style:$e({zIndex:f.value})},[T("div",{class:de(C(c).e("mask")),onClick:L[0]||(L[0]=ot(B=>k.hideOnClickModal&&R(),["self"]))},null,2),be(" CLOSE "),T("span",{class:de([C(c).e("btn"),C(c).e("close")]),onClick:R},[M(C(it),null,{default:K(()=>[M(C(qs))]),_:1})],2),be(" ARROW "),C(A)?be("v-if",!0):($(),se(Qe,{key:0},[T("span",{class:de(C(x)),onClick:W},[M(C(it),null,{default:K(()=>[M(C($U))]),_:1})],2),T("span",{class:de(C(S)),onClick:F},[M(C(it),null,{default:K(()=>[M(C(c2))]),_:1})],2)],64)),be(" ACTIONS "),T("div",{class:de([C(c).e("btn"),C(c).e("actions")])},[T("div",{class:de(C(c).e("actions__inner"))},[M(C(it),{onClick:L[1]||(L[1]=B=>E("zoomOut"))},{default:K(()=>[M(C(qU))]),_:1}),M(C(it),{onClick:L[2]||(L[2]=B=>E("zoomIn"))},{default:K(()=>[M(C(KU))]),_:1}),T("i",{class:de(C(c).e("actions__divider"))},null,2),M(C(it),{onClick:P},{default:K(()=>[($(),_e(tn(C(h).icon)))]),_:1}),T("i",{class:de(C(c).e("actions__divider"))},null,2),M(C(it),{onClick:L[3]||(L[3]=B=>E("anticlockwise"))},{default:K(()=>[M(C(JU))]),_:1}),M(C(it),{onClick:L[4]||(L[4]=B=>E("clockwise"))},{default:K(()=>[M(C(ZU))]),_:1})],2)],2),be(" CANVAS "),T("div",{class:de(C(c).e("canvas"))},[($(!0),se(Qe,null,We(k.urlList,(B,Q)=>lt(($(),se("img",{ref_for:!0,ref:w=>u.value[Q]=w,key:B,src:B,style:$e(C(O)),class:de(C(c).e("img")),crossorigin:k.crossorigin,onLoad:re,onError:ae,onMousedown:ne},null,46,yI)),[[Ut,Q===s.value]])),128))],2),Ne(k.$slots,"default")],6)]),_:3})],8,["disabled"]))}}));var wI=at(CI,[["__file","image-viewer.vue"]]);const eg=ln(wI),xI=Qt({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:xt([String,Object])},previewSrcList:{type:xt(Array),default:()=>lr([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:xt(String)}}),_I={load:t=>t instanceof Event,error:t=>t instanceof Event,switch:t=>_t(t),close:()=>!0,show:()=>!0},SI=["src","loading","crossorigin"],EI={key:0},II=Ce({name:"ElImage",inheritAttrs:!1}),kI=Ce(De(ve({},II),{props:xI,emits:_I,setup(t,{emit:e}){const n=t;let i="";const{t:o}=rr(),p=Je("image"),v=GH(),c=tH(),r=ce(),d=ce(!1),u=ce(!0),a=ce(!1),l=ce(),s=ce(),h=hi&&"loading"in HTMLImageElement.prototype;let g,f;const A=ue(()=>[p.e("inner"),b.value&&p.e("preview"),u.value&&p.is("loading")]),m=ue(()=>v.style),y=ue(()=>{const{fit:F}=n;return hi&&F?{objectFit:F}:{}}),b=ue(()=>{const{previewSrcList:F}=n;return Array.isArray(F)&&F.length>0}),x=ue(()=>{const{previewSrcList:F,initialIndex:E}=n;let k=E;return E>F.length-1&&(k=0),k}),S=ue(()=>n.loading==="eager"?!1:!h&&n.loading==="lazy"||n.lazy),O=()=>{hi&&(u.value=!0,d.value=!1,r.value=n.src)};function R(F){u.value=!1,d.value=!1,e("load",F)}function Z(F){u.value=!1,d.value=!0,e("error",F)}function ee(){AS(l.value,s.value)&&(O(),ne())}const re=nH(ee,200,!0);function ae(){return we(this,null,function*(){var F;if(!hi)return;yield Le();const{scrollContainer:E}=n;l2(E)?s.value=E:Jt(E)&&E!==""?s.value=(F=document.querySelector(E))!=null?F:void 0:l.value&&(s.value=iH(l.value)),s.value&&(g=cr(s,"scroll",re),setTimeout(()=>ee(),100))})}function ne(){!hi||!s.value||!re||(g==null||g(),s.value=void 0)}function J(F){if(F.ctrlKey&&(F.deltaY<0||F.deltaY>0))return F.preventDefault(),!1}function P(){b.value&&(f=cr("wheel",J,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",a.value=!0,e("show"))}function U(){f==null||f(),document.body.style.overflow=i,a.value=!1,e("close")}function W(F){e("switch",F)}return Me(()=>n.src,()=>{S.value?(u.value=!0,d.value=!1,ne(),ae()):O()}),je(()=>{S.value?ae():O()}),(F,E)=>($(),se("div",{ref_key:"container",ref:l,class:de([C(p).b(),F.$attrs.class]),style:$e(C(m))},[d.value?Ne(F.$slots,"error",{key:0},()=>[T("div",{class:de(C(p).e("error"))},Se(C(o)("el.image.error")),3)]):($(),se(Qe,{key:1},[r.value!==void 0?($(),se("img",dr({key:0},C(c),{src:r.value,loading:F.loading,style:C(y),class:C(A),crossorigin:F.crossorigin,onClick:P,onLoad:R,onError:Z}),null,16,SI)):be("v-if",!0),u.value?($(),se("div",{key:1,class:de(C(p).e("wrapper"))},[Ne(F.$slots,"placeholder",{},()=>[T("div",{class:de(C(p).e("placeholder"))},null,2)])],2)):be("v-if",!0)],64)),C(b)?($(),se(Qe,{key:2},[a.value?($(),_e(C(eg),{key:0,"z-index":F.zIndex,"initial-index":C(x),infinite:F.infinite,"zoom-rate":F.zoomRate,"min-scale":F.minScale,"max-scale":F.maxScale,"url-list":F.previewSrcList,crossorigin:F.crossorigin,"hide-on-click-modal":F.hideOnClickModal,teleported:F.previewTeleported,"close-on-press-escape":F.closeOnPressEscape,onClose:U,onSwitch:W},{default:K(()=>[F.$slots.viewer?($(),se("div",EI,[Ne(F.$slots,"viewer")])):be("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):be("v-if",!0)],64)):be("v-if",!0)],6))}}));var BI=at(kI,[["__file","image.vue"]]);const $o=ln(BI),OI=Qt(ve({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Bi,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||_t(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}},ar(["ariaLabel"]))),DI={[Sn]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[pi]:t=>_t(t)||ki(t),[Ze]:t=>_t(t)||ki(t)},TI=["aria-label","onKeydown"],MI=["aria-label","onKeydown"],QI=Ce({name:"ElInputNumber"}),LI=Ce(De(ve({},QI),{props:OI,emits:DI,setup(t,{expose:e,emit:n}){const i=t,{t:o}=rr(),p=Je("input-number"),v=ce(),c=et({currentValue:i.modelValue,userInput:null}),{formItem:r}=Oi(),d=ue(()=>_t(i.modelValue)&&i.modelValue<=i.min),u=ue(()=>_t(i.modelValue)&&i.modelValue>=i.max),a=ue(()=>{const P=A(i.step);return sr(i.precision)?Math.max(A(i.modelValue),P):(P>i.precision,i.precision)}),l=ue(()=>i.controls&&i.controlsPosition==="right"),s=Di(),h=Ta(),g=ue(()=>{if(c.userInput!==null)return c.userInput;let P=c.currentValue;if(ki(P))return"";if(_t(P)){if(Number.isNaN(P))return"";sr(i.precision)||(P=P.toFixed(i.precision))}return P}),f=(P,U)=>{if(sr(U)&&(U=a.value),U===0)return Math.round(P);let W=String(P);const F=W.indexOf(".");if(F===-1||!W.replace(".","").split("")[F+U])return P;const E=W.length;return W.charAt(E-1)==="5"&&(W=`${W.slice(0,Math.max(0,E-1))}6`),Number.parseFloat(Number(W).toFixed(U))},A=P=>{if(ki(P))return 0;const U=P.toString(),W=U.indexOf(".");let F=0;return W!==-1&&(F=U.length-W-1),F},m=(P,U=1)=>_t(P)?f(P+i.step*U):c.currentValue,y=()=>{if(i.readonly||h.value||u.value)return;const P=Number(g.value)||0,U=m(P);S(U),n(pi,c.currentValue),ne()},b=()=>{if(i.readonly||h.value||d.value)return;const P=Number(g.value)||0,U=m(P,-1);S(U),n(pi,c.currentValue),ne()},x=(P,U)=>{const{max:W,min:F,step:E,precision:k,stepStrictly:L,valueOnClear:B}=i;W<F&&Lh("InputNumber","min should not be greater than max.");let Q=Number(P);if(ki(P)||Number.isNaN(Q))return null;if(P===""){if(B===null)return null;Q=Jt(B)?{min:F,max:W}[B]:B}return L&&(Q=f(Math.round(Q/E)*E,k)),sr(k)||(Q=f(Q,k)),(Q>W||Q<F)&&(Q=Q>W?W:F,U&&n(Ze,Q)),Q},S=(P,U=!0)=>{var W;const F=c.currentValue,E=x(P);if(!U){n(Ze,E);return}F===E&&P||(c.userInput=null,n(Ze,E),F!==E&&n(Sn,E,F),i.validateEvent&&((W=r==null?void 0:r.validate)==null||W.call(r,"change").catch(k=>Wn())),c.currentValue=E)},O=P=>{c.userInput=P;const U=P===""?null:Number(P);n(pi,U),S(U,!1)},R=P=>{const U=P!==""?Number(P):"";(_t(U)&&!Number.isNaN(U)||P==="")&&S(U),ne(),c.userInput=null},Z=()=>{var P,U;(U=(P=v.value)==null?void 0:P.focus)==null||U.call(P)},ee=()=>{var P,U;(U=(P=v.value)==null?void 0:P.blur)==null||U.call(P)},re=P=>{n("focus",P)},ae=P=>{var U;c.userInput=null,n("blur",P),i.validateEvent&&((U=r==null?void 0:r.validate)==null||U.call(r,"blur").catch(W=>Wn()))},ne=()=>{c.currentValue!==i.modelValue&&(c.currentValue=i.modelValue)},J=P=>{document.activeElement===P.target&&P.preventDefault()};return Me(()=>i.modelValue,(P,U)=>{const W=x(P,!0);c.userInput===null&&W!==U&&(c.currentValue=W)},{immediate:!0}),je(()=>{var P;const{min:U,max:W,modelValue:F}=i,E=(P=v.value)==null?void 0:P.input;if(E.setAttribute("role","spinbutton"),Number.isFinite(W)?E.setAttribute("aria-valuemax",String(W)):E.removeAttribute("aria-valuemax"),Number.isFinite(U)?E.setAttribute("aria-valuemin",String(U)):E.removeAttribute("aria-valuemin"),E.setAttribute("aria-valuenow",c.currentValue||c.currentValue===0?String(c.currentValue):""),E.setAttribute("aria-disabled",String(h.value)),!_t(F)&&F!=null){let k=Number(F);Number.isNaN(k)&&(k=null),n(Ze,k)}E.addEventListener("wheel",J,{passive:!1})}),D2(()=>{var P,U;const W=(P=v.value)==null?void 0:P.input;W==null||W.setAttribute("aria-valuenow",`${(U=c.currentValue)!=null?U:""}`)}),Xn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},ue(()=>!!i.label)),e({focus:Z,blur:ee}),(P,U)=>($(),se("div",{class:de([C(p).b(),C(p).m(C(s)),C(p).is("disabled",C(h)),C(p).is("without-controls",!P.controls),C(p).is("controls-right",C(l))]),onDragstart:U[0]||(U[0]=ot(()=>{},["prevent"]))},[P.controls?lt(($(),se("span",{key:0,role:"button","aria-label":C(o)("el.inputNumber.decrease"),class:de([C(p).e("decrease"),C(p).is("disabled",C(d))]),onKeydown:hn(b,["enter"])},[Ne(P.$slots,"decrease-icon",{},()=>[M(C(it),null,{default:K(()=>[C(l)?($(),_e(C(Dr),{key:0})):($(),_e(C(rH),{key:1}))]),_:1})])],42,TI)),[[C(Op),b]]):be("v-if",!0),P.controls?lt(($(),se("span",{key:1,role:"button","aria-label":C(o)("el.inputNumber.increase"),class:de([C(p).e("increase"),C(p).is("disabled",C(u))]),onKeydown:hn(y,["enter"])},[Ne(P.$slots,"increase-icon",{},()=>[M(C(it),null,{default:K(()=>[C(l)?($(),_e(C(d2),{key:0})):($(),_e(C(Oo),{key:1}))]),_:1})])],42,MI)),[[C(Op),y]]):be("v-if",!0),M(C(Ft),{id:P.id,ref_key:"input",ref:v,type:"number",step:P.step,"model-value":C(g),placeholder:P.placeholder,readonly:P.readonly,disabled:C(h),size:C(s),max:P.max,min:P.min,name:P.name,"aria-label":P.label||P.ariaLabel,"validate-event":!1,onKeydown:[hn(ot(y,["prevent"]),["up"]),hn(ot(b,["prevent"]),["down"])],onBlur:ae,onFocus:re,onInput:O,onChange:R},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}}));var jI=at(LI,[["__file","input-number.vue"]]);const uc=ln(jI),tg=Symbol("ElSelectGroup"),eo=Symbol("ElSelect");function PI(t,e){const n=Re(eo),i=Re(tg,{disabled:!1}),o=ue(()=>n.props.multiple?u(n.props.modelValue,t.value):u([n.props.modelValue],t.value)),p=ue(()=>{if(n.props.multiple){const s=n.props.modelValue||[];return!o.value&&s.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),v=ue(()=>t.label||(Pi(t.value)?"":t.value)),c=ue(()=>t.value||t.label||""),r=ue(()=>t.disabled||e.groupDisabled||p.value),d=ft(),u=(s=[],h)=>{if(Pi(t.value)){const g=n.props.valueKey;return s&&s.some(f=>Nr(_n(f,g))===_n(h,g))}else return s&&s.includes(h)},a=()=>{!t.disabled&&!i.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(d.proxy))},l=s=>{const h=new RegExp(f2(s),"i");e.visible=h.test(v.value)||t.created};return Me(()=>v.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),Me(()=>t.value,(s,h)=>{const{remote:g,valueKey:f}=n.props;if(gr(s,h)||(n.onOptionDestroy(h,d.proxy),n.onOptionCreate(d.proxy)),!t.created&&!g){if(f&&Pi(s)&&Pi(h)&&s[f]===h[f])return;n.setSelected()}}),Me(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:n,currentLabel:v,currentValue:c,itemSelected:o,isDisabled:r,hoverItem:a,updateOption:l}}const FI=Ce({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const e=Je("select"),n=Qh(),i=ue(()=>[e.be("dropdown","item"),e.is("disabled",C(c)),e.is("selected",C(v)),e.is("hovering",C(l))]),o=et({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:p,itemSelected:v,isDisabled:c,select:r,hoverItem:d,updateOption:u}=PI(t,o),{visible:a,hover:l}=Fi(o),s=ft().proxy;r.onOptionCreate(s),Rt(()=>{const g=s.value,{selected:f}=r.states,A=(r.props.multiple?f:[f]).some(m=>m.value===s.value);Le(()=>{r.states.cachedOptions.get(g)===s&&!A&&r.states.cachedOptions.delete(g)}),r.onOptionDestroy(g,s)});function h(){t.disabled!==!0&&o.groupDisabled!==!0&&r.handleOptionSelect(s)}return{ns:e,id:n,containerKls:i,currentLabel:p,itemSelected:v,isDisabled:c,select:r,hoverItem:d,updateOption:u,visible:a,hover:l,selectOptionClick:h,states:o}}}),RI=["id","aria-disabled","aria-selected"];function NI(t,e,n,i,o,p){return lt(($(),se("li",{id:t.id,class:de(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:e[0]||(e[0]=(...v)=>t.hoverItem&&t.hoverItem(...v)),onClick:e[1]||(e[1]=ot((...v)=>t.selectOptionClick&&t.selectOptionClick(...v),["stop"]))},[Ne(t.$slots,"default",{},()=>[T("span",null,Se(t.currentLabel),1)])],42,RI)),[[Ut,t.visible]])}var hc=at(FI,[["render",NI],["__file","option.vue"]]);const zI=Ce({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=Re(eo),e=Je("select"),n=ue(()=>t.props.popperClass),i=ue(()=>t.props.multiple),o=ue(()=>t.props.fitInputWidth),p=ce("");function v(){var c;p.value=`${(c=t.selectRef)==null?void 0:c.offsetWidth}px`}return je(()=>{v(),Tr(t.selectRef,v)}),{ns:e,minWidth:p,popperClass:n,isMultiple:i,isFitInputWidth:o}}});function VI(t,e,n,i,o,p){return $(),se("div",{class:de([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:$e({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?($(),se("div",{key:0,class:de(t.ns.be("dropdown","header"))},[Ne(t.$slots,"header")],2)):be("v-if",!0),Ne(t.$slots,"default"),t.$slots.footer?($(),se("div",{key:1,class:de(t.ns.be("dropdown","footer"))},[Ne(t.$slots,"footer")],2)):be("v-if",!0)],6)}var UI=at(zI,[["render",VI],["__file","select-dropdown.vue"]]);function HI(t){const e=ce(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:n=>{const i=n.target.value,o=i[i.length-1]||"";e.value=!oH(o)},handleCompositionEnd:n=>{e.value&&(e.value=!1,gi(t)&&t(n))}}}const GI=11,YI=(t,e)=>{const{t:n}=rr(),i=Qh(),o=Je("select"),p=Je("input"),v=et({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:t.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),c=ce(null),r=ce(null),d=ce(null),u=ce(null),a=ce(null),l=ce(null),s=ce(null),h=ce(null),g=ce(null),f=ce(null),A=ce(null),m=ce(null),{wrapperRef:y,isFocused:b,handleFocus:x,handleBlur:S}=u2(a,{afterFocus(){t.automaticDropdown&&!O.value&&(O.value=!0,v.menuVisibleOnFocus=!0)},beforeBlur(ge){var Ie,gt;return((Ie=d.value)==null?void 0:Ie.isFocusInsideContent(ge))||((gt=u.value)==null?void 0:gt.isFocusInsideContent(ge))},afterBlur(){O.value=!1,v.menuVisibleOnFocus=!1}}),O=ce(!1),R=ce(),{form:Z,formItem:ee}=Oi(),{inputId:re}=Or(t,{formItemContext:ee}),{valueOnClear:ae,isEmptyValue:ne}=aH(t),J=ue(()=>t.disabled||(Z==null?void 0:Z.disabled)),P=ue(()=>t.multiple?nn(t.modelValue)&&t.modelValue.length>0:!ne(t.modelValue)),U=ue(()=>t.clearable&&!J.value&&v.inputHovering&&P.value),W=ue(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),F=ue(()=>o.is("reverse",W.value&&O.value)),E=ue(()=>(ee==null?void 0:ee.validateState)||""),k=ue(()=>sH[E.value]),L=ue(()=>t.remote?300:0),B=ue(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!v.inputValue&&v.options.size===0?!1:t.filterable&&v.inputValue&&v.options.size>0&&Q.value===0?t.noMatchText||n("el.select.noMatch"):v.options.size===0?t.noDataText||n("el.select.noData"):null),Q=ue(()=>w.value.filter(ge=>ge.visible).length),w=ue(()=>{const ge=Array.from(v.options.values()),Ie=[];return v.optionValues.forEach(gt=>{const Mt=ge.findIndex(Ji=>Ji.value===gt);Mt>-1&&Ie.push(ge[Mt])}),Ie.length>=ge.length?Ie:ge}),_=ue(()=>Array.from(v.cachedOptions.values())),I=ue(()=>{const ge=w.value.filter(Ie=>!Ie.created).some(Ie=>Ie.currentLabel===v.inputValue);return t.filterable&&t.allowCreate&&v.inputValue!==""&&!ge}),D=()=>{t.filterable&&gi(t.filterMethod)||t.filterable&&t.remote&&gi(t.remoteMethod)||w.value.forEach(ge=>{var Ie;(Ie=ge.updateOption)==null||Ie.call(ge,v.inputValue)})},H=Di(),V=ue(()=>["small"].includes(H.value)?"small":"default"),Y=ue({get(){return O.value&&B.value!==!1},set(ge){O.value=ge}}),z=ue(()=>nn(t.modelValue)?t.modelValue.length===0&&!v.inputValue:t.filterable?!v.inputValue:!0),X=ue(()=>{var ge;const Ie=(ge=t.placeholder)!=null?ge:n("el.select.placeholder");return t.multiple||!P.value?Ie:v.selectedLabel}),N=ue(()=>p2?null:"mouseenter");Me(()=>t.modelValue,(ge,Ie)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(v.inputValue="",j("")),te(),!gr(ge,Ie)&&t.validateEvent&&(ee==null||ee.validate("change").catch(gt=>Wn()))},{flush:"post",deep:!0}),Me(()=>O.value,ge=>{ge?j(v.inputValue):(v.inputValue="",v.previousQuery=null,v.isBeforeHide=!0),e("visible-change",ge)}),Me(()=>v.options.entries(),()=>{var ge;if(!hi)return;const Ie=((ge=c.value)==null?void 0:ge.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!sr(t.modelValue)||!Array.from(Ie).includes(document.activeElement))&&te(),t.defaultFirstOption&&(t.filterable||t.remote)&&Q.value&&q()},{flush:"post"}),Me(()=>v.hoveringIndex,ge=>{_t(ge)&&ge>-1?R.value=w.value[ge]||{}:R.value={},w.value.forEach(Ie=>{Ie.hover=R.value===Ie})}),B2(()=>{v.isBeforeHide||D()});const j=ge=>{v.previousQuery!==ge&&(v.previousQuery=ge,t.filterable&&gi(t.filterMethod)?t.filterMethod(ge):t.filterable&&t.remote&&gi(t.remoteMethod)&&t.remoteMethod(ge),t.defaultFirstOption&&(t.filterable||t.remote)&&Q.value?Le(q):Le(ie))},q=()=>{const ge=w.value.filter(Mt=>Mt.visible&&!Mt.disabled&&!Mt.states.groupDisabled),Ie=ge.find(Mt=>Mt.created),gt=ge[0];v.hoveringIndex=Bt(w.value,Ie||gt)},te=()=>{if(t.multiple)v.selectedLabel="";else{const Ie=oe(t.modelValue);v.selectedLabel=Ie.currentLabel,v.selected=Ie;return}const ge=[];nn(t.modelValue)&&t.modelValue.forEach(Ie=>{ge.push(oe(Ie))}),v.selected=ge},oe=ge=>{let Ie;const gt=Yh(ge).toLowerCase()==="object",Mt=Yh(ge).toLowerCase()==="null",Ji=Yh(ge).toLowerCase()==="undefined";for(let Zi=v.cachedOptions.size-1;Zi>=0;Zi--){const er=_.value[Zi];if(gt?_n(er.value,t.valueKey)===_n(ge,t.valueKey):er.value===ge){Ie={value:ge,currentLabel:er.currentLabel,get isDisabled(){return er.isDisabled}};break}}if(Ie)return Ie;const So=gt?ge.label:!Mt&&!Ji?ge:"";return{value:ge,currentLabel:So}},ie=()=>{t.multiple?v.hoveringIndex=w.value.findIndex(ge=>v.selected.some(Ie=>_a(Ie)===_a(ge))):v.hoveringIndex=w.value.findIndex(ge=>_a(ge)===_a(v.selected))},fe=()=>{v.selectionWidth=r.value.getBoundingClientRect().width},Ae=()=>{v.calculatorWidth=l.value.getBoundingClientRect().width},me=()=>{v.collapseItemWidth=A.value.getBoundingClientRect().width},he=()=>{var ge,Ie;(Ie=(ge=d.value)==null?void 0:ge.updatePopper)==null||Ie.call(ge)},ye=()=>{var ge,Ie;(Ie=(ge=u.value)==null?void 0:ge.updatePopper)==null||Ie.call(ge)},xe=()=>{v.inputValue.length>0&&!O.value&&(O.value=!0),j(v.inputValue)},Ee=ge=>{if(v.inputValue=ge.target.value,t.remote)ke();else return xe()},ke=Ot(()=>{xe()},L.value),Fe=ge=>{gr(t.modelValue,ge)||e(Sn,ge)},Xe=ge=>Ml(ge,Ie=>!v.disabledOptions.has(Ie)),Oe=ge=>{if(t.multiple&&ge.code!==Wt.delete&&ge.target.value.length<=0){const Ie=t.modelValue.slice(),gt=Xe(Ie);if(gt<0)return;const Mt=Ie[gt];Ie.splice(gt,1),e(Ze,Ie),Fe(Ie),e("remove-tag",Mt)}},ct=(ge,Ie)=>{const gt=v.selected.indexOf(Ie);if(gt>-1&&!J.value){const Mt=t.modelValue.slice();Mt.splice(gt,1),e(Ze,Mt),Fe(Mt),e("remove-tag",Ie.value)}ge.stopPropagation(),Ki()},Ke=ge=>{ge.stopPropagation();const Ie=t.multiple?[]:ae.value;if(t.multiple)for(const gt of v.selected)gt.isDisabled&&Ie.push(gt.value);e(Ze,Ie),Fe(Ie),v.hoveringIndex=-1,O.value=!1,e("clear"),Ki()},nt=ge=>{if(t.multiple){const Ie=(t.modelValue||[]).slice(),gt=Bt(Ie,ge.value);gt>-1?Ie.splice(gt,1):(t.multipleLimit<=0||Ie.length<t.multipleLimit)&&Ie.push(ge.value),e(Ze,Ie),Fe(Ie),ge.created&&j(""),t.filterable&&!t.reserveKeyword&&(v.inputValue="")}else e(Ze,ge.value),Fe(ge.value),O.value=!1;Ki(),!O.value&&Le(()=>{wt(ge)})},Bt=(ge=[],Ie)=>{if(!Pi(Ie))return ge.indexOf(Ie);const gt=t.valueKey;let Mt=-1;return ge.some((Ji,So)=>Nr(_n(Ji,gt))===_n(Ie,gt)?(Mt=So,!0):!1),Mt},wt=ge=>{var Ie,gt,Mt,Ji,So;const Zi=nn(ge)?ge[0]:ge;let er=null;if(Zi!=null&&Zi.value){const Sa=w.value.filter(xU=>xU.value===Zi.value);Sa.length>0&&(er=Sa[0].$el)}if(d.value&&er){const Sa=(Ji=(Mt=(gt=(Ie=d.value)==null?void 0:Ie.popperRef)==null?void 0:gt.contentRef)==null?void 0:Mt.querySelector)==null?void 0:Ji.call(Mt,`.${o.be("dropdown","wrap")}`);Sa&&lH(Sa,er)}(So=m.value)==null||So.handleScroll()},Gt=ge=>{v.options.set(ge.value,ge),v.cachedOptions.set(ge.value,ge),ge.disabled&&v.disabledOptions.set(ge.value,ge)},Un=(ge,Ie)=>{v.options.get(ge)===Ie&&v.options.delete(ge)},{handleCompositionStart:Oh,handleCompositionUpdate:Si,handleCompositionEnd:wa}=HI(ge=>Ee(ge)),Dh=ue(()=>{var ge,Ie;return(Ie=(ge=d.value)==null?void 0:ge.popperRef)==null?void 0:Ie.contentRef}),Hn=()=>{v.isBeforeHide=!1,Le(()=>wt(v.selected))},Ki=()=>{var ge;(ge=a.value)==null||ge.focus()},Ei=()=>{_o()},Ii=ge=>{Ke(ge)},_o=ge=>{if(O.value=!1,b.value){const Ie=new FocusEvent("focus",ge);Le(()=>S(Ie))}},xa=()=>{v.inputValue.length>0?v.inputValue="":O.value=!1},li=()=>{J.value||(p2&&(v.inputHovering=!0),v.menuVisibleOnFocus?v.menuVisibleOnFocus=!1:O.value=!O.value)},gU=()=>{O.value?w.value[v.hoveringIndex]&&nt(w.value[v.hoveringIndex]):li()},_a=ge=>Pi(ge.value)?_n(ge.value,t.valueKey):ge.value,vU=ue(()=>w.value.filter(ge=>ge.visible).every(ge=>ge.disabled)),AU=ue(()=>t.multiple?t.collapseTags?v.selected.slice(0,t.maxCollapseTags):v.selected:[]),mU=ue(()=>t.multiple?t.collapseTags?v.selected.slice(t.maxCollapseTags):[]:[]),G3=ge=>{if(!O.value){O.value=!0;return}if(!(v.options.size===0||Q.value===0)&&!vU.value){ge==="next"?(v.hoveringIndex++,v.hoveringIndex===v.options.size&&(v.hoveringIndex=0)):ge==="prev"&&(v.hoveringIndex--,v.hoveringIndex<0&&(v.hoveringIndex=v.options.size-1));const Ie=w.value[v.hoveringIndex];(Ie.disabled===!0||Ie.states.groupDisabled===!0||!Ie.visible)&&G3(ge),Le(()=>wt(R.value))}},yU=()=>{if(!r.value)return 0;const ge=window.getComputedStyle(r.value);return Number.parseFloat(ge.gap||"6px")},bU=ue(()=>{const ge=yU();return{maxWidth:`${A.value&&t.maxCollapseTags===1?v.selectionWidth-v.collapseItemWidth-ge:v.selectionWidth}px`}}),CU=ue(()=>({maxWidth:`${v.selectionWidth}px`})),wU=ue(()=>({width:`${Math.max(v.calculatorWidth,GI)}px`}));return t.multiple&&!nn(t.modelValue)&&e(Ze,[]),!t.multiple&&nn(t.modelValue)&&e(Ze,""),Tr(r,fe),Tr(l,Ae),Tr(g,he),Tr(y,he),Tr(f,ye),Tr(A,me),je(()=>{te()}),{inputId:re,contentId:i,nsSelect:o,nsInput:p,states:v,isFocused:b,expanded:O,optionsArray:w,hoverOption:R,selectSize:H,filteredOptionsCount:Q,resetCalculatorWidth:Ae,updateTooltip:he,updateTagTooltip:ye,debouncedOnInputChange:ke,onInput:Ee,deletePrevTag:Oe,deleteTag:ct,deleteSelected:Ke,handleOptionSelect:nt,scrollToOption:wt,hasModelValue:P,shouldShowPlaceholder:z,currentPlaceholder:X,mouseEnterEventName:N,showClose:U,iconComponent:W,iconReverse:F,validateState:E,validateIcon:k,showNewOption:I,updateOptions:D,collapseTagSize:V,setSelected:te,selectDisabled:J,emptyText:B,handleCompositionStart:Oh,handleCompositionUpdate:Si,handleCompositionEnd:wa,onOptionCreate:Gt,onOptionDestroy:Un,handleMenuEnter:Hn,handleFocus:x,focus:Ki,blur:Ei,handleBlur:S,handleClearClick:Ii,handleClickOutside:_o,handleEsc:xa,toggleMenu:li,selectOption:gU,getValueKey:_a,navigateOptions:G3,dropdownMenuVisible:Y,showTagList:AU,collapseTagList:mU,tagStyle:bU,collapseTagStyle:CU,inputStyle:wU,popperRef:Dh,inputRef:a,tooltipRef:d,tagTooltipRef:u,calculatorRef:l,prefixRef:s,suffixRef:h,selectRef:c,wrapperRef:y,selectionRef:r,scrollbarRef:m,menuRef:g,tagMenuRef:f,collapseItemRef:A}};var WI=Ce({name:"ElOptions",setup(t,{slots:e}){const n=Re(eo);let i=[];return()=>{var o,p;const v=(o=e.default)==null?void 0:o.call(e),c=[];function r(d){nn(d)&&d.forEach(u=>{var a,l,s,h;const g=(a=(u==null?void 0:u.type)||{})==null?void 0:a.name;g==="ElOptionGroup"?r(!Jt(u.children)&&!nn(u.children)&&gi((l=u.children)==null?void 0:l.default)?(s=u.children)==null?void 0:s.default():u.children):g==="ElOption"?c.push((h=u.props)==null?void 0:h.value):nn(u.children)&&r(u.children)})}return v.length&&r((p=v[0])==null?void 0:p.children),gr(c,i)||(i=c,n&&(n.states.optionValues=c)),v}}});const XI=Qt(ve(ve({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Bi,effect:{type:xt(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:xt(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:fi.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:ir,default:cH},fitInputWidth:Boolean,suffixIcon:{type:ir,default:Dr},tagType:De(ve({},sc.type),{default:"info"}),tagEffect:De(ve({},sc.effect),{default:"light"}),validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:xt(String),values:jh,default:"bottom-start"},fallbackPlacements:{type:xt(Array),default:["bottom-start","top-start","right","left"]}},uH),ar(["ariaLabel"]))),ng="ElSelect",$I=Ce({name:ng,componentName:ng,components:{ElInput:Ft,ElSelectMenu:UI,ElOption:hc,ElOptions:WI,ElTag:fE,ElScrollbar:Js,ElTooltip:Kt,ElIcon:it},directives:{ClickOutside:Bp},props:XI,emits:[Ze,Sn,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=YI(t,e);return un(eo,et({props:t,states:n.states,optionsArray:n.optionsArray,handleOptionSelect:n.handleOptionSelect,onOptionCreate:n.onOptionCreate,onOptionDestroy:n.onOptionDestroy,selectRef:n.selectRef,setSelected:n.setSelected})),ve({},n)}}),qI=["id","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],KI=["textContent"],JI={key:1};function ZI(t,e,n,i,o,p){const v=dn("el-tag"),c=dn("el-tooltip"),r=dn("el-icon"),d=dn("el-option"),u=dn("el-options"),a=dn("el-scrollbar"),l=dn("el-select-menu"),s=YH("click-outside");return lt(($(),se("div",{ref:"selectRef",class:de([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),[WH(t.mouseEnterEventName)]:e[16]||(e[16]=h=>t.states.inputHovering=!0),onMouseleave:e[17]||(e[17]=h=>t.states.inputHovering=!1),onClick:e[18]||(e[18]=ot((...h)=>t.toggleMenu&&t.toggleMenu(...h),["prevent","stop"]))},[M(c,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,onBeforeShow:t.handleMenuEnter,onHide:e[15]||(e[15]=h=>t.states.isBeforeHide=!1)},{default:K(()=>{var h;return[T("div",{ref:"wrapperRef",class:de([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)])},[t.$slots.prefix?($(),se("div",{key:0,ref:"prefixRef",class:de(t.nsSelect.e("prefix"))},[Ne(t.$slots,"prefix")],2)):be("v-if",!0),T("div",{ref:"selectionRef",class:de([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?Ne(t.$slots,"tag",{key:0},()=>[($(!0),se(Qe,null,We(t.showTagList,g=>($(),se("div",{key:t.getValueKey(g),class:de(t.nsSelect.e("selected-item"))},[M(v,{closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:$e(t.tagStyle),onClose:f=>t.deleteTag(f,g)},{default:K(()=>[T("span",{class:de(t.nsSelect.e("tags-text"))},[Ne(t.$slots,"label",{label:g.currentLabel,value:g.value},()=>[Be(Se(g.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?($(),_e(c,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:K(()=>[T("div",{ref:"collapseItemRef",class:de(t.nsSelect.e("selected-item"))},[M(v,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:$e(t.collapseTagStyle)},{default:K(()=>[T("span",{class:de(t.nsSelect.e("tags-text"))}," + "+Se(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:K(()=>[T("div",{ref:"tagMenuRef",class:de(t.nsSelect.e("selection"))},[($(!0),se(Qe,null,We(t.collapseTagList,g=>($(),se("div",{key:t.getValueKey(g),class:de(t.nsSelect.e("selected-item"))},[M(v,{class:"in-tooltip",closable:!t.selectDisabled&&!g.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:f=>t.deleteTag(f,g)},{default:K(()=>[T("span",{class:de(t.nsSelect.e("tags-text"))},[Ne(t.$slots,"label",{label:g.currentLabel,value:g.value},()=>[Be(Se(g.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):be("v-if",!0)]):be("v-if",!0),t.selectDisabled?be("v-if",!0):($(),se("div",{key:1,class:de([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[lt(T("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":e[0]||(e[0]=g=>t.states.inputValue=g),type:"text",name:t.name,class:de([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:$e(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((h=t.hoverOption)==null?void 0:h.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:e[1]||(e[1]=(...g)=>t.handleFocus&&t.handleFocus(...g)),onBlur:e[2]||(e[2]=(...g)=>t.handleBlur&&t.handleBlur(...g)),onKeydown:[e[3]||(e[3]=hn(ot(g=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[4]||(e[4]=hn(ot(g=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),e[5]||(e[5]=hn(ot((...g)=>t.handleEsc&&t.handleEsc(...g),["stop","prevent"]),["esc"])),e[6]||(e[6]=hn(ot((...g)=>t.selectOption&&t.selectOption(...g),["stop","prevent"]),["enter"])),e[7]||(e[7]=hn(ot((...g)=>t.deletePrevTag&&t.deletePrevTag(...g),["stop"]),["delete"]))],onCompositionstart:e[8]||(e[8]=(...g)=>t.handleCompositionStart&&t.handleCompositionStart(...g)),onCompositionupdate:e[9]||(e[9]=(...g)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...g)),onCompositionend:e[10]||(e[10]=(...g)=>t.handleCompositionEnd&&t.handleCompositionEnd(...g)),onInput:e[11]||(e[11]=(...g)=>t.onInput&&t.onInput(...g)),onClick:e[12]||(e[12]=ot((...g)=>t.toggleMenu&&t.toggleMenu(...g),["stop"]))},null,46,qI),[[T2,t.states.inputValue]]),t.filterable?($(),se("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:de(t.nsSelect.e("input-calculator")),textContent:Se(t.states.inputValue)},null,10,KI)):be("v-if",!0)],2)),t.shouldShowPlaceholder?($(),se("div",{key:2,class:de([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?Ne(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[T("span",null,Se(t.currentPlaceholder),1)]):($(),se("span",JI,Se(t.currentPlaceholder),1))],2)):be("v-if",!0)],2),T("div",{ref:"suffixRef",class:de(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?($(),_e(r,{key:0,class:de([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:K(()=>[($(),_e(tn(t.iconComponent)))]),_:1},8,["class"])):be("v-if",!0),t.showClose&&t.clearIcon?($(),_e(r,{key:1,class:de([t.nsSelect.e("caret"),t.nsSelect.e("icon")]),onClick:t.handleClearClick},{default:K(()=>[($(),_e(tn(t.clearIcon)))]),_:1},8,["class","onClick"])):be("v-if",!0),t.validateState&&t.validateIcon?($(),_e(r,{key:2,class:de([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:K(()=>[($(),_e(tn(t.validateIcon)))]),_:1},8,["class"])):be("v-if",!0)],2)],2)]}),content:K(()=>[M(l,{ref:"menuRef"},{default:K(()=>[t.$slots.header?($(),se("div",{key:0,class:de(t.nsSelect.be("dropdown","header")),onClick:e[13]||(e[13]=ot(()=>{},["stop"]))},[Ne(t.$slots,"header")],2)):be("v-if",!0),lt(M(a,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:de([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:K(()=>[t.showNewOption?($(),_e(d,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):be("v-if",!0),M(u,null,{default:K(()=>[Ne(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Ut,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?($(),se("div",{key:1,class:de(t.nsSelect.be("dropdown","loading"))},[Ne(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?($(),se("div",{key:2,class:de(t.nsSelect.be("dropdown","empty"))},[Ne(t.$slots,"empty",{},()=>[T("span",null,Se(t.emptyText),1)])],2)):be("v-if",!0),t.$slots.footer?($(),se("div",{key:3,class:de(t.nsSelect.be("dropdown","footer")),onClick:e[14]||(e[14]=ot(()=>{},["stop"]))},[Ne(t.$slots,"footer")],2)):be("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],16)),[[s,t.handleClickOutside,t.popperRef]])}var e7=at($I,[["render",ZI],["__file","select.vue"]]);const t7=Ce({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=Je("select"),n=ce(null),i=ft(),o=ce([]);un(tg,et(ve({},Fi(t))));const p=ue(()=>o.value.some(d=>d.visible===!0)),v=d=>{var u,a;return((u=d.type)==null?void 0:u.name)==="ElOption"&&!!((a=d.component)!=null&&a.proxy)},c=d=>{const u=$s(d),a=[];return u.forEach(l=>{var s,h;v(l)?a.push(l.component.proxy):(s=l.children)!=null&&s.length?a.push(...c(l.children)):(h=l.component)!=null&&h.subTree&&a.push(...c(l.component.subTree))}),a},r=()=>{o.value=c(i.subTree)};return je(()=>{r()}),hH(n,r,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:p,ns:e}}});function n7(t,e,n,i,o,p){return lt(($(),se("ul",{ref:"groupRef",class:de(t.ns.be("group","wrap"))},[T("li",{class:de(t.ns.be("group","title"))},Se(t.label),3),T("li",null,[T("ul",{class:de(t.ns.b("group"))},[Ne(t.$slots,"default")],2)])],2)),[[Ut,t.visible]])}var ig=at(t7,[["render",n7],["__file","option-group.vue"]]);const Pn=ln(e7,{Option:hc,OptionGroup:ig}),ei=or(hc);or(ig);const i7=Qt({trigger:g2.trigger,placement:Ph.placement,disabled:g2.disabled,visible:fi.visible,transition:fi.transition,popperOptions:Ph.popperOptions,tabindex:Ph.tabindex,content:fi.content,popperStyle:fi.popperStyle,popperClass:fi.popperClass,enterable:De(ve({},fi.enterable),{default:!0}),effect:De(ve({},fi.effect),{default:"light"}),teleported:fi.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),r7={"update:visible":t=>di(t),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},o7="onUpdate:visible",a7=Ce({name:"ElPopover"}),s7=Ce(De(ve({},a7),{props:i7,emits:r7,setup(t,{expose:e,emit:n}){const i=t,o=ue(()=>i[o7]),p=Je("popover"),v=ce(),c=ue(()=>{var f;return(f=C(v))==null?void 0:f.popperRef}),r=ue(()=>[{width:Ks(i.width)},i.popperStyle]),d=ue(()=>[p.b(),i.popperClass,{[p.m("plain")]:!!i.content}]),u=ue(()=>i.transition===`${p.namespace.value}-fade-in-linear`),a=()=>{var f;(f=v.value)==null||f.hide()},l=()=>{n("before-enter")},s=()=>{n("before-leave")},h=()=>{n("after-enter")},g=()=>{n("update:visible",!1),n("after-leave")};return e({popperRef:c,hide:a}),(f,A)=>($(),_e(C(Kt),dr({ref_key:"tooltipRef",ref:v},f.$attrs,{trigger:f.trigger,placement:f.placement,disabled:f.disabled,visible:f.visible,transition:f.transition,"popper-options":f.popperOptions,tabindex:f.tabindex,content:f.content,offset:f.offset,"show-after":f.showAfter,"hide-after":f.hideAfter,"auto-close":f.autoClose,"show-arrow":f.showArrow,"aria-label":f.title,effect:f.effect,enterable:f.enterable,"popper-class":C(d),"popper-style":C(r),teleported:f.teleported,persistent:f.persistent,"gpu-acceleration":C(u),"onUpdate:visible":C(o),onBeforeShow:l,onBeforeHide:s,onShow:h,onHide:g}),{content:K(()=>[f.title?($(),se("div",{key:0,class:de(C(p).e("title")),role:"title"},Se(f.title),3)):be("v-if",!0),Ne(f.$slots,"default",{},()=>[Be(Se(f.content),1)])]),default:K(()=>[f.$slots.reference?Ne(f.$slots,"reference",{key:0}):be("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}}));var l7=at(s7,[["__file","popover.vue"]]);const rg=(t,e)=>{const n=e.arg||e.value,i=n==null?void 0:n.popperRef;i&&(i.triggerRef=t)};var c7={mounted(t,e){rg(t,e)},updated(t,e){rg(t,e)}};const u7="popover",h7=dH(c7,u7),og=ln(l7,{directive:h7}),ag=Symbol("sliderContextKey"),d7=Qt(ve({modelValue:{type:xt([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Bi,inputSize:Bi,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:xt(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:xt(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:jh,default:"top"},marks:{type:xt(Object)},validateEvent:{type:Boolean,default:!0}},ar(["ariaLabel"]))),dc=t=>_t(t)||nn(t)&&t.every(_t),f7={[Ze]:dc,[pi]:dc,[Sn]:dc},p7=(t,e,n)=>{const i=ce();return je(()=>we(void 0,null,function*(){t.range?(Array.isArray(t.modelValue)?(e.firstValue=Math.max(t.min,t.modelValue[0]),e.secondValue=Math.min(t.max,t.modelValue[1])):(e.firstValue=t.min,e.secondValue=t.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof t.modelValue!="number"||Number.isNaN(t.modelValue)?e.firstValue=t.min:e.firstValue=Math.min(t.max,Math.max(t.min,t.modelValue)),e.oldValue=e.firstValue),cr(window,"resize",n),yield Le(),n()})),{sliderWrapper:i}},g7=t=>ue(()=>t.marks?Object.keys(t.marks).map(Number.parseFloat).sort((e,n)=>e-n).filter(e=>e<=t.max&&e>=t.min).map(e=>({point:e,position:(e-t.min)*100/(t.max-t.min),mark:t.marks[e]})):[]),v7=(t,e,n)=>{const{form:i,formItem:o}=Oi(),p=Mo(),v=ce(),c=ce(),r={firstButton:v,secondButton:c},d=ue(()=>t.disabled||(i==null?void 0:i.disabled)||!1),u=ue(()=>Math.min(e.firstValue,e.secondValue)),a=ue(()=>Math.max(e.firstValue,e.secondValue)),l=ue(()=>t.range?`${100*(a.value-u.value)/(t.max-t.min)}%`:`${100*(e.firstValue-t.min)/(t.max-t.min)}%`),s=ue(()=>t.range?`${100*(u.value-t.min)/(t.max-t.min)}%`:"0%"),h=ue(()=>t.vertical?{height:t.height}:{}),g=ue(()=>t.vertical?{height:l.value,bottom:s.value}:{width:l.value,left:s.value}),f=()=>{p.value&&(e.sliderSize=p.value[`client${t.vertical?"Height":"Width"}`])},A=R=>{const Z=t.min+R*(t.max-t.min)/100;if(!t.range)return v;let ee;return Math.abs(u.value-Z)<Math.abs(a.value-Z)?ee=e.firstValue<e.secondValue?"firstButton":"secondButton":ee=e.firstValue>e.secondValue?"firstButton":"secondButton",r[ee]},m=R=>{const Z=A(R);return Z.value.setPosition(R),Z},y=R=>{e.firstValue=R,x(t.range?[u.value,a.value]:R)},b=R=>{e.secondValue=R,t.range&&x([u.value,a.value])},x=R=>{n(Ze,R),n(pi,R)},S=()=>we(void 0,null,function*(){yield Le(),n(Sn,t.range?[u.value,a.value]:t.modelValue)}),O=R=>{var Z,ee,re,ae,ne,J;if(d.value||e.dragging)return;f();let P=0;if(t.vertical){const U=(re=(ee=(Z=R.touches)==null?void 0:Z.item(0))==null?void 0:ee.clientY)!=null?re:R.clientY;P=(p.value.getBoundingClientRect().bottom-U)/e.sliderSize*100}else{const U=(J=(ne=(ae=R.touches)==null?void 0:ae.item(0))==null?void 0:ne.clientX)!=null?J:R.clientX,W=p.value.getBoundingClientRect().left;P=(U-W)/e.sliderSize*100}if(!(P<0||P>100))return m(P)};return{elFormItem:o,slider:p,firstButton:v,secondButton:c,sliderDisabled:d,minValue:u,maxValue:a,runwayStyle:h,barStyle:g,resetSize:f,setPosition:m,emitChange:S,onSliderWrapperPrevent:R=>{var Z,ee;((Z=r.firstButton.value)!=null&&Z.dragging||(ee=r.secondButton.value)!=null&&ee.dragging)&&R.preventDefault()},onSliderClick:R=>{O(R)&&S()},onSliderDown:R=>we(void 0,null,function*(){const Z=O(R);Z&&(yield Le(),Z.value.onButtonDown(R))}),setFirstValue:y,setSecondValue:b}},{left:A7,down:m7,right:y7,up:b7,home:C7,end:w7,pageUp:x7,pageDown:_7}=Wt,S7=(t,e,n)=>{const i=ce(),o=ce(!1),p=ue(()=>e.value instanceof Function),v=ue(()=>p.value&&e.value(t.modelValue)||t.modelValue),c=Ot(()=>{n.value&&(o.value=!0)},50),r=Ot(()=>{n.value&&(o.value=!1)},50);return{tooltip:i,tooltipVisible:o,formatValue:v,displayTooltip:c,hideTooltip:r}},E7=(t,e,n)=>{const{disabled:i,min:o,max:p,step:v,showTooltip:c,precision:r,sliderSize:d,formatTooltip:u,emitChange:a,resetSize:l,updateDragging:s}=Re(ag),{tooltip:h,tooltipVisible:g,formatValue:f,displayTooltip:A,hideTooltip:m}=S7(t,u,c),y=ce(),b=ue(()=>`${(t.modelValue-o.value)/(p.value-o.value)*100}%`),x=ue(()=>t.vertical?{bottom:b.value}:{left:b.value}),S=()=>{e.hovering=!0,A()},O=()=>{e.hovering=!1,e.dragging||m()},R=B=>{i.value||(B.preventDefault(),F(B),window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",k),window.addEventListener("touchend",k),window.addEventListener("contextmenu",k),y.value.focus())},Z=B=>{i.value||(e.newPosition=Number.parseFloat(b.value)+B/(p.value-o.value)*100,L(e.newPosition),a())},ee=()=>{Z(-v.value)},re=()=>{Z(v.value)},ae=()=>{Z(-v.value*4)},ne=()=>{Z(v.value*4)},J=()=>{i.value||(L(0),a())},P=()=>{i.value||(L(100),a())},U=B=>{let Q=!0;[A7,m7].includes(B.key)?ee():[y7,b7].includes(B.key)?re():B.key===C7?J():B.key===w7?P():B.key===_7?ae():B.key===x7?ne():Q=!1,Q&&B.preventDefault()},W=B=>{let Q,w;return B.type.startsWith("touch")?(w=B.touches[0].clientY,Q=B.touches[0].clientX):(w=B.clientY,Q=B.clientX),{clientX:Q,clientY:w}},F=B=>{e.dragging=!0,e.isClick=!0;const{clientX:Q,clientY:w}=W(B);t.vertical?e.startY=w:e.startX=Q,e.startPosition=Number.parseFloat(b.value),e.newPosition=e.startPosition},E=B=>{if(e.dragging){e.isClick=!1,A(),l();let Q;const{clientX:w,clientY:_}=W(B);t.vertical?(e.currentY=_,Q=(e.startY-e.currentY)/d.value*100):(e.currentX=w,Q=(e.currentX-e.startX)/d.value*100),e.newPosition=e.startPosition+Q,L(e.newPosition)}},k=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||m(),e.isClick||L(e.newPosition),a()},0),window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",k),window.removeEventListener("touchend",k),window.removeEventListener("contextmenu",k))},L=B=>we(void 0,null,function*(){if(B===null||Number.isNaN(+B))return;B<0?B=0:B>100&&(B=100);const Q=100/((p.value-o.value)/v.value);let w=Math.round(B/Q)*Q*(p.value-o.value)*.01+o.value;w=Number.parseFloat(w.toFixed(r.value)),w!==t.modelValue&&n(Ze,w),!e.dragging&&t.modelValue!==e.oldValue&&(e.oldValue=t.modelValue),yield Le(),e.dragging&&A(),h.value.updatePopper()});return Me(()=>e.dragging,B=>{s(B)}),{disabled:i,button:y,tooltip:h,tooltipVisible:g,showTooltip:c,wrapperStyle:x,formatValue:f,handleMouseEnter:S,handleMouseLeave:O,onButtonDown:R,onKeyDown:U,setPosition:L}},I7=(t,e,n,i)=>({stops:ue(()=>{if(!t.showStops||t.min>t.max)return[];if(t.step===0)return[];const o=(t.max-t.min)/t.step,p=100*t.step/(t.max-t.min),v=Array.from({length:o-1}).map((c,r)=>(r+1)*p);return t.range?v.filter(c=>c<100*(n.value-t.min)/(t.max-t.min)||c>100*(i.value-t.min)/(t.max-t.min)):v.filter(c=>c>100*(e.firstValue-t.min)/(t.max-t.min))}),getStopStyle:o=>t.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),k7=(t,e,n,i,o,p)=>{const v=d=>{o(Ze,d),o(pi,d)},c=()=>t.range?![n.value,i.value].every((d,u)=>d===e.oldValue[u]):t.modelValue!==e.oldValue,r=()=>{var d,u;t.min>t.max&&Lh("Slider","min should not be greater than max.");const a=t.modelValue;t.range&&Array.isArray(a)?a[1]<t.min?v([t.min,t.min]):a[0]>t.max?v([t.max,t.max]):a[0]<t.min?v([t.min,a[1]]):a[1]>t.max?v([a[0],t.max]):(e.firstValue=a[0],e.secondValue=a[1],c()&&(t.validateEvent&&((d=p==null?void 0:p.validate)==null||d.call(p,"change").catch(l=>Wn())),e.oldValue=a.slice())):!t.range&&typeof a=="number"&&!Number.isNaN(a)&&(a<t.min?v(t.min):a>t.max?v(t.max):(e.firstValue=a,c()&&(t.validateEvent&&((u=p==null?void 0:p.validate)==null||u.call(p,"change").catch(l=>Wn())),e.oldValue=a)))};r(),Me(()=>e.dragging,d=>{d||r()}),Me(()=>t.modelValue,(d,u)=>{e.dragging||Array.isArray(d)&&Array.isArray(u)&&d.every((a,l)=>a===u[l])&&e.firstValue===d[0]&&e.secondValue===d[1]||r()},{deep:!0}),Me(()=>[t.min,t.max],()=>{r()})},B7=Qt({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:jh,default:"top"}}),O7={[Ze]:t=>_t(t)},D7=["tabindex"],T7=Ce({name:"ElSliderButton"}),M7=Ce(De(ve({},T7),{props:B7,emits:O7,setup(t,{expose:e,emit:n}){const i=t,o=Je("slider"),p=et({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:v,button:c,tooltip:r,showTooltip:d,tooltipVisible:u,wrapperStyle:a,formatValue:l,handleMouseEnter:s,handleMouseLeave:h,onButtonDown:g,onKeyDown:f,setPosition:A}=E7(i,p,n),{hovering:m,dragging:y}=Fi(p);return e({onButtonDown:g,onKeyDown:f,setPosition:A,hovering:m,dragging:y}),(b,x)=>($(),se("div",{ref_key:"button",ref:c,class:de([C(o).e("button-wrapper"),{hover:C(m),dragging:C(y)}]),style:$e(C(a)),tabindex:C(v)?-1:0,onMouseenter:x[0]||(x[0]=(...S)=>C(s)&&C(s)(...S)),onMouseleave:x[1]||(x[1]=(...S)=>C(h)&&C(h)(...S)),onMousedown:x[2]||(x[2]=(...S)=>C(g)&&C(g)(...S)),onTouchstart:x[3]||(x[3]=(...S)=>C(g)&&C(g)(...S)),onFocus:x[4]||(x[4]=(...S)=>C(s)&&C(s)(...S)),onBlur:x[5]||(x[5]=(...S)=>C(h)&&C(h)(...S)),onKeydown:x[6]||(x[6]=(...S)=>C(f)&&C(f)(...S))},[M(C(Kt),{ref_key:"tooltip",ref:r,visible:C(u),placement:b.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":b.tooltipClass,disabled:!C(d),persistent:""},{content:K(()=>[T("span",null,Se(C(l)),1)]),default:K(()=>[T("div",{class:de([C(o).e("button"),{hover:C(m),dragging:C(y)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,D7))}}));var sg=at(M7,[["__file","button.vue"]]);const Q7=Qt({mark:{type:xt([String,Object]),default:void 0}});var L7=Ce({name:"ElSliderMarker",props:Q7,setup(t){const e=Je("slider"),n=ue(()=>Jt(t.mark)?t.mark:t.mark.label),i=ue(()=>Jt(t.mark)?void 0:t.mark.style);return()=>Ri("div",{class:e.e("marks-text"),style:i.value},n.value)}});const j7=["id","role","aria-label","aria-labelledby"],P7={key:1},F7=Ce({name:"ElSlider"}),R7=Ce(De(ve({},F7),{props:d7,emits:f7,setup(t,{expose:e,emit:n}){const i=t,o=Je("slider"),{t:p}=rr(),v=et({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:c,slider:r,firstButton:d,secondButton:u,sliderDisabled:a,minValue:l,maxValue:s,runwayStyle:h,barStyle:g,resetSize:f,emitChange:A,onSliderWrapperPrevent:m,onSliderClick:y,onSliderDown:b,setFirstValue:x,setSecondValue:S}=v7(i,v,n),{stops:O,getStopStyle:R}=I7(i,v,l,s),{inputId:Z,isLabeledByFormItem:ee}=Or(i,{formItemContext:c}),re=Di(),ae=ue(()=>i.inputSize||re.value),ne=ue(()=>i.label||i.ariaLabel||p("el.slider.defaultLabel",{min:i.min,max:i.max})),J=ue(()=>i.range?i.rangeStartLabel||p("el.slider.defaultRangeStartLabel"):ne.value),P=ue(()=>i.formatValueText?i.formatValueText(B.value):`${B.value}`),U=ue(()=>i.rangeEndLabel||p("el.slider.defaultRangeEndLabel")),W=ue(()=>i.formatValueText?i.formatValueText(Q.value):`${Q.value}`),F=ue(()=>[o.b(),o.m(re.value),o.is("vertical",i.vertical),{[o.m("with-input")]:i.showInput}]),E=g7(i);k7(i,v,l,s,n,c);const k=ue(()=>{const I=[i.min,i.max,i.step].map(D=>{const H=`${D}`.split(".")[1];return H?H.length:0});return Math.max.apply(null,I)}),{sliderWrapper:L}=p7(i,v,f),{firstValue:B,secondValue:Q,sliderSize:w}=Fi(v),_=I=>{v.dragging=I};return un(ag,De(ve({},Fi(i)),{sliderSize:w,disabled:a,precision:k,emitChange:A,resetSize:f,updateDragging:_})),Xn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},ue(()=>!!i.label)),e({onSliderClick:y}),(I,D)=>{var H,V;return $(),se("div",{id:I.range?C(Z):void 0,ref_key:"sliderWrapper",ref:L,class:de(C(F)),role:I.range?"group":void 0,"aria-label":I.range&&!C(ee)?C(ne):void 0,"aria-labelledby":I.range&&C(ee)?(H=C(c))==null?void 0:H.labelId:void 0,onTouchstart:D[2]||(D[2]=(...Y)=>C(m)&&C(m)(...Y)),onTouchmove:D[3]||(D[3]=(...Y)=>C(m)&&C(m)(...Y))},[T("div",{ref_key:"slider",ref:r,class:de([C(o).e("runway"),{"show-input":I.showInput&&!I.range},C(o).is("disabled",C(a))]),style:$e(C(h)),onMousedown:D[0]||(D[0]=(...Y)=>C(b)&&C(b)(...Y)),onTouchstart:D[1]||(D[1]=(...Y)=>C(b)&&C(b)(...Y))},[T("div",{class:de(C(o).e("bar")),style:$e(C(g))},null,6),M(sg,{id:I.range?void 0:C(Z),ref_key:"firstButton",ref:d,"model-value":C(B),vertical:I.vertical,"tooltip-class":I.tooltipClass,placement:I.placement,role:"slider","aria-label":I.range||!C(ee)?C(J):void 0,"aria-labelledby":!I.range&&C(ee)?(V=C(c))==null?void 0:V.labelId:void 0,"aria-valuemin":I.min,"aria-valuemax":I.range?C(Q):I.max,"aria-valuenow":C(B),"aria-valuetext":C(P),"aria-orientation":I.vertical?"vertical":"horizontal","aria-disabled":C(a),"onUpdate:modelValue":C(x)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),I.range?($(),_e(sg,{key:0,ref_key:"secondButton",ref:u,"model-value":C(Q),vertical:I.vertical,"tooltip-class":I.tooltipClass,placement:I.placement,role:"slider","aria-label":C(U),"aria-valuemin":C(B),"aria-valuemax":I.max,"aria-valuenow":C(Q),"aria-valuetext":C(W),"aria-orientation":I.vertical?"vertical":"horizontal","aria-disabled":C(a),"onUpdate:modelValue":C(S)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):be("v-if",!0),I.showStops?($(),se("div",P7,[($(!0),se(Qe,null,We(C(O),(Y,z)=>($(),se("div",{key:z,class:de(C(o).e("stop")),style:$e(C(R)(Y))},null,6))),128))])):be("v-if",!0),C(E).length>0?($(),se(Qe,{key:2},[T("div",null,[($(!0),se(Qe,null,We(C(E),(Y,z)=>($(),se("div",{key:z,style:$e(C(R)(Y.position)),class:de([C(o).e("stop"),C(o).e("marks-stop")])},null,6))),128))]),T("div",{class:de(C(o).e("marks"))},[($(!0),se(Qe,null,We(C(E),(Y,z)=>($(),_e(C(L7),{key:z,mark:Y.mark,style:$e(C(R)(Y.position))},null,8,["mark","style"]))),128))],2)],64)):be("v-if",!0)],38),I.showInput&&!I.range?($(),_e(C(uc),{key:0,ref:"input","model-value":C(B),class:de(C(o).e("input")),step:I.step,disabled:C(a),controls:I.showInputControls,min:I.min,max:I.max,debounce:I.debounce,size:C(ae),"onUpdate:modelValue":C(x),onChange:C(A)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):be("v-if",!0)],42,j7)}}}));var N7=at(R7,[["__file","slider.vue"]]);const as=ln(N7),z7=Qt(ve({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:fH},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:ir},activeActionIcon:{type:ir},activeIcon:{type:ir},inactiveIcon:{type:ir},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:xt(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0}},ar(["ariaLabel"]))),V7={[Ze]:t=>di(t)||Jt(t)||_t(t),[Sn]:t=>di(t)||Jt(t)||_t(t),[pi]:t=>di(t)||Jt(t)||_t(t)},U7=["onClick"],H7=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],G7=["aria-hidden"],Y7=["aria-hidden"],W7=["aria-hidden"],lg="ElSwitch",X7=Ce({name:lg}),$7=Ce(De(ve({},X7),{props:z7,emits:V7,setup(t,{expose:e,emit:n}){const i=t,{formItem:o}=Oi(),p=Di(),v=Je("switch"),{inputId:c}=Or(i,{formItemContext:o}),r=Ta(ue(()=>i.loading)),d=ce(i.modelValue!==!1),u=ce(),a=ce(),l=ue(()=>[v.b(),v.m(p.value),v.is("disabled",r.value),v.is("checked",A.value)]),s=ue(()=>[v.e("label"),v.em("label","left"),v.is("active",!A.value)]),h=ue(()=>[v.e("label"),v.em("label","right"),v.is("active",A.value)]),g=ue(()=>({width:Ks(i.width)}));Me(()=>i.modelValue,()=>{d.value=!0});const f=ue(()=>d.value?i.modelValue:!1),A=ue(()=>f.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(f.value)||(n(Ze,i.inactiveValue),n(Sn,i.inactiveValue),n(pi,i.inactiveValue)),Me(A,x=>{var S;u.value.checked=x,i.validateEvent&&((S=o==null?void 0:o.validate)==null||S.call(o,"change").catch(O=>Wn()))});const m=()=>{const x=A.value?i.inactiveValue:i.activeValue;n(Ze,x),n(Sn,x),n(pi,x),Le(()=>{u.value.checked=A.value})},y=()=>{if(r.value)return;const{beforeChange:x}=i;if(!x){m();return}const S=x();[M2(S),di(S)].includes(!0)||Lh(lg,"beforeChange must return type `Promise<boolean>` or `boolean`"),M2(S)?S.then(O=>{O&&m()}).catch(O=>{}):S&&m()},b=()=>{var x,S;(S=(x=u.value)==null?void 0:x.focus)==null||S.call(x)};return je(()=>{u.value.checked=A.value}),Xn({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},ue(()=>!!i.label)),e({focus:b,checked:A}),(x,S)=>($(),se("div",{class:de(C(l)),onClick:ot(y,["prevent"])},[T("input",{id:C(c),ref_key:"input",ref:u,class:de(C(v).e("input")),type:"checkbox",role:"switch","aria-checked":C(A),"aria-disabled":C(r),"aria-label":x.label||x.ariaLabel,name:x.name,"true-value":x.activeValue,"false-value":x.inactiveValue,disabled:C(r),tabindex:x.tabindex,onChange:m,onKeydown:hn(y,["enter"])},null,42,H7),!x.inlinePrompt&&(x.inactiveIcon||x.inactiveText)?($(),se("span",{key:0,class:de(C(s))},[x.inactiveIcon?($(),_e(C(it),{key:0},{default:K(()=>[($(),_e(tn(x.inactiveIcon)))]),_:1})):be("v-if",!0),!x.inactiveIcon&&x.inactiveText?($(),se("span",{key:1,"aria-hidden":C(A)},Se(x.inactiveText),9,G7)):be("v-if",!0)],2)):be("v-if",!0),T("span",{ref_key:"core",ref:a,class:de(C(v).e("core")),style:$e(C(g))},[x.inlinePrompt?($(),se("div",{key:0,class:de(C(v).e("inner"))},[x.activeIcon||x.inactiveIcon?($(),_e(C(it),{key:0,class:de(C(v).is("icon"))},{default:K(()=>[($(),_e(tn(C(A)?x.activeIcon:x.inactiveIcon)))]),_:1},8,["class"])):x.activeText||x.inactiveText?($(),se("span",{key:1,class:de(C(v).is("text")),"aria-hidden":!C(A)},Se(C(A)?x.activeText:x.inactiveText),11,Y7)):be("v-if",!0)],2)):be("v-if",!0),T("div",{class:de(C(v).e("action"))},[x.loading?($(),_e(C(it),{key:0,class:de(C(v).is("loading"))},{default:K(()=>[M(C(v2))]),_:1},8,["class"])):C(A)?Ne(x.$slots,"active-action",{key:1},()=>[x.activeActionIcon?($(),_e(C(it),{key:0},{default:K(()=>[($(),_e(tn(x.activeActionIcon)))]),_:1})):be("v-if",!0)]):C(A)?be("v-if",!0):Ne(x.$slots,"inactive-action",{key:2},()=>[x.inactiveActionIcon?($(),_e(C(it),{key:0},{default:K(()=>[($(),_e(tn(x.inactiveActionIcon)))]),_:1})):be("v-if",!0)])],2)],6),!x.inlinePrompt&&(x.activeIcon||x.activeText)?($(),se("span",{key:1,class:de(C(h))},[x.activeIcon?($(),_e(C(it),{key:0},{default:K(()=>[($(),_e(tn(x.activeIcon)))]),_:1})):be("v-if",!0),!x.activeIcon&&x.activeText?($(),se("span",{key:1,"aria-hidden":!C(A)},Se(x.activeText),9,W7)):be("v-if",!0)],2)):be("v-if",!0)],10,U7))}}));var q7=at($7,[["__file","switch.vue"]]);const qo=ln(q7),to="$treeNodeId",cg=function(t,e){!e||e[to]||Object.defineProperty(e,to,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},fc=function(t,e){return t?e[t]:e[to]},pc=(t,e,n)=>{const i=t.value.currentNode;n();const o=t.value.currentNode;i!==o&&e("current-change",o?o.data:null,o)},gc=t=>{let e=!0,n=!0,i=!0;for(let o=0,p=t.length;o<p;o++){const v=t[o];(v.checked!==!0||v.indeterminate)&&(e=!1,v.disabled||(i=!1)),(v.checked!==!1||v.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:i,half:!e&&!n}},Ko=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:i}=gc(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):i?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const o=t.parent;!o||o.level===0||t.store.checkStrictly||Ko(o)},ss=function(t,e){const n=t.store.props,i=t.data||{},o=n[e];if(typeof o=="function")return o(i,t);if(typeof o=="string")return i[o];if(typeof o>"u"){const p=i[e];return p===void 0?"":p}};let K7=0;class yr{constructor(e){this.id=K7++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)Qa(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const p=ss(this,"isLeaf");typeof p=="boolean"&&(this.isLeafByUser=p)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||cg(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,o=e.key;o&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),o&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||cg(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=ss(this,"children")||[];for(let i=0,o=n.length;i<o;i++)this.insertChild({data:n[i]})}get label(){return ss(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return ss(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(i=>i===e||n&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof yr)){if(!i){const o=this.getChildren(!0);o.includes(e.data)||(typeof n>"u"||n<0?o.push(e.data):o.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=et(new yr(e)),e instanceof yr&&e.initialize()}e.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let i;n&&(i=this.childNodes.indexOf(n)),this.insertChild(e,i)}insertAfter(e,n){let i;n&&(i=this.childNodes.indexOf(n),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const n=this.getChildren()||[],i=n.indexOf(e.data);i>-1&&n.splice(i,1);const o=this.childNodes.indexOf(e);o>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){n=this.childNodes[i];break}n&&this.removeChild(n)}expand(e,n){const i=()=>{if(n){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Ko(this),i())}):i()}doCreateChildren(e,n={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,i,o){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:v,allWithoutDisable:c}=gc(this.childNodes);!this.isLeaf&&!v&&c&&(this.checked=!1,e=!1);const r=()=>{if(n){const d=this.childNodes;for(let l=0,s=d.length;l<s;l++){const h=d[l];o=o||e!==!1;const g=h.disabled?h.checked:o;h.setChecked(g,n,!0,o)}const{half:u,all:a}=gc(d);a||(this.checked=a,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{r(),Ko(this)},{checked:e!==!1});return}else r()}const p=this.parent;!p||p.level===0||i||Ko(p)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const i=this.store.props;let o="children";return i&&(o=i.children||"children"),n[o]===void 0&&(n[o]=null),e&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(p=>p.data),i={},o=[];e.forEach((p,v)=>{const c=p[to];c&&n.findIndex(r=>r[to]===c)>=0?i[c]={index:v,data:p}:o.push({index:v,data:p})}),this.store.lazy||n.forEach(p=>{i[p[to]]||this.removeChildByData(p)}),o.forEach(({index:p,data:v})=>{this.insertChild({data:v},p)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const i=p=>{this.childNodes=[],this.doCreateChildren(p,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,p)},o=()=>{this.loading=!1};this.store.load(this,i,o)}else e&&e.call(this)}eachNode(e){const n=[this];for(;n.length;){const i=n.shift();n.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||Ko(this)}}class J7{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)Qa(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new yr({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,i=this.lazy,o=function(p){const v=p.root?p.root.childNodes:p.childNodes;if(v.forEach(c=>{c.visible=n.call(c,e,c.data,c),o(c)}),!p.visible&&v.length){let c=!0;c=!v.some(r=>r.visible),p.root?p.root.visible=c===!1:p.visible=c===!1}e&&p.visible&&!p.isLeaf&&(!i||p.loaded)&&p.expand()};o(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof yr)return e;const n=Pi(e)?fc(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const i=this.getNode(n);i.parent.insertBefore({data:e},i)}insertAfter(e,n){const i=this.getNode(n);i.parent.insertAfter({data:e},i)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const i=Bo(n)?this.root:this.getNode(n);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(i=>{const o=n[i];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(n=>{this.deregisterNode(n)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const i=[],o=function(p){(p.root?p.root.childNodes:p.childNodes).forEach(v=>{(v.checked||n&&v.indeterminate)&&(!e||e&&v.isLeaf)&&i.push(v.data),o(v)})};return o(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),n(o)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const i in n)Qa(n,i)&&e.push(n[i]);return e}updateChildren(e,n){const i=this.nodesMap[e];if(!i)return;const o=i.childNodes;for(let p=o.length-1;p>=0;p--){const v=o[p];this.remove(v.data)}for(let p=0,v=n.length;p<v;p++){const c=n[p];this.append(c,i.data)}}_setCheckedKeys(e,n=!1,i){const o=this._getAllNodes().sort((r,d)=>r.level-d.level),p=Object.create(null),v=Object.keys(i);o.forEach(r=>r.setChecked(!1,!1));const c=r=>{r.childNodes.forEach(d=>{var u;p[d.data[e]]=!0,(u=d.childNodes)!=null&&u.length&&c(d)})};for(let r=0,d=o.length;r<d;r++){const u=o[r],a=u.data[e].toString();if(!v.includes(a)){u.checked&&!p[a]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&c(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const l=function(s){s.childNodes.forEach(h=>{h.isLeaf||h.setChecked(!1,!1),l(h)})};l(u)}}}setCheckedNodes(e,n=!1){const i=this.key,o={};e.forEach(p=>{o[(p||{})[i]]=!0}),this._setCheckedKeys(i,n,o)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const i=this.key,o={};e.forEach(p=>{o[p]=!0}),this._setCheckedKeys(i,n,o)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const i=this.getNode(n);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,n,i){const o=this.getNode(e);o&&o.setChecked(!!n,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const i=e[this.key],o=this.nodesMap[i];this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Z7=Ce({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=Je("tree"),n=Re("NodeInstance"),i=Re("RootTree");return()=>{const o=t.node,{data:p,store:v}=o;return t.renderContent?t.renderContent(Ri,{_self:n,node:o,data:p,store:v}):Ne(i.ctx.slots,"default",{node:o,data:p},()=>[Ri("span",{class:e.be("node","label")},[o.label])])}}});var ek=at(Z7,[["__file","tree-node-content.vue"]]);function ug(t){const e=Re("TreeNodeMap",null),n={treeNodeExpand:i=>{t.node!==i&&t.node.collapse()},children:[]};return e&&e.children.push(n),un("TreeNodeMap",n),{broadcastExpanded:i=>{if(t.accordion)for(const o of n.children)o.treeNodeExpand(i)}}}const hg=Symbol("dragEvents");function tk({props:t,ctx:e,el$:n,dropIndicator$:i,store:o}){const p=Je("tree"),v=ce({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return un(hg,{treeNodeDragStart:({event:c,treeNode:r})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(r.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch(d){}v.value.draggingNode=r,e.emit("node-drag-start",r.node,c)},treeNodeDragOver:({event:c,treeNode:r})=>{const d=r,u=v.value.dropNode;u&&u.node.id!==d.node.id&&Fh(u.$el,p.is("drop-inner"));const a=v.value.draggingNode;if(!a||!d)return;let l=!0,s=!0,h=!0,g=!0;typeof t.allowDrop=="function"&&(l=t.allowDrop(a.node,d.node,"prev"),g=s=t.allowDrop(a.node,d.node,"inner"),h=t.allowDrop(a.node,d.node,"next")),c.dataTransfer.dropEffect=s||l||h?"move":"none",(l||s||h)&&(u==null?void 0:u.node.id)!==d.node.id&&(u&&e.emit("node-drag-leave",a.node,u.node,c),e.emit("node-drag-enter",a.node,d.node,c)),l||s||h?v.value.dropNode=d:v.value.dropNode=null,d.node.nextSibling===a.node&&(h=!1),d.node.previousSibling===a.node&&(l=!1),d.node.contains(a.node,!1)&&(s=!1),(a.node===d.node||a.node.contains(d.node))&&(l=!1,s=!1,h=!1);const f=d.$el.querySelector(`.${p.be("node","content")}`).getBoundingClientRect(),A=n.value.getBoundingClientRect();let m;const y=l?s?.25:h?.45:1:-1,b=h?s?.75:l?.55:0:1;let x=-9999;const S=c.clientY-f.top;S<f.height*y?m="before":S>f.height*b?m="after":s?m="inner":m="none";const O=d.$el.querySelector(`.${p.be("node","expand-icon")}`).getBoundingClientRect(),R=i.value;m==="before"?x=O.top-A.top:m==="after"&&(x=O.bottom-A.top),R.style.top=`${x}px`,R.style.left=`${O.right-A.left}px`,m==="inner"?pH(d.$el,p.is("drop-inner")):Fh(d.$el,p.is("drop-inner")),v.value.showDropIndicator=m==="before"||m==="after",v.value.allowDrop=v.value.showDropIndicator||g,v.value.dropType=m,e.emit("node-drag-over",a.node,d.node,c)},treeNodeDragEnd:c=>{const{draggingNode:r,dropType:d,dropNode:u}=v.value;if(c.preventDefault(),c.dataTransfer.dropEffect="move",r&&u){const a={data:r.node.data};d!=="none"&&r.node.remove(),d==="before"?u.node.parent.insertBefore(a,u.node):d==="after"?u.node.parent.insertAfter(a,u.node):d==="inner"&&u.node.insertChild(a),d!=="none"&&(o.value.registerNode(a),o.value.key&&r.node.eachNode(l=>{var s;(s=o.value.nodesMap[l.data[o.value.key]])==null||s.setChecked(l.checked,!o.value.checkStrictly)})),Fh(u.$el,p.is("drop-inner")),e.emit("node-drag-end",r.node,u.node,d,c),d!=="none"&&e.emit("node-drop",r.node,u.node,d,c)}r&&!u&&e.emit("node-drag-end",r.node,null,d,c),v.value.showDropIndicator=!1,v.value.draggingNode=null,v.value.dropNode=null,v.value.allowDrop=!0}}),{dragState:v}}const nk=Ce({name:"ElTreeNode",components:{ElCollapseTransition:Wp,ElCheckbox:jp,NodeContent:ek,ElIcon:it,Loading:v2},props:{node:{type:yr,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=Je("tree"),{broadcastExpanded:i}=ug(t),o=Re("RootTree"),p=ce(!1),v=ce(!1),c=ce(null),r=ce(null),d=ce(null),u=Re(hg),a=ft();un("NodeInstance",a),t.node.expanded&&(p.value=!0,v.value=!0);const l=o.props.props.children||"children";Me(()=>{const b=t.node.data[l];return b&&[...b]},()=>{t.node.updateChildren()}),Me(()=>t.node.indeterminate,b=>{g(t.node.checked,b)}),Me(()=>t.node.checked,b=>{g(b,t.node.indeterminate)}),Me(()=>t.node.childNodes.length,()=>t.node.reInitChecked()),Me(()=>t.node.expanded,b=>{Le(()=>p.value=b),b&&(v.value=!0)});const s=b=>fc(o.props.nodeKey,b.data),h=b=>{const x=t.props.class;if(!x)return{};let S;if(gi(x)){const{data:O}=b;S=x(O,b)}else S=x;return Jt(S)?{[S]:!0}:S},g=(b,x)=>{(c.value!==b||r.value!==x)&&o.ctx.emit("check-change",t.node.data,b,x),c.value=b,r.value=x},f=b=>{pc(o.store,o.ctx.emit,()=>o.store.value.setCurrentNode(t.node)),o.currentNode.value=t.node,o.props.expandOnClickNode&&m(),o.props.checkOnClickNode&&!t.node.disabled&&y(null,{target:{checked:!t.node.checked}}),o.ctx.emit("node-click",t.node.data,t.node,a,b)},A=b=>{o.instance.vnode.props.onNodeContextmenu&&(b.stopPropagation(),b.preventDefault()),o.ctx.emit("node-contextmenu",b,t.node.data,t.node,a)},m=()=>{t.node.isLeaf||(p.value?(o.ctx.emit("node-collapse",t.node.data,t.node,a),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,a)))},y=(b,x)=>{t.node.setChecked(x.target.checked,!o.props.checkStrictly),Le(()=>{const S=o.store.value;o.ctx.emit("check",t.node.data,{checkedNodes:S.getCheckedNodes(),checkedKeys:S.getCheckedKeys(),halfCheckedNodes:S.getHalfCheckedNodes(),halfCheckedKeys:S.getHalfCheckedKeys()})})};return{ns:n,node$:d,tree:o,expanded:p,childNodeRendered:v,oldChecked:c,oldIndeterminate:r,getNodeKey:s,getNodeClass:h,handleSelectChange:g,handleClick:f,handleContextMenu:A,handleExpandIconClick:m,handleCheckChange:y,handleChildNodeExpand:(b,x,S)=>{i(x),o.ctx.emit("node-expand",b,x,S)},handleDragStart:b=>{o.props.draggable&&u.treeNodeDragStart({event:b,treeNode:t})},handleDragOver:b=>{b.preventDefault(),o.props.draggable&&u.treeNodeDragOver({event:b,treeNode:{$el:d.value,node:t.node}})},handleDrop:b=>{b.preventDefault()},handleDragEnd:b=>{o.props.draggable&&u.treeNodeDragEnd(b)},CaretRight:gH}}}),ik=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],rk=["aria-expanded"];function ok(t,e,n,i,o,p){const v=dn("el-icon"),c=dn("el-checkbox"),r=dn("loading"),d=dn("node-content"),u=dn("el-tree-node"),a=dn("el-collapse-transition");return lt(($(),se("div",{ref:"node$",class:de([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=ot((...l)=>t.handleClick&&t.handleClick(...l),["stop"])),onContextmenu:e[2]||(e[2]=(...l)=>t.handleContextMenu&&t.handleContextMenu(...l)),onDragstart:e[3]||(e[3]=ot((...l)=>t.handleDragStart&&t.handleDragStart(...l),["stop"])),onDragover:e[4]||(e[4]=ot((...l)=>t.handleDragOver&&t.handleDragOver(...l),["stop"])),onDragend:e[5]||(e[5]=ot((...l)=>t.handleDragEnd&&t.handleDragEnd(...l),["stop"])),onDrop:e[6]||(e[6]=ot((...l)=>t.handleDrop&&t.handleDrop(...l),["stop"]))},[T("div",{class:de(t.ns.be("node","content")),style:$e({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?($(),_e(v,{key:0,class:de([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:ot(t.handleExpandIconClick,["stop"])},{default:K(()=>[($(),_e(tn(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):be("v-if",!0),t.showCheckbox?($(),_e(c,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=ot(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):be("v-if",!0),t.node.loading?($(),_e(v,{key:2,class:de([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:K(()=>[M(r)]),_:1},8,["class"])):be("v-if",!0),M(d,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),M(a,null,{default:K(()=>[!t.renderAfterExpand||t.childNodeRendered?lt(($(),se("div",{key:0,class:de(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[($(!0),se(Qe,null,We(t.node.childNodes,l=>($(),_e(u,{key:t.getNodeKey(l),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:l,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,rk)),[[Ut,t.expanded]]):be("v-if",!0)]),_:1})],42,ik)),[[Ut,t.node.visible]])}var ak=at(nk,[["render",ok],["__file","tree-node.vue"]]);function sk({el$:t},e){const n=Je("tree"),i=Mo([]),o=Mo([]);je(()=>{p()}),D2(()=>{i.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),o.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),Me(o,v=>{v.forEach(c=>{c.setAttribute("tabindex","-1")})}),cr(t,"keydown",v=>{const c=v.target;if(!c.className.includes(n.b("node")))return;const r=v.code;i.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const d=i.value.indexOf(c);let u;if([Wt.up,Wt.down].includes(r)){if(v.preventDefault(),r===Wt.up){u=d===-1?0:d!==0?d-1:i.value.length-1;const l=u;for(;!e.value.getNode(i.value[u].dataset.key).canFocus;){if(u--,u===l){u=-1;break}u<0&&(u=i.value.length-1)}}else{u=d===-1?0:d<i.value.length-1?d+1:0;const l=u;for(;!e.value.getNode(i.value[u].dataset.key).canFocus;){if(u++,u===l){u=-1;break}u>=i.value.length&&(u=0)}}u!==-1&&i.value[u].focus()}[Wt.left,Wt.right].includes(r)&&(v.preventDefault(),c.click());const a=c.querySelector('[type="checkbox"]');[Wt.enter,Wt.space].includes(r)&&a&&(v.preventDefault(),a.click())});const p=()=>{var v;i.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),o.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const c=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(v=i.value[0])==null||v.setAttribute("tabindex","0")}}const lk=Ce({name:"ElTree",components:{ElTreeNode:ak},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:ir}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=rr(),i=Je("tree"),o=Re(eo,null),p=ce(new J7({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));p.value.initialize();const v=ce(p.value.root),c=ce(null),r=ce(null),d=ce(null),{broadcastExpanded:u}=ug(t),{dragState:a}=tk({props:t,ctx:e,el$:r,dropIndicator$:d,store:p});sk({el$:r},p);const l=ue(()=>{const{childNodes:F}=v.value,E=o?o.hasFilteredOptions!==0:!1;return(!F||F.length===0||F.every(({visible:k})=>!k))&&!E});Me(()=>t.currentNodeKey,F=>{p.value.setCurrentNodeKey(F)}),Me(()=>t.defaultCheckedKeys,F=>{p.value.setDefaultCheckedKey(F)}),Me(()=>t.defaultExpandedKeys,F=>{p.value.setDefaultExpandedKeys(F)}),Me(()=>t.data,F=>{p.value.setData(F)},{deep:!0}),Me(()=>t.checkStrictly,F=>{p.value.checkStrictly=F});const s=F=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");p.value.filter(F)},h=F=>fc(t.nodeKey,F.data),g=F=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const E=p.value.getNode(F);if(!E)return[];const k=[E.data];let L=E.parent;for(;L&&L!==v.value;)k.push(L.data),L=L.parent;return k.reverse()},f=(F,E)=>p.value.getCheckedNodes(F,E),A=F=>p.value.getCheckedKeys(F),m=()=>{const F=p.value.getCurrentNode();return F?F.data:null},y=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const F=m();return F?F[t.nodeKey]:null},b=(F,E)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");p.value.setCheckedNodes(F,E)},x=(F,E)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");p.value.setCheckedKeys(F,E)},S=(F,E,k)=>{p.value.setChecked(F,E,k)},O=()=>p.value.getHalfCheckedNodes(),R=()=>p.value.getHalfCheckedKeys(),Z=(F,E=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");pc(p,e.emit,()=>p.value.setUserCurrentNode(F,E))},ee=(F,E=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");pc(p,e.emit,()=>p.value.setCurrentNodeKey(F,E))},re=F=>p.value.getNode(F),ae=F=>{p.value.remove(F)},ne=(F,E)=>{p.value.append(F,E)},J=(F,E)=>{p.value.insertBefore(F,E)},P=(F,E)=>{p.value.insertAfter(F,E)},U=(F,E,k)=>{u(E),e.emit("node-expand",F,E,k)},W=(F,E)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");p.value.updateChildren(F,E)};return un("RootTree",{ctx:e,props:t,store:p,root:v,currentNode:c,instance:ft()}),un(vH,void 0),{ns:i,store:p,root:v,currentNode:c,dragState:a,el$:r,dropIndicator$:d,isEmpty:l,filter:s,getNodeKey:h,getNodePath:g,getCheckedNodes:f,getCheckedKeys:A,getCurrentNode:m,getCurrentKey:y,setCheckedNodes:b,setCheckedKeys:x,setChecked:S,getHalfCheckedNodes:O,getHalfCheckedKeys:R,setCurrentNode:Z,setCurrentKey:ee,t:n,getNode:re,remove:ae,append:ne,insertBefore:J,insertAfter:P,handleNodeExpand:U,updateKeyChildren:W}}});function ck(t,e,n,i,o,p){const v=dn("el-tree-node");return $(),se("div",{ref:"el$",class:de([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[($(!0),se(Qe,null,We(t.root.childNodes,c=>($(),_e(v,{key:t.getNodeKey(c),node:c,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?($(),se("div",{key:0,class:de(t.ns.e("empty-block"))},[Ne(t.$slots,"empty",{},()=>{var c;return[T("span",{class:de(t.ns.e("empty-text"))},Se((c=t.emptyText)!=null?c:t.t("el.tree.emptyText")),3)]})],2)):be("v-if",!0),lt(T("div",{ref:"dropIndicator$",class:de(t.ns.e("drop-indicator"))},null,2),[[Ut,t.dragState.showDropIndicator]])],2)}var ls=at(lk,[["render",ck],["__file","tree.vue"]]);ls.install=t=>{t.component(ls.name,ls)};const vc=ls,uk=(t,{attrs:e,emit:n},{select:i,tree:o,key:p})=>{const v=Je("tree-select");return Me(()=>t.data,()=>{t.filterable&&Le(()=>{var c,r;(r=o.value)==null||r.filter((c=i.value)==null?void 0:c.states.inputValue)})},{flush:"post"}),De(ve(ve({},Br(Fi(t),Object.keys(Pn.props))),e),{"onUpdate:modelValue":c=>n(Ze,c),valueKey:p,popperClass:ue(()=>{const c=[v.e("popper")];return t.popperClass&&c.push(t.popperClass),c.join(" ")}),filterMethod:(c="")=>{var r;t.filterMethod?t.filterMethod(c):t.remoteMethod?t.remoteMethod(c):(r=o.value)==null||r.filter(c)}})},hk=Ce({extends:ei,setup(t,e){const n=ei.setup(t,e);delete n.selectOptionClick;const i=ft().proxy;return Le(()=>{n.select.states.cachedOptions.get(i.value)||n.select.onOptionCreate(i)}),Me(()=>e.attrs.visible,o=>{n.states.visible=o},{immediate:!0}),n},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function Ac(t){return t||t===0}function mc(t){return Array.isArray(t)&&t.length}function Jo(t){return Array.isArray(t)?t:Ac(t)?[t]:[]}function cs(t,e,n,i,o){for(let p=0;p<t.length;p++){const v=t[p];if(e(v,p,t,o))return i?i(v,p,t,o):v;{const c=n(v);if(mc(c)){const r=cs(c,e,n,i,v);if(r)return r}}}}function yc(t,e,n,i){for(let o=0;o<t.length;o++){const p=t[o];e(p,o,t,i);const v=n(p);mc(v)&&yc(v,e,n,p)}}const dk=(t,{attrs:e,slots:n,emit:i},{select:o,tree:p,key:v})=>{Me(()=>t.modelValue,()=>{t.showCheckbox&&Le(()=>{const a=p.value;a&&!gr(a.getCheckedKeys(),Jo(t.modelValue))&&a.setCheckedKeys(Jo(t.modelValue))})},{immediate:!0,deep:!0});const c=ue(()=>ve({value:v.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},t.props)),r=(a,l)=>{var s;const h=c.value[a];return gi(h)?h(l,(s=p.value)==null?void 0:s.getNode(r("value",l))):l[h]},d=Jo(t.modelValue).map(a=>cs(t.data||[],l=>r("value",l)===a,l=>r("children",l),(l,s,h,g)=>g&&r("value",g))).filter(a=>Ac(a)),u=ue(()=>{if(!t.renderAfterExpand&&!t.lazy)return[];const a=[];return yc(t.data.concat(t.cacheData),l=>{const s=r("value",l);a.push({value:s,currentLabel:r("label",l),isDisabled:r("disabled",l)})},l=>r("children",l)),a});return De(ve(ve({},Br(Fi(t),Object.keys(vc.props))),e),{nodeKey:v,expandOnClickNode:ue(()=>!t.checkStrictly&&t.expandOnClickNode),defaultExpandedKeys:ue(()=>t.defaultExpandedKeys?t.defaultExpandedKeys.concat(d):d),renderContent:(a,{node:l,data:s,store:h})=>a(hk,{value:r("value",s),label:r("label",s),disabled:r("disabled",s),visible:l.visible},t.renderContent?()=>t.renderContent(a,{node:l,data:s,store:h}):n.default?()=>n.default({node:l,data:s,store:h}):void 0),filterNodeMethod:(a,l,s)=>t.filterNodeMethod?t.filterNodeMethod(a,l,s):a?new RegExp(f2(a),"i").test(r("label",l)||""):!0,onNodeClick:(a,l,s)=>{var h,g,f,A;if((h=e.onNodeClick)==null||h.call(e,a,l,s),!(t.showCheckbox&&t.checkOnClickNode)){if(!t.showCheckbox&&(t.checkStrictly||l.isLeaf)){if(!r("disabled",a)){const m=(g=o.value)==null?void 0:g.states.options.get(r("value",a));(f=o.value)==null||f.handleOptionSelect(m)}}else t.expandOnClickNode&&s.proxy.handleExpandIconClick();(A=o.value)==null||A.focus()}},onCheck:(a,l)=>{var s;if(!t.showCheckbox)return;const h=r("value",a),g={};yc([p.value.store.root],y=>g[y.key]=y,y=>y.childNodes);const f=l.checkedKeys,A=t.multiple?Jo(t.modelValue).filter(y=>!(y in g)&&!f.includes(y)):[],m=A.concat(f);if(t.checkStrictly)i(Ze,t.multiple?m:m.includes(h)?h:void 0);else if(t.multiple)i(Ze,A.concat(p.value.getCheckedKeys(!0)));else{const y=cs([a],S=>!mc(r("children",S))&&!r("disabled",S),S=>r("children",S)),b=y?r("value",y):void 0,x=Ac(t.modelValue)&&!!cs([a],S=>r("value",S)===t.modelValue,S=>r("children",S));i(Ze,b===t.modelValue||x?void 0:b)}Le(()=>{var y;const b=Jo(t.modelValue);p.value.setCheckedKeys(b),(y=e.onCheck)==null||y.call(e,a,{checkedKeys:p.value.getCheckedKeys(),checkedNodes:p.value.getCheckedNodes(),halfCheckedKeys:p.value.getHalfCheckedKeys(),halfCheckedNodes:p.value.getHalfCheckedNodes()})}),(s=o.value)==null||s.focus()},cacheOptions:u})};var fk=Ce({props:{data:{type:Array,default:()=>[]}},setup(t){const e=Re(eo);return Me(()=>t.data,()=>{var n;t.data.forEach(o=>{e.states.cachedOptions.has(o.value)||e.states.cachedOptions.set(o.value,o)});const i=((n=e.selectRef)==null?void 0:n.querySelectorAll("input"))||[];hi&&!Array.from(i).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const pk=Ce({name:"ElTreeSelect",inheritAttrs:!1,props:De(ve(ve({},Pn.props),vc.props),{cacheData:{type:Array,default:()=>[]}}),setup(t,e){const{slots:n,expose:i}=e,o=ce(),p=ce(),v=ue(()=>t.nodeKey||t.valueKey||"value"),c=uk(t,e,{select:o,tree:p,key:v}),a=dk(t,e,{select:o,tree:p,key:v}),{cacheOptions:r}=a,d=X3(a,["cacheOptions"]),u=et({});return i(u),je(()=>{Object.assign(u,ve(ve({},Br(p.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),Br(o.value,["focus","blur"])))}),()=>Ri(Pn,et(De(ve({},c),{ref:l=>o.value=l})),De(ve({},n),{default:()=>[Ri(fk,{data:r.value}),Ri(vc,et(De(ve({},d),{ref:l=>p.value=l})))]}))}});var us=at(pk,[["__file","tree-select.vue"]]);us.install=t=>{t.component(us.name,us)};const gk=us,vk=gk;var le={};(function(t){var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Rh,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Rh.implForWrapper,e.nodeCanvas=Rh.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function c(s,h){if(this.__eventListeners[s]){var g=this.__eventListeners[s];h?g[g.indexOf(h)]=!1:e.util.array.fill(g,!1)}}function r(s,h){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in s)this.on(g,s[g]);else this.__eventListeners[s]||(this.__eventListeners[s]=[]),this.__eventListeners[s].push(h);return this}function d(s,h){var g=function(){h.apply(this,arguments),this.off(s,g)}.bind(this);this.on(s,g)}function u(s,h){if(arguments.length===1)for(var g in s)d.call(this,g,s[g]);else d.call(this,s,h);return this}function a(s,h){if(!this.__eventListeners)return this;if(arguments.length===0)for(s in this.__eventListeners)c.call(this,s);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in s)c.call(this,g,s[g]);else c.call(this,s,h);return this}function l(s,h){if(!this.__eventListeners)return this;var g=this.__eventListeners[s];if(!g)return this;for(var f=0,A=g.length;f<A;f++)g[f]&&g[f].call(this,h||{});return this.__eventListeners[s]=g.filter(function(m){return m!==!1}),this}e.Observable={fire:l,on:r,once:u,off:a}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var c=0,r=arguments.length;c<r;c++)this._onObjectAdded(arguments[c]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(c,r,d){var u=this._objects;return d?u[r]=c:u.splice(r,0,c),this._onObjectAdded&&this._onObjectAdded(c),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var c=this._objects,r,d=!1,u=0,a=arguments.length;u<a;u++)r=c.indexOf(arguments[u]),r!==-1&&(d=!0,c.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[u]));return this.renderOnAddRemove&&d&&this.requestRenderAll(),this},forEachObject:function(c,r){for(var d=this.getObjects(),u=0,a=d.length;u<a;u++)c.call(r,d[u],u,d);return this},getObjects:function(c){return typeof c>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===c})},item:function(c){return this._objects[c]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(c,r){return this._objects.indexOf(c)>-1?!0:r?this._objects.some(function(d){return typeof d.contains=="function"&&d.contains(c,!0)}):!1},complexity:function(){return this._objects.reduce(function(c,r){return c+=r.complexity?r.complexity():0,c},0)}},e.CommonMethods={_setOptions:function(c){for(var r in c)this.set(r,c[r])},_initGradient:function(c,r){c&&c.colorStops&&!(c instanceof e.Gradient)&&this.set(r,new e.Gradient(c))},_initPattern:function(c,r,d){c&&c.source&&!(c instanceof e.Pattern)?this.set(r,new e.Pattern(c,d)):d&&d()},_setObject:function(c){for(var r in c)this._set(r,c[r])},set:function(c,r){return typeof c=="object"?this._setObject(c):this._set(c,r),this},_set:function(c,r){this[c]=r},toggle:function(c){var r=this.get(c);return typeof r=="boolean"&&this.set(c,!r),this},get:function(c){return this[c]}},function(c){var r=Math.sqrt,d=Math.atan2,u=Math.pow,a=Math.PI/180,l=Math.PI/2;e.util={cos:function(s){if(s===0)return 1;s<0&&(s=-s);var h=s/l;switch(h){case 1:case 3:return 0;case 2:return-1}return Math.cos(s)},sin:function(s){if(s===0)return 0;var h=s/l,g=1;switch(s<0&&(g=-1),h){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(s)},removeFromArray:function(s,h){var g=s.indexOf(h);return g!==-1&&s.splice(g,1),s},getRandomInt:function(s,h){return Math.floor(Math.random()*(h-s+1))+s},degreesToRadians:function(s){return s*a},radiansToDegrees:function(s){return s/a},rotatePoint:function(s,h,g){var f=new e.Point(s.x-h.x,s.y-h.y),A=e.util.rotateVector(f,g);return new e.Point(A.x,A.y).addEquals(h)},rotateVector:function(s,h){var g=e.util.sin(h),f=e.util.cos(h),A=s.x*f-s.y*g,m=s.x*g+s.y*f;return{x:A,y:m}},createVector:function(s,h){return new e.Point(h.x-s.x,h.y-s.y)},calcAngleBetweenVectors:function(s,h){return Math.acos((s.x*h.x+s.y*h.y)/(Math.hypot(s.x,s.y)*Math.hypot(h.x,h.y)))},getHatVector:function(s){return new e.Point(s.x,s.y).multiply(1/Math.hypot(s.x,s.y))},getBisector:function(s,h,g){var f=e.util.createVector(s,h),A=e.util.createVector(s,g),m=e.util.calcAngleBetweenVectors(f,A),y=e.util.calcAngleBetweenVectors(e.util.rotateVector(f,m),A),b=m*(y===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(f,b)),angle:m}},projectStrokeOnPoints:function(s,h,g){var f=[],A=h.strokeWidth/2,m=h.strokeUniform?new e.Point(1/h.scaleX,1/h.scaleY):new e.Point(1,1),y=function(b){var x=A/Math.hypot(b.x,b.y);return new e.Point(b.x*x*m.x,b.y*x*m.y)};return s.length<=1||s.forEach(function(b,x){var S=new e.Point(b.x,b.y),O,R;x===0?(R=s[x+1],O=g?y(e.util.createVector(R,S)).addEquals(S):s[s.length-1]):x===s.length-1?(O=s[x-1],R=g?y(e.util.createVector(O,S)).addEquals(S):s[0]):(O=s[x-1],R=s[x+1]);var Z=e.util.getBisector(S,O,R),ee=Z.vector,re=Z.angle,ae,ne;if(h.strokeLineJoin==="miter"&&(ae=-A/Math.sin(re/2),ne=new e.Point(ee.x*ae*m.x,ee.y*ae*m.y),Math.hypot(ne.x,ne.y)/A<=h.strokeMiterLimit)){f.push(S.add(ne)),f.push(S.subtract(ne));return}ae=-A*Math.SQRT2,ne=new e.Point(ee.x*ae*m.x,ee.y*ae*m.y),f.push(S.add(ne)),f.push(S.subtract(ne))}),f},transformPoint:function(s,h,g){return g?new e.Point(h[0]*s.x+h[2]*s.y,h[1]*s.x+h[3]*s.y):new e.Point(h[0]*s.x+h[2]*s.y+h[4],h[1]*s.x+h[3]*s.y+h[5])},makeBoundingBoxFromPoints:function(s,h){if(h)for(var g=0;g<s.length;g++)s[g]=e.util.transformPoint(s[g],h);var f=[s[0].x,s[1].x,s[2].x,s[3].x],A=e.util.array.min(f),m=e.util.array.max(f),y=m-A,b=[s[0].y,s[1].y,s[2].y,s[3].y],x=e.util.array.min(b),S=e.util.array.max(b),O=S-x;return{left:A,top:x,width:y,height:O}},invertTransform:function(s){var h=1/(s[0]*s[3]-s[1]*s[2]),g=[h*s[3],-h*s[1],-h*s[2],h*s[0]],f=e.util.transformPoint({x:s[4],y:s[5]},g,!0);return g[4]=-f.x,g[5]=-f.y,g},toFixed:function(s,h){return parseFloat(Number(s).toFixed(h))},parseUnit:function(s,h){var g=/\D{0,2}$/.exec(s),f=parseFloat(s);switch(h||(h=e.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return f*e.DPI/25.4;case"cm":return f*e.DPI/2.54;case"in":return f*e.DPI;case"pt":return f*e.DPI/72;case"pc":return f*e.DPI/72*12;case"em":return f*h;default:return f}},falseFunction:function(){return!1},getKlass:function(s,h){return s=e.util.string.camelize(s.charAt(0).toUpperCase()+s.slice(1)),e.util.resolveNamespace(h)[s]},getSvgAttributes:function(s){var h=["instantiated_by_use","style","id","class"];switch(s){case"linearGradient":h=h.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":h=h.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":h=h.concat(["offset","stop-color","stop-opacity"]);break}return h},resolveNamespace:function(s){if(!s)return e;var h=s.split("."),g=h.length,f,A=c||e.window;for(f=0;f<g;++f)A=A[h[f]];return A},loadImage:function(s,h,g,f){if(!s){h&&h.call(g,s);return}var A=e.util.createImage(),m=function(){h&&h.call(g,A,!1),A=A.onload=A.onerror=null};A.onload=m,A.onerror=function(){e.log("Error loading "+A.src),h&&h.call(g,null,!0),A=A.onload=A.onerror=null},s.indexOf("data")!==0&&f!==void 0&&f!==null&&(A.crossOrigin=f),s.substring(0,14)==="data:image/svg"&&(A.onload=null,e.util.loadImageInDom(A,m)),A.src=s},loadImageInDom:function(s,h){var g=e.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(s),e.document.querySelector("body").appendChild(g),s.onload=function(){h(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(s,h,g,f){s=s||[];var A=[],m=0,y=s.length;function b(){++m===y&&h&&h(A.filter(function(x){return x}))}if(!y){h&&h(A);return}s.forEach(function(x,S){if(!x||!x.type){b();return}var O=e.util.getKlass(x.type,g);O.fromObject(x,function(R,Z){Z||(A[S]=R),f&&f(x,R,Z),b()})})},enlivenObjectEnlivables:function(s,h,g){var f=e.Object.ENLIVEN_PROPS.filter(function(A){return!!s[A]});e.util.enlivenObjects(f.map(function(A){return s[A]}),function(A){var m={};f.forEach(function(y,b){m[y]=A[b],h&&(h[y]=A[b])}),g&&g(m)})},enlivenPatterns:function(s,h){s=s||[];function g(){++A===m&&h&&h(f)}var f=[],A=0,m=s.length;if(!m){h&&h(f);return}s.forEach(function(y,b){y&&y.source?new e.Pattern(y,function(x){f[b]=x,g()}):(f[b]=y,g())})},groupSVGElements:function(s,h,g){var f;return s&&s.length===1?(typeof g<"u"&&(s[0].sourcePath=g),s[0]):(h&&(h.width&&h.height?h.centerPoint={x:h.width/2,y:h.height/2}:(delete h.width,delete h.height)),f=new e.Group(s,h),typeof g<"u"&&(f.sourcePath=g),f)},populateWithProperties:function(s,h,g){if(g&&Array.isArray(g))for(var f=0,A=g.length;f<A;f++)g[f]in s&&(h[g[f]]=s[g[f]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(s){var h=e.util.createCanvasElement();return h.width=s.width,h.height=s.height,h.getContext("2d").drawImage(s,0,0),h},toDataURL:function(s,h,g){return s.toDataURL("image/"+h,g)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(s,h,g){return[s[0]*h[0]+s[2]*h[1],s[1]*h[0]+s[3]*h[1],s[0]*h[2]+s[2]*h[3],s[1]*h[2]+s[3]*h[3],g?0:s[0]*h[4]+s[2]*h[5]+s[4],g?0:s[1]*h[4]+s[3]*h[5]+s[5]]},qrDecompose:function(s){var h=d(s[1],s[0]),g=u(s[0],2)+u(s[1],2),f=r(g),A=(s[0]*s[3]-s[2]*s[1])/f,m=d(s[0]*s[2]+s[1]*s[3],g);return{angle:h/a,scaleX:f,scaleY:A,skewX:m/a,skewY:0,translateX:s[4],translateY:s[5]}},calcRotateMatrix:function(s){if(!s.angle)return e.iMatrix.concat();var h=e.util.degreesToRadians(s.angle),g=e.util.cos(h),f=e.util.sin(h);return[g,f,-f,g,0,0]},calcDimensionsMatrix:function(s){var h=typeof s.scaleX>"u"?1:s.scaleX,g=typeof s.scaleY>"u"?1:s.scaleY,f=[s.flipX?-h:h,0,0,s.flipY?-g:g,0,0],A=e.util.multiplyTransformMatrices,m=e.util.degreesToRadians;return s.skewX&&(f=A(f,[1,0,Math.tan(m(s.skewX)),1],!0)),s.skewY&&(f=A(f,[1,Math.tan(m(s.skewY)),0,1],!0)),f},composeMatrix:function(s){var h=[1,0,0,1,s.translateX||0,s.translateY||0],g=e.util.multiplyTransformMatrices;return s.angle&&(h=g(h,e.util.calcRotateMatrix(s))),(s.scaleX!==1||s.scaleY!==1||s.skewX||s.skewY||s.flipX||s.flipY)&&(h=g(h,e.util.calcDimensionsMatrix(s))),h},resetObjectTransform:function(s){s.scaleX=1,s.scaleY=1,s.skewX=0,s.skewY=0,s.flipX=!1,s.flipY=!1,s.rotate(0)},saveObjectTransform:function(s){return{scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,angle:s.angle,left:s.left,flipX:s.flipX,flipY:s.flipY,top:s.top}},isTransparent:function(s,h,g,f){f>0&&(h>f?h-=f:h=0,g>f?g-=f:g=0);var A=!0,m,y,b=s.getImageData(h,g,f*2||1,f*2||1),x=b.data.length;for(m=3;m<x&&(y=b.data[m],A=y<=0,A!==!1);m+=4);return b=null,A},parsePreserveAspectRatioAttribute:function(s){var h="meet",g="Mid",f="Mid",A=s.split(" "),m;return A&&A.length&&(h=A.pop(),h!=="meet"&&h!=="slice"?(m=h,h="meet"):A.length&&(m=A.pop())),g=m!=="none"?m.slice(1,4):"none",f=m!=="none"?m.slice(5,8):"none",{meetOrSlice:h,alignX:g,alignY:f}},clearFabricFontCache:function(s){s=(s||"").toLowerCase(),s?e.charWidthsCache[s]&&delete e.charWidthsCache[s]:e.charWidthsCache={}},limitDimsByArea:function(s,h){var g=Math.sqrt(h*s),f=Math.floor(h/g);return{x:Math.floor(g),y:f}},capValue:function(s,h,g){return Math.max(s,Math.min(h,g))},findScaleToFit:function(s,h){return Math.min(h.width/s.width,h.height/s.height)},findScaleToCover:function(s,h){return Math.max(h.width/s.width,h.height/s.height)},matrixToSVG:function(s){return"matrix("+s.map(function(h){return e.util.toFixed(h,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(s,h){var g=e.util.invertTransform(h),f=e.util.multiplyTransformMatrices(g,s.calcOwnMatrix());e.util.applyTransformToObject(s,f)},addTransformToObject:function(s,h){e.util.applyTransformToObject(s,e.util.multiplyTransformMatrices(h,s.calcOwnMatrix()))},applyTransformToObject:function(s,h){var g=e.util.qrDecompose(h),f=new e.Point(g.translateX,g.translateY);s.flipX=!1,s.flipY=!1,s.set("scaleX",g.scaleX),s.set("scaleY",g.scaleY),s.skewX=g.skewX,s.skewY=g.skewY,s.angle=g.angle,s.setPositionByOrigin(f,"center","center")},sizeAfterTransform:function(s,h,g){var f=s/2,A=h/2,m=[{x:-f,y:-A},{x:f,y:-A},{x:-f,y:A},{x:f,y:A}],y=e.util.calcDimensionsMatrix(g),b=e.util.makeBoundingBoxFromPoints(m,y);return{x:b.width,y:b.height}},mergeClipPaths:function(s,h){var g=s,f=h;g.inverted&&!f.inverted&&(g=h,f=s),e.util.applyTransformToObject(f,e.util.multiplyTransformMatrices(e.util.invertTransform(g.calcTransformMatrix()),f.calcTransformMatrix()));var A=g.inverted&&f.inverted;return A&&(g.inverted=f.inverted=!1),new e.Group([g],{clipPath:f,inverted:A})},hasStyleChanged:function(s,h,g){return g=g||!1,s.fill!==h.fill||s.stroke!==h.stroke||s.strokeWidth!==h.strokeWidth||s.fontSize!==h.fontSize||s.fontFamily!==h.fontFamily||s.fontWeight!==h.fontWeight||s.fontStyle!==h.fontStyle||s.textBackgroundColor!==h.textBackgroundColor||s.deltaY!==h.deltaY||g&&(s.overline!==h.overline||s.underline!==h.underline||s.linethrough!==h.linethrough)},stylesToArray:function(s,h){for(var s=e.util.object.clone(s,!0),g=h.split(`
`),f=-1,A={},m=[],y=0;y<g.length;y++){if(!s[y]){f+=g[y].length;continue}for(var b=0;b<g[y].length;b++){f++;var x=s[y][b];if(x&&Object.keys(x).length>0){var S=e.util.hasStyleChanged(A,x,!0);S?m.push({start:f,end:f+1,style:x}):m[m.length-1].end++}A=x||{}}}return m},stylesFromArray:function(s,h){if(!Array.isArray(s))return s;for(var g=h.split(`
`),f=-1,A=0,m={},y=0;y<g.length;y++)for(var b=0;b<g[y].length;b++)f++,s[A]&&s[A].start<=f&&f<s[A].end&&(m[y]=m[y]||{},m[y][b]=Object.assign({},s[A].style),f===s[A].end-1&&A++);return m}}}(t),function(){var c=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},d={m:"l",M:"L"};function u(E,k,L,B,Q,w,_,I,D,H,V){var Y=e.util.cos(E),z=e.util.sin(E),X=e.util.cos(k),N=e.util.sin(k),j=L*Q*X-B*w*N+_,q=B*Q*X+L*w*N+I,te=H+D*(-L*Q*z-B*w*Y),oe=V+D*(-B*Q*z+L*w*Y),ie=j+D*(L*Q*N+B*w*X),fe=q+D*(B*Q*N-L*w*X);return["C",te,oe,ie,fe,j,q]}function a(E,k,L,B,Q,w,_){var I=Math.PI,D=_*I/180,H=e.util.sin(D),V=e.util.cos(D),Y=0,z=0;L=Math.abs(L),B=Math.abs(B);var X=-V*E*.5-H*k*.5,N=-V*k*.5+H*E*.5,j=L*L,q=B*B,te=N*N,oe=X*X,ie=j*q-j*te-q*oe,fe=0;if(ie<0){var Ae=Math.sqrt(1-ie/(j*q));L*=Ae,B*=Ae}else fe=(Q===w?-1:1)*Math.sqrt(ie/(j*te+q*oe));var me=fe*L*N/B,he=-fe*B*X/L,ye=V*me-H*he+E*.5,xe=H*me+V*he+k*.5,Ee=l(1,0,(X-me)/L,(N-he)/B),ke=l((X-me)/L,(N-he)/B,(-X-me)/L,(-N-he)/B);w===0&&ke>0?ke-=2*I:w===1&&ke<0&&(ke+=2*I);for(var Fe=Math.ceil(Math.abs(ke/I*2)),Xe=[],Oe=ke/Fe,ct=8/3*Math.sin(Oe/4)*Math.sin(Oe/4)/Math.sin(Oe/2),Ke=Ee+Oe,nt=0;nt<Fe;nt++)Xe[nt]=u(Ee,Ke,V,H,L,B,ye,xe,ct,Y,z),Y=Xe[nt][5],z=Xe[nt][6],Ee=Ke,Ke+=Oe;return Xe}function l(E,k,L,B){var Q=Math.atan2(k,E),w=Math.atan2(B,L);return w>=Q?w-Q:2*Math.PI-(Q-w)}function s(E,k,L,B,Q,w,_,I){var D;if(e.cachesBoundsOfCurve&&(D=c.call(arguments),e.boundsOfCurveCache[D]))return e.boundsOfCurveCache[D];var H=Math.sqrt,V=Math.min,Y=Math.max,z=Math.abs,X=[],N=[[],[]],j,q,te,oe,ie,fe,Ae,me;q=6*E-12*L+6*Q,j=-3*E+9*L-9*Q+3*_,te=3*L-3*E;for(var he=0;he<2;++he){if(he>0&&(q=6*k-12*B+6*w,j=-3*k+9*B-9*w+3*I,te=3*B-3*k),z(j)<1e-12){if(z(q)<1e-12)continue;oe=-te/q,0<oe&&oe<1&&X.push(oe);continue}Ae=q*q-4*te*j,!(Ae<0)&&(me=H(Ae),ie=(-q+me)/(2*j),0<ie&&ie<1&&X.push(ie),fe=(-q-me)/(2*j),0<fe&&fe<1&&X.push(fe))}for(var ye,xe,Ee=X.length,ke=Ee,Fe;Ee--;)oe=X[Ee],Fe=1-oe,ye=Fe*Fe*Fe*E+3*Fe*Fe*oe*L+3*Fe*oe*oe*Q+oe*oe*oe*_,N[0][Ee]=ye,xe=Fe*Fe*Fe*k+3*Fe*Fe*oe*B+3*Fe*oe*oe*w+oe*oe*oe*I,N[1][Ee]=xe;N[0][ke]=E,N[1][ke]=k,N[0][ke+1]=_,N[1][ke+1]=I;var Xe=[{x:V.apply(null,N[0]),y:V.apply(null,N[1])},{x:Y.apply(null,N[0]),y:Y.apply(null,N[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[D]=Xe),Xe}function h(E,k,L){for(var B=L[1],Q=L[2],w=L[3],_=L[4],I=L[5],D=L[6],H=L[7],V=a(D-E,H-k,B,Q,_,I,w),Y=0,z=V.length;Y<z;Y++)V[Y][1]+=E,V[Y][2]+=k,V[Y][3]+=E,V[Y][4]+=k,V[Y][5]+=E,V[Y][6]+=k;return V}function g(E){var k=0,L=0,B=E.length,Q=0,w=0,_,I,D,H=[],V,Y,z;for(I=0;I<B;++I){switch(D=!1,_=E[I].slice(0),_[0]){case"l":_[0]="L",_[1]+=k,_[2]+=L;case"L":k=_[1],L=_[2];break;case"h":_[1]+=k;case"H":_[0]="L",_[2]=L,k=_[1];break;case"v":_[1]+=L;case"V":_[0]="L",L=_[1],_[1]=k,_[2]=L;break;case"m":_[0]="M",_[1]+=k,_[2]+=L;case"M":k=_[1],L=_[2],Q=_[1],w=_[2];break;case"c":_[0]="C",_[1]+=k,_[2]+=L,_[3]+=k,_[4]+=L,_[5]+=k,_[6]+=L;case"C":Y=_[3],z=_[4],k=_[5],L=_[6];break;case"s":_[0]="S",_[1]+=k,_[2]+=L,_[3]+=k,_[4]+=L;case"S":V==="C"?(Y=2*k-Y,z=2*L-z):(Y=k,z=L),k=_[3],L=_[4],_[0]="C",_[5]=_[3],_[6]=_[4],_[3]=_[1],_[4]=_[2],_[1]=Y,_[2]=z,Y=_[3],z=_[4];break;case"q":_[0]="Q",_[1]+=k,_[2]+=L,_[3]+=k,_[4]+=L;case"Q":Y=_[1],z=_[2],k=_[3],L=_[4];break;case"t":_[0]="T",_[1]+=k,_[2]+=L;case"T":V==="Q"?(Y=2*k-Y,z=2*L-z):(Y=k,z=L),_[0]="Q",k=_[1],L=_[2],_[1]=Y,_[2]=z,_[3]=k,_[4]=L;break;case"a":_[0]="A",_[6]+=k,_[7]+=L;case"A":D=!0,H=H.concat(h(k,L,_)),k=_[6],L=_[7];break;case"z":case"Z":k=Q,L=w;break}D||H.push(_),V=_[0]}return H}function f(E,k,L,B){return Math.sqrt((L-E)*(L-E)+(B-k)*(B-k))}function A(E){return E*E*E}function m(E){return 3*E*E*(1-E)}function y(E){return 3*E*(1-E)*(1-E)}function b(E){return(1-E)*(1-E)*(1-E)}function x(E,k,L,B,Q,w,_,I){return function(D){var H=A(D),V=m(D),Y=y(D),z=b(D);return{x:_*H+Q*V+L*Y+E*z,y:I*H+w*V+B*Y+k*z}}}function S(E,k,L,B,Q,w,_,I){return function(D){var H=1-D,V=3*H*H*(L-E)+6*H*D*(Q-L)+3*D*D*(_-Q),Y=3*H*H*(B-k)+6*H*D*(w-B)+3*D*D*(I-w);return Math.atan2(Y,V)}}function O(E){return E*E}function R(E){return 2*E*(1-E)}function Z(E){return(1-E)*(1-E)}function ee(E,k,L,B,Q,w){return function(_){var I=O(_),D=R(_),H=Z(_);return{x:Q*I+L*D+E*H,y:w*I+B*D+k*H}}}function re(E,k,L,B,Q,w){return function(_){var I=1-_,D=2*I*(L-E)+2*_*(Q-L),H=2*I*(B-k)+2*_*(w-B);return Math.atan2(H,D)}}function ae(E,k,L){var B={x:k,y:L},Q,w=0,_;for(_=1;_<=100;_+=1)Q=E(_/100),w+=f(B.x,B.y,Q.x,Q.y),B=Q;return w}function ne(E,k){for(var L=0,B=0,Q=E.iterator,w={x:E.x,y:E.y},_,I,D=.01,H=E.angleFinder,V;B<k&&D>1e-4;)_=Q(L),V=L,I=f(w.x,w.y,_.x,_.y),I+B>k?(L-=D,D/=2):(w=_,L+=D,B+=I);return _.angle=H(V),_}function J(E){for(var k=0,L=E.length,B,Q=0,w=0,_=0,I=0,D=[],H,V,Y,z=0;z<L;z++){switch(B=E[z],V={x:Q,y:w,command:B[0]},B[0]){case"M":V.length=0,_=Q=B[1],I=w=B[2];break;case"L":V.length=f(Q,w,B[1],B[2]),Q=B[1],w=B[2];break;case"C":H=x(Q,w,B[1],B[2],B[3],B[4],B[5],B[6]),Y=S(Q,w,B[1],B[2],B[3],B[4],B[5],B[6]),V.iterator=H,V.angleFinder=Y,V.length=ae(H,Q,w),Q=B[5],w=B[6];break;case"Q":H=ee(Q,w,B[1],B[2],B[3],B[4]),Y=re(Q,w,B[1],B[2],B[3],B[4]),V.iterator=H,V.angleFinder=Y,V.length=ae(H,Q,w),Q=B[3],w=B[4];break;case"Z":case"z":V.destX=_,V.destY=I,V.length=f(Q,w,_,I),Q=_,w=I;break}k+=V.length,D.push(V)}return D.push({length:k,x:Q,y:w}),D}function P(E,k,L){L||(L=J(E));for(var B=0;k-L[B].length>0&&B<L.length-2;)k-=L[B].length,B++;var Q=L[B],w=k/Q.length,_=Q.command,I=E[B],D;switch(_){case"M":return{x:Q.x,y:Q.y,angle:0};case"Z":case"z":return D=new e.Point(Q.x,Q.y).lerp(new e.Point(Q.destX,Q.destY),w),D.angle=Math.atan2(Q.destY-Q.y,Q.destX-Q.x),D;case"L":return D=new e.Point(Q.x,Q.y).lerp(new e.Point(I[1],I[2]),w),D.angle=Math.atan2(I[2]-Q.y,I[1]-Q.x),D;case"C":return ne(Q,k);case"Q":return ne(Q,k)}}function U(E){var k=[],L=[],B,Q,w=e.rePathCommand,_="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",I="("+_+")"+e.commaWsp,D="([01])"+e.commaWsp+"?",H=I+"?"+I+"?"+I+D+D+I+"?("+_+")",V=new RegExp(H,"g"),Y,z,X;if(!E||!E.match)return k;X=E.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var N=0,j,q=X.length;N<q;N++){B=X[N],z=B.slice(1).trim(),L.length=0;var te=B.charAt(0);if(j=[te],te.toLowerCase()==="a")for(var oe;oe=V.exec(z);)for(var ie=1;ie<oe.length;ie++)L.push(oe[ie]);else for(;Y=w.exec(z);)L.push(Y[0]);for(var ie=0,fe=L.length;ie<fe;ie++)Q=parseFloat(L[ie]),isNaN(Q)||j.push(Q);var Ae=r[te.toLowerCase()],me=d[te]||te;if(j.length-1>Ae)for(var he=1,ye=j.length;he<ye;he+=Ae)k.push([te].concat(j.slice(he,he+Ae))),te=me;else k.push(j)}return k}function W(E,k){var L=[],B,Q=new e.Point(E[0].x,E[0].y),w=new e.Point(E[1].x,E[1].y),_=E.length,I=1,D=0,H=_>2;for(k=k||0,H&&(I=E[2].x<w.x?-1:E[2].x===w.x?0:1,D=E[2].y<w.y?-1:E[2].y===w.y?0:1),L.push(["M",Q.x-I*k,Q.y-D*k]),B=1;B<_;B++){if(!Q.eq(w)){var V=Q.midPointFrom(w);L.push(["Q",Q.x,Q.y,V.x,V.y])}Q=E[B],B+1<E.length&&(w=E[B+1])}return H&&(I=Q.x>E[B-2].x?1:Q.x===E[B-2].x?0:-1,D=Q.y>E[B-2].y?1:Q.y===E[B-2].y?0:-1),L.push(["L",Q.x+I*k,Q.y+D*k]),L}function F(E,k,L){return L&&(k=e.util.multiplyTransformMatrices(k,[1,0,0,1,-L.x,-L.y])),E.map(function(B){for(var Q=B.slice(0),w={},_=1;_<B.length-1;_+=2)w.x=B[_],w.y=B[_+1],w=e.util.transformPoint(w,k),Q[_]=w.x,Q[_+1]=w.y;return Q})}e.util.joinPath=function(E){return E.map(function(k){return k.join(" ")}).join(" ")},e.util.parsePath=U,e.util.makePathSimpler=g,e.util.getSmoothPathFromPoints=W,e.util.getPathSegmentsInfo=J,e.util.getBoundsOfCurve=s,e.util.getPointOnPath=P,e.util.transformPath=F}(),function(){var c=Array.prototype.slice;function r(s,h){for(var g=c.call(arguments,2),f=[],A=0,m=s.length;A<m;A++)f[A]=g.length?s[A][h].apply(s[A],g):s[A][h].call(s[A]);return f}function d(s,h){return l(s,h,function(g,f){return g>=f})}function u(s,h){return l(s,h,function(g,f){return g<f})}function a(s,h){for(var g=s.length;g--;)s[g]=h;return s}function l(s,h,g){if(!(!s||s.length===0)){var f=s.length-1,A=h?s[f][h]:s[f];if(h)for(;f--;)g(s[f][h],A)&&(A=s[f][h]);else for(;f--;)g(s[f],A)&&(A=s[f]);return A}}e.util.array={fill:a,invoke:r,min:u,max:d}}(),function(){function c(d,u,a){if(a)if(!e.isLikelyNode&&u instanceof Element)d=u;else if(u instanceof Array){d=[];for(var l=0,s=u.length;l<s;l++)d[l]=c({},u[l],a)}else if(u&&typeof u=="object")for(var h in u)h==="canvas"||h==="group"?d[h]=null:u.hasOwnProperty(h)&&(d[h]=c({},u[h],a));else d=u;else for(var h in u)d[h]=u[h];return d}function r(d,u){return c({},d,u)}e.util.object={extend:c,clone:r},e.util.object.extend(e.util,e.Observable)}(),function(){function c(l){return l.replace(/-+(.)?/g,function(s,h){return h?h.toUpperCase():""})}function r(l,s){return l.charAt(0).toUpperCase()+(s?l.slice(1):l.slice(1).toLowerCase())}function d(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(l){var s=0,h,g=[];for(s=0,h;s<l.length;s++)(h=a(l,s))!==!1&&g.push(h);return g}function a(l,s){var h=l.charCodeAt(s);if(isNaN(h))return"";if(h<55296||h>57343)return l.charAt(s);if(55296<=h&&h<=56319){if(l.length<=s+1)throw"High surrogate without following low surrogate";var g=l.charCodeAt(s+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return l.charAt(s)+l.charAt(s+1)}if(s===0)throw"Low surrogate without preceding high surrogate";var f=l.charCodeAt(s-1);if(55296>f||f>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:c,capitalize:r,escapeXml:d,graphemeSplit:u}}(),function(){var c=Array.prototype.slice,r=function(){},d=function(){for(var h in{toString:1})if(h==="toString")return!1;return!0}(),u=function(h,g,f){for(var A in g)A in h.prototype&&typeof h.prototype[A]=="function"&&(g[A]+"").indexOf("callSuper")>-1?h.prototype[A]=function(m){return function(){var y=this.constructor.superclass;this.constructor.superclass=f;var b=g[m].apply(this,arguments);if(this.constructor.superclass=y,m!=="initialize")return b}}(A):h.prototype[A]=g[A],d&&(g.toString!==Object.prototype.toString&&(h.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(h.prototype.valueOf=g.valueOf))};function a(){}function l(h){for(var g=null,f=this;f.constructor.superclass;){var A=f.constructor.superclass.prototype[h];if(f[h]!==A){g=A;break}f=f.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,c.call(arguments,1)):g.call(this):console.log("tried to callSuper "+h+", method not found in prototype chain",this)}function s(){var h=null,g=c.call(arguments,0);typeof g[0]=="function"&&(h=g.shift());function f(){this.initialize.apply(this,arguments)}f.superclass=h,f.subclasses=[],h&&(a.prototype=h.prototype,f.prototype=new a,h.subclasses.push(f));for(var A=0,m=g.length;A<m;A++)u(f,g[A],h);return f.prototype.initialize||(f.prototype.initialize=r),f.prototype.constructor=f,f.prototype.callSuper=l,f}e.util.createClass=s}(),function(){var c=!!e.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];e.util.addListener=function(u,a,l,s){u&&u.addEventListener(a,l,c?!1:s)},e.util.removeListener=function(u,a,l,s){u&&u.removeEventListener(a,l,c?!1:s)};function d(u){var a=u.changedTouches;return a&&a[0]?a[0]:u}e.util.getPointer=function(u){var a=u.target,l=e.util.getScrollLeftTop(a),s=d(u);return{x:s.clientX+l.left,y:s.clientY+l.top}},e.util.isTouchEvent=function(u){return r.indexOf(u.type)>-1||u.pointerType==="touch"}}(),function(){function c(s,h){var g=s.style;if(!g)return s;if(typeof h=="string")return s.style.cssText+=";"+h,h.indexOf("opacity")>-1?l(s,h.match(/opacity:\s*(\d?\.?\d*)/)[1]):s;for(var f in h)if(f==="opacity")l(s,h[f]);else{var A=f==="float"||f==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":f;g.setProperty(A,h[f])}return s}var r=e.document.createElement("div"),d=typeof r.style.opacity=="string",u=typeof r.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(s){return s};d?l=function(s,h){return s.style.opacity=h,s}:u&&(l=function(s,h){var g=s.style;return s.currentStyle&&!s.currentStyle.hasLayout&&(g.zoom=1),a.test(g.filter)?(h=h>=.9999?"":"alpha(opacity="+h*100+")",g.filter=g.filter.replace(a,h)):g.filter+=" alpha(opacity="+h*100+")",s}),e.util.setStyle=c}(),function(){var c=Array.prototype.slice;function r(b){return typeof b=="string"?e.document.getElementById(b):b}var d,u=function(b){return c.call(b,0)};try{d=u(e.document.childNodes)instanceof Array}catch(b){}d||(u=function(b){for(var x=new Array(b.length),S=b.length;S--;)x[S]=b[S];return x});function a(b,x){var S=e.document.createElement(b);for(var O in x)O==="class"?S.className=x[O]:O==="for"?S.htmlFor=x[O]:S.setAttribute(O,x[O]);return S}function l(b,x){b&&(" "+b.className+" ").indexOf(" "+x+" ")===-1&&(b.className+=(b.className?" ":"")+x)}function s(b,x,S){return typeof x=="string"&&(x=a(x,S)),b.parentNode&&b.parentNode.replaceChild(x,b),x.appendChild(b),x}function h(b){for(var x=0,S=0,O=e.document.documentElement,R=e.document.body||{scrollLeft:0,scrollTop:0};b&&(b.parentNode||b.host)&&(b=b.parentNode||b.host,b===e.document?(x=R.scrollLeft||O.scrollLeft||0,S=R.scrollTop||O.scrollTop||0):(x+=b.scrollLeft||0,S+=b.scrollTop||0),!(b.nodeType===1&&b.style.position==="fixed")););return{left:x,top:S}}function g(b){var x,S=b&&b.ownerDocument,O={left:0,top:0},R={left:0,top:0},Z,ee={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return R;for(var re in ee)R[ee[re]]+=parseInt(f(b,re),10)||0;return x=S.documentElement,typeof b.getBoundingClientRect<"u"&&(O=b.getBoundingClientRect()),Z=h(b),{left:O.left+Z.left-(x.clientLeft||0)+R.left,top:O.top+Z.top-(x.clientTop||0)+R.top}}var f;e.document.defaultView&&e.document.defaultView.getComputedStyle?f=function(b,x){var S=e.document.defaultView.getComputedStyle(b,null);return S?S[x]:void 0}:f=function(b,x){var S=b.style[x];return!S&&b.currentStyle&&(S=b.currentStyle[x]),S},function(){var b=e.document.documentElement.style,x="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";function S(R){return typeof R.onselectstart<"u"&&(R.onselectstart=e.util.falseFunction),x?R.style[x]="none":typeof R.unselectable=="string"&&(R.unselectable="on"),R}function O(R){return typeof R.onselectstart<"u"&&(R.onselectstart=null),x?R.style[x]="":typeof R.unselectable=="string"&&(R.unselectable=""),R}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=O}();function A(b){var x=e.jsdomImplForWrapper(b);return x._canvas||x._image}function m(b){if(e.isLikelyNode){var x=e.jsdomImplForWrapper(b);x&&(x._image=null,x._canvas=null,x._currentSrc=null,x._attributes=null,x._classList=null)}}function y(b,x){b.imageSmoothingEnabled=b.imageSmoothingEnabled||b.webkitImageSmoothingEnabled||b.mozImageSmoothingEnabled||b.msImageSmoothingEnabled||b.oImageSmoothingEnabled,b.imageSmoothingEnabled=x}e.util.setImageSmoothing=y,e.util.getById=r,e.util.toArray=u,e.util.addClass=l,e.util.makeElement=a,e.util.wrapElement=s,e.util.getScrollLeftTop=h,e.util.getElementOffset=g,e.util.getNodeCanvas=A,e.util.cleanUpJsdomNode=m}(),function(){function c(u,a){return u+(/\?/.test(u)?"&":"?")+a}function r(){}function d(u,a){a||(a={});var l=a.method?a.method.toUpperCase():"GET",s=a.onComplete||function(){},h=new e.window.XMLHttpRequest,g=a.body||a.parameters;return h.onreadystatechange=function(){h.readyState===4&&(s(h),h.onreadystatechange=r)},l==="GET"&&(g=null,typeof a.parameters=="string"&&(u=c(u,a.parameters))),h.open(l,u,!0),(l==="POST"||l==="PUT")&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),h.send(g),h}e.util.request=d}(),e.log=console.log,e.warn=console.warn,function(){var c=e.util.object.extend,r=e.util.object.clone,d=[];e.util.object.extend(d,{cancelAll:function(){var A=this.splice(0);return A.forEach(function(m){m.cancel()}),A},cancelByCanvas:function(A){if(!A)return[];var m=this.filter(function(y){return typeof y.target=="object"&&y.target.canvas===A});return m.forEach(function(y){y.cancel()}),m},cancelByTarget:function(A){var m=this.findAnimationsByTarget(A);return m.forEach(function(y){y.cancel()}),m},findAnimationIndex:function(A){return this.indexOf(this.findAnimation(A))},findAnimation:function(A){return this.find(function(m){return m.cancel===A})},findAnimationsByTarget:function(A){return A?this.filter(function(m){return m.target===A}):[]}});function u(){return!1}function a(A,m,y,b){return-y*Math.cos(A/b*(Math.PI/2))+y+m}function l(A){A||(A={});var m=!1,y,b=function(){var x=e.runningAnimations.indexOf(y);return x>-1&&e.runningAnimations.splice(x,1)[0]};return y=c(r(A),{cancel:function(){return m=!0,b()},currentValue:"startValue"in A?A.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(y),g(function(x){var S=x||+new Date,O=A.duration||500,R=S+O,Z,ee=A.onChange||u,re=A.abort||u,ae=A.onComplete||u,ne=A.easing||a,J="startValue"in A?A.startValue.length>0:!1,P="startValue"in A?A.startValue:0,U="endValue"in A?A.endValue:100,W=A.byValue||(J?P.map(function(F,E){return U[E]-P[E]}):U-P);A.onStart&&A.onStart(),function F(E){Z=E||+new Date;var k=Z>R?O:Z-S,L=k/O,B=J?P.map(function(w,_){return ne(k,P[_],W[_],O)}):ne(k,P,W,O),Q=Math.abs(J?(B[0]-P[0])/W[0]:(B-P)/W);if(y.currentValue=J?B.slice():B,y.completionRate=Q,y.durationRate=L,!m){if(re(B,Q,L)){b();return}if(Z>R){y.currentValue=J?U.slice():U,y.completionRate=1,y.durationRate=1,ee(J?U.slice():U,1,1),ae(U,1,1),b();return}else ee(B,Q,L),g(F)}}(S)}),y.cancel}var s=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(A){return e.window.setTimeout(A,1e3/60)},h=e.window.cancelAnimationFrame||e.window.clearTimeout;function g(){return s.apply(e.window,arguments)}function f(){return h.apply(e.window,arguments)}e.util.animate=l,e.util.requestAnimFrame=g,e.util.cancelAnimFrame=f,e.runningAnimations=d}(),function(){function c(d,u,a){var l="rgba("+parseInt(d[0]+a*(u[0]-d[0]),10)+","+parseInt(d[1]+a*(u[1]-d[1]),10)+","+parseInt(d[2]+a*(u[2]-d[2]),10);return l+=","+(d&&u?parseFloat(d[3]+a*(u[3]-d[3])):1),l+=")",l}function r(d,u,a,l){var s=new e.Color(d).getSource(),h=new e.Color(u).getSource(),g=l.onComplete,f=l.onChange;return l=l||{},e.util.animate(e.util.object.extend(l,{duration:a||500,startValue:s,endValue:h,byValue:h,easing:function(A,m,y,b){var x=l.colorEasing?l.colorEasing(A,b):1-Math.cos(A/b*(Math.PI/2));return c(m,y,x)},onComplete:function(A,m,y){if(g)return g(c(h,h,0),m,y)},onChange:function(A,m,y){if(f){if(Array.isArray(A))return f(c(A,A,0),m,y);f(A,m,y)}}}))}e.util.animateColor=r}(),function(){function c(E,k,L,B){return E<Math.abs(k)?(E=k,B=L/4):k===0&&E===0?B=L/(2*Math.PI)*Math.asin(1):B=L/(2*Math.PI)*Math.asin(k/E),{a:E,c:k,p:L,s:B}}function r(E,k,L){return E.a*Math.pow(2,10*(k-=1))*Math.sin((k*L-E.s)*(2*Math.PI)/E.p)}function d(E,k,L,B){return L*((E=E/B-1)*E*E+1)+k}function u(E,k,L,B){return E/=B/2,E<1?L/2*E*E*E+k:L/2*((E-=2)*E*E+2)+k}function a(E,k,L,B){return L*(E/=B)*E*E*E+k}function l(E,k,L,B){return-L*((E=E/B-1)*E*E*E-1)+k}function s(E,k,L,B){return E/=B/2,E<1?L/2*E*E*E*E+k:-L/2*((E-=2)*E*E*E-2)+k}function h(E,k,L,B){return L*(E/=B)*E*E*E*E+k}function g(E,k,L,B){return L*((E=E/B-1)*E*E*E*E+1)+k}function f(E,k,L,B){return E/=B/2,E<1?L/2*E*E*E*E*E+k:L/2*((E-=2)*E*E*E*E+2)+k}function A(E,k,L,B){return-L*Math.cos(E/B*(Math.PI/2))+L+k}function m(E,k,L,B){return L*Math.sin(E/B*(Math.PI/2))+k}function y(E,k,L,B){return-L/2*(Math.cos(Math.PI*E/B)-1)+k}function b(E,k,L,B){return E===0?k:L*Math.pow(2,10*(E/B-1))+k}function x(E,k,L,B){return E===B?k+L:L*(-Math.pow(2,-10*E/B)+1)+k}function S(E,k,L,B){return E===0?k:E===B?k+L:(E/=B/2,E<1?L/2*Math.pow(2,10*(E-1))+k:L/2*(-Math.pow(2,-10*--E)+2)+k)}function O(E,k,L,B){return-L*(Math.sqrt(1-(E/=B)*E)-1)+k}function R(E,k,L,B){return L*Math.sqrt(1-(E=E/B-1)*E)+k}function Z(E,k,L,B){return E/=B/2,E<1?-L/2*(Math.sqrt(1-E*E)-1)+k:L/2*(Math.sqrt(1-(E-=2)*E)+1)+k}function ee(E,k,L,B){var Q=1.70158,w=0,_=L;if(E===0)return k;if(E/=B,E===1)return k+L;w||(w=B*.3);var I=c(_,L,w,Q);return-r(I,E,B)+k}function re(E,k,L,B){var Q=1.70158,w=0,_=L;if(E===0)return k;if(E/=B,E===1)return k+L;w||(w=B*.3);var I=c(_,L,w,Q);return I.a*Math.pow(2,-10*E)*Math.sin((E*B-I.s)*(2*Math.PI)/I.p)+I.c+k}function ae(E,k,L,B){var Q=1.70158,w=0,_=L;if(E===0)return k;if(E/=B/2,E===2)return k+L;w||(w=B*(.3*1.5));var I=c(_,L,w,Q);return E<1?-.5*r(I,E,B)+k:I.a*Math.pow(2,-10*(E-=1))*Math.sin((E*B-I.s)*(2*Math.PI)/I.p)*.5+I.c+k}function ne(E,k,L,B,Q){return Q===void 0&&(Q=1.70158),L*(E/=B)*E*((Q+1)*E-Q)+k}function J(E,k,L,B,Q){return Q===void 0&&(Q=1.70158),L*((E=E/B-1)*E*((Q+1)*E+Q)+1)+k}function P(E,k,L,B,Q){return Q===void 0&&(Q=1.70158),E/=B/2,E<1?L/2*(E*E*(((Q*=1.525)+1)*E-Q))+k:L/2*((E-=2)*E*(((Q*=1.525)+1)*E+Q)+2)+k}function U(E,k,L,B){return L-W(B-E,0,L,B)+k}function W(E,k,L,B){return(E/=B)<1/2.75?L*(7.5625*E*E)+k:E<2/2.75?L*(7.5625*(E-=1.5/2.75)*E+.75)+k:E<2.5/2.75?L*(7.5625*(E-=2.25/2.75)*E+.9375)+k:L*(7.5625*(E-=2.625/2.75)*E+.984375)+k}function F(E,k,L,B){return E<B/2?U(E*2,0,L,B)*.5+k:W(E*2-B,0,L,B)*.5+L*.5+k}e.util.ease={easeInQuad:function(E,k,L,B){return L*(E/=B)*E+k},easeOutQuad:function(E,k,L,B){return-L*(E/=B)*(E-2)+k},easeInOutQuad:function(E,k,L,B){return E/=B/2,E<1?L/2*E*E+k:-L/2*(--E*(E-2)-1)+k},easeInCubic:function(E,k,L,B){return L*(E/=B)*E*E+k},easeOutCubic:d,easeInOutCubic:u,easeInQuart:a,easeOutQuart:l,easeInOutQuart:s,easeInQuint:h,easeOutQuint:g,easeInOutQuint:f,easeInSine:A,easeOutSine:m,easeInOutSine:y,easeInExpo:b,easeOutExpo:x,easeInOutExpo:S,easeInCirc:O,easeOutCirc:R,easeInOutCirc:Z,easeInElastic:ee,easeOutElastic:re,easeInOutElastic:ae,easeInBack:ne,easeOutBack:J,easeInOutBack:P,easeInBounce:U,easeOutBounce:W,easeInOutBounce:F}}(),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.util.object.clone,a=r.util.toFixed,l=r.util.parseUnit,s=r.util.multiplyTransformMatrices,h=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],f=["pattern","defs","symbol","metadata","clipPath","mask","desc"],A=["symbol","g","a","svg","clipPath","defs"],m={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},y={stroke:"strokeOpacity",fill:"fillOpacity"},b="font-size",x="clip-path";r.svgValidTagNamesRegEx=R(h),r.svgViewBoxElementsRegEx=R(g),r.svgInvalidAncestorsRegEx=R(f),r.svgValidParentsRegEx=R(A),r.cssRules={},r.gradientDefs={},r.clipPaths={};function S(w){return w in m?m[w]:w}function O(w,_,I,D){var H=Array.isArray(_),V;if((w==="fill"||w==="stroke")&&_==="none")_="";else{if(w==="strokeUniform")return _==="non-scaling-stroke";if(w==="strokeDashArray")_==="none"?_=null:_=_.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(w==="transformMatrix")I&&I.transformMatrix?_=s(I.transformMatrix,r.parseTransformAttribute(_)):_=r.parseTransformAttribute(_);else if(w==="visible")_=_!=="none"&&_!=="hidden",I&&I.visible===!1&&(_=!1);else if(w==="opacity")_=parseFloat(_),I&&typeof I.opacity<"u"&&(_*=I.opacity);else if(w==="textAnchor")_=_==="start"?"left":_==="end"?"right":"center";else if(w==="charSpacing")V=l(_,D)/D*1e3;else if(w==="paintFirst"){var Y=_.indexOf("fill"),z=_.indexOf("stroke"),_="fill";(Y>-1&&z>-1&&z<Y||Y===-1&&z>-1)&&(_="stroke")}else{if(w==="href"||w==="xlink:href"||w==="font")return _;if(w==="imageSmoothing")return _==="optimizeQuality";V=H?_.map(l):l(_,D)}}return!H&&isNaN(V)?_:V}function R(w){return new RegExp("^("+w.join("|")+")\\b","i")}function Z(w){for(var _ in y)if(!(typeof w[y[_]]>"u"||w[_]==="")){if(typeof w[_]>"u"){if(!r.Object.prototype[_])continue;w[_]=r.Object.prototype[_]}if(w[_].indexOf("url(")!==0){var I=new r.Color(w[_]);w[_]=I.setAlpha(a(I.getAlpha()*w[y[_]],2)).toRgba()}}return w}function ee(w,_){var I,D=[],H,V,Y;for(V=0,Y=_.length;V<Y;V++)I=_[V],H=w.getElementsByTagName(I),D=D.concat(Array.prototype.slice.call(H));return D}r.parseTransformAttribute=function(){function w(he,ye){var xe=r.util.cos(ye[0]),Ee=r.util.sin(ye[0]),ke=0,Fe=0;ye.length===3&&(ke=ye[1],Fe=ye[2]),he[0]=xe,he[1]=Ee,he[2]=-Ee,he[3]=xe,he[4]=ke-(xe*ke-Ee*Fe),he[5]=Fe-(Ee*ke+xe*Fe)}function _(he,ye){var xe=ye[0],Ee=ye.length===2?ye[1]:ye[0];he[0]=xe,he[3]=Ee}function I(he,ye,xe){he[xe]=Math.tan(r.util.degreesToRadians(ye[0]))}function D(he,ye){he[4]=ye[0],ye.length===2&&(he[5]=ye[1])}var H=r.iMatrix,V=r.reNum,Y=r.commaWsp,z="(?:(skewX)\\s*\\(\\s*("+V+")\\s*\\))",X="(?:(skewY)\\s*\\(\\s*("+V+")\\s*\\))",N="(?:(rotate)\\s*\\(\\s*("+V+")(?:"+Y+"("+V+")"+Y+"("+V+"))?\\s*\\))",j="(?:(scale)\\s*\\(\\s*("+V+")(?:"+Y+"("+V+"))?\\s*\\))",q="(?:(translate)\\s*\\(\\s*("+V+")(?:"+Y+"("+V+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+V+")"+Y+"("+V+")"+Y+"("+V+")"+Y+"("+V+")"+Y+"("+V+")"+Y+"("+V+")\\s*\\))",oe="(?:"+te+"|"+q+"|"+j+"|"+N+"|"+z+"|"+X+")",ie="(?:"+oe+"(?:"+Y+"*"+oe+")*)",fe="^\\s*(?:"+ie+"?)\\s*$",Ae=new RegExp(fe),me=new RegExp(oe,"g");return function(he){var ye=H.concat(),xe=[];if(!he||he&&!Ae.test(he))return ye;he.replace(me,function(ke){var Fe=new RegExp(oe).exec(ke).filter(function(ct){return!!ct}),Xe=Fe[1],Oe=Fe.slice(2).map(parseFloat);switch(Xe){case"translate":D(ye,Oe);break;case"rotate":Oe[0]=r.util.degreesToRadians(Oe[0]),w(ye,Oe);break;case"scale":_(ye,Oe);break;case"skewX":I(ye,Oe,2);break;case"skewY":I(ye,Oe,1);break;case"matrix":ye=Oe;break}xe.push(ye.concat()),ye=H.concat()});for(var Ee=xe[0];xe.length>1;)xe.shift(),Ee=r.util.multiplyTransformMatrices(Ee,xe[0]);return Ee}}();function re(w,_){var I,D;w.replace(/;\s*$/,"").split(";").forEach(function(H){var V=H.split(":");I=V[0].trim().toLowerCase(),D=V[1].trim(),_[I]=D})}function ae(w,_){var I,D;for(var H in w)typeof w[H]>"u"||(I=H.toLowerCase(),D=w[H],_[I]=D)}function ne(w,_){var I={};for(var D in r.cssRules[_])if(J(w,D.split(" ")))for(var H in r.cssRules[_][D])I[H]=r.cssRules[_][D][H];return I}function J(w,_){var I,D=!0;return I=U(w,_.pop()),I&&_.length&&(D=P(w,_)),I&&D&&_.length===0}function P(w,_){for(var I,D=!0;w.parentNode&&w.parentNode.nodeType===1&&_.length;)D&&(I=_.pop()),w=w.parentNode,D=U(w,I);return _.length===0}function U(w,_){var I=w.nodeName,D=w.getAttribute("class"),H=w.getAttribute("id"),V,Y;if(V=new RegExp("^"+I,"i"),_=_.replace(V,""),H&&_.length&&(V=new RegExp("#"+H+"(?![a-zA-Z\\-]+)","i"),_=_.replace(V,"")),D&&_.length)for(D=D.split(" "),Y=D.length;Y--;)V=new RegExp("\\."+D[Y]+"(?![a-zA-Z\\-]+)","i"),_=_.replace(V,"");return _.length===0}function W(w,_){var I;if(w.getElementById&&(I=w.getElementById(_)),I)return I;var D,H,V,Y=w.getElementsByTagName("*");for(H=0,V=Y.length;H<V;H++)if(D=Y[H],_===D.getAttribute("id"))return D}function F(w){for(var _=ee(w,["use","svg:use"]),I=0;_.length&&I<_.length;){var D=_[I],H=D.getAttribute("xlink:href")||D.getAttribute("href");if(H===null)return;var V=H.slice(1),Y=D.getAttribute("x")||0,z=D.getAttribute("y")||0,X=W(w,V).cloneNode(!0),N=(X.getAttribute("transform")||"")+" translate("+Y+", "+z+")",j,q=_.length,te,oe,ie,fe,Ae=r.svgNS;if(k(X),/^svg$/i.test(X.nodeName)){var me=X.ownerDocument.createElementNS(Ae,"g");for(oe=0,ie=X.attributes,fe=ie.length;oe<fe;oe++)te=ie.item(oe),me.setAttributeNS(Ae,te.nodeName,te.nodeValue);for(;X.firstChild;)me.appendChild(X.firstChild);X=me}for(oe=0,ie=D.attributes,fe=ie.length;oe<fe;oe++)te=ie.item(oe),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?N=te.nodeValue+" "+N:X.setAttribute(te.nodeName,te.nodeValue));X.setAttribute("transform",N),X.setAttribute("instantiated_by_use","1"),X.removeAttribute("id"),j=D.parentNode,j.replaceChild(X,D),_.length===q&&I++}}var E=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function k(w){if(!r.svgViewBoxElementsRegEx.test(w.nodeName))return{};var _=w.getAttribute("viewBox"),I=1,D=1,H=0,V=0,Y,z,X,N,j=w.getAttribute("width"),q=w.getAttribute("height"),te=w.getAttribute("x")||0,oe=w.getAttribute("y")||0,ie=w.getAttribute("preserveAspectRatio")||"",fe=!_||!(_=_.match(E)),Ae=!j||!q||j==="100%"||q==="100%",me=fe&&Ae,he={},ye="",xe=0,Ee=0;if(he.width=0,he.height=0,he.toBeParsed=me,fe&&(te||oe)&&w.parentNode&&w.parentNode.nodeName!=="#document"&&(ye=" translate("+l(te)+" "+l(oe)+") ",X=(w.getAttribute("transform")||"")+ye,w.setAttribute("transform",X),w.removeAttribute("x"),w.removeAttribute("y")),me)return he;if(fe)return he.width=l(j),he.height=l(q),he;if(H=-parseFloat(_[1]),V=-parseFloat(_[2]),Y=parseFloat(_[3]),z=parseFloat(_[4]),he.minX=H,he.minY=V,he.viewBoxWidth=Y,he.viewBoxHeight=z,Ae?(he.width=Y,he.height=z):(he.width=l(j),he.height=l(q),I=he.width/Y,D=he.height/z),ie=r.util.parsePreserveAspectRatioAttribute(ie),ie.alignX!=="none"&&(ie.meetOrSlice==="meet"&&(D=I=I>D?D:I),ie.meetOrSlice==="slice"&&(D=I=I>D?I:D),xe=he.width-Y*I,Ee=he.height-z*I,ie.alignX==="Mid"&&(xe/=2),ie.alignY==="Mid"&&(Ee/=2),ie.alignX==="Min"&&(xe=0),ie.alignY==="Min"&&(Ee=0)),I===1&&D===1&&H===0&&V===0&&te===0&&oe===0)return he;if((te||oe)&&w.parentNode.nodeName!=="#document"&&(ye=" translate("+l(te)+" "+l(oe)+") "),X=ye+" matrix("+I+" 0 0 "+D+" "+(H*I+xe)+" "+(V*D+Ee)+") ",w.nodeName==="svg"){for(N=w.ownerDocument.createElementNS(r.svgNS,"g");w.firstChild;)N.appendChild(w.firstChild);w.appendChild(N)}else N=w,N.removeAttribute("x"),N.removeAttribute("y"),X=N.getAttribute("transform")+X;return N.setAttribute("transform",X),he}function L(w,_){for(;w&&(w=w.parentNode);)if(w.nodeName&&_.test(w.nodeName.replace("svg:",""))&&!w.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(w,_,I,D){if(w){F(w);var H=r.Object.__uid++,V,Y,z=k(w),X=r.util.toArray(w.getElementsByTagName("*"));if(z.crossOrigin=D&&D.crossOrigin,z.svgUid=H,X.length===0&&r.isLikelyNode){X=w.selectNodes('//*[name(.)!="svg"]');var N=[];for(V=0,Y=X.length;V<Y;V++)N[V]=X[V];X=N}var j=X.filter(function(te){return k(te),r.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!L(te,r.svgInvalidAncestorsRegEx)});if(!j||j&&!j.length){_&&_([],{});return}var q={};X.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var oe=te.getAttribute("id");q[oe]=r.util.toArray(te.getElementsByTagName("*")).filter(function(ie){return r.svgValidTagNamesRegEx.test(ie.nodeName.replace("svg:",""))})}),r.gradientDefs[H]=r.getGradientDefs(w),r.cssRules[H]=r.getCSSRules(w),r.clipPaths[H]=q,r.parseElements(j,function(te,oe){_&&(_(te,z,oe,X),delete r.gradientDefs[H],delete r.cssRules[H],delete r.clipPaths[H])},u(z),I,D)}};function B(w,_){var I=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],D="xlink:href",H=_.getAttribute(D).slice(1),V=W(w,H);if(V&&V.getAttribute(D)&&B(w,V),I.forEach(function(z){V&&!_.hasAttribute(z)&&V.hasAttribute(z)&&_.setAttribute(z,V.getAttribute(z))}),!_.children.length)for(var Y=V.cloneNode(!0);Y.firstChild;)_.appendChild(Y.firstChild);_.removeAttribute(D)}var Q=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");d(r,{parseFontDeclaration:function(w,_){var I=w.match(Q);if(I){var D=I[1],H=I[3],V=I[4],Y=I[5],z=I[6];D&&(_.fontStyle=D),H&&(_.fontWeight=isNaN(parseFloat(H))?H:parseFloat(H)),V&&(_.fontSize=l(V)),z&&(_.fontFamily=z),Y&&(_.lineHeight=Y==="normal"?1:Y)}},getGradientDefs:function(w){var _=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],I=ee(w,_),D,H=0,V={};for(H=I.length;H--;)D=I[H],D.getAttribute("xlink:href")&&B(w,D),V[D.getAttribute("id")]=D;return V},parseAttributes:function(w,_,I){if(w){var D,H={},V,Y;typeof I>"u"&&(I=w.getAttribute("svgUid")),w.parentNode&&r.svgValidParentsRegEx.test(w.parentNode.nodeName)&&(H=r.parseAttributes(w.parentNode,_,I));var z=_.reduce(function(ie,fe){return D=w.getAttribute(fe),D&&(ie[fe]=D),ie},{}),X=d(ne(w,I),r.parseStyleAttribute(w));z=d(z,X),X[x]&&w.setAttribute(x,X[x]),V=Y=H.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,z[b]&&(z[b]=V=l(z[b],Y));var N,j,q={};for(var te in z)N=S(te),j=O(N,z[te],H,V),q[N]=j;q&&q.font&&r.parseFontDeclaration(q.font,q);var oe=d(H,q);return r.svgValidParentsRegEx.test(w.nodeName)?oe:Z(oe)}},parseElements:function(w,_,I,D,H){new r.ElementsParser(w,_,I,D,H).parse()},parseStyleAttribute:function(w){var _={},I=w.getAttribute("style");return I&&(typeof I=="string"?re(I,_):ae(I,_)),_},parsePointsAttribute:function(w){if(!w)return null;w=w.replace(/,/g," ").trim(),w=w.split(/\s+/);var _=[],I,D;for(I=0,D=w.length;I<D;I+=2)_.push({x:parseFloat(w[I]),y:parseFloat(w[I+1])});return _},getCSSRules:function(w){var _=w.getElementsByTagName("style"),I,D,H={},V;for(I=0,D=_.length;I<D;I++){var Y=_[I].textContent;Y=Y.replace(/\/\*[\s\S]*?\*\//g,""),Y.trim()!==""&&(V=Y.split("}"),V=V.filter(function(z){return z.trim()}),V.forEach(function(z){var X=z.split("{"),N={},j=X[1].trim(),q=j.split(";").filter(function(fe){return fe.trim()});for(I=0,D=q.length;I<D;I++){var te=q[I].split(":"),oe=te[0].trim(),ie=te[1].trim();N[oe]=ie}z=X[0].trim(),z.split(",").forEach(function(fe){fe=fe.replace(/^svg/i,"").trim(),fe!==""&&(H[fe]?r.util.object.extend(H[fe],N):H[fe]=r.util.object.clone(N))})}))}return H},loadSVGFromURL:function(w,_,I,D){w=w.replace(/^\n\s*/,"").trim(),new r.util.request(w,{method:"get",onComplete:H});function H(V){var Y=V.responseXML;if(!Y||!Y.documentElement)return _&&_(null),!1;r.parseSVGDocument(Y.documentElement,function(z,X,N,j){_&&_(z,X,N,j)},I,D)}},loadSVGFromString:function(w,_,I,D){var H=new r.window.DOMParser,V=H.parseFromString(w.trim(),"text/xml");r.parseSVGDocument(V.documentElement,function(Y,z,X,N){_(Y,z,X,N)},I,D)}})}(t),e.ElementsParser=function(c,r,d,u,a,l){this.elements=c,this.callback=r,this.options=d,this.reviver=u,this.svgUid=d&&d.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(c){c.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},c.createObjects=function(){var r=this;this.elements.forEach(function(d,u){d.setAttribute("svgUid",r.svgUid),r.createObject(d,u)})},c.findTag=function(r){return e[e.util.string.capitalize(r.tagName.replace("svg:",""))]},c.createObject=function(r,d){var u=this.findTag(r);if(u&&u.fromElement)try{u.fromElement(r,this.createCallback(d,r),this.options)}catch(a){e.log(a)}else this.checkIfDone()},c.createCallback=function(r,d){var u=this;return function(a){var l;u.resolveGradient(a,d,"fill"),u.resolveGradient(a,d,"stroke"),a instanceof e.Image&&a._originalElement&&(l=a.parsePreserveAspectRatioAttribute(d)),a._removeTransformMatrix(l),u.resolveClipPath(a,d),u.reviver&&u.reviver(d,a),u.instances[r]=a,u.checkIfDone()}},c.extractPropertyDefinition=function(r,d,u){var a=r[d],l=this.regexUrl;if(l.test(a)){l.lastIndex=0;var s=l.exec(a)[1];return l.lastIndex=0,e[u][this.svgUid][s]}},c.resolveGradient=function(r,d,u){var a=this.extractPropertyDefinition(r,u,"gradientDefs");if(a){var l=d.getAttribute(u+"-opacity"),s=e.Gradient.fromElement(a,r,l,this.options);r.set(u,s)}},c.createClipPathCallback=function(r,d){return function(u){u._removeTransformMatrix(),u.fillRule=u.clipRule,d.push(u)}},c.resolveClipPath=function(r,d){var u=this.extractPropertyDefinition(r,"clipPath","clipPaths"),a,l,s,h,g,f;if(u){h=[],s=e.util.invertTransform(r.calcTransformMatrix());for(var A=u[0].parentNode,m=d;m.parentNode&&m.getAttribute("clip-path")!==r.clipPath;)m=m.parentNode;m.parentNode.appendChild(A);for(var y=0;y<u.length;y++)a=u[y],l=this.findTag(a),l.fromElement(a,this.createClipPathCallback(r,h),this.options);h.length===1?u=h[0]:u=new e.Group(h),g=e.util.multiplyTransformMatrices(s,u.calcTransformMatrix()),u.clipPath&&this.resolveClipPath(u,m);var f=e.util.qrDecompose(g);u.flipX=!1,u.flipY=!1,u.set("scaleX",f.scaleX),u.set("scaleY",f.scaleY),u.angle=f.angle,u.skewX=f.skewX,u.skewY=0,u.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),r.clipPath=u}else delete r.clipPath},c.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(c){var r=c.fabric||(c.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=d;function d(u,a){this.x=u,this.y=a}d.prototype={type:"point",constructor:d,add:function(u){return new d(this.x+u.x,this.y+u.y)},addEquals:function(u){return this.x+=u.x,this.y+=u.y,this},scalarAdd:function(u){return new d(this.x+u,this.y+u)},scalarAddEquals:function(u){return this.x+=u,this.y+=u,this},subtract:function(u){return new d(this.x-u.x,this.y-u.y)},subtractEquals:function(u){return this.x-=u.x,this.y-=u.y,this},scalarSubtract:function(u){return new d(this.x-u,this.y-u)},scalarSubtractEquals:function(u){return this.x-=u,this.y-=u,this},multiply:function(u){return new d(this.x*u,this.y*u)},multiplyEquals:function(u){return this.x*=u,this.y*=u,this},divide:function(u){return new d(this.x/u,this.y/u)},divideEquals:function(u){return this.x/=u,this.y/=u,this},eq:function(u){return this.x===u.x&&this.y===u.y},lt:function(u){return this.x<u.x&&this.y<u.y},lte:function(u){return this.x<=u.x&&this.y<=u.y},gt:function(u){return this.x>u.x&&this.y>u.y},gte:function(u){return this.x>=u.x&&this.y>=u.y},lerp:function(u,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new d(this.x+(u.x-this.x)*a,this.y+(u.y-this.y)*a)},distanceFrom:function(u){var a=this.x-u.x,l=this.y-u.y;return Math.sqrt(a*a+l*l)},midPointFrom:function(u){return this.lerp(u)},min:function(u){return new d(Math.min(this.x,u.x),Math.min(this.y,u.y))},max:function(u){return new d(Math.max(this.x,u.x),Math.max(this.y,u.y))},toString:function(){return this.x+","+this.y},setXY:function(u,a){return this.x=u,this.y=a,this},setX:function(u){return this.x=u,this},setY:function(u){return this.y=u,this},setFromPoint:function(u){return this.x=u.x,this.y=u.y,this},swap:function(u){var a=this.x,l=this.y;this.x=u.x,this.y=u.y,u.x=a,u.y=l},clone:function(){return new d(this.x,this.y)}}}(t),function(c){var r=c.fabric||(c.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function d(u){this.status=u,this.points=[]}r.Intersection=d,r.Intersection.prototype={constructor:d,appendPoint:function(u){return this.points.push(u),this},appendPoints:function(u){return this.points=this.points.concat(u),this}},r.Intersection.intersectLineLine=function(u,a,l,s){var h,g=(s.x-l.x)*(u.y-l.y)-(s.y-l.y)*(u.x-l.x),f=(a.x-u.x)*(u.y-l.y)-(a.y-u.y)*(u.x-l.x),A=(s.y-l.y)*(a.x-u.x)-(s.x-l.x)*(a.y-u.y);if(A!==0){var m=g/A,y=f/A;0<=m&&m<=1&&0<=y&&y<=1?(h=new d("Intersection"),h.appendPoint(new r.Point(u.x+m*(a.x-u.x),u.y+m*(a.y-u.y)))):h=new d}else g===0||f===0?h=new d("Coincident"):h=new d("Parallel");return h},r.Intersection.intersectLinePolygon=function(u,a,l){var s=new d,h=l.length,g,f,A,m;for(m=0;m<h;m++)g=l[m],f=l[(m+1)%h],A=d.intersectLineLine(u,a,g,f),s.appendPoints(A.points);return s.points.length>0&&(s.status="Intersection"),s},r.Intersection.intersectPolygonPolygon=function(u,a){var l=new d,s=u.length,h;for(h=0;h<s;h++){var g=u[h],f=u[(h+1)%s],A=d.intersectLinePolygon(g,f,a);l.appendPoints(A.points)}return l.points.length>0&&(l.status="Intersection"),l},r.Intersection.intersectPolygonRectangle=function(u,a,l){var s=a.min(l),h=a.max(l),g=new r.Point(h.x,s.y),f=new r.Point(s.x,h.y),A=d.intersectLinePolygon(s,g,u),m=d.intersectLinePolygon(g,h,u),y=d.intersectLinePolygon(h,f,u),b=d.intersectLinePolygon(f,s,u),x=new d;return x.appendPoints(A.points),x.appendPoints(m.points),x.appendPoints(y.points),x.appendPoints(b.points),x.points.length>0&&(x.status="Intersection"),x}}(t),function(c){var r=c.fabric||(c.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function d(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}r.Color=d,r.Color.prototype={_tryParsingColor:function(a){var l;a in d.colorNameMap&&(a=d.colorNameMap[a]),a==="transparent"&&(l=[255,255,255,0]),l||(l=d.sourceFromHex(a)),l||(l=d.sourceFromRgb(a)),l||(l=d.sourceFromHsl(a)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(a,l,s){a/=255,l/=255,s/=255;var h,g,f,A=r.util.array.max([a,l,s]),m=r.util.array.min([a,l,s]);if(f=(A+m)/2,A===m)h=g=0;else{var y=A-m;switch(g=f>.5?y/(2-A-m):y/(A+m),A){case a:h=(l-s)/y+(l<s?6:0);break;case l:h=(s-a)/y+2;break;case s:h=(a-l)/y+4;break}h/=6}return[Math.round(h*360),Math.round(g*100),Math.round(f*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var a=this.getSource(),l=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),l,s,h;return l=a[0].toString(16),l=l.length===1?"0"+l:l,s=a[1].toString(16),s=s.length===1?"0"+s:s,h=a[2].toString(16),h=h.length===1?"0"+h:h,l.toUpperCase()+s.toUpperCase()+h.toUpperCase()},toHexa:function(){var a=this.getSource(),l;return l=Math.round(a[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var l=this.getSource();return l[3]=a,this.setSource(l),this},toGrayscale:function(){var a=this.getSource(),l=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),s=a[3];return this.setSource([l,l,l,s]),this},toBlackWhite:function(a){var l=this.getSource(),s=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),h=l[3];return a=a||127,s=Number(s)<Number(a)?0:255,this.setSource([s,s,s,h]),this},overlayWith:function(a){a instanceof d||(a=new d(a));var l=[],s=this.getAlpha(),h=.5,g=this.getSource(),f=a.getSource(),A;for(A=0;A<3;A++)l.push(Math.round(g[A]*(1-h)+f[A]*h));return l[3]=s,this.setSource(l),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function u(a,l,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?a+(l-a)*6*s:s<1/2?l:s<2/3?a+(l-a)*(2/3-s)*6:a}r.Color.fromRgb=function(a){return d.fromSource(d.sourceFromRgb(a))},r.Color.sourceFromRgb=function(a){var l=a.match(d.reRGBa);if(l){var s=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),h=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),g=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(s,10),parseInt(h,10),parseInt(g,10),l[4]?parseFloat(l[4]):1]}},r.Color.fromRgba=d.fromRgb,r.Color.fromHsl=function(a){return d.fromSource(d.sourceFromHsl(a))},r.Color.sourceFromHsl=function(a){var l=a.match(d.reHSLa);if(l){var s=(parseFloat(l[1])%360+360)%360/360,h=parseFloat(l[2])/(/%$/.test(l[2])?100:1),g=parseFloat(l[3])/(/%$/.test(l[3])?100:1),f,A,m;if(h===0)f=A=m=g;else{var y=g<=.5?g*(h+1):g+h-g*h,b=g*2-y;f=u(b,y,s+1/3),A=u(b,y,s),m=u(b,y,s-1/3)}return[Math.round(f*255),Math.round(A*255),Math.round(m*255),l[4]?parseFloat(l[4]):1]}},r.Color.fromHsla=d.fromHsl,r.Color.fromHex=function(a){return d.fromSource(d.sourceFromHex(a))},r.Color.sourceFromHex=function(a){if(a.match(d.reHex)){var l=a.slice(a.indexOf("#")+1),s=l.length===3||l.length===4,h=l.length===8||l.length===4,g=s?l.charAt(0)+l.charAt(0):l.substring(0,2),f=s?l.charAt(1)+l.charAt(1):l.substring(2,4),A=s?l.charAt(2)+l.charAt(2):l.substring(4,6),m=h?s?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(g,16),parseInt(f,16),parseInt(A,16),parseFloat((parseInt(m,16)/255).toFixed(2))]}},r.Color.fromSource=function(a){var l=new d;return l.setSource(a),l}}(t),function(c){var r=c.fabric||(c.fabric={}),d=["e","se","s","sw","w","nw","n","ne","e"],u=["ns","nesw","ew","nwse"],a={},l="left",s="top",h="right",g="bottom",f="center",A={top:g,bottom:s,left:h,right:l,center:f},m=r.util.radiansToDegrees,y=Math.sign||function(N){return(N>0)-(N<0)||+N};function b(N,j){var q=N.angle+m(Math.atan2(j.y,j.x))+360;return Math.round(q%360/45)}function x(N,j){var q=j.transform.target,te=q.canvas,oe=r.util.object.clone(j);oe.target=q,te&&te.fire("object:"+N,oe),q.fire(N,j)}function S(N,j){var q=j.canvas,te=q.uniScaleKey,oe=N[te];return q.uniformScaling&&!oe||!q.uniformScaling&&oe}function O(N){return N.originX===f&&N.originY===f}function R(N,j,q){var te=N.lockScalingX,oe=N.lockScalingY;return!!(te&&oe||!j&&(te||oe)&&q||te&&j==="x"||oe&&j==="y")}function Z(N,j,q){var te="not-allowed",oe=S(N,q),ie="";if(j.x!==0&&j.y===0?ie="x":j.x===0&&j.y!==0&&(ie="y"),R(q,ie,oe))return te;var fe=b(q,j);return d[fe]+"-resize"}function ee(N,j,q){var te="not-allowed";if(j.x!==0&&q.lockSkewingY||j.y!==0&&q.lockSkewingX)return te;var oe=b(q,j)%4;return u[oe]+"-resize"}function re(N,j,q){return N[q.canvas.altActionKey]?a.skewCursorStyleHandler(N,j,q):a.scaleCursorStyleHandler(N,j,q)}function ae(N,j,q){var te=N[q.canvas.altActionKey];if(j.x===0)return te?"skewX":"scaleY";if(j.y===0)return te?"skewY":"scaleX"}function ne(N,j,q){return q.lockRotation?"not-allowed":j.cursorStyle}function J(N,j,q,te){return{e:N,transform:j,pointer:{x:q,y:te}}}function P(N){return function(j,q,te,oe){var ie=q.target,fe=ie.getCenterPoint(),Ae=ie.translateToOriginPoint(fe,q.originX,q.originY),me=N(j,q,te,oe);return ie.setPositionByOrigin(Ae,q.originX,q.originY),me}}function U(N,j){return function(q,te,oe,ie){var fe=j(q,te,oe,ie);return fe&&x(N,J(q,te,oe,ie)),fe}}function W(N,j,q,te,oe){var ie=N.target,fe=ie.controls[N.corner],Ae=ie.canvas.getZoom(),me=ie.padding/Ae,he=ie.toLocalPoint(new r.Point(te,oe),j,q);return he.x>=me&&(he.x-=me),he.x<=-me&&(he.x+=me),he.y>=me&&(he.y-=me),he.y<=me&&(he.y+=me),he.x-=fe.offsetX,he.y-=fe.offsetY,he}function F(N){return N.flipX!==N.flipY}function E(N,j,q,te,oe){if(N[j]!==0){var ie=N._getTransformedDimensions()[te],fe=oe/ie*N[q];N.set(q,fe)}}function k(N,j,q,te){var oe=j.target,ie=oe._getTransformedDimensions(0,oe.skewY),fe=W(j,j.originX,j.originY,q,te),Ae=Math.abs(fe.x*2)-ie.x,me=oe.skewX,he;Ae<2?he=0:(he=m(Math.atan2(Ae/oe.scaleX,ie.y/oe.scaleY)),j.originX===l&&j.originY===g&&(he=-he),j.originX===h&&j.originY===s&&(he=-he),F(oe)&&(he=-he));var ye=me!==he;if(ye){var xe=oe._getTransformedDimensions().y;oe.set("skewX",he),E(oe,"skewY","scaleY","y",xe)}return ye}function L(N,j,q,te){var oe=j.target,ie=oe._getTransformedDimensions(oe.skewX,0),fe=W(j,j.originX,j.originY,q,te),Ae=Math.abs(fe.y*2)-ie.y,me=oe.skewY,he;Ae<2?he=0:(he=m(Math.atan2(Ae/oe.scaleY,ie.x/oe.scaleX)),j.originX===l&&j.originY===g&&(he=-he),j.originX===h&&j.originY===s&&(he=-he),F(oe)&&(he=-he));var ye=me!==he;if(ye){var xe=oe._getTransformedDimensions().x;oe.set("skewY",he),E(oe,"skewX","scaleX","x",xe)}return ye}function B(N,j,q,te){var oe=j.target,ie=oe.skewX,fe,Ae=j.originY;if(oe.lockSkewingX)return!1;if(ie===0){var me=W(j,f,f,q,te);me.x>0?fe=l:fe=h}else ie>0&&(fe=Ae===s?l:h),ie<0&&(fe=Ae===s?h:l),F(oe)&&(fe=fe===l?h:l);j.originX=fe;var he=U("skewing",P(k));return he(N,j,q,te)}function Q(N,j,q,te){var oe=j.target,ie=oe.skewY,fe,Ae=j.originX;if(oe.lockSkewingY)return!1;if(ie===0){var me=W(j,f,f,q,te);me.y>0?fe=s:fe=g}else ie>0&&(fe=Ae===l?s:g),ie<0&&(fe=Ae===l?g:s),F(oe)&&(fe=fe===s?g:s);j.originY=fe;var he=U("skewing",P(L));return he(N,j,q,te)}function w(N,j,q,te){var oe=j,ie=oe.target,fe=ie.translateToOriginPoint(ie.getCenterPoint(),oe.originX,oe.originY);if(ie.lockRotation)return!1;var Ae=Math.atan2(oe.ey-fe.y,oe.ex-fe.x),me=Math.atan2(te-fe.y,q-fe.x),he=m(me-Ae+oe.theta),ye=!0;if(ie.snapAngle>0){var xe=ie.snapAngle,Ee=ie.snapThreshold||xe,ke=Math.ceil(he/xe)*xe,Fe=Math.floor(he/xe)*xe;Math.abs(he-Fe)<Ee?he=Fe:Math.abs(he-ke)<Ee&&(he=ke)}return he<0&&(he=360+he),he%=360,ye=ie.angle!==he,ie.angle=he,ye}function _(N,j,q,te,oe){oe=oe||{};var ie=j.target,fe=ie.lockScalingX,Ae=ie.lockScalingY,me=oe.by,he,ye,xe,Ee,ke=S(N,ie),Fe=R(ie,me,ke),Xe,Oe,ct=j.gestureScale;if(Fe)return!1;if(ct)ye=j.scaleX*ct,xe=j.scaleY*ct;else{if(he=W(j,j.originX,j.originY,q,te),Xe=me!=="y"?y(he.x):1,Oe=me!=="x"?y(he.y):1,j.signX||(j.signX=Xe),j.signY||(j.signY=Oe),ie.lockScalingFlip&&(j.signX!==Xe||j.signY!==Oe))return!1;if(Ee=ie._getTransformedDimensions(),ke&&!me){var Ke=Math.abs(he.x)+Math.abs(he.y),nt=j.original,Bt=Math.abs(Ee.x*nt.scaleX/ie.scaleX)+Math.abs(Ee.y*nt.scaleY/ie.scaleY),wt=Ke/Bt;ye=nt.scaleX*wt,xe=nt.scaleY*wt}else ye=Math.abs(he.x*ie.scaleX/Ee.x),xe=Math.abs(he.y*ie.scaleY/Ee.y);O(j)&&(ye*=2,xe*=2),j.signX!==Xe&&me!=="y"&&(j.originX=A[j.originX],ye*=-1,j.signX=Xe),j.signY!==Oe&&me!=="x"&&(j.originY=A[j.originY],xe*=-1,j.signY=Oe)}var Gt=ie.scaleX,Un=ie.scaleY;return me?(me==="x"&&ie.set("scaleX",ye),me==="y"&&ie.set("scaleY",xe)):(!fe&&ie.set("scaleX",ye),!Ae&&ie.set("scaleY",xe)),Gt!==ie.scaleX||Un!==ie.scaleY}function I(N,j,q,te){return _(N,j,q,te)}function D(N,j,q,te){return _(N,j,q,te,{by:"x"})}function H(N,j,q,te){return _(N,j,q,te,{by:"y"})}function V(N,j,q,te){return N[j.target.canvas.altActionKey]?a.skewHandlerX(N,j,q,te):a.scalingY(N,j,q,te)}function Y(N,j,q,te){return N[j.target.canvas.altActionKey]?a.skewHandlerY(N,j,q,te):a.scalingX(N,j,q,te)}function z(N,j,q,te){var oe=j.target,ie=W(j,j.originX,j.originY,q,te),fe=oe.strokeWidth/(oe.strokeUniform?oe.scaleX:1),Ae=O(j)?2:1,me=oe.width,he=Math.abs(ie.x*Ae/oe.scaleX)-fe;return oe.set("width",Math.max(he,0)),me!==he}function X(N,j,q,te){var oe=j.target,ie=q-j.offsetX,fe=te-j.offsetY,Ae=!oe.get("lockMovementX")&&oe.left!==ie,me=!oe.get("lockMovementY")&&oe.top!==fe;return Ae&&oe.set("left",ie),me&&oe.set("top",fe),(Ae||me)&&x("moving",J(N,j,q,te)),Ae||me}a.scaleCursorStyleHandler=Z,a.skewCursorStyleHandler=ee,a.scaleSkewCursorStyleHandler=re,a.rotationWithSnapping=U("rotating",P(w)),a.scalingEqually=U("scaling",P(I)),a.scalingX=U("scaling",P(D)),a.scalingY=U("scaling",P(H)),a.scalingYOrSkewingX=V,a.scalingXOrSkewingY=Y,a.changeWidth=U("resizing",P(z)),a.skewHandlerX=B,a.skewHandlerY=Q,a.dragHandler=X,a.scaleOrSkewActionName=ae,a.rotationStyleHandler=ne,a.fireEvent=x,a.wrapWithFixedAnchor=P,a.wrapWithFireEvent=U,a.getLocalPoint=W,r.controlsUtils=a}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.degreesToRadians,u=r.controlsUtils;function a(s,h,g,f,A){f=f||{};var m=this.sizeX||f.cornerSize||A.cornerSize,y=this.sizeY||f.cornerSize||A.cornerSize,b=typeof f.transparentCorners<"u"?f.transparentCorners:A.transparentCorners,x=b?"stroke":"fill",S=!b&&(f.cornerStrokeColor||A.cornerStrokeColor),O=h,R=g,Z;s.save(),s.fillStyle=f.cornerColor||A.cornerColor,s.strokeStyle=f.cornerStrokeColor||A.cornerStrokeColor,m>y?(Z=m,s.scale(1,y/m),R=g*m/y):y>m?(Z=y,s.scale(m/y,1),O=h*y/m):Z=m,s.lineWidth=1,s.beginPath(),s.arc(O,R,Z/2,0,2*Math.PI,!1),s[x](),S&&s.stroke(),s.restore()}function l(s,h,g,f,A){f=f||{};var m=this.sizeX||f.cornerSize||A.cornerSize,y=this.sizeY||f.cornerSize||A.cornerSize,b=typeof f.transparentCorners<"u"?f.transparentCorners:A.transparentCorners,x=b?"stroke":"fill",S=!b&&(f.cornerStrokeColor||A.cornerStrokeColor),O=m/2,R=y/2;s.save(),s.fillStyle=f.cornerColor||A.cornerColor,s.strokeStyle=f.cornerStrokeColor||A.cornerStrokeColor,s.lineWidth=1,s.translate(h,g),s.rotate(d(A.angle)),s[x+"Rect"](-O,-R,m,y),S&&s.strokeRect(-O,-R,m,y),s.restore()}u.renderCircleControl=a,u.renderSquareControl=l}(t),function(c){var r=c.fabric||(c.fabric={});function d(u){for(var a in u)this[a]=u[a]}r.Control=d,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(u,a){return a.cursorStyle},getActionName:function(u,a){return a.actionName},getVisibility:function(u,a){var l=u._controlsVisibility;return l&&typeof l[a]<"u"?l[a]:this.visible},setVisibility:function(u){this.visible=u},positionHandler:function(u,a){var l=r.util.transformPoint({x:this.x*u.x+this.offsetX,y:this.y*u.y+this.offsetY},a);return l},calcCornerCoords:function(u,a,l,s,h){var g,f,A,m,y=h?this.touchSizeX:this.sizeX,b=h?this.touchSizeY:this.sizeY;if(y&&b&&y!==b){var x=Math.atan2(b,y),S=Math.sqrt(y*y+b*b)/2,O=x-r.util.degreesToRadians(u),R=Math.PI/2-x-r.util.degreesToRadians(u);g=S*r.util.cos(O),f=S*r.util.sin(O),A=S*r.util.cos(R),m=S*r.util.sin(R)}else{var Z=y&&b?y:a;S=Z*.7071067812;var O=r.util.degreesToRadians(45-u);g=A=S*r.util.cos(O),f=m=S*r.util.sin(O)}return{tl:{x:l-m,y:s-A},tr:{x:l+g,y:s-f},bl:{x:l-g,y:s+f},br:{x:l+m,y:s+A}}},render:function(u,a,l,s,h){switch(s=s||{},s.cornerStyle||h.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,u,a,l,s,h);break;default:r.controlsUtils.renderSquareControl.call(this,u,a,l,s,h)}}}}(t),function(){function c(l,s){var h=l.getAttribute("style"),g=l.getAttribute("offset")||0,f,A,m,y;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,h){var b=h.split(/\s*;\s*/);for(b[b.length-1]===""&&b.pop(),y=b.length;y--;){var x=b[y].split(/\s*:\s*/),S=x[0].trim(),O=x[1].trim();S==="stop-color"?f=O:S==="stop-opacity"&&(m=O)}}return f||(f=l.getAttribute("stop-color")||"rgb(0,0,0)"),m||(m=l.getAttribute("stop-opacity")),f=new e.Color(f),A=f.getAlpha(),m=isNaN(parseFloat(m))?1:parseFloat(m),m*=A*s,{offset:g,color:f.toRgb(),opacity:m}}function r(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function d(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var u=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var s,h=this;Object.keys(l).forEach(function(g){h[g]=l[g]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,s={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(s.r1=l.coords.r1||0,s.r2=l.coords.r2||0),this.coords=s,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var s in l){var h=new e.Color(l[s]);this.colorStops.push({offset:parseFloat(s),color:h.toRgb(),opacity:h.getAlpha()})}return this},toObject:function(l){var s={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,s,l),s},toSVG:function(l,A){var h=u(this.coords,!0),g,f,A=A||{},m,y,b=u(this.colorStops,!0),x=h.r1>h.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),O=-this.offsetX,R=-this.offsetY,Z=!!A.additionalTransform,ee=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(b.sort(function(P,U){return P.offset-U.offset}),ee==="objectBoundingBox"?(O/=l.width,R/=l.height):(O+=l.width/2,R+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(O-=l.pathOffset.x,R-=l.pathOffset.y),S[4]-=O,S[5]-=R,y='id="SVGID_'+this.id+'" gradientUnits="'+ee+'"',y+=' gradientTransform="'+(Z?A.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?m=["<linearGradient ",y,' x1="',h.x1,'" y1="',h.y1,'" x2="',h.x2,'" y2="',h.y2,`">
`]:this.type==="radial"&&(m=["<radialGradient ",y,' cx="',x?h.x1:h.x2,'" cy="',x?h.y1:h.y2,'" r="',x?h.r1:h.r2,'" fx="',x?h.x2:h.x1,'" fy="',x?h.y2:h.y1,`">
`]),this.type==="radial"){if(x)for(b=b.concat(),b.reverse(),g=0,f=b.length;g<f;g++)b[g].offset=1-b[g].offset;var re=Math.min(h.r1,h.r2);if(re>0){var ae=Math.max(h.r1,h.r2),ne=re/ae;for(g=0,f=b.length;g<f;g++)b[g].offset+=ne*(1-b[g].offset)}}for(g=0,f=b.length;g<f;g++){var J=b[g];m.push("<stop ",'offset="',J.offset*100+"%",'" style="stop-color:',J.color,typeof J.opacity<"u"?";stop-opacity: "+J.opacity:";",`"/>
`)}return m.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),m.join("")},toLive:function(l){var s,h=e.util.object.clone(this.coords),g,f;if(this.type){for(this.type==="linear"?s=l.createLinearGradient(h.x1,h.y1,h.x2,h.y2):this.type==="radial"&&(s=l.createRadialGradient(h.x1,h.y1,h.r1,h.x2,h.y2,h.r2)),g=0,f=this.colorStops.length;g<f;g++){var A=this.colorStops[g].color,m=this.colorStops[g].opacity,y=this.colorStops[g].offset;typeof m<"u"&&(A=new e.Color(A).setAlpha(m).toRgba()),s.addColorStop(y,A)}return s}}}),e.util.object.extend(e.Gradient,{fromElement:function(l,s,h,g){var f=parseFloat(h)/(/%$/.test(h)?100:1);f=f<0?0:f>1?1:f,isNaN(f)&&(f=1);var A=l.getElementsByTagName("stop"),m,y=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",b=l.getAttribute("gradientTransform")||"",x=[],S,O,R=0,Z=0,ee;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(m="linear",S=r(l)):(m="radial",S=d(l)),O=A.length;O--;)x.push(c(A[O],f));ee=e.parseTransformAttribute(b),a(s,S,g,y),y==="pixels"&&(R=-s.left,Z=-s.top);var re=new e.Gradient({id:l.getAttribute("id"),type:m,coords:S,colorStops:x,gradientUnits:y,gradientTransform:ee,offsetX:R,offsetY:Z});return re}});function a(l,s,h,g){var f,A;Object.keys(s).forEach(function(m){f=s[m],f==="Infinity"?A=1:f==="-Infinity"?A=0:(A=parseFloat(s[m],10),typeof f=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(f)&&(A*=.01,g==="pixels"&&((m==="x1"||m==="x2"||m==="r2")&&(A*=h.viewBoxWidth||h.width),(m==="y1"||m==="y2")&&(A*=h.viewBoxHeight||h.height)))),s[m]=A})}}(),function(){var c=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,d){if(r||(r={}),this.id=e.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){d&&d(this);return}else{var u=this;this.source=e.util.createImage(),e.util.loadImage(r.source,function(a,l){u.source=a,d&&d(u,l)},null,this.crossOrigin)}},toObject:function(r){var d=e.Object.NUM_FRACTION_DIGITS,u,a;return typeof this.source.src=="string"?u=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(u=this.source.toDataURL()),a={type:"pattern",source:u,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:c(this.offsetX,d),offsetY:c(this.offsetY,d),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,a,r),a},toSVG:function(r){var d=typeof this.source=="function"?this.source():this.source,u=d.width/r.width,a=d.height/r.height,l=this.offsetX/r.width,s=this.offsetY/r.height,h="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,s&&(a+=Math.abs(s))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(u=1,l&&(u+=Math.abs(l))),d.src?h=d.src:d.toDataURL&&(h=d.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+s+'" width="'+u+'" height="'+a+`">
<image x="0" y="0" width="`+d.width+'" height="'+d.height+'" xlink:href="'+h+`"></image>
</pattern>
`},setOptions:function(r){for(var d in r)this[d]=r[d]},toLive:function(r){var d=this.source;return!d||typeof d.src<"u"&&(!d.complete||d.naturalWidth===0||d.naturalHeight===0)?"":r.createPattern(d,this.repeat)}})}(),function(c){var r=c.fabric||(c.fabric={}),d=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(u){typeof u=="string"&&(u=this._parseShadow(u));for(var a in u)this[a]=u[a];this.id=r.Object.__uid++},_parseShadow:function(u){var a=u.trim(),l=r.Shadow.reOffsetsAndBlur.exec(a)||[],s=a.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:s.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(u){var a=40,l=40,s=r.Object.NUM_FRACTION_DIGITS,h=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-u.angle)),g=20,f=new r.Color(this.color);return u.width&&u.height&&(a=d((Math.abs(h.x)+this.blur)/u.width,s)*100+g,l=d((Math.abs(h.y)+this.blur)/u.height,s)*100+g),u.flipX&&(h.x*=-1),u.flipY&&(h.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+d(this.blur?this.blur/2:0,s)+`"></feGaussianBlur>
	<feOffset dx="`+d(h.x,s)+'" dy="'+d(h.y,s)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+f.toRgb()+'" flood-opacity="'+f.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var u={},a=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==a[l]&&(u[l]=this[l])},this),u}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var c=e.util.object.extend,r=e.util.getElementOffset,d=e.util.removeFromArray,u=e.util.toFixed,a=e.util.transformPoint,l=e.util.invertTransform,s=e.util.getNodeCanvas,h=e.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(f,A){A||(A={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(f,A)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(f,A){var m=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(f),this._initOptions(A),this.interactive||this._initRetinaScaling(),A.overlayImage&&this.setOverlayImage(A.overlayImage,m),A.backgroundImage&&this.setBackgroundImage(A.backgroundImage,m),A.backgroundColor&&this.setBackgroundColor(A.backgroundColor,m),A.overlayColor&&this.setOverlayColor(A.overlayColor,m),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var f=e.devicePixelRatio;this.__initRetinaScaling(f,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(f,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(f,A,m){A.setAttribute("width",this.width*f),A.setAttribute("height",this.height*f),m.scale(f,f)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(f,A,m){return this.__setBgOverlayImage("overlayImage",f,A,m)},setBackgroundImage:function(f,A,m){return this.__setBgOverlayImage("backgroundImage",f,A,m)},setOverlayColor:function(f,A){return this.__setBgOverlayColor("overlayColor",f,A)},setBackgroundColor:function(f,A){return this.__setBgOverlayColor("backgroundColor",f,A)},__setBgOverlayImage:function(f,A,m,y){return typeof A=="string"?e.util.loadImage(A,function(b,x){if(b){var S=new e.Image(b,y);this[f]=S,S.canvas=this}m&&m(b,x)},this,y&&y.crossOrigin):(y&&A.setOptions(y),this[f]=A,A&&(A.canvas=this),m&&m(A,!1)),this},__setBgOverlayColor:function(f,A,m){return this[f]=A,this._initGradient(A,f),this._initPattern(A,f,m),this},_createCanvasElement:function(){var f=h();if(!f||(f.style||(f.style={}),typeof f.getContext>"u"))throw g;return f},_initOptions:function(f){var A=this.lowerCanvasEl;this._setOptions(f),this.width=this.width||parseInt(A.width,10)||0,this.height=this.height||parseInt(A.height,10)||0,this.lowerCanvasEl.style&&(A.width=this.width,A.height=this.height,A.style.width=this.width+"px",A.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(f){f&&f.getContext?this.lowerCanvasEl=f:this.lowerCanvasEl=e.util.getById(f)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(f,A){return this.setDimensions({width:f},A)},setHeight:function(f,A){return this.setDimensions({height:f},A)},setDimensions:function(f,A){var m;A=A||{};for(var y in f)m=f[y],A.cssOnly||(this._setBackstoreDimension(y,f[y]),m+="px",this.hasLostContext=!0),A.backstoreOnly||this._setCssDimension(y,m);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),A.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(f,A){return this.lowerCanvasEl[f]=A,this.upperCanvasEl&&(this.upperCanvasEl[f]=A),this.cacheCanvasEl&&(this.cacheCanvasEl[f]=A),this[f]=A,this},_setCssDimension:function(f,A){return this.lowerCanvasEl.style[f]=A,this.upperCanvasEl&&(this.upperCanvasEl.style[f]=A),this.wrapperEl&&(this.wrapperEl.style[f]=A),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(f){var A=this._activeObject,m=this.backgroundImage,y=this.overlayImage,b,x,S;for(this.viewportTransform=f,x=0,S=this._objects.length;x<S;x++)b=this._objects[x],b.group||b.setCoords(!0);return A&&A.setCoords(),m&&m.setCoords(!0),y&&y.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(f,A){var m=f,y=this.viewportTransform.slice(0);f=a(f,l(this.viewportTransform)),y[0]=A,y[3]=A;var b=a(f,y);return y[4]+=m.x-b.x,y[5]+=m.y-b.y,this.setViewportTransform(y)},setZoom:function(f){return this.zoomToPoint(new e.Point(0,0),f),this},absolutePan:function(f){var A=this.viewportTransform.slice(0);return A[4]=-f.x,A[5]=-f.y,this.setViewportTransform(A)},relativePan:function(f){return this.absolutePan(new e.Point(-f.x-this.viewportTransform[4],-f.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(f){this.stateful&&f.setupState(),f._set("canvas",this),f.setCoords(),this.fire("object:added",{target:f}),f.fire("added")},_onObjectRemoved:function(f){this.fire("object:removed",{target:f}),f.fire("removed"),delete f.canvas},clearContext:function(f){return f.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var f=this.contextContainer;return this.renderCanvas(f,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var f={},A=this.width,m=this.height,y=l(this.viewportTransform);return f.tl=a({x:0,y:0},y),f.br=a({x:A,y:m},y),f.tr=new e.Point(f.br.x,f.tl.y),f.bl=new e.Point(f.tl.x,f.br.y),this.vptCoords=f,f},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(f,A){var m=this.viewportTransform,y=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(f),e.util.setImageSmoothing(f,this.imageSmoothingEnabled),this.fire("before:render",{ctx:f}),this._renderBackground(f),f.save(),f.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._renderObjects(f,A),f.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),y&&(y.canvas=this,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(f)),this._renderOverlay(f),this.controlsAboveOverlay&&this.interactive&&this.drawControls(f),this.fire("after:render",{ctx:f})},drawClipPathOnCanvas:function(f){var A=this.viewportTransform,m=this.clipPath;f.save(),f.transform(A[0],A[1],A[2],A[3],A[4],A[5]),f.globalCompositeOperation="destination-in",m.transform(f),f.scale(1/m.zoomX,1/m.zoomY),f.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),f.restore()},_renderObjects:function(f,A){var m,y;for(m=0,y=A.length;m<y;++m)A[m]&&A[m].render(f)},_renderBackgroundOrOverlay:function(f,A){var m=this[A+"Color"],y=this[A+"Image"],b=this.viewportTransform,x=this[A+"Vpt"];if(!(!m&&!y)){if(m){f.save(),f.beginPath(),f.moveTo(0,0),f.lineTo(this.width,0),f.lineTo(this.width,this.height),f.lineTo(0,this.height),f.closePath(),f.fillStyle=m.toLive?m.toLive(f,this):m,x&&f.transform(b[0],b[1],b[2],b[3],b[4],b[5]),f.transform(1,0,0,1,m.offsetX||0,m.offsetY||0);var S=m.gradientTransform||m.patternTransform;S&&f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),f.fill(),f.restore()}y&&(f.save(),x&&f.transform(b[0],b[1],b[2],b[3],b[4],b[5]),y.render(f),f.restore())}},_renderBackground:function(f){this._renderBackgroundOrOverlay(f,"background")},_renderOverlay:function(f){this._renderBackgroundOrOverlay(f,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(f){return this._centerObject(f,new e.Point(this.getCenterPoint().x,f.getCenterPoint().y))},centerObjectV:function(f){return this._centerObject(f,new e.Point(f.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(f){var A=this.getCenterPoint();return this._centerObject(f,A)},viewportCenterObject:function(f){var A=this.getVpCenter();return this._centerObject(f,A)},viewportCenterObjectH:function(f){var A=this.getVpCenter();return this._centerObject(f,new e.Point(A.x,f.getCenterPoint().y)),this},viewportCenterObjectV:function(f){var A=this.getVpCenter();return this._centerObject(f,new e.Point(f.getCenterPoint().x,A.y))},getVpCenter:function(){var f=this.getCenterPoint(),A=l(this.viewportTransform);return a(f,A)},_centerObject:function(f,A){return f.setPositionByOrigin(A,"center","center"),f.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(f){return this.toDatalessObject(f)},toObject:function(f){return this._toObjectMethod("toObject",f)},toDatalessObject:function(f){return this._toObjectMethod("toDatalessObject",f)},_toObjectMethod:function(f,A){var m=this.clipPath,y={version:e.version,objects:this._toObjects(f,A)};return m&&!m.excludeFromExport&&(y.clipPath=this._toObject(this.clipPath,f,A)),c(y,this.__serializeBgOverlay(f,A)),e.util.populateWithProperties(this,y,A),y},_toObjects:function(f,A){return this._objects.filter(function(m){return!m.excludeFromExport}).map(function(m){return this._toObject(m,f,A)},this)},_toObject:function(f,A,m){var y;this.includeDefaultValues||(y=f.includeDefaultValues,f.includeDefaultValues=!1);var b=f[A](m);return this.includeDefaultValues||(f.includeDefaultValues=y),b},__serializeBgOverlay:function(f,A){var m={},y=this.backgroundImage,b=this.overlayImage,x=this.backgroundColor,S=this.overlayColor;return x&&x.toObject?x.excludeFromExport||(m.background=x.toObject(A)):x&&(m.background=x),S&&S.toObject?S.excludeFromExport||(m.overlay=S.toObject(A)):S&&(m.overlay=S),y&&!y.excludeFromExport&&(m.backgroundImage=this._toObject(y,f,A)),b&&!b.excludeFromExport&&(m.overlayImage=this._toObject(b,f,A)),m},svgViewportTransformation:!0,toSVG:function(f,A){f||(f={}),f.reviver=A;var m=[];return this._setSVGPreamble(m,f),this._setSVGHeader(m,f),this.clipPath&&m.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(m,"background"),this._setSVGBgOverlayImage(m,"backgroundImage",A),this._setSVGObjects(m,A),this.clipPath&&m.push(`</g>
`),this._setSVGBgOverlayColor(m,"overlay"),this._setSVGBgOverlayImage(m,"overlayImage",A),m.push("</svg>"),m.join("")},_setSVGPreamble:function(f,A){A.suppressPreamble||f.push('<?xml version="1.0" encoding="',A.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(f,A){var m=A.width||this.width,y=A.height||this.height,b,x='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;A.viewBox?x='viewBox="'+A.viewBox.x+" "+A.viewBox.y+" "+A.viewBox.width+" "+A.viewBox.height+'" ':this.svgViewportTransformation&&(b=this.viewportTransform,x='viewBox="'+u(-b[4]/b[0],S)+" "+u(-b[5]/b[3],S)+" "+u(this.width/b[0],S)+" "+u(this.height/b[3],S)+'" '),f.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',m,'" ','height="',y,'" ',x,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(A),`</defs>
`)},createSVGClipPathMarkup:function(f){var A=this.clipPath;return A?(A.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+A.clipPathId+`" >
`+this.clipPath.toClipPathSVG(f.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var f=this,A=["background","overlay"].map(function(m){var y=f[m+"Color"];if(y&&y.toLive){var b=f[m+"Vpt"],x=f.viewportTransform,S={width:f.width/(b?x[0]:1),height:f.height/(b?x[3]:1)};return y.toSVG(S,{additionalTransform:b?e.util.matrixToSVG(x):""})}});return A.join("")},createSVGFontFacesMarkup:function(){var f="",A={},m,y,b,x,S,O,R,Z,ee,re=e.fontPaths,ae=[];for(this._objects.forEach(function J(P){ae.push(P),P._objects&&P._objects.forEach(J)}),Z=0,ee=ae.length;Z<ee;Z++)if(m=ae[Z],y=m.fontFamily,!(m.type.indexOf("text")===-1||A[y]||!re[y])&&(A[y]=!0,!!m.styles)){b=m.styles;for(S in b){x=b[S];for(R in x)O=x[R],y=O.fontFamily,!A[y]&&re[y]&&(A[y]=!0)}}for(var ne in A)f+=[`		@font-face {
`,"			font-family: '",ne,`';
`,"			src: url('",re[ne],`');
`,`		}
`].join("");return f&&(f=['	<style type="text/css">',`<![CDATA[
`,f,"]]>",`</style>
`].join("")),f},_setSVGObjects:function(f,A){var m,y,b,x=this._objects;for(y=0,b=x.length;y<b;y++)m=x[y],!m.excludeFromExport&&this._setSVGObject(f,m,A)},_setSVGObject:function(f,A,m){f.push(A.toSVG(m))},_setSVGBgOverlayImage:function(f,A,m){this[A]&&!this[A].excludeFromExport&&this[A].toSVG&&f.push(this[A].toSVG(m))},_setSVGBgOverlayColor:function(f,A){var m=this[A+"Color"],y=this.viewportTransform,b=this.width,x=this.height;if(m)if(m.toLive){var S=m.repeat,O=e.util.invertTransform(y),R=this[A+"Vpt"],Z=R?e.util.matrixToSVG(O):"";f.push('<rect transform="'+Z+" translate(",b/2,",",x/2,')"',' x="',m.offsetX-b/2,'" y="',m.offsetY-x/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?m.source.width:b,'" height="',S==="repeat-x"||S==="no-repeat"?m.source.height:x,'" fill="url(#SVGID_'+m.id+')"',`></rect>
`)}else f.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',m,'"',`></rect>
`)},sendToBack:function(f){if(!f)return this;var A=this._activeObject,m,y,b;if(f===A&&f.type==="activeSelection")for(b=A._objects,m=b.length;m--;)y=b[m],d(this._objects,y),this._objects.unshift(y);else d(this._objects,f),this._objects.unshift(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(f){if(!f)return this;var A=this._activeObject,m,y,b;if(f===A&&f.type==="activeSelection")for(b=A._objects,m=0;m<b.length;m++)y=b[m],d(this._objects,y),this._objects.push(y);else d(this._objects,f),this._objects.push(f);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(f,A){if(!f)return this;var m=this._activeObject,y,b,x,S,O,R=0;if(f===m&&f.type==="activeSelection")for(O=m._objects,y=0;y<O.length;y++)b=O[y],x=this._objects.indexOf(b),x>0+R&&(S=x-1,d(this._objects,b),this._objects.splice(S,0,b)),R++;else x=this._objects.indexOf(f),x!==0&&(S=this._findNewLowerIndex(f,x,A),d(this._objects,f),this._objects.splice(S,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(f,A,m){var y,b;if(m)for(y=A,b=A-1;b>=0;--b){var x=f.intersectsWithObject(this._objects[b])||f.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(f);if(x){y=b;break}}else y=A-1;return y},bringForward:function(f,A){if(!f)return this;var m=this._activeObject,y,b,x,S,O,R=0;if(f===m&&f.type==="activeSelection")for(O=m._objects,y=O.length;y--;)b=O[y],x=this._objects.indexOf(b),x<this._objects.length-1-R&&(S=x+1,d(this._objects,b),this._objects.splice(S,0,b)),R++;else x=this._objects.indexOf(f),x!==this._objects.length-1&&(S=this._findNewUpperIndex(f,x,A),d(this._objects,f),this._objects.splice(S,0,f));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(f,A,m){var y,b,x;if(m)for(y=A,b=A+1,x=this._objects.length;b<x;++b){var S=f.intersectsWithObject(this._objects[b])||f.isContainedWithinObject(this._objects[b])||this._objects[b].isContainedWithinObject(f);if(S){y=b;break}}else y=A+1;return y},moveTo:function(f,A){return d(this._objects,f),this._objects.splice(A,0,f),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(f){f.dispose&&f.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),c(e.StaticCanvas.prototype,e.Observable),c(e.StaticCanvas.prototype,e.Collection),c(e.StaticCanvas.prototype,e.DataURLExporter),c(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(f){var A=h();if(!A||!A.getContext)return null;var m=A.getContext("2d");if(!m)return null;switch(f){case"setLineDash":return typeof m.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var f=s(this.lowerCanvasEl);return f&&f.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(f){var A=s(this.lowerCanvasEl);return A&&A.createJPEGStream(f)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(c){c.strokeStyle=this.color,c.lineWidth=this.width,c.lineCap=this.strokeLineCap,c.miterLimit=this.strokeMiterLimit,c.lineJoin=this.strokeLineJoin,c.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(c){var r=this.canvas.viewportTransform;c.save(),c.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var c=this.canvas,r=this.shadow,d=c.contextTop,u=c.getZoom();c&&c._isRetinaScaling()&&(u*=e.devicePixelRatio),d.shadowColor=r.color,d.shadowBlur=r.blur*u,d.shadowOffsetX=r.offsetX*u,d.shadowOffsetY=r.offsetY*u}},needsFullRender:function(){var c=new e.Color(this.color);return c.getAlpha()<1||!!this.shadow},_resetShadow:function(){var c=this.canvas.contextTop;c.shadowColor="",c.shadowBlur=c.shadowOffsetX=c.shadowOffsetY=0},_isOutSideCanvas:function(c){return c.x<0||c.x>this.canvas.getWidth()||c.y<0||c.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(c){this.canvas=c,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(c,r,d){var u=r.midPointFrom(d);return c.quadraticCurveTo(r.x,r.y,u.x,u.y),u},onMouseDown:function(c,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(c),this._captureDrawingPath(c),this._render())},onMouseMove:function(c,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(c))&&this._captureDrawingPath(c)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var d=this._points,u=d.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,d[u-2],d[u-1],!0),a.stroke(),a.restore()}},onMouseUp:function(c){return this.canvas._isMainEvent(c.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(c){var r=new e.Point(c.x,c.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(c){return this._points.length>1&&c.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(c),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(c){var r=new e.Point(c.x,c.y);return this._addPoint(r)},_render:function(c){var r,d,u=this._points[0],a=this._points[1];if(c=c||this.canvas.contextTop,this._saveAndTransform(c),c.beginPath(),this._points.length===2&&u.x===a.x&&u.y===a.y){var l=this.width/1e3;u=new e.Point(u.x,u.y),a=new e.Point(a.x,a.y),u.x-=l,a.x+=l}for(c.moveTo(u.x,u.y),r=1,d=this._points.length;r<d;r++)this._drawSegment(c,u,a),u=this._points[r],a=this._points[r+1];c.lineTo(u.x,u.y),c.stroke(),c.restore()},convertPointsToSVGPath:function(c){var r=this.width/1e3;return e.util.getSmoothPathFromPoints(c,r)},_isEmptySVGPath:function(c){var r=e.util.joinPath(c);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(c){var r=new e.Path(c,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new e.Shadow(this.shadow)),r},decimatePoints:function(c,r){if(c.length<=2)return c;var d=this.canvas.getZoom(),u=Math.pow(r/d,2),a,l=c.length-1,s=c[0],h=[s],g;for(a=1;a<l-1;a++)g=Math.pow(s.x-c[a].x,2)+Math.pow(s.y-c[a].y,2),g>=u&&(s=c[a],h.push(s));return h.push(c[l]),h},_finalizeAndAddPath:function(){var c=this.canvas.contextTop;c.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var d=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:d}),this.canvas.add(d),this.canvas.requestRenderAll(),d.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:d})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(c){this.canvas=c,this.points=[]},drawDot:function(c){var r=this.addPoint(c),d=this.canvas.contextTop;this._saveAndTransform(d),this.dot(d,r),d.restore()},dot:function(c,r){c.fillStyle=r.fill,c.beginPath(),c.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),c.closePath(),c.fill()},onMouseDown:function(c){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(c)},_render:function(){var c=this.canvas.contextTop,r,d,u=this.points;for(this._saveAndTransform(c),r=0,d=u.length;r<d;r++)this.dot(c,u[r]);c.restore()},onMouseMove:function(c){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(c)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(c),this._render()):this.drawDot(c))},onMouseUp:function(){var c=this.canvas.renderOnAddRemove,r,d;this.canvas.renderOnAddRemove=!1;var u=[];for(r=0,d=this.points.length;r<d;r++){var a=this.points[r],l=new e.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(l.shadow=new e.Shadow(this.shadow)),u.push(l)}var s=new e.Group(u);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=c,this.canvas.requestRenderAll()},addPoint:function(c){var r=new e.Point(c.x,c.y),d=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,u=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return r.radius=d,r.fill=u,this.points.push(r),r}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(c){this.canvas=c,this.sprayChunks=[]},onMouseDown:function(c){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(c),this.render(this.sprayChunkPoints)},onMouseMove:function(c){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(c)||(this.addSprayChunk(c),this.render(this.sprayChunkPoints))},onMouseUp:function(){var c=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],d=0,u=this.sprayChunks.length;d<u;d++)for(var a=this.sprayChunks[d],l=0,s=a.length;l<s;l++){var h=new e.Rect({width:a[l].width,height:a[l].width,left:a[l].x+1,top:a[l].y+1,originX:"center",originY:"center",fill:this.color});r.push(h)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var g=new e.Group(r);this.shadow&&g.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=c,this.canvas.requestRenderAll()},_getOptimizedRects:function(c){var r={},d,u,a;for(u=0,a=c.length;u<a;u++)d=c[u].left+""+c[u].top,r[d]||(r[d]=c[u]);var l=[];for(d in r)l.push(r[d]);return l},render:function(c){var r=this.canvas.contextTop,d,u;for(r.fillStyle=this.color,this._saveAndTransform(r),d=0,u=c.length;d<u;d++){var a=c[d];typeof a.opacity<"u"&&(r.globalAlpha=a.opacity),r.fillRect(a.x,a.y,a.width,a.width)}r.restore()},_render:function(){var c=this.canvas.contextTop,r,d;for(c.fillStyle=this.color,this._saveAndTransform(c),r=0,d=this.sprayChunks.length;r<d;r++)this.render(this.sprayChunks[r]);c.restore()},addSprayChunk:function(c){this.sprayChunkPoints=[];var r,d,u,a=this.width/2,l;for(l=0;l<this.density;l++){r=e.util.getRandomInt(c.x-a,c.x+a),d=e.util.getRandomInt(c.y-a,c.y+a),this.dotWidthVariance?u=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):u=this.dotWidth;var s=new e.Point(r,d);s.width=u,this.randomOpacity&&(s.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var c=20,r=5,d=e.util.createCanvasElement(),u=d.getContext("2d");return d.width=d.height=c+r,u.fillStyle=this.color,u.beginPath(),u.arc(c/2,c/2,c/2,0,Math.PI*2,!1),u.closePath(),u.fill(),d},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(c){return c.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(c){this.callSuper("_setBrushStyles",c),c.strokeStyle=this.getPattern(c)},createPath:function(c){var r=this.callSuper("createPath",c),d=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-d.x,offsetY:-d.y}),r}}),function(){var c=e.util.getPointer,r=e.util.degreesToRadians,d=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(a,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),l,s,h;if(a.length>0&&!this.preserveObjectStacking){s=[],h=[];for(var g=0,f=this._objects.length;g<f;g++)l=this._objects[g],a.indexOf(l)===-1?s.push(l):h.push(l);a.length>1&&(this._activeObject._objects=h),s.push.apply(s,h)}else s=this._objects;return s},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,l){var s=a.calcTransformMatrix(),h=e.util.invertTransform(s),g=this.restorePointerVpt(l);return e.util.transformPoint(g,h)},isTargetTransparent:function(a,l,s){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var h=this._normalizePointer(a,{x:l,y:s}),g=Math.max(a.cacheTranslationX+h.x*a.zoomX,0),f=Math.max(a.cacheTranslationY+h.y*a.zoomY,0),b=e.util.isTransparent(a._cacheContext,Math.round(g),Math.round(f),this.targetFindTolerance);return b}var A=this.contextCache,m=a.selectionBackgroundColor,y=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(A),A.save(),A.transform(y[0],y[1],y[2],y[3],y[4],y[5]),a.render(A),A.restore(),a.selectionBackgroundColor=m;var b=e.util.isTransparent(A,l,s,this.targetFindTolerance);return b},_isSelectionKeyPressed:function(a){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(s){return a[s]===!0}):l=a[this.selectionKey],l},_shouldClearSelection:function(a,l){var s=this.getActiveObjects(),h=this._activeObject;return!l||l&&h&&s.length>1&&s.indexOf(l)===-1&&h!==l&&!this._isSelectionKeyPressed(a)||l&&!l.evented||l&&!l.selectable&&h&&h!==l},_shouldCenterTransform:function(a,l,s){if(a){var h;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?h=this.centeredScaling||a.centeredScaling:l==="rotate"&&(h=this.centeredRotation||a.centeredRotation),h?!s:s}},_getOriginFromCorner:function(a,l){var s={x:a.originX,y:a.originY};return l==="ml"||l==="tl"||l==="bl"?s.x="right":(l==="mr"||l==="tr"||l==="br")&&(s.x="left"),l==="tl"||l==="mt"||l==="tr"?s.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(s.y="top"),s},_getActionFromCorner:function(a,l,s,h){if(!l||!a)return"drag";var g=h.controls[l];return g.getActionName(s,g,h)},_setupCurrentTransform:function(a,l,s){if(l){var h=this.getPointer(a),g=l.__corner,f=l.controls[g],A=s&&g?f.getActionHandler(a,l,f):e.controlsUtils.dragHandler,m=this._getActionFromCorner(s,g,a,l),y=this._getOriginFromCorner(l,g),b=a[this.centeredKey],x={target:l,action:m,actionHandler:A,corner:g,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:h.x-l.left,offsetY:h.y-l.top,originX:y.x,originY:y.y,ex:h.x,ey:h.y,lastX:h.x,lastY:h.y,theta:r(l.angle),width:l.width*l.scaleX,shiftKey:a.shiftKey,altKey:b,original:e.util.saveObjectTransform(l)};this._shouldCenterTransform(l,m,b)&&(x.originX="center",x.originY="center"),x.original.originX=y.x,x.original.originY=y.y,this._currentTransform=x,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var l=this._groupSelector,s=new e.Point(l.ex,l.ey),h=e.util.transformPoint(s,this.viewportTransform),g=new e.Point(l.ex+l.left,l.ey+l.top),f=e.util.transformPoint(g,this.viewportTransform),A=Math.min(h.x,f.x),m=Math.min(h.y,f.y),y=Math.max(h.x,f.x),b=Math.max(h.y,f.y),x=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(A,m,y-A,b-m)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,A+=x,m+=x,y-=x,b-=x,e.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(A,m,y-A,b-m))},findTarget:function(a,l){if(!this.skipTargetFind){var s=!0,h=this.getPointer(a,s),g=this._activeObject,f=this.getActiveObjects(),A,m,y=d(a),b=f.length>1&&!l||f.length===1;if(this.targets=[],b&&g._findTargetCorner(h,y)||f.length>1&&!l&&g===this._searchPossibleTargets([g],h))return g;if(f.length===1&&g===this._searchPossibleTargets([g],h))if(this.preserveObjectStacking)A=g,m=this.targets,this.targets=[];else return g;var x=this._searchPossibleTargets(this._objects,h);return a[this.altSelectionKey]&&x&&A&&x!==A&&(x=A,this.targets=m),x}},_checkTarget:function(a,l,s){if(l&&l.visible&&l.evented&&l.containsPoint(a))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var h=this.isTargetTransparent(l,s.x,s.y);if(!h)return!0}else return!0},_searchPossibleTargets:function(a,l){for(var s,h=a.length,g;h--;){var f=a[h],A=f.group?this._normalizePointer(f.group,l):l;if(this._checkTarget(A,f,l)){s=a[h],s.subTargetCheck&&s instanceof e.Group&&(g=this._searchPossibleTargets(s._objects,l),g&&this.targets.push(g));break}}return s},restorePointerVpt:function(a){return e.util.transformPoint(a,e.util.invertTransform(this.viewportTransform))},getPointer:function(a,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var s=c(a),h=this.upperCanvasEl,g=h.getBoundingClientRect(),f=g.width||0,A=g.height||0,m;(!f||!A)&&("top"in g&&"bottom"in g&&(A=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(f=Math.abs(g.right-g.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,l||(s=this.restorePointerVpt(s));var y=this.getRetinaScaling();return y!==1&&(s.x/=y,s.y/=y),f===0||A===0?m={width:1,height:1}:m={width:h.width/f,height:h.height/A},{x:s.x*m.width,y:s.y*m.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,s=this.upperCanvasEl;s?s.className="":(s=this._createCanvasElement(),this.upperCanvasEl=s),e.util.addClass(s,"upper-canvas "+a),this.wrapperEl.appendChild(s),this._copyCanvasStyle(l,s),this._applyCanvasStyle(s),this.contextTop=s.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var l=this.width||a.width,s=this.height||a.height;e.util.setStyle(a,{position:"absolute",width:l+"px",height:s+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=l,a.height=s,e.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,l){l.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,l){var s=!1,h=this.getActiveObjects(),g=[],f=[];a.forEach(function(A){h.indexOf(A)===-1&&(s=!0,A.fire("deselected",{e:l,target:A}),f.push(A))}),h.forEach(function(A){a.indexOf(A)===-1&&(s=!0,A.fire("selected",{e:l,target:A}),g.push(A))}),a.length>0&&h.length>0?s&&this.fire("selection:updated",{e:l,selected:g,deselected:f}):h.length>0?this.fire("selection:created",{e:l,selected:g}):a.length>0&&this.fire("selection:cleared",{e:l,deselected:f})},setActiveObject:function(a,l){var s=this.getActiveObjects();return this._setActiveObject(a,l),this._fireSelectionEvents(s,l),this},_setActiveObject:function(a,l){return this._activeObject===a||!this._discardActiveObject(l,a)||a.onSelect({e:l})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,l){var s=this._activeObject;if(s){if(s.onDeselect({e:a,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var l=this.getActiveObjects(),s=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:s,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(l,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(l){e.util.cleanUpJsdomNode(this[l]),this[l]=void 0}.bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var l=this._activeObject;l&&l._renderControls(a)},_toObject:function(a,l,s){var h=this._realizeGroupTransformOnObject(a),g=this.callSuper("_toObject",a,l,s);return this._unwindGroupTransformOnObject(a,h),g},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],s={};return l.forEach(function(h){s[h]=a[h]}),e.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),s}else return null},_unwindGroupTransformOnObject:function(a,l){l&&a.set(l)},_setSVGObject:function(a,l,s){var h=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",a,l,s),this._unwindGroupTransformOnObject(l,h)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var u in e.StaticCanvas)u!=="prototype"&&(e.Canvas[u]=e.StaticCanvas[u])}(),function(){var c=e.util.addListener,r=e.util.removeListener,d=3,u=2,a=1,l={passive:!1};function s(h,g){return h.button&&h.button===g-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(c,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(h,g){var f=this.upperCanvasEl,A=this._getEventPrefix();h(e.window,"resize",this._onResize),h(f,A+"down",this._onMouseDown),h(f,A+"move",this._onMouseMove,l),h(f,A+"out",this._onMouseOut),h(f,A+"enter",this._onMouseEnter),h(f,"wheel",this._onMouseWheel),h(f,"contextmenu",this._onContextMenu),h(f,"dblclick",this._onDoubleClick),h(f,"dragover",this._onDragOver),h(f,"dragenter",this._onDragEnter),h(f,"dragleave",this._onDragLeave),h(f,"drop",this._onDrop),this.enablePointerEvents||h(f,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](f,"gesture",this._onGesture),eventjs[g](f,"drag",this._onDrag),eventjs[g](f,"orientation",this._onOrientationChange),eventjs[g](f,"shake",this._onShake),eventjs[g](f,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var h=this._getEventPrefix();r(e.document,h+"up",this._onMouseUp),r(e.document,"touchend",this._onTouchEnd,l),r(e.document,h+"move",this._onMouseMove,l),r(e.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(h,g){this.__onTransformGesture&&this.__onTransformGesture(h,g)},_onDrag:function(h,g){this.__onDrag&&this.__onDrag(h,g)},_onMouseWheel:function(h){this.__onMouseWheel(h)},_onMouseOut:function(h){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:h}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:h});var f=this;this._hoveredTargets.forEach(function(A){f.fire("mouse:out",{target:g,e:h}),A&&g.fire("mouseout",{e:h})}),this._hoveredTargets=[]},_onMouseEnter:function(h){!this._currentTransform&&!this.findTarget(h)&&(this.fire("mouse:over",{target:null,e:h}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(h,g){this.__onOrientationChange&&this.__onOrientationChange(h,g)},_onShake:function(h,g){this.__onShake&&this.__onShake(h,g)},_onLongPress:function(h,g){this.__onLongPress&&this.__onLongPress(h,g)},_onDragOver:function(h){h.preventDefault();var g=this._simpleEventHandler("dragover",h);this._fireEnterLeaveEvents(g,h)},_onDrop:function(h){return this._simpleEventHandler("drop:before",h),this._simpleEventHandler("drop",h)},_onContextMenu:function(h){return this.stopContextMenu&&(h.stopPropagation(),h.preventDefault()),!1},_onDoubleClick:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"dblclick"),this._resetTransformEventData(h)},getPointerId:function(h){var g=h.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?h.pointerId:-1},_isMainEvent:function(h){return h.isPrimary===!0?!0:h.isPrimary===!1?!1:h.type==="touchend"&&h.touches.length===0?!0:h.changedTouches?h.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(h){h.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(h)),this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();c(e.document,"touchend",this._onTouchEnd,l),c(e.document,"touchmove",this._onMouseMove,l),r(g,f+"down",this._onMouseDown)},_onMouseDown:function(h){this.__onMouseDown(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();r(g,f+"move",this._onMouseMove,l),c(e.document,f+"up",this._onMouseUp),c(e.document,f+"move",this._onMouseMove,l)},_onTouchEnd:function(h){if(!(h.touches.length>0)){this.__onMouseUp(h),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,l),r(e.document,"touchmove",this._onMouseMove,l);var f=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){c(f.upperCanvasEl,g+"down",f._onMouseDown),f._willAddMouseDown=0},400)}},_onMouseUp:function(h){this.__onMouseUp(h),this._resetTransformEventData();var g=this.upperCanvasEl,f=this._getEventPrefix();this._isMainEvent(h)&&(r(e.document,f+"up",this._onMouseUp),r(e.document,f+"move",this._onMouseMove,l),c(g,f+"move",this._onMouseMove,l))},_onMouseMove:function(h){!this.allowTouchScrolling&&h.preventDefault&&h.preventDefault(),this.__onMouseMove(h)},_onResize:function(){this.calcOffset()},_shouldRender:function(h){var g=this._activeObject;return!!g!=!!h||g&&h&&g!==h?!0:(g&&g.isEditing,!1)},__onMouseUp:function(h){var g,f=this._currentTransform,A=this._groupSelector,m=!1,y=!A||A.left===0&&A.top===0;if(this._cacheTransformEventData(h),g=this._target,this._handleEvent(h,"up:before"),s(h,d)){this.fireRightClick&&this._handleEvent(h,"up",d,y);return}if(s(h,u)){this.fireMiddleClick&&this._handleEvent(h,"up",u,y),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(h);return}if(this._isMainEvent(h)){if(f&&(this._finalizeCurrentTransform(h),m=f.actionPerformed),!y){var b=g===this._activeObject;this._maybeGroupObjects(h),m||(m=this._shouldRender(g)||!b&&g===this._activeObject)}var x,S;if(g){if(x=g._findTargetCorner(this.getPointer(h,!0),e.util.isTouchEvent(h)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,h),m=!0;else{var O=g.controls[x],R=O&&O.getMouseUpHandler(h,g,O);R&&(S=this.getPointer(h),R(h,f,S.x,S.y))}g.isMoving=!1}if(f&&(f.target!==g||f.corner!==x)){var Z=f.target&&f.target.controls[f.corner],ee=Z&&Z.getMouseUpHandler(h,g,O);S=S||this.getPointer(h),ee&&ee(h,f,S.x,S.y)}this._setCursorFromEvent(h,g),this._handleEvent(h,"up",a,y),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),m?this.requestRenderAll():y||this.renderTop()}},_simpleEventHandler:function(h,g){var f=this.findTarget(g),A=this.targets,m={e:g,target:f,subTargets:A};if(this.fire(h,m),f&&f.fire(h,m),!A)return f;for(var y=0;y<A.length;y++)A[y].fire(h,m);return f},_handleEvent:function(h,g,f,A){var m=this._target,y=this.targets||[],b={e:h,target:m,subTargets:y,button:f||a,isClick:A||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(b.currentTarget=this.findTarget(h),b.currentSubTargets=this.targets),this.fire("mouse:"+g,b),m&&m.fire("mouse"+g,b);for(var x=0;x<y.length;x++)y[x].fire("mouse"+g,b)},_finalizeCurrentTransform:function(h){var g=this._currentTransform,f=g.target,A={e:h,target:f,transform:g,action:g.action};f._scaling&&(f._scaling=!1),f.setCoords(),(g.actionPerformed||this.stateful&&f.hasStateChanged())&&this._fire("modified",A)},_onMouseDownInDrawingMode:function(h){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(h).requestRenderAll();var g=this.getPointer(h);this.freeDrawingBrush.onMouseDown(g,{e:h,pointer:g}),this._handleEvent(h,"down")},_onMouseMoveInDrawingMode:function(h){if(this._isCurrentlyDrawing){var g=this.getPointer(h);this.freeDrawingBrush.onMouseMove(g,{e:h,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(h,"move")},_onMouseUpInDrawingMode:function(h){var g=this.getPointer(h);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:h,pointer:g}),this._handleEvent(h,"up")},__onMouseDown:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"down:before");var g=this._target;if(s(h,d)){this.fireRightClick&&this._handleEvent(h,"down",d);return}if(s(h,u)){this.fireMiddleClick&&this._handleEvent(h,"down",u);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(h);return}if(this._isMainEvent(h)&&!this._currentTransform){var f=this._pointer;this._previousPointer=f;var A=this._shouldRender(g),m=this._shouldGroup(h,g);if(this._shouldClearSelection(h,g)?this.discardActiveObject(h):m&&(this._handleGrouping(h,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var y=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,h);var b=g._findTargetCorner(this.getPointer(h,!0),e.util.isTouchEvent(h));if(g.__corner=b,g===this._activeObject&&(b||!m)){this._setupCurrentTransform(h,g,y);var x=g.controls[b],f=this.getPointer(h),S=x&&x.getMouseDownHandler(h,g,x);S&&S(h,this._currentTransform,f.x,f.y)}}this._handleEvent(h,"down"),(A||m)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(h){this._resetTransformEventData(),this._pointer=this.getPointer(h,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(h)||null},_beforeTransform:function(h){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:h,transform:g})},__onMouseMove:function(h){this._handleEvent(h,"move:before"),this._cacheTransformEventData(h);var g,f;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(h);return}if(this._isMainEvent(h)){var A=this._groupSelector;A?(f=this._absolutePointer,A.left=f.x-A.ex,A.top=f.y-A.ey,this.renderTop()):this._currentTransform?this._transformObject(h):(g=this.findTarget(h)||null,this._setCursorFromEvent(h,g),this._fireOverOutEvents(g,h)),this._handleEvent(h,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(h,g){var f=this._hoveredTarget,A=this._hoveredTargets,m=this.targets,y=Math.max(A.length,m.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:f,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<y;b++)this.fireSyntheticInOutEvents(m[b],g,{oldTarget:A[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=h,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(h,g){var f=this._draggedoverTarget,A=this._hoveredTargets,m=this.targets,y=Math.max(A.length,m.length);this.fireSyntheticInOutEvents(h,g,{oldTarget:f,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<y;b++)this.fireSyntheticInOutEvents(m[b],g,{oldTarget:A[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=h},fireSyntheticInOutEvents:function(h,g,f){var A,m,y=f.oldTarget,b,x,S=y!==h,O=f.canvasEvtIn,R=f.canvasEvtOut;S&&(A={e:g,target:h,previousTarget:y},m={e:g,target:y,nextTarget:h}),x=h&&S,b=y&&S,b&&(R&&this.fire(R,m),y.fire(f.evtOut,m)),x&&(O&&this.fire(O,A),h.fire(f.evtIn,A))},__onMouseWheel:function(h){this._cacheTransformEventData(h),this._handleEvent(h,"wheel"),this._resetTransformEventData()},_transformObject:function(h){var g=this.getPointer(h),f=this._currentTransform;f.reset=!1,f.shiftKey=h.shiftKey,f.altKey=h[this.centeredKey],this._performTransformAction(h,f,g),f.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(h,g,f){var A=f.x,m=f.y,y=g.action,b=!1,x=g.actionHandler;x&&(b=x(h,g,A,m)),y==="drag"&&b&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||b},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(h,g){if(!g)return this.setCursor(this.defaultCursor),!1;var f=g.hoverCursor||this.hoverCursor,A=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,m=(!A||!A.contains(g))&&g._findTargetCorner(this.getPointer(h,!0));m?this.setCursor(this.getCornerCursor(m,g,h)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(y){f=y.hoverCursor||f}),this.setCursor(f))},getCornerCursor:function(h,g,f){var A=g.controls[h];return A.cursorStyleHandler(f,A,g)}})}(),function(){var c=Math.min,r=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(d,u){var a=this._activeObject;return a&&this._isSelectionKeyPressed(d)&&u&&u.selectable&&this.selection&&(a!==u||a.type==="activeSelection")&&!u.onSelect({e:d})},_handleGrouping:function(d,u){var a=this._activeObject;a.__corner||u===a&&(u=this.findTarget(d,!0),!u||!u.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(u,d):this._createActiveSelection(u,d))},_updateActiveSelection:function(d,u){var a=this._activeObject,l=a._objects.slice(0);a.contains(d)?(a.removeWithUpdate(d),this._hoveredTarget=d,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),u)):(a.addWithUpdate(d),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,u)},_createActiveSelection:function(d,u){var a=this.getActiveObjects(),l=this._createGroup(d);this._hoveredTarget=l,this._setActiveObject(l,u),this._fireSelectionEvents(a,u)},_createGroup:function(d){var u=this._objects,a=u.indexOf(this._activeObject)<u.indexOf(d),l=a?[this._activeObject,d]:[d,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(d){var u=this._collectObjects(d),a;u.length===1?this.setActiveObject(u[0],d):u.length>1&&(a=new e.ActiveSelection(u.reverse(),{canvas:this}),this.setActiveObject(a,d))},_collectObjects:function(d){for(var u=[],a,l=this._groupSelector.ex,s=this._groupSelector.ey,h=l+this._groupSelector.left,g=s+this._groupSelector.top,f=new e.Point(c(l,h),c(s,g)),A=new e.Point(r(l,h),r(s,g)),m=!this.selectionFullyContained,y=l===h&&s===g,b=this._objects.length;b--&&(a=this._objects[b],!(!(!a||!a.selectable||!a.visible)&&(m&&a.intersectsWithRect(f,A,!0)||a.isContainedWithinRect(f,A,!0)||m&&a.containsPoint(f,null,!0)||m&&a.containsPoint(A,null,!0))&&(u.push(a),y))););return u.length>1&&(u=u.filter(function(x){return!x.onSelect({e:d})})),u},_maybeGroupObjects:function(d){this.selection&&this._groupSelector&&this._groupSelectedObjects(d),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(c){c||(c={});var r=c.format||"png",d=c.quality||1,u=(c.multiplier||1)*(c.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(u,c);return e.util.toDataURL(a,r,d)},toCanvasElement:function(c,r){c=c||1,r=r||{};var d=(r.width||this.width)*c,u=(r.height||this.height)*c,a=this.getZoom(),l=this.width,s=this.height,h=a*c,g=this.viewportTransform,f=(g[4]-(r.left||0))*c,A=(g[5]-(r.top||0))*c,m=this.interactive,y=[h,0,0,h,f,A],b=this.enableRetinaScaling,x=e.util.createCanvasElement(),S=this.contextTop;return x.width=d,x.height=u,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=y,this.width=d,this.height=u,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),this._objects),this.viewportTransform=g,this.width=l,this.height=s,this.calcViewportBoundaries(),this.interactive=m,this.enableRetinaScaling=b,this.contextTop=S,x}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(c,r,d){if(c){var u=typeof c=="string"?JSON.parse(c):e.util.object.clone(c),a=this,l=u.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete u.clipPath,this._enlivenObjects(u.objects,function(h){a.clear(),a._setBgOverlay(u,function(){l?a._enlivenObjects([l],function(g){a.clipPath=g[0],a.__setupCanvas.call(a,u,h,s,r)}):a.__setupCanvas.call(a,u,h,s,r)})},d),this}},__setupCanvas:function(c,r,d,u){var a=this;r.forEach(function(l,s){a.insertAt(l,s)}),this.renderOnAddRemove=d,delete c.objects,delete c.backgroundImage,delete c.overlayImage,delete c.background,delete c.overlay,this._setOptions(c),this.renderAll(),u&&u()},_setBgOverlay:function(c,r){var d={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!c.backgroundImage&&!c.overlayImage&&!c.background&&!c.overlay){r&&r();return}var u=function(){d.backgroundImage&&d.overlayImage&&d.backgroundColor&&d.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",c.backgroundImage,d,u),this.__setBgOverlay("overlayImage",c.overlayImage,d,u),this.__setBgOverlay("backgroundColor",c.background,d,u),this.__setBgOverlay("overlayColor",c.overlay,d,u)},__setBgOverlay:function(c,r,d,u){var a=this;if(!r){d[c]=!0,u&&u();return}c==="backgroundImage"||c==="overlayImage"?e.util.enlivenObjects([r],function(l){a[c]=l[0],d[c]=!0,u&&u()}):this["set"+e.util.string.capitalize(c,!0)](r,function(){d[c]=!0,u&&u()})},_enlivenObjects:function(c,r,d){if(!c||c.length===0){r&&r([]);return}e.util.enlivenObjects(c,function(u){r&&r(u)},null,d)},_toDataURL:function(c,r){this.clone(function(d){r(d.toDataURL(c))})},_toDataURLWithMultiplier:function(c,r,d){this.clone(function(u){d(u.toDataURLWithMultiplier(c,r))})},clone:function(c,r){var d=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(u){u.loadFromJSON(d,function(){c&&c(u)})})},cloneWithoutData:function(c){var r=e.util.createCanvasElement();r.width=this.width,r.height=this.height;var d=new e.Canvas(r);this.backgroundImage?(d.setBackgroundImage(this.backgroundImage.src,function(){d.renderAll(),c&&c(d)}),d.backgroundImageOpacity=this.backgroundImageOpacity,d.backgroundImageStretch=this.backgroundImageStretch):c&&c(d)}}),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.util.object.clone,a=r.util.toFixed,l=r.util.string.capitalize,s=r.util.degreesToRadians,h=!r.isLikelyNode,g=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:h,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(f){f&&this.setOptions(f)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(f){var A=r.perfLimitSizeTotal,m=f.width,y=f.height,b=r.maxCacheSideLimit,x=r.minCacheSideLimit;if(m<=b&&y<=b&&m*y<=A)return m<x&&(f.width=x),y<x&&(f.height=x),f;var S=m/y,O=r.util.limitDimsByArea(S,A),R=r.util.capValue,Z=R(x,O.x,b),ee=R(x,O.y,b);return m>Z&&(f.zoomX/=m/Z,f.width=Z,f.capped=!0),y>ee&&(f.zoomY/=y/ee,f.height=ee,f.capped=!0),f},_getCacheCanvasDimensions:function(){var f=this.getTotalObjectScaling(),A=this._getTransformedDimensions(0,0),m=A.x*f.scaleX/this.scaleX,y=A.y*f.scaleY/this.scaleY;return{width:m+g,height:y+g,zoomX:f.scaleX,zoomY:f.scaleY,x:m,y}},_updateCacheCanvas:function(){var f=this.canvas;if(this.noScaleCache&&f&&f._currentTransform){var A=f._currentTransform.target,m=f._currentTransform.action;if(this===A&&m.slice&&m.slice(0,5)==="scale")return!1}var y=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),x=r.minCacheSideLimit,S=b.width,O=b.height,R,Z,ee=b.zoomX,re=b.zoomY,ae=S!==this.cacheWidth||O!==this.cacheHeight,ne=this.zoomX!==ee||this.zoomY!==re,J=ae||ne,P=0,U=0,W=!1;if(ae){var F=this._cacheCanvas.width,E=this._cacheCanvas.height,k=S>F||O>E,L=(S<F*.9||O<E*.9)&&F>x&&E>x;W=k||L,k&&!b.capped&&(S>x||O>x)&&(P=S*.1,U=O*.1)}return this instanceof r.Text&&this.path&&(J=!0,W=!0,P+=this.getHeightOfLine(0)*this.zoomX,U+=this.getHeightOfLine(0)*this.zoomY),J?(W?(y.width=Math.ceil(S+P),y.height=Math.ceil(O+U)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,y.width,y.height)),R=b.x/2,Z=b.y/2,this.cacheTranslationX=Math.round(y.width/2-R)+R,this.cacheTranslationY=Math.round(y.height/2-Z)+Z,this.cacheWidth=S,this.cacheHeight=O,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(ee,re),this.zoomX=ee,this.zoomY=re,!0):!1},setOptions:function(f){this._setOptions(f),this._initGradient(f.fill,"fill"),this._initGradient(f.stroke,"stroke"),this._initPattern(f.fill,"fill"),this._initPattern(f.stroke,"stroke")},transform:function(f){var A=this.group&&!this.group._transformDone||this.group&&this.canvas&&f===this.canvas.contextTop,m=this.calcTransformMatrix(!A);f.transform(m[0],m[1],m[2],m[3],m[4],m[5])},toObject:function(f){var A=r.Object.NUM_FRACTION_DIGITS,m={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:a(this.left,A),top:a(this.top,A),width:a(this.width,A),height:a(this.height,A),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,A),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,A),scaleX:a(this.scaleX,A),scaleY:a(this.scaleY,A),angle:a(this.angle,A),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,A),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,A),skewY:a(this.skewY,A)};return this.clipPath&&!this.clipPath.excludeFromExport&&(m.clipPath=this.clipPath.toObject(f),m.clipPath.inverted=this.clipPath.inverted,m.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,m,f),this.includeDefaultValues||(m=this._removeDefaultValues(m)),m},toDatalessObject:function(f){return this.toObject(f)},_removeDefaultValues:function(f){var A=r.util.getKlass(f.type).prototype,m=A.stateProperties;return m.forEach(function(y){y==="left"||y==="top"||(f[y]===A[y]&&delete f[y],Array.isArray(f[y])&&Array.isArray(A[y])&&f[y].length===0&&A[y].length===0&&delete f[y])}),f},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var f=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(f.scaleX),scaleY:Math.abs(f.scaleY)}},getTotalObjectScaling:function(){var f=this.getObjectScaling(),A=f.scaleX,m=f.scaleY;if(this.canvas){var y=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();A*=y*b,m*=y*b}return{scaleX:A,scaleY:m}},getObjectOpacity:function(){var f=this.opacity;return this.group&&(f*=this.group.getObjectOpacity()),f},_set:function(f,A){var m=f==="scaleX"||f==="scaleY",y=this[f]!==A,b=!1;return m&&(A=this._constrainScale(A)),f==="scaleX"&&A<0?(this.flipX=!this.flipX,A*=-1):f==="scaleY"&&A<0?(this.flipY=!this.flipY,A*=-1):f==="shadow"&&A&&!(A instanceof r.Shadow)?A=new r.Shadow(A):f==="dirty"&&this.group&&this.group.set("dirty",A),this[f]=A,y&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(f)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(f)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(f){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(f.save(),this._setupCompositeOperation(f),this.drawSelectionBackground(f),this.transform(f),this._setOpacity(f),this._setShadow(f,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(f)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(f),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),f.restore())},renderCache:function(f){f=f||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,f.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(f,A){if(f.save(),A.inverted?f.globalCompositeOperation="destination-out":f.globalCompositeOperation="destination-in",A.absolutePositioned){var m=r.util.invertTransform(this.calcTransformMatrix());f.transform(m[0],m[1],m[2],m[3],m[4],m[5])}A.transform(f),f.scale(1/A.zoomX,1/A.zoomY),f.drawImage(A._cacheCanvas,-A.cacheTranslationX,-A.cacheTranslationY),f.restore()},drawObject:function(f,A){var m=this.fill,y=this.stroke;A?(this.fill="black",this.stroke="",this._setClippingProperties(f)):this._renderBackground(f),this._render(f),this._drawClipPath(f,this.clipPath),this.fill=m,this.stroke=y},_drawClipPath:function(f,A){A&&(A.canvas=this.canvas,A.shouldCache(),A._transformDone=!0,A.renderCache({forClipping:!0}),this.drawClipPathOnCache(f,A))},drawCacheOnCanvas:function(f){f.scale(1/this.zoomX,1/this.zoomY),f.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(f){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!f&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!f){var A=this.cacheWidth/this.zoomX,m=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-A/2,-m/2,A,m)}return!0}return!1},_renderBackground:function(f){if(this.backgroundColor){var A=this._getNonTransformedDimensions();f.fillStyle=this.backgroundColor,f.fillRect(-A.x/2,-A.y/2,A.x,A.y),this._removeShadow(f)}},_setOpacity:function(f){this.group&&!this.group._transformDone?f.globalAlpha=this.getObjectOpacity():f.globalAlpha*=this.opacity},_setStrokeStyles:function(f,A){var m=A.stroke;m&&(f.lineWidth=A.strokeWidth,f.lineCap=A.strokeLineCap,f.lineDashOffset=A.strokeDashOffset,f.lineJoin=A.strokeLineJoin,f.miterLimit=A.strokeMiterLimit,m.toLive?m.gradientUnits==="percentage"||m.gradientTransform||m.patternTransform?this._applyPatternForTransformedGradient(f,m):(f.strokeStyle=m.toLive(f,this),this._applyPatternGradientTransform(f,m)):f.strokeStyle=A.stroke)},_setFillStyles:function(f,A){var m=A.fill;m&&(m.toLive?(f.fillStyle=m.toLive(f,this),this._applyPatternGradientTransform(f,A.fill)):f.fillStyle=m)},_setClippingProperties:function(f){f.globalAlpha=1,f.strokeStyle="transparent",f.fillStyle="#000000"},_setLineDash:function(f,A){!A||A.length===0||(1&A.length&&A.push.apply(A,A),f.setLineDash(A))},_renderControls:function(f,A){var m=this.getViewportTransform(),y=this.calcTransformMatrix(),b,x,S;A=A||{},x=typeof A.hasBorders<"u"?A.hasBorders:this.hasBorders,S=typeof A.hasControls<"u"?A.hasControls:this.hasControls,y=r.util.multiplyTransformMatrices(m,y),b=r.util.qrDecompose(y),f.save(),f.translate(b.translateX,b.translateY),f.lineWidth=1*this.borderScaleFactor,this.group||(f.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(b.angle-=180),f.rotate(s(this.group?b.angle:this.angle)),A.forActiveSelection||this.group?x&&this.drawBordersInGroup(f,b,A):x&&this.drawBorders(f,A),S&&this.drawControls(f,A),f.restore()},_setShadow:function(f){if(this.shadow){var A=this.shadow,m=this.canvas,y,b=m&&m.viewportTransform[0]||1,x=m&&m.viewportTransform[3]||1;A.nonScaling?y={scaleX:1,scaleY:1}:y=this.getObjectScaling(),m&&m._isRetinaScaling()&&(b*=r.devicePixelRatio,x*=r.devicePixelRatio),f.shadowColor=A.color,f.shadowBlur=A.blur*r.browserShadowBlurConstant*(b+x)*(y.scaleX+y.scaleY)/4,f.shadowOffsetX=A.offsetX*b*y.scaleX,f.shadowOffsetY=A.offsetY*x*y.scaleY}},_removeShadow:function(f){this.shadow&&(f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0)},_applyPatternGradientTransform:function(f,A){if(!A||!A.toLive)return{offsetX:0,offsetY:0};var m=A.gradientTransform||A.patternTransform,y=-this.width/2+A.offsetX||0,b=-this.height/2+A.offsetY||0;return A.gradientUnits==="percentage"?f.transform(this.width,0,0,this.height,y,b):f.transform(1,0,0,1,y,b),m&&f.transform(m[0],m[1],m[2],m[3],m[4],m[5]),{offsetX:y,offsetY:b}},_renderPaintInOrder:function(f){this.paintFirst==="stroke"?(this._renderStroke(f),this._renderFill(f)):(this._renderFill(f),this._renderStroke(f))},_render:function(){},_renderFill:function(f){this.fill&&(f.save(),this._setFillStyles(f,this),this.fillRule==="evenodd"?f.fill("evenodd"):f.fill(),f.restore())},_renderStroke:function(f){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(f),f.save(),this.strokeUniform&&this.group){var A=this.getObjectScaling();f.scale(1/A.scaleX,1/A.scaleY)}else this.strokeUniform&&f.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(f,this.strokeDashArray),this._setStrokeStyles(f,this),f.stroke(),f.restore()}},_applyPatternForTransformedGradient:function(f,A){var m=this._limitCacheSize(this._getCacheCanvasDimensions()),y=r.util.createCanvasElement(),b,x=this.canvas.getRetinaScaling(),S=m.x/this.scaleX/x,O=m.y/this.scaleY/x;y.width=S,y.height=O,b=y.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(S,0),b.lineTo(S,O),b.lineTo(0,O),b.closePath(),b.translate(S/2,O/2),b.scale(m.zoomX/this.scaleX/x,m.zoomY/this.scaleY/x),this._applyPatternGradientTransform(b,A),b.fillStyle=A.toLive(f),b.fill(),f.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),f.scale(x*this.scaleX/m.zoomX,x*this.scaleY/m.zoomY),f.strokeStyle=b.createPattern(y,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var f=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",f.scaleX),this.set("scaleY",f.scaleY),this.angle=f.angle,this.skewX=f.skewX,this.skewY=0}},_removeTransformMatrix:function(f){var A=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),A=r.util.transformPoint(A,this.transformMatrix)),this.transformMatrix=null,f&&(this.scaleX*=f.scaleX,this.scaleY*=f.scaleY,this.cropX=f.cropX,this.cropY=f.cropY,A.x+=f.offsetLeft,A.y+=f.offsetTop,this.width=f.width,this.height=f.height),this.setPositionByOrigin(A,"center","center")},clone:function(f,A){var m=this.toObject(A);this.constructor.fromObject?this.constructor.fromObject(m,f):r.Object._fromObject("Object",m,f)},cloneAsImage:function(f,A){var m=this.toCanvasElement(A);return f&&f(new r.Image(m)),this},toCanvasElement:function(f){f||(f={});var A=r.util,m=A.saveObjectTransform(this),y=this.group,b=this.shadow,x=Math.abs,S=(f.multiplier||1)*(f.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,f.withoutTransform&&A.resetObjectTransform(this),f.withoutShadow&&(this.shadow=null);var O=r.util.createCanvasElement(),R=this.getBoundingRect(!0,!0),Z=this.shadow,ee,re={x:0,y:0},ae,ne,J;Z&&(ae=Z.blur,Z.nonScaling?ee={scaleX:1,scaleY:1}:ee=this.getObjectScaling(),re.x=2*Math.round(x(Z.offsetX)+ae)*x(ee.scaleX),re.y=2*Math.round(x(Z.offsetY)+ae)*x(ee.scaleY)),ne=R.width+re.x,J=R.height+re.y,O.width=Math.ceil(ne),O.height=Math.ceil(J);var P=new r.StaticCanvas(O,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});f.format==="jpeg"&&(P.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(P.width/2,P.height/2),"center","center");var U=this.canvas;P.add(this);var W=P.toCanvasElement(S||1,f);return this.shadow=b,this.set("canvas",U),y&&(this.group=y),this.set(m).setCoords(),P._objects=[],P.dispose(),P=null,W},toDataURL:function(f){return f||(f={}),r.util.toDataURL(this.toCanvasElement(f),f.format||"png",f.quality||1)},isType:function(f){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===f},complexity:function(){return 1},toJSON:function(f){return this.toObject(f)},rotate:function(f){var A=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return A&&this._setOriginToCenter(),this.set("angle",f),A&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(f,A){A=A||this.canvas.getPointer(f);var m=new r.Point(A.x,A.y),y=this._getLeftTopCoords();return this.angle&&(m=r.util.rotatePoint(m,y,s(-this.angle))),{x:m.x-y.x,y:m.y-y.y}},_setupCompositeOperation:function(f){this.globalCompositeOperation&&(f.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),d(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(f,A,m,y){var b=r[f];A=u(A,!0),r.util.enlivenPatterns([A.fill,A.stroke],function(x){typeof x[0]<"u"&&(A.fill=x[0]),typeof x[1]<"u"&&(A.stroke=x[1]),r.util.enlivenObjectEnlivables(A,A,function(){var S=y?new b(A[y],A):new b(A);m&&m(S)})})},r.Object.__uid=0)}(t),function(){var c=e.util.degreesToRadians,r={left:-.5,center:0,right:.5},d={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(u,a,l,s,h){var g=u.x,f=u.y,A,m,y;return typeof a=="string"?a=r[a]:a-=.5,typeof s=="string"?s=r[s]:s-=.5,A=s-a,typeof l=="string"?l=d[l]:l-=.5,typeof h=="string"?h=d[h]:h-=.5,m=h-l,(A||m)&&(y=this._getTransformedDimensions(),g=u.x+A*y.x,f=u.y+m*y.y),new e.Point(g,f)},translateToCenterPoint:function(u,a,l){var s=this.translateToGivenOrigin(u,a,l,"center","center");return this.angle?e.util.rotatePoint(s,u,c(this.angle)):s},translateToOriginPoint:function(u,a,l){var s=this.translateToGivenOrigin(u,"center","center",a,l);return this.angle?e.util.rotatePoint(s,u,c(this.angle)):s},getCenterPoint:function(){var u=new e.Point(this.left,this.top);return this.translateToCenterPoint(u,this.originX,this.originY)},getPointByOrigin:function(u,a){var l=this.getCenterPoint();return this.translateToOriginPoint(l,u,a)},toLocalPoint:function(u,a,l){var s=this.getCenterPoint(),h,g;return typeof a<"u"&&typeof l<"u"?h=this.translateToGivenOrigin(s,"center","center",a,l):h=new e.Point(this.left,this.top),g=new e.Point(u.x,u.y),this.angle&&(g=e.util.rotatePoint(g,s,-c(this.angle))),g.subtractEquals(h)},setPositionByOrigin:function(u,a,l){var s=this.translateToCenterPoint(u,a,l),h=this.translateToOriginPoint(s,this.originX,this.originY);this.set("left",h.x),this.set("top",h.y)},adjustPosition:function(u){var a=c(this.angle),l=this.getScaledWidth(),s=e.util.cos(a)*l,h=e.util.sin(a)*l,g,f;typeof this.originX=="string"?g=r[this.originX]:g=this.originX-.5,typeof u=="string"?f=r[u]:f=u-.5,this.left+=s*(f-g),this.top+=h*(f-g),this.setCoords(),this.originX=u},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var u=this.getCenterPoint();this.originX="center",this.originY="center",this.left=u.x,this.top=u.y},_resetOrigin:function(){var u=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=u.x,this.top=u.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function c(l){return[new e.Point(l.tl.x,l.tl.y),new e.Point(l.tr.x,l.tr.y),new e.Point(l.br.x,l.br.y),new e.Point(l.bl.x,l.bl.y)]}var r=e.util,d=r.degreesToRadians,u=r.multiplyTransformMatrices,a=r.transformPoint;r.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,s){return s?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,s){return c(this._getCoords(l,s))},intersectsWithRect:function(l,s,h,g){var f=this.getCoords(h,g),A=e.Intersection.intersectPolygonRectangle(f,l,s);return A.status==="Intersection"},intersectsWithObject:function(l,s,h){var g=e.Intersection.intersectPolygonPolygon(this.getCoords(s,h),l.getCoords(s,h));return g.status==="Intersection"||l.isContainedWithinObject(this,s,h)||this.isContainedWithinObject(l,s,h)},isContainedWithinObject:function(l,s,h){for(var g=this.getCoords(s,h),f=s?l.aCoords:l.lineCoords,A=0,m=l._getImageLines(f);A<4;A++)if(!l.containsPoint(g[A],m))return!1;return!0},isContainedWithinRect:function(l,s,h,g){var f=this.getBoundingRect(h,g);return f.left>=l.x&&f.left+f.width<=s.x&&f.top>=l.y&&f.top+f.height<=s.y},containsPoint:function(l,A,h,g){var f=this._getCoords(h,g),A=A||this._getImageLines(f),m=this._findCrossPoints(l,A);return m!==0&&m%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br,g=this.getCoords(!0,l);return g.some(function(f){return f.x<=h.x&&f.x>=s.x&&f.y<=h.y&&f.y>=s.y})||this.intersectsWithRect(s,h,!0,l)?!0:this._containsCenterOfCanvas(s,h,l)},_containsCenterOfCanvas:function(l,s,h){var g={x:(l.x+s.x)/2,y:(l.y+s.y)/2};return!!this.containsPoint(g,null,!0,h)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var s=this.canvas.vptCoords.tl,h=this.canvas.vptCoords.br;if(this.intersectsWithRect(s,h,!0,l))return!0;var g=this.getCoords(!0,l).every(function(f){return(f.x>=h.x||f.x<=s.x)&&(f.y>=h.y||f.y<=s.y)});return g&&this._containsCenterOfCanvas(s,h,l)},_getImageLines:function(l){var s={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return s},_findCrossPoints:function(l,s){var h,g,f,A,m,y=0,b;for(var x in s)if(b=s[x],!(b.o.y<l.y&&b.d.y<l.y)&&!(b.o.y>=l.y&&b.d.y>=l.y)&&(b.o.x===b.d.x&&b.o.x>=l.x?m=b.o.x:(h=0,g=(b.d.y-b.o.y)/(b.d.x-b.o.x),f=l.y-h*l.x,A=b.o.y-g*b.o.x,m=-(f-A)/(h-g)),m>=l.x&&(y+=1),y===2))break;return y},getBoundingRect:function(l,s){var h=this.getCoords(l,s);return r.makeBoundingBoxFromPoints(h)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,s){var h=this.getBoundingRect(s).width/this.getScaledWidth();return this.scale(l/this.width/h)},scaleToHeight:function(l,s){var h=this.getBoundingRect(s).height/this.getScaledHeight();return this.scale(l/this.height/h)},calcLineCoords:function(){var l=this.getViewportTransform(),s=this.padding,h=d(this.angle),g=r.cos(h),f=r.sin(h),A=g*s,m=f*s,y=A+m,b=A-m,x=this.calcACoords(),S={tl:a(x.tl,l),tr:a(x.tr,l),bl:a(x.bl,l),br:a(x.br,l)};return s&&(S.tl.x-=b,S.tl.y-=y,S.tr.x+=y,S.tr.y-=b,S.bl.x-=y,S.bl.y+=b,S.br.x+=b,S.br.y+=y),S},calcOCoords:function(){var l=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),h=this.getViewportTransform(),g=u(h,s),f=u(g,l),f=u(f,[1/h[0],0,0,1/h[3],0,0]),A=this._calculateCurrentDimensions(),m={};return this.forEachControl(function(y,b,x){m[b]=y.positionHandler(A,f,x)}),m},calcACoords:function(){var l=this._calcRotateMatrix(),s=this._calcTranslateMatrix(),h=u(s,l),g=this._getTransformedDimensions(),f=g.x/2,A=g.y/2;return{tl:a({x:-f,y:-A},h),tr:a({x:f,y:-A},h),bl:a({x:-f,y:A},h),br:a({x:f,y:A},h)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var s="_",h="";return!l&&this.group&&(h=this.group.transformMatrixKey(l)+s),h+this.top+s+this.left+s+this.scaleX+s+this.scaleY+s+this.skewX+s+this.skewY+s+this.angle+s+this.originX+s+this.originY+s+this.width+s+this.height+s+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var s=this.calcOwnMatrix();if(l||!this.group)return s;var h=this.transformMatrixKey(l),g=this.matrixCache||(this.matrixCache={});return g.key===h?g.value:(this.group&&(s=u(this.group.calcTransformMatrix(!1),s)),g.key=h,g.value=s,s)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),s=this.ownMatrixCache||(this.ownMatrixCache={});if(s.key===l)return s.value;var h=this._calcTranslateMatrix(),g={angle:this.angle,translateX:h[4],translateY:h[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return s.key=l,s.value=r.composeMatrix(g),s.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,s=this.width+l,h=this.height+l;return{x:s,y:h}},_getTransformedDimensions:function(l,s){typeof l>"u"&&(l=this.skewX),typeof s>"u"&&(s=this.skewY);var h,g,f,A=l===0&&s===0;if(this.strokeUniform?(g=this.width,f=this.height):(h=this._getNonTransformedDimensions(),g=h.x,f=h.y),A)return this._finalizeDimensions(g*this.scaleX,f*this.scaleY);var m=r.sizeAfterTransform(g,f,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:s});return this._finalizeDimensions(m.x,m.y)},_finalizeDimensions:function(l,s){return this.strokeUniform?{x:l+this.strokeWidth,y:s+this.strokeWidth}:{x:l,y:s}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),s=this._getTransformedDimensions(),h=a(s,l,!0);return h.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(c){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,c):this.canvas&&this.canvas.sendBackwards(this,c),this},bringForward:function(c){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,c):this.canvas&&this.canvas.bringForward(this,c),this},moveTo:function(c){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,c):this.canvas&&this.canvas.moveTo(this,c),this}}),function(){function c(d,u){if(u){if(u.toLive)return d+": url(#SVGID_"+u.id+"); ";var a=new e.Color(u),l=d+": "+a.toRgb()+"; ",s=a.getAlpha();return s!==1&&(l+=d+"-opacity: "+s.toString()+"; "),l}else return d+": none; "}var r=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(d){var u=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",h=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",f=this.strokeMiterLimit?this.strokeMiterLimit:"4",A=typeof this.opacity<"u"?this.opacity:"1",m=this.visible?"":" visibility: hidden;",y=d?"":this.getSvgFilter(),b=c("fill",this.fill),x=c("stroke",this.stroke);return[x,"stroke-width: ",a,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",h,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",f,"; ",b,"fill-rule: ",u,"; ","opacity: ",A,";",y,m].join("")},getSvgSpanStyles:function(d,u){var a="; ",s=d.fontFamily?"font-family: "+(d.fontFamily.indexOf("'")===-1&&d.fontFamily.indexOf('"')===-1?"'"+d.fontFamily+"'":d.fontFamily)+a:"",l=d.strokeWidth?"stroke-width: "+d.strokeWidth+a:"",s=s,h=d.fontSize?"font-size: "+d.fontSize+"px"+a:"",g=d.fontStyle?"font-style: "+d.fontStyle+a:"",f=d.fontWeight?"font-weight: "+d.fontWeight+a:"",A=d.fill?c("fill",d.fill):"",m=d.stroke?c("stroke",d.stroke):"",y=this.getSvgTextDecoration(d),b=d.deltaY?"baseline-shift: "+-d.deltaY+"; ":"";return y&&(y="text-decoration: "+y+a),[m,l,s,h,g,f,y,A,b,u?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(d){return["overline","underline","line-through"].filter(function(u){return d[u.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(d,u){var a=d?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+e.util.matrixToSVG(a);return l+(u||"")+'" '},_setSVGBg:function(d){if(this.backgroundColor){var u=e.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,u),'" y="',r(-this.height/2,u),'" width="',r(this.width,u),'" height="',r(this.height,u),`"></rect>
`)}},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(d),{reviver:d})},toClipPathSVG:function(d){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(d),{reviver:d})},_createBaseClipPathSVGMarkup:function(d,u){u=u||{};var a=u.reviver,l=u.additionalTransform||"",s=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),h=d.indexOf("COMMON_PARTS");return d[h]=s,a?a(d.join("")):d.join("")},_createBaseSVGMarkup:function(d,u){u=u||{};var a=u.noStyle,l=u.reviver,s=a?"":'style="'+this.getSvgStyles()+'" ',h=u.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,f=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",A=g&&g.absolutePositioned,m=this.stroke,y=this.fill,b=this.shadow,x,S=[],O,R=d.indexOf("COMMON_PARTS"),Z=u.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+e.Object.__uid++,O='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(l)+`</clipPath>
`),A&&S.push("<g ",h,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),A?"":h+this.getSvgCommons(),` >
`),x=[s,f,a?"":this.addPaintOrder()," ",Z?'transform="'+Z+'" ':""].join(""),d[R]=x,y&&y.toLive&&S.push(y.toSVG(this)),m&&m.toLive&&S.push(m.toSVG(this)),b&&S.push(b.toSVG(this)),g&&S.push(O),S.push(d.join("")),S.push(`</g>
`),A&&S.push(`</g>
`),l?l(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var c=e.util.object.extend,r="stateProperties";function d(a,l,s){var h={},g=!0;s.forEach(function(f){h[f]=a[f]}),c(a[l],h,g)}function u(a,l,s){if(a===l)return!0;if(Array.isArray(a)){if(!Array.isArray(l)||a.length!==l.length)return!1;for(var h=0,g=a.length;h<g;h++)if(!u(a[h],l[h]))return!1;return!0}else if(a&&typeof a=="object"){var f=Object.keys(a),A;if(!l||typeof l!="object"||!s&&f.length!==Object.keys(l).length)return!1;for(var h=0,g=f.length;h<g;h++)if(A=f[h],!(A==="canvas"||A==="group")&&!u(a[A],l[A]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(a){a=a||r;var l="_"+a;return Object.keys(this[l]).length<this[a].length?!0:!u(this[l],this,!0)},saveState:function(a){var l=a&&a.propertySet||r,s="_"+l;return this[s]?(d(this,s,this[l]),a&&a.stateProperties&&d(this,s,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var l=a.propertySet||r;return a.propertySet=l,this["_"+l]={},this.saveState(a),this}})}(),function(){var c=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(r,d){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var u=r.x,a=r.y,l,s,h=Object.keys(this.oCoords),g=h.length-1,f;for(this.__corner=0;g>=0;g--)if(f=h[g],!!this.isControlVisible(f)&&(s=this._getImageLines(d?this.oCoords[f].touchCorner:this.oCoords[f].corner),l=this._findCrossPoints({x:u,y:a},s),l!==0&&l%2===1))return this.__corner=f,f;return!1},forEachControl:function(r){for(var d in this.controls)r(this.controls[d],d,this)},_setCornerCoords:function(){var r=this.oCoords;for(var d in r){var u=this.controls[d];r[d].corner=u.calcCornerCoords(this.angle,this.cornerSize,r[d].x,r[d].y,!1),r[d].touchCorner=u.calcCornerCoords(this.angle,this.touchCornerSize,r[d].x,r[d].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var d=this.getCenterPoint(),u=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return r.translate(d.x,d.y),r.scale(1/a[0],1/a[3]),r.rotate(c(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-u.x/2,-u.y/2,u.x,u.y),r.restore(),this},drawBorders:function(r,d){d=d||{};var u=this._calculateCurrentDimensions(),a=this.borderScaleFactor,l=u.x+a,s=u.y+a,h=typeof d.hasControls<"u"?d.hasControls:this.hasControls,g=!1;return r.save(),r.strokeStyle=d.borderColor||this.borderColor,this._setLineDash(r,d.borderDashArray||this.borderDashArray),r.strokeRect(-l/2,-s/2,l,s),h&&(r.beginPath(),this.forEachControl(function(f,A,m){f.withConnection&&f.getVisibility(m,A)&&(g=!0,r.moveTo(f.x*l,f.y*s),r.lineTo(f.x*l+f.offsetX,f.y*s+f.offsetY))}),g&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,d,u){u=u||{};var a=e.util.sizeAfterTransform(this.width,this.height,d),l=this.strokeWidth,s=this.strokeUniform,h=this.borderScaleFactor,g=a.x+l*(s?this.canvas.getZoom():d.scaleX)+h,f=a.y+l*(s?this.canvas.getZoom():d.scaleY)+h;return r.save(),this._setLineDash(r,u.borderDashArray||this.borderDashArray),r.strokeStyle=u.borderColor||this.borderColor,r.strokeRect(-g/2,-f/2,g,f),r.restore(),this},drawControls:function(r,d){d=d||{},r.save();var u=this.canvas.getRetinaScaling(),a,l;return r.setTransform(u,0,0,u,0,0),r.strokeStyle=r.fillStyle=d.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=d.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,d.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(s,h,g){l=g.oCoords[h],s.getVisibility(g,h)&&(a&&(l=e.util.transformPoint(l,a)),s.render(r,l.x,l.y,d,g))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,d){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=d,this},setControlsVisibility:function(r){r||(r={});for(var d in r)this.setControlVisible(d,r[d]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(c,r){r=r||{};var d=function(){},u=r.onComplete||d,a=r.onChange||d,l=this;return e.util.animate({target:this,startValue:c.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(s){c.set("left",s),l.requestRenderAll(),a()},onComplete:function(){c.setCoords(),u()}})},fxCenterObjectV:function(c,r){r=r||{};var d=function(){},u=r.onComplete||d,a=r.onChange||d,l=this;return e.util.animate({target:this,startValue:c.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(s){c.set("top",s),l.requestRenderAll(),a()},onComplete:function(){c.setCoords(),u()}})},fxRemove:function(c,r){r=r||{};var d=function(){},u=r.onComplete||d,a=r.onChange||d,l=this;return e.util.animate({target:this,startValue:c.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(s){c.set("opacity",s),l.requestRenderAll(),a()},onComplete:function(){l.remove(c),u()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var c=[],r,d,u=[];for(r in arguments[0])c.push(r);for(var a=0,l=c.length;a<l;a++)r=c[a],d=a!==l-1,u.push(this._animate(r,arguments[0][r],arguments[1],d));return u}else return this._animate.apply(this,arguments)},_animate:function(c,r,d,u){var a=this,l;r=r.toString(),d?d=e.util.object.clone(d):d={},~c.indexOf(".")&&(l=c.split("."));var s=a.colorProperties.indexOf(c)>-1||l&&a.colorProperties.indexOf(l[1])>-1,h=l?this.get(l[0])[l[1]]:this.get(c);"from"in d||(d.from=h),s||(~r.indexOf("=")?r=h+parseFloat(r.replace("=","")):r=parseFloat(r));var g={target:this,startValue:d.from,endValue:r,byValue:d.by,easing:d.easing,duration:d.duration,abort:d.abort&&function(f,A,m){return d.abort.call(a,f,A,m)},onChange:function(f,A,m){l?a[l[0]][l[1]]=f:a.set(c,f),!u&&d.onChange&&d.onChange(f,A,m)},onComplete:function(f,A,m){u||(a.setCoords(),d.onComplete&&d.onComplete(f,A,m))}};return s?e.util.animateColor(g.startValue,g.endValue,g.duration,g):e.util.animate(g)}}),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(s,h){s||(s=[0,0,0,0]),this.callSuper("initialize",h),this.set("x1",s[0]),this.set("y1",s[1]),this.set("x2",s[2]),this.set("y2",s[3]),this._setWidthHeight(h)},_setWidthHeight:function(s){s||(s={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in s?s.left:this._getLeftToOriginX(),this.top="top"in s?s.top:this._getTopToOriginY()},_set:function(s,h){return this.callSuper("_set",s,h),typeof a[s]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(s){s.beginPath();var h=this.calcLinePoints();s.moveTo(h.x1,h.y1),s.lineTo(h.x2,h.y2),s.lineWidth=this.strokeWidth;var g=s.strokeStyle;s.strokeStyle=this.stroke||s.fillStyle,this.stroke&&this._renderStroke(s),s.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(s){return d(this.callSuper("toObject",s),this.calcLinePoints())},_getNonTransformedDimensions:function(){var s=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(s.y-=this.strokeWidth),this.height===0&&(s.x-=this.strokeWidth)),s},calcLinePoints:function(){var s=this.x1<=this.x2?-1:1,h=this.y1<=this.y2?-1:1,g=s*this.width*.5,f=h*this.height*.5,A=s*this.width*-.5,m=h*this.height*-.5;return{x1:g,x2:A,y1:f,y2:m}},_toSVG:function(){var s=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(s,h,g){g=g||{};var f=r.parseAttributes(s,r.Line.ATTRIBUTE_NAMES),A=[f.x1||0,f.y1||0,f.x2||0,f.y2||0];h(new r.Line(A,d(f,g)))},r.Line.fromObject=function(s,h){function g(A){delete A.points,h&&h(A)}var f=u(s,!0);f.points=[s.x1,s.y1,s.x2,s.y2],r.Object._fromObject("Line",f,g,"points")};function l(s,h){var g=s.origin,f=s.axis1,A=s.axis2,m=s.dimension,y=h.nearest,b=h.center,x=h.farthest;return function(){switch(this.get(g)){case y:return Math.min(this.get(f),this.get(A));case b:return Math.min(this.get(f),this.get(A))+.5*this.get(m);case x:return Math.max(this.get(f),this.get(A))}}}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,l){return this.callSuper("_set",a,l),a==="radius"&&this.setRadius(l),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,l=0,s=0,h=(this.endAngle-this.startAngle)%360;if(h===0)a=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+s+'" ','r="',this.radius,`" />
`];else{var g=d(this.startAngle),f=d(this.endAngle),A=this.radius,m=r.util.cos(g)*A,y=r.util.sin(g)*A,b=r.util.cos(f)*A,x=r.util.sin(f)*A,S=h>180?"1":"0";a=['<path d="M '+m+" "+y," A "+A+" "+A," 0 ",+S+" 1"," "+b+" "+x,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,d(this.startAngle),d(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(a,l){var s=r.parseAttributes(a,r.Circle.ATTRIBUTE_NAMES);if(!u(s))throw new Error("value of `r` attribute is required and can not be negative");s.left=(s.left||0)-s.radius,s.top=(s.top||0)-s.radius,l(new r.Circle(s))};function u(a){return"radius"in a&&a.radius>=0}r.Circle.fromObject=function(a,l){r.Object._fromObject("Circle",a,l)}}(t),function(c){var r=c.fabric||(c.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(d){var u=this.width/2,a=this.height/2;d.beginPath(),d.moveTo(-u,a),d.lineTo(0,-a),d.lineTo(u,a),d.closePath(),this._renderPaintInOrder(d)},_toSVG:function(){var d=this.width/2,u=this.height/2,a=[-d+" "+u,"0 "+-u,d+" "+u].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),r.Triangle.fromObject=function(d,u){return r.Object._fromObject("Triangle",d,u)}}(t),function(c){var r=c.fabric||(c.fabric={}),d=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this.set("rx",u&&u.rx||0),this.set("ry",u&&u.ry||0)},_set:function(u,a){switch(this.callSuper("_set",u,a),u){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(u){u.beginPath(),u.save(),u.transform(1,0,0,this.ry/this.rx,0,0),u.arc(0,0,this.rx,0,d,!1),u.restore(),this._renderPaintInOrder(u)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(u,a){var l=r.parseAttributes(u,r.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,a(new r.Ellipse(l))},r.Ellipse.fromObject=function(u,a){r.Object._fromObject("Ellipse",u,a)}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(u){this.callSuper("initialize",u),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(u){var a=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,s=this.width,h=this.height,g=-this.width/2,f=-this.height/2,A=a!==0||l!==0,m=1-.5522847498;u.beginPath(),u.moveTo(g+a,f),u.lineTo(g+s-a,f),A&&u.bezierCurveTo(g+s-m*a,f,g+s,f+m*l,g+s,f+l),u.lineTo(g+s,f+h-l),A&&u.bezierCurveTo(g+s,f+h-m*l,g+s-m*a,f+h,g+s-a,f+h),u.lineTo(g+a,f+h),A&&u.bezierCurveTo(g+m*a,f+h,g,f+h-m*l,g,f+h-l),u.lineTo(g,f+l),A&&u.bezierCurveTo(g,f+m*l,g+m*a,f,g+a,f),u.closePath(),this._renderPaintInOrder(u)},toObject:function(u){return this.callSuper("toObject",["rx","ry"].concat(u))},_toSVG:function(){var u=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',u,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(u,a,l){if(!u)return a(null);l=l||{};var s=r.parseAttributes(u,r.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var h=new r.Rect(d(l?r.util.object.clone(l):{},s));h.visible=h.visible&&h.width>0&&h.height>0,a(h)},r.Rect.fromObject=function(u,a){return r.Object._fromObject("Rect",u,a)}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.util.array.min,a=r.util.array.max,l=r.util.toFixed,s=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(h,g){g=g||{},this.points=h||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return s(this.points,this,!0)},_setPositionDimensions:function(h){var g=this._calcDimensions(h),f,A=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-A,this.height=g.height-A,h.fromSVG||(f=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+A/2,y:g.top-this.strokeWidth/2+A/2},"left","top",this.originX,this.originY)),typeof h.left>"u"&&(this.left=h.fromSVG?g.left:f.x),typeof h.top>"u"&&(this.top=h.fromSVG?g.top:f.y),this.pathOffset={x:g.left+this.width/2+A/2,y:g.top+this.height/2+A/2}},_calcDimensions:function(){var h=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=u(h,"x")||0,f=u(h,"y")||0,A=a(h,"x")||0,m=a(h,"y")||0,y=A-g,b=m-f;return{left:g,top:f,width:y,height:b}},toObject:function(h){return d(this.callSuper("toObject",h),{points:this.points.concat()})},_toSVG:function(){for(var h=[],g=this.pathOffset.x,f=this.pathOffset.y,A=r.Object.NUM_FRACTION_DIGITS,m=0,y=this.points.length;m<y;m++)h.push(l(this.points[m].x-g,A),",",l(this.points[m].y-f,A)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',h.join(""),`" />
`]},commonRender:function(h){var g,f=this.points.length,A=this.pathOffset.x,m=this.pathOffset.y;if(!f||isNaN(this.points[f-1].y))return!1;h.beginPath(),h.moveTo(this.points[0].x-A,this.points[0].y-m);for(var y=0;y<f;y++)g=this.points[y],h.lineTo(g.x-A,g.y-m);return!0},_render:function(h){this.commonRender(h)&&this._renderPaintInOrder(h)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(h){return function(g,f,A){if(!g)return f(null);A||(A={});var m=r.parsePointsAttribute(g.getAttribute("points")),y=r.parseAttributes(g,r[h].ATTRIBUTE_NAMES);y.fromSVG=!0,f(new r[h](m,d(y,A)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(h,g){return r.Object._fromObject("Polyline",h,g,"points")}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return d(this.points,this)},_render:function(u){this.commonRender(u)&&(u.closePath(),this._renderPaintInOrder(u))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(u,a){r.Object._fromObject("Polygon",u,a,"points")}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.array.min,u=r.util.array.max,a=r.util.object.extend,l=r.util.object.clone,s=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(h,g){g=l(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(h||[],g)},_setPath:function(h,g){this.path=r.util.makePathSimpler(Array.isArray(h)?h:r.util.parsePath(h)),r.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(h){var g,f=0,A=0,m=0,y=0,b=0,x=0,S=-this.pathOffset.x,O=-this.pathOffset.y;h.beginPath();for(var R=0,Z=this.path.length;R<Z;++R)switch(g=this.path[R],g[0]){case"L":m=g[1],y=g[2],h.lineTo(m+S,y+O);break;case"M":m=g[1],y=g[2],f=m,A=y,h.moveTo(m+S,y+O);break;case"C":m=g[5],y=g[6],b=g[3],x=g[4],h.bezierCurveTo(g[1]+S,g[2]+O,b+S,x+O,m+S,y+O);break;case"Q":h.quadraticCurveTo(g[1]+S,g[2]+O,g[3]+S,g[4]+O),m=g[3],y=g[4],b=g[1],x=g[2];break;case"z":case"Z":m=f,y=A,h.closePath();break}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return a(this.callSuper("toObject",h),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(h){var g=this.toObject(["sourcePath"].concat(h));return g.sourcePath&&delete g.path,g},_toSVG:function(){var h=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=r.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,h)+", "+s(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},toSVG:function(h){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var h=[],g=[],f,A=0,m=0,y=0,b=0,x,S=0,O=this.path.length;S<O;++S){switch(f=this.path[S],f[0]){case"L":y=f[1],b=f[2],x=[];break;case"M":y=f[1],b=f[2],A=y,m=b,x=[];break;case"C":x=r.util.getBoundsOfCurve(y,b,f[1],f[2],f[3],f[4],f[5],f[6]),y=f[5],b=f[6];break;case"Q":x=r.util.getBoundsOfCurve(y,b,f[1],f[2],f[1],f[2],f[3],f[4]),y=f[3],b=f[4];break;case"z":case"Z":y=A,b=m;break}x.forEach(function(J){h.push(J.x),g.push(J.y)}),h.push(y),g.push(b)}var R=d(h)||0,Z=d(g)||0,ee=u(h)||0,re=u(g)||0,ae=ee-R,ne=re-Z;return{left:R,top:Z,width:ae,height:ne}}}),r.Path.fromObject=function(h,g){if(typeof h.sourcePath=="string"){var f=h.sourcePath;r.loadSVGFromURL(f,function(A){var m=A[0];m.setOptions(h),h.clipPath?r.util.enlivenObjects([h.clipPath],function(y){m.clipPath=y[0],g&&g(m)}):g&&g(m)})}else r.Object._fromObject("Path",h,g,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(h,g,f){var A=r.parseAttributes(h,r.Path.ATTRIBUTE_NAMES);A.fromSVG=!0,g(new r.Path(A.d,a(A,f)))}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.array.min,u=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,l,s){l=l||{},this._objects=[],s&&this.callSuper("initialize",l),this._objects=a||[];for(var h=this._objects.length;h--;)this._objects[h].group=this;if(s)this._updateObjectsACoords();else{var g=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,l=this._objects.length;l--;)this._objects[l].setCoords(a)},_updateObjectsCoords:function(a){for(var a=a||this.getCenterPoint(),l=this._objects.length;l--;)this._updateObjectCoords(this._objects[l],a)},_updateObjectCoords:function(a,l){var s=a.left,h=a.top,g=!0;a.set({left:s-l.x,top:h-l.y}),a.group=this,a.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var l=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),a&&(l&&r.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,l){var s=this._objects.length;if(this.useSetOnGroup)for(;s--;)this._objects[s].setOnGroup(a,l);if(a==="canvas")for(;s--;)this._objects[s]._set(a,l);r.Object.prototype._set.call(this,a,l)},toObject:function(a){var l=this.includeDefaultValues,s=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var f=g.includeDefaultValues;g.includeDefaultValues=l;var A=g.toObject(a);return g.includeDefaultValues=f,A}),h=r.Object.prototype.toObject.call(this,a);return h.objects=s,h},toDatalessObject:function(a){var l,s=this.sourcePath;if(s)l=s;else{var h=this.includeDefaultValues;l=this._objects.map(function(f){var A=f.includeDefaultValues;f.includeDefaultValues=h;var m=f.toDatalessObject(a);return f.includeDefaultValues=A,m})}var g=r.Object.prototype.toDatalessObject.call(this,a);return g.objects=l,g},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=r.Object.prototype.shouldCache.call(this);if(a){for(var l=0,s=this._objects.length;l<s;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,l=this._objects.length;a<l;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var l=0,s=this._objects.length;l<s;l++)this._objects[l].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var l=0,s=this._objects.length;l<s;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var h=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-h/2,-g/2,h,g)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(l){r.util.addTransformToObject(l,a),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,l=this.canvas;this._objects=[];var s=this.toObject();delete s.objects;var h=new r.ActiveSelection([]);return h.set(s),h.type="activeSelection",l.remove(this),a.forEach(function(g){g.group=h,g.dirty=!0,l.add(g)}),h.canvas=l,h._objects=a,l._activeObject=h,h.setCoords(),h}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(l){l.setCoords(a)}),this},_calcBounds:function(a){for(var l=[],s=[],h,g,f,A=["tr","br","bl","tl"],m=0,y=this._objects.length,b,x=A.length;m<y;++m){for(h=this._objects[m],f=h.calcACoords(),b=0;b<x;b++)g=A[b],l.push(f[g].x),s.push(f[g].y);h.aCoords=f}this._getBounds(l,s,a)},_getBounds:function(a,l,s){var h=new r.Point(d(a),d(l)),g=new r.Point(u(a),u(l)),f=h.y||0,A=h.x||0,m=g.x-h.x||0,y=g.y-h.y||0;this.width=m,this.height=y,s||this.setPositionByOrigin({x:A,y:f},"left","top")},_toSVG:function(a){for(var l=["<g ","COMMON_PARTS",` >
`],s=0,h=this._objects.length;s<h;s++)l.push("		",this._objects[s].toSVG(a));return l.push(`</g>
`),l},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),l].join("")},toClipPathSVG:function(a){for(var l=[],s=0,h=this._objects.length;s<h;s++)l.push("	",this._objects[s].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(l,{reviver:a})}}),r.Group.fromObject=function(a,l){var s=a.objects,h=r.util.object.clone(a,!0);if(delete h.objects,typeof s=="string"){r.loadSVGFromURL(s,function(g){var f=r.util.groupSVGElements(g,a,s),A=h.clipPath;delete h.clipPath,f.set(h),A?r.util.enlivenObjects([A],function(m){f.clipPath=m[0],l&&l(f)}):l&&l(f)});return}r.util.enlivenObjects(s,function(g){r.util.enlivenObjectEnlivables(a,h,function(){l&&l(new r.Group(g,h,!0))})})})}(t),function(c){var r=c.fabric||(c.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(d,u){u=u||{},this._objects=d||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;u.originX&&(this.originX=u.originX),u.originY&&(this.originY=u.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,u),this.setCoords()},toGroup:function(){var d=this._objects.concat();this._objects=[];var u=r.Object.prototype.toObject.call(this),a=new r.Group([]);if(delete u.type,a.set(u),d.forEach(function(s){s.canvas.remove(s),s.group=a}),a._objects=d,!this.canvas)return a;var l=this.canvas;return l.add(a),l._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(d,u,a){d.save(),d.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",d,u),a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var l=0,s=this._objects.length;l<s;l++)this._objects[l]._renderControls(d,a);d.restore()}}),r.ActiveSelection.fromObject=function(d,u){r.util.enlivenObjects(d.objects,function(a){delete d.objects,u&&u(new r.ActiveSelection(a,d,!0))})})}(t),function(c){var r=e.util.object.extend;if(c.fabric||(c.fabric={}),c.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(d,u){u||(u={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",u),this._initElement(d,u)},getElement:function(){return this._element||{}},setElement:function(d,u){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=d,this._originalElement=d,this._initConfig(u),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(d){var u=e.filterBackend;u&&u.evictCachesForKey&&u.evictCachesForKey(d)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(d){e.util.cleanUpJsdomNode(this[d]),this[d]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var d=this.getElement();return{width:d.naturalWidth||d.width,height:d.naturalHeight||d.height}},_stroke:function(d){if(!(!this.stroke||this.strokeWidth===0)){var u=this.width/2,a=this.height/2;d.beginPath(),d.moveTo(-u,-a),d.lineTo(u,-a),d.lineTo(u,a),d.lineTo(-u,a),d.lineTo(-u,-a),d.closePath()}},toObject:function(d){var u=[];this.filters.forEach(function(l){l&&u.push(l.toObject())});var a=r(this.callSuper("toObject",["cropX","cropY"].concat(d)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:u});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var d=[],u=[],a,l=this._element,s=-this.width/2,h=-this.height/2,g="",f="";if(!l)return[];if(this.hasCrop()){var A=e.Object.__uid++;d.push('<clipPath id="imageCrop_'+A+`">
`,'	<rect x="'+s+'" y="'+h+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+A+')" '}if(this.imageSmoothing||(f='" image-rendering="optimizeSpeed'),u.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',s-this.cropX,'" y="',h-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,f,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var m=this.fill;this.fill=null,a=["	<rect ",'x="',s,'" y="',h,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=m}return this.paintFirst!=="fill"?d=d.concat(a,u):d=d.concat(u,a),d},getSrc:function(d){var u=d?this._element:this._originalElement;return u?u.toDataURL?u.toDataURL():this.srcFromAttribute?u.getAttribute("src"):u.src:this.src||""},setSrc:function(d,u,a){return e.util.loadImage(d,function(l,s){this.setElement(l,a),this._setWidthHeight(),u&&u(this,s)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var d=this.resizeFilter,u=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),l=a.scaleX,s=a.scaleY,h=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!d||l>u&&s>u){this._element=h,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=s;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var g=e.util.createCanvasElement(),f=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,A=h.width,m=h.height;g.width=A,g.height=m,this._element=g,this._lastScaleX=d.scaleX=l,this._lastScaleY=d.scaleY=s,e.filterBackend.applyFilters([d],h,A,m,this._element,f),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(d){if(d=d||this.filters||[],d=d.filter(function(h){return h&&!h.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),d.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var u=this._originalElement,a=u.naturalWidth||u.width,l=u.naturalHeight||u.height;if(this._element===this._originalElement){var s=e.util.createCanvasElement();s.width=a,s.height=l,this._element=s,this._filteredEl=s}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,l),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(d,this._originalElement,a,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(d){e.util.setImageSmoothing(d,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(d),this._renderPaintInOrder(d)},drawCacheOnCanvas:function(d){e.util.setImageSmoothing(d,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,d)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(d){var u=this._element;if(u){var a=this._filterScalingX,l=this._filterScalingY,s=this.width,h=this.height,g=Math.min,f=Math.max,A=f(this.cropX,0),m=f(this.cropY,0),y=u.naturalWidth||u.width,b=u.naturalHeight||u.height,x=A*a,S=m*l,O=g(s*a,y-x),R=g(h*l,b-S),Z=-s/2,ee=-h/2,re=g(s,y/a-A),ae=g(h,b/l-m);u&&d.drawImage(u,x,S,O,R,Z,ee,re,ae)}},_needsResize:function(){var d=this.getTotalObjectScaling();return d.scaleX!==this._lastScaleX||d.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(d,u){this.setElement(e.util.getById(d),u),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(d){d||(d={}),this.setOptions(d),this._setWidthHeight(d)},_initFilters:function(d,u){d&&d.length?e.util.enlivenObjects(d,function(a){u&&u(a)},"fabric.Image.filters"):u&&u()},_setWidthHeight:function(d){d||(d={});var u=this.getElement();this.width=d.width||u.naturalWidth||u.width||0,this.height=d.height||u.naturalHeight||u.height||0},parsePreserveAspectRatioAttribute:function(){var d=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),u=this._element.width,a=this._element.height,l=1,s=1,h=0,g=0,f=0,A=0,m,y=this.width,b=this.height,x={width:y,height:b};return d&&(d.alignX!=="none"||d.alignY!=="none")?(d.meetOrSlice==="meet"&&(l=s=e.util.findScaleToFit(this._element,x),m=(y-u*l)/2,d.alignX==="Min"&&(h=-m),d.alignX==="Max"&&(h=m),m=(b-a*s)/2,d.alignY==="Min"&&(g=-m),d.alignY==="Max"&&(g=m)),d.meetOrSlice==="slice"&&(l=s=e.util.findScaleToCover(this._element,x),m=u-y/l,d.alignX==="Mid"&&(f=m/2),d.alignX==="Max"&&(f=m),m=a-b/s,d.alignY==="Mid"&&(A=m/2),d.alignY==="Max"&&(A=m),u=y/l,a=b/s)):(l=y/u,s=b/a),{width:u,height:a,scaleX:l,scaleY:s,offsetLeft:h,offsetTop:g,cropX:f,cropY:A}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(d,u){var a=e.util.object.clone(d);e.util.loadImage(a.src,function(l,s){if(s){u&&u(null,!0);return}e.Image.prototype._initFilters.call(a,a.filters,function(h){a.filters=h||[],e.Image.prototype._initFilters.call(a,[a.resizeFilter],function(g){a.resizeFilter=g[0],e.util.enlivenObjectEnlivables(a,a,function(){var f=new e.Image(l,a);u(f,!1)})})})},null,a.crossOrigin)},e.Image.fromURL=function(d,u,a){e.util.loadImage(d,function(l,s){u&&u(new e.Image(l,a),s)},null,a&&a.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(d,u,a){var l=e.parseAttributes(d,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(l["xlink:href"],u,r(a?e.util.object.clone(a):{},l))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var c=this.angle%360;return c>0?Math.round((c-1)/90)*90:Math.round(c/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(c){c=c||{};var r=function(){},d=c.onComplete||r,u=c.onChange||r,a=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){a.rotate(l),u()},onComplete:function(){a.setCoords(),d()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(c){return c.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(c){return c.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function c(d,u){var a="precision "+u+` float;
void main(){}`,l=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(l,a),d.compileShader(l),!!d.getShaderParameter(l,d.COMPILE_STATUS)}e.isWebglSupported=function(d){if(e.isLikelyNode)return!1;d=d||e.WebglFilterBackend.prototype.tileSize;var u=document.createElement("canvas"),a=u.getContext("webgl")||u.getContext("experimental-webgl"),l=!1;if(a){e.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),l=e.maxTextureSize>=d;for(var s=["highp","mediump","lowp"],h=0;h<3;h++)if(c(a,s[h])){e.webGlPrecision=s[h];break}}return this.isSupported=l,l},e.WebglFilterBackend=r;function r(d){d&&d.tileSize&&(this.tileSize=d.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(d,u){this.dispose(),this.createWebGLCanvas(d,u),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(d,u)},chooseFastestCopyGLTo2DMethod:function(d,u){var a=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch(x){l=!1}var s=typeof ArrayBuffer<"u",h=typeof Uint8ClampedArray<"u";if(a&&l&&s&&h){var g=e.util.createCanvasElement(),f=new ArrayBuffer(d*u*4);if(e.forceGLPutImageData){this.imageBuffer=f,this.copyGLTo2D=v;return}var A={imageBuffer:f,destinationWidth:d,destinationHeight:u,targetCanvas:g},m,y,b;g.width=d,g.height=u,m=window.performance.now(),p.call(A,this.gl,A),y=window.performance.now()-m,m=window.performance.now(),v.call(A,this.gl,A),b=window.performance.now()-m,y>b?(this.imageBuffer=f,this.copyGLTo2D=v):this.copyGLTo2D=p}},createWebGLCanvas:function(d,u){var a=e.util.createCanvasElement();a.width=d,a.height=u;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},s=a.getContext("webgl",l);s||(s=a.getContext("experimental-webgl",l)),s&&(s.clearColor(0,0,0,0),this.canvas=a,this.gl=s)},applyFilters:function(d,u,a,l,s,h){var g=this.gl,f;h&&(f=this.getCachedTexture(h,u));var A={originalWidth:u.width||u.originalWidth,originalHeight:u.height||u.originalHeight,sourceWidth:a,sourceHeight:l,destinationWidth:a,destinationHeight:l,context:g,sourceTexture:this.createTexture(g,a,l,!f&&u),targetTexture:this.createTexture(g,a,l),originalTexture:f||this.createTexture(g,a,l,!f&&u),passes:d.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},m=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,m),d.forEach(function(y){y&&y.applyTo(A)}),o(A),this.copyGLTo2D(g,A),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(A.sourceTexture),g.deleteTexture(A.targetTexture),g.deleteFramebuffer(m),s.getContext("2d").setTransform(1,0,0,1,0,0),A},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(d,u,a,l,s){var h=d.createTexture();return d.bindTexture(d.TEXTURE_2D,h),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,s||d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,s||d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),l?d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,l):d.texImage2D(d.TEXTURE_2D,0,d.RGBA,u,a,0,d.RGBA,d.UNSIGNED_BYTE,null),h},getCachedTexture:function(d,u){if(this.textureCache[d])return this.textureCache[d];var a=this.createTexture(this.gl,u.width,u.height,u);return this.textureCache[d]=a,a},evictCachesForKey:function(d){this.textureCache[d]&&(this.gl.deleteTexture(this.textureCache[d]),delete this.textureCache[d])},copyGLTo2D:p,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var d=this.gl,u={renderer:"",vendor:""};if(!d)return u;var a=d.getExtension("WEBGL_debug_renderer_info");if(a){var l=d.getParameter(a.UNMASKED_RENDERER_WEBGL),s=d.getParameter(a.UNMASKED_VENDOR_WEBGL);l&&(u.renderer=l.toLowerCase()),s&&(u.vendor=s.toLowerCase())}return this.gpuInfo=u,u}}}();function o(c){var r=c.targetCanvas,d=r.width,u=r.height,a=c.destinationWidth,l=c.destinationHeight;(d!==a||u!==l)&&(r.width=a,r.height=l)}function p(c,r){var d=c.canvas,u=r.targetCanvas,a=u.getContext("2d");a.translate(0,u.height),a.scale(1,-1);var l=d.height-u.height;a.drawImage(d,0,l,u.width,u.height,0,0,u.width,u.height)}function v(c,r){var d=r.targetCanvas,u=d.getContext("2d"),a=r.destinationWidth,l=r.destinationHeight,s=a*l*4,h=new Uint8Array(this.imageBuffer,0,s),g=new Uint8ClampedArray(this.imageBuffer,0,s);c.readPixels(0,0,a,l,c.RGBA,c.UNSIGNED_BYTE,h);var f=new ImageData(g,a,l);u.putImageData(f,0,0)}(function(){var c=function(){};e.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:c,dispose:c,clearWebGLCaches:c,resources:{},applyFilters:function(d,u,a,l,s){var h=s.getContext("2d");h.drawImage(u,0,0,a,l);var g=h.getImageData(0,0,a,l),f=h.getImageData(0,0,a,l),A={sourceWidth:a,sourceHeight:l,imageData:g,originalEl:u,originalImageData:f,canvasEl:s,ctx:h,filterBackend:this};return d.forEach(function(m){m.applyTo(A)}),(A.imageData.width!==a||A.imageData.height!==l)&&(s.width=A.imageData.width,s.height=A.imageData.height),h.putImageData(A.imageData,0,0),A}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(c){c&&this.setOptions(c)},setOptions:function(c){for(var r in c)this[r]=c[r]},createProgram:function(c,r,d){r=r||this.fragmentSource,d=d||this.vertexSource,e.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var u=c.createShader(c.VERTEX_SHADER);if(c.shaderSource(u,d),c.compileShader(u),!c.getShaderParameter(u,c.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+c.getShaderInfoLog(u));var a=c.createShader(c.FRAGMENT_SHADER);if(c.shaderSource(a,r),c.compileShader(a),!c.getShaderParameter(a,c.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+c.getShaderInfoLog(a));var l=c.createProgram();if(c.attachShader(l,u),c.attachShader(l,a),c.linkProgram(l),!c.getProgramParameter(l,c.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+c.getProgramInfoLog(l));var s=this.getAttributeLocations(c,l),h=this.getUniformLocations(c,l)||{};return h.uStepW=c.getUniformLocation(l,"uStepW"),h.uStepH=c.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:s,uniformLocations:h}},getAttributeLocations:function(c,r){return{aPosition:c.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(c,r,d){var u=r.aPosition,a=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,a),c.enableVertexAttribArray(u),c.vertexAttribPointer(u,2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,d,c.STATIC_DRAW)},_setupFrameBuffer:function(c){var r=c.context,d,u;c.passes>1?(d=c.destinationWidth,u=c.destinationHeight,(c.sourceWidth!==d||c.sourceHeight!==u)&&(r.deleteTexture(c.targetTexture),c.targetTexture=c.filterBackend.createTexture(r,d,u)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,c.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(c){c.passes--,c.pass++;var r=c.targetTexture;c.targetTexture=c.sourceTexture,c.sourceTexture=r},isNeutralState:function(){var c=this.mainParameter,r=e.Image.filters[this.type].prototype;if(c)if(Array.isArray(r[c])){for(var d=r[c].length;d--;)if(this[c][d]!==r[c][d])return!1;return!0}else return r[c]===this[c];else return!1},applyTo:function(c){c.webgl?(this._setupFrameBuffer(c),this.applyToWebGL(c),this._swapTextures(c)):this.applyTo2d(c)},retrieveShader:function(c){return c.programCache.hasOwnProperty(this.type)||(c.programCache[this.type]=this.createProgram(c.context)),c.programCache[this.type]},applyToWebGL:function(c){var r=c.context,d=this.retrieveShader(c);c.pass===0&&c.originalTexture?r.bindTexture(r.TEXTURE_2D,c.originalTexture):r.bindTexture(r.TEXTURE_2D,c.sourceTexture),r.useProgram(d.program),this.sendAttributeData(r,d.attributeLocations,c.aPosition),r.uniform1f(d.uniformLocations.uStepW,1/c.sourceWidth),r.uniform1f(d.uniformLocations.uStepH,1/c.sourceHeight),this.sendUniformData(r,d.uniformLocations),r.viewport(0,0,c.destinationWidth,c.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(c,r,d){c.activeTexture(d),c.bindTexture(c.TEXTURE_2D,r),c.activeTexture(c.TEXTURE0)},unbindAdditionalTexture:function(c,r){c.activeTexture(r),c.bindTexture(c.TEXTURE_2D,null),c.activeTexture(c.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(c){this[this.mainParameter]=c},sendUniformData:function(){},createHelpLayer:function(c){if(!c.helpLayer){var r=document.createElement("canvas");r.width=c.sourceWidth,r.height=c.sourceHeight,c.helpLayer=r}},toObject:function(){var c={type:this.type},r=this.mainParameter;return r&&(c[r]=this[r]),c},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(c,r){var d=new e.Image.filters[c.type](c);return r&&r(d),d},function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.ColorMatrix=u(d.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var l=a.imageData,s=l.data,h=s.length,g=this.matrix,f,A,m,y,b,x=this.colorsOnly;for(b=0;b<h;b+=4)f=s[b],A=s[b+1],m=s[b+2],x?(s[b]=f*g[0]+A*g[1]+m*g[2]+g[4]*255,s[b+1]=f*g[5]+A*g[6]+m*g[7]+g[9]*255,s[b+2]=f*g[10]+A*g[11]+m*g[12]+g[14]*255):(y=s[b+3],s[b]=f*g[0]+A*g[1]+m*g[2]+y*g[3]+g[4]*255,s[b+1]=f*g[5]+A*g[6]+m*g[7]+y*g[8]+g[9]*255,s[b+2]=f*g[10]+A*g[11]+m*g[12]+y*g[13]+g[14]*255,s[b+3]=f*g[15]+A*g[16]+m*g[17]+y*g[18]+g[19]*255)},getUniformLocations:function(a,l){return{uColorMatrix:a.getUniformLocation(l,"uColorMatrix"),uConstants:a.getUniformLocation(l,"uConstants")}},sendUniformData:function(a,l){var s=this.matrix,h=[s[0],s[1],s[2],s[3],s[5],s[6],s[7],s[8],s[10],s[11],s[12],s[13],s[15],s[16],s[17],s[18]],g=[s[4],s[9],s[14],s[19]];a.uniformMatrix4fv(l.uColorMatrix,!1,h),a.uniform4fv(l.uConstants,g)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Brightness=u(d.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var l=a.imageData,s=l.data,h,g=s.length,f=Math.round(this.brightness*255);for(h=0;h<g;h+=4)s[h]=s[h]+f,s[h+1]=s[h+1]+f,s[h+2]=s[h+2]+f}},getUniformLocations:function(a,l){return{uBrightness:a.getUniformLocation(l,"uBrightness")}},sendUniformData:function(a,l){a.uniform1f(l.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.Image.filters,a=r.util.createClass;u.Convolute=a(u.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var s=Math.sqrt(this.matrix.length),h=this.type+"_"+s+"_"+(this.opaque?1:0),g=this.fragmentSource[h];return l.programCache.hasOwnProperty(h)||(l.programCache[h]=this.createProgram(l.context,g)),l.programCache[h]},applyTo2d:function(l){var s=l.imageData,h=s.data,g=this.matrix,f=Math.round(Math.sqrt(g.length)),A=Math.floor(f/2),m=s.width,y=s.height,b=l.ctx.createImageData(m,y),x=b.data,S=this.opaque?1:0,O,R,Z,ee,re,ae,ne,J,P,U,W,F,E;for(W=0;W<y;W++)for(U=0;U<m;U++){for(re=(W*m+U)*4,O=0,R=0,Z=0,ee=0,E=0;E<f;E++)for(F=0;F<f;F++)ne=W+E-A,ae=U+F-A,!(ne<0||ne>=y||ae<0||ae>=m)&&(J=(ne*m+ae)*4,P=g[E*f+F],O+=h[J]*P,R+=h[J+1]*P,Z+=h[J+2]*P,S||(ee+=h[J+3]*P));x[re]=O,x[re+1]=R,x[re+2]=Z,S?x[re+3]=h[re+3]:x[re+3]=ee}l.imageData=b},getUniformLocations:function(l,s){return{uMatrix:l.getUniformLocation(s,"uMatrix"),uOpaque:l.getUniformLocation(s,"uOpaque"),uHalfSize:l.getUniformLocation(s,"uHalfSize"),uSize:l.getUniformLocation(s,"uSize")}},sendUniformData:function(l,s){l.uniform1fv(s.uMatrix,this.matrix)},toObject:function(){return d(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Grayscale=u(d.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var l=a.imageData,s=l.data,h,g=s.length,f,A=this.mode;for(h=0;h<g;h+=4)A==="average"?f=(s[h]+s[h+1]+s[h+2])/3:A==="lightness"?f=(Math.min(s[h],s[h+1],s[h+2])+Math.max(s[h],s[h+1],s[h+2]))/2:A==="luminosity"&&(f=.21*s[h]+.72*s[h+1]+.07*s[h+2]),s[h]=f,s[h+1]=f,s[h+2]=f},retrieveShader:function(a){var l=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(l)){var s=this.fragmentSource[this.mode];a.programCache[l]=this.createProgram(a.context,s)}return a.programCache[l]},getUniformLocations:function(a,l){return{uMode:a.getUniformLocation(l,"uMode")}},sendUniformData:function(a,l){var s=1;a.uniform1i(l.uMode,s)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Invert=u(d.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var l=a.imageData,s=l.data,h,g=s.length;for(h=0;h<g;h+=4)s[h]=255-s[h],s[h+1]=255-s[h+1],s[h+2]=255-s[h+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,l){return{uInvert:a.getUniformLocation(l,"uInvert")}},sendUniformData:function(a,l){a.uniform1i(l.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.Image.filters,a=r.util.createClass;u.Noise=a(u.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var s=l.imageData,h=s.data,g,f=h.length,A=this.noise,m;for(g=0,f=h.length;g<f;g+=4)m=(.5-Math.random())*A,h[g]+=m,h[g+1]+=m,h[g+2]+=m}},getUniformLocations:function(l,s){return{uNoise:l.getUniformLocation(s,"uNoise"),uSeed:l.getUniformLocation(s,"uSeed")}},sendUniformData:function(l,s){l.uniform1f(s.uNoise,this.noise/255),l.uniform1f(s.uSeed,Math.random())},toObject:function(){return d(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Pixelate=u(d.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var l=a.imageData,s=l.data,h=l.height,g=l.width,f,A,m,y,b,x,S,O,R,Z,ee;for(A=0;A<h;A+=this.blocksize)for(m=0;m<g;m+=this.blocksize)for(f=A*4*g+m*4,y=s[f],b=s[f+1],x=s[f+2],S=s[f+3],Z=Math.min(A+this.blocksize,h),ee=Math.min(m+this.blocksize,g),O=A;O<Z;O++)for(R=m;R<ee;R++)f=O*4*g+R*4,s[f]=y,s[f+1]=b,s[f+2]=x,s[f+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,l){return{uBlocksize:a.getUniformLocation(l,"uBlocksize"),uStepW:a.getUniformLocation(l,"uStepW"),uStepH:a.getUniformLocation(l,"uStepH")}},sendUniformData:function(a,l){a.uniform1f(l.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.extend,u=r.Image.filters,a=r.util.createClass;u.RemoveColor=a(u.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var s=l.imageData,h=s.data,g,f=this.distance*255,A,m,y,b=new r.Color(this.color).getSource(),x=[b[0]-f,b[1]-f,b[2]-f],S=[b[0]+f,b[1]+f,b[2]+f];for(g=0;g<h.length;g+=4)A=h[g],m=h[g+1],y=h[g+2],A>x[0]&&m>x[1]&&y>x[2]&&A<S[0]&&m<S[1]&&y<S[2]&&(h[g+3]=0)},getUniformLocations:function(l,s){return{uLow:l.getUniformLocation(s,"uLow"),uHigh:l.getUniformLocation(s,"uHigh")}},sendUniformData:function(l,s){var h=new r.Color(this.color).getSource(),g=parseFloat(this.distance),f=[0+h[0]/255-g,0+h[1]/255-g,0+h[2]/255-g,1],A=[h[0]/255+g,h[1]/255+g,h[2]/255+g,1];l.uniform4fv(s.uLow,f),l.uniform4fv(s.uHigh,A)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in a)d[l]=u(d.ColorMatrix,{type:l,matrix:a[l],mainParameter:!1,colorsOnly:!0}),r.Image.filters[l].fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric,d=r.Image.filters,u=r.util.createClass;d.BlendColor=u(d.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,s;return a.programCache.hasOwnProperty(l)||(s=this.buildSource(this.mode),a.programCache[l]=this.createProgram(a.context,s)),a.programCache[l]},applyTo2d:function(a){var l=a.imageData,s=l.data,h=s.length,g,f,A,m,y,b,x,S=1-this.alpha;x=new r.Color(this.color).getSource(),g=x[0]*this.alpha,f=x[1]*this.alpha,A=x[2]*this.alpha;for(var O=0;O<h;O+=4)switch(m=s[O],y=s[O+1],b=s[O+2],this.mode){case"multiply":s[O]=m*g/255,s[O+1]=y*f/255,s[O+2]=b*A/255;break;case"screen":s[O]=255-(255-m)*(255-g)/255,s[O+1]=255-(255-y)*(255-f)/255,s[O+2]=255-(255-b)*(255-A)/255;break;case"add":s[O]=m+g,s[O+1]=y+f,s[O+2]=b+A;break;case"diff":case"difference":s[O]=Math.abs(m-g),s[O+1]=Math.abs(y-f),s[O+2]=Math.abs(b-A);break;case"subtract":s[O]=m-g,s[O+1]=y-f,s[O+2]=b-A;break;case"darken":s[O]=Math.min(m,g),s[O+1]=Math.min(y,f),s[O+2]=Math.min(b,A);break;case"lighten":s[O]=Math.max(m,g),s[O+1]=Math.max(y,f),s[O+2]=Math.max(b,A);break;case"overlay":s[O]=g<128?2*m*g/255:255-2*(255-m)*(255-g)/255,s[O+1]=f<128?2*y*f/255:255-2*(255-y)*(255-f)/255,s[O+2]=A<128?2*b*A/255:255-2*(255-b)*(255-A)/255;break;case"exclusion":s[O]=g+m-2*g*m/255,s[O+1]=f+y-2*f*y/255,s[O+2]=A+b-2*A*b/255;break;case"tint":s[O]=g+m*S,s[O+1]=f+y*S,s[O+2]=A+b*S}},getUniformLocations:function(a,l){return{uColor:a.getUniformLocation(l,"uColor")}},sendUniformData:function(a,l){var s=new r.Color(this.color).getSource();s[0]=this.alpha*s[0]/255,s[1]=this.alpha*s[1]/255,s[2]=this.alpha*s[2]/255,s[3]=this.alpha,a.uniform4fv(l.uColor,s)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric,d=r.Image.filters,u=r.util.createClass;d.BlendImage=u(d.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var l=this.type+"_"+this.mode,s=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(l)||(a.programCache[l]=this.createProgram(a.context,s)),a.programCache[l]},applyToWebGL:function(a){var l=a.context,s=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(l,s,l.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(a,l){return a.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var a=this.image,l=a._element.width,s=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/l,-a.top/s,1]},applyTo2d:function(a){var l=a.imageData,s=a.filterBackend.resources,h=l.data,g=h.length,f=l.width,A=l.height,m,y,b,x,S,O,R,Z,ee,re,ae=this.image,ne;s.blendImage||(s.blendImage=r.util.createCanvasElement()),ee=s.blendImage,re=ee.getContext("2d"),ee.width!==f||ee.height!==A?(ee.width=f,ee.height=A):re.clearRect(0,0,f,A),re.setTransform(ae.scaleX,0,0,ae.scaleY,ae.left,ae.top),re.drawImage(ae._element,0,0,f,A),ne=re.getImageData(0,0,f,A).data;for(var J=0;J<g;J+=4)switch(S=h[J],O=h[J+1],R=h[J+2],Z=h[J+3],m=ne[J],y=ne[J+1],b=ne[J+2],x=ne[J+3],this.mode){case"multiply":h[J]=S*m/255,h[J+1]=O*y/255,h[J+2]=R*b/255,h[J+3]=Z*x/255;break;case"mask":h[J+3]=x;break}},getUniformLocations:function(a,l){return{uTransformMatrix:a.getUniformLocation(l,"uTransformMatrix"),uImage:a.getUniformLocation(l,"uImage")}},sendUniformData:function(a,l){var s=this.calculateMatrix();a.uniform1i(l.uImage,1),a.uniformMatrix3fv(l.uTransformMatrix,!1,s)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(a,l){r.Image.fromObject(a.image,function(s){var h=r.util.object.clone(a);h.image=s,l(new r.Image.filters.BlendImage(h))})}}(t),function(c){var r=c.fabric||(c.fabric={}),d=Math.pow,u=Math.floor,a=Math.sqrt,l=Math.abs,s=Math.round,h=Math.sin,g=Math.ceil,f=r.Image.filters,A=r.util.createClass;f.Resize=A(f.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(m,y){return{uDelta:m.getUniformLocation(y,"uDelta"),uTaps:m.getUniformLocation(y,"uTaps")}},sendUniformData:function(m,y){m.uniform2fv(y.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),m.uniform1fv(y.uTaps,this.taps)},retrieveShader:function(m){var y=this.getFilterWindow(),b=this.type+"_"+y;if(!m.programCache.hasOwnProperty(b)){var x=this.generateShader(y);m.programCache[b]=this.createProgram(m.context,x)}return m.programCache[b]},getFilterWindow:function(){var m=this.tempScale;return Math.ceil(this.lanczosLobes/m)},getTaps:function(){for(var m=this.lanczosCreate(this.lanczosLobes),y=this.tempScale,b=this.getFilterWindow(),x=new Array(b),S=1;S<=b;S++)x[S-1]=m(S*y);return x},generateShader:function(m){for(var y=new Array(m),b=this.fragmentSourceTOP,m,x=1;x<=m;x++)y[x-1]=x+".0 * uDelta";return b+="uniform float uTaps["+m+`];
`,b+=`void main() {
`,b+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,b+=`  float sum = 1.0;
`,y.forEach(function(S,O){b+="  color += texture2D(uTexture, vTexCoord + "+S+") * uTaps["+O+`];
`,b+="  color += texture2D(uTexture, vTexCoord - "+S+") * uTaps["+O+`];
`,b+="  sum += 2.0 * uTaps["+O+`];
`}),b+=`  gl_FragColor = color / sum;
`,b+="}",b},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(m){m.webgl?(m.passes++,this.width=m.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=m.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),m.destinationWidth=this.dW,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceWidth=m.destinationWidth,this.height=m.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),m.destinationHeight=this.dH,this._setupFrameBuffer(m),this.applyToWebGL(m),this._swapTextures(m),m.sourceHeight=m.destinationHeight):this.applyTo2d(m)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(m){return function(y){if(y>=m||y<=-m)return 0;if(y<11920929e-14&&y>-11920929e-14)return 1;y*=Math.PI;var b=y/m;return h(y)/y*h(b)/b}},applyTo2d:function(m){var y=m.imageData,b=this.scaleX,x=this.scaleY;this.rcpScaleX=1/b,this.rcpScaleY=1/x;var S=y.width,O=y.height,R=s(S*b),Z=s(O*x),ee;this.resizeType==="sliceHack"?ee=this.sliceByTwo(m,S,O,R,Z):this.resizeType==="hermite"?ee=this.hermiteFastResize(m,S,O,R,Z):this.resizeType==="bilinear"?ee=this.bilinearFiltering(m,S,O,R,Z):this.resizeType==="lanczos"&&(ee=this.lanczosResize(m,S,O,R,Z)),m.imageData=ee},sliceByTwo:function(m,y,b,x,S){var O=m.imageData,R=.5,Z=!1,ee=!1,re=y*R,ae=b*R,ne=r.filterBackend.resources,J,P,U=0,W=0,F=y,E=0;for(ne.sliceByTwo||(ne.sliceByTwo=document.createElement("canvas")),J=ne.sliceByTwo,(J.width<y*1.5||J.height<b)&&(J.width=y*1.5,J.height=b),P=J.getContext("2d"),P.clearRect(0,0,y*1.5,b),P.putImageData(O,0,0),x=u(x),S=u(S);!Z||!ee;)y=re,b=ae,x<u(re*R)?re=u(re*R):(re=x,Z=!0),S<u(ae*R)?ae=u(ae*R):(ae=S,ee=!0),P.drawImage(J,U,W,y,b,F,E,re,ae),U=F,W=E,E+=ae;return P.getImageData(U,W,x,S)},lanczosResize:function(m,y,b,x,S){function O(L){var B,Q,w,_,I,D,H,V,Y,z,X;for(E.x=(L+.5)*ae,k.x=u(E.x),B=0;B<S;B++){for(E.y=(B+.5)*ne,k.y=u(E.y),I=0,D=0,H=0,V=0,Y=0,Q=k.x-U;Q<=k.x+U;Q++)if(!(Q<0||Q>=y)){z=u(1e3*l(Q-E.x)),F[z]||(F[z]={});for(var N=k.y-W;N<=k.y+W;N++)N<0||N>=b||(X=u(1e3*l(N-E.y)),F[z][X]||(F[z][X]=re(a(d(z*J,2)+d(X*P,2))/1e3)),w=F[z][X],w>0&&(_=(N*y+Q)*4,I+=w,D+=w*R[_],H+=w*R[_+1],V+=w*R[_+2],Y+=w*R[_+3]))}_=(B*x+L)*4,ee[_]=D/I,ee[_+1]=H/I,ee[_+2]=V/I,ee[_+3]=Y/I}return++L<x?O(L):Z}var R=m.imageData.data,Z=m.ctx.createImageData(x,S),ee=Z.data,re=this.lanczosCreate(this.lanczosLobes),ae=this.rcpScaleX,ne=this.rcpScaleY,J=2/this.rcpScaleX,P=2/this.rcpScaleY,U=g(ae*this.lanczosLobes/2),W=g(ne*this.lanczosLobes/2),F={},E={},k={};return O(0)},bilinearFiltering:function(m,y,b,x,S){var O,R,Z,ee,re,ae,ne,J,P,U,W,F,E=0,k,L=this.rcpScaleX,B=this.rcpScaleY,Q=4*(y-1),w=m.imageData,_=w.data,I=m.ctx.createImageData(x,S),D=I.data;for(ne=0;ne<S;ne++)for(J=0;J<x;J++)for(re=u(L*J),ae=u(B*ne),P=L*J-re,U=B*ne-ae,k=4*(ae*y+re),W=0;W<4;W++)O=_[k+W],R=_[k+4+W],Z=_[k+Q+W],ee=_[k+Q+4+W],F=O*(1-P)*(1-U)+R*P*(1-U)+Z*U*(1-P)+ee*P*U,D[E++]=F;return I},hermiteFastResize:function(m,y,b,x,S){for(var O=this.rcpScaleX,R=this.rcpScaleY,Z=g(O/2),ee=g(R/2),re=m.imageData,ae=re.data,ne=m.ctx.createImageData(x,S),J=ne.data,P=0;P<S;P++)for(var U=0;U<x;U++){for(var W=(U+P*x)*4,F=0,E=0,k=0,L=0,B=0,Q=0,w=0,_=(P+.5)*R,I=u(P*R);I<(P+1)*R;I++)for(var D=l(_-(I+.5))/ee,H=(U+.5)*O,V=D*D,Y=u(U*O);Y<(U+1)*O;Y++){var z=l(H-(Y+.5))/Z,X=a(V+z*z);X>1&&X<-1||(F=2*X*X*X-3*X*X+1,F>0&&(z=4*(Y+I*y),w+=F*ae[z+3],k+=F,ae[z+3]<255&&(F=F*ae[z+3]/250),L+=F*ae[z],B+=F*ae[z+1],Q+=F*ae[z+2],E+=F))}J[W]=L/E,J[W+1]=B/E,J[W+2]=Q/E,J[W+3]=w/k}return ne},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Contrast=u(d.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var l=a.imageData,s,g,h=l.data,g=h.length,f=Math.floor(this.contrast*255),A=259*(f+255)/(255*(259-f));for(s=0;s<g;s+=4)h[s]=A*(h[s]-128)+128,h[s+1]=A*(h[s+1]-128)+128,h[s+2]=A*(h[s+2]-128)+128}},getUniformLocations:function(a,l){return{uContrast:a.getUniformLocation(l,"uContrast")}},sendUniformData:function(a,l){a.uniform1f(l.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Saturation=u(d.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var l=a.imageData,s=l.data,h=s.length,g=-this.saturation,f,A;for(f=0;f<h;f+=4)A=Math.max(s[f],s[f+1],s[f+2]),s[f]+=A!==s[f]?(A-s[f])*g:0,s[f+1]+=A!==s[f+1]?(A-s[f+1])*g:0,s[f+2]+=A!==s[f+2]?(A-s[f+2])*g:0}},getUniformLocations:function(a,l){return{uSaturation:a.getUniformLocation(l,"uSaturation")}},sendUniformData:function(a,l){a.uniform1f(l.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Vibrance=u(d.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var l=a.imageData,s=l.data,h=s.length,g=-this.vibrance,f,A,m,y;for(f=0;f<h;f+=4)A=Math.max(s[f],s[f+1],s[f+2]),m=(s[f]+s[f+1]+s[f+2])/3,y=Math.abs(A-m)*2/255*g,s[f]+=A!==s[f]?(A-s[f])*y:0,s[f+1]+=A!==s[f+1]?(A-s[f+1])*y:0,s[f+2]+=A!==s[f+2]?(A-s[f+2])*y:0}},getUniformLocations:function(a,l){return{uVibrance:a.getUniformLocation(l,"uVibrance")}},sendUniformData:function(a,l){a.uniform1f(l.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Blur=u(d.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var l=a.filterBackend.resources,s,h,g=a.imageData.width,f=a.imageData.height;l.blurLayer1||(l.blurLayer1=r.util.createCanvasElement(),l.blurLayer2=r.util.createCanvasElement()),s=l.blurLayer1,h=l.blurLayer2,(s.width!==g||s.height!==f)&&(h.width=s.width=g,h.height=s.height=f);var A=s.getContext("2d"),m=h.getContext("2d"),y=15,b,x,S,O,R=this.blur*.06*.5;for(A.putImageData(a.imageData,0,0),m.clearRect(0,0,g,f),O=-y;O<=y;O++)b=(Math.random()-.5)/4,x=O/y,S=R*x*g+b,m.globalAlpha=1-Math.abs(x),m.drawImage(s,S,b),A.drawImage(h,0,0),m.globalAlpha=1,m.clearRect(0,0,h.width,h.height);for(O=-y;O<=y;O++)b=(Math.random()-.5)/4,x=O/y,S=R*x*f+b,m.globalAlpha=1-Math.abs(x),m.drawImage(s,b,S),A.drawImage(h,0,0),m.globalAlpha=1,m.clearRect(0,0,h.width,h.height);a.ctx.drawImage(s,0,0);var Z=a.ctx.getImageData(0,0,s.width,s.height);return A.globalAlpha=1,A.clearRect(0,0,s.width,s.height),Z},getUniformLocations:function(a,l){return{delta:a.getUniformLocation(l,"uDelta")}},sendUniformData:function(a,l){var s=this.chooseRightDelta();a.uniform2fv(l.delta,s)},chooseRightDelta:function(){var a=1,l=[0,0],s;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),s=a*this.blur*.12,this.horizontal?l[0]=s:l[1]=s,l}}),d.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Gamma=u(d.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],d.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var l=a.imageData,s=l.data,h=this.gamma,g=s.length,f=1/h[0],A=1/h[1],m=1/h[2],y;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),y=0,g=256;y<g;y++)this.rVals[y]=Math.pow(y/255,f)*255,this.gVals[y]=Math.pow(y/255,A)*255,this.bVals[y]=Math.pow(y/255,m)*255;for(y=0,g=s.length;y<g;y+=4)s[y]=this.rVals[s[y]],s[y+1]=this.gVals[s[y+1]],s[y+2]=this.bVals[s[y+2]]},getUniformLocations:function(a,l){return{uGamma:a.getUniformLocation(l,"uGamma")}},sendUniformData:function(a,l){a.uniform3fv(l.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.Composed=u(d.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(a)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(a,l){var s=a.subFilters||[],h=s.map(function(f){return new r.Image.filters[f.type](f)}),g=new r.Image.filters.Composed({subFilters:h});return l&&l(g),g}}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.Image.filters,u=r.util.createClass;d.HueRotation=u(d.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,l=r.util.cos(a),s=r.util.sin(a),h=1/3,g=Math.sqrt(h)*s,f=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+f/3,this.matrix[1]=h*f-g,this.matrix[2]=h*f+g,this.matrix[5]=h*f+g,this.matrix[6]=l+h*f,this.matrix[7]=h*f-g,this.matrix[10]=h*f-g,this.matrix[11]=h*f+g,this.matrix[12]=l+h*f},isNeutralState:function(a){return this.calculateMatrix(),d.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),d.BaseFilter.prototype.applyTo.call(this,a)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(c){var r=c.fabric||(c.fabric={}),d=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var u="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(u),cacheProperties:r.Object.prototype.cacheProperties.concat(u),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,l){this.styles=l?l.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=r.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,l,s,h,g,f,A,m=0,y=this._textLines.length;m<y;m++)if(!(this.textAlign!=="justify"&&(m===y-1||this.isEndOfWrapping(m)))&&(h=0,g=this._textLines[m],l=this.getLineWidth(m),l<this.width&&(A=this.textLines[m].match(this._reSpacesAndTabs)))){s=A.length,a=(this.width-l)/s;for(var b=0,x=g.length;b<=x;b++)f=this.__charBounds[m][b],this._reSpaceAndTab.test(g[b])?(f.width+=a,f.kernedWidth+=a,f.left+=h,h+=a):f.left+=h}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return a.width+=l*a.zoomX,a.height+=l*a.zoomY,a},_render:function(a){var l=this.path;l&&!l.isNotVisible()&&l._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,l,s){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(l,s)},calcTextWidth:function(){for(var a=this.getLineWidth(0),l=1,s=this._textLines.length;l<s;l++){var h=this.getLineWidth(l);h>a&&(a=h)}return a},_renderTextLine:function(a,l,s,h,g,f){this._renderChars(a,l,s,h,g,f)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,s,h=a.fillStyle,g,f,A=this._getLeftOffset(),m=this._getTopOffset(),y=0,b=0,x,S,O=this.path,R,Z=0,ee=this._textLines.length;Z<ee;Z++){if(l=this.getHeightOfLine(Z),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Z)){m+=l;continue}g=this._textLines[Z],s=this._getLineLeftOffset(Z),b=0,y=0,f=this.getValueOfPropertyAt(Z,0,"textBackgroundColor");for(var re=0,ae=g.length;re<ae;re++)x=this.__charBounds[Z][re],S=this.getValueOfPropertyAt(Z,re,"textBackgroundColor"),O?(a.save(),a.translate(x.renderLeft,x.renderTop),a.rotate(x.angle),a.fillStyle=S,S&&a.fillRect(-x.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),x.width,l/this.lineHeight),a.restore()):S!==f?(R=A+s+y,this.direction==="rtl"&&(R=this.width-R-b),a.fillStyle=f,f&&a.fillRect(R,m,b,l/this.lineHeight),y=x.left,b=x.width,f=S):b+=x.kernedWidth;S&&!O&&(R=A+s+y,this.direction==="rtl"&&(R=this.width-R-b),a.fillStyle=S,a.fillRect(R,m,b,l/this.lineHeight)),m+=l}a.fillStyle=h,this._removeShadow(a)}},getFontCache:function(a){var l=a.fontFamily.toLowerCase();r.charWidthsCache[l]||(r.charWidthsCache[l]={});var s=r.charWidthsCache[l],h=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return s[h]||(s[h]={}),s[h]},_measureChar:function(a,l,s,h){var g=this.getFontCache(l),f=this._getFontDeclaration(l),A=this._getFontDeclaration(h),m=s+a,y=f===A,b,x,S,O=l.fontSize/this.CACHE_FONT_SIZE,R;if(s&&g[s]!==void 0&&(S=g[s]),g[a]!==void 0&&(R=b=g[a]),y&&g[m]!==void 0&&(x=g[m],R=x-S),b===void 0||S===void 0||x===void 0){var Z=this.getMeasuringContext();this._setTextStyles(Z,l,!0)}return b===void 0&&(R=b=Z.measureText(a).width,g[a]=b),S===void 0&&y&&s&&(S=Z.measureText(s).width,g[s]=S),y&&x===void 0&&(x=Z.measureText(m).width,g[m]=x,R=x-S),{width:b*O,kernedWidth:R*O}},getHeightOfChar:function(a,l){return this.getValueOfPropertyAt(a,l,"fontSize")},measureLine:function(a){var l=this._measureLine(a);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(a){var l=0,s,h,g=this._textLines[a],f,A,m=0,y=new Array(g.length),b=0,x,S,O=this.path,R=this.pathSide==="right";for(this.__charBounds[a]=y,s=0;s<g.length;s++)h=g[s],A=this._getGraphemeBox(h,a,s,f),y[s]=A,l+=A.kernedWidth,f=h;if(y[s]={left:A?A.left+A.width:0,width:0,kernedWidth:0,height:this.fontSize},O){switch(S=O.segmentsInfo[O.segmentsInfo.length-1].length,x=r.util.getPointOnPath(O.path,0,O.segmentsInfo),x.x+=O.pathOffset.x,x.y+=O.pathOffset.y,this.textAlign){case"left":b=R?S-l:0;break;case"center":b=(S-l)/2;break;case"right":b=R?0:S-l;break}for(b+=this.pathStartOffset*(R?-1:1),s=R?g.length-1:0;R?s>=0:s<g.length;R?s--:s++)A=y[s],b>S?b%=S:b<0&&(b+=S),this._setGraphemeOnPath(b,A,x),b+=A.kernedWidth}return{width:l,numOfSpaces:m}},_setGraphemeOnPath:function(a,l,s){var h=a+l.kernedWidth/2,g=this.path,f=r.util.getPointOnPath(g.path,h,g.segmentsInfo);l.renderLeft=f.x-s.x,l.renderTop=f.y-s.y,l.angle=f.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,l,s,h,g){var f=this.getCompleteStyleDeclaration(l,s),A=h?this.getCompleteStyleDeclaration(l,s-1):{},m=this._measureChar(a,f,h,A),y=m.kernedWidth,b=m.width,x;this.charSpacing!==0&&(x=this._getWidthOfCharSpacing(),b+=x,y+=x);var S={width:b,left:0,height:f.fontSize,kernedWidth:y,deltaY:f.deltaY};if(s>0&&!g){var O=this.__charBounds[l][s-1];S.left=O.left+O.width+m.kernedWidth-m.width}return S},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var l=this._textLines[a],s=this.getHeightOfChar(a,0),h=1,g=l.length;h<g;h++)s=Math.max(this.getHeightOfChar(a,h),s);return this.__lineHeights[a]=s*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,l=0,s=0,h=this._textLines.length;s<h;s++)a=this.getHeightOfLine(s),l+=s===h-1?a/this.lineHeight:a;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,l){a.save();for(var s=0,h=this._getLeftOffset(),g=this._getTopOffset(),f=0,A=this._textLines.length;f<A;f++){var m=this.getHeightOfLine(f),y=m/this.lineHeight,b=this._getLineLeftOffset(f);this._renderTextLine(l,a,this._textLines[f],h+b,g+s+y,f),s+=m}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,l,s,h,g,f){var A=this.getHeightOfLine(f),m=this.textAlign.indexOf("justify")!==-1,y,b,x="",S,O=0,R,Z=this.path,ee=!m&&this.charSpacing===0&&this.isEmptyStyles(f)&&!Z,re=this.direction==="ltr",ae=this.direction==="ltr"?1:-1,ne,J=l.canvas.getAttribute("dir");if(l.save(),J!==this.direction&&(l.canvas.setAttribute("dir",re?"ltr":"rtl"),l.direction=re?"ltr":"rtl",l.textAlign=re?"left":"right"),g-=A*this._fontSizeFraction/this.lineHeight,ee){this._renderChar(a,l,f,0,s.join(""),h,g,A),l.restore();return}for(var P=0,U=s.length-1;P<=U;P++)R=P===U||this.charSpacing||Z,x+=s[P],S=this.__charBounds[f][P],O===0?(h+=ae*(S.kernedWidth-S.width),O+=S.width):O+=S.kernedWidth,m&&!R&&this._reSpaceAndTab.test(s[P])&&(R=!0),R||(y=y||this.getCompleteStyleDeclaration(f,P),b=this.getCompleteStyleDeclaration(f,P+1),R=r.util.hasStyleChanged(y,b,!1)),R&&(Z?(l.save(),l.translate(S.renderLeft,S.renderTop),l.rotate(S.angle),this._renderChar(a,l,f,P,x,-O/2,0,A),l.restore()):(ne=h,this._renderChar(a,l,f,P,x,ne,g,A)),x="",y=b,h+=ae*O,O=0);l.restore()},_applyPatternGradientTransformText:function(a){var l=r.util.createCanvasElement(),s,h=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return l.width=h,l.height=g,s=l.getContext("2d"),s.beginPath(),s.moveTo(0,0),s.lineTo(h,0),s.lineTo(h,g),s.lineTo(0,g),s.closePath(),s.translate(h/2,g/2),s.fillStyle=a.toLive(s),this._applyPatternGradientTransform(s,a),s.fill(),s.createPattern(l,"no-repeat")},handleFiller:function(a,l,s){var h,g;return s.toLive?s.gradientUnits==="percentage"||s.gradientTransform||s.patternTransform?(h=-this.width/2,g=-this.height/2,a.translate(h,g),a[l]=this._applyPatternGradientTransformText(s),{offsetX:h,offsetY:g}):(a[l]=s.toLive(a,this),this._applyPatternGradientTransform(a,s)):(a[l]=s,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,l){return a.lineWidth=l.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",l.stroke)},_setFillStyles:function(a,l){return this.handleFiller(a,"fillStyle",l.fill)},_renderChar:function(a,l,s,h,g,f,A){var m=this._getStyleDeclaration(s,h),y=this.getCompleteStyleDeclaration(s,h),b=a==="fillText"&&y.fill,x=a==="strokeText"&&y.stroke&&y.strokeWidth,S,O;!x&&!b||(l.save(),b&&(S=this._setFillStyles(l,y)),x&&(O=this._setStrokeStyles(l,y)),l.font=this._getFontDeclaration(y),m&&m.textBackgroundColor&&this._removeShadow(l),m&&m.deltaY&&(A+=m.deltaY),b&&l.fillText(g,f-S.offsetX,A-S.offsetY),x&&l.strokeText(g,f-O.offsetX,A-O.offsetY),l.restore())},setSuperscript:function(a,l){return this._setScript(a,l,this.superscript)},setSubscript:function(a,l){return this._setScript(a,l,this.subscript)},_setScript:function(a,l,s){var h=this.get2DCursorLocation(a,!0),g=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"fontSize"),f=this.getValueOfPropertyAt(h.lineIndex,h.charIndex,"deltaY"),A={fontSize:g*s.size,deltaY:f+g*s.baseline};return this.setSelectionStyles(A,a,l),this},_getLineLeftOffset:function(a){var l=this.getLineWidth(a),s=this.width-l,h=this.textAlign,g=this.direction,A,f=0,A=this.isEndOfWrapping(a);return h==="justify"||h==="justify-center"&&!A||h==="justify-right"&&!A||h==="justify-left"&&!A?0:(h==="center"&&(f=s/2),h==="right"&&(f=s),h==="justify-center"&&(f=s/2),h==="justify-right"&&(f=s),g==="rtl"&&(f-=s),f)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var l=this.measureLine(a),s=l.width;return this.__lineWidths[a]=s,s},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,l,s){var h=this._getStyleDeclaration(a,l);return h&&typeof h[s]<"u"?h[s]:this[s]},_renderTextDecoration:function(a,l){if(!(!this[l]&&!this.styleHas(l))){for(var s,h,g,f,A,m,y,b,x=this._getLeftOffset(),S=this._getTopOffset(),O,R,Z,ee,re,ae,ne,J,P=this.path,U=this._getWidthOfCharSpacing(),W=this.offsets[l],F=0,E=this._textLines.length;F<E;F++){if(s=this.getHeightOfLine(F),!this[l]&&!this.styleHas(l,F)){S+=s;continue}y=this._textLines[F],ae=s/this.lineHeight,f=this._getLineLeftOffset(F),R=0,Z=0,b=this.getValueOfPropertyAt(F,0,l),J=this.getValueOfPropertyAt(F,0,"fill"),O=S+ae*(1-this._fontSizeFraction),h=this.getHeightOfChar(F,0),A=this.getValueOfPropertyAt(F,0,"deltaY");for(var k=0,L=y.length;k<L;k++)if(ee=this.__charBounds[F][k],re=this.getValueOfPropertyAt(F,k,l),ne=this.getValueOfPropertyAt(F,k,"fill"),g=this.getHeightOfChar(F,k),m=this.getValueOfPropertyAt(F,k,"deltaY"),P&&re&&ne)a.save(),a.fillStyle=J,a.translate(ee.renderLeft,ee.renderTop),a.rotate(ee.angle),a.fillRect(-ee.kernedWidth/2,W*g+m,ee.kernedWidth,this.fontSize/15),a.restore();else if((re!==b||ne!==J||g!==h||m!==A)&&Z>0){var B=x+f+R;this.direction==="rtl"&&(B=this.width-B-Z),b&&J&&(a.fillStyle=J,a.fillRect(B,O+W*h+A,Z,this.fontSize/15)),R=ee.left,Z=ee.width,b=re,J=ne,h=g,A=m}else Z+=ee.kernedWidth;var B=x+f+R;this.direction==="rtl"&&(B=this.width-B-Z),a.fillStyle=ne,re&&ne&&a.fillRect(B,O+W*h+A,Z-U,this.fontSize/15),S+=s}this._removeShadow(a)}},_getFontDeclaration:function(a,l){var s=a||this,h=this.fontFamily,g=r.Text.genericFonts.indexOf(h.toLowerCase())>-1,f=h===void 0||h.indexOf("'")>-1||h.indexOf(",")>-1||h.indexOf('"')>-1||g?s.fontFamily:'"'+s.fontFamily+'"';return[r.isLikelyNode?s.fontWeight:s.fontStyle,r.isLikelyNode?s.fontStyle:s.fontWeight,l?this.CACHE_FONT_SIZE+"px":s.fontSize+"px",f].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var l=a.split(this._reNewline),s=new Array(l.length),h=[`
`],g=[],f=0;f<l.length;f++)s[f]=r.util.string.graphemeSplit(l[f]),g=g.concat(s[f],h);return g.pop(),{_unwrappedLines:s,lines:l,graphemeText:g,graphemeLines:s}},toObject:function(a){var l=u.concat(a),s=this.callSuper("toObject",l);return s.styles=r.util.stylesToArray(this.styles,this.text),s.path&&(s.path=this.path.toObject()),s},set:function(a,l){this.callSuper("set",a,l);var s=!1,h=!1;if(typeof a=="object")for(var g in a)g==="path"&&this.setPathInfo(),s=s||this._dimensionAffectingProps.indexOf(g)!==-1,h=h||g==="path";else s=this._dimensionAffectingProps.indexOf(a)!==-1,h=a==="path";return h&&this.setPathInfo(),s&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(a,l,s){if(!a)return l(null);var h=r.parseAttributes(a,r.Text.ATTRIBUTE_NAMES),g=h.textAnchor||"left";if(s=r.util.object.extend(s?d(s):{},h),s.top=s.top||0,s.left=s.left||0,h.textDecoration){var f=h.textDecoration;f.indexOf("underline")!==-1&&(s.underline=!0),f.indexOf("overline")!==-1&&(s.overline=!0),f.indexOf("line-through")!==-1&&(s.linethrough=!0),delete s.textDecoration}"dx"in h&&(s.left+=h.dx),"dy"in h&&(s.top+=h.dy),"fontSize"in s||(s.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var A="";"textContent"in a?A=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(A=a.firstChild.data),A=A.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var m=s.strokeWidth;s.strokeWidth=0;var y=new r.Text(A,s),b=y.getScaledHeight()/y.height,x=(y.height+y.strokeWidth)*y.lineHeight-y.height,S=x*b,O=y.getScaledHeight()+S,R=0;g==="center"&&(R=y.getScaledWidth()/2),g==="right"&&(R=y.getScaledWidth()),y.set({left:y.left-R,top:y.top-(O-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:typeof m<"u"?m:1}),l(y)},r.Text.fromObject=function(a,l){var s=d(a),h=a.path;return delete s.path,r.Object._fromObject("Text",s,function(g){g.styles=r.util.stylesFromArray(a.styles,a.text),h?r.Object._fromObject("Path",h,function(f){g.set("path",f),l(g)},"path"):l(g)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(c){if(!this.styles||typeof c<"u"&&!this.styles[c])return!0;var r=typeof c>"u"?this.styles:{line:this.styles[c]};for(var d in r)for(var u in r[d])for(var a in r[d][u])return!1;return!0},styleHas:function(c,r){if(!this.styles||!c||c===""||typeof r<"u"&&!this.styles[r])return!1;var d=typeof r>"u"?this.styles:{0:this.styles[r]};for(var u in d)for(var a in d[u])if(typeof d[u][a][c]<"u")return!0;return!1},cleanStyle:function(c){if(!this.styles||!c||c==="")return!1;var r=this.styles,d=0,u,a,l=!0,s=0,h;for(var g in r){u=0;for(var f in r[g]){var h=r[g][f],A=h.hasOwnProperty(c);d++,A?(a?h[c]!==a&&(l=!1):a=h[c],h[c]===this[c]&&delete h[c]):l=!1,Object.keys(h).length!==0?u++:delete r[g][f]}u===0&&delete r[g]}for(var m=0;m<this._textLines.length;m++)s+=this._textLines[m].length;l&&d===s&&(this[c]=a,this.removeStyle(c))},removeStyle:function(c){if(!(!this.styles||!c||c==="")){var r=this.styles,d,u,a;for(u in r){d=r[u];for(a in d)delete d[a][c],Object.keys(d[a]).length===0&&delete d[a];Object.keys(d).length===0&&delete r[u]}}},_extendStyles:function(c,r){var d=this.get2DCursorLocation(c);this._getLineStyle(d.lineIndex)||this._setLineStyle(d.lineIndex),this._getStyleDeclaration(d.lineIndex,d.charIndex)||this._setStyleDeclaration(d.lineIndex,d.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(d.lineIndex,d.charIndex),r)},get2DCursorLocation:function(c,r){typeof c>"u"&&(c=this.selectionStart);for(var d=r?this._unwrappedTextLines:this._textLines,u=d.length,a=0;a<u;a++){if(c<=d[a].length)return{lineIndex:a,charIndex:c};c-=d[a].length+this.missingNewlineOffset(a)}return{lineIndex:a-1,charIndex:d[a-1].length<c?d[a-1].length:c}},getSelectionStyles:function(c,r,d){typeof c>"u"&&(c=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||c);for(var u=[],a=c;a<r;a++)u.push(this.getStyleAtPosition(a,d));return u},getStyleAtPosition:function(c,r){var d=this.get2DCursorLocation(c),u=r?this.getCompleteStyleDeclaration(d.lineIndex,d.charIndex):this._getStyleDeclaration(d.lineIndex,d.charIndex);return u||{}},setSelectionStyles:function(c,r,d){typeof r>"u"&&(r=this.selectionStart||0),typeof d>"u"&&(d=this.selectionEnd||r);for(var u=r;u<d;u++)this._extendStyles(u,c);return this._forceClearCache=!0,this},_getStyleDeclaration:function(c,r){var d=this.styles&&this.styles[c];return d?d[r]:null},getCompleteStyleDeclaration:function(c,r){for(var d=this._getStyleDeclaration(c,r)||{},u={},a,l=0;l<this._styleProperties.length;l++)a=this._styleProperties[l],u[a]=typeof d[a]>"u"?this[a]:d[a];return u},_setStyleDeclaration:function(c,r,d){this.styles[c][r]=d},_deleteStyleDeclaration:function(c,r){delete this.styles[c][r]},_getLineStyle:function(c){return!!this.styles[c]},_setLineStyle:function(c){this.styles[c]={}},_deleteLineStyle:function(c){delete this.styles[c]}})}(),function(){function c(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,d){this.callSuper("initialize",r,d),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,d){this[r]!==d&&(this._fireSelectionChanged(),this[r]=d),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var d=this.canvas.contextTop,u=this.canvas.viewportTransform;d.save(),d.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this.transform(d),this._clearTextArea(d),r||d.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),d=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,d):this.renderSelection(r,d),d.restore()}},_clearTextArea:function(r){var d=this.width+4,u=this.height+4;r.clearRect(-d/2,-u/2,d,u)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var d=this._getLeftOffset(),u=this._getTopOffset(),a=this._getCursorBoundariesOffsets(r);return{left:d,top:u,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var d,u,a,l=0,s=0,h,g=this.get2DCursorLocation(r);a=g.charIndex,u=g.lineIndex;for(var f=0;f<u;f++)l+=this.getHeightOfLine(f);d=this._getLineLeftOffset(u);var A=this.__charBounds[u][a];return A&&(s=A.left),this.charSpacing!==0&&a===this._textLines[u].length&&(s-=this._getWidthOfCharSpacing()),h={top:l,left:d+(s>0?s:0)},this.direction==="rtl"&&(h.left*=-1),this.cursorOffsetCache=h,this.cursorOffsetCache},renderCursor:function(r,d){var u=this.get2DCursorLocation(),a=u.lineIndex,l=u.charIndex>0?u.charIndex-1:0,s=this.getValueOfPropertyAt(a,l,"fontSize"),h=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/h,f=r.topOffset,A=this.getValueOfPropertyAt(a,l,"deltaY");f+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,d),d.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,l,"fill"),d.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,d.fillRect(r.left+r.leftOffset-g/2,f+r.top+A,g,s)},renderSelection:function(r,d){for(var u=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,s=this.get2DCursorLocation(u),h=this.get2DCursorLocation(a),g=s.lineIndex,f=h.lineIndex,A=s.charIndex<0?0:s.charIndex,m=h.charIndex<0?0:h.charIndex,y=g;y<=f;y++){var b=this._getLineLeftOffset(y)||0,x=this.getHeightOfLine(y),S=0,O=0,R=0;if(y===g&&(O=this.__charBounds[g][A].left),y>=g&&y<f)R=l&&!this.isEndOfWrapping(y)?this.width:this.getLineWidth(y)||5;else if(y===f)if(m===0)R=this.__charBounds[f][m].left;else{var Z=this._getWidthOfCharSpacing();R=this.__charBounds[f][m-1].left+this.__charBounds[f][m-1].width-Z}S=x,(this.lineHeight<1||y===f&&this.lineHeight>1)&&(x/=this.lineHeight);var ee=r.left+b+O,re=R-O,ae=x,ne=0;this.inCompositionMode?(d.fillStyle=this.compositionColor||"black",ae=1,ne=x):d.fillStyle=this.selectionColor,this.direction==="rtl"&&(ee=this.width-ee-re),d.fillRect(ee,r.top+r.topOffset+ne,re,ae),r.topOffset+=S}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),d=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:d}}}),e.IText.fromObject=function(r,d){var u=e.util.stylesFromArray(r.styles,r.text),a=Object.assign({},r,{styles:u});if(c(a),a.styles)for(var l in a.styles)for(var s in a.styles[l])c(a.styles[l][s]);e.Object._fromObject("IText",a,d,"text")}}(),function(){var c=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var d=r.canvas;d&&(d._hasITextHandlers||(d._hasITextHandlers=!0,r._initCanvasHandlers(d)),d._iTextInstances=d._iTextInstances||[],d._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var d=r.canvas;d&&(d._iTextInstances=d._iTextInstances||[],e.util.removeFromArray(d._iTextInstances,r),d._iTextInstances.length===0&&(d._hasITextHandlers=!1,r._removeCanvasHandlers(d)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(d){d.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,d,u,a){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",d,{duration:u,onComplete:function(){l.isAborted||r[a]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var d=this,u=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){d._tick()},u)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,d=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&d&&d.clearContext(d.contextTop||d.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var d=0,u=r-1;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)d++,u--;for(;/\S/.test(this._text[u])&&u>-1;)d++,u--;return r-d},findWordBoundaryRight:function(r){var d=0,u=r;if(this._reSpace.test(this._text[u]))for(;this._reSpace.test(this._text[u]);)d++,u++;for(;/\S/.test(this._text[u])&&u<this._text.length;)d++,u++;return r+d},findLineBoundaryLeft:function(r){for(var d=0,u=r-1;!/\n/.test(this._text[u])&&u>-1;)d++,u--;return r-d},findLineBoundaryRight:function(r){for(var d=0,u=r;!/\n/.test(this._text[u])&&u<this._text.length;)d++,u++;return r+d},searchWordBoundary:function(r,d){for(var u=this._text,a=this._reSpace.test(u[r])?r-1:r,l=u[a],s=e.reNonWord;!s.test(l)&&a>0&&a<u.length;)a+=d,l=u[a];return s.test(l)&&(a+=d===1?0:1),a},selectWord:function(r){r=r||this.selectionStart;var d=this.searchWordBoundary(r,-1),u=this.searchWordBoundary(r,1);this.selectionStart=d,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var d=this.findLineBoundaryLeft(r),u=this.findLineBoundaryRight(r);return this.selectionStart=d,this.selectionEnd=u,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(d){d.selected=!1,d.isEditing&&d.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var d=this.getSelectionStartFromPointer(r.e),u=this.selectionStart,a=this.selectionEnd;(d!==this.__selectionStartOnMouseDown||u===a)&&(u===d||a===d)||(d>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=d):(this.selectionStart=d,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==u||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,d,u){var a=u.slice(0,r),l=e.util.string.graphemeSplit(a).length;if(r===d)return{selectionStart:l,selectionEnd:l};var s=u.slice(r,d),h=e.util.string.graphemeSplit(s).length;return{selectionStart:l,selectionEnd:l+h}},fromGraphemeToStringSelection:function(r,d,u){var a=u.slice(0,r),l=a.join("").length;if(r===d)return{selectionStart:l,selectionEnd:l};var s=u.slice(r,d),h=s.join("").length;return{selectionStart:l,selectionEnd:l+h}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,d=this._getCursorBoundaries(r),u=this.get2DCursorLocation(r),a=u.lineIndex,l=u.charIndex,s=this.getValueOfPropertyAt(a,l,"fontSize")*this.lineHeight,h=d.leftOffset,g=this.calcTransformMatrix(),f={x:d.left+h,y:d.top+d.topOffset+s},A=this.canvas.getRetinaScaling(),m=this.canvas.upperCanvasEl,y=m.width/A,b=m.height/A,x=y-s,S=b-s,O=m.clientWidth/y,R=m.clientHeight/b;return f=e.util.transformPoint(f,g),f=e.util.transformPoint(f,this.canvas.viewportTransform),f.x*=O,f.y*=R,f.x<0&&(f.x=0),f.x>x&&(f.x=x),f.y<0&&(f.y=0),f.y>S&&(f.y=S),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:f.x+"px",top:f.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,d=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,d&&(d.blur&&d.blur(),d.parentNode&&d.parentNode.removeChild(d)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,d){var u=this.get2DCursorLocation(r,!0),a=this.get2DCursorLocation(d,!0),l=u.lineIndex,s=u.charIndex,h=a.lineIndex,g=a.charIndex,f,A;if(l!==h){if(this.styles[l])for(f=s;f<this._unwrappedTextLines[l].length;f++)delete this.styles[l][f];if(this.styles[h])for(f=g;f<this._unwrappedTextLines[h].length;f++)A=this.styles[h][f],A&&(this.styles[l]||(this.styles[l]={}),this.styles[l][s+f-g]=A);for(f=l+1;f<=h;f++)delete this.styles[f];this.shiftLineStyles(h,l-h)}else if(this.styles[l]){A=this.styles[l];var m=g-s,y,b;for(f=s;f<g;f++)delete A[f];for(b in this.styles[l])y=parseInt(b,10),y>=g&&(A[y-m]=A[b],delete A[b])}},shiftLineStyles:function(r,d){var u=c(this.styles);for(var a in this.styles){var l=parseInt(a,10);l>r&&(this.styles[l+d]=u[l],u[l-d]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,d,u,a){var l,s={},h=!1,g=this._unwrappedTextLines[r].length===d;u||(u=1),this.shiftLineStyles(r,u),this.styles[r]&&(l=this.styles[r][d===0?d:d-1]);for(var f in this.styles[r]){var A=parseInt(f,10);A>=d&&(h=!0,s[A-d]=this.styles[r][f],g&&d===0||delete this.styles[r][f])}var m=!1;for(h&&!g&&(this.styles[r+u]=s,m=!0),m&&u--;u>0;)a&&a[u-1]?this.styles[r+u]={0:c(a[u-1])}:l?this.styles[r+u]={0:c(l)}:delete this.styles[r+u],u--;this._forceClearCache=!0},insertCharStyleObject:function(r,d,u,a){this.styles||(this.styles={});var l=this.styles[r],s=l?c(l):{};u||(u=1);for(var h in s){var g=parseInt(h,10);g>=d&&(l[g+u]=s[g],s[g-u]||delete l[g])}if(this._forceClearCache=!0,a){for(;u--;)Object.keys(a[u]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][d+u]=c(a[u]));return}if(l)for(var f=l[d?d-1:1];f&&u--;)this.styles[r][d+u]=c(f)},insertNewStyleBlock:function(r,d,u){for(var a=this.get2DCursorLocation(d,!0),l=[0],s=0,h=0;h<r.length;h++)r[h]===`
`?(s++,l[s]=0):l[s]++;l[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,l[0],u),u=u&&u.slice(l[0]+1)),s&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+l[0],s);for(var h=1;h<s;h++)l[h]>0?this.insertCharStyleObject(a.lineIndex+h,0,l[h],u):u&&this.styles[a.lineIndex+h]&&u[0]&&(this.styles[a.lineIndex+h][0]=u[0]),u=u&&u.slice(l[h]+1);l[h]>0&&this.insertCharStyleObject(a.lineIndex+h,0,l[h],u)},setSelectionStartEndWithShift:function(r,d,u){u<=r?(d===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=u):u>r&&u<d?this._selectionDirection==="right"?this.selectionEnd=u:this.selectionStart=u:(d===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=d),this.selectionEnd=u)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(c){if(this.canvas){this.__newClickTime=+new Date;var r=c.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",c),this._stopEvent(c.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(c){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===c.x&&this.__lastPointer.y===c.y},_stopEvent:function(c){c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(c){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(c.e))},tripleClickHandler:function(c){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(c.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(c){!this.canvas||!this.editable||c.e.button&&c.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(c.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(c){!this.canvas||!this.editable||c.e.button&&c.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(c){if(this.__isMousedown=!1,!(!this.editable||this.group||c.transform&&c.transform.actionPerformed||c.e.button&&c.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(c.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(c){var r=this.getSelectionStartFromPointer(c),d=this.selectionStart,u=this.selectionEnd;c.shiftKey?this.setSelectionStartEndWithShift(d,u,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(c){for(var r=this.getLocalPointer(c),d=0,u=0,a=0,l=0,s=0,h,g,f=0,A=this._textLines.length;f<A&&a<=r.y;f++)a+=this.getHeightOfLine(f)*this.scaleY,s=f,f>0&&(l+=this._textLines[f-1].length+this.missingNewlineOffset(f-1));h=this._getLineLeftOffset(s),u=h*this.scaleX,g=this._textLines[s],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+u);for(var m=0,y=g.length;m<y&&(d=u,u+=this.__charBounds[s][m].kernedWidth*this.scaleX,u<=r.x);m++)l++;return this._getNewSelectionStartFromOffset(r,d,u,l,y)},_getNewSelectionStartFromOffset:function(c,r,d,u,a){var l=c.x-r,s=d-c.x,h=s>l||s<0?0:1,g=u+h;return this.flipX&&(g=a-g),g>this._text.length&&(g=this._text.length),g}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var c=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+c.top+"; left: "+c.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+c.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(c){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(c.keyCode in r)this[r[c.keyCode]](c);else if(c.keyCode in this.ctrlKeysMapDown&&(c.ctrlKey||c.metaKey))this[this.ctrlKeysMapDown[c.keyCode]](c);else return;c.stopImmediatePropagation(),c.preventDefault(),c.keyCode>=33&&c.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(c){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(c.keyCode in this.ctrlKeysMapUp&&(c.ctrlKey||c.metaKey))this[this.ctrlKeysMapUp[c.keyCode]](c);else return;c.stopImmediatePropagation(),c.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(c){var r=this.fromPaste;if(this.fromPaste=!1,c&&c.stopPropagation(),!!this.isEditing){var d=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,u=this._text.length,a=d.length,l,s,h=a-u,g=this.selectionStart,f=this.selectionEnd,A=g!==f,m,y,b;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var x=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=g>x.selectionStart;A?(l=this._text.slice(g,f),h+=f-g):a<u&&(S?l=this._text.slice(f+h,f):l=this._text.slice(g,g-h)),s=d.slice(x.selectionEnd-h,x.selectionEnd),l&&l.length&&(s.length&&(m=this.getSelectionStyles(g,g+1,!1),m=s.map(function(){return m[0]})),A?(y=g,b=f):S?(y=f-l.length,b=f):(y=f,b=f+l.length),this.removeStyleFromTo(y,b)),s.length&&(r&&s.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(m=e.copiedTextStyle),this.insertNewStyleBlock(s,g,m)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(c){this.compositionStart=c.target.selectionStart,this.compositionEnd=c.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(c){return c&&c.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(c,r){var d=this._getLineLeftOffset(c),u;return r>0&&(u=this.__charBounds[c][r-1],d+=u.left+u.width),d},getDownCursorOffset:function(c,r){var d=this._getSelectionForOffset(c,r),u=this.get2DCursorLocation(d),a=u.lineIndex;if(a===this._textLines.length-1||c.metaKey||c.keyCode===34)return this._text.length-d;var l=u.charIndex,s=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a+1,s),g=this._textLines[a].slice(l);return g.length+h+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(c,r){return c.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(c,r){var d=this._getSelectionForOffset(c,r),u=this.get2DCursorLocation(d),a=u.lineIndex;if(a===0||c.metaKey||c.keyCode===33)return-d;var l=u.charIndex,s=this._getWidthBeforeCursor(a,l),h=this._getIndexOnLine(a-1,s),g=this._textLines[a].slice(0,l),f=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+h-g.length+(1-f)},_getIndexOnLine:function(c,r){for(var d=this._textLines[c],u=this._getLineLeftOffset(c),a=u,l=0,s,h,g=0,f=d.length;g<f;g++)if(s=this.__charBounds[c][g].width,a+=s,a>r){h=!0;var A=a-s,m=a,y=Math.abs(A-r),b=Math.abs(m-r);l=b<y?g:g-1;break}return h||(l=d.length-1),l},moveCursorDown:function(c){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",c)},moveCursorUp:function(c){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",c)},_moveCursorUpOrDown:function(c,r){var d="get"+c+"CursorOffset",u=this[d](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(u):this.moveCursorWithoutShift(u),u!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(c){var r=this._selectionDirection==="left"?this.selectionStart+c:this.selectionEnd+c;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),c!==0},moveCursorWithoutShift:function(c){return c<0?(this.selectionStart+=c,this.selectionEnd=this.selectionStart):(this.selectionEnd+=c,this.selectionStart=this.selectionEnd),c!==0},moveCursorLeft:function(c){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",c)},_move:function(c,r,d){var u;if(c.altKey)u=this["findWordBoundary"+d](this[r]);else if(c.metaKey||c.keyCode===35||c.keyCode===36)u=this["findLineBoundary"+d](this[r]);else return this[r]+=d==="Left"?-1:1,!0;if(typeof u<"u"&&this[r]!==u)return this[r]=u,!0},_moveLeft:function(c,r){return this._move(c,r,"Left")},_moveRight:function(c,r){return this._move(c,r,"Right")},moveCursorLeftWithoutShift:function(c){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(c,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(c){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(c,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(c,"selectionStart")},moveCursorRight:function(c){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",c)},_moveCursorLeftOrRight:function(c,r){var d="moveCursor"+c+"With";this._currentCursorOpacity=1,r.shiftKey?d+="Shift":d+="outShift",this[d](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(c){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(c,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(c,"selectionEnd")},moveCursorRightWithoutShift:function(c){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(c,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(c,r){typeof r>"u"&&(r=c+1),this.removeStyleFromTo(c,r),this._text.splice(c,r-c),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(c,r,d,u){typeof u>"u"&&(u=d),u>d&&this.removeStyleFromTo(d,u);var a=e.util.string.graphemeSplit(c);this.insertNewStyleBlock(a,d,r),this._text=[].concat(this._text.slice(0,d),a,this._text.slice(u)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var c=e.util.toFixed,r=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var d=this._getSVGLeftTopOffsets(),u=this._getSVGTextAndBg(d.textTop,d.textLeft);return this._wrapSVGTextAndBg(u)},toSVG:function(d){return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(d){var u=!0,a=this.getSvgTextDecoration(this);return[d.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",a?'text-decoration="'+a+'" ':"",'style="',this.getSvgStyles(u),'"',this.addPaintOrder()," >",d.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(d,u){var a=[],l=[],s=d,h;this._setSVGBg(l);for(var g=0,f=this._textLines.length;g<f;g++)h=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(l,g,u+h,s),this._setSVGTextLineText(a,g,u+h,s),s+=this.getHeightOfLine(g);return{textSpans:a,textBgRects:l}},_createTextCharSpan:function(d,u,a,l){var s=d!==d.trim()||d.match(r),h=this.getSvgSpanStyles(u,s),g=h?'style="'+h+'"':"",f=u.deltaY,A="",m=e.Object.NUM_FRACTION_DIGITS;return f&&(A=' dy="'+c(f,m)+'" '),['<tspan x="',c(a,m),'" y="',c(l,m),'" ',A,g,">",e.util.string.escapeXml(d),"</tspan>"].join("")},_setSVGTextLineText:function(d,u,a,l){var s=this.getHeightOfLine(u),h=this.textAlign.indexOf("justify")!==-1,g,f,A="",m,y,b=0,x=this._textLines[u],S;l+=s*(1-this._fontSizeFraction)/this.lineHeight;for(var O=0,R=x.length-1;O<=R;O++)S=O===R||this.charSpacing,A+=x[O],m=this.__charBounds[u][O],b===0?(a+=m.kernedWidth-m.width,b+=m.width):b+=m.kernedWidth,h&&!S&&this._reSpaceAndTab.test(x[O])&&(S=!0),S||(g=g||this.getCompleteStyleDeclaration(u,O),f=this.getCompleteStyleDeclaration(u,O+1),S=e.util.hasStyleChanged(g,f,!0)),S&&(y=this._getStyleDeclaration(u,O)||{},d.push(this._createTextCharSpan(A,y,a,l)),A="",g=f,a+=b,b=0)},_pushTextBgRect:function(d,u,a,l,s,h){var g=e.Object.NUM_FRACTION_DIGITS;d.push("		<rect ",this._getFillAttributes(u),' x="',c(a,g),'" y="',c(l,g),'" width="',c(s,g),'" height="',c(h,g),`"></rect>
`)},_setSVGTextLineBg:function(d,u,a,l){for(var s=this._textLines[u],h=this.getHeightOfLine(u)/this.lineHeight,g=0,f=0,A,m,y=this.getValueOfPropertyAt(u,0,"textBackgroundColor"),b=0,x=s.length;b<x;b++)A=this.__charBounds[u][b],m=this.getValueOfPropertyAt(u,b,"textBackgroundColor"),m!==y?(y&&this._pushTextBgRect(d,y,a+f,l,g,h),f=A.left,g=A.width,y=m):g+=A.kernedWidth;m&&this._pushTextBgRect(d,m,a+f,l,g,h)},_getFillAttributes:function(d){var u=d&&typeof d=="string"?new e.Color(d):"";return!u||!u.getSource()||u.getAlpha()===1?'fill="'+d+'"':'opacity="'+u.getAlpha()+'" fill="'+u.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(d){for(var u=0,a=0,l=0;l<d;l++)u+=this.getHeightOfLine(l);return a=this.getHeightOfLine(l),{lineTop:u,offset:(this._fontSizeMult-this._fontSizeFraction)*a/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(d){var u=e.Object.prototype.getSvgStyles.call(this,d);return u+" white-space: pre;"}})}(),function(c){var r=c.fabric||(c.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(d){for(var u=0,a=0,l=0,s={},h=0;h<d.graphemeLines.length;h++)d.graphemeText[l]===`
`&&h>0?(a=0,l++,u++):!this.splitByGrapheme&&this._reSpaceAndTab.test(d.graphemeText[l])&&h>0&&(a++,l++),s[h]={line:u,offset:a},l+=d.graphemeLines[h].length,a+=d.graphemeLines[h].length;return s},styleHas:function(d,u){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[u];a&&(u=a.line)}return r.Text.prototype.styleHas.call(this,d,u)},isEmptyStyles:function(d){if(!this.styles)return!0;var u=0,a=d+1,l,s,h=!1,g=this._styleMap[d],f=this._styleMap[d+1];g&&(d=g.line,u=g.offset),f&&(a=f.line,h=a===d,l=f.offset),s=typeof d>"u"?this.styles:{line:this.styles[d]};for(var A in s)for(var m in s[A])if(m>=u&&(!h||m<l))for(var y in s[A][m])return!1;return!0},_getStyleDeclaration:function(d,u){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[d];if(!a)return null;d=a.line,u=a.offset+u}return this.callSuper("_getStyleDeclaration",d,u)},_setStyleDeclaration:function(d,u,a){var l=this._styleMap[d];d=l.line,u=l.offset+u,this.styles[d][u]=a},_deleteStyleDeclaration:function(d,u){var a=this._styleMap[d];d=a.line,u=a.offset+u,delete this.styles[d][u]},_getLineStyle:function(d){var u=this._styleMap[d];return!!this.styles[u.line]},_setLineStyle:function(d){var u=this._styleMap[d];this.styles[u.line]={}},_wrapText:function(d,u){var a=[],l;for(this.isWrapping=!0,l=0;l<d.length;l++)a=a.concat(this._wrapLine(d[l],l,u));return this.isWrapping=!1,a},_measureWord:function(d,u,a){var l=0,s,h=!0;a=a||0;for(var g=0,f=d.length;g<f;g++){var A=this._getGraphemeBox(d[g],u,g+a,s,h);l+=A.kernedWidth,s=d[g]}return l},_wrapLine:function(d,u,a,ee){var s=0,h=this.splitByGrapheme,g=[],f=[],A=h?r.util.string.graphemeSplit(d):d.split(this._wordJoiners),m="",y=0,b=h?"":" ",x=0,S=0,O=0,R=!0,Z=this._getWidthOfCharSpacing(),ee=ee||0;A.length===0&&A.push([]),a-=ee;for(var re=0;re<A.length;re++)m=h?A[re]:r.util.string.graphemeSplit(A[re]),x=this._measureWord(m,u,y),y+=m.length,s+=S+x-Z,s>a&&!R?(g.push(f),f=[],s=x,R=!0):s+=Z,!R&&!h&&f.push(b),f=f.concat(m),S=h?0:this._measureWord([b],u,y),y++,R=!1,x>O&&(O=x);return re&&g.push(f),O+ee>this.dynamicMinWidth&&(this.dynamicMinWidth=O-Z+ee),g},isEndOfWrapping:function(d){return!this._styleMap[d+1]||this._styleMap[d+1].line!==this._styleMap[d].line},missingNewlineOffset:function(d){return this.splitByGrapheme?this.isEndOfWrapping(d)?1:0:1},_splitTextIntoLines:function(d){for(var u=r.Text.prototype._splitTextIntoLines.call(this,d),a=this._wrapText(u.lines,this.width),l=new Array(a.length),s=0;s<a.length;s++)l[s]=a[s].join("");return u.lines=l,u.graphemeLines=a,u},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var d={};for(var u in this._styleMap)this._textLines[u]&&(d[this._styleMap[u].line]=1);for(var u in this.styles)d[u]||delete this.styles[u]},toObject:function(d){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(d))}}),r.Textbox.fromObject=function(d,u){var a=r.util.stylesFromArray(d.styles,d.text),l=Object.assign({},d,{styles:a});return r.Object._fromObject("Textbox",l,u,"text")}}(t),function(){var c=e.controlsUtils,r=c.scaleSkewCursorStyleHandler,d=c.scaleCursorStyleHandler,u=c.scalingEqually,a=c.scalingYOrSkewingX,l=c.scalingXOrSkewingY,s=c.scaleOrSkewActionName,h=e.Object.prototype.controls;if(h.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:s}),h.mr=new e.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:s}),h.mb=new e.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:a,getActionName:s}),h.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:a,getActionName:s}),h.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:d,actionHandler:u}),h.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:d,actionHandler:u}),h.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:d,actionHandler:u}),h.br=new e.Control({x:.5,y:.5,cursorStyleHandler:d,actionHandler:u}),h.mtr=new e.Control({x:0,y:-.5,actionHandler:c.rotationWithSnapping,cursorStyleHandler:c.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var g=e.Textbox.prototype.controls={};g.mtr=h.mtr,g.tr=h.tr,g.br=h.br,g.tl=h.tl,g.bl=h.bl,g.mt=h.mt,g.mb=h.mb,g.mr=new e.Control({x:.5,y:0,actionHandler:c.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),g.ml=new e.Control({x:-.5,y:0,actionHandler:c.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(le);var bc={exports:{}},no=typeof Reflect=="object"?Reflect:null,dg=no&&typeof no.apply=="function"?no.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},hs;no&&typeof no.ownKeys=="function"?hs=no.ownKeys:Object.getOwnPropertySymbols?hs=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:hs=function(t){return Object.getOwnPropertyNames(t)};function Ak(t){console&&console.warn&&console.warn(t)}var fg=Number.isNaN||function(t){return t!==t};function mt(){mt.init.call(this)}bc.exports=mt,bc.exports.once=Ck,mt.EventEmitter=mt,mt.prototype._events=void 0,mt.prototype._eventsCount=0,mt.prototype._maxListeners=void 0;var pg=10;function ds(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return pg},set:function(t){if(typeof t!="number"||t<0||fg(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");pg=t}}),mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},mt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||fg(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function gg(t){return t._maxListeners===void 0?mt.defaultMaxListeners:t._maxListeners}mt.prototype.getMaxListeners=function(){return gg(this)},mt.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i=t==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var p;if(e.length>0&&(p=e[0]),p instanceof Error)throw p;var v=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw v.context=p,v}var c=o[t];if(c===void 0)return!1;if(typeof c=="function")dg(c,this,e);else for(var r=c.length,d=bg(c,r),n=0;n<r;++n)dg(d[n],this,e);return!0};function vg(t,e,n,i){var o,p,v;if(ds(n),p=t._events,p===void 0?(p=t._events=Object.create(null),t._eventsCount=0):(p.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),p=t._events),v=p[e]),v===void 0)v=p[e]=n,++t._eventsCount;else if(typeof v=="function"?v=p[e]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),o=gg(t),o>0&&v.length>o&&!v.warned){v.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=v.length,Ak(c)}return t}mt.prototype.addListener=function(t,e){return vg(this,t,e,!1)},mt.prototype.on=mt.prototype.addListener,mt.prototype.prependListener=function(t,e){return vg(this,t,e,!0)};function mk(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ag(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=mk.bind(i);return o.listener=n,i.wrapFn=o,o}mt.prototype.once=function(t,e){return ds(e),this.on(t,Ag(this,t,e)),this},mt.prototype.prependOnceListener=function(t,e){return ds(e),this.prependListener(t,Ag(this,t,e)),this},mt.prototype.removeListener=function(t,e){var n,i,o,p,v;if(ds(e),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(o=-1,p=n.length-1;p>=0;p--)if(n[p]===e||n[p].listener===e){v=n[p].listener,o=p;break}if(o<0)return this;o===0?n.shift():yk(n,o),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,v||e)}return this},mt.prototype.off=mt.prototype.removeListener,mt.prototype.removeAllListeners=function(t){var e,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),p;for(i=0;i<o.length;++i)p=o[i],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this};function mg(t,e,n){var i=t._events;if(i===void 0)return[];var o=i[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?bk(o):bg(o,o.length)}mt.prototype.listeners=function(t){return mg(this,t,!0)},mt.prototype.rawListeners=function(t){return mg(this,t,!1)},mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):yg.call(t,e)},mt.prototype.listenerCount=yg;function yg(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}mt.prototype.eventNames=function(){return this._eventsCount>0?hs(this._events):[]};function bg(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function yk(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function bk(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Ck(t,e){return new Promise(function(n,i){function o(v){t.removeListener(e,p),i(v)}function p(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}Cg(t,e,p,{once:!0}),e!=="error"&&wk(t,o,{once:!0})})}function wk(t,e,n){typeof t.on=="function"&&Cg(t,"error",e,n)}function Cg(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(p){i.once&&t.removeEventListener(e,o),n(p)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var xk=bc.exports;const _k=Ma(xk),Cc=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function wc(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent&&t.attachEvent("on".concat(e),n)}function Zo(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent&&t.detachEvent("on".concat(e),n)}function wg(t,e){const n=e.slice(0,e.length-1);for(let i=0;i<n.length;i++)n[i]=t[n[i].toLowerCase()];return n}function xg(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");const e=t.split(",");let n=e.lastIndexOf("");for(;n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function Sk(t,e){const n=t.length>=e.length?t:e,i=t.length>=e.length?e:t;let o=!0;for(let p=0;p<n.length;p++)i.indexOf(n[p])===-1&&(o=!1);return o}const ea={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":Cc?173:189,"=":Cc?61:187,";":Cc?59:186,"'":222,"[":219,"]":221,"\\":220},ti={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},xc={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Xt={16:!1,18:!1,17:!1,91:!1},Dt={};for(let t=1;t<20;t++)ea["f".concat(t)]=111+t;let bt=[],ta=null,_g="all";const yi=new Map,na=t=>ea[t.toLowerCase()]||ti[t.toLowerCase()]||t.toUpperCase().charCodeAt(0),Ek=t=>Object.keys(ea).find(e=>ea[e]===t),Ik=t=>Object.keys(ti).find(e=>ti[e]===t);function Sg(t){_g=t||"all"}function ia(){return _g||"all"}function kk(){return bt.slice(0)}function Bk(){return bt.map(t=>Ek(t)||Ik(t)||String.fromCharCode(t))}function Ok(){const t=[];return Object.keys(Dt).forEach(e=>{Dt[e].forEach(n=>{let{key:i,scope:o,mods:p,shortcut:v}=n;t.push({scope:o,shortcut:v,mods:p,keys:i.split("+").map(c=>na(c))})})}),t}function Dk(t){const e=t.target||t.srcElement,{tagName:n}=e;let i=!0;const o=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(o||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(i=!1),i}function Tk(t){return typeof t=="string"&&(t=na(t)),bt.indexOf(t)!==-1}function Mk(t,e){let n,i;t||(t=ia());for(const o in Dt)if(Object.prototype.hasOwnProperty.call(Dt,o))for(n=Dt[o],i=0;i<n.length;)n[i].scope===t?n.splice(i,1).forEach(p=>{let{element:v}=p;return _c(v)}):i++;ia()===t&&Sg(e||"all")}function Qk(t){let e=t.keyCode||t.which||t.charCode;const n=bt.indexOf(e);if(n>=0&&bt.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&bt.splice(0,bt.length),(e===93||e===224)&&(e=91),e in Xt){Xt[e]=!1;for(const i in ti)ti[i]===e&&(bi[i]=!1)}}function Eg(t){if(typeof t>"u")Object.keys(Dt).forEach(o=>{Array.isArray(Dt[o])&&Dt[o].forEach(p=>fs(p)),delete Dt[o]}),_c(null);else if(Array.isArray(t))t.forEach(o=>{o.key&&fs(o)});else if(typeof t=="object")t.key&&fs(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];let[o,p]=n;typeof o=="function"&&(p=o,o=""),fs({key:t,scope:o,method:p,splitKey:"+"})}}const fs=t=>{let{key:e,scope:n,method:i,splitKey:o="+"}=t;xg(e).forEach(p=>{const v=p.split(o),c=v.length,r=v[c-1],d=r==="*"?"*":na(r);if(!Dt[d])return;n||(n=ia());const u=c>1?wg(ti,v):[],a=[];Dt[d]=Dt[d].filter(l=>{const s=(i?l.method===i:!0)&&l.scope===n&&Sk(l.mods,u);return s&&a.push(l.element),!s}),a.forEach(l=>_c(l))})};function Ig(t,e,n,i){if(e.element!==i)return;let o;if(e.scope===n||e.scope==="all"){o=e.mods.length>0;for(const p in Xt)Object.prototype.hasOwnProperty.call(Xt,p)&&(!Xt[p]&&e.mods.indexOf(+p)>-1||Xt[p]&&e.mods.indexOf(+p)===-1)&&(o=!1);(e.mods.length===0&&!Xt[16]&&!Xt[18]&&!Xt[17]&&!Xt[91]||o||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(bt),e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0)))}}function kg(t,e){const n=Dt["*"];let i=t.keyCode||t.which||t.charCode;if(!bi.filter.call(this,t))return;if((i===93||i===224)&&(i=91),bt.indexOf(i)===-1&&i!==229&&bt.push(i),["ctrlKey","altKey","shiftKey","metaKey"].forEach(c=>{const r=xc[c];t[c]&&bt.indexOf(r)===-1?bt.push(r):!t[c]&&bt.indexOf(r)>-1?bt.splice(bt.indexOf(r),1):c==="metaKey"&&t[c]&&bt.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(bt=bt.slice(bt.indexOf(r))))}),i in Xt){Xt[i]=!0;for(const c in ti)ti[c]===i&&(bi[c]=!0);if(!n)return}for(const c in Xt)Object.prototype.hasOwnProperty.call(Xt,c)&&(Xt[c]=t[xc[c]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(bt.indexOf(17)===-1&&bt.push(17),bt.indexOf(18)===-1&&bt.push(18),Xt[17]=!0,Xt[18]=!0);const o=ia();if(n)for(let c=0;c<n.length;c++)n[c].scope===o&&(t.type==="keydown"&&n[c].keydown||t.type==="keyup"&&n[c].keyup)&&Ig(t,n[c],o,e);if(!(i in Dt))return;const p=Dt[i],v=p.length;for(let c=0;c<v;c++)if((t.type==="keydown"&&p[c].keydown||t.type==="keyup"&&p[c].keyup)&&p[c].key){const r=p[c],{splitKey:d}=r,u=r.key.split(d),a=[];for(let l=0;l<u.length;l++)a.push(na(u[l]));a.sort().join("")===bt.sort().join("")&&Ig(t,r,o,e)}}function bi(t,e,n){bt=[];const i=xg(t);let o=[],p="all",v=document,c=0,r=!1,d=!0,u="+",a=!1,l=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(p=e.scope),e.element&&(v=e.element),e.keyup&&(r=e.keyup),e.keydown!==void 0&&(d=e.keydown),e.capture!==void 0&&(a=e.capture),typeof e.splitKey=="string"&&(u=e.splitKey),e.single===!0&&(l=!0)),typeof e=="string"&&(p=e),l&&Eg(t,p);c<i.length;c++)t=i[c].split(u),o=[],t.length>1&&(o=wg(ti,t)),t=t[t.length-1],t=t==="*"?"*":na(t),t in Dt||(Dt[t]=[]),Dt[t].push({keyup:r,keydown:d,scope:p,mods:o,shortcut:i[c],method:n,key:i[c],splitKey:u,element:v});if(typeof v<"u"&&window){if(!yi.has(v)){const s=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return kg(g,v)},h=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;kg(g,v),Qk(g)};yi.set(v,{keydownListener:s,keyupListenr:h,capture:a}),wc(v,"keydown",s,a),wc(v,"keyup",h,a)}if(!ta){const s=()=>{bt=[]};ta={listener:s,capture:a},wc(window,"focus",s,a)}}}function Lk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Dt).forEach(n=>{Dt[n].filter(i=>i.scope===e&&i.shortcut===t).forEach(i=>{i&&i.method&&i.method()})})}function _c(t){const e=Object.values(Dt).flat();if(e.findIndex(n=>{let{element:i}=n;return i===t})<0){const{keydownListener:n,keyupListenr:i,capture:o}=yi.get(t)||{};n&&i&&(Zo(t,"keyup",i,o),Zo(t,"keydown",n,o),yi.delete(t))}if((e.length<=0||yi.size<=0)&&(Object.keys(yi).forEach(n=>{const{keydownListener:i,keyupListenr:o,capture:p}=yi.get(n)||{};i&&o&&(Zo(n,"keyup",o,p),Zo(n,"keydown",i,p),yi.delete(n))}),yi.clear(),Object.keys(Dt).forEach(n=>delete Dt[n]),ta)){const{listener:n,capture:i}=ta;Zo(window,"focus",n,i),ta=null}}const Sc={getPressedKeyString:Bk,setScope:Sg,getScope:ia,deleteScope:Mk,getPressedKeyCodes:kk,getAllKeyCodes:Ok,isPressed:Tk,filter:Dk,trigger:Lk,unbind:Eg,keyMap:ea,modifier:ti,modifierMap:xc};for(const t in Sc)Object.prototype.hasOwnProperty.call(Sc,t)&&(bi[t]=Sc[t]);if(typeof window<"u"){const t=window.hotkeys;bi.noConflict=e=>(e&&window.hotkeys===bi&&(window.hotkeys=t),bi),window.hotkeys=bi}class ps{constructor(e,n){this.container=e,this.dom=null,this.shown=!1,this.root=!0,this.parent=null,this.submenus=[],this.items=n,this._onclick=i=>{this.dom&&i.target!=this.dom&&i.target.parentElement!=this.dom&&!i.target.classList.contains("item")&&!i.target.parentElement.classList.contains("item")&&this.hideAll()},this._oncontextmenu=i=>{i.preventDefault(),i.target!=this.dom&&i.target.parentElement!=this.dom&&!i.target.classList.contains("item")&&!i.target.parentElement.classList.contains("item")&&(this.hideAll(),this.show(i.clientX,i.clientY))},this._oncontextmenu_keydown=i=>{i.keyCode==93&&(i.preventDefault(),this.hideAll(),this.show(i.clientX,i.clientY))},this._onblur=()=>{this.hideAll()}}getMenuDom(){const e=document.createElement("div");e.classList.add("context");for(const n of this.items)e.appendChild(this.itemToDomEl(n));return e}itemToDomEl(e){const n=document.createElement("div");if(e===null)return n.classList="separator",n;e.hasOwnProperty("color")&&/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.color.toString())&&(n.style.cssText=`color: ${e.color}`),n.classList.add("item");const i=document.createElement("span");i.classList="label",i.innerText=e.hasOwnProperty("text")?e.text.toString():"",n.appendChild(i),e.hasOwnProperty("disabled")&&e.disabled?n.classList.add("disabled"):n.classList.add("enabled");const o=document.createElement("span");if(o.classList="hotkey",o.innerText=e.hasOwnProperty("hotkey")?e.hotkey.toString():"",n.appendChild(o),e.hasOwnProperty("subitems")&&Array.isArray(e.subitems)&&e.subitems.length>0){const p=new ps(this.container,e.subitems);p.root=!1,p.parent=this;const v=()=>{if(e.hasOwnProperty("disabled")&&e.disabled==!0)return;this.hideSubMenus();const c=this.dom.offsetLeft+this.dom.clientWidth+n.offsetLeft,r=this.dom.offsetTop+n.offsetTop;p.shown?p.hide():p.show(c,r)};this.submenus.push(p),n.classList.add("has-subitems"),n.addEventListener("click",v),n.addEventListener("mousemove",v)}else if(e.hasOwnProperty("submenu")&&e.submenu instanceof ps){const p=e.submenu;p.root=!1,p.parent=this;const v=()=>{if(e.hasOwnProperty("disabled")&&e.disabled==!0)return;this.hideSubMenus();const c=this.dom.offsetLeft+this.dom.clientWidth+n.offsetLeft,r=this.dom.offsetTop+n.offsetTop;p.shown?p.hide():p.show(c,r)};this.submenus.push(p),n.classList.add("has-subitems"),n.addEventListener("click",v),n.addEventListener("mousemove",v)}else n.addEventListener("click",()=>{if(this.hideSubMenus(),!n.classList.contains("disabled"))if(e.hasOwnProperty("onclick")&&typeof e.onclick=="function"){const p={handled:!1,item:n,label:i,hotkey:o,items:this.items,data:e};e.onclick(p),p.handled||this.hide()}else this.hide()}),n.addEventListener("mousemove",()=>{this.hideSubMenus()});return n}hideAll(){if(this.root&&!this.parent){this.shown&&(this.hideSubMenus(),this.shown=!1,this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide());return}this.parent.hide()}hide(){this.dom&&this.shown&&(this.shown=!1,this.hideSubMenus(),this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hideSubMenus(){for(const e of this.submenus)e.shown&&(e.shown=!1,e.container.removeChild(e.dom)),e.hideSubMenus()}show(e,n){this.dom=this.getMenuDom(),this.dom.style.left=`${e}px`,this.dom.style.top=`${n}px`,this.shown=!0,this.container.appendChild(this.dom)}install(){this.container.addEventListener("contextmenu",this._oncontextmenu),this.container.addEventListener("keydown",this._oncontextmenu_keydown),this.container.addEventListener("click",this._onclick),window.addEventListener("blur",this._onblur)}setData(e){this.items=e}uninstall(){this.dom=null,this.container.removeEventListener("keydown",this._oncontextmenu_keydown),this.container.removeEventListener("click",this._onclick),window.removeEventListener("blur",this._onblur)}}for(var $t=[],Ec=0;Ec<256;++Ec)$t.push((Ec+256).toString(16).slice(1));function jk(t,e=0){return($t[t[e+0]]+$t[t[e+1]]+$t[t[e+2]]+$t[t[e+3]]+"-"+$t[t[e+4]]+$t[t[e+5]]+"-"+$t[t[e+6]]+$t[t[e+7]]+"-"+$t[t[e+8]]+$t[t[e+9]]+"-"+$t[t[e+10]]+$t[t[e+11]]+$t[t[e+12]]+$t[t[e+13]]+$t[t[e+14]]+$t[t[e+15]]).toLowerCase()}var gs,Pk=new Uint8Array(16);function Fk(){if(!gs&&(gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gs(Pk)}var Rk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Bg={randomUUID:Rk};function Tt(t,e,n){if(Bg.randomUUID&&!e&&!t)return Bg.randomUUID();t=t||{};var i=t.random||(t.rng||Fk)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=i[o];return e}return jk(i)}var Ci=(t=>(t.EMPTY="",t.ONE="one",t.MULTI="multiple",t))(Ci||{}),io=(t=>(t.ONE="selectOne",t.MULTI="selectMultiple",t.CANCEL="selectCancel",t))(io||{});const Nk={SelectMode:Ci,SelectEvent:io};function Ic(t){return XH()?($H(t),!0):!1}function zk(){const t=new Set,e=n=>{t.delete(n)};return{on:n=>{t.add(n);const i=()=>e(n);return Ic(i),{off:i}},off:e,trigger:(...n)=>Promise.all(Array.from(t).map(i=>i(...n)))}}function ra(t){return typeof t=="function"?t():C(t)}const oa=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Vk=Object.prototype.toString,Uk=t=>Vk.call(t)==="[object Object]",Og=()=>{},Hk=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function Gk(t){let e;function n(){return e||(e=t()),e}return n.reset=()=>we(this,null,function*(){const i=e;e=void 0,i&&(yield i)}),n}function Yk(t){return ft()}function Wk(...t){if(t.length!==1)return qH(...t);const e=t[0];return typeof e=="function"?zr(KH(()=>({get:e,set:Og}))):ce(e)}function Xk(t,e=!0,n){Yk()?je(t,n):e?t():Le(t)}function $k(t,e,n={}){const{immediate:i=!0}=n,o=ce(!1);let p=null;function v(){p&&(clearTimeout(p),p=null)}function c(){o.value=!1,v()}function r(...d){v(),o.value=!0,p=setTimeout(()=>{o.value=!1,p=null,t(...d)},ra(e))}return i&&(o.value=!0,oa&&r()),Ic(c),{isPending:zr(o),start:r,stop:c}}function qk(t){var e;const n=ra(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Kk=oa?window:void 0,Jk=oa?window.document:void 0,Dg=oa?window.navigator:void 0;function aa(...t){let e,n,i,o;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,i,o]=t,e=Kk):[e,n,i,o]=t,!e)return Og;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const p=[],v=()=>{p.forEach(u=>u()),p.length=0},c=(u,a,l,s)=>(u.addEventListener(a,l,s),()=>u.removeEventListener(a,l,s)),r=Me(()=>[qk(e),ra(o)],([u,a])=>{if(v(),!u)return;const l=Uk(a)?ve({},a):a;p.push(...n.flatMap(s=>i.map(h=>c(u,s,h,l))))},{immediate:!0,flush:"post"}),d=()=>{r(),v()};return Ic(d),d}function Zk(){const t=ce(!1),e=ft();return e&&je(()=>{t.value=!0},e),t}function Tg(t){const e=Zk();return ue(()=>(e.value,!!t()))}const sa={array:t=>JSON.stringify(t),object:t=>JSON.stringify(t),set:t=>JSON.stringify(Array.from(t)),map:t=>JSON.stringify(Object.fromEntries(t)),null:()=>""};function eB(t){return t?t instanceof Map?sa.map:t instanceof Set?sa.set:Array.isArray(t)?sa.array:sa.object:sa.null}function tB(t,e){const n=ce(""),i=ce();function o(){if(oa)return i.value=new Promise((p,v)=>{try{const c=ra(t);if(c==null)p("");else if(typeof c=="string")p(kc(new Blob([c],{type:"text/plain"})));else if(c instanceof Blob)p(kc(c));else if(c instanceof ArrayBuffer)p(window.btoa(String.fromCharCode(...new Uint8Array(c))));else if(c instanceof HTMLCanvasElement)p(c.toDataURL(e==null?void 0:e.type,e==null?void 0:e.quality));else if(c instanceof HTMLImageElement){const r=c.cloneNode(!1);r.crossOrigin="Anonymous",nB(r).then(()=>{const d=document.createElement("canvas"),u=d.getContext("2d");d.width=r.width,d.height=r.height,u.drawImage(r,0,0,d.width,d.height),p(d.toDataURL(e==null?void 0:e.type,e==null?void 0:e.quality))}).catch(v)}else if(typeof c=="object"){const r=((e==null?void 0:e.serializer)||eB(c))(c);return p(kc(new Blob([r],{type:"application/json"})))}else v(new Error("target is unsupported types"))}catch(c){v(c)}}),i.value.then(p=>n.value=p),i.value}return ut(t)||typeof t=="function"?Me(t,o,{immediate:!0}):o(),{base64:n,promise:i,execute:o}}function nB(t){return new Promise((e,n)=>{t.complete?e():(t.onload=()=>{e()},t.onerror=n)})}function kc(t){return new Promise((e,n)=>{const i=new FileReader;i.onload=o=>{e(o.target.result)},i.onerror=n,i.readAsDataURL(t)})}function Mg(t,e={}){const{controls:n=!1,navigator:i=Dg}=e,o=Tg(()=>i&&"permissions"in i);let p;const v=typeof t=="string"?{name:t}:t,c=ce(),r=()=>{p&&(c.value=p.state)},d=Gk(()=>we(this,null,function*(){if(o.value){if(!p)try{p=yield i.permissions.query(v),aa(p,"change",r),r()}catch(u){c.value="prompt"}return p}}));return d(),n?{state:c,isSupported:o,query:d}:c}function iB(t={}){const{navigator:e=Dg,read:n=!1,source:i,copiedDuring:o=1500,legacy:p=!1}=t,v=Tg(()=>e&&"clipboard"in e),c=Mg("clipboard-read"),r=Mg("clipboard-write"),d=ue(()=>v.value||p),u=ce(""),a=ce(!1),l=$k(()=>a.value=!1,o);function s(){v.value&&A(c.value)?e.clipboard.readText().then(m=>{u.value=m}):u.value=f()}d.value&&n&&aa(["copy","cut"],s);function h(){return we(this,arguments,function*(m=ra(i)){d.value&&m!=null&&(v.value&&A(r.value)?yield e.clipboard.writeText(m):g(m),u.value=m,a.value=!0,l.start())})}function g(m){const y=document.createElement("textarea");y.value=m!=null?m:"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function f(){var m,y,b;return(b=(y=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:y.toString())!=null?b:""}function A(m){return m==="granted"||m==="prompt"}return{isSupported:d,text:u,copied:a,copy:h}}const rB={multiple:!0,accept:"*",reset:!1,directory:!1};function oB(t={}){const{document:e=Jk}=t,n=ce(null),{on:i,trigger:o}=zk();let p;e&&(p=e.createElement("input"),p.type="file",p.onchange=r=>{const d=r.target;n.value=d.files,o(n.value)});const v=()=>{n.value=null,p&&p.value&&(p.value="",o(null))},c=r=>{if(!p)return;const d=ve(ve(ve({},rB),t),r);p.multiple=d.multiple,p.accept=d.accept,p.webkitdirectory=d.directory,Hk(d,"capture")&&(p.capture=d.capture),d.reset&&v(),p.click()};return{files:zr(n),open:c,reset:v,onChange:i}}function aB(t,e={}){const n=Wk(t),{threshold:i=50,onSwipe:o,onSwipeEnd:p,onSwipeStart:v,disableTextSelect:c=!1}=e,r=et({x:0,y:0}),d=(O,R)=>{r.x=O,r.y=R},u=et({x:0,y:0}),a=(O,R)=>{u.x=O,u.y=R},l=ue(()=>r.x-u.x),s=ue(()=>r.y-u.y),{max:h,abs:g}=Math,f=ue(()=>h(g(l.value),g(s.value))>=i),A=ce(!1),m=ce(!1),y=ue(()=>f.value?g(l.value)>g(s.value)?l.value>0?"left":"right":s.value>0?"up":"down":"none"),b=O=>{var R,Z,ee;const re=O.buttons===0,ae=O.buttons===1;return(ee=(Z=(R=e.pointerTypes)==null?void 0:R.includes(O.pointerType))!=null?Z:re||ae)!=null?ee:!0},x=[aa(t,"pointerdown",O=>{if(!b(O))return;m.value=!0;const R=O.target;R==null||R.setPointerCapture(O.pointerId);const{clientX:Z,clientY:ee}=O;d(Z,ee),a(Z,ee),v==null||v(O)}),aa(t,"pointermove",O=>{if(!b(O)||!m.value)return;const{clientX:R,clientY:Z}=O;a(R,Z),!A.value&&f.value&&(A.value=!0),A.value&&(o==null||o(O))}),aa(t,"pointerup",O=>{b(O)&&(A.value&&(p==null||p(O,y.value)),m.value=!1,A.value=!1)})];Xk(()=>{var O,R,Z,ee,re,ae,ne,J;(R=(O=n.value)==null?void 0:O.style)==null||R.setProperty("touch-action","none"),c&&((ee=(Z=n.value)==null?void 0:Z.style)==null||ee.setProperty("-webkit-user-select","none"),(ae=(re=n.value)==null?void 0:re.style)==null||ae.setProperty("-ms-user-select","none"),(J=(ne=n.value)==null?void 0:ne.style)==null||J.setProperty("user-select","none"))});const S=()=>x.forEach(O=>O());return{isSwiping:zr(A),direction:zr(y),posStart:zr(r),posEnd:zr(u),distanceX:l,distanceY:s,stop:S}}function Qg(t){return tB(t).promise.value}function Bc(t){return new Promise(e=>{const{onChange:n,open:i}=oB(t);n(o=>{e(o)}),i()})}function sB(t){return new Promise(e=>{const n=document.createElement("img");n.src=t,document.body.appendChild(n),n.onload=()=>{e(n)}})}const Oc=(t,e)=>iB(ve({source:t},e)).copy();function ro(t,e){const n=document.createElement("a");n.href=t,n.download=`${Tt()}.${e}`,document.body.appendChild(n),n.click(),n.remove()}function Lg(t,e,n,i,o,p,v){v!==void 0&&(t.save(),t.translate(e,n),t.rotate(v),t.drawImage(i,-o/2,-p/2,o,p),t.restore())}function lB(t,e){const n=t.x,i=t.y,o=e.x-n,p=e.y-i,v=Math.sqrt(o*o+p*p);let c=Math.atan2(p,o)/Math.PI*180;c=~~((c+7.5)%360/15)*15;const r=v*Math.cos(c*Math.PI/180),d=v*Math.sin(c*Math.PI/180);return{x:r+n,y:d+i}}const cB=t=>t instanceof fabric.Image,la=t=>t instanceof fabric.Group,uB=t=>t instanceof fabric.IText,jg=t=>t instanceof fabric.ActiveSelection;function Pg(t){return new Promise(e=>{const n=new FileReader;n.addEventListener("load",()=>{e(n.result)}),n.readAsDataURL(t)})}function hB(t){var v;if(!t)return null;const e=t.split(","),n=(v=e[0])==null?void 0:v.match(/:(.*?);/)[1],i=window.atob(e[1]),o=new ArrayBuffer(i.length),p=new Uint8Array(o);for(let c=0;c<i.length;c++)p[c]=i.charCodeAt(c);return[new Blob([o],{type:n}),n.slice(6)]}const Gi={getImgStr:Qg,downFile:ro,selectFiles:Bc,insertImgFile:sB,clipboardText:Oc,drawImg:Lg,isImage:cB,isGroup:la,isIText:uB,isActiveSelection:jg,blobToBase64:Pg,base64ToBlob:hB};function Fg(t){t&&t.forEach(e=>{e.objects?Fg(e.objects):e.type==="text"&&(e.type="textbox")})}class vs{constructor(e,n){pe(this,"canvas");pe(this,"editor");pe(this,"selectedMode");this.canvas=e,this.editor=n,this.selectedMode=Ci.EMPTY,this._initSelectEvent()}_initSelectEvent(){this.canvas.on("selection:created",()=>this._emitSelectEvent()),this.canvas.on("selection:updated",()=>this._emitSelectEvent()),this.canvas.on("selection:cleared",()=>this._emitSelectEvent())}_emitSelectEvent(){if(!this.canvas)throw TypeError("\u8FD8\u672A\u521D\u59CB\u5316");const e=this.canvas.getActiveObjects().filter(n=>!(n instanceof le.fabric.GuideLine));e&&e.length===1?(this.selectedMode=Ci.ONE,this.editor.emit(io.ONE,e)):e&&e.length>1?(this.selectedMode=Ci.MULTI,this.editor.emit(io.MULTI,e)):this.editor.emit(io.CANCEL)}getSelectMode(){return String(this.selectedMode)}insert(e){Bc({accept:".json"}).then(n=>{if(n&&n.length>0){const i=n[0],o=new FileReader;o.readAsText(i,"UTF-8"),o.onload=()=>{this.loadJSON(o.result,e)}}})}renderITextPath(e){e.forEach(n=>{const i=this.canvas.getObjects().find(o=>o.id===n.id);i&&le.fabric.Path.fromObject(n.path,o=>{i.set("path",o)})})}loadJSON(e,n){return we(this,null,function*(){const i=typeof e=="string"?JSON.parse(e):e,o=[];i.objects.forEach(v=>{!v.id&&(v.id=Tt()),v.type==="i-text"&&v.path&&(o.push({id:v.id,path:v.path}),v.path=null)});const p=yield this._transform(i);e=JSON.stringify(p),this.editor.hooksEntity.hookImportBefore.callAsync(e,()=>{this.canvas.loadFromJSON(e,()=>{this.renderITextPath(o),this.canvas.renderAll(),this.editor.hooksEntity.hookImportAfter.callAsync(e,()=>{var v;(v=this.editor)!=null&&v.updateDrawStatus&&typeof this.editor.updateDrawStatus=="function"&&this.editor.updateDrawStatus(!!i.overlayImage),this.canvas.renderAll(),n&&n(),this.editor.emit("loadJson")})})})})}_transform(e){return we(this,null,function*(){if(yield this.promiseCallAsync(e),e.objects){const n=e.objects.map(i=>this._transform(i));yield Promise.all(n)}return e})}promiseCallAsync(e){return new Promise(n=>{this.editor.hooksEntity.hookTransform.callAsync(e,()=>{n(e)})})}getJson(){const e=this.getExtensionKey();return this.canvas.toJSON(e)}getExtensionKey(){return["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension","verticalAlign"]}dragAddItem(e,n){if(n){const{left:o,top:p}=this.canvas.getSelectionElement().getBoundingClientRect();if(n.x<o||n.y<p||e.width===void 0)return;const v={x:n.x-o,y:n.y-p},c=this.canvas.restorePointerVpt(v);e.left=c.x-e.width/2,e.top=c.y}const{width:i}=this._getSaveOption();i&&e.scaleToWidth(i/2),this.canvas.add(e),this.canvas.setActiveObject(e),!n&&this.editor.position("center"),this.canvas.requestRenderAll()}clipboard(){const e=this.getJson();return Oc(JSON.stringify(e,null,"	"))}clipboardBase64(){return we(this,null,function*(){const e=yield this.preview();return Oc(e)})}saveJson(){return we(this,null,function*(){const e=this.getJson();yield Fg(e.objects);const n=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e,null,"	"))}`;ro(n,"json")})}saveSvg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",()=>{const{fontOption:e,svgOption:n}=this._getSaveSvgOption();le.fabric.fontPaths=ve({},e);const i=this.canvas.toSVG(n),o=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(i)}`;this.editor.hooksEntity.hookSaveAfter.callAsync(o,()=>{ro(o,"svg")})})}saveImg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",()=>{const e=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]);const n=this.canvas.toDataURL(e);this.editor.hooksEntity.hookSaveAfter.callAsync(n,()=>{ro(n,"png")})})}preview(){return new Promise(e=>{this.editor.hooksEntity.hookSaveBefore.callAsync("",()=>{const n=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]),this.canvas.renderAll();const i=this.canvas.toDataURL(n);this.editor.hooksEntity.hookSaveAfter.callAsync(i,()=>{e(i)})})})}_getSaveSvgOption(){const e=this.canvas.getObjects().find(d=>d.id==="workspace");let n=this.canvas.getObjects().filter(d=>d.type=="textbox").map(d=>d.fontFamily);n=Array.from(new Set(n));const i=this.editor.getPlugin("FontPlugin").cacheList,o={};for(const d of n){const u=i.find(a=>a.name===d);o[d]=u.file}console.log("_getSaveSvgOption",o);const{left:p,top:v,width:c,height:r}=e;return{fontOption:o,svgOption:{width:c,height:r,viewBox:{x:p,y:v,width:c,height:r}}}}_getSaveOption(){const e=this.canvas.getObjects().find(v=>v.id==="workspace"),{left:n,top:i,width:o,height:p}=e;return{name:"New Image",format:"png",quality:1,width:o,height:p,left:n,top:i}}clear(){var e;this.canvas.getObjects().forEach(n=>{n.id!=="workspace"&&this.canvas.remove(n)}),(e=this.editor)==null||e.setWorkspaseBg("#fff"),this.canvas.discardActiveObject(),this.canvas.renderAll()}destroy(){console.log("pluginDestroy")}}pe(vs,"pluginName","ServersPlugin"),pe(vs,"apis",["insert","loadJSON","getJson","dragAddItem","clipboard","clipboardBase64","saveJson","saveSvg","saveImg","clear","preview","getSelectMode","getExtensionKey"]),pe(vs,"events",[Ci.ONE,Ci.MULTI,io.CANCEL]);var Dc={};Dc.deprecate=(t,e)=>{let n=!0;return function(){return n&&(console.warn("DeprecationWarning: "+e),n=!1),t.apply(this,arguments)}};const dB=Dc,fB=dB.deprecate(()=>{},"Hook.context is deprecated and will be removed"),Rg=function(...t){return this.call=this._createCall("sync"),this.call(...t)},Ng=function(...t){return this.callAsync=this._createCall("async"),this.callAsync(...t)},zg=function(...t){return this.promise=this._createCall("promise"),this.promise(...t)};let Vg=class{constructor(t=[],e=void 0){this._args=t,this.name=e,this.taps=[],this.interceptors=[],this._call=Rg,this.call=Rg,this._callAsync=Ng,this.callAsync=Ng,this._promise=zg,this.promise=zg,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(t){throw new Error("Abstract: should be overridden")}_createCall(t){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:t})}_tap(t,e,n){if(typeof e=="string")e={name:e.trim()};else if(typeof e!="object"||e===null)throw new Error("Invalid tap options");if(typeof e.name!="string"||e.name==="")throw new Error("Missing name for tap");typeof e.context<"u"&&fB(),e=Object.assign({type:t,fn:n},e),e=this._runRegisterInterceptors(e),this._insert(e)}tap(t,e){this._tap("sync",t,e)}tapAsync(t,e){this._tap("async",t,e)}tapPromise(t,e){this._tap("promise",t,e)}_runRegisterInterceptors(t){for(const e of this.interceptors)if(e.register){const n=e.register(t);n!==void 0&&(t=n)}return t}withOptions(t){const e=n=>Object.assign({},t,typeof n=="string"?{name:n}:n);return{name:this.name,tap:(n,i)=>this.tap(e(n),i),tapAsync:(n,i)=>this.tapAsync(e(n),i),tapPromise:(n,i)=>this.tapPromise(e(n),i),intercept:n=>this.intercept(n),isUsed:()=>this.isUsed(),withOptions:n=>this.withOptions(e(n))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(t){if(this._resetCompilation(),this.interceptors.push(Object.assign({},t)),t.register)for(let e=0;e<this.taps.length;e++)this.taps[e]=t.register(this.taps[e])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(t){this._resetCompilation();let e;typeof t.before=="string"?e=new Set([t.before]):Array.isArray(t.before)&&(e=new Set(t.before));let n=0;typeof t.stage=="number"&&(n=t.stage);let i=this.taps.length;for(;i>0;){i--;const o=this.taps[i];this.taps[i+1]=o;const p=o.stage||0;if(e){if(e.has(o.name)){e.delete(o.name);continue}if(e.size>0)continue}if(!(p>n)){i++;break}}this.taps[i]=t}};Object.setPrototypeOf(Vg.prototype,null);var ni=Vg,ii=class{constructor(t){this.config=t,this.options=void 0,this._args=void 0}create(t){this.init(t);let e;switch(this.options.type){case"sync":e=new Function(this.args(),`"use strict";
`+this.header()+this.contentWithInterceptors({onError:p=>`throw ${p};
`,onResult:p=>`return ${p};
`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":e=new Function(this.args({after:"_callback"}),`"use strict";
`+this.header()+this.contentWithInterceptors({onError:p=>`_callback(${p});
`,onResult:p=>`_callback(null, ${p});
`,onDone:()=>`_callback();
`}));break;case"promise":let n=!1;const i=this.contentWithInterceptors({onError:p=>(n=!0,`_error(${p});
`),onResult:p=>`_resolve(${p});
`,onDone:()=>`_resolve();
`});let o="";o+=`"use strict";
`,o+=this.header(),o+=`return new Promise((function(_resolve, _reject) {
`,n&&(o+=`var _sync = true;
`,o+=`function _error(_err) {
`,o+=`if(_sync)
`,o+=`_resolve(Promise.resolve().then((function() { throw _err; })));
`,o+=`else
`,o+=`_reject(_err);
`,o+=`};
`),o+=i,n&&(o+=`_sync = false;
`),o+=`}));
`,e=new Function(this.args(),o);break}return this.deinit(),e}setup(t,e){t._x=e.taps.map(n=>n.fn)}init(t){this.options=t,this._args=t.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(t){if(this.options.interceptors.length>0){const e=t.onError,n=t.onResult,i=t.onDone;let o="";for(let p=0;p<this.options.interceptors.length;p++){const v=this.options.interceptors[p];v.call&&(o+=`${this.getInterceptor(p)}.call(${this.args({before:v.context?"_context":void 0})});
`)}return o+=this.content(Object.assign(t,{onError:e&&(p=>{let v="";for(let c=0;c<this.options.interceptors.length;c++)this.options.interceptors[c].error&&(v+=`${this.getInterceptor(c)}.error(${p});
`);return v+=e(p),v}),onResult:n&&(p=>{let v="";for(let c=0;c<this.options.interceptors.length;c++)this.options.interceptors[c].result&&(v+=`${this.getInterceptor(c)}.result(${p});
`);return v+=n(p),v}),onDone:i&&(()=>{let p="";for(let v=0;v<this.options.interceptors.length;v++)this.options.interceptors[v].done&&(p+=`${this.getInterceptor(v)}.done();
`);return p+=i(),p})})),o}else return this.content(t)}header(){let t="";return this.needContext()?t+=`var _context = {};
`:t+=`var _context;
`,t+=`var _x = this._x;
`,this.options.interceptors.length>0&&(t+=`var _taps = this.taps;
`,t+=`var _interceptors = this.interceptors;
`),t}needContext(){for(const t of this.options.taps)if(t.context)return!0;return!1}callTap(t,{onError:e,onResult:n,onDone:i,rethrowIfPossible:o}){let p="",v=!1;for(let r=0;r<this.options.interceptors.length;r++){const d=this.options.interceptors[r];d.tap&&(v||(p+=`var _tap${t} = ${this.getTap(t)};
`,v=!0),p+=`${this.getInterceptor(r)}.tap(${d.context?"_context, ":""}_tap${t});
`)}p+=`var _fn${t} = ${this.getTapFn(t)};
`;const c=this.options.taps[t];switch(c.type){case"sync":o||(p+=`var _hasError${t} = false;
`,p+=`try {
`),n?p+=`var _result${t} = _fn${t}(${this.args({before:c.context?"_context":void 0})});
`:p+=`_fn${t}(${this.args({before:c.context?"_context":void 0})});
`,o||(p+=`} catch(_err) {
`,p+=`_hasError${t} = true;
`,p+=e("_err"),p+=`}
`,p+=`if(!_hasError${t}) {
`),n&&(p+=n(`_result${t}`)),i&&(p+=i()),o||(p+=`}
`);break;case"async":let r="";n?r+=`(function(_err${t}, _result${t}) {
`:r+=`(function(_err${t}) {
`,r+=`if(_err${t}) {
`,r+=e(`_err${t}`),r+=`} else {
`,n&&(r+=n(`_result${t}`)),i&&(r+=i()),r+=`}
`,r+="})",p+=`_fn${t}(${this.args({before:c.context?"_context":void 0,after:r})});
`;break;case"promise":p+=`var _hasResult${t} = false;
`,p+=`var _promise${t} = _fn${t}(${this.args({before:c.context?"_context":void 0})});
`,p+=`if (!_promise${t} || !_promise${t}.then)
`,p+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${t} + ')');
`,p+=`_promise${t}.then((function(_result${t}) {
`,p+=`_hasResult${t} = true;
`,n&&(p+=n(`_result${t}`)),i&&(p+=i()),p+=`}), function(_err${t}) {
`,p+=`if(_hasResult${t}) throw _err${t};
`,p+=e(`_err${t}`),p+=`});
`;break}return p}callTapsSeries({onError:t,onResult:e,resultReturns:n,onDone:i,doneReturns:o,rethrowIfPossible:p}){if(this.options.taps.length===0)return i();const v=this.options.taps.findIndex(a=>a.type!=="sync"),c=n||o;let r="",d=i,u=0;for(let a=this.options.taps.length-1;a>=0;a--){const l=a;d!==i&&(this.options.taps[l].type!=="sync"||u++>20)&&(u=0,r+=`function _next${l}() {
`,r+=d(),r+=`}
`,d=()=>`${c?"return ":""}_next${l}();
`);const s=d,h=f=>f?"":i(),g=this.callTap(l,{onError:f=>t(l,f,s,h),onResult:e&&(f=>e(l,f,s,h)),onDone:!e&&s,rethrowIfPossible:p&&(v<0||l<v)});d=()=>g}return r+=d(),r}callTapsLooping({onError:t,onDone:e,rethrowIfPossible:n}){if(this.options.taps.length===0)return e();const i=this.options.taps.every(p=>p.type==="sync");let o="";i||(o+=`var _looper = (function() {
`,o+=`var _loopAsync = false;
`),o+=`var _loop;
`,o+=`do {
`,o+=`_loop = false;
`;for(let p=0;p<this.options.interceptors.length;p++){const v=this.options.interceptors[p];v.loop&&(o+=`${this.getInterceptor(p)}.loop(${this.args({before:v.context?"_context":void 0})});
`)}return o+=this.callTapsSeries({onError:t,onResult:(p,v,c,r)=>{let d="";return d+=`if(${v} !== undefined) {
`,d+=`_loop = true;
`,i||(d+=`if(_loopAsync) _looper();
`),d+=r(!0),d+=`} else {
`,d+=c(),d+=`}
`,d},onDone:e&&(()=>{let p="";return p+=`if(!_loop) {
`,p+=e(),p+=`}
`,p}),rethrowIfPossible:n&&i}),o+=`} while(_loop);
`,i||(o+=`_loopAsync = true;
`,o+=`});
`,o+=`_looper();
`),o}callTapsParallel({onError:t,onResult:e,onDone:n,rethrowIfPossible:i,onTap:o=(p,v)=>v()}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:t,onResult:e,onDone:n,rethrowIfPossible:i});let p="";p+=`do {
`,p+=`var _counter = ${this.options.taps.length};
`,n&&(p+=`var _done = (function() {
`,p+=n(),p+=`});
`);for(let v=0;v<this.options.taps.length;v++){const c=()=>n?`if(--_counter === 0) _done();
`:"--_counter;",r=d=>d||!n?`_counter = 0;
`:`_counter = 0;
_done();
`;p+=`if(_counter <= 0) break;
`,p+=o(v,()=>this.callTap(v,{onError:d=>{let u="";return u+=`if(_counter > 0) {
`,u+=t(v,d,c,r),u+=`}
`,u},onResult:e&&(d=>{let u="";return u+=`if(_counter > 0) {
`,u+=e(v,d,c,r),u+=`}
`,u}),onDone:!e&&(()=>c()),rethrowIfPossible:i}),c,r)}return p+=`} while(false);
`,p}args({before:t,after:e}={}){let n=this._args;return t&&(n=[t].concat(n)),e&&(n=n.concat(e)),n.length===0?"":n.join(", ")}getTapFn(t){return`_x[${t}]`}getTap(t){return`_taps[${t}]`}getInterceptor(t){return`_interceptors[${t}]`}};const pB=ni,gB=ii;class vB extends gB{content({onError:e,onDone:n,rethrowIfPossible:i}){return this.callTapsSeries({onError:(o,p)=>e(p),onDone:n,rethrowIfPossible:i})}}const Ug=new vB,AB=()=>{throw new Error("tapAsync is not supported on a SyncHook")},mB=()=>{throw new Error("tapPromise is not supported on a SyncHook")},yB=function(t){return Ug.setup(this,t),Ug.create(t)};function Hg(t=[],e=void 0){const n=new pB(t,e);return n.constructor=Hg,n.tapAsync=AB,n.tapPromise=mB,n.compile=yB,n}Hg.prototype=null;const bB=ni,CB=ii;class wB extends CB{content({onError:e,onResult:n,resultReturns:i,onDone:o,rethrowIfPossible:p}){return this.callTapsSeries({onError:(v,c)=>e(c),onResult:(v,c,r)=>`if(${c} !== undefined) {
${n(c)};
} else {
${r()}}
`,resultReturns:i,onDone:o,rethrowIfPossible:p})}}const Gg=new wB,xB=()=>{throw new Error("tapAsync is not supported on a SyncBailHook")},_B=()=>{throw new Error("tapPromise is not supported on a SyncBailHook")},SB=function(t){return Gg.setup(this,t),Gg.create(t)};function Yg(t=[],e=void 0){const n=new bB(t,e);return n.constructor=Yg,n.tapAsync=xB,n.tapPromise=_B,n.compile=SB,n}Yg.prototype=null;const EB=ni,IB=ii;class kB extends IB{content({onError:e,onResult:n,resultReturns:i,rethrowIfPossible:o}){return this.callTapsSeries({onError:(p,v)=>e(v),onResult:(p,v,c)=>{let r="";return r+=`if(${v} !== undefined) {
`,r+=`${this._args[0]} = ${v};
`,r+=`}
`,r+=c(),r},onDone:()=>n(this._args[0]),doneReturns:i,rethrowIfPossible:o})}}const Wg=new kB,BB=()=>{throw new Error("tapAsync is not supported on a SyncWaterfallHook")},OB=()=>{throw new Error("tapPromise is not supported on a SyncWaterfallHook")},DB=function(t){return Wg.setup(this,t),Wg.create(t)};function Xg(t=[],e=void 0){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const n=new EB(t,e);return n.constructor=Xg,n.tapAsync=BB,n.tapPromise=OB,n.compile=DB,n}Xg.prototype=null;const TB=ni,MB=ii;class QB extends MB{content({onError:e,onDone:n,rethrowIfPossible:i}){return this.callTapsLooping({onError:(o,p)=>e(p),onDone:n,rethrowIfPossible:i})}}const $g=new QB,LB=()=>{throw new Error("tapAsync is not supported on a SyncLoopHook")},jB=()=>{throw new Error("tapPromise is not supported on a SyncLoopHook")},PB=function(t){return $g.setup(this,t),$g.create(t)};function qg(t=[],e=void 0){const n=new TB(t,e);return n.constructor=qg,n.tapAsync=LB,n.tapPromise=jB,n.compile=PB,n}qg.prototype=null;const FB=ni,RB=ii;class NB extends RB{content({onError:e,onDone:n}){return this.callTapsParallel({onError:(i,o,p,v)=>e(o)+v(!0),onDone:n})}}const Kg=new NB,zB=function(t){return Kg.setup(this,t),Kg.create(t)};function Jg(t=[],e=void 0){const n=new FB(t,e);return n.constructor=Jg,n.compile=zB,n._call=void 0,n.call=void 0,n}Jg.prototype=null;const VB=ni,UB=ii;class HB extends UB{content({onError:e,onResult:n,onDone:i}){let o="";return o+=`var _results = new Array(${this.options.taps.length});
`,o+=`var _checkDone = function() {
`,o+=`for(var i = 0; i < _results.length; i++) {
`,o+=`var item = _results[i];
`,o+=`if(item === undefined) return false;
`,o+=`if(item.result !== undefined) {
`,o+=n("item.result"),o+=`return true;
`,o+=`}
`,o+=`if(item.error) {
`,o+=e("item.error"),o+=`return true;
`,o+=`}
`,o+=`}
`,o+=`return false;
`,o+=`}
`,o+=this.callTapsParallel({onError:(p,v,c,r)=>{let d="";return d+=`if(${p} < _results.length && ((_results.length = ${p+1}), (_results[${p}] = { error: ${v} }), _checkDone())) {
`,d+=r(!0),d+=`} else {
`,d+=c(),d+=`}
`,d},onResult:(p,v,c,r)=>{let d="";return d+=`if(${p} < _results.length && (${v} !== undefined && (_results.length = ${p+1}), (_results[${p}] = { result: ${v} }), _checkDone())) {
`,d+=r(!0),d+=`} else {
`,d+=c(),d+=`}
`,d},onTap:(p,v,c,r)=>{let d="";return p>0&&(d+=`if(${p} >= _results.length) {
`,d+=c(),d+=`} else {
`),d+=v(),p>0&&(d+=`}
`),d},onDone:i}),o}}const Zg=new HB,GB=function(t){return Zg.setup(this,t),Zg.create(t)};function e0(t=[],e=void 0){const n=new VB(t,e);return n.constructor=e0,n.compile=GB,n._call=void 0,n.call=void 0,n}e0.prototype=null;const YB=ni,WB=ii;class XB extends WB{content({onError:e,onDone:n}){return this.callTapsSeries({onError:(i,o,p,v)=>e(o)+v(!0),onDone:n})}}const t0=new XB,$B=function(t){return t0.setup(this,t),t0.create(t)};function Tc(t=[],e=void 0){const n=new YB(t,e);return n.constructor=Tc,n.compile=$B,n._call=void 0,n.call=void 0,n}Tc.prototype=null;var qB=Tc;const KB=ni,JB=ii;class ZB extends JB{content({onError:e,onResult:n,resultReturns:i,onDone:o}){return this.callTapsSeries({onError:(p,v,c,r)=>e(v)+r(!0),onResult:(p,v,c)=>`if(${v} !== undefined) {
${n(v)}
} else {
${c()}}
`,resultReturns:i,onDone:o})}}const n0=new ZB,e9=function(t){return n0.setup(this,t),n0.create(t)};function i0(t=[],e=void 0){const n=new KB(t,e);return n.constructor=i0,n.compile=e9,n._call=void 0,n.call=void 0,n}i0.prototype=null;const t9=ni,n9=ii;class i9 extends n9{content({onError:e,onDone:n}){return this.callTapsLooping({onError:(i,o,p,v)=>e(o)+v(!0),onDone:n})}}const r0=new i9,r9=function(t){return r0.setup(this,t),r0.create(t)};function o0(t=[],e=void 0){const n=new t9(t,e);return n.constructor=o0,n.compile=r9,n._call=void 0,n.call=void 0,n}o0.prototype=null;const o9=ni,a9=ii;class s9 extends a9{content({onError:e,onResult:n,onDone:i}){return this.callTapsSeries({onError:(o,p,v,c)=>e(p)+c(!0),onResult:(o,p,v)=>{let c="";return c+=`if(${p} !== undefined) {
`,c+=`${this._args[0]} = ${p};
`,c+=`}
`,c+=v(),c},onDone:()=>n(this._args[0])})}}const a0=new s9,l9=function(t){return a0.setup(this,t),a0.create(t)};function s0(t=[],e=void 0){if(t.length<1)throw new Error("Waterfall hooks must have at least one argument");const n=new o9(t,e);return n.constructor=s0,n.compile=l9,n._call=void 0,n.call=void 0,n}s0.prototype=null;const Mc=Dc,c9=(t,e)=>e;class Qc{constructor(e,n=void 0){this._map=new Map,this.name=n,this._factory=e,this._interceptors=[]}get(e){return this._map.get(e)}for(e){const n=this.get(e);if(n!==void 0)return n;let i=this._factory(e);const o=this._interceptors;for(let p=0;p<o.length;p++)i=o[p].factory(e,i);return this._map.set(e,i),i}intercept(e){this._interceptors.push(Object.assign({factory:c9},e))}}Qc.prototype.tap=Mc.deprecate(function(t,e,n){return this.for(t).tap(e,n)},"HookMap#tap(key,\u2026) is deprecated. Use HookMap#for(key).tap(\u2026) instead."),Qc.prototype.tapAsync=Mc.deprecate(function(t,e,n){return this.for(t).tapAsync(e,n)},"HookMap#tapAsync(key,\u2026) is deprecated. Use HookMap#for(key).tapAsync(\u2026) instead."),Qc.prototype.tapPromise=Mc.deprecate(function(t,e,n){return this.for(t).tapPromise(e,n)},"HookMap#tapPromise(key,\u2026) is deprecated. Use HookMap#for(key).tapPromise(\u2026) instead.");var u9=qB;class h9 extends _k{constructor(){super(...arguments);pe(this,"canvas",null);pe(this,"contextMenu",null);pe(this,"pluginMap",{});pe(this,"customEvents",[]);pe(this,"customApis",[]);pe(this,"hooks",["hookImportBefore","hookImportAfter","hookSaveBefore","hookSaveAfter","hookTransform"]);pe(this,"hooksEntity",{})}init(n){this.canvas=n,this._initContextMenu(),this._bindContextMenu(),this._initActionHooks(),this._initServersPlugin(),this.Utils=Gi}get fabricCanvas(){return this.canvas}use(n,i){if(this._checkPlugin(n)&&this.canvas){this._saveCustomAttr(n);const o=new n(this.canvas,this,i||{});o.pluginName=n.pluginName,this.pluginMap[n.pluginName]=o,this._bindingHooks(o),this._bindingHotkeys(o),this._bindingApis(o)}return this}destory(){this.canvas=null,this.contextMenu=null,this.pluginMap={},this.customEvents=[],this.customApis=[],this.hooksEntity={}}getPlugin(n){if(this.pluginMap[n])return this.pluginMap[n]}_checkPlugin(n){const{pluginName:i,events:o=[],apis:p=[]}=n;if(this.pluginMap[i])throw new Error(i+"\u63D2\u4EF6\u91CD\u590D\u521D\u59CB\u5316");return o.forEach(v=>{if(this.customEvents.find(c=>c===v))throw new Error(i+"\u63D2\u4EF6\u4E2D"+v+"\u91CD\u590D")}),p.forEach(v=>{if(this.customApis.find(c=>c===v))throw new Error(i+"\u63D2\u4EF6\u4E2D"+v+"\u91CD\u590D")}),!0}_bindingHooks(n){this.hooks.forEach(i=>{const o=n[i];o&&this.hooksEntity[i].tapPromise(n.pluginName+i,function(){const p=o.apply(n,[...arguments]);return p instanceof Promise?p:Promise.resolve(p)})})}_bindingHotkeys(n){var i;(i=n==null?void 0:n.hotkeys)==null||i.forEach(o=>{bi(o,{keyup:!0},p=>{n.hotkeyEvent&&n.hotkeyEvent(o,p)})})}_saveCustomAttr(n){const{events:i=[],apis:o=[]}=n;this.customApis=this.customApis.concat(o),this.customEvents=this.customEvents.concat(i)}_bindingApis(n){const{apis:i=[]}=n.constructor||{};i.forEach(o=>{this[o]=function(){return n[o].apply(n,[...arguments])}})}_bindContextMenu(){this.canvas&&this.canvas.on("mouse:down",n=>{if(n.button===3){let i=[];Object.keys(this.pluginMap).forEach(o=>{const p=this.pluginMap[o],v=p.contextMenu&&p.contextMenu();v&&(i=i.concat(v))}),this._renderMenu(n,i)}})}_renderMenu(n,i){i.length!==0&&this.contextMenu&&(this.contextMenu.hideAll(),this.contextMenu.setData(i),this.contextMenu.show(n.e.clientX,n.e.clientY))}_initActionHooks(){this.hooks.forEach(n=>{this.hooksEntity[n]=new u9(["data"])})}_initContextMenu(){this.contextMenu=new ps(this.canvas.wrapperEl,[]),this.contextMenu.install()}_initServersPlugin(){this.use(vs)}off(n,i){return i?super.off(n,i):this}}class As{constructor(e,n){pe(this,"defautOption",{});pe(this,"hotkeys",["space"]);pe(this,"dragMode",!1);this.canvas=e,this.editor=n,this.dragMode=!1,this.init()}init(){this._initDring()}startDring(){this.dragMode=!0,this.canvas.setCursor("grab"),this.editor.emit("startDring"),this.canvas.renderAll()}endDring(){this.dragMode=!1,this.canvas.setCursor("default"),this.canvas.isDragging=!1,this.editor.emit("endDring"),this.canvas.renderAll()}_initDring(){const e=this;this.canvas.on("mouse:down",function(n){const i=n.e;(i.altKey||e.dragMode)&&(e.canvas.setCursor("grabbing"),e.canvas.discardActiveObject(),e._setDring(),this.selection=!1,this.isDragging=!0,this.lastPosX=i.clientX,this.lastPosY=i.clientY,this.requestRenderAll())}),this.canvas.on("mouse:move",function(n){if(e.dragMode&&e.canvas.setCursor("grab"),this.isDragging){e.canvas.discardActiveObject(),e.canvas.setCursor("grabbing");const{e:i}=n;if(!this.viewportTransform)return;const o=this.viewportTransform;o[4]+=i.clientX-this.lastPosX,o[5]+=i.clientY-this.lastPosY,this.lastPosX=i.clientX,this.lastPosY=i.clientY,this.requestRenderAll()}}),this.canvas.on("mouse:up",function(){this.viewportTransform&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,this.getObjects().forEach(n=>{n.id!=="workspace"&&n.hasControls&&(n.selectable=!0)}),e.dragMode&&e.canvas.setCursor("grab"),this.requestRenderAll())})}_setDring(){this.canvas.selection=!1,this.canvas.getObjects().forEach(e=>{e.selectable=!1}),this.canvas.requestRenderAll()}destroy(){console.log("pluginDestroy")}hotkeyEvent(e,n){n.code==="Space"&&n.type==="keydown"&&(this.dragMode||this.startDring()),n.code==="Space"&&n.type==="keyup"&&this.endDring()}}pe(As,"pluginName","DringPlugin"),pe(As,"events",["startDring","endDring"]),pe(As,"apis",["startDring","endDring"]);class l0{constructor(e,n){pe(this,"defautOption",{color:"rgba(255,95,95,1)",width:1});pe(this,"dragMode",!1);this.canvas=e,this.editor=n,this.dragMode=!1,this.init()}init(){const{canvas:e}=this,n=e.getSelectionContext(),i=5,o=4,p=this;let v,c=1;function r(h){u(h.x+.5,h.y1>h.y2?h.y2:h.y1,h.x+.5,h.y2>h.y1?h.y2:h.y1)}function d(h){u(h.x1>h.x2?h.x2:h.x1,h.y+.5,h.x2>h.x1?h.x2:h.x1,h.y+.5)}function u(h,g,f,A){v!=null&&(n.moveTo(h*c+v[4],g*c+v[5]),n.lineTo(f*c+v[4],A*c+v[5]))}function a(h,g){h=Math.round(h),g=Math.round(g);for(let f=h-o,A=h+o;f<=A;f++)if(f===g)return!0;return!1}const l=[],s=[];e.on("mouse:down",()=>{v=e.viewportTransform,c=e.getZoom()}),e.on("object:moving",h=>{if(v===void 0||h.target===void 0)return;const g=h.target,f=e.getObjects(),A=g.getCenterPoint(),m=A.x,y=A.y,b=g.getBoundingRect(),x=b.height/v[3],S=b.width/v[0];let O=!1,R=!1;if(e._currentTransform){for(let Z=f.length;Z--;){if(f[Z]===g||g instanceof le.fabric.GuideLine&&f[Z]instanceof le.fabric.GuideLine)continue;const ee=f[Z].getCenterPoint(),re=ee.x,ae=ee.y,ne=f[Z].getBoundingRect(),J=ne.height/v[3],P=ne.width/v[0];a(re,m)&&(R=!0,l.push({x:re,y1:ae<y?ae-J/2-i:ae+J/2+i,y2:y>ae?y+x/2+i:y-x/2-i}),g.setPositionByOrigin(new le.fabric.Point(re,y),"center","center")),a(re-P/2,m-S/2)&&(R=!0,l.push({x:re-P/2,y1:ae<y?ae-J/2-i:ae+J/2+i,y2:y>ae?y+x/2+i:y-x/2-i}),g.setPositionByOrigin(new le.fabric.Point(re-P/2+S/2,y),"center","center")),a(re+P/2,m+S/2)&&(R=!0,l.push({x:re+P/2,y1:ae<y?ae-J/2-i:ae+J/2+i,y2:y>ae?y+x/2+i:y-x/2-i}),g.setPositionByOrigin(new le.fabric.Point(re+P/2-S/2,y),"center","center")),a(ae,y)&&(O=!0,s.push({y:ae,x1:re<m?re-P/2-i:re+P/2+i,x2:m>re?m+S/2+i:m-S/2-i}),g.setPositionByOrigin(new le.fabric.Point(m,ae),"center","center")),a(ae-J/2,y-x/2)&&(O=!0,s.push({y:ae-J/2,x1:re<m?re-P/2-i:re+P/2+i,x2:m>re?m+S/2+i:m-S/2-i}),g.setPositionByOrigin(new le.fabric.Point(m,ae-J/2+x/2),"center","center")),a(ae+J/2,y+x/2)&&(O=!0,s.push({y:ae+J/2,x1:re<m?re-P/2-i:re+P/2+i,x2:m>re?m+S/2+i:m-S/2-i}),g.setPositionByOrigin(new le.fabric.Point(m,ae+J/2-x/2),"center","center"))}O||(s.length=0),R||(l.length=0)}}),e.on("before:render",()=>{if(e.contextTop!==null)try{e.clearContext(e.contextTop)}catch(h){console.log(h)}}),e.on("after:render",()=>{n.save(),n.beginPath(),n.lineWidth=p.defautOption.width,n.strokeStyle=p.defautOption.color;for(let h=l.length;h--;)r(l[h]);for(let h=s.length;h--;)d(s[h]);n.stroke(),n.restore(),l.length=0,s.length=0}),e.on("mouse:up",()=>{l.length=0,s.length=0,e.renderAll()})}destroy(){console.log("pluginDestroy")}}pe(l0,"pluginName","AlignGuidLinePlugin");const d9="data:image/svg+xml,%3csvg%20width='12'%20height='24'%20viewBox='0%200%2012%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='4'%20y='4'%20width='4'%20height='16'%20rx='2'%20fill='white'/%3e%3crect%20x='4.25'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='12'%20height='24'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",f9="data:image/svg+xml,%3csvg%20width='24'%20height='12'%20viewBox='0%200%2024%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='20'%20y='4'%20width='4'%20height='16'%20rx='2'%20transform='rotate(90%2020%204)'%20fill='white'/%3e%3crect%20x='19.75'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20transform='rotate(90%2019.75%204.25)'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='24'%20height='12'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",c0="data:image/svg+xml,%3csvg%20width='19'%20height='18'%20viewBox='0%200%2019%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0.996094'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",p9="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cpath%20d='M10.8047%2011.1242L9.49934%2011.1242L9.49934%209.81885'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.94856%206.72607L8.25391%206.72607L8.25391%208.03142'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.69517%206.92267C10.007%207.03301%2010.2858%207.22054%2010.5055%207.46776C10.7252%207.71497%2010.8787%208.01382%2010.9517%208.33642C11.0247%208.65902%2011.0148%208.99485%2010.9229%209.31258C10.831%209.63031%2010.6601%209.91958%2010.4262%2010.1534L9.49701%2011.0421M8.25792%206.72607L7.30937%207.73554C7.07543%207.96936%206.90454%208.25863%206.81264%208.57636C6.72073%208.89408%206.71081%209.22992%206.78381%209.55251C6.8568%209.87511%207.01032%2010.174%207.23005%2010.4212C7.44978%2010.6684%207.72855%2010.8559%208.04036%2010.9663'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";le.fabric.Object.NUM_FRACTION_DIGITS=4;function ms(t,e,n,i,o,p,v){v!==void 0&&(t.save(),t.translate(e,n),t.rotate(le.fabric.util.degreesToRadians(v)),t.drawImage(i,-o/2,-p/2,o,p),t.restore())}function g9(){const t=document.createElement("img");t.src=d9;const e=document.createElement("img");e.src=f9;function n(o,p,v,c,r){ms(o,p,v,t,20,25,r.angle)}function i(o,p,v,c,r){ms(o,p,v,e,25,20,r.angle)}le.fabric.Object.prototype.controls.ml=new le.fabric.Control({x:-.5,y:0,offsetX:-1,cursorStyleHandler:le.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingXOrSkewingY,getActionName:le.fabric.controlsUtils.scaleOrSkewActionName,render:n}),le.fabric.Object.prototype.controls.mr=new le.fabric.Control({x:.5,y:0,offsetX:1,cursorStyleHandler:le.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingXOrSkewingY,getActionName:le.fabric.controlsUtils.scaleOrSkewActionName,render:n}),le.fabric.Object.prototype.controls.mb=new le.fabric.Control({x:0,y:.5,offsetY:1,cursorStyleHandler:le.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingYOrSkewingX,getActionName:le.fabric.controlsUtils.scaleOrSkewActionName,render:i}),le.fabric.Object.prototype.controls.mt=new le.fabric.Control({x:0,y:-.5,offsetY:-1,cursorStyleHandler:le.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingYOrSkewingX,getActionName:le.fabric.controlsUtils.scaleOrSkewActionName,render:i})}function v9(){const t=document.createElement("img");t.src=c0;function e(n,i,o,p,v){ms(n,i,o,t,25,25,v.angle)}le.fabric.Object.prototype.controls.tl=new le.fabric.Control({x:-.5,y:-.5,cursorStyleHandler:le.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingEqually,render:e}),le.fabric.Object.prototype.controls.bl=new le.fabric.Control({x:-.5,y:.5,cursorStyleHandler:le.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingEqually,render:e}),le.fabric.Object.prototype.controls.tr=new le.fabric.Control({x:.5,y:-.5,cursorStyleHandler:le.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingEqually,render:e}),le.fabric.Object.prototype.controls.br=new le.fabric.Control({x:.5,y:.5,cursorStyleHandler:le.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:le.fabric.controlsUtils.scalingEqually,render:e})}function A9(){const t=document.createElement("img");t.src=p9;function e(n,i,o,p,v){ms(n,i,o,t,40,40,v.angle)}le.fabric.Object.prototype.controls.mtr=new le.fabric.Control({x:0,y:.5,cursorStyleHandler:le.fabric.controlsUtils.rotationStyleHandler,actionHandler:le.fabric.controlsUtils.rotationWithSnapping,offsetY:30,actionName:"rotate",render:e})}class u0{constructor(e,n){this.canvas=e,this.editor=n,this.init()}init(){v9(),g9(),A9(),le.fabric.Object.prototype.set({transparentCorners:!1,borderColor:"#51B9F9",cornerColor:"#FFF",borderScaleFactor:2.5,cornerStyle:"circle",cornerStrokeColor:"#0E98FC",borderOpacityWhenMoving:1})}destroy(){console.log("pluginDestroy")}}pe(u0,"pluginName","ControlsPlugin");class Lc{constructor(e,n){this.canvas=e,this.editor=n}center(e,n){const i=e.getCenterPoint();return this.canvas._centerObject(n,i)}centerV(e,n){return this.canvas._centerObject(n,new le.fabric.Point(n.getCenterPoint().x,e.getCenterPoint().y))}centerH(e,n){return this.canvas._centerObject(n,new le.fabric.Point(e.getCenterPoint().x,n.getCenterPoint().y))}position(e){const n=["centerH","center","centerV"],i=this.canvas.getActiveObject();if(n.includes(e)&&i){const o=this.canvas.getObjects().find(p=>p.id==="workspace");o&&this[e](o,i),this.canvas.renderAll()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"\u6C34\u5E73\u5782\u76F4\u5C45\u4E2D",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.position("center")}]}destroy(){console.log("pluginDestroy")}}pe(Lc,"pluginName","CenterAlignPlugin"),pe(Lc,"apis",["centerH","center","position","centerV"]);class jc{constructor(e,n){this.canvas=e,this.editor=n}_getWorkspace(){return this.canvas.getObjects().find(e=>e.id==="workspace")}_workspaceSendToBack(){const e=this._getWorkspace();e&&e.sendToBack()}up(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.bringForward(),this.canvas.renderAll(),this._workspaceSendToBack()}}down(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.sendBackwards(),this.canvas.renderAll(),this._workspaceSendToBack()}}toFront(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.bringToFront(),this.canvas.renderAll(),this._workspaceSendToBack()}}toBack(){const e=this.canvas.getActiveObjects();if(e&&e.length===1){const n=this.canvas.getActiveObjects()[0];n&&n.sendToBack(),this.canvas.renderAll(),this._workspaceSendToBack()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"\u56FE\u5C42\u7BA1\u7406",hotkey:"\u276F",subitems:[{text:"\u4E0A\u4E00\u4E2A",hotkey:"",onclick:()=>this.up()},{text:"\u4E0B\u4E00\u4E2A",hotkey:"",onclick:()=>this.down()},{text:"\u7F6E\u9876",hotkey:"",onclick:()=>this.toFront()},{text:"\u7F6E\u5E95",hotkey:"",onclick:()=>this.toBack()}]}]}destroy(){console.log("pluginDestroy")}}pe(jc,"pluginName","LayerPlugin"),pe(jc,"apis",["up","down","toFront","toBack"]);class Pc{constructor(e,n){pe(this,"hotkeys",["ctrl+v","ctrl+c"]);pe(this,"cache",null);this.canvas=e,this.editor=n,this.initPaste()}_copyActiveSelection(e){const n=this.canvas,i=this.editor.getExtensionKey();e==null||e.clone(o=>{o.clone(p=>{n.discardActiveObject(),!(p.left===void 0||p.top===void 0)&&(p.canvas=n,p.set({left:p.left+10,top:p.top+10,evented:!0,id:Tt()}),p.forEachObject(v=>{v.id=Tt(),n.add(v)}),p.setCoords(),n.setActiveObject(p),n.requestRenderAll())})},i)}_copyObject(e){const n=this.canvas,i=this.editor.getExtensionKey();e==null||e.clone(o=>{o.left===void 0||o.top===void 0||(n.discardActiveObject(),o.set({left:o.left+10,top:o.top+10,evented:!0,id:Tt()}),n.add(o),n.setActiveObject(o),n.requestRenderAll())},i)}clone(e){const n=e||this.canvas.getActiveObject();n&&((n==null?void 0:n.type)==="activeSelection"?this._copyActiveSelection(n):this._copyObject(n))}hotkeyEvent(e,n){if(e==="ctrl+c"&&n.type==="keydown"){const i=this.canvas.getActiveObject();this.cache=i,navigator.clipboard.writeText("")}e==="ctrl+v"&&n.type==="keydown"&&setTimeout(()=>{this.cache&&this.clone(this.cache)},0)}contextMenu(){if(this.canvas.getActiveObject())return[{text:"\u590D\u5236",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.clone()}]}destroy(){console.log("pluginDestroy"),window.removeEventListener("paste",e=>this.pasteListener(e))}initPaste(){window.addEventListener("paste",e=>this.pasteListener(e))}pasteListener(e){return we(this,null,function*(){const n=this.canvas;if(document.activeElement===document.body)e.preventDefault();else return;const i=(e.clipboardData||e.originalEvent.clipboardData).items,o=".pdf,.psd,.cdr,.ai,.svg,.jpg,.jpeg,.png,.webp,.json";for(const p of i)if(p.kind==="file"){const v=p.getAsFile(),c=v.name.split(".").pop();if(!o.split(",").includes(`.${c}`))return;if(c==="svg"){const r=yield Qg(v);if(!r)throw new Error("file is undefined");le.fabric.loadSVGFromURL(r,(d,u)=>{const a=le.fabric.util.groupSVGElements(d,De(ve({},u),{name:"defaultSVG",id:Tt()}));n.add(a).centerObject(a).renderAll()})}if(p.type.indexOf("image/")===0){const r=URL.createObjectURL(v),d=document.createElement("img");d.src=r,document.body.appendChild(d),d.onload=()=>{const u=new le.fabric.Image(d,{id:Tt(),name:"\u56FE\u72471",left:100,top:100});n.add(u),n.setActiveObject(u),n.renderAll(),d.remove()}}}else p.kind==="string"&&p.type.indexOf("text/plain")===0&&p.getAsString(v=>{const c=n.getActiveObject();if(c&&(c.type==="textbox"||c.type==="i-text")&&c.text){const r=c.selectionStart,d=c.text.substring(0,r),u=c.text.substring(r);c.set("text",d+v+u),c.selectionStart=r+v.length,c.selectionEnd=r+v.length,c.dirty=!0,n.renderAll()}else{const r=new le.fabric.IText(v,{left:100,top:100,fontSize:80,id:Tt()});n.add(r),n.setActiveObject(r)}});i.length&&(this.cache=null)})}}pe(Pc,"pluginName","CopyPlugin"),pe(Pc,"apis",["clone"]);class h0{constructor(e,n){pe(this,"hotkeys",["left","right","down","up"]);this.canvas=e,this.editor=n}hotkeyEvent(e,n){if(n.type==="keydown"){const{canvas:i}=this,o=i.getActiveObject();if(!o)return;switch(e){case"left":if(o.left===void 0)return;o.set("left",o.left-1);break;case"right":if(o.left===void 0)return;o.set("left",o.left+1);break;case"down":if(o.top===void 0)return;o.set("top",o.top+1);break;case"up":if(o.top===void 0)return;o.set("top",o.top-1);break}i.renderAll()}}destroy(){console.log("pluginDestroy")}}pe(h0,"pluginName","MoveHotKeyPlugin");class Fc{constructor(e,n){pe(this,"hotkeys",["backspace"]);this.canvas=e,this.editor=n}hotkeyEvent(e,n){n.type==="keydown"&&e==="backspace"&&this.del()}del(){const{canvas:e}=this,n=e.getActiveObjects();n&&(n.map(i=>e.remove(i)),e.requestRenderAll(),e.discardActiveObject())}contextMenu(){if(this.canvas.getActiveObject())return[null,{text:"\u5220\u9664",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.del()}]}destroy(){console.log("pluginDestroy")}}pe(Fc,"pluginName","DeleteHotKeyPlugin"),pe(Fc,"apis",["del"]);class Rc{constructor(e,n){this.canvas=e,this.editor=n}unGroup(){const e=this.canvas.getActiveObject();if(!e)return;const n=e.getObjects();e.toActiveSelection();for(const i of n)i.set("id",Tt());this.canvas.discardActiveObject().renderAll()}group(){const e=this.canvas.getActiveObject();if(!e)return;const n=e.toGroup(),i=n.getObjects();n.clone(o=>{o.set("id",Tt()),this.canvas.remove(n),i.forEach(p=>{this.canvas.remove(p)}),this.canvas.add(o),this.canvas.setActiveObject(o)})}contextMenu(){const e=this.canvas.getActiveObject();if(jg(e))return[{text:"\u7EC4\u5408",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.group()}];if(la(e))return[{text:"\u62C6\u5206\u7EC4\u5408",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.unGroup()}]}destroy(){console.log("pluginDestroy")}}pe(Rc,"pluginName","GroupPlugin"),pe(Rc,"apis",["unGroup","group"]),le.fabric.Arrow=le.fabric.util.createClass(le.fabric.Line,{type:"arrow",superType:"drawing",initialize(t,e){if(!t){const{x1:n,x2:i,y1:o,y2:p}=e;t=[n,o,i,p]}e=e||{},this.callSuper("initialize",t,e)},_render(t){this.callSuper("_render",t),t.save(),t.scale(1/this.scaleX,1/this.scaleY);const e=(this.x2-this.x1)*this.scaleX,n=(this.y2-this.y1)*this.scaleY,i=Math.atan2(n,e);t.translate((this.x2-this.x1)/2*this.scaleX,(this.y2-this.y1)/2*this.scaleY),t.rotate(i),t.beginPath(),t.moveTo(5,0),t.lineTo(-5,5),t.lineTo(-5,-5),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.stroke,t.fillStyle=this.fill,t.stroke(),t.fill(),t.restore()}}),le.fabric.Arrow.fromObject=(t,e)=>{const{x1:n,x2:i,y1:o,y2:p}=t;return e(new le.fabric.Arrow([n,o,i,p],t))};const m9=le.fabric.Arrow;le.fabric.ThinTailArrow=le.fabric.util.createClass(le.fabric.Line,{type:"thinTailArrow",superType:"drawing",initialize(t,e){if(!t){const{x1:n,x2:i,y1:o,y2:p}=e;t=[n,o,i,p]}e=e||{},this.callSuper("initialize",t,e)},_render(t){t.save(),t.scale(1/this.scaleX,1/this.scaleY);const e=(this.x2-this.x1)*this.scaleX,n=(this.y2-this.y1)*this.scaleY;t.translate(-e/2,-n/2);const i=Math.atan2(n,e);t.rotate(i);let o=Math.hypot(e,n);o=o<20?20:o,t.beginPath(),t.moveTo(0,0),t.lineTo(o-18,-5),t.lineTo(o-20,-12),t.lineTo(o,0),t.lineTo(o-20,12),t.lineTo(o-18,5),t.lineTo(0,0),t.lineWidth=this.strokeWidth,t.strokeStyle=this.stroke,t.fillStyle=this.fill,t.stroke(),t.fill(),t.restore()}}),le.fabric.ThinTailArrow.fromObject=(t,e)=>{const{x1:n,x2:i,y1:o,y2:p}=t;return e(new le.fabric.ThinTailArrow([n,o,i,p],t))};const y9=le.fabric.ThinTailArrow;class Nc{constructor(e,n){pe(this,"isDrawingLineMode");pe(this,"lineType");pe(this,"lineToDraw");pe(this,"pointer");pe(this,"pointerPoints");pe(this,"isDrawingLine");this.canvas=e,this.editor=n,this.isDrawingLine=!1,this.isDrawingLineMode=!1,this.lineType="",this.lineToDraw=null,this.pointer=null,this.pointerPoints=null,this.init()}init(){const{canvas:e}=this;e.on("mouse:down",n=>{if(!this.isDrawingLineMode)return;e.discardActiveObject(),e.getObjects().forEach(p=>{p.selectable=!1,p.hasControls=!1}),e.requestRenderAll(),this.isDrawingLine=!0,this.pointer=e.getPointer(n.e),this.pointerPoints=[this.pointer.x,this.pointer.y,this.pointer.x,this.pointer.y];let i,o={strokeWidth:2,stroke:"#000000",id:Tt()};switch(this.lineType){case"line":i=le.fabric.Line;break;case"arrow":i=m9;break;case"thinTailArrow":i=y9,o={strokeWidth:2,stroke:"#ff0000",fill:"#ff0000",id:Tt()};break}if(!i)throw new Error("Draw failed: invalid lineType.");this.lineToDraw=new i(this.pointerPoints,o),this.lineToDraw.selectable=!1,this.lineToDraw.evented=!1,this.lineToDraw.strokeUniform=!0,e.add(this.lineToDraw)}),e.on("mouse:move",n=>{if(!(!this.isDrawingLine||!["line","arrow","thinTailArrow"].includes(this.lineType)||(e.discardActiveObject(),e.getActiveObject()))){if(this.pointer=e.getPointer(n.e),n.e.shiftKey){const i=this.pointerPoints[0],o=this.pointerPoints[1],p=this.pointer.x-i,v=this.pointer.y-o,c=Math.sqrt(p*p+v*v);let r=Math.atan2(v,p)/Math.PI*180;r=~~((r+7.5)%360/15)*15;const d=c*Math.cos(r*Math.PI/180),u=c*Math.sin(r*Math.PI/180);this.lineToDraw.set({x2:d+i,y2:u+o})}else this.lineToDraw.set({x2:this.pointer.x,y2:this.pointer.y});e.renderAll()}}),e.on("mouse:up",()=>{this.isDrawingLine&&(this.lineToDraw.setCoords(),this.isDrawingLine=!1,e.discardActiveObject())})}setLineType(e){this.lineType=e}setMode(e){this.isDrawingLineMode=e,this.isDrawingLineMode||this.endRest()}endRest(){this.canvas.getObjects().forEach(e=>{e.id!=="workspace"&&(e.selectable=!0,e.hasControls=!0)})}destroy(){console.log("pluginDestroy")}}pe(Nc,"pluginName","DrawLinePlugin"),pe(Nc,"apis",["setLineType","setMode"]);class d0{constructor(e,n){pe(this,"isDown",!1);this.canvas=e,this.editor=n,this._init()}_init(){this.canvas.on("mouse:down",e=>{this.isDown=!0,e.target&&!e.target.lockMovementX&&!e.target.lockMovementY&&!e.target.lockRotation&&!e.target.lockScalingX&&!e.target.lockScalingY&&(e.target.hasControls=!0)}),this.canvas.on("mouse:up",()=>{this.isDown=!1}),this.canvas.on("mouse:dblclick",e=>{if(la(e.target)){const n=this._getGroupObj(e);if(!n)return;if(n.selectable=!0,n.hasControls&&(n.hasControls=!1),this.isText(n)){this._bedingTextEditingEvent(n,e.target);return}this.canvas.setActiveObject(n),this.canvas.renderAll()}})}_getGroupTextObj(e){const n=this.canvas.getPointer(e.e,!0);if(!la(e.target))return!1;const i=this.canvas._searchPossibleTargets(e.target._objects,n);return i&&this.isText(i)?i:!1}_getGroupObj(e){const n=this.canvas.getPointer(e.e,!0);return la(e.target)?this.canvas._searchPossibleTargets(e.target._objects,n):!1}_bedingTextEditingEvent(e,n){var h,g,f,A,m;const i=e.toObject(),o=n.calcTransformMatrix(),p=o[0],v=o[1],c=o[2],r=o[3],d=o[4],u=o[5],a=p*((h=e.left)!=null?h:0)+c*((g=e.top)!=null?g:0)+d,l=v*((f=e.left)!=null?f:0)+r*((A=e.top)!=null?A:0)+u,s=new e.constructor((m=e.text)!=null?m:"",De(ve({},i),{scaleX:i.scaleX*p,scaleY:i.scaleY*p,textAlign:e.textAlign,left:a,top:l,styles:e.styles,groupCopyed:e.group}));s.id=Tt(),e.visible=!1,n.addWithUpdate(),s.visible=!0,s.selectable=!0,s.hasControls=!1,s.editable=!0,this.canvas.add(s),this.canvas.setActiveObject(s),s.enterEditing(),s.selectAll(),s.on("editing:exited",()=>{const y=s.toObject();e.set(De(ve({},Br(y,["fill","fontSize","fontStyle","fontFamily","lineHeight","backgroundColor"])),{text:s.text,visible:!0})),n.addWithUpdate(),s.visible=!1,this.canvas.remove(s),this.canvas.setActiveObject(n)})}_bedingEditingEvent(e,n){if(!n.target)return;const i=n.target.left,o=n.target.top,p=this._unGroup()||[],v=()=>{const c=this.canvas.getObjects().filter(d=>d.id&&p.includes(d.id));c.forEach(d=>this.canvas.remove(d));const r=new le.fabric.Group([...c]);r.set("left",i),r.set("top",o),r.set("id",Tt()),e.off("editing:exited",v),this.canvas.add(r),this.canvas.discardActiveObject().renderAll()};e.on("editing:exited",v)}_unGroup(){const e=[],n=this.canvas.getActiveObject();if(n)return n.getObjects().forEach(i=>{const o=Tt();e.push(o),i.set("id",o)}),n.toActiveSelection(),e}isText(e){return e.type&&["i-text","text","textbox"].includes(e.type)}destroy(){console.log("pluginDestroy")}}pe(d0,"pluginName","GroupTextEditorPlugin");class zc{constructor(e,n){this.canvas=e,this.editor=n}left(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{left:o=0}=n;e.discardActiveObject(),i.forEach(v=>{const c=v.getBoundingRect(!0);v.set({left:o-c.left+Number(v.left)}),v.setCoords()});const p=new le.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(p),e.requestRenderAll()}}right(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{left:o=0,width:p=0}=n;e.discardActiveObject(),i.forEach(c=>{const r=c.getBoundingRect(!0);c.set({left:o+p-(r.left+r.width)+Number(c.left)})});const v=new le.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(v),e.requestRenderAll()}}xcenter(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{left:o=0,width:p=0}=n;e.discardActiveObject(),i.forEach(c=>{const r=c.getBoundingRect(!0);c.set({left:o+p/2-(r.left+r.width/2)+Number(c.left)})});const v=new le.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(v),e.requestRenderAll()}}ycenter(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{top:o=0,height:p=0}=n;e.discardActiveObject(),i.forEach(c=>{const r=c.getBoundingRect(!0);c.set({top:o+p/2-(r.top+r.height/2)+Number(c.top)})});const v=new le.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(v),e.requestRenderAll()}}top(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{top:o=0}=n;e.discardActiveObject(),i.forEach(v=>{const c=v.getBoundingRect(!0);v.set({top:o-c.top+Number(v.top)})});const p=new le.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(p),e.requestRenderAll()}}bottom(){const{canvas:e}=this,n=e.getActiveObject(),i=e.getActiveObjects();if(n){const{top:o=0,height:p=0}=n;e.discardActiveObject(),i.forEach(c=>{const r=c.getBoundingRect(!0);c.set({top:o+p-(r.top+r.height)+Number(c.top)})});const v=new le.fabric.ActiveSelection(i,{canvas:e});e.setActiveObject(v),e.requestRenderAll()}}xequation(){const{canvas:e}=this,n=e.getActiveObject();function i(d){let u=1/0,a=-1/0;for(const l in d.aCoords)d.aCoords[l].x<u&&(u=d.aCoords[l].x),d.aCoords[l].x>a&&(a=d.aCoords[l].x);return a-u}function o(){let d=0;return n&&n.forEachObject(u=>{d+=i(u)}),d}function p(){const d=o();if(n)return(Number(n.width)-d)/(n._objects.length-1)}function v(d){if(d===0)return 0;let u=0;if(n)for(let a=0;a<d;a++)u+=i(n._objects[a]);return u}if(n&&n.type==="activeSelection"){n._objects.sort((a,l)=>a.left-l.left);const d=p(),u=Number(n.width)/2;n.forEachObject((a,l)=>{const s=v(l),h=d*l+s-u;a.set("left",h)})}const c=e.getActiveObjects();e.discardActiveObject(),c.forEach(d=>{let u=1/0;for(const a in d.aCoords)d.aCoords[a].x<u&&(u=d.aCoords[a].x);d.set("left",2*d.left-u)});const r=new le.fabric.ActiveSelection(c,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}yequation(){const{canvas:e}=this,n=e.getActiveObject()||{top:0,height:0};function i(d){let u=1/0,a=-1/0;for(const l in d.aCoords)d.aCoords[l].y<u&&(u=d.aCoords[l].y),d.aCoords[l].y>a&&(a=d.aCoords[l].y);return a-u}function o(){let d=0;return n.forEachObject(u=>{d+=i(u)}),d}function p(){const d=o();return(n.height-d)/(n._objects.length-1)}function v(d){if(d===0)return 0;let u=0;for(let a=0;a<d;a++)u+=i(n._objects[a]);return u}if(n&&n.type==="activeSelection"){n._objects.sort((a,l)=>a.top-l.top);const d=p(),u=Number(n.height)/2;n.forEachObject((a,l)=>{const s=v(l),h=d*l+s-u;a.set("top",h)})}const c=e.getActiveObjects();e.discardActiveObject(),c.forEach(d=>{let u=1/0;for(const a in d.aCoords)d.aCoords[a].y<u&&(u=d.aCoords[a].y);d.set("top",2*d.top-u)});const r=new le.fabric.ActiveSelection(c,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}destroy(){console.log("pluginDestroy")}}pe(zc,"pluginName","GroupAlignPlugin"),pe(zc,"apis",["left","right","xcenter","ycenter","top","bottom","xequation","yequation"]);class ys{constructor(e,n){pe(this,"workspaceEl");pe(this,"workspace");pe(this,"resizeObserver");pe(this,"option");pe(this,"zoomRatio");this.canvas=e,this.editor=n,this.workspace=null,this.init({width:900,height:2e3}),this.zoomRatio=.85}init(e){const n=document.querySelector("#workspace");if(!n)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=n,this.workspace=null,this.option=e,this._initBackground(),this._initWorkspace(),this._initResizeObserve(),this._bindWheel()}hookImportAfter(){return new Promise(e=>{const n=this.canvas.getObjects().find(i=>i.id==="workspace");n&&(n.set("selectable",!1),n.set("hasControls",!1),n.set("evented",!1),n.width&&n.height&&(this.setSize(n.width,n.height),this.editor.emit("sizeChange",n.width,n.height))),e("")})}hookSaveAfter(){return new Promise(e=>{this.auto(),e(!0)})}_initBackground(){this.canvas.backgroundImage="",this.canvas.setBackgroundColor("#ffffff",this.canvas.renderAll.bind(this.canvas)),this.canvas.setWidth(this.workspaceEl.offsetWidth),this.canvas.setHeight(this.workspaceEl.offsetHeight)}_initWorkspace(){const{width:e,height:n}=this.option,i=new le.fabric.Rect({fill:"transparent",width:e,height:n,id:"workspace",strokeWidth:0});i.set("selectable",!1),i.set("hasControls",!1),i.hoverCursor="default",this.canvas.add(i),this.canvas.renderAll(),this.workspace=i,this.canvas.clearHistory&&this.canvas.clearHistory(),this.auto()}getWorkspase(){return this.canvas.getObjects().find(e=>e.id==="workspace")}setCenterFromObject(e){const{canvas:n}=this,i=e.getCenterPoint(),o=n.viewportTransform;n.width===void 0||n.height===void 0||!o||(o[4]=n.width/2-i.x*o[0],o[5]=n.height/2-i.y*o[3],n.setViewportTransform(o),n.renderAll())}getWorkspaceSize(){return this.option}_initResizeObserve(){const e=new ResizeObserver(Qn(()=>{this.auto()},50));this.resizeObserver=e,this.resizeObserver.observe(this.workspaceEl)}setSize(e,n){this._initBackground(),this.option.width=e,this.option.height=n,this.workspace=this.canvas.getObjects().find(i=>i.id==="workspace"),this.workspace.set("width",e),this.workspace.set("height",n),this.editor.emit("sizeChange",this.workspace.width,this.workspace.height),this.auto()}setZoomAuto(e,n){const{workspaceEl:i}=this,o=i.offsetWidth,p=i.offsetHeight;this.canvas.setWidth(o),this.canvas.setHeight(p);const v=this.canvas.getCenter();this.canvas.setViewportTransform(le.fabric.iMatrix.concat()),this.canvas.zoomToPoint(new le.fabric.Point(v.left,v.top),e),this.workspace&&(this.setCenterFromObject(this.workspace),this.workspace.clone(c=>{this.canvas.clipPath=c,this.canvas.requestRenderAll()}),n&&n(this.workspace.left,this.workspace.top))}getScale(){return le.fabric.util.findScaleToFit(this.getWorkspase(),{width:this.workspaceEl.offsetWidth,height:this.workspaceEl.offsetHeight})}big(){let e=this.canvas.getZoom();e+=.05;const n=this.canvas.getCenter();this.canvas.zoomToPoint(new le.fabric.Point(n.left,n.top),e)}small(){let e=this.canvas.getZoom();e-=.05;const n=this.canvas.getCenter();this.canvas.zoomToPoint(new le.fabric.Point(n.left,n.top),e<0?.01:e)}auto(){const e=this.getScale();this.setZoomAuto(e*this.zoomRatio)}one(){this.setZoomAuto(1*this.zoomRatio),this.canvas.requestRenderAll()}setWorkspaseBg(e){var n;(n=this.getWorkspase())==null||n.set("fill",e)}_bindWheel(){this.canvas.on("mouse:wheel",function(e){const n=e.e.deltaY;let i=this.getZoom();i*=Ea(.999,n),i>20&&(i=20),i<.01&&(i=.01);const o=this.getCenter();this.zoomToPoint(new le.fabric.Point(o.left,o.top),i),e.e.preventDefault(),e.e.stopPropagation()})}destroy(){this.resizeObserver.disconnect(),this.canvas.off(),console.log("pluginDestroy")}}pe(ys,"pluginName","WorkspacePlugin"),pe(ys,"events",["sizeChange"]),pe(ys,"apis",["big","small","auto","one","setSize","getWorkspase","setWorkspaseBg","setCenterFromObject","getScale","getWorkspaceSize"]),le.fabric.Canvas.prototype.initialize=function(t){return function(...e){return t.call(this,...e),this._historyInit(),this}}(le.fabric.Canvas.prototype.initialize),le.fabric.Canvas.prototype.dispose=function(t){return function(...e){return t.call(this,...e),this._historyDispose(),this}}(le.fabric.Canvas.prototype.dispose),le.fabric.Canvas.prototype._historyNext=function(){return JSON.stringify(this.toDatalessJSON(this.extraProps))},le.fabric.Canvas.prototype._historyEvents=function(){return{"object:added":t=>this._historySaveAction(t),"object:removed":t=>this._historySaveAction(t),"object:modified":t=>this._historySaveAction(t),"object:skewing":t=>this._historySaveAction(t)}},le.fabric.Canvas.prototype._historyInit=function(){this.historyUndo=[],this.historyRedo=[],this.extraProps=["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension"],this.historyNextState=this._historyNext(),this.on(this._historyEvents())},le.fabric.Canvas.prototype._historyDispose=function(){this.off(this._historyEvents())},le.fabric.Canvas.prototype._historySaveAction=function(t){if(!this.historyProcessing&&(!t||t.target&&!t.target.excludeFromExport)){const e=this._historyNext();this.historyUndo.push(e),this.historyNextState=this._historyNext(),this.fire("history:append",{json:e})}},le.fabric.Canvas.prototype.undo=function(t){this.historyProcessing=!0;const e=this.historyUndo.pop();e?(this.historyRedo.push(this._historyNext()),this.historyNextState=e,this._loadHistory(e,"history:undo",t)):(console.log(1111),this.historyProcessing=!1)},le.fabric.Canvas.prototype.redo=function(t){this.historyProcessing=!0;const e=this.historyRedo.pop();e?(this.historyUndo.push(this._historyNext()),this.historyNextState=e,this._loadHistory(e,"history:redo",t)):this.historyProcessing=!1},le.fabric.Canvas.prototype._loadHistory=function(t,e,n){var i=this;this.loadFromJSON(t,function(){i.renderAll(),i.fire(e),i.historyProcessing=!1,n&&typeof n=="function"&&n()})},le.fabric.Canvas.prototype.clearHistory=function(t){if(!t)this.historyUndo=[],this.historyRedo=[],this.fire("history:clear");else{const e=this.historyUndo.pop();this.historyUndo=[e],this.historyRedo=[],this.fire("history:clear")}},le.fabric.Canvas.prototype.clearUndo=function(){this.historyUndo=[]},le.fabric.Canvas.prototype.onHistory=function(){this.historyProcessing=!1,this._historySaveAction()},le.fabric.Canvas.prototype.canUndo=function(){return this.historyUndo.length>0},le.fabric.Canvas.prototype.canRedo=function(){return this.historyRedo.length>0},le.fabric.Canvas.prototype.offHistory=function(){this.historyProcessing=!0};class bs{constructor(e,n){pe(this,"hotkeys",["ctrl+z","ctrl+shift+z","\u2318+z","\u2318+shift+z"]);this.canvas=e,this.editor=n,le.fabric.Canvas.prototype._historyNext=()=>this.editor.getJson(),this._init()}_init(){this.canvas.on("history:append",()=>{this.historyUpdate()}),window.addEventListener("beforeunload",e=>{this.canvas.historyUndo.length>0&&((e||window.event).returnValue="\u786E\u8BA4\u79BB\u5F00")})}historyUpdate(){const{historyUndo:e,historyRedo:n}=this.canvas;this.editor.emit("historyUpdate",e.length,n.length)}hookImportAfter(){return this.canvas.clearHistory(!0),this.historyUpdate(),Promise.resolve()}undo(){this.canvas.undo(),this.historyUpdate()}redo(){this.canvas.redo(),this.historyUpdate()}hotkeyEvent(e,n){if(n.type==="keydown")switch(e){case"ctrl+z":case"\u2318+z":this.undo();break;case"ctrl+shift+z":case"\u2318+shift+z":this.redo();break}}}pe(bs,"pluginName","HistoryPlugin"),pe(bs,"apis",["undo","redo","historyUpdate"]),pe(bs,"events",["historyUpdate"]);const f0=t=>t;class Vc{constructor(e,n){this.canvas=e,this.editor=n}flip(e){const n=this.canvas.getActiveObject();n&&(n.set(`flip${e}`,!n[`flip${e}`]).setCoords(),this.canvas.requestRenderAll())}contextMenu(){if(this.editor.getSelectMode()===Ci.ONE)return[{text:"\u7FFB\u8F6C",hotkey:"\u276F",subitems:[{text:f0("flip.x"),hotkey:"|",onclick:()=>this.flip("X")},{text:f0("flip.y"),hotkey:"-",onclick:()=>this.flip("Y")}]}]}destroy(){console.log("pluginDestroy")}}pe(Vc,"pluginName","FlipPlugin"),pe(Vc,"apis",["flip"]);const b9=t=>{const e=[.02,.03,.05,.1,.2,.5,1,2,5,10,18],n=[5e3,2500,1e3,500,250,100,50,25,10,5,2];let i=0;for(;i<e.length&&e[i]<t;)i++;return n[i-1]||5e3},p0=(t,e)=>{const n=e?"left":"top",i=e?"width":"height";t.sort((v,c)=>v[n]-c[n]);const o=[];let p=Object.assign({},t[0]);for(const v of t){const c=Object.assign({},v);p[n]+p[i]>=c[n]?p[i]=Math.max(p[n]+p[i],c[n]+c[i])-p[n]:(o.push(p),p=Object.assign({},c))}return o.push(p),o},Uc=(t,e)=>{t.save();const{left:n,top:i,width:o,height:p,stroke:v,lineWidth:c}=e;t.beginPath(),v&&(t.strokeStyle=v),t.lineWidth=c!=null?c:1,t.moveTo(n,i),t.lineTo(n+o,i+p),t.stroke(),t.restore()},Hc=(t,e)=>{t.save();const{left:n,top:i,text:o,fill:p,align:v,angle:c,fontSize:r}=e;p&&(t.fillStyle=p),t.textAlign=v!=null?v:"left",t.textBaseline="top",t.font=`${r!=null?r:10}px sans-serif`,c&&(t.translate(n,i),t.rotate(Math.PI/180*c),t.translate(-n,-i)),t.fillText(o,n,i),t.restore()},Gc=(t,e)=>{t.save();const{left:n,top:i,width:o,height:p,fill:v,stroke:c,strokeWidth:r}=e;t.beginPath(),v&&(t.fillStyle=v),t.rect(n,i,o,p),t.fill(),c&&(t.strokeStyle=c,t.lineWidth=r!=null?r:1,t.stroke()),t.restore()},Cs=(t,e)=>{t.save();const{isHorizontal:n,left:i,top:o,width:p,height:v,backgroundColor:c}=e,r=n?t.createLinearGradient(i,v/2,i+p,v/2):t.createLinearGradient(p/2,o,p/2,v+o),d=new le.fabric.Color(c);d.setAlpha(0),r.addColorStop(0,d.toRgba()),r.addColorStop(.33,c),r.addColorStop(.67,c),r.addColorStop(1,d.toRgba()),Gc(t,{left:i,top:o,width:p,height:v,fill:r}),t.restore()};function C9(){le.fabric.GuideLine||(le.fabric.GuideLine=le.fabric.util.createClass(le.fabric.Line,{type:"GuideLine",selectable:!1,hasControls:!1,hasBorders:!1,stroke:"#4bec13",originX:"center",originY:"center",padding:4,globalCompositeOperation:"difference",axis:"horizontal",initialize(t,e){const n=e.axis==="horizontal";this.hoverCursor=n?"ns-resize":"ew-resize";const i=n?[-999999,t,999999,t]:[t,-999999,t,999999];e[n?"lockMovementX":"lockMovementY"]=!0,this.callSuper("initialize",i,e),this.on("mousedown:before",o=>{this.activeOn==="down"&&this.canvas&&this.canvas.setActiveObject(this,o.e)}),this.on("moving",o=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(o.e)?this.moveCursor="not-allowed":this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:moving",{target:this,e:o.e})}),this.on("mouseup",o=>{if(this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(o.e)){this.canvas.remove(this);return}this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:mouseup",{target:this,e:o.e})}),this.on("removed",()=>{this.off("removed"),this.off("mousedown:before"),this.off("moving"),this.off("mouseup")})},getBoundingRect(t,e){this.bringToFront();const n=this.isHorizontal(),i=this.callSuper("getBoundingRect",t,e);return i[n?"top":"left"]+=i[n?"height":"width"]/2,i[n?"height":"width"]=0,i},isPointOnRuler(t){const e=this.isHorizontal(),n=this.canvas&&this.canvas.ruler.isPointOnRuler(new le.fabric.Point(t.offsetX,t.offsetY));return e&&n==="horizontal"||!e&&n==="vertical"?n:!1},isHorizontal(){return this.height===0}}),le.fabric.GuideLine.fromObject=function(t,e){const n=le.fabric.util.object.clone;function i(v){delete v.xy,e&&e(v)}const o=n(t,!0),p=o.height===0;o.xy=p?o.y1:o.x1,o.axis=p?"horizontal":"vertical",le.fabric.Object._fromObject(o.type,o,i,"xy")})}le.fabric.GuideLine;class w9{constructor(e){pe(this,"ctx");pe(this,"options");pe(this,"startCalibration");pe(this,"activeOn","up");pe(this,"objectRect");pe(this,"eventHandler",{calcObjectRect:Qn(this.calcObjectRect.bind(this),15),clearStatus:this.clearStatus.bind(this),canvasMouseDown:this.canvasMouseDown.bind(this),canvasMouseMove:Qn(this.canvasMouseMove.bind(this),15),canvasMouseUp:this.canvasMouseUp.bind(this),render:e=>{e.ctx&&this.render()}});pe(this,"lastAttr",{status:"out",cursor:void 0,selection:void 0});pe(this,"tempGuidelLine");pe(this,"getCommonEventInfo",e=>{if(!(!this.tempGuidelLine||!e.absolutePointer))return{e:e.e,transform:this.tempGuidelLine.get("transform"),pointer:{x:e.absolutePointer.x,y:e.absolutePointer.y},target:this.tempGuidelLine}});this.options=Object.assign({ruleSize:20,fontSize:10,enabled:!1,backgroundColor:"#fff",borderColor:"transparent",highlightColor:"#007fff",textColor:"#888"},e),this.ctx=this.options.canvas.getContext(),le.fabric.util.object.extend(this.options.canvas,{ruler:this}),C9(),this.options.enabled&&this.enable()}destroy(){this.disable()}clearGuideline(){this.options.canvas.remove(...this.options.canvas.getObjects(le.fabric.GuideLine.prototype.type))}showGuideline(){this.options.canvas.getObjects(le.fabric.GuideLine.prototype.type).forEach(e=>{e.set("visible",!0)}),this.options.canvas.renderAll()}hideGuideline(){this.options.canvas.getObjects(le.fabric.GuideLine.prototype.type).forEach(e=>{e.set("visible",!1)}),this.options.canvas.renderAll()}enable(){this.options.enabled=!0,this.options.canvas.on("after:render",this.eventHandler.calcObjectRect),this.options.canvas.on("after:render",this.eventHandler.render),this.options.canvas.on("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.on("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.on("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.on("selection:cleared",this.eventHandler.clearStatus),this.showGuideline(),this.render()}disable(){this.options.canvas.off("after:render",this.eventHandler.calcObjectRect),this.options.canvas.off("after:render",this.eventHandler.render),this.options.canvas.off("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.off("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.off("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.off("selection:cleared",this.eventHandler.clearStatus),this.hideGuideline(),this.options.enabled=!1}render(){var n,i;const e=this.options.canvas.viewportTransform;e&&(this.draw({isHorizontal:!0,rulerLength:this.getSize().width,startCalibration:(n=this.startCalibration)!=null&&n.x?this.startCalibration.x:-(e[4]/e[0])}),this.draw({isHorizontal:!1,rulerLength:this.getSize().height,startCalibration:(i=this.startCalibration)!=null&&i.y?this.startCalibration.y:-(e[5]/e[3])}),Cs(this.ctx,{isHorizontal:!0,left:-10,top:-10,width:this.options.ruleSize*2+10,height:this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}),Cs(this.ctx,{isHorizontal:!1,left:-10,top:-10,width:this.options.ruleSize+10,height:this.options.ruleSize*2+10,backgroundColor:this.options.backgroundColor}))}getSize(){var e,n;return{width:(e=this.options.canvas.width)!=null?e:0,height:(n=this.options.canvas.height)!=null?n:0}}getZoom(){return this.options.canvas.getZoom()}draw(e){const{isHorizontal:n,rulerLength:i,startCalibration:o}=e,p=this.getZoom(),v=b9(p),c=i/p,r=Math[o>0?"floor":"ceil"](o/v)*v,d=r-o,u=this.getSize();Gc(this.ctx,{left:0,top:0,width:n?u.width:this.options.ruleSize,height:n?this.options.ruleSize:u.height,fill:this.options.backgroundColor,stroke:this.options.borderColor});const a=new le.fabric.Color(this.options.textColor);for(let l=0;l+d<=Math.ceil(c);l+=v){const s=(d+l)*p,h=r+l+"",g=10*h.length/4,f=n?s-g-1:this.options.ruleSize/2-this.options.fontSize/2-4,A=n?this.options.ruleSize/2-this.options.fontSize/2-4:s+g;Hc(this.ctx,{text:h,left:f,top:A,fill:a.toRgb(),angle:n?0:-90})}for(let l=0;l+d<=Math.ceil(c);l+=v){const s=Math.round((d+l)*p),h=n?s:this.options.ruleSize-8,g=n?this.options.ruleSize-8:s,f=n?0:8,A=n?8:0;Uc(this.ctx,{left:h,top:g,width:f,height:A,stroke:a.toRgb()})}if(this.objectRect){const l=n?"x":"y";this.objectRect[l].forEach(s=>{if(s.skip===l)return;const h=R=>Math.round(R/p+o)+"",g=h(n?s.left:s.top),f=h(n?s.left+s.width:s.top+s.height),A=g===f,m={isHorizontal:n,width:n?160:this.options.ruleSize-8,height:n?this.options.ruleSize-8:160,backgroundColor:this.options.backgroundColor};Cs(this.ctx,De(ve({},m),{left:n?s.left-80:0,top:n?0:s.top-80})),A||Cs(this.ctx,De(ve({},m),{left:n?s.width+s.left-80:0,top:n?0:s.height+s.top-80}));const y=new le.fabric.Color(this.options.highlightColor);y.setAlpha(.5),Gc(this.ctx,{left:n?s.left:this.options.ruleSize-8,top:n?this.options.ruleSize-8:s.top,width:n?s.width:8,height:n?8:s.height,fill:y.toRgba()});const b=this.options.ruleSize/2-this.options.fontSize/2-4,x={fill:y.toRgba(),angle:n?0:-90};Hc(this.ctx,De(ve({},x),{text:g,left:n?s.left-2:b,top:n?b:s.top-2,align:A?"center":n?"right":"left"})),A||Hc(this.ctx,De(ve({},x),{text:f,left:n?s.left+s.width+2:b,top:n?b:s.top+s.height+2,align:n?"left":"right"}));const S=A?8:14;y.setAlpha(1);const O={width:n?0:S,height:n?S:0,stroke:y.toRgba()};Uc(this.ctx,De(ve({},O),{left:n?s.left:this.options.ruleSize-S,top:n?this.options.ruleSize-S:s.top})),A||Uc(this.ctx,De(ve({},O),{left:n?s.left+s.width:this.options.ruleSize-S,top:n?this.options.ruleSize-S:s.top+s.height}))})}}calcObjectRect(){const e=this.options.canvas.getActiveObjects();if(e.length===0)return;const n=e.reduce((i,o)=>{var v,c;const p=o.getBoundingRect(!1,!0);if(o.group){const r=ve({top:0,left:0,width:0,height:0,scaleX:1,scaleY:1},o.group);p.width*=r.scaleX,p.height*=r.scaleY;const d=r.width/2+r.left,u=(r.width/2+((v=o.left)!=null?v:0))*(1-r.scaleX);p.left+=(d-u)*this.getZoom();const a=r.height/2+r.top,l=(r.height/2+((c=o.top)!=null?c:0))*(1-r.scaleY);p.top+=(a-l)*this.getZoom()}return o instanceof le.fabric.GuideLine&&(p.skip=o.isHorizontal()?"x":"y"),i.push(p),i},[]);n.length!==0&&(this.objectRect={x:p0(n,!0),y:p0(n,!1)})}clearStatus(){this.objectRect=void 0}isPointOnRuler(e){return new le.fabric.Rect({left:0,top:0,width:this.options.ruleSize,height:this.options.canvas.height}).containsPoint(e)?"vertical":new le.fabric.Rect({left:0,top:0,width:this.options.canvas.width,height:this.options.ruleSize}).containsPoint(e)?"horizontal":!1}canvasMouseDown(e){if(!e.pointer||!e.absolutePointer)return;const n=this.isPointOnRuler(e.pointer);n&&this.activeOn==="up"&&(this.lastAttr.selection=this.options.canvas.selection,this.options.canvas.selection=!1,this.activeOn="down",this.tempGuidelLine=new le.fabric.GuideLine(n==="horizontal"?e.absolutePointer.y:e.absolutePointer.x,{axis:n,visible:!1}),this.options.canvas.add(this.tempGuidelLine),this.options.canvas.setActiveObject(this.tempGuidelLine),this.options.canvas._setupCurrentTransform(e.e,this.tempGuidelLine,!0),this.tempGuidelLine.fire("down",this.getCommonEventInfo(e)))}canvasMouseMove(e){if(!e.pointer)return;if(this.tempGuidelLine&&e.absolutePointer){const i={};this.tempGuidelLine.axis==="horizontal"?i.top=e.absolutePointer.y:i.left=e.absolutePointer.x,this.tempGuidelLine.set(De(ve({},i),{visible:!0})),this.options.canvas.requestRenderAll();const o=this.getCommonEventInfo(e);this.options.canvas.fire("object:moving",o),this.tempGuidelLine.fire("moving",o)}const n=this.isPointOnRuler(e.pointer);if(!n){this.lastAttr.status!=="out"&&(this.options.canvas.defaultCursor=this.lastAttr.cursor,this.lastAttr.status="out");return}(this.lastAttr.status==="out"||n!==this.lastAttr.status)&&(this.lastAttr.cursor=this.options.canvas.defaultCursor,this.options.canvas.defaultCursor=n==="horizontal"?"ns-resize":"ew-resize",this.lastAttr.status=n)}canvasMouseUp(e){var n;this.activeOn==="down"&&(this.options.canvas.selection=this.lastAttr.selection,this.activeOn="up",(n=this.tempGuidelLine)==null||n.fire("up",this.getCommonEventInfo(e)),this.tempGuidelLine=void 0)}}function x9(t,e){const n=new w9(ve({canvas:t},e));let i;const o=()=>{i=t.getObjects().find(v=>v.id==="workspace")},p=(v,c)=>{const{top:r,height:d,left:u,width:a}=v;if(r===void 0||d===void 0||u===void 0||a===void 0)return!1;const l=c.getBoundingRect(!0,!0),{top:s,height:h,left:g,width:f}=l;return c.isHorizontal()&&(r>s+1||r+d<s+h-1)?!0:!c.isHorizontal()&&(u>g+1||u+a<g+f-1)};return t.on("guideline:moving",v=>{if(!i){o();return}const{target:c}=v;p(i,c)&&(c.moveCursor="not-allowed")}),t.on("guideline:mouseup",v=>{var r;if(!i){o();return}const{target:c}=v;p(i,c)&&(t.remove(c),t.setCursor((r=t.defaultCursor)!=null?r:""))}),n}class Yc{constructor(e,n){pe(this,"ruler");this.canvas=e,this.editor=n,this.init()}hookSaveBefore(){return new Promise(e=>{this.hideGuideline(),e(!0)})}hookSaveAfter(){return new Promise(e=>{this.showGuideline(),e(!0)})}init(){this.ruler=x9(this.canvas)}hideGuideline(){this.ruler.hideGuideline()}showGuideline(){this.ruler.showGuideline()}rulerEnable(){this.ruler.enable()}rulerDisable(){this.ruler.disable()}destroy(){console.log("pluginDestroy")}}pe(Yc,"pluginName","RulerPlugin"),pe(Yc,"apis",["hideGuideline","showGuideline","rulerEnable","rulerDisable"]);class Wc{constructor(e,n,i){pe(this,"apiMapUrl");pe(this,"repoSrc");this.canvas=e,this.editor=n,this.repoSrc=i.repoSrc,this.apiMapUrl={template:i.repoSrc+"/template/type.json",svg:i.repoSrc+"/svg/type.json"}}getTemplTypeList(){return qn.get(`${this.repoSrc}/api/templ-types?pagination[pageSize]=100`).then(e=>e.data.data.map(n=>({value:n.id,label:n.attributes.name})))}getTemplList(e="",n=1,i=""){const o={fields:"*",populate:{img:"*"},filters:{},pagination:{page:n,pageSize:10}},p=this._getQueryParams(o,[{key:"templ_type",value:e,type:"$eq"},{key:"name",value:i,type:"$contains"}]);return qn.get(`${this.repoSrc}/api/templs?${p}`).then(v=>{var c,r;return{list:v.data.data.map(d=>({name:d.attributes.name,desc:d.attributes.desc,src:this._getMaterialPreviewUrl(d.attributes.img),json:d.attributes.json})),pagination:(r=(c=v==null?void 0:v.data)==null?void 0:c.meta)==null?void 0:r.pagination}})}getMaterialTypeList(){return qn.get(`${this.repoSrc}/api/material-types?pagination[pageSize]=100`).then(e=>e.data.data.map(n=>({value:n.id,label:n.attributes.name})))}getMaterialList(e="",n=1,i=""){const o={populate:{img:"*"},filters:{},pagination:{page:n,pageSize:50}},p=this._getQueryParams(o,[{key:"material_type",value:e,type:"$eq"},{key:"name",value:i,type:"$contains"}]);return qn.get(`${this.repoSrc}/api/materials?${p}`).then(v=>{var c,r;return{list:v.data.data.map(d=>({name:d.attributes.name,desc:d.attributes.desc,src:this._getMaterialInfoUrl(d.attributes.img),previewSrc:this._getMaterialPreviewUrl(d.attributes.img)})),pagination:(r=(c=v==null?void 0:v.data)==null?void 0:c.meta)==null?void 0:r.pagination}})}getSizeList(){return qn.get(`${this.repoSrc}/api/sizes?pagination[pageSize]=100`).then(e=>e.data.data.map(n=>({value:n.id,name:n.attributes.name,width:Number(n.attributes.width),height:Number(n.attributes.height),unit:n.attributes.unit})))}getFontList(){return qn.get(`${this.repoSrc}/api/fonts?pagination[pageSize]=100`).then(e=>e.data.data.map(n=>({value:n.id,label:n.attributes.name})))}_getMaterialInfoUrl(e){var i,o;const n=((o=(i=e==null?void 0:e.data)==null?void 0:i.attributes)==null?void 0:o.url)||"";return this.repoSrc+n}_getMaterialPreviewUrl(e){var i,o,p,v,c,r;const n=((v=(p=(o=(i=e==null?void 0:e.data)==null?void 0:i.attributes)==null?void 0:o.formats)==null?void 0:p.small)==null?void 0:v.url)||((r=(c=e==null?void 0:e.data)==null?void 0:c.attributes)==null?void 0:r.url)||"";return this.repoSrc+n}_getQueryParams(e,n){return n.forEach(i=>{const{key:o,value:p,type:v}=i;p&&(e.filters[o]={[v]:p})}),Nh.stringify(e)}getMaterialInfo(e){return we(this,null,function*(){const n=this.apiMapUrl[e];return(yield qn.get(n,{params:{typeId:e}})).data.data})}}pe(Wc,"pluginName","MaterialPlugin"),pe(Wc,"apis",["getTemplTypeList","getTemplList","getMaterialTypeList","getMaterialList","getSizeList"]);var g0={exports:{}};(function(t){(function(){function e(g,f){document.addEventListener?g.addEventListener("scroll",f,!1):g.attachEvent("scroll",f)}function n(g){document.body?g():document.addEventListener?document.addEventListener("DOMContentLoaded",function f(){document.removeEventListener("DOMContentLoaded",f),g()}):document.attachEvent("onreadystatechange",function f(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",f),g())})}function i(g){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(g)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function o(g,f){g.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+f+";"}function p(g){var f=g.g.offsetWidth,A=f+100;return g.j.style.width=A+"px",g.i.scrollLeft=A,g.h.scrollLeft=g.h.scrollWidth+100,g.l!==f?(g.l=f,!0):!1}function v(g,f){function A(){var y=m;p(y)&&y.g.parentNode!==null&&f(y.l)}var m=g;e(g.h,A),e(g.i,A),p(g)}function c(g,f,A){f=f||{},A=A||window,this.family=g,this.style=f.style||"normal",this.weight=f.weight||"normal",this.stretch=f.stretch||"normal",this.context=A}var r=null,d=null,u=null,a=null;function l(g){return d===null&&(s(g)&&/Apple/.test(window.navigator.vendor)?(g=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!g&&603>parseInt(g[1],10)):d=!1),d}function s(g){return a===null&&(a=!!g.document.fonts),a}function h(g,f){var A=g.style,m=g.weight;if(u===null){var y=document.createElement("div");try{y.style.font="condensed 100px sans-serif"}catch(b){}u=y.style.font!==""}return[A,m,u?g.stretch:"","100px",f].join(" ")}c.prototype.load=function(g,f){var A=this,m=g||"BESbswy",y=0,b=f||3e3,x=new Date().getTime();return new Promise(function(S,O){if(s(A.context)&&!l(A.context)){var R=new Promise(function(ee,re){function ae(){new Date().getTime()-x>=b?re(Error(""+b+"ms timeout exceeded")):A.context.document.fonts.load(h(A,'"'+A.family+'"'),m).then(function(ne){1<=ne.length?ee():setTimeout(ae,25)},re)}ae()}),Z=new Promise(function(ee,re){y=setTimeout(function(){re(Error(""+b+"ms timeout exceeded"))},b)});Promise.race([Z,R]).then(function(){clearTimeout(y),S(A)},O)}else n(function(){function ee(){var B;(B=P!=-1&&U!=-1||P!=-1&&W!=-1||U!=-1&&W!=-1)&&((B=P!=U&&P!=W&&U!=W)||(r===null&&(B=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),r=!!B&&(536>parseInt(B[1],10)||parseInt(B[1],10)===536&&11>=parseInt(B[2],10))),B=r&&(P==F&&U==F&&W==F||P==E&&U==E&&W==E||P==k&&U==k&&W==k)),B=!B),B&&(L.parentNode!==null&&L.parentNode.removeChild(L),clearTimeout(y),S(A))}function re(){if(new Date().getTime()-x>=b)L.parentNode!==null&&L.parentNode.removeChild(L),O(Error(""+b+"ms timeout exceeded"));else{var B=A.context.document.hidden;(B===!0||B===void 0)&&(P=ae.g.offsetWidth,U=ne.g.offsetWidth,W=J.g.offsetWidth,ee()),y=setTimeout(re,50)}}var ae=new i(m),ne=new i(m),J=new i(m),P=-1,U=-1,W=-1,F=-1,E=-1,k=-1,L=document.createElement("div");L.dir="ltr",o(ae,h(A,"sans-serif")),o(ne,h(A,"serif")),o(J,h(A,"monospace")),L.appendChild(ae.g),L.appendChild(ne.g),L.appendChild(J.g),A.context.document.body.appendChild(L),F=ae.g.offsetWidth,E=ne.g.offsetWidth,k=J.g.offsetWidth,re(),v(ae,function(B){P=B,ee()}),o(ae,h(A,'"'+A.family+'",sans-serif')),v(ne,function(B){U=B,ee()}),o(ne,h(A,'"'+A.family+'",serif')),v(J,function(B){W=B,ee()}),o(J,h(A,'"'+A.family+'",monospace'))})})},t.exports=c})()})(g0);var _9=g0.exports;const v0=Ma(_9);class Xc{constructor(e,n,i){pe(this,"tempPromise");pe(this,"repoSrc");pe(this,"cacheList");this.canvas=e,this.editor=n,this.repoSrc=i.repoSrc,this.cacheList=[],this.tempPromise=null}hookImportBefore(e){return this.downFontByJSON(e)}getFontList(){return this.cacheList.length?Promise.resolve(this.cacheList):this.tempPromise?this.tempPromise:(this.tempPromise=qn.get(`${this.repoSrc}/api/fonts?populate=*&pagination[pageSize]=100`).then(e=>{var i;const n=(i=e.data.data)==null?void 0:i.map(o=>({name:o.attributes.name,type:o.attributes.type,file:this.repoSrc+o.attributes.file.data.attributes.url,img:this.repoSrc+o.attributes.img.data.attributes.url}));return this.cacheList=n,this.createFontCSS(n),n}),this.tempPromise)}downFontByJSON(e){const n=JSON.parse(e);let i=[];const o=["arial"];n.objects?i=JSON.parse(e).objects.filter(v=>{const c=this.cacheList.find(r=>r.name===v.fontFamily);return v.type.includes("text")&&!o.includes(v.fontFamily)&&c}).map(v=>v.fontFamily):i=o.includes(n.fontFamily)?[]:[n.fontFamily];const p=i.map(v=>new v0(v).load(null,15e4));return Promise.all(p)}getFontJson(){const e=this.canvas.getActiveObject();if(e){const n=e.toJSON(["id","gradientAngle","selectable","hasControls"]),i=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(n,null,"	"))}`,o=e.toDataURL({});ro(i,"font.json"),ro(o,"font.png")}}loadFont(e){return new v0(e).load(null,15e4).then(()=>{const n=this.canvas.getActiveObjects()[0];n&&(n.set("fontFamily",e),this.canvas.renderAll())})}createFontCSS(e){let n="";e.forEach(o=>{n=n+`
    @font-face {
      font-family: ${o.name};
      src: url('${o.file}');
    }
    `});const i=document.createElement("style");try{i.appendChild(document.createTextNode(n))}catch(o){}document.getElementsByTagName("head")[0].appendChild(i)}destroy(){console.log("pluginDestroy")}}pe(Xc,"pluginName","FontPlugin"),pe(Xc,"apis",["getFontList","loadFont","getFontJson","downFontByJSON"]);const S9=function(t,e,n,i){const o=e.target,p=o.controls[o.__corner],v=o.toLocalPoint(new le.fabric.Point(n,i),"center","center"),c=A0(o),r=o._getTransformedDimensions(0,0);return o.points==null?!1:(o.points[p.pointIndex]=new le.fabric.Point(v.x*c.x/r.x+o.pathOffset.x,v.y*c.y/r.y+o.pathOffset.y),!0)},E9=function(t,e){return function(n,i,o,p){const v=i.target;if(v.points==null)return!1;const c=le.fabric.util.transformPoint(new le.fabric.Point(v.points[t].x-v.pathOffset.x,v.points[t].y-v.pathOffset.y),v.calcTransformMatrix()),r=e(n,i,o,p),d=A0(v),u=(v.points[t].x-v.pathOffset.x)/d.x,a=(v.points[t].y-v.pathOffset.y)/d.y,l=u+.5,s=a+.5;return v.setPositionByOrigin(c,l,s),r}},A0=function(t){const e=new le.fabric.Point(t.strokeUniform?1/t.scaleX:1,t.strokeUniform?1/t.scaleY:1).multiply(t.strokeWidth);return new le.fabric.Point(t.width+e.x,t.height+e.y)},I9=function(t,e,n){const i=n.points[this.pointIndex].x-n.pathOffset.x,o=n.points[this.pointIndex].y-n.pathOffset.y;return le.fabric.util.transformPoint(new le.fabric.Point(i,o),le.fabric.util.multiplyTransformMatrices(n.canvas.viewportTransform,n.calcTransformMatrix()))};function k9(t,e,n,i,o,p){Lg(t,e,n,p,25,25,le.fabric.util.degreesToRadians(o.angle||0))}class ws{constructor(e,n){pe(this,"isEdit");pe(this,"img");pe(this,"_onDeselected",Po);this.canvas=e,this.editor=n,this.isEdit=!1;const i=document.createElement("img");i.src=c0,this.img=i,this.init()}init(){console.info("[PolygonModifyPlugin]: init")}_ensureEvent(e){e.off("deselected",this._onDeselected)}toggleEdit(){this.isEdit?this.inActiveEdit():this.activeEdit()}activeEdit(){this.isEdit=!0;const e=this.canvas.getActiveObject();if(e&&e.type==="polygon"){if(this._ensureEvent(e),e.points==null)return;const n=e.points.length-1,i=this;e.controls=e.points.reduce(function(o,p,v){return o["p"+v]=new le.fabric.Control({positionHandler:I9,actionHandler:E9(v>0?v-1:n,S9),actionName:"modifyPolygon",render:(...c)=>k9(...c,i.img)}),Object.defineProperty(o["p"+v],"pointIndex",{value:v}),o},{}),e.set({objectCaching:!1}),e.hasBorders=!this.isEdit,this.canvas.requestRenderAll(),this._onDeselected=()=>this.inActiveEdit(e),e.on("deselected",this._onDeselected)}}inActiveEdit(e){this.isEdit=!1,e=e||this.canvas.getActiveObject(),e&&e.type==="polygon"&&(e.cornerColor="blue",e.cornerStyle="rect",e.controls=le.fabric.Object.prototype.controls,e.hasBorders=!this.isEdit,e.set({objectCaching:!0}),this._onDeselected&&(e.off("deselected",this._onDeselected),this._onDeselected=Po)),this.canvas.requestRenderAll()}}pe(ws,"pluginName","PolygonModifyPlugin"),pe(ws,"events",[]),pe(ws,"apis",["toggleEdit","activeEdit","inActiveEdit"]);class $c{constructor(e,n){pe(this,"isDrawingPolygon",!1);pe(this,"points",[]);pe(this,"lines",[]);pe(this,"anchors",[]);pe(this,"tempPoint");pe(this,"tempLine");pe(this,"lastPoint");pe(this,"onEnd");pe(this,"delta",5);pe(this,"_escListener",e=>{(e.key==="Escape"||e.keyCode===27)&&this._confirmBuildPolygon()});pe(this,"_downHandler",e=>{if(!this.isDrawingPolygon)return;const n=e.absolutePointer,i=new le.fabric.Point(n.x,n.y),o=this._mackAnchor(n);if(this.anchors.push(o),this.tempLine==null){const p=new le.fabric.Point(n.x,n.y);this.tempLine=this._makeLine([p,p]),this.canvas.add(this.tempLine)}else e.e.shiftKey&&i.setXY(this.tempLine.x2,this.tempLine.y2),o.set({left:i.x,top:i.y}),this.tempLine.set({x1:i.x,y1:i.y,x2:i.x,y2:i.y});if(this.lastPoint){const p=this._makeLine([this.lastPoint,i]);if(this.lines.push(p),this.canvas.add(p),this.points[0].distanceFrom(i)/this.canvas.getZoom()<=this.delta){this._confirmBuildPolygon();return}}this.canvas.add(o),this.lastPoint=i,this.points.push(i),this._ensureAnchorsForward()});pe(this,"_moveHandler",e=>{if(!this.isDrawingPolygon||!this.tempLine)return;const n=e.absolutePointer;if(e.e.shiftKey&&this.lastPoint){const i=lB(this.lastPoint,n);this.tempLine.set({x2:i.x,y2:i.y})}else this.tempLine.set({x2:n.x,y2:n.y});this.canvas.renderAll()});this.canvas=e,this.editor=n}_isUsingHistory(){return this.canvas.offHistory&&typeof this.canvas.offHistory=="function"}_bindEvent(){window.addEventListener("keydown",this._escListener),this.canvas.on("mouse:down",this._downHandler),this.canvas.on("mouse:move",this._moveHandler)}_ensureAnchorsForward(){this.anchors.forEach(e=>{e.bringForward()})}_unbindEvent(){window.removeEventListener("keydown",this._escListener),this.canvas.off("mouse:down",this._downHandler),this.canvas.off("mouse:move",this._moveHandler)}_createPolygon(e){return new le.fabric.Polygon(e,{fill:"#ccccccff",id:Tt()})}_makeLine(e){const[n,i]=e;return new le.fabric.Line([n.x,n.y,i.x,i.y],{fill:"#000",stroke:"#000",strokeWidth:1,selectable:!1,evented:!1})}_mackAnchor(e){return new le.fabric.Circle({radius:5,left:e.x,top:e.y,fill:"rgb(178, 53, 84)",scaleX:1/this.canvas.getZoom(),scaleY:1/this.canvas.getZoom(),strokeWidth:1/this.canvas.getZoom(),originX:"center",originY:"center",evented:!1,selectable:!1})}_confirmBuildPolygon(){const e=this.points;if(this.discardPolygon(),this._isUsingHistory()&&(this.canvas.historyProcessing=!1),e.length>=3){const n=this._createPolygon(e);this.canvas.add(n)}}_prepare(){this.canvas.discardActiveObject(),this.canvas.getObjects().forEach(e=>{e.selectable=!1,e.hasControls=!1})}beginDrawPolygon(e){this._prepare(),this.onEnd=e,this._isUsingHistory()&&(this.canvas.historyProcessing=!0),this.canvas.requestRenderAll(),this.isDrawingPolygon=!0,this._bindEvent()}endDrawPolygon(){this.canvas.discardActiveObject(),this.isDrawingPolygon=!1,this.lastPoint=void 0,this.tempPoint=void 0,this._unbindEvent(),this.onEnd&&this.onEnd(),this.onEnd=void 0}discardPolygon(){this.lines.forEach(e=>{this.canvas.remove(e)}),this.anchors.forEach(e=>{this.canvas.remove(e)}),this.tempLine&&this.canvas.remove(this.tempLine),this.tempLine=void 0,this.anchors=[],this.lines=[],this.points=[],this.endDrawPolygon()}}pe($c,"pluginName","DrawPolygonPlugin"),pe($c,"apis",["beginDrawPolygon","endDrawPolygon","discardPolygon"]);class qc{constructor(e,n){pe(this,"_createdHandler",e=>{e.path.set("id",Tt())});this.canvas=e,this.editor=n}_bindEvent(){this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("path:created",this._createdHandler)}startDraw(e){this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new le.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.width=e.width,this._bindEvent()}endDraw(){if(this.canvas.isDrawingMode){this.canvas.isDrawingMode=!1,this._unbindEvent();return}}}pe(qc,"pluginName","FreeDrawPlugin"),pe(qc,"apis",["startDraw","endDraw"]);class Kc{constructor(e,n){pe(this,"options");pe(this,"_beforeHandler",e=>{if(this.options==null)return;const n=e.path,i=le.fabric.util.getPathSegmentsInfo;n.segmentsInfo=i(n.path),n.set({stroke:this.options.lineColor});const o=this.options.defaultText,p=this.options.defaultFontSize,v=new le.fabric.IText(o,{shadow:"",fontFamily:"arial",fontSize:p,top:n.top,left:n.left,fill:this.options.color,path:n,id:Tt(),editable:!1});this.canvas.add(v)});pe(this,"_createdHandler",e=>{this.canvas.remove(e.path)});this.canvas=e,this.editor=n}_bindEvent(){this.canvas.on("before:path:created",this._beforeHandler),this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("before:path:created",this._beforeHandler),this.canvas.off("path:created",this._createdHandler)}startTextPathDraw(e={}){const n={decimate:8,width:2,defaultText:"\u8BF8\u4E8B\u987A\u9042 \u4E07\u4E8B\u5927\u5409",color:"#000000",lineColor:"#000000",defaultFontSize:20};this.options=ve(ve({},n),e),this.canvas.isDrawingMode=!0;const i=this.canvas.freeDrawingBrush=new le.fabric.PencilBrush(this.canvas);i.decimate=this.options.decimate,i.width=this.options.width,i.color=this.options.color,this._bindEvent()}endTextPathDraw(){this.canvas.isDrawingMode=!1,this._unbindEvent()}}pe(Kc,"pluginName","PathTextPlugin"),pe(Kc,"apis",["startTextPathDraw","endTextPathDraw"]);function B9(t){return we(this,null,function*(){const e=D9(),{clipPath:n,workspase:i}=T9(t);e.clipPath=n,e.objects.push(i);const o=L9(t.children),p=yield O9(o);return e.objects.push(...p.reverse()),JSON.stringify(e,null,2)})}function O9(t){return we(this,null,function*(){function e(n){return n.filter(i=>(i.text&&(i.type="text"),!i.isHidden)).map(i=>we(this,null,function*(){const o=m0(["left","top",["width",u=>u.width+50],"height","name",["visible",()=>!0],["opacity",u=>255/u.opacity],["id",Tt]])(i),p=[{sourceType:"Layer",targetType:"image",attr:[],customTransform(u){return we(this,null,function*(){return{src:yield M9(u)}})}},{sourceType:"text",targetType:"textbox",attr:["text"],customTransform(u){return we(this,null,function*(){const{FontSize:a,FillColor:l,Tracking:s}=u.textProperties.EngineDict.StyleRun.RunArray[0].StyleSheet.StyleSheetData;return{charSpacing:s,fontFamily:"\u7AD9\u9177\u5FEB\u4E50\u4F53",fill:Q9(l.Values),fontSize:a||12}})}}],v="type",c=p.find(u=>u.sourceType===i[v]);if(c){const u=y0(c.targetType),a=m0(c.attr)(i),l=c.customTransform?yield c.customTransform(i):null;return G.assign(u,o,u,a,l)}return ve({},y0("textbox"))}))}return yield Promise.all(e(t))})}function D9(){return{version:"5.3.0",objects:[],clipPath:null}}function m0(t){return function(e){const n={desc:{}};return t.forEach(i=>{if(typeof i=="string"){const o=G.get(e,i);G.set(n,i,o)}else{const[o,p]=i;if(typeof p=="function"){const v=p(e);v&&G.set(n,o,v)}else{const v=G.get(e,p);G.set(n,o,v)}}}),n}}function y0(t){return{group:{type:"group",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,selectable:!0,hasControls:!0},textbox:{type:"textbox",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:"",backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,fontFamily:"arial",fontWeight:"normal",fontSize:80,text:"\u8BF8\u4E8B\u987A\u9042",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",charSpacing:0,styles:[],direction:"ltr",path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",minWidth:20,splitByGrapheme:!0,selectable:!0,hasControls:!0},image:{type:"image",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,cropX:0,cropY:0,selectable:!0,hasControls:!0,src:"",crossOrigin:"anonymous",filters:[]},rect:{type:"rect",version:"5.3.0",originX:"center",originY:"center",left:0,top:0,width:226,height:302,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0,inverted:!1,absolutePositioned:!1}}[t]}function T9(t){const{width:e,height:n}=t;return{clipPath:{type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:e,height:n,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0},workspase:{type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:e,height:n,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,id:"workspace",selectable:!1,hasControls:!0}}}function M9(t){return we(this,null,function*(){try{const e=yield t.composite(),n=document.createElement("canvas"),i=n.getContext("2d"),o=new ImageData(e,t.width,t.height);return n.width=t.width,n.height=t.height,i.putImageData(o,0,0),n.toDataURL("image/png")}catch(e){return""}})}function Q9(t){const[,e,n,i]=t;return`rgb(${e*255}, ${n*255}, ${i*255})`}function L9(t){const e=[];function n(i){i.forEach(o=>{o.children?n(o.children):e.push(o)})}return n(t),e}class j9{constructor(e,n){this.layerFrame=e,this.parent=n,this.type="Group",this.children=[]}get name(){var e,n;return(n=(e=this.layerFrame)===null||e===void 0?void 0:e.layerProperties.name)!==null&&n!==void 0?n:""}get opacity(){var e,n;return(n=(e=this.layerFrame)===null||e===void 0?void 0:e.layerProperties.opacity)!==null&&n!==void 0?n:0}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get additionalProperties(){var e;return(e=this.layerFrame)===null||e===void 0?void 0:e.layerProperties.additionalLayerProperties}addChild(e){this.children.push(e)}hasChildren(){return this.children.length!==0}freeze(){this.children.forEach(e=>{var n,i;return(i=(n=e).freeze)===null||i===void 0?void 0:i.call(n)}),Object.freeze(this.children)}}var Ct;(function(t){t.SectionDividerSetting="lsct",t.TypeToolObjectSetting="TySh",t.UnicodeLayerName="luni",t.VectorStrokeData="vstk",t.ObjectBasedEffects="lfx2",t.GradientFillSetting="GdFl",t.SolidColorSheetSetting="SoCo",t.PatternFillSetting="PtFl",t.VectorStrokeContentData="vscg",t.BlendOptionsCapacity="iOpa",t.VectorMaskSetting1="vmsk",t.VectorMaskSetting2="vsms",t.HueSaturation="hue2",t.NestedSectionDividerSetting="lsdk",t.LayerId="lyid",t.ArtboardData="artb",t.SmartObjectPlacedLayerData="SoLE",t.PlacedLayerData="SoLd",t.LinkedLayer="lnkD",t.LinkedLayer2="lnk2",t.LinkedLayer3="lnk3"})(Ct||(Ct={}));var Jc;(function(t){t[t.Normal=0]="Normal",t[t.SceneGroup=1]="SceneGroup"})(Jc||(Jc={}));var Fn;(function(t){t[t.ClosedSubpathLength=0]="ClosedSubpathLength",t[t.ClosedSubpathBezierKnotLinked=1]="ClosedSubpathBezierKnotLinked",t[t.ClosedSubpathBezierKnotUnlinked=2]="ClosedSubpathBezierKnotUnlinked",t[t.OpenSubpathLength=3]="OpenSubpathLength",t[t.OpenSubpathBezierKnotLinked=4]="OpenSubpathBezierKnotLinked",t[t.OpenSubpathBezierKnotUnlinked=5]="OpenSubpathBezierKnotUnlinked",t[t.PathFillRule=6]="PathFillRule",t[t.Clipboard=7]="Clipboard",t[t.InitialFillRule=8]="InitialFillRule"})(Fn||(Fn={}));const Zc=(t,e)=>{const n=Math.max(t.length,e.length);for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0};class Ge extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name}}class P9 extends Ge{}class b0 extends Ge{}class F9 extends Ge{}class R9 extends Ge{}class N9 extends Ge{}class z9 extends Ge{}class V9 extends Ge{}class U9 extends Ge{}class H9 extends Ge{}class G9 extends Ge{}class C0 extends Ge{}class w0 extends Ge{}class Y9 extends Ge{}class W9 extends Ge{}class X9 extends Ge{}class $9 extends Ge{}class q9 extends Ge{}class K9 extends Ge{}class J9 extends Ge{}class Z9 extends Ge{}class eO extends Ge{}class tO extends Ge{}class nO extends Ge{}class iO extends Ge{}class ca extends Ge{}class x0 extends Ge{}class rO extends Ge{}class _0 extends Ge{}class eu extends Ge{}class oO extends Ge{}class aO extends Ge{}class sO extends Ge{}class lO extends Ge{}class cO extends Ge{}class uO extends Ge{}class hO extends Ge{}class dO extends Ge{}class fO extends Ge{}class pO extends Ge{}class gO extends Ge{}class S0 extends Ge{}class tu extends Ge{}class vO extends Ge{}class AO extends Ge{}function E0(t,e){const n=t.getUint32(e),i=t.getUint32(e+4);if(n>=2097152)throw new x0;return n*4294967296+i}function mO(t,e){const n=t.getInt32(e),i=t.getUint32(e+4);if(n>=2097152||n<-2097152||n===-2097152&&i===0)throw new x0;return n*4294967296+i}const yO={u8:1,i8:1,u16:2,i16:2,u32:4,i32:4,f32:4,u64:8,i64:8,f64:8};class Yi{static from(e){return new Yi(new DataView(e.buffer,e.byteOffset,e.byteLength))}constructor(e,n=0){this.dataView=e,this.position=n}get length(){return this.dataView.byteLength}clone(e){const n=e!==void 0?e:this.position;return new Yi(new DataView(this.dataView.buffer,this.dataView.byteOffset,this.dataView.byteLength),n)}pass(e){this.position+=e}unpass(e){this.position-=e}extract(e){if(this.position+e>this.dataView.byteLength)throw new Z9;return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e)}iter(){return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position)}take(e){const n=this.extract(e);return this.pass(e),n}peek(){return this.dataView.getUint8(this.position)}one(){const e=this.dataView.getUint8(this.position);return this.position+=1,e}read(e){const{dataView:n,position:i}=this;switch(this.pass(yO[e]),e){case"u8":return n.getUint8(i);case"u16":return n.getUint16(i);case"u32":return n.getUint32(i);case"u64":return E0(n,i);case"i8":return n.getInt8(i);case"i16":return n.getInt16(i);case"i32":return n.getInt32(i);case"i64":return mO(n,i);case"f32":return n.getFloat32(i);case"f64":return n.getFloat64(i);default:throw new TypeError(`Invalid ReadType: ${e}`)}}readString(e){const n=this.take(e);return new TextDecoder().decode(n)}readUnicodeString(e=4){const n=this.read("u32")*2,i=this.take(n),o=new TextDecoder("utf-16be").decode(i);return this.padding(4+n,e),o.charCodeAt(o.length-1)===0?o.slice(0,-1):o}readFixedPoint32bit(){return this.read("u32")/65536}readIdString(){const e=this.read("u32");return this.readString(e||4)}padding(e,n){const i=e%n;i>0&&this.pass(n-i)}}const nu=(t,e,n)=>e<=t&&t<=n;function xs(t){return t.bottom-t.top}function bO(t){return t.right-t.left}function I0(t){return bO(t)*xs(t)}var _s;(function(t){t.PassThrough="pass",t.Normal="norm",t.Dissolve="diss",t.Darken="dark",t.Multiply="mul ",t.ColorBurn="idiv",t.LinearBurn="lbrn",t.DarkerColor="dkCl",t.Lighten="lite",t.Screen="scrn",t.ColorDodge="div ",t.LinearDodge="lddg",t.LighterColor="lgCl",t.Overlay="over",t.SoftLight="sLit",t.HardLight="hLit",t.VividLight="vLit",t.LinearLight="lLit",t.PinLight="pLit",t.HardMix="hMix",t.Difference="diff",t.Exclusion="smud",t.Subtract="fsub",t.Divide="fdiv",t.Hue="hue ",t.Saturation="sat ",t.Color="colr",t.Luminosity="lum "})(_s||(_s={}));function k0(t){const e=Object.keys(_s);for(const n of e)if(_s[n]===t)return t;throw new G9}var oo;(function(t){t[t.Base=0]="Base",t[t.NonBase=1]="NonBase"})(oo||(oo={}));function CO(t){if(t===oo.Base)return oo.Base;if(t===oo.NonBase)return oo.NonBase;throw new $9}var iu;(function(t){t[t.Bitmap=0]="Bitmap",t[t.Grayscale=1]="Grayscale",t[t.Indexed=2]="Indexed",t[t.Rgb=3]="Rgb",t[t.Cmyk=4]="Cmyk",t[t.Multichannel=7]="Multichannel",t[t.Duotone=8]="Duotone",t[t.Lab=9]="Lab"})(iu||(iu={}));var ru;(function(t){t[t.One=1]="One",t[t.Eight=8]="Eight",t[t.Sixteen=16]="Sixteen",t[t.ThirtyTwo=32]="ThirtyTwo"})(ru||(ru={}));var pt;(function(t){t.Alias="alis",t.Boolean="bool",t.Class="type",t.Descriptor="Objc",t.Double="doub",t.Enumerated="enum",t.GlobalClass="GlbC",t.GlobalObject="GlbO",t.Integer="long",t.LargeInteger="comp",t.List="VlLs",t.RawData="tdta",t.Reference="obj ",t.String="TEXT",t.UnitFloat="UntF",t.UnitFloats="UnFl",t.ObjectArray="ObAr"})(pt||(pt={}));var ou;(function(t){t.Angle="#Ang",t.Density="#Rsl",t.Distance="#Rlt",t.Millimeters="#Mlm",t.None="#Nne",t.Percent="#Prc",t.Pixels="#Pxl",t.Points="#Pnt"})(ou||(ou={}));function ao(t,e,n){const i=t.items.get(e);if(!i)throw new cO(`Cannot find key "${e}" in descriptor`);if(i.type!==n)throw new uO(`Unexpected descriptor value type: expected "${n}" but got "${i.type}"`);return i}var so;(function(t){t[t.PSD=1]="PSD",t[t.PSB=2]="PSB"})(so||(so={}));const wO=[56,66,80,83],xO=[0,0,0,0,0,0],_O=[1,8,16,32],SO=1,EO=56,B0=1;function IO(t){const e=new Yi(t),n=e.take(4);if(!Zc(n,wO))throw new P9;const i=e.read("u16");if(!(i===so.PSD||i===so.PSB))throw new b0;const o=hu(i),p=e.take(6);if(!Zc(p,xO))throw new F9;const v=e.read("u16");if(!nu(v,SO,EO))throw new z9;const c=e.read("u32"),r=e.read("u32");if(!nu(c,B0,o.maxPixels)||!nu(r,B0,o.maxPixels))throw new V9;const d=e.read("u16");if(!_O.includes(d))throw new N9;const u=e.read("u16");if(!(u in iu))throw new R9;return{channelCount:v,version:i,width:r,height:c,depth:d,colorMode:u}}function kO(t,e,n){const i=(t.length-2)/n,o=t.extract(i),p=n>=2?t.extract(i):void 0,v=n>=3?t.extract(i):void 0,c=n>=4?t.extract(i):void 0;if(e===ru.Eight)return{red:o,green:p,blue:v,alpha:c};throw new Y9(`Unsupported image bit depth: ${e}`)}function BO(t,e,n,i){let o=0,p=0,v=0,c=0;const r=i.rleScanlineLengthFieldReadType;for(let g=0;g<n;g++)o+=t.read(r);if(e>=2)for(let g=0;g<n;g++)p+=t.read(r);if(e>=3)for(let g=0;g<n;g++)v+=t.read(r);if(e===4)for(let g=0;g<n;g++)c+=t.read(r);const d=2+e*n*i.rleScanlineLengthFieldSize,u=t.clone(d),a=u.take(o),l=p?u.take(p):void 0,s=v?u.take(v):void 0,h=c?u.take(c):void 0;return{red:a,green:l,blue:s,alpha:h}}function OO(t,e,n,i,o){const p=new Yi(t),v=p.read("u16");if(!(v in ri))throw new C0;const{red:c,green:r,blue:d,alpha:u}=(()=>{switch(v){case ri.RawData:return kO(p,e,i);case ri.RleCompressed:return BO(p,i,n,o);default:throw new w0}})();return{compression:v,red:c,green:r,blue:d,alpha:u}}function DO(t){const e=t.read("u32");if(e!==1)throw new eO;const n=t.read("u32"),i=t.read("u32"),o=t.read("u32"),p=[];for(let v=0;v<o;++v){const c=t.read("i32"),r=QD(t.read("u8"));p.push({position:c,direction:r})}return{version:e,gridSizeX:n,gridSizeY:i,guides:p}}function TO(t,e){return t.take(e-t.position)}function MO(t){const e=t.readFixedPoint32bit(),n=t.read("u16"),i=t.read("u16"),o=t.readFixedPoint32bit(),p=t.read("u16"),v=t.read("u16");return{horizontal:e,horizontalUnit:n,widthUnit:i,vertical:o,verticalUnit:p,heightUnit:v}}function QO(t,e){const n=t.read("u32");if(n===6){const i=t.read("i32"),o=t.read("i32"),p=t.read("i32"),v=t.read("i32"),c=t.readUnicodeString(0),r=t.read("u32"),d=[];for(;d.length<r;){const a=t.read("u32"),l=t.read("u32"),s=LD(t.read("u32")),h=s===1?t.read("u32"):void 0;d.push({id:a,groupId:l,origin:s,associatedLayerId:h,name:t.readUnicodeString(0),type:t.read("u32"),left:t.read("i32"),top:t.read("i32"),right:t.read("i32"),bottom:t.read("i32"),url:t.readUnicodeString(0),target:t.readUnicodeString(0),message:t.readUnicodeString(0),altTag:t.readUnicodeString(0),isCellTextHtml:!!t.read("u8"),cellText:t.readUnicodeString(0),horizontalAlignment:t.read("i32"),verticalAlignment:t.read("i32"),alpha:t.read("u8"),red:t.read("u8"),green:t.read("u8"),blue:t.read("u8")})}const u=t.position<e?Rn(t):void 0;return{version:n,boundTop:i,boundLeft:o,boundBottom:p,boundRight:v,sliceGroupName:c,slices:d,descriptor:u}}else if(n===7||n===8){const i=Rn(t);return{version:n,descriptor:i}}else throw new nO(`Invalid Slices section version: ${n}`)}const LO=[56,66,73,77];function jO(t){const e=new Yi(t),n=[],i=e.read("u32");for(;e.position<i;){const o=PO(e);n.push(o)}return{resources:n}}function PO(t){const e=t.take(4);if(!Zc(e,LO))throw new J9;const n=t.read("i16"),i=FO(t,2),o=t.read("u32"),p=t.position+o,v=o+o%2,c=t.position;let r=null;switch(n){case fn.GridAndGuides:r=DO(t);break;case fn.Slices:r=QO(t,p);break;case fn.ICCProfile:r=TO(t,p);break;case fn.ResolutionInfo:r=MO(t);break;case fn.GlobalLightAltitude:r=t.read("i32");break;case fn.GlobalLightAngle:r=t.read("i32");break}const d=t.position,u=c+v-d;return u>0&&t.pass(u),{id:n,name:i,resource:r}}function FO(t,e=0){const n=t.read("u8"),i=t.readString(n);if(e){const o=(n+1)%e;o>0&&t.pass(e-o)}return i}function O0(t){const e={};for(const[n,i]of t)e[n]=i;return e}const D0=(t,e,n)=>{const{top:i,left:o,bottom:p,right:v,opacity:c,clipping:r,hidden:d,transparencyLocked:u,blendMode:a,layerText:l,engineData:s,maskData:h,additionalLayerInfos:g}=e,f=O0(g.map(A=>[A.key,A]));return{name:t,top:i,left:o,bottom:p,right:v,opacity:c,clippingMask:r,hidden:d,transparencyLocked:u,blendMode:a,groupId:n,text:l,textProperties:s,maskData:h,additionalLayerProperties:f}};class au{static create(e,n,i){const o=D0(e.name,e,i);return new au(n,o)}constructor(e,n){this.channels=e,this.layerProperties=n}get red(){const e=this.channels.get(an.Red);if(e===void 0)throw new X9;return e}get green(){return this.channels.get(an.Green)}get blue(){return this.channels.get(an.Blue)}get alpha(){return this.channels.get(an.TransparencyMask)}get userMask(){return this.channels.get(an.UserSuppliedLayerMask)}get realUserMask(){return this.channels.get(an.RealUserSuppliedLayerMask)}get width(){const{right:e,left:n}=this.layerProperties;return e-n+1}get height(){const{bottom:e,top:n}=this.layerProperties;return e-n+1}}class su{static create(e,n,i,o){const p=D0(e,i,o);return new su(n,p)}constructor(e,n){this.id=e,this.layerProperties=n}}function RO(t){return{data:Rn(t)}}function NO(t){return{fillOpacity:t.read("u8")}}function zO(t){return{data:Rn(t)}}function lu(t){const e=t.read("i16"),n=t.read("i16"),i=t.read("i16");return{hue:e,saturation:n,lightness:i}}function VO(t){const e=t.read("i16"),n=t.read("i16"),i=t.read("i16"),o=t.read("i16");return ve({beginRamp:e,beginSustain:n,endSustain:i,endRamp:o},lu(t))}function UO(t){return Array.from(Array(6),()=>VO(t))}function HO(t){const e=t.read("u16"),n=t.read("u8");t.pass(1);const i=lu(t),o=lu(t);return{version:e,colorize:n,colorization:i,master:o,adjustment:n?void 0:UO(t)}}function GO(t){return{value:t.read("u32")}}function YO(t,e){const n=[];let i=0;const o=t.position+e;for(;t.position<o&&(i=t.read("u64"));){const p=t.position,v=WO(t);n.push(v);const c=t.position-p,r=i-c;t.pass(r),t.padding(t.position,4)}return{layers:n}}function WO(t){const e=t.readString(4);if(e!=="liFD")throw new oO(`unknown layer type: '${e}'`);const n=t.read("i32"),i=XO(t),o=t.readUnicodeString(0),p=t.readString(4),v=t.readString(4),c=t.read("u64"),r=t.read("u8")?Rn(t):void 0,d=t.take(c),u=n>5?t.readUnicodeString():void 0;return{layerType:e,version:n,uniqueId:i,filename:o,filetype:p,creator:v,data:r,contents:d,uuid:u}}function XO(t){const e=t.read("u8");return t.readString(e)}function $O(t){const e=t.read("u32"),n=t.read("u32"),i=Ss(t);return{version:e,descriptor:i,descriptorVersion:n}}function qO(t){return{data:Rn(t)}}function KO(t,e){const n=MD(t.read("u32"));if(e<12)return{dividerType:n};const i=t.readString(4);if(i!=="8BIM")throw new _0(`Invalid Section Divider Setting signature: ${i}`);const o=k0(t.readString(4));if(e<16)return{dividerType:n,dividerSignature:i,blendMode:o};const p=t.read("u32");if(!(p in Jc))throw new _0(`Invalid Section Divider Setting subtype: ${p}`);return{dividerType:n,dividerSignature:i,blendMode:o,subType:p}}function JO(t){const e=t.readString(4),n=t.read("u32");return{data:Rn(t),version:n,identifier:e}}function ZO(t){const e=t.read("u32"),n=Ss(t);return{version:e,data:n}}function eD(t){const e=t.read("u16");if(e!==1)throw new eu(`Invalid type tool object setting version: ${e}`);const n=t.read("f64"),i=t.read("f64"),o=t.read("f64"),p=t.read("f64"),v=t.read("f64"),c=t.read("f64"),r=t.read("u16");if(r!==50)throw new eu(`Invalid text version: ${r}`);const d=Rn(t),u=t.read("u16");if(u!==1)throw new eu(`Invalid warp version: ${u}`);const a=Rn(t),l=t.read("f64"),s=t.read("f64"),h=t.read("f64"),g=t.read("f64");return{version:e,transformXX:n,transformXY:i,transformYX:o,transformYY:p,transformTX:v,transformTY:c,textVersion:r,textData:d,warpVersion:u,warpData:a,left:l,top:s,right:h,bottom:g}}function tD(t){return{name:t.readUnicodeString(0)}}function T0(t){const[e,...n]=t.take(4),i=n[0]*Ea(2,16)+n[1]*Ea(2,8)+n[2];return e+i/Ea(2,24)}function cu(t){const e=T0(t),n=T0(t);return{vert:e,horiz:n}}function nD(t,e){const n=t.read("i16"),i=t.read("i16"),o=t.read("i16");t.pass(6);const p=t.read("i16");return t.pass(10),{type:e,length:n,operation:i,subpathType:o,index:p}}function iD(t,e){const n=Array(4).map(()=>t.read("f32")),i=t.read("f32");return t.pass(6),{type:e,bounds:n,resolution:i}}function rD(t,e){const n=!!(t.read("i16")&1);return t.pass(22),{type:e,fill:n}}function oD(t,e){const n=cu(t),i=cu(t),o=cu(t);return{type:e,preceding:n,anchor:i,leaving:o}}function aD(t){const e=t.read("u16");switch(e){case Fn.OpenSubpathLength:case Fn.ClosedSubpathLength:return nD(t,e);case Fn.PathFillRule:return t.pass(24),{type:e};case Fn.Clipboard:return iD(t,e);case Fn.InitialFillRule:return rD(t,e);case Fn.ClosedSubpathBezierKnotLinked:case Fn.ClosedSubpathBezierKnotUnlinked:case Fn.OpenSubpathBezierKnotLinked:case Fn.OpenSubpathBezierKnotUnlinked:return oD(t,e);default:throw new Error(`Unknown PathRecordType: ${e} (bug in offsets?)`)}}function sD(t,e){const n=Math.floor(e/26);return Array.from(Array(n),()=>aD(t))}function lD(t,e){const n=t.read("u32"),i=t.read("u32"),o=sD(t,e);return{version:n,pathRecords:o,invert:!!(i&1),notLink:!!(i&2),disable:!!(i&4)}}function cD(t){const e=t.read("u32"),n=Rn(t);return{version:e,data:n}}function uD(t){return{data:Rn(t)}}function M0(t,e,n=0){const i=t.readString(4);if(i!=="8BIM"&&i!=="8B64")throw new rO(`Invalid signature: ${i}`);const o=t.readString(4),p=t.read(dD(o,e)),v=t.position,c=hD(t,i,o,p),r=p-(t.position-v);return t.pass(r),t.padding(p,n),c}function hD(t,e,n,i){switch(n){case Ct.NestedSectionDividerSetting:case Ct.SectionDividerSetting:return ve({signature:e,key:n},KO(t,i));case Ct.TypeToolObjectSetting:return ve({signature:e,key:n},eD(t));case Ct.UnicodeLayerName:return ve({signature:e,key:n},tD(t));case Ct.VectorStrokeData:return ve({signature:e,key:n},uD(t));case Ct.ObjectBasedEffects:return ve({signature:e,key:n},$O(t));case Ct.GradientFillSetting:return ve({signature:e,key:n},zO(t));case Ct.SolidColorSheetSetting:return ve({signature:e,key:n},ZO(t));case Ct.PatternFillSetting:return ve({signature:e,key:n},qO(t));case Ct.VectorStrokeContentData:return ve({signature:e,key:n},cD(t));case Ct.BlendOptionsCapacity:return ve({signature:e,key:n},NO(t));case Ct.VectorMaskSetting1:case Ct.VectorMaskSetting2:return ve({signature:e,key:n},lD(t,i));case Ct.HueSaturation:return ve({signature:e,key:n},HO(t));case Ct.LayerId:return ve({signature:e,key:n},GO(t));case Ct.ArtboardData:return ve({signature:e,key:n},RO(t));case Ct.PlacedLayerData:case Ct.SmartObjectPlacedLayerData:return ve({signature:e,key:n},JO(t));case Ct.LinkedLayer:case Ct.LinkedLayer2:case Ct.LinkedLayer3:return ve({signature:e,key:n},YO(t,i));default:{const o=t.take(i);return{signature:e,key:n,_isUnknown:!0,data:o}}}}function dD(t,e){if(e.aliLengthFieldSizeIsVariable)switch(t){case"LMsk":case"Lr16":case"Lr32":case"Layr":case"Mt16":case"Mt32":case"Mtrn":case"Alph":case"FMsk":case"Ink2":case"FEid":case"FXid":case"PxSD":case"cinf":return"u64"}return"u32"}const fD="8BIM";function pD(t,e,n){const i=[];for(;i.length<e;)i.push(gD(t,n));return i.map(o=>{const p=CD(t,o.channelInformation,o,n);return[o,p]}).reverse()}function gD(t,e){const[n,i,o,p]=AD(t),v=t.read("u16"),c=[];for(;c.length<v;){const S=t.read("i16"),O=t.read(e.layerRecordSectionChannelLengthFieldReadType)-2;c.push([S,O])}if(t.readString(4)!==fD)throw new U9;const r=k0(t.readString(4)),d=t.read("u8"),u=CO(t.read("u8")),{hidden:a,transparencyLocked:l}=mD(t);t.pass(1);const s=t.read("u32"),h=t.position,g=xD(t);t.pass(t.read("u32"));const f=t.read("u8");let A=t.readString(f);t.padding(f+1,4);const m=[];for(;t.position-h<s;)m.push(M0(t,e));let y,b,x;for(const S of m)if(!S._isUnknown)switch(S.key){case Ct.SectionDividerSetting:({dividerType:y}=S);break;case Ct.TypeToolObjectSetting:{const O=S.textData.descriptor.items.get("Txt ");O&&O.type===pt.String&&(b=O.value);const R=S.textData.descriptor.items.get("EngineData");R&&R.type===pt.RawData&&(x=XD(R.data));break}case Ct.UnicodeLayerName:({name:A}=S);break}return{name:A,channelInformation:c,top:n,left:i,bottom:o,right:p,hidden:a,transparencyLocked:l,opacity:d,clipping:u,blendMode:r,additionalLayerInfos:m,dividerType:y,layerText:b,engineData:x,maskData:g}}function vD(t,e){const n=[];for(;t.position<t.length;)n.push(M0(t,e,4));return O0(n.map(i=>[i.key,i]))}function AD(t){const e=t.read("i32"),n=t.read("i32");let i=t.read("i32");i!==0&&(i-=1);let o=t.read("i32");return o!==0&&(o-=1),[e,n,i,o]}function mD(t){const e=t.read("u8");return{transparencyLocked:!!(e&1),hidden:!!(e&2)}}function yD(t){const e=t.maskData.realData;if(!e)throw new Error("missing real mask data");return e}function bD(t,e){switch(e){case an.UserSuppliedLayerMask:return xs(t.maskData);case an.RealUserSuppliedLayerMask:return xs(yD(t));default:return xs(t)+1}}function CD(t,e,n,i){const o=new Map,{length:p}=e;for(let v=0;v<p;v++){const[c,r]=e[v],d=DD(t.read("u16"));switch(d){case ri.RawData:{const u=t.take(r);o.set(c,{compression:d,data:u});break}case ri.RleCompressed:{const u=t.take(r>0?wD(t,bD(n,c),i.rleScanlineLengthFieldReadType):r);o.set(c,{compression:d,data:u});break}}}return o}function wD(t,e,n){return Array.from(Array(e),()=>t.read(n)).reduce((i,o)=>i+o)}function xD(t){const e=t.read("u32"),n=t.position,[i,o,p,v]=Q0(t),c=t.read("u8"),r=L0(t),d=e>=36?SD(t):void 0,u=r.masksHaveParametersApplied?_D(t):void 0,a=e-(t.position-n);return t.pass(a),{top:i,left:o,bottom:p,right:v,backgroundColor:c,flags:r,parameters:u,realData:d}}function Q0(t){return Array.from(Array(4),()=>t.read("i32"))}var br;(function(t){t[t.PositionRelativeToLayer=1]="PositionRelativeToLayer",t[t.LayerMaskDisabled=2]="LayerMaskDisabled",t[t.InvertMaskWhenBlending=4]="InvertMaskWhenBlending",t[t.UserMaskFromRenderingOtherData=8]="UserMaskFromRenderingOtherData",t[t.MasksHaveParametersApplied=16]="MasksHaveParametersApplied"})(br||(br={}));function L0(t){const e=t.read("u8");return{positionRelativeToLayer:!!(e&br.PositionRelativeToLayer),layerMaskDisabled:!!(e&br.LayerMaskDisabled),invertMaskWhenBlending:!!(e&br.InvertMaskWhenBlending),userMaskFromRenderingOtherData:!!(e&br.UserMaskFromRenderingOtherData),masksHaveParametersApplied:!!(e&br.MasksHaveParametersApplied)}}var lo;(function(t){t[t.UserMaskDensity=1]="UserMaskDensity",t[t.UserMaskFeather=2]="UserMaskFeather",t[t.VectorMaskDensity=4]="VectorMaskDensity",t[t.VectorMaskFeather=8]="VectorMaskFeather"})(lo||(lo={}));function _D(t){const e=t.read("u8");return{userMaskDensity:e&lo.UserMaskDensity?t.read("u8"):void 0,userMaskFeather:e&lo.UserMaskFeather?t.read("f64"):void 0,vectorMaskDensity:e&lo.VectorMaskDensity?t.read("u8"):void 0,vectorMaskFeather:e&lo.VectorMaskFeather?t.read("f64"):void 0}}function SD(t){const e=L0(t),n=t.read("u8"),[i,o,p,v]=Q0(t);return{top:i,left:o,bottom:p,right:v,flags:e,backgroundColor:n}}function ED(t,e){const n=new Yi(t);n.pass(e.layerAndMaskSectionLengthFieldSize),n.pass(e.layerInfoSectionLengthFieldSize);const i=n.read("i16"),o=Math.abs(i),p=pD(n,o,e);n.padding(n.position,4),n.pass(n.read("u32"));const v=vD(n,e),c=[],r=[],d=[],u=[{startIndex:0,groupId:0,parentGroupId:0}];let a=0;for(let l=0;l<o;l++){const[s,h]=p[l],g=u[u.length-1].groupId,{dividerType:f}=s;if(f===co.CloseFolder||f===co.OpenFolder)a+=1,u.push({startIndex:c.length,groupId:a,parentGroupId:g,layerRecord:s}),d.push("G");else if(f===co.BoundingSection){const A=u.pop();if(A===void 0)throw new q9;const m=A.groupId>0?A.groupId:void 0,y=A.layerRecord||s;r.push(su.create(y.name,A.groupId,y,m)),d.push("D")}else c.push(au.create(s,h,g)),d.push("L")}return r.sort((l,s)=>l.id-s.id),{layers:c,groups:r,orders:d,globalAdditionalLayerInformation:v}}const ID=26;function uu(t,e,n=4){const i=(n===4?t.getUint32(e):E0(t,e))+n;return{start:e,end:e+i,size:i}}function kD(t){const e=new DataView(t),n=0,i=ID,o=new DataView(t,n,i),p=IO(o),v=hu(p.version),c=uu(e,n+i),r=uu(e,c.end),d=uu(e,r.end,v.layerAndMaskSectionLengthFieldSize);return{fileHeader:p,colorModeData:new DataView(t,c.size),imageResources:new DataView(t,r.start,r.size),layerAndMaskInformation:new DataView(t,d.start,d.size),imageData:new DataView(t,d.end)}}const BD={maxPixels:3e4,rleScanlineLengthFieldSize:2,rleScanlineLengthFieldReadType:"u16",layerAndMaskSectionLengthFieldSize:4,layerInfoSectionLengthFieldSize:4,layerRecordSectionChannelLengthFieldReadType:"u32",aliLengthFieldSizeIsVariable:!1},OD={maxPixels:3e5,rleScanlineLengthFieldSize:4,rleScanlineLengthFieldReadType:"u32",layerAndMaskSectionLengthFieldSize:8,layerInfoSectionLengthFieldSize:8,layerRecordSectionChannelLengthFieldReadType:"u64",aliLengthFieldSizeIsVariable:!0};function hu(t){switch(t){case so.PSD:return BD;case so.PSB:return OD;default:throw new b0}}var ri;(function(t){t[t.RawData=0]="RawData",t[t.RleCompressed=1]="RleCompressed",t[t.ZipWithoutPrediction=2]="ZipWithoutPrediction",t[t.ZipWithPrediction=3]="ZipWithPrediction"})(ri||(ri={}));function DD(t){if(!(t in ri))throw new C0;return t}var an;(function(t){t[t.Red=0]="Red",t[t.Green=1]="Green",t[t.Blue=2]="Blue",t[t.TransparencyMask=-1]="TransparencyMask",t[t.UserSuppliedLayerMask=-2]="UserSuppliedLayerMask",t[t.RealUserSuppliedLayerMask=-3]="RealUserSuppliedLayerMask"})(an||(an={}));function TD(t){switch(t){case an.Red:return 0;case an.Green:return 1;case an.Blue:return 2;case an.TransparencyMask:return 3;default:throw new W9}}var co;(function(t){t[t.Other=0]="Other",t[t.OpenFolder=1]="OpenFolder",t[t.CloseFolder=2]="CloseFolder",t[t.BoundingSection=3]="BoundingSection"})(co||(co={}));function MD(t){if(t in co)return t;throw new H9}var du;(function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal"})(du||(du={}));function QD(t){if(!(t in du))throw new tO;return t}var fn;(function(t){t[t.GridAndGuides=1032]="GridAndGuides",t[t.Slices=1050]="Slices",t[t.ICCProfile=1039]="ICCProfile",t[t.GlobalLightAngle=1037]="GlobalLightAngle",t[t.GlobalLightAltitude=1049]="GlobalLightAltitude",t[t.ResolutionInfo=1005]="ResolutionInfo"})(fn||(fn={}));var uo;(function(t){t[t.AutoGenerated=0]="AutoGenerated",t[t.LayerGenerated=1]="LayerGenerated",t[t.UserGenerated=2]="UserGenerated"})(uo||(uo={}));function LD(t){if(!(t in uo))throw new iO(`Invalid slice origin: ${t}`);return t}var j0;(function(t){t[t.PixelsPerInch=1]="PixelsPerInch",t[t.PixelsPerCM=2]="PixelsPerCM"})(j0||(j0={}));var P0;(function(t){t[t.Inch=1]="Inch",t[t.CM=2]="CM",t[t.Point=3]="Point",t[t.Pica=4]="Pica",t[t.Column=5]="Column"})(P0||(P0={}));var wi;(function(t){t.Class="Clss",t.Enumerated="Enmr",t.Identifier="Idnt",t.Index="indx",t.Name="name",t.Offset="rele",t.Property="prop"})(wi||(wi={}));function F0(t,e=255){if(!(0<=e&&e<=255))throw new K9;const n=t.length/4,i=TD(an.TransparencyMask),o=e/255;for(let p=0;p<n;p++){const v=p*4+i;t[v]=Math.floor(o*t[v])}return t}let R0,N0,z0,V0,U0,H0,G0,Y0,W0,X0,$0=we(void 0,null,function*(){const t="data:application/wasm;base64,AGFzbQEAAAABbw9gAn9/AX9gAn9/AGADf39/AX9gAX8Bf2ABfwBgA39/fwBgAX8BfmAAAX9gBX9/f39/AGAAAGAEf39/fwF/YA5/f39/f39/f39/f39/fwBgC39/f39/f39/f39/AGAEf39/fwBgCH9/f39/f39/AAKYAgUbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzGl9fd2JnX25ld19hYmRhNzZlODgzYmE4YTVmAAcbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzHF9fd2JnX3N0YWNrXzY1ODI3OWZlNDQ1NDFjZjYAARsuL3dlYnRvb25fcHNkX2RlY29kZXJfYmcuanMcX193YmdfZXJyb3JfZjg1MTY2N2FmNzFiY2ZjNgABGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxpfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZgAEGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxBfX3diaW5kZ2VuX3Rocm93AAEDVVQDBAICAQAAAAAEAQcICwUMAQEIDQ4BCAEAAAAFAQICCQAJAQoBCgMBBAUBBAMDAQAKBQMAAAAAAAEDAAMDAQMAAAMJAwMDAwECAgcAAAMDAQYGBgQEBQFwASUlBQMBABEGCQF/AUGAgMAACwfHAQsGbWVtb3J5AgAHbWFpbl9qcwAkCmRlY29kZV9yZ2IAFAtkZWNvZGVfcmdiYQASEGRlY29kZV9ncmF5c2NhbGUAGxJkZWNvZGVfZ3JheXNjYWxlX2EAGR9fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyAEYRX193YmluZGdlbl9tYWxsb2MAJQ9fX3diaW5kZ2VuX2ZyZWUANhJfX3diaW5kZ2VuX3JlYWxsb2MAKhBfX3diaW5kZ2VuX3N0YXJ0ACQJKgEAQQELJFhUVFRYIgsdMCMNH1g5RRpYIgweMFZVLRYcJz1XRDs/OjhYVwr0lwFU/CACD38BfiMAQRBrIgskAAJAAkACQAJAAkACQCAAQfUBTwRAQQhBCBA0IQZBFEEIEDQhBUEQQQgQNCEBQQBBEEEIEDRBAnRrIgJBgIB8IAEgBSAGamprQXdxQQNrIgEgASACSxsgAE0NBiAAQQRqQQgQNCEEQdiQwAAoAgBFDQVBACAEayEDAn9BACAEQYACSQ0AGkEfIARB////B0sNABogBEEGIARBCHZnIgBrdkEBcSAAQQF0a0E+agsiBkECdEG8jcAAaigCACIBDQFBACEAQQAhBQwCC0EQIABBBGpBEEEIEDRBBWsgAEsbQQgQNCEEAkACQAJAAn8CQAJAQdSQwAAoAgAiASAEQQN2IgB2IgJBA3FFBEAgBEHckMAAKAIATQ0LIAINAUHYkMAAKAIAIgBFDQsgABBAaEECdEG8jcAAaigCACIBEEggBGshAyABEDEiAARAA0AgABBIIARrIgIgAyACIANJIgIbIQMgACABIAIbIQEgABAxIgANAAsLIAEgBBBQIQUgARAOQRBBCBA0IANLDQUgASAEEEIgBSADEDNB3JDAACgCACIARQ0EIABBeHFBzI7AAGohB0HkkMAAKAIAIQZB1JDAACgCACICQQEgAEEDdnQiAHFFDQIgBygCCAwDCwJAIAJBf3NBAXEgAGoiA0EDdCIAQdSOwABqKAIAIgVBCGooAgAiAiAAQcyOwABqIgBHBEAgAiAANgIMIAAgAjYCCAwBC0HUkMAAIAFBfiADd3E2AgALIAUgA0EDdBAvIAUQUiEDDAsLAkBBASAAQR9xIgB0EDcgAiAAdHEQQGgiAkEDdCIAQdSOwABqKAIAIgNBCGooAgAiASAAQcyOwABqIgBHBEAgASAANgIMIAAgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiACd3E2AgALIAMgBBBCIAMgBBBQIgUgAkEDdCAEayICEDNB3JDAACgCACIABEAgAEF4cUHMjsAAaiEHQeSQwAAoAgAhBgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgBygCCAwBC0HUkMAAIAAgAXI2AgAgBwshACAHIAY2AgggACAGNgIMIAYgBzYCDCAGIAA2AggLQeSQwAAgBTYCAEHckMAAIAI2AgAgAxBSIQMMCgtB1JDAACAAIAJyNgIAIAcLIQAgByAGNgIIIAAgBjYCDCAGIAc2AgwgBiAANgIIC0HkkMAAIAU2AgBB3JDAACADNgIADAELIAEgAyAEahAvCyABEFIiAw0FDAQLIAQgBhAydCEHQQAhAEEAIQUDQAJAIAEQSCICIARJDQAgAiAEayICIANPDQAgASEFIAIiAw0AQQAhAyABIQAMAwsgAUEUaigCACICIAAgAiABIAdBHXZBBHFqQRBqKAIAIgFHGyAAIAIbIQAgB0EBdCEHIAENAAsLIAAgBXJFBEBBACEFQQEgBnQQN0HYkMAAKAIAcSIARQ0DIAAQQGhBAnRBvI3AAGooAgAhAAsgAEUNAQsDQCAAIAUgABBIIgEgBE8gASAEayICIANJcSIBGyEFIAIgAyABGyEDIAAQMSIADQALCyAFRQ0AIARB3JDAACgCACIATSADIAAgBGtPcQ0AIAUgBBBQIQYgBRAOAkBBEEEIEDQgA00EQCAFIAQQQiAGIAMQMyADQYACTwRAIAYgAxAPDAILIANBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIANBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAY2AgggACAGNgIMIAYgAjYCDCAGIAA2AggMAQsgBSADIARqEC8LIAUQUiIDDQELAkACQAJAAkACQAJAAkAgBEHckMAAKAIAIgBLBEBB4JDAACgCACIAIARLDQJBCEEIEDQgBGpBFEEIEDRqQRBBCBA0akGAgAQQNCIAQRB2QAAhASALQQA2AgggC0EAIABBgIB8cSABQX9GIgAbNgIEIAtBACABQRB0IAAbNgIAIAsoAgAiCA0BQQAhAwwIC0HkkMAAKAIAIQJBEEEIEDQgACAEayIBSwRAQeSQwABBADYCAEHckMAAKAIAIQBB3JDAAEEANgIAIAIgABAvIAIQUiEDDAgLIAIgBBBQIQBB3JDAACABNgIAQeSQwAAgADYCACAAIAEQMyACIAQQQiACEFIhAwwHCyALKAIIIQxB7JDAACALKAIEIgpB7JDAACgCAGoiATYCAEHwkMAAQfCQwAAoAgAiACABIAAgAUsbNgIAAkACQAJAQeiQwAAoAgAEQEG8jsAAIQADQCAAEEMgCEYNAiAAKAIIIgANAAsMAgtB+JDAACgCACIARSAAIAhLcg0FDAcLIAAQSg0AIAAQSyAMRw0AIAAoAgAiAkHokMAAKAIAIgFNBH8gAiAAKAIEaiABSwVBAAsNAQtB+JDAAEH4kMAAKAIAIgAgCCAAIAhJGzYCACAIIApqIQFBvI7AACEAAkACQANAIAEgACgCAEcEQCAAKAIIIgANAQwCCwsgABBKDQAgABBLIAxGDQELQeiQwAAoAgAhCUG8jsAAIQACQANAIAkgACgCAE8EQCAAEEMgCUsNAgsgACgCCCIADQALQQAhAAsgCSAAEEMiBkEUQQgQNCIPa0EXayIBEFIiAEEIEDQgAGsgAWoiACAAQRBBCBA0IAlqSRsiDRBSIQ4gDSAPEFAhAEEIQQgQNCEDQRRBCBA0IQVBEEEIEDQhAkHokMAAIAggCBBSIgFBCBA0IAFrIgEQUCIHNgIAQeCQwAAgCkEIaiACIAMgBWpqIAFqayIDNgIAIAcgA0EBcjYCBEEIQQgQNCEFQRRBCBA0IQJBEEEIEDQhASAHIAMQUCABIAIgBUEIa2pqNgIEQfSQwABBgICAATYCACANIA8QQkG8jsAAKQIAIRAgDkEIakHEjsAAKQIANwIAIA4gEDcCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHEjsAAIA42AgADQCAAQQQQUCAAQQc2AgQiAEEEaiAGSQ0ACyAJIA1GDQcgCSANIAlrIgAgCSAAEFAQLiAAQYACTwRAIAkgABAPDAgLIABBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAk2AgggACAJNgIMIAkgAjYCDCAJIAA2AggMBwsgACgCACEDIAAgCDYCACAAIAAoAgQgCmo2AgQgCBBSIgVBCBA0IQIgAxBSIgFBCBA0IQAgCCACIAVraiIGIAQQUCEHIAYgBBBCIAMgACABa2oiACAEIAZqayEEQeiQwAAoAgAgAEcEQCAAQeSQwAAoAgBGDQMgACgCBEEDcUEBRw0FAkAgABBIIgVBgAJPBEAgABAODAELIABBDGooAgAiAiAAQQhqKAIAIgFHBEAgASACNgIMIAIgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiAFQQN2d3E2AgALIAQgBWohBCAAIAUQUCEADAULQeiQwAAgBzYCAEHgkMAAQeCQwAAoAgAgBGoiADYCACAHIABBAXI2AgQgBhBSIQMMBwsgACAAKAIEIApqNgIEQeCQwAAoAgAgCmohAUHokMAAKAIAIgAgABBSIgBBCBA0IABrIgAQUCEDQeCQwAAgASAAayIFNgIAQeiQwAAgAzYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgAMBQtB4JDAACAAIARrIgE2AgBB6JDAAEHokMAAKAIAIgIgBBBQIgA2AgAgACABQQFyNgIEIAIgBBBCIAIQUiEDDAULQeSQwAAgBzYCAEHckMAAQdyQwAAoAgAgBGoiADYCACAHIAAQMyAGEFIhAwwEC0H4kMAAIAg2AgAMAQsgByAEIAAQLiAEQYACTwRAIAcgBBAPIAYQUiEDDAMLIARBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIARBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AgggBhBSIQMMAgtB/JDAAEH/HzYCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHYjsAAQcyOwAA2AgBB4I7AAEHUjsAANgIAQdSOwABBzI7AADYCAEHojsAAQdyOwAA2AgBB3I7AAEHUjsAANgIAQfCOwABB5I7AADYCAEHkjsAAQdyOwAA2AgBB+I7AAEHsjsAANgIAQeyOwABB5I7AADYCAEGAj8AAQfSOwAA2AgBB9I7AAEHsjsAANgIAQYiPwABB/I7AADYCAEH8jsAAQfSOwAA2AgBBkI/AAEGEj8AANgIAQYSPwABB/I7AADYCAEGYj8AAQYyPwAA2AgBBjI/AAEGEj8AANgIAQZSPwABBjI/AADYCAEGgj8AAQZSPwAA2AgBBnI/AAEGUj8AANgIAQaiPwABBnI/AADYCAEGkj8AAQZyPwAA2AgBBsI/AAEGkj8AANgIAQayPwABBpI/AADYCAEG4j8AAQayPwAA2AgBBtI/AAEGsj8AANgIAQcCPwABBtI/AADYCAEG8j8AAQbSPwAA2AgBByI/AAEG8j8AANgIAQcSPwABBvI/AADYCAEHQj8AAQcSPwAA2AgBBzI/AAEHEj8AANgIAQdiPwABBzI/AADYCAEHgj8AAQdSPwAA2AgBB1I/AAEHMj8AANgIAQeiPwABB3I/AADYCAEHcj8AAQdSPwAA2AgBB8I/AAEHkj8AANgIAQeSPwABB3I/AADYCAEH4j8AAQeyPwAA2AgBB7I/AAEHkj8AANgIAQYCQwABB9I/AADYCAEH0j8AAQeyPwAA2AgBBiJDAAEH8j8AANgIAQfyPwABB9I/AADYCAEGQkMAAQYSQwAA2AgBBhJDAAEH8j8AANgIAQZiQwABBjJDAADYCAEGMkMAAQYSQwAA2AgBBoJDAAEGUkMAANgIAQZSQwABBjJDAADYCAEGokMAAQZyQwAA2AgBBnJDAAEGUkMAANgIAQbCQwABBpJDAADYCAEGkkMAAQZyQwAA2AgBBuJDAAEGskMAANgIAQayQwABBpJDAADYCAEHAkMAAQbSQwAA2AgBBtJDAAEGskMAANgIAQciQwABBvJDAADYCAEG8kMAAQbSQwAA2AgBB0JDAAEHEkMAANgIAQcSQwABBvJDAADYCAEHMkMAAQcSQwAA2AgBBCEEIEDQhBUEUQQgQNCECQRBBCBA0IQFB6JDAACAIIAgQUiIAQQgQNCAAayIAEFAiAzYCAEHgkMAAIApBCGogASACIAVqaiAAamsiBTYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgALQQAhA0HgkMAAKAIAIgAgBE0NAEHgkMAAIAAgBGsiATYCAEHokMAAQeiQwAAoAgAiAiAEEFAiADYCACAAIAFBAXI2AgQgAiAEEEIgAhBSIQMLIAtBEGokACADC5gHAQV/IAAQUyIAIAAQSCIBEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsCQCACED4EQCAAIAEgAhAuDAELAkACQAJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiICNgIAIAAgAhAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiICNgIAIAAgAkEBcjYCBCAAQeSQwAAoAgBGDQEMAgsgAhBIIgMgAWohAQJAIANBgAJPBEAgAhAODAELIAJBDGooAgAiBCACQQhqKAIAIgJHBEAgAiAENgIMIAQgAjYCCAwBC0HUkMAAQdSQwAAoAgBBfiADQQN2d3E2AgALIAAgARAzIABB5JDAACgCAEcNAkHckMAAIAE2AgAMAwtB3JDAAEEANgIAQeSQwABBADYCAAtB9JDAACgCACACTw0BQQhBCBA0IQBBFEEIEDQhAkEQQQgQNCEDQQBBEEEIEDRBAnRrIgFBgIB8IAMgACACamprQXdxQQNrIgAgACABSxtFDQFB6JDAACgCAEUNAUEIQQgQNCEAQRRBCBA0IQJBEEEIEDQhAUEAIQMCQEHgkMAAKAIAIgQgASACIABBCGtqaiIATQ0AIAQgAGtB//8DakGAgHxxIgRBgIAEayECQeiQwAAoAgAhAUG8jsAAIQACQANAIAEgACgCAE8EQCAAEEMgAUsNAgsgACgCCCIADQALQQAhAAsgABBKDQAgAEEMaigCABoMAAsQEEEAIANrRw0BQeCQwAAoAgBB9JDAACgCAE0NAUH0kMAAQX82AgAPCyABQYACSQ0BIAAgARAPQfyQwABB/JDAACgCAEEBayIANgIAIAANABAQGg8LDwsgAUF4cUHMjsAAaiECAn9B1JDAACgCACIDQQEgAUEDdnQiAXEEQCACKAIIDAELQdSQwAAgASADcjYCACACCyEDIAIgADYCCCADIAA2AgwgACACNgIMIAAgAzYCCAvIDQEMfwJAAkAgACgCCCIKIAAoAhAiA3IEQAJAIANFDQAgASACaiEIIABBFGooAgBBAWohByABIQQDQAJAIAQhAyAHQQFrIgdFDQAgAyAIRg0CAn8gAywAACIEQQBOBEAgBEH/AXEhBSADQQFqDAELIAMtAAFBP3EhCSAEQR9xIQUgBEFfTQRAIAVBBnQgCXIhBSADQQJqDAELIAMtAAJBP3EgCUEGdHIhCSAEQXBJBEAgCSAFQQx0ciEFIANBA2oMAQsgBUESdEGAgPAAcSADLQADQT9xIAlBBnRyciIFQYCAxABGDQMgA0EEagsiBCAGIANraiEGIAVBgIDEAEcNAQwCCwsgAyAIRg0AIAMsAAAiBEEATiAEQWBJciAEQXBJckUEQCAEQf8BcUESdEGAgPAAcSADLQADQT9xIAMtAAJBP3FBBnQgAy0AAUE/cUEMdHJyckGAgMQARg0BCwJAAkAgBkUNACACIAZNBEBBACEDIAIgBkYNAQwCC0EAIQMgASAGaiwAAEFASA0BCyABIQMLIAYgAiADGyECIAMgASADGyEBCyAKRQ0CIABBDGooAgAhDAJAIAJBEE8EQAJ/QQAhBUEAIQcCQAJAIAEiA0EDakF8cSIEIANrIgggAksgCEEES3INACACIAhrIglBBEkNACAJQQNxIQpBACEGAkAgAyAERg0AIAhBA3EhBQJAIAQgA0F/c2pBA0kEQCADIQQMAQsgCEF8cSELIAMhBANAIAYgBCwAAEG/f0pqIAQsAAFBv39KaiAELAACQb9/SmogBCwAA0G/f0pqIQYgBEEEaiEEIAtBBGsiCw0ACwsgBUUNAANAIAYgBCwAAEG/f0pqIQYgBEEBaiEEIAVBAWsiBQ0ACwsgAyAIaiEDAkAgCkUNACADIAlBfHFqIgQsAABBv39KIQcgCkEBRg0AIAcgBCwAAUG/f0pqIQcgCkECRg0AIAcgBCwAAkG/f0pqIQcLIAlBAnYhCCAGIAdqIQUDQCADIQYgCEUNAkHAASAIIAhBwAFPGyIHQQNxIQkgB0ECdCELAkAgB0H8AXEiCkUEQEEAIQQMAQsgBiAKQQJ0aiENQQAhBANAIANFDQEgBCADKAIAIg5Bf3NBB3YgDkEGdnJBgYKECHFqIANBBGooAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcWogA0EIaigCACIEQX9zQQd2IARBBnZyQYGChAhxaiADQQxqKAIAIgRBf3NBB3YgBEEGdnJBgYKECHFqIQQgA0EQaiIDIA1HDQALCyAIIAdrIQggBiALaiEDIARBCHZB/4H8B3EgBEH/gfwHcWpBgYAEbEEQdiAFaiEFIAlFDQALAn9BACAGRQ0AGiAGIApBAnRqIgMoAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcSIEIAlBAUYNABogBCADKAIEIgZBf3NBB3YgBkEGdnJBgYKECHFqIgQgCUECRg0AGiAEIAMoAggiA0F/c0EHdiADQQZ2ckGBgoQIcWoLIgNBCHZB/4EccSADQf+B/AdxakGBgARsQRB2IAVqDAILQQAgAkUNARogAkEDcSEEIAJBBE8EQCACQXxxIQYDQCAFIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEFIANBBGohAyAGQQRrIgYNAAsLIARFDQADQCAFIAMsAABBv39KaiEFIANBAWohAyAEQQFrIgQNAAsLIAULIQQMAQsgAkUEQEEAIQQMAQsgAkEDcSEFAkAgAkEESQRAQQAhBCABIQMMAQsgAkF8cSEHQQAhBCABIQMDQCAEIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEEIANBBGohAyAHQQRrIgcNAAsLIAVFDQADQCAEIAMsAABBv39KaiEEIANBAWohAyAFQQFrIgUNAAsLIAQgDEkEQCAMIARrIgQhBgJAAkACQCAALQAgIgNBACADQQNHGyIDQQFrDgIAAQILQQAhBiAEIQMMAQsgBEEBdiEDIARBAWpBAXYhBgsgA0EBaiEDIABBBGooAgAhBCAAKAIcIQUgACgCACEAAkADQCADQQFrIgNFDQEgACAFIAQoAhARAABFDQALQQEPC0EBIQMgBUGAgMQARg0CIAAgASACIAQoAgwRAgANAkEAIQMDQCADIAZGBEBBAA8LIANBAWohAyAAIAUgBCgCEBEAAEUNAAsgA0EBayAGSQ8LDAILIAAoAgAgASACIAAoAgQoAgwRAgAhAwsgAw8LIAAoAgAgASACIAAoAgQoAgwRAgAL9wQBCn8jAEEwayIDJAAgA0EDOgAoIANCgICAgIAENwMgIANBADYCGCADQQA2AhAgAyABNgIMIAMgADYCCAJ/AkACQCACKAIAIgpFBEAgAkEUaigCACIARQ0BIAIoAhAhASAAQQN0IQUgAEEBa0H/////AXFBAWohByACKAIIIQADQCAAQQRqKAIAIgQEQCADKAIIIAAoAgAgBCADKAIMKAIMEQIADQQLIAEoAgAgA0EIaiABQQRqKAIAEQAADQMgAUEIaiEBIABBCGohACAFQQhrIgUNAAsMAQsgAigCBCIARQ0AIABBBXQhCyAAQQFrQf///z9xQQFqIQcgAigCCCEAA0AgAEEEaigCACIBBEAgAygCCCAAKAIAIAEgAygCDCgCDBECAA0DCyADIAUgCmoiBEEcai0AADoAKCADIARBFGopAgA3AyAgBEEQaigCACEGIAIoAhAhCEEAIQlBACEBAkACQAJAIARBDGooAgBBAWsOAgACAQsgBkEDdCAIaiIMQQRqKAIAQR5HDQEgDCgCACgCACEGC0EBIQELIAMgBjYCFCADIAE2AhAgBEEIaigCACEBAkACQAJAIARBBGooAgBBAWsOAgACAQsgAUEDdCAIaiIGQQRqKAIAQR5HDQEgBigCACgCACEBC0EBIQkLIAMgATYCHCADIAk2AhggCCAEKAIAQQN0aiIBKAIAIANBCGogASgCBBEAAA0CIABBCGohACALIAVBIGoiBUcNAAsLIAJBDGooAgAgB0sEQCADKAIIIAIoAgggB0EDdGoiACgCACAAKAIEIAMoAgwoAgwRAgANAQtBAAwBC0EBCyADQTBqJAALywQBBH8gACABEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsgAhA+BEAgACABIAIQLgwCCwJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiIBNgIAIAAgARAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiIBNgIAIAAgAUEBcjYCBCAAQeSQwAAoAgBHDQFB3JDAAEEANgIAQeSQwABBADYCAA8LIAIQSCIDIAFqIQECQCADQYACTwRAIAIQDgwBCyACQQxqKAIAIgQgAkEIaigCACICRwRAIAIgBDYCDCAEIAI2AggMAQtB1JDAAEHUkMAAKAIAQX4gA0EDdndxNgIACyAAIAEQMyAAQeSQwAAoAgBHDQFB3JDAACABNgIACw8LIAFBgAJPBEAgACABEA8PCyABQXhxQcyOwABqIQICf0HUkMAAKAIAIgNBASABQQN2dCIBcQRAIAIoAggMAQtB1JDAACABIANyNgIAIAILIQEgAiAANgIIIAEgADYCDCAAIAI2AgwgACABNgIIC/cCAQV/AkACQAJAAkAgAUEJTwRAQRBBCBA0IAFLDQEMAgsgABAFIQQMAgtBEEEIEDQhAQtBCEEIEDQhA0EUQQgQNCECQRBBCBA0IQVBAEEQQQgQNEECdGsiBkGAgHwgBSACIANqamtBd3FBA2siAyADIAZLGyABayAATQ0AIAFBECAAQQRqQRBBCBA0QQVrIABLG0EIEDQiA2pBEEEIEDRqQQRrEAUiAkUNACACEFMhAAJAIAFBAWsiBCACcUUEQCAAIQEMAQsgAiAEakEAIAFrcRBTIQJBEEEIEDQhBCAAEEggAiABQQAgAiAAayAETRtqIgEgAGsiAmshBCAAEEFFBEAgASAEECwgACACECwgACACEAkMAQsgACgCACEAIAEgBDYCBCABIAAgAmo2AgALIAEQQQ0BIAEQSCICQRBBCBA0IANqTQ0BIAEgAxBQIQAgASADECwgACACIANrIgMQLCAAIAMQCQwBCyAEDwsgARBSIAEQQRoL0gIBAn8jAEEQayICJAAgACgCACEAAkAgAUH/AE0EQCAAKAIIIgMgACgCAEYEfyAAIAMQFSAAKAIIBSADCyAAKAIEaiABOgAAIAAgACgCCEEBajYCCAwBCyACQQA2AgwCfyABQYAQTwRAIAFBgIAETwRAIAIgAUE/cUGAAXI6AA8gAiABQQZ2QT9xQYABcjoADiACIAFBDHZBP3FBgAFyOgANIAIgAUESdkEHcUHwAXI6AAxBBAwCCyACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAELIAIgAUE/cUGAAXI6AA0gAiABQQZ2QcABcjoADEECCyEBIAEgACgCACAAKAIIIgNrSwRAIAAgAyABEBMgACgCCCEDCyAAKAIEIANqIAJBDGogARBOGiAAIAEgA2o2AggLIAJBEGokAEEAC9ACAQJ/IwBBEGsiAiQAIAAoAgAhAAJAIAFB/wBNBEAgACgCCCIDIAAoAgBGBEAgACADEBUgACgCCCEDCyAAIANBAWo2AgggACgCBCADaiABOgAADAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALywIBAn8jAEEQayICJAACQCABQf8ATQRAIAAoAggiAyAAKAIARgR/IAAgAxAVIAAoAggFIAMLIAAoAgRqIAE6AAAgACAAKAIIQQFqNgIIDAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALvAIBBX8gACgCGCEDAkACQCAAIAAoAgxGBEAgAEEUQRAgAEEUaiIBKAIAIgQbaigCACICDQFBACEBDAILIAAoAggiAiAAKAIMIgE2AgwgASACNgIIDAELIAEgAEEQaiAEGyEEA0AgBCEFIAIiAUEUaiICIAFBEGogAigCACICGyEEIAFBFEEQIAIbaigCACICDQALIAVBADYCAAsCQCADRQ0AAkAgACAAKAIcQQJ0QbyNwABqIgIoAgBHBEAgA0EQQRQgAygCECAARhtqIAE2AgAgAUUNAgwBCyACIAE2AgAgAQ0AQdiQwABB2JDAACgCAEF+IAAoAhx3cTYCAA8LIAEgAzYCGCAAKAIQIgIEQCABIAI2AhAgAiABNgIYCyAAQRRqKAIAIgBFDQAgAUEUaiAANgIAIAAgATYCGAsLoAIBBH8gAEIANwIQIAACf0EAIAFBgAJJDQAaQR8gAUH///8HSw0AGiABQQYgAUEIdmciAmt2QQFxIAJBAXRrQT5qCyIDNgIcIANBAnRBvI3AAGohAgJAAkACQAJAQdiQwAAoAgAiBEEBIAN0IgVxBEAgAigCACECIAMQMiEDIAIQSCABRw0BIAIhAwwCC0HYkMAAIAQgBXI2AgAgAiAANgIADAMLIAEgA3QhBANAIAIgBEEddkEEcWpBEGoiBSgCACIDRQ0CIARBAXQhBCADIgIQSCABRw0ACwsgAygCCCIBIAA2AgwgAyAANgIIIAAgAzYCDCAAIAE2AgggAEEANgIYDwsgBSAANgIACyAAIAI2AhggACAANgIIIAAgADYCDAtgAQx/QcSOwAAoAgAiAgRAQbyOwAAhBgNAIAIiASgCCCECIAEoAgQhAyABKAIAIQQgAUEMaigCABogASEGIAVBAWohBSACDQALC0H8kMAAQf8fIAUgBUH/H00bNgIAIAgLlgIBA38gACABaiEHAkACQAJAAkADQCAAIAdHBEAgAC0AACEFIABBAWoiASEAIAVBgAFGDQEgBcBBAE4EQEEAIQYDQCAAIAdGDQQgAiAETw0FIAIgA2ogAC0AADoAACACQQRqIQIgAEEBaiEAIAZB/wFxIAZBAWohBiAFSQ0ACwwCCyABIAdGDQVBASAFayEFIAFBAWohACABLQAAIQZBACEBA0AgAiAETw0FIAIgA2ogBjoAACACQQRqIQIgAUEBaiIBQf8BcSAFQf8BcUkNAAsMAQsLDwtBtIDAAEHBAEGIgcAAECAAC0GAgMAAQRlB+IDAABAgAAtBgIDAAEEZQdSBwAAQIAALQZiBwABBO0HkgcAAECAAC+oEAQt/IwBBEGsiESQAAkACQAJAIAQOAgEAAgtBASEPCwJAAkAgBw4CAQACC0EBIRALQQAhBAJAAkAgCg4CAQACC0EBIQQLQQEhBwJAAkACQCANDgIAAQILQQAhBwsgEUEIaiEYIAIhEiADIRMgDyENIAUhFCAGIRUgECEKIAghFiAJIRcgCyEPIAwhEAJAAkACQAJAAkAgAUECdCIORQRAQQEhAQwBCyAOQQBIDQEgDhArIgFFDQILAkAgDUUEQCATRQ0BQQAhDQNAIA0gDk8NBSABIA1qIBItAAA6AAAgDUEEaiENIBJBAWohEiATQQFrIhMNAAsMAQsgEiATQQAgASAOEBELAkAgCkUEQCAVRQ0BQQEhDQNAIA0gDk8NBSABIA1qIBQtAAA6AAAgDUEEaiENIBRBAWohFCAVQQFrIhUNAAsMAQsgFCAVQQEgASAOEBELAkAgBEUEQCAXRQ0BQQIhDQNAIA0gDk8NBSABIA1qIBYtAAA6AAAgDUEEaiENIBZBAWohFiAXQQFrIhcNAAsMAQsgFiAXQQIgASAOEBELAkAgB0UEQCAQRQ0BQQMhDQNAIA0gDk8NBSABIA1qIA8tAAA6AAAgDUEEaiENIA9BAWohDyAQQQFrIhANAAsMAQsgDyAQQQMgASAOEBELIBggDjYCBCAYIAE2AgAMAwsQJgALIA5BARBMAAtBgIDAAEEZQaSAwAAQIAALIBEoAgwhBCARKAIIIQEgDARAIAsQBgsgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACABNgIAIAAgBDYCBCARQRBqJAAPCwsQRwALyQEBAn8jAEEgayIDJAACQAJAIAEgASACaiIBSw0AQQggACgCACICQQF0IgQgASABIARJGyIBIAFBCE0bIgFBf3NBH3YhBAJAIAIEQCADQQE2AhggAyACNgIUIAMgAEEEaigCADYCEAwBCyADQQA2AhgLIAMgASAEIANBEGoQGCADKAIEIQIgAygCAEUEQCAAIAE2AgAgACACNgIEDAILIANBCGooAgAiAEGBgICAeEYNASAARQ0AIAIgABBMAAsQJgALIANBIGokAAuDBAEKfyMAQRBrIg8kAAJAAkACQCAEDgIBAAILQQEhDQsCQAJAIAcOAgEAAgtBASEOC0EBIQQCQAJAAkAgCg4CAAECC0EAIQQLIA9BCGohEiACIQcgAyEKIA0hEyAFIQ0gBiEQIA4hFCAIIQ4gCSERAkACQAJAAkACQCABQQJ0IgtFBEBBASEBDAELIAtBAEgNASALQQEQPCIBRQ0CCyABQf8BIAsQTSEMAkAgE0UEQCAKRQ0BQQAhAQNAIAEgC08NBSABIAxqIActAAA6AAAgAUEEaiEBIAdBAWohByAKQQFrIgoNAAsMAQsgByAKQQAgDCALEBELAkAgFEUEQCAQRQ0BQQEhAQNAIAEgC08NBSABIAxqIA0tAAA6AAAgAUEEaiEBIA1BAWohDSAQQQFrIhANAAsMAQsgDSAQQQEgDCALEBELAkAgBEUEQCARRQ0BQQIhAQNAIAEgC08NBSABIAxqIA4tAAA6AAAgAUEEaiEBIA5BAWohDiARQQFrIhENAAsMAQsgDiARQQIgDCALEBELIBIgCzYCBCASIAw2AgAMAwsQJgALIAtBARBMAAtBgIDAAEEZQaSAwAAQIAALIA8oAgwhASAPKAIIIQQgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACAENgIAIAAgATYCBCAPQRBqJAAPCwsQRwALxwEBA38jAEEgayICJAACQAJAIAFBAWoiAUUNAEEIIAAoAgAiA0EBdCIEIAEgASAESRsiASABQQhNGyIBQX9zQR92IQQCQCADBEAgAkEBNgIYIAIgAzYCFCACIABBBGooAgA2AhAMAQsgAkEANgIYCyACIAEgBCACQRBqEBggAigCBCEDIAIoAgBFBEAgACABNgIAIAAgAzYCBAwCCyACQQhqKAIAIgBBgYCAgHhGDQEgAEUNACADIAAQTAALECYACyACQSBqJAAL3AECA38BfiMAQSBrIgIkACABKAIERQRAIAEoAgwhAyACQRhqIgRBADYCACACQoCAgIAQNwMQIAIgAkEQajYCHCACQRxqQYCHwAAgAxAIGiABQQhqIAQoAgA2AgAgASACKQMQNwIACyABKQIAIQUgAUKAgICAEDcCACACQQhqIgMgAUEIaiIBKAIANgIAIAFBADYCACACIAU3AwBBDEEEEDwiAUUEQEEMQQQQTAALIAEgAikDADcCACABQQhqIAMoAgA2AgAgAEGoicAANgIEIAAgATYCACACQSBqJAAL7wEBAn8jAEEgayIFJABBuI3AAEG4jcAAKAIAIgZBAWo2AgACQAJAIAZBAEgNAEGAkcAAQYCRwAAoAgBBAWoiBjYCACAGQQJLDQAgBSAEOgAYIAUgAzYCFCAFIAI2AhAgBUHwicAANgIMIAVBmIfAADYCCEGojcAAKAIAIgJBAEgNAEGojcAAIAJBAWo2AgBBqI3AAEGwjcAAKAIABH8gBSAAIAEoAhARAQAgBSAFKQMANwMIQbCNwAAoAgAgBUEIakG0jcAAKAIAKAIUEQEAQaiNwAAoAgBBAWsFIAILNgIAIAZBAUsNACAEDQELAAsAC6sBAQF/AkAgAgRAAn8CQAJAAkAgAUEATgRAIAMoAghFDQIgAygCBCIEDQEgAQ0DIAIMBAsgAEEIakEANgIADAULIAMoAgAgBCACIAEQNQwCCyABDQAgAgwBCyABIAIQPAsiAwRAIAAgAzYCBCAAQQhqIAE2AgAgAEEANgIADwsgACABNgIEIABBCGogAjYCAAwBCyAAIAE2AgQgAEEIakEANgIACyAAQQE2AgALkQQBCX8jAEEQayIMJAACQAJAAkAgBA4CAgEACxBHAAtBASEIC0EBIQQCQAJAAkAgBw4CAAECC0EAIQQLIAxBCGohDyACIQsgAyEHIAUhDSAGIQ4gBCEQAkACQAJAAkACQCABQQJ0IglFBEBBASEKDAELIAlBAEgNASAJECsiCkUNAgsCQCAIRQRAIAdFDQFBACEIIAchASALIQQDQCAIIAlPDQUgCCAKaiAELQAAOgAAIAhBBGohCCAEQQFqIQQgAUEBayIBDQALIAchAUEBIQggCyEEA0AgCCAJTw0FIAggCmogBC0AADoAACAIQQRqIQggBEEBaiEEIAFBAWsiAQ0AC0ECIQgDQCAIIAlPDQUgCCAKaiALLQAAOgAAIAhBBGohCCALQQFqIQsgB0EBayIHDQALDAELIAsgB0EAIAogCRARIAsgB0EBIAogCRARIAsgB0ECIAogCRARCwJAIBBFBEAgDkUNAUEDIQgDQCAIIAlPDQUgCCAKaiANLQAAOgAAIAhBBGohCCANQQFqIQ0gDkEBayIODQALDAELIA0gDkEDIAogCRARCyAPIAk2AgQgDyAKNgIADAMLECYACyAJQQEQTAALQYCAwABBGUGkgMAAECAACyAMKAIMIQQgDCgCCCEBIAYEQCAFEAYLIAMEQCACEAYLIAAgATYCACAAIAQ2AgQgDEEQaiQADwsQRwALcQAjAEEwayIBJABBgI3AAC0AAARAIAFBFGpBAjYCACABQRxqQQE2AgAgAUHoh8AANgIQIAFBADYCCCABQQ82AiQgASAANgIsIAEgAUEgajYCGCABIAFBLGo2AiAgAUEIakGQiMAAECkACyABQTBqJAALpAMBB38jAEEQayIKJABBASEHAkACQAJAIAQOAgABAgtBACEHCyAKQQhqIQsgAiEEIAMhCAJAAkACQAJAAkAgAUECdCIGRQRAQQEhBQwBCyAGQQBIDQEgBkEBEDwiBUUNAgsgBUH/ASAGEE0hCQJAIAdFBEAgCEUNAUEAIQUgCCEHIAQhAQNAIAUgBk8NBSAFIAlqIAEtAAA6AAAgBUEEaiEFIAFBAWohASAHQQFrIgcNAAsgCCEHQQEhBSAEIQEDQCAFIAZPDQUgBSAJaiABLQAAOgAAIAVBBGohBSABQQFqIQEgB0EBayIHDQALQQIhBQNAIAUgBk8NBSAFIAlqIAQtAAA6AAAgBUEEaiEFIARBAWohBCAIQQFrIggNAAsMAQsgBCAIQQAgCSAGEBEgBCAIQQEgCSAGEBEgBCAIQQIgCSAGEBELIAsgBjYCBCALIAk2AgAMAwsQJgALIAZBARBMAAtBgIDAAEEZQaSAwAAQIAALIAooAgwhASAKKAIIIQQgAwRAIAIQBgsgACAENgIAIAAgATYCBCAKQRBqJAAPCxBHAAt5AQN/IwBBEGsiAiQAIAEoAgRFBEAgASgCDCEDIAJBCGoiBEEANgIAIAJCgICAgBA3AwAgAiACNgIMIAJBDGpBgIfAACADEAgaIAFBCGogBCgCADYCACABIAIpAwA3AgALIABBqInAADYCBCAAIAE2AgAgAkEQaiQAC10BAX8jAEEgayICJAAgACgCACEAIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAIgADYCBCACQQRqQaCFwAAgAkEIahAIIAJBIGokAAtdAQF/IwBBIGsiAiQAIAAoAgAhACACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACIAA2AgQgAkEEakGAh8AAIAJBCGoQCCACQSBqJAALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakGghcAAIAJBCGoQCCACQSBqJAALZQEBfyMAQTBrIgMkACADIAE2AgwgAyAANgIIIANBHGpBATYCACADQSRqQQE2AgAgA0HIisAANgIYIANBADYCECADQSA2AiwgAyADQShqNgIgIAMgA0EIajYCKCADQRBqIAIQKQALUQEBfyMAQSBrIgIkACACQQxqQQE2AgAgAkEUakEANgIAIAJByIrAADYCECACQQA2AgAgAkErNgIcIAIgADYCGCACIAJBGGo2AgggAiABECkAC0YBAX8gAiAAKAIAIgAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQALQQEBfyACIAAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQAL6QQBBn8jAEEQayIDJABBgY3AAC0AAEEDRwRAIANBAToACyADIANBC2o2AgwgA0EMaiEAIwBBIGsiASQAAkACQAJAAkACQAJAAkBBgY3AAC0AAEEBaw4DAgQBAAtBgY3AAEECOgAAIAFBgY3AADYCCCAAKAIAIgAtAAAgAEEAOgAARQ0CIwBBIGsiACQAAkACQAJAQbiNwAAoAgBB/////wdxBEAQT0UNAQtBqI3AACgCAEGojcAAQX82AgANAQJAAkBBuI3AACgCAEH/////B3FFBEBBtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIADAELEE9BtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIARQ0BC0G4jcAAKAIAQf////8HcUUNABBPDQBBrI3AAEEBOgAAC0GojcAAQQA2AgACQCAERQ0AIAQgAigCABEEACACQQRqKAIARQ0AIAJBCGooAgAaIAQQBgsgAEEgaiQADAILIABBFGpBATYCACAAQRxqQQA2AgAgAEHUiMAANgIQIABBmIfAADYCGCAAQQA2AgggAEEIakH4iMAAECkACwALIAFBAzoADCABQQhqIgAoAgAgAC0ABDoAAAsgAUEgaiQADAQLIAFBFGpBATYCACABQRxqQQA2AgAgAUGQhMAANgIQDAILQZiEwABBkIXAABAhAAsgAUEUakEBNgIAIAFBHGpBADYCACABQdyDwAA2AhALIAFBoIXAADYCGCABQQA2AgggAUEIakHggsAAECkACwsgA0EQaiQACzgBAX8CQCABaUEBRw0AQYCAgIB4IAFrIABJIgINACAABEAgAEEAIAEgAhsQPCIBRQ0BCyABDwsAC0kBAX8jAEEgayIAJAAgAEEUakEBNgIAIABBHGpBADYCACAAQbCKwAA2AhAgAEGAisAANgIYIABBADYCCCAAQQhqQbiKwAAQKQALRAECfyABKAIEIQIgASgCACEDQQhBBBA8IgFFBEBBCEEEEEwACyABIAI2AgQgASADNgIAIABBuInAADYCBCAAIAE2AgALOQACQAJ/IAJBgIDEAEcEQEEBIAAgAiABKAIQEQAADQEaCyADDQFBAAsPCyAAIANBACABKAIMEQIAC7kCAQJ/IwBBIGsiAiQAIAJBAToAGCACIAE2AhQgAiAANgIQIAJBjIvAADYCDCACQciKwAA2AggjAEEQayIAJAACQCACQQhqIgEoAgwiAgRAIAEoAggiA0UNASAAIAI2AgggACABNgIEIAAgAzYCACMAQRBrIgEkACAAKAIAIgJBFGooAgAhAwJAAn8CQAJAIAJBDGooAgAOAgABAwsgAw0CQQAhAkGYh8AADAELIAMNASACKAIIIgMoAgQhAiADKAIACyEDIAEgAjYCBCABIAM2AgAgAUHcicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALIAFBADYCBCABIAI2AgwgAUHIicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALQZiHwABBmInAABAhAAtBmIfAAEGIicAAECEACy0AAkAgA2lBAUdBgICAgHggA2sgAUlyRQRAIAAgASADIAIQNSIADQELAAsgAAslAQF/AkAgAEEBEAoiAUUNACABEFMQQQ0AIAFBACAAEE0aCyABCycAIAAgACgCBEEBcSABckECcjYCBCAAIAFqIgAgACgCBEEBcjYCBAsgAQF/AkAgAEEEaigCACIBRQ0AIAAoAgBFDQAgARAGCwsjACACIAIoAgRBfnE2AgQgACABQQFyNgIEIAAgAWogATYCAAseACAAIAFBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQLFAAgACgCAARAIABBBGooAgAQBgsLGQEBfyAAKAIQIgEEfyABBSAAQRRqKAIACwsSAEEZIABBAXZrQQAgAEEfRxsLFgAgACABQQFyNgIEIAAgAWogATYCAAsQACAAIAFqQQFrQQAgAWtxC+oFAQZ/An8gACEFAkACQAJAIAJBCU8EQCADIAIQCiIHDQFBAAwEC0EIQQgQNCEAQRRBCBA0IQFBEEEIEDQhAkEAQRBBCBA0QQJ0ayIEQYCAfCACIAAgAWpqa0F3cUEDayIAIAAgBEsbIANNDQFBECADQQRqQRBBCBA0QQVrIANLG0EIEDQhAiAFEFMiACAAEEgiBBBQIQECQAJAAkACQAJAAkACQCAAEEFFBEAgAiAETQ0BIAFB6JDAACgCAEYNAiABQeSQwAAoAgBGDQMgARA+DQcgARBIIgYgBGoiCCACSQ0HIAggAmshBCAGQYACSQ0EIAEQDgwFCyAAEEghASACQYACSQ0GIAEgAmtBgYAISSACQQRqIAFNcQ0FIAEgACgCACIBakEQaiEEIAJBH2pBgIAEEDQhAgwGC0EQQQgQNCAEIAJrIgFLDQQgACACEFAhBCAAIAIQLCAEIAEQLCAEIAEQCQwEC0HgkMAAKAIAIARqIgQgAk0NBCAAIAIQUCEBIAAgAhAsIAEgBCACayICQQFyNgIEQeCQwAAgAjYCAEHokMAAIAE2AgAMAwtB3JDAACgCACAEaiIEIAJJDQMCQEEQQQgQNCAEIAJrIgFLBEAgACAEECxBACEBQQAhBAwBCyAAIAIQUCIEIAEQUCEGIAAgAhAsIAQgARAzIAYgBigCBEF+cTYCBAtB5JDAACAENgIAQdyQwAAgATYCAAwCCyABQQxqKAIAIgkgAUEIaigCACIBRwRAIAEgCTYCDCAJIAE2AggMAQtB1JDAAEHUkMAAKAIAQX4gBkEDdndxNgIAC0EQQQgQNCAETQRAIAAgAhBQIQEgACACECwgASAEECwgASAEEAkMAQsgACAIECwLIAANAwsgAxAFIgFFDQEgASAFIAAQSEF4QXwgABBBG2oiACADIAAgA0kbEE4gBRAGDAMLIAcgBSABIAMgASADSRsQThogBRAGCyAHDAELIAAQQRogABBSCwsLACABBEAgABAGCwsPACAAQQF0IgBBACAAa3ILFQAgASAAKAIAIgAoAgAgACgCBBAHCxkAIAEoAgBB+IzAAEEFIAEoAgQoAgwRAgALEwAgASgCACABKAIEIAAoAgAQCAsUACAAKAIAIAEgACgCBCgCDBEAAAsIACAAIAEQCgsTACAAQbiJwAA2AgQgACABNgIACw0AIAAtAARBAnFBAXYLEAAgASAAKAIAIAAoAgQQBwsKAEEAIABrIABxCwsAIAAtAARBA3FFCwwAIAAgAUEDcjYCBAsNACAAKAIAIAAoAgRqCw4AIAAoAgAaA0AMAAsAC9gGAgt/An4gADUCACENIwBBMGsiBCQAQSchAAJAIA1CkM4AVARAIA0hDgwBCwNAIARBCWogAGoiAkEEayANIA1CkM4AgCIOQpDOAH59pyIDQf//A3FB5ABuIgVBAXRBsIvAAGovAAA7AAAgAkECayADIAVB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAAIABBBGshACANQv/B1y9WIA4hDQ0ACwsgDqciAkHjAEsEQCAAQQJrIgAgBEEJamogDqciAiACQf//A3FB5ABuIgJB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAACwJAIAJBCk8EQCAAQQJrIgAgBEEJamogAkEBdEGwi8AAai8AADsAAAwBCyAAQQFrIgAgBEEJamogAkEwajoAAAsCfyAEQQlqIABqIQhBK0GAgMQAIAEoAhgiA0EBcSICGyEFIAJBJyAAayIJaiECQciKwABBACADQQRxGyEHAkACQCABKAIIRQRAQQEhACABKAIAIgMgAUEEaigCACICIAUgBxAoDQEMAgsCQAJAAkACQCACIAFBDGooAgAiBkkEQCADQQhxDQQgBiACayICIQNBASABLQAgIgAgAEEDRhsiAEEBaw4CAQIDC0EBIQAgASgCACIDIAFBBGooAgAiAiAFIAcQKA0EDAULQQAhAyACIQAMAQsgAkEBdiEAIAJBAWpBAXYhAwsgAEEBaiEAIAFBBGooAgAhAiABKAIcIQYgASgCACEBAkADQCAAQQFrIgBFDQEgASAGIAIoAhARAABFDQALQQEMBAtBASEAIAZBgIDEAEYNASABIAIgBSAHECgNASABIAggCSACKAIMEQIADQFBACEAAn8DQCADIAAgA0YNARogAEEBaiEAIAEgBiACKAIQEQAARQ0ACyAAQQFrCyADSSEADAELIAEoAhwhCyABQTA2AhwgAS0AICEMQQEhACABQQE6ACAgASgCACIDIAFBBGooAgAiCiAFIAcQKA0AIAYgAmtBAWohAAJAA0AgAEEBayIARQ0BIANBMCAKKAIQEQAARQ0AC0EBDAMLQQEhACADIAggCSAKKAIMEQIADQAgASAMOgAgIAEgCzYCHEEADAILIAAMAQsgAyAIIAkgAigCDBECAAsgBEEwaiQACwsAIAAjAGokACMACwwAQfCCwABBGRAEAAsKACAAKAIEQXhxCwoAIAAoAgRBAXELCgAgACgCDEEBcQsKACAAKAIMQQF2CxkAIAAgAUGkjcAAKAIAIgBBECAAGxEBAAALrwEBA38gASEFAkAgAkEPTQRAIAAhAQwBCyAAQQAgAGtBA3EiA2ohBCADBEAgACEBA0AgASAFOgAAIAFBAWoiASAESQ0ACwsgBCACIANrIgJBfHEiA2ohASADQQBKBEAgBUH/AXFBgYKECGwhAwNAIAQgAzYCACAEQQRqIgQgAUkNAAsLIAJBA3EhAgsgAgRAIAEgAmohAgNAIAEgBToAACABQQFqIgEgAkkNAAsLIAALswIBB38CQCACIgRBD00EQCAAIQIMAQsgAEEAIABrQQNxIgNqIQUgAwRAIAAhAiABIQYDQCACIAYtAAA6AAAgBkEBaiEGIAJBAWoiAiAFSQ0ACwsgBSAEIANrIghBfHEiB2ohAgJAIAEgA2oiA0EDcSIEBEAgB0EATA0BIANBfHEiBkEEaiEBQQAgBEEDdCIJa0EYcSEEIAYoAgAhBgNAIAUgBiAJdiABKAIAIgYgBHRyNgIAIAFBBGohASAFQQRqIgUgAkkNAAsMAQsgB0EATA0AIAMhAQNAIAUgASgCADYCACABQQRqIQEgBUEEaiIFIAJJDQALCyAIQQNxIQQgAyAHaiEBCyAEBEAgAiAEaiEDA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0kNAAsLIAALCwBBgJHAACgCAEULBwAgACABagsHACAAIAFrCwcAIABBCGoLBwAgAEEIawvDBwEFfwJAIwBB0ABrIgIkACACQQA2AhggAkKAgICAEDcDECACQSBqIgQiAEEDOgAgIABCgICAgIAENwIYIABBADYCECAAQQA2AgggAEG4hcAANgIEIAAgAkEQajYCACMAQUBqIgAkAEEBIQMCQCAEKAIAIgVB7IrAAEEMIAQoAgQiBCgCDBECAA0AAkAgASgCCCIDBEAgACADNgIMIABBITYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCEUNAQwCCyABKAIAIgMgASgCBEEMaigCABEGAELB9/nozJOy0UFSDQAgACADNgIMIABBIjYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCA0BCyABKAIMIQEgAEEkakEPNgIAIABBHGpBDzYCACAAIAFBDGo2AiAgACABQQhqNgIYIABBIDYCFCAAIAE2AhAgAEEDNgI8IABBAzYCNCAAQdSKwAA2AjAgAEEANgIoIAAgAEEQajYCOCAFIAQgAEEoahAIIQMLIABBQGskAAJAIANFBEAgAigCECACKAIYIgBrQQlNBEAgAkEQaiAAQQoQEyACKAIYIQALIAIoAhQgAGoiAUH0hsAAKQAANwAAIAFBCGpB/IbAAC8AADsAACACIABBCmo2AhggAkEIahAAIgQQASACKAIIIQYgAigCDCIFIAIoAhAgAigCGCIAa0sEQCACQRBqIAAgBRATIAIoAhghAAsgAigCFCAAaiAGIAUQThogAiAAIAVqIgA2AhggAigCECAAa0EBTQRAIAJBEGogAEECEBMgAigCGCEACyACKAIUIABqQYoUOwAAIAIgAEECaiIDNgIYIAIoAhQhAAJAIAMgAigCECIBTwRAIAAhAQwBCyADRQRAQQEhASAAEAYMAQsgACABQQEgAxA1IgFFDQILIAEgAxACIAUEQCAGEAYLIARBhAFPBEAgBBADCyACQdAAaiQADAILIwBBQGoiACQAIABBNzYCDCAAQdCFwAA2AgggAEGIhsAANgIUIAAgAkHIAGo2AhAgAEEkakECNgIAIABBLGpBAjYCACAAQTxqQR82AgAgAEGgi8AANgIgIABBADYCGCAAQSA2AjQgACAAQTBqNgIoIAAgAEEQajYCOCAAIABBCGo2AjAgAEEYakHkhsAAECkACyADQQEQTAALCwwAQsH3+ejMk7LRQQsNAEKy+KXLheeH1Jt/CwwAQuLnycndnOOADQsDAAELC4cNAQBBgIDAAAv9DG91dHB1dCBzbGljZSBpcyB0b28gc21hbGxzcmMvbGliLnJzABkAEAAKAAAAggAAAA4AAABpbnB1dCB0ZXJtaW5hdGVkIHdoaWxlIGRlY29kaW5nIHVuY29tcHJlc3NlZCBzZWdtZW50IGluIFJMRSBzbGljZQAAABkAEAAKAAAAmQAAABYAAAAZABAACgAAAJYAAAAWAAAAaW5wdXQgdGVybWluYXRlZCB3aGlsZSBkZWNvZGluZyByZXBlYXQgc2VnbWVudCBpbiBSTEUgc2xpY2UAGQAQAAoAAACmAAAAFgAAABkAEAAKAAAAoQAAABIAAAAvVXNlcnMveWhrYW5nLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvY29uc29sZV9lcnJvcl9wYW5pY19ob29rLTAuMS43L3NyYy9saWIucnP0ABAAbAAAAJUAAAAOAAAAaW52YWxpZCBlbnVtIHZhbHVlIHBhc3NlZAAAAAEAAAAAAAAAAQAAAAIAAAADAAAABAAAAG9uZS10aW1lIGluaXRpYWxpemF0aW9uIG1heSBub3QgYmUgcGVyZm9ybWVkIHJlY3Vyc2l2ZWx5pAEQADgAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAAOQBEAAqAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZS9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvc3RkL3NyYy9zeW5jL29uY2UucnMAQwIQAEwAAACVAAAAMgAAAAUAAAAEAAAABAAAAAYAAAAHAAAACAAAAAkAAAAMAAAABAAAAAoAAAALAAAADAAAAGEgRGlzcGxheSBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCBhbiBlcnJvciB1bmV4cGVjdGVkbHkADQAAAAAAAAABAAAADgAAAC9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvYWxsb2Mvc3JjL3N0cmluZy5ycwAYAxAASwAAAN0JAAAOAAAACgpTdGFjazoKCgAAEQAAAAQAAAAEAAAAEgAAABMAAAAUAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZW1lbW9yeSBhbGxvY2F0aW9uIG9mICBieXRlcyBmYWlsZWQAAADDAxAAFQAAANgDEAANAAAAbGlicmFyeS9zdGQvc3JjL2FsbG9jLnJz+AMQABgAAABVAQAACQAAAGNhbm5vdCBtb2RpZnkgdGhlIHBhbmljIGhvb2sgZnJvbSBhIHBhbmlja2luZyB0aHJlYWQgBBAANAAAAGxpYnJhcnkvc3RkL3NyYy9wYW5pY2tpbmcucnNcBBAAHAAAAIcAAAAJAAAAXAQQABwAAABBAgAAHgAAAFwEEAAcAAAAQAIAAB8AAAAVAAAADAAAAAQAAAAWAAAAEQAAAAgAAAAEAAAAFwAAABgAAAAQAAAABAAAABkAAAAaAAAAEQAAAAgAAAAEAAAAGwAAABwAAAARAAAAAAAAAAEAAAAdAAAAbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93AAAAHAUQABEAAAAABRAAHAAAAAwCAAAFAAAASAUQAAAAAAA6AAAASAUQAAAAAABQBRAAAQAAAFAFEAABAAAAcGFuaWNrZWQgYXQgJycsIHgFEAABAAAAeQUQAAMAAAAjAAAAAAAAAAEAAAAkAAAAOiAAAEgFEAAAAAAAnAUQAAIAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OUVycm9yAG8JcHJvZHVjZXJzAghsYW5ndWFnZQEEUnVzdAAMcHJvY2Vzc2VkLWJ5AwVydXN0Yx0xLjcwLjAgKDkwYzU0MTgwNiAyMDIzLTA1LTMxKQZ3YWxydXMGMC4xOS4wDHdhc20tYmluZGdlbgYwLjIuODcALA90YXJnZXRfZmVhdHVyZXMCKw9tdXRhYmxlLWdsb2JhbHMrCHNpZ24tZXh0",e=(...B)=>we(void 0,[...B],function*(k={},L){let Q;if(L.startsWith("data:")){const w=L.replace(/^data:.*?base64,/,"");let _;if(typeof Buffer=="function"&&typeof Buffer.from=="function")_=Buffer.from(w,"base64");else if(typeof atob=="function"){const I=atob(w);_=new Uint8Array(I.length);for(let D=0;D<I.length;D++)_[D]=I.charCodeAt(D)}else throw new Error("Cannot decode base64-encoded data URL");Q=yield WebAssembly.instantiate(_,k)}else{const w=yield fetch(L),_=w.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&_.startsWith("application/wasm"))Q=yield WebAssembly.instantiateStreaming(w,k);else{const I=yield w.arrayBuffer();Q=yield WebAssembly.instantiate(I,k)}}return Q.instance.exports});let n;z0=function(k){n=k};const i=new Array(128).fill(void 0);i.push(void 0,null,!0,!1);function o(k){return i[k]}let p=i.length;function v(k){k<132||(i[k]=p,p=k)}function c(k){const L=o(k);return v(k),L}const r=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let d=new r("utf-8",{ignoreBOM:!0,fatal:!0});d.decode();let u=null;function a(){return(u===null||u.byteLength===0)&&(u=new Uint8Array(n.memory.buffer)),u}function l(k,L){return k=k>>>0,d.decode(a().subarray(k,k+L))}let s=0;function h(k,L){const B=L(k.length*1,1)>>>0;return a().set(k,B/1),s=k.length,B}let g=null;function f(){return(g===null||g.byteLength===0)&&(g=new Int32Array(n.memory.buffer)),g}function A(k,L){return k=k>>>0,a().subarray(k/1,k/1+L)}W0=function(k,L,B,Q,w,_,I){try{const Y=n.__wbindgen_add_to_stack_pointer(-16),z=h(L,n.__wbindgen_malloc),X=s,N=h(Q,n.__wbindgen_malloc),j=s,q=h(_,n.__wbindgen_malloc),te=s;n.decode_rgb(Y,k,z,X,B,N,j,w,q,te,I);var D=f()[Y/4+0],H=f()[Y/4+1],V=A(D,H).slice();return n.__wbindgen_free(D,H*1),V}finally{n.__wbindgen_add_to_stack_pointer(16)}},X0=function(k,L,B,Q,w,_,I,D,H){try{const X=n.__wbindgen_add_to_stack_pointer(-16),N=h(L,n.__wbindgen_malloc),j=s,q=h(Q,n.__wbindgen_malloc),te=s,oe=h(_,n.__wbindgen_malloc),ie=s,fe=h(D,n.__wbindgen_malloc),Ae=s;n.decode_rgba(X,k,N,j,B,q,te,w,oe,ie,I,fe,Ae,H);var V=f()[X/4+0],Y=f()[X/4+1],z=A(V,Y).slice();return n.__wbindgen_free(V,Y*1),z}finally{n.__wbindgen_add_to_stack_pointer(16)}},G0=function(k,L,B){try{const I=n.__wbindgen_add_to_stack_pointer(-16),D=h(L,n.__wbindgen_malloc),H=s;n.decode_grayscale(I,k,D,H,B);var Q=f()[I/4+0],w=f()[I/4+1],_=A(Q,w).slice();return n.__wbindgen_free(Q,w*1),_}finally{n.__wbindgen_add_to_stack_pointer(16)}},Y0=function(k,L,B,Q,w){try{const H=n.__wbindgen_add_to_stack_pointer(-16),V=h(L,n.__wbindgen_malloc),Y=s,z=h(Q,n.__wbindgen_malloc),X=s;n.decode_grayscale_a(H,k,V,Y,B,z,X,w);var _=f()[H/4+0],I=f()[H/4+1],D=A(_,I).slice();return n.__wbindgen_free(_,I*1),D}finally{n.__wbindgen_add_to_stack_pointer(16)}};function m(k){p===i.length&&i.push(i.length+1);const L=p;return p=i[L],i[L]=k,L}const y=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let b=new y("utf-8");const x=typeof b.encodeInto=="function"?function(k,L){return b.encodeInto(k,L)}:function(k,L){const B=b.encode(k);return L.set(B),{read:k.length,written:B.length}};function S(k,L,B){if(B===void 0){const D=b.encode(k),H=L(D.length,1)>>>0;return a().subarray(H,H+D.length).set(D),s=D.length,H}let Q=k.length,w=L(Q,1)>>>0;const _=a();let I=0;for(;I<Q;I++){const D=k.charCodeAt(I);if(D>127)break;_[w+I]=D}if(I!==Q){I!==0&&(k=k.slice(I)),w=B(w,Q,Q=I+k.length*3,1)>>>0;const D=a().subarray(w+I,w+Q),H=x(k,D);I+=H.written}return s=I,w}N0=function(){const k=new Error;return m(k)},V0=function(k,L){const B=o(L).stack,Q=S(B,n.__wbindgen_malloc,n.__wbindgen_realloc),w=s;f()[k/4+1]=w,f()[k/4+0]=Q},R0=function(k,L){let B,Q;try{B=k,Q=L,console.error(l(k,L))}finally{n.__wbindgen_free(B,Q,1)}},U0=function(k){c(k)},H0=function(k,L){throw new Error(l(k,L))},URL=globalThis.URL;const O=yield e({"./webtoon_psd_decoder_bg.js":{__wbg_new_abda76e883ba8a5f:N0,__wbg_stack_658279fe44541cf6:V0,__wbg_error_f851667af71bcfc6:R0,__wbindgen_object_drop_ref:U0,__wbindgen_throw:H0}},t),R=O.memory,Z=O.main_js,ee=O.decode_rgb,re=O.decode_rgba,ae=O.decode_grayscale,ne=O.decode_grayscale_a,J=O.__wbindgen_add_to_stack_pointer,P=O.__wbindgen_malloc,U=O.__wbindgen_free,W=O.__wbindgen_realloc,F=O.__wbindgen_start,E=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:J,__wbindgen_free:U,__wbindgen_malloc:P,__wbindgen_realloc:W,__wbindgen_start:F,decode_grayscale:ae,decode_grayscale_a:ne,decode_rgb:ee,decode_rgba:re,main_js:Z,memory:R},Symbol.toStringTag,{value:"Module"}));z0(E),F()});function jD(t,e,n,i,o,p){return we(this,null,function*(){const v=t*e;if(!(v>0&&Number.isInteger(v)))throw new Error(`Pixel count must be a positive integer, got ${v}`);let c;if(i&&o)c=yield PD(v,n,i,o,p);else if(!o&&!i)c=yield fu(v,n,p);else throw new Error(`Missing ${o?"green":"blue"} channel in RGB image`);return new Uint8ClampedArray(c.buffer,c.byteOffset,c.byteLength)})}function ho(t){switch(t){case ri.RawData:case ri.RleCompressed:return}throw new w0(`Unsupported compression method: ${t}`)}function PD(t,e,n,i,o){return we(this,null,function*(){return yield $0,ho(e.compression),ho(i.compression),ho(e.compression),o&&ho(o.compression),o?X0(t,e.data,e.compression,n.data,n.compression,i.data,i.compression,o.data,o.compression):W0(t,e.data,e.compression,n.data,n.compression,i.data,i.compression)})}function fu(t,e,n){return we(this,null,function*(){return yield $0,ho(e.compression),n&&ho(n.compression),n?Y0(t,e.data,e.compression,n.data,n.compression):G0(t,e.data,e.compression)})}function FD(t){const e=kD(t),{fileHeader:n}=e,i=hu(n.version),o=jO(e.imageResources),p=ED(e.layerAndMaskInformation,i),v=OO(e.imageData,n.depth,n.height,n.channelCount,i);return{fileHeader:n,colorModeData:void 0,imageResources:o,layerAndMaskInfo:p,imageData:v}}function Ss(t){const e=t.readUnicodeString(0),n=t.readIdString(),i=t.read("u32"),o=new Map;for(;o.size<i;){const p=t.readIdString(),v=pu(t);if(o.has(p))throw new lO(`Duplicate descriptor key: ${p}`);o.set(p,v)}return{name:e,classId:n,items:o}}function Rn(t){const e=t.read("u32");if(e!==16)throw new sO(`Invalid descriptor version: ${e}`);const n=Ss(t);return{descriptorVersion:e,descriptor:n}}function pu(t){const e=t.readString(4);switch(e){case pt.Alias:{const n=t.read("u32"),i=t.take(n);return{type:e,data:i}}case pt.Boolean:{const n=!!t.read("u8");return{type:e,value:n}}case pt.Class:case pt.GlobalClass:{const n=t.readUnicodeString(0),i=t.readIdString();return{type:e,name:n,classId:i}}case pt.Descriptor:case pt.GlobalObject:{const n=Ss(t);return{type:e,descriptor:n}}case pt.Double:{const n=t.read("f64");return{type:e,value:n}}case pt.Enumerated:{const n=t.readIdString(),i=t.readIdString();return{type:e,enumType:n,enumValue:i}}case pt.Integer:{const n=t.read("i32");return{type:e,value:n}}case pt.LargeInteger:{const n=t.read("i64");return{type:e,value:n}}case pt.List:{const n=t.read("u32"),i=[];for(;i.length<n;)i.push(pu(t));return{type:e,values:i}}case pt.RawData:{const n=t.read("u32"),i=t.take(n);return{type:e,data:i}}case pt.Reference:{const n=t.read("u32"),i=[];for(;i.length<n;)i.push(RD(t));return{type:e,references:i}}case pt.String:{const n=t.readUnicodeString(0);return{type:e,value:n}}case pt.UnitFloat:{const n=q0(t.readString(4)),i=t.read("f64");return{type:e,unitType:n,value:i}}case pt.ObjectArray:{t.read("u32");const n=t.readUnicodeString(0),i=t.readIdString(),o=t.read("u32"),p=Array.from(Array(o),()=>{const v=t.readIdString(),c=pu(t);return{key:v,value:c}});return{type:e,classObj:{name:n,classId:i},items:p}}case pt.UnitFloats:{const n=q0(t.readString(4)),i=t.read("u32"),o=Array.from(Array(i),()=>t.read("f64"));return{type:e,unitType:n,values:o}}default:throw new aO(`Unexpected descriptor type: ${e}`)}}function RD(t){const e=t.readString(4);switch(e){case wi.Class:{const n=t.readUnicodeString(0),i=t.readIdString();return{type:e,name:n,classId:i}}case wi.Enumerated:{const n=t.readUnicodeString(0),i=t.readIdString(),o=t.readIdString(),p=t.readIdString();return{type:e,name:n,classId:i,typeId:o,enumValue:p}}case wi.Identifier:{const n=t.readString(4);return{type:e,identifier:n}}case wi.Index:{const n=t.read("u32");return{type:e,index:n}}case wi.Name:{const n=t.readUnicodeString(0);return{type:e,name:n}}case wi.Offset:{const n=t.readUnicodeString(0),i=t.readIdString(),o=t.read("u32");return{type:e,name:n,classId:i,offset:o}}case wi.Property:{const n=t.readUnicodeString(0),i=t.readIdString(),o=t.readIdString();return{type:e,name:n,classId:i,keyId:o}}default:throw new hO(`Invalid reference type: ${e}`)}}function q0(t){if(!Object.values(ou).includes(t))throw new dO(`Invalid Unit Float type: ${t}`);return t}var Pt;(function(t){t[t.String=0]="String",t[t.DictBeg=1]="DictBeg",t[t.DictEnd=2]="DictEnd",t[t.ArrBeg=3]="ArrBeg",t[t.ArrEnd=4]="ArrEnd",t[t.Name=5]="Name",t[t.Number=6]="Number",t[t.Boolean=7]="Boolean"})(Pt||(Pt={}));const gu=new Set([0,9,12,32,10,13]),ND=new Set([102,116]),oi={"(":40,")":41,"<":60,">":62,"[":91,"]":93,"/":47,"\\":92},K0=new Set(Object.values(oi)),J0=[];for(let t=0;t<256;t+=1)J0[t]=gu.has(t)||K0.has(t);const zD=new TextDecoder("utf-8");function VD(t){const e=t.position;let n=t.position;for(const i of t.iter()){if(J0[i])break;n+=1}return zD.decode(t.take(n-e))}class UD{constructor(e){this.cursor=Yi.from(e)}tokens(){const e=[];for(;!this.done();){const n=this.cursor.one();if(gu.has(n)){for(;!this.done()&&gu.has(this.cursor.peek());)this.cursor.pass(1);continue}if(K0.has(n)){if(n===oi["("]){e.push({type:Pt.String,value:this.text()});continue}if(n===oi["["]){e.push({type:Pt.ArrBeg});continue}if(n===oi["]"]){e.push({type:Pt.ArrEnd});continue}if(n===oi["<"]){this.cursor.pass(1),e.push({type:Pt.DictBeg});continue}if(n===oi[">"]){this.cursor.pass(1),e.push({type:Pt.DictEnd});continue}if(n===oi["/"]){e.push({type:Pt.Name,value:this.string()});continue}console.assert(!1,"Unhandled delimiter: '%s'",String.fromCharCode(n));continue}this.cursor.unpass(1),ND.has(n)?e.push({type:Pt.Boolean,value:this.boolean()}):e.push({type:Pt.Number,value:this.number()})}return e}done(){return this.cursor.position>=this.cursor.length}text(){const e=this.cursor.peek();if(e===oi[")"])return this.cursor.pass(1),"";const n=e===255||e===254;let i=new TextDecoder("utf-16be");n&&(i=this.textDecoderFromBOM());const o=[],p=this.cursor.clone();for(;p.peek()!==oi[")"];)if(p.pass(1),p.peek()===oi["\\"]){const r=p.position-this.cursor.position;o.push(i.decode(this.cursor.take(r),{stream:!0})),p.pass(2),this.cursor.pass(1),o.push(i.decode(this.cursor.take(1),{stream:!0}))}const v=p.position-this.cursor.position,c=this.cursor.take(v);return o.push(i.decode(c)),this.cursor.pass(1),o.join("")}textDecoderFromBOM(){const e=this.cursor.one(),n=this.cursor.one();if(e===255&&n===254)return new TextDecoder("utf-16le");if(e===254&&n===255)return new TextDecoder("utf-16be");throw new vO(`Unknown BOM value: [${e}, ${n}]`)}string(){return VD(this.cursor)}number(){const e=this.string(),n=Number(e);if(Number.isNaN(n))throw new pO(`parsing '${e}' as Number failed`);return n}boolean(){const e=this.string();if(e==="true")return!0;if(e==="false")return!1;throw new fO(`'${e}' is neither 'true' nor 'false'`)}}const vu=Symbol(Pt[Pt.ArrBeg]),Au=Symbol(Pt[Pt.DictBeg]);class HD{constructor(e){this.tokens=e,this.stack=[]}parse(){this.runParser();const[e]=this.stack;if(typeof e=="object"&&!Array.isArray(e))return e;throw new gO(`EngineData top-level value is not a dict; is ${typeof e}`)}runParser(){for(const e of this.tokens)switch(e.type){case Pt.Name:case Pt.Number:case Pt.Boolean:case Pt.String:this.stack.push(e.value);continue;case Pt.DictBeg:this.stack.push(Au);continue;case Pt.ArrBeg:this.stack.push(vu);continue;case Pt.DictEnd:this.stack.push(this.dict());continue;case Pt.ArrEnd:this.stack.push(this.array().reverse());continue}}dict(){const e={};for(;;){const n=this.stack.pop();if(n===void 0)throw new S0("Stack empty when parsing dict");if(n===Au)return e;if(n===vu)throw new tu("Got ArrBeg while parsing a dict");const i=this.stack.pop();if(typeof i!="string")throw new tu(`Dict key is not Name; is ${typeof i}`);e[i]=n}}array(){const e=[];for(;;){const n=this.stack.pop();if(n===void 0)throw new S0("Stack empty when parsing array");if(n===Au)throw new tu("Got DictBeg while parsing array");if(n===vu)return e;e.push(n)}}}const GD=new Set(["DocumentResources","EngineDict","ResourceDict"]);function YD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function WD(t){let e=!0;if(typeof t!="object"||!t)return!1;for(const n of GD)if(YD(t,n)){const i=t[n];e=e&&typeof i=="object"&&!Array.isArray(i)&&!!i}else return!1;return e}function XD(t){const e=new HD(new UD(t).tokens()).parse();if(WD(e))return e;throw new AO(`Object with keys ${JSON.stringify(Object.keys(e))} is not valid EngineData`)}class Z0{composite(e=!0,n=!0){return we(this,null,function*(){const{red:i,green:o,blue:p,alpha:v}=this.imageData,{width:c,height:r}=this,d=yield jD(c,r,i,o,p,v);if(e===!0)if(n===!0){const u=this.composedOpacity*255;return F0(d,u)}else return F0(d,this.opacity);return d})}}class $D extends Z0{constructor(e,n){super(),this.layerFrame=e,this.parent=n,this.type="Layer"}get name(){return this.layerFrame.layerProperties.name}get width(){return this.layerFrame.width}get height(){return this.layerFrame.height}get top(){return this.layerFrame.layerProperties.top}get left(){return this.layerFrame.layerProperties.left}get opacity(){return this.layerFrame.layerProperties.opacity}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get maskData(){return this.layerFrame.layerProperties.maskData}userMask(){return we(this,null,function*(){const e=this.layerFrame.userMask;if(e)return fu(I0(this.maskData),e)})}realUserMask(){return we(this,null,function*(){const e=this.maskData.realData,n=this.layerFrame.realUserMask;if(!(!e||!n))return fu(I0(e),n)})}get isHidden(){return this.layerFrame.layerProperties.hidden}get isTransparencyLocked(){return this.layerFrame.layerProperties.transparencyLocked}get additionalProperties(){return this.layerFrame.layerProperties.additionalLayerProperties}get text(){return this.layerFrame.layerProperties.text}get textProperties(){return this.layerFrame.layerProperties.textProperties}get imageData(){const{red:e,green:n,blue:i,alpha:o}=this.layerFrame;return{red:e,green:n,blue:i,alpha:o}}}function qD(t){return t.type==="Psd"||t.type==="Group"}function e1(t){if(!qD(t))throw new Ge(`Node (name = '${t.name}', type: '${t.type}') cannot be a parent node`)}class KD{constructor(e,n,i,o,p){this.origin=e,this.left=n,this.top=i,this.right=o,this.bottom=p}}function JD(t){if(t.resource.descriptor){const e=t.resource.descriptor.descriptor.items.get("slices");if(!(e&&e.type===pt.List))throw new ca('Missing key "slices" in slice descriptor');return e.values.reduce((n,i)=>{if(i.type!==pt.Descriptor)throw new ca(`Slice list contains a non-descriptor (type: ${i.type})`);return n.push(ZD(i.descriptor)),n},[])}else throw new ca("No slice descriptor in slice resource block")}function ZD(t){const e=eT(t),n=ao(t,"bounds",pt.Descriptor).descriptor,i=ao(n,"Top ",pt.Integer).value,o=ao(n,"Left",pt.Integer).value,p=ao(n,"Btom",pt.Integer).value,v=ao(n,"Rght",pt.Integer).value;return new KD(e,o,i,v,p)}function eT(t){const e=ao(t,"origin",pt.Enumerated);if(e.enumType!=="ESliceOrigin")throw new ca(`Unexpected enum type for slice origin: got "${e.enumType}"`);switch(e.enumValue){case"layerGenerated":return uo.LayerGenerated;case"userGenerated":return uo.UserGenerated;case"autoGenerated":return uo.AutoGenerated;default:throw new ca(`Unexpected enum value for slice origin: got "${e.enumValue}"`)}}class mu extends Z0{static parse(e){const n=FD(e);return new mu(n)}constructor(e){super(),this.parsingResult=e,this.name="ROOT",this.type="Psd",this.opacity=255,this.composedOpacity=1,this.children=[],this.layers=[],this.guides=[],this.slices=[],this.icc_profile=void 0,this.globalLightAngle=void 0,this.globalLightAltitude=void 0,this.resolutionInfo=void 0,this.additionalLayerProperties={},this.buildTreeStructure(),this.additionalLayerProperties=e.layerAndMaskInfo.globalAdditionalLayerInformation;for(const n of e.imageResources.resources)if(n.resource!==null)switch(n.id){case fn.GridAndGuides:this.guides=n.resource.guides;break;case fn.Slices:this.slices=JD(n);break;case fn.ICCProfile:this.icc_profile=n.resource;break;case fn.GlobalLightAltitude:this.globalLightAltitude=n.resource;break;case fn.GlobalLightAngle:this.globalLightAngle=n.resource;break;case fn.ResolutionInfo:this.resolutionInfo=n.resource;break}}get width(){return this.parsingResult.fileHeader.width}get height(){return this.parsingResult.fileHeader.height}get channelCount(){return this.parsingResult.fileHeader.channelCount}get depth(){return this.parsingResult.fileHeader.depth}get colorMode(){return this.parsingResult.fileHeader.colorMode}get imageData(){const{compression:e,red:n,green:i,blue:o,alpha:p}=this.parsingResult.imageData;return{red:{compression:e,data:n},green:i?{compression:e,data:i}:void 0,blue:o?{compression:e,data:o}:void 0,alpha:p?{compression:e,data:p}:void 0}}buildTreeStructure(){const{groups:e,layers:n,orders:i}=this.parsingResult.layerAndMaskInfo,o=[this];let p=0,v=0;i.forEach(c=>{const r=o[o.length-1];switch(c){case"G":{const d=e[p];e1(r);const u=new j9(d,r);o.push(u),r.children.push(u),p+=1;break}case"L":{const d=n[v];e1(r);const u=new $D(d,r);this.layers.push(u),r.children.push(u),v+=1;break}case"D":o.pop()}}),o.length=0,this.children.forEach(c=>{var r,d;return(d=(r=c).freeze)===null||d===void 0?void 0:d.call(r)}),Object.freeze(this.children)}}class yu{constructor(e,n){this.canvas=e,this.editor=n}insertPSD(e){return new Promise((n,i)=>{Bc({accept:".psd"}).then(o=>{if(console.log("files",o),o&&o.length>0){const p=o[0],v=new FileReader;v.readAsText(p,"UTF-8"),v.onload=()=>we(this,null,function*(){const c=yield p.arrayBuffer(),r=mu.parse(c);console.log(r,"11111");const d=yield B9(r);this.loadJSON(d,e),n("")})}else console.log("sfdsfjdsf ")}).catch(i)})}loadJSON(e,n){this.editor.loadJSON(e,n)}}pe(yu,"pluginName","PsdPlugin"),pe(yu,"apis",["insertPSD"]);const bu=(t,e)=>{const n=[],i=Math.PI*2/t;let o=-Math.PI/2;for(let p=0;p<t;p++){const v=p*i+o;n.push({x:Math.cos(v)*e,y:Math.sin(v)*e})}return n},Cu=t=>{const{left:e=0,top:n=0}=t;return{width:t.getScaledWidth(),height:t.getScaledHeight(),left:e,top:n}},Es=(t,e)=>{wu(t),wu(t,"targetId",_n(e,"id")),wu(t,"targetType",_n(e,"type"))},wu=(t,e="clip",n=!0)=>{E2(t,e,n)},tT=(t,e)=>{const{width:n=0,height:i=0,left:o=0,top:p=0}=Cu(t),v=Math.round(n/2),c=Math.round(i/2),r=new le.fabric.Rect({width:v,height:c,fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:o+n/2,top:p+i/2});return Es(r,t),{clipPath:new le.fabric.Rect({absolutePositioned:!0,width:r.width,height:r.height,originX:"center",originY:"center",left:r.left,top:r.top,inverted:e}),shell:r}},nT=(t,e)=>{const n=t.getCenterPoint(),{width:i}=Cu(t),o=new le.fabric.Ellipse({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:n.x,top:n.y,rx:i/4,ry:i/4});Es(o,t);const p=new le.fabric.Ellipse({absolutePositioned:!0,originX:"center",originY:"center",left:o.left,top:o.top,inverted:e,rx:o.rx,ry:o.ry});return{shell:o,clipPath:p}},iT=(t,e)=>{const n=t.getCenterPoint(),{width:i=0,height:o=0}=Cu(t),p=Math.round(i/2),v=Math.round(o/2),c=new le.fabric.Triangle({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:n.x,top:n.y,width:p,height:v});Es(c,t);const r=new le.fabric.Triangle({absolutePositioned:!0,originX:"center",originY:"center",left:c.left,top:c.top,width:c.width,height:c.height,inverted:e});return{shell:c,clipPath:r}},rT=(t,e)=>{const n=t.getCenterPoint(),i=bu(5,200),o=new le.fabric.Polygon(i,{fill:"rgba(0,0,0,0)",originY:"center",originX:"center",left:n.x,top:n.y});Es(o,t);const p=new le.fabric.Polygon([...i],{absolutePositioned:!0,originX:"center",originY:"center",left:o.left,top:o.top,inverted:e});return{shell:o,clipPath:p}};class xu{constructor(e,n){this.canvas=e,this.editor=n}addClipPathToImage(e){const n=this.canvas.getActiveObjects()[0];if(n&&n.type==="image"){let i=null;const[o,p]=e.split("-"),v=!!p;switch(o){case"polygon":i=rT(n,v);break;case"rect":i=tT(n,v);break;case"circle":i=nT(n,v);break;case"triangle":i=iT(n,v);break}if(i==null)return;const{shell:c,clipPath:r}=i;c.on("moving",()=>{r.setPositionByOrigin(c.getCenterPoint(),"center","center"),n.set("dirty",!0)}),c.on("rotating",()=>{r.set({angle:c.angle}),n.set("dirty",!0)}),c.on("scaling",()=>{r.set({scaleX:c.scaleX,scaleY:c.scaleY}),r.setPositionByOrigin(c.getCenterPoint(),"center","center"),n.set("dirty",!0)}),c.on("deselected",()=>{if(r instanceof le.fabric.Ellipse&&c instanceof le.fabric.Ellipse)r.set({rx:c.getRx(),ry:c.getRy()}),this.correctPosition(n,c,r);else if(c instanceof le.fabric.Polygon){this.correctPosition(n,c,r);const{scaleX:d=1,scaleY:u=1}=r,{scaleX:a=1,scaleY:l=1}=c;r.set("scaleX",d*a),r.set("scaleY",u*l)}else this.correctPosition(n,c,r),r.set("width",c.getScaledWidth()),r.set("height",c.getScaledHeight());n.set("dirty",!0),this.canvas.remove(c),this.canvas.requestRenderAll()}),n.set({clipPath:r}),this.canvas.add(c),this.canvas.setActiveObject(c)}}correctPosition(e,n,i){const o=e.toLocalPoint(n.getCenterPoint(),"center","center"),{scaleX:p=1,scaleY:v=1}=e;i.set({absolutePositioned:!1,left:o.x/p,top:o.y/v,scaleX:1/p,scaleY:1/v})}removeClip(){const e=this.canvas.getActiveObjects()[0];e&&e.type==="image"&&(e.set({clipPath:void 0}),e.set("dirty",!0),this.canvas.requestRenderAll())}}pe(xu,"pluginName","SimpleClipImagePlugin"),pe(xu,"apis",["addClipPathToImage","removeClip"]);var _u={},Is={},pn={};Object.defineProperty(pn,"__esModule",{value:!0});function oT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var aT=function t(e,n){oT(this,t),this.data=e,this.text=n.text||e,this.options=n};pn.default=aT,Object.defineProperty(Is,"__esModule",{value:!0}),Is.CODE39=void 0;var sT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),lT=pn,cT=uT(lT);function uT(t){return t&&t.__esModule?t:{default:t}}function hT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function fT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var pT=function(t){fT(e,t);function e(n,i){return hT(this,e),n=n.toUpperCase(),i.mod43&&(n+=AT(mT(n))),dT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return sT(e,[{key:"encode",value:function(){for(var n=Su("*"),i=0;i<this.data.length;i++)n+=Su(this.data[i])+"0";return n+=Su("*"),{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),e}(cT.default),t1=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],gT=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Su(t){return vT(n1(t))}function vT(t){return gT[t].toString(2)}function AT(t){return t1[t]}function n1(t){return t1.indexOf(t)}function mT(t){for(var e=0,n=0;n<t.length;n++)e+=n1(t[n]);return e=e%43,e}Is.CODE39=pT;var ai={},Eu={},fo={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});var ua;function Iu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i1=Et.SET_A=0,r1=Et.SET_B=1,o1=Et.SET_C=2;Et.SHIFT=98;var yT=Et.START_A=103,bT=Et.START_B=104,CT=Et.START_C=105;Et.MODULO=103,Et.STOP=106,Et.FNC1=207,Et.SET_BY_CODE=(ua={},Iu(ua,yT,i1),Iu(ua,bT,r1),Iu(ua,CT,o1),ua),Et.SWAP={101:i1,100:r1,99:o1},Et.A_START_CHAR="\xD0",Et.B_START_CHAR="\xD1",Et.C_START_CHAR="\xD2",Et.A_CHARS="[\0-_\xC8-\xCF]",Et.B_CHARS="[ -\x7F\xC8-\xCF]",Et.C_CHARS="(\xCF*[0-9]{2}\xCF*)",Et.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(fo,"__esModule",{value:!0});var wT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),xT=pn,_T=ST(xT),Cn=Et;function ST(t){return t&&t.__esModule?t:{default:t}}function ET(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function kT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var BT=function(t){kT(e,t);function e(n,i){ET(this,e);var o=IT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.substring(1),i));return o.bytes=n.split("").map(function(p){return p.charCodeAt(0)}),o}return wT(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var n=this.bytes,i=n.shift()-105,o=Cn.SET_BY_CODE[i];if(o===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&n.unshift(Cn.FNC1);var p=e.next(n,1,o);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(i)+p.result+e.getBar((p.checksum+i)%Cn.MODULO)+e.getBar(Cn.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var n=this.options.ean128||!1;return typeof n=="string"&&(n=n.toLowerCase()==="true"),n}}],[{key:"getBar",value:function(n){return Cn.BARS[n]?Cn.BARS[n].toString():""}},{key:"correctIndex",value:function(n,i){if(i===Cn.SET_A){var o=n.shift();return o<32?o+64:o-32}else return i===Cn.SET_B?n.shift()-32:(n.shift()-48)*10+n.shift()-48}},{key:"next",value:function(n,i,o){if(!n.length)return{result:"",checksum:0};var p=void 0,v=void 0;if(n[0]>=200){v=n.shift()-105;var c=Cn.SWAP[v];c!==void 0?p=e.next(n,i+1,c):((o===Cn.SET_A||o===Cn.SET_B)&&v===Cn.SHIFT&&(n[0]=o===Cn.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]),p=e.next(n,i+1,o))}else v=e.correctIndex(n,o),p=e.next(n,i+1,o);var r=e.getBar(v),d=v*i;return{result:r+p.result,checksum:d+p.checksum}}}]),e}(_T.default);fo.default=BT;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});var Wi=Et,a1=function(t){return t.match(new RegExp("^"+Wi.A_CHARS+"*"))[0].length},s1=function(t){return t.match(new RegExp("^"+Wi.B_CHARS+"*"))[0].length},l1=function(t){return t.match(new RegExp("^"+Wi.C_CHARS+"*"))[0]};function Bu(t,e){var n=e?Wi.A_CHARS:Wi.B_CHARS,i=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+"\xCC"+c1(t.substring(i[1].length));var o=t.match(new RegExp("^"+n+"+"))[0];return o.length===t.length?t:o+String.fromCharCode(e?205:206)+Bu(t.substring(o.length),!e)}function c1(t){var e=l1(t),n=e.length;if(n===t.length)return t;t=t.substring(n);var i=a1(t)>=s1(t);return e+String.fromCharCode(i?206:205)+Bu(t,i)}ku.default=function(t){var e=void 0,n=l1(t).length;if(n>=2)e=Wi.C_START_CHAR+c1(t);else{var i=a1(t)>s1(t);e=(i?Wi.A_START_CHAR:Wi.B_START_CHAR)+Bu(t,i)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(o,p){return"\xCB"+p})},Object.defineProperty(Eu,"__esModule",{value:!0});var OT=fo,DT=u1(OT),TT=ku,MT=u1(TT);function u1(t){return t&&t.__esModule?t:{default:t}}function QT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ou(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function LT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var jT=function(t){LT(e,t);function e(n,i){if(QT(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(n))var o=Ou(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,MT.default)(n),i));else var o=Ou(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return Ou(o)}return e}(DT.default);Eu.default=jT;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});var PT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),FT=fo,RT=NT(FT),h1=Et;function NT(t){return t&&t.__esModule?t:{default:t}}function zT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function UT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var HT=function(t){UT(e,t);function e(n,i){return zT(this,e),VT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,h1.A_START_CHAR+n,i))}return PT(e,[{key:"valid",value:function(){return new RegExp("^"+h1.A_CHARS+"+$").test(this.data)}}]),e}(RT.default);Du.default=HT;var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});var GT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),YT=fo,WT=XT(YT),d1=Et;function XT(t){return t&&t.__esModule?t:{default:t}}function $T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qT(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function KT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var JT=function(t){KT(e,t);function e(n,i){return $T(this,e),qT(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,d1.B_START_CHAR+n,i))}return GT(e,[{key:"valid",value:function(){return new RegExp("^"+d1.B_CHARS+"+$").test(this.data)}}]),e}(WT.default);Tu.default=JT;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});var ZT=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),eM=fo,tM=nM(eM),f1=Et;function nM(t){return t&&t.__esModule?t:{default:t}}function iM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rM(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function oM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var aM=function(t){oM(e,t);function e(n,i){return iM(this,e),rM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,f1.C_START_CHAR+n,i))}return ZT(e,[{key:"valid",value:function(){return new RegExp("^"+f1.C_CHARS+"+$").test(this.data)}}]),e}(tM.default);Mu.default=aM,Object.defineProperty(ai,"__esModule",{value:!0}),ai.CODE128C=ai.CODE128B=ai.CODE128A=ai.CODE128=void 0;var sM=Eu,lM=ks(sM),cM=Du,uM=ks(cM),hM=Tu,dM=ks(hM),fM=Mu,pM=ks(fM);function ks(t){return t&&t.__esModule?t:{default:t}}ai.CODE128=lM.default,ai.CODE128A=uM.default,ai.CODE128B=dM.default,ai.CODE128C=pM.default;var gn={},Qu={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.SIDE_BIN="101",Bn.MIDDLE_BIN="01010",Bn.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},Bn.EAN2_STRUCTURE=["LL","LG","GL","GG"],Bn.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],Bn.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Bs={},Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});var gM=Bn,vM=function(t,e,n){var i=t.split("").map(function(p,v){return gM.BINARIES[e[v]]}).map(function(p,v){return p?p[t[v]]:""});if(n){var o=t.length-1;i=i.map(function(p,v){return v<o?p+n:p})}return i.join("")};Cr.default=vM,Object.defineProperty(Bs,"__esModule",{value:!0});var AM=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),po=Bn,mM=Cr,p1=g1(mM),yM=pn,bM=g1(yM);function g1(t){return t&&t.__esModule?t:{default:t}}function CM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wM(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _M=function(t){xM(e,t);function e(n,i){CM(this,e);var o=wM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.fontSize=!i.flat&&i.fontSize>i.width*10?i.width*10:i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return AM(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(n,i){return this.text.substr(n,i)}},{key:"leftEncode",value:function(n,i){return(0,p1.default)(n,i)}},{key:"rightText",value:function(n,i){return this.text.substr(n,i)}},{key:"rightEncode",value:function(n,i){return(0,p1.default)(n,i)}},{key:"encodeGuarded",value:function(){var n={fontSize:this.fontSize},i={height:this.guardHeight};return[{data:po.SIDE_BIN,options:i},{data:this.leftEncode(),text:this.leftText(),options:n},{data:po.MIDDLE_BIN,options:i},{data:this.rightEncode(),text:this.rightText(),options:n},{data:po.SIDE_BIN,options:i}]}},{key:"encodeFlat",value:function(){var n=[po.SIDE_BIN,this.leftEncode(),po.MIDDLE_BIN,this.rightEncode(),po.SIDE_BIN];return{data:n.join(""),text:this.text}}}]),e}(bM.default);Bs.default=_M,Object.defineProperty(Qu,"__esModule",{value:!0});var SM=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ha=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var p=Object.getPrototypeOf(e);return p===null?void 0:t(p,n,i)}else{if("value"in o)return o.value;var v=o.get;return v===void 0?void 0:v.call(i)}},EM=Bn,IM=Bs,kM=BM(IM);function BM(t){return t&&t.__esModule?t:{default:t}}function OM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DM(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function TM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var v1=function(t){var e=t.substr(0,12).split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i*3:n+i},0);return(10-e%10)%10},MM=function(t){TM(e,t);function e(n,i){OM(this,e),n.search(/^[0-9]{12}$/)!==-1&&(n+=v1(n));var o=DM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.lastChar=i.lastChar,o}return SM(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===v1(this.data)}},{key:"leftText",value:function(){return ha(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var n=this.data.substr(1,6),i=EM.EAN13_STRUCTURE[this.data[0]];return ha(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,i)}},{key:"rightText",value:function(){return ha(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var n=this.data.substr(7,6);return ha(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function(){var n=ha(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(n.push({data:"00"}),n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),n}}]),e}(kM.default);Qu.default=MM;var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});var QM=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Os=function t(e,n,i){e===null&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(o===void 0){var p=Object.getPrototypeOf(e);return p===null?void 0:t(p,n,i)}else{if("value"in o)return o.value;var v=o.get;return v===void 0?void 0:v.call(i)}},LM=Bs,jM=PM(LM);function PM(t){return t&&t.__esModule?t:{default:t}}function FM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function RM(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function NM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var A1=function(t){var e=t.substr(0,7).split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i:n+i*3},0);return(10-e%10)%10},zM=function(t){NM(e,t);function e(n,i){return FM(this,e),n.search(/^[0-9]{7}$/)!==-1&&(n+=A1(n)),RM(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return QM(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===A1(this.data)}},{key:"leftText",value:function(){return Os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var n=this.data.substr(0,4);return Os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function(){return Os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var n=this.data.substr(4,4);return Os(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]),e}(jM.default);Lu.default=zM;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});var VM=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),UM=Bn,HM=Cr,GM=m1(HM),YM=pn,WM=m1(YM);function m1(t){return t&&t.__esModule?t:{default:t}}function XM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $M(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function qM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var KM=function(t){var e=t.split("").map(function(n){return+n}).reduce(function(n,i,o){return o%2?n+i*9:n+i*3},0);return e%10},JM=function(t){qM(e,t);function e(n,i){return XM(this,e),$M(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return VM(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var n=UM.EAN5_STRUCTURE[KM(this.data)];return{data:"1011"+(0,GM.default)(this.data,n,"01"),text:this.text}}}]),e}(WM.default);ju.default=JM;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});var ZM=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),eQ=Bn,tQ=Cr,nQ=y1(tQ),iQ=pn,rQ=y1(iQ);function y1(t){return t&&t.__esModule?t:{default:t}}function oQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aQ(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function sQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lQ=function(t){sQ(e,t);function e(n,i){return oQ(this,e),aQ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return ZM(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var n=eQ.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,nQ.default)(this.data,n,"01"),text:this.text}}}]),e}(rQ.default);Pu.default=lQ;var da={};Object.defineProperty(da,"__esModule",{value:!0});var cQ=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();da.checksum=Fu;var uQ=Cr,go=b1(uQ),hQ=pn,dQ=b1(hQ);function b1(t){return t&&t.__esModule?t:{default:t}}function fQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pQ(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var vQ=function(t){gQ(e,t);function e(n,i){fQ(this,e),n.search(/^[0-9]{11}$/)!==-1&&(n+=Fu(n));var o=pQ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return cQ(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==Fu(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=(0,go.default)(this.data.substr(0,6),"LLLLLL"),n+="01010",n+=(0,go.default)(this.data.substr(6,6),"RRRRRR"),n+="101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101"+(0,go.default)(this.data[0],"L"),options:{height:this.guardHeight}}),n.push({data:(0,go.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),n.push({data:"01010",options:{height:this.guardHeight}}),n.push({data:(0,go.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),n.push({data:(0,go.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),n}}]),e}(dQ.default);function Fu(t){var e=0,n;for(n=1;n<11;n+=2)e+=parseInt(t[n]);for(n=0;n<11;n+=2)e+=parseInt(t[n])*3;return(10-e%10)%10}da.default=vQ;var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});var AQ=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),mQ=Cr,yQ=C1(mQ),bQ=pn,CQ=C1(bQ),wQ=da;function C1(t){return t&&t.__esModule?t:{default:t}}function xQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nu(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function _Q(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var SQ=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],EQ=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],IQ=function(t){_Q(e,t);function e(n,i){xQ(this,e);var o=Nu(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));if(o.isValid=!1,n.search(/^[0-9]{6}$/)!==-1)o.middleDigits=n,o.upcA=w1(n,"0"),o.text=i.text||""+o.upcA[0]+n+o.upcA[o.upcA.length-1],o.isValid=!0;else if(n.search(/^[01][0-9]{7}$/)!==-1)if(o.middleDigits=n.substring(1,n.length-1),o.upcA=w1(o.middleDigits,n[0]),o.upcA[o.upcA.length-1]===n[n.length-1])o.isValid=!0;else return Nu(o);else return Nu(o);return o.displayValue=i.displayValue,i.fontSize>i.width*10?o.fontSize=i.width*10:o.fontSize=i.fontSize,o.guardHeight=i.height+o.fontSize/2+i.textMargin,o}return AQ(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var n="";return n+="101",n+=this.encodeMiddleDigits(),n+="010101",{data:n,text:this.text}}},{key:"guardedEncoding",value:function(){var n=[];return this.displayValue&&n.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),n.push({data:"101",options:{height:this.guardHeight}}),n.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),n.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&n.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),n}},{key:"encodeMiddleDigits",value:function(){var n=this.upcA[0],i=this.upcA[this.upcA.length-1],o=EQ[parseInt(i)][parseInt(n)];return(0,yQ.default)(this.middleDigits,o)}}]),e}(CQ.default);function w1(t,e){for(var n=parseInt(t[t.length-1]),i=SQ[n],o="",p=0,v=0;v<i.length;v++){var c=i[v];c==="X"?o+=t[p++]:o+=c}return o=""+e+o,""+o+(0,wQ.checksum)(o)}Ru.default=IQ,Object.defineProperty(gn,"__esModule",{value:!0}),gn.UPCE=gn.UPC=gn.EAN2=gn.EAN5=gn.EAN8=gn.EAN13=void 0;var kQ=Qu,BQ=vo(kQ),OQ=Lu,DQ=vo(OQ),TQ=ju,MQ=vo(TQ),QQ=Pu,LQ=vo(QQ),jQ=da,PQ=vo(jQ),FQ=Ru,RQ=vo(FQ);function vo(t){return t&&t.__esModule?t:{default:t}}gn.EAN13=BQ.default,gn.EAN8=DQ.default,gn.EAN5=MQ.default,gn.EAN2=LQ.default,gn.UPC=PQ.default,gn.UPCE=RQ.default;var Ao={},Ds={},fa={};Object.defineProperty(fa,"__esModule",{value:!0}),fa.START_BIN="1010",fa.END_BIN="11101",fa.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty(Ds,"__esModule",{value:!0});var NQ=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Ts=fa,zQ=pn,VQ=UQ(zQ);function UQ(t){return t&&t.__esModule?t:{default:t}}function HQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GQ(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function YQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var WQ=function(t){YQ(e,t);function e(){return HQ(this,e),GQ(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return NQ(e,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var n=this,i=this.data.match(/.{2}/g).map(function(o){return n.encodePair(o)}).join("");return{data:Ts.START_BIN+i+Ts.END_BIN,text:this.text}}},{key:"encodePair",value:function(n){var i=Ts.BINARIES[n[1]];return Ts.BINARIES[n[0]].split("").map(function(o,p){return(o==="1"?"111":"1")+(i[p]==="1"?"000":"0")}).join("")}}]),e}(VQ.default);Ds.default=WQ;var zu={};Object.defineProperty(zu,"__esModule",{value:!0});var XQ=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),$Q=Ds,qQ=KQ($Q);function KQ(t){return t&&t.__esModule?t:{default:t}}function JQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZQ(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function eL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var x1=function(t){var e=t.substr(0,13).split("").map(function(n){return parseInt(n,10)}).reduce(function(n,i,o){return n+i*(3-o%2*2)},0);return Math.ceil(e/10)*10-e},tL=function(t){eL(e,t);function e(n,i){return JQ(this,e),n.search(/^[0-9]{13}$/)!==-1&&(n+=x1(n)),ZQ(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return XQ(e,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===x1(this.data)}}]),e}(qQ.default);zu.default=tL,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.ITF14=Ao.ITF=void 0;var nL=Ds,iL=_1(nL),rL=zu,oL=_1(rL);function _1(t){return t&&t.__esModule?t:{default:t}}Ao.ITF=iL.default,Ao.ITF14=oL.default;var On={},wr={};Object.defineProperty(wr,"__esModule",{value:!0});var aL=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),sL=pn,lL=cL(sL);function cL(t){return t&&t.__esModule?t:{default:t}}function uL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function dL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var fL=function(t){dL(e,t);function e(n,i){return uL(this,e),hL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return aL(e,[{key:"encode",value:function(){for(var n="110",i=0;i<this.data.length;i++){var o=parseInt(this.data[i]),p=o.toString(2);p=pL(p,4-p.length);for(var v=0;v<p.length;v++)n+=p[v]=="0"?"100":"110"}return n+="1001",{data:n,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),e}(lL.default);function pL(t,e){for(var n=0;n<e;n++)t="0"+t;return t}wr.default=fL;var Vu={},xr={};Object.defineProperty(xr,"__esModule",{value:!0}),xr.mod10=gL,xr.mod11=vL;function gL(t){for(var e=0,n=0;n<t.length;n++){var i=parseInt(t[n]);(n+t.length)%2===0?e+=i:e+=i*2%10+Math.floor(i*2/10)}return(10-e%10)%10}function vL(t){for(var e=0,n=[2,3,4,5,6,7],i=0;i<t.length;i++){var o=parseInt(t[t.length-1-i]);e+=n[i%n.length]*o}return(11-e%11)%11}Object.defineProperty(Vu,"__esModule",{value:!0});var AL=wr,mL=bL(AL),yL=xr;function bL(t){return t&&t.__esModule?t:{default:t}}function CL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function xL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _L=function(t){xL(e,t);function e(n,i){return CL(this,e),wL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,yL.mod10)(n),i))}return e}(mL.default);Vu.default=_L;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});var SL=wr,EL=kL(SL),IL=xr;function kL(t){return t&&t.__esModule?t:{default:t}}function BL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function DL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var TL=function(t){DL(e,t);function e(n,i){return BL(this,e),OL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n+(0,IL.mod11)(n),i))}return e}(EL.default);Uu.default=TL;var Hu={};Object.defineProperty(Hu,"__esModule",{value:!0});var ML=wr,QL=LL(ML),S1=xr;function LL(t){return t&&t.__esModule?t:{default:t}}function jL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function FL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var RL=function(t){FL(e,t);function e(n,i){return jL(this,e),n+=(0,S1.mod10)(n),n+=(0,S1.mod10)(n),PL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(QL.default);Hu.default=RL;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});var NL=wr,zL=VL(NL),E1=xr;function VL(t){return t&&t.__esModule?t:{default:t}}function UL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HL(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function GL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var YL=function(t){GL(e,t);function e(n,i){return UL(this,e),n+=(0,E1.mod11)(n),n+=(0,E1.mod10)(n),HL(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return e}(zL.default);Gu.default=YL,Object.defineProperty(On,"__esModule",{value:!0}),On.MSI1110=On.MSI1010=On.MSI11=On.MSI10=On.MSI=void 0;var WL=wr,XL=pa(WL),$L=Vu,qL=pa($L),KL=Uu,JL=pa(KL),ZL=Hu,ej=pa(ZL),tj=Gu,nj=pa(tj);function pa(t){return t&&t.__esModule?t:{default:t}}On.MSI=XL.default,On.MSI10=qL.default,On.MSI11=JL.default,On.MSI1010=ej.default,On.MSI1110=nj.default;var Ms={};Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.pharmacode=void 0;var ij=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),rj=pn,oj=aj(rj);function aj(t){return t&&t.__esModule?t:{default:t}}function sj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function cj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var uj=function(t){cj(e,t);function e(n,i){sj(this,e);var o=lj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i));return o.number=parseInt(n,10),o}return ij(e,[{key:"encode",value:function(){for(var n=this.number,i="";!isNaN(n)&&n!=0;)n%2===0?(i="11100"+i,n=(n-2)/2):(i="100"+i,n=(n-1)/2);return i=i.slice(0,-2),{data:i,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}(oj.default);Ms.pharmacode=uj;var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.codabar=void 0;var hj=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),dj=pn,fj=pj(dj);function pj(t){return t&&t.__esModule?t:{default:t}}function gj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vj(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Aj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var mj=function(t){Aj(e,t);function e(n,i){gj(this,e),n.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(n="A"+n+"A");var o=vj(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.toUpperCase(),i));return o.text=o.options.text||o.text.replace(/[A-D]/g,""),o}return hj(e,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var n=[],i=this.getEncodings(),o=0;o<this.data.length;o++)n.push(i[this.data.charAt(o)]),o!==this.data.length-1&&n.push("0");return{text:this.text,data:n.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}(fj.default);Qs.codabar=mj;var Ls={};Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.GenericBarcode=void 0;var yj=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),bj=pn,Cj=wj(bj);function wj(t){return t&&t.__esModule?t:{default:t}}function xj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _j(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Sj(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ej=function(t){Sj(e,t);function e(n,i){return xj(this,e),_j(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,i))}return yj(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}(Cj.default);Ls.GenericBarcode=Ej,Object.defineProperty(_u,"__esModule",{value:!0});var Ij=Is,js=ai,mo=gn,I1=Ao,ga=On,kj=Ms,Bj=Qs,Oj=Ls;_u.default={CODE39:Ij.CODE39,CODE128:js.CODE128,CODE128A:js.CODE128A,CODE128B:js.CODE128B,CODE128C:js.CODE128C,EAN13:mo.EAN13,EAN8:mo.EAN8,EAN5:mo.EAN5,EAN2:mo.EAN2,UPC:mo.UPC,UPCE:mo.UPCE,ITF14:I1.ITF14,ITF:I1.ITF,MSI:ga.MSI,MSI10:ga.MSI10,MSI11:ga.MSI11,MSI1010:ga.MSI1010,MSI1110:ga.MSI1110,pharmacode:kj.pharmacode,codabar:Bj.codabar,GenericBarcode:Oj.GenericBarcode};var yo={};Object.defineProperty(yo,"__esModule",{value:!0});var Dj=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};yo.default=function(t,e){return Dj({},t,e)};var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.default=Tj;function Tj(t){var e=[];function n(i){if(Array.isArray(i))for(var o=0;o<i.length;o++)n(i[o]);else i.text=i.text||"",i.data=i.data||"",e.push(i)}return n(t),e}var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.default=Mj;function Mj(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}var Xu={},$u={},Ps={};Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.default=Qj;function Qj(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e)e.hasOwnProperty(n)&&(n=e[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});var Lj={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};Fs.default=Lj,Object.defineProperty($u,"__esModule",{value:!0});var jj=Ps,Pj=B1(jj),Fj=Fs,k1=B1(Fj);function B1(t){return t&&t.__esModule?t:{default:t}}function Rj(t){var e={};for(var n in k1.default)k1.default.hasOwnProperty(n)&&(t.hasAttribute("jsbarcode-"+n.toLowerCase())&&(e[n]=t.getAttribute("jsbarcode-"+n.toLowerCase())),t.hasAttribute("data-"+n.toLowerCase())&&(e[n]=t.getAttribute("data-"+n.toLowerCase())));return e.value=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value"),e=(0,Pj.default)(e),e}$u.default=Rj;var qu={},Ku={},wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.getTotalWidthOfEncodings=wn.calculateEncodingAttributes=wn.getBarcodePadding=wn.getEncodingHeight=wn.getMaximumHeightOfEncodings=void 0;var Nj=yo,zj=Vj(Nj);function Vj(t){return t&&t.__esModule?t:{default:t}}function O1(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function D1(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center")return Math.floor((t-e)/2);if(n.textAlign=="left")return 0;if(n.textAlign=="right")return Math.floor(t-e)}return 0}function Uj(t,e,n){for(var i=0;i<t.length;i++){var o=t[i],p=(0,zj.default)(e,o.options),v;p.displayValue?v=Yj(o.text,p,n):v=0;var c=o.data.length*p.width;o.width=Math.ceil(Math.max(v,c)),o.height=O1(o,p),o.barcodePadding=D1(v,c,p)}}function Hj(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].width;return e}function Gj(t){for(var e=0,n=0;n<t.length;n++)t[n].height>e&&(e=t[n].height);return e}function Yj(t,e,n){var i;if(n)i=n;else if(typeof document<"u")i=document.createElement("canvas").getContext("2d");else return 0;i.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var o=i.measureText(t);if(!o)return 0;var p=o.width;return p}wn.getMaximumHeightOfEncodings=Gj,wn.getEncodingHeight=O1,wn.getBarcodePadding=D1,wn.calculateEncodingAttributes=Uj,wn.getTotalWidthOfEncodings=Hj,Object.defineProperty(Ku,"__esModule",{value:!0});var Wj=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Xj=yo,$j=qj(Xj),Ju=wn;function qj(t){return t&&t.__esModule?t:{default:t}}function Kj(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Jj=function(){function t(e,n,i){Kj(this,t),this.canvas=e,this.encodings=n,this.options=i}return Wj(t,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var n=(0,$j.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(n,this.encodings[e]),this.drawCanvasText(n,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,Ju.calculateEncodingAttributes)(this.encodings,this.options,e);var n=(0,Ju.getTotalWidthOfEncodings)(this.encodings),i=(0,Ju.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight,this.canvas.height=i,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,n){var i=this.canvas.getContext("2d"),o=n.data,p;e.textPosition=="top"?p=e.marginTop+e.fontSize+e.textMargin:p=e.marginTop,i.fillStyle=e.lineColor;for(var v=0;v<o.length;v++){var c=v*e.width+n.barcodePadding;o[v]==="1"?i.fillRect(c,p,e.width,e.height):o[v]&&i.fillRect(c,p,e.width,e.height*o[v])}}},{key:"drawCanvasText",value:function(e,n){var i=this.canvas.getContext("2d"),o=e.fontOptions+" "+e.fontSize+"px "+e.font;if(e.displayValue){var p,v;e.textPosition=="top"?v=e.marginTop+e.fontSize-e.textMargin:v=e.height+e.textMargin+e.marginTop+e.fontSize,i.font=o,e.textAlign=="left"||n.barcodePadding>0?(p=0,i.textAlign="left"):e.textAlign=="right"?(p=n.width-1,i.textAlign="right"):(p=n.width/2,i.textAlign="center"),i.fillText(n.text,p,v)}}},{key:"moveCanvasDrawing",value:function(e){var n=this.canvas.getContext("2d");n.translate(e.width,0)}},{key:"restoreCanvas",value:function(){var e=this.canvas.getContext("2d");e.restore()}}]),t}();Ku.default=Jj;var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});var Zj=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),eP=yo,tP=nP(eP),eh=wn;function nP(t){return t&&t.__esModule?t:{default:t}}function iP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Rs="http://www.w3.org/2000/svg",rP=function(){function t(e,n,i){iP(this,t),this.svg=e,this.encodings=n,this.options=i,this.document=i.xmlDocument||document}return Zj(t,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var i=this.encodings[n],o=(0,tP.default)(this.options,i.options),p=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(p,o),this.drawSvgBarcode(p,o,i),this.drawSVGText(p,o,i),e+=i.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,eh.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,eh.getTotalWidthOfEncodings)(this.encodings),n=(0,eh.getMaximumHeightOfEncodings)(this.encodings),i=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(i,n),this.options.background&&this.drawRect(0,0,i,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,n,i){var o=i.data,p;n.textPosition=="top"?p=n.fontSize+n.textMargin:p=0;for(var v=0,c=0,r=0;r<o.length;r++)c=r*n.width+i.barcodePadding,o[r]==="1"?v++:v>0&&(this.drawRect(c-n.width*v,p,n.width*v,n.height,e),v=0);v>0&&this.drawRect(c-n.width*(v-1),p,n.width*v,n.height,e)}},{key:"drawSVGText",value:function(e,n,i){var o=this.document.createElementNS(Rs,"text");if(n.displayValue){var p,v;o.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font),n.textPosition=="top"?v=n.fontSize-n.textMargin:v=n.height+n.textMargin+n.fontSize,n.textAlign=="left"||i.barcodePadding>0?(p=0,o.setAttribute("text-anchor","start")):n.textAlign=="right"?(p=i.width-1,o.setAttribute("text-anchor","end")):(p=i.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",p),o.setAttribute("y",v),o.appendChild(this.document.createTextNode(i.text)),e.appendChild(o)}}},{key:"setSvgAttributes",value:function(e,n){var i=this.svg;i.setAttribute("width",e+"px"),i.setAttribute("height",n+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),i.setAttribute("viewBox","0 0 "+e+" "+n),i.setAttribute("xmlns",Rs),i.setAttribute("version","1.1"),i.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,n,i){var o=this.document.createElementNS(Rs,"g");return o.setAttribute("transform","translate("+e+", "+n+")"),i.appendChild(o),o}},{key:"setGroupOptions",value:function(e,n){e.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function(e,n,i,o,p){var v=this.document.createElementNS(Rs,"rect");return v.setAttribute("x",e),v.setAttribute("y",n),v.setAttribute("width",i),v.setAttribute("height",o),p.appendChild(v),v}}]),t}();Zu.default=rP;var th={};Object.defineProperty(th,"__esModule",{value:!0});var oP=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function aP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var sP=function(){function t(e,n,i){aP(this,t),this.object=e,this.encodings=n,this.options=i}return oP(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();th.default=sP,Object.defineProperty(qu,"__esModule",{value:!0});var lP=Ku,cP=nh(lP),uP=Zu,hP=nh(uP),dP=th,fP=nh(dP);function nh(t){return t&&t.__esModule?t:{default:t}}qu.default={CanvasRenderer:cP.default,SVGRenderer:hP.default,ObjectRenderer:fP.default};var bo={};Object.defineProperty(bo,"__esModule",{value:!0});function ih(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rh(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function oh(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var pP=function(t){oh(e,t);function e(n,i){ih(this,e);var o=rh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=n,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return e}(Error),gP=function(t){oh(e,t);function e(){ih(this,e);var n=rh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidElementException",n.message="Not supported type to render on",n}return e}(Error),vP=function(t){oh(e,t);function e(){ih(this,e);var n=rh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="NoElementException",n.message="No element to render on.",n}return e}(Error);bo.InvalidInputException=pP,bo.InvalidElementException=gP,bo.NoElementException=vP,Object.defineProperty(Xu,"__esModule",{value:!0});var AP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mP=$u,ah=T1(mP),yP=qu,va=T1(yP),bP=bo;function T1(t){return t&&t.__esModule?t:{default:t}}function sh(t){if(typeof t=="string")return CP(t);if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++)e.push(sh(t[n]));return e}else{if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLImageElement)return wP(t);if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&t instanceof SVGElement)return{element:t,options:(0,ah.default)(t),renderer:va.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement)return{element:t,options:(0,ah.default)(t),renderer:va.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:va.default.CanvasRenderer};if(t&&(typeof t>"u"?"undefined":AP(t))==="object"&&!t.nodeName)return{element:t,renderer:va.default.ObjectRenderer};throw new bP.InvalidElementException}}function CP(t){var e=document.querySelectorAll(t);if(e.length!==0){for(var n=[],i=0;i<e.length;i++)n.push(sh(e[i]));return n}}function wP(t){var e=document.createElement("canvas");return{element:e,options:(0,ah.default)(t),renderer:va.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",e.toDataURL())}}}Xu.default=sh;var lh={};Object.defineProperty(lh,"__esModule",{value:!0});var xP=function(){function t(e,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var SP=function(){function t(e){_P(this,t),this.api=e}return xP(t,[{key:"handleCatch",value:function(e){if(e.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw e.message;else throw e;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var n=e.apply(void 0,arguments);return this.api._options.valid(!0),n}catch(i){return this.handleCatch(i),this.api}}}]),t}();lh.default=SP;var EP=_u,_r=Xi(EP),IP=yo,Aa=Xi(IP),kP=Yu,M1=Xi(kP),BP=Wu,Q1=Xi(BP),OP=Xu,DP=Xi(OP),TP=Ps,MP=Xi(TP),QP=lh,LP=Xi(QP),L1=bo,jP=Fs,j1=Xi(jP);function Xi(t){return t&&t.__esModule?t:{default:t}}var xi=function(){},Ns=function(t,e,n){var i=new xi;if(typeof t>"u")throw Error("No element to render on was provided.");return i._renderProperties=(0,DP.default)(t),i._encodings=[],i._options=j1.default,i._errorHandler=new LP.default(i),typeof e<"u"&&(n=n||{},n.format||(n.format=R1()),i.options(n)[n.format](e,n).render()),i};Ns.getModule=function(t){return _r.default[t]};for(var P1 in _r.default)_r.default.hasOwnProperty(P1)&&PP(_r.default,P1);function PP(t,e){xi.prototype[e]=xi.prototype[e.toUpperCase()]=xi.prototype[e.toLowerCase()]=function(n,i){var o=this;return o._errorHandler.wrapBarcodeCall(function(){i.text=typeof i.text>"u"?void 0:""+i.text;var p=(0,Aa.default)(o._options,i);p=(0,MP.default)(p);var v=t[e],c=F1(n,v,p);return o._encodings.push(c),o})}}function F1(t,e,n){t=""+t;var i=new e(t,n);if(!i.valid())throw new L1.InvalidInputException(i.constructor.name,t);var o=i.encode();o=(0,M1.default)(o);for(var p=0;p<o.length;p++)o[p].options=(0,Aa.default)(n,o[p].options);return o}function R1(){return _r.default.CODE128?"CODE128":Object.keys(_r.default)[0]}xi.prototype.options=function(t){return this._options=(0,Aa.default)(this._options,t),this},xi.prototype.blank=function(t){var e=new Array(t+1).join("0");return this._encodings.push({data:e}),this},xi.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var t;for(var e in this._renderProperties){t=this._renderProperties[e];var n=(0,Aa.default)(this._options,t.options);n.format=="auto"&&(n.format=R1()),this._errorHandler.wrapBarcodeCall(function(){var i=n.value,o=_r.default[n.format.toUpperCase()],p=F1(i,o,n);ch(t,p,n)})}}},xi.prototype.render=function(){if(!this._renderProperties)throw new L1.NoElementException;if(Array.isArray(this._renderProperties))for(var t=0;t<this._renderProperties.length;t++)ch(this._renderProperties[t],this._encodings,this._options);else ch(this._renderProperties,this._encodings,this._options);return this},xi.prototype._defaults=j1.default;function ch(t,e,n){e=(0,M1.default)(e);for(var i=0;i<e.length;i++)e[i].options=(0,Aa.default)(n,e[i].options),(0,Q1.default)(e[i].options);(0,Q1.default)(n);var o=t.renderer,p=new o(t.element,e,n);p.render(),t.afterRender&&t.afterRender()}typeof window<"u"&&(window.JsBarcode=Ns),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(t,e){var n=[];return jQuery(this).each(function(){n.push(this)}),Ns(n,t,e)});var FP=Ns;const RP=Ma(FP);var N1=(t=>(t.CODE128="CODE128",t.EAN8="EAN8",t.EAN13="EAN13",t.ITF14="ITF14",t.codabar="codabar",t.pharmacode="pharmacode",t))(N1||{});class uh{constructor(e,n){this.canvas=e,this.editor=n}hookTransform(e){return we(this,null,function*(){if(e.extensionType==="barcode"){const n=yield this._getBase64Str(e.extension);e.src=n}})}_getBase64Str(e){const n=document.createElement("canvas");return RP(n,e.value,ve({},e)),n.toDataURL("image/png",1)}_defaultBarcodeOption(){return{value:"123456",format:"CODE128",text:"hi kuaitu",textAlign:"left",textPosition:"bottom",fontSize:12,background:"#fff",lineColor:"#000",displayValue:!1}}addBarcode(){const e=this._defaultBarcodeOption(),n=this._getBase64Str(JSON.parse(JSON.stringify(e)));le.fabric.Image.fromURL(n,i=>{i.set({extensionType:"barcode",extension:e}),i.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(i),this.canvas.setActiveObject(i),this.editor.position("center")},{crossOrigin:"anonymous"})}setBarcode(e){try{const n=this._getBase64Str(e),i=this.canvas.getActiveObjects()[0];le.fabric.Image.fromURL(n,o=>{o.set({left:i.left,top:i.top,extensionType:"barcode",extension:ve({},e)}),o.scaleToWidth(i.getScaledWidth()),this.editor.del(),this.canvas.add(o),this.canvas.setActiveObject(o)},{crossOrigin:"anonymous"})}catch(n){console.log(n)}}getBarcodeTypes(){return Object.values(N1)}destroy(){console.log("pluginDestroy")}}pe(uh,"pluginName","BarCodePlugin"),pe(uh,"apis",["addBarcode","setBarcode","getBarcodeTypes"]);var z1={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(self,function(){return(()=>{var n={192:(p,v)=>{var c,r,d=function(){var u=function(ne,J){var P=ne,U=f[J],W=null,F=0,E=null,k=[],L={},B=function(z,X){W=function(N){for(var j=new Array(N),q=0;q<N;q+=1){j[q]=new Array(N);for(var te=0;te<N;te+=1)j[q][te]=null}return j}(F=4*P+17),Q(0,0),Q(F-7,0),Q(0,F-7),_(),w(),D(z,X),P>=7&&I(z),E==null&&(E=V(P,U,k)),H(E,X)},Q=function(z,X){for(var N=-1;N<=7;N+=1)if(!(z+N<=-1||F<=z+N))for(var j=-1;j<=7;j+=1)X+j<=-1||F<=X+j||(W[z+N][X+j]=0<=N&&N<=6&&(j==0||j==6)||0<=j&&j<=6&&(N==0||N==6)||2<=N&&N<=4&&2<=j&&j<=4)},w=function(){for(var z=8;z<F-8;z+=1)W[z][6]==null&&(W[z][6]=z%2==0);for(var X=8;X<F-8;X+=1)W[6][X]==null&&(W[6][X]=X%2==0)},_=function(){for(var z=A.getPatternPosition(P),X=0;X<z.length;X+=1)for(var N=0;N<z.length;N+=1){var j=z[X],q=z[N];if(W[j][q]==null)for(var te=-2;te<=2;te+=1)for(var oe=-2;oe<=2;oe+=1)W[j+te][q+oe]=te==-2||te==2||oe==-2||oe==2||te==0&&oe==0}},I=function(z){for(var X=A.getBCHTypeNumber(P),N=0;N<18;N+=1){var j=!z&&(X>>N&1)==1;W[Math.floor(N/3)][N%3+F-8-3]=j}for(N=0;N<18;N+=1)j=!z&&(X>>N&1)==1,W[N%3+F-8-3][Math.floor(N/3)]=j},D=function(z,X){for(var N=U<<3|X,j=A.getBCHTypeInfo(N),q=0;q<15;q+=1){var te=!z&&(j>>q&1)==1;q<6?W[q][8]=te:q<8?W[q+1][8]=te:W[F-15+q][8]=te}for(q=0;q<15;q+=1)te=!z&&(j>>q&1)==1,q<8?W[8][F-q-1]=te:q<9?W[8][15-q-1+1]=te:W[8][15-q-1]=te;W[F-8][8]=!z},H=function(z,X){for(var N=-1,j=F-1,q=7,te=0,oe=A.getMaskFunction(X),ie=F-1;ie>0;ie-=2)for(ie==6&&(ie-=1);;){for(var fe=0;fe<2;fe+=1)if(W[j][ie-fe]==null){var Ae=!1;te<z.length&&(Ae=(z[te]>>>q&1)==1),oe(j,ie-fe)&&(Ae=!Ae),W[j][ie-fe]=Ae,(q-=1)==-1&&(te+=1,q=7)}if((j+=N)<0||F<=j){j-=N,N=-N;break}}},V=function(z,X,N){for(var j=b.getRSBlocks(z,X),q=x(),te=0;te<N.length;te+=1){var oe=N[te];q.put(oe.getMode(),4),q.put(oe.getLength(),A.getLengthInBits(oe.getMode(),z)),oe.write(q)}var ie=0;for(te=0;te<j.length;te+=1)ie+=j[te].dataCount;if(q.getLengthInBits()>8*ie)throw"code length overflow. ("+q.getLengthInBits()+">"+8*ie+")";for(q.getLengthInBits()+4<=8*ie&&q.put(0,4);q.getLengthInBits()%8!=0;)q.putBit(!1);for(;!(q.getLengthInBits()>=8*ie||(q.put(236,8),q.getLengthInBits()>=8*ie));)q.put(17,8);return function(fe,Ae){for(var me=0,he=0,ye=0,xe=new Array(Ae.length),Ee=new Array(Ae.length),ke=0;ke<Ae.length;ke+=1){var Fe=Ae[ke].dataCount,Xe=Ae[ke].totalCount-Fe;he=Math.max(he,Fe),ye=Math.max(ye,Xe),xe[ke]=new Array(Fe);for(var Oe=0;Oe<xe[ke].length;Oe+=1)xe[ke][Oe]=255&fe.getBuffer()[Oe+me];me+=Fe;var ct=A.getErrorCorrectPolynomial(Xe),Ke=y(xe[ke],ct.getLength()-1).mod(ct);for(Ee[ke]=new Array(ct.getLength()-1),Oe=0;Oe<Ee[ke].length;Oe+=1){var nt=Oe+Ke.getLength()-Ee[ke].length;Ee[ke][Oe]=nt>=0?Ke.getAt(nt):0}}var Bt=0;for(Oe=0;Oe<Ae.length;Oe+=1)Bt+=Ae[Oe].totalCount;var wt=new Array(Bt),Gt=0;for(Oe=0;Oe<he;Oe+=1)for(ke=0;ke<Ae.length;ke+=1)Oe<xe[ke].length&&(wt[Gt]=xe[ke][Oe],Gt+=1);for(Oe=0;Oe<ye;Oe+=1)for(ke=0;ke<Ae.length;ke+=1)Oe<Ee[ke].length&&(wt[Gt]=Ee[ke][Oe],Gt+=1);return wt}(q,j)};L.addData=function(z,X){var N=null;switch(X=X||"Byte"){case"Numeric":N=S(z);break;case"Alphanumeric":N=O(z);break;case"Byte":N=R(z);break;case"Kanji":N=Z(z);break;default:throw"mode:"+X}k.push(N),E=null},L.isDark=function(z,X){if(z<0||F<=z||X<0||F<=X)throw z+","+X;return W[z][X]},L.getModuleCount=function(){return F},L.make=function(){if(P<1){for(var z=1;z<40;z++){for(var X=b.getRSBlocks(z,U),N=x(),j=0;j<k.length;j++){var q=k[j];N.put(q.getMode(),4),N.put(q.getLength(),A.getLengthInBits(q.getMode(),z)),q.write(N)}var te=0;for(j=0;j<X.length;j++)te+=X[j].dataCount;if(N.getLengthInBits()<=8*te)break}P=z}B(!1,function(){for(var oe=0,ie=0,fe=0;fe<8;fe+=1){B(!0,fe);var Ae=A.getLostPoint(L);(fe==0||oe>Ae)&&(oe=Ae,ie=fe)}return ie}())},L.createTableTag=function(z,X){z=z||2;var N="";N+='<table style="',N+=" border-width: 0px; border-style: none;",N+=" border-collapse: collapse;",N+=" padding: 0px; margin: "+(X=X===void 0?4*z:X)+"px;",N+='">',N+="<tbody>";for(var j=0;j<L.getModuleCount();j+=1){N+="<tr>";for(var q=0;q<L.getModuleCount();q+=1)N+='<td style="',N+=" border-width: 0px; border-style: none;",N+=" border-collapse: collapse;",N+=" padding: 0px; margin: 0px;",N+=" width: "+z+"px;",N+=" height: "+z+"px;",N+=" background-color: ",N+=L.isDark(j,q)?"#000000":"#ffffff",N+=";",N+='"/>';N+="</tr>"}return(N+="</tbody>")+"</table>"},L.createSvgTag=function(z,X,N,j){var q={};typeof arguments[0]=="object"&&(z=(q=arguments[0]).cellSize,X=q.margin,N=q.alt,j=q.title),z=z||2,X=X===void 0?4*z:X,(N=typeof N=="string"?{text:N}:N||{}).text=N.text||null,N.id=N.text?N.id||"qrcode-description":null,(j=typeof j=="string"?{text:j}:j||{}).text=j.text||null,j.id=j.text?j.id||"qrcode-title":null;var te,oe,ie,fe,Ae=L.getModuleCount()*z+2*X,me="";for(fe="l"+z+",0 0,"+z+" -"+z+",0 0,-"+z+"z ",me+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',me+=q.scalable?"":' width="'+Ae+'px" height="'+Ae+'px"',me+=' viewBox="0 0 '+Ae+" "+Ae+'" ',me+=' preserveAspectRatio="xMinYMin meet"',me+=j.text||N.text?' role="img" aria-labelledby="'+Y([j.id,N.id].join(" ").trim())+'"':"",me+=">",me+=j.text?'<title id="'+Y(j.id)+'">'+Y(j.text)+"</title>":"",me+=N.text?'<description id="'+Y(N.id)+'">'+Y(N.text)+"</description>":"",me+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',me+='<path d="',oe=0;oe<L.getModuleCount();oe+=1)for(ie=oe*z+X,te=0;te<L.getModuleCount();te+=1)L.isDark(oe,te)&&(me+="M"+(te*z+X)+","+ie+fe);return(me+='" stroke="transparent" fill="black"/>')+"</svg>"},L.createDataURL=function(z,X){z=z||2,X=X===void 0?4*z:X;var N=L.getModuleCount()*z+2*X,j=X,q=N-X;return ae(N,N,function(te,oe){if(j<=te&&te<q&&j<=oe&&oe<q){var ie=Math.floor((te-j)/z),fe=Math.floor((oe-j)/z);return L.isDark(fe,ie)?0:1}return 1})},L.createImgTag=function(z,X,N){z=z||2,X=X===void 0?4*z:X;var j=L.getModuleCount()*z+2*X,q="";return q+="<img",q+=' src="',q+=L.createDataURL(z,X),q+='"',q+=' width="',q+=j,q+='"',q+=' height="',q+=j,q+='"',N&&(q+=' alt="',q+=Y(N),q+='"'),q+"/>"};var Y=function(z){for(var X="",N=0;N<z.length;N+=1){var j=z.charAt(N);switch(j){case"<":X+="&lt;";break;case">":X+="&gt;";break;case"&":X+="&amp;";break;case'"':X+="&quot;";break;default:X+=j}}return X};return L.createASCII=function(z,X){if((z=z||1)<2)return function(xe){xe=xe===void 0?2:xe;var Ee,ke,Fe,Xe,Oe,ct=1*L.getModuleCount()+2*xe,Ke=xe,nt=ct-xe,Bt={"\u2588\u2588":"\u2588","\u2588 ":"\u2580"," \u2588":"\u2584","  ":" "},wt={"\u2588\u2588":"\u2580","\u2588 ":"\u2580"," \u2588":" ","  ":" "},Gt="";for(Ee=0;Ee<ct;Ee+=2){for(Fe=Math.floor((Ee-Ke)/1),Xe=Math.floor((Ee+1-Ke)/1),ke=0;ke<ct;ke+=1)Oe="\u2588",Ke<=ke&&ke<nt&&Ke<=Ee&&Ee<nt&&L.isDark(Fe,Math.floor((ke-Ke)/1))&&(Oe=" "),Ke<=ke&&ke<nt&&Ke<=Ee+1&&Ee+1<nt&&L.isDark(Xe,Math.floor((ke-Ke)/1))?Oe+=" ":Oe+="\u2588",Gt+=xe<1&&Ee+1>=nt?wt[Oe]:Bt[Oe];Gt+=`
`}return ct%2&&xe>0?Gt.substring(0,Gt.length-ct-1)+Array(ct+1).join("\u2580"):Gt.substring(0,Gt.length-1)}(X);z-=1,X=X===void 0?2*z:X;var N,j,q,te,oe=L.getModuleCount()*z+2*X,ie=X,fe=oe-X,Ae=Array(z+1).join("\u2588\u2588"),me=Array(z+1).join("  "),he="",ye="";for(N=0;N<oe;N+=1){for(q=Math.floor((N-ie)/z),ye="",j=0;j<oe;j+=1)te=1,ie<=j&&j<fe&&ie<=N&&N<fe&&L.isDark(q,Math.floor((j-ie)/z))&&(te=0),ye+=te?Ae:me;for(q=0;q<z;q+=1)he+=ye+`
`}return he.substring(0,he.length-1)},L.renderTo2dContext=function(z,X){X=X||2;for(var N=L.getModuleCount(),j=0;j<N;j++)for(var q=0;q<N;q++)z.fillStyle=L.isDark(j,q)?"black":"white",z.fillRect(j*X,q*X,X,X)},L};u.stringToBytes=(u.stringToBytesFuncs={default:function(ne){for(var J=[],P=0;P<ne.length;P+=1){var U=ne.charCodeAt(P);J.push(255&U)}return J}}).default,u.createStringToBytes=function(ne,J){var P=function(){for(var W=re(ne),F=function(){var w=W.read();if(w==-1)throw"eof";return w},E=0,k={};;){var L=W.read();if(L==-1)break;var B=F(),Q=F()<<8|F();k[String.fromCharCode(L<<8|B)]=Q,E+=1}if(E!=J)throw E+" != "+J;return k}(),U=63;return function(W){for(var F=[],E=0;E<W.length;E+=1){var k=W.charCodeAt(E);if(k<128)F.push(k);else{var L=P[W.charAt(E)];typeof L=="number"?(255&L)==L?F.push(L):(F.push(L>>>8),F.push(255&L)):F.push(U)}}return F}};var a,l,s,h,g,f={L:1,M:0,Q:3,H:2},A=(a=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],l=1335,s=7973,g=function(ne){for(var J=0;ne!=0;)J+=1,ne>>>=1;return J},(h={}).getBCHTypeInfo=function(ne){for(var J=ne<<10;g(J)-g(l)>=0;)J^=l<<g(J)-g(l);return 21522^(ne<<10|J)},h.getBCHTypeNumber=function(ne){for(var J=ne<<12;g(J)-g(s)>=0;)J^=s<<g(J)-g(s);return ne<<12|J},h.getPatternPosition=function(ne){return a[ne-1]},h.getMaskFunction=function(ne){switch(ne){case 0:return function(J,P){return(J+P)%2==0};case 1:return function(J,P){return J%2==0};case 2:return function(J,P){return P%3==0};case 3:return function(J,P){return(J+P)%3==0};case 4:return function(J,P){return(Math.floor(J/2)+Math.floor(P/3))%2==0};case 5:return function(J,P){return J*P%2+J*P%3==0};case 6:return function(J,P){return(J*P%2+J*P%3)%2==0};case 7:return function(J,P){return(J*P%3+(J+P)%2)%2==0};default:throw"bad maskPattern:"+ne}},h.getErrorCorrectPolynomial=function(ne){for(var J=y([1],0),P=0;P<ne;P+=1)J=J.multiply(y([1,m.gexp(P)],0));return J},h.getLengthInBits=function(ne,J){if(1<=J&&J<10)switch(ne){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+ne}else if(J<27)switch(ne){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+ne}else{if(!(J<41))throw"type:"+J;switch(ne){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+ne}}},h.getLostPoint=function(ne){for(var J=ne.getModuleCount(),P=0,U=0;U<J;U+=1)for(var W=0;W<J;W+=1){for(var F=0,E=ne.isDark(U,W),k=-1;k<=1;k+=1)if(!(U+k<0||J<=U+k))for(var L=-1;L<=1;L+=1)W+L<0||J<=W+L||k==0&&L==0||E==ne.isDark(U+k,W+L)&&(F+=1);F>5&&(P+=3+F-5)}for(U=0;U<J-1;U+=1)for(W=0;W<J-1;W+=1){var B=0;ne.isDark(U,W)&&(B+=1),ne.isDark(U+1,W)&&(B+=1),ne.isDark(U,W+1)&&(B+=1),ne.isDark(U+1,W+1)&&(B+=1),B!=0&&B!=4||(P+=3)}for(U=0;U<J;U+=1)for(W=0;W<J-6;W+=1)ne.isDark(U,W)&&!ne.isDark(U,W+1)&&ne.isDark(U,W+2)&&ne.isDark(U,W+3)&&ne.isDark(U,W+4)&&!ne.isDark(U,W+5)&&ne.isDark(U,W+6)&&(P+=40);for(W=0;W<J;W+=1)for(U=0;U<J-6;U+=1)ne.isDark(U,W)&&!ne.isDark(U+1,W)&&ne.isDark(U+2,W)&&ne.isDark(U+3,W)&&ne.isDark(U+4,W)&&!ne.isDark(U+5,W)&&ne.isDark(U+6,W)&&(P+=40);var Q=0;for(W=0;W<J;W+=1)for(U=0;U<J;U+=1)ne.isDark(U,W)&&(Q+=1);return P+Math.abs(100*Q/J/J-50)/5*10},h),m=function(){for(var ne=new Array(256),J=new Array(256),P=0;P<8;P+=1)ne[P]=1<<P;for(P=8;P<256;P+=1)ne[P]=ne[P-4]^ne[P-5]^ne[P-6]^ne[P-8];for(P=0;P<255;P+=1)J[ne[P]]=P;return{glog:function(U){if(U<1)throw"glog("+U+")";return J[U]},gexp:function(U){for(;U<0;)U+=255;for(;U>=256;)U-=255;return ne[U]}}}();function y(ne,J){if(ne.length===void 0)throw ne.length+"/"+J;var P=function(){for(var W=0;W<ne.length&&ne[W]==0;)W+=1;for(var F=new Array(ne.length-W+J),E=0;E<ne.length-W;E+=1)F[E]=ne[E+W];return F}(),U={getAt:function(W){return P[W]},getLength:function(){return P.length},multiply:function(W){for(var F=new Array(U.getLength()+W.getLength()-1),E=0;E<U.getLength();E+=1)for(var k=0;k<W.getLength();k+=1)F[E+k]^=m.gexp(m.glog(U.getAt(E))+m.glog(W.getAt(k)));return y(F,0)},mod:function(W){if(U.getLength()-W.getLength()<0)return U;for(var F=m.glog(U.getAt(0))-m.glog(W.getAt(0)),E=new Array(U.getLength()),k=0;k<U.getLength();k+=1)E[k]=U.getAt(k);for(k=0;k<W.getLength();k+=1)E[k]^=m.gexp(m.glog(W.getAt(k))+F);return y(E,0).mod(W)}};return U}var b=function(){var ne=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],J=function(U,W){var F={};return F.totalCount=U,F.dataCount=W,F},P={getRSBlocks:function(U,W){var F=function(I,D){switch(D){case f.L:return ne[4*(I-1)+0];case f.M:return ne[4*(I-1)+1];case f.Q:return ne[4*(I-1)+2];case f.H:return ne[4*(I-1)+3];default:return}}(U,W);if(F===void 0)throw"bad rs block @ typeNumber:"+U+"/errorCorrectionLevel:"+W;for(var E=F.length/3,k=[],L=0;L<E;L+=1)for(var B=F[3*L+0],Q=F[3*L+1],w=F[3*L+2],_=0;_<B;_+=1)k.push(J(Q,w));return k}};return P}(),x=function(){var ne=[],J=0,P={getBuffer:function(){return ne},getAt:function(U){var W=Math.floor(U/8);return(ne[W]>>>7-U%8&1)==1},put:function(U,W){for(var F=0;F<W;F+=1)P.putBit((U>>>W-F-1&1)==1)},getLengthInBits:function(){return J},putBit:function(U){var W=Math.floor(J/8);ne.length<=W&&ne.push(0),U&&(ne[W]|=128>>>J%8),J+=1}};return P},S=function(ne){var J=ne,P={getMode:function(){return 1},getLength:function(F){return J.length},write:function(F){for(var E=J,k=0;k+2<E.length;)F.put(U(E.substring(k,k+3)),10),k+=3;k<E.length&&(E.length-k==1?F.put(U(E.substring(k,k+1)),4):E.length-k==2&&F.put(U(E.substring(k,k+2)),7))}},U=function(F){for(var E=0,k=0;k<F.length;k+=1)E=10*E+W(F.charAt(k));return E},W=function(F){if("0"<=F&&F<="9")return F.charCodeAt(0)-48;throw"illegal char :"+F};return P},O=function(ne){var J=ne,P={getMode:function(){return 2},getLength:function(W){return J.length},write:function(W){for(var F=J,E=0;E+1<F.length;)W.put(45*U(F.charAt(E))+U(F.charAt(E+1)),11),E+=2;E<F.length&&W.put(U(F.charAt(E)),6)}},U=function(W){if("0"<=W&&W<="9")return W.charCodeAt(0)-48;if("A"<=W&&W<="Z")return W.charCodeAt(0)-65+10;switch(W){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+W}};return P},R=function(ne){var J=u.stringToBytes(ne);return{getMode:function(){return 4},getLength:function(P){return J.length},write:function(P){for(var U=0;U<J.length;U+=1)P.put(J[U],8)}}},Z=function(ne){var J=u.stringToBytesFuncs.SJIS;if(!J)throw"sjis not supported.";(function(U,W){var F=J("\u53CB");if(F.length!=2||(F[0]<<8|F[1])!=38726)throw"sjis not supported."})();var P=J(ne);return{getMode:function(){return 8},getLength:function(U){return~~(P.length/2)},write:function(U){for(var W=P,F=0;F+1<W.length;){var E=(255&W[F])<<8|255&W[F+1];if(33088<=E&&E<=40956)E-=33088;else{if(!(57408<=E&&E<=60351))throw"illegal char at "+(F+1)+"/"+E;E-=49472}E=192*(E>>>8&255)+(255&E),U.put(E,13),F+=2}if(F<W.length)throw"illegal char at "+(F+1)}}},ee=function(){var ne=[],J={writeByte:function(P){ne.push(255&P)},writeShort:function(P){J.writeByte(P),J.writeByte(P>>>8)},writeBytes:function(P,U,W){U=U||0,W=W||P.length;for(var F=0;F<W;F+=1)J.writeByte(P[F+U])},writeString:function(P){for(var U=0;U<P.length;U+=1)J.writeByte(P.charCodeAt(U))},toByteArray:function(){return ne},toString:function(){var P="";P+="[";for(var U=0;U<ne.length;U+=1)U>0&&(P+=","),P+=ne[U];return P+"]"}};return J},re=function(ne){var J=ne,P=0,U=0,W=0,F={read:function(){for(;W<8;){if(P>=J.length){if(W==0)return-1;throw"unexpected end of file./"+W}var k=J.charAt(P);if(P+=1,k=="=")return W=0,-1;k.match(/^\s$/)||(U=U<<6|E(k.charCodeAt(0)),W+=6)}var L=U>>>W-8&255;return W-=8,L}},E=function(k){if(65<=k&&k<=90)return k-65;if(97<=k&&k<=122)return k-97+26;if(48<=k&&k<=57)return k-48+52;if(k==43)return 62;if(k==47)return 63;throw"c:"+k};return F},ae=function(ne,J,P){for(var U=function(Q,w){var _=Q,I=w,D=new Array(Q*w),H={setPixel:function(z,X,N){D[X*_+z]=N},write:function(z){z.writeString("GIF87a"),z.writeShort(_),z.writeShort(I),z.writeByte(128),z.writeByte(0),z.writeByte(0),z.writeByte(0),z.writeByte(0),z.writeByte(0),z.writeByte(255),z.writeByte(255),z.writeByte(255),z.writeString(","),z.writeShort(0),z.writeShort(0),z.writeShort(_),z.writeShort(I),z.writeByte(0);var X=V(2);z.writeByte(2);for(var N=0;X.length-N>255;)z.writeByte(255),z.writeBytes(X,N,255),N+=255;z.writeByte(X.length-N),z.writeBytes(X,N,X.length-N),z.writeByte(0),z.writeString(";")}},V=function(z){for(var X=1<<z,N=1+(1<<z),j=z+1,q=Y(),te=0;te<X;te+=1)q.add(String.fromCharCode(te));q.add(String.fromCharCode(X)),q.add(String.fromCharCode(N));var oe,ie,fe,Ae=ee(),me=(oe=Ae,ie=0,fe=0,{write:function(Ee,ke){if(Ee>>>ke)throw"length over";for(;ie+ke>=8;)oe.writeByte(255&(Ee<<ie|fe)),ke-=8-ie,Ee>>>=8-ie,fe=0,ie=0;fe|=Ee<<ie,ie+=ke},flush:function(){ie>0&&oe.writeByte(fe)}});me.write(X,j);var he=0,ye=String.fromCharCode(D[he]);for(he+=1;he<D.length;){var xe=String.fromCharCode(D[he]);he+=1,q.contains(ye+xe)?ye+=xe:(me.write(q.indexOf(ye),j),q.size()<4095&&(q.size()==1<<j&&(j+=1),q.add(ye+xe)),ye=xe)}return me.write(q.indexOf(ye),j),me.write(N,j),me.flush(),Ae.toByteArray()},Y=function(){var z={},X=0,N={add:function(j){if(N.contains(j))throw"dup key:"+j;z[j]=X,X+=1},size:function(){return X},indexOf:function(j){return z[j]},contains:function(j){return z[j]!==void 0}};return N};return H}(ne,J),W=0;W<J;W+=1)for(var F=0;F<ne;F+=1)U.setPixel(F,W,P(F,W));var E=ee();U.write(E);for(var k=function(){var Q=0,w=0,_=0,I="",D={},H=function(Y){I+=String.fromCharCode(V(63&Y))},V=function(Y){if(!(Y<0)){if(Y<26)return 65+Y;if(Y<52)return Y-26+97;if(Y<62)return Y-52+48;if(Y==62)return 43;if(Y==63)return 47}throw"n:"+Y};return D.writeByte=function(Y){for(Q=Q<<8|255&Y,w+=8,_+=1;w>=6;)H(Q>>>w-6),w-=6},D.flush=function(){if(w>0&&(H(Q<<6-w),Q=0,w=0),_%3!=0)for(var Y=3-_%3,z=0;z<Y;z+=1)I+="="},D.toString=function(){return I},D}(),L=E.toByteArray(),B=0;B<L.length;B+=1)k.writeByte(L[B]);return k.flush(),"data:image/gif;base64,"+k};return u}();d.stringToBytesFuncs["UTF-8"]=function(u){return function(a){for(var l=[],s=0;s<a.length;s++){var h=a.charCodeAt(s);h<128?l.push(h):h<2048?l.push(192|h>>6,128|63&h):h<55296||h>=57344?l.push(224|h>>12,128|h>>6&63,128|63&h):(s++,h=65536+((1023&h)<<10|1023&a.charCodeAt(s)),l.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|63&h))}return l}(u)},(r=typeof(c=function(){return d})=="function"?c.apply(v,[]):c)===void 0||(p.exports=r)},676:(p,v,c)=>{c.d(v,{default:()=>B});var r=function(){return(r=Object.assign||function(Q){for(var w,_=1,I=arguments.length;_<I;_++)for(var D in w=arguments[_])Object.prototype.hasOwnProperty.call(w,D)&&(Q[D]=w[D]);return Q}).apply(this,arguments)},d=function(){for(var Q=0,w=0,_=arguments.length;w<_;w++)Q+=arguments[w].length;var I=Array(Q),D=0;for(w=0;w<_;w++)for(var H=arguments[w],V=0,Y=H.length;V<Y;V++,D++)I[D]=H[V];return I},u=function(Q){return!!Q&&typeof Q=="object"&&!Array.isArray(Q)};function a(Q){for(var w=[],_=1;_<arguments.length;_++)w[_-1]=arguments[_];if(!w.length)return Q;var I=w.shift();return I!==void 0&&u(Q)&&u(I)?(Q=r({},Q),Object.keys(I).forEach(function(D){var H=Q[D],V=I[D];Array.isArray(H)&&Array.isArray(V)?Q[D]=V:u(H)&&u(V)?Q[D]=a(Object.assign({},H),V):Q[D]=V}),a.apply(void 0,d([Q],w))):Q}function l(Q,w){var _=document.createElement("a");_.download=w,_.href=Q,document.body.appendChild(_),_.click(),document.body.removeChild(_)}function s(Q){return w=this,_=void 0,D=function(){return function(H,V){var Y,z,X,N,j={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return N={next:q(0),throw:q(1),return:q(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function q(te){return function(oe){return function(ie){if(Y)throw new TypeError("Generator is already executing.");for(;j;)try{if(Y=1,z&&(X=2&ie[0]?z.return:ie[0]?z.throw||((X=z.return)&&X.call(z),0):z.next)&&!(X=X.call(z,ie[1])).done)return X;switch(z=0,X&&(ie=[2&ie[0],X.value]),ie[0]){case 0:case 1:X=ie;break;case 4:return j.label++,{value:ie[1],done:!1};case 5:j.label++,z=ie[1],ie=[0];continue;case 7:ie=j.ops.pop(),j.trys.pop();continue;default:if(!((X=(X=j.trys).length>0&&X[X.length-1])||ie[0]!==6&&ie[0]!==2)){j=0;continue}if(ie[0]===3&&(!X||ie[1]>X[0]&&ie[1]<X[3])){j.label=ie[1];break}if(ie[0]===6&&j.label<X[1]){j.label=X[1],X=ie;break}if(X&&j.label<X[2]){j.label=X[2],j.ops.push(ie);break}X[2]&&j.ops.pop(),j.trys.pop();continue}ie=V.call(H,j)}catch(fe){ie=[6,fe],z=0}finally{Y=X=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([te,oe])}}}(this,function(H){return[2,new Promise(function(V){var Y=new XMLHttpRequest;Y.onload=function(){var z=new FileReader;z.onloadend=function(){V(z.result)},z.readAsDataURL(Y.response)},Y.open("GET",Q),Y.responseType="blob",Y.send()})]})},new((I=void 0)||(I=Promise))(function(H,V){function Y(N){try{X(D.next(N))}catch(j){V(j)}}function z(N){try{X(D.throw(N))}catch(j){V(j)}}function X(N){var j;N.done?H(N.value):(j=N.value,j instanceof I?j:new I(function(q){q(j)})).then(Y,z)}X((D=D.apply(w,_||[])).next())});var w,_,I,D}const h={L:.07,M:.15,Q:.25,H:.3};var g=function(){return(g=Object.assign||function(Q){for(var w,_=1,I=arguments.length;_<I;_++)for(var D in w=arguments[_])Object.prototype.hasOwnProperty.call(w,D)&&(Q[D]=w[D]);return Q}).apply(this,arguments)};const f=function(){function Q(w){var _=w.svg,I=w.type;this._svg=_,this._type=I}return Q.prototype.draw=function(w,_,I,D){var H;switch(this._type){case"dots":H=this._drawDot;break;case"classy":H=this._drawClassy;break;case"classy-rounded":H=this._drawClassyRounded;break;case"rounded":H=this._drawRounded;break;case"extra-rounded":H=this._drawExtraRounded;break;case"square":default:H=this._drawSquare}H.call(this,{x:w,y:_,size:I,getNeighbor:D})},Q.prototype._rotateFigure=function(w){var _,I=w.x,D=w.y,H=w.size,V=w.rotation,Y=V===void 0?0:V,z=I+H/2,X=D+H/2;(0,w.draw)(),(_=this._element)===null||_===void 0||_.setAttribute("transform","rotate("+180*Y/Math.PI+","+z+","+X+")")},Q.prototype._basicDot=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(g(g({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),_._element.setAttribute("cx",String(D+I/2)),_._element.setAttribute("cy",String(H+I/2)),_._element.setAttribute("r",String(I/2))}}))},Q.prototype._basicSquare=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(g(g({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),_._element.setAttribute("x",String(D)),_._element.setAttribute("y",String(H)),_._element.setAttribute("width",String(I)),_._element.setAttribute("height",String(I))}}))},Q.prototype._basicSideRounded=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(g(g({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("d","M "+D+" "+H+"v "+I+"h "+I/2+"a "+I/2+" "+I/2+", 0, 0, 0, 0 "+-I)}}))},Q.prototype._basicCornerRounded=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(g(g({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("d","M "+D+" "+H+"v "+I+"h "+I+"v "+-I/2+"a "+I/2+" "+I/2+", 0, 0, 0, "+-I/2+" "+-I/2)}}))},Q.prototype._basicCornerExtraRounded=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(g(g({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("d","M "+D+" "+H+"v "+I+"h "+I+"a "+I+" "+I+", 0, 0, 0, "+-I+" "+-I)}}))},Q.prototype._basicCornersRounded=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(g(g({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("d","M "+D+" "+H+"v "+I/2+"a "+I/2+" "+I/2+", 0, 0, 0, "+I/2+" "+I/2+"h "+I/2+"v "+-I/2+"a "+I/2+" "+I/2+", 0, 0, 0, "+-I/2+" "+-I/2)}}))},Q.prototype._drawDot=function(w){var _=w.x,I=w.y,D=w.size;this._basicDot({x:_,y:I,size:D,rotation:0})},Q.prototype._drawSquare=function(w){var _=w.x,I=w.y,D=w.size;this._basicSquare({x:_,y:I,size:D,rotation:0})},Q.prototype._drawRounded=function(w){var _=w.x,I=w.y,D=w.size,H=w.getNeighbor,V=H?+H(-1,0):0,Y=H?+H(1,0):0,z=H?+H(0,-1):0,X=H?+H(0,1):0,N=V+Y+z+X;if(N!==0)if(N>2||V&&Y||z&&X)this._basicSquare({x:_,y:I,size:D,rotation:0});else{if(N===2){var j=0;return V&&z?j=Math.PI/2:z&&Y?j=Math.PI:Y&&X&&(j=-Math.PI/2),void this._basicCornerRounded({x:_,y:I,size:D,rotation:j})}if(N===1)return j=0,z?j=Math.PI/2:Y?j=Math.PI:X&&(j=-Math.PI/2),void this._basicSideRounded({x:_,y:I,size:D,rotation:j})}else this._basicDot({x:_,y:I,size:D,rotation:0})},Q.prototype._drawExtraRounded=function(w){var _=w.x,I=w.y,D=w.size,H=w.getNeighbor,V=H?+H(-1,0):0,Y=H?+H(1,0):0,z=H?+H(0,-1):0,X=H?+H(0,1):0,N=V+Y+z+X;if(N!==0)if(N>2||V&&Y||z&&X)this._basicSquare({x:_,y:I,size:D,rotation:0});else{if(N===2){var j=0;return V&&z?j=Math.PI/2:z&&Y?j=Math.PI:Y&&X&&(j=-Math.PI/2),void this._basicCornerExtraRounded({x:_,y:I,size:D,rotation:j})}if(N===1)return j=0,z?j=Math.PI/2:Y?j=Math.PI:X&&(j=-Math.PI/2),void this._basicSideRounded({x:_,y:I,size:D,rotation:j})}else this._basicDot({x:_,y:I,size:D,rotation:0})},Q.prototype._drawClassy=function(w){var _=w.x,I=w.y,D=w.size,H=w.getNeighbor,V=H?+H(-1,0):0,Y=H?+H(1,0):0,z=H?+H(0,-1):0,X=H?+H(0,1):0;V+Y+z+X!==0?V||z?Y||X?this._basicSquare({x:_,y:I,size:D,rotation:0}):this._basicCornerRounded({x:_,y:I,size:D,rotation:Math.PI/2}):this._basicCornerRounded({x:_,y:I,size:D,rotation:-Math.PI/2}):this._basicCornersRounded({x:_,y:I,size:D,rotation:Math.PI/2})},Q.prototype._drawClassyRounded=function(w){var _=w.x,I=w.y,D=w.size,H=w.getNeighbor,V=H?+H(-1,0):0,Y=H?+H(1,0):0,z=H?+H(0,-1):0,X=H?+H(0,1):0;V+Y+z+X!==0?V||z?Y||X?this._basicSquare({x:_,y:I,size:D,rotation:0}):this._basicCornerExtraRounded({x:_,y:I,size:D,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:_,y:I,size:D,rotation:-Math.PI/2}):this._basicCornersRounded({x:_,y:I,size:D,rotation:Math.PI/2})},Q}();var A=function(){return(A=Object.assign||function(Q){for(var w,_=1,I=arguments.length;_<I;_++)for(var D in w=arguments[_])Object.prototype.hasOwnProperty.call(w,D)&&(Q[D]=w[D]);return Q}).apply(this,arguments)};const m=function(){function Q(w){var _=w.svg,I=w.type;this._svg=_,this._type=I}return Q.prototype.draw=function(w,_,I,D){var H;switch(this._type){case"square":H=this._drawSquare;break;case"extra-rounded":H=this._drawExtraRounded;break;case"dot":default:H=this._drawDot}H.call(this,{x:w,y:_,size:I,rotation:D})},Q.prototype._rotateFigure=function(w){var _,I=w.x,D=w.y,H=w.size,V=w.rotation,Y=V===void 0?0:V,z=I+H/2,X=D+H/2;(0,w.draw)(),(_=this._element)===null||_===void 0||_.setAttribute("transform","rotate("+180*Y/Math.PI+","+z+","+X+")")},Q.prototype._basicDot=function(w){var _=this,I=w.size,D=w.x,H=w.y,V=I/7;this._rotateFigure(A(A({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("clip-rule","evenodd"),_._element.setAttribute("d","M "+(D+I/2)+" "+H+"a "+I/2+" "+I/2+" 0 1 0 0.1 0zm 0 "+V+"a "+(I/2-V)+" "+(I/2-V)+" 0 1 1 -0.1 0Z")}}))},Q.prototype._basicSquare=function(w){var _=this,I=w.size,D=w.x,H=w.y,V=I/7;this._rotateFigure(A(A({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("clip-rule","evenodd"),_._element.setAttribute("d","M "+D+" "+H+"v "+I+"h "+I+"v "+-I+"zM "+(D+V)+" "+(H+V)+"h "+(I-2*V)+"v "+(I-2*V)+"h "+(2*V-I)+"z")}}))},Q.prototype._basicExtraRounded=function(w){var _=this,I=w.size,D=w.x,H=w.y,V=I/7;this._rotateFigure(A(A({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","path"),_._element.setAttribute("clip-rule","evenodd"),_._element.setAttribute("d","M "+D+" "+(H+2.5*V)+"v "+2*V+"a "+2.5*V+" "+2.5*V+", 0, 0, 0, "+2.5*V+" "+2.5*V+"h "+2*V+"a "+2.5*V+" "+2.5*V+", 0, 0, 0, "+2.5*V+" "+2.5*-V+"v "+-2*V+"a "+2.5*V+" "+2.5*V+", 0, 0, 0, "+2.5*-V+" "+2.5*-V+"h "+-2*V+"a "+2.5*V+" "+2.5*V+", 0, 0, 0, "+2.5*-V+" "+2.5*V+"M "+(D+2.5*V)+" "+(H+V)+"h "+2*V+"a "+1.5*V+" "+1.5*V+", 0, 0, 1, "+1.5*V+" "+1.5*V+"v "+2*V+"a "+1.5*V+" "+1.5*V+", 0, 0, 1, "+1.5*-V+" "+1.5*V+"h "+-2*V+"a "+1.5*V+" "+1.5*V+", 0, 0, 1, "+1.5*-V+" "+1.5*-V+"v "+-2*V+"a "+1.5*V+" "+1.5*V+", 0, 0, 1, "+1.5*V+" "+1.5*-V)}}))},Q.prototype._drawDot=function(w){var _=w.x,I=w.y,D=w.size,H=w.rotation;this._basicDot({x:_,y:I,size:D,rotation:H})},Q.prototype._drawSquare=function(w){var _=w.x,I=w.y,D=w.size,H=w.rotation;this._basicSquare({x:_,y:I,size:D,rotation:H})},Q.prototype._drawExtraRounded=function(w){var _=w.x,I=w.y,D=w.size,H=w.rotation;this._basicExtraRounded({x:_,y:I,size:D,rotation:H})},Q}();var y=function(){return(y=Object.assign||function(Q){for(var w,_=1,I=arguments.length;_<I;_++)for(var D in w=arguments[_])Object.prototype.hasOwnProperty.call(w,D)&&(Q[D]=w[D]);return Q}).apply(this,arguments)};const b=function(){function Q(w){var _=w.svg,I=w.type;this._svg=_,this._type=I}return Q.prototype.draw=function(w,_,I,D){var H;switch(this._type){case"square":H=this._drawSquare;break;case"dot":default:H=this._drawDot}H.call(this,{x:w,y:_,size:I,rotation:D})},Q.prototype._rotateFigure=function(w){var _,I=w.x,D=w.y,H=w.size,V=w.rotation,Y=V===void 0?0:V,z=I+H/2,X=D+H/2;(0,w.draw)(),(_=this._element)===null||_===void 0||_.setAttribute("transform","rotate("+180*Y/Math.PI+","+z+","+X+")")},Q.prototype._basicDot=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(y(y({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),_._element.setAttribute("cx",String(D+I/2)),_._element.setAttribute("cy",String(H+I/2)),_._element.setAttribute("r",String(I/2))}}))},Q.prototype._basicSquare=function(w){var _=this,I=w.size,D=w.x,H=w.y;this._rotateFigure(y(y({},w),{draw:function(){_._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),_._element.setAttribute("x",String(D)),_._element.setAttribute("y",String(H)),_._element.setAttribute("width",String(I)),_._element.setAttribute("height",String(I))}}))},Q.prototype._drawDot=function(w){var _=w.x,I=w.y,D=w.size,H=w.rotation;this._basicDot({x:_,y:I,size:D,rotation:H})},Q.prototype._drawSquare=function(w){var _=w.x,I=w.y,D=w.size,H=w.rotation;this._basicSquare({x:_,y:I,size:D,rotation:H})},Q}(),x="circle";var S=function(Q,w,_,I){return new(_||(_=Promise))(function(D,H){function V(X){try{z(I.next(X))}catch(N){H(N)}}function Y(X){try{z(I.throw(X))}catch(N){H(N)}}function z(X){var N;X.done?D(X.value):(N=X.value,N instanceof _?N:new _(function(j){j(N)})).then(V,Y)}z((I=I.apply(Q,[])).next())})},O=function(Q,w){var _,I,D,H,V={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return H={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function Y(z){return function(X){return function(N){if(_)throw new TypeError("Generator is already executing.");for(;V;)try{if(_=1,I&&(D=2&N[0]?I.return:N[0]?I.throw||((D=I.return)&&D.call(I),0):I.next)&&!(D=D.call(I,N[1])).done)return D;switch(I=0,D&&(N=[2&N[0],D.value]),N[0]){case 0:case 1:D=N;break;case 4:return V.label++,{value:N[1],done:!1};case 5:V.label++,I=N[1],N=[0];continue;case 7:N=V.ops.pop(),V.trys.pop();continue;default:if(!((D=(D=V.trys).length>0&&D[D.length-1])||N[0]!==6&&N[0]!==2)){V=0;continue}if(N[0]===3&&(!D||N[1]>D[0]&&N[1]<D[3])){V.label=N[1];break}if(N[0]===6&&V.label<D[1]){V.label=D[1],D=N;break}if(D&&V.label<D[2]){V.label=D[2],V.ops.push(N);break}D[2]&&V.ops.pop(),V.trys.pop();continue}N=w.call(Q,V)}catch(j){N=[6,j],I=0}finally{_=D=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([z,X])}}},R=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],Z=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const ee=function(){function Q(w){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(w.width)),this._element.setAttribute("height",String(w.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=w}return Object.defineProperty(Q.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(Q.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),Q.prototype.getElement=function(){return this._element},Q.prototype.drawQR=function(w){return S(this,void 0,void 0,function(){var _,I,D,H,V,Y,z,X,N,j,q=this;return O(this,function(te){switch(te.label){case 0:return _=w.getModuleCount(),I=Math.min(this._options.width,this._options.height)-2*this._options.margin,D=this._options.shape===x?I/Math.sqrt(2):I,H=Math.floor(D/_),V={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=w,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(te.sent(),!this._image)return[2];Y=this._options,z=Y.imageOptions,X=Y.qrOptions,N=z.imageSize*h[X.errorCorrectionLevel],j=Math.floor(N*_*_),V=function(oe){var ie=oe.originalHeight,fe=oe.originalWidth,Ae=oe.maxHiddenDots,me=oe.maxHiddenAxisDots,he=oe.dotSize,ye={x:0,y:0},xe={x:0,y:0};if(ie<=0||fe<=0||Ae<=0||he<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var Ee=ie/fe;return ye.x=Math.floor(Math.sqrt(Ae/Ee)),ye.x<=0&&(ye.x=1),me&&me<ye.x&&(ye.x=me),ye.x%2==0&&ye.x--,xe.x=ye.x*he,ye.y=1+2*Math.ceil((ye.x*Ee-1)/2),xe.y=Math.round(xe.x*Ee),(ye.y*ye.x>Ae||me&&me<ye.y)&&(me&&me<ye.y?(ye.y=me,ye.y%2==0&&ye.x--):ye.y-=2,xe.y=ye.y*he,ye.x=1+2*Math.ceil((ye.y/Ee-1)/2),xe.x=Math.round(xe.y/Ee)),{height:xe.y,width:xe.x,hideYDots:ye.y,hideXDots:ye.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:j,maxHiddenAxisDots:_-14,dotSize:H}),te.label=2;case 2:return this.drawBackground(),this.drawDots(function(oe,ie){var fe,Ae,me,he,ye,xe;return!(q._options.imageOptions.hideBackgroundDots&&oe>=(_-V.hideXDots)/2&&oe<(_+V.hideXDots)/2&&ie>=(_-V.hideYDots)/2&&ie<(_+V.hideYDots)/2||!((fe=R[oe])===null||fe===void 0)&&fe[ie]||!((Ae=R[oe-_+7])===null||Ae===void 0)&&Ae[ie]||!((me=R[oe])===null||me===void 0)&&me[ie-_+7]||!((he=Z[oe])===null||he===void 0)&&he[ie]||!((ye=Z[oe-_+7])===null||ye===void 0)&&ye[ie]||!((xe=Z[oe])===null||xe===void 0)&&xe[ie-_+7])}),this.drawCorners(),this._options.image?[4,this.drawImage({width:V.width,height:V.height,count:_,dotSize:H})]:[3,4];case 3:te.sent(),te.label=4;case 4:return[2]}})})},Q.prototype.drawBackground=function(){var w,_,I,D=this._element,H=this._options;if(D){var V=(w=H.backgroundOptions)===null||w===void 0?void 0:w.gradient,Y=(_=H.backgroundOptions)===null||_===void 0?void 0:_.color;if((V||Y)&&this._createColor({options:V,color:Y,additionalRotation:0,x:0,y:0,height:H.height,width:H.width,name:"background-color"}),(I=H.backgroundOptions)===null||I===void 0?void 0:I.round){var z=Math.min(H.width,H.height),X=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),X.setAttribute("x",String((H.width-z)/2)),X.setAttribute("y",String((H.height-z)/2)),X.setAttribute("width",String(z)),X.setAttribute("height",String(z)),X.setAttribute("rx",String(z/2*H.backgroundOptions.round)),this._backgroundClipPath.appendChild(X)}}},Q.prototype.drawDots=function(w){var _,I,D=this;if(!this._qr)throw"QR code is not defined";var H=this._options,V=this._qr.getModuleCount();if(V>H.width||V>H.height)throw"The canvas is too small.";var Y=Math.min(H.width,H.height)-2*H.margin,z=H.shape===x?Y/Math.sqrt(2):Y,X=Math.floor(z/V),N=Math.floor((H.width-V*X)/2),j=Math.floor((H.height-V*X)/2),q=new f({svg:this._element,type:H.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:(_=H.dotsOptions)===null||_===void 0?void 0:_.gradient,color:H.dotsOptions.color,additionalRotation:0,x:0,y:0,height:H.height,width:H.width,name:"dot-color"});for(var te=function(Xe){for(var Oe=function(Ke){return w&&!w(Xe,Ke)?"continue":!((I=oe._qr)===null||I===void 0)&&I.isDark(Xe,Ke)?(q.draw(N+Xe*X,j+Ke*X,X,function(nt,Bt){return!(Xe+nt<0||Ke+Bt<0||Xe+nt>=V||Ke+Bt>=V)&&!(w&&!w(Xe+nt,Ke+Bt))&&!!D._qr&&D._qr.isDark(Xe+nt,Ke+Bt)}),void(q._element&&oe._dotsClipPath&&oe._dotsClipPath.appendChild(q._element))):"continue"},ct=0;ct<V;ct++)Oe(ct)},oe=this,ie=0;ie<V;ie++)te(ie);if(H.shape===x){var fe=Math.floor((Y/X-V)/2),Ae=V+2*fe,me=N-fe*X,he=j-fe*X,ye=[],xe=Math.floor(Ae/2);for(ie=0;ie<Ae;ie++){ye[ie]=[];for(var Ee=0;Ee<Ae;Ee++)ie>=fe-1&&ie<=Ae-fe&&Ee>=fe-1&&Ee<=Ae-fe||Math.sqrt((ie-xe)*(ie-xe)+(Ee-xe)*(Ee-xe))>xe?ye[ie][Ee]=0:ye[ie][Ee]=this._qr.isDark(Ee-2*fe<0?Ee:Ee>=V?Ee-2*fe:Ee-fe,ie-2*fe<0?ie:ie>=V?ie-2*fe:ie-fe)?1:0}var ke=function(Xe){for(var Oe=function(Ke){if(!ye[Xe][Ke])return"continue";q.draw(me+Xe*X,he+Ke*X,X,function(nt,Bt){var wt;return!!(!((wt=ye[Xe+nt])===null||wt===void 0)&&wt[Ke+Bt])}),q._element&&Fe._dotsClipPath&&Fe._dotsClipPath.appendChild(q._element)},ct=0;ct<Ae;ct++)Oe(ct)},Fe=this;for(ie=0;ie<Ae;ie++)ke(ie)}},Q.prototype.drawCorners=function(){var w=this;if(!this._qr)throw"QR code is not defined";var _=this._element,I=this._options;if(!_)throw"Element code is not defined";var D=this._qr.getModuleCount(),H=Math.min(I.width,I.height)-2*I.margin,V=I.shape===x?H/Math.sqrt(2):H,Y=Math.floor(V/D),z=7*Y,X=3*Y,N=Math.floor((I.width-D*Y)/2),j=Math.floor((I.height-D*Y)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach(function(q){var te,oe,ie,fe,Ae,me,he,ye,xe,Ee,ke,Fe,Xe=q[0],Oe=q[1],ct=q[2],Ke=N+Xe*Y*(D-7),nt=j+Oe*Y*(D-7),Bt=w._dotsClipPath,wt=w._dotsClipPath;if((!((te=I.cornersSquareOptions)===null||te===void 0)&&te.gradient||!((oe=I.cornersSquareOptions)===null||oe===void 0)&&oe.color)&&((Bt=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+Xe+"-"+Oe),w._defs.appendChild(Bt),w._cornersSquareClipPath=w._cornersDotClipPath=wt=Bt,w._createColor({options:(ie=I.cornersSquareOptions)===null||ie===void 0?void 0:ie.gradient,color:(fe=I.cornersSquareOptions)===null||fe===void 0?void 0:fe.color,additionalRotation:ct,x:Ke,y:nt,height:z,width:z,name:"corners-square-color-"+Xe+"-"+Oe})),(Ae=I.cornersSquareOptions)===null||Ae===void 0?void 0:Ae.type){var Gt=new m({svg:w._element,type:I.cornersSquareOptions.type});Gt.draw(Ke,nt,z,ct),Gt._element&&Bt&&Bt.appendChild(Gt._element)}else for(var Un=new f({svg:w._element,type:I.dotsOptions.type}),Oh=function(Hn){for(var Ki=function(Ii){if(!(!((me=R[Hn])===null||me===void 0)&&me[Ii]))return"continue";Un.draw(Ke+Hn*Y,nt+Ii*Y,Y,function(_o,xa){var li;return!!(!((li=R[Hn+_o])===null||li===void 0)&&li[Ii+xa])}),Un._element&&Bt&&Bt.appendChild(Un._element)},Ei=0;Ei<R[Hn].length;Ei++)Ki(Ei)},Si=0;Si<R.length;Si++)Oh(Si);if((!((he=I.cornersDotOptions)===null||he===void 0)&&he.gradient||!((ye=I.cornersDotOptions)===null||ye===void 0)&&ye.color)&&((wt=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+Xe+"-"+Oe),w._defs.appendChild(wt),w._cornersDotClipPath=wt,w._createColor({options:(xe=I.cornersDotOptions)===null||xe===void 0?void 0:xe.gradient,color:(Ee=I.cornersDotOptions)===null||Ee===void 0?void 0:Ee.color,additionalRotation:ct,x:Ke+2*Y,y:nt+2*Y,height:X,width:X,name:"corners-dot-color-"+Xe+"-"+Oe})),(ke=I.cornersDotOptions)===null||ke===void 0?void 0:ke.type){var wa=new b({svg:w._element,type:I.cornersDotOptions.type});wa.draw(Ke+2*Y,nt+2*Y,X,ct),wa._element&&wt&&wt.appendChild(wa._element)}else{Un=new f({svg:w._element,type:I.dotsOptions.type});var Dh=function(Hn){for(var Ki=function(Ii){if(!(!((Fe=Z[Hn])===null||Fe===void 0)&&Fe[Ii]))return"continue";Un.draw(Ke+Hn*Y,nt+Ii*Y,Y,function(_o,xa){var li;return!!(!((li=Z[Hn+_o])===null||li===void 0)&&li[Ii+xa])}),Un._element&&wt&&wt.appendChild(Un._element)},Ei=0;Ei<Z[Hn].length;Ei++)Ki(Ei)};for(Si=0;Si<Z.length;Si++)Dh(Si)}})},Q.prototype.loadImage=function(){var w=this;return new Promise(function(_,I){var D=w._options,H=new Image;if(!D.image)return I("Image is not defined");typeof D.imageOptions.crossOrigin=="string"&&(H.crossOrigin=D.imageOptions.crossOrigin),w._image=H,H.onload=function(){_()},H.src=D.image})},Q.prototype.drawImage=function(w){var _=w.width,I=w.height,D=w.count,H=w.dotSize;return S(this,void 0,void 0,function(){var V,Y,z,X,N,j,q,te,oe;return O(this,function(ie){switch(ie.label){case 0:return V=this._options,Y=Math.floor((V.width-D*H)/2),z=Math.floor((V.height-D*H)/2),X=Y+V.imageOptions.margin+(D*H-_)/2,N=z+V.imageOptions.margin+(D*H-I)/2,j=_-2*V.imageOptions.margin,q=I-2*V.imageOptions.margin,(te=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(X)),te.setAttribute("y",String(N)),te.setAttribute("width",j+"px"),te.setAttribute("height",q+"px"),[4,s(V.image||"")];case 1:return oe=ie.sent(),te.setAttribute("href",oe||""),this._element.appendChild(te),[2]}})})},Q.prototype._createColor=function(w){var _=w.options,I=w.color,D=w.additionalRotation,H=w.x,V=w.y,Y=w.height,z=w.width,X=w.name,N=z>Y?z:Y,j=document.createElementNS("http://www.w3.org/2000/svg","rect");if(j.setAttribute("x",String(H)),j.setAttribute("y",String(V)),j.setAttribute("height",String(Y)),j.setAttribute("width",String(z)),j.setAttribute("clip-path","url('#clip-path-"+X+"')"),_){var q;if(_.type==="radial")(q=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",X),q.setAttribute("gradientUnits","userSpaceOnUse"),q.setAttribute("fx",String(H+z/2)),q.setAttribute("fy",String(V+Y/2)),q.setAttribute("cx",String(H+z/2)),q.setAttribute("cy",String(V+Y/2)),q.setAttribute("r",String(N/2));else{var te=((_.rotation||0)+D)%(2*Math.PI),oe=(te+2*Math.PI)%(2*Math.PI),ie=H+z/2,fe=V+Y/2,Ae=H+z/2,me=V+Y/2;oe>=0&&oe<=.25*Math.PI||oe>1.75*Math.PI&&oe<=2*Math.PI?(ie-=z/2,fe-=Y/2*Math.tan(te),Ae+=z/2,me+=Y/2*Math.tan(te)):oe>.25*Math.PI&&oe<=.75*Math.PI?(fe-=Y/2,ie-=z/2/Math.tan(te),me+=Y/2,Ae+=z/2/Math.tan(te)):oe>.75*Math.PI&&oe<=1.25*Math.PI?(ie+=z/2,fe+=Y/2*Math.tan(te),Ae-=z/2,me-=Y/2*Math.tan(te)):oe>1.25*Math.PI&&oe<=1.75*Math.PI&&(fe+=Y/2,ie+=z/2/Math.tan(te),me-=Y/2,Ae-=z/2/Math.tan(te)),(q=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",X),q.setAttribute("gradientUnits","userSpaceOnUse"),q.setAttribute("x1",String(Math.round(ie))),q.setAttribute("y1",String(Math.round(fe))),q.setAttribute("x2",String(Math.round(Ae))),q.setAttribute("y2",String(Math.round(me)))}_.colorStops.forEach(function(he){var ye=he.offset,xe=he.color,Ee=document.createElementNS("http://www.w3.org/2000/svg","stop");Ee.setAttribute("offset",100*ye+"%"),Ee.setAttribute("stop-color",xe),q.appendChild(Ee)}),j.setAttribute("fill","url('#"+X+"')"),this._defs.appendChild(q)}else I&&j.setAttribute("fill",I);this._element.appendChild(j)},Q}(),re="canvas";for(var ae={},ne=0;ne<=40;ne++)ae[ne]=ne;const J={type:re,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:ae[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var P=function(){return(P=Object.assign||function(Q){for(var w,_=1,I=arguments.length;_<I;_++)for(var D in w=arguments[_])Object.prototype.hasOwnProperty.call(w,D)&&(Q[D]=w[D]);return Q}).apply(this,arguments)};function U(Q){var w=P({},Q);if(!w.colorStops||!w.colorStops.length)throw"Field 'colorStops' is required in gradient";return w.rotation?w.rotation=Number(w.rotation):w.rotation=0,w.colorStops=w.colorStops.map(function(_){return P(P({},_),{offset:Number(_.offset)})}),w}function W(Q){var w=P({},Q);return w.width=Number(w.width),w.height=Number(w.height),w.margin=Number(w.margin),w.imageOptions=P(P({},w.imageOptions),{hideBackgroundDots:!!w.imageOptions.hideBackgroundDots,imageSize:Number(w.imageOptions.imageSize),margin:Number(w.imageOptions.margin)}),w.margin>Math.min(w.width,w.height)&&(w.margin=Math.min(w.width,w.height)),w.dotsOptions=P({},w.dotsOptions),w.dotsOptions.gradient&&(w.dotsOptions.gradient=U(w.dotsOptions.gradient)),w.cornersSquareOptions&&(w.cornersSquareOptions=P({},w.cornersSquareOptions),w.cornersSquareOptions.gradient&&(w.cornersSquareOptions.gradient=U(w.cornersSquareOptions.gradient))),w.cornersDotOptions&&(w.cornersDotOptions=P({},w.cornersDotOptions),w.cornersDotOptions.gradient&&(w.cornersDotOptions.gradient=U(w.cornersDotOptions.gradient))),w.backgroundOptions&&(w.backgroundOptions=P({},w.backgroundOptions),w.backgroundOptions.gradient&&(w.backgroundOptions.gradient=U(w.backgroundOptions.gradient))),w}var F=c(192),E=c.n(F),k=function(Q,w,_,I){return new(_||(_=Promise))(function(D,H){function V(X){try{z(I.next(X))}catch(N){H(N)}}function Y(X){try{z(I.throw(X))}catch(N){H(N)}}function z(X){var N;X.done?D(X.value):(N=X.value,N instanceof _?N:new _(function(j){j(N)})).then(V,Y)}z((I=I.apply(Q,[])).next())})},L=function(Q,w){var _,I,D,H,V={label:0,sent:function(){if(1&D[0])throw D[1];return D[1]},trys:[],ops:[]};return H={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function Y(z){return function(X){return function(N){if(_)throw new TypeError("Generator is already executing.");for(;V;)try{if(_=1,I&&(D=2&N[0]?I.return:N[0]?I.throw||((D=I.return)&&D.call(I),0):I.next)&&!(D=D.call(I,N[1])).done)return D;switch(I=0,D&&(N=[2&N[0],D.value]),N[0]){case 0:case 1:D=N;break;case 4:return V.label++,{value:N[1],done:!1};case 5:V.label++,I=N[1],N=[0];continue;case 7:N=V.ops.pop(),V.trys.pop();continue;default:if(!((D=(D=V.trys).length>0&&D[D.length-1])||N[0]!==6&&N[0]!==2)){V=0;continue}if(N[0]===3&&(!D||N[1]>D[0]&&N[1]<D[3])){V.label=N[1];break}if(N[0]===6&&V.label<D[1]){V.label=D[1],D=N;break}if(D&&V.label<D[2]){V.label=D[2],V.ops.push(N);break}D[2]&&V.ops.pop(),V.trys.pop();continue}N=w.call(Q,V)}catch(j){N=[6,j],I=0}finally{_=D=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([z,X])}}};const B=function(){function Q(w){this._options=w?W(a(J,w)):J,this.update()}return Q._clearContainer=function(w){w&&(w.innerHTML="")},Q.prototype._setupSvg=function(){var w=this;if(this._qr){var _=new ee(this._options);this._svg=_.getElement(),this._svgDrawingPromise=_.drawQR(this._qr).then(function(){var I;w._svg&&((I=w._extension)===null||I===void 0||I.call(w,_.getElement(),w._options))})}},Q.prototype._setupCanvas=function(){var w,_=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=(w=this._svgDrawingPromise)===null||w===void 0?void 0:w.then(function(){if(_._svg){var I=_._svg,D=new XMLSerializer().serializeToString(I),H="data:image/svg+xml;base64,"+btoa(D),V=new Image;return new Promise(function(Y){V.onload=function(){var z,X;(X=(z=_._canvas)===null||z===void 0?void 0:z.getContext("2d"))===null||X===void 0||X.drawImage(V,0,0),Y()},V.src=H})}}))},Q.prototype._getElement=function(w){return w===void 0&&(w="png"),k(this,void 0,void 0,function(){return L(this,function(_){switch(_.label){case 0:if(!this._qr)throw"QR code is empty";return w.toLowerCase()!=="svg"?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return _.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return _.sent(),[2,this._canvas]}})})},Q.prototype.update=function(w){Q._clearContainer(this._container),this._options=w?W(a(this._options,w)):this._options,this._options.data&&(this._qr=E()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(_){switch(!0){case/^[0-9]*$/.test(_):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(_):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===re?this._setupCanvas():this._setupSvg(),this.append(this._container))},Q.prototype.append=function(w){if(w){if(typeof w.appendChild!="function")throw"Container should be a single DOM node";this._options.type===re?this._canvas&&w.appendChild(this._canvas):this._svg&&w.appendChild(this._svg),this._container=w}},Q.prototype.applyExtension=function(w){if(!w)throw"Extension function should be defined.";this._extension=w,this.update()},Q.prototype.deleteExtension=function(){this._extension=void 0,this.update()},Q.prototype.getRawData=function(w){return w===void 0&&(w="png"),k(this,void 0,void 0,function(){var _,I,D;return L(this,function(H){switch(H.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(w)];case 1:return(_=H.sent())?w.toLowerCase()==="svg"?(I=new XMLSerializer,D=I.serializeToString(_),[2,new Blob([`<?xml version="1.0" standalone="no"?>\r
`+D],{type:"image/svg+xml"})]):[2,new Promise(function(V){return _.toBlob(V,"image/"+w,1)})]:[2,null]}})})},Q.prototype.download=function(w){return k(this,void 0,void 0,function(){var _,I,D,H,V;return L(this,function(Y){switch(Y.label){case 0:if(!this._qr)throw"QR code is empty";return _="png",I="qr",typeof w=="string"?(_=w,console.warn("Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument")):typeof w=="object"&&w!==null&&(w.name&&(I=w.name),w.extension&&(_=w.extension)),[4,this._getElement(_)];case 1:return(D=Y.sent())?(_.toLowerCase()==="svg"?(H=new XMLSerializer,V=`<?xml version="1.0" standalone="no"?>\r
`+(V=H.serializeToString(D)),l("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(V),I+".svg")):l(D.toDataURL("image/"+_),I+"."+_),[2]):[2]}})})},Q}()}},i={};function o(p){if(i[p])return i[p].exports;var v=i[p]={exports:{}};return n[p](v,v.exports,o),v.exports}return o.n=p=>{var v=p&&p.__esModule?()=>p.default:()=>p;return o.d(v,{a:v}),v},o.d=(p,v)=>{for(var c in v)o.o(v,c)&&!o.o(p,c)&&Object.defineProperty(p,c,{enumerable:!0,get:v[c]})},o.o=(p,v)=>Object.prototype.hasOwnProperty.call(p,v),o(676)})().default})})(z1);var NP=z1.exports;const zP=Ma(NP);var V1=(t=>(t.rounded="rounded",t.dots="dots",t.classy="classy",t.classy_rounded="classy-rounded",t.square="square",t.extra_rounded="extra-rounded",t))(V1||{}),U1=(t=>(t.dot="dot",t.square="square",t.extra_rounded="extra-rounded",t))(U1||{}),H1=(t=>(t.dot="dot",t.square="square",t))(H1||{}),G1=(t=>(t.L="L",t.M="M",t.Q="Q",t.H="H",t))(G1||{});class hh{constructor(e,n){this.canvas=e,this.editor=n}hookTransform(e){return we(this,null,function*(){if(e.extensionType==="qrcode"){const n=this._paramsToOption(e.extension),i=yield this._getBase64Str(n);e.src=i}})}_getBase64Str(e){return we(this,null,function*(){const n=yield new zP(e).getRawData("png");return n&&(yield Pg(n))||""})}_defaultBarcodeOption(){return{data:"https://kuaitu.cc",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"square",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}}_paramsToOption(e){return{width:e.width,height:e.width,type:"canvas",data:e.data,margin:e.margin,qrOptions:{errorCorrectionLevel:e.errorCorrectionLevel},dotsOptions:{color:e.dotsColor,type:e.dotsType},cornersSquareOptions:{color:e.cornersSquareColor,type:e.cornersSquareType},cornersDotOptions:{color:e.cornersDotColor,type:e.cornersDotType},backgroundOptions:{color:e.background}}}addQrCode(){return we(this,null,function*(){const e=this._defaultBarcodeOption(),n=this._paramsToOption(e),i=yield this._getBase64Str(n);le.fabric.Image.fromURL(i,o=>{o.set({extensionType:"qrcode",extension:e}),o.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(o),this.canvas.setActiveObject(o),this.editor.position("center")},{crossOrigin:"anonymous"})})}setQrCode(e){return we(this,null,function*(){try{const n=this._paramsToOption(e),i=yield this._getBase64Str(n),o=this.canvas.getActiveObjects()[0];le.fabric.Image.fromURL(i,p=>{p.set({left:o.left,top:o.top,extensionType:"qrcode",extension:ve({},e)}),p.scaleToWidth(o.getScaledWidth()),this.editor.del(),this.canvas.add(p),this.canvas.setActiveObject(p)},{crossOrigin:"anonymous"})}catch(n){console.log(n)}})}getQrCodeTypes(){return{DotsType:Object.values(V1),CornersType:Object.values(U1),cornersDotType:Object.values(H1),errorCorrectionLevelType:Object.values(G1)}}destroy(){console.log("pluginDestroy")}}pe(hh,"pluginName","QrCodePlugin"),pe(hh,"apis",["addQrCode","setQrCode","getQrCodeTypes"]);class dh{constructor(e,n){this.canvas=e,this.editor=n}addImage(e){return new Promise((n,i)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>n(o),o.onerror=()=>i(),o.src=e})}imageStrokeDraw(e,n,i="source-over"){return we(this,null,function*(){const o=this.canvas.getActiveObject();if(!o)return;const p=o.originWidth||0,v=o.originHeight||0,c=(o==null?void 0:o.originSrc)||o.getSrc();let r=document.createElement("canvas");const d=r.getContext("2d");if(!d)return;if(n===0){o.setSrc(c,()=>{var s;(s=o.canvas)==null||s.renderAll()});return}d.save(),d.clearRect(0,0,r.width,r.height),d.restore(),r.width=p+n*2,r.height=v+n*2;const u=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],a=yield this.addImage(c);if(!a)return;for(let s=0;s<u.length;s+=2)d.drawImage(a,n+u[s]*n,n+u[s+1]*n,p,v);d.globalCompositeOperation="source-in",d.fillStyle=e,d.fillRect(0,0,p+n*2,v+n*2),d.globalCompositeOperation=i,d.drawImage(a,n,n,p,v);const l=r==null?void 0:r.toDataURL();r=null,l&&o.setSrc(l,()=>{var s;(s=o.canvas)==null||s.renderAll()})})}destroy(){}}pe(dh,"pluginName","ImageStroke"),pe(dh,"apis",["imageStrokeDraw"]);class zs{constructor(e,n){pe(this,"workspaceEl");pe(this,"minSize",{width:1,height:1});pe(this,"barOpts",{bWidth:30,bHeight:6,bPadding:10});pe(this,"hasCreatedBar",!1);pe(this,"isDragging",!1);pe(this,"dragEl",null);pe(this,"startPoints",{x:0,y:0});pe(this,"barOffset",{x:0,y:0});pe(this,"wsOffset",{left:0,top:0,width:0,height:0});pe(this,"eventHandler",{render:Qn(this.renderBars.bind(this),50),onDragging:Qn(this.onDragging.bind(this),30)});this.canvas=e,this.editor=n,this._init(),this._initResizeObserve(),this._addListeners()}_init(){const e=document.querySelector("#workspace");if(!e)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=e}_initResizeObserve(){new ResizeObserver(Qn(()=>{this.renderBars()},50)).observe(this.workspaceEl)}renderBars(){const e=this.canvas.viewportTransform,[n,,,i,o,p]=e||[],v=this.getWorkspase(),c=v.width*n,r=v.height*i,d=v.left*n,u=v.top*i,{bWidth:a,bHeight:l,bPadding:s}=this.barOpts;if(!e)return;const h=this._getBarFromType("left");h.style.left=`${o+d-l-s}px`,h.style.top=`${p+u+r/2-a/2}px`;const g=this._getBarFromType("right");g.style.left=`${o+d+c+s}px`,g.style.top=`${p+u+r/2-a/2}px`;const f=this._getBarFromType("top");f.style.left=`${o+d+c/2-a/2}px`,f.style.top=`${p+u-l-s}px`;const A=this._getBarFromType("bottom");A.style.left=`${o+d+c/2-a/2}px`,A.style.top=`${p+u+r+s}px`,this.hasCreatedBar||(this.hasCreatedBar=!0,this._watchDrag())}_getBarFromType(e){let n=document.querySelector(`#resize-${e}-bar`);return n||(n=document.createElement("div"),n.id=`resize-${e}-bar`,n.className="resize-bar",["left","right"].includes(e)?n.classList.add("horizontal"):n.classList.add("vertical"),this.workspaceEl.appendChild(n),n)}_watchDrag(){Array.from(document.getElementsByClassName("resize-bar")).forEach(e=>{e.addEventListener("mousedown",n=>{this.isDragging=!0,this.dragEl=e,this.dragEl.classList.add("active"),this.startPoints={x:n.clientX,y:n.clientY},this.barOffset={x:e.offsetLeft,y:e.offsetTop};const i=this.getWorkspase(),{width:o,height:p,left:v,top:c}=i;this.wsOffset={width:o,height:p,left:v,top:c}})}),document.addEventListener("mousemove",this.eventHandler.onDragging),document.addEventListener("mouseup",()=>{this.isDragging&&this.dragEl&&(this.isDragging=!1,this.dragEl.classList.remove("active"),this.dragEl=null,this.canvas.defaultCursor="default")})}onDragging(e){if(this.isDragging&&this.dragEl){const n=this.getWorkspase(),i=this.canvas.viewportTransform,[o,,,p]=i||[],v=e.clientX-this.startPoints.x,c=e.clientY-this.startPoints.y,r=v/o,d=c/p,u=this.dragEl.id.split("-")[1];let a=0;switch(u){case"left":a=Math.round(this.wsOffset.width-r*2),a>=this.minSize.width?(this.dragEl.style.left=`${this.barOffset.x+v}px`,n.set("left",this.wsOffset.left+r*2),n.set("width",a)):(n.set("left",this.wsOffset.left+this.wsOffset.width-this.minSize.width),n.set("width",this.minSize.width));break;case"right":a=Math.round(this.wsOffset.width+r*2),a>=this.minSize.width?(this.dragEl.style.left=`${this.barOffset.x+v}px`,n.set("width",a)):n.set("width",this.minSize.width);break;case"top":a=Math.round(this.wsOffset.height-d*2),a>=this.minSize.height?(this.dragEl.style.top=`${this.barOffset.y+c}px`,n.set("top",this.wsOffset.top+d*2),n.set("height",a)):(n.set("top",this.wsOffset.top+this.wsOffset.height-this.minSize.height),n.set("height",this.minSize.height));break;case"bottom":a=Math.round(this.wsOffset.height+d*2),a>=this.minSize.height?(this.dragEl.style.top=`${this.barOffset.y+c}px`,n.set("height",a)):n.set("height",this.minSize.height);break}this.editor.setCenterFromObject(n),n.clone(l=>{this.canvas.clipPath=l,this.canvas.requestRenderAll()}),["left","right"].includes(u)?this.canvas.defaultCursor="ew-resize":this.canvas.defaultCursor="ns-resize",this.editor.emit("sizeChange",n.width,n.height)}}_addListeners(){this.canvas.on("after:render",this.eventHandler.render)}getWorkspase(){return this.canvas.getObjects().find(e=>e.id==="workspace")}destroy(){console.log("pluginDestroy")}}pe(zs,"pluginName","ResizePlugin"),pe(zs,"events",[]),pe(zs,"apis",[]);var fh=(t=>(t.lockMovementX="lockMovementX",t.lockMovementY="lockMovementY",t.lockRotation="lockRotation",t.lockScalingX="lockScalingX",t.lockScalingY="lockScalingY",t))(fh||{});class ph{constructor(e,n){this.canvas=e,this.editor=n}hookImportAfter(){return this.canvas.forEachObject(e=>{e.hasControls===!1&&e.selectable===!1&&(this.canvas.setActiveObject(e),this.lock())}),Promise.resolve()}lock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!1,e.selectable=!1,e.evented=!1,Object.values(fh).forEach(n=>{e[n]=!0}),this.canvas.discardActiveObject().renderAll())}unLock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!0,e.selectable=!0,e.evented=!0,Object.values(fh).forEach(n=>{e[n]=!1}),this.canvas.discardActiveObject().renderAll())}contextMenu(){const e=this.editor.getSelectMode(),n=this.canvas.getActiveObject();if(e===Ci.ONE&&n)return n.selectable?[{text:"\u9501\u5B9A",hotkey:"",onclick:()=>this.lock()}]:[{text:"\u89E3\u9501",hotkey:"",onclick:()=>this.unLock()}]}destroy(){console.log("pluginDestroy")}}pe(ph,"pluginName","LockPlugin"),pe(ph,"apis",["lock","unLock"]);class gh{constructor(e,n){this.canvas=e,this.editor=n,this.editor=n,this.canvas=e}addBaseType(e,n){const{event:i=!1,scale:o=!1,center:p=!0}=n||{};e.set({id:Tt()}),o&&this._toScale(e),i&&this._toEvent(e,i),this.canvas.add(e),!i&&p&&this._toCenter(e),this.canvas.setActiveObject(e),this.canvas.renderAll()}_toEvent(e,n){const{left:i,top:o}=this.canvas.getSelectionElement().getBoundingClientRect();if(n.x<i||n.y<o||e.width===void 0)return;const p={x:n.x-i,y:n.y-o},v=this.canvas.restorePointerVpt(p);e.set({left:v.x,top:v.y})}_toCenter(e){this.canvas.setActiveObject(e),this.editor.position("center")}_toScale(e){const{width:n}=this.editor.getWorkspase();e.scaleToWidth(n/2)}createImgByElement(e){return new Promise(n=>{this.getImageExtension(e.src)==="svg"?le.fabric.loadSVGFromURL(e.src,i=>{const o=le.fabric.util.groupSVGElements(i,{shadow:"",fontFamily:"arial",name:"svg\u5143\u7D20"});n(o)}):le.fabric.Image.fromURL(e.src,i=>{n(i)},{crossOrigin:"anonymous"})})}getImageExtension(e){const n=e.split("/"),i=n[n.length-1].split(".");return i[i.length-1]}destroy(){console.log("pluginDestroy")}}pe(gh,"pluginName","AddBaseTypePlugin"),pe(gh,"apis",["addBaseType","createImgByElement"]),le.fabric.Rect=le.fabric.util.createClass(le.fabric.Rect,{type:"rect",initialize:function(t){t||(t={}),this.callSuper("initialize",t)},_render(t){const e=this.roundValue||0;this.rx=1/this.scaleX*e,this.ry=1/this.scaleY*e,this.callSuper("_render",t)}}),le.fabric.Rect.fromObject=function(t,e){return le.fabric.Object._fromObject("Rect",t,e)},le.fabric.Rect,le.fabric.Textbox=le.fabric.util.createClass(le.fabric.Textbox,{type:"textbox",_renderChars:function(t,e,n,i,o,p){var v=this.getHeightOfLine(p),c=this.textAlign.indexOf("justify")!==-1,r,d,u="",a,l=0,s,h=this.path,g=!c&&this.charSpacing===0&&this.isEmptyStyles(p)&&!h,f=this.direction==="ltr",A=this.direction==="ltr"?1:-1,m,y=e.canvas.getAttribute("dir");if(e.save(),y!==this.direction&&(e.canvas.setAttribute("dir",f?"ltr":"rtl"),e.direction=f?"ltr":"rtl",e.textAlign=f?"left":"right"),o-=v*this._fontSizeFraction/this.lineHeight,g){this._renderChar(t,e,p,0,n.join(""),i,o,v),e.restore();return}for(var b=0,x=n.length-1;b<=x;b++)s=b===x||this.charSpacing||h,u+=n[b],a=this.__charBounds[p][b],l===0?(i+=A*(a.kernedWidth-a.width),l+=a.width):l+=a.kernedWidth,c&&!s&&this._reSpaceAndTab.test(n[b])&&(s=!0),s||(r=r||this.getCompleteStyleDeclaration(p,b),d=this.getCompleteStyleDeclaration(p,b+1),s=le.fabric.util.hasStyleChanged(r,d,!1)),h?(e.save(),e.translate(a.renderLeft,a.renderTop),e.rotate(a.angle),this._renderChar(t,e,p,b,u,-l/2,0,v),e.restore()):(m=i,this._renderChar(t,e,p,b,u,m,o,v)),u="",r=d,i+=A*l,l=0;e.restore()},enlargeSpaces:function(){for(var t,e,n,i,o,p,v,c=0,r=this._textLines.length;c<r;c++)if(!(this.textAlign!=="justify"&&(c===r-1||this.isEndOfWrapping(c)))&&(i=0,o=this._textLines[c],e=this.getLineWidth(c),e<this.width&&(v=this.textLines[c].split(""))&&v.length>1)){n=v.length,t=(this.width-e)/(n-1);for(var d=0,u=o.length;d<=u;d++)p=this.__charBounds[c][d],p.left+=i,d<u-1&&(p.width+=t,p.kernedWidth+=t,i+=t)}}}),le.fabric.Textbox.fromObject=function(t,e){const{text:n}=t;return e(new le.fabric.Textbox(n,t))},le.fabric.Rect;const{SelectEvent:Co,SelectMode:Vs}=Nk;function VP(t){const e=et({mSelectMode:Vs.EMPTY,mSelectOneType:"",mSelectId:"",mSelectIds:[],mSelectActive:[]}),n=p=>{if(e.mSelectMode=Vs.ONE,e.mSelectActive=p,p[0]&&_n(p[0],"clip")){o();return}p[0]&&(e.mSelectId=p[0].id,e.mSelectOneType=p[0].type,e.mSelectIds=p.map(v=>v.id))},i=p=>{e.mSelectMode=Vs.MULTI,e.mSelectId="",e.mSelectIds=p.map(v=>v.id)},o=()=>{e.mSelectId="",e.mSelectIds=[],e.mSelectMode=Vs.EMPTY,e.mSelectOneType=""};return je(()=>{t.on(Co.ONE,n),t.on(Co.MULTI,i),t.on(Co.CANCEL,o)}),JH(()=>{t.off(Co.ONE,n),t.off(Co.MULTI,i),t.off(Co.CANCEL,o)}),{mixinState:e}}var qt=(t=>(t.create="CGRATE",t.template="TEMPLATE",t.element="ELEMENT",t.text="TEXT",t.material="Material",t.ai="AI",t.mine="MINE",t))(qt||{}),Sr=(t=>(t.canvas="CANVASLIST",t.layer="LAYER",t.menu="MENU",t))(Sr||{}),Er=(t=>(t.h1="TEXT-H1,",t.h2="TEXT-H2",t.normal="TEXT-NORMAL",t))(Er||{}),Nn=(t=>(t.react="REACT",t.triangle="Triangle",t.around="Around",t.polygon="Polygon",t.line="LINE",t))(Nn||{}),ma=(t=>(t.qrcode="QRCODE",t.barCode="BARCODE",t))(ma||{}),zn=(t=>(t.design="DESIGN",t.img="IMAGE",t.json="JSON",t.svg="SVG",t.psd="PSD",t))(zn||{});const Ye=eG({id:"editor",state:()=>({editor:null,canvas:null,zoom:1,rulerEnable:!0,tabType:qt.template,panelType:Sr.menu,showPanel:!0,panelPositoin:"left"}),actions:{setEditor(t){this.editor=t},setCanvas(t){this.canvas=t},setScale(t){this.zoom=t},updateRulerEnable(t){this.rulerEnable=t},setTabType(t){this.tabType=t},setPanelType(t){this.panelType=t},setShowPanel(t){this.showPanel=t},setPanelPositoin(t){this.panelPositoin=t}}});function vh(){return Ye(ZH)}function $i(){const t=vh(),{t:e}=Ti(),n=Re("mixinState");return{canvasEditor:t.editor,mixinState:n,t:e}}const Ah=vh();function wo(){const{t}=Ti(),e=Wh(),n=Vr(),i=(d,u,a="")=>we(this,null,function*(){Ah.editor.clear(),Ah.editor.setSize(d,u);const l=Ep().format("YYYY[\u5E74]MM[\u6708]DD[\u65E5]HH[\u5C0F\u65F6]mm[\u5206\u949F]ss[\u79D2]")+"\u521B\u5EFA\u7684\u4F5C\u54C1",s=yield v(),h=yield Xh({data:De(ve({},s),{type:"file",parentId:String(a),name:l})});return r(h.data.data.id),h}),o=(d,u="")=>we(this,null,function*(){yield Xh({data:{name:d,type:"fileType",parentId:String(u)}})}),p=()=>we(this,null,function*(){var a;const d=Ep().format("YYYY[\u5E74]MM[\u6708]DD[\u65E5]HH[\u5C0F\u65F6]mm[\u5206\u949F]ss[\u79D2]")+"\u521B\u5EFA\u7684\u4F5C\u54C1",u=yield v();return yield Xh({data:De(ve({},u),{type:"file",parentId:"",externalId:((a=n.query)==null?void 0:a.projectid)||null,name:d})})}),v=()=>we(this,null,function*(){const d=Ah.editor.getJson(),u=yield c();return{json:d,img:u==null?void 0:u.id,desc:""}}),c=()=>we(this,null,function*(){const d=(l,s)=>{for(var h=l.split(","),g=h[0].match(/:(.*?);/)[1],f=atob(h[1]),A=f.length,m=new Uint8Array(A);A--;)m[A]=f.charCodeAt(A);return new File([m],s,{type:g})},u=l=>{const s=d(l,"123.png"),h=new FormData,g=new Date;return h.append("files",s,`${g.getTime()}`),L2(h).then(f=>{const[A]=f.data;return A}).catch(f=>{console.log(f)})},a=yield canvasEditor.preview();return yield u(a)}),r=d=>{e.replace("/?id="+d)};return{createTmpl:i,createTmplByCommon:p,getTemplInfo:d=>we(this,null,function*(){return(yield tG(d)).data}),updataTemplInfo:(d,u)=>we(this,null,function*(){const a=yield v();u&&(a.name=u),yield $h(d,{data:a})}),removeTemplInfo:d=>new Promise((u,a)=>{Mi.confirm(`${t("my_spase.remove_templTip")}`,"Warning",{title:t("my_spase.remove_templ")}).then(()=>{Q2(d).then(u).catch(a)})}),routerToId:r,createdFileType:o,reNameFileType:(d,u)=>we(this,null,function*(){yield $h(u,{data:{name:d}})}),removeFileType:d=>new Promise((u,a)=>{Mi.confirm(`${t("my_spase.remove_file_type_Tip")}`,"Warning",{title:t("my_spase.remove_file_type")}).then(()=>{Q2(d).then(u).catch(a)})})}}const UP={class:"f-center pr-10px"},HP={__name:"Save",setup(t){const e=Ye(),n=Vr(),{createTmplByCommon:i,updataTemplInfo:o,routerToId:p}=wo(),{t:v}=Ti(),c={clipboard(){return we(this,null,function*(){try{yield e.editor.clipboard(),cn.success("\u590D\u5236\u6210\u529F")}catch(l){cn.error("\u590D\u5236\u5931\u8D25")}})},saveJson(){e.editor.saveJson()},saveSvg(){e.editor.saveSvg()},saveImg(){e.editor.saveImg()},clipboardBase64(){return we(this,null,function*(){try{yield e.editor.clipboardBase64(),cn.success("\u590D\u5236\u6210\u529F")}catch(l){cn.error("\u590D\u5236\u5931\u8D25")}})},saveMyClould(){return we(this,null,function*(){var s,h;const l=ur.service();try{if((s=n==null?void 0:n.query)!=null&&s.id)yield o((h=n==null?void 0:n.query)==null?void 0:h.id);else{const g=yield i();p(g.data.data.id)}}catch(g){console.log(g),cn.warning("\u8BF7\u767B\u5F55")}l.close()})}},r=Ot(function(l){c[l]&&typeof c[l]=="function"&&c[l]()},300),d=()=>{var l,s;(l=e.editor)==null||l.clear(),e.canvas.clearHistory(),(s=e.editor)==null||s.historyUpdate()},u=()=>{Mi.confirm(`${v("clearTip")}`,"Warning",{title:v("tip"),type:"warning",confirmButtonText:"ok",cancelButtonText:v("cancel")}).then(d)};return(l,s)=>{const h=st,g=it,f=Mr,A=Qr,m=Lr;return $(),se("div",UP,[M(h,{class:"ml-10px",link:"",type:"primary",onClick:u},{default:K(()=>[Be(Se(l.$t("editor.save.empty")),1)]),_:1}),M(m,{class:"ml-10px",onCommand:C(r)},{dropdown:K(()=>[M(A,null,{default:K(()=>[M(f,{command:"saveMyClould"},{default:K(()=>[Be(Se(l.$t("editor.save.save_my_spase")),1)]),_:1}),M(f,{command:"saveImg",divided:""},{default:K(()=>[Be(Se(l.$t("editor.save.save_as_picture")),1)]),_:1}),M(f,{command:"saveSvg"},{default:K(()=>[Be(Se(l.$t("editor.save.save_as_svg")),1)]),_:1}),M(f,{command:"clipboard",divided:""},{default:K(()=>[Be(Se(l.$t("editor.save.copy_to_clipboard")),1)]),_:1}),M(f,{command:"clipboardBase64"},{default:K(()=>[Be(Se(l.$t("editor.save.copy_to_clipboardstr")),1)]),_:1}),M(f,{command:"saveJson",divided:""},{default:K(()=>[Be(Se(l.$t("editor.save.save_as_json")),1)]),_:1})]),_:1})]),default:K(()=>[M(h,{type:"primary"},{default:K(()=>[Be(Se(l.$t("editor.save.download"))+" ",1),M(g,{class:"el-icon--right"},{default:K(()=>[M(C(Dr))]),_:1})]),_:1})]),_:1},8,["onCommand"])])}}},GP=Ce({__name:"PreviewCurrent",setup(t){const e=Ye(),n=ce(!1),i=ce([]),o=()=>{n.value=!1,i.value=[]},p=()=>{e.editor.preview().then(v=>{i.value=[v],n.value=!0})};return(v,c)=>{const r=st,d=eg;return $(),se(Qe,null,[M(r,{link:"",type:"primary",onClick:p},{default:K(()=>[Be(Se(v.$t("editor.preview")),1)]),_:1}),C(n)?($(),_e(d,{key:0,"url-list":C(i),onClose:o},null,8,["url-list"])):be("",!0)],64)}}}),YP={style:{display:"inline-block"}},WP=Ce({__name:"History",setup(t){const e=Ye(),n=ce(0),i=ce(0),o=()=>{e.editor.undo()},p=()=>{e.editor.redo()};return je(()=>{Le(()=>{var v;(v=e.editor)==null||v.on("historyUpdate",(c,r)=>{n.value=c,i.value=r})})}),(v,c)=>{const r=hr,d=st,u=Kt;return $(),se("div",YP,[M(u,{content:v.$t("editor.history.undo")+`(${C(n)})`},{default:K(()=>[M(d,{onClick:o,link:"",size:"small",disabled:!C(n)},{default:K(()=>[M(r,{style:$e({width:"20px",height:"20px",color:C(n)?"#333":"#ccc"}),name:"ios-undo"},null,8,["style"])]),_:1},8,["disabled"])]),_:1},8,["content"]),M(u,{content:v.$t("editor.history.redo")+`(${C(i)})`},{default:K(()=>[M(d,{onClick:p,link:"",size:"small",disabled:!C(i)},{default:K(()=>[M(r,{style:$e({width:"20px",height:"20px",color:C(i)?"#333":"#ccc"}),name:"ios-redo"},null,8,["style"])]),_:1},8,["disabled"])]),_:1},8,["content"])])}}}),XP=Ue(WP,[["__scopeId","data-v-466a7c99"]]),$P={key:0,style:{display:"inline-block"}},qP={__name:"MyTemplName",setup(t){const e=Ye(),n=Wh(),{getTemplInfo:i,updataTemplInfo:o}=wo(),p=ce(""),v=Vr(),c=ce(!1);Me(()=>v.query,a=>{a!=null&&a.id?i(a==null?void 0:a.id).then(l=>{var s,h;p.value=(h=(s=l==null?void 0:l.data)==null?void 0:s.attributes)==null?void 0:h.name}):p.value=!1}),je(()=>{Le(()=>we(this,null,function*(){var a,l,s,h;if((a=v==null?void 0:v.query)!=null&&a.id)i((l=v==null?void 0:v.query)==null?void 0:l.id).then(g=>{var f,A,m,y;p.value=(A=(f=g==null?void 0:g.data)==null?void 0:f.attributes)==null?void 0:A.name,e.editor.loadJSON(JSON.stringify((y=(m=g==null?void 0:g.data)==null?void 0:m.attributes)==null?void 0:y.json))}).catch(()=>{window.location.href="/"});else if((s=v==null?void 0:v.query)!=null&&s.projectid){const g=yield r((h=v==null?void 0:v.query)==null?void 0:h.projectid);g&&i(g).then(f=>{var A,m,y,b;n.replace(v.fullPath+"&id="+g),p.value=(m=(A=f==null?void 0:f.data)==null?void 0:A.attributes)==null?void 0:m.name,e.editor.loadJSON(JSON.stringify((b=(y=f==null?void 0:f.data)==null?void 0:y.attributes)==null?void 0:b.json))})}}))});const r=a=>{const l={populate:{img:"*"},filters:{externalId:{$eq:String(a)}},pagination:{page:1,pageSize:50}};return j2(Nh.stringify(l)).then(s=>{if(s.data.data.length)return s.data.data[0].id}).catch(s=>s)},d=()=>{if(p.value===""){cn.warning("\u6587\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"),p.value="\u9ED8\u8BA4\u6587\u4EF6\u540D\u79F0";return}c.value=!0,o(v.query.id,p.value).then().finally(()=>{c.value=!1})},u=Ot(()=>{v.query.id&&d()},3e3);return je(()=>{var a;(a=e.canvas)==null||a.on("object:modified",u)}),(a,l)=>{var f,A;const s=Ft,h=st,g=It;return(A=(f=C(v))==null?void 0:f.query)!=null&&A.id?($(),se("div",$P,[M(s,{modelValue:C(p),"onUpdate:modelValue":l[0]||(l[0]=m=>ut(p)?p.value=m:null),placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\u79F0",style:{width:"190px"},size:"small",onChange:C(u),loading:C(c)},null,8,["modelValue","onChange","loading"]),M(h,{link:"",onClick:d,loading:C(c)},null,8,["loading"]),M(g,{type:"vertical"})])):be("",!0)}}},KP=Ue(qP,[["__scopeId","data-v-6f16963d"]]),JP={class:"f-center"},ZP={class:"dialog-footer"},eF={__name:"ImportFile",setup(t){const{getImgStr:e,selectFiles:n}=Gi,{canvasEditor:i}=$i(),o=et({showModal:!1,svgStr:""}),p={insertImg:function(){n({accept:"image/*",multiple:!0}).then(d=>{Array.from(d).forEach(u=>{e(u).then(a=>{c(a)})})})},insertSvg:function(){n({accept:".svg",multiple:!0}).then(d=>{Array.from(d).forEach(u=>{e(u).then(a=>{r(a)})})})},insertSvgStrModal:function(){o.svgStr="",o.showModal=!0},insertSvgStr:function(){le.fabric.loadSVGFromString(o.svgStr,(d,u)=>{const a=le.fabric.util.groupSVGElements(d,De(ve({},u),{name:"defaultSVG"}));i.addBaseType(a,{scale:!0}),o.showModal=!1})}},v=d=>{const u=p[d];u&&typeof u=="function"&&u()};function c(d){if(!d)throw new Error("file is undefined");const u=document.createElement("img");u.src=d,document.body.appendChild(u),u.onload=()=>we(this,null,function*(){const a=yield i.createImgByElement(u);i.addBaseType(a,{scale:!0}),u.remove()})}function r(d){if(!d)throw new Error("file is undefined");le.fabric.loadSVGFromURL(d,(u,a)=>{const l=le.fabric.util.groupSVGElements(u,De(ve({},a),{name:"defaultSVG",id:Tt()}));i.addBaseType(l,{scale:!0})})}return(d,u)=>{const a=it,l=st,s=Mr,h=Qr,g=Lr,f=Ft,A=Zs;return $(),se("div",JP,[M(g,{"transfer-class-name":"fix",onCommand:v},{dropdown:K(()=>[M(h,null,{default:K(()=>[M(s,{command:"insertImg"},{default:K(()=>[Be(Se(d.$t("editor.insertFile.insert_picture")),1)]),_:1}),M(s,{command:"insertSvg"},{default:K(()=>[Be(Se(d.$t("editor.insertFile.insert_SVG")),1)]),_:1}),M(s,{command:"insertSvgStrModal"},{default:K(()=>[Be(Se(d.$t("editor.insertFile.insert_SVGStr")),1)]),_:1})]),_:1})]),default:K(()=>[M(l,{link:"",type:"primary"},{default:K(()=>[Be(Se(d.$t("editor.insertFile.insert"))+" ",1),M(a,{class:"el-icon--right"},{default:K(()=>[M(C(Dr))]),_:1})]),_:1})]),_:1}),M(A,{modelValue:C(o).showModal,"onUpdate:modelValue":u[3]||(u[3]=m=>C(o).showModal=m),title:d.$t("editor.insertFile.modal_tittle")},{footer:K(()=>[T("div",ZP,[M(l,{onClick:u[1]||(u[1]=m=>C(o).showModal=!1)},{default:K(()=>[Be("\u53D6\u6D88")]),_:1}),M(l,{type:"primary",onClick:u[2]||(u[2]=m=>v("insertSvgStr"))},{default:K(()=>[Be(" \u786E\u8BA4 ")]),_:1})])]),default:K(()=>[M(f,{modelValue:C(o).svgStr,"onUpdate:modelValue":u[0]||(u[0]=m=>C(o).svgStr=m),"show-word-limit":"",type:"textarea",placeholder:d.$t("editor.insertFile.insert_SVGStr_placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])])}}},Y1=t=>(zt("data-v-8b6e970d"),t=t(),Vt(),t),tF={class:"asa-size-wrap"},nF={class:"asa-size-wrap-item"},iF=Y1(()=>T("span",null,"\u5BBD\u5EA6",-1)),rF={class:"asa-size-wrap-item"},oF=Y1(()=>T("span",null,"\u9AD8\u5EA6",-1)),aF={"label-width":0},sF={class:"cell-wrap"},lF=["onClick"],cF={class:"cell-name"},uF={class:"cell-label"},hF={__name:"ModalSize",props:{title:{type:String,default:""}},emits:["set"],setup(t,{expose:e,emit:n}){const{canvasEditor:i}=$i(),o=n,p=t,v=ce(!1),c=ce(null),r=ce(null),d=ce([]),u=(s,h)=>{c.value=s||null,r.value=h||null,i.getSizeList().then(g=>{d.value=g}),v.value=!0},a=s=>{const[h,g]=s.split("x");c.value=Number(h),r.value=Number(g)},l=()=>we(this,null,function*(){c.value&&r.value?(o("set",c.value,r.value),v.value=!1):cn.warning("\u8BF7\u68C0\u67E5\u5C3A\u5BF8")});return e({showSetSize:u}),(s,h)=>{const g=uc,f=st,A=It,m=it,y=Zs;return $(),_e(y,{modelValue:C(v),"onUpdate:modelValue":h[2]||(h[2]=b=>ut(v)?v.value=b:null),title:p.title,"footer-hide":""},{default:K(()=>[T("h3",null,Se(s.$t("editor.importFiles.createDesign.customSize")),1),T("section",tF,[T("div",nF,[iF,M(g,{style:{width:"70%"},modelValue:C(c),"onUpdate:modelValue":h[0]||(h[0]=b=>ut(c)?c.value=b:null),min:1,placeholder:"\u8BF7\u8F93\u5165","controls-position":"right"},null,8,["modelValue"])]),T("div",rF,[oF,M(g,{style:{width:"70%"},modelValue:C(r),"onUpdate:modelValue":h[1]||(h[1]=b=>ut(r)?r.value=b:null),min:1,placeholder:"\u8BF7\u8F93\u5165","controls-position":"right"},null,8,["modelValue"])]),T("div",aF,[M(f,{type:"primary",onClick:l},{default:K(()=>[Be(Se(s.$t("editor.importFiles.createDesign.create")),1)]),_:1})])]),M(A,{direction:"horizontal"}),T("h3",null,Se(s.$t("editor.importFiles.createDesign.systemSize")),1),T("section",sF,[($(!0),se(Qe,null,We(C(d),b=>($(),se("div",{key:b.name,class:"cell-main",onClick:x=>a(`${b.width}x${b.height}x${b.unit}`)},[T("div",null,[T("div",cF,Se(b.name),1),T("div",uF,Se(`${b.width}x${b.height}${b.unit}`),1)]),M(m,null,{default:K(()=>[M(C(Oo))]),_:1})],8,lF))),128))])]),_:1},8,["modelValue","title"])}}},mh=Ue(hF,[["__scopeId","data-v-8b6e970d"]]),dF={class:"f-center"},fF={__name:"ImportJson",setup(t){Ti();const{canvasEditor:e}=$i(),{createTmpl:n,routerToId:i}=wo(),o=ce(null),p=r=>{var d,u;(u=(d={importFiles:e.insert,createDesign:v,psd:()=>we(this,null,function*(){yield e.insertPSD()})})[r])==null||u.call(d)},v=()=>{o.value.showSetSize()},c=(r,d)=>we(this,null,function*(){const u=yield n(r,d);i(u.data.data.id),cn.success("\u521B\u5EFA\u6210\u529F")});return(r,d)=>{const u=it,a=st,l=Mr,s=Qr,h=Lr;return $(),se("div",dF,[M(h,{onCommand:p},{dropdown:K(()=>[M(s,null,{default:K(()=>[M(l,{command:"createDesign"},{default:K(()=>[Be(Se(r.$t("editor.importFiles.createDesign.title")),1)]),_:1}),M(l,{command:"importFiles"},{default:K(()=>[Be(Se(r.$t("editor.importFiles.importFiles")),1)]),_:1}),M(l,{command:"psd"},{default:K(()=>[Be("PSD")]),_:1})]),_:1})]),default:K(()=>[M(a,{link:"",type:"primary"},{default:K(()=>[Be(Se(r.$t("editor.importFiles.file"))+" ",1),M(u,{class:"el-icon--right"},{default:K(()=>[M(C(Dr))]),_:1})]),_:1})]),_:1}),M(mh,{title:r.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:o,onSet:c},null,8,["title"])])}}},pF={class:"w-full flex justify-between items-center"},gF={class:"flex justify-start items-center"},vF={class:"flex justify-end items-center"},AF=T("a",{class:"mr-10px",href:"https://github.com/ikuaitu/element-fabric-editor",target:"_blank"},[T("img",{src:"https://img.shields.io/badge/GitHub-ElementFbricEditor-blue",alt:"element-fbric-editor"})],-1),mF=Ce({__name:"index",setup(t){const e=Ye(),n=ue(()=>e.rulerEnable),i=o=>{o?e.editor.rulerEnable():e.editor.rulerDisable(),e.updateRulerEnable(o),document.activeElement.blur()};return(o,p)=>{const v=AH,c=It,r=fF,d=eF,u=st,a=dn("router-link"),l=KP,s=qo,h=XP,g=GP,f=HP,A=mH;return $(),se("div",pF,[T("div",gF,[M(v),M(c,{direction:"vertical"}),M(r),M(c,{direction:"vertical"}),M(d),M(c,{direction:"vertical"}),M(a,{custom:"",to:"/editor/template"},{default:K(({navigate:m})=>[M(u,{text:"",onClick:m},{default:K(()=>[Be("\u5168\u90E8\u6A21\u677F")]),_:2},1032,["onClick"])]),_:1}),M(c,{direction:"vertical"}),M(l),M(s,{modelValue:C(n),"onUpdate:modelValue":p[0]||(p[0]=m=>ut(n)?n.value=m:null),size:"large",class:"ml-10px","inline-prompt":"","active-text":"\u6807\u5C3A","inactive-text":"\u6807\u5C3A",onChange:i},null,8,["modelValue"]),M(c,{direction:"vertical"}),M(h)]),T("div",vF,[AF,M(g),M(c,{direction:"vertical"}),M(f),M(c,{direction:"vertical"}),M(A)])])}}}),yF={class:"w-full"},bF={class:"layer-box"},CF=["onClick"],wF=["innerHTML"],xF={class:"btn-box"},_F=["innerHTML"],SF=["innerHTML"],EF=["innerHTML"],IF=["innerHTML"],kF={key:1,class:"empty-text"},BF=Ce({__name:"Layer",setup(t){const e=Re("mixinState"),n=Ye(),i=ce([]),o=g=>g.id===e.mSelectId||e.mSelectIds.includes(g.id),p=g=>({group:'<svg t="1650855307397" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2503" width="16" height="16"><path d="M839.036 130.458h-654.072c-30.102 0-54.506 24.404-54.506 54.506v654.072c0 30.102 24.404 54.506 54.506 54.506h654.072c30.102 0 54.506-24.404 54.506-54.506v-654.072c0-30.102-24.404-54.506-54.506-54.506zM839.036 811.786c0 15.050-12.196 27.249-27.249 27.249h-598.721c-15.050 0-27.249-12.196-27.249-27.249v-598.721c0-15.050 12.196-27.249 27.249-27.249h598.721c15.049 0 27.249 12.196 27.249 27.249v598.721zM730.028 421.639h-127.324v-126.817c0-30.091-24.402-54.499-54.501-54.499h-252.755c-30.098 0-54.501 24.401-54.501 54.499v253.89c0 30.091 24.402 54.499 54.501 54.499h127.324v126.817c0 30.091 24.402 54.499 54.501 54.499h252.755c30.098 0 54.501-24.401 54.501-54.499v-253.89c0-30.091-24.402-54.499-54.501-54.499zM323.36 548.137c-15.050 0-27.251-12.207-27.251-27.26v-197.694c0-15.055 12.201-27.26 27.251-27.26h196.928c15.051 0 27.251 12.207 27.251 27.26v98.458h-70.267c-30.098 0-54.501 24.401-54.501 54.499v71.998h-99.411zM547.539 477.24v43.638c0 15.055-12.202 27.26-27.251 27.26h-42.353v-43.638c0-15.055 12.202-27.26 27.251-27.26h42.353zM729.365 702.193c0 15.055-12.201 27.26-27.251 27.26h-196.928c-15.050 0-27.251-12.207-27.251-27.26v-98.981h70.267c30.098 0 54.501-24.401 54.501-54.499v-71.474h99.411c15.050 0 27.251 12.207 27.251 27.26v197.693z" p-id="2504"></path></svg>',textbox:'<svg t="1650854954008" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="14038" width="16" height="16"><path d="M720.832 692.352h-12.64L530.208 260.448a19.968 19.968 0 0 0-36.416 0L316.608 692.352h-13.44c-7.904 0-15.04 3.968-17.408 11.072a19.872 19.872 0 0 0 18.208 27.68h56.96c9.504 0 18.208-6.336 19.776-15.808a18.752 18.752 0 0 0-15.808-21.344l36.384-87.808h159.776l34.816 87.808a18.88 18.88 0 0 0-15.808 21.344c1.568 9.504 10.272 15.808 19.776 15.808h121.024c7.904 0 15.04-3.968 17.408-11.072a19.2 19.2 0 0 0-17.408-27.68z m-306.112-125.76l64.864-158.208 64.864 158.208H414.72z m-246.816-80.704c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.872-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c-0.8-6.336-5.536-11.072-11.872-11.072s-11.872 5.536-11.872 11.872v23.744c0 6.336 4.736 11.072 11.872 11.072z m-11.872 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 7.104 4.736 11.872 11.872 11.872a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m665.248-227.808c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.072-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744c0.8 7.104 5.536 11.872 11.872 11.872z m-11.072 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m-347.264 119.456h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m151.872 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-228.608 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-75.136-7.904H222.496v-11.072a12.48 12.48 0 0 0-12.672-12.64h-18.976v-37.984c0-7.104-5.536-12.64-11.872-12.64s-11.872 5.536-11.872 12.64v37.984h-10.272a12.512 12.512 0 0 0-12.672 12.64v52.992a12.48 12.48 0 0 0 12.672 12.64h52.992a12.512 12.512 0 0 0 12.672-12.64v-11.072h35.584c7.104-1.568 12.672-7.904 12.672-14.24 0-7.104-12.672-16.608-12.672-16.608z m379.68 7.904h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-251.52-642.304h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-75.936 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m151.872 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-227.808 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-7.104 0.8-11.872 5.536-11.872 12.672s4.736 11.072 11.872 11.072zM257.28 167.904H221.696v-11.072a12.512 12.512 0 0 0-12.672-12.672H156.832a12.512 12.512 0 0 0-12.672 12.672v52.992c0 7.104 5.536 12.672 12.672 12.672h11.072v35.584c1.568 7.104 7.904 12.672 14.24 12.672s16.608-12.672 16.608-12.672V222.496h11.072a12.512 12.512 0 0 0 12.672-12.672v-18.976h35.584a12.16 12.16 0 0 0 11.872-11.872 12.224 12.224 0 0 0-12.672-11.072z m356.768 22.944h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m76.736 0h23.744c6.336 0 11.072-4.736 11.072-11.072s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.072 12.64 11.072z m176.384-46.656h-52.992a12.48 12.48 0 0 0-12.64 12.672v11.072h-35.584c-7.104 1.568-12.64 7.904-12.64 14.24s12.64 16.608 12.64 16.608h35.584v11.072c0 7.104 5.536 12.672 12.64 12.672h18.976v37.984c0 7.104 5.536 12.672 11.872 12.672s11.872-5.536 11.872-12.672V222.528h11.072a12.48 12.48 0 0 0 12.64-12.672V156.864a13.76 13.76 0 0 0-13.44-12.672z m0 657.312h-11.072v-35.584c-1.568-7.104-7.904-12.64-14.24-12.64-7.104 0-16.608 12.64-16.608 12.64v35.584h-11.072a12.48 12.48 0 0 0-12.64 12.64v18.976h-35.584c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h35.584v11.072a12.48 12.48 0 0 0 12.64 12.64h52.992a12.48 12.48 0 0 0 12.64-12.64v-52.992c0-7.904-5.536-13.44-12.64-13.44z" p-id="14039"></path></svg>',"i-text":'<svg t="1650875455324" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5401" width="16" height="16"><path d="M213.333333 209.92v128h85.333334v-42.666667h170.666666v433.493334H384.853333v85.333333h256v-85.333333H554.666667V295.253333h170.666666v42.666667h85.333334v-128H213.333333z" p-id="5402"></path></svg>',image:'<svg t="1650855321307" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2701" width="16" height="16"><path d="M813.752 223.168H209.584a25.168 25.168 0 0 0-25.168 25.176v528.648a25.16 25.16 0 0 0 25.168 25.168h604.168a25.152 25.152 0 0 0 25.168-25.168V248.344a25.168 25.168 0 0 0-25.168-25.176z m-8.08 544.168H217.664V258h588.008v509.336z" p-id="2702"></path><path d="M406.752 454.168a44.24 44.24 0 1 0-0.008-88.48 44.24 44.24 0 0 0 0.008 88.48zM474.72 611.368l-67.968-94.376-110.584 158.336h442.328L605.8 426.52z" p-id="2703"></path></svg>',rect:'<svg t="1650855811131" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18499" width="16" height="16"><path d="M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z" p-id="18500"></path></svg>',circle:'<svg t="1650855860236" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19440" width="16" height="16"><path d="M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z" p-id="19441"></path></svg>',triangle:'<svg t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="16" height="16"><path d="M928.64 896a2.144 2.144 0 0 1-0.64 0H96a32.032 32.032 0 0 1-27.552-48.288l416-704c11.488-19.456 43.552-19.456 55.104 0l413.152 699.2A31.936 31.936 0 0 1 928.64 896zM152.064 832h719.84L512 222.912 152.064 832z" p-id="2033"></path></svg>',polygon:'<svg t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="16" height="16"><path d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>'})[g]||'<svg t="1650855578257" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17630" width="16" height="16"><path d="M620.606061 0a62.060606 62.060606 0 0 1 62.060606 62.060606v188.943515C874.945939 273.997576 1024 437.651394 1024 636.121212c0 214.217697-173.661091 387.878788-387.878788 387.878788-198.469818 0-362.123636-149.054061-385.117091-341.333333H62.060606a62.060606 62.060606 0 0 1-62.060606-62.060606V62.060606a62.060606 62.060606 0 0 1 62.060606-62.060606h558.545455z m62.060606 297.937455V620.606061a62.060606 62.060606 0 0 1-62.060606 62.060606H297.937455C320.636121 849.159758 463.39103 977.454545 636.121212 977.454545c188.509091 0 341.333333-152.824242 341.333333-341.333333 0-172.730182-128.294788-315.485091-294.787878-338.183757zM620.606061 46.545455H62.060606a15.515152 15.515152 0 0 0-15.406545 13.699878L46.545455 62.060606v558.545455a15.515152 15.515152 0 0 0 13.699878 15.406545L62.060606 636.121212h186.181818c0-214.217697 173.661091-387.878788 387.878788-387.878788V62.060606a15.515152 15.515152 0 0 0-13.699879-15.406545L620.606061 46.545455z m15.515151 248.242424c-188.509091 0-341.333333 152.824242-341.333333 341.333333h325.818182a15.515152 15.515152 0 0 0 15.406545-13.699879L636.121212 620.606061V294.787879z" p-id="17631"></path></svg>',v=(g,f)=>g.includes("text")?f.name||f.text:{group:"\u7EC4\u5408",image:"\u56FE\u7247",rect:"\u77E9\u5F62",circle:"\u5706\u5F62",triangle:"\u4E09\u89D2\u5F62",polygon:"\u591A\u8FB9\u5F62",path:"\u8DEF\u5F84"}[g]||"\u9ED8\u8BA4\u5143\u7D20",c=g=>{var A,m,y,b;const f=(A=n.canvas)==null?void 0:A.getObjects().find(x=>x.id===g);(m=n.canvas)==null||m.discardActiveObject(),(y=n.canvas)==null||y.setActiveObject(f),(b=n.canvas)==null||b.requestRenderAll()},r=g=>({up:'<svg t="1650442206559" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1799" width="12" height="12"><path d="M876.2 434.3L536.7 94.9c-6.6-6.6-15.5-10.3-24.7-10.3-9.3 0-18.2 3.7-24.7 10.3L147.8 434.3c-13.7 13.7-13.7 35.8 0 49.5 13.7 13.7 35.8 13.7 49.5 0L477 204.1v700.2c0 19.3 15.7 35 35 35s35-15.7 35-35V204.1l279.7 279.7c6.8 6.8 15.8 10.3 24.7 10.3s17.9-3.4 24.7-10.3c13.7-13.7 13.7-35.8 0.1-49.5z" p-id="1800"></path></svg>',down:'<svg t="1650442229022" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1997" width="12" height="12"><path d="M876.2 589.7L536.7 929.1c-6.6 6.6-15.5 10.3-24.7 10.3-9.3 0-18.2-3.7-24.7-10.3L147.8 589.7c-13.7-13.7-13.7-35.8 0-49.5 13.7-13.7 35.8-13.7 49.5 0L477 819.9V119.6c0-19.3 15.7-35 35-35s35 15.7 35 35v700.2l279.7-279.7c6.8-6.8 15.8-10.3 24.7-10.3s17.9 3.4 24.7 10.3c13.7 13.8 13.7 35.9 0.1 49.6z" p-id="1998" ></path></svg>',upTop:'<svg t="1650442106652" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1839" width="11" height="11"><path d="M548.352 219.648a58.88 58.88 0 0 0-16.896-10.752 51.2 51.2 0 0 0-38.912 0 58.88 58.88 0 0 0-16.896 10.752l-256 256a51.2 51.2 0 0 0 72.704 72.704L460.8 379.392V972.8a51.2 51.2 0 0 0 102.4 0V379.392l168.448 168.96a51.2 51.2 0 0 0 72.704-72.704zM972.8 0H51.2a51.2 51.2 0 0 0 0 102.4h921.6a51.2 51.2 0 0 0 0-102.4z" p-id="1840" ></path></svg>',downTop:'<svg t="1650442146918" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2045" width="11" height="11"><path d="M548.352 804.352a58.88 58.88 0 0 1-16.896 10.752 51.2 51.2 0 0 1-38.912 0 58.88 58.88 0 0 1-16.896-10.752l-256-256a51.2 51.2 0 0 1 72.704-72.704L460.8 644.608V51.2a51.2 51.2 0 0 1 102.4 0v593.408l168.448-168.96a51.2 51.2 0 0 1 72.704 72.704zM972.8 1024H51.2a51.2 51.2 0 0 1 0-102.4h921.6a51.2 51.2 0 0 1 0 102.4z" p-id="2046"></path></svg>'})[g],d=()=>{n.editor.up()},u=()=>{n.editor.toFront()},a=()=>{n.editor.down()},l=()=>{n.editor.toBack()},s=()=>{var g;i.value=[...((g=n.canvas)==null?void 0:g.getObjects().filter(f=>!(f instanceof le.fabric.GuideLine||f.id==="workspace")))||[]].reverse().map(f=>{const{type:A,id:m,name:y,text:b,selectable:x}=f;return{type:A,id:m,name:y,text:b,isLock:!x}}),i.value=gp(C(i),"id")},h=g=>{var f;c(g.id),g.isLock?n.editor.unLock():n.editor.lock(),(f=n.canvas)==null||f.discardActiveObject()};return je(()=>{var g;s(),(g=n.canvas)==null||g.on("after:render",s)}),Rt(()=>{var g;(g=n.canvas)==null||g.off("after:render",s)}),(g,f)=>{const A=Kt,m=Ar,y=st,b=vr,x=zh;return $(),se("div",yF,[C(i).length?($(),se(Qe,{key:0},[T("div",bF,[($(!0),se(Qe,null,We(C(i),S=>($(),se("div",{onClick:O=>c(S.id),key:S.id,class:de(o(S)&&"active")},[M(b,{class:"ellipsis"},{default:K(()=>[M(m,{span:22},{default:K(()=>[M(A,{content:S.name||S.text||S.type,placement:"left"},{default:K(()=>[T("div",null,[T("span",{class:de(o(S)&&"active"),innerHTML:p(S.type)},null,10,wF),Be(" | "+Se(v(S.type,S)),1)])]),_:2},1032,["content"])]),_:2},1024),M(m,{span:2},{default:K(()=>[M(y,{icon:S.isLock?C(A2):C(m2),link:"",onClick:O=>h(S)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024)],10,CF))),128))]),T("div",xF,[lt(M(x,null,{default:K(()=>[M(y,{onClick:d},{default:K(()=>[T("span",{innerHTML:r("up")},null,8,_F)]),_:1}),M(y,{onClick:a},{default:K(()=>[T("span",{innerHTML:r("down")},null,8,SF)]),_:1}),M(y,{onClick:u},{default:K(()=>[T("span",{innerHTML:r("upTop")},null,8,EF)]),_:1}),M(y,{onClick:l},{default:K(()=>[T("span",{innerHTML:r("downTop")},null,8,IF)]),_:1})]),_:1},512),[[Ut,C(e).mSelectMode==="one"]])])],64)):($(),se("p",kF,"\u6682\u65E0\u56FE\u5C42"))])}}}),OF=Ue(BF,[["__scopeId","data-v-59918549"]]),DF="data:image/svg+xml,%3csvg%20width='15'%20height='92'%20viewBox='0%200%2015%2092'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2092L2%200H3C3%203.77087%204.42026%207.40332%206.97794%2010.1742L10.4917%2013.9807C13.3904%2017.121%2015%2021.2378%2015%2025.5115V66.626C15%2071.0146%2013.3028%2075.2332%2010.2636%2078.399L7.1792%2081.6119C4.4975%2084.4054%203%2088.1277%203%2092H2Z'%20fill='white'/%3e%3cpath%20d='M2%2092H3C3%2088.1277%204.4975%2084.4054%207.17919%2081.612L10.2636%2078.3991C13.3028%2075.2332%2015%2071.0147%2015%2066.6261V25.5115C15%2021.2379%2013.3904%2017.121%2010.4917%2013.9807L6.97795%2010.1742C4.42026%207.40337%203%203.77085%203%200H2C2%201.91731%202.34422%203.80108%203%205.56777C3.71995%207.50734%204.81541%209.30577%206.24314%2010.8525L9.75686%2014.659C12.4851%2017.6146%2014%2021.4892%2014%2025.5115V66.6261C14%2070.7565%2012.4027%2074.7269%209.5422%2077.7066L6.4578%2080.9195C4.92573%2082.5154%203.75601%2084.3955%203%2086.4322C2.34449%2088.1982%202%2090.0818%202%2092Z'%20fill='black'%20fill-opacity='0.08'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.44061%2041.6074L9.05932%2042.2261L5.28535%2046.0001L9.05932%2049.7741L8.44061%2050.3928L4.04791%2046.0001L8.44061%2041.6074Z'%20fill='%234C535C'/%3e%3c/svg%3e",TF=[{name:"\u6DFB\u52A0",icon:"add",type:qt.create},{name:"\u6A21\u677F",icon:"template",type:qt.template},{name:"\u5143\u7D20",icon:"element",type:qt.element},{name:"\u6587\u5B57",icon:"text",type:qt.text},{name:"\u7D20\u6750",icon:"img",type:qt.material},{name:"AI",icon:"ai",type:qt.ai},{name:"\u6211\u7684",icon:"mine",type:qt.mine}],MF=[{name:"\u6807\u9898",icon:"text-h1",type:Er.h1},{name:"\u526F\u6807\u9898",icon:"text-h2",type:Er.h2},{name:"\u6B63\u6587",icon:"text-normal",type:Er.normal}],QF=[{name:"\u77E9\u5F62",icon:'<svg role="img" aria-label="shape-rectangle" focusable="false" data-icon="shape-rectangle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-rectangle"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 19V5C19.5 4.72386 19.2761 4.5 19 4.5L5 4.5C4.72386 4.5 4.5 4.72386 4.5 5L4.5 19C4.5 19.2761 4.72386 19.5 5 19.5H19C19.2761 19.5 19.5 19.2761 19.5 19ZM21 5C21 3.89543 20.1046 3 19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5Z" fill="currentColor"></path></svg>',type:Nn.react},{name:"\u4E09\u89D2\u5F62",icon:'<svg role="img" aria-label="shape-polygon" focusable="false" data-icon="shape-polygon" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-polygon"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.7949 19.1828L12.1881 3.46617C12.1068 3.31769 11.8936 3.31768 11.8122 3.46617L3.20553 19.1828C3.12732 19.3256 3.23066 19.5 3.39347 19.5H20.6069C20.7697 19.5 20.8731 19.3256 20.7949 19.1828ZM13.5038 2.74569C12.8533 1.55784 11.1471 1.55784 10.4966 2.74569L1.88988 18.4623C1.26427 19.6047 2.09097 21 3.39347 21H20.6069C21.9094 21 22.7361 19.6047 22.1105 18.4623L13.5038 2.74569Z" fill="currentColor"></path></svg>',type:Nn.triangle},{name:"\u5706\u5F62",icon:'<svg role="img" aria-label="shape-circle" focusable="false" data-icon="shape-circle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-circle"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"></path></svg>',type:Nn.around},{name:"\u591A\u8FB9\u5F62",icon:'<svg data-v-1eb84746="" t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="26" height="26"><path data-v-1eb84746="" d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>',type:Nn.polygon},{name:"\u76F4\u7EBF",icon:'<svg role="img" aria-label="shape-line" focusable="false" data-icon="shape-line" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-line"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.46967 20.5303C3.17678 20.2374 3.17678 19.7626 3.46967 19.4697L19.4697 3.46967C19.7626 3.17678 20.2374 3.17678 20.5303 3.46967C20.8232 3.76256 20.8232 4.23744 20.5303 4.53033L4.53033 20.5303C4.23744 20.8232 3.76256 20.8232 3.46967 20.5303Z" fill="currentColor"></path></svg>',type:Nn.line}],LF=[{name:"\u4E8C\u7EF4\u7801",icon:`<svg
          t="1717679888665"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          p-id="4558"
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
        >
          <path
            d="M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z"
            fill="#333333"
            p-id="4559"
          ></path>
          <path
            d="M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z"
            fill="#333333"
            p-id="4560"
          ></path>
          <path
            d="M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z"
            fill="#333333"
            p-id="4561"
          ></path>
        </svg>`,type:ma.qrcode},{name:"\u6761\u7801",icon:`<svg
          t="1717679973041"
          class="icon"
          viewBox="0 0 1024 1024"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          p-id="5747"
          width="20"
          height="20"
        >
          <path
            d="M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z"
            p-id="5748"
          ></path>
        </svg>`,type:ma.barCode}],jF=[{name:"\u65B0\u5EFA\u6A21\u677F",icon:"template",type:zn.design},{name:"\u63D2\u5165\u56FE\u7247",icon:"img",type:zn.img},{name:"\u63D2\u5165SVG",icon:"svg-file",type:zn.svg},{name:"\u63D2\u5165PSD",icon:"psd-file",type:zn.psd},{name:"\u63D2\u5165JSON",icon:"json-file",type:zn.json}],PF={class:"w-full h-fullr"},FF=T("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u56FE\u7247",-1),RF={class:"flex justify-start items-center flex-wrap min-h-40px"},NF=["onClick"],zF={class:"text-12px mt-10px"},VF={class:"-mt-10px"},UF=T("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u6587\u5B57",-1),HF={class:"flex justify-start items-center flex-wrap min-h-40px"},GF=["onClick"],YF={class:"text-12px mt-10px"},WF={class:"-mt-10px"},XF=T("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u5F62\u72B6",-1),$F={class:"flex justify-start items-center flex-wrap min-h-40px"},qF=["onClick"],KF=["innerHTML"],JF={class:"-mt-10px"},ZF=T("div",{class:"h-36px leading-36px font-bold ml-10px"},"\u6761\u7801\u56FE\u7247",-1),eR={class:"flex justify-start items-center flex-wrap min-h-40px"},tR=["onClick"],nR=["innerHTML"],iR=Ce({__name:"Create",setup(t){const{getImgStr:e,selectFiles:n}=Gi,i=Ye(),o=ce(!1),p=(s,h)=>we(this,null,function*(){i.editor.clear(),i.editor.setSize(s,h),cn.success("\u521B\u5EFA\u6210\u529F")}),v={shadow:"",fontFamily:"arial"};Ot(function(){n({accept:"image/*",multiple:!0}).then(s=>{Array.from(s).forEach(h=>{e(h).then(g=>{a(g)})})})},250);const c=Ot(function(s){return we(this,null,function*(){const h=ur.service({lock:!0,body:!0});try{switch(s){case zn.design:o.value=!0;break;case zn.img:n({accept:"image/*",multiple:!0}).then(g=>{Array.from(g).forEach(f=>{e(f).then(A=>{a(A)})})});break;case zn.svg:n({accept:".svg",multiple:!0}).then(g=>{Array.from(g).forEach(f=>{e(f).then(A=>{l(A)})})});break;case zn.json:i.editor.insert();break;case zn.psd:yield i.editor.insertPSD();break;default:break}h.close()}catch(g){h.close()}})},250),r=Ot(function(s){let h;switch(s){case Er.h1:h=new le.fabric.Textbox("\u53CC\u51FB\u7F16\u8F91\u6807\u9898",De(ve({},v),{fontWeight:"bold",fontSize:80,fill:"#000000"}));break;case Er.h2:h=new le.fabric.Textbox("\u53CC\u51FB\u7F16\u8F91\u6807\u9898",De(ve({},v),{fontWeight:"bold",fontSize:60,fill:"#000000"}));break;case Er.normal:h=new le.fabric.Textbox("\u53CC\u51FB\u7F16\u8F91\u6807\u9898",De(ve({},v),{fontSize:48,fill:"#000000"}));break}h&&i.editor.addBaseType(h,{center:!0})},250),d=Ot(function(s){switch(s){case Nn.react:const h=new le.fabric.Rect(De(ve({},v),{fill:"#F57274FF",width:400,height:400,name:"\u77E9\u5F62"}));i.editor.addBaseType(h,{center:!0});break;case Nn.triangle:const g=new le.fabric.Triangle(De(ve({},v),{width:400,height:400,fill:"#92706BFF",name:"\u4E09\u89D2\u5F62"}));i.editor.addBaseType(g,{center:!0});break;case Nn.around:const f=new le.fabric.Circle(De(ve({},v),{radius:150,fill:"#57606BFF",name:"\u5706\u5F62"}));i.editor.addBaseType(f,{center:!0});break;case Nn.polygon:const A=new le.fabric.Polygon(bu(5,200),De(ve({},v),{fill:"#CCCCCCFF",name:"\u591A\u8FB9\u5F62"}));A.set({width:400,height:400,pathOffset:{x:0,y:0}}),i.editor.addBaseType(A,{center:!0});break;case Nn.line:const m=new le.fabric.Line([100,100,10,10],De(ve({},v),{stroke:"#333",fill:"#333",name:"\u76F4\u7EBF"}));i.editor.addBaseType(m,{center:!0});break}},250),u=Ot(function(s){switch(s){case ma.qrcode:i.editor.addQrCode();break;case ma.barCode:i.editor.addBarcode();break}},250);function a(s){if(!s)throw new Error("file is undefined");const h=document.createElement("img");h.src=s,document.body.appendChild(h),h.onload=()=>we(this,null,function*(){const g=yield i.editor.createImgByElement(h);i.editor.addBaseType(g,{scale:!0}),h.remove()})}function l(s){if(!s)throw new Error("file is undefined");le.fabric.loadSVGFromURL(s,(h,g)=>{const f=le.fabric.util.groupSVGElements(h,De(ve({},g),{name:"defaultSVG",id:Tt()}));i.editor.addBaseType(f,{scale:!0})})}return(s,h)=>{const g=hr;return $(),se("div",PF,[T("section",null,[FF,T("ul",RF,[($(!0),se(Qe,null,We(C(jF),f=>($(),se("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:f.type,onClick:A=>C(c)(f.type)},[M(g,{style:{width:"24px",height:"24px"},name:f.icon,color:"#333"},null,8,["name"]),T("span",zF,Se(f.name),1)],8,NF))),128))])]),T("section",VF,[UF,T("ul",HF,[($(!0),se(Qe,null,We(C(MF),f=>($(),se("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:f.type,onClick:A=>C(r)(f.type)},[M(g,{style:{width:"24px",height:"24px"},name:f.icon,color:"#333"},null,8,["name"]),T("span",YF,Se(f.name),1)],8,GF))),128))])]),T("section",WF,[XF,T("ul",$F,[($(!0),se(Qe,null,We(C(QF),f=>($(),se("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:f.type,onClick:A=>C(d)(f.type)},[T("div",{class:"w-24px h-24px",innerHTML:f.icon},null,8,KF)],8,qF))),128))])]),T("section",JF,[ZF,T("ul",eR,[($(!0),se(Qe,null,We(C(LF),f=>($(),se("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:f.type,onClick:A=>C(u)(f.type)},[T("div",{class:"w-24px h-24px",innerHTML:f.icon},null,8,nR)],8,tR))),128))])]),M(mh,{title:"\u65B0\u5EFA\u8BBE\u8BA1",show:C(o),"onUpdate:show":h[0]||(h[0]=f=>ut(o)?o.value=f:null),onSet:p},null,8,["show"])])}}}),Dn=t=>(zt("data-v-6b33d29c"),t=t(),Vt(),t),rR={class:"box-border p-10px"},oR={class:"tool-box"},aR=Dn(()=>T("svg",{t:"1650875455324",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5401",width:"26",height:"26"},[T("path",{d:"M213.333333 209.92v128h85.333334v-42.666667h170.666666v433.493334H384.853333v85.333333h256v-85.333333H554.666667V295.253333h170.666666v42.666667h85.333334v-128H213.333333z","p-id":"5402"})],-1)),sR=[aR],lR=Dn(()=>T("svg",{t:"1650854954008",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14038",width:"26",height:"26"},[T("path",{d:"M720.832 692.352h-12.64L530.208 260.448a19.968 19.968 0 0 0-36.416 0L316.608 692.352h-13.44c-7.904 0-15.04 3.968-17.408 11.072a19.872 19.872 0 0 0 18.208 27.68h56.96c9.504 0 18.208-6.336 19.776-15.808a18.752 18.752 0 0 0-15.808-21.344l36.384-87.808h159.776l34.816 87.808a18.88 18.88 0 0 0-15.808 21.344c1.568 9.504 10.272 15.808 19.776 15.808h121.024c7.904 0 15.04-3.968 17.408-11.072a19.2 19.2 0 0 0-17.408-27.68z m-306.112-125.76l64.864-158.208 64.864 158.208H414.72z m-246.816-80.704c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.872-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c-0.8-6.336-5.536-11.072-11.872-11.072s-11.872 5.536-11.872 11.872v23.744c0 6.336 4.736 11.072 11.872 11.072z m-11.872 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 7.104 4.736 11.872 11.872 11.872a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m665.248-227.808c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0-75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 151.872c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m11.072-216.736a12.16 12.16 0 0 0 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744c0.8 7.104 5.536 11.872 11.872 11.872z m-11.072 292.672c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m0 75.936c0 6.336 5.536 11.872 11.872 11.872s11.872-5.536 11.872-11.872v-23.744c0-6.336-5.536-11.872-11.872-11.872s-11.872 5.536-11.872 11.872v23.744z m-347.264 119.456h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m151.872 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m-228.608 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-75.136-7.904H222.496v-11.072a12.48 12.48 0 0 0-12.672-12.64h-18.976v-37.984c0-7.104-5.536-12.64-11.872-12.64s-11.872 5.536-11.872 12.64v37.984h-10.272a12.512 12.512 0 0 0-12.672 12.64v52.992a12.48 12.48 0 0 0 12.672 12.64h52.992a12.512 12.512 0 0 0 12.672-12.64v-11.072h35.584c7.104-1.568 12.672-7.904 12.672-14.24 0-7.104-12.672-16.608-12.672-16.608z m379.68 7.904h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872z m75.936 0h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h23.744c6.336 0 11.872-5.536 11.872-11.872s-4.736-11.872-11.872-11.872z m-251.52-642.304h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-75.936 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m151.872 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m-227.808 0h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-7.104 0.8-11.872 5.536-11.872 12.672s4.736 11.072 11.872 11.072zM257.28 167.904H221.696v-11.072a12.512 12.512 0 0 0-12.672-12.672H156.832a12.512 12.512 0 0 0-12.672 12.672v52.992c0 7.104 5.536 12.672 12.672 12.672h11.072v35.584c1.568 7.104 7.904 12.672 14.24 12.672s16.608-12.672 16.608-12.672V222.496h11.072a12.512 12.512 0 0 0 12.672-12.672v-18.976h35.584a12.16 12.16 0 0 0 11.872-11.872 12.224 12.224 0 0 0-12.672-11.072z m356.768 22.944h23.744c6.336 0 11.872-5.536 11.872-11.872s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872z m76.736 0h23.744c6.336 0 11.072-4.736 11.072-11.072s-5.536-11.872-11.872-11.872h-23.744c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.072 12.64 11.072z m176.384-46.656h-52.992a12.48 12.48 0 0 0-12.64 12.672v11.072h-35.584c-7.104 1.568-12.64 7.904-12.64 14.24s12.64 16.608 12.64 16.608h35.584v11.072c0 7.104 5.536 12.672 12.64 12.672h18.976v37.984c0 7.104 5.536 12.672 11.872 12.672s11.872-5.536 11.872-12.672V222.528h11.072a12.48 12.48 0 0 0 12.64-12.672V156.864a13.76 13.76 0 0 0-13.44-12.672z m0 657.312h-11.072v-35.584c-1.568-7.104-7.904-12.64-14.24-12.64-7.104 0-16.608 12.64-16.608 12.64v35.584h-11.072a12.48 12.48 0 0 0-12.64 12.64v18.976h-35.584c-6.336 0-11.872 5.536-11.872 11.872s5.536 11.872 11.872 11.872h35.584v11.072a12.48 12.48 0 0 0 12.64 12.64h52.992a12.48 12.48 0 0 0 12.64-12.64v-52.992c0-7.904-5.536-13.44-12.64-13.44z","p-id":"14039"})],-1)),cR=[lR],uR=Dn(()=>T("svg",{t:"1650855811131",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18499",width:"26",height:"26"},[T("path",{d:"M864 896H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h704a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zM192 832h640V192H192v640z","p-id":"18500"})],-1)),hR=[uR],dR=Dn(()=>T("svg",{t:"1650855860236",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19440",width:"26",height:"26"},[T("path",{d:"M512 928C282.624 928 96 741.376 96 512S282.624 96 512 96s416 186.624 416 416-186.624 416-416 416z m0-768C317.92 160 160 317.92 160 512s157.92 352 352 352 352-157.92 352-352S706.08 160 512 160z","p-id":"19441"})],-1)),fR=[dR],pR=Dn(()=>T("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2032",width:"26",height:"26"},[T("path",{d:"M928.64 896a2.144 2.144 0 0 1-0.64 0H96a32.032 32.032 0 0 1-27.552-48.288l416-704c11.488-19.456 43.552-19.456 55.104 0l413.152 699.2A31.936 31.936 0 0 1 928.64 896zM152.064 832h719.84L512 222.912 152.064 832z","p-id":"2033"})],-1)),gR=[pR],vR=Dn(()=>T("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2032",width:"26",height:"26"},[T("path",{d:"M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z","p-id":"2033"})],-1)),AR=[vR],mR={class:"tool-box"},yR=Dn(()=>T("svg",{t:"1673022047861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4206",width:"20",height:"20"},[T("path",{d:"M187.733333 1024h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066667v-170.666666c0-10.24 6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667v170.666666c0 10.24-6.826667 17.066667-17.066667 17.066667zM34.133333 989.866667h136.533334v-136.533334H34.133333v136.533334zM1006.933333 204.8h-170.666666c-10.24 0-17.066667-6.826667-17.066667-17.066667v-170.666666c0-10.24 6.826667-17.066667 17.066667-17.066667h170.666666c10.24 0 17.066667 6.826667 17.066667 17.066667v170.666666c0 10.24-6.826667 17.066667-17.066667 17.066667zM853.333333 170.666667h136.533334V34.133333h-136.533334v136.533334z",fill:"","p-id":"4207"}),T("path",{d:"M187.733333 853.333333c-3.413333 0-10.24 0-13.653333-3.413333-6.826667-6.826667-6.826667-17.066667 0-23.893333l648.533333-648.533334c6.826667-6.826667 17.066667-6.826667 23.893334 0s6.826667 17.066667 0 23.893334l-648.533334 648.533333c0 3.413333-6.826667 3.413333-10.24 3.413333z",fill:"","p-id":"4208"})],-1)),bR=[yR],CR=Dn(()=>T("svg",{t:"1673026778912",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2659",width:"20",height:"20"},[T("path",{d:"M320 738.133333L827.733333 230.4l-29.866666-29.866667L290.133333 708.266667v-268.8h-42.666666v341.333333h341.333333v-42.666667H320z",fill:"#444444","p-id":"2660"})],-1)),wR=[CR],xR=Dn(()=>T("svg",{t:"1715323097309",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"24572",width:"20",height:"20"},[T("path",{d:"M485.954269 735.978673 643.38051 811.107852C688.831327 832.798434 686.17686 860.459274 635.3838 871.903075L81.378406 996.721881C31.19882 1008.027444-1.313538 976.266799 10.130269 925.473745L134.949081 371.468357C146.254656 321.288783 173.611855 317.095036 195.744311 363.471653L270.873453 520.897858 903.670271 62.052983C986.301645 2.136458 1004.805285 20.426857 944.799125 103.181838L485.954269 735.978673Z",fill:"#444444","p-id":"24573"})],-1)),_R=[xR],SR=Dn(()=>T("svg",{t:"1650874633978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"203255",width:"26",height:"26"},[T("path",{d:"M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z","p-id":"203355"})],-1)),ER=[SR],IR={class:"tool-box"},kR=Dn(()=>T("svg",{t:"1717679888665",class:"icon",viewBox:"0 0 1024 1024",version:"1.1","p-id":"4558",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},[T("path",{d:"M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z","p-id":"4559"}),T("path",{d:"M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z","p-id":"4560"}),T("path",{d:"M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z","p-id":"4561"})],-1)),BR=[kR],OR=Dn(()=>T("svg",{t:"1717679973041",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5747",width:"20",height:"20"},[T("path",{d:"M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z","p-id":"5748"})],-1)),DR=[OR],TR={__name:"Element",setup(t){const e={polygon:"polygon",freeDraw:"freeDraw",pathText:"pathText"},n={shadow:"",fontFamily:"arial"},{t:i}=Ti(),{canvasEditor:o}=$i(),p=et({isDrawingLineMode:!1,lineType:!1}),v=y=>{m();const b=new le.fabric.IText(i("everything_is_fine"),De(ve({},n),{fontSize:80,fill:"#000000FF"}));o.addBaseType(b,{center:!0,event:y})},c=y=>{m();const b=new le.fabric.Textbox(i("everything_goes_well"),De(ve({},n),{splitByGrapheme:!0,width:400,fontSize:80,fill:"#000000FF"}));o.addBaseType(b,{center:!0,event:y})},r=y=>{m();const b=new le.fabric.Triangle(De(ve({},n),{width:400,height:400,fill:"#92706BFF",name:"\u4E09\u89D2\u5F62"}));o.addBaseType(b,{center:!0,event:y})},d=y=>{m();const b=new le.fabric.Polygon(bu(5,200),De(ve({},n),{fill:"#CCCCCCFF",name:"\u591A\u8FB9\u5F62"}));b.set({width:400,height:400,pathOffset:{x:0,y:0}}),o.addBaseType(b,{center:!0,event:y})},u=y=>{m();const b=new le.fabric.Circle(De(ve({},n),{radius:150,fill:"#57606BFF",name:"\u5706\u5F62"}));o.addBaseType(b,{center:!0,event:y})},a=y=>{m();const b=new le.fabric.Rect(De(ve({},n),{fill:"#F57274FF",width:400,height:400,name:"\u77E9\u5F62"}));o.addBaseType(b,{center:!0,event:y})},l=()=>{const y=()=>{p.lineType=!1,p.isDrawingLineMode=!1,A(!p.isDrawingLineMode,!p.isDrawingLineMode)};p.lineType!==e.polygon?(h(),g(),p.lineType=e.polygon,p.isDrawingLineMode=!0,o.beginDrawPolygon(y),o.endDraw(),A(!p.isDrawingLineMode,!p.isDrawingLineMode)):o.discardPolygon()},s=()=>{p.lineType===e.freeDraw?(o.endDraw(),p.lineType=!1,p.isDrawingLineMode=!1):(h(),g(),p.lineType=e.freeDraw,p.isDrawingLineMode=!0,o.startDraw({width:20}))},h=()=>{o.discardPolygon(),o.endDraw(),o.endTextPathDraw()},g=()=>{p.isDrawingLineMode=!1,p.lineType="",o.setMode(p.isDrawingLineMode),o.setLineType(p.lineType)},f=y=>{[e.polygon,e.freeDraw,e.pathText].includes(p.lineType)&&h(),p.lineType===y?(p.isDrawingLineMode=!1,p.lineType=""):(p.isDrawingLineMode=!0,p.lineType=y),o.setMode(p.isDrawingLineMode),o.setLineType(y),A(!p.isDrawingLineMode,!p.isDrawingLineMode)},A=(y,b)=>{o.canvas.forEachObject(x=>{x.id!=="workspace"&&(x.selectable=b,x.evented=y)})},m=()=>{p.isDrawingLineMode&&(p.isDrawingLineMode=!1,p.lineType="",o.setMode(!1),h(),A(!0,!0))};return nG(()=>{m()}),(y,b)=>{const x=It,S=hr;return $(),se("div",rR,[M(x,{"content-position":"left"},{default:K(()=>[Be(Se(y.$t("editor.common_elements")),1)]),_:1}),T("div",oR,[T("span",{onClick:b[0]||(b[0]=()=>v()),draggable:!0,onDragend:v},sR,32),T("span",{onClick:b[1]||(b[1]=()=>c()),draggable:!0,onDragend:c},cR,32),T("span",{onClick:b[2]||(b[2]=()=>a()),draggable:!0,onDragend:a},hR,32),T("span",{onClick:b[3]||(b[3]=()=>u()),draggable:!0,onDragend:u},fR,32),T("span",{onClick:b[4]||(b[4]=()=>r()),draggable:!0,onDragend:r},gR,32),T("span",{onClick:b[5]||(b[5]=()=>d()),draggable:!0,onDragend:d},AR,32)]),M(x,{"content-position":"left"},{default:K(()=>[Be(Se(y.$t("editor.draw_elements")),1)]),_:1}),T("div",mR,[T("span",{onClick:b[6]||(b[6]=O=>f("line")),class:de(C(p).isDrawingLineMode&&C(p).lineType==="line"&&"bg")},bR,2),T("span",{onClick:b[7]||(b[7]=O=>f("arrow")),class:de(C(p).isDrawingLineMode&&C(p).lineType==="arrow"&&"bg")},wR,2),T("span",{onClick:b[8]||(b[8]=O=>f("thinTailArrow")),class:de(C(p).isDrawingLineMode&&C(p).lineType==="thinTailArrow"&&"bg")},_R,2),T("span",{onClick:l,class:de(C(p).isDrawingLineMode&&C(p).lineType==="polygon"&&"bg")},ER,2),T("span",{onClick:s,class:de(C(p).isDrawingLineMode&&C(p).lineType==="freeDraw"&&"bg")},[M(S,{style:{width:"20px",height:"20px"},name:"editor-brush"})],2)]),M(x,{"content-position":"left"},{default:K(()=>[Be(Se(y.$t("editor.code_img")),1)]),_:1}),T("div",IR,[T("span",{onClick:b[9]||(b[9]=(...O)=>C(o).addQrCode&&C(o).addQrCode(...O))},BR),T("span",{onClick:b[10]||(b[10]=(...O)=>C(o).addBarcode&&C(o).addBarcode(...O))},DR)])])}}},MR=Ue(TR,[["__scopeId","data-v-6b33d29c"]]),ya=qh,QR=t=>qn.get(`${ya}/api/${t}?pagination[pageSize]=200`),LR=(t,e)=>qn.get(`${ya}/api/${t}?${e}`),jR=t=>qn.get(`${ya}/api/templs/${t}`);function PR(t,e){return e.forEach(n=>{const{key:i,value:o,type:p}=n;o&&(t.filters[i]={[p]:o})}),Nh.stringify(t)}function FR(t,e,n,i,o,p,v){return PR({populate:{img:"*"},filters:{},fields:v,pagination:{page:t,pageSize:p}},[{key:i,value:e,type:"$eq"},{key:o,value:n,type:"$contains"}])}function RR(t){var n,i;const e=((i=(n=t==null?void 0:t.data)==null?void 0:n.attributes)==null?void 0:i.url)||"";return ya+e}function NR(t){var n,i,o,p,v,c;const e=((p=(o=(i=(n=t==null?void 0:t.data)==null?void 0:n.attributes)==null?void 0:i.formats)==null?void 0:o.small)==null?void 0:p.url)||((c=(v=t==null?void 0:t.data)==null?void 0:v.attributes)==null?void 0:c.url)||"";return ya+e}function zR({typeUrl:t,listUrl:e,searchTypeKey:n,searchWordKey:i,scrollElement:o,pageSize:p,fields:v=[]}){const c=ce(!1),r=ce(""),d=ce(""),u=ce([]),a=ue(()=>{var S;return((S=u.value.find(O=>O.value===d.value))==null?void 0:S.lable)||"\u5168\u90E8"}),l=ce([]),s=ce(1),h=et({page:0,pageCount:0,pageSize:10,total:0}),g=ue(()=>h.page===s.value&&h.page>=h.pageCount),f=()=>we(this,null,function*(){c.value=!0;try{const S=(yield QR(t)).data.data.map(O=>({value:O.id,label:O.attributes.name}));u.value=[{label:"\u5168\u90E8",value:""},...S]}catch(S){u.value=[]}c.value=!1}),A=()=>we(this,null,function*(){c.value=!0;try{const S=FR(s.value,d.value,r.value,n,i,p,v),O=yield LR(e,S),R=O.data.data.map(Z=>{var ee;return{id:Z.id,name:Z.attributes.name,desc:Z.attributes.desc,json:(ee=Z.attributes)==null?void 0:ee.json,src:RR(Z.attributes.img),previewSrc:NR(Z.attributes.img)}});Object.keys(O.data.meta.pagination).forEach(Z=>{h[Z]=O.data.meta.pagination[Z]}),l.value=[...l.value,...R]}catch(S){console.log(S)}c.value=!1}),m=()=>{l.value=[],s.value=1,A()},y=()=>{console.log("-----------------"),!(s.value>=h.pageCount)&&(s.value++,setTimeout(()=>{A()},1e3))},b=ce(!1),x=ce(0);return{startPage:()=>we(this,null,function*(){const S=document.querySelector(o);x.value=S.offsetHeight,b.value=!0,yield f(),yield A()}),searchKeyWord:r,typeValue:d,typeText:a,typeList:u,pageLoading:c,pageData:l,isDownBottm:g,startGetList:m,nextPage:y,scrollHeight:x,showScroll:b,getInfo:jR}}const VR={class:"box-border p-10px"},UR={class:"search-box"},HR={style:{height:"calc(100vh - 108px)"},id:"myTemplBox"},GR={class:"list-box"},YR={class:"tmpl-img-box"},WR={__name:"Template",setup(t){const e=Ye(),n=Wh(),i=Vr(),{t:o}=Ti();$i();const{startPage:p,typeValue:v,typeText:c,typeList:r,pageLoading:d,pageData:u,searchKeyWord:a,isDownBottm:l,startGetList:s,nextPage:h,showScroll:g,scrollHeight:f,getInfo:A}=zR({typeUrl:"templ-types",listUrl:"templs",searchTypeKey:"templ_type",searchWordKey:"name",pageSize:10,scrollElement:"#myTemplBox",fields:["name"]});v.value=4;const m=Z=>{Mi({title:o("tip"),message:`${o("replaceTip")}`,showCancelButton:!0,confirmButtonText:o("ok"),cancelButtonText:o("cancel")}).then(()=>y(Z))},y=Z=>we(this,null,function*(){const ee=ur.service({text:o("alert.loading_data")}),re=yield A(Z.id);i.query.admin?n.replace("/?tempId="+Z.id+"&admin=true"):n.replace("/?tempId="+Z.id),e.editor.loadJSON(JSON.stringify(re.data.data.attributes.json),ee==null?void 0:ee.close())}),b=Ot(s,200),x=()=>we(this,null,function*(){if(i.query.tempId)try{const Z=ur.service({text:o("alert.loading_data")}),ee=yield A(i.query.tempId);e.editor.loadJSON(JSON.stringify(ee.data.data.attributes.json),Z==null?void 0:Z.close())}catch(Z){console.log(Z)}}),S=ce(),O=ce(0),R=Qn(function(Z){if(C(d))return;const ee=S.value.wrapRef;S.value.moveY=ee.scrollTop*100/ee.clientHeight,S.value.moveX=ee.scrollLeft*100/ee.clientWidth;let re=ee.scrollHeight-ee.clientHeight;Z.scrollTop+2>=re&&(O.value=Z.scrollTop,h())},300);return je(()=>{p(),x()}),(Z,ee)=>{const re=ei,ae=Pn,ne=Ft,J=$o,P=Kt,U=It,W=Js,F=y2;return $(),se("div",VR,[T("div",UR,[M(ae,{class:"select",modelValue:C(v),"onUpdate:modelValue":ee[0]||(ee[0]=E=>ut(v)?v.value=E:null),onChange:C(b),disabled:C(d),placeholder:"\u8BF7\u9009\u62E9"},{default:K(()=>[($(!0),se(Qe,null,We(C(r),E=>($(),_e(re,{value:E.value,label:E.label,key:E.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue","onChange","disabled"]),M(ne,{class:"input",placeholder:`\u5728${C(c)}\u4E2D\u641C\u7D22`,modelValue:C(a),"onUpdate:modelValue":ee[1]||(ee[1]=E=>ut(a)?a.value=E:null),search:"",disabled:C(d),onKeyup:hn(C(s),["enter"])},null,8,["placeholder","modelValue","disabled","onKeyup"])]),lt(($(),se("div",HR,[C(g)?($(),_e(W,{ref_key:"scrollbarRef",ref:S,key:"mysscroll",onScroll:C(R),height:C(f)},{default:K(()=>[T("div",GR,[($(!0),se(Qe,null,We(C(u),E=>($(),_e(P,{content:E.name,key:E.src,placement:"top"},{default:K(()=>[T("div",YR,[M(J,{src:E.previewSrc,fit:"contain",height:"100%",alt:E.name,onClick:k=>m(E)},null,8,["src","alt","onClick"])])]),_:2},1032,["content"]))),128))]),C(l)?($(),_e(U,{key:0},{default:K(()=>[Be("\u5DF2\u7ECF\u5230\u5E95\u4E86")]),_:1})):be("",!0)]),_:1},8,["onScroll","height"])):be("",!0)])),[[F,C(d)]])])}}},XR=Ue(WR,[["__scopeId","data-v-11b0444c"]]),$R={class:"search-box"},qR={__name:"SearchType",props:{typeListApi:{type:Function,Object:()=>({})}},emits:["change"],setup(t,{expose:e,emit:n}){const i=t,o=n,p=ce(!1),v=ce(""),c=ce(""),r=ce([]),d=ue(()=>{var h;return((h=r.value.find(g=>g.value===v.value))==null?void 0:h.label)||"\u5168\u90E8"});je(()=>we(this,null,function*(){p.value=!0;try{const h=(yield i.typeListApi()).data.data.map(g=>({value:g.id,label:g.attributes.name}));r.value=[{label:"\u5168\u90E8",value:""},...h]}catch(h){console.log(h)}p.value=!1}));const u=()=>{o("change",{searchKeyWord:c.value,typeValue:v.value})},a=()=>{v.value="",c.value="",u()},l=h=>{v.value=h},s=Ot(u,300);return e({setType:l}),(h,g)=>{const f=st,A=ei,m=Pn,y=Ft;return $(),se("div",$R,[C(v)||C(c)?($(),_e(f,{key:0,text:"",class:"back-btn",onClick:a,icon:C(yH)},null,8,["icon"])):be("",!0),M(m,{class:"select",modelValue:C(v),"onUpdate:modelValue":g[0]||(g[0]=b=>ut(v)?v.value=b:null),disabled:C(p),placeholder:"\u8BF7\u9009\u62E9",onChange:u},{default:K(()=>[($(!0),se(Qe,null,We(C(r),b=>($(),_e(A,{value:b.value,label:b.label,key:b.value},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"]),M(y,{class:"input",placeholder:`\u5728${C(d)}\u4E2D\u641C\u7D22`,modelValue:C(c),"onUpdate:modelValue":g[1]||(g[1]=b=>ut(c)?c.value=b:null),disabled:C(p),clearable:"",onChange:C(s),onSearch:u,search:""},null,8,["placeholder","modelValue","disabled","onChange"])])}}},W1=Ue(qR,[["__scopeId","data-v-6dc45053"]]),KR={class:"material-type"},JR={class:"top"},ZR={class:"img-box"},eN=["onClick","onDragend"],tN={__name:"TypeList",props:{typeApi:{type:Function},typeListApi:{type:Function},typeKey:{type:String},formatData:{type:Function}},emits:["click","dragend"],setup(t,{emit:e}){const n=e,i=t,o=ce([]),p=()=>we(this,null,function*(){const c=yield i.typeApi();o.value=c.data.data.map(r=>({name:r.attributes.name,id:r.id,list:[]}))}),v=()=>we(this,null,function*(){let c=0;for(const r of o.value){const d=yield i.typeListApi({populate:{img:"*"},filters:{[i.typeKey]:{$eq:r.id}},pagination:{page:1,pageSize:8}});o.value[c].list=i.formatData(d.data.data),c++}});return je(()=>we(this,null,function*(){yield p(),yield v()})),(c,r)=>{const d=st,u=$o;return $(),se("div",KR,[($(!0),se(Qe,null,We(C(o),a=>($(),se("div",{class:"item",key:a.id},[T("div",JR,[T("h3",null,Se(a.name),1),M(d,{link:"",size:"small",onClick:l=>n("selectType",a.id)},{default:K(()=>[Be("\u67E5\u770B\u66F4\u591A")]),_:2},1032,["onClick"])]),T("div",ZR,[($(!0),se(Qe,null,We(a.list,l=>($(),se("div",{class:"img-item",key:l.id,onClick:s=>n("click",{info:l,e:s}),onDragend:s=>n("dragend",{info:l,e:s})},[M(u,{lazy:"",src:l.src,fit:"contain",width:"100%",height:"100%",alt:l.name},null,8,["src","alt"])],40,eN))),128))])]))),128))])}}},X1=Ue(tN,[["__scopeId","data-v-bfc18003"]]),nN=["id"],iN={key:0,class:"img-box"},rN={__name:"PageList",props:{pageListApi:{type:Function},filters:{type:Object},DOMId:{type:String,default:""},formatData:{type:Function}},emits:["back","click","dragend"],setup(t,{expose:e,emit:n}){const i=n,o=t,p=[],{pageData:v,showScroll:c,scrollHeight:r,isDownBottom:d,pageLoading:u,startPage:a,startGetList:l,nextPage:s}=b2({el:"#"+o.DOMId,apiClient:o.pageListApi,filters:o.filters,sort:p,fields:[],formatData:o.formatData}),h=ce(),g=ce(0),f=Qn(function(A){if(C(u))return;const m=h.value.wrapRef;h.value.moveY=m.scrollTop*100/m.clientHeight,h.value.moveX=m.scrollLeft*100/m.clientWidth;let y=m.scrollHeight-m.clientHeight;A.scrollTop+2>=y&&(g.value=A.scrollTop,console.log("daozdaozi dafjdakfj "),s())},300);return je(()=>we(this,null,function*(){a()})),e({startGetList:l,startPage:a}),(A,m)=>{const y=$o,b=Kt,x=It,S=Js,O=y2;return lt(($(),se("div",{class:"page-list-box",style:{height:"calc(100vh - 100px)"},id:o.DOMId,"element-loading-text":"Loading...","element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[C(c)?($(),_e(S,{ref_key:"scrollbarRef",ref:h,key:o.DOMId,height:C(r),onScroll:C(f)},{default:K(()=>[C(v).length?($(),se("div",iN,[($(!0),se(Qe,null,We(C(v),R=>($(),se("div",{class:"img-item",key:R.id},[M(b,{content:R.name,placement:"top"},{default:K(()=>[M(y,{lazy:"",src:R.src,fit:"contain",style:{width:"90px",height:"90px"},alt:R.name,onClick:Z=>i("click",{info:R,e:Z}),onDragend:Z=>i("dragend",{info:R,e:Z})},null,8,["src","alt","onClick","onDragend"])]),_:2},1032,["content"])]))),128))])):be("",!0),C(d)?($(),_e(x,{key:1},{default:K(()=>[Be(Se(C(v).length?"\u5DF2\u7ECF\u5230\u5E95\u4E86":"\u6682\u65E0\u5185\u5BB9"),1)]),_:1})):be("",!0)]),_:1},8,["height","onScroll"])):be("",!0)],8,nN)),[[O,C(u)]])}}},$1=Ue(rN,[["__scopeId","data-v-09ad8c35"]]),oN=vh();function q1(){const t=()=>{var e;return(e=oN.canvas)==null?void 0:e.getSelectionElement().getBoundingClientRect()};return{getCanvasBound:t,isOutsideCanvas:(e,n)=>{const{left:i,right:o,top:p,bottom:v}=t();return e<i||e>o||n<p||n>v}}}const aN={class:"box-border p-10px"},sN={__name:"Material",setup(t){const{canvasEditor:e}=$i(),{isOutsideCanvas:n}=q1(),i=ce(),o=et({material_type:{$contains:""},name:{$contains:""}}),p=u=>u.map(a=>({id:a.id,name:a.attributes.name,desc:a.attributes.desc,src:Vh(a.attributes.img),previewSrc:Uh(a.attributes.img)})),v=l=>we(this,[l],function*({searchKeyWord:u,typeValue:a}){o.name.$contains="",o.material_type.$contains="",yield Le(),o.name.$contains=u,o.material_type.$contains=a}),c=u=>we(this,null,function*(){o.material_type.$contains=u,i.value.setType(u),yield Le()}),r=a=>we(this,[a],function*({e:u}){if(n(u.clientX,u.clientY))return;const l=yield e.createImgByElement(u.target);e.addBaseType(l,{scale:!0,event:u})}),d=a=>we(this,[a],function*({e:u}){const l=yield e.createImgByElement(u.target);e.addBaseType(l,{scale:!0})});return je(()=>we(this,null,function*(){var a;const u=Vr();if((a=u==null?void 0:u.query)!=null&&a.loadFile){const l=u.query.loadFile,s=yield Gi.insertImgFile(l);d({target:s})}})),(u,a)=>($(),se("div",aN,[M(W1,{ref_key:"selectTypeRef",ref:i,typeListApi:C(C2),onChange:v},null,8,["typeListApi"]),lt(M(X1,{typeApi:C(C2),typeListApi:C(bH),typeKey:"material_type",formatData:p,onSelectType:c,onClick:d,onDragend:r},null,8,["typeApi","typeListApi"]),[[Ut,!C(o).material_type.$contains&&!C(o).name.$contains]]),C(o).material_type.$contains||C(o).name.$contains?($(),_e($1,{key:0,DOMId:"materialList",pageListApi:C(CH),filters:C(o),onClick:d,formatData:p,onDragend:r},null,8,["pageListApi","filters"])):be("",!0)]))}},lN={},cN={class:"box-border p-10px"};function uN(t,e){return $(),se("div",cN,"\u8BA1\u5212\u4E2D")}const hN=Ue(lN,[["render",uN]]),dN={class:"box-border p-10px"},fN={__name:"Text",setup(t){const{t:e}=Ti(),{canvasEditor:n}=$i(),{isOutsideCanvas:i}=q1(),o=h=>we(this,[h],function*({e:l,info:s}){if(i(l.clientX,l.clientY))return;const g=ur.service({text:e("alert.loading_data")});yield n.downFontByJSON(JSON.stringify(s.json));const f=JSON.parse(JSON.stringify(s.json)),A=v(f.type);new le.fabric[A].fromObject(f,m=>{n.addBaseType(m,{event:l}),g.close()})}),p=s=>we(this,[s],function*({info:l}){const h=ur.service({text:e("alert.loading_data")});yield n.downFontByJSON(JSON.stringify(l.json));const g=JSON.parse(JSON.stringify(l.json));g.id=Tt();const f=v(g.type);new le.fabric[f].fromObject(g,A=>{n.addBaseType(A),h.close()})});function v(l){return l.charAt(0).toUpperCase()+l.slice(1)}const c=ce(),r=et({font_style_type:{$contains:""},name:{$contains:""}}),d=l=>l.map(s=>({id:s.id,name:s.attributes.name,desc:s.attributes.desc,json:s.attributes.json,src:Vh(s.attributes.img),previewSrc:Uh(s.attributes.img)})),u=h=>we(this,[h],function*({searchKeyWord:l,typeValue:s}){r.name.$contains="",r.font_style_type.$contains="",yield Le(),r.name.$contains=l,r.font_style_type.$contains=s}),a=l=>we(this,null,function*(){r.font_style_type.$contains=l,c.value.setType(l),yield Le()});return(l,s)=>{var h,g,f,A;return $(),se("div",dN,[M(W1,{ref_key:"selectTypeRef",ref:c,typeListApi:C(w2),onChange:u},null,8,["typeListApi"]),lt(M(X1,{typeApi:C(w2),typeListApi:C(wH),typeKey:"font_style_type",formatData:d,onSelectType:a,onClick:p,onDragend:o},null,8,["typeApi","typeListApi"]),[[Ut,!((h=C(r))!=null&&h.font_style_type.$contains)&&!((g=C(r))!=null&&g.name.$contains)]]),(f=C(r))!=null&&f.font_style_type.$contains||(A=C(r))!=null&&A.name.$contains?($(),_e($1,{key:0,DOMId:"fontMaterialList",pageListApi:C(xH),filters:C(r),formatData:d,onClick:p,onDragend:o},null,8,["pageListApi","filters"])):be("",!0)])}}},pN={class:"my-material"},gN={key:0,class:"img-group flex justify-start flex-wrap"},vN={class:"relative tmpl-img-box"},AN={key:1,class:"tip"},mN={__name:"uploadMaterial",setup(t){const{selectFiles:e}=Gi,n=Ye(),i=ce([]),o=ce(!1),p=()=>{P2().then(u=>{var a;i.value=(a=u.data.data)==null?void 0:a.map(l=>{var s,h,g,f;return{id:l.id,name:(s=l==null?void 0:l.attributes)==null?void 0:s.name,imgUrl:qh+((f=(g=(h=l.attributes.img)==null?void 0:h.data)==null?void 0:g.attributes)==null?void 0:f.url)}}),console.log(i.value),o.value=!0}).catch(u=>{console.log(u),o.value=!1})};p();const v=()=>{e({accept:"image/*"}).then(u=>{const a=new FormData,l=new Date,[s]=u;a.append("files",s,`${l.getTime()}`),L2(a).then(h=>{const[g]=h.data;c(g.id,s.name)}).catch(h=>{console.log(h)})})},c=(u,a)=>{iG({data:{img:u,name:a}}).finally(p)},r=u=>we(this,null,function*(){const a=yield n.editor.createImgByElement(u.target);n.editor.addBaseType(a,{scale:!0})}),d=u=>{rG(u).finally(p)};return(u,a)=>{const l=st,s=it,h=$o,g=Kt;return $(),se("div",pN,[M(l,{class:"w-full",icon:C(_H),onClick:v,long:"",type:"primary"},{default:K(()=>[Be(Se(u.$t("myMaterial.uploadBtn")),1)]),_:1},8,["icon"]),C(i).length?($(),se("div",gN,[($(!0),se(Qe,null,We(C(i),(f,A)=>($(),_e(g,{content:f.name,key:`${A}-bai1-button`,placement:"top"},{default:K(()=>[T("div",vN,[M(s,{class:"del-btn",color:"red",onClick:m=>d(f.id)},{default:K(()=>[M(C(x2))]),_:2},1032,["onClick"]),M(h,{lazy:"",src:f.imgUrl,fit:"contain",height:"100%",alt:f.name,onClick:r},null,8,["src","alt"])])]),_:2},1032,["content"]))),128))])):($(),se("div",AN,"\u6682\u65E0\u7D20\u6750"))])}}},yN=Ue(mN,[["__scopeId","data-v-50728920"]]),bN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADICAYAAACDHY8MAAAAAXNSR0IArs4c6QAAB/ZJREFUeF7tnL9uXEUchWdWGGQSF4miBITkAhqchgpREOHdVElNBQ9BS4MU+2Xo8wLsNTUVjV/CCqKgSbGDdm3wrr12Iu+9M79z9rNEg+KZc76TT/f6D+S05qNMH43TaDZOuRymksfr/gz/7h0EculSySdpNury5KyDFwTmBPJVDOXk4VFK6RV4eiVwnA/fzLnyseUEVoQrvz+Y8kQb8G/EbDThaTcgX4Gj/xcO2eqslQ/fXHurqHMzt0QgsBgf2SpOkUuXv/trUvFGrgpEIF98g2QaKNM2ROFrum1YeU3HzNOtzfK8Wrbh3vpWhGu3AE+5duyb3ZzLycPS7PbtvhjhtnB/hGs1Ot88aUW+6b0I1xA/X8c1hN/oaoRrBP7iWl4r2/KvfjvCVUe+ciHCteVf/XaEq4589UJeKxsPUPl6hKsM/Np1/H5l6wWq3o9wVXGvvYzXyvYbVEuAcNVQ33gRwrXfoFoChKuG+uaL+DouwAiVIiBcJdC3XsPXcRFWqJIB4apgfscle9+cpM9+4n/DEGGLHjLkJy9v/K/7Ea4HwBsf8fHTlPZ/2fgYDohEoByvEw/homz05a9RkpCjVwKr4iFcr3A3OOzR9ynN/+HDkMCldAgXZV6Ei7LEMDlmZZI/fdkh3DB473Yqr5V346bwWTl1+fGLCcJFGgvhIq0xQJbRM4QbAOudj+S18s7oND4xv0a4SEshXKQ1BsiCcANA3fBIXis3BBj60894wkXbZ/4D8PkPwvlwJIBw4VbltTLcJD0GQrgeYfZzFL/m1Q/HmKcgXMhd+Dou5Cw9hEK4HiD2fwSvlf0zjXEiwsXY4UoKhAs5Sw+hEK4HiMMcwWvlMFzbnopwbfnfcjvChZ1mg2AItwG8YT+V18ph+bY5HeHacH+PWxHuPSDJ/ZFbhPvwfkr3nsg1sgrMb5zozfnB/nnm3W/XZV8j3L1PEE1vZhJHJLD77Kp4V4R78EVKO/cjRicTBDQJ7OyntPfDf9mXhEM2zUFJHZ/ApXQXwvEaGX80EmoTOH+9vBDu8VfaZUgPAQUCez/+ncsfTwvfjVRYi4zyBHY+f5vLn18XvlEiPyUFFAgshDudFIWsZISAPIHR7gzh5FekgAwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAgf/Q2l9NJcehCBwiEJ5B3/kG48CsR0IjAGcIZrUmV8AQQLvxEBHQisBBumlIaO7WiCwRCEsjpNcKFXIZQlgRK+jmX0/E4pTx/yvEBAQgMSCAfTHOen89r5YCUORoCCwL5OB/8drQQDun4OwGBYQnMn24L7Zav4Uk3LHRO30oCXUrlOB903TXhzp90z49SKq+2Eg2lIdAvgS4fTCfLR6484S5fL+ffSBmNUyqH/Mig3wU4zZ7A4km2/FRbbvwv/sNzeMKZkPkAAAAASUVORK5CYII=",CN={class:"file-type-box"},wN=["src"],xN={class:"more"},_N={__name:"fileType",props:{name:{type:String,default:""},itemId:{type:[Number,String],default:""}},emits:["change","select"],setup(t,{emit:e}){const{reNameFileType:n,removeFileType:i}=wo(),o=t,p=e,v=u=>{({reName:r,delete:d})[u]()},c=ce(""),r=()=>{c.value=o.name,Mi.confirm("\u91CD\u547D\u540D\u6587\u4EF6\u5939",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",message:()=>Ri(Ft,De(ve(ve({},Ft.$el),Ft.$attrs),{size:"large",modelValue:c.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0","onUpdate:modelValue":u=>{c.value=u}}))}).then(()=>we(this,null,function*(){if(c.value===""){cn.warning("\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}yield n(c.value,o.itemId),p("change")}))},d=()=>we(this,null,function*(){var a,l;const u=yield i(o.itemId);if((a=u==null?void 0:u.data)!=null&&a.msg){cn.error({content:(l=u.data)==null?void 0:l.msg,duration:3});return}p("change")});return(u,a)=>{const l=it,s=st,h=Mr,g=Qr,f=Lr;return $(),se("div",CN,[T("img",{src:C(bN)},null,8,wN),T("span",null,Se(o.name),1),T("div",{class:"click-bg",onClick:a[0]||(a[0]=A=>p("select"))}),T("div",xN,[M(f,{trigger:"click",onCommand:v},{dropdown:K(()=>[M(g,null,{default:K(()=>[M(h,{command:"reName"},{default:K(()=>[Be("\u91CD\u547D\u540D")]),_:1}),M(h,{command:"delete"},{default:K(()=>[Be("\u5220\u9664")]),_:1})]),_:1})]),default:K(()=>[M(s,{size:"small",shape:"circle",text:""},{default:K(()=>[M(l,{size:"18px"},{default:K(()=>[M(C(Oo))]),_:1})]),_:1})]),_:1})])])}}},SN=Ue(_N,[["__scopeId","data-v-ed117189"]]),EN={class:"file-type-box"},IN={class:"more"},kN={class:"dialog-footer"},BN={__name:"file",props:{name:{type:String,default:""},src:{type:String,default:""},previewSrc:{type:String,default:""},itemId:{type:[Number,String],default:""},json:{type:Object,default:()=>({})}},emits:["change"],setup(t,{emit:e}){const n=Ye(),{t:i}=Ti(),{reNameFileType:o,removeTemplInfo:p,routerToId:v,getTemplInfo:c}=wo(),r=t,d=e,u=x=>{({reName:l,delete:s,transfer:y})[x]()},a=ce(""),l=()=>{a.value=r.name,Mi.confirm({title:"\u91CD\u547D\u540D",message:Ri(Ft,De(ve(ve({},Ft.$el),Ft.$attrs),{size:"large",modelValue:a.value,autofocus:!0,placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u540D\u79F0","onUpdate:modelValue":x=>{a.value=x}}))}).then(()=>we(this,null,function*(){if(a.value===""){cn.warning("\u6587\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}yield o(a.value,r.itemId),d("change")}))},s=()=>we(this,null,function*(){yield p(r.itemId),d("change")}),h=()=>{Mi.confirm(i("replaceTip"),i("tip"),{confirmButtonText:i("ok"),cancelButtonText:i("cancel"),type:"warning"}).then(()=>{g()})},g=()=>we(this,null,function*(){const x=ur.service({text:i("alert.loading_data")}),S=yield c(r.itemId);v(r.itemId),n.editor.loadJSON(JSON.stringify(S.data.attributes.json),x.close)}),f=ce(!1),A=ce(""),m=ce([]),y=()=>we(this,null,function*(){m.value=[],A.value="";const x=yield oG();m.value=[x.data.data],f.value=!0}),b=()=>we(this,null,function*(){const x=A.value==="root"?"":A.value;yield $h(r.itemId,{data:{parentId:String(x)}}),d("change")});return(x,S)=>{const O=$o,R=it,Z=st,ee=Mr,re=Qr,ae=Lr,ne=Kt,J=vk,P=Zs;return $(),se(Qe,null,[M(ne,{content:r.name,placement:"top"},{default:K(()=>[T("div",EN,[M(O,{lazy:"",onClick:h,src:r.src,fit:"contain",height:"100%",width:"100%",alt:r.name},null,8,["src","alt"]),T("div",IN,[M(ae,{trigger:"click",onCommand:u},{list:K(()=>[M(re,null,{default:K(()=>[M(ee,{command:"reName"},{default:K(()=>[Be("\u91CD\u547D\u540D")]),_:1}),M(ee,{command:"delete"},{default:K(()=>[Be("\u5220\u9664")]),_:1}),M(ee,{command:"transfer"},{default:K(()=>[Be("\u8FC1\u79FB\u76EE\u5F55")]),_:1})]),_:1})]),default:K(()=>[M(Z,{size:"small",shape:"circle",text:""},{default:K(()=>[M(R,{size:"24px"},{default:K(()=>[M(C(Oo))]),_:1})]),_:1})]),_:1})])])]),_:1},8,["content"]),M(P,{modelValue:C(f),"onUpdate:modelValue":S[2]||(S[2]=U=>ut(f)?f.value=U:null),title:"\u8BF7\u9009\u62E9\u8FC1\u79FB\u76EE\u5F55"},{footer:K(()=>[T("div",kN,[M(Z,{onClick:S[1]||(S[1]=U=>f.value=!1)},{default:K(()=>[Be("\u53D6\u6D88")]),_:1}),M(Z,{type:"primary",onClick:b},{default:K(()=>[Be(" \u786E\u8BA4 ")]),_:1})])]),default:K(()=>[M(J,{modelValue:C(A),"onUpdate:modelValue":S[0]||(S[0]=U=>ut(A)?A.value=U:null),data:C(m),width:"200px"},null,8,["modelValue","data"])]),_:1},8,["modelValue"])],64)}}},ON=Ue(BN,[["__scopeId","data-v-5c695af6"]]),DN={class:"search-box"},TN={style:{height:"calc(100vh - 160px)"},id:"myFileTemplBox"},MN={__name:"myTempl",setup(t){const e=Vr(),{createdFileType:n,createTmpl:i}=wo(),o=et({name:{$contains:""},parentId:{$eq:"",filterEmpty:!1}}),p=["type:desc"],v=O=>O.map(R=>({id:R.id,name:R.attributes.name,type:R.attributes.type||"file",desc:R.attributes.desc,json:R.attributes.json,src:Vh(R.attributes.img),previewSrc:Uh(R.attributes.img)})),{pageData:c,showScroll:r,scrollHeight:d,isDownBottom:u,pageLoading:a,startPage:l,startGetList:s,nextPage:h}=b2({el:"#myFileTemplBox",apiClient:j2,filters:o,sort:p,fields:["name","parentId","type","externalId"],formatData:v});je(()=>we(this,null,function*(){yield b(),l()}));const g=ce(""),f=ce(null),A=O=>{O==="fileType"?(g.value="",Mi.confirm("\u65B0\u5EFA\u6587\u4EF6\u5939",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",message:()=>Ri(Ft,De(ve(ve({},Ft.$el),Ft.$attrs),{size:"large",modelValue:g.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0","onUpdate:modelValue":R=>{g.value=R}}))}).then(()=>we(this,null,function*(){if(g.value===""){cn.warning("\u6587\u4EF6\u5939\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");return}yield n(g.value,o.parentId.$eq),s()}))):f.value.showSetSize()},m=(O,R)=>we(this,null,function*(){yield i(O,R,o.parentId.$eq),s()}),y=ce([{name:"\u5168\u90E8",parentId:""}]),b=()=>we(this,null,function*(){var O;if((O=e==null?void 0:e.query)!=null&&O.id){const R=yield aG({id:e.query.id});y.value=R.data.data;const Z=R.data.data[R.data.data.length-1];o.parentId.$eq=Z.parentId}}),x=(O,R)=>{o.parentId.$eq=String(O),y.value.push({name:R,parentId:O}),s()},S=(O,R)=>{R===y.value.length-1||(o.parentId.$eq=O,y.value=y.value.slice(0,R+1),s())};return(O,R)=>{const Z=st,ee=Mr,re=Qr,ae=Lr,ne=Ft,J=IS,P=ES,U=It,W=Js;return $(),se("div",null,[T("div",DN,[M(ae,{onCommand:A,placement:"bottom-start",style:{"margin-right":"10px"},transfer:""},{dropdown:K(()=>[M(re,null,{default:K(()=>[M(ee,{command:"file"},{default:K(()=>[Be("\u65B0\u5EFA\u8BBE\u8BA1")]),_:1}),M(ee,{command:"fileType"},{default:K(()=>[Be("\u65B0\u5EFA\u6587\u4EF6\u5939")]),_:1})]),_:1})]),default:K(()=>[M(Z,{type:"primary",icon:C(Oo)},null,8,["icon"])]),_:1}),M(ne,{class:"input",placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",modelValue:C(o).name.$contains,"onUpdate:modelValue":R[0]||(R[0]=F=>C(o).name.$contains=F),search:"",disabled:C(a),onKeyup:hn(C(s),["enter"])},null,8,["modelValue","disabled","onKeyup"])]),M(P,null,{default:K(()=>[($(!0),se(Qe,null,We(C(y),(F,E)=>($(),_e(J,{onClick:k=>S(F.parentId,E),key:F.id},{default:K(()=>[Be(Se(F.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),T("div",TN,[C(r)?($(),_e(W,{key:"myFileTemplBox","on-reach-bottom":C(h),height:C(d)},{default:K(()=>[($(!0),se(Qe,null,We(C(c),F=>($(),se("div",{key:F.name,class:"item"},[F.type==="fileType"?($(),_e(SN,{key:0,itemId:F.id,name:F.name,onSelect:()=>x(F.id,F.name),onChange:C(s)},null,8,["itemId","name","onSelect","onChange"])):($(),_e(ON,{key:1,src:F.src,json:F.json,previewSrc:F.previewSrc,itemId:F.id,name:F.name,onChange:C(s)},null,8,["src","json","previewSrc","itemId","name","onChange"]))]))),128)),C(u)?($(),_e(U,{key:0,plain:""},{default:K(()=>[Be("\u5DF2\u7ECF\u5230\u5E95\u4E86")]),_:1})):be("",!0)]),_:1},8,["on-reach-bottom","height"])):be("",!0)]),M(mh,{title:O.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:f,onSet:m},null,8,["title"])])}}},QN=Ue(MN,[["__scopeId","data-v-d1d1015c"]]),LN={key:0,class:"box-border p-10px my-material"},jN={key:1,class:"tip"},PN={__name:"index",setup(t){const e=ce("templ"),n=ce(!1);return P2().then(()=>{n.value=!0}).catch(()=>{n.value=!1}),(i,o)=>{const p=SH,v=EH;return C(n)?($(),se("div",LN,[M(v,{modelValue:C(e),"onUpdate:modelValue":o[0]||(o[0]=c=>ut(e)?e.value=c:null)},{default:K(()=>[M(p,{label:"\u6A21\u677F",name:"templ"},{default:K(()=>[C(e)==="templ"?($(),_e(QN,{key:0})):be("",!0)]),_:1}),M(p,{label:"\u56FE\u7247",name:"img"},{default:K(()=>[C(e)==="img"?($(),_e(yN,{key:0})):be("",!0)]),_:1})]),_:1},8,["modelValue"])])):($(),se("div",jN,"\u8BF7\u5148\u767B\u5F55"))}}},FN=Ue(PN,[["__scopeId","data-v-8263c1cb"]]),RN=t=>(zt("data-v-6bca9bd3"),t=t(),Vt(),t),NN={class:"flex justify-start max-w-384px"},zN={class:"relative bg-#fff z-1 w-72px flex flex-col items-center pt-10px box-border border-r-#eef2f8 border-r-solid border-r-1px"},VN=["onClick"],UN=RN(()=>T("img",{src:DF},null,-1)),HN=[UN],GN=Ce({__name:"index",setup(t){const e=Ye(),{panelType:n,showPanel:i,panelPositoin:o}=F2(e),p={[qt.create]:iR,[qt.template]:XR,[qt.element]:MR,[qt.ai]:hN,[qt.text]:fN,[qt.material]:sN,[qt.mine]:FN},v=Ot(function(){e.setShowPanel(!1)},250),c=ce(qt.template),r=Ot(function(d,u){c.value=d,!C(i)&&e.setShowPanel(!0),C(o)==="bottom"&&e.setPanelPositoin("left"),C(n)!==Sr.menu&&(n.value=u)},250);return(d,u)=>{const a=hr,l=OF;return $(),se("section",NN,[T("ul",zN,[($(!0),se(Qe,null,We(C(TF),s=>($(),se("li",{class:"flex flex-col items-center mb-20px cursor-pointer",key:s.type,onClick:h=>C(r)(s.type,C(Sr).menu)},[T("div",{class:de(["px-10px f-center py-4px rounded-10px tab-item editor-item",[C(c)===s.type?"tab-item_active":""]])},[M(a,{style:{width:"24px",height:"24px"},name:s.icon,color:C(c)===s.type?"#000":"#333"},null,8,["name","color"])],2),T("span",{class:de(["text-12px",[C(c)===s.type?"font-bold":""]])},Se(s.name),3)],8,VN))),128))]),C(o)==="left"?($(),se("div",{key:0,class:de(["relative h-full transition-all transition-ease left-style-panel",[C(i)?"":"-ml-312px",C(n)===C(Sr).menu?"w-312px":"w-224px"]])},[C(i)&&C(n)===C(Sr).menu?($(),se(Qe,{key:0},[C(c)?($(),_e(sG,{key:0},[($(),_e(tn(p[C(c)])))],1024)):be("",!0),T("div",{class:"inline-block absolute -right-14px top-50% -translate-y-50% z-1 cursor-pointer",onClick:u[0]||(u[0]=(...s)=>C(v)&&C(v)(...s))},HN)],64)):($(),_e(l,{key:1}))],2)):be("",!0)])}}}),YN=Ue(GN,[["__scopeId","data-v-6bca9bd3"]]),WN={class:"absolute right-10px bottom-10px"},XN=T("svg",{t:"1650853919128",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1271",width:"14",height:"14"},[T("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z","p-id":"1272"}),T("path",{d:"M652.672 431.829333h-147.84V292.010667a35.968 35.968 0 1 0-71.978667 0v139.818666H292.010667a35.968 35.968 0 1 0 0 72.021334h140.8v140.8a35.968 35.968 0 1 0 72.021333 0v-140.8h147.84a35.968 35.968 0 1 0 0-72.021334z","p-id":"1273"})],-1),$N=T("svg",{t:"1650853934351",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1470",width:"14",height:"14"},[T("path",{d:"M970.837333 919.850667l-205.696-205.653334A382.421333 382.421333 0 0 0 853.333333 469.333333a384 384 0 0 0-384-384 384 384 0 0 0-384 384 384 384 0 0 0 384 384 382.421333 382.421333 0 0 0 244.906667-88.192l205.653333 205.653334a36.053333 36.053333 0 0 0 50.986667 0 36.266667 36.266667 0 0 0-0.042667-50.944z m-380.117333-162.986667c-38.4 16.256-79.189333 24.448-121.386667 24.448a311.296 311.296 0 0 1-220.586666-91.392A311.296 311.296 0 0 1 157.312 469.333333 311.296 311.296 0 0 1 248.746667 248.746667 311.296 311.296 0 0 1 469.333333 157.354667a311.296 311.296 0 0 1 220.586667 91.392A311.296 311.296 0 0 1 781.354667 469.333333a311.296 311.296 0 0 1-91.392 220.586667 310.186667 310.186667 0 0 1-99.242667 66.901333z","p-id":"1471"}),T("path",{d:"M652.672 431.829333H292.010667a35.968 35.968 0 1 0 0 72.021334h360.661333a35.968 35.968 0 1 0 0-72.021334z","p-id":"1472"})],-1),qN=Ce({__name:"Zoom",setup(t){const e=Ye(),n=ce(!1),i=r=>{r?e.editor.startDring():e.editor.endDring()},o=()=>{e.editor.one()},p=()=>{e.editor.big()},v=()=>{e.editor.small()},c=()=>{e.editor.auto()};return je(()=>{Le(()=>{var r,d;(r=e.editor)==null||r.on("startDring",()=>n.value=!0),(d=e.editor)==null||d.on("endDring",()=>n.value=!1)})}),Rt(()=>{var r,d;(r=e.editor)==null||r.off("startDring"),(d=e.editor)==null||d.off("endDring")}),(r,d)=>{const u=qo,a=st,l=hr,s=zh;return $(),se("div",WN,[M(u,{modelValue:C(n),"onUpdate:modelValue":d[0]||(d[0]=h=>ut(n)?n.value=h:null),size:"large",class:"mr-10px","inline-prompt":"","active-text":"\u62D6\u66F3","inactive-text":"\u62D6\u66F3",onChange:i},null,8,["modelValue"]),M(s,null,{default:K(()=>[M(a,{onClick:p},{default:K(()=>[XN]),_:1}),M(a,{onClick:v},{default:K(()=>[$N]),_:1}),M(a,{onClick:o,icon:C(h2)},null,8,["icon"]),M(a,{onClick:c},{default:K(()=>[M(l,{style:{width:"18px",height:"18px"},color:"var(--color)",name:"editor-suoxiao"})]),_:1})]),_:1})])}}}),KN={class:"box"},JN={__name:"DragMode",setup(t){const e=Ye(),n=ce(!1),i=o=>{var p,v;o?(p=e.editor)==null||p.startDring():(v=e.editor)==null||v.endDring()};return je(()=>{Le(()=>{var o,p;(o=e.editor)==null||o.on("startDring",()=>n.value=!0),(p=e.editor)==null||p.on("endDring",()=>n.value=!1)})}),Rt(()=>{var o,p;(o=e.editor)==null||o.off("startDring"),(p=e.editor)==null||p.off("endDring")}),(o,p)=>{const v=qo;return $(),se("div",KN,[M(v,{size:"large",modelValue:C(n),"onUpdate:modelValue":p[0]||(p[0]=c=>ut(n)?n.value=c:null),onChange:i,width:"60","inline-prompt":"","active-text":"Drag","inactive-text":"Drag"},null,8,["modelValue"])])}}},ZN={class:"w-full absolute left-0 right-0 bottom-0 box-border pl-20px pr-10px"},ez={class:"main-bottom relative bottom-0"},tz={class:"flex justify-between items-start"},nz={class:"flex justify-start items-center"},iz={class:"flex justify-end items-center"},rz=Ce({__name:"Operate",setup(t){const e=Ye(),{panelPositoin:n,showPanel:i,panelType:o}=F2(e),p=Ot(function(v){C(o)===v?(e.setShowPanel(!C(i)),C(n)==="bottom"&&e.setPanelPositoin("left")):(e.setPanelType(v),e.setShowPanel(!0))},250);return Ot(function(){e.setShowPanel(!C(i))},250),Ot(function(){e.setPanelPositoin(C(n)==="left"?"bottom":"left"),!C(i)&&e.setShowPanel(!0)},250),(v,c)=>{const r=hr,d=JN,u=qN;return $(),se("div",ZN,[T("div",ez,[T("div",tz,[T("div",nz,[T("div",{class:"f-center p-5px rounded-4px cursor-pointer bg-#fff",onClick:c[0]||(c[0]=ot(a=>C(p)(C(Sr).layer),["stop"]))},[M(r,{style:{width:"24px",height:"24px"},color:"#333",name:"editor-layer"})])]),T("div",iz,[M(d),M(u)])])])])}}}),oz=Ue(rz,[["__scopeId","data-v-9c0d6f31"]]),az=t=>(zt("data-v-b793e58e"),t=t(),Vt(),t),sz={class:"flex-1 w-full relative overflow-hidden",id:"workspace"},lz={class:"relative"},cz=az(()=>T("div",{class:"absolute w-full z-2 inside-shadow"},null,-1)),uz=Ce({__name:"index",setup(t){const e=Ye(),n=ue(()=>e.rulerEnable);return(i,o)=>($(),se("section",sz,[T("div",lz,[cz,T("canvas",{class:de(["w-300px h-300px mx-auto",C(n)?"design-stage-grid":""]),id:"canvas"},null,2),M(oz)])]))}}),hz=Ue(uz,[["__scopeId","data-v-b793e58e"]]),dz={key:0,class:"mb-10px attr-item-box"},fz=T("h4",null,"\u6570\u636E",-1),pz=Ce({__name:"AttributeId",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=et({id:0,linkData:["",""]}),p=r=>{var u;const d=(u=n.canvas)==null?void 0:u.getActiveObject();r&&r.target&&r.target!==d||d&&(o.id=d.get("id"),o.linkData=d.get("linkData")||["",""])},v=(r,d)=>{var a,l;const u=(a=n.canvas)==null?void 0:a.getActiveObjects()[0];u&&(u&&u.set(r,d),(l=n.canvas)==null||l.renderAll())},c=()=>{var r;(r=i==null?void 0:i.proxy)==null||r.$forceUpdate()};return je(()=>{Le(()=>{var r,d,u;p(),(r=n.editor)==null||r.on("selectCancel",c),(d=n.editor)==null||d.on("selectOne",p),(u=n.canvas)==null||u.on("object:modified",p)})}),Rt(()=>{var r,d,u;(r=n.editor)==null||r.off("selectCancel",c),(d=n.editor)==null||d.off("selectOne",p),(u=n.canvas)==null||u.off("object:modified",p)}),(r,d)=>{const u=It,a=Ft,l=el,s=tl,h=ei,g=Pn,f=Ar,A=vr;return C(e).mSelectMode==="one"?($(),se("div",dz,[M(u,{"content-position":"left"},{default:K(()=>[fz]),_:1}),M(s,{"label-width":40,class:"form-wrap"},{default:K(()=>[M(l,{label:r.$t("editor.attributes.id")},{default:K(()=>[M(a,{modelValue:C(o).id,"onUpdate:modelValue":d[0]||(d[0]=m=>C(o).id=m),onChange:d[1]||(d[1]=m=>v("id",C(o).id)),size:"small"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),M(A,{gutter:10},{default:K(()=>[M(f,{span:12},{default:K(()=>[M(g,{modelValue:C(o).linkData[0],"onUpdate:modelValue":d[2]||(d[2]=m=>C(o).linkData[0]=m),filterable:"","allow-create":"",onChange:d[3]||(d[3]=m=>v("linkData",C(o).linkData))},{default:K(()=>[M(h,{value:"src"}),M(h,{value:"text"})]),_:1},8,["modelValue"])]),_:1}),M(f,{span:12},{default:K(()=>[M(a,{modelValue:C(o).linkData[1],"onUpdate:modelValue":d[4]||(d[4]=m=>C(o).linkData[1]=m),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1})])):be("",!0)}}});function yh(t,e){return e===void 0&&(e=15),+parseFloat(Number(t).toPrecision(e))}function si(t){var e=t.toString().split(/[eE]/),n=(e[0].split(".")[1]||"").length-+(e[1]||0);return n>0?n:0}function ba(t){if(t.toString().indexOf("e")===-1)return Number(t.toString().replace(".",""));var e=si(t);return e>0?yh(Number(t)*Math.pow(10,e)):Number(t)}function bh(t){J1&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function Us(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],o=e.slice(1);return o.reduce(function(p,v){return t(p,v)},i)}}var qi=Us(function(t,e){var n=ba(t),i=ba(e),o=si(t)+si(e),p=n*i;return bh(p),p/Math.pow(10,o)}),gz=Us(function(t,e){var n=Math.pow(10,Math.max(si(t),si(e)));return(qi(t,n)+qi(e,n))/n}),vz=Us(function(t,e){var n=Math.pow(10,Math.max(si(t),si(e)));return(qi(t,n)-qi(e,n))/n}),K1=Us(function(t,e){var n=ba(t),i=ba(e);return bh(n),bh(i),qi(n/i,yh(Math.pow(10,si(e)-si(t))))});function Az(t,e){var n=Math.pow(10,e),i=K1(Math.round(Math.abs(qi(t,n))),n);return t<0&&i!==0&&(i=qi(i,-1)),i}var J1=!0;function mz(t){t===void 0&&(t=!0),J1=t}var Hs={strip:yh,plus:gz,minus:vz,times:qi,divide:K1,round:Az,digitLength:si,float2Fixed:ba,enableBoundaryChecking:mz};const yz=["aria-valuemax","aria-valuemin","aria-valuenow","value","disabled","autofocus","readonly","placeholder"],vn="asa-input-number",bz=150,Cz=Ce({__name:"InputNumber",props:{autofocus:{type:Boolean},parser:{},formatter:{},min:{default:-1/0},max:{default:1/0},precision:{default:2},step:{default:1},modelValue:{},defaultValue:{},modelEvent:{default:"change"},controlsOutside:{type:Boolean},hideButton:{type:Boolean},downDisabled:{type:Boolean},upDisabled:{type:Boolean},size:{default:"default"},disabled:{type:Boolean},readonly:{type:Boolean},placeholder:{},append:{},prepend:{}},emits:["update:modelValue","on-change","on-focus","on-blur","on-input"],setup(t,{expose:e,emit:n}){var L;Hs.enableBoundaryChecking(!1);const i=t,o=n,p=ce(`${vn}-input-wrap`),v=ce(`${vn}-input`),c=ce(`${vn}-handler-wrap`),r=ce([`${vn}-handler`,`${vn}-handler-up`,{[`${vn}-handler-up-disabled`]:i.upDisabled}]),d=ce([`${vn}-handler`,`${vn}-handler-down`,{[`${vn}-handler-down-disabled`]:i.downDisabled}]),u=ce(!1),a=ue(()=>[`${vn}`,{[`${vn}-${i.size}`]:!!i.size,[`${vn}-disabled`]:i.disabled,[`${vn}-focused`]:u.value,[`${vn}-controls-outside`]:i.controlsOutside}]),l=ce(),s=ue(()=>{if(Yt(i.precision)){const B=`${i.step}`.split(".")[1],Q=B&&B.length||0;return Math.max(Q,i.precision)}}),h=B=>{var w,_;if(!Yt(B))return"";const Q=s.value?B.toFixed(s.value).replace(/\.?0+$/,""):String(B);return(_=(w=i.formatter)==null?void 0:w.call(i,Q))!=null?_:Q},g=ce(h((L=i.modelValue)!=null?L:i.defaultValue)),f=B=>{u.value=!0,o("on-focus",B)},A=B=>{u.value=!1,o("on-blur",B)},m=B=>{Z(B,"minus",!0)},y=B=>{Z(B,"plus",!0)},b=B=>{B.key==="ArrowUp"?(B.preventDefault(),!i.readonly&&x("plus",B)):B.key==="ArrowDown"&&(B.preventDefault(),!i.readonly&&x("minus",B))},x=(B,Q)=>{if(B==="plus"&&(ae.value||i.upDisabled)||B==="minus"&&(re.value||i.downDisabled))return;let w;Yt(ee.value)?w=P(Hs[B](ee.value,i.step)):w=i.min===-1/0?0:i.min,g.value=h(w),ne(w),o("update:modelValue",w),o("on-change",w,Q)};let S=0;const O=()=>{S&&(window.clearTimeout(S),S=0)},R={onMouseup:O,onMouseleave:O},Z=(B,Q,w=!1)=>{var _;B.preventDefault(),(_=l.value)==null||_.focus(),x(Q,B),w&&(S=window.setTimeout(()=>B.target.dispatchEvent(B),bz))},ee=ue(()=>{var Q,w;if(!g.value)return;const B=Number((w=(Q=i.parser)==null?void 0:Q.call(i,g.value))!=null?w:g.value);return Number.isNaN(B)?void 0:B}),re=ce(Yt(ee.value)&&ee.value<=i.min),ae=ce(Yt(ee.value)&&ee.value>=i.max),ne=B=>{let Q=!1,w=!1;Yt(B)&&(B<=i.min&&(Q=!0),B>=i.max&&(w=!0)),ae.value!==w&&(ae.value=w),re.value!==Q&&(re.value=Q)},J=B=>{var w,_,I,D;let{value:Q}=B.target;Q=Q.trim().replace(//g,"."),Q=(_=(w=i.parser)==null?void 0:w.call(i,Q))!=null?_:Q,(Yt(Number(Q))||/^(\.|-)$/.test(Q))&&(g.value=(D=(I=i.formatter)==null?void 0:I.call(i,Q))!=null?D:Q,ne(ee.value),i.modelEvent==="input"&&o("update:modelValue",ee.value),o("on-input",ee.value,g.value,B))},P=B=>{if(!s2(B))return Yt(i.min)&&B<i.min&&(B=i.min),Yt(i.max)&&B>i.max&&(B=i.max),Yt(s.value)?Hs.round(B,s.value):B},U=B=>{const Q=P(ee.value),w=h(Q);(Q!==ee.value||g.value!==w)&&(g.value=w,ne(Q)),Le(()=>{Yt(i.modelValue)&&i.modelValue!==Q&&(g.value=h(i.modelValue),ne(i.modelValue))}),o("update:modelValue",Q),o("on-change",Q,B)},W=()=>{const B=P(ee.value),Q=h(B);(B!==ee.value||g.value!==Q)&&(g.value=Q),o("update:modelValue",B)},F=ce(),E=ce(),k=B=>{const Q=ce(),{posStart:w,posEnd:_}=aB(B,{threshold:0,onSwipeStart:()=>{Q.value=ee.value},onSwipe:I=>{if(!Yt(Q.value))return;const D=Q.value+Hs.round(_.x-w.x,0)*i.step;g.value=h(D),i.modelEvent==="input"?J(I):U(I)}})};return je(()=>{F.value&&k(F),E.value&&k(E)}),Me(()=>i.modelValue,B=>{B!==ee.value&&(g.value=h(B),ne(B))}),Me(()=>i.min,B=>{const Q=Yt(ee.value)&&ee.value<=B;re.value!==Q&&(re.value=Q),Yt(ee.value)&&ee.value<B&&W()}),Me(()=>i.max,B=>{const Q=Yt(ee.value)&&ee.value>=B;ae.value!==Q&&(ae.value=Q),Yt(ee.value)&&ee.value>B&&W()}),e({minus:m,plus:y,input:l.value,focus:()=>{var B;(B=l.value)==null||B.focus()},blur:()=>{var B;(B=l.value)==null||B.blur()}}),(B,Q)=>{const w=it;return $(),se("div",{class:de(C(a))},[B.controlsOutside?($(),se(Qe,{key:0},[T("div",dr({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":B.downDisabled}],onMousedown:m},R),null,16),T("div",dr({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":B.upDisabled}],onMousedown:y},R)," 2 ",16)],64)):B.hideButton?be("",!0):($(),se("div",{key:1,class:de(C(c))},[T("a",dr({class:C(r),onMousedown:y},R),[T("span",null,[M(w,{size:"12px",color:"#999"},{default:K(()=>[M(C(d2))]),_:1})])],16),T("a",dr({class:C(d),onMousedown:m},R),[T("span",null,[M(w,{size:"12px",color:"#999"},{default:K(()=>[M(C(Dr))]),_:1})])],16)],2)),T("div",{class:de(C(p))},[B.$slots.prefix?Ne(B.$slots,"prefix",{key:0},void 0,!0):B.append?($(),se("label",{key:1,ref_key:"appendLabelRef",ref:F,class:de(`${C(p)}__label`)},Se(B.append),3)):be("",!0),T("input",{ref_key:"inputRef",ref:l,type:"text",autocomplete:"off",spellcheck:"false",role:"spinbutton","aria-valuemax":B.max,"aria-valuemin":B.min,"aria-valuenow":C(g),value:C(g),class:de(C(v)),disabled:B.disabled,autofocus:B.autofocus,readonly:B.readonly,placeholder:B.placeholder,onFocus:f,onBlur:A,onInput:J,onChange:U,onKeydown:b},null,42,yz),B.$slots.suffix?Ne(B.$slots,"suffix",{key:2},void 0,!0):B.prepend?($(),se("label",{key:3,ref_key:"prependLabelRef",ref:E,class:de(`${C(p)}__label`)},Se(B.prepend),3)):be("",!0)],2)],2)}}}),An=Ue(Cz,[["__scopeId","data-v-d655ccac"]]),wz={key:0,class:"box attr-item-box"},xz=T("h4",null,"\u5706\u89D2",-1),_z=Ce({__name:"AttributeRounded",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=["rect"],p=et({rx:0,ry:0}),v=d=>{var a;const u=(a=n.canvas)==null?void 0:a.getActiveObject();d&&d.target&&d.target!==u||u&&(p.rx=u.get("rx"),p.ry=u.get("ry"))},c=d=>{const u=n.canvas.getActiveObjects()[0];u&&(u.set("ry",d),u.set("rx",d),n.canvas.renderAll())},r=()=>{var d;(d=i==null?void 0:i.proxy)==null||d.$forceUpdate()};return je(()=>{Le(()=>{var d,u,a;v(),(d=n.editor)==null||d.on("selectCancel",r),(u=n.editor)==null||u.on("selectOne",v),(a=n.canvas)==null||a.on("object:modified",v)})}),Rt(()=>{var d,u,a;(d=n.editor)==null||d.off("selectCancel",r),(u=n.editor)==null||u.off("selectOne",v),(a=n.canvas)==null||a.off("object:modified",v)}),(d,u)=>{const a=It,l=as,s=el,h=tl,g=Ar,f=vr;return C(e).mSelectMode==="one"&&o.includes(C(e).mSelectOneType)?($(),se("div",wz,[M(a,{"content-position":"left"},{default:K(()=>[xz]),_:1}),T("div",null,[M(f,{gutter:10},{default:K(()=>[M(g,{span:18,flex:"1"},{default:K(()=>[M(h,{"label-width":40,class:"form-wrap"},{default:K(()=>[M(s,{label:d.$t("attributes.rx_ry")},{default:K(()=>[M(l,{modelValue:C(p).rx,"onUpdate:modelValue":u[0]||(u[0]=A=>C(p).rx=A),max:300,onInput:u[1]||(u[1]=A=>c(A))},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),M(g,{span:6,flex:"1"},{default:K(()=>[M(C(An),{modelValue:C(p).rx,"onUpdate:modelValue":u[2]||(u[2]=A=>C(p).rx=A),min:0,max:300,onOnChange:u[3]||(u[3]=A=>c(A))},null,8,["modelValue"])]),_:1})]),_:1})])])):be("",!0)}}}),Sz=t=>(zt("data-v-50d59a3b"),t=t(),Vt(),t),Ez={key:0,class:"attr-item-box"},Iz=Sz(()=>T("h4",null,"\u8FB9\u6846",-1)),kz={class:"asa-number-warp"},Bz={class:"label",style:{"margin-right":"10px"}},Oz={style:{flex:"1"}},Dz={class:"asa-number-warp"},Tz={style:{flex:"0 0 48px","font-size":"var(--el-form-label-font-size)",color:"var(--el-text-color-regular)"}},Mz={class:"content"},Qz=Ce({__name:"AttributeBorder",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=["group"],p=et({stroke:"#fff",strokeWidth:0,strokeDashArray:[]}),v=[{value:{strokeUniform:!0,strokeDashArray:[],strokeLineCap:"butt"},label:"Stroke"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"butt"},label:"Dash-1"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"round"},label:"Dash-2"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"square"},label:"Dash-3"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"round"},label:"Dash-4"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"square"},label:"Dash-5"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"round"},label:"Dash-6"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"square"},label:"Dash-7"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"round"},label:"Dash-8"}],c=ue(()=>o.includes(e.mSelectOneType)),r=l=>{var h;const s=(h=n.canvas)==null?void 0:h.getActiveObject();if(!(l&&l.target&&l.target!==s)&&s&&!o.includes(s.type)){p.stroke=s.get("stroke"),p.strokeWidth=s.get("strokeWidth");const g=JSON.stringify(s.get("strokeDashArray")||[]),f=v.find(A=>JSON.stringify(A.value.strokeDashArray)===g&&s.get("strokeLineCap")===A.value.strokeLineCap);f&&(p.strokeDashArray=f.label)}},d=(l,s)=>{var g,f;const h=(g=n.canvas)==null?void 0:g.getActiveObjects()[0];h&&(h.set(l,s),h.set("strokeUniform",!0),(f=n.canvas)==null||f.renderAll())},u=l=>{var h,g;const s=(h=n.canvas)==null?void 0:h.getActiveObjects()[0];if(s){const f=v.find(A=>A.label===l);s.set(f.value),(g=n.canvas)==null||g.renderAll()}},a=()=>{var l;(l=i==null?void 0:i.proxy)==null||l.$forceUpdate()};return je(()=>{Le(()=>{var l,s,h;r(),(l=n.editor)==null||l.on("selectCancel",a),(s=n.editor)==null||s.on("selectOne",r),(h=n.canvas)==null||h.on("object:modified",r)})}),Rt(()=>{var l,s,h;(l=n.editor)==null||l.off("selectCancel",a),(s=n.editor)==null||s.off("selectOne",r),(h=n.canvas)==null||h.off("object:modified",r)}),(l,s)=>{const h=It,g=mi,f=Ar,A=vr,m=ei,y=Pn;return C(e).mSelectMode==="one"&&!C(c)?($(),se("div",Ez,[M(h,{"content-position":"left"},{default:K(()=>[Iz]),_:1}),T("div",null,[M(A,{gutter:12,style:{"margin-right":"10px"}},{default:K(()=>[M(f,{span:12},{default:K(()=>[T("div",kz,[T("span",Bz,Se(l.$t("editor.color")),1),T("div",Oz,[M(g,{modelValue:C(p).stroke,"onUpdate:modelValue":s[0]||(s[0]=b=>C(p).stroke=b),onChange:s[1]||(s[1]=b=>d("stroke",b)),"show-alpha":""},null,8,["modelValue"])])])]),_:1}),M(f,{span:12},{default:K(()=>[M(C(An),{modelValue:C(p).strokeWidth,"onUpdate:modelValue":s[2]||(s[2]=b=>C(p).strokeWidth=b),onOnChange:s[3]||(s[3]=b=>d("strokeWidth",b)),append:l.$t("editor.width"),min:0},null,8,["modelValue","append"])]),_:1})]),_:1}),T("div",Dz,[T("span",Tz,Se(l.$t("editor.attributes.stroke")),1),T("div",Mz,[M(y,{modelValue:C(p).strokeDashArray,"onUpdate:modelValue":s[4]||(s[4]=b=>C(p).strokeDashArray=b),onChange:u},{default:K(()=>[($(),se(Qe,null,We(v,b=>M(m,{value:b.label,label:b.label,key:`stroke-${b.label}`},{default:K(()=>[Be(Se(b.label),1)]),_:2},1032,["value","label"])),64))]),_:1},8,["modelValue"])])])])])):be("",!0)}}}),Lz=Ue(Qz,[["__scopeId","data-v-50d59a3b"]]),jz=t=>(zt("data-v-3671ab69"),t=t(),Vt(),t),Pz={key:0,class:"box attr-item-box"},Fz=jz(()=>T("h4",null,"\u9634\u5F71",-1)),Rz={class:"f-center rounded-4px",style:{background:"#f8f8f9"}},Nz={class:"label"},zz={class:"content"},Vz=Ce({__name:"AttributeShadow",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=et({shadow:{}}),p=r=>{var u;const d=(u=n.canvas)==null?void 0:u.getActiveObject();r&&r.target&&r.target!==d||d&&(o.shadow=d.get("shadow")||{})},v=()=>{var d,u;const r=(d=n.canvas)==null?void 0:d.getActiveObjects()[0];r&&(r.set("shadow",new le.fabric.Shadow(o.shadow)),(u=n.canvas)==null||u.renderAll())},c=()=>{var r;(r=i==null?void 0:i.proxy)==null||r.$forceUpdate()};return je(()=>{Le(()=>{var r,d,u;p(),(r=n.editor)==null||r.on("selectCancel",c),(d=n.editor)==null||d.on("selectOne",p),(u=n.canvas)==null||u.on("object:modified",p)})}),Rt(()=>{var r,d,u;(r=n.editor)==null||r.off("selectCancel",c),(d=n.editor)==null||d.off("selectOne",p),(u=n.canvas)==null||u.off("object:modified",p)}),(r,d)=>{const u=It,a=mi,l=Ar,s=vr;return C(e).mSelectMode==="one"?($(),se("div",Pz,[M(u,{"content-position":"left"},{default:K(()=>[Fz]),_:1}),M(s,{gutter:12,style:{"margin-bottom":"10px"}},{default:K(()=>[M(l,{span:12},{default:K(()=>[T("div",Rz,[T("span",Nz,Se(r.$t("editor.color")),1),T("div",zz,[M(a,{modelValue:C(o).shadow.color,"onUpdate:modelValue":d[0]||(d[0]=h=>C(o).shadow.color=h),onChange:v,alpha:""},null,8,["modelValue"])])])]),_:1}),M(l,{span:12},{default:K(()=>[M(C(An),{modelValue:C(o).shadow.blur,"onUpdate:modelValue":d[1]||(d[1]=h=>C(o).shadow.blur=h),defaultValue:0,onOnChange:v,append:r.$t("editor.attributes.blur"),min:0},null,8,["modelValue","append"])]),_:1})]),_:1}),M(s,{gutter:12},{default:K(()=>[M(l,{span:12},{default:K(()=>[M(C(An),{modelValue:C(o).shadow.offsetX,"onUpdate:modelValue":d[2]||(d[2]=h=>C(o).shadow.offsetX=h),defaultValue:0,onOnChange:v,append:r.$t("editor.attributes.offset_x")},null,8,["modelValue","append"])]),_:1}),M(l,{span:12},{default:K(()=>[M(C(An),{modelValue:C(o).shadow.offsetY,"onUpdate:modelValue":d[3]||(d[3]=h=>C(o).shadow.offsetY=h),defaultValue:0,onOnChange:v,append:r.$t("editor.attributes.offset_y")},null,8,["modelValue","append"])]),_:1})]),_:1})])):be("",!0)}}}),Uz=Ue(Vz,[["__scopeId","data-v-3671ab69"]]),Hz=t=>(zt("data-v-642912a3"),t=t(),Vt(),t),Gz={key:0,class:"box attr-item-box"},Yz=Hz(()=>T("h4",null,"\u4F4D\u7F6E\u4FE1\u606F",-1)),Wz={class:"asa-number-warp"},Xz={class:"asa-number-warp"},$z=Ce({__name:"AttributePostion",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=["text","i-text","textbox","rect","circle","triangle","polygon","image","group","line","arrow","thinTailArrow"],p=et({opacity:0,angle:0,left:0,top:0,rx:0,ry:0}),v=d=>{var a,l;const u=(a=n.canvas)==null?void 0:a.getActiveObject();d&&d.target&&d.target!==u||u&&o.includes(u.type)&&(p.opacity=((l=u.get("opacity"))!=null?l:0)*100,p.left=u.get("left"),p.top=u.get("top"),p.angle=u.get("angle")||0)},c=(d,u)=>{var l,s,h,g;const a=(l=n.canvas)==null?void 0:l.getActiveObjects()[0];if(a){if(d==="opacity"){a&&a.set(d,u/100),(s=n.canvas)==null||s.renderAll();return}if(d==="angle"){a.rotate(u),(h=n.canvas)==null||h.renderAll();return}a&&a.set(d,u),(g=n.canvas)==null||g.renderAll()}},r=()=>{var d;(d=i==null?void 0:i.proxy)==null||d.$forceUpdate()};return je(()=>{Le(()=>{var d,u,a;v(),(d=n.editor)==null||d.on("selectCancel",r),(u=n.editor)==null||u.on("selectOne",v),(a=n.canvas)==null||a.on("object:modified",v)})}),Rt(()=>{var d,u,a;(d=n.editor)==null||d.off("selectCancel",r),(u=n.editor)==null||u.off("selectOne",v),(a=n.canvas)==null||a.off("object:modified",v)}),(d,u)=>{const a=It,l=Ar,s=vr,h=as;return C(e).mSelectMode==="one"?($(),se("div",Gz,[M(a,{"content-position":"left"},{default:K(()=>[Yz]),_:1}),lt(T("div",null,[M(s,{gutter:10,style:{"margin-bottom":"10px"}},{default:K(()=>[M(l,{span:12},{default:K(()=>[M(C(An),{modelValue:C(p).left,"onUpdate:modelValue":u[0]||(u[0]=g=>C(p).left=g),append:d.$t("editor.attributes.left"),onOnChange:u[1]||(u[1]=g=>c("left",g))},null,8,["modelValue","append"])]),_:1}),M(l,{span:12},{default:K(()=>[M(C(An),{modelValue:C(p).left,"onUpdate:modelValue":u[2]||(u[2]=g=>C(p).left=g),append:d.$t("editor.attributes.top"),onOnChange:u[3]||(u[3]=g=>c("top",g))},null,8,["modelValue","append"])]),_:1})]),_:1}),T("div",Wz,[T("span",null,Se(d.$t("editor.attributes.angle")),1),M(h,{modelValue:C(p).angle,"onUpdate:modelValue":u[4]||(u[4]=g=>C(p).angle=g),max:360,onInput:u[5]||(u[5]=g=>c("angle",g))},null,8,["modelValue"])]),T("div",Xz,[T("span",null,Se(d.$t("editor.attributes.opacity")),1),M(h,{modelValue:C(p).opacity,"onUpdate:modelValue":u[6]||(u[6]=g=>C(p).opacity=g),onInput:u[7]||(u[7]=g=>c("opacity",g))},null,8,["modelValue"])])],512),[[Ut,o.includes(C(e).mSelectOneType)]])])):be("",!0)}}}),qz=Ue($z,[["__scopeId","data-v-642912a3"]]),Z1=t=>(zt("data-v-cd4ba0d0"),t=t(),Vt(),t),Kz={key:0,class:"box attr-item-box"},Jz=Z1(()=>T("h4",null,"\u6587\u672C\u5185\u5BB9",-1)),Zz=Z1(()=>T("h4",null,"\u6587\u672C\u8DEF\u5F84",-1)),eV={class:"ivu-col__box"},tV={class:"label"},nV={class:"content"},iV=Ce({__name:"AttributeTextContent",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=et({text:"",strokeWidth:1,stroke:"",showPathAttr:!1}),p=r=>{var u;const d=(u=n.canvas)==null?void 0:u.getActiveObject();if(!(r&&r.target&&r.target!==d)&&d){o.text=d.get("text");const a=d.get("path");a?(o.strokeWidth=a.strokeWidth,o.stroke=a.stroke,o.showPathAttr=!0):o.showPathAttr=!1}},v=(r,d)=>{var a,l;const u=(a=n.canvas)==null?void 0:a.getActiveObjects()[0];u&&(o[r]=d,r==="text"?u.set(r,d):u.get("path").set(r,d),(l=n.canvas)==null||l.renderAll())},c=()=>{var r;(r=i==null?void 0:i.proxy)==null||r.$forceUpdate()};return je(()=>{Le(()=>{var r,d,u;(r=n.editor)==null||r.on("selectCancel",c),(d=n.editor)==null||d.on("selectOne",p),(u=n.canvas)==null||u.on("object:modified",p)})}),Rt(()=>{var r,d,u;(r=n.editor)==null||r.off("selectCancel",c),(d=n.editor)==null||d.off("selectOne",p),(u=n.canvas)==null||u.off("object:modified",p)}),(r,d)=>{var A,m;const u=It,a=Ft,l=el,s=tl,h=mi,g=Ar,f=vr;return((A=C(e))==null?void 0:A.mSelectMode)==="one"&&((m=C(e))==null?void 0:m.mSelectOneType)==="i-text"?($(),se("div",Kz,[M(u,{"content-position":"left"},{default:K(()=>[Jz]),_:1}),M(s,{"label-width":40,class:"form-wrap"},{default:K(()=>[M(l,{label:r.$t("editor.attributes.id")},{default:K(()=>[M(a,{modelValue:C(o).text,"onUpdate:modelValue":d[0]||(d[0]=y=>C(o).text=y),onChange:d[1]||(d[1]=y=>v("text",C(o).text)),size:"small"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),C(o).showPathAttr?($(),se(Qe,{key:0},[M(u,{"content-position":"left"},{default:K(()=>[Zz]),_:1}),T("div",null,[M(f,{gutter:12},{default:K(()=>[M(g,{flex:"1"},{default:K(()=>[T("div",eV,[T("span",tV,Se(r.$t("editor.color")),1),T("div",nV,[M(h,{modelValue:C(o).stroke,"onUpdate:modelValue":d[2]||(d[2]=y=>C(o).stroke=y),onChange:d[3]||(d[3]=y=>v("stroke",y)),"show-alpha":""},null,8,["modelValue"])])])]),_:1}),M(g,{flex:"1"},{default:K(()=>[M(C(An),{modelValue:C(o).strokeWidth,"onUpdate:modelValue":d[4]||(d[4]=y=>C(o).strokeWidth=y),onOnChange:d[5]||(d[5]=y=>v("strokeWidth",y)),append:r.$t("editor.width"),min:0},null,8,["modelValue","append"])]),_:1})]),_:1})])],64)):be("",!0)])):be("",!0)}}}),rV=Ue(iV,[["__scopeId","data-v-cd4ba0d0"]]),oV={key:0,class:"attr-item-box"},aV={class:"flex-view"},sV={class:"flex-item"},lV={class:"label"},cV={class:"content"},uV=Ce({__name:"AttributeTextFloat",setup(t){const e=Re("mixinState"),n=Ye(),i=et({verticalAlign:"null"}),o=["i-text","textbox","text"],p=ue(()=>o.includes(e.mSelectOneType)),v=u=>{var l;const a=(l=n.canvas)==null?void 0:l.getActiveObject();u&&u.target&&u.target!==a||a&&o.includes(a.type)&&a.text.includes(".")&&(i.verticalAlign=a.get("verticalAlign"))},c=(u,a)=>{var s,h;const l=(s=n.canvas)==null?void 0:s.getActiveObjects()[0];if(l&&l.text.includes(".")){const[g]=l.text.split("."),f=g.length+1,A=l.text.length;l.styles=[],a==="top"?l.setSuperscript(f,A):a==="bottom"&&l.setSelectionStyles({fontSize:l.superscript.size*l.fontSize},f,A),l.set(u,a),(h=n.canvas)==null||h.renderAll()}},r=ft(),d=()=>{var u;(u=r==null?void 0:r.proxy)==null||u.$forceUpdate()};return je(()=>{Le(()=>{var u,a,l;v(),(u=n.editor)==null||u.on("selectCancel",d),(a=n.editor)==null||a.on("selectOne",v),(l=n.canvas)==null||l.on("object:modified",v)})}),Rt(()=>{var u,a,l;(u=n.editor)==null||u.off("selectCancel",d),(a=n.editor)==null||a.off("selectOne",v),(l=n.canvas)==null||l.off("object:modified",v)}),(u,a)=>{const l=ei,s=Pn;return C(e).mSelectMode==="one"&&C(p)?($(),se("div",oV,[T("div",aV,[T("div",sV,[T("span",lV,Se(u.$t("editor.textFloat")),1),T("div",cV,[M(s,{modelValue:C(i).verticalAlign,"onUpdate:modelValue":a[0]||(a[0]=h=>C(i).verticalAlign=h),onChange:a[1]||(a[1]=h=>c("verticalAlign",h))},{default:K(()=>[M(l,{label:"\u65E0",value:"null"}),M(l,{label:"\u4E0B\u6807",value:"bottom"}),M(l,{label:"\u4E0A\u6807",value:"top"})]),_:1},8,["modelValue"])])])])])):be("",!0)}}}),hV=Ue(uV,[["__scopeId","data-v-89f72f6a"]]),dV=t=>(zt("data-v-471231df"),t=t(),Vt(),t),fV={key:0,class:"box attr-item-box"},pV=dV(()=>T("h4",null,"\u5B57\u4F53\u5C5E\u6027",-1)),gV={class:"flex-view"},vV={class:"flex-item"},AV={class:"left font-selector"},mV={style:{display:"none"}},yV={class:"right"},bV={class:"flex-view",style:{"margin-bottom":"0"}},CV={class:"flex-item"},wV=["innerHTML"],xV={class:"flex-view"},_V={class:"flex-item"},SV={viewBox:"0 0 1024 1024",width:"14",height:"14"},EV=["fill"],IV={viewBox:"0 0 1024 1024",width:"14",height:"14"},kV=["fill"],BV={viewBox:"0 0 1024 1024",width:"14",height:"14"},OV=["fill"],DV={viewBox:"0 0 1024 1024",width:"14",height:"14"},TV=["fill"],MV={class:"flex-view"},QV={class:"right"},LV={class:"right"},jV={class:"flex-view"},PV={class:"flex-item"},FV={class:"label"},RV={class:"content"},NV=Ce({__name:"AttributeFont",setup(t){var A;const e=Re("mixinState"),n=Ye(),i=ft(),o=["i-text","textbox","text"],p=et({fontSize:0,fontFamily:"",lineHeight:0,charSpacing:0,fontWeight:"",textBackgroundColor:"#fff",textAlign:"",fontStyle:"",underline:!1,linethrough:!1,overline:!1}),v=ce([]);(A=n.editor)==null||A.getFontList().then(m=>{v.value=m});const c=["left","center","right","justify"],r=['<svg t="1650441458823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3554" width="18" height="18"><path d="M198.4 198.4h341.333333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666667h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-569.6c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666666h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533334z m0 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3555"></path></svg>','<svg t="1650441512015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3704" width="18" height="18"><path d="M313.6 198.4h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533333z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m115.2 170.666666h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533334z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3705"></path></svg>','<svg t="1650441519862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="18" height="18"><path d="M454.4 283.733333v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h341.333334c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333334c-8.533333 0-14.933333-2.133333-19.2-8.533334-4.266667-4.266667-8.533333-10.666667-8.533333-19.2z m-226.133333 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333H256c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533333-19.2z m113.066666 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533334-19.2 6.4-6.4 12.8-8.533333 19.2-8.533334h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533334-19.2z m-170.666666 170.666666v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-4.266667-8.533333-10.666667-8.533333-19.2z" p-id="3855"></path></svg>','<svg width="18.000000" height="18.000000" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path id="path" d="M3.48 3.48L14.48 3.48C14.63 3.48 14.75 3.52 14.82 3.63C14.93 3.75 14.97 3.86 14.97 3.97L14.97 4.98C14.97 5.13 14.93 5.25 14.82 5.32C14.71 5.43 14.6 5.47 14.48 5.47L3.48 5.47C3.33 5.47 3.22 5.43 3.15 5.32C3.03 5.21 3 5.1 3 4.98L3 3.97C3 3.82 3.03 3.71 3.15 3.63C3.22 3.56 3.37 3.48 3.48 3.48ZM3.48 6.48L14.5 6.48C14.65 6.48 14.76 6.52 14.83 6.63C14.95 6.75 14.98 6.86 14.98 6.97L14.98 7.98C14.98 8.13 14.95 8.25 14.83 8.32C14.72 8.43 14.61 8.47 14.5 8.47L3.48 8.47C3.33 8.47 3.22 8.43 3.15 8.32C3.03 8.21 3 8.1 3 7.98L3 6.97C3 6.82 3.03 6.71 3.15 6.63C3.22 6.56 3.37 6.48 3.48 6.48ZM3.48 9.48L14.47 9.48C14.62 9.48 14.73 9.52 14.81 9.63C14.92 9.75 14.96 9.86 14.96 9.97L14.96 10.98C14.96 11.13 14.92 11.25 14.81 11.32C14.7 11.43 14.58 11.47 14.47 11.47L3.48 11.47C3.33 11.47 3.22 11.43 3.15 11.32C3.03 11.21 3 11.1 3 10.98L3 9.97C3 9.82 3.03 9.71 3.15 9.63C3.22 9.56 3.37 9.48 3.48 9.48ZM3.48 12.48L14.47 12.48C14.62 12.48 14.73 12.52 14.81 12.63C14.92 12.75 14.96 12.86 14.96 12.97L14.96 13.98C14.96 14.13 14.92 14.25 14.81 14.32C14.7 14.43 14.58 14.47 14.47 14.47L3.48 14.47C3.33 14.47 3.22 14.43 3.15 14.32C3.03 14.21 3 14.1 3 13.98L3 12.97C3 12.82 3.03 12.71 3.15 12.63C3.22 12.56 3.37 12.48 3.48 12.48Z" fill-rule="nonzero"/></svg>'],d=m=>{var b;const y=(b=n.canvas)==null?void 0:b.getActiveObject();m&&m.target&&m.target!==y||y&&o.includes(y.type)&&(p.fontSize=y.get("fontSize"),p.fontFamily=y.get("fontFamily"),p.lineHeight=y.get("lineHeight"),p.textAlign=y.get("textAlign"),p.underline=y.get("underline"),p.linethrough=y.get("linethrough"),p.charSpacing=y.get("charSpacing"),p.overline=y.get("overline"),p.fontStyle=y.get("fontStyle"),p.textBackgroundColor=y.get("textBackgroundColor"),p.fontWeight=y.get("fontWeight"))},u=(m,y)=>{var x,S;const b=(x=n.canvas)==null?void 0:x.getActiveObjects()[0];b&&(b&&b.set(m,y),(S=n.canvas)==null||S.renderAll())},a=()=>{var m;(m=i==null?void 0:i.proxy)==null||m.$forceUpdate()},l=m=>we(this,null,function*(){if(!m)return;const y=ur.service();n.editor.loadFont(m).finally(()=>y.close())}),s=(m,y)=>{var S,O;const b=y==="normal"?"bold":"normal";p.fontWeight=b;const x=(S=n.canvas)==null?void 0:S.getActiveObjects()[0];x&&x.set(m,b),(O=n.canvas)==null||O.renderAll()},h=(m,y)=>{var S,O;const b=y==="normal"?"italic":"normal";p.fontStyle=b;const x=(S=n.canvas)==null?void 0:S.getActiveObjects()[0];x&&x.set(m,b),(O=n.canvas)==null||O.renderAll()},g=(m,y)=>{var S,O;const b=y===!1;p.linethrough=b;const x=(S=n.canvas)==null?void 0:S.getActiveObjects()[0];x&&x.set(m,b),(O=n.canvas)==null||O.renderAll()},f=(m,y)=>{var S,O;const b=y===!1;p.underline=b;const x=(S=n.canvas)==null?void 0:S.getActiveObjects()[0];x&&x.set(m,b),(O=n.canvas)==null||O.renderAll()};return je(()=>{Le(()=>{var m,y,b;d(),(m=n.editor)==null||m.on("selectCancel",a),(y=n.editor)==null||y.on("selectOne",d),(b=n.canvas)==null||b.on("object:modified",d)})}),Rt(()=>{var m,y,b;(m=n.editor)==null||m.off("selectCancel",a),(y=n.editor)==null||y.off("selectOne",d),(b=n.canvas)==null||b.off("object:modified",d)}),(m,y)=>{const b=It,x=ei,S=Pn,O=Up,R=ac,Z=st,ee=zh,re=mi;return C(e).mSelectMode==="one"&&o.includes(C(e).mSelectOneType)?($(),se("div",fV,[M(b,{"content-position":"left"},{default:K(()=>[pV]),_:1}),T("div",null,[T("div",gV,[T("div",vV,[T("div",AV,[M(S,{modelValue:C(p).fontFamily,"onUpdate:modelValue":y[0]||(y[0]=ae=>C(p).fontFamily=ae),onChange:l},{default:K(()=>[($(!0),se(Qe,null,We(C(v),ae=>($(),_e(x,{value:ae.name,label:ae.name,key:`font-${ae.name}`},{default:K(()=>[T("div",{class:"font-item",style:$e(`background-image:url('${ae.img}');height: 100%;background-size: 100% 100%;`)},[Be(Se(ae.img?"":ae)+" ",1),T("span",mV,Se(ae.name),1)],4)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue"])]),T("div",yV,[M(C(An),{modelValue:C(p).fontSize,"onUpdate:modelValue":y[1]||(y[1]=ae=>C(p).fontSize=ae),onOnChange:y[2]||(y[2]=ae=>u("fontSize",ae)),append:"\u5B57\u53F7",min:1},null,8,["modelValue"])])])]),T("div",bV,[T("div",CV,[M(R,{class:"button-group",modelValue:C(p).textAlign,"onUpdate:modelValue":y[3]||(y[3]=ae=>C(p).textAlign=ae),onChange:y[4]||(y[4]=ae=>u("textAlign",ae)),type:"button"},{default:K(()=>[($(),se(Qe,null,We(c,(ae,ne)=>M(O,{label:ae,value:ae,key:ae},{default:K(()=>[T("span",{innerHTML:r[ne]},null,8,wV)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])])]),T("div",xV,[T("div",_V,[M(ee,{class:"button-group"},{default:K(()=>[M(Z,{style:{width:"25%"},onClick:y[5]||(y[5]=ae=>s("fontWeight",C(p).fontWeight))},{default:K(()=>[($(),se("svg",SV,[T("path",{d:"M793.99865 476a244 244 0 0 0 54-130.42C862.75865 192.98 743.01865 64 593.85865 64H195.01865a32 32 0 0 0-32 32v96a32 32 0 0 0 32 32h63.74v576H195.01865a32 32 0 0 0-32 32v96a32 32 0 0 0 32 32h418.64c141.6 0 268.28-103.5 282-244.8 9.48-96.9-32.78-184.12-101.66-239.2zM418.33865 224h175.52a96 96 0 0 1 0 192h-175.52z m175.52 576h-175.52V576h175.52a112 112 0 0 1 0 224z",fill:C(p).fontWeight==="bold"?"#305ef4":"#666"},null,8,EV)]))]),_:1}),M(Z,{style:{width:"25%"},onClick:y[6]||(y[6]=ae=>h("fontStyle",C(p).fontStyle))},{default:K(()=>[($(),se("svg",IV,[T("path",{d:"M832 96v64a32 32 0 0 1-32 32h-125.52l-160 640H608a32 32 0 0 1 32 32v64a32 32 0 0 1-32 32H224a32 32 0 0 1-32-32v-64a32 32 0 0 1 32-32h125.52l160-640H416a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32h384a32 32 0 0 1 32 32z",fill:C(p).fontStyle==="italic"?"#305ef4":"#666"},null,8,kV)]))]),_:1}),M(Z,{style:{width:"25%"},onClick:y[7]||(y[7]=ae=>g("linethrough",C(p).linethrough))},{default:K(()=>[($(),se("svg",BV,[T("path",{d:"M893.088 501.792H125.344a32 32 0 0 0 0 64h767.744a32 32 0 0 0 0-64zM448 448h112V208h288V96H160v112h288zM448 640h112v288H448z",fill:C(p).linethrough?"#305ef4":"#666"},null,8,OV)]))]),_:1}),M(Z,{style:{width:"25%"},onClick:y[8]||(y[8]=ae=>f("underline",C(p).underline))},{default:K(()=>[($(),se("svg",DV,[T("path",{d:"M703.232 67.008h127.488v413.248c0 158.016-142.656 286.016-318.72 286.016-176 0-318.72-128-318.72-286.016V67.008h127.488v413.248c0 39.872 18.176 78.144 51.136 107.776 36.8 32.96 86.528 51.072 140.096 51.072s103.36-18.112 140.032-51.136c33.024-29.632 51.2-67.968 51.2-107.776V67.008zM193.28 871.616h637.44v85.376H193.28v-85.376z",fill:C(p).underline?"#305ef4":"#666"},null,8,TV)]))]),_:1})]),_:1})])]),T("div",MV,[T("div",QV,[M(C(An),{modelValue:C(p).lineHeight,"onUpdate:modelValue":y[9]||(y[9]=ae=>C(p).lineHeight=ae),onOnChange:y[10]||(y[10]=ae=>u("lineHeight",ae)),step:.1,append:m.$t("editor.attributes.line_height")},null,8,["modelValue","append"])]),T("div",LV,[M(C(An),{modelValue:C(p).charSpacing,"onUpdate:modelValue":y[11]||(y[11]=ae=>C(p).charSpacing=ae),onOnChange:y[12]||(y[12]=ae=>u("charSpacing",ae)),append:m.$t("editor.attributes.char_spacing")},null,8,["modelValue","append"])])]),T("div",jV,[T("div",PV,[T("span",FV,Se(m.$t("editor.background")),1),T("div",RV,[M(re,{modelValue:C(p).textBackgroundColor,"onUpdate:modelValue":y[13]||(y[13]=ae=>C(p).textBackgroundColor=ae),onChange:y[14]||(y[14]=ae=>u("textBackgroundColor",ae)),"show-alpha":""},null,8,["modelValue"])])])])])])):be("",!0)}}}),zV=Ue(NV,[["__scopeId","data-v-471231df"]]),ev=(t,{decimal:e=0}={})=>e>0?Number(t.toFixed(e)):Math.round(t),Gs=(t,{onmousedown:e,onmousemove:n,onmouseup:i}={})=>{let o=t.getBoundingClientRect();const p={x:0,y:0},v=u=>{let a=u.pageX-o.x,l=u.pageY-o.y;a<0&&(a=0),a>o.width&&(a=o.width),l<0&&(l=0),l>o.height&&(l=o.height),p.x=ev(a/o.width,{decimal:2}),p.y=ev(l/o.height,{decimal:2})},c=u=>{v(u),n&&n(p,u)},r=u=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",r),i&&i(p,u)},d=u=>{o=t.getBoundingClientRect(),v(u),document.addEventListener("mousemove",c),document.addEventListener("mouseup",r),e&&e(p,u)};return t.addEventListener("mousedown",d),{destroy(){t.removeEventListener("mousedown",d)}}},tv=(t,e,n)=>{let i=Math.round(t).toString(16),o=Math.round(e).toString(16),p=Math.round(n).toString(16);return i.length===1&&(i="0"+i),o.length===1&&(o="0"+o),p.length===1&&(p="0"+p),"#"+i+o+p},nv=(t,e,n,i=1)=>{const o=tv(t,e,n);let p=Math.round(i*255).toString(16);return p.length===1&&(p="0"+p),o+p},iv=(t,e,n)=>{t/=255,e/=255,n/=255;const i=Math.min(t,e,n),o=Math.max(t,e,n),p=o-i;let v=0,c=0;const r=o;if(p===0)v=c=0;else{c=p/o;const d=((o-t)/6+p/2)/p,u=((o-e)/6+p/2)/p,a=((o-n)/6+p/2)/p;t===o?v=a-u:e===o?v=1/3+d-a:n===o&&(v=2/3+u-d),v<0?v+=1:v>1&&(v-=1)}return[v*360,c*100,r*100]},VV=(t,e,n,i=1)=>[...iv(t,e,n),i];function UV(t,e,n){t=t/360*6,e/=100,n/=100;const i=Math.floor(t),o=t-i,p=n*(1-e),v=n*(1-o*e),c=n*(1-(1-o)*e),r=i%6,d=[n,v,p,p,c,n][r],u=[c,n,n,v,p,p][r],a=[p,p,c,n,n,v][r];return[Math.round(d*255),Math.round(u*255),Math.round(a*255)]}const HV=(t,e,n)=>{const[i,o,p]=UV(t,e,n);return tv(i,o,p)},GV=(t,e,n,i=1)=>`${HV(t,e,n)}${i===0?"00":Math.round(i*255).toString(16)}`,Ch=t=>{t=t.slice(0,7);let e=0,n=0,i=0;return t.length==4?(e=+("0x"+t[1]+t[1]),n=+("0x"+t[2]+t[2]),i=+("0x"+t[3]+t[3])):t.length==7&&(e=+("0x"+t[1]+t[2]),n=+("0x"+t[3]+t[4]),i=+("0x"+t[5]+t[6])),[e,n,i]},wh=t=>{const e=Ch(t),n=+("0x"+t[7]+t[8]);return[...e,Number((n/255).toFixed(2))]},YV=t=>{const[e,n,i,o]=wh(t);return VV(e,n,i,o)},rv=t=>t.startsWith("#")?"\u7EAF\u8272":t.startsWith("linear-gradient")?"\u6E10\u53D8":"\u56FE\u6848",xh=(t,e)=>{const n=[];return e.forEach(i=>{n.push(`${i.color} ${i.offset*100}%`)}),`linear-gradient(${t}deg, ${n.join(",")})`};function WV(t){const e=XV(t);document.body.appendChild(e),setTimeout(()=>{var n;return(n=e==null?void 0:e.parentNode)==null?void 0:n.removeChild(e)},2e3)}function XV(t,e=!0){const n=document.createElement("div");return n.id="color-pipette-tooltip-container",n.innerHTML=t,n.style=`
    position: fixed;
    left: 50%;
    top: 9%;
    z-index: 10002;
    display: ${e?"flex":"none"};
    align-items: center;
    background-color: rgba(0,0,0,0.4);
    padding: 6px 12px;
    border-radius: 4px;
    color: #fff;
    font-size: 18px;
    pointer-events: none;
  `,n}const $V={class:"my-tabs"},qV={class:"my-tabs__header p-0.5 mb-3 rounded bg-gray-100 cursor-pointers"},KV={class:"my-tabs__header-shell relative flex justify-between"},JV=["onClick"],ZV={class:"my-tabs__content"},eU={name:"Tabs"},tU=Object.assign(eU,{props:{value:{type:String,required:!0}},emits:["update:value","change"],setup(t,{expose:e,emit:n}){const i=t,o=n;Me(()=>i.value,()=>{d()});const p=ce([]),v=et({width:0,left:0});let c=0;je(()=>{c=100/p.value.length,v.width=`${c}%`,d()});let r=null;function d(a=-1){return we(this,null,function*(){var l,s,h,g;a<0&&(a=p.value.findIndex(f=>f.props.label===i.value)),v.left=`${c*a}%`;try{yield Le(),(s=(l=r==null?void 0:r.exposed)==null?void 0:l.changeActive)==null||s.call(l,!1),r=p.value[a],(g=(h=r.exposed)==null?void 0:h.changeActive)==null||g.call(h,!0)}catch(f){console.log(f)}})}function u(a,l){o("update:value",a.props.label),d(l)}return e({tabs:p}),(a,l)=>($(),se("div",$V,[T("div",qV,[T("div",KV,[($(!0),se(Qe,null,We(p.value,(s,h)=>($(),se("div",{key:s.props.label,class:de(["my-tab__title relative flex-auto py-1 text-center",{"my-active":s.props.label===t.value}]),onClick:g=>u(s,h)},Se(s.props.label),11,JV))),128)),T("div",{class:"my-tab__slider",style:$e(v)},null,4)])]),T("div",ZV,[Ne(a.$slots,"default",{},void 0,!0)])]))}}),nU=Ue(tU,[["__scopeId","data-v-fd81b187"]]),iU={},rU={t:"1685345224620",class:"sd-xggj",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8489",width:"20",height:"20"},oU=T("path",{d:"M716.288 140.501333a42.666667 42.666667 0 0 1 60.373333 0l90.496 90.496a42.666667 42.666667 0 0 1 0 60.330667l-120.661333 120.704L595.626667 261.12l120.661333-120.661333zM520.192 185.770667l301.696 301.653333-60.330667 60.373333-301.653333-301.696 60.288-60.330666z","p-id":"8490"},null,-1),aU=T("path",{d:"M580.565333 366.762667l-60.373333-60.330667-362.026667 362.026667V853.333333l181.034667-3.84 362.026667-362.026666-60.330667-60.373334-331.861333 331.904-60.373334-60.373333 331.904-331.861333z","p-id":"8491"},null,-1),sU=[oU,aU];function lU(t,e){return $(),se("svg",rU,sU)}const cU=Ue(iU,[["render",lU]]),uU={name:"TabPanel"},hU=Object.assign(uU,{props:{label:{type:String,required:!0}},setup(t,{expose:e}){const n=ft();n.parent.exposed.tabs.value.push(n);const i=ce(!1),o=ue(()=>({display:i.value?"block":"none"}));function p(v){i.value=v}return e({changeActive:p}),(v,c)=>($(),se("div",{class:"tab-panel",style:$e(o.value)},[Ne(v.$slots,"default")],4))}}),dU=Ce({props:["modelValue"],emits:["change","update:modelValue"],setup(t,{emit:e}){const n=ce(90),i=ce(null),o=ue(()=>n.value-90);let p=!1;const v=ce(!1),c=r=>{e("change",r)};return Me(()=>n.value,r=>{t.modelValue!==n.value&&e("update:modelValue",r),e("change")}),Me(()=>t.modelValue,r=>{n.value=r}),{inputChange:c,num:n,turn:r=>{if(!p)return;const d={x:27,y:27},u=r.offsetX-d.x,a=r.offsetY-d.y,l=Math.atan2(a,u)*180/Math.PI;n.value=Math.round(l+90)},touch:(r,d)=>{r.preventDefault(),p=d},angleInDegrees:o,numInput:i,visiable:v}}}),fU={class:"angle-input-box"};function pU(t,e,n,i,o,p){return $(),se("div",fU,[lt(T("input",{ref:"numInput","onUpdate:modelValue":e[0]||(e[0]=v=>t.num=v),class:"angle-input",onFocus:e[1]||(e[1]=v=>t.visiable=!0),onBlur:e[2]||(e[2]=v=>t.visiable=!1),onInput:e[3]||(e[3]=(...v)=>t.inputChange&&t.inputChange(...v))},null,544),[[T2,t.num]]),lt(T("div",{class:"AngleHandle",onMousedown:e[6]||(e[6]=v=>t.touch(v,!0)),onMouseup:e[7]||(e[7]=v=>t.touch(v,!1))},[T("div",{class:"angle",onMouseup:e[4]||(e[4]=(...v)=>t.turn&&t.turn(...v)),onMousemove:e[5]||(e[5]=(...v)=>t.turn&&t.turn(...v))},[T("div",{style:$e(`transform: rotate(${t.angleInDegrees}deg)`),class:"line"},null,4)],32)],544),[[Ut,t.visiable]])])}let ov,_h,av,sv,lv,cv,uv,hv,dv,fv,pv,gv,vv,Av,mv,yv,bv,Cv,wv,xv,_v,Sv,Ev,Sh,Iv,kv,xo,Bv,Ov,Dv,Tv,Mv,Qv,Lv,jv,Pv,Fv,Rv,Nv,zv,Vv,Ht,Eh,Ih,Uv,Hv,Gv,Yv,Wv,Xv,$v,qv,Kv,Jv,Zv,Vn,eA,tA,nA,iA,rA,oA,aA,sA,lA,cA,uA,hA,dA,fA,pA,gA,vA,AA,mA,yA,bA,CA,wA,xA,_A,SA,EA,IA,kA,BA,OA,DA,TA,MA,QA,LA,jA,PA,FA,RA,NA,_i,zA,VA,UA,HA,GA,YA,WA,XA,$A,qA,KA,JA,ZA,em,tm,nm,im,rm,om,am,sm,lm,cm,um,hm,dm,fm,pm,gm,vm,Am,mm,ym,bm,Cm,kh,wm,xm,_m,Sm,Em,Im,km,Bm,Om,Dm,Tm,Mm,Qm,Lm,jm,Pm,Fm,Rm,Nm,zm,Vm,Um,Ys,Hm,Gm,Ym,Wm,Xm,$m,qm,Km,Jm,Zm,e3,Bh,t3,n3,i3,r3,o3,a3,s3,l3,c3,u3,h3,d3,f3,p3,g3,v3,A3,Ca,m3,y3,b3,C3,w3,x3,_3,S3,E3,I3,k3,B3,O3,D3,T3,M3,Q3,L3,j3,P3,F3,R3,N3,z3,V3,U3,H3;ov=Ue(dU,[["render",pU]]),_h=t=>(zt("data-v-59acd03c"),t=t(),Vt(),t),av={class:"color-picker"},sv={key:1,class:"title"},lv={key:2,class:"cp__gradient flex-center"},cv={class:"cp__gradient-bar"},uv=["data-sort","onMousedown"],hv=_h(()=>T("div",{class:"cpp__color-saturation"},null,-1)),dv=_h(()=>T("div",{class:"cpp__color-value"},null,-1)),fv={class:"cps__track"},pv={class:"cps__track"},gv={class:"cp__box"},vv=["value"],Av=["value"],mv=["onClick"],yv={name:"ColorPicker",inheritAttrs:!1},bv=Object.assign(yv,{props:{value:{type:String,default:"#ffffffff"},modes:{type:Array,default:()=>["\u7EAF\u8272","\u6E10\u53D8"]},defaultColor:{type:String,default:"#ffffffff"},defaultGradient:{type:String,default:"linear-gradient(90deg, #fffae0ff 0%, #ffd1f1ff 100%)"},defaultImage:{type:String,default:"https://st0.dancf.com/csc/157/material-2d-textures/0/20190714-174653-ed3c.jpg"}},emits:["update:value","change","native-pick","blur"],setup(t,{expose:e,emit:n}){const i=t,o=n,p=ce(rv(i.value)),v=ce(90),c=ce([]),r=et({h:0,s:0,l:0,a:0}),d=ce("#f00"),u=ce("#000"),a=ce(0);let l=ce({});const s="EyeDropper"in window,h=ce(),g=ce(),f=ce(),A=ce(),m=ce(),y=ce(),b=ce();let x=null,S=null,O=null,R=null,Z=null,ee=!0,re=null;const ae=ce([]),ne={color:i.defaultColor,gradient:i.defaultGradient,image:i.defaultImage},J=ue(()=>i.modes.includes("\u6E10\u53D8")),P=ue(()=>{const j=Ch(u.value).join(",");return{background:`linear-gradient(to right, rgba(${j}, 0) 0%, rgb(${j}) 100%)`}});Me(l,j=>{_(j.color)}),Me(u,j=>{H(j)}),Me(()=>i.value,j=>{const q=rv(j);q!==p.value&&(p.value=q),Q(q),k(j),U(j)});const U=Ot(j=>we(this,null,function*(){const q=ae.value,te=q.indexOf(j);te!==-1&&ae.value.splice(te,1),q.length>=4&&ae.value.splice(q.length-1,1);const oe=[j];ae.value=oe.concat(q)}),300),W=Me(r,F,{deep:!0});function F(j){const q=GV(...Object.values(j));let te;p.value==="\u7EAF\u8272"?te=q:p.value==="\u6E10\u53D8"&&(l.value.color=q,te=xh(v.value,c.value)),w(q),L(te)}je(E);function E(){return we(this,null,function*(){f.value.style.left=`${r.s}%`,f.value.style.top=`${100-r.l}%`,A.value.style.left=`${r.h/360*100}%`,y.value.style.left=`${r.a*100}%`,J.value&&(x=Gs(h.value,{onmousedown:j,onmousemove:q,onmouseup:te}));function j(Ae){if(Z)return;const me=c.value.findIndex(Oe=>Oe.offset>=Ae.x),he=c.value[me-1],ye=wh(he.color),xe=c.value[me],Ee=wh(xe.color),ke=[];for(let Oe=0;Oe<3;Oe+=1)ke.push(ye[Oe]+(Ee[Oe]-ye[Oe])*Ae.x);const Fe=xe.offset-Ae.x-(Ae.x-he.offset)>0?ye[3]:Ee[3],Xe=nv(...ke,Fe);l.value={color:Xe,offset:Ae.x},c.value.splice(me,0,l.value)}function q(Ae){if(!Z)return;l.value.offset=Ae.x,c.value.sort((he,ye)=>he.offset-ye.offset);const me=xh(v.value,c.value);L(me)}function te(){Z=!1}S=Gs(g.value,{onmousemove:oe,onmouseup:oe});function oe(Ae){V();try{const me=Ae.x*100,he=Ae.y*100;r.s=Math.round(me),r.l=Math.round(100-he),f.value.style.left=`${me}%`,f.value.style.top=`${he}%`}catch(me){console.log(me)}}O=Gs(m.value,{onmousemove:ie,onmouseup:ie});function ie(Ae){V(),r.h=Ae.x*360,A.value.style.left=`${Ae.x*100}%`}R=Gs(b.value,{onmousemove:fe,onmouseup:fe});function fe(Ae){V(),r.a=Ae.x,y.value.style.left=`${Ae.x*100}%`}Q(p.value),k(i.value)})}Rt(()=>{S==null||S.destroy(),O==null||O.destroy(),R==null||R.destroy(),W(),x&&x.destroy()});function k(j){p.value==="\u7EAF\u8272"?ne.color=j:p.value==="\u6E10\u53D8"?ne.gradient=j:p.value==="\u56FE\u6848"&&(ne.image=j)}function L(j){k(j),o("update:value",j),o("change",{mode:p.value,color:j,angle:Number(v.value),stops:c.value})}function B(j){return we(this,null,function*(){if(j===p.value)return;p.value=j;let q;j==="\u7EAF\u8272"?q=ne.color:j==="\u6E10\u53D8"?q=ne.gradient:j==="\u56FE\u6848"&&(q=ne.image),L(q)})}function Q(j){j==="\u7EAF\u8272"?_(i.value):j==="\u6E10\u53D8"&&(c.value.length===0?i.value.match(/[^,]+/g).forEach((q,te)=>{if(te===0){v.value=Number(q.match(/\d+/)[0]);return}let[oe,ie]=q.trim().split(" ");oe.startsWith("#")||(oe=nv(oe)),ie=ie.match(/\d+/)[0]/100,c.value.push({color:oe,offset:ie}),l.value=c.value[0]}):_(l.value.color))}function w(j){var q;d.value=`hsl(${r.h}, 100%, 50%)`,u.value=j.slice(0,7),u.value,a.value=Math.round(((q=r.a)!=null?q:1)*100)}function _(j){if(ee){const q=YV(j);r.h=q[0],r.s=q[1],r.l=q[2],r.a=q[3],w(j);try{let te=r.s;const oe=Math.round(100-r.l);f.value.style.left=`${te}%`,f.value.style.top=`${oe}%`,te=r.h/360,A.value.style.left=`${te*100}%`,y.value.style.left=`${r.a*100}%`}catch(te){console.log(te)}}}function I(j){Z=!0,l.value=j}function D(j){if(j.stopPropagation(),j.preventDefault(),!["Backspace","Delete"].includes(j.key)||c.value.length===2)return;const q=c.value.indexOf(l.value);c.value.splice(q,1),l.value=c.value[0]}function H(j){if(/^#(?:[0-9a-f]{3}){1,2}$/i.test(j)){const q=Ch(j),[te,oe,ie]=iv(...q);r.h=te,r.s=oe,r.l=ie;try{f.value.style.left=`${r.s}%`,f.value.style.top=`${100-r.l}%`,A.value.style.left=`${r.h/360*100}%`,u.value=j}catch(fe){console.log(fe)}}}function V(){ee=!1,re&&clearTimeout(re),re=setTimeout(()=>{ee=!0},16)}function Y(j){return we(this,null,function*(){let q="";if(j&&j.target.value){const te=j.target.value;q=te+(te.length===7?"ff":"")}else{const te=new window.EyeDropper;WV("\u6309Esc\u53EF\u9000\u51FA");try{q=(yield te.open()).sRGBHex+"ff"}catch(oe){console.log("\u7528\u6237\u53D6\u6D88\u4E86\u53D6\u8272")}}p.value==="\u6E10\u53D8"?(l.value.color=q,l.value=ve({},l.value)):o("update:value",q),o("native-pick",q)})}const z=j=>{const q=X(j.target.value);o("blur",q),o("update:value",q)};function X(j){let q=j.replace(/\s/g,"");return j.startsWith("#")||(q="#"+q),q.length<9&&(q=q.padEnd(9,"f")),q}function N(){L(xh(v.value,c.value))}return e({updateValue:L}),(j,q)=>($(),se("div",av,[t.modes.length>1?($(),_e(nU,{key:0,type:"border-card",value:C(p),"onUpdate:value":B},{default:K(()=>[($(!0),se(Qe,null,We(t.modes,te=>($(),_e(hU,{key:te,label:te},null,8,["label"]))),128))]),_:1},8,["value"])):($(),se("div",sv,Se(C(p)),1)),C(J)?lt(($(),se("div",lv,[T("div",cv,[T("div",{ref_key:"elGradientTrack",ref:h,class:"cpgb__track",style:$e([{width:"100%"},{background:t.value}])},[($(!0),se(Qe,null,We(C(c),(te,oe)=>($(),se("div",{key:oe,class:de(["cpgb__pointer",{"cpgb__pointer--active":te===C(l)}]),"data-sort":oe,style:$e({left:`${te.offset*100}%`,background:te.color}),tabindex:"-1",onMousedown:ie=>I(te),onKeydown:ot(D,["stop"])},null,46,uv))),128))],4)]),M(ov,{modelValue:C(v),"onUpdate:modelValue":q[0]||(q[0]=te=>ut(v)?v.value=te:null),onChange:N},null,8,["modelValue"])],512)),[[Ut,C(p)==="\u6E10\u53D8"]]):be("",!0),T("div",{ref_key:"elPalette",ref:g,class:"cp__palette",style:$e({background:C(d)})},[hv,dv,T("div",{ref_key:"elPalettePointer",ref:f,class:"cpp__pointer"},null,512)],4),T("div",{ref_key:"elSliderHux",ref:m,class:"cp__slider cp__slider-hux"},[T("div",fv,[T("div",{ref_key:"elSliderHuxPointer",ref:A,class:"cpst__pointer"},null,512)])],512),T("div",{ref_key:"elSliderAlpha",ref:b,class:"cp__slider cp__slider-alpha"},[T("div",{class:"cpsa__background",style:$e(C(P))},null,4),T("div",pv,[T("div",{ref_key:"elSliderAlphaPointer",ref:y,class:"cpst__pointer"},null,512)])],512),T("div",gv,[T("div",{class:"item",onClick:Y},[s?($(),_e(cU,{key:0})):($(),se("input",{key:1,class:"native",type:"color",onInput:Y},null,32))]),C(p)==="\u6E10\u53D8"?($(),se("input",{key:0,class:"input",value:C(l).color},null,8,vv)):($(),se("input",{key:1,value:t.value,class:"input",onBlur:z},null,40,Av)),C(p)==="\u7EAF\u8272"?($(!0),se(Qe,{key:2},We(C(ae),te=>($(),se("div",{key:te,class:"item item-color",style:$e({background:te}),onClick:oe=>Y({target:{value:te}})},null,12,mv))),128)):be("",!0)])]))}}),Cv=Ue(bv,[["__scopeId","data-v-59acd03c"]]),wv=t=>(zt("data-v-8bdd557d"),t=t(),Vt(),t),xv={key:0,class:"box attr-item-box"},_v=wv(()=>T("h4",null,"\u989C\u8272",-1)),Sv={class:"bg-item"},Ev={style:{width:"100%","box-sizing":"border-box",padding:"10px"}},Sh="gradientAngle",Iv=Ce({__name:"AttributeColor",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=et({fill:""}),p=a=>{var s;const l=(s=n.canvas)==null?void 0:s.getActiveObject();if(!(a&&a.target&&a.target!==l)&&l&&e.mSelectMode==="one"){const h=l.get("fill");typeof h=="string"?o.fill=h:o.fill=r(h,l)}},v=a=>{var s,h;const l=(s=n.canvas)==null?void 0:s.getActiveObjects()[0];if(l){const g=String(a.color).replace("NaN","");if(a.mode==="\u7EAF\u8272")l.set("fill",g);else if(a.mode==="\u6E10\u53D8"){const f=d(Nr(a.stops),l.width,l.height,a.angle);l.set("fill",f,a.angle),l.set(Sh,a.angle)}(h=n.canvas)==null||h.renderAll()}},c=a=>{v(a)},r=(a,l)=>{if(!a)return;const s=l.get(Sh,a.degree),h=a.colorStops.map(g=>g.color+" "+g.offset*100+"%");return`linear-gradient(${s}deg, ${h})`},d=(a,l,s,h)=>{const g=(f=>{const A=-parseInt(f,10)*(Math.PI/180);return{x1:Math.round(50+Math.sin(A)*50)/100,y1:Math.round(50+Math.cos(A)*50)/100,x2:Math.round(50+Math.sin(A+Math.PI)*50)/100,y2:Math.round(50+Math.cos(A+Math.PI)*50)/100}})(h);return new le.fabric.Gradient({type:"linear",gradientUnits:"pencentage",coords:{x1:g.x1*l,y1:g.y1*s,x2:g.x2*l,y2:g.y2*s},colorStops:[...a]})},u=()=>{var a;(a=i==null?void 0:i.proxy)==null||a.$forceUpdate()};return je(()=>{Le(()=>{var a,l,s;p(),(a=n.editor)==null||a.on("selectCancel",u),(l=n.editor)==null||l.on("selectOne",p),(s=n.canvas)==null||s.on("object:modified",p)})}),Rt(()=>{var a,l,s;(a=n.editor)==null||a.off("selectCancel",u),(l=n.editor)==null||l.off("selectOne",p),(s=n.canvas)==null||s.off("object:modified",p)}),(a,l)=>{const s=It,h=og;return C(e).mSelectMode==="one"&&C(e).mSelectOneType!=="image"&&C(e).mSelectOneType!=="group"?($(),se("div",xv,[M(s,{"content-position":"left"},{default:K(()=>[_v]),_:1}),T("div",Sv,[M(h,{width:"280px",placement:"top-start",effect:"light",trigger:"hover"},{reference:K(()=>[T("div",{class:"color-bar",style:$e({background:C(o).fill})},null,4)]),default:K(()=>[T("div",Ev,[M(Cv,{value:C(o).fill,"onUpdate:value":l[0]||(l[0]=g=>C(o).fill=g),modes:["\u6E10\u53D8","\u7EAF\u8272"],onChange:v,onNativePick:c},null,8,["value"])])]),_:1})])])):be("",!0)}}}),kv=Ue(Iv,[["__scopeId","data-v-8bdd557d"]]),xo=t=>(zt("data-v-4319910b"),t=t(),Vt(),t),Bv={key:0,class:"box"},Ov=xo(()=>T("h4",null,"\u56FE\u50CF\u63CF\u8FB9",-1)),Dv={class:"hd-wrap"},Tv={class:"hd"},Mv=xo(()=>T("span",null,"\u542F\u7528\u56FE\u50CF\u63CF\u8FB9",-1)),Qv={class:"hd-wrap"},Lv=xo(()=>T("div",{class:"hd"},[T("span",null,"\u662F\u5426\u53EA\u663E\u793A\u63CF\u8FB9")],-1)),jv={class:"operation"},Pv=xo(()=>T("div",{class:"hd",style:{"flex-basis":"98px"}},[T("span",null,"\u63CF\u8FB9\u5927\u5C0F")],-1)),Fv={style:{width:"100%"}},Rv={class:"operation",style:{"justify-content":"space-between"}},Nv=xo(()=>T("div",{class:"hd"},[T("span",null,"\u63CF\u8FB9\u989C\u8272")],-1)),zv=Ce({__name:"ImgStroke",setup(t){const e=Ye(),{mixinState:n,canvasEditor:i}=$i(),o=ce(!1),p=ce(!1),v=ce(5),c=ce("#000"),r=ce(!1),d=()=>{var m;const A=(m=i.fabricCanvas)==null?void 0:m.getActiveObject();if(!(!A||!Gi.isImage(A)))return A},u=()=>{const A=d();A&&(A.set("originWidth",A==null?void 0:A.get("width")),A.set("originHeight",A==null?void 0:A.get("height")),A.set("originSrc",A==null?void 0:A.getSrc()))},a=()=>{const A=C(r)?"destination-out":"source-over";i.imageStrokeDraw(C(c),C(v),A)},l=()=>{v.value=0,a()},s=A=>we(this,null,function*(){A?(C(v)===0&&(v.value=5),u(),a()):l()}),h=A=>{v.value=A,a()},g=A=>{c.value=A,a()},f=()=>{o.value=!!d()};return je(()=>{Le(()=>{var A;(A=e.editor)==null||A.on("selectOne",f)})}),Rt(()=>{e.editor.off("selectOne",f)}),(A,m)=>{const y=It,b=it,x=og,S=qo,O=as,R=mi;return C(n).mSelectMode==="one"&&C(o)?($(),se("div",Bv,[M(y,{"content-position":"left"},{default:K(()=>[Ov]),_:1}),T("div",Dv,[T("div",Tv,[Mv,M(x,{trigger:"hover",content:"\u53EA\u652F\u6301png\u900F\u660E\u56FE\u50CF"},{reference:K(()=>[M(b,{color:"#f34250"},{default:K(()=>[M(C(IH))]),_:1})]),_:1})]),M(S,{modelValue:C(p),"onUpdate:modelValue":m[0]||(m[0]=Z=>ut(p)?p.value=Z:null),size:"large","inline-prompt":"",class:"switch","active-text":"\u5F00\u542F","inactive-text":"\u5173\u95ED",onChange:s},null,8,["modelValue"])]),C(p)?($(),se(Qe,{key:0},[T("div",Qv,[Lv,M(S,{"inline-prompt":"",modelValue:C(r),"onUpdate:modelValue":m[1]||(m[1]=Z=>ut(r)?r.value=Z:null),size:"large",class:"switch","active-text":"\u662F","inactive-text":"\u5426",onChange:a},null,8,["modelValue"])]),T("div",jv,[Pv,T("div",Fv,[M(O,{modelValue:C(v),"onUpdate:modelValue":m[2]||(m[2]=Z=>ut(v)?v.value=Z:null),max:50,onChange:h},null,8,["modelValue"])])]),T("div",Rv,[Nv,T("div",null,[M(R,{modelValue:C(c),"onUpdate:modelValue":m[3]||(m[3]=Z=>ut(c)?c.value=Z:null),onChange:g,placement:"left"},null,8,["modelValue"])])])],64)):be("",!0)])):be("",!0)}}}),Vv=Ue(zv,[["__scopeId","data-v-4319910b"]]),Ht={SELECT:"select",COLOR:"color",NUMBER:"number"},Eh=[{type:"Brightness",status:!1,params:[{key:"brightness",value:0,uiType:Ht.NUMBER,min:-1,max:1,step:.01}]},{type:"Contrast",status:!1,params:[{key:"contrast",value:0,uiType:Ht.NUMBER,min:-1,max:1,step:.01}]},{type:"Saturation",status:!1,params:[{key:"saturation",value:0,uiType:Ht.NUMBER,min:-1,max:1,step:.01}]},{type:"Vibrance",status:!1,params:[{key:"vibrance",value:0,uiType:Ht.NUMBER,min:-1,max:1,step:.01}]},{type:"HueRotation",status:!1,params:[{key:"rotation",value:0,uiType:Ht.NUMBER,min:-1,max:1,step:.01}]},{type:"Noise",status:!1,params:[{key:"noise",value:0,uiType:Ht.NUMBER,min:-1,max:1e3,step:.1}]},{type:"Pixelate",status:!1,params:[{key:"blocksize",value:.01,uiType:Ht.NUMBER,min:.01,max:100,step:.01}]},{type:"Blur",status:!1,params:[{key:"blur",value:0,uiType:Ht.NUMBER,min:0,max:1,step:.01}]},{type:"Grayscale",status:!1,params:[{key:"mode",value:"average",uiType:Ht.SELECT,list:["average","lightness","luminosity"]}]},{type:"RemoveColor",status:!1,params:[{key:"color",value:"",uiType:Ht.COLOR},{key:"distance",value:0,uiType:Ht.NUMBER,min:0,max:1,step:.01}]}],Ih=[{type:"Gamma",status:!1,params:[{key:"red",value:0,uiType:Ht.NUMBER,min:.01,max:2.2,step:.01},{key:"green",value:0,uiType:Ht.NUMBER,min:.01,max:2.2,step:.01},{key:"blue",value:0,uiType:Ht.NUMBER,min:.01,max:2.2,step:.01}],handler(t,e,n){return{gamma:[t,e,n]}}}],Uv=t=>(zt("data-v-311ff7ef"),t=t(),Vt(),t),Hv={key:0,class:"box"},Gv=Uv(()=>T("h4",null,"\u56FE\u7247\u6EE4\u955C",-1)),Yv={class:"filter-box"},Wv=["src","onClick"],Xv={key:0,class:"content"},$v={key:0},qv={key:1},Kv={key:2},Jv=Ce({__name:"Filters",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o={BlackWhite:!1,Brownie:!1,Vintage:!1,Kodachrome:!1,technicolor:!1,Polaroid:!1,Invert:!1,Sepia:!1},p=et({uiType:Ht,noParamsFilters:o,paramsFilters:[...Eh],combinationFilters:[...Ih],type:""}),v=(f,A)=>{var y;const m=(y=n.canvas)==null?void 0:y.getActiveObjects()[0];p.noParamsFilters[f]=A,A?s(m,f)||l(m,f):h(m,f)},c=f=>{var y;const A=(y=n.canvas)==null?void 0:y.getActiveObjects()[0],m=[...p.paramsFilters,...p.combinationFilters].find(b=>b.type===f);m.status?m.handler?a(m):m.params.forEach(b=>{u(f,b.key,b.value)}):h(A,f)},r=()=>{var A,m;const f=(A=n.canvas)==null?void 0:A.getActiveObjects()[0];f&&(p.type=f.type,p.type==="image"&&(Object.keys(o).forEach(y=>{var b;p.noParamsFilters[y]=!!s(f,y),(b=i==null?void 0:i.proxy)==null||b.$forceUpdate()}),Eh.forEach(y=>{const b=p.paramsFilters.find(S=>S.type===y.type),x=s(f,y.type);b.status=!!x,b.params.forEach(S=>{S.value=x?x[S.key]:S.value})}),Ih.forEach(y=>{const b=p.combinationFilters.find(S=>S.type===y.type),x=s(f,y.type);b.status=!!x})),(m=i==null?void 0:i.proxy)==null||m.$forceUpdate())};je(()=>{Le(()=>{var f;(f=n.editor)==null||f.on("selectOne",r)})}),Rt(()=>{Le(()=>{var f;(f=n.editor)==null||f.off("selectOne",r)})});function d(f){return new URL(Object.assign({})[`../../../assets/filters/${f}.png`],hG.url).href}function u(f,A,m){var x,S;const y=(x=n.canvas)==null?void 0:x.getActiveObjects()[0],b=s(y,f);if(b)b[A]=m;else{const O=l(y,f);O[A]=m}y.applyFilters(),(S=n.canvas)==null||S.renderAll()}function a(f){var y;const A=(y=n.canvas)==null?void 0:y.getActiveObjects()[0];h(A,f.type);const m=f.params.map(b=>b.value);l(A,f.type,f.handler(...m))}function l(f,A,m=null){var S;let y;const b=g(A),x=le.fabric.Image.filters[b];return x&&(y=new x(m),y.options=m,f.filters.push(y)),f.applyFilters(),(S=n.canvas)==null||S.renderAll(),y}function s(f,A){let m=null;if(f){const y=g(A),{length:b}=f.filters;let x,S;for(S=0;S<b;S+=1)if(x=f.filters[S],x.type===y){m=x;break}}return m}function h(f,A){var y;const m=g(A);f.filters=f.filters.filter(b=>b.type!==m),f.applyFilters(),(y=n.canvas)==null||y.renderAll()}function g(f){return f.charAt(0).toUpperCase()+f.slice(1)}return(f,A)=>{const m=It,y=jp,b=zE,x=lE,S=ac,O=as,R=mi,Z=NE;return C(e).mSelectMode==="one"&&C(p).type==="image"?($(),se("div",Hv,[M(m,{"content-position":"left"},{default:K(()=>[Gv]),_:1}),M(Z,null,{default:K(()=>[M(b,{name:"1"},{title:K(()=>[Be(Se(f.$t("editor.filters.simple")),1)]),default:K(()=>[T("div",Yv,[($(!0),se(Qe,null,We(C(p).noParamsFilters,(ee,re)=>($(),se("div",{class:"filter-item",key:re},[T("img",{src:d(re),onClick:ae=>v(re,!o[re])},null,8,Wv),M(y,{modelValue:C(p).noParamsFilters[re],"onUpdate:modelValue":ae=>C(p).noParamsFilters[re]=ae,onChange:ae=>v(re,ae)},{default:K(()=>[Be(Se(f.$t("editor.filters."+re)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))])]),_:1}),M(b,{name:"2",title:f.$t("editor.filters.complex")},{default:K(()=>[T("div",null,[($(!0),se(Qe,null,We([...C(p).paramsFilters,...C(p).combinationFilters],ee=>($(),se("div",{class:"filter-item has-params",key:ee.type},[M(y,{modelValue:ee.status,"onUpdate:modelValue":re=>ee.status=re,onChange:re=>c(ee.type)},{default:K(()=>[Be(Se(f.$t("editor.filters."+ee.type)),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),ee.status?($(),se("div",Xv,[($(!0),se(Qe,null,We(ee.params,re=>($(),se("div",{class:"content slider-box",key:re},[re.uiType===C(Ht).SELECT?($(),se("div",$v,[M(S,{modelValue:re.value,"onUpdate:modelValue":ae=>re.value=ae,onChange:ae=>c(ee.type)},{default:K(()=>[($(!0),se(Qe,null,We(re.list,ae=>($(),_e(x,{value:ae,key:ae},{default:K(()=>[Be(Se(f.$t("editor.filters."+ee.type+"List."+ae)),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):be("",!0),re.uiType===C(Ht).NUMBER?($(),se("div",qv,[M(O,{modelValue:re.value,"onUpdate:modelValue":ae=>re.value=ae,max:re.max,min:re.min,step:re.step,onOnInput:ae=>c(ee.type)},null,8,["modelValue","onUpdate:modelValue","max","min","step","onOnInput"])])):be("",!0),re.uiType===C(Ht).COLOR?($(),se("div",Kv,[M(R,{modelValue:re.value,"onUpdate:modelValue":ae=>re.value=ae,"show-alpha":"",size:"small",onChange:ae=>c(ee.type)},null,8,["modelValue","onUpdate:modelValue","onChange"])])):be("",!0)]))),128))])):be("",!0)]))),128))])]),_:1},8,["title"])]),_:1})])):be("",!0)}}}),Zv=Ue(Jv,[["__scopeId","data-v-311ff7ef"]]),Vn=t=>(zt("data-v-de061f3e"),t=t(),Vt(),t),eA={key:0,class:"box attr-item-box"},tA=Vn(()=>T("h4",null,"\u4E8C\u4F4D\u7801\u5C5E\u6027",-1)),nA={class:"flex-view"},iA={class:"flex-item"},rA=Vn(()=>T("span",{class:"label"},"\u5185\u5BB9",-1)),oA={class:"content"},aA={class:"flex-view"},sA={class:"flex-item"},lA={class:"content number-content"},cA={class:"flex-item",style:{"margin-left":"20px"}},uA={class:"content number-content"},hA={class:"flex-view"},dA={class:"flex-item"},fA=Vn(()=>T("span",{class:"label"},"\u6563\u70B9",-1)),pA={class:"content"},gA={class:"flex-item"},vA=Vn(()=>T("span",{class:"label",style:{"margin-left":"10px"}},"\u7C7B\u578B",-1)),AA={class:"content"},mA={class:"flex-view"},yA={class:"flex-item"},bA=Vn(()=>T("span",{class:"label"},"\u5916\u89D2",-1)),CA={class:"content"},wA={class:"flex-item"},xA=Vn(()=>T("span",{class:"label",style:{"margin-left":"10px"}},"\u7C7B\u578B",-1)),_A={class:"content"},SA={class:"flex-view"},EA={class:"flex-item"},IA=Vn(()=>T("span",{class:"label"},"\u5185\u89D2",-1)),kA={class:"content"},BA={class:"flex-item"},OA=Vn(()=>T("span",{class:"label",style:{"margin-left":"10px"}},"\u7C7B\u578B",-1)),DA={class:"content"},TA={class:"flex-view"},MA={class:"flex-item"},QA=Vn(()=>T("span",{class:"label"},"\u80CC\u666F",-1)),LA={class:"content"},jA={class:"flex-item"},PA=Vn(()=>T("span",{class:"label",style:{"margin-left":"10px"}},"\u5BB9\u9519",-1)),FA={class:"content"},RA=Ce({__name:"AttributeQrCode",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=["image"],p=ce(""),v=ue(()=>p.value==="qrcode"),c=et({data:"",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"dot",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}),r=l=>{var h;const s=(h=n.canvas)==null?void 0:h.getActiveObject();if(!(l&&l.target&&l.target!==s)&&(p.value=(s==null?void 0:s.extensionType)||"",s&&o.includes(s.type)&&(s==null?void 0:s.extensionType)==="qrcode")){const g=s.get("extension");Object.keys(g).forEach(f=>{c[f]=g[f]})}},d=()=>{var l;n.editor.setQrCode(Nr(c)),(l=n.canvas)==null||l.renderAll()},u=()=>{var l;p.value="",(l=i==null?void 0:i.proxy)==null||l.$forceUpdate()},a=et({CornersType:[],DotsType:[],cornersDotType:[],errorCorrectionLevelType:[]});return je(()=>{Le(()=>{var s,h,g,f;const l=(s=n.editor)==null?void 0:s.getQrCodeTypes();l&&Object.assign(a,l),(h=n.editor)==null||h.on("selectCancel",u),(g=n.editor)==null||g.on("selectOne",r),(f=n.canvas)==null||f.on("object:modified",r)})}),Rt(()=>{var l,s,h;(l=n.editor)==null||l.off("selectCancel",u),(s=n.editor)==null||s.off("selectOne",r),(h=n.canvas)==null||h.off("object:modified",r)}),(l,s)=>{const h=It,g=Ft,f=mi,A=ei,m=Pn;return C(e).mSelectMode==="one"&&o.includes(C(e).mSelectOneType)&&C(v)?($(),se("div",eA,[M(h,{"content-position":"left"},{default:K(()=>[tA]),_:1}),T("div",null,[T("div",nA,[T("div",iA,[rA,T("div",oA,[M(g,{modelValue:C(c).data,"onUpdate:modelValue":s[0]||(s[0]=y=>C(c).data=y),onChange:d},null,8,["modelValue"])])])]),T("div",aA,[T("div",sA,[T("div",lA,[M(C(An),{modelValue:C(c).width,"onUpdate:modelValue":s[1]||(s[1]=y=>C(c).width=y),onOnChange:d,append:"\u5BBD\u5EA6",min:1},null,8,["modelValue"])])]),T("div",cA,[T("div",uA,[M(C(An),{modelValue:C(c).margin,"onUpdate:modelValue":s[2]||(s[2]=y=>C(c).margin=y),onOnChange:d,append:"\u8FB9\u8DDD",min:1},null,8,["modelValue"])])])]),T("div",hA,[T("div",dA,[fA,T("div",pA,[M(f,{id:"dotsColor",modelValue:C(c).dotsColor,"onUpdate:modelValue":s[3]||(s[3]=y=>C(c).dotsColor=y),onChange:d,"show-alpha":""},null,8,["modelValue"])])]),T("div",gA,[vA,T("div",AA,[M(m,{modelValue:C(c).dotsType,"onUpdate:modelValue":s[4]||(s[4]=y=>C(c).dotsType=y),onChange:d,style:{width:"90px"}},{default:K(()=>[($(!0),se(Qe,null,We(C(a).DotsType,y=>($(),_e(A,{value:y,key:y},{default:K(()=>[Be(Se(y),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),T("div",mA,[T("div",yA,[bA,T("div",CA,[M(f,{id:"cornersSquareColor",modelValue:C(c).cornersSquareColor,"onUpdate:modelValue":s[5]||(s[5]=y=>C(c).cornersSquareColor=y),onChange:d,"show-alpha":""},null,8,["modelValue"])])]),T("div",wA,[xA,T("div",_A,[M(m,{modelValue:C(c).cornersSquareType,"onUpdate:modelValue":s[6]||(s[6]=y=>C(c).cornersSquareType=y),onChange:d,style:{width:"90px"}},{default:K(()=>[($(!0),se(Qe,null,We(C(a).cornersDotType,y=>($(),_e(A,{value:y,key:y},{default:K(()=>[Be(Se(y),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),T("div",SA,[T("div",EA,[IA,T("div",kA,[M(f,{id:"cornersDotColor",modelValue:C(c).cornersDotColor,"onUpdate:modelValue":s[7]||(s[7]=y=>C(c).cornersDotColor=y),onChange:d,"show-alpha":""},null,8,["modelValue"])])]),T("div",BA,[OA,T("div",DA,[M(m,{modelValue:C(c).cornersDotType,"onUpdate:modelValue":s[8]||(s[8]=y=>C(c).cornersDotType=y),onChange:d,style:{width:"90px"}},{default:K(()=>[($(!0),se(Qe,null,We(C(a).cornersDotType,y=>($(),_e(A,{value:y,key:y},{default:K(()=>[Be(Se(y),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])]),T("div",TA,[T("div",MA,[QA,T("div",LA,[M(f,{id:"background",modelValue:C(c).background,"onUpdate:modelValue":s[9]||(s[9]=y=>C(c).background=y),onChange:d,"show-alpha":""},null,8,["modelValue"])])]),T("div",jA,[PA,T("div",FA,[M(m,{modelValue:C(c).errorCorrectionLevel,"onUpdate:modelValue":s[10]||(s[10]=y=>C(c).errorCorrectionLevel=y),onChange:d,style:{width:"90px"}},{default:K(()=>[($(!0),se(Qe,null,We(C(a).errorCorrectionLevelType,y=>($(),_e(A,{value:y,key:y},{default:K(()=>[Be(Se(y),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])])])])):be("",!0)}}}),NA=Ue(RA,[["__scopeId","data-v-de061f3e"]]),_i=t=>(zt("data-v-fafd93a4"),t=t(),Vt(),t),zA={key:0,class:"attr-item-box"},VA=_i(()=>T("h4",null,"\u6761\u5F62\u7801\u5C5E\u6027",-1)),UA={class:"flex-view"},HA={class:"flex-item"},GA=_i(()=>T("span",{class:"label"},"\u4EE3\u7801",-1)),YA={class:"content"},WA={key:0,class:"flex-view"},XA={class:"flex-item"},$A=_i(()=>T("span",{class:"label"},"\u6587\u5B57",-1)),qA={class:"content"},KA={class:"flex-view"},JA={class:"flex-item"},ZA=_i(()=>T("span",{class:"label"},"\u663E\u793A",-1)),em={class:"content"},tm={key:0,class:"flex-item"},nm=_i(()=>T("span",{class:"label"},"\u5782\u76F4",-1)),im={class:"content"},rm={key:1,class:"flex-view"},om={class:"flex-item"},am=["innerHTML"],sm={class:"flex-view"},lm={span:12,class:"flex-item"},cm=_i(()=>T("span",{class:"label"},"\u6761\u7801",-1)),um={class:"content"},hm={key:0,span:12,class:"flex-item"},dm={class:"content f-center"},fm={class:"flex-view"},pm={class:"flex-item"},gm=_i(()=>T("span",{class:"label"},"\u80CC\u666F",-1)),vm={class:"content"},Am={class:"flex-item"},mm=_i(()=>T("span",{class:"label mr-10px"},"\u7C7B\u578B",-1)),ym={class:"content"},bm=Ce({__name:"AttributeBarcode",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),o=["image"],p=ce(""),v=ue(()=>p.value==="barcode"),c=et({value:"",format:"",text:"12121",textAlign:"left",textPosition:"bottom",fontSize:12,background:"",lineColor:"",displayValue:!1}),r=["left","center","right"],d=['<svg t="1650441458823" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3554" width="18" height="18"><path d="M198.4 198.4h341.333333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666667h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-569.6c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m0 170.666666h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533334z m0 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3555"></path></svg>','<svg t="1650441512015" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3704" width="18" height="18"><path d="M313.6 198.4h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533333z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z m115.2 170.666666h398.933333c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533334 19.2v57.6c0 8.533333-2.133333 14.933333-8.533334 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-398.933333c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 10.666667-8.533333 19.2-8.533334z m-115.2 170.666667h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-6.4-8.533333-12.8-8.533333-19.2v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 4.266667-4.266667 12.8-8.533333 19.2-8.533333z" p-id="3705"></path></svg>','<svg t="1650441519862" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="18" height="18"><path d="M454.4 283.733333v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h341.333334c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-341.333334c-8.533333 0-14.933333-2.133333-19.2-8.533334-4.266667-4.266667-8.533333-10.666667-8.533333-19.2z m-226.133333 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h569.6c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333H256c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533333-19.2z m113.066666 170.666667v-57.6c0-8.533333 2.133333-14.933333 8.533334-19.2 6.4-6.4 12.8-8.533333 19.2-8.533334h454.4c8.533333 0 14.933333 2.133333 19.2 8.533334 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533333h-454.4c-8.533333 0-14.933333-2.133333-19.2-8.533333-6.4-4.266667-8.533333-10.666667-8.533334-19.2z m-170.666666 170.666666v-57.6c0-8.533333 2.133333-14.933333 8.533333-19.2 6.4-6.4 12.8-8.533333 19.2-8.533333h625.066667c8.533333 0 14.933333 2.133333 19.2 8.533333 6.4 6.4 8.533333 12.8 8.533333 19.2v57.6c0 8.533333-2.133333 14.933333-8.533333 19.2-6.4 6.4-12.8 8.533333-19.2 8.533334h-625.066667c-8.533333 0-14.933333-2.133333-19.2-8.533334-6.4-4.266667-8.533333-10.666667-8.533333-19.2z" p-id="3855"></path></svg>'],u=h=>{var f;const g=(f=n.canvas)==null?void 0:f.getActiveObject();h&&h.target&&h.target!==g||(p.value=(g==null?void 0:g.extensionType)||"",g&&o.includes(g.type)&&(g==null?void 0:g.extensionType)==="barcode"&&(c.value=g.get("extension").value,c.format=g.get("extension").format,c.text=g.get("extension").text,c.textAlign=g.get("extension").textAlign,c.textPosition=g.get("extension").textPosition,c.fontSize=g.get("extension").fontSize,c.background=g.get("extension").background,c.lineColor=g.get("extension").lineColor,c.displayValue=g.get("extension").displayValue))},a=()=>{var h;n.editor.setBarcode(Nr(c)),(h=n.canvas)==null||h.renderAll()},l=()=>{var h;p.value="",(h=i==null?void 0:i.proxy)==null||h.$forceUpdate()},s=ce([]);return je(()=>{Le(()=>{var h,g,f,A;u(),s.value=(h=n.editor)==null?void 0:h.getBarcodeTypes(),(g=n.editor)==null||g.on("selectCancel",l),(f=n.editor)==null||f.on("selectOne",u),(A=n.canvas)==null||A.on("object:modified",u)})}),Rt(()=>{var h,g,f;(h=n.editor)==null||h.off("selectCancel",l),(g=n.editor)==null||g.off("selectOne",u),(f=n.canvas)==null||f.off("object:modified",u)}),(h,g)=>{const f=It,A=Ft,m=qo,y=ei,b=Pn,x=Up,S=ac,O=mi;return C(e).mSelectMode==="one"&&o.includes(C(e).mSelectOneType)&&C(v)?($(),se("div",zA,[M(f,{"content-position":"left"},{default:K(()=>[VA]),_:1}),T("div",null,[T("div",UA,[T("div",HA,[GA,T("div",YA,[M(A,{modelValue:C(c).value,"onUpdate:modelValue":g[0]||(g[0]=R=>C(c).value=R),onChange:a},null,8,["modelValue"])])])]),C(c).displayValue?($(),se("div",WA,[T("div",XA,[$A,T("div",qA,[M(A,{modelValue:C(c).text,"onUpdate:modelValue":g[1]||(g[1]=R=>C(c).text=R),onChange:a},null,8,["modelValue"])])])])):be("",!0),T("div",KA,[T("div",JA,[ZA,T("div",em,[M(m,{modelValue:C(c).displayValue,"onUpdate:modelValue":g[2]||(g[2]=R=>C(c).displayValue=R),onChange:a},null,8,["modelValue"])])]),C(c).displayValue?($(),se("div",tm,[nm,T("div",im,[M(b,{modelValue:C(c).textPosition,"onUpdate:modelValue":g[3]||(g[3]=R=>C(c).textPosition=R),onChange:a},{default:K(()=>[M(y,{value:"bottom"},{default:K(()=>[Be("bottom")]),_:1}),M(y,{value:"top"},{default:K(()=>[Be("top")]),_:1})]),_:1},8,["modelValue"])])])):be("",!0)]),C(c).displayValue?($(),se("div",rm,[T("div",om,[M(S,{class:"button-group",modelValue:C(c).textAlign,"onUpdate:modelValue":g[4]||(g[4]=R=>C(c).textAlign=R),onChange:a,size:"small"},{default:K(()=>[($(),se(Qe,null,We(r,(R,Z)=>M(x,{label:R,value:R,key:R},{default:K(()=>[T("span",{innerHTML:d[Z]},null,8,am)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])])])):be("",!0),T("div",sm,[T("div",lm,[cm,T("div",um,[M(O,{modelValue:C(c).lineColor,"onUpdate:modelValue":g[5]||(g[5]=R=>C(c).lineColor=R),onChange:a,"show-alpha":""},null,8,["modelValue"])])]),C(c).displayValue?($(),se("div",hm,[T("div",dm,[M(C(An),{modelValue:C(c).fontSize,"onUpdate:modelValue":g[6]||(g[6]=R=>C(c).fontSize=R),onOnChange:a,append:"\u5B57\u53F7",min:1},null,8,["modelValue"])])])):be("",!0)]),T("div",fm,[T("div",pm,[gm,T("div",vm,[M(O,{modelValue:C(c).background,"onUpdate:modelValue":g[7]||(g[7]=R=>C(c).background=R),onChange:a,"show-alpha":""},null,8,["modelValue"])])]),T("div",Am,[mm,T("div",ym,[M(b,{modelValue:C(c).format,"onUpdate:modelValue":g[8]||(g[8]=R=>C(c).format=R),onOnChange:a,style:{width:"90px"}},{default:K(()=>[($(!0),se(Qe,null,We(C(s),R=>($(),_e(y,{value:R,key:R},{default:K(()=>[Be(Se(R),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])])])])):be("",!0)}}}),Cm=Ue(bm,[["__scopeId","data-v-fafd93a4"]]),kh=t=>(zt("data-v-345e1c69"),t=t(),Vt(),t),wm={key:0,class:"attr-item-box"},xm={class:"bg-item"},_m=kh(()=>T("svg",{t:"1650443094178",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1549",width:"14",height:"14"},[T("path",{d:"M252.76928 299.904l146.2784 0 0 472.42752-146.2784 0 0-472.42752Z","p-id":"1550"}),T("path",{d:"M477.48096 85.34528l70.87104 0 0 885.80608-70.87104 0 0-885.80608Z","p-id":"1551"}),T("path",{d:"M629.80096 284.8l31.0016 0 0 502.88128-31.0016 0L629.80096 284.8zM776.42752 284.8l31.0016 0 0 502.88128-31.0016 0L776.42752 284.8zM657.09056 315.8016l0-31.0016 123.04896 0 0 31.0016L657.09056 315.8016zM657.27488 787.64544l0-31.0016 123.04896 0 0 31.0016L657.27488 787.64544z","p-id":"1552"})],-1)),Sm=kh(()=>T("svg",{t:"1650443104385",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1749",width:"14",height:"14"},[T("path",{d:"M286.01856 250.91584l472.4224 0 0 146.2784-472.4224 0 0-146.2784Z","p-id":"1750"}),T("path",{d:"M87.19872 475.62752l885.80096 0 0 70.87104-885.80096 0 0-70.87104Z","p-id":"1751"}),T("path",{d:"M773.55008 627.94752l0 31.0016L270.6688 658.94912l0-31.0016L773.55008 627.94752zM773.55008 774.5792l0 31.0016L270.6688 805.5808l0-31.0016L773.55008 774.5792zM742.54848 655.24224l31.0016 0 0 123.04896-31.0016 0L742.54848 655.24224zM270.70464 655.42144l31.0016 0 0 123.04896-31.0016 0L270.70464 655.42144z","p-id":"1752"})],-1)),Em=Ce({__name:"Flip",setup(t){const e=Re("mixinState"),n=Ye(),i=()=>e.mSelectMode!=="one",o=p=>{var c,r;const v=(c=n.canvas)==null?void 0:c.getActiveObject();v.set(`flip${p}`,!v[`flip${p}`]).setCoords(),(r=n.canvas)==null||r.requestRenderAll()};return(p,v)=>{const c=st,r=Kt;return C(e).mSelectMode==="one"?($(),se("div",wm,[T("div",xm,[M(r,{content:p.$t("editor.attrSetting.flip.x")},{default:K(()=>[M(c,{disabled:i(),onClick:v[0]||(v[0]=d=>o("X")),link:""},{default:K(()=>[_m]),_:1},8,["disabled"])]),_:1},8,["content"]),M(r,{content:p.$t("editor.attrSetting.flip.y")},{default:K(()=>[M(c,{disabled:i(),onClick:v[1]||(v[1]=d=>o("Y")),link:""},{default:K(()=>[Sm]),_:1},8,["disabled"])]),_:1},8,["content"])])])):be("",!0)}}}),Im=Ue(Em,[["__scopeId","data-v-345e1c69"]]),km={key:0,class:"attr-item-box"},Bm={class:"bg-item",style:{"margin-bottom":"10px"}},Om={class:"bg-item"},Dm=Ce({__name:"ClipImage",setup(t){const e=Re("mixinState"),n=Ye(),i=ft(),{t:o}=Ti(),p=ce(""),v=[{label:o("edotpr.polygonClip"),value:"polygon"},{label:o("edotpr.rectClip"),value:"rect"},{label:o("edotpr.circleClip"),value:"circle"},{label:o("edotpr.triangleClip"),value:"triangle"},{label:o("edotpr.polygonClipInverted"),value:"polygon-inverted"},{label:o("edotpr.rectClipInverted"),value:"rect-inverted"},{label:o("edotpr.circleClipInverted"),value:"circle-inverted"},{label:o("edotpr.triangleClipInverted"),value:"triangle-inverted"}],c=u=>we(this,null,function*(){n.editor.addClipPathToImage(u)}),r=()=>{n.editor.removeClip()},d=()=>{var a,l;const u=(a=n.canvas)==null?void 0:a.getActiveObjects()[0];u&&(p.value=u.type,(l=i==null?void 0:i.proxy)==null||l.$forceUpdate())};return je(()=>{var u;(u=n.editor)==null||u.on("selectOne",d)}),Rt(()=>{var u;(u=n.editor)==null||u.off("selectOne",d)}),(u,a)=>{const l=st,s=Mr,h=Qr,g=Lr;return C(e).mSelectMode==="one"&&C(p)==="image"?($(),se("div",km,[T("div",Bm,[M(g,{style:{width:"270px"},onCommand:c},{dropdown:K(()=>[M(h,null,{default:K(()=>[($(),se(Qe,null,We(v,f=>M(s,{key:f.value,command:f.value},{default:K(()=>[Be(Se(f.label),1)]),_:2},1032,["command"])),64))]),_:1})]),default:K(()=>[M(l,{text:""},{default:K(()=>[Be(Se(u.$t("editor.createClip")),1)]),_:1})]),_:1})]),T("div",Om,[M(l,{onClick:r,text:""},{default:K(()=>[Be(Se(u.$t("editor.removeClip")),1)]),_:1})])])):be("",!0)}}}),Tm=Ue(Dm,[["__scopeId","data-v-44c69cde"]]),Mm={key:0,class:"attr-item-box"},Qm={class:"bg-item"},Lm=Ce({__name:"ReplaceImg",setup(t){const e=Re("mixinState"),n=Ye(),{getImgStr:i,selectFiles:o,insertImgFile:p}=Gi,v=ft(),c=ce(""),r=()=>we(this,null,function*(){var a;const u=(a=n.canvas)==null?void 0:a.getActiveObjects()[0];if(u&&u.type==="image"){const[l]=yield o({accept:"image/*",multiple:!1}),s=yield i(l),h=yield p(s),g=u.get("width"),f=u.get("height"),A=u.get("scaleX"),m=u.get("scaleY");u.setSrc(h.src,()=>{var y;u.set("scaleX",g*A/h.width),u.set("scaleY",f*m/h.height),(y=n.canvas)==null||y.renderAll()}),h.remove()}}),d=()=>{var a,l;const u=(a=n.canvas)==null?void 0:a.getActiveObjects()[0];u&&(c.value=u.type,(l=v==null?void 0:v.proxy)==null||l.$forceUpdate())};return je(()=>{Le(()=>{var u;(u=n.editor)==null||u.on("selectOne",d)})}),Rt(()=>{var u;(u=n.editor)==null||u.off("selectOne",d)}),(u,a)=>{const l=st;return C(e).mSelectMode==="one"&&C(c)==="image"?($(),se("div",Mm,[T("div",Qm,[M(l,{onClick:r,text:""},{default:K(()=>[Be(Se(u.$t("editor.repleaceImg")),1)]),_:1})])])):be("",!0)}}}),jm=Ue(Lm,[["__scopeId","data-v-dee7b64a"]]),Pm=Ce({__name:"Edit",setup(t){const e=Re("mixinState"),n=Ye(),i=()=>{var p;const o=(p=n.editor.fabricCanvas)==null?void 0:p.getActiveObject();o&&o.type==="polygon"?n.editor.activeEdit():cn.warning("\u8BF7\u68C0\u67E5\u9009\u62E9polygon")};return(o,p)=>{const v=hr,c=st,r=Kt;return C(e).mSelectOneType==="polygon"?($(),_e(r,{key:0,content:o.$t("editor.quick.editPoly")},{default:K(()=>[M(c,{onClick:i,link:""},{default:K(()=>[M(v,{style:{width:"20px",height:"20px"},name:"editor-brush"})]),_:1})]),_:1},8,["content"])):be("",!0)}}}),Fm=Ce({__name:"Hide",setup(t){const e=Re("mixinState"),n=Ye(),i=ce(!1),o=v=>{var c,r;((c=n.canvas)==null?void 0:c.getActiveObject()).set("visible",!v),(r=n.canvas)==null||r.requestRenderAll(),i.value=v},p=()=>{var c;const v=(c=n.canvas)==null?void 0:c.getActiveObject();i.value=!v.visible};return je(()=>{var v;(v=n.editor)==null||v.on("selectOne",p)}),Rt(()=>{var v;(v=n.editor)==null||v.off("selectOne",p)}),(v,c)=>{const r=st;return C(e).mSelectMode==="one"?($(),_e(r,{key:0,text:"",content:v.$t("editor.quick.hide")},{default:K(()=>[C(i)?($(),_e(r,{key:0,onClick:c[0]||(c[0]=d=>o(!1)),icon:C(kH),link:""},null,8,["icon"])):($(),_e(r,{key:1,onClick:c[1]||(c[1]=d=>o(!0)),icon:C(BH),link:""},null,8,["icon"]))]),_:1},8,["content"])):be("",!0)}}}),Rm=Ue(Fm,[["__scopeId","data-v-b6f376dc"]]),Nm=Ce({__name:"Clone",setup(t){const e=Re("mixinState"),n=Ye(),i=Ot(function(){n.editor.clone()},300);return(o,p)=>{const v=st,c=Kt;return C(e).mSelectMode==="one"?($(),_e(c,{key:0,content:o.$t("editor.quick.copy")},{default:K(()=>[M(v,{onClick:C(i),icon:C(OH),link:""},null,8,["onClick","icon"])]),_:1},8,["content"])):be("",!0)}}}),zm=Ce({__name:"Delete",setup(t){const e=Re("mixinState"),n=Ye(),i=Ot(function(){n.editor.del()},300);return(o,p)=>{const v=st,c=Kt;return C(e).mSelectMode?($(),_e(c,{key:0,content:o.$t("editor.quick.del")},{default:K(()=>[M(v,{onClick:C(i),icon:C(x2),link:""},null,8,["onClick","icon"])]),_:1},8,["content"])):be("",!0)}}}),Vm=Ce({__name:"Lock",setup(t){const e=Re("mixinState"),n=Ye(),i=ce(!1),o=v=>{var c,r;v?(c=n.editor)==null||c.lock():(r=n.editor)==null||r.unLock()},p=v=>{i.value=!v[0].selectable};return je(()=>{Le(()=>{var v;(v=n.editor)==null||v.on("selectOne",p)})}),Rt(()=>{var v;(v=n.editor)==null||v.off("selectOne",p)}),(v,c)=>{const r=st,d=Kt;return C(e).mSelectMode==="one"?($(),_e(d,{key:0,content:v.$t("quick.lock")},{default:K(()=>[C(i)?($(),_e(r,{key:0,onClick:c[0]||(c[0]=u=>o(!1)),icon:C(A2),link:""},null,8,["icon"])):($(),_e(r,{key:1,onClick:c[1]||(c[1]=u=>o(!0)),icon:C(m2),link:""},null,8,["icon"]))]),_:1},8,["content"])):be("",!0)}}}),Um=Ue(Vm,[["__scopeId","data-v-81ad680e"]]),Ys=t=>(zt("data-v-5a0264d5"),t=t(),Vt(),t),Hm={key:0,class:"attr-item-box"},Gm={class:"bg-item"},Ym=Ys(()=>T("svg",{t:"1650442559691",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3787",width:"14",height:"14"},[T("path",{d:"M885 607H544V417h192V227H544V24h-64v203H288v190h192v190H139v190h341v203h64V797h341z","p-id":"3788"})],-1)),Wm=Ys(()=>T("svg",{t:"1650852784867",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2351",width:"14",height:"14"},[T("path",{d:"M544 480V64h-64v416H64v64h416v416h64V544h416v-64z","p-id":"2352"}),T("path",{d:"M123.7 241.1h119.5v64H123.7zM302.9 241.1h119.5v64H302.9zM601.6 241.1h119.5v64H601.6zM780.8 241.1h119.5v64H780.8zM123.7 718.9h119.5v64H123.7zM302.9 718.9h119.5v64H302.9zM601.6 718.9h119.5v64H601.6zM780.8 718.9h119.5v64H780.8z","p-id":"2353"})],-1)),Xm=Ys(()=>T("svg",{t:"1650442510967",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3412",width:"14",height:"14"},[T("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8z m-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6z m11.4 225.4c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z","p-id":"3413"})],-1)),$m=Ce({__name:"CenterAlign",setup(t){const e=Re("mixinState"),n=Ye(),i=o=>{n.editor.position(o)};return(o,p)=>{const v=It,c=st,r=Kt;return C(e).mSelectMode?($(),se("div",Hm,[M(v,{"content-position":"left"},{default:K(()=>[T("h4",null,Se(o.$t("editor.attrSetting.centerAlign.name")),1)]),_:1}),T("div",Gm,[M(r,{content:o.$t("editor.attrSetting.centerAlign.centerX")},{default:K(()=>[M(c,{disabled:!C(e).mSelectMode,onClick:p[0]||(p[0]=d=>i("centerH")),link:""},{default:K(()=>[Ym]),_:1},8,["disabled"])]),_:1},8,["content"]),M(r,{content:o.$t("editor.attrSetting.centerAlign.center")},{default:K(()=>[M(c,{disabled:!C(e).mSelectMode,onClick:p[1]||(p[1]=d=>i("center")),link:""},{default:K(()=>[Wm]),_:1},8,["disabled"])]),_:1},8,["content"]),M(r,{content:o.$t("editor.attrSetting.centerAlign.centerY")},{default:K(()=>[M(c,{disabled:!C(e).mSelectMode,onClick:p[2]||(p[2]=d=>i("centerV")),link:""},{default:K(()=>[Xm]),_:1},8,["disabled"])]),_:1},8,["content"])])])):be("",!0)}}}),qm=Ue($m,[["__scopeId","data-v-5a0264d5"]]),Km={key:0,class:"attr-item-box"},Jm=T("h4",null,"\u5BF9\u9F50",-1),Zm={class:"bg-item flex flex-wrap"},e3=Ce({__name:"Align",setup(t){const e=Re("mixinState"),n=Ye(),i=()=>{n.editor.left()},o=()=>{n.editor.right()},p=()=>{n.editor.xcenter()},v=()=>{n.editor.ycenter()},c=()=>{n.editor.top()},r=()=>{n.editor.bottom()},d=()=>{n.editor.xequation()},u=()=>{n.editor.yequation()};return(a,l)=>{const s=It,h=hr,g=st,f=Kt;return C(e).mSelectMode==="multiple"?($(),se("div",Km,[M(s,{"content-position":"left"},{default:K(()=>[Jm]),_:1}),T("div",Zm,[M(f,{content:a.$t("editor.attrSetting.align.left")},{default:K(()=>[M(g,{class:"w-36px",onClick:i,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"left"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.centerX")},{default:K(()=>[M(g,{class:"w-36px",onClick:p,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"centerx"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.right")},{default:K(()=>[M(g,{class:"w-36px",onClick:o,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"right"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.top")},{default:K(()=>[M(g,{class:"w-36px",onClick:c,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"top"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.centerY")},{default:K(()=>[M(g,{class:"w-36px",onClick:v,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"centery"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.bottom")},{default:K(()=>[M(g,{class:"w-36px",onClick:r,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"bottom"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.averageX")},{default:K(()=>[M(g,{class:"w-36px",onClick:d,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"sx"})]),_:1})]),_:1},8,["content"]),M(f,{content:a.$t("editor.attrSetting.align.averageY")},{default:K(()=>[M(g,{class:"w-36px",onClick:u,size:"small",link:""},{default:K(()=>[M(h,{style:{width:"20px",height:"20px"},name:"sy"})]),_:1})]),_:1},8,["content"])])])):be("",!0)}}}),Bh=t=>(zt("data-v-a9cdd218"),t=t(),Vt(),t),t3={key:0,class:"attr-item-box"},n3={class:"bg-item"},i3=Bh(()=>T("svg",{t:"1650848913991",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17131",width:"14",height:"14"},[T("path",{d:"M341.333333 341.333333 341.333333 512 554.666667 512 554.666667 341.333333 341.333333 341.333333M42.666667 42.666667 213.333333 42.666667 213.333333 85.333333 810.666667 85.333333 810.666667 42.666667 981.333333 42.666667 981.333333 213.333333 938.666667 213.333333 938.666667 810.666667 981.333333 810.666667 981.333333 981.333333 810.666667 981.333333 810.666667 938.666667 213.333333 938.666667 213.333333 981.333333 42.666667 981.333333 42.666667 810.666667 85.333333 810.666667 85.333333 213.333333 42.666667 213.333333 42.666667 42.666667M213.333333 810.666667 213.333333 853.333333 810.666667 853.333333 810.666667 810.666667 853.333333 810.666667 853.333333 213.333333 810.666667 213.333333 810.666667 170.666667 213.333333 170.666667 213.333333 213.333333 170.666667 213.333333 170.666667 810.666667 213.333333 810.666667M256 256 640 256 640 426.666667 768 426.666667 768 768 341.333333 768 341.333333 597.333333 256 597.333333 256 256M640 597.333333 426.666667 597.333333 426.666667 682.666667 682.666667 682.666667 682.666667 512 640 512 640 597.333333Z","p-id":"17132",fill:"#303133"})],-1)),r3=Bh(()=>T("svg",{t:"1650848938557",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17281",width:"14",height:"14"},[T("path",{d:"M85.333333 85.333333 256 85.333333 256 128 554.666667 128 554.666667 85.333333 725.333333 85.333333 725.333333 256 682.666667 256 682.666667 384 768 384 768 341.333333 938.666667 341.333333 938.666667 512 896 512 896 768 938.666667 768 938.666667 938.666667 768 938.666667 768 896 512 896 512 938.666667 341.333333 938.666667 341.333333 768 384 768 384 682.666667 256 682.666667 256 725.333333 85.333333 725.333333 85.333333 554.666667 128 554.666667 128 256 85.333333 256 85.333333 85.333333M768 512 768 469.333333 682.666667 469.333333 682.666667 554.666667 725.333333 554.666667 725.333333 725.333333 554.666667 725.333333 554.666667 682.666667 469.333333 682.666667 469.333333 768 512 768 512 810.666667 768 810.666667 768 768 810.666667 768 810.666667 512 768 512M554.666667 256 554.666667 213.333333 256 213.333333 256 256 213.333333 256 213.333333 554.666667 256 554.666667 256 597.333333 384 597.333333 384 512 341.333333 512 341.333333 341.333333 512 341.333333 512 384 597.333333 384 597.333333 256 554.666667 256M512 512 469.333333 512 469.333333 597.333333 554.666667 597.333333 554.666667 554.666667 597.333333 554.666667 597.333333 469.333333 512 469.333333 512 512Z","p-id":"17282"})],-1)),o3=Ce({__name:"Group",setup(t){const e=Re("mixinState"),n=Ye();let i=ue(()=>e.mSelectMode==="one"&&e.mSelectOneType==="group"),o=ue(()=>e.mSelectMode==="multiple");const p=()=>{n.editor.unGroup()},v=()=>{n.editor.group()};return(c,r)=>{const d=st;return C(o)||C(i)?($(),se("div",t3,[T("div",n3,[C(o)?($(),_e(d,{key:0,disabled:!C(o),onClick:v},{default:K(()=>[i3,Be(" "+Se(c.$t("editor.attrSetting.group")),1)]),_:1},8,["disabled"])):be("",!0),C(i)?($(),_e(d,{key:1,disabled:!C(i),onClick:p},{default:K(()=>[r3,Be(" "+Se(c.$t("editor.attrSetting.unGroup")),1)]),_:1},8,["disabled"])):be("",!0)])])):be("",!0)}}}),a3=Ue(o3,[["__scopeId","data-v-a9cdd218"]]),s3=t=>(zt("data-v-ed1fb341"),t=t(),Vt(),t),l3={key:0},c3={class:"attr-item-box"},u3={class:"attr-item-box"},h3={class:"color-list"},d3=["onClick"],f3={class:"attr-item-box"},p3=s3(()=>T("h4",null,"\u80CC\u666F\u56FE",-1)),g3={class:"f-center"},v3=Ce({__name:"BgBar",setup(t){const e=Re("mixinState"),n=Ye(),{getImgStr:i,selectFiles:o}=Gi,p=ce(["#5F2B63","#B23554","#F27E56","#FCE766","#86DCCD","#E7FDCB","#FFDC84","#F57677","#5FC2C7","#98DFE5","#C2EFF3","#DDFDFD","#9EE9D3","#2FC6C8","#2D7A9D","#48466d","#61c0bf","#bbded6","#fae3d9","#ffb6b9","#ffaaa5","#ffd3b6","#dcedc1","#a8e6cf"]),v=ce("rgba(255, 255, 255, 1)"),c=()=>{r(v.value)};function r(l){var s;l&&(console.log(n.canvas),(s=n.canvas)==null||s.setBackgroundColor(l,n.canvas.renderAll.bind(n.canvas)),v.value=l)}const d=()=>{var s,h;const l=(s=n.canvas)==null?void 0:s.getObjects().find(g=>g.id==="workspace");v.value=(h=l==null?void 0:l.fill)!=null?h:""},u=Ot(function(){o({accept:"image/*",multiple:!0}).then(l=>{Array.from(l).forEach(s=>{i(s).then(h=>{const g=new Image;g.crossOrigin="anonymous",g.src=h,g.onload=function(){const f=n.canvas,{width:A,height:m}=g,y=n.editor.getWorkspaceSize();f&&f.setBackgroundImage(h,f==null?void 0:f.renderAll.bind(f),{scaleX:y.width/A,scaleY:y.height/m})}})})})},250),a=Ot(function(){Mi.confirm("\u60A8\u786E\u5B9A\u79FB\u9664\u753B\u5E03\u5417?","Warning",{title:"\u63D0\u793A",type:"warning",confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88"}).then(()=>{var l;(l=n.canvas)==null||l.setBackgroundImage(null,n.canvas.renderAll.bind(n.canvas))})},250);return je(()=>{Le(()=>{var l;(l=n.editor)==null||l.on("loadJson",d)})}),R2(()=>{n.editor.off("loadJson",d)}),(l,s)=>{const h=It,g=mi,f=st;return C(e).mSelectMode?be("",!0):($(),se("div",l3,[T("div",c3,[M(h,{"content-position":"left"},{default:K(()=>[T("h4",null,Se(l.$t("editor.bgSeting.color")),1)]),_:1}),M(g,{modelValue:C(v),"onUpdate:modelValue":s[0]||(s[0]=A=>ut(v)?v.value=A:null),onChange:c,"show-alpha":""},null,8,["modelValue"])]),T("div",u3,[M(h,{"content-position":"left"},{default:K(()=>[T("h4",null,Se(l.$t("editor.bgSeting.colorMacthing")),1)]),_:1}),T("div",h3,[($(!0),se(Qe,null,We(C(p),(A,m)=>($(),se("span",{key:A+m,style:$e(`background:${A}`),onClick:y=>r(A)},null,12,d3))),128))])]),T("div",f3,[M(h,{"content-position":"left"},{default:K(()=>[p3]),_:1}),T("div",g3,[M(f,{onClick:C(a)},{default:K(()=>[Be(" \u79FB\u9664\u80CC\u666F\u56FE ")]),_:1},8,["onClick"]),M(f,{onClick:C(u)},{default:K(()=>[Be(" \u8BBE\u7F6E\u80CC\u666F\u56FE ")]),_:1},8,["onClick"])])])]))}}}),A3=Ue(v3,[["__scopeId","data-v-ed1fb341"]]),Ca=t=>(zt("data-v-ef9e57f5"),t=t(),Vt(),t),m3=Ca(()=>T("h3",null,"\u81EA\u5B9A\u4E49\u5C3A\u5BF8",-1)),y3={class:"asa-size-wrap"},b3={class:"asa-size-wrap-item"},C3=Ca(()=>T("span",null,"\u5BBD\u5EA6",-1)),w3={class:"asa-size-wrap-item"},x3=Ca(()=>T("span",null,"\u9AD8\u5EA6",-1)),_3={"label-width":0},S3=Ca(()=>T("h3",null,"\u7CFB\u7EDF\u63A8\u8350\u5C3A\u5BF8",-1)),E3={class:"cell-wrap"},I3=["onClick"],k3={class:"cell-name"},B3={class:"cell-label"},O3={__name:"ModalSize",props:N2({title:{type:String,default:""}},{show:{default:!1},showModifiers:{}}),emits:N2(["set"],["update:show"]),setup(t,{expose:e,emit:n}){Ye();const i=n,o=t,p=lG(t,"show"),v=ce(null),c=ce(null),r=[{id:1,name:"\u5C0F\u7EA2\u4E66\u914D\u56FE",height:1660,width:1242,unit:"px"},{id:2,name:"\u516C\u4F17\u53F7\u9996\u56FE",height:383,width:900,unit:"px"},{id:3,name:"\u516C\u4F17\u53F7\u6B21\u56FE",height:500,width:500,unit:"px"},{id:4,name:"\u7AD6\u7248\u76F4\u64AD\u80CC\u666F",height:1660,width:1242,unit:"px"},{id:5,name:"\u7AD6\u7248\u89C6\u9891\u5C01\u9762",height:2208,width:1242,unit:"px"},{id:6,name:"\u6A2A\u7248\u89C6\u9891\u5C01\u9762",height:1080,width:1920,unit:"px"},{id:7,name:"\u5546\u54C1\u4E3B\u56FE",height:800,width:800,unit:"px"},{id:8,name:"\u7535\u5546\u8BE6\u60C5\u9875\u9762",height:1e3,width:750,unit:"px"}],d=(l,s)=>{v.value=l||null,c.value=s||null,p.value=!0},u=l=>{const[s,h]=l.split("x");v.value=Number(s),c.value=Number(h)},a=()=>we(this,null,function*(){v.value&&c.value?(i("set",v.value,c.value),p.value=!1):cn.warning("\u8BF7\u68C0\u67E5\u5C3A\u5BF8")});return e({showSetSize:d}),(l,s)=>{const h=uc,g=st,f=It,A=it,m=Zs;return $(),_e(m,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=y=>p.value=y),title:o.title,"footer-hide":""},{default:K(()=>[m3,T("section",y3,[T("div",b3,[C3,M(h,{style:{width:"70%"},modelValue:C(v),"onUpdate:modelValue":s[0]||(s[0]=y=>ut(v)?v.value=y:null),min:1,placeholder:"\u8BF7\u8F93\u5165","controls-position":"right"},null,8,["modelValue"])]),T("div",w3,[x3,M(h,{style:{width:"70%"},modelValue:C(c),"onUpdate:modelValue":s[1]||(s[1]=y=>ut(c)?c.value=y:null),min:1,placeholder:"\u8BF7\u8F93\u5165","controls-position":"right"},null,8,["modelValue"])]),T("div",_3,[M(g,{type:"primary",onClick:a},{default:K(()=>[Be(" \u786E\u5B9A ")]),_:1})])]),M(f,{direction:"horizontal"}),S3,T("section",E3,[($(),se(Qe,null,We(r,y=>T("div",{key:y.name,class:"cell-main",onClick:b=>u(`${y.width}x${y.height}x${y.unit}`)},[T("div",null,[T("div",k3,Se(y.name),1),T("div",B3,Se(`${y.width}x${y.height}${y.unit}`),1)]),M(A,null,{default:K(()=>[M(C(Oo))]),_:1})],8,I3)),64))])]),_:1},8,["modelValue","title"])}}},D3=Ue(O3,[["__scopeId","data-v-ef9e57f5"]]),T3={key:0,class:"attr-item-box"},M3=Ce({__name:"SetSize",setup(t){const e=Re("mixinState"),n=Ye(),i={width:900,height:1200},o=ce(null);let p=ce(i.width),v=ce(i.height);je(()=>{var u,a;(u=n.editor)==null||u.setSize(p.value,v.value),(a=n.editor)==null||a.on("sizeChange",(l,s)=>{p.value=l,v.value=s})});const c=()=>{var u;(u=n.editor)==null||u.setSize(p.value,v.value)},r=()=>{var u;(u=o.value)==null||u.showSetSize(p.value,v.value)},d=(u,a)=>{p.value=u,v.value=a,c()};return(u,a)=>{const l=It,s=Ft,h=el,g=it,f=st,A=tl;return C(e).mSelectMode?be("",!0):($(),se("div",T3,[M(l,{"content-position":"left"},{default:K(()=>[T("h4",null,Se(u.$t("editor.bgSeting.size")),1)]),_:1}),M(A,{"label-width":40,inline:"",class:"flex"},{default:K(()=>[M(h,{label:u.$t("editor.bgSeting.width"),prop:"name"},{default:K(()=>[M(s,{style:{width:"60px"},disabled:"",modelValue:C(p),"onUpdate:modelValue":a[0]||(a[0]=m=>ut(p)?p.value=m:p=m),readonly:""},null,8,["modelValue"])]),_:1},8,["label"]),M(h,{label:u.$t("editor.bgSeting.height"),prop:"name"},{default:K(()=>[M(s,{style:{width:"60px"},disabled:"",modelValue:C(v),"onUpdate:modelValue":a[1]||(a[1]=m=>ut(v)?v.value=m:v=m),readonly:""},null,8,["modelValue"])]),_:1},8,["label"]),M(h,{"label-width":0},{default:K(()=>[M(f,{link:"",onClick:r},{default:K(()=>[M(g,{size:"18"},{default:K(()=>[M(C(DH))]),_:1})]),_:1})]),_:1})]),_:1}),M(D3,{title:u.$t("editor.setSizeTip"),ref_key:"modalSizeRef",ref:o,onSet:d},null,8,["title"])]))}}}),Q3=Ue(M3,[["__scopeId","data-v-1a45ad1a"]]),L3=t=>(zt("data-v-5de1a6d9"),t=t(),Vt(),t),j3={class:"right-bar flex-basis-304px box-border overflow-hidden p-10px"},P3={class:"attr-item-box"},F3=L3(()=>T("h4",null,"\u5FEB\u6377\u64CD\u4F5C",-1)),R3={class:"bg-item"},N3=Ce({__name:"index",setup(t){const e=Ye(),n=ue(()=>e.editor),i=Re("mixinState");return(o,p)=>{const v=Q3,c=A3,r=a3,d=e3,u=qm,a=It,l=Um,s=zm,h=Nm,g=Rm,f=Pm,A=jm,m=Tm,y=Im,b=Cm,x=NA,S=Zv,O=Vv,R=kv,Z=zV,ee=hV,re=rV,ae=qz,ne=Uz,J=Lz,P=_z,U=pz,W=st;return $(),se("section",j3,[lt(T("div",null,[M(v),M(c)],512),[[Ut,!C(i).mSelectMode]]),lt(T("div",null,[M(r),M(d),M(u)],512),[[Ut,C(i).mSelectMode==="multiple"]]),lt(T("div",P3,[M(r),M(a,{"content-position":"left"},{default:K(()=>[F3]),_:1}),lt(T("div",R3,[M(l),M(s),M(h),M(g),M(f)],512),[[Ut,C(i).mSelectMode]]),M(u),M(A),M(m),M(y),M(b),M(x),M(S),M(O),M(R),M(Z),M(ee),M(re),M(ae),M(ne),M(J),M(P),M(U),M(W,{onClick:p[0]||(p[0]=F=>C(n).getFontJson()),size:"small"},{default:K(()=>[Be("\u83B7\u53D6\u5143\u7D20\u6570\u636E")]),_:1})],512),[[Ut,C(i).mSelectMode==="one"]])])}}}),z3=Ue(N3,[["__scopeId","data-v-5de1a6d9"]]),V3=Ce({__name:"index",setup(t){return(e,n)=>($(),se(Qe,null,[M(YN),M(hz),M(z3)],64))}}),U3={class:"editor-wrap"},H3=Ce({name:"Home",__name:"index",setup(t){const e=Ye(),n=qh,i=new h9;je(()=>{var v,c;const p=new le.fabric.Canvas("canvas",{fireRightClick:!0,stopContextMenu:!0,controlsAboveOverlay:!0,preserveObjectStacking:!0});i.init(p),i.use(As).use(ws).use(l0).use(u0).use(Lc).use(jc).use(Pc).use(h0).use(Fc).use(Rc).use(Nc).use(d0).use(zc).use(ys).use(bs).use(Vc).use(Yc).use($c).use(qc).use(Kc).use(xu).use(uh).use(hh).use(Xc,{repoSrc:n}).use(Wc,{repoSrc:n}).use(yu).use(dh).use(zs).use(ph).use(gh),e.setEditor(i),e.setCanvas(p),e.rulerEnable&&i.rulerEnable(),(c=(v=Vr())==null?void 0:v.query)==null||c.id}),R2(()=>i.destory());const{mixinState:o}=VP(i);return un("mixinState",o),(p,v)=>{const c=TH,r=MH,d=QH;return $(),se("div",U3,[M(d,null,{default:K(()=>[M(c,null,{default:K(()=>[M(mF)]),_:1}),M(r,null,{default:K(()=>[M(V3)]),_:1})]),_:1})])}}}),z2=Ue(H3,[["__scopeId","data-v-1415ea3d"]])}));export{uG as __tla,z2 as default};
