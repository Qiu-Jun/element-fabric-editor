var e=Object.defineProperty,t=Object.defineProperties,A=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=Math.pow,s=(t,A,n)=>A in t?e(t,A,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[A]=n,a=(e,t)=>{for(var A in t||(t={}))i.call(t,A)&&s(e,A,t[A]);if(n)for(var A of n(t))r.call(t,A)&&s(e,A,t[A]);return e},l=(e,n)=>t(e,A(n)),c=(e,t,A)=>s(e,"symbol"!=typeof t?t+"":t,A),u=(e,t,A)=>new Promise(((n,i)=>{var r=e=>{try{s(A.next(e))}catch(t){i(t)}},o=e=>{try{s(A.throw(e))}catch(t){i(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,o);s((A=A.apply(e,t)).next())}));import{t as h,W as d,i as f,b as g,c as p,s as v,a as m,d as B,e as y,o as C,f as w,g as b,h as x,k as Q,j as E,l as I,m as _,n as S,p as F,q as k,r as U,U as O,u as D,v as T,w as M,S as L,x as H,y as P,z as R,A as N,B as j,C as V,D as K,E as G,F as Y,G as X,H as z,I as W,J as $,K as J,L as q,M as Z,N as ee,O as te,P as Ae,Q as ne,R as ie,T as re,V as oe,X as se,Y as ae,Z as le,_ as ce,$ as ue,a0 as he,a1 as de,a2 as fe,a3 as ge,a4 as pe,a5 as ve,a6 as me,a7 as Be,a8 as ye,a9 as Ce,aa as we,ab as be,ac as xe,ad as Qe,ae as Ee,af as Ie,ag as _e,ah as Se,ai as Fe,aj as ke,ak as Ue,al as Oe,am as De,an as Te,ao as Me,ap as Le,aq as He,ar as Pe,as as Re,at as Ne,au as je,av as Ve,aw as Ke,ax as Ge,ay as Ye,az as Xe,aA as ze,aB as We,aC as $e,aD as Je,aE as qe,aF as Ze,aG as et,aH as tt,aI as At,aJ as nt,aK as it,aL as rt,aM as ot,aN as st,aO as at,aP as lt,aQ as ct,aR as ut,aS as ht,aT as dt,aU as ft,aV as gt,aW as pt,aX as vt,aY as mt,aZ as Bt,a_ as yt,a$ as Ct,b0 as wt,b1 as bt,b2 as xt,b3 as Qt,b4 as Et,b5 as It,b6 as _t,b7 as St,b8 as Ft,b9 as kt,ba as Ut,bb as Ot,bc as Dt,bd as Tt,be as Mt,bf as Lt,bg as Ht,bh as Pt,bi as Rt,bj as Nt,bk as jt,bl as Vt,bm as Kt,bn as Gt,bo as Yt,bp as Xt,bq as zt,br as Wt,bs as $t,bt as Jt,bu as qt,bv as Zt,bw as eA,bx as tA,by as AA,bz as nA,bA as iA,bB as rA,bC as oA,bD as sA,bE as aA,bF as lA,bG as cA,bH as uA,bI as hA,bJ as dA,bK as fA,bL as gA,bM as pA,bN as vA,bO as mA,bP as BA,bQ as yA,bR as CA,bS as wA,bT as bA,bU as xA,bV as QA,bW as EA,bX as IA,bY as _A,bZ as SA,b_ as FA,b$ as kA,c0 as UA,c1 as OA}from"./usePageList.Bp_D8wKm.js";import{i as DA,b as TA,a as MA,r as LA,c as HA,d as PA,e as RA,f as NA,g as jA,h as VA,t as KA,j as GA,k as YA,M as XA,S as zA,l as WA,m as $A,n as JA,o as qA,p as ZA,q as en,s as tn,u as An,v as nn,w as rn,x as on,y as sn,z as an,A as ln,B as cn,C as un,D as hn,E as dn,F as fn,G as gn,H as pn,I as vn,J as mn,K as Bn,L as yn,N as Cn,O as wn,P as bn,Q as xn,R as Qn,T as En,U as In,V as _n,W as Sn,X as Fn,Y as kn,Z as Un,_ as On,$ as Dn,a0 as Tn,a1 as Mn,a2 as Ln,a3 as Hn,a4 as Pn,a5 as Rn,a6 as Nn,a7 as jn,a8 as Vn,a9 as Kn,aa as Gn,ab as Yn,ac as Xn,ad as zn,ae as Wn,af as $n,ag as Jn,ah as qn,ai as Zn,aj as ei,ak as ti,al as Ai,am as ni,an as ii,ao as ri,ap as oi,aq as si,ar as ai,as as li,at as ci,au as ui,av as hi,aw as di,ax as fi,ay as gi,az as pi,aA as vi,aB as mi,aC as Bi,aD as yi,aE as Ci,aF as wi,aG as bi,aH as xi,aI as Qi,aJ as Ei,aK as Ii,aL as _i,aM as Si,aN as Fi,aO as ki,aP as Ui,aQ as Oi,aR as Di,aS as Ti,aT as Mi,aU as Li,aV as Hi,aW as Pi,aX as Ri,aY as Ni,aZ as ji,a_ as Vi,a$ as Ki}from"./index.Cdo3Gs_V.js";function Gi(e){return"number"==typeof e?e:DA(e)?NaN:+e}function Yi(e,t){return function(A,n){var i;if(void 0===A&&void 0===n)return t;if(void 0!==A&&(i=A),void 0!==n){if(void 0===i)return n;"string"==typeof A||"string"==typeof n?(A=TA(A),n=TA(n)):(A=Gi(A),n=Gi(n)),i=e(A,n)}return i}}var Xi=Yi((function(e,t){return e+t}),0),zi=1/0;function Wi(e){return e?(e=h(e))===zi||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function $i(e){var t=Wi(e),A=t%1;return t==t?A?t-A:t:0}var Ji=d&&new d,qi=Ji?function(e,t){return Ji.set(e,t),e}:f;function Zi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var A=g(e.prototype),n=e.apply(A,t);return MA(n)?n:A}}var er=Math.max;function tr(e,t,A,n){for(var i=-1,r=e.length,o=A.length,s=-1,a=t.length,l=er(r-o,0),c=Array(a+l),u=!n;++s<a;)c[s]=t[s];for(;++i<o;)(u||i<r)&&(c[A[i]]=e[i]);for(;l--;)c[s++]=e[i++];return c}var Ar=Math.max;function nr(e,t,A,n){for(var i=-1,r=e.length,o=-1,s=A.length,a=-1,l=t.length,c=Ar(r-s,0),u=Array(c+l),h=!n;++i<c;)u[i]=e[i];for(var d=i;++a<l;)u[d+a]=t[a];for(;++o<s;)(h||i<r)&&(u[d+A[o]]=e[i++]);return u}function ir(){}function rr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function or(){}rr.prototype=g(ir.prototype),rr.prototype.constructor=rr;var sr=Ji?function(e){return Ji.get(e)}:or,ar={},lr=Object.prototype.hasOwnProperty;function cr(e){for(var t=e.name+"",A=ar[t],n=lr.call(ar,t)?A.length:0;n--;){var i=A[n],r=i.func;if(null==r||r==e)return i.name}return t}function ur(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function hr(e){if(e instanceof rr)return e.clone();var t=new ur(e.__wrapped__,e.__chain__);return t.__actions__=p(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}ur.prototype=g(ir.prototype),ur.prototype.constructor=ur;var dr=Object.prototype.hasOwnProperty;function fr(e){if(HA(e)&&!PA(e)&&!(e instanceof rr)){if(e instanceof ur)return e;if(dr.call(e,"__wrapped__"))return hr(e)}return new ur(e)}function gr(e){var t=cr(e),A=fr[t];if("function"!=typeof A||!(t in rr.prototype))return!1;if(e===A)return!0;var n=sr(A);return!!n&&e===n[0]}fr.prototype=ir.prototype,fr.prototype.constructor=fr;var pr=v(qi),vr=/\{\n\/\* \[wrapped with (.+)\] \*/,mr=/,? & /;var Br=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function yr(e,t,A,n){for(var i=e.length,r=A+(n?1:-1);n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}function Cr(e){return e!=e}function wr(e,t,A){return t==t?function(e,t,A){for(var n=A-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}(e,t,A):yr(e,Cr,A)}function br(e,t){return!!(null==e?0:e.length)&&wr(e,t,0)>-1}var xr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];function Qr(e,t,A){var n=t+"";return B(e,function(e,t){var A=t.length;if(!A)return e;var n=A-1;return t[n]=(A>1?"& ":"")+t[n],t=t.join(A>2?", ":" "),e.replace(Br,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return m(xr,(function(A){var n="_."+A[0];t&A[1]&&!br(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(vr);return t?t[1].split(mr):[]}(n),A)))}function Er(e,t,A,n,i,r,o,s,a,l){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var u=[e,t,i,c?r:void 0,c?o:void 0,c?void 0:r,c?void 0:o,s,a,l],h=A.apply(void 0,u);return gr(e)&&pr(h,u),h.placeholder=n,Qr(h,e,t)}function Ir(e){return e.placeholder}var _r=Math.min;var Sr="__lodash_placeholder__";function Fr(e,t){for(var A=-1,n=e.length,i=0,r=[];++A<n;){var o=e[A];o!==t&&o!==Sr||(e[A]=Sr,r[i++]=A)}return r}function kr(e,t,A,n,i,r,o,s,a,l){var c=128&t,u=1&t,h=2&t,d=24&t,f=512&t,g=h?void 0:Zi(e);return function v(){for(var m=arguments.length,B=Array(m),y=m;y--;)B[y]=arguments[y];if(d)var C=Ir(v),w=function(e,t){for(var A=e.length,n=0;A--;)e[A]===t&&++n;return n}(B,C);if(n&&(B=tr(B,n,i,d)),r&&(B=nr(B,r,o,d)),m-=w,d&&m<l){var b=Fr(B,C);return Er(e,t,kr,v.placeholder,A,B,b,s,a,l-m)}var x=u?A:this,Q=h?x[e]:e;return m=B.length,s?B=function(e,t){for(var A=e.length,n=_r(t.length,A),i=p(e);n--;){var r=t[n];e[n]=RA(r,A)?i[r]:void 0}return e}(B,s):f&&m>1&&B.reverse(),c&&a<m&&(B.length=a),this&&this!==LA&&this instanceof v&&(Q=g||Zi(Q)),Q.apply(x,B)}}var Ur="__lodash_placeholder__",Or=128,Dr=Math.min;var Tr=Math.max;function Mr(e,t,A,n,i,r,o,s){var a=2&t;if(!a&&"function"!=typeof e)throw new TypeError("Expected a function");var l=n?n.length:0;if(l||(t&=-97,n=i=void 0),o=void 0===o?o:Tr($i(o),0),s=void 0===s?s:$i(s),l-=i?i.length:0,64&t){var c=n,u=i;n=i=void 0}var h=a?void 0:sr(e),d=[e,t,A,n,i,c,u,r,o,s];if(h&&function(e,t){var A=e[1],n=t[1],i=A|n,r=i<131,o=n==Or&&8==A||n==Or&&256==A&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==A;if(!r&&!o)return e;1&n&&(e[2]=t[2],i|=1&A?0:4);var s=t[3];if(s){var a=e[3];e[3]=a?tr(a,s,t[4]):s,e[4]=a?Fr(e[3],Ur):t[4]}(s=t[5])&&(a=e[5],e[5]=a?nr(a,s,t[6]):s,e[6]=a?Fr(e[5],Ur):t[6]),(s=t[7])&&(e[7]=s),n&Or&&(e[8]=null==e[8]?t[8]:Dr(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(d,h),e=d[0],t=d[1],A=d[2],n=d[3],i=d[4],!(s=d[9]=void 0===d[9]?a?0:e.length:Tr(d[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)f=8==t||16==t?function(e,t,A){var n=Zi(e);return function i(){for(var r=arguments.length,o=Array(r),s=r,a=Ir(i);s--;)o[s]=arguments[s];var l=r<3&&o[0]!==a&&o[r-1]!==a?[]:Fr(o,a);return(r-=l.length)<A?Er(e,t,kr,i.placeholder,void 0,o,l,void 0,void 0,A-r):y(this&&this!==LA&&this instanceof i?n:e,this,o)}}(e,t,s):32!=t&&33!=t||i.length?kr.apply(void 0,d):function(e,t,A,n){var i=1&t,r=Zi(e);return function t(){for(var o=-1,s=arguments.length,a=-1,l=n.length,c=Array(l+s),u=this&&this!==LA&&this instanceof t?r:e;++a<l;)c[a]=n[a];for(;s--;)c[a++]=arguments[++o];return y(u,i?A:this,c)}}(e,t,A,n);else var f=function(e,t,A){var n=1&t,i=Zi(e);return function t(){return(this&&this!==LA&&this instanceof t?i:e).apply(n?A:this,arguments)}}(e,t,A);return Qr((h?qi:pr)(f,d),e,t)}function Lr(e,t,A){return t=A?void 0:t,Mr(e,128,void 0,void 0,void 0,void 0,t=e&&null==t?e.length:t)}function Hr(e,t){return B(C(e,t,f),e+"")}function Pr(e,t,A){if(!MA(A))return!1;var n=typeof t;return!!("number"==n?w(A)&&RA(t,A.length):"string"==n&&t in A)&&NA(A[t],e)}function Rr(e){return Hr((function(t,A){var n=-1,i=A.length,r=i>1?A[i-1]:void 0,o=i>2?A[2]:void 0;for(r=e.length>3&&"function"==typeof r?(i--,r):void 0,o&&Pr(A[0],A[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var s=A[n];s&&e(t,s,n,r)}return t}))}var Nr=Object.prototype.hasOwnProperty,jr=Rr((function(e,t){if(b(t)||w(t))x(t,Q(t),e);else for(var A in t)Nr.call(t,A)&&jA(e,A,t[A])})),Vr=Rr((function(e,t){x(t,E(t),e)})),Kr=Rr((function(e,t,A,n){x(t,E(t),e,n)})),Gr=Rr((function(e,t,A,n){x(t,Q(t),e,n)}));function Yr(e,t){for(var A=-1,n=t.length,i=Array(n),r=null==e;++A<n;)i[A]=r?void 0:I(e,t[A]);return i}var Xr=_(Yr),zr=Function.prototype,Wr=Object.prototype,$r=zr.toString,Jr=Wr.hasOwnProperty,qr=$r.call(Object);function Zr(e){if(!HA(e)||"[object Object]"!=VA(e))return!1;var t=S(e);if(null===t)return!0;var A=Jr.call(t,"constructor")&&t.constructor;return"function"==typeof A&&A instanceof A&&$r.call(A)==qr}function eo(e){if(!HA(e))return!1;var t=VA(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Zr(e)}var to=Hr((function(e,t){try{return y(e,void 0,t)}catch(A){return eo(A)?A:new Error(A)}}));function Ao(e,t){var A;if("function"!=typeof t)throw new TypeError("Expected a function");return e=$i(e),function(){return--e>0&&(A=t.apply(this,arguments)),e<=1&&(t=void 0),A}}var no=Hr((function(e,t,A){var n=1;if(A.length){var i=Fr(A,Ir(no));n|=32}return Mr(e,n,t,A,i)}));no.placeholder={};var io=_((function(e,t){return m(t,(function(t){t=KA(t),GA(e,t,no(e[t],e))})),e})),ro=Hr((function(e,t,A){var n=3;if(A.length){var i=Fr(A,Ir(ro));n|=32}return Mr(t,n,e,A,i)}));function oo(e,t,A){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(A=A>i?i:A)<0&&(A+=i),i=t>A?0:A-t>>>0,t>>>=0;for(var r=Array(i);++n<i;)r[n]=e[n+t];return r}function so(e,t,A){var n=e.length;return A=void 0===A?n:A,!t&&A>=n?e:oo(e,t,A)}ro.placeholder={};var ao=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function lo(e){return ao.test(e)}var co="\\ud800-\\udfff",uo="["+co+"]",ho="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",fo="\\ud83c[\\udffb-\\udfff]",go="[^"+co+"]",po="(?:\\ud83c[\\udde6-\\uddff]){2}",vo="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="(?:"+ho+"|"+fo+")"+"?",Bo="[\\ufe0e\\ufe0f]?",yo=Bo+mo+("(?:\\u200d(?:"+[go,po,vo].join("|")+")"+Bo+mo+")*"),Co="(?:"+[go+ho+"?",ho,po,vo,uo].join("|")+")",wo=RegExp(fo+"(?="+fo+")|"+Co+yo,"g");function bo(e){return lo(e)?function(e){return e.match(wo)||[]}(e):function(e){return e.split("")}(e)}function xo(e){return function(t){var A=lo(t=YA(t))?bo(t):void 0,n=A?A[0]:t.charAt(0),i=A?so(A,1).join(""):t.slice(1);return n[e]()+i}}var Qo=xo("toUpperCase");function Eo(e){return Qo(YA(e).toLowerCase())}function Io(e,t,A,n){var i=-1,r=null==e?0:e.length;for(n&&r&&(A=e[++i]);++i<r;)A=t(A,e[i],i,e);return A}function _o(e){return function(t){return null==e?void 0:e[t]}}var So=_o({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Fo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ko=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");function Uo(e){return(e=YA(e))&&e.replace(Fo,So).replace(ko,"")}var Oo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Do=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var To="\\ud800-\\udfff",Mo="\\u2700-\\u27bf",Lo="a-z\\xdf-\\xf6\\xf8-\\xff",Ho="A-Z\\xc0-\\xd6\\xd8-\\xde",Po="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ro="["+Po+"]",No="\\d+",jo="["+Mo+"]",Vo="["+Lo+"]",Ko="[^"+To+Po+No+Mo+Lo+Ho+"]",Go="(?:\\ud83c[\\udde6-\\uddff]){2}",Yo="[\\ud800-\\udbff][\\udc00-\\udfff]",Xo="["+Ho+"]",zo="(?:"+Vo+"|"+Ko+")",Wo="(?:"+Xo+"|"+Ko+")",$o="(?:['’](?:d|ll|m|re|s|t|ve))?",Jo="(?:['’](?:D|LL|M|RE|S|T|VE))?",qo="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Zo="[\\ufe0e\\ufe0f]?",es=Zo+qo+("(?:\\u200d(?:"+["[^"+To+"]",Go,Yo].join("|")+")"+Zo+qo+")*"),ts="(?:"+[jo,Go,Yo].join("|")+")"+es,As=RegExp([Xo+"?"+Vo+"+"+$o+"(?="+[Ro,Xo,"$"].join("|")+")",Wo+"+"+Jo+"(?="+[Ro,Xo+zo,"$"].join("|")+")",Xo+"?"+zo+"+"+$o,Xo+"+"+Jo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",No,ts].join("|"),"g");function ns(e,t,A){return e=YA(e),void 0===(t=A?void 0:t)?function(e){return Do.test(e)}(e)?function(e){return e.match(As)||[]}(e):function(e){return e.match(Oo)||[]}(e):e.match(t)||[]}var is=RegExp("['’]","g");function rs(e){return function(t){return Io(ns(Uo(t).replace(is,"")),e,"")}}var os=rs((function(e,t,A){return t=t.toLowerCase(),e+(A?Eo(t):t)})),ss=LA.isFinite,as=Math.min;function ls(e){var t=Math[e];return function(e,A){if(e=h(e),(A=null==A?0:as($i(A),292))&&ss(e)){var n=(YA(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+A));return+((n=(YA(i)+"e").split("e"))[0]+"e"+(+n[1]-A))}return t(e)}}var cs=ls("ceil");function us(e){var t=fr(e);return t.__chain__=!0,t}var hs=Math.ceil,ds=Math.max;function fs(e,t,A){return e==e&&(void 0!==A&&(e=e<=A?e:A),void 0!==t&&(e=e>=t?e:t)),e}function gs(e){return F(e,5)}function ps(e){var t=-1,A=null==e?0:e.length;for(this.__data__=new XA;++t<A;)this.add(e[t])}function vs(e,t){for(var A=-1,n=null==e?0:e.length;++A<n;)if(t(e[A],A,e))return!0;return!1}function ms(e,t){return e.has(t)}ps.prototype.add=ps.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ps.prototype.has=function(e){return this.__data__.has(e)};function Bs(e,t,A,n,i,r){var o=1&A,s=e.length,a=t.length;if(s!=a&&!(o&&a>s))return!1;var l=r.get(e),c=r.get(t);if(l&&c)return l==t&&c==e;var u=-1,h=!0,d=2&A?new ps:void 0;for(r.set(e,t),r.set(t,e);++u<s;){var f=e[u],g=t[u];if(n)var p=o?n(g,f,u,t,e,r):n(f,g,u,e,t,r);if(void 0!==p){if(p)continue;h=!1;break}if(d){if(!vs(t,(function(e,t){if(!ms(d,t)&&(f===e||i(f,e,A,n,r)))return d.push(t)}))){h=!1;break}}else if(f!==g&&!i(f,g,A,n,r)){h=!1;break}}return r.delete(e),r.delete(t),h}function ys(e){var t=-1,A=Array(e.size);return e.forEach((function(e,n){A[++t]=[n,e]})),A}function Cs(e){var t=-1,A=Array(e.size);return e.forEach((function(e){A[++t]=e})),A}var ws=zA?zA.prototype:void 0,bs=ws?ws.valueOf:void 0;var xs=Object.prototype.hasOwnProperty;var Qs="[object Arguments]",Es="[object Array]",Is="[object Object]",_s=Object.prototype.hasOwnProperty;function Ss(e,t,A,n,i,r){var o=PA(e),s=PA(t),a=o?Es:T(e),l=s?Es:T(t),c=(a=a==Qs?Is:a)==Is,u=(l=l==Qs?Is:l)==Is,h=a==l;if(h&&M(e)){if(!M(t))return!1;o=!0,c=!1}if(h&&!c)return r||(r=new L),o||H(e)?Bs(e,t,A,n,i,r):function(e,t,A,n,i,r,o){switch(A){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new O(e),new O(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return NA(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ys;case"[object Set]":var a=1&n;if(s||(s=Cs),e.size!=t.size&&!a)return!1;var l=o.get(e);if(l)return l==t;n|=2,o.set(e,t);var c=Bs(s(e),s(t),n,i,r,o);return o.delete(e),c;case"[object Symbol]":if(bs)return bs.call(e)==bs.call(t)}return!1}(e,t,a,A,n,i,r);if(!(1&A)){var d=c&&_s.call(e,"__wrapped__"),f=u&&_s.call(t,"__wrapped__");if(d||f){var g=d?e.value():e,p=f?t.value():t;return r||(r=new L),i(g,p,A,n,r)}}return!!h&&(r||(r=new L),function(e,t,A,n,i,r){var o=1&A,s=D(e),a=s.length;if(a!=D(t).length&&!o)return!1;for(var l=a;l--;){var c=s[l];if(!(o?c in t:xs.call(t,c)))return!1}var u=r.get(e),h=r.get(t);if(u&&h)return u==t&&h==e;var d=!0;r.set(e,t),r.set(t,e);for(var f=o;++l<a;){var g=e[c=s[l]],p=t[c];if(n)var v=o?n(p,g,c,t,e,r):n(g,p,c,e,t,r);if(!(void 0===v?g===p||i(g,p,A,n,r):v)){d=!1;break}f||(f="constructor"==c)}if(d&&!f){var m=e.constructor,B=t.constructor;m==B||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof B&&B instanceof B||(d=!1)}return r.delete(e),r.delete(t),d}(e,t,A,n,i,r))}function Fs(e,t,A,n,i){return e===t||(null==e||null==t||!HA(e)&&!HA(t)?e!=e&&t!=t:Ss(e,t,A,n,Fs,i))}function ks(e,t,A,n){var i=A.length,r=i,o=!n;if(null==e)return!r;for(e=Object(e);i--;){var s=A[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){var a=(s=A[i])[0],l=e[a],c=s[1];if(o&&s[2]){if(void 0===l&&!(a in e))return!1}else{var u=new L;if(n)var h=n(l,c,a,e,t,u);if(!(void 0===h?Fs(c,l,3,n,u):h))return!1}}return!0}function Us(e){return e==e&&!MA(e)}function Os(e){for(var t=Q(e),A=t.length;A--;){var n=t[A],i=e[n];t[A]=[n,i,Us(i)]}return t}function Ds(e,t){return function(A){return null!=A&&(A[e]===t&&(void 0!==t||e in Object(A)))}}function Ts(e){var t=Os(e);return 1==t.length&&t[0][2]?Ds(t[0][0],t[0][1]):function(A){return A===e||ks(A,e,t)}}function Ms(e,t){return WA(e)&&Us(t)?Ds(KA(e),t):function(A){var n=I(A,e);return void 0===n&&n===t?P(A,e):Fs(t,n,3)}}function Ls(e){return function(t){return null==t?void 0:t[e]}}function Hs(e){return WA(e)?Ls(KA(e)):function(e){return function(t){return R(t,e)}}(e)}function Ps(e){return"function"==typeof e?e:null==e?f:"object"==typeof e?PA(e)?Ms(e[0],e[1]):Ts(e):Hs(e)}function Rs(e,t,A){var n=A.length;if(null==e)return!n;for(e=Object(e);n--;){var i=A[n],r=t[i],o=e[i];if(void 0===o&&!(i in e)||!r(o))return!1}return!0}function Ns(e,t,A,n){for(var i=-1,r=null==e?0:e.length;++i<r;){var o=e[i];t(n,o,A(o),e)}return n}function js(e){return function(t,A,n){for(var i=-1,r=Object(t),o=n(t),s=o.length;s--;){var a=o[e?s:++i];if(!1===A(r[a],a,r))break}return t}}var Vs=js();function Ks(e,t){return e&&Vs(e,t,Q)}function Gs(e,t){return function(A,n){if(null==A)return A;if(!w(A))return e(A,n);for(var i=A.length,r=t?i:-1,o=Object(A);(t?r--:++r<i)&&!1!==n(o[r],r,o););return A}}var Ys=Gs(Ks);function Xs(e,t,A,n){return Ys(e,(function(e,i,r){t(n,e,A(e),r)})),n}function zs(e,t){return function(A,n){var i=PA(A)?Ns:Xs,r=t?t():{};return i(A,e,Ps(n),r)}}var Ws=Object.prototype.hasOwnProperty,$s=zs((function(e,t,A){Ws.call(e,A)?++e[A]:GA(e,A,1)}));function Js(e,t,A){var n=Mr(e,8,void 0,void 0,void 0,void 0,void 0,t=A?void 0:t);return n.placeholder=Js.placeholder,n}Js.placeholder={};function qs(e,t,A){var n=Mr(e,16,void 0,void 0,void 0,void 0,void 0,t=A?void 0:t);return n.placeholder=qs.placeholder,n}qs.placeholder={};var Zs=Object.prototype,ea=Zs.hasOwnProperty,ta=Hr((function(e,t){e=Object(e);var A=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&Pr(t[0],t[1],i)&&(n=1);++A<n;)for(var r=t[A],o=E(r),s=-1,a=o.length;++s<a;){var l=o[s],c=e[l];(void 0===c||NA(c,Zs[l])&&!ea.call(e,l))&&(e[l]=r[l])}return e}));function Aa(e,t,A){(void 0!==A&&!NA(e[t],A)||void 0===A&&!(t in e))&&GA(e,t,A)}function na(e){return HA(e)&&w(e)}function ia(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function ra(e){return x(e,E(e))}function oa(e,t,A,n,i){e!==t&&Vs(t,(function(r,o){if(i||(i=new L),MA(r))!function(e,t,A,n,i,r,o){var s=ia(e,A),a=ia(t,A),l=o.get(a);if(l)Aa(e,A,l);else{var c=r?r(s,a,A+"",e,t,o):void 0,u=void 0===c;if(u){var h=PA(a),d=!h&&M(a),f=!h&&!d&&H(a);c=a,h||d||f?PA(s)?c=s:na(s)?c=p(s):d?(u=!1,c=j(a,!0)):f?(u=!1,c=V(a,!0)):c=[]:Zr(a)||K(a)?(c=s,K(s)?c=ra(s):MA(s)&&!JA(s)||(c=G(a))):u=!1}u&&(o.set(a,c),i(c,a,n,r,o),o.delete(a)),Aa(e,A,c)}}(e,t,o,A,oa,n,i);else{var s=n?n(ia(e,o),r,o+"",e,t,i):void 0;void 0===s&&(s=r),Aa(e,o,s)}}),E)}function sa(e,t,A,n,i,r){return MA(e)&&MA(t)&&(r.set(t,e),oa(e,t,void 0,sa,r),r.delete(t)),e}var aa=Rr((function(e,t,A,n){oa(e,t,A,n)})),la=Hr((function(e){return e.push(void 0,sa),y(aa,void 0,e)}));function ca(e,t,A){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,A)}),t)}var ua=Hr((function(e,t){return ca(e,1,t)})),ha=Hr((function(e,t,A){return ca(e,h(t)||0,A)}));function da(e,t,A){for(var n=-1,i=null==e?0:e.length;++n<i;)if(A(t,e[n]))return!0;return!1}function fa(e,t,A,n){var i=-1,r=br,o=!0,s=e.length,a=[],l=t.length;if(!s)return a;A&&(t=$A(t,Y(A))),n?(r=da,o=!1):t.length>=200&&(r=ms,o=!1,t=new ps(t));e:for(;++i<s;){var c=e[i],u=null==A?c:A(c);if(c=n||0!==c?c:0,o&&u==u){for(var h=l;h--;)if(t[h]===u)continue e;a.push(c)}else r(t,u,n)||a.push(c)}return a}var ga=Hr((function(e,t){return na(e)?fa(e,U(t,1,na,!0)):[]}));function pa(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var va=Hr((function(e,t){var A=pa(t);return na(A)&&(A=void 0),na(e)?fa(e,U(t,1,na,!0),Ps(A)):[]})),ma=Hr((function(e,t){var A=pa(t);return na(A)&&(A=void 0),na(e)?fa(e,U(t,1,na,!0),void 0,A):[]})),Ba=Yi((function(e,t){return e/t}),1);function ya(e,t,A,n){for(var i=e.length,r=n?i:-1;(n?r--:++r<i)&&t(e[r],r,e););return A?oo(e,n?0:r,n?r+1:i):oo(e,n?r+1:0,n?i:r)}function Ca(e){return"function"==typeof e?e:f}function wa(e,t){return(PA(e)?m:Ys)(e,Ca(t))}function ba(e,t){for(var A=null==e?0:e.length;A--&&!1!==t(e[A],A,e););return e}var xa=js(!0);function Qa(e,t){return e&&xa(e,t,Q)}var Ea=Gs(Qa,!0);function Ia(e,t){return(PA(e)?ba:Ea)(e,Ca(t))}function _a(e){return function(t){var A,n,i,r=T(t);return"[object Map]"==r?ys(t):"[object Set]"==r?(A=t,n=-1,i=Array(A.size),A.forEach((function(e){i[++n]=[e,e]})),i):function(e,t){return $A(t,(function(t){return[t,e[t]]}))}(t,e(t))}}var Sa=_a(Q),Fa=_a(E),ka=_o({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Ua=/[&<>"']/g,Oa=RegExp(Ua.source);function Da(e){return(e=YA(e))&&Oa.test(e)?e.replace(Ua,ka):e}var Ta=/[\\^$.*+?()[\]{}|]/g,Ma=RegExp(Ta.source);function La(e,t){for(var A=-1,n=null==e?0:e.length;++A<n;)if(!t(e[A],A,e))return!1;return!0}function Ha(e,t){var A=!0;return Ys(e,(function(e,n,i){return A=!!t(e,n,i)})),A}function Pa(e){return e?fs($i(e),0,4294967295):0}function Ra(e,t){var A=[];return Ys(e,(function(e,n,i){t(e,n,i)&&A.push(e)})),A}function Na(e){return function(t,A,n){var i=Object(t);if(!w(t)){var r=Ps(A);t=Q(t),A=function(e){return r(i[e],e,i)}}var o=e(t,A,n);return o>-1?i[r?t[o]:o]:void 0}}var ja=Math.max;function Va(e,t,A){var n=null==e?0:e.length;if(!n)return-1;var i=null==A?0:$i(A);return i<0&&(i=ja(n+i,0)),yr(e,Ps(t),i)}var Ka=Na(Va);function Ga(e,t,A){var n;return A(e,(function(e,A,i){if(t(e,A,i))return n=A,!1})),n}var Ya=Math.max,Xa=Math.min;function za(e,t,A){var n=null==e?0:e.length;if(!n)return-1;var i=n-1;return void 0!==A&&(i=$i(A),i=A<0?Ya(n+i,0):Xa(i,n-1)),yr(e,Ps(t),i,!0)}var Wa=Na(za);function $a(e){return e&&e.length?e[0]:void 0}function Ja(e,t){var A=-1,n=w(e)?Array(e.length):[];return Ys(e,(function(e,i,r){n[++A]=t(e,i,r)})),n}function qa(e,t){return(PA(e)?$A:Ja)(e,Ps(t))}var Za=1/0;var el=1/0;var tl=ls("floor");function Al(e){return _((function(t){var A=t.length,n=A,i=ur.prototype.thru;for(e&&t.reverse();n--;){var r=t[n];if("function"!=typeof r)throw new TypeError("Expected a function");if(i&&!o&&"wrapper"==cr(r))var o=new ur([],!0)}for(n=o?n:A;++n<A;){var s=cr(r=t[n]),a="wrapper"==s?sr(r):void 0;o=a&&gr(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?o[cr(a[0])].apply(o,a[3]):1==r.length&&gr(r)?o[s]():o.thru(r)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&PA(n))return o.plant(n).value();for(var i=0,r=A?t[i].apply(this,e):n;++i<A;)r=t[i].call(this,r);return r}}))}var nl=Al(),il=Al(!0);function rl(e,t){return X(t,(function(t){return JA(e[t])}))}var ol=Object.prototype.hasOwnProperty,sl=zs((function(e,t,A){ol.call(e,A)?e[A].push(t):GA(e,A,[t])}));function al(e,t){return e>t}function ll(e){return function(t,A){return"string"==typeof t&&"string"==typeof A||(t=h(t),A=h(A)),e(t,A)}}var cl=ll(al),ul=ll((function(e,t){return e>=t})),hl=Object.prototype.hasOwnProperty;function dl(e,t){return null!=e&&hl.call(e,t)}var fl=Math.max,gl=Math.min;function pl(e){return"string"==typeof e||!PA(e)&&HA(e)&&"[object String]"==VA(e)}function vl(e,t){return $A(t,(function(t){return e[t]}))}function ml(e){return null==e?[]:vl(e,Q(e))}var Bl=Math.max;var yl=Math.max;var Cl=Math.min;function wl(e,t,A){for(var n=A?da:br,i=e[0].length,r=e.length,o=r,s=Array(r),a=1/0,l=[];o--;){var c=e[o];o&&t&&(c=$A(c,Y(t))),a=Cl(c.length,a),s[o]=!A&&(t||i>=120&&c.length>=120)?new ps(o&&c):void 0}c=e[0];var u=-1,h=s[0];e:for(;++u<i&&l.length<a;){var d=c[u],f=t?t(d):d;if(d=A||0!==d?d:0,!(h?ms(h,f):n(l,f,A))){for(o=r;--o;){var g=s[o];if(!(g?ms(g,f):n(e[o],f,A)))continue e}h&&h.push(f),l.push(d)}}return l}function bl(e){return na(e)?e:[]}var xl=Hr((function(e){var t=$A(e,bl);return t.length&&t[0]===e[0]?wl(t):[]})),Ql=Hr((function(e){var t=pa(e),A=$A(e,bl);return t===pa(A)?t=void 0:A.pop(),A.length&&A[0]===e[0]?wl(A,Ps(t)):[]})),El=Hr((function(e){var t=pa(e),A=$A(e,bl);return(t="function"==typeof t?t:void 0)&&A.pop(),A.length&&A[0]===e[0]?wl(A,void 0,t):[]}));function Il(e,t){return function(A,n){return function(e,t,A,n){return Ks(e,(function(e,i,r){t(n,A(e),i,r)})),n}(A,e,t(n),{})}}var _l=Object.prototype.toString,Sl=Il((function(e,t,A){null!=t&&"function"!=typeof t.toString&&(t=_l.call(t)),e[t]=A}),W(f)),Fl=Object.prototype,kl=Fl.hasOwnProperty,Ul=Fl.toString,Ol=Il((function(e,t,A){null!=t&&"function"!=typeof t.toString&&(t=Ul.call(t)),kl.call(e,t)?e[t].push(A):e[t]=[A]}),Ps);function Dl(e,t){return t.length<2?e:R(e,oo(t,0,-1))}function Tl(e,t,A){var n=null==(e=Dl(e,t=qA(t,e)))?e:e[KA(pa(t))];return null==n?void 0:y(n,e,A)}var Ml=Hr(Tl),Ll=Hr((function(e,t,A){var n=-1,i="function"==typeof t,r=w(e)?Array(e.length):[];return Ys(e,(function(e){r[++n]=i?y(t,e,A):Tl(e,t,A)})),r}));var Hl=$&&$.isArrayBuffer,Pl=Hl?Y(Hl):function(e){return HA(e)&&"[object ArrayBuffer]"==VA(e)};var Rl=$&&$.isDate,Nl=Rl?Y(Rl):function(e){return HA(e)&&"[object Date]"==VA(e)};var jl=Object.prototype.hasOwnProperty;function Vl(e,t){return Fs(e,t)}var Kl=LA.isFinite;function Gl(e){return"number"==typeof e&&e==$i(e)}function Yl(e){return"number"==typeof e||HA(e)&&"[object Number]"==VA(e)}var Xl=ZA?JA:q;var zl=$&&$.isRegExp,Wl=zl?Y(zl):function(e){return HA(e)&&"[object RegExp]"==VA(e)},$l=9007199254740991;var Jl=Array.prototype.join;var ql=rs((function(e,t,A){return e+(A?"-":"")+t.toLowerCase()})),Zl=zs((function(e,t,A){GA(e,A,t)}));var ec=Math.max,tc=Math.min;var Ac=rs((function(e,t,A){return e+(A?" ":"")+t.toLowerCase()})),nc=xo("toLowerCase");function ic(e,t){return e<t}var rc=ll(ic),oc=ll((function(e,t){return e<=t}));function sc(e,t,A){for(var n=-1,i=e.length;++n<i;){var r=e[n],o=t(r);if(null!=o&&(void 0===s?o==o&&!DA(o):A(o,s)))var s=o,a=r}return a}function ac(e,t){for(var A,n=-1,i=e.length;++n<i;){var r=t(e[n]);void 0!==r&&(A=void 0===A?r:A+r)}return A}function lc(e,t){var A=null==e?0:e.length;return A?ac(e,t)/A:NaN}var cc=Rr((function(e,t,A){oa(e,t,A)})),uc=Hr((function(e,t){return function(A){return Tl(A,e,t)}})),hc=Hr((function(e,t){return function(A){return Tl(e,A,t)}}));function dc(e,t,A){var n=Q(t),i=rl(t,n),r=!(MA(A)&&"chain"in A&&!A.chain),o=JA(e);return m(i,(function(A){var n=t[A];e[A]=n,o&&(e.prototype[A]=function(){var t=this.__chain__;if(r||t){var A=e(this.__wrapped__);return(A.__actions__=p(this.__actions__)).push({func:n,args:arguments,thisArg:e}),A.__chain__=t,A}return n.apply(e,k([this.value()],arguments))})})),e}var fc=Yi((function(e,t){return e*t}),1);function gc(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var pc=zA?zA.iterator:void 0;function vc(e){if(!e)return[];if(w(e))return pl(e)?bo(e):p(e);if(pc&&e[pc])return function(e){for(var t,A=[];!(t=e.next()).done;)A.push(t.value);return A}(e[pc]());var t=T(e);return("[object Map]"==t?ys:"[object Set]"==t?Cs:ml)(e)}function mc(e,t){var A=e.length;if(A)return RA(t+=t<0?A:0,A)?e[t]:void 0}function Bc(e,t){return null==(e=Dl(e,t=qA(t,e)))||delete e[KA(pa(t))]}function yc(e){return Zr(e)?void 0:e}var Cc=_((function(e,t){var A={};if(null==e)return A;var n=!1;t=$A(t,(function(t){return t=qA(t,e),n||(n=t.length>1),t})),x(e,Z(e),A),n&&(A=F(A,7,yc));for(var i=t.length;i--;)Bc(A,t[i]);return A}));function wc(e,t){if(null==e)return{};var A=$A(Z(e),(function(e){return[e]}));return t=Ps(t),ee(e,A,(function(e,A){return t(e,A[0])}))}function bc(e,t){if(e!==t){var A=void 0!==e,n=null===e,i=e==e,r=DA(e),o=void 0!==t,s=null===t,a=t==t,l=DA(t);if(!s&&!l&&!r&&e>t||r&&o&&a&&!s&&!l||n&&o&&a||!A&&a||!i)return 1;if(!n&&!r&&!l&&e<t||l&&A&&i&&!n&&!r||s&&A&&i||!o&&i||!a)return-1}return 0}function xc(e,t,A){t=t.length?$A(t,(function(e){return PA(e)?function(t){return R(t,1===e.length?e[0]:e)}:e})):[f];var n=-1;return t=$A(t,Y(Ps)),function(e,t){var A=e.length;for(e.sort(t);A--;)e[A]=e[A].value;return e}(Ja(e,(function(e,A,i){return{criteria:$A(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,A){for(var n=-1,i=e.criteria,r=t.criteria,o=i.length,s=A.length;++n<o;){var a=bc(i[n],r[n]);if(a)return n>=s?a:a*("desc"==A[n]?-1:1)}return e.index-t.index}(e,t,A)}))}function Qc(e){return _((function(t){return t=$A(t,Y(Ps)),Hr((function(A){var n=this;return e(t,(function(e){return y(e,n,A)}))}))}))}var Ec=Qc($A),Ic=Hr,_c=Math.min,Sc=Ic((function(e,t){var A=(t=1==t.length&&PA(t[0])?$A(t[0],Y(Ps)):$A(U(t,1),Y(Ps))).length;return Hr((function(n){for(var i=-1,r=_c(n.length,A);++i<r;)n[i]=t[i].call(this,n[i]);return y(e,this,n)}))})),Fc=Qc(La),kc=Qc(vs),Uc=Math.floor;function Oc(e,t){var A="";if(!e||t<1||t>9007199254740991)return A;do{t%2&&(A+=e),(t=Uc(t/2))&&(e+=e)}while(t);return A}var Dc=Ls("length"),Tc="\\ud800-\\udfff",Mc="["+Tc+"]",Lc="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Hc="\\ud83c[\\udffb-\\udfff]",Pc="[^"+Tc+"]",Rc="(?:\\ud83c[\\udde6-\\uddff]){2}",Nc="[\\ud800-\\udbff][\\udc00-\\udfff]",jc="(?:"+Lc+"|"+Hc+")"+"?",Vc="[\\ufe0e\\ufe0f]?",Kc=Vc+jc+("(?:\\u200d(?:"+[Pc,Rc,Nc].join("|")+")"+Vc+jc+")*"),Gc="(?:"+[Pc+Lc+"?",Lc,Rc,Nc,Mc].join("|")+")",Yc=RegExp(Hc+"(?="+Hc+")|"+Gc+Kc,"g");function Xc(e){return lo(e)?function(e){for(var t=Yc.lastIndex=0;Yc.test(e);)++t;return t}(e):Dc(e)}var zc=Math.ceil;function Wc(e,t){var A=(t=void 0===t?" ":TA(t)).length;if(A<2)return A?Oc(t,e):t;var n=Oc(t,zc(e/Xc(t)));return lo(t)?so(bo(n),0,e).join(""):n.slice(0,e)}var $c=Math.ceil,Jc=Math.floor;var qc=/^\s+/,Zc=LA.parseInt;var eu=Hr((function(e,t){return Mr(e,32,void 0,t,Fr(t,Ir(eu)))}));eu.placeholder={};var tu=Hr((function(e,t){return Mr(e,64,void 0,t,Fr(t,Ir(tu)))}));tu.placeholder={};var Au=zs((function(e,t,A){e[A?0:1].push(t)}),(function(){return[[],[]]}));function nu(e,t,A,n){for(var i=A-1,r=e.length;++i<r;)if(n(e[i],t))return i;return-1}var iu=Array.prototype.splice;function ru(e,t,A,n){var i=n?nu:wr,r=-1,o=t.length,s=e;for(e===t&&(t=p(t)),A&&(s=$A(e,Y(A)));++r<o;)for(var a=0,l=t[r],c=A?A(l):l;(a=i(s,c,a,n))>-1;)s!==e&&iu.call(s,a,1),iu.call(e,a,1);return e}function ou(e,t){return e&&e.length&&t&&t.length?ru(e,t):e}var su=Hr(ou);var au=Array.prototype.splice;function lu(e,t){for(var A=e?t.length:0,n=A-1;A--;){var i=t[A];if(A==n||i!==r){var r=i;RA(i)?au.call(e,i,1):Bc(e,i)}}return e}var cu=_((function(e,t){var A=null==e?0:e.length,n=Yr(e,t);return lu(e,$A(t,(function(e){return RA(e,A)?+e:e})).sort(bc)),n})),uu=Math.floor,hu=Math.random;function du(e,t){return e+uu(hu()*(t-e+1))}var fu=parseFloat,gu=Math.min,pu=Math.random;var vu=Math.ceil,mu=Math.max;function Bu(e){return function(t,A,n){return n&&"number"!=typeof n&&Pr(t,A,n)&&(A=n=void 0),t=Wi(t),void 0===A?(A=t,t=0):A=Wi(A),function(e,t,A,n){for(var i=-1,r=mu(vu((t-e)/(A||1)),0),o=Array(r);r--;)o[n?r:++i]=e,e+=A;return o}(t,A,n=void 0===n?t<A?1:-1:Wi(n),e)}}var yu=Bu(),Cu=Bu(!0),wu=_((function(e,t){return Mr(e,256,void 0,void 0,void 0,t)}));function bu(e,t,A,n,i){return i(e,(function(e,i,r){A=n?(n=!1,e):t(A,e,i,r)})),A}function xu(e,t,A,n){var i=null==e?0:e.length;for(n&&i&&(A=e[--i]);i--;)A=t(A,e[i],i,e);return A}var Qu=Array.prototype.reverse;function Eu(e){return null==e?e:Qu.call(e)}var Iu=ls("round");function _u(e){var t=e.length;return t?e[du(0,t-1)]:void 0}function Su(e){return _u(ml(e))}function Fu(e,t){var A=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++A<t;){var r=du(A,i),o=e[r];e[r]=e[A],e[A]=o}return e.length=t,e}function ku(e,t){return Fu(p(e),fs(t,0,e.length))}function Uu(e,t){var A=ml(e);return Fu(A,fs(t,0,A.length))}function Ou(e){return Fu(p(e))}function Du(e){return Fu(ml(e))}var Tu=rs((function(e,t,A){return e+(A?"_":"")+t.toLowerCase()}));function Mu(e,t){var A;return Ys(e,(function(e,n,i){return!(A=t(e,n,i))})),!!A}var Lu=Hr((function(e,t){if(null==e)return[];var A=t.length;return A>1&&Pr(e,t[0],t[1])?t=[]:A>2&&Pr(t[0],t[1],t[2])&&(t=[t[0]]),xc(e,U(t,1),[])})),Hu=Math.floor,Pu=Math.min;function Ru(e,t,A,n){var i=0,r=null==e?0:e.length;if(0===r)return 0;for(var o=(t=A(t))!=t,s=null===t,a=DA(t),l=void 0===t;i<r;){var c=Hu((i+r)/2),u=A(e[c]),h=void 0!==u,d=null===u,f=u==u,g=DA(u);if(o)var p=n||f;else p=l?f&&(n||h):s?f&&h&&(n||!d):a?f&&h&&!d&&(n||!g):!d&&!g&&(n?u<=t:u<t);p?i=c+1:r=c}return Pu(r,4294967294)}function Nu(e,t,A){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var r=n+i>>>1,o=e[r];null!==o&&!DA(o)&&(A?o<=t:o<t)?n=r+1:i=r}return i}return Ru(e,t,f,A)}function ju(e,t){for(var A=-1,n=e.length,i=0,r=[];++A<n;){var o=e[A],s=t?t(o):o;if(!A||!NA(s,a)){var a=s;r[i++]=0===o?0:o}}return r}var Vu=Math.max;var Ku=rs((function(e,t,A){return e+(A?" ":"")+Qo(t)}));var Gu=Yi((function(e,t){return e-t}),0);var Yu=Object.prototype,Xu=Yu.hasOwnProperty;function zu(e,t,A,n){return void 0===e||NA(e,Yu[A])&&!Xu.call(n,A)?t:e}var Wu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function $u(e){return"\\"+Wu[e]}var Ju=/<%=([\s\S]+?)%>/g,qu={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Ju,variable:"",imports:{_:{escape:Da}}},Zu=/\b__p \+= '';/g,eh=/\b(__p \+=) '' \+/g,th=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ah=/[()=,{}\[\]\/\s]/,nh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ih=/($^)/,rh=/['\n\r\u2028\u2029\\]/g,oh=Object.prototype.hasOwnProperty;function sh(e,t){return t(e)}var ah=4294967295,lh=Math.min;function ch(e,t){var A=e;return A instanceof rr&&(A=A.value()),Io(t,(function(e,t){return t.func.apply(t.thisArg,k([e],t.args))}),A)}function uh(){return ch(this.__wrapped__,this.__actions__)}var hh=9007199254740991;function dh(e,t){for(var A=e.length;A--&&wr(t,e[A],0)>-1;);return A}function fh(e,t){for(var A=-1,n=e.length;++A<n&&wr(t,e[A],0)>-1;);return A}var gh=/^\s+/;var ph=/\w*$/;var vh=_o({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),mh=/&(?:amp|lt|gt|quot|#39);/g,Bh=RegExp(mh.source);var yh=ie&&1/Cs(new ie([,-0]))[1]==1/0?function(e){return new ie(e)}:or;function Ch(e,t,A){var n=-1,i=br,r=e.length,o=!0,s=[],a=s;if(A)o=!1,i=da;else if(r>=200){var l=t?null:yh(e);if(l)return Cs(l);o=!1,i=ms,a=new ps}else a=t?[]:s;e:for(;++n<r;){var c=e[n],u=t?t(c):c;if(c=A||0!==c?c:0,o&&u==u){for(var h=a.length;h--;)if(a[h]===u)continue e;t&&a.push(u),s.push(c)}else i(a,u,A)||(a!==s&&a.push(u),s.push(c))}return s}var wh=Hr((function(e){return Ch(U(e,1,na,!0))})),bh=Hr((function(e){var t=pa(e);return na(t)&&(t=void 0),Ch(U(e,1,na,!0),Ps(t))})),xh=Hr((function(e){var t=pa(e);return t="function"==typeof t?t:void 0,Ch(U(e,1,na,!0),void 0,t)}));function Qh(e,t){return e&&e.length?Ch(e,Ps(t)):[]}var Eh=0;var Ih=Math.max;function _h(e){if(!e||!e.length)return[];var t=0;return e=X(e,(function(e){if(na(e))return t=Ih(e.length,t),!0})),te(t,(function(t){return $A(e,Ls(t))}))}function Sh(e,t){if(!e||!e.length)return[];var A=_h(e);return null==t?A:$A(A,(function(e){return y(t,void 0,e)}))}function Fh(e,t,A,n){return tn(e,t,A(R(e,t)),n)}var kh=rs((function(e,t,A){return e+(A?" ":"")+t.toUpperCase()}));var Uh=Hr((function(e,t){return na(e)?fa(e,t):[]}));var Oh=_((function(e){var t=e.length,A=t?e[0]:0,n=this.__wrapped__,i=function(t){return Yr(t,e)};return!(t>1||this.__actions__.length)&&n instanceof rr&&RA(A)?((n=n.slice(A,+A+(t?1:0))).__actions__.push({func:sh,args:[i],thisArg:void 0}),new ur(n,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));function Dh(e,t,A){var n=e.length;if(n<2)return n?Ch(e[0]):[];for(var i=-1,r=Array(n);++i<n;)for(var o=e[i],s=-1;++s<n;)s!=i&&(r[i]=fa(r[i]||o,e[s],t,A));return Ch(U(r,1),t,A)}var Th=Hr((function(e){return Dh(X(e,na))})),Mh=Hr((function(e){var t=pa(e);return na(t)&&(t=void 0),Dh(X(e,na),Ps(t))})),Lh=Hr((function(e){var t=pa(e);return t="function"==typeof t?t:void 0,Dh(X(e,na),void 0,t)})),Hh=Hr(_h);function Ph(e,t,A){for(var n=-1,i=e.length,r=t.length,o={};++n<i;){var s=n<r?t[n]:void 0;A(o,e[n],s)}return o}var Rh=Hr((function(e){var t=e.length,A=t>1?e[t-1]:void 0;return A="function"==typeof A?(e.pop(),A):void 0,Sh(e,A)}));const Nh={chunk:function(e,t,A){t=(A?Pr(e,t,A):void 0===t)?1:ds($i(t),0);var n=null==e?0:e.length;if(!n||t<1)return[];for(var i=0,r=0,o=Array(hs(n/t));i<n;)o[r++]=oo(e,i,i+=t);return o},compact:function(e){for(var t=-1,A=null==e?0:e.length,n=0,i=[];++t<A;){var r=e[t];r&&(i[n++]=r)}return i},concat:function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),A=arguments[0],n=e;n--;)t[n-1]=arguments[n];return k(PA(A)?p(A):[A],U(t,1))},difference:ga,differenceBy:va,differenceWith:ma,drop:function(e,t,A){var n=null==e?0:e.length;return n?oo(e,(t=A||void 0===t?1:$i(t))<0?0:t,n):[]},dropRight:function(e,t,A){var n=null==e?0:e.length;return n?oo(e,0,(t=n-(t=A||void 0===t?1:$i(t)))<0?0:t):[]},dropRightWhile:function(e,t){return e&&e.length?ya(e,Ps(t),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?ya(e,Ps(t),!0):[]},fill:function(e,t,A,n){var i=null==e?0:e.length;return i?(A&&"number"!=typeof A&&Pr(e,t,A)&&(A=0,n=i),function(e,t,A,n){var i=e.length;for((A=$i(A))<0&&(A=-A>i?0:i+A),(n=void 0===n||n>i?i:$i(n))<0&&(n+=i),n=A>n?0:Pa(n);A<n;)e[A++]=t;return e}(e,t,A,n)):[]},findIndex:Va,findLastIndex:za,first:$a,flatten:re,flattenDeep:function(e){return(null==e?0:e.length)?U(e,el):[]},flattenDepth:function(e,t){return(null==e?0:e.length)?(t=void 0===t?1:$i(t),U(e,t)):[]},fromPairs:oe,head:$a,indexOf:function(e,t,A){var n=null==e?0:e.length;if(!n)return-1;var i=null==A?0:$i(A);return i<0&&(i=yl(n+i,0)),wr(e,t,i)},initial:function(e){return(null==e?0:e.length)?oo(e,0,-1):[]},intersection:xl,intersectionBy:Ql,intersectionWith:El,join:function(e,t){return null==e?"":Jl.call(e,t)},last:pa,lastIndexOf:function(e,t,A){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==A&&(i=(i=$i(A))<0?ec(n+i,0):tc(i,n-1)),t==t?function(e,t,A){for(var n=A+1;n--;)if(e[n]===t)return n;return n}(e,t,i):yr(e,Cr,i,!0)},nth:function(e,t){return e&&e.length?mc(e,$i(t)):void 0},pull:su,pullAll:ou,pullAllBy:function(e,t,A){return e&&e.length&&t&&t.length?ru(e,t,Ps(A)):e},pullAllWith:function(e,t,A){return e&&e.length&&t&&t.length?ru(e,t,void 0,A):e},pullAt:cu,remove:function(e,t){var A=[];if(!e||!e.length)return A;var n=-1,i=[],r=e.length;for(t=Ps(t);++n<r;){var o=e[n];t(o,n,e)&&(A.push(o),i.push(n))}return lu(e,i),A},reverse:Eu,slice:function(e,t,A){var n=null==e?0:e.length;return n?(A&&"number"!=typeof A&&Pr(e,t,A)?(t=0,A=n):(t=null==t?0:$i(t),A=void 0===A?n:$i(A)),oo(e,t,A)):[]},sortedIndex:function(e,t){return Nu(e,t)},sortedIndexBy:function(e,t,A){return Ru(e,t,Ps(A))},sortedIndexOf:function(e,t){var A=null==e?0:e.length;if(A){var n=Nu(e,t);if(n<A&&NA(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return Nu(e,t,!0)},sortedLastIndexBy:function(e,t,A){return Ru(e,t,Ps(A),!0)},sortedLastIndexOf:function(e,t){if(null==e?0:e.length){var A=Nu(e,t,!0)-1;if(NA(e[A],t))return A}return-1},sortedUniq:function(e){return e&&e.length?ju(e):[]},sortedUniqBy:function(e,t){return e&&e.length?ju(e,Ps(t)):[]},tail:function(e){var t=null==e?0:e.length;return t?oo(e,1,t):[]},take:function(e,t,A){return e&&e.length?oo(e,0,(t=A||void 0===t?1:$i(t))<0?0:t):[]},takeRight:function(e,t,A){var n=null==e?0:e.length;return n?oo(e,(t=n-(t=A||void 0===t?1:$i(t)))<0?0:t,n):[]},takeRightWhile:function(e,t){return e&&e.length?ya(e,Ps(t),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?ya(e,Ps(t)):[]},union:wh,unionBy:bh,unionWith:xh,uniq:function(e){return e&&e.length?Ch(e):[]},uniqBy:Qh,uniqWith:function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?Ch(e,void 0,t):[]},unzip:_h,unzipWith:Sh,without:Uh,xor:Th,xorBy:Mh,xorWith:Lh,zip:Hh,zipObject:function(e,t){return Ph(e||[],t||[],jA)},zipObjectDeep:function(e,t){return Ph(e||[],t||[],tn)},zipWith:Rh},jh={countBy:$s,each:wa,eachRight:Ia,every:function(e,t,A){var n=PA(e)?La:Ha;return A&&Pr(e,t,A)&&(t=void 0),n(e,Ps(t))},filter:function(e,t){return(PA(e)?X:Ra)(e,Ps(t))},find:Ka,findLast:Wa,flatMap:function(e,t){return U(qa(e,t),1)},flatMapDeep:function(e,t){return U(qa(e,t),Za)},flatMapDepth:function(e,t,A){return A=void 0===A?1:$i(A),U(qa(e,t),A)},forEach:wa,forEachRight:Ia,groupBy:sl,includes:function(e,t,A,n){e=w(e)?e:ml(e),A=A&&!n?$i(A):0;var i=e.length;return A<0&&(A=Bl(i+A,0)),pl(e)?A<=i&&e.indexOf(t,A)>-1:!!i&&wr(e,t,A)>-1},invokeMap:Ll,keyBy:Zl,map:qa,orderBy:function(e,t,A,n){return null==e?[]:(PA(t)||(t=null==t?[]:[t]),PA(A=n?void 0:A)||(A=null==A?[]:[A]),xc(e,t,A))},partition:Au,reduce:function(e,t,A){var n=PA(e)?Io:bu,i=arguments.length<3;return n(e,Ps(t),A,i,Ys)},reduceRight:function(e,t,A){var n=PA(e)?xu:bu,i=arguments.length<3;return n(e,Ps(t),A,i,Ea)},reject:function(e,t){return(PA(e)?X:Ra)(e,gc(Ps(t)))},sample:function(e){return(PA(e)?_u:Su)(e)},sampleSize:function(e,t,A){return t=(A?Pr(e,t,A):void 0===t)?1:$i(t),(PA(e)?ku:Uu)(e,t)},shuffle:function(e){return(PA(e)?Ou:Du)(e)},size:function(e){if(null==e)return 0;if(w(e))return pl(e)?Xc(e):e.length;var t=T(e);return"[object Map]"==t||"[object Set]"==t?e.size:J(e).length},some:function(e,t,A){var n=PA(e)?vs:Mu;return A&&Pr(e,t,A)&&(t=void 0),n(e,Ps(t))},sortBy:Lu},Vh={now:se},Kh={after:function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=$i(e),function(){if(--e<1)return t.apply(this,arguments)}},ary:Lr,before:Ao,bind:no,bindKey:ro,curry:Js,curryRight:qs,debounce:ae,defer:ua,delay:ha,flip:function(e){return Mr(e,512)},memoize:nn,negate:gc,once:function(e){return Ao(2,e)},overArgs:Sc,partial:eu,partialRight:tu,rearg:wu,rest:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return Hr(e,t=void 0===t?t:$i(t))},spread:function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Vu($i(t),0),Hr((function(A){var n=A[t],i=so(A,0,t);return n&&k(i,n),y(e,this,i)}))},throttle:le,unary:function(e){return Lr(e,1)},wrap:function(e,t){return eu(Ca(t),e)}},Gh={castArray:ce,clone:ue,cloneDeep:gs,cloneDeepWith:function(e,t){return F(e,5,t="function"==typeof t?t:void 0)},cloneWith:function(e,t){return F(e,4,t="function"==typeof t?t:void 0)},conformsTo:function(e,t){return null==t||Rs(e,t,Q(t))},eq:NA,gt:cl,gte:ul,isArguments:K,isArray:PA,isArrayBuffer:Pl,isArrayLike:w,isArrayLikeObject:na,isBoolean:function(e){return!0===e||!1===e||HA(e)&&"[object Boolean]"==VA(e)},isBuffer:M,isDate:Nl,isElement:function(e){return HA(e)&&1===e.nodeType&&!Zr(e)},isEmpty:function(e){if(null==e)return!0;if(w(e)&&(PA(e)||"string"==typeof e||"function"==typeof e.splice||M(e)||H(e)||K(e)))return!e.length;var t=T(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(b(e))return!J(e).length;for(var A in e)if(jl.call(e,A))return!1;return!0},isEqual:Vl,isEqualWith:function(e,t,A){var n=(A="function"==typeof A?A:void 0)?A(e,t):void 0;return void 0===n?Fs(e,t,void 0,A):!!n},isError:eo,isFinite:function(e){return"number"==typeof e&&Kl(e)},isFunction:JA,isInteger:Gl,isLength:he,isMap:de,isMatch:function(e,t){return e===t||ks(e,t,Os(t))},isMatchWith:function(e,t,A){return A="function"==typeof A?A:void 0,ks(e,t,Os(t),A)},isNaN:function(e){return Yl(e)&&e!=+e},isNative:function(e){if(Xl(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return en(e)},isNil:fe,isNull:function(e){return null===e},isNumber:Yl,isObject:MA,isObjectLike:HA,isPlainObject:Zr,isRegExp:Wl,isSafeInteger:function(e){return Gl(e)&&e>=-9007199254740991&&e<=$l},isSet:ge,isString:pl,isSymbol:DA,isTypedArray:H,isUndefined:pe,isWeakMap:function(e){return HA(e)&&"[object WeakMap]"==T(e)},isWeakSet:function(e){return HA(e)&&"[object WeakSet]"==VA(e)},lt:rc,lte:oc,toArray:vc,toFinite:Wi,toInteger:$i,toLength:Pa,toNumber:h,toPlainObject:ra,toSafeInteger:function(e){return e?fs($i(e),-9007199254740991,hh):0===e?e:0},toString:YA},Yh={add:Xi,ceil:cs,divide:Ba,floor:tl,max:function(e){return e&&e.length?sc(e,f,al):void 0},maxBy:function(e,t){return e&&e.length?sc(e,Ps(t),al):void 0},mean:function(e){return lc(e,f)},meanBy:function(e,t){return lc(e,Ps(t))},min:function(e){return e&&e.length?sc(e,f,ic):void 0},minBy:function(e,t){return e&&e.length?sc(e,Ps(t),ic):void 0},multiply:fc,round:Iu,subtract:Gu,sum:function(e){return e&&e.length?ac(e,f):0},sumBy:function(e,t){return e&&e.length?ac(e,Ps(t)):0}},Xh=function(e,t,A){return void 0===A&&(A=t,t=void 0),void 0!==A&&(A=(A=h(A))==A?A:0),void 0!==t&&(t=(t=h(t))==t?t:0),fs(h(e),t,A)},zh=function(e,t,A){return t=Wi(t),void 0===A?(A=t,t=0):A=Wi(A),function(e,t,A){return e>=gl(t,A)&&e<fl(t,A)}(e=h(e),t,A)},Wh=function(e,t,A){if(A&&"boolean"!=typeof A&&Pr(e,t,A)&&(t=A=void 0),void 0===A&&("boolean"==typeof t?(A=t,t=void 0):"boolean"==typeof e&&(A=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=Wi(e),void 0===t?(t=e,e=0):t=Wi(t)),e>t){var n=e;e=t,t=n}if(A||e%1||t%1){var i=pu();return gu(e+i*(t-e+fu("1e-"+((i+"").length-1))),t)}return du(e,t)},$h={assign:jr,assignIn:Vr,assignInWith:Kr,assignWith:Gr,at:Xr,create:function(e,t){var A=g(e);return null==t?A:N(A,t)},defaults:ta,defaultsDeep:la,entries:Sa,entriesIn:Fa,extend:Vr,extendWith:Kr,findKey:function(e,t){return Ga(e,Ps(t),Ks)},findLastKey:function(e,t){return Ga(e,Ps(t),Qa)},forIn:function(e,t){return null==e?e:Vs(e,Ca(t),E)},forInRight:function(e,t){return null==e?e:xa(e,Ca(t),E)},forOwn:function(e,t){return e&&Ks(e,Ca(t))},forOwnRight:function(e,t){return e&&Qa(e,Ca(t))},functions:function(e){return null==e?[]:rl(e,Q(e))},functionsIn:function(e){return null==e?[]:rl(e,E(e))},get:I,has:function(e,t){return null!=e&&z(e,t,dl)},hasIn:P,invert:Sl,invertBy:Ol,invoke:Ml,keys:Q,keysIn:E,mapKeys:function(e,t){var A={};return t=Ps(t),Ks(e,(function(e,n,i){GA(A,t(e,n,i),e)})),A},mapValues:function(e,t){var A={};return t=Ps(t),Ks(e,(function(e,n,i){GA(A,n,t(e,n,i))})),A},merge:cc,mergeWith:aa,omit:Cc,omitBy:function(e,t){return wc(e,gc(Ps(t)))},pick:ve,pickBy:wc,result:function(e,t,A){var n=-1,i=(t=qA(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var r=null==e?void 0:e[KA(t[n])];void 0===r&&(n=i,r=A),e=JA(r)?r.call(e):r}return e},set:rn,setWith:function(e,t,A,n){return n="function"==typeof n?n:void 0,null==e?e:tn(e,t,A,n)},toPairs:Sa,toPairsIn:Fa,transform:function(e,t,A){var n=PA(e),i=n||M(e)||H(e);if(t=Ps(t),null==A){var r=e&&e.constructor;A=i?n?new r:[]:MA(e)&&JA(r)?g(S(e)):{}}return(i?m:Ks)(e,(function(e,n,i){return t(A,e,n,i)})),A},unset:function(e,t){return null==e||Bc(e,t)},update:function(e,t,A){return null==e?e:Fh(e,t,Ca(A))},updateWith:function(e,t,A,n){return n="function"==typeof n?n:void 0,null==e?e:Fh(e,t,Ca(A),n)},values:ml,valuesIn:function(e){return null==e?[]:vl(e,E(e))}},Jh={at:Oh,chain:us,commit:function(){return new ur(this.value(),this.__chain__)},lodash:fr,next:function(){void 0===this.__values__&&(this.__values__=vc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}},plant:function(e){for(var t,A=this;A instanceof ir;){var n=hr(A);n.__index__=0,n.__values__=void 0,t?i.__wrapped__=n:t=n;var i=n;A=A.__wrapped__}return i.__wrapped__=e,t},reverse:function(){var e=this.__wrapped__;if(e instanceof rr){var t=e;return this.__actions__.length&&(t=new rr(this)),(t=t.reverse()).__actions__.push({func:sh,args:[Eu],thisArg:void 0}),new ur(t,this.__chain__)}return this.thru(Eu)},tap:function(e,t){return t(e),e},thru:sh,toIterator:function(){return this},toJSON:uh,value:uh,valueOf:uh,wrapperChain:function(){return us(this)}},qh={camelCase:os,capitalize:Eo,deburr:Uo,endsWith:function(e,t,A){e=YA(e),t=TA(t);var n=e.length,i=A=void 0===A?n:fs($i(A),0,n);return(A-=t.length)>=0&&e.slice(A,i)==t},escape:Da,escapeRegExp:function(e){return(e=YA(e))&&Ma.test(e)?e.replace(Ta,"\\$&"):e},kebabCase:ql,lowerCase:Ac,lowerFirst:nc,pad:function(e,t,A){e=YA(e);var n=(t=$i(t))?Xc(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Wc(Jc(i),A)+e+Wc($c(i),A)},padEnd:function(e,t,A){e=YA(e);var n=(t=$i(t))?Xc(e):0;return t&&n<t?e+Wc(t-n,A):e},padStart:function(e,t,A){e=YA(e);var n=(t=$i(t))?Xc(e):0;return t&&n<t?Wc(t-n,A)+e:e},parseInt:function(e,t,A){return A||null==t?t=0:t&&(t=+t),Zc(YA(e).replace(qc,""),t||0)},repeat:function(e,t,A){return t=(A?Pr(e,t,A):void 0===t)?1:$i(t),Oc(YA(e),t)},replace:function(){var e=arguments,t=YA(e[0]);return e.length<3?t:t.replace(e[1],e[2])},snakeCase:Tu,split:function(e,t,A){return A&&"number"!=typeof A&&Pr(e,t,A)&&(t=A=void 0),(A=void 0===A?4294967295:A>>>0)?(e=YA(e))&&("string"==typeof t||null!=t&&!Wl(t))&&!(t=TA(t))&&lo(e)?so(bo(e),0,A):e.split(t,A):[]},startCase:Ku,startsWith:function(e,t,A){return e=YA(e),A=null==A?0:fs($i(A),0,e.length),t=TA(t),e.slice(A,A+t.length)==t},template:function(e,t,A){var n=qu.imports._.templateSettings||qu;A&&Pr(e,t,A)&&(t=void 0),e=YA(e),t=Kr({},t,n,zu);var i,r,o=Kr({},t.imports,n.imports,zu),s=Q(o),a=vl(o,s),l=0,c=t.interpolate||ih,u="__p += '",h=RegExp((t.escape||ih).source+"|"+c.source+"|"+(c===Ju?nh:ih).source+"|"+(t.evaluate||ih).source+"|$","g"),d=oh.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(h,(function(t,A,n,o,s,a){return n||(n=o),u+=e.slice(l,a).replace(rh,$u),A&&(i=!0,u+="' +\n__e("+A+") +\n'"),s&&(r=!0,u+="';\n"+s+";\n__p += '"),n&&(u+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=a+t.length,t})),u+="';\n";var f=oh.call(t,"variable")&&t.variable;if(f){if(Ah.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else u="with (obj) {\n"+u+"\n}\n";u=(r?u.replace(Zu,""):u).replace(eh,"$1").replace(th,"$1;"),u="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+u+"return __p\n}";var g=to((function(){return Function(s,d+"return "+u).apply(void 0,a)}));if(g.source=u,eo(g))throw g;return g},templateSettings:qu,toLower:function(e){return YA(e).toLowerCase()},toUpper:function(e){return YA(e).toUpperCase()},trim:function(e,t,A){if((e=YA(e))&&(A||void 0===t))return Ae(e);if(!e||!(t=TA(t)))return e;var n=bo(e),i=bo(t);return so(n,fh(n,i),dh(n,i)+1).join("")},trimEnd:function(e,t,A){if((e=YA(e))&&(A||void 0===t))return e.slice(0,ne(e)+1);if(!e||!(t=TA(t)))return e;var n=bo(e);return so(n,0,dh(n,bo(t))+1).join("")},trimStart:function(e,t,A){if((e=YA(e))&&(A||void 0===t))return e.replace(gh,"");if(!e||!(t=TA(t)))return e;var n=bo(e);return so(n,fh(n,bo(t))).join("")},truncate:function(e,t){var A=30,n="...";if(MA(t)){var i="separator"in t?t.separator:i;A="length"in t?$i(t.length):A,n="omission"in t?TA(t.omission):n}var r=(e=YA(e)).length;if(lo(e)){var o=bo(e);r=o.length}if(A>=r)return e;var s=A-Xc(n);if(s<1)return n;var a=o?so(o,0,s).join(""):e.slice(0,s);if(void 0===i)return a+n;if(o&&(s+=a.length-s),Wl(i)){if(e.slice(s).search(i)){var l,c=a;for(i.global||(i=RegExp(i.source,YA(ph.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var u=l.index;a=a.slice(0,void 0===u?s:u)}}else if(e.indexOf(TA(i),s)!=s){var h=a.lastIndexOf(i);h>-1&&(a=a.slice(0,h))}return a+n},unescape:function(e){return(e=YA(e))&&Bh.test(e)?e.replace(mh,vh):e},upperCase:kh,upperFirst:Qo,words:ns},Zh={attempt:to,bindAll:io,cond:function(e){var t=null==e?0:e.length,A=Ps;return e=t?$A(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[A(e[0]),e[1]]})):[],Hr((function(A){for(var n=-1;++n<t;){var i=e[n];if(y(i[0],this,A))return y(i[1],this,A)}}))},conforms:function(e){return function(e){var t=Q(e);return function(A){return Rs(A,e,t)}}(F(e,1))},constant:W,defaultTo:function(e,t){return null==e||e!=e?t:e},flow:nl,flowRight:il,identity:f,iteratee:function(e){return Ps("function"==typeof e?e:F(e,1))},matches:function(e){return Ts(F(e,1))},matchesProperty:function(e,t){return Ms(e,F(t,1))},method:uc,methodOf:hc,mixin:dc,noop:or,nthArg:function(e){return e=$i(e),Hr((function(t){return mc(t,e)}))},over:Ec,overEvery:Fc,overSome:kc,property:Hs,propertyOf:function(e){return function(t){return null==e?void 0:R(e,t)}},range:yu,rangeRight:Cu,stubArray:me,stubFalse:q,stubObject:function(){return{}},stubString:function(){return""},stubTrue:function(){return!0},times:function(e,t){if((e=$i(e))<1||e>9007199254740991)return[];var A=ah,n=lh(e,ah);t=Ca(t),e-=ah;for(var i=te(n,t);++A<e;)t(A);return i},toPath:function(e){return PA(e)?$A(e,KA):DA(e)?[e]:p(An(YA(e)))},uniqueId:function(e){var t=++Eh;return YA(e)+t}};var ed=Math.max,td=Math.min;var Ad=Math.min;
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var nd,id=4294967295,rd=Array.prototype,od=Object.prototype.hasOwnProperty,sd=zA?zA.iterator:void 0,ad=Math.max,ld=Math.min,cd=function(e){return function(t,A,n){if(null==n){var i=MA(A),r=i&&Q(A),o=r&&r.length&&rl(A,r);(o?o.length:i)||(n=A,A=t,t=this)}return e(t,A,n)}}(dc);fr.after=Kh.after,fr.ary=Kh.ary,fr.assign=$h.assign,fr.assignIn=$h.assignIn,fr.assignInWith=$h.assignInWith,fr.assignWith=$h.assignWith,fr.at=$h.at,fr.before=Kh.before,fr.bind=Kh.bind,fr.bindAll=Zh.bindAll,fr.bindKey=Kh.bindKey,fr.castArray=Gh.castArray,fr.chain=Jh.chain,fr.chunk=Nh.chunk,fr.compact=Nh.compact,fr.concat=Nh.concat,fr.cond=Zh.cond,fr.conforms=Zh.conforms,fr.constant=Zh.constant,fr.countBy=jh.countBy,fr.create=$h.create,fr.curry=Kh.curry,fr.curryRight=Kh.curryRight,fr.debounce=Kh.debounce,fr.defaults=$h.defaults,fr.defaultsDeep=$h.defaultsDeep,fr.defer=Kh.defer,fr.delay=Kh.delay,fr.difference=Nh.difference,fr.differenceBy=Nh.differenceBy,fr.differenceWith=Nh.differenceWith,fr.drop=Nh.drop,fr.dropRight=Nh.dropRight,fr.dropRightWhile=Nh.dropRightWhile,fr.dropWhile=Nh.dropWhile,fr.fill=Nh.fill,fr.filter=jh.filter,fr.flatMap=jh.flatMap,fr.flatMapDeep=jh.flatMapDeep,fr.flatMapDepth=jh.flatMapDepth,fr.flatten=Nh.flatten,fr.flattenDeep=Nh.flattenDeep,fr.flattenDepth=Nh.flattenDepth,fr.flip=Kh.flip,fr.flow=Zh.flow,fr.flowRight=Zh.flowRight,fr.fromPairs=Nh.fromPairs,fr.functions=$h.functions,fr.functionsIn=$h.functionsIn,fr.groupBy=jh.groupBy,fr.initial=Nh.initial,fr.intersection=Nh.intersection,fr.intersectionBy=Nh.intersectionBy,fr.intersectionWith=Nh.intersectionWith,fr.invert=$h.invert,fr.invertBy=$h.invertBy,fr.invokeMap=jh.invokeMap,fr.iteratee=Zh.iteratee,fr.keyBy=jh.keyBy,fr.keys=Q,fr.keysIn=$h.keysIn,fr.map=jh.map,fr.mapKeys=$h.mapKeys,fr.mapValues=$h.mapValues,fr.matches=Zh.matches,fr.matchesProperty=Zh.matchesProperty,fr.memoize=Kh.memoize,fr.merge=$h.merge,fr.mergeWith=$h.mergeWith,fr.method=Zh.method,fr.methodOf=Zh.methodOf,fr.mixin=cd,fr.negate=gc,fr.nthArg=Zh.nthArg,fr.omit=$h.omit,fr.omitBy=$h.omitBy,fr.once=Kh.once,fr.orderBy=jh.orderBy,fr.over=Zh.over,fr.overArgs=Kh.overArgs,fr.overEvery=Zh.overEvery,fr.overSome=Zh.overSome,fr.partial=Kh.partial,fr.partialRight=Kh.partialRight,fr.partition=jh.partition,fr.pick=$h.pick,fr.pickBy=$h.pickBy,fr.property=Zh.property,fr.propertyOf=Zh.propertyOf,fr.pull=Nh.pull,fr.pullAll=Nh.pullAll,fr.pullAllBy=Nh.pullAllBy,fr.pullAllWith=Nh.pullAllWith,fr.pullAt=Nh.pullAt,fr.range=Zh.range,fr.rangeRight=Zh.rangeRight,fr.rearg=Kh.rearg,fr.reject=jh.reject,fr.remove=Nh.remove,fr.rest=Kh.rest,fr.reverse=Nh.reverse,fr.sampleSize=jh.sampleSize,fr.set=$h.set,fr.setWith=$h.setWith,fr.shuffle=jh.shuffle,fr.slice=Nh.slice,fr.sortBy=jh.sortBy,fr.sortedUniq=Nh.sortedUniq,fr.sortedUniqBy=Nh.sortedUniqBy,fr.split=qh.split,fr.spread=Kh.spread,fr.tail=Nh.tail,fr.take=Nh.take,fr.takeRight=Nh.takeRight,fr.takeRightWhile=Nh.takeRightWhile,fr.takeWhile=Nh.takeWhile,fr.tap=Jh.tap,fr.throttle=Kh.throttle,fr.thru=sh,fr.toArray=Gh.toArray,fr.toPairs=$h.toPairs,fr.toPairsIn=$h.toPairsIn,fr.toPath=Zh.toPath,fr.toPlainObject=Gh.toPlainObject,fr.transform=$h.transform,fr.unary=Kh.unary,fr.union=Nh.union,fr.unionBy=Nh.unionBy,fr.unionWith=Nh.unionWith,fr.uniq=Nh.uniq,fr.uniqBy=Nh.uniqBy,fr.uniqWith=Nh.uniqWith,fr.unset=$h.unset,fr.unzip=Nh.unzip,fr.unzipWith=Nh.unzipWith,fr.update=$h.update,fr.updateWith=$h.updateWith,fr.values=$h.values,fr.valuesIn=$h.valuesIn,fr.without=Nh.without,fr.words=qh.words,fr.wrap=Kh.wrap,fr.xor=Nh.xor,fr.xorBy=Nh.xorBy,fr.xorWith=Nh.xorWith,fr.zip=Nh.zip,fr.zipObject=Nh.zipObject,fr.zipObjectDeep=Nh.zipObjectDeep,fr.zipWith=Nh.zipWith,fr.entries=$h.toPairs,fr.entriesIn=$h.toPairsIn,fr.extend=$h.assignIn,fr.extendWith=$h.assignInWith,cd(fr,fr),fr.add=Yh.add,fr.attempt=Zh.attempt,fr.camelCase=qh.camelCase,fr.capitalize=qh.capitalize,fr.ceil=Yh.ceil,fr.clamp=Xh,fr.clone=Gh.clone,fr.cloneDeep=Gh.cloneDeep,fr.cloneDeepWith=Gh.cloneDeepWith,fr.cloneWith=Gh.cloneWith,fr.conformsTo=Gh.conformsTo,fr.deburr=qh.deburr,fr.defaultTo=Zh.defaultTo,fr.divide=Yh.divide,fr.endsWith=qh.endsWith,fr.eq=Gh.eq,fr.escape=qh.escape,fr.escapeRegExp=qh.escapeRegExp,fr.every=jh.every,fr.find=jh.find,fr.findIndex=Nh.findIndex,fr.findKey=$h.findKey,fr.findLast=jh.findLast,fr.findLastIndex=Nh.findLastIndex,fr.findLastKey=$h.findLastKey,fr.floor=Yh.floor,fr.forEach=jh.forEach,fr.forEachRight=jh.forEachRight,fr.forIn=$h.forIn,fr.forInRight=$h.forInRight,fr.forOwn=$h.forOwn,fr.forOwnRight=$h.forOwnRight,fr.get=$h.get,fr.gt=Gh.gt,fr.gte=Gh.gte,fr.has=$h.has,fr.hasIn=$h.hasIn,fr.head=Nh.head,fr.identity=f,fr.includes=jh.includes,fr.indexOf=Nh.indexOf,fr.inRange=zh,fr.invoke=$h.invoke,fr.isArguments=Gh.isArguments,fr.isArray=PA,fr.isArrayBuffer=Gh.isArrayBuffer,fr.isArrayLike=Gh.isArrayLike,fr.isArrayLikeObject=Gh.isArrayLikeObject,fr.isBoolean=Gh.isBoolean,fr.isBuffer=Gh.isBuffer,fr.isDate=Gh.isDate,fr.isElement=Gh.isElement,fr.isEmpty=Gh.isEmpty,fr.isEqual=Gh.isEqual,fr.isEqualWith=Gh.isEqualWith,fr.isError=Gh.isError,fr.isFinite=Gh.isFinite,fr.isFunction=Gh.isFunction,fr.isInteger=Gh.isInteger,fr.isLength=Gh.isLength,fr.isMap=Gh.isMap,fr.isMatch=Gh.isMatch,fr.isMatchWith=Gh.isMatchWith,fr.isNaN=Gh.isNaN,fr.isNative=Gh.isNative,fr.isNil=Gh.isNil,fr.isNull=Gh.isNull,fr.isNumber=Gh.isNumber,fr.isObject=MA,fr.isObjectLike=Gh.isObjectLike,fr.isPlainObject=Gh.isPlainObject,fr.isRegExp=Gh.isRegExp,fr.isSafeInteger=Gh.isSafeInteger,fr.isSet=Gh.isSet,fr.isString=Gh.isString,fr.isSymbol=Gh.isSymbol,fr.isTypedArray=Gh.isTypedArray,fr.isUndefined=Gh.isUndefined,fr.isWeakMap=Gh.isWeakMap,fr.isWeakSet=Gh.isWeakSet,fr.join=Nh.join,fr.kebabCase=qh.kebabCase,fr.last=pa,fr.lastIndexOf=Nh.lastIndexOf,fr.lowerCase=qh.lowerCase,fr.lowerFirst=qh.lowerFirst,fr.lt=Gh.lt,fr.lte=Gh.lte,fr.max=Yh.max,fr.maxBy=Yh.maxBy,fr.mean=Yh.mean,fr.meanBy=Yh.meanBy,fr.min=Yh.min,fr.minBy=Yh.minBy,fr.stubArray=Zh.stubArray,fr.stubFalse=Zh.stubFalse,fr.stubObject=Zh.stubObject,fr.stubString=Zh.stubString,fr.stubTrue=Zh.stubTrue,fr.multiply=Yh.multiply,fr.nth=Nh.nth,fr.noop=Zh.noop,fr.now=Vh.now,fr.pad=qh.pad,fr.padEnd=qh.padEnd,fr.padStart=qh.padStart,fr.parseInt=qh.parseInt,fr.random=Wh,fr.reduce=jh.reduce,fr.reduceRight=jh.reduceRight,fr.repeat=qh.repeat,fr.replace=qh.replace,fr.result=$h.result,fr.round=Yh.round,fr.sample=jh.sample,fr.size=jh.size,fr.snakeCase=qh.snakeCase,fr.some=jh.some,fr.sortedIndex=Nh.sortedIndex,fr.sortedIndexBy=Nh.sortedIndexBy,fr.sortedIndexOf=Nh.sortedIndexOf,fr.sortedLastIndex=Nh.sortedLastIndex,fr.sortedLastIndexBy=Nh.sortedLastIndexBy,fr.sortedLastIndexOf=Nh.sortedLastIndexOf,fr.startCase=qh.startCase,fr.startsWith=qh.startsWith,fr.subtract=Yh.subtract,fr.sum=Yh.sum,fr.sumBy=Yh.sumBy,fr.template=qh.template,fr.times=Zh.times,fr.toFinite=Gh.toFinite,fr.toInteger=$i,fr.toLength=Gh.toLength,fr.toLower=qh.toLower,fr.toNumber=Gh.toNumber,fr.toSafeInteger=Gh.toSafeInteger,fr.toString=Gh.toString,fr.toUpper=qh.toUpper,fr.trim=qh.trim,fr.trimEnd=qh.trimEnd,fr.trimStart=qh.trimStart,fr.truncate=qh.truncate,fr.unescape=qh.unescape,fr.uniqueId=Zh.uniqueId,fr.upperCase=qh.upperCase,fr.upperFirst=qh.upperFirst,fr.each=jh.forEach,fr.eachRight=jh.forEachRight,fr.first=Nh.head,cd(fr,(nd={},Ks(fr,(function(e,t){od.call(fr.prototype,t)||(nd[t]=e)})),nd),{chain:!1}),fr.VERSION="4.17.21",(fr.templateSettings=qh.templateSettings).imports._=fr,m(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){fr[e].placeholder=fr})),m(["drop","take"],(function(e,t){rr.prototype[e]=function(A){A=void 0===A?1:ad($i(A),0);var n=this.__filtered__&&!t?new rr(this):this.clone();return n.__filtered__?n.__takeCount__=ld(A,n.__takeCount__):n.__views__.push({size:ld(A,id),type:e+(n.__dir__<0?"Right":"")}),n},rr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),m(["filter","map","takeWhile"],(function(e,t){var A=t+1,n=1==A||3==A;rr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Ps(e),type:A}),t.__filtered__=t.__filtered__||n,t}})),m(["head","last"],(function(e,t){var A="take"+(t?"Right":"");rr.prototype[e]=function(){return this[A](1).value()[0]}})),m(["initial","tail"],(function(e,t){var A="drop"+(t?"":"Right");rr.prototype[e]=function(){return this.__filtered__?new rr(this):this[A](1)}})),rr.prototype.compact=function(){return this.filter(f)},rr.prototype.find=function(e){return this.filter(e).head()},rr.prototype.findLast=function(e){return this.reverse().find(e)},rr.prototype.invokeMap=Hr((function(e,t){return"function"==typeof e?new rr(this):this.map((function(A){return Tl(A,e,t)}))})),rr.prototype.reject=function(e){return this.filter(gc(Ps(e)))},rr.prototype.slice=function(e,t){e=$i(e);var A=this;return A.__filtered__&&(e>0||t<0)?new rr(A):(e<0?A=A.takeRight(-e):e&&(A=A.drop(e)),void 0!==t&&(A=(t=$i(t))<0?A.dropRight(-t):A.take(t-e)),A)},rr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rr.prototype.toArray=function(){return this.take(id)},Ks(rr.prototype,(function(e,t){var A=/^(?:filter|find|map|reject)|While$/.test(t),n=/^(?:head|last)$/.test(t),i=fr[n?"take"+("last"==t?"Right":""):t],r=n||/^find/.test(t);i&&(fr.prototype[t]=function(){var t=this.__wrapped__,o=n?[1]:arguments,s=t instanceof rr,a=o[0],l=s||PA(t),c=function(e){var t=i.apply(fr,k([e],o));return n&&u?t[0]:t};l&&A&&"function"==typeof a&&1!=a.length&&(s=l=!1);var u=this.__chain__,h=!!this.__actions__.length,d=r&&!u,f=s&&!h;if(!r&&l){t=f?t:new rr(this);var g=e.apply(t,o);return g.__actions__.push({func:sh,args:[c],thisArg:void 0}),new ur(g,u)}return d&&f?e.apply(this,o):(g=this.thru(c),d?n?g.value()[0]:g.value():g)})})),m(["pop","push","shift","sort","splice","unshift"],(function(e){var t=rd[e],A=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);fr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(PA(i)?i:[],e)}return this[A]((function(A){return t.apply(PA(A)?A:[],e)}))}})),Ks(rr.prototype,(function(e,t){var A=fr[t];if(A){var n=A.name+"";od.call(ar,n)||(ar[n]=[]),ar[n].push({name:t,func:A})}})),ar[kr(void 0,2).name]=[{name:"wrapper",func:void 0}],rr.prototype.clone=function(){var e=new rr(this.__wrapped__);return e.__actions__=p(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=p(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=p(this.__views__),e},rr.prototype.reverse=function(){if(this.__filtered__){var e=new rr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},rr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,A=PA(e),n=t<0,i=A?e.length:0,r=function(e,t,A){for(var n=-1,i=A.length;++n<i;){var r=A[n],o=r.size;switch(r.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=td(t,e+o);break;case"takeRight":e=ed(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=r.start,s=r.end,a=s-o,l=n?s:o-1,c=this.__iteratees__,u=c.length,h=0,d=Ad(a,this.__takeCount__);if(!A||!n&&i==a&&d==a)return ch(e,this.__actions__);var f=[];e:for(;a--&&h<d;){for(var g=-1,p=e[l+=t];++g<u;){var v=c[g],m=v.iteratee,B=v.type,y=m(p);if(2==B)p=y;else if(!y){if(1==B)continue e;break e}}f[h++]=p}return f},fr.prototype.at=Jh.at,fr.prototype.chain=Jh.wrapperChain,fr.prototype.commit=Jh.commit,fr.prototype.next=Jh.next,fr.prototype.plant=Jh.plant,fr.prototype.reverse=Jh.reverse,fr.prototype.toJSON=fr.prototype.valueOf=fr.prototype.value=Jh.value,fr.prototype.first=fr.prototype.head,sd&&(fr.prototype[sd]=Jh.toIterator);const ud=e=>{let t,A;return"touchend"===e.type?(A=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(A=e.touches[0].clientY,t=e.touches[0].clientX):(A=e.clientY,t=e.clientX),{clientX:t,clientY:A}},hd=Symbol("breadcrumbKey"),dd=ye({separator:{type:String,default:"/"},separatorIcon:{type:Ce}}),fd=["aria-label"],gd=on({name:"ElBreadcrumb"});var pd=xe(on(l(a({},gd),{props:dd,setup(e){const t=e,{t:A}=we(),n=be("breadcrumb"),i=sn();return an(hd,t),ln((()=>{const e=i.value.querySelectorAll(`.${n.e("item")}`);e.length&&e[e.length-1].setAttribute("aria-current","page")})),(e,t)=>(cn(),un("div",{ref_key:"breadcrumb",ref:i,class:dn(fn(n).b()),"aria-label":fn(A)("el.breadcrumb.label"),role:"navigation"},[hn(e.$slots,"default")],10,fd))}})),[["__file","breadcrumb.vue"]]);const vd=ye({to:{type:Qe([String,Object]),default:""},replace:{type:Boolean,default:!1}}),md=on({name:"ElBreadcrumbItem"});var Bd=xe(on(l(a({},md),{props:vd,setup(e){const t=e,A=Cn(),n=gn(hd,void 0),i=be("breadcrumb"),r=A.appContext.config.globalProperties.$router,o=sn(),s=()=>{t.to&&r&&(t.replace?r.replace(t.to):r.push(t.to))};return(e,t)=>{var A,r;return cn(),un("span",{class:dn(fn(i).e("item"))},[pn("span",{ref_key:"link",ref:o,class:dn([fn(i).e("inner"),fn(i).is("link",!!e.to)]),role:"link",onClick:s},[hn(e.$slots,"default")],2),(null==(A=fn(n))?void 0:A.separatorIcon)?(cn(),vn(fn(Ee),{key:0,class:dn(fn(i).e("separator"))},{default:mn((()=>[(cn(),vn(Bn(fn(n).separatorIcon)))])),_:1},8,["class"])):(cn(),un("span",{key:1,class:dn(fn(i).e("separator")),role:"presentation"},yn(null==(r=fn(n))?void 0:r.separator),3))],2)}}})),[["__file","breadcrumb-item.vue"]]);const yd=Ie(pd,{BreadcrumbItem:Bd}),Cd=_e(Bd);var wd={exports:{}};wd.exports=function(){var e=1e3,t=6e4,A=36e5,n="millisecond",i="second",r="minute",o="hour",s="day",a="week",l="month",c="quarter",u="year",h="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],A=e%100;return"["+e+(t[(A-20)%10]||t[A]||t[0])+"]"}},v=function(e,t,A){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(A)+e},m={s:v,z:function(e){var t=-e.utcOffset(),A=Math.abs(t),n=Math.floor(A/60),i=A%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,A){if(t.date()<A.date())return-e(A,t);var n=12*(A.year()-t.year())+(A.month()-t.month()),i=t.clone().add(n,l),r=A-i<0,o=t.clone().add(n+(r?-1:1),l);return+(-(n+(A-i)/(r?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:a,d:s,D:h,h:o,m:r,s:i,ms:n,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},B="en",y={};y[B]=p;var C="$isDayjsObject",w=function(e){return e instanceof E||!(!e||!e[C])},b=function e(t,A,n){var i;if(!t)return B;if("string"==typeof t){var r=t.toLowerCase();y[r]&&(i=r),A&&(y[r]=A,i=r);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var s=t.name;y[s]=t,i=s}return!n&&i&&(B=i),i||!n&&B},x=function(e,t){if(w(e))return e.clone();var A="object"==typeof t?t:{};return A.date=e,A.args=arguments,new E(A)},Q=m;Q.l=b,Q.i=w,Q.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var E=function(){function p(e){this.$L=b(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[C]=!0}var v=p.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,A=e.utc;if(null===t)return new Date(NaN);if(Q.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(f);if(n){var i=n[2]-1||0,r=(n[7]||"0").substring(0,3);return A?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return Q},v.isValid=function(){return!(this.$d.toString()===d)},v.isSame=function(e,t){var A=x(e);return this.startOf(t)<=A&&A<=this.endOf(t)},v.isAfter=function(e,t){return x(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<x(e)},v.$g=function(e,t,A){return Q.u(e)?this[t]:this.set(A,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var A=this,n=!!Q.u(t)||t,c=Q.p(e),d=function(e,t){var i=Q.w(A.$u?Date.UTC(A.$y,t,e):new Date(A.$y,t,e),A);return n?i:i.endOf(s)},f=function(e,t){return Q.w(A.toDate()[e].apply(A.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),A)},g=this.$W,p=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(c){case u:return n?d(1,0):d(31,11);case l:return n?d(1,p):d(0,p+1);case a:var B=this.$locale().weekStart||0,y=(g<B?g+7:g)-B;return d(n?v-y:v+(6-y),p);case s:case h:return f(m+"Hours",0);case o:return f(m+"Minutes",1);case r:return f(m+"Seconds",2);case i:return f(m+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var A,a=Q.p(e),c="set"+(this.$u?"UTC":""),d=(A={},A[s]=c+"Date",A[h]=c+"Date",A[l]=c+"Month",A[u]=c+"FullYear",A[o]=c+"Hours",A[r]=c+"Minutes",A[i]=c+"Seconds",A[n]=c+"Milliseconds",A)[a],f=a===s?this.$D+(t-this.$W):t;if(a===l||a===u){var g=this.clone().set(h,1);g.$d[d](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[Q.p(e)]()},v.add=function(n,c){var h,d=this;n=Number(n);var f=Q.p(c),g=function(e){var t=x(d);return Q.w(t.date(t.date()+Math.round(e*n)),d)};if(f===l)return this.set(l,this.$M+n);if(f===u)return this.set(u,this.$y+n);if(f===s)return g(1);if(f===a)return g(7);var p=(h={},h[r]=t,h[o]=A,h[i]=e,h)[f]||1,v=this.$d.getTime()+n*p;return Q.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,A=this.$locale();if(!this.isValid())return A.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=Q.z(this),r=this.$H,o=this.$m,s=this.$M,a=A.weekdays,l=A.months,c=A.meridiem,u=function(e,A,i,r){return e&&(e[A]||e(t,n))||i[A].slice(0,r)},h=function(e){return Q.s(r%12||12,e,"0")},f=c||function(e,t,A){var n=e<12?"AM":"PM";return A?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return Q.s(t.$y,4,"0");case"M":return s+1;case"MM":return Q.s(s+1,2,"0");case"MMM":return u(A.monthsShort,s,l,3);case"MMMM":return u(l,s);case"D":return t.$D;case"DD":return Q.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(A.weekdaysMin,t.$W,a,2);case"ddd":return u(A.weekdaysShort,t.$W,a,3);case"dddd":return a[t.$W];case"H":return String(r);case"HH":return Q.s(r,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(r,o,!0);case"A":return f(r,o,!1);case"m":return String(o);case"mm":return Q.s(o,2,"0");case"s":return String(t.$s);case"ss":return Q.s(t.$s,2,"0");case"SSS":return Q.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,h,d){var f,g=this,p=Q.p(h),v=x(n),m=(v.utcOffset()-this.utcOffset())*t,B=this-v,y=function(){return Q.m(g,v)};switch(p){case u:f=y()/12;break;case l:f=y();break;case c:f=y()/3;break;case a:f=(B-m)/6048e5;break;case s:f=(B-m)/864e5;break;case o:f=B/A;break;case r:f=B/t;break;case i:f=B/e;break;default:f=B}return d?f:Q.a(f)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return y[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var A=this.clone(),n=b(e,t,!0);return n&&(A.$L=n),A},v.clone=function(){return Q.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),I=E.prototype;return x.prototype=I,[["$ms",n],["$s",i],["$m",r],["$H",o],["$W",s],["$M",l],["$y",u],["$D",h]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),x.extend=function(e,t){return e.$i||(e(t,E,x),e.$i=!0),x},x.locale=b,x.isDayjs=w,x.unix=function(e){return x(1e3*e)},x.en=y[B],x.Ls=y,x.p={},x}();const bd=bn(wd.exports),xd=new Map;let Qd;function Ed(e,t){let A=[];return Array.isArray(t.arg)?A=t.arg:Se(t.arg)&&A.push(t.arg),function(n,i){const r=t.instance.popperRef,o=n.target,s=null==i?void 0:i.target,a=!t||!t.instance,l=!o||!s,c=e.contains(o)||e.contains(s),u=e===o,h=A.length&&A.some((e=>null==e?void 0:e.contains(o)))||A.length&&A.includes(s),d=r&&(r.contains(o)||r.contains(s));a||l||c||u||h||d||t.value(n,i)}}Be&&(document.addEventListener("mousedown",(e=>Qd=e)),document.addEventListener("mouseup",(e=>{for(const t of xd.values())for(const{documentHandler:A}of t)A(e,Qd)})));const Id={beforeMount(e,t){xd.has(e)||xd.set(e,[]),xd.get(e).push({documentHandler:Ed(e,t),bindingFn:t.value})},updated(e,t){xd.has(e)||xd.set(e,[]);const A=xd.get(e),n=A.findIndex((e=>e.bindingFn===t.oldValue)),i={documentHandler:Ed(e,t),bindingFn:t.value};n>=0?A.splice(n,1,i):A.push(i)},unmounted(e){xd.delete(e)}},_d=100,Sd=600,Fd={beforeMount(e,t){const A=t.value,{interval:n=_d,delay:i=Sd}=xn(A)?{}:A;let r,o;const s=()=>xn(A)?A():A.handler(),a=()=>{o&&(clearTimeout(o),o=void 0),r&&(clearInterval(r),r=void 0)};e.addEventListener("mousedown",(e=>{0===e.button&&(a(),s(),document.addEventListener("mouseup",(()=>a()),{once:!0}),o=setTimeout((()=>{r=setInterval((()=>{s()}),n)}),i))}))}},kd=a({modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Fe,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},ke(["ariaControls"])),Ud={[Ue]:e=>Qn(e)||Oe(e)||De(e),change:e=>Qn(e)||Oe(e)||De(e)},Od=Symbol("checkboxGroupContextKey"),Dd=(e,{model:t,isLimitExceeded:A,hasOwnLabel:n,isDisabled:i,isLabeledByFormItem:r})=>{const o=gn(Od,void 0),{formItem:s}=Le(),{emit:a}=Cn();function l(t){var A,n,i,r;return[!0,e.trueValue,e.trueLabel].includes(t)?null==(n=null!=(A=e.trueValue)?A:e.trueLabel)||n:null!=(r=null!=(i=e.falseValue)?i:e.falseLabel)&&r}const c=En((()=>(null==o?void 0:o.validateEvent)||e.validateEvent));return In((()=>e.modelValue),(()=>{c.value&&(null==s||s.validate("change").catch((e=>He())))})),{handleChange:function(e){if(A.value)return;const t=e.target;a("change",l(t.checked),e)},onClickRoot:function(o){return u(this,null,(function*(){if(!A.value&&!n.value&&!i.value&&r.value){o.composedPath().some((e=>"LABEL"===e.tagName))||(t.value=l([!1,e.falseValue,e.falseLabel].includes(t.value)),yield _n(),function(e,t){a("change",l(e),t)}(t.value,o))}}))}}},Td=(e,t)=>{const{formItem:A}=Le(),{model:n,isGroup:i,isLimitExceeded:r}=(e=>{const t=sn(!1),{emit:A}=Cn(),n=gn(Od,void 0),i=En((()=>!1===Te(n))),r=sn(!1),o=En({get(){var A,r;return i.value?null==(A=null==n?void 0:n.modelValue)?void 0:A.value:null!=(r=e.modelValue)?r:t.value},set(e){var s,a;i.value&&Sn(e)?(r.value=void 0!==(null==(s=null==n?void 0:n.max)?void 0:s.value)&&e.length>(null==n?void 0:n.max.value)&&e.length>o.value.length,!1===r.value&&(null==(a=null==n?void 0:n.changeEvent)||a.call(n,e))):(A(Ue,e),t.value=e)}});return{model:o,isGroup:i,isLimitExceeded:r}})(e),{isFocused:o,isChecked:s,checkboxButtonSize:a,checkboxSize:l,hasOwnLabel:c,actualValue:u}=((e,t,{model:A})=>{const n=gn(Od,void 0),i=sn(!1),r=En((()=>Pe(e.value)?e.label:e.value)),o=En((()=>{const t=A.value;return De(t)?t:Sn(t)?Fn(r.value)?t.map(kn).some((e=>Vl(e,r.value))):t.map(kn).includes(r.value):null!=t?t===e.trueValue||t===e.trueLabel:!!t}));return{checkboxButtonSize:Re(En((()=>{var e;return null==(e=null==n?void 0:n.size)?void 0:e.value})),{prop:!0}),isChecked:o,isFocused:i,checkboxSize:Re(En((()=>{var e;return null==(e=null==n?void 0:n.size)?void 0:e.value}))),hasOwnLabel:En((()=>!!t.default||!Pe(r.value))),actualValue:r}})(e,t,{model:n}),{isDisabled:h}=(({model:e,isChecked:t})=>{const A=gn(Od,void 0),n=En((()=>{var n,i;const r=null==(n=null==A?void 0:A.max)?void 0:n.value,o=null==(i=null==A?void 0:A.min)?void 0:i.value;return!Te(r)&&e.value.length>=r&&!t.value||!Te(o)&&e.value.length<=o&&t.value}));return{isDisabled:Me(En((()=>(null==A?void 0:A.disabled.value)||n.value))),isLimitDisabled:n}})({model:n,isChecked:s}),{inputId:d,isLabeledByFormItem:f}=Ne(e,{formItemContext:A,disableIdGeneration:c,disableIdManagement:i}),{handleChange:g,onClickRoot:p}=Dd(e,{model:n,isLimitExceeded:r,hasOwnLabel:c,isDisabled:h,isLabeledByFormItem:f});var v,m;return e.checked&&(Sn(n.value)&&!n.value.includes(u.value)?n.value.push(u.value):n.value=null==(m=null!=(v=e.trueValue)?v:e.trueLabel)||m),je({from:"controls",replacement:"aria-controls",version:"2.8.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},En((()=>!!e.controls))),je({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},En((()=>i.value&&Pe(e.value)))),je({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},En((()=>!!e.trueLabel))),je({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},En((()=>!!e.falseLabel))),{inputId:d,isLabeledByFormItem:f,isChecked:s,isDisabled:h,isFocused:o,checkboxButtonSize:a,checkboxSize:l,hasOwnLabel:c,model:n,actualValue:u,handleChange:g,onClickRoot:p}},Md=["id","indeterminate","name","tabindex","disabled","true-value","false-value"],Ld=["id","indeterminate","disabled","value","name","tabindex"],Hd=on({name:"ElCheckbox"});var Pd=xe(on(l(a({},Hd),{props:kd,emits:Ud,setup(e){const t=e,A=Un(),{inputId:n,isLabeledByFormItem:i,isChecked:r,isDisabled:o,isFocused:s,checkboxSize:a,hasOwnLabel:l,model:c,actualValue:u,handleChange:h,onClickRoot:d}=Td(t,A),f=be("checkbox"),g=En((()=>[f.b(),f.m(a.value),f.is("disabled",o.value),f.is("bordered",t.border),f.is("checked",r.value)])),p=En((()=>[f.e("input"),f.is("disabled",o.value),f.is("checked",r.value),f.is("indeterminate",t.indeterminate),f.is("focus",s.value)]));return(e,t)=>(cn(),vn(Bn(!fn(l)&&fn(i)?"span":"label"),{class:dn(fn(g)),"aria-controls":e.indeterminate?e.controls||e.ariaControls:null,onClick:fn(d)},{default:mn((()=>{var A,i;return[pn("span",{class:dn(fn(p))},[e.trueValue||e.falseValue||e.trueLabel||e.falseLabel?On((cn(),un("input",{key:0,id:fn(n),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(c)?c.value=e:null),class:dn(fn(f).e("original")),type:"checkbox",indeterminate:e.indeterminate,name:e.name,tabindex:e.tabindex,disabled:fn(o),"true-value":null!=(A=e.trueValue)?A:e.trueLabel,"false-value":null!=(i=e.falseValue)?i:e.falseLabel,onChange:t[1]||(t[1]=(...e)=>fn(h)&&fn(h)(...e)),onFocus:t[2]||(t[2]=e=>s.value=!0),onBlur:t[3]||(t[3]=e=>s.value=!1),onClick:t[4]||(t[4]=Tn((()=>{}),["stop"]))},null,42,Md)),[[Mn,fn(c)]]):On((cn(),un("input",{key:1,id:fn(n),"onUpdate:modelValue":t[5]||(t[5]=e=>Dn(c)?c.value=e:null),class:dn(fn(f).e("original")),type:"checkbox",indeterminate:e.indeterminate,disabled:fn(o),value:fn(u),name:e.name,tabindex:e.tabindex,onChange:t[6]||(t[6]=(...e)=>fn(h)&&fn(h)(...e)),onFocus:t[7]||(t[7]=e=>s.value=!0),onBlur:t[8]||(t[8]=e=>s.value=!1),onClick:t[9]||(t[9]=Tn((()=>{}),["stop"]))},null,42,Ld)),[[Mn,fn(c)]]),pn("span",{class:dn(fn(f).e("inner"))},null,2)],2),fn(l)?(cn(),un("span",{key:0,class:dn(fn(f).e("label"))},[hn(e.$slots,"default"),e.$slots.default?Pn("v-if",!0):(cn(),un(Ln,{key:0},[Hn(yn(e.label),1)],64))],2)):Pn("v-if",!0)]})),_:3},8,["class","aria-controls","onClick"]))}})),[["__file","checkbox.vue"]]);const Rd=["name","tabindex","disabled","true-value","false-value"],Nd=["name","tabindex","disabled","value"],jd=on({name:"ElCheckboxButton"});var Vd=xe(on(l(a({},jd),{props:kd,emits:Ud,setup(e){const t=e,A=Un(),{isFocused:n,isChecked:i,isDisabled:r,checkboxButtonSize:o,model:s,actualValue:a,handleChange:l}=Td(t,A),c=gn(Od,void 0),u=be("checkbox"),h=En((()=>{var e,t,A,n;const i=null!=(t=null==(e=null==c?void 0:c.fill)?void 0:e.value)?t:"";return{backgroundColor:i,borderColor:i,color:null!=(n=null==(A=null==c?void 0:c.textColor)?void 0:A.value)?n:"",boxShadow:i?`-1px 0 0 0 ${i}`:void 0}})),d=En((()=>[u.b("button"),u.bm("button",o.value),u.is("disabled",r.value),u.is("checked",i.value),u.is("focus",n.value)]));return(e,t)=>{var A,o;return cn(),un("label",{class:dn(fn(d))},[e.trueValue||e.falseValue||e.trueLabel||e.falseLabel?On((cn(),un("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(s)?s.value=e:null),class:dn(fn(u).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:fn(r),"true-value":null!=(A=e.trueValue)?A:e.trueLabel,"false-value":null!=(o=e.falseValue)?o:e.falseLabel,onChange:t[1]||(t[1]=(...e)=>fn(l)&&fn(l)(...e)),onFocus:t[2]||(t[2]=e=>n.value=!0),onBlur:t[3]||(t[3]=e=>n.value=!1),onClick:t[4]||(t[4]=Tn((()=>{}),["stop"]))},null,42,Rd)),[[Mn,fn(s)]]):On((cn(),un("input",{key:1,"onUpdate:modelValue":t[5]||(t[5]=e=>Dn(s)?s.value=e:null),class:dn(fn(u).be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:fn(r),value:fn(a),onChange:t[6]||(t[6]=(...e)=>fn(l)&&fn(l)(...e)),onFocus:t[7]||(t[7]=e=>n.value=!0),onBlur:t[8]||(t[8]=e=>n.value=!1),onClick:t[9]||(t[9]=Tn((()=>{}),["stop"]))},null,42,Nd)),[[Mn,fn(s)]]),e.$slots.default||e.label?(cn(),un("span",{key:2,class:dn(fn(u).be("button","inner")),style:Rn(fn(i)?fn(h):void 0)},[hn(e.$slots,"default",{},(()=>[Hn(yn(e.label),1)]))],6)):Pn("v-if",!0)],2)}}})),[["__file","checkbox-button.vue"]]);const Kd=ye(a({modelValue:{type:Qe(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Fe,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}},ke(["ariaLabel"]))),Gd={[Ue]:e=>Sn(e),change:e=>Sn(e)},Yd=on({name:"ElCheckboxGroup"});var Xd=xe(on(l(a({},Yd),{props:Kd,emits:Gd,setup(e,{emit:t}){const A=e,n=be("checkbox"),{formItem:i}=Le(),{inputId:r,isLabeledByFormItem:o}=Ne(A,{formItemContext:i}),s=e=>u(this,null,(function*(){t(Ue,e),yield _n(),t("change",e)})),c=En({get:()=>A.modelValue,set(e){s(e)}});return an(Od,l(a({},ve(Nn(A),["size","min","max","disabled","validateEvent","fill","textColor"])),{modelValue:c,changeEvent:s})),je({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-checkbox-group",ref:"https://element-plus.org/en-US/component/checkbox.html"},En((()=>!!A.label))),In((()=>A.modelValue),(()=>{A.validateEvent&&(null==i||i.validate("change").catch((e=>He())))})),(e,t)=>{var A;return cn(),vn(Bn(e.tag),{id:fn(r),class:dn(fn(n).b("group")),role:"group","aria-label":fn(o)?void 0:e.label||e.ariaLabel||"checkbox-group","aria-labelledby":fn(o)?null==(A=fn(i))?void 0:A.labelId:void 0},{default:mn((()=>[hn(e.$slots,"default")])),_:3},8,["id","class","aria-label","aria-labelledby"])}}})),[["__file","checkbox-group.vue"]]);const zd=Ie(Pd,{CheckboxButton:Vd,CheckboxGroup:Xd});_e(Vd),_e(Xd);const Wd=ye({modelValue:{type:[String,Number,Boolean],default:void 0},size:Fe,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),$d=ye(l(a({},Wd),{border:Boolean})),Jd={[Ue]:e=>Qn(e)||Oe(e)||De(e),[Ve]:e=>Qn(e)||Oe(e)||De(e)},qd=Symbol("radioGroupKey"),Zd=(e,t)=>{const A=sn(),n=gn(qd,void 0),i=En((()=>!!n)),r=En((()=>Pe(e.value)?e.label:e.value)),o=En({get:()=>i.value?n.modelValue:e.modelValue,set(o){i.value?n.changeEvent(o):t&&t(Ue,o),A.value.checked=e.modelValue===r.value}}),s=Re(En((()=>null==n?void 0:n.size))),a=Me(En((()=>null==n?void 0:n.disabled))),l=sn(!1),c=En((()=>a.value||i.value&&o.value!==r.value?-1:0));return je({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},En((()=>i.value&&Pe(e.value)))),{radioRef:A,isGroup:i,radioGroup:n,focus:l,size:s,disabled:a,tabIndex:c,modelValue:o,actualValue:r}},ef=["value","name","disabled"],tf=on({name:"ElRadio"});var Af=xe(on(l(a({},tf),{props:$d,emits:Jd,setup(e,{emit:t}){const A=e,n=be("radio"),{radioRef:i,radioGroup:r,focus:o,size:s,disabled:a,modelValue:l,actualValue:c}=Zd(A,t);function u(){_n((()=>t("change",l.value)))}return(e,t)=>{var A;return cn(),un("label",{class:dn([fn(n).b(),fn(n).is("disabled",fn(a)),fn(n).is("focus",fn(o)),fn(n).is("bordered",e.border),fn(n).is("checked",fn(l)===fn(c)),fn(n).m(fn(s))])},[pn("span",{class:dn([fn(n).e("input"),fn(n).is("disabled",fn(a)),fn(n).is("checked",fn(l)===fn(c))])},[On(pn("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(l)?l.value=e:null),class:dn(fn(n).e("original")),value:fn(c),name:e.name||(null==(A=fn(r))?void 0:A.name),disabled:fn(a),type:"radio",onFocus:t[1]||(t[1]=e=>o.value=!0),onBlur:t[2]||(t[2]=e=>o.value=!1),onChange:u,onClick:t[3]||(t[3]=Tn((()=>{}),["stop"]))},null,42,ef),[[jn,fn(l)]]),pn("span",{class:dn(fn(n).e("inner"))},null,2)],2),pn("span",{class:dn(fn(n).e("label")),onKeydown:t[4]||(t[4]=Tn((()=>{}),["stop"]))},[hn(e.$slots,"default",{},(()=>[Hn(yn(e.label),1)]))],34)],2)}}})),[["__file","radio.vue"]]);const nf=ye(a({},Wd)),rf=["value","name","disabled"],of=on({name:"ElRadioButton"});var sf=xe(on(l(a({},of),{props:nf,setup(e){const t=e,A=be("radio"),{radioRef:n,focus:i,size:r,disabled:o,modelValue:s,radioGroup:a,actualValue:l}=Zd(t),c=En((()=>({backgroundColor:(null==a?void 0:a.fill)||"",borderColor:(null==a?void 0:a.fill)||"",boxShadow:(null==a?void 0:a.fill)?`-1px 0 0 0 ${a.fill}`:"",color:(null==a?void 0:a.textColor)||""})));return(e,t)=>{var u;return cn(),un("label",{class:dn([fn(A).b("button"),fn(A).is("active",fn(s)===fn(l)),fn(A).is("disabled",fn(o)),fn(A).is("focus",fn(i)),fn(A).bm("button",fn(r))])},[On(pn("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(s)?s.value=e:null),class:dn(fn(A).be("button","original-radio")),value:fn(l),type:"radio",name:e.name||(null==(u=fn(a))?void 0:u.name),disabled:fn(o),onFocus:t[1]||(t[1]=e=>i.value=!0),onBlur:t[2]||(t[2]=e=>i.value=!1),onClick:t[3]||(t[3]=Tn((()=>{}),["stop"]))},null,42,rf),[[jn,fn(s)]]),pn("span",{class:dn(fn(A).be("button","inner")),style:Rn(fn(s)===fn(l)?fn(c):{}),onKeydown:t[4]||(t[4]=Tn((()=>{}),["stop"]))},[hn(e.$slots,"default",{},(()=>[Hn(yn(e.label),1)]))],38)],2)}}})),[["__file","radio-button.vue"]]);const af=ye(a({id:{type:String,default:void 0},size:Fe,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}},ke(["ariaLabel"]))),lf=Jd,cf=["id","aria-label","aria-labelledby"],uf=on({name:"ElRadioGroup"}),hf=on(l(a({},uf),{props:af,emits:lf,setup(e,{emit:t}){const A=e,n=be("radio"),i=Ke(),r=sn(),{formItem:o}=Le(),{inputId:s,isLabeledByFormItem:c}=Ne(A,{formItemContext:o});ln((()=>{const e=r.value.querySelectorAll("[type=radio]"),t=e[0];!Array.from(e).some((e=>e.checked))&&t&&(t.tabIndex=0)}));const u=En((()=>A.name||i.value));return an(qd,Vn(l(a({},Nn(A)),{changeEvent:e=>{t(Ue,e),_n((()=>t("change",e)))},name:u}))),In((()=>A.modelValue),(()=>{A.validateEvent&&(null==o||o.validate("change").catch((e=>He())))})),je({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-radio-group",ref:"https://element-plus.org/en-US/component/radio.html"},En((()=>!!A.label))),(e,t)=>(cn(),un("div",{id:fn(s),ref_key:"radioGroupRef",ref:r,class:dn(fn(n).b("group")),role:"radiogroup","aria-label":fn(c)?void 0:e.label||e.ariaLabel||"radio-group","aria-labelledby":fn(c)?fn(o).labelId:void 0},[hn(e.$slots,"default")],10,cf))}}));var df=xe(hf,[["__file","radio-group.vue"]]);const ff=Ie(Af,{RadioButton:sf,RadioGroup:df}),gf=_e(df),pf=_e(sf),vf=ye({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Ge},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),mf={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},Bf=on({name:"ElTag"});const yf=Ie(xe(on(l(a({},Bf),{props:vf,emits:mf,setup(e,{emit:t}){const A=e,n=Re(),i=be("tag"),r=En((()=>{const{type:e,hit:t,effect:r,closable:o,round:s}=A;return[i.b(),i.is("closable",o),i.m(e||"primary"),i.m(n.value),i.m(r),i.is("hit",t),i.is("round",s)]})),o=e=>{t("close",e)},s=e=>{t("click",e)};return(e,t)=>e.disableTransitions?(cn(),un("span",{key:0,class:dn(fn(r)),style:Rn({backgroundColor:e.color}),onClick:s},[pn("span",{class:dn(fn(i).e("content"))},[hn(e.$slots,"default")],2),e.closable?(cn(),vn(fn(Ee),{key:0,class:dn(fn(i).e("close")),onClick:Tn(o,["stop"])},{default:mn((()=>[Kn(fn(Ye))])),_:1},8,["class","onClick"])):Pn("v-if",!0)],6)):(cn(),vn(Gn,{key:1,name:`${fn(i).namespace.value}-zoom-in-center`,appear:""},{default:mn((()=>[pn("span",{class:dn(fn(r)),style:Rn({backgroundColor:e.color}),onClick:s},[pn("span",{class:dn(fn(i).e("content"))},[hn(e.$slots,"default")],2),e.closable?(cn(),vn(fn(Ee),{key:0,class:dn(fn(i).e("close")),onClick:Tn(o,["stop"])},{default:mn((()=>[Kn(fn(Ye))])),_:1},8,["class","onClick"])):Pn("v-if",!0)],6)])),_:3},8,["name"]))}})),[["__file","tag.vue"]])),Cf=Symbol("rowContextKey"),wf=ye({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between","space-evenly"],default:"start"},align:{type:String,values:["top","middle","bottom"]}}),bf=on({name:"ElRow"});const xf=Ie(xe(on(l(a({},bf),{props:wf,setup(e){const t=e,A=be("row"),n=En((()=>t.gutter));an(Cf,{gutter:n});const i=En((()=>{const e={};return t.gutter?(e.marginRight=e.marginLeft=`-${t.gutter/2}px`,e):e})),r=En((()=>[A.b(),A.is(`justify-${t.justify}`,"start"!==t.justify),A.is(`align-${t.align}`,!!t.align)]));return(e,t)=>(cn(),vn(Bn(e.tag),{class:dn(fn(r)),style:Rn(fn(i))},{default:mn((()=>[hn(e.$slots,"default")])),_:3},8,["class","style"]))}})),[["__file","row.vue"]])),Qf=ye({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Qe([Number,Object]),default:()=>Xe({})},sm:{type:Qe([Number,Object]),default:()=>Xe({})},md:{type:Qe([Number,Object]),default:()=>Xe({})},lg:{type:Qe([Number,Object]),default:()=>Xe({})},xl:{type:Qe([Number,Object]),default:()=>Xe({})}}),Ef=on({name:"ElCol"});const If=Ie(xe(on(l(a({},Ef),{props:Qf,setup(e){const t=e,{gutter:A}=gn(Cf,{gutter:En((()=>0))}),n=be("col"),i=En((()=>{const e={};return A.value&&(e.paddingLeft=e.paddingRight=A.value/2+"px"),e})),r=En((()=>{const e=[];["span","offset","pull","push"].forEach((A=>{const i=t[A];Oe(i)&&("span"===A?e.push(n.b(`${t[A]}`)):i>0&&e.push(n.b(`${A}-${t[A]}`)))}));return["xs","sm","md","lg","xl"].forEach((A=>{Oe(t[A])?e.push(n.b(`${A}-${t[A]}`)):Fn(t[A])&&Object.entries(t[A]).forEach((([t,i])=>{e.push("span"!==t?n.b(`${A}-${t}-${i}`):n.b(`${A}-${i}`))}))})),A.value&&e.push(n.is("guttered")),[n.b(),e]}));return(e,t)=>(cn(),vn(Bn(e.tag),{class:dn(fn(r)),style:Rn(fn(i))},{default:mn((()=>[hn(e.$slots,"default")])),_:3},8,["class","style"]))}})),[["__file","col.vue"]])),_f=e=>Oe(e)||Qn(e)||Sn(e),Sf=ye({accordion:Boolean,modelValue:{type:Qe([Array,String,Number]),default:()=>Xe([])}}),Ff={[Ue]:_f,[Ve]:_f},kf=Symbol("collapseContextKey"),Uf=on({name:"ElCollapse"}),Of=on(l(a({},Uf),{props:Sf,emits:Ff,setup(e,{expose:t,emit:A}){const n=e,{activeNames:i,setActiveNames:r}=((e,t)=>{const A=sn(ce(e.modelValue)),n=n=>{A.value=n;const i=e.accordion?A.value[0]:A.value;t(Ue,i),t(Ve,i)};return In((()=>e.modelValue),(()=>A.value=ce(e.modelValue)),{deep:!0}),an(kf,{activeNames:A,handleItemClick:t=>{if(e.accordion)n([A.value[0]===t?"":t]);else{const e=[...A.value],i=e.indexOf(t);i>-1?e.splice(i,1):e.push(t),n(e)}}}),{activeNames:A,setActiveNames:n}})(n,A),{rootKls:o}=(()=>{const e=be("collapse");return{rootKls:En((()=>e.b()))}})();return t({activeNames:i,setActiveNames:r}),(e,t)=>(cn(),un("div",{class:dn(fn(o))},[hn(e.$slots,"default")],2))}}));var Df=xe(Of,[["__file","collapse.vue"]]);const Tf=on({name:"ElCollapseTransition"});var Mf=xe(on(l(a({},Tf),{setup(e){const t=be("collapse-transition"),A=e=>{e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},n={beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame((()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:0!==e.scrollHeight?e.style.maxHeight=`${e.scrollHeight}px`:e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow="hidden"}))},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){A(e)},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){0!==e.scrollHeight&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){A(e)},leaveCancelled(e){A(e)}};return(e,A)=>(cn(),vn(Gn,Yn({name:fn(t).b()},Xn(n)),{default:mn((()=>[hn(e.$slots,"default")])),_:3},16,["name"]))}})),[["__file","collapse-transition.vue"]]);Mf.install=e=>{e.component(Mf.name,Mf)};const Lf=Mf,Hf=ye({title:{type:String,default:""},name:{type:Qe([String,Number]),default:void 0},disabled:Boolean}),Pf=["id","aria-expanded","aria-controls","aria-describedby","tabindex"],Rf=["id","aria-hidden","aria-labelledby"],Nf=on({name:"ElCollapseItem"}),jf=on(l(a({},Nf),{props:Hf,setup(e,{expose:t}){const A=e,{focusing:n,id:i,isActive:r,handleFocus:o,handleHeaderClick:s,handleEnterClick:a}=(e=>{const t=gn(kf),{namespace:A}=be("collapse"),n=sn(!1),i=sn(!1),r=ze(),o=En((()=>r.current++)),s=En((()=>{var t;return null!=(t=e.name)?t:`${A.value}-id-${r.prefix}-${fn(o)}`})),a=En((()=>null==t?void 0:t.activeNames.value.includes(fn(s))));return{focusing:n,id:o,isActive:a,handleFocus:()=>{setTimeout((()=>{i.value?i.value=!1:n.value=!0}),50)},handleHeaderClick:()=>{e.disabled||(null==t||t.handleItemClick(fn(s)),n.value=!1,i.value=!0)},handleEnterClick:()=>{null==t||t.handleItemClick(fn(s))}}})(A),{arrowKls:l,headKls:c,rootKls:u,itemWrapperKls:h,itemContentKls:d,scopedContentId:f,scopedHeadId:g}=((e,{focusing:t,isActive:A,id:n})=>{const i=be("collapse"),r=En((()=>[i.b("item"),i.is("active",fn(A)),i.is("disabled",e.disabled)])),o=En((()=>[i.be("item","header"),i.is("active",fn(A)),{focusing:fn(t)&&!e.disabled}]));return{arrowKls:En((()=>[i.be("item","arrow"),i.is("active",fn(A))])),headKls:o,rootKls:r,itemWrapperKls:En((()=>i.be("item","wrap"))),itemContentKls:En((()=>i.be("item","content"))),scopedContentId:En((()=>i.b(`content-${fn(n)}`))),scopedHeadId:En((()=>i.b(`head-${fn(n)}`)))}})(A,{focusing:n,isActive:r,id:i});return t({isActive:r}),(e,t)=>(cn(),un("div",{class:dn(fn(u))},[pn("button",{id:fn(g),class:dn(fn(c)),"aria-expanded":fn(r),"aria-controls":fn(f),"aria-describedby":fn(f),tabindex:e.disabled?-1:0,type:"button",onClick:t[0]||(t[0]=(...e)=>fn(s)&&fn(s)(...e)),onKeydown:t[1]||(t[1]=zn(Tn(((...e)=>fn(a)&&fn(a)(...e)),["stop","prevent"]),["space","enter"])),onFocus:t[2]||(t[2]=(...e)=>fn(o)&&fn(o)(...e)),onBlur:t[3]||(t[3]=e=>n.value=!1)},[hn(e.$slots,"title",{},(()=>[Hn(yn(e.title),1)])),Kn(fn(Ee),{class:dn(fn(l))},{default:mn((()=>[Kn(fn(We))])),_:1},8,["class"])],42,Pf),Kn(fn(Lf),null,{default:mn((()=>[On(pn("div",{id:fn(f),role:"region",class:dn(fn(h)),"aria-hidden":!fn(r),"aria-labelledby":fn(g)},[pn("div",{class:dn(fn(d))},[hn(e.$slots,"default")],2)],10,Rf),[[Wn,fn(r)]])])),_:3})],2))}}));var Vf=xe(jf,[["__file","collapse-item.vue"]]);const Kf=Ie(Df,{CollapseItem:Vf}),Gf=_e(Vf),Yf=ye({color:{type:Qe(Object),required:!0},vertical:{type:Boolean,default:!1}});let Xf=!1;function zf(e,t){if(!Be)return;const A=function(e){var A;null==(A=t.drag)||A.call(t,e)},n=function(e){var i;document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",n),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",n),document.onselectstart=null,document.ondragstart=null,Xf=!1,null==(i=t.end)||i.call(t,e)},i=function(e){var i;Xf||(e.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",A),document.addEventListener("mouseup",n),document.addEventListener("touchmove",A),document.addEventListener("touchend",n),Xf=!0,null==(i=t.start)||i.call(t,e))};e.addEventListener("mousedown",i),e.addEventListener("touchstart",i)}const Wf=(e,{bar:t,thumb:A,handleDrag:n})=>{const i=Cn(),r=be("color-alpha-slider"),o=sn(0),s=sn(0),a=sn();function l(){o.value=function(){if(!A.value)return 0;if(e.vertical)return 0;const t=i.vnode.el,n=e.color.get("alpha");return t?Math.round(n*(t.offsetWidth-A.value.offsetWidth/2)/100):0}(),s.value=function(){if(!A.value)return 0;const t=i.vnode.el;if(!e.vertical)return 0;const n=e.color.get("alpha");return t?Math.round(n*(t.offsetHeight-A.value.offsetHeight/2)/100):0}(),a.value=function(){if(e.color&&e.color.value){const{r:t,g:A,b:n}=e.color.toRgb();return`linear-gradient(to right, rgba(${t}, ${A}, ${n}, 0) 0%, rgba(${t}, ${A}, ${n}, 1) 100%)`}return""}()}ln((()=>{if(!t.value||!A.value)return;const e={drag:e=>{n(e)},end:e=>{n(e)}};zf(t.value,e),zf(A.value,e),l()})),In((()=>e.color.get("alpha")),(()=>l())),In((()=>e.color.value),(()=>l()));const c=En((()=>[r.b(),r.is("vertical",e.vertical)])),u=En((()=>r.e("bar"))),h=En((()=>r.e("thumb")));return{rootKls:c,barKls:u,barStyle:En((()=>({background:a.value}))),thumbKls:h,thumbStyle:En((()=>({left:$e(o.value),top:$e(s.value)}))),update:l}},$f=on({name:"ElColorAlphaSlider"});var Jf=xe(on(l(a({},$f),{props:Yf,setup(e,{expose:t}){const A=e,{bar:n,thumb:i,handleDrag:r,handleClick:o}=(e=>{const t=Cn(),A=$n(),n=$n();function i(i){if(!n.value||!A.value)return;const r=t.vnode.el.getBoundingClientRect(),{clientX:o,clientY:s}=ud(i);if(e.vertical){let t=s-r.top;t=Math.max(A.value.offsetHeight/2,t),t=Math.min(t,r.height-A.value.offsetHeight/2),e.color.set("alpha",Math.round((t-A.value.offsetHeight/2)/(r.height-A.value.offsetHeight)*100))}else{let t=o-r.left;t=Math.max(A.value.offsetWidth/2,t),t=Math.min(t,r.width-A.value.offsetWidth/2),e.color.set("alpha",Math.round((t-A.value.offsetWidth/2)/(r.width-A.value.offsetWidth)*100))}}return{thumb:A,bar:n,handleDrag:i,handleClick:function(e){e.target!==A.value&&i(e)}}})(A),{rootKls:s,barKls:a,barStyle:l,thumbKls:c,thumbStyle:u,update:h}=Wf(A,{bar:n,thumb:i,handleDrag:r});return t({update:h,bar:n,thumb:i}),(e,t)=>(cn(),un("div",{class:dn(fn(s))},[pn("div",{ref_key:"bar",ref:n,class:dn(fn(a)),style:Rn(fn(l)),onClick:t[0]||(t[0]=(...e)=>fn(o)&&fn(o)(...e))},null,6),pn("div",{ref_key:"thumb",ref:i,class:dn(fn(c)),style:Rn(fn(u))},null,6)],2))}})),[["__file","alpha-slider.vue"]]);var qf=xe(on({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=be("color-hue-slider"),A=Cn(),n=sn(),i=sn(),r=sn(0),o=sn(0),s=En((()=>e.color.get("hue")));function a(t){if(!i.value||!n.value)return;const r=A.vnode.el.getBoundingClientRect(),{clientX:o,clientY:s}=ud(t);let a;if(e.vertical){let e=s-r.top;e=Math.min(e,r.height-n.value.offsetHeight/2),e=Math.max(n.value.offsetHeight/2,e),a=Math.round((e-n.value.offsetHeight/2)/(r.height-n.value.offsetHeight)*360)}else{let e=o-r.left;e=Math.min(e,r.width-n.value.offsetWidth/2),e=Math.max(n.value.offsetWidth/2,e),a=Math.round((e-n.value.offsetWidth/2)/(r.width-n.value.offsetWidth)*360)}e.color.set("hue",a)}function l(){r.value=function(){if(!n.value)return 0;const t=A.vnode.el;if(e.vertical)return 0;const i=e.color.get("hue");return t?Math.round(i*(t.offsetWidth-n.value.offsetWidth/2)/360):0}(),o.value=function(){if(!n.value)return 0;const t=A.vnode.el;if(!e.vertical)return 0;const i=e.color.get("hue");return t?Math.round(i*(t.offsetHeight-n.value.offsetHeight/2)/360):0}()}return In((()=>s.value),(()=>{l()})),ln((()=>{if(!i.value||!n.value)return;const e={drag:e=>{a(e)},end:e=>{a(e)}};zf(i.value,e),zf(n.value,e),l()})),{bar:i,thumb:n,thumbLeft:r,thumbTop:o,hueValue:s,handleClick:function(e){e.target!==n.value&&a(e)},update:l,ns:t}}}),[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:dn([e.ns.b(),e.ns.is("vertical",e.vertical)])},[pn("div",{ref:"bar",class:dn(e.ns.e("bar")),onClick:t[0]||(t[0]=(...t)=>e.handleClick&&e.handleClick(...t))},null,2),pn("div",{ref:"thumb",class:dn(e.ns.e("thumb")),style:Rn({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}],["__file","hue-slider.vue"]]);const Zf=ye(a({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:Fe,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},teleported:Je.teleported,predefine:{type:Qe(Array)},validateEvent:{type:Boolean,default:!0}},ke(["ariaLabel"]))),eg={[Ue]:e=>Qn(e)||fe(e),[Ve]:e=>Qn(e)||fe(e),activeChange:e=>Qn(e)||fe(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent},tg=Symbol("colorPickerContextKey"),Ag=function(e,t,A){return[e,t*A/((e=(2-t)*A)<1?e:2-e)||0,e/2]},ng=function(e,t){var A;"string"==typeof(A=e)&&A.includes(".")&&1===Number.parseFloat(A)&&(e="100%");const n=function(e){return"string"==typeof e&&e.includes("%")}(e);return e=Math.min(t,Math.max(0,Number.parseFloat(`${e}`))),n&&(e=Number.parseInt(""+e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/Number.parseFloat(t)},ig={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},rg=e=>{e=Math.min(Math.round(e),255);const t=Math.floor(e/16),A=e%16;return`${ig[t]||t}${ig[A]||A}`},og=function({r:e,g:t,b:A}){return Number.isNaN(+e)||Number.isNaN(+t)||Number.isNaN(+A)?"":`#${rg(e)}${rg(t)}${rg(A)}`},sg={A:10,B:11,C:12,D:13,E:14,F:15},ag=function(e){return 2===e.length?16*(sg[e[0].toUpperCase()]||+e[0])+(sg[e[1].toUpperCase()]||+e[1]):sg[e[1].toUpperCase()]||+e[1]},lg=(e,t,A)=>{e=ng(e,255),t=ng(t,255),A=ng(A,255);const n=Math.max(e,t,A),i=Math.min(e,t,A);let r;const o=n,s=n-i,a=0===n?0:s/n;if(n===i)r=0;else{switch(n){case e:r=(t-A)/s+(t<A?6:0);break;case t:r=(A-e)/s+2;break;case A:r=(e-t)/s+4}r/=6}return{h:360*r,s:100*a,v:100*o}},cg=function(e,t,A){e=6*ng(e,360),t=ng(t,100),A=ng(A,100);const n=Math.floor(e),i=e-n,r=A*(1-t),o=A*(1-i*t),s=A*(1-(1-i)*t),a=n%6,l=[A,o,r,r,s,A][a],c=[s,A,A,o,r,r][a],u=[r,r,s,A,A,o][a];return{r:Math.round(255*l),g:Math.round(255*c),b:Math.round(255*u)}};class ug{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Jn(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=t,this.doOnChange();else for(const A in e)Jn(e,A)&&this.set(A,e[A])}get(e){return"alpha"===e?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return cg(this._hue,this._saturation,this._value)}fromString(e){if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();const t=(e,t,A)=>{this._hue=Math.max(0,Math.min(360,e)),this._saturation=Math.max(0,Math.min(100,t)),this._value=Math.max(0,Math.min(100,A)),this.doOnChange()};if(e.includes("hsl")){const A=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));if(4===A.length?this._alpha=100*Number.parseFloat(A[3]):3===A.length&&(this._alpha=100),A.length>=3){const{h:e,s:n,v:i}=function(e,t,A){A/=100;let n=t/=100;const i=Math.max(A,.01);return t*=(A*=2)<=1?A:2-A,n*=i<=1?i:2-i,{h:e,s:100*(0===A?2*n/(i+n):2*t/(A+t)),v:(A+t)/2*100}}(A[0],A[1],A[2]);t(e,n,i)}}else if(e.includes("hsv")){const A=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));4===A.length?this._alpha=100*Number.parseFloat(A[3]):3===A.length&&(this._alpha=100),A.length>=3&&t(A[0],A[1],A[2])}else if(e.includes("rgb")){const A=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((e=>""!==e)).map(((e,t)=>t>2?Number.parseFloat(e):Number.parseInt(e,10)));if(4===A.length?this._alpha=100*Number.parseFloat(A[3]):3===A.length&&(this._alpha=100),A.length>=3){const{h:e,s:n,v:i}=lg(A[0],A[1],A[2]);t(e,n,i)}}else if(e.includes("#")){const A=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(A))return;let n,i,r;3===A.length?(n=ag(A[0]+A[0]),i=ag(A[1]+A[1]),r=ag(A[2]+A[2])):6!==A.length&&8!==A.length||(n=ag(A.slice(0,2)),i=ag(A.slice(2,4)),r=ag(A.slice(4,6))),8===A.length?this._alpha=ag(A.slice(6))/255*100:3!==A.length&&6!==A.length||(this._alpha=100);const{h:o,s:s,v:a}=lg(n,i,r);t(o,s,a)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:A,_alpha:n,format:i}=this;if(this.enableAlpha)switch(i){case"hsl":{const n=Ag(e,t/100,A/100);this.value=`hsla(${e}, ${Math.round(100*n[1])}%, ${Math.round(100*n[2])}%, ${this.get("alpha")/100})`;break}case"hsv":this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(A)}%, ${this.get("alpha")/100})`;break;case"hex":this.value=`${og(cg(e,t,A))}${rg(255*n/100)}`;break;default:{const{r:n,g:i,b:r}=cg(e,t,A);this.value=`rgba(${n}, ${i}, ${r}, ${this.get("alpha")/100})`}}else switch(i){case"hsl":{const n=Ag(e,t/100,A/100);this.value=`hsl(${e}, ${Math.round(100*n[1])}%, ${Math.round(100*n[2])}%)`;break}case"hsv":this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(A)}%)`;break;case"rgb":{const{r:n,g:i,b:r}=cg(e,t,A);this.value=`rgb(${n}, ${i}, ${r})`;break}default:this.value=og(cg(e,t,A))}}}const hg=on({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(e){const t=be("color-predefine"),{currentColor:A}=gn(tg),n=sn(i(e.colors,e.color));function i(t,A){return t.map((t=>{const n=new ug;return n.enableAlpha=e.enableAlpha,n.format="rgba",n.fromString(t),n.selected=n.value===A.value,n}))}return In((()=>A.value),(e=>{const t=new ug;t.fromString(e),n.value.forEach((e=>{e.selected=t.compare(e)}))})),qn((()=>{n.value=i(e.colors,e.color)})),{rgbaColors:n,handleSelect:function(t){e.color.fromString(e.colors[t])},ns:t}}}),dg=["onClick"];var fg=xe(hg,[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:dn(e.ns.b())},[pn("div",{class:dn(e.ns.e("colors"))},[(cn(!0),un(Ln,null,Zn(e.rgbaColors,((t,A)=>(cn(),un("div",{key:e.colors[A],class:dn([e.ns.e("color-selector"),e.ns.is("alpha",t._alpha<100),{selected:t.selected}]),onClick:t=>e.handleSelect(A)},[pn("div",{style:Rn({backgroundColor:t.value})},null,4)],10,dg)))),128))],2)],2)}],["__file","predefine.vue"]]);const gg=on({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=be("color-svpanel"),A=Cn(),n=sn(0),i=sn(0),r=sn("hsl(0, 100%, 50%)"),o=En((()=>({hue:e.color.get("hue"),value:e.color.get("value")})));function s(){const t=e.color.get("saturation"),o=e.color.get("value"),s=A.vnode.el,{clientWidth:a,clientHeight:l}=s;i.value=t*a/100,n.value=(100-o)*l/100,r.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function a(t){const r=A.vnode.el.getBoundingClientRect(),{clientX:o,clientY:s}=ud(t);let a=o-r.left,l=s-r.top;a=Math.max(0,a),a=Math.min(a,r.width),l=Math.max(0,l),l=Math.min(l,r.height),i.value=a,n.value=l,e.color.set({saturation:a/r.width*100,value:100-l/r.height*100})}return In((()=>o.value),(()=>{s()})),ln((()=>{zf(A.vnode.el,{drag:e=>{a(e)},end:e=>{a(e)}}),s()})),{cursorTop:n,cursorLeft:i,background:r,colorValue:o,handleDrag:a,update:s,ns:t}}}),pg=[pn("div",null,null,-1)];var vg=xe(gg,[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:dn(e.ns.b()),style:Rn({backgroundColor:e.background})},[pn("div",{class:dn(e.ns.e("white"))},null,2),pn("div",{class:dn(e.ns.e("black"))},null,2),pn("div",{class:dn(e.ns.e("cursor")),style:Rn({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},pg,6)],6)}],["__file","sv-panel.vue"]]);const mg=["onKeydown"],Bg=["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex"],yg=on({name:"ElColorPicker"});const Cg=Ie(xe(on(l(a({},yg),{props:Zf,emits:eg,setup(e,{expose:t,emit:A}){const n=e,{t:i}=we(),r=be("color"),{formItem:o}=Le(),s=Re(),a=Me(),{inputId:l,isLabeledByFormItem:c}=Ne(n,{formItemContext:o}),u=sn(),h=sn(),d=sn(),f=sn(),g=sn(),p=sn(),{isFocused:v,handleFocus:m,handleBlur:B}=qe(g,{beforeBlur(e){var t;return null==(t=f.value)?void 0:t.isFocusInsideContent(e)},afterBlur(){k(!1),T()}}),y=e=>{if(a.value)return V();m(e)};let C=!0;const w=Vn(new ug({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue})),b=sn(!1),x=sn(!1),Q=sn(""),E=En((()=>n.modelValue||x.value?function(e,t){if(!(e instanceof ug))throw new TypeError("color should be instance of _color Class");const{r:A,g:n,b:i}=e.toRgb();return t?`rgba(${A}, ${n}, ${i}, ${e.get("alpha")/100})`:`rgb(${A}, ${n}, ${i})`}(w,n.showAlpha):"transparent")),I=En((()=>n.modelValue||x.value?w.value:"")),_=En((()=>c.value?void 0:n.label||n.ariaLabel||i("el.colorpicker.defaultLabel")));je({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-color-picker",ref:"https://element-plus.org/en-US/component/color-picker.html"},En((()=>!!n.label)));const S=En((()=>c.value?null==o?void 0:o.labelId:void 0)),F=En((()=>[r.b("picker"),r.is("disabled",a.value),r.bm("picker",s.value),r.is("focused",v.value)]));function k(e){b.value=e}const U=ae(k,100,{leading:!0});function O(){a.value||k(!0)}function D(){U(!1),T()}function T(){_n((()=>{n.modelValue?w.fromString(n.modelValue):(w.value="",_n((()=>{x.value=!1})))}))}function M(){a.value||U(!b.value)}function L(){w.fromString(Q.value)}function H(){const e=w.value;A(Ue,e),A("change",e),n.validateEvent&&(null==o||o.validate("change").catch((e=>He()))),U(!1),_n((()=>{const e=new ug({enableAlpha:n.showAlpha,format:n.colorFormat||"",value:n.modelValue});w.compare(e)||T()}))}function P(){U(!1),A(Ue,null),A("change",null),null!==n.modelValue&&n.validateEvent&&(null==o||o.validate("change").catch((e=>He()))),T()}function R(e){if(b.value&&(D(),v.value)){const t=new FocusEvent("focus",e);B(t)}}function N(e){e.preventDefault(),e.stopPropagation(),k(!1),T()}function j(e){switch(e.code){case nt.enter:case nt.space:e.preventDefault(),e.stopPropagation(),O(),p.value.focus();break;case nt.esc:N(e)}}function V(){g.value.blur()}return ln((()=>{n.modelValue&&(Q.value=I.value)})),In((()=>n.modelValue),(e=>{e?e&&e!==w.value&&(C=!1,w.fromString(e)):x.value=!1})),In((()=>I.value),(e=>{Q.value=e,C&&A("activeChange",e),C=!0})),In((()=>w.value),(()=>{n.modelValue||x.value||(x.value=!0)})),In((()=>b.value),(()=>{_n((()=>{var e,t,A;null==(e=u.value)||e.update(),null==(t=h.value)||t.update(),null==(A=d.value)||A.update()}))})),an(tg,{currentColor:I}),t({color:w,show:O,hide:D,focus:function(){g.value.focus()},blur:V}),(e,t)=>(cn(),vn(fn(At),{ref_key:"popper",ref:f,visible:b.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[fn(r).be("picker","panel"),fn(r).b("dropdown"),e.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:e.teleported,transition:`${fn(r).namespace.value}-zoom-in-top`,persistent:"",onHide:t[2]||(t[2]=e=>k(!1))},{content:mn((()=>[On((cn(),un("div",{onKeydown:zn(N,["esc"])},[pn("div",{class:dn(fn(r).be("dropdown","main-wrapper"))},[Kn(qf,{ref_key:"hue",ref:u,class:"hue-slider",color:fn(w),vertical:""},null,8,["color"]),Kn(vg,{ref_key:"sv",ref:h,color:fn(w)},null,8,["color"])],2),e.showAlpha?(cn(),vn(Jf,{key:0,ref_key:"alpha",ref:d,color:fn(w)},null,8,["color"])):Pn("v-if",!0),e.predefine?(cn(),vn(fg,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:fn(w),colors:e.predefine},null,8,["enable-alpha","color","colors"])):Pn("v-if",!0),pn("div",{class:dn(fn(r).be("dropdown","btns"))},[pn("span",{class:dn(fn(r).be("dropdown","value"))},[Kn(fn(Ze),{ref_key:"inputRef",ref:p,modelValue:Q.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Q.value=e),"validate-event":!1,size:"small",onKeyup:zn(L,["enter"]),onBlur:L},null,8,["modelValue","onKeyup"])],2),Kn(fn(et),{class:dn(fn(r).be("dropdown","link-btn")),text:"",size:"small",onClick:P},{default:mn((()=>[Hn(yn(fn(i)("el.colorpicker.clear")),1)])),_:1},8,["class"]),Kn(fn(et),{plain:"",size:"small",class:dn(fn(r).be("dropdown","btn")),onClick:H},{default:mn((()=>[Hn(yn(fn(i)("el.colorpicker.confirm")),1)])),_:1},8,["class"])],2)],40,mg)),[[fn(Id),R]])])),default:mn((()=>[pn("div",Yn({id:fn(l),ref_key:"triggerRef",ref:g},e.$attrs,{class:fn(F),role:"button","aria-label":fn(_),"aria-labelledby":fn(S),"aria-description":fn(i)("el.colorpicker.description",{color:e.modelValue||""}),"aria-disabled":fn(a),tabindex:fn(a)?-1:e.tabindex,onKeydown:j,onFocus:y,onBlur:t[1]||(t[1]=(...e)=>fn(B)&&fn(B)(...e))}),[fn(a)?(cn(),un("div",{key:0,class:dn(fn(r).be("picker","mask"))},null,2)):Pn("v-if",!0),pn("div",{class:dn(fn(r).be("picker","trigger")),onClick:M},[pn("span",{class:dn([fn(r).be("picker","color"),fn(r).is("alpha",e.showAlpha)])},[pn("span",{class:dn(fn(r).be("picker","color-inner")),style:Rn({backgroundColor:fn(E)})},[On(Kn(fn(Ee),{class:dn([fn(r).be("picker","icon"),fn(r).is("icon-arrow-down")])},{default:mn((()=>[Kn(fn(tt))])),_:1},8,["class"]),[[Wn,e.modelValue||x.value]]),On(Kn(fn(Ee),{class:dn([fn(r).be("picker","empty"),fn(r).is("icon-close")])},{default:mn((()=>[Kn(fn(Ye))])),_:1},8,["class"]),[[Wn,!e.modelValue&&!x.value]])],6)],2)],2)],16,Bg)])),_:1},8,["visible","popper-class","teleported","transition"]))}})),[["__file","color-picker.vue"]])),wg=ye({urlList:{type:Qe(Array),default:()=>Xe([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Qe(String)}}),bg={close:()=>!0,switch:e=>Oe(e),rotate:e=>Oe(e)},xg=["src","crossorigin"],Qg=on({name:"ElImageViewer"}),Eg=on(l(a({},Qg),{props:wg,emits:bg,setup(e,{expose:t,emit:A}){var n;const i=e,r={CONTAIN:{name:"contain",icon:ei(it)},ORIGINAL:{name:"original",icon:ei(rt)}},{t:o}=we(),s=be("image-viewer"),{nextZIndex:c}=ot(),u=sn(),h=sn([]),d=ti(),f=sn(!0),g=sn(i.initialIndex),p=$n(r.CONTAIN),v=sn({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),m=sn(null!=(n=i.zIndex)?n:c()),B=En((()=>{const{urlList:e}=i;return e.length<=1})),y=En((()=>0===g.value)),C=En((()=>g.value===i.urlList.length-1)),w=En((()=>i.urlList[g.value])),b=En((()=>[s.e("btn"),s.e("prev"),s.is("disabled",!i.infinite&&y.value)])),x=En((()=>[s.e("btn"),s.e("next"),s.is("disabled",!i.infinite&&C.value)])),Q=En((()=>{const{scale:e,deg:t,offsetX:A,offsetY:n,enableTransition:i}=v.value;let o=A/e,s=n/e;switch(t%360){case 90:case-270:[o,s]=[s,-o];break;case 180:case-180:[o,s]=[-o,-s];break;case 270:case-90:[o,s]=[-s,o]}const a={transform:`scale(${e}) rotate(${t}deg) translate(${o}px, ${s}px)`,transition:i?"transform .3s":""};return p.value.name===r.CONTAIN.name&&(a.maxWidth=a.maxHeight="100%"),a}));function E(){d.stop(),A("close")}function I(){f.value=!1}function _(e){f.value=!1,e.target.alt=o("el.image.error")}function S(e){if(f.value||0!==e.button||!u.value)return;v.value.enableTransition=!1;const{offsetX:t,offsetY:A}=v.value,n=e.pageX,i=e.pageY,r=le((e=>{v.value=l(a({},v.value),{offsetX:t+e.pageX-n,offsetY:A+e.pageY-i})})),o=ht(document,"mousemove",r);ht(document,"mouseup",(()=>{o()})),e.preventDefault()}function F(){v.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function k(){if(f.value)return;const e=dt(r),t=Object.values(r),A=p.value.name,n=t.findIndex((e=>e.name===A)),i=(n+1)%e.length;p.value=r[e[i]],F()}function U(e){const t=i.urlList.length;g.value=(e+t)%t}function O(){y.value&&!i.infinite||U(g.value-1)}function D(){C.value&&!i.infinite||U(g.value+1)}function T(e,t={}){if(f.value)return;const{minScale:n,maxScale:r}=i,{zoomRate:o,rotateDeg:s,enableTransition:l}=a({zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0},t);switch(e){case"zoomOut":v.value.scale>n&&(v.value.scale=Number.parseFloat((v.value.scale/o).toFixed(3)));break;case"zoomIn":v.value.scale<r&&(v.value.scale=Number.parseFloat((v.value.scale*o).toFixed(3)));break;case"clockwise":v.value.deg+=s,A("rotate",v.value.deg);break;case"anticlockwise":v.value.deg-=s,A("rotate",v.value.deg)}v.value.enableTransition=l}return In(w,(()=>{_n((()=>{const e=h.value[0];(null==e?void 0:e.complete)||(f.value=!0)}))})),In(g,(e=>{F(),A("switch",e)})),ln((()=>{var e,t;!function(){const e=le((e=>{switch(e.code){case nt.esc:i.closeOnPressEscape&&E();break;case nt.space:k();break;case nt.left:O();break;case nt.up:T("zoomIn");break;case nt.right:D();break;case nt.down:T("zoomOut")}})),t=le((e=>{T((e.deltaY||e.deltaX)<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})}));d.run((()=>{ht(document,"keydown",e),ht(document,"wheel",t)}))}(),null==(t=null==(e=u.value)?void 0:e.focus)||t.call(e)})),t({setActiveItem:U}),(e,t)=>(cn(),vn(Ai,{to:"body",disabled:!e.teleported},[Kn(Gn,{name:"viewer-fade",appear:""},{default:mn((()=>[pn("div",{ref_key:"wrapper",ref:u,tabindex:-1,class:dn(fn(s).e("wrapper")),style:Rn({zIndex:m.value})},[pn("div",{class:dn(fn(s).e("mask")),onClick:t[0]||(t[0]=Tn((t=>e.hideOnClickModal&&E()),["self"]))},null,2),Pn(" CLOSE "),pn("span",{class:dn([fn(s).e("btn"),fn(s).e("close")]),onClick:E},[Kn(fn(Ee),null,{default:mn((()=>[Kn(fn(Ye))])),_:1})],2),Pn(" ARROW "),fn(B)?Pn("v-if",!0):(cn(),un(Ln,{key:0},[pn("span",{class:dn(fn(b)),onClick:O},[Kn(fn(Ee),null,{default:mn((()=>[Kn(fn(st))])),_:1})],2),pn("span",{class:dn(fn(x)),onClick:D},[Kn(fn(Ee),null,{default:mn((()=>[Kn(fn(We))])),_:1})],2)],64)),Pn(" ACTIONS "),pn("div",{class:dn([fn(s).e("btn"),fn(s).e("actions")])},[pn("div",{class:dn(fn(s).e("actions__inner"))},[Kn(fn(Ee),{onClick:t[1]||(t[1]=e=>T("zoomOut"))},{default:mn((()=>[Kn(fn(at))])),_:1}),Kn(fn(Ee),{onClick:t[2]||(t[2]=e=>T("zoomIn"))},{default:mn((()=>[Kn(fn(lt))])),_:1}),pn("i",{class:dn(fn(s).e("actions__divider"))},null,2),Kn(fn(Ee),{onClick:k},{default:mn((()=>[(cn(),vn(Bn(fn(p).icon)))])),_:1}),pn("i",{class:dn(fn(s).e("actions__divider"))},null,2),Kn(fn(Ee),{onClick:t[3]||(t[3]=e=>T("anticlockwise"))},{default:mn((()=>[Kn(fn(ct))])),_:1}),Kn(fn(Ee),{onClick:t[4]||(t[4]=e=>T("clockwise"))},{default:mn((()=>[Kn(fn(ut))])),_:1})],2)],2),Pn(" CANVAS "),pn("div",{class:dn(fn(s).e("canvas"))},[(cn(!0),un(Ln,null,Zn(e.urlList,((t,A)=>On((cn(),un("img",{ref_for:!0,ref:e=>h.value[A]=e,key:t,src:t,style:Rn(fn(Q)),class:dn(fn(s).e("img")),crossorigin:e.crossorigin,onLoad:I,onError:_,onMousedown:S},null,46,xg)),[[Wn,A===g.value]]))),128))],2),hn(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}}));const Ig=Ie(xe(Eg,[["__file","image-viewer.vue"]])),_g=ye({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Qe([String,Object])},previewSrcList:{type:Qe(Array),default:()=>Xe([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Qe(String)}}),Sg={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>Oe(e),close:()=>!0,show:()=>!0},Fg=["src","loading","crossorigin"],kg={key:0},Ug=on({name:"ElImage",inheritAttrs:!1});const Og=Ie(xe(on(l(a({},Ug),{props:_g,emits:Sg,setup(e,{emit:t}){const A=e;let n="";const{t:i}=we(),r=be("image"),o=ni(),s=ft(),a=sn(),l=sn(!1),c=sn(!0),h=sn(!1),d=sn(),f=sn(),g=Be&&"loading"in HTMLImageElement.prototype;let p,v;const m=En((()=>[r.e("inner"),C.value&&r.e("preview"),c.value&&r.is("loading")])),B=En((()=>o.style)),y=En((()=>{const{fit:e}=A;return Be&&e?{objectFit:e}:{}})),C=En((()=>{const{previewSrcList:e}=A;return Array.isArray(e)&&e.length>0})),w=En((()=>{const{previewSrcList:e,initialIndex:t}=A;let n=t;return t>e.length-1&&(n=0),n})),b=En((()=>"eager"!==A.loading&&(!g&&"lazy"===A.loading||A.lazy))),x=()=>{Be&&(c.value=!0,l.value=!1,a.value=A.src)};function Q(e){c.value=!1,l.value=!1,t("load",e)}function E(e){c.value=!1,l.value=!0,t("error",e)}function I(){((e,t)=>{if(!Be||!e||!t)return!1;const A=e.getBoundingClientRect();let n;return n=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},A.top<n.bottom&&A.bottom>n.top&&A.right>n.left&&A.left<n.right})(d.value,f.value)&&(x(),F())}const _=gt(I,200,!0);function S(){return u(this,null,(function*(){var e;if(!Be)return;yield _n();const{scrollContainer:t}=A;Se(t)?f.value=t:Qn(t)&&""!==t?f.value=null!=(e=document.querySelector(t))?e:void 0:d.value&&(f.value=pt(d.value)),f.value&&(p=ht(f,"scroll",_),setTimeout((()=>I()),100))}))}function F(){Be&&f.value&&_&&(null==p||p(),f.value=void 0)}function k(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function U(){C.value&&(v=ht("wheel",k,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,t("show"))}function O(){null==v||v(),document.body.style.overflow=n,h.value=!1,t("close")}function D(e){t("switch",e)}return In((()=>A.src),(()=>{b.value?(c.value=!0,l.value=!1,F(),S()):x()})),ln((()=>{b.value?S():x()})),(e,t)=>(cn(),un("div",{ref_key:"container",ref:d,class:dn([fn(r).b(),e.$attrs.class]),style:Rn(fn(B))},[l.value?hn(e.$slots,"error",{key:0},(()=>[pn("div",{class:dn(fn(r).e("error"))},yn(fn(i)("el.image.error")),3)])):(cn(),un(Ln,{key:1},[void 0!==a.value?(cn(),un("img",Yn({key:0},fn(s),{src:a.value,loading:e.loading,style:fn(y),class:fn(m),crossorigin:e.crossorigin,onClick:U,onLoad:Q,onError:E}),null,16,Fg)):Pn("v-if",!0),c.value?(cn(),un("div",{key:1,class:dn(fn(r).e("wrapper"))},[hn(e.$slots,"placeholder",{},(()=>[pn("div",{class:dn(fn(r).e("placeholder"))},null,2)]))],2)):Pn("v-if",!0)],64)),fn(C)?(cn(),un(Ln,{key:2},[h.value?(cn(),vn(fn(Ig),{key:0,"z-index":e.zIndex,"initial-index":fn(w),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:O,onSwitch:D},{default:mn((()=>[e.$slots.viewer?(cn(),un("div",kg,[hn(e.$slots,"viewer")])):Pn("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Pn("v-if",!0)],64)):Pn("v-if",!0)],6))}})),[["__file","image.vue"]])),Dg=ye(a({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Fe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||Oe(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}},ke(["ariaLabel"]))),Tg={[Ve]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[vt]:e=>Oe(e)||fe(e),[Ue]:e=>Oe(e)||fe(e)},Mg=["aria-label","onKeydown"],Lg=["aria-label","onKeydown"],Hg=on({name:"ElInputNumber"}),Pg=on(l(a({},Hg),{props:Dg,emits:Tg,setup(e,{expose:t,emit:A}){const n=e,{t:i}=we(),r=be("input-number"),o=sn(),s=Vn({currentValue:n.modelValue,userInput:null}),{formItem:a}=Le(),l=En((()=>Oe(n.modelValue)&&n.modelValue<=n.min)),c=En((()=>Oe(n.modelValue)&&n.modelValue>=n.max)),u=En((()=>{const e=v(n.step);return Te(n.precision)?Math.max(v(n.modelValue),e):(n.precision,n.precision)})),h=En((()=>n.controls&&"right"===n.controlsPosition)),d=Re(),f=Me(),g=En((()=>{if(null!==s.userInput)return s.userInput;let e=s.currentValue;if(fe(e))return"";if(Oe(e)){if(Number.isNaN(e))return"";Te(n.precision)||(e=e.toFixed(n.precision))}return e})),p=(e,t)=>{if(Te(t)&&(t=u.value),0===t)return Math.round(e);let A=String(e);const n=A.indexOf(".");if(-1===n)return e;if(!A.replace(".","").split("")[n+t])return e;const i=A.length;return"5"===A.charAt(i-1)&&(A=`${A.slice(0,Math.max(0,i-1))}6`),Number.parseFloat(Number(A).toFixed(t))},v=e=>{if(fe(e))return 0;const t=e.toString(),A=t.indexOf(".");let n=0;return-1!==A&&(n=t.length-A-1),n},m=(e,t=1)=>Oe(e)?p(e+n.step*t):s.currentValue,B=()=>{if(n.readonly||f.value||c.value)return;const e=Number(g.value)||0,t=m(e);w(t),A(vt,s.currentValue),I()},y=()=>{if(n.readonly||f.value||l.value)return;const e=Number(g.value)||0,t=m(e,-1);w(t),A(vt,s.currentValue),I()},C=(e,t)=>{const{max:i,min:r,step:o,precision:s,stepStrictly:a,valueOnClear:l}=n;i<r&&Ct("InputNumber","min should not be greater than max.");let c=Number(e);if(fe(e)||Number.isNaN(c))return null;if(""===e){if(null===l)return null;c=Qn(l)?{min:r,max:i}[l]:l}return a&&(c=p(Math.round(c/o)*o,s)),Te(s)||(c=p(c,s)),(c>i||c<r)&&(c=c>i?i:r,t&&A(Ue,c)),c},w=(e,t=!0)=>{var i;const r=s.currentValue,o=C(e);t?r===o&&e||(s.userInput=null,A(Ue,o),r!==o&&A(Ve,o,r),n.validateEvent&&(null==(i=null==a?void 0:a.validate)||i.call(a,"change").catch((e=>He()))),s.currentValue=o):A(Ue,o)},b=e=>{s.userInput=e;const t=""===e?null:Number(e);A(vt,t),w(t,!1)},x=e=>{const t=""!==e?Number(e):"";(Oe(t)&&!Number.isNaN(t)||""===e)&&w(t),I(),s.userInput=null},Q=e=>{A("focus",e)},E=e=>{var t;s.userInput=null,A("blur",e),n.validateEvent&&(null==(t=null==a?void 0:a.validate)||t.call(a,"blur").catch((e=>He())))},I=()=>{s.currentValue!==n.modelValue&&(s.currentValue=n.modelValue)},_=e=>{document.activeElement===e.target&&e.preventDefault()};return In((()=>n.modelValue),((e,t)=>{const A=C(e,!0);null===s.userInput&&A!==t&&(s.currentValue=A)}),{immediate:!0}),ln((()=>{var e;const{min:t,max:i,modelValue:r}=n,a=null==(e=o.value)?void 0:e.input;if(a.setAttribute("role","spinbutton"),Number.isFinite(i)?a.setAttribute("aria-valuemax",String(i)):a.removeAttribute("aria-valuemax"),Number.isFinite(t)?a.setAttribute("aria-valuemin",String(t)):a.removeAttribute("aria-valuemin"),a.setAttribute("aria-valuenow",s.currentValue||0===s.currentValue?String(s.currentValue):""),a.setAttribute("aria-disabled",String(f.value)),!Oe(r)&&null!=r){let e=Number(r);Number.isNaN(e)&&(e=null),A(Ue,e)}a.addEventListener("wheel",_,{passive:!1})})),ii((()=>{var e,t;const A=null==(e=o.value)?void 0:e.input;null==A||A.setAttribute("aria-valuenow",`${null!=(t=s.currentValue)?t:""}`)})),je({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-input-number",ref:"https://element-plus.org/en-US/component/input-number.html"},En((()=>!!n.label))),t({focus:()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.focus)||t.call(e)},blur:()=>{var e,t;null==(t=null==(e=o.value)?void 0:e.blur)||t.call(e)}}),(e,t)=>(cn(),un("div",{class:dn([fn(r).b(),fn(r).m(fn(d)),fn(r).is("disabled",fn(f)),fn(r).is("without-controls",!e.controls),fn(r).is("controls-right",fn(h))]),onDragstart:t[0]||(t[0]=Tn((()=>{}),["prevent"]))},[e.controls?On((cn(),un("span",{key:0,role:"button","aria-label":fn(i)("el.inputNumber.decrease"),class:dn([fn(r).e("decrease"),fn(r).is("disabled",fn(l))]),onKeydown:zn(y,["enter"])},[hn(e.$slots,"decrease-icon",{},(()=>[Kn(fn(Ee),null,{default:mn((()=>[fn(h)?(cn(),vn(fn(tt),{key:0})):(cn(),vn(fn(mt),{key:1}))])),_:1})]))],42,Mg)),[[fn(Fd),y]]):Pn("v-if",!0),e.controls?On((cn(),un("span",{key:1,role:"button","aria-label":fn(i)("el.inputNumber.increase"),class:dn([fn(r).e("increase"),fn(r).is("disabled",fn(c))]),onKeydown:zn(B,["enter"])},[hn(e.$slots,"increase-icon",{},(()=>[Kn(fn(Ee),null,{default:mn((()=>[fn(h)?(cn(),vn(fn(Bt),{key:0})):(cn(),vn(fn(yt),{key:1}))])),_:1})]))],42,Lg)),[[fn(Fd),B]]):Pn("v-if",!0),Kn(fn(Ze),{id:e.id,ref_key:"input",ref:o,type:"number",step:e.step,"model-value":fn(g),placeholder:e.placeholder,readonly:e.readonly,disabled:fn(f),size:fn(d),max:e.max,min:e.min,name:e.name,"aria-label":e.label||e.ariaLabel,"validate-event":!1,onKeydown:[zn(Tn(B,["prevent"]),["up"]),zn(Tn(y,["prevent"]),["down"])],onBlur:E,onFocus:Q,onInput:b,onChange:x},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],34))}}));const Rg=Ie(xe(Pg,[["__file","input-number.vue"]])),Ng=Symbol("ElSelectGroup"),jg=Symbol("ElSelect");const Vg=on({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=be("select"),A=Ke(),n=En((()=>[t.be("dropdown","item"),t.is("disabled",fn(s)),t.is("selected",fn(o)),t.is("hovering",fn(h))])),i=Vn({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:r,itemSelected:o,isDisabled:s,select:a,hoverItem:l,updateOption:c}=function(e,t){const A=gn(jg),n=gn(Ng,{disabled:!1}),i=En((()=>A.props.multiple?c(A.props.modelValue,e.value):c([A.props.modelValue],e.value))),r=En((()=>{if(A.props.multiple){const e=A.props.modelValue||[];return!i.value&&e.length>=A.props.multipleLimit&&A.props.multipleLimit>0}return!1})),o=En((()=>e.label||(Fn(e.value)?"":e.value))),s=En((()=>e.value||e.label||"")),a=En((()=>e.disabled||t.groupDisabled||r.value)),l=Cn(),c=(t=[],n)=>{if(Fn(e.value)){const e=A.props.valueKey;return t&&t.some((t=>kn(I(t,e))===I(n,e)))}return t&&t.includes(n)};return In((()=>o.value),(()=>{e.created||A.props.remote||A.setSelected()})),In((()=>e.value),((t,n)=>{const{remote:i,valueKey:r}=A.props;if(Vl(t,n)||(A.onOptionDestroy(n,l.proxy),A.onOptionCreate(l.proxy)),!e.created&&!i){if(r&&Fn(t)&&Fn(n)&&t[r]===n[r])return;A.setSelected()}})),In((()=>n.disabled),(()=>{t.groupDisabled=n.disabled}),{immediate:!0}),{select:A,currentLabel:o,currentValue:s,itemSelected:i,isDisabled:a,hoverItem:()=>{e.disabled||n.disabled||(A.states.hoveringIndex=A.optionsArray.indexOf(l.proxy))},updateOption:A=>{const n=new RegExp(wt(A),"i");t.visible=n.test(o.value)||e.created}}}(e,i),{visible:u,hover:h}=Nn(i),d=Cn().proxy;return a.onOptionCreate(d),ri((()=>{const e=d.value,{selected:t}=a.states,A=(a.props.multiple?t:[t]).some((e=>e.value===d.value));_n((()=>{a.states.cachedOptions.get(e)!==d||A||a.states.cachedOptions.delete(e)})),a.onOptionDestroy(e,d)})),{ns:t,id:A,containerKls:n,currentLabel:r,itemSelected:o,isDisabled:s,select:a,hoverItem:l,updateOption:c,visible:u,hover:h,selectOptionClick:function(){!0!==e.disabled&&!0!==i.groupDisabled&&a.handleOptionSelect(d)},states:i}}}),Kg=["id","aria-disabled","aria-selected"];var Gg=xe(Vg,[["render",function(e,t,A,n,i,r){return On((cn(),un("li",{id:e.id,class:dn(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMouseenter:t[0]||(t[0]=(...t)=>e.hoverItem&&e.hoverItem(...t)),onClick:t[1]||(t[1]=Tn(((...t)=>e.selectOptionClick&&e.selectOptionClick(...t)),["stop"]))},[hn(e.$slots,"default",{},(()=>[pn("span",null,yn(e.currentLabel),1)]))],42,Kg)),[[Wn,e.visible]])}],["__file","option.vue"]]);var Yg=xe(on({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=gn(jg),t=be("select"),A=En((()=>e.props.popperClass)),n=En((()=>e.props.multiple)),i=En((()=>e.props.fitInputWidth)),r=sn("");function o(){var t;r.value=`${null==(t=e.selectRef)?void 0:t.offsetWidth}px`}return ln((()=>{o(),bt(e.selectRef,o)})),{ns:t,minWidth:r,popperClass:A,isMultiple:n,isFitInputWidth:i}}}),[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:dn([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:Rn({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(cn(),un("div",{key:0,class:dn(e.ns.be("dropdown","header"))},[hn(e.$slots,"header")],2)):Pn("v-if",!0),hn(e.$slots,"default"),e.$slots.footer?(cn(),un("div",{key:1,class:dn(e.ns.be("dropdown","footer"))},[hn(e.$slots,"footer")],2)):Pn("v-if",!0)],6)}],["__file","select-dropdown.vue"]]);const Xg=(e,t)=>{const{t:A}=we(),n=Ke(),i=be("select"),r=be("input"),o=Vn({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:e.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),s=sn(null),a=sn(null),l=sn(null),c=sn(null),u=sn(null),h=sn(null),d=sn(null),f=sn(null),g=sn(null),p=sn(null),v=sn(null),m=sn(null),{wrapperRef:B,isFocused:y,handleFocus:C,handleBlur:w}=qe(u,{afterFocus(){e.automaticDropdown&&!b.value&&(b.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(e){var t,A;return(null==(t=l.value)?void 0:t.isFocusInsideContent(e))||(null==(A=c.value)?void 0:A.isFocusInsideContent(e))},afterBlur(){b.value=!1,o.menuVisibleOnFocus=!1}}),b=sn(!1),x=sn(),{form:Q,formItem:E}=Le(),{inputId:_}=Ne(e,{formItemContext:E}),{valueOnClear:S,isEmptyValue:F}=Qt(e),k=En((()=>e.disabled||(null==Q?void 0:Q.disabled))),U=En((()=>e.multiple?Sn(e.modelValue)&&e.modelValue.length>0:!F(e.modelValue))),O=En((()=>e.clearable&&!k.value&&o.inputHovering&&U.value)),D=En((()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon)),T=En((()=>i.is("reverse",D.value&&b.value))),M=En((()=>(null==E?void 0:E.validateState)||"")),L=En((()=>Et[M.value])),H=En((()=>e.remote?300:0)),P=En((()=>e.loading?e.loadingText||A("el.select.loading"):!(e.remote&&!o.inputValue&&0===o.options.size)&&(e.filterable&&o.inputValue&&o.options.size>0&&0===R.value?e.noMatchText||A("el.select.noMatch"):0===o.options.size?e.noDataText||A("el.select.noData"):null))),R=En((()=>N.value.filter((e=>e.visible)).length)),N=En((()=>{const e=Array.from(o.options.values()),t=[];return o.optionValues.forEach((A=>{const n=e.findIndex((e=>e.value===A));n>-1&&t.push(e[n])})),t.length>=e.length?t:e})),j=En((()=>Array.from(o.cachedOptions.values()))),V=En((()=>{const t=N.value.filter((e=>!e.created)).some((e=>e.currentLabel===o.inputValue));return e.filterable&&e.allowCreate&&""!==o.inputValue&&!t})),K=()=>{e.filterable&&xn(e.filterMethod)||e.filterable&&e.remote&&xn(e.remoteMethod)||N.value.forEach((e=>{var t;null==(t=e.updateOption)||t.call(e,o.inputValue)}))},G=Re(),Y=En((()=>["small"].includes(G.value)?"small":"default")),X=En({get:()=>b.value&&!1!==P.value,set(e){b.value=e}}),z=En((()=>Sn(e.modelValue)?0===e.modelValue.length&&!o.inputValue:!e.filterable||!o.inputValue)),W=En((()=>{var t;const n=null!=(t=e.placeholder)?t:A("el.select.placeholder");return e.multiple||!U.value?n:o.selectedLabel})),$=En((()=>It?null:"mouseenter"));In((()=>e.modelValue),((t,A)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(o.inputValue="",J("")),Z(),!Vl(t,A)&&e.validateEvent&&(null==E||E.validate("change").catch((e=>He())))}),{flush:"post",deep:!0}),In((()=>b.value),(e=>{e?J(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),t("visible-change",e)})),In((()=>o.options.entries()),(()=>{var t;if(!Be)return;const A=(null==(t=s.value)?void 0:t.querySelectorAll("input"))||[];(e.filterable||e.defaultFirstOption||Te(e.modelValue))&&Array.from(A).includes(document.activeElement)||Z(),e.defaultFirstOption&&(e.filterable||e.remote)&&R.value&&q()}),{flush:"post"}),In((()=>o.hoveringIndex),(e=>{Oe(e)&&e>-1?x.value=N.value[e]||{}:x.value={},N.value.forEach((e=>{e.hover=x.value===e}))})),qn((()=>{o.isBeforeHide||K()}));const J=t=>{o.previousQuery!==t&&(o.previousQuery=t,e.filterable&&xn(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&xn(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&R.value?_n(q):_n(te))},q=()=>{const e=N.value.filter((e=>e.visible&&!e.disabled&&!e.states.groupDisabled)),t=e.find((e=>e.created)),A=e[0];o.hoveringIndex=he(N.value,t||A)},Z=()=>{if(!e.multiple){const t=ee(e.modelValue);return o.selectedLabel=t.currentLabel,void(o.selected=t)}o.selectedLabel="";const t=[];Sn(e.modelValue)&&e.modelValue.forEach((e=>{t.push(ee(e))})),o.selected=t},ee=t=>{let A;const n="object"===oi(t).toLowerCase(),i="null"===oi(t).toLowerCase(),r="undefined"===oi(t).toLowerCase();for(let s=o.cachedOptions.size-1;s>=0;s--){const i=j.value[s];if(n?I(i.value,e.valueKey)===I(t,e.valueKey):i.value===t){A={value:t,currentLabel:i.currentLabel,get isDisabled(){return i.isDisabled}};break}}if(A)return A;return{value:t,currentLabel:n?t.label:i||r?"":t}},te=()=>{e.multiple?o.hoveringIndex=N.value.findIndex((e=>o.selected.some((t=>xe(t)===xe(e))))):o.hoveringIndex=N.value.findIndex((e=>xe(e)===xe(o.selected)))},Ae=()=>{o.calculatorWidth=h.value.getBoundingClientRect().width},ne=()=>{var e,t;null==(t=null==(e=l.value)?void 0:e.updatePopper)||t.call(e)},ie=()=>{var e,t;null==(t=null==(e=c.value)?void 0:e.updatePopper)||t.call(e)},re=()=>{o.inputValue.length>0&&!b.value&&(b.value=!0),J(o.inputValue)},oe=t=>{if(o.inputValue=t.target.value,!e.remote)return re();se()},se=ae((()=>{re()}),H.value),le=A=>{Vl(e.modelValue,A)||t(Ve,A)},ce=A=>{A.stopPropagation();const n=e.multiple?[]:S.value;if(e.multiple)for(const e of o.selected)e.isDisabled&&n.push(e.value);t(Ue,n),le(n),o.hoveringIndex=-1,b.value=!1,t("clear"),me()},ue=A=>{if(e.multiple){const n=(e.modelValue||[]).slice(),i=he(n,A.value);i>-1?n.splice(i,1):(e.multipleLimit<=0||n.length<e.multipleLimit)&&n.push(A.value),t(Ue,n),le(n),A.created&&J(""),e.filterable&&!e.reserveKeyword&&(o.inputValue="")}else t(Ue,A.value),le(A.value),b.value=!1;me(),b.value||_n((()=>{de(A)}))},he=(t=[],A)=>{if(!Fn(A))return t.indexOf(A);const n=e.valueKey;let i=-1;return t.some(((e,t)=>kn(I(e,n))===I(A,n)&&(i=t,!0))),i},de=e=>{var t,A,n,r,o;const s=Sn(e)?e[0]:e;let a=null;if(null==s?void 0:s.value){const e=N.value.filter((e=>e.value===s.value));e.length>0&&(a=e[0].$el)}if(l.value&&a){const e=null==(r=null==(n=null==(A=null==(t=l.value)?void 0:t.popperRef)?void 0:A.contentRef)?void 0:n.querySelector)?void 0:r.call(n,`.${i.be("dropdown","wrap")}`);e&&_t(e,a)}null==(o=m.value)||o.handleScroll()},{handleCompositionStart:fe,handleCompositionUpdate:ge,handleCompositionEnd:pe}=function(e){const t=sn(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:e=>{const A=e.target.value,n=A[A.length-1]||"";t.value=!xt(n)},handleCompositionEnd:A=>{t.value&&(t.value=!1,xn(e)&&e(A))}}}((e=>oe(e))),ve=En((()=>{var e,t;return null==(t=null==(e=l.value)?void 0:e.popperRef)?void 0:t.contentRef})),me=()=>{var e;null==(e=u.value)||e.focus()},ye=e=>{if(b.value=!1,y.value){const t=new FocusEvent("focus",e);_n((()=>w(t)))}},Ce=()=>{k.value||(It&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:b.value=!b.value)},xe=t=>Fn(t.value)?I(t.value,e.valueKey):t.value,Qe=En((()=>N.value.filter((e=>e.visible)).every((e=>e.disabled)))),Ee=En((()=>e.multiple?e.collapseTags?o.selected.slice(0,e.maxCollapseTags):o.selected:[])),Ie=En((()=>e.multiple&&e.collapseTags?o.selected.slice(e.maxCollapseTags):[])),_e=e=>{if(b.value){if(0!==o.options.size&&0!==R.value&&!Qe.value){"next"===e?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):"prev"===e&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const t=N.value[o.hoveringIndex];!0!==t.disabled&&!0!==t.states.groupDisabled&&t.visible||_e(e),_n((()=>de(x.value)))}}else b.value=!0},Se=En((()=>{const t=(()=>{if(!a.value)return 0;const e=window.getComputedStyle(a.value);return Number.parseFloat(e.gap||"6px")})();return{maxWidth:`${v.value&&1===e.maxCollapseTags?o.selectionWidth-o.collapseItemWidth-t:o.selectionWidth}px`}})),Fe=En((()=>({maxWidth:`${o.selectionWidth}px`}))),ke=En((()=>({width:`${Math.max(o.calculatorWidth,11)}px`})));return e.multiple&&!Sn(e.modelValue)&&t(Ue,[]),!e.multiple&&Sn(e.modelValue)&&t(Ue,""),bt(a,(()=>{o.selectionWidth=a.value.getBoundingClientRect().width})),bt(h,Ae),bt(g,ne),bt(B,ne),bt(p,ie),bt(v,(()=>{o.collapseItemWidth=v.value.getBoundingClientRect().width})),ln((()=>{Z()})),{inputId:_,contentId:n,nsSelect:i,nsInput:r,states:o,isFocused:y,expanded:b,optionsArray:N,hoverOption:x,selectSize:G,filteredOptionsCount:R,resetCalculatorWidth:Ae,updateTooltip:ne,updateTagTooltip:ie,debouncedOnInputChange:se,onInput:oe,deletePrevTag:A=>{if(e.multiple&&A.code!==nt.delete&&A.target.value.length<=0){const A=e.modelValue.slice(),n=(e=>za(e,(e=>!o.disabledOptions.has(e))))(A);if(n<0)return;const i=A[n];A.splice(n,1),t(Ue,A),le(A),t("remove-tag",i)}},deleteTag:(A,n)=>{const i=o.selected.indexOf(n);if(i>-1&&!k.value){const A=e.modelValue.slice();A.splice(i,1),t(Ue,A),le(A),t("remove-tag",n.value)}A.stopPropagation(),me()},deleteSelected:ce,handleOptionSelect:ue,scrollToOption:de,hasModelValue:U,shouldShowPlaceholder:z,currentPlaceholder:W,mouseEnterEventName:$,showClose:O,iconComponent:D,iconReverse:T,validateState:M,validateIcon:L,showNewOption:V,updateOptions:K,collapseTagSize:Y,setSelected:Z,selectDisabled:k,emptyText:P,handleCompositionStart:fe,handleCompositionUpdate:ge,handleCompositionEnd:pe,onOptionCreate:e=>{o.options.set(e.value,e),o.cachedOptions.set(e.value,e),e.disabled&&o.disabledOptions.set(e.value,e)},onOptionDestroy:(e,t)=>{o.options.get(e)===t&&o.options.delete(e)},handleMenuEnter:()=>{o.isBeforeHide=!1,_n((()=>de(o.selected)))},handleFocus:C,focus:me,blur:()=>{ye()},handleBlur:w,handleClearClick:e=>{ce(e)},handleClickOutside:ye,handleEsc:()=>{o.inputValue.length>0?o.inputValue="":b.value=!1},toggleMenu:Ce,selectOption:()=>{b.value?N.value[o.hoveringIndex]&&ue(N.value[o.hoveringIndex]):Ce()},getValueKey:xe,navigateOptions:_e,dropdownMenuVisible:X,showTagList:Ee,collapseTagList:Ie,tagStyle:Se,collapseTagStyle:Fe,inputStyle:ke,popperRef:ve,inputRef:u,tooltipRef:l,tagTooltipRef:c,calculatorRef:h,prefixRef:d,suffixRef:f,selectRef:s,wrapperRef:B,selectionRef:a,scrollbarRef:m,menuRef:g,tagMenuRef:p,collapseItemRef:v}};var zg=on({name:"ElOptions",setup(e,{slots:t}){const A=gn(jg);let n=[];return()=>{var e,i;const r=null==(e=t.default)?void 0:e.call(t),o=[];return r.length&&function e(t){Sn(t)&&t.forEach((t=>{var A,n,i,r;const s=null==(A=(null==t?void 0:t.type)||{})?void 0:A.name;"ElOptionGroup"===s?e(Qn(t.children)||Sn(t.children)||!xn(null==(n=t.children)?void 0:n.default)?t.children:null==(i=t.children)?void 0:i.default()):"ElOption"===s?o.push(null==(r=t.props)?void 0:r.value):Sn(t.children)&&e(t.children)}))}(null==(i=r[0])?void 0:i.children),Vl(o,n)||(n=o,A&&(A.states.optionValues=o)),r}}});const Wg=ye(a(a({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:Fe,effect:{type:Qe(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Qe(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Je.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Ce,default:St},fitInputWidth:Boolean,suffixIcon:{type:Ce,default:tt},tagType:l(a({},vf.type),{default:"info"}),tagEffect:l(a({},vf.effect),{default:"light"}),validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:Qe(String),values:Ft,default:"bottom-start"},fallbackPlacements:{type:Qe(Array),default:["bottom-start","top-start","right","left"]}},kt),ke(["ariaLabel"]))),$g="ElSelect",Jg=on({name:$g,componentName:$g,components:{ElInput:Ze,ElSelectMenu:Yg,ElOption:Gg,ElOptions:zg,ElTag:yf,ElScrollbar:Ut,ElTooltip:At,ElIcon:Ee},directives:{ClickOutside:Id},props:Wg,emits:[Ue,Ve,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const A=Xg(e,t);return an(jg,Vn({props:e,states:A.states,optionsArray:A.optionsArray,handleOptionSelect:A.handleOptionSelect,onOptionCreate:A.onOptionCreate,onOptionDestroy:A.onOptionDestroy,selectRef:A.selectRef,setSelected:A.setSelected})),a({},A)}}),qg=["id","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label"],Zg=["textContent"],ep={key:1};var tp=xe(Jg,[["render",function(e,t,A,n,i,r){const o=si("el-tag"),s=si("el-tooltip"),a=si("el-icon"),l=si("el-option"),c=si("el-options"),u=si("el-scrollbar"),h=si("el-select-menu"),d=ai("click-outside");return On((cn(),un("div",{ref:"selectRef",class:dn([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[ci(e.mouseEnterEventName)]:t[16]||(t[16]=t=>e.states.inputHovering=!0),onMouseleave:t[17]||(t[17]=t=>e.states.inputHovering=!1),onClick:t[18]||(t[18]=Tn(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["prevent","stop"]))},[Kn(s,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onBeforeShow:e.handleMenuEnter,onHide:t[15]||(t[15]=t=>e.states.isBeforeHide=!1)},{default:mn((()=>{var A;return[pn("div",{ref:"wrapperRef",class:dn([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)])},[e.$slots.prefix?(cn(),un("div",{key:0,ref:"prefixRef",class:dn(e.nsSelect.e("prefix"))},[hn(e.$slots,"prefix")],2)):Pn("v-if",!0),pn("div",{ref:"selectionRef",class:dn([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?hn(e.$slots,"tag",{key:0},(()=>[(cn(!0),un(Ln,null,Zn(e.showTagList,(t=>(cn(),un("div",{key:e.getValueKey(t),class:dn(e.nsSelect.e("selected-item"))},[Kn(o,{closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Rn(e.tagStyle),onClose:A=>e.deleteTag(A,t)},{default:mn((()=>[pn("span",{class:dn(e.nsSelect.e("tags-text"))},[hn(e.$slots,"label",{label:t.currentLabel,value:t.value},(()=>[Hn(yn(t.currentLabel),1)]))],2)])),_:2},1032,["closable","size","type","effect","style","onClose"])],2)))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(cn(),vn(s,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:mn((()=>[pn("div",{ref:"collapseItemRef",class:dn(e.nsSelect.e("selected-item"))},[Kn(o,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Rn(e.collapseTagStyle)},{default:mn((()=>[pn("span",{class:dn(e.nsSelect.e("tags-text"))}," + "+yn(e.states.selected.length-e.maxCollapseTags),3)])),_:1},8,["size","type","effect","style"])],2)])),content:mn((()=>[pn("div",{ref:"tagMenuRef",class:dn(e.nsSelect.e("selection"))},[(cn(!0),un(Ln,null,Zn(e.collapseTagList,(t=>(cn(),un("div",{key:e.getValueKey(t),class:dn(e.nsSelect.e("selected-item"))},[Kn(o,{class:"in-tooltip",closable:!e.selectDisabled&&!t.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:A=>e.deleteTag(A,t)},{default:mn((()=>[pn("span",{class:dn(e.nsSelect.e("tags-text"))},[hn(e.$slots,"label",{label:t.currentLabel,value:t.value},(()=>[Hn(yn(t.currentLabel),1)]))],2)])),_:2},1032,["closable","size","type","effect","onClose"])],2)))),128))],2)])),_:3},8,["disabled","effect","teleported"])):Pn("v-if",!0)])):Pn("v-if",!0),e.selectDisabled?Pn("v-if",!0):(cn(),un("div",{key:1,class:dn([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[On(pn("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":t[0]||(t[0]=t=>e.states.inputValue=t),type:"text",name:e.name,class:dn([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:Rn(e.inputStyle),role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":(null==(A=e.hoverOption)?void 0:A.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onFocus:t[1]||(t[1]=(...t)=>e.handleFocus&&e.handleFocus(...t)),onBlur:t[2]||(t[2]=(...t)=>e.handleBlur&&e.handleBlur(...t)),onKeydown:[t[3]||(t[3]=zn(Tn((t=>e.navigateOptions("next")),["stop","prevent"]),["down"])),t[4]||(t[4]=zn(Tn((t=>e.navigateOptions("prev")),["stop","prevent"]),["up"])),t[5]||(t[5]=zn(Tn(((...t)=>e.handleEsc&&e.handleEsc(...t)),["stop","prevent"]),["esc"])),t[6]||(t[6]=zn(Tn(((...t)=>e.selectOption&&e.selectOption(...t)),["stop","prevent"]),["enter"])),t[7]||(t[7]=zn(Tn(((...t)=>e.deletePrevTag&&e.deletePrevTag(...t)),["stop"]),["delete"]))],onCompositionstart:t[8]||(t[8]=(...t)=>e.handleCompositionStart&&e.handleCompositionStart(...t)),onCompositionupdate:t[9]||(t[9]=(...t)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...t)),onCompositionend:t[10]||(t[10]=(...t)=>e.handleCompositionEnd&&e.handleCompositionEnd(...t)),onInput:t[11]||(t[11]=(...t)=>e.onInput&&e.onInput(...t)),onClick:t[12]||(t[12]=Tn(((...t)=>e.toggleMenu&&e.toggleMenu(...t)),["stop"]))},null,46,qg),[[li,e.states.inputValue]]),e.filterable?(cn(),un("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:dn(e.nsSelect.e("input-calculator")),textContent:yn(e.states.inputValue)},null,10,Zg)):Pn("v-if",!0)],2)),e.shouldShowPlaceholder?(cn(),un("div",{key:2,class:dn([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?hn(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},(()=>[pn("span",null,yn(e.currentPlaceholder),1)])):(cn(),un("span",ep,yn(e.currentPlaceholder),1))],2)):Pn("v-if",!0)],2),pn("div",{ref:"suffixRef",class:dn(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(cn(),vn(a,{key:0,class:dn([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:mn((()=>[(cn(),vn(Bn(e.iconComponent)))])),_:1},8,["class"])):Pn("v-if",!0),e.showClose&&e.clearIcon?(cn(),vn(a,{key:1,class:dn([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:mn((()=>[(cn(),vn(Bn(e.clearIcon)))])),_:1},8,["class","onClick"])):Pn("v-if",!0),e.validateState&&e.validateIcon?(cn(),vn(a,{key:2,class:dn([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:mn((()=>[(cn(),vn(Bn(e.validateIcon)))])),_:1},8,["class"])):Pn("v-if",!0)],2)],2)]})),content:mn((()=>[Kn(h,{ref:"menuRef"},{default:mn((()=>[e.$slots.header?(cn(),un("div",{key:0,class:dn(e.nsSelect.be("dropdown","header")),onClick:t[13]||(t[13]=Tn((()=>{}),["stop"]))},[hn(e.$slots,"header")],2)):Pn("v-if",!0),On(Kn(u,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:dn([e.nsSelect.is("empty",0===e.filteredOptionsCount)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:mn((()=>[e.showNewOption?(cn(),vn(l,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):Pn("v-if",!0),Kn(c,null,{default:mn((()=>[hn(e.$slots,"default")])),_:3})])),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Wn,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(cn(),un("div",{key:1,class:dn(e.nsSelect.be("dropdown","loading"))},[hn(e.$slots,"loading")],2)):e.loading||0===e.filteredOptionsCount?(cn(),un("div",{key:2,class:dn(e.nsSelect.be("dropdown","empty"))},[hn(e.$slots,"empty",{},(()=>[pn("span",null,yn(e.emptyText),1)]))],2)):Pn("v-if",!0),e.$slots.footer?(cn(),un("div",{key:3,class:dn(e.nsSelect.be("dropdown","footer")),onClick:t[14]||(t[14]=Tn((()=>{}),["stop"]))},[hn(e.$slots,"footer")],2)):Pn("v-if",!0)])),_:3},512)])),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow"])],16)),[[d,e.handleClickOutside,e.popperRef]])}],["__file","select.vue"]]);var Ap=xe(on({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=be("select"),A=sn(null),n=Cn(),i=sn([]);an(Ng,Vn(a({},Nn(e))));const r=En((()=>i.value.some((e=>!0===e.visible)))),o=e=>{const t=ce(e),A=[];return t.forEach((e=>{var t,n;(e=>{var t,A;return"ElOption"===(null==(t=e.type)?void 0:t.name)&&!!(null==(A=e.component)?void 0:A.proxy)})(e)?A.push(e.component.proxy):(null==(t=e.children)?void 0:t.length)?A.push(...o(e.children)):(null==(n=e.component)?void 0:n.subTree)&&A.push(...o(e.component.subTree))})),A},s=()=>{i.value=o(n.subTree)};return ln((()=>{s()})),Ot(A,s,{attributes:!0,subtree:!0,childList:!0}),{groupRef:A,visible:r,ns:t}}}),[["render",function(e,t,A,n,i,r){return On((cn(),un("ul",{ref:"groupRef",class:dn(e.ns.be("group","wrap"))},[pn("li",{class:dn(e.ns.be("group","title"))},yn(e.label),3),pn("li",null,[pn("ul",{class:dn(e.ns.b("group"))},[hn(e.$slots,"default")],2)])],2)),[[Wn,e.visible]])}],["__file","option-group.vue"]]);const np=Ie(tp,{Option:Gg,OptionGroup:Ap}),ip=_e(Gg);_e(Ap);const rp=ye({trigger:Dt.trigger,placement:Tt.placement,disabled:Dt.disabled,visible:Je.visible,transition:Je.transition,popperOptions:Tt.popperOptions,tabindex:Tt.tabindex,content:Je.content,popperStyle:Je.popperStyle,popperClass:Je.popperClass,enterable:l(a({},Je.enterable),{default:!0}),effect:l(a({},Je.effect),{default:"light"}),teleported:Je.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),op={"update:visible":e=>De(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},sp=on({name:"ElPopover"}),ap=on(l(a({},sp),{props:rp,emits:op,setup(e,{expose:t,emit:A}){const n=e,i=En((()=>n["onUpdate:visible"])),r=be("popover"),o=sn(),s=En((()=>{var e;return null==(e=fn(o))?void 0:e.popperRef})),a=En((()=>[{width:$e(n.width)},n.popperStyle])),l=En((()=>[r.b(),n.popperClass,{[r.m("plain")]:!!n.content}])),c=En((()=>n.transition===`${r.namespace.value}-fade-in-linear`)),u=()=>{A("before-enter")},h=()=>{A("before-leave")},d=()=>{A("after-enter")},f=()=>{A("update:visible",!1),A("after-leave")};return t({popperRef:s,hide:()=>{var e;null==(e=o.value)||e.hide()}}),(e,t)=>(cn(),vn(fn(At),Yn({ref_key:"tooltipRef",ref:o},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":fn(l),"popper-style":fn(a),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":fn(c),"onUpdate:visible":fn(i),onBeforeShow:u,onBeforeHide:h,onShow:d,onHide:f}),{content:mn((()=>[e.title?(cn(),un("div",{key:0,class:dn(fn(r).e("title")),role:"title"},yn(e.title),3)):Pn("v-if",!0),hn(e.$slots,"default",{},(()=>[Hn(yn(e.content),1)]))])),default:mn((()=>[e.$slots.reference?hn(e.$slots,"reference",{key:0}):Pn("v-if",!0)])),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}}));const lp=(e,t)=>{const A=t.arg||t.value,n=null==A?void 0:A.popperRef;n&&(n.triggerRef=e)};const cp=Ie(xe(ap,[["__file","popover.vue"]]),{directive:Mt({mounted(e,t){lp(e,t)},updated(e,t){lp(e,t)}},"popover")}),up=Symbol("sliderContextKey"),hp=ye(a({modelValue:{type:Qe([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Fe,inputSize:Fe,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Qe(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Qe(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ft,default:"top"},marks:{type:Qe(Object)},validateEvent:{type:Boolean,default:!0}},ke(["ariaLabel"]))),dp=e=>Oe(e)||Sn(e)&&e.every(Oe),fp={[Ue]:dp,[vt]:dp,[Ve]:dp},gp=(e,t,A)=>{const{form:n,formItem:i}=Le(),r=$n(),o=sn(),s=sn(),a={firstButton:o,secondButton:s},l=En((()=>e.disabled||(null==n?void 0:n.disabled)||!1)),c=En((()=>Math.min(t.firstValue,t.secondValue))),h=En((()=>Math.max(t.firstValue,t.secondValue))),d=En((()=>e.range?100*(h.value-c.value)/(e.max-e.min)+"%":100*(t.firstValue-e.min)/(e.max-e.min)+"%")),f=En((()=>e.range?100*(c.value-e.min)/(e.max-e.min)+"%":"0%")),g=En((()=>e.vertical?{height:e.height}:{})),p=En((()=>e.vertical?{height:d.value,bottom:f.value}:{width:d.value,left:f.value})),v=()=>{r.value&&(t.sliderSize=r.value["client"+(e.vertical?"Height":"Width")])},m=A=>{const n=(A=>{const n=e.min+A*(e.max-e.min)/100;if(!e.range)return o;let i;return i=Math.abs(c.value-n)<Math.abs(h.value-n)?t.firstValue<t.secondValue?"firstButton":"secondButton":t.firstValue>t.secondValue?"firstButton":"secondButton",a[i]})(A);return n.value.setPosition(A),n},B=e=>{A(Ue,e),A(vt,e)},y=()=>u(void 0,null,(function*(){yield _n(),A(Ve,e.range?[c.value,h.value]:e.modelValue)})),C=A=>{var n,i,o,s,a,c;if(l.value||t.dragging)return;v();let u=0;if(e.vertical){const e=null!=(o=null==(i=null==(n=A.touches)?void 0:n.item(0))?void 0:i.clientY)?o:A.clientY;u=(r.value.getBoundingClientRect().bottom-e)/t.sliderSize*100}else{u=((null!=(c=null==(a=null==(s=A.touches)?void 0:s.item(0))?void 0:a.clientX)?c:A.clientX)-r.value.getBoundingClientRect().left)/t.sliderSize*100}return u<0||u>100?void 0:m(u)};return{elFormItem:i,slider:r,firstButton:o,secondButton:s,sliderDisabled:l,minValue:c,maxValue:h,runwayStyle:g,barStyle:p,resetSize:v,setPosition:m,emitChange:y,onSliderWrapperPrevent:e=>{var t,A;((null==(t=a.firstButton.value)?void 0:t.dragging)||(null==(A=a.secondButton.value)?void 0:A.dragging))&&e.preventDefault()},onSliderClick:e=>{C(e)&&y()},onSliderDown:e=>u(void 0,null,(function*(){const t=C(e);t&&(yield _n(),t.value.onButtonDown(e))})),setFirstValue:A=>{t.firstValue=A,B(e.range?[c.value,h.value]:A)},setSecondValue:A=>{t.secondValue=A,e.range&&B([c.value,h.value])}}},{left:pp,down:vp,right:mp,up:Bp,home:yp,end:Cp,pageUp:wp,pageDown:bp}=nt,xp=(e,t,A)=>{const{disabled:n,min:i,max:r,step:o,showTooltip:s,precision:a,sliderSize:l,formatTooltip:c,emitChange:h,resetSize:d,updateDragging:f}=gn(up),{tooltip:g,tooltipVisible:p,formatValue:v,displayTooltip:m,hideTooltip:B}=((e,t,A)=>{const n=sn(),i=sn(!1),r=En((()=>t.value instanceof Function)),o=En((()=>r.value&&t.value(e.modelValue)||e.modelValue)),s=ae((()=>{A.value&&(i.value=!0)}),50),a=ae((()=>{A.value&&(i.value=!1)}),50);return{tooltip:n,tooltipVisible:i,formatValue:o,displayTooltip:s,hideTooltip:a}})(e,c,s),y=sn(),C=En((()=>(e.modelValue-i.value)/(r.value-i.value)*100+"%")),w=En((()=>e.vertical?{bottom:C.value}:{left:C.value})),b=e=>{n.value||(t.newPosition=Number.parseFloat(C.value)+e/(r.value-i.value)*100,_(t.newPosition),h())},x=e=>{let t,A;return e.type.startsWith("touch")?(A=e.touches[0].clientY,t=e.touches[0].clientX):(A=e.clientY,t=e.clientX),{clientX:t,clientY:A}},Q=A=>{t.dragging=!0,t.isClick=!0;const{clientX:n,clientY:i}=x(A);e.vertical?t.startY=i:t.startX=n,t.startPosition=Number.parseFloat(C.value),t.newPosition=t.startPosition},E=A=>{if(t.dragging){let n;t.isClick=!1,m(),d();const{clientX:i,clientY:r}=x(A);e.vertical?(t.currentY=r,n=(t.startY-t.currentY)/l.value*100):(t.currentX=i,n=(t.currentX-t.startX)/l.value*100),t.newPosition=t.startPosition+n,_(t.newPosition)}},I=()=>{t.dragging&&(setTimeout((()=>{t.dragging=!1,t.hovering||B(),t.isClick||_(t.newPosition),h()}),0),window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",I),window.removeEventListener("touchend",I),window.removeEventListener("contextmenu",I))},_=n=>u(void 0,null,(function*(){if(null===n||Number.isNaN(+n))return;n<0?n=0:n>100&&(n=100);const s=100/((r.value-i.value)/o.value);let l=Math.round(n/s)*s*(r.value-i.value)*.01+i.value;l=Number.parseFloat(l.toFixed(a.value)),l!==e.modelValue&&A(Ue,l),t.dragging||e.modelValue===t.oldValue||(t.oldValue=e.modelValue),yield _n(),t.dragging&&m(),g.value.updatePopper()}));return In((()=>t.dragging),(e=>{f(e)})),{disabled:n,button:y,tooltip:g,tooltipVisible:p,showTooltip:s,wrapperStyle:w,formatValue:v,handleMouseEnter:()=>{t.hovering=!0,m()},handleMouseLeave:()=>{t.hovering=!1,t.dragging||B()},onButtonDown:e=>{n.value||(e.preventDefault(),Q(e),window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",I),window.addEventListener("touchend",I),window.addEventListener("contextmenu",I),y.value.focus())},onKeyDown:e=>{let t=!0;[pp,vp].includes(e.key)?b(-o.value):[mp,Bp].includes(e.key)?b(o.value):e.key===yp?n.value||(_(0),h()):e.key===Cp?n.value||(_(100),h()):e.key===bp?b(4*-o.value):e.key===wp?b(4*o.value):t=!1,t&&e.preventDefault()},setPosition:_}},Qp=ye({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ft,default:"top"}}),Ep={[Ue]:e=>Oe(e)},Ip=["tabindex"],_p=on({name:"ElSliderButton"});var Sp=xe(on(l(a({},_p),{props:Qp,emits:Ep,setup(e,{expose:t,emit:A}){const n=e,i=be("slider"),r=Vn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:n.modelValue}),{disabled:o,button:s,tooltip:a,showTooltip:l,tooltipVisible:c,wrapperStyle:u,formatValue:h,handleMouseEnter:d,handleMouseLeave:f,onButtonDown:g,onKeyDown:p,setPosition:v}=xp(n,r,A),{hovering:m,dragging:B}=Nn(r);return t({onButtonDown:g,onKeyDown:p,setPosition:v,hovering:m,dragging:B}),(e,t)=>(cn(),un("div",{ref_key:"button",ref:s,class:dn([fn(i).e("button-wrapper"),{hover:fn(m),dragging:fn(B)}]),style:Rn(fn(u)),tabindex:fn(o)?-1:0,onMouseenter:t[0]||(t[0]=(...e)=>fn(d)&&fn(d)(...e)),onMouseleave:t[1]||(t[1]=(...e)=>fn(f)&&fn(f)(...e)),onMousedown:t[2]||(t[2]=(...e)=>fn(g)&&fn(g)(...e)),onTouchstart:t[3]||(t[3]=(...e)=>fn(g)&&fn(g)(...e)),onFocus:t[4]||(t[4]=(...e)=>fn(d)&&fn(d)(...e)),onBlur:t[5]||(t[5]=(...e)=>fn(f)&&fn(f)(...e)),onKeydown:t[6]||(t[6]=(...e)=>fn(p)&&fn(p)(...e))},[Kn(fn(At),{ref_key:"tooltip",ref:a,visible:fn(c),placement:e.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!fn(l),persistent:""},{content:mn((()=>[pn("span",null,yn(fn(h)),1)])),default:mn((()=>[pn("div",{class:dn([fn(i).e("button"),{hover:fn(m),dragging:fn(B)}])},null,2)])),_:1},8,["visible","placement","popper-class","disabled"])],46,Ip))}})),[["__file","button.vue"]]);var Fp=on({name:"ElSliderMarker",props:ye({mark:{type:Qe([String,Object]),default:void 0}}),setup(e){const t=be("slider"),A=En((()=>Qn(e.mark)?e.mark:e.mark.label)),n=En((()=>Qn(e.mark)?void 0:e.mark.style));return()=>ui("div",{class:t.e("marks-text"),style:n.value},A.value)}});const kp=["id","role","aria-label","aria-labelledby"],Up={key:1},Op=on({name:"ElSlider"}),Dp=on(l(a({},Op),{props:hp,emits:fp,setup(e,{expose:t,emit:A}){const n=e,i=be("slider"),{t:r}=we(),o=Vn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:c,firstButton:h,secondButton:d,sliderDisabled:f,minValue:g,maxValue:p,runwayStyle:v,barStyle:m,resetSize:B,emitChange:y,onSliderWrapperPrevent:C,onSliderClick:w,onSliderDown:b,setFirstValue:x,setSecondValue:Q}=gp(n,o,A),{stops:E,getStopStyle:I}=((e,t,A,n)=>({stops:En((()=>{if(!e.showStops||e.min>e.max)return[];if(0===e.step)return[];const i=(e.max-e.min)/e.step,r=100*e.step/(e.max-e.min),o=Array.from({length:i-1}).map(((e,t)=>(t+1)*r));return e.range?o.filter((t=>t<100*(A.value-e.min)/(e.max-e.min)||t>100*(n.value-e.min)/(e.max-e.min))):o.filter((A=>A>100*(t.firstValue-e.min)/(e.max-e.min)))})),getStopStyle:t=>e.vertical?{bottom:`${t}%`}:{left:`${t}%`}}))(n,o,g,p),{inputId:_,isLabeledByFormItem:S}=Ne(n,{formItemContext:s}),F=Re(),k=En((()=>n.inputSize||F.value)),U=En((()=>n.label||n.ariaLabel||r("el.slider.defaultLabel",{min:n.min,max:n.max}))),O=En((()=>n.range?n.rangeStartLabel||r("el.slider.defaultRangeStartLabel"):U.value)),D=En((()=>n.formatValueText?n.formatValueText(N.value):`${N.value}`)),T=En((()=>n.rangeEndLabel||r("el.slider.defaultRangeEndLabel"))),M=En((()=>n.formatValueText?n.formatValueText(j.value):`${j.value}`)),L=En((()=>[i.b(),i.m(F.value),i.is("vertical",n.vertical),{[i.m("with-input")]:n.showInput}])),H=(e=>En((()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort(((e,t)=>e-t)).filter((t=>t<=e.max&&t>=e.min)).map((t=>({point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}))):[])))(n);((e,t,A,n,i,r)=>{const o=e=>{i(Ue,e),i(vt,e)},s=()=>e.range?![A.value,n.value].every(((e,A)=>e===t.oldValue[A])):e.modelValue!==t.oldValue,a=()=>{var A,n;e.min>e.max&&Ct("Slider","min should not be greater than max.");const i=e.modelValue;e.range&&Array.isArray(i)?i[1]<e.min?o([e.min,e.min]):i[0]>e.max?o([e.max,e.max]):i[0]<e.min?o([e.min,i[1]]):i[1]>e.max?o([i[0],e.max]):(t.firstValue=i[0],t.secondValue=i[1],s()&&(e.validateEvent&&(null==(A=null==r?void 0:r.validate)||A.call(r,"change").catch((e=>He()))),t.oldValue=i.slice())):e.range||"number"!=typeof i||Number.isNaN(i)||(i<e.min?o(e.min):i>e.max?o(e.max):(t.firstValue=i,s()&&(e.validateEvent&&(null==(n=null==r?void 0:r.validate)||n.call(r,"change").catch((e=>He()))),t.oldValue=i)))};a(),In((()=>t.dragging),(e=>{e||a()})),In((()=>e.modelValue),((e,A)=>{t.dragging||Array.isArray(e)&&Array.isArray(A)&&e.every(((e,t)=>e===A[t]))&&t.firstValue===e[0]&&t.secondValue===e[1]||a()}),{deep:!0}),In((()=>[e.min,e.max]),(()=>{a()}))})(n,o,g,p,A,s);const P=En((()=>{const e=[n.min,n.max,n.step].map((e=>{const t=`${e}`.split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)})),{sliderWrapper:R}=((e,t,A)=>{const n=sn();return ln((()=>u(void 0,null,(function*(){e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):("number"!=typeof e.modelValue||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),ht(window,"resize",A),yield _n(),A()})))),{sliderWrapper:n}})(n,o,B),{firstValue:N,secondValue:j,sliderSize:V}=Nn(o);return an(up,l(a({},Nn(n)),{sliderSize:V,disabled:f,precision:P,emitChange:y,resetSize:B,updateDragging:e=>{o.dragging=e}})),je({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-slider",ref:"https://element-plus.org/en-US/component/slider.html"},En((()=>!!n.label))),t({onSliderClick:w}),(e,t)=>{var A,n;return cn(),un("div",{id:e.range?fn(_):void 0,ref_key:"sliderWrapper",ref:R,class:dn(fn(L)),role:e.range?"group":void 0,"aria-label":e.range&&!fn(S)?fn(U):void 0,"aria-labelledby":e.range&&fn(S)?null==(A=fn(s))?void 0:A.labelId:void 0,onTouchstart:t[2]||(t[2]=(...e)=>fn(C)&&fn(C)(...e)),onTouchmove:t[3]||(t[3]=(...e)=>fn(C)&&fn(C)(...e))},[pn("div",{ref_key:"slider",ref:c,class:dn([fn(i).e("runway"),{"show-input":e.showInput&&!e.range},fn(i).is("disabled",fn(f))]),style:Rn(fn(v)),onMousedown:t[0]||(t[0]=(...e)=>fn(b)&&fn(b)(...e)),onTouchstart:t[1]||(t[1]=(...e)=>fn(b)&&fn(b)(...e))},[pn("div",{class:dn(fn(i).e("bar")),style:Rn(fn(m))},null,6),Kn(Sp,{id:e.range?void 0:fn(_),ref_key:"firstButton",ref:h,"model-value":fn(N),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":e.range||!fn(S)?fn(O):void 0,"aria-labelledby":!e.range&&fn(S)?null==(n=fn(s))?void 0:n.labelId:void 0,"aria-valuemin":e.min,"aria-valuemax":e.range?fn(j):e.max,"aria-valuenow":fn(N),"aria-valuetext":fn(D),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":fn(f),"onUpdate:modelValue":fn(x)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),e.range?(cn(),vn(Sp,{key:0,ref_key:"secondButton",ref:d,"model-value":fn(j),vertical:e.vertical,"tooltip-class":e.tooltipClass,placement:e.placement,role:"slider","aria-label":fn(T),"aria-valuemin":fn(N),"aria-valuemax":e.max,"aria-valuenow":fn(j),"aria-valuetext":fn(M),"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":fn(f),"onUpdate:modelValue":fn(Q)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Pn("v-if",!0),e.showStops?(cn(),un("div",Up,[(cn(!0),un(Ln,null,Zn(fn(E),((e,t)=>(cn(),un("div",{key:t,class:dn(fn(i).e("stop")),style:Rn(fn(I)(e))},null,6)))),128))])):Pn("v-if",!0),fn(H).length>0?(cn(),un(Ln,{key:2},[pn("div",null,[(cn(!0),un(Ln,null,Zn(fn(H),((e,t)=>(cn(),un("div",{key:t,style:Rn(fn(I)(e.position)),class:dn([fn(i).e("stop"),fn(i).e("marks-stop")])},null,6)))),128))]),pn("div",{class:dn(fn(i).e("marks"))},[(cn(!0),un(Ln,null,Zn(fn(H),((e,t)=>(cn(),vn(fn(Fp),{key:t,mark:e.mark,style:Rn(fn(I)(e.position))},null,8,["mark","style"])))),128))],2)],64)):Pn("v-if",!0)],38),e.showInput&&!e.range?(cn(),vn(fn(Rg),{key:0,ref:"input","model-value":fn(N),class:dn(fn(i).e("input")),step:e.step,disabled:fn(f),controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:fn(k),"onUpdate:modelValue":fn(x),onChange:fn(y)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Pn("v-if",!0)],42,kp)}}}));const Tp=Ie(xe(Dp,[["__file","slider.vue"]])),Mp=ye(a({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:Lt},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:Ce},activeActionIcon:{type:Ce},activeIcon:{type:Ce},inactiveIcon:{type:Ce},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Qe(Function)},id:String,tabindex:{type:[String,Number]},label:{type:String,default:void 0}},ke(["ariaLabel"]))),Lp={[Ue]:e=>De(e)||Qn(e)||Oe(e),[Ve]:e=>De(e)||Qn(e)||Oe(e),[vt]:e=>De(e)||Qn(e)||Oe(e)},Hp=["onClick"],Pp=["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"],Rp=["aria-hidden"],Np=["aria-hidden"],jp=["aria-hidden"],Vp="ElSwitch",Kp=on({name:Vp});const Gp=Ie(xe(on(l(a({},Kp),{props:Mp,emits:Lp,setup(e,{expose:t,emit:A}){const n=e,{formItem:i}=Le(),r=Re(),o=be("switch"),{inputId:s}=Ne(n,{formItemContext:i}),a=Me(En((()=>n.loading))),l=sn(!1!==n.modelValue),c=sn(),u=sn(),h=En((()=>[o.b(),o.m(r.value),o.is("disabled",a.value),o.is("checked",v.value)])),d=En((()=>[o.e("label"),o.em("label","left"),o.is("active",!v.value)])),f=En((()=>[o.e("label"),o.em("label","right"),o.is("active",v.value)])),g=En((()=>({width:$e(n.width)})));In((()=>n.modelValue),(()=>{l.value=!0}));const p=En((()=>!!l.value&&n.modelValue)),v=En((()=>p.value===n.activeValue));[n.activeValue,n.inactiveValue].includes(p.value)||(A(Ue,n.inactiveValue),A(Ve,n.inactiveValue),A(vt,n.inactiveValue)),In(v,(e=>{var t;c.value.checked=e,n.validateEvent&&(null==(t=null==i?void 0:i.validate)||t.call(i,"change").catch((e=>He())))}));const m=()=>{const e=v.value?n.inactiveValue:n.activeValue;A(Ue,e),A(Ve,e),A(vt,e),_n((()=>{c.value.checked=v.value}))},B=()=>{if(a.value)return;const{beforeChange:e}=n;if(!e)return void m();const t=e();[hi(t),De(t)].includes(!0)||Ct(Vp,"beforeChange must return type `Promise<boolean>` or `boolean`"),hi(t)?t.then((e=>{e&&m()})).catch((e=>{})):t&&m()};return ln((()=>{c.value.checked=v.value})),je({from:"label",replacement:"aria-label",version:"2.8.0",scope:"el-switch",ref:"https://element-plus.org/en-US/component/switch.html"},En((()=>!!n.label))),t({focus:()=>{var e,t;null==(t=null==(e=c.value)?void 0:e.focus)||t.call(e)},checked:v}),(e,t)=>(cn(),un("div",{class:dn(fn(h)),onClick:Tn(B,["prevent"])},[pn("input",{id:fn(s),ref_key:"input",ref:c,class:dn(fn(o).e("input")),type:"checkbox",role:"switch","aria-checked":fn(v),"aria-disabled":fn(a),"aria-label":e.label||e.ariaLabel,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:fn(a),tabindex:e.tabindex,onChange:m,onKeydown:zn(B,["enter"])},null,42,Pp),e.inlinePrompt||!e.inactiveIcon&&!e.inactiveText?Pn("v-if",!0):(cn(),un("span",{key:0,class:dn(fn(d))},[e.inactiveIcon?(cn(),vn(fn(Ee),{key:0},{default:mn((()=>[(cn(),vn(Bn(e.inactiveIcon)))])),_:1})):Pn("v-if",!0),!e.inactiveIcon&&e.inactiveText?(cn(),un("span",{key:1,"aria-hidden":fn(v)},yn(e.inactiveText),9,Rp)):Pn("v-if",!0)],2)),pn("span",{ref_key:"core",ref:u,class:dn(fn(o).e("core")),style:Rn(fn(g))},[e.inlinePrompt?(cn(),un("div",{key:0,class:dn(fn(o).e("inner"))},[e.activeIcon||e.inactiveIcon?(cn(),vn(fn(Ee),{key:0,class:dn(fn(o).is("icon"))},{default:mn((()=>[(cn(),vn(Bn(fn(v)?e.activeIcon:e.inactiveIcon)))])),_:1},8,["class"])):e.activeText||e.inactiveText?(cn(),un("span",{key:1,class:dn(fn(o).is("text")),"aria-hidden":!fn(v)},yn(fn(v)?e.activeText:e.inactiveText),11,Np)):Pn("v-if",!0)],2)):Pn("v-if",!0),pn("div",{class:dn(fn(o).e("action"))},[e.loading?(cn(),vn(fn(Ee),{key:0,class:dn(fn(o).is("loading"))},{default:mn((()=>[Kn(fn(Ht))])),_:1},8,["class"])):fn(v)?hn(e.$slots,"active-action",{key:1},(()=>[e.activeActionIcon?(cn(),vn(fn(Ee),{key:0},{default:mn((()=>[(cn(),vn(Bn(e.activeActionIcon)))])),_:1})):Pn("v-if",!0)])):fn(v)?Pn("v-if",!0):hn(e.$slots,"inactive-action",{key:2},(()=>[e.inactiveActionIcon?(cn(),vn(fn(Ee),{key:0},{default:mn((()=>[(cn(),vn(Bn(e.inactiveActionIcon)))])),_:1})):Pn("v-if",!0)]))],2)],6),e.inlinePrompt||!e.activeIcon&&!e.activeText?Pn("v-if",!0):(cn(),un("span",{key:1,class:dn(fn(f))},[e.activeIcon?(cn(),vn(fn(Ee),{key:0},{default:mn((()=>[(cn(),vn(Bn(e.activeIcon)))])),_:1})):Pn("v-if",!0),!e.activeIcon&&e.activeText?(cn(),un("span",{key:1,"aria-hidden":!fn(v)},yn(e.activeText),9,jp)):Pn("v-if",!0)],2))],10,Hp))}})),[["__file","switch.vue"]])),Yp="$treeNodeId",Xp=function(e,t){t&&!t[Yp]&&Object.defineProperty(t,Yp,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},zp=function(e,t){return e?t[e]:t[Yp]},Wp=(e,t,A)=>{const n=e.value.currentNode;A();const i=e.value.currentNode;n!==i&&t("current-change",i?i.data:null,i)},$p=e=>{let t=!0,A=!0,n=!0;for(let i=0,r=e.length;i<r;i++){const r=e[i];(!0!==r.checked||r.indeterminate)&&(t=!1,r.disabled||(n=!1)),(!1!==r.checked||r.indeterminate)&&(A=!1)}return{all:t,none:A,allWithoutDisable:n,half:!t&&!A}},Jp=function(e){if(0===e.childNodes.length||e.loading)return;const{all:t,none:A,half:n}=$p(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):n?(e.checked=!1,e.indeterminate=!0):A&&(e.checked=!1,e.indeterminate=!1);const i=e.parent;i&&0!==i.level&&(e.store.checkStrictly||Jp(i))},qp=function(e,t){const A=e.store.props,n=e.data||{},i=A[t];if("function"==typeof i)return i(n,e);if("string"==typeof i)return n[i];if(void 0===i){const e=n[t];return void 0===e?"":e}};let Zp=0,ev=class e{constructor(e){this.id=Zp++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Jn(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&void 0!==t.isLeaf){const e=qp(this,"isLeaf");"boolean"==typeof e&&(this.isLeafByUser=e)}if(!0!==e.lazy&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Xp(this,this.data),!this.data)return;const A=e.defaultExpandedKeys,n=e.key;n&&A&&A.includes(this.key)&&this.expand(null,e.autoExpandParent),n&&void 0!==e.currentNodeKey&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),!this.parent||1!==this.level&&!0!==this.parent.expanded||(this.canFocus=!0)}setData(e){let t;Array.isArray(e)||Xp(this,e),this.data=e,this.childNodes=[],t=0===this.level&&Array.isArray(this.data)?this.data:qp(this,"children")||[];for(let A=0,n=t.length;A<n;A++)this.insertChild({data:t[A]})}get label(){return qp(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return qp(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some((A=>A===e||t&&A.contains(e)))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(t,A,n){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof e)){if(!n){const e=this.getChildren(!0);e.includes(t.data)||(void 0===A||A<0?e.push(t.data):e.splice(A,0,t.data))}Object.assign(t,{parent:this,store:this.store}),(t=Vn(new e(t)))instanceof e&&t.initialize()}t.level=this.level+1,void 0===A||A<0?this.childNodes.push(t):this.childNodes.splice(A,0,t),this.updateLeafState()}insertBefore(e,t){let A;t&&(A=this.childNodes.indexOf(t)),this.insertChild(e,A)}insertAfter(e,t){let A;t&&(A=this.childNodes.indexOf(t),-1!==A&&(A+=1)),this.insertChild(e,A)}removeChild(e){const t=this.getChildren()||[],A=t.indexOf(e.data);A>-1&&t.splice(A,1);const n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let A=0;A<this.childNodes.length;A++)if(this.childNodes[A].data===e){t=this.childNodes[A];break}t&&this.removeChild(t)}expand(e,t){const A=()=>{if(t){let e=this.parent;for(;e.level>0;)e.expanded=!0,e=e.parent}this.expanded=!0,e&&e(),this.childNodes.forEach((e=>{e.canFocus=!0}))};this.shouldLoadData()?this.loadData((e=>{Array.isArray(e)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Jp(this),A())})):A()}doCreateChildren(e,t={}){e.forEach((e=>{this.insertChild(Object.assign({data:e},t),void 0,!0)}))}collapse(){this.expanded=!1,this.childNodes.forEach((e=>{e.canFocus=!1}))}shouldLoadData(){return!0===this.store.lazy&&this.store.load&&!this.loaded}updateLeafState(){if(!0===this.store.lazy&&!0!==this.loaded&&void 0!==this.isLeafByUser)return void(this.isLeaf=this.isLeafByUser);const e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}setChecked(e,t,A,n){if(this.indeterminate="half"===e,this.checked=!0===e,this.store.checkStrictly)return;if(!this.shouldLoadData()||this.store.checkDescendants){const{all:A,allWithoutDisable:i}=$p(this.childNodes);this.isLeaf||A||!i||(this.checked=!1,e=!1);const r=()=>{if(t){const A=this.childNodes;for(let o=0,s=A.length;o<s;o++){const i=A[o];n=n||!1!==e;const r=i.disabled?i.checked:n;i.setChecked(r,t,!0,n)}const{half:i,all:r}=$p(A);r||(this.checked=r,this.indeterminate=i)}};if(this.shouldLoadData())return void this.loadData((()=>{r(),Jp(this)}),{checked:!1!==e});r()}const i=this.parent;i&&0!==i.level&&(A||Jp(i))}getChildren(e=!1){if(0===this.level)return this.data;const t=this.data;if(!t)return null;const A=this.store.props;let n="children";return A&&(n=A.children||"children"),void 0===t[n]&&(t[n]=null),e&&!t[n]&&(t[n]=[]),t[n]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map((e=>e.data)),A={},n=[];e.forEach(((e,i)=>{const r=e[Yp];!!r&&t.findIndex((e=>e[Yp]===r))>=0?A[r]={index:i,data:e}:n.push({index:i,data:e})})),this.store.lazy||t.forEach((e=>{A[e[Yp]]||this.removeChildByData(e)})),n.forEach((({index:e,data:t})=>{this.insertChild({data:t},e)})),this.updateLeafState()}loadData(e,t={}){if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(t).length)e&&e.call(this);else{this.loading=!0;const A=A=>{this.childNodes=[],this.doCreateChildren(A,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,A)},n=()=>{this.loading=!1};this.store.load(this,A,n)}}eachNode(e){const t=[this];for(;t.length;){const A=t.shift();t.unshift(...A.childNodes),e(A)}}reInitChecked(){this.store.checkStrictly||Jp(this)}};class tv{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Jn(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new ev({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){(0,this.load)(this.root,(e=>{this.root.doCreateChildren(e),this._initDefaultCheckedNodes()}))}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,A=this.lazy,n=function(i){const r=i.root?i.root.childNodes:i.childNodes;if(r.forEach((A=>{A.visible=t.call(A,e,A.data,A),n(A)})),!i.visible&&r.length){let e=!0;e=!r.some((e=>e.visible)),i.root?i.root.visible=!1===e:i.visible=!1===e}e&&i.visible&&!i.isLeaf&&(A&&!i.loaded||i.expand())};n(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof ev)return e;const t=Fn(e)?zp(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const A=this.getNode(t);A.parent.insertBefore({data:e},A)}insertAfter(e,t){const A=this.getNode(t);A.parent.insertAfter({data:e},A)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const A=Pe(t)?this.root:this.getNode(t);A&&A.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach((e=>{const A=t[e];A&&A.setChecked(!0,!this.checkStrictly)}))}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;if(e&&e.data)if(t){void 0!==e.key&&(this.nodesMap[e.key]=e)}else this.nodesMap[e.id]=e}deregisterNode(e){this.key&&e&&e.data&&(e.childNodes.forEach((e=>{this.deregisterNode(e)})),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const A=[],n=function(i){(i.root?i.root.childNodes:i.childNodes).forEach((i=>{(i.checked||t&&i.indeterminate)&&(!e||e&&i.isLeaf)&&A.push(i.data),n(i)}))};return n(this),A}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map((e=>(e||{})[this.key]))}getHalfCheckedNodes(){const e=[],t=function(A){(A.root?A.root.childNodes:A.childNodes).forEach((A=>{A.indeterminate&&e.push(A.data),t(A)}))};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map((e=>(e||{})[this.key]))}_getAllNodes(){const e=[],t=this.nodesMap;for(const A in t)Jn(t,A)&&e.push(t[A]);return e}updateChildren(e,t){const A=this.nodesMap[e];if(!A)return;const n=A.childNodes;for(let i=n.length-1;i>=0;i--){const e=n[i];this.remove(e.data)}for(let i=0,r=t.length;i<r;i++){const e=t[i];this.append(e,A.data)}}_setCheckedKeys(e,t=!1,A){const n=this._getAllNodes().sort(((e,t)=>e.level-t.level)),i=Object.create(null),r=Object.keys(A);n.forEach((e=>e.setChecked(!1,!1)));const o=t=>{t.childNodes.forEach((t=>{var A;i[t.data[e]]=!0,(null==(A=t.childNodes)?void 0:A.length)&&o(t)}))};for(let s=0,a=n.length;s<a;s++){const A=n[s],a=A.data[e].toString();if(r.includes(a)){if(A.childNodes.length&&o(A),A.isLeaf||this.checkStrictly)A.setChecked(!0,!1);else if(A.setChecked(!0,!0),t){A.setChecked(!1,!1);const e=function(t){t.childNodes.forEach((t=>{t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(A)}}else A.checked&&!i[a]&&A.setChecked(!1,!1)}}setCheckedNodes(e,t=!1){const A=this.key,n={};e.forEach((e=>{n[(e||{})[A]]=!0})),this._setCheckedKeys(A,t,n)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const A=this.key,n={};e.forEach((e=>{n[e]=!0})),this._setCheckedKeys(A,t,n)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach((e=>{const t=this.getNode(e);t&&t.expand(null,this.autoExpandParent)}))}setChecked(e,t,A){const n=this.getNode(e);n&&n.setChecked(!!t,A)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const A=e[this.key],n=this.nodesMap[A];this.setCurrentNode(n),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(null==e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);const A=this.getNode(e);A&&(this.setCurrentNode(A),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Av=on({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=be("tree"),A=gn("NodeInstance"),n=gn("RootTree");return()=>{const i=e.node,{data:r,store:o}=i;return e.renderContent?e.renderContent(ui,{_self:A,node:i,data:r,store:o}):hn(n.ctx.slots,"default",{node:i,data:r},(()=>[ui("span",{class:t.be("node","label")},[i.label])]))}}});var nv=xe(Av,[["__file","tree-node-content.vue"]]);function iv(e){const t=gn("TreeNodeMap",null),A={treeNodeExpand:t=>{e.node!==t&&e.node.collapse()},children:[]};return t&&t.children.push(A),an("TreeNodeMap",A),{broadcastExpanded:t=>{if(e.accordion)for(const e of A.children)e.treeNodeExpand(t)}}}const rv=Symbol("dragEvents");const ov=on({name:"ElTreeNode",components:{ElCollapseTransition:Lf,ElCheckbox:zd,NodeContent:nv,ElIcon:Ee,Loading:Ht},props:{node:{type:ev,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const A=be("tree"),{broadcastExpanded:n}=iv(e),i=gn("RootTree"),r=sn(!1),o=sn(!1),s=sn(null),a=sn(null),l=sn(null),c=gn(rv),u=Cn();an("NodeInstance",u),e.node.expanded&&(r.value=!0,o.value=!0);const h=i.props.props.children||"children";In((()=>{const t=e.node.data[h];return t&&[...t]}),(()=>{e.node.updateChildren()})),In((()=>e.node.indeterminate),(t=>{d(e.node.checked,t)})),In((()=>e.node.checked),(t=>{d(t,e.node.indeterminate)})),In((()=>e.node.childNodes.length),(()=>e.node.reInitChecked())),In((()=>e.node.expanded),(e=>{_n((()=>r.value=e)),e&&(o.value=!0)}));const d=(t,A)=>{s.value===t&&a.value===A||i.ctx.emit("check-change",e.node.data,t,A),s.value=t,a.value=A},f=()=>{e.node.isLeaf||(r.value?(i.ctx.emit("node-collapse",e.node.data,e.node,u),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,u)))},g=(t,A)=>{e.node.setChecked(A.target.checked,!i.props.checkStrictly),_n((()=>{const t=i.store.value;i.ctx.emit("check",e.node.data,{checkedNodes:t.getCheckedNodes(),checkedKeys:t.getCheckedKeys(),halfCheckedNodes:t.getHalfCheckedNodes(),halfCheckedKeys:t.getHalfCheckedKeys()})}))};return{ns:A,node$:l,tree:i,expanded:r,childNodeRendered:o,oldChecked:s,oldIndeterminate:a,getNodeKey:e=>zp(i.props.nodeKey,e.data),getNodeClass:t=>{const A=e.props.class;if(!A)return{};let n;if(xn(A)){const{data:e}=t;n=A(e,t)}else n=A;return Qn(n)?{[n]:!0}:n},handleSelectChange:d,handleClick:t=>{Wp(i.store,i.ctx.emit,(()=>i.store.value.setCurrentNode(e.node))),i.currentNode.value=e.node,i.props.expandOnClickNode&&f(),i.props.checkOnClickNode&&!e.node.disabled&&g(null,{target:{checked:!e.node.checked}}),i.ctx.emit("node-click",e.node.data,e.node,u,t)},handleContextMenu:t=>{i.instance.vnode.props.onNodeContextmenu&&(t.stopPropagation(),t.preventDefault()),i.ctx.emit("node-contextmenu",t,e.node.data,e.node,u)},handleExpandIconClick:f,handleCheckChange:g,handleChildNodeExpand:(e,t,A)=>{n(t),i.ctx.emit("node-expand",e,t,A)},handleDragStart:t=>{i.props.draggable&&c.treeNodeDragStart({event:t,treeNode:e})},handleDragOver:t=>{t.preventDefault(),i.props.draggable&&c.treeNodeDragOver({event:t,treeNode:{$el:l.value,node:e.node}})},handleDrop:e=>{e.preventDefault()},handleDragEnd:e=>{i.props.draggable&&c.treeNodeDragEnd(e)},CaretRight:Nt}}}),sv=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],av=["aria-expanded"];const lv=on({name:"ElTree",components:{ElTreeNode:xe(ov,[["render",function(e,t,A,n,i,r){const o=si("el-icon"),s=si("el-checkbox"),a=si("loading"),l=si("node-content"),c=si("el-tree-node"),u=si("el-collapse-transition");return On((cn(),un("div",{ref:"node$",class:dn([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=Tn(((...t)=>e.handleClick&&e.handleClick(...t)),["stop"])),onContextmenu:t[2]||(t[2]=(...t)=>e.handleContextMenu&&e.handleContextMenu(...t)),onDragstart:t[3]||(t[3]=Tn(((...t)=>e.handleDragStart&&e.handleDragStart(...t)),["stop"])),onDragover:t[4]||(t[4]=Tn(((...t)=>e.handleDragOver&&e.handleDragOver(...t)),["stop"])),onDragend:t[5]||(t[5]=Tn(((...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),["stop"])),onDrop:t[6]||(t[6]=Tn(((...t)=>e.handleDrop&&e.handleDrop(...t)),["stop"]))},[pn("div",{class:dn(e.ns.be("node","content")),style:Rn({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(cn(),vn(o,{key:0,class:dn([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:Tn(e.handleExpandIconClick,["stop"])},{default:mn((()=>[(cn(),vn(Bn(e.tree.props.icon||e.CaretRight)))])),_:1},8,["class","onClick"])):Pn("v-if",!0),e.showCheckbox?(cn(),vn(s,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=Tn((()=>{}),["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):Pn("v-if",!0),e.node.loading?(cn(),vn(o,{key:2,class:dn([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:mn((()=>[Kn(a)])),_:1},8,["class"])):Pn("v-if",!0),Kn(l,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),Kn(u,null,{default:mn((()=>[!e.renderAfterExpand||e.childNodeRendered?On((cn(),un("div",{key:0,class:dn(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(cn(!0),un(Ln,null,Zn(e.node.childNodes,(t=>(cn(),vn(c,{key:e.getNodeKey(t),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"])))),128))],10,av)),[[Wn,e.expanded]]):Pn("v-if",!0)])),_:1})],42,sv)),[[Wn,e.node.visible]])}],["__file","tree-node.vue"]])},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Ce}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:A}=we(),n=be("tree"),i=gn(jg,null),r=sn(new tv({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));r.value.initialize();const o=sn(r.value.root),s=sn(null),a=sn(null),l=sn(null),{broadcastExpanded:c}=iv(e),{dragState:u}=function({props:e,ctx:t,el$:A,dropIndicator$:n,store:i}){const r=be("tree"),o=sn({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return an(rv,{treeNodeDragStart:({event:A,treeNode:n})=>{if("function"==typeof e.allowDrag&&!e.allowDrag(n.node))return A.preventDefault(),!1;A.dataTransfer.effectAllowed="move";try{A.dataTransfer.setData("text/plain","")}catch(i){}o.value.draggingNode=n,t.emit("node-drag-start",n.node,A)},treeNodeDragOver:({event:i,treeNode:s})=>{const a=s,l=o.value.dropNode;l&&l.node.id!==a.node.id&&Pt(l.$el,r.is("drop-inner"));const c=o.value.draggingNode;if(!c||!a)return;let u=!0,h=!0,d=!0,f=!0;"function"==typeof e.allowDrop&&(u=e.allowDrop(c.node,a.node,"prev"),f=h=e.allowDrop(c.node,a.node,"inner"),d=e.allowDrop(c.node,a.node,"next")),i.dataTransfer.dropEffect=h||u||d?"move":"none",(u||h||d)&&(null==l?void 0:l.node.id)!==a.node.id&&(l&&t.emit("node-drag-leave",c.node,l.node,i),t.emit("node-drag-enter",c.node,a.node,i)),o.value.dropNode=u||h||d?a:null,a.node.nextSibling===c.node&&(d=!1),a.node.previousSibling===c.node&&(u=!1),a.node.contains(c.node,!1)&&(h=!1),(c.node===a.node||c.node.contains(a.node))&&(u=!1,h=!1,d=!1);const g=a.$el.querySelector(`.${r.be("node","content")}`).getBoundingClientRect(),p=A.value.getBoundingClientRect();let v;const m=u?h?.25:d?.45:1:-1,B=d?h?.75:u?.55:0:1;let y=-9999;const C=i.clientY-g.top;v=C<g.height*m?"before":C>g.height*B?"after":h?"inner":"none";const w=a.$el.querySelector(`.${r.be("node","expand-icon")}`).getBoundingClientRect(),b=n.value;"before"===v?y=w.top-p.top:"after"===v&&(y=w.bottom-p.top),b.style.top=`${y}px`,b.style.left=w.right-p.left+"px","inner"===v?Rt(a.$el,r.is("drop-inner")):Pt(a.$el,r.is("drop-inner")),o.value.showDropIndicator="before"===v||"after"===v,o.value.allowDrop=o.value.showDropIndicator||f,o.value.dropType=v,t.emit("node-drag-over",c.node,a.node,i)},treeNodeDragEnd:e=>{const{draggingNode:A,dropType:n,dropNode:s}=o.value;if(e.preventDefault(),e.dataTransfer.dropEffect="move",A&&s){const o={data:A.node.data};"none"!==n&&A.node.remove(),"before"===n?s.node.parent.insertBefore(o,s.node):"after"===n?s.node.parent.insertAfter(o,s.node):"inner"===n&&s.node.insertChild(o),"none"!==n&&(i.value.registerNode(o),i.value.key&&A.node.eachNode((e=>{var t;null==(t=i.value.nodesMap[e.data[i.value.key]])||t.setChecked(e.checked,!i.value.checkStrictly)}))),Pt(s.$el,r.is("drop-inner")),t.emit("node-drag-end",A.node,s.node,n,e),"none"!==n&&t.emit("node-drop",A.node,s.node,n,e)}A&&!s&&t.emit("node-drag-end",A.node,null,n,e),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}({props:e,ctx:t,el$:a,dropIndicator$:l,store:r});!function({el$:e},t){const A=be("tree"),n=$n([]),i=$n([]);ln((()=>{r()})),ii((()=>{n.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),i.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))})),In(i,(e=>{e.forEach((e=>{e.setAttribute("tabindex","-1")}))})),ht(e,"keydown",(i=>{const r=i.target;if(!r.className.includes(A.b("node")))return;const o=i.code;n.value=Array.from(e.value.querySelectorAll(`.${A.is("focusable")}[role=treeitem]`));const s=n.value.indexOf(r);let a;if([nt.up,nt.down].includes(o)){if(i.preventDefault(),o===nt.up){a=-1===s?0:0!==s?s-1:n.value.length-1;const e=a;for(;!t.value.getNode(n.value[a].dataset.key).canFocus;){if(a--,a===e){a=-1;break}a<0&&(a=n.value.length-1)}}else{a=-1===s?0:s<n.value.length-1?s+1:0;const e=a;for(;!t.value.getNode(n.value[a].dataset.key).canFocus;){if(a++,a===e){a=-1;break}a>=n.value.length&&(a=0)}}-1!==a&&n.value[a].focus()}[nt.left,nt.right].includes(o)&&(i.preventDefault(),r.click());const l=r.querySelector('[type="checkbox"]');[nt.enter,nt.space].includes(o)&&l&&(i.preventDefault(),l.click())}));const r=()=>{var t;n.value=Array.from(e.value.querySelectorAll(`.${A.is("focusable")}[role=treeitem]`)),i.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const r=e.value.querySelectorAll(`.${A.is("checked")}[role=treeitem]`);r.length?r[0].setAttribute("tabindex","0"):null==(t=n.value[0])||t.setAttribute("tabindex","0")}}({el$:a},r);const h=En((()=>{const{childNodes:e}=o.value,t=!!i&&0!==i.hasFilteredOptions;return(!e||0===e.length||e.every((({visible:e})=>!e)))&&!t}));In((()=>e.currentNodeKey),(e=>{r.value.setCurrentNodeKey(e)})),In((()=>e.defaultCheckedKeys),(e=>{r.value.setDefaultCheckedKey(e)})),In((()=>e.defaultExpandedKeys),(e=>{r.value.setDefaultExpandedKeys(e)})),In((()=>e.data),(e=>{r.value.setData(e)}),{deep:!0}),In((()=>e.checkStrictly),(e=>{r.value.checkStrictly=e}));const d=()=>{const e=r.value.getCurrentNode();return e?e.data:null};return an("RootTree",{ctx:t,props:e,store:r,root:o,currentNode:s,instance:Cn()}),an(jt,void 0),{ns:n,store:r,root:o,currentNode:s,dragState:u,el$:a,dropIndicator$:l,isEmpty:h,filter:t=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");r.value.filter(t)},getNodeKey:t=>zp(e.nodeKey,t.data),getNodePath:t=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const A=r.value.getNode(t);if(!A)return[];const n=[A.data];let i=A.parent;for(;i&&i!==o.value;)n.push(i.data),i=i.parent;return n.reverse()},getCheckedNodes:(e,t)=>r.value.getCheckedNodes(e,t),getCheckedKeys:e=>r.value.getCheckedKeys(e),getCurrentNode:d,getCurrentKey:()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const t=d();return t?t[e.nodeKey]:null},setCheckedNodes:(t,A)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");r.value.setCheckedNodes(t,A)},setCheckedKeys:(t,A)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");r.value.setCheckedKeys(t,A)},setChecked:(e,t,A)=>{r.value.setChecked(e,t,A)},getHalfCheckedNodes:()=>r.value.getHalfCheckedNodes(),getHalfCheckedKeys:()=>r.value.getHalfCheckedKeys(),setCurrentNode:(A,n=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Wp(r,t.emit,(()=>r.value.setUserCurrentNode(A,n)))},setCurrentKey:(A,n=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Wp(r,t.emit,(()=>r.value.setCurrentNodeKey(A,n)))},t:A,getNode:e=>r.value.getNode(e),remove:e=>{r.value.remove(e)},append:(e,t)=>{r.value.append(e,t)},insertBefore:(e,t)=>{r.value.insertBefore(e,t)},insertAfter:(e,t)=>{r.value.insertAfter(e,t)},handleNodeExpand:(e,A,n)=>{c(A),t.emit("node-expand",e,A,n)},updateKeyChildren:(t,A)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");r.value.updateChildren(t,A)}}}});var cv=xe(lv,[["render",function(e,t,A,n,i,r){const o=si("el-tree-node");return cn(),un("div",{ref:"el$",class:dn([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner","inner"===e.dragState.dropType),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(cn(!0),un(Ln,null,Zn(e.root.childNodes,(t=>(cn(),vn(o,{key:e.getNodeKey(t),node:t,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"])))),128)),e.isEmpty?(cn(),un("div",{key:0,class:dn(e.ns.e("empty-block"))},[hn(e.$slots,"empty",{},(()=>{var t;return[pn("span",{class:dn(e.ns.e("empty-text"))},yn(null!=(t=e.emptyText)?t:e.t("el.tree.emptyText")),3)]}))],2)):Pn("v-if",!0),On(pn("div",{ref:"dropIndicator$",class:dn(e.ns.e("drop-indicator"))},null,2),[[Wn,e.dragState.showDropIndicator]])],2)}],["__file","tree.vue"]]);cv.install=e=>{e.component(cv.name,cv)};const uv=cv,hv=on({extends:ip,setup(e,t){const A=ip.setup(e,t);delete A.selectOptionClick;const n=Cn().proxy;return _n((()=>{A.select.states.cachedOptions.get(n.value)||A.select.onOptionCreate(n)})),In((()=>t.attrs.visible),(e=>{A.states.visible=e}),{immediate:!0}),A},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function dv(e){return e||0===e}function fv(e){return Array.isArray(e)&&e.length}function gv(e){return Array.isArray(e)?e:dv(e)?[e]:[]}function pv(e,t,A,n,i){for(let r=0;r<e.length;r++){const o=e[r];if(t(o,r,e,i))return n?n(o,r,e,i):o;{const e=A(o);if(fv(e)){const i=pv(e,t,A,n,o);if(i)return i}}}}function vv(e,t,A,n){for(let i=0;i<e.length;i++){const r=e[i];t(r,i,e,n);const o=A(r);fv(o)&&vv(o,t,A,r)}}var mv=on({props:{data:{type:Array,default:()=>[]}},setup(e){const t=gn(jg);return In((()=>e.data),(()=>{var A;e.data.forEach((e=>{t.states.cachedOptions.has(e.value)||t.states.cachedOptions.set(e.value,e)}));const n=(null==(A=t.selectRef)?void 0:A.querySelectorAll("input"))||[];Be&&!Array.from(n).includes(document.activeElement)&&t.setSelected()}),{flush:"post",immediate:!0}),()=>{}}});const Bv=on({name:"ElTreeSelect",inheritAttrs:!1,props:l(a(a({},np.props),uv.props),{cacheData:{type:Array,default:()=>[]}}),setup(e,t){const{slots:A,expose:o}=t,s=sn(),c=sn(),u=En((()=>e.nodeKey||e.valueKey||"value")),h=((e,{attrs:t,emit:A},{select:n,tree:i,key:r})=>{const o=be("tree-select");return In((()=>e.data),(()=>{e.filterable&&_n((()=>{var e,t;null==(t=i.value)||t.filter(null==(e=n.value)?void 0:e.states.inputValue)}))}),{flush:"post"}),l(a(a({},ve(Nn(e),Object.keys(np.props))),t),{"onUpdate:modelValue":e=>A(Ue,e),valueKey:r,popperClass:En((()=>{const t=[o.e("popper")];return e.popperClass&&t.push(e.popperClass),t.join(" ")})),filterMethod:(t="")=>{var A;e.filterMethod?e.filterMethod(t):e.remoteMethod?e.remoteMethod(t):null==(A=i.value)||A.filter(t)}})})(e,t,{select:s,tree:c,key:u}),d=((e,{attrs:t,slots:A,emit:n},{select:i,tree:r,key:o})=>{In((()=>e.modelValue),(()=>{e.showCheckbox&&_n((()=>{const t=r.value;t&&!Vl(t.getCheckedKeys(),gv(e.modelValue))&&t.setCheckedKeys(gv(e.modelValue))}))}),{immediate:!0,deep:!0});const s=En((()=>a({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},e.props))),c=(e,t)=>{var A;const n=s.value[e];return xn(n)?n(t,null==(A=r.value)?void 0:A.getNode(c("value",t))):t[n]},u=gv(e.modelValue).map((t=>pv(e.data||[],(e=>c("value",e)===t),(e=>c("children",e)),((e,t,A,n)=>n&&c("value",n))))).filter((e=>dv(e))),h=En((()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const t=[];return vv(e.data.concat(e.cacheData),(e=>{const A=c("value",e);t.push({value:A,currentLabel:c("label",e),isDisabled:c("disabled",e)})}),(e=>c("children",e))),t}));return l(a(a({},ve(Nn(e),Object.keys(uv.props))),t),{nodeKey:o,expandOnClickNode:En((()=>!e.checkStrictly&&e.expandOnClickNode)),defaultExpandedKeys:En((()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(u):u)),renderContent:(t,{node:n,data:i,store:r})=>t(hv,{value:c("value",i),label:c("label",i),disabled:c("disabled",i),visible:n.visible},e.renderContent?()=>e.renderContent(t,{node:n,data:i,store:r}):A.default?()=>A.default({node:n,data:i,store:r}):void 0),filterNodeMethod:(t,A,n)=>e.filterNodeMethod?e.filterNodeMethod(t,A,n):!t||new RegExp(wt(t),"i").test(c("label",A)||""),onNodeClick:(A,n,r)=>{var o,s,a,l;if(null==(o=t.onNodeClick)||o.call(t,A,n,r),!e.showCheckbox||!e.checkOnClickNode){if(e.showCheckbox||!e.checkStrictly&&!n.isLeaf)e.expandOnClickNode&&r.proxy.handleExpandIconClick();else if(!c("disabled",A)){const e=null==(s=i.value)?void 0:s.states.options.get(c("value",A));null==(a=i.value)||a.handleOptionSelect(e)}null==(l=i.value)||l.focus()}},onCheck:(A,o)=>{var s;if(!e.showCheckbox)return;const a=c("value",A),l={};vv([r.value.store.root],(e=>l[e.key]=e),(e=>e.childNodes));const u=o.checkedKeys,h=e.multiple?gv(e.modelValue).filter((e=>!(e in l)&&!u.includes(e))):[],d=h.concat(u);if(e.checkStrictly)n(Ue,e.multiple?d:d.includes(a)?a:void 0);else if(e.multiple)n(Ue,h.concat(r.value.getCheckedKeys(!0)));else{const t=pv([A],(e=>!fv(c("children",e))&&!c("disabled",e)),(e=>c("children",e))),i=t?c("value",t):void 0,r=dv(e.modelValue)&&!!pv([A],(t=>c("value",t)===e.modelValue),(e=>c("children",e)));n(Ue,i===e.modelValue||r?void 0:i)}_n((()=>{var n;const i=gv(e.modelValue);r.value.setCheckedKeys(i),null==(n=t.onCheck)||n.call(t,A,{checkedKeys:r.value.getCheckedKeys(),checkedNodes:r.value.getCheckedNodes(),halfCheckedKeys:r.value.getHalfCheckedKeys(),halfCheckedNodes:r.value.getHalfCheckedNodes()})})),null==(s=i.value)||s.focus()},cacheOptions:h})})(e,t,{select:s,tree:c,key:u}),{cacheOptions:f}=d,g=((e,t)=>{var A={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(A[o]=e[o]);if(null!=e&&n)for(var o of n(e))t.indexOf(o)<0&&r.call(e,o)&&(A[o]=e[o]);return A})(d,["cacheOptions"]),p=Vn({});return o(p),ln((()=>{Object.assign(p,a(a({},ve(c.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),ve(s.value,["focus","blur"])))})),()=>ui(np,Vn(l(a({},h),{ref:e=>s.value=e})),l(a({},A),{default:()=>[ui(mv,{data:f.value}),ui(uv,Vn(l(a({},g),{ref:e=>c.value=e})))]}))}});var yv=xe(Bv,[["__file","tree-select.vue"]]);yv.install=e=>{e.component(yv.name,yv)};const Cv=yv;var wv={};!function(e){
/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var t,A,n,i,r,o,s,a,l,c,u,h,d,f,g,p,v,m,B,y,C,w=w||{version:"5.3.0"};if(e.fabric=w,"undefined"!=typeof document&&"undefined"!=typeof window)document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?w.document=document:w.document=document.implementation.createHTMLDocument(""),w.window=window;else{var b=new Vt.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;w.document=b.document,w.jsdomImplForWrapper=Vt.implForWrapper,w.nodeCanvas=Vt.Canvas,w.window=b,DOMParser=w.window.DOMParser}function x(e,t){var A=e.canvas,n=t.targetCanvas,i=n.getContext("2d");i.translate(0,n.height),i.scale(1,-1);var r=A.height-n.height;i.drawImage(A,0,r,n.width,n.height,0,0,n.width,n.height)}function Q(e,t){var A=t.targetCanvas.getContext("2d"),n=t.destinationWidth,i=t.destinationHeight,r=n*i*4,o=new Uint8Array(this.imageBuffer,0,r),s=new Uint8ClampedArray(this.imageBuffer,0,r);e.readPixels(0,0,n,i,e.RGBA,e.UNSIGNED_BYTE,o);var a=new ImageData(s,n,i);A.putImageData(a,0,0)}w.isTouchSupported="ontouchstart"in w.window||"ontouchstart"in w.document||w.window&&w.window.navigator&&w.window.navigator.maxTouchPoints>0,w.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,w.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],w.DPI=96,w.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",w.commaWsp="(?:\\s+,?\\s*|,\\s*)",w.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,w.reNonWord=/[ \n\.,;!\?\-]/,w.fontPaths={},w.iMatrix=[1,0,0,1,0,0],w.svgNS="http://www.w3.org/2000/svg",w.perfLimitSizeTotal=2097152,w.maxCacheSideLimit=4096,w.minCacheSideLimit=256,w.charWidthsCache={},w.textureSize=2048,w.disableStyleCopyPaste=!1,w.enableGLFiltering=!0,w.devicePixelRatio=w.window.devicePixelRatio||w.window.webkitDevicePixelRatio||w.window.mozDevicePixelRatio||1,w.browserShadowBlurConstant=1,w.arcToSegmentsCache={},w.boundsOfCurveCache={},w.cachesBoundsOfCurve=!0,w.forceGLPutImageData=!1,w.initFilterBackend=function(){return w.enableGLFiltering&&w.isWebglSupported&&w.isWebglSupported(w.textureSize)?new w.WebglFilterBackend({tileSize:w.textureSize}):w.Canvas2dFilterBackend?new w.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=w),function(){function e(e,t){if(this.__eventListeners[e]){var A=this.__eventListeners[e];t?A[A.indexOf(t)]=!1:w.util.array.fill(A,!1)}}function t(e,t){var A=function(){t.apply(this,arguments),this.off(e,A)}.bind(this);this.on(e,A)}w.Observable={fire:function(e,t){if(!this.__eventListeners)return this;var A=this.__eventListeners[e];if(!A)return this;for(var n=0,i=A.length;n<i;n++)A[n]&&A[n].call(this,t||{});return this.__eventListeners[e]=A.filter((function(e){return!1!==e})),this},on:function(e,t){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var A in e)this.on(A,e[A]);else this.__eventListeners[e]||(this.__eventListeners[e]=[]),this.__eventListeners[e].push(t);return this},once:function(e,A){if(1===arguments.length)for(var n in e)t.call(this,n,e[n]);else t.call(this,e,A);return this},off:function(t,A){if(!this.__eventListeners)return this;if(0===arguments.length)for(t in this.__eventListeners)e.call(this,t);else if(1===arguments.length&&"object"==typeof arguments[0])for(var n in t)e.call(this,n,t[n]);else e.call(this,t,A);return this}}}(),w.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var e=0,t=arguments.length;e<t;e++)this._onObjectAdded(arguments[e]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(e,t,A){var n=this._objects;return A?n[t]=e:n.splice(t,0,e),this._onObjectAdded&&this._onObjectAdded(e),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var e,t=this._objects,A=!1,n=0,i=arguments.length;n<i;n++)-1!==(e=t.indexOf(arguments[n]))&&(A=!0,t.splice(e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&A&&this.requestRenderAll(),this},forEachObject:function(e,t){for(var A=this.getObjects(),n=0,i=A.length;n<i;n++)e.call(t,A[n],n,A);return this},getObjects:function(e){return void 0===e?this._objects.concat():this._objects.filter((function(t){return t.type===e}))},item:function(e){return this._objects[e]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(e,t){return this._objects.indexOf(e)>-1||!!t&&this._objects.some((function(t){return"function"==typeof t.contains&&t.contains(e,!0)}))},complexity:function(){return this._objects.reduce((function(e,t){return e+=t.complexity?t.complexity():0}),0)}},w.CommonMethods={_setOptions:function(e){for(var t in e)this.set(t,e[t])},_initGradient:function(e,t){!e||!e.colorStops||e instanceof w.Gradient||this.set(t,new w.Gradient(e))},_initPattern:function(e,t,A){!e||!e.source||e instanceof w.Pattern?A&&A():this.set(t,new w.Pattern(e,A))},_setObject:function(e){for(var t in e)this._set(t,e[t])},set:function(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this},_set:function(e,t){this[e]=t},toggle:function(e){var t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this},get:function(e){return this[e]}},t=e,A=Math.sqrt,n=Math.atan2,i=Math.pow,r=Math.PI/180,o=Math.PI/2,w.util={cos:function(e){if(0===e)return 1;switch(e<0&&(e=-e),e/o){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},sin:function(e){if(0===e)return 0;var t=1;switch(e<0&&(t=-1),e/o){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(e)},removeFromArray:function(e,t){var A=e.indexOf(t);return-1!==A&&e.splice(A,1),e},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},degreesToRadians:function(e){return e*r},radiansToDegrees:function(e){return e/r},rotatePoint:function(e,t,A){var n=new w.Point(e.x-t.x,e.y-t.y),i=w.util.rotateVector(n,A);return new w.Point(i.x,i.y).addEquals(t)},rotateVector:function(e,t){var A=w.util.sin(t),n=w.util.cos(t);return{x:e.x*n-e.y*A,y:e.x*A+e.y*n}},createVector:function(e,t){return new w.Point(t.x-e.x,t.y-e.y)},calcAngleBetweenVectors:function(e,t){return Math.acos((e.x*t.x+e.y*t.y)/(Math.hypot(e.x,e.y)*Math.hypot(t.x,t.y)))},getHatVector:function(e){return new w.Point(e.x,e.y).multiply(1/Math.hypot(e.x,e.y))},getBisector:function(e,t,A){var n=w.util.createVector(e,t),i=w.util.createVector(e,A),r=w.util.calcAngleBetweenVectors(n,i),o=r*(0===w.util.calcAngleBetweenVectors(w.util.rotateVector(n,r),i)?1:-1)/2;return{vector:w.util.getHatVector(w.util.rotateVector(n,o)),angle:r}},projectStrokeOnPoints:function(e,t,A){var n=[],i=t.strokeWidth/2,r=t.strokeUniform?new w.Point(1/t.scaleX,1/t.scaleY):new w.Point(1,1),o=function(e){var t=i/Math.hypot(e.x,e.y);return new w.Point(e.x*t*r.x,e.y*t*r.y)};return e.length<=1||e.forEach((function(s,a){var l,c,u=new w.Point(s.x,s.y);0===a?(c=e[a+1],l=A?o(w.util.createVector(c,u)).addEquals(u):e[e.length-1]):a===e.length-1?(l=e[a-1],c=A?o(w.util.createVector(l,u)).addEquals(u):e[0]):(l=e[a-1],c=e[a+1]);var h,d,f=w.util.getBisector(u,l,c),g=f.vector,p=f.angle;if("miter"===t.strokeLineJoin&&(h=-i/Math.sin(p/2),d=new w.Point(g.x*h*r.x,g.y*h*r.y),Math.hypot(d.x,d.y)/i<=t.strokeMiterLimit))return n.push(u.add(d)),void n.push(u.subtract(d));h=-i*Math.SQRT2,d=new w.Point(g.x*h*r.x,g.y*h*r.y),n.push(u.add(d)),n.push(u.subtract(d))})),n},transformPoint:function(e,t,A){return A?new w.Point(t[0]*e.x+t[2]*e.y,t[1]*e.x+t[3]*e.y):new w.Point(t[0]*e.x+t[2]*e.y+t[4],t[1]*e.x+t[3]*e.y+t[5])},makeBoundingBoxFromPoints:function(e,t){if(t)for(var A=0;A<e.length;A++)e[A]=w.util.transformPoint(e[A],t);var n=[e[0].x,e[1].x,e[2].x,e[3].x],i=w.util.array.min(n),r=w.util.array.max(n)-i,o=[e[0].y,e[1].y,e[2].y,e[3].y],s=w.util.array.min(o);return{left:i,top:s,width:r,height:w.util.array.max(o)-s}},invertTransform:function(e){var t=1/(e[0]*e[3]-e[1]*e[2]),A=[t*e[3],-t*e[1],-t*e[2],t*e[0]],n=w.util.transformPoint({x:e[4],y:e[5]},A,!0);return A[4]=-n.x,A[5]=-n.y,A},toFixed:function(e,t){return parseFloat(Number(e).toFixed(t))},parseUnit:function(e,t){var A=/\D{0,2}$/.exec(e),n=parseFloat(e);switch(t||(t=w.Text.DEFAULT_SVG_FONT_SIZE),A[0]){case"mm":return n*w.DPI/25.4;case"cm":return n*w.DPI/2.54;case"in":return n*w.DPI;case"pt":return n*w.DPI/72;case"pc":return n*w.DPI/72*12;case"em":return n*t;default:return n}},falseFunction:function(){return!1},getKlass:function(e,t){return e=w.util.string.camelize(e.charAt(0).toUpperCase()+e.slice(1)),w.util.resolveNamespace(t)[e]},getSvgAttributes:function(e){var t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":t=t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":t=t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":t=t.concat(["offset","stop-color","stop-opacity"])}return t},resolveNamespace:function(e){if(!e)return w;var A,n=e.split("."),i=n.length,r=t||w.window;for(A=0;A<i;++A)r=r[n[A]];return r},loadImage:function(e,t,A,n){if(e){var i=w.util.createImage(),r=function(){t&&t.call(A,i,!1),i=i.onload=i.onerror=null};i.onload=r,i.onerror=function(){w.log("Error loading "+i.src),t&&t.call(A,null,!0),i=i.onload=i.onerror=null},0!==e.indexOf("data")&&null!=n&&(i.crossOrigin=n),"data:image/svg"===e.substring(0,14)&&(i.onload=null,w.util.loadImageInDom(i,r)),i.src=e}else t&&t.call(A,e)},loadImageInDom:function(e,t){var A=w.document.createElement("div");A.style.width=A.style.height="1px",A.style.left=A.style.top="-100%",A.style.position="absolute",A.appendChild(e),w.document.querySelector("body").appendChild(A),e.onload=function(){t(),A.parentNode.removeChild(A),A=null}},enlivenObjects:function(e,t,A,n){var i=[],r=0,o=(e=e||[]).length;function s(){++r===o&&t&&t(i.filter((function(e){return e})))}o?e.forEach((function(e,t){e&&e.type?w.util.getKlass(e.type,A).fromObject(e,(function(A,r){r||(i[t]=A),n&&n(e,A,r),s()})):s()})):t&&t(i)},enlivenObjectEnlivables:function(e,t,A){var n=w.Object.ENLIVEN_PROPS.filter((function(t){return!!e[t]}));w.util.enlivenObjects(n.map((function(t){return e[t]})),(function(e){var i={};n.forEach((function(A,n){i[A]=e[n],t&&(t[A]=e[n])})),A&&A(i)}))},enlivenPatterns:function(e,t){function A(){++i===r&&t&&t(n)}var n=[],i=0,r=(e=e||[]).length;r?e.forEach((function(e,t){e&&e.source?new w.Pattern(e,(function(e){n[t]=e,A()})):(n[t]=e,A())})):t&&t(n)},groupSVGElements:function(e,t,A){var n;return e&&1===e.length?(void 0!==A&&(e[0].sourcePath=A),e[0]):(t&&(t.width&&t.height?t.centerPoint={x:t.width/2,y:t.height/2}:(delete t.width,delete t.height)),n=new w.Group(e,t),void 0!==A&&(n.sourcePath=A),n)},populateWithProperties:function(e,t,A){if(A&&Array.isArray(A))for(var n=0,i=A.length;n<i;n++)A[n]in e&&(t[A[n]]=e[A[n]])},createCanvasElement:function(){return w.document.createElement("canvas")},copyCanvasElement:function(e){var t=w.util.createCanvasElement();return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t},toDataURL:function(e,t,A){return e.toDataURL("image/"+t,A)},createImage:function(){return w.document.createElement("img")},multiplyTransformMatrices:function(e,t,A){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],A?0:e[0]*t[4]+e[2]*t[5]+e[4],A?0:e[1]*t[4]+e[3]*t[5]+e[5]]},qrDecompose:function(e){var t=n(e[1],e[0]),o=i(e[0],2)+i(e[1],2),s=A(o),a=(e[0]*e[3]-e[2]*e[1])/s,l=n(e[0]*e[2]+e[1]*e[3],o);return{angle:t/r,scaleX:s,scaleY:a,skewX:l/r,skewY:0,translateX:e[4],translateY:e[5]}},calcRotateMatrix:function(e){if(!e.angle)return w.iMatrix.concat();var t=w.util.degreesToRadians(e.angle),A=w.util.cos(t),n=w.util.sin(t);return[A,n,-n,A,0,0]},calcDimensionsMatrix:function(e){var t=void 0===e.scaleX?1:e.scaleX,A=void 0===e.scaleY?1:e.scaleY,n=[e.flipX?-t:t,0,0,e.flipY?-A:A,0,0],i=w.util.multiplyTransformMatrices,r=w.util.degreesToRadians;return e.skewX&&(n=i(n,[1,0,Math.tan(r(e.skewX)),1],!0)),e.skewY&&(n=i(n,[1,Math.tan(r(e.skewY)),0,1],!0)),n},composeMatrix:function(e){var t=[1,0,0,1,e.translateX||0,e.translateY||0],A=w.util.multiplyTransformMatrices;return e.angle&&(t=A(t,w.util.calcRotateMatrix(e))),(1!==e.scaleX||1!==e.scaleY||e.skewX||e.skewY||e.flipX||e.flipY)&&(t=A(t,w.util.calcDimensionsMatrix(e))),t},resetObjectTransform:function(e){e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},saveObjectTransform:function(e){return{scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}},isTransparent:function(e,t,A,n){n>0&&(t>n?t-=n:t=0,A>n?A-=n:A=0);var i,r=!0,o=e.getImageData(t,A,2*n||1,2*n||1),s=o.data.length;for(i=3;i<s&&!1!=(r=o.data[i]<=0);i+=4);return o=null,r},parsePreserveAspectRatioAttribute:function(e){var t,A="meet",n=e.split(" ");return n&&n.length&&("meet"!==(A=n.pop())&&"slice"!==A?(t=A,A="meet"):n.length&&(t=n.pop())),{meetOrSlice:A,alignX:"none"!==t?t.slice(1,4):"none",alignY:"none"!==t?t.slice(5,8):"none"}},clearFabricFontCache:function(e){(e=(e||"").toLowerCase())?w.charWidthsCache[e]&&delete w.charWidthsCache[e]:w.charWidthsCache={}},limitDimsByArea:function(e,t){var A=Math.sqrt(t*e),n=Math.floor(t/A);return{x:Math.floor(A),y:n}},capValue:function(e,t,A){return Math.max(e,Math.min(t,A))},findScaleToFit:function(e,t){return Math.min(t.width/e.width,t.height/e.height)},findScaleToCover:function(e,t){return Math.max(t.width/e.width,t.height/e.height)},matrixToSVG:function(e){return"matrix("+e.map((function(e){return w.util.toFixed(e,w.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(e,t){var A=w.util.invertTransform(t),n=w.util.multiplyTransformMatrices(A,e.calcOwnMatrix());w.util.applyTransformToObject(e,n)},addTransformToObject:function(e,t){w.util.applyTransformToObject(e,w.util.multiplyTransformMatrices(t,e.calcOwnMatrix()))},applyTransformToObject:function(e,t){var A=w.util.qrDecompose(t),n=new w.Point(A.translateX,A.translateY);e.flipX=!1,e.flipY=!1,e.set("scaleX",A.scaleX),e.set("scaleY",A.scaleY),e.skewX=A.skewX,e.skewY=A.skewY,e.angle=A.angle,e.setPositionByOrigin(n,"center","center")},sizeAfterTransform:function(e,t,A){var n=e/2,i=t/2,r=[{x:-n,y:-i},{x:n,y:-i},{x:-n,y:i},{x:n,y:i}],o=w.util.calcDimensionsMatrix(A),s=w.util.makeBoundingBoxFromPoints(r,o);return{x:s.width,y:s.height}},mergeClipPaths:function(e,t){var A=e,n=t;A.inverted&&!n.inverted&&(A=t,n=e),w.util.applyTransformToObject(n,w.util.multiplyTransformMatrices(w.util.invertTransform(A.calcTransformMatrix()),n.calcTransformMatrix()));var i=A.inverted&&n.inverted;return i&&(A.inverted=n.inverted=!1),new w.Group([A],{clipPath:n,inverted:i})},hasStyleChanged:function(e,t,A){return A=A||!1,e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||A&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},stylesToArray:function(e,t){e=w.util.object.clone(e,!0);for(var A=t.split("\n"),n=-1,i={},r=[],o=0;o<A.length;o++)if(e[o])for(var s=0;s<A[o].length;s++){n++;var a=e[o][s];a&&Object.keys(a).length>0&&(w.util.hasStyleChanged(i,a,!0)?r.push({start:n,end:n+1,style:a}):r[r.length-1].end++),i=a||{}}else n+=A[o].length;return r},stylesFromArray:function(e,t){if(!Array.isArray(e))return e;for(var A=t.split("\n"),n=-1,i=0,r={},o=0;o<A.length;o++)for(var s=0;s<A[o].length;s++)n++,e[i]&&e[i].start<=n&&n<e[i].end&&(r[o]=r[o]||{},r[o][s]=Object.assign({},e[i].style),n===e[i].end-1&&i++);return r}},function(){var e=Array.prototype.join,t={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},A={m:"l",M:"L"};function n(e,t,A,n,i,r,o,s,a,l,c){var u=w.util.cos(e),h=w.util.sin(e),d=w.util.cos(t),f=w.util.sin(t),g=A*i*d-n*r*f+o,p=n*i*d+A*r*f+s;return["C",l+a*(-A*i*h-n*r*u),c+a*(-n*i*h+A*r*u),g+a*(A*i*f+n*r*d),p+a*(n*i*f-A*r*d),g,p]}function i(e,t,A,n){var i=Math.atan2(t,e),r=Math.atan2(n,A);return r>=i?r-i:2*Math.PI-(i-r)}function r(e,t,A){for(var r=A[1],o=A[2],s=A[3],a=A[4],l=A[5],c=function(e,t,A,r,o,s,a){var l=Math.PI,c=a*l/180,u=w.util.sin(c),h=w.util.cos(c),d=0,f=0,g=-h*e*.5-u*t*.5,p=-h*t*.5+u*e*.5,v=(A=Math.abs(A))*A,m=(r=Math.abs(r))*r,B=p*p,y=g*g,C=v*m-v*B-m*y,b=0;if(C<0){var x=Math.sqrt(1-C/(v*m));A*=x,r*=x}else b=(o===s?-1:1)*Math.sqrt(C/(v*B+m*y));var Q=b*A*p/r,E=-b*r*g/A,I=h*Q-u*E+.5*e,_=u*Q+h*E+.5*t,S=i(1,0,(g-Q)/A,(p-E)/r),F=i((g-Q)/A,(p-E)/r,(-g-Q)/A,(-p-E)/r);0===s&&F>0?F-=2*l:1===s&&F<0&&(F+=2*l);for(var k=Math.ceil(Math.abs(F/l*2)),U=[],O=F/k,D=8/3*Math.sin(O/4)*Math.sin(O/4)/Math.sin(O/2),T=S+O,M=0;M<k;M++)U[M]=n(S,T,h,u,A,r,I,_,D,d,f),d=U[M][5],f=U[M][6],S=T,T+=O;return U}(A[6]-e,A[7]-t,r,o,a,l,s),u=0,h=c.length;u<h;u++)c[u][1]+=e,c[u][2]+=t,c[u][3]+=e,c[u][4]+=t,c[u][5]+=e,c[u][6]+=t;return c}function o(e,t,A,n){return Math.sqrt((A-e)*(A-e)+(n-t)*(n-t))}function s(e,t,A,n,i,r,o,s){return function(a){var l,c=(l=a)*l*l,u=function(e){return 3*e*e*(1-e)}(a),h=function(e){return 3*e*(1-e)*(1-e)}(a),d=function(e){return(1-e)*(1-e)*(1-e)}(a);return{x:o*c+i*u+A*h+e*d,y:s*c+r*u+n*h+t*d}}}function a(e,t,A,n,i,r,o,s){return function(a){var l=1-a,c=3*l*l*(A-e)+6*l*a*(i-A)+3*a*a*(o-i),u=3*l*l*(n-t)+6*l*a*(r-n)+3*a*a*(s-r);return Math.atan2(u,c)}}function l(e,t,A,n,i,r){return function(o){var s,a=(s=o)*s,l=function(e){return 2*e*(1-e)}(o),c=function(e){return(1-e)*(1-e)}(o);return{x:i*a+A*l+e*c,y:r*a+n*l+t*c}}}function c(e,t,A,n,i,r){return function(o){var s=1-o,a=2*s*(A-e)+2*o*(i-A),l=2*s*(n-t)+2*o*(r-n);return Math.atan2(l,a)}}function u(e,t,A){var n,i,r={x:t,y:A},s=0;for(i=1;i<=100;i+=1)n=e(i/100),s+=o(r.x,r.y,n.x,n.y),r=n;return s}function h(e,t){for(var A,n,i,r=0,s=0,a=e.iterator,l={x:e.x,y:e.y},c=.01,u=e.angleFinder;s<t&&c>1e-4;)A=a(r),i=r,(n=o(l.x,l.y,A.x,A.y))+s>t?(r-=c,c/=2):(l=A,r+=c,s+=n);return A.angle=u(i),A}function d(e){for(var t,A,n,i,r=0,h=e.length,d=0,f=0,g=0,p=0,v=[],m=0;m<h;m++){switch(n={x:d,y:f,command:(t=e[m])[0]},t[0]){case"M":n.length=0,g=d=t[1],p=f=t[2];break;case"L":n.length=o(d,f,t[1],t[2]),d=t[1],f=t[2];break;case"C":A=s(d,f,t[1],t[2],t[3],t[4],t[5],t[6]),i=a(d,f,t[1],t[2],t[3],t[4],t[5],t[6]),n.iterator=A,n.angleFinder=i,n.length=u(A,d,f),d=t[5],f=t[6];break;case"Q":A=l(d,f,t[1],t[2],t[3],t[4]),i=c(d,f,t[1],t[2],t[3],t[4]),n.iterator=A,n.angleFinder=i,n.length=u(A,d,f),d=t[3],f=t[4];break;case"Z":case"z":n.destX=g,n.destY=p,n.length=o(d,f,g,p),d=g,f=p}r+=n.length,v.push(n)}return v.push({length:r,x:d,y:f}),v}w.util.joinPath=function(e){return e.map((function(e){return e.join(" ")})).join(" ")},w.util.parsePath=function(e){var n,i,r,o,s,a=[],l=[],c=w.rePathCommand,u="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",h="("+u+")"+w.commaWsp,d="([01])"+w.commaWsp+"?",f=new RegExp(h+"?"+h+"?"+h+d+d+h+"?("+u+")","g");if(!e||!e.match)return a;for(var g,p=0,v=(s=e.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;p<v;p++){o=(n=s[p]).slice(1).trim(),l.length=0;var m=n.charAt(0);if(g=[m],"a"===m.toLowerCase())for(var B;B=f.exec(o);)for(var y=1;y<B.length;y++)l.push(B[y]);else for(;r=c.exec(o);)l.push(r[0]);y=0;for(var C=l.length;y<C;y++)i=parseFloat(l[y]),isNaN(i)||g.push(i);var b=t[m.toLowerCase()],x=A[m]||m;if(g.length-1>b)for(var Q=1,E=g.length;Q<E;Q+=b)a.push([m].concat(g.slice(Q,Q+b))),m=x;else a.push(g)}return a},w.util.makePathSimpler=function(e){var t,A,n,i,o,s,a=0,l=0,c=e.length,u=0,h=0,d=[];for(A=0;A<c;++A){switch(n=!1,(t=e[A].slice(0))[0]){case"l":t[0]="L",t[1]+=a,t[2]+=l;case"L":a=t[1],l=t[2];break;case"h":t[1]+=a;case"H":t[0]="L",t[2]=l,a=t[1];break;case"v":t[1]+=l;case"V":t[0]="L",l=t[1],t[1]=a,t[2]=l;break;case"m":t[0]="M",t[1]+=a,t[2]+=l;case"M":a=t[1],l=t[2],u=t[1],h=t[2];break;case"c":t[0]="C",t[1]+=a,t[2]+=l,t[3]+=a,t[4]+=l,t[5]+=a,t[6]+=l;case"C":o=t[3],s=t[4],a=t[5],l=t[6];break;case"s":t[0]="S",t[1]+=a,t[2]+=l,t[3]+=a,t[4]+=l;case"S":"C"===i?(o=2*a-o,s=2*l-s):(o=a,s=l),a=t[3],l=t[4],t[0]="C",t[5]=t[3],t[6]=t[4],t[3]=t[1],t[4]=t[2],t[1]=o,t[2]=s,o=t[3],s=t[4];break;case"q":t[0]="Q",t[1]+=a,t[2]+=l,t[3]+=a,t[4]+=l;case"Q":o=t[1],s=t[2],a=t[3],l=t[4];break;case"t":t[0]="T",t[1]+=a,t[2]+=l;case"T":"Q"===i?(o=2*a-o,s=2*l-s):(o=a,s=l),t[0]="Q",a=t[1],l=t[2],t[1]=o,t[2]=s,t[3]=a,t[4]=l;break;case"a":t[0]="A",t[6]+=a,t[7]+=l;case"A":n=!0,d=d.concat(r(a,l,t)),a=t[6],l=t[7];break;case"z":case"Z":a=u,l=h}n||d.push(t),i=t[0]}return d},w.util.getSmoothPathFromPoints=function(e,t){var A,n=[],i=new w.Point(e[0].x,e[0].y),r=new w.Point(e[1].x,e[1].y),o=e.length,s=1,a=0,l=o>2;for(t=t||0,l&&(s=e[2].x<r.x?-1:e[2].x===r.x?0:1,a=e[2].y<r.y?-1:e[2].y===r.y?0:1),n.push(["M",i.x-s*t,i.y-a*t]),A=1;A<o;A++){if(!i.eq(r)){var c=i.midPointFrom(r);n.push(["Q",i.x,i.y,c.x,c.y])}i=e[A],A+1<e.length&&(r=e[A+1])}return l&&(s=i.x>e[A-2].x?1:i.x===e[A-2].x?0:-1,a=i.y>e[A-2].y?1:i.y===e[A-2].y?0:-1),n.push(["L",i.x+s*t,i.y+a*t]),n},w.util.getPathSegmentsInfo=d,w.util.getBoundsOfCurve=function(t,A,n,i,r,o,s,a){var l;if(w.cachesBoundsOfCurve&&(l=e.call(arguments),w.boundsOfCurveCache[l]))return w.boundsOfCurveCache[l];var c,u,h,d,f,g,p,v,m=Math.sqrt,B=Math.min,y=Math.max,C=Math.abs,b=[],x=[[],[]];u=6*t-12*n+6*r,c=-3*t+9*n-9*r+3*s,h=3*n-3*t;for(var Q=0;Q<2;++Q)if(Q>0&&(u=6*A-12*i+6*o,c=-3*A+9*i-9*o+3*a,h=3*i-3*A),C(c)<1e-12){if(C(u)<1e-12)continue;0<(d=-h/u)&&d<1&&b.push(d)}else(p=u*u-4*h*c)<0||(0<(f=(-u+(v=m(p)))/(2*c))&&f<1&&b.push(f),0<(g=(-u-v)/(2*c))&&g<1&&b.push(g));for(var E,I,_,S=b.length,F=S;S--;)E=(_=1-(d=b[S]))*_*_*t+3*_*_*d*n+3*_*d*d*r+d*d*d*s,x[0][S]=E,I=_*_*_*A+3*_*_*d*i+3*_*d*d*o+d*d*d*a,x[1][S]=I;x[0][F]=t,x[1][F]=A,x[0][F+1]=s,x[1][F+1]=a;var k=[{x:B.apply(null,x[0]),y:B.apply(null,x[1])},{x:y.apply(null,x[0]),y:y.apply(null,x[1])}];return w.cachesBoundsOfCurve&&(w.boundsOfCurveCache[l]=k),k},w.util.getPointOnPath=function(e,t,A){A||(A=d(e));for(var n=0;t-A[n].length>0&&n<A.length-2;)t-=A[n].length,n++;var i,r=A[n],o=t/r.length,s=r.command,a=e[n];switch(s){case"M":return{x:r.x,y:r.y,angle:0};case"Z":case"z":return(i=new w.Point(r.x,r.y).lerp(new w.Point(r.destX,r.destY),o)).angle=Math.atan2(r.destY-r.y,r.destX-r.x),i;case"L":return(i=new w.Point(r.x,r.y).lerp(new w.Point(a[1],a[2]),o)).angle=Math.atan2(a[2]-r.y,a[1]-r.x),i;case"C":case"Q":return h(r,t)}},w.util.transformPath=function(e,t,A){return A&&(t=w.util.multiplyTransformMatrices(t,[1,0,0,1,-A.x,-A.y])),e.map((function(e){for(var A=e.slice(0),n={},i=1;i<e.length-1;i+=2)n.x=e[i],n.y=e[i+1],n=w.util.transformPoint(n,t),A[i]=n.x,A[i+1]=n.y;return A}))}}(),function(){var e=Array.prototype.slice;function t(e,t,A){if(e&&0!==e.length){var n=e.length-1,i=t?e[n][t]:e[n];if(t)for(;n--;)A(e[n][t],i)&&(i=e[n][t]);else for(;n--;)A(e[n],i)&&(i=e[n]);return i}}w.util.array={fill:function(e,t){for(var A=e.length;A--;)e[A]=t;return e},invoke:function(t,A){for(var n=e.call(arguments,2),i=[],r=0,o=t.length;r<o;r++)i[r]=n.length?t[r][A].apply(t[r],n):t[r][A].call(t[r]);return i},min:function(e,A){return t(e,A,(function(e,t){return e<t}))},max:function(e,A){return t(e,A,(function(e,t){return e>=t}))}}}(),function(){function e(t,A,n){if(n)if(!w.isLikelyNode&&A instanceof Element)t=A;else if(A instanceof Array){t=[];for(var i=0,r=A.length;i<r;i++)t[i]=e({},A[i],n)}else if(A&&"object"==typeof A)for(var o in A)"canvas"===o||"group"===o?t[o]=null:A.hasOwnProperty(o)&&(t[o]=e({},A[o],n));else t=A;else for(var o in A)t[o]=A[o];return t}w.util.object={extend:e,clone:function(t,A){return e({},t,A)}},w.util.object.extend(w.util,w.Observable)}(),function(){function e(e,t){var A=e.charCodeAt(t);if(isNaN(A))return"";if(A<55296||A>57343)return e.charAt(t);if(55296<=A&&A<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";var n=e.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";var i=e.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1}w.util.string={camelize:function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},capitalize:function(e,t){return e.charAt(0).toUpperCase()+(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(t){var A,n=0,i=[];for(n=0;n<t.length;n++)!1!==(A=e(t,n))&&i.push(A);return i}}}(),function(){var e=Array.prototype.slice,t=function(){},A=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}(),n=function(e,t,n){for(var i in t)i in e.prototype&&"function"==typeof e.prototype[i]&&(t[i]+"").indexOf("callSuper")>-1?e.prototype[i]=function(e){return function(){var A=this.constructor.superclass;this.constructor.superclass=n;var i=t[e].apply(this,arguments);if(this.constructor.superclass=A,"initialize"!==e)return i}}(i):e.prototype[i]=t[i],A&&(t.toString!==Object.prototype.toString&&(e.prototype.toString=t.toString),t.valueOf!==Object.prototype.valueOf&&(e.prototype.valueOf=t.valueOf))};function i(){}function r(t){for(var A=null,n=this;n.constructor.superclass;){var i=n.constructor.superclass.prototype[t];if(n[t]!==i){A=i;break}n=n.constructor.superclass.prototype}if(A)return arguments.length>1?A.apply(this,e.call(arguments,1)):A.call(this)}w.util.createClass=function(){var A=null,o=e.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"==typeof o[0]&&(A=o.shift()),s.superclass=A,s.subclasses=[],A&&(i.prototype=A.prototype,s.prototype=new i,A.subclasses.push(s));for(var a=0,l=o.length;a<l;a++)n(s,o[a],A);return s.prototype.initialize||(s.prototype.initialize=t),s.prototype.constructor=s,s.prototype.callSuper=r,s}}(),s=!!w.document.createElement("div").attachEvent,a=["touchstart","touchmove","touchend"],w.util.addListener=function(e,t,A,n){e&&e.addEventListener(t,A,!s&&n)},w.util.removeListener=function(e,t,A,n){e&&e.removeEventListener(t,A,!s&&n)},w.util.getPointer=function(e){var t=e.target,A=w.util.getScrollLeftTop(t),n=function(e){var t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return{x:n.clientX+A.left,y:n.clientY+A.top}},w.util.isTouchEvent=function(e){return a.indexOf(e.type)>-1||"touch"===e.pointerType},l=w.document.createElement("div"),c="string"==typeof l.style.opacity,u="string"==typeof l.style.filter,h=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,d=function(e){return e},c?d=function(e,t){return e.style.opacity=t,e}:u&&(d=function(e,t){var A=e.style;return e.currentStyle&&!e.currentStyle.hasLayout&&(A.zoom=1),h.test(A.filter)?(t=t>=.9999?"":"alpha(opacity="+100*t+")",A.filter=A.filter.replace(h,t)):A.filter+=" alpha(opacity="+100*t+")",e}),w.util.setStyle=function(e,t){var A=e.style;if(!A)return e;if("string"==typeof t)return e.style.cssText+=";"+t,t.indexOf("opacity")>-1?d(e,t.match(/opacity:\s*(\d?\.?\d*)/)[1]):e;for(var n in t)if("opacity"===n)d(e,t[n]);else{var i="float"===n||"cssFloat"===n?void 0===A.styleFloat?"cssFloat":"styleFloat":n;A.setProperty(i,t[n])}return e},function(){var e=Array.prototype.slice;var t,A,n,i,r=function(t){return e.call(t,0)};try{t=r(w.document.childNodes)instanceof Array}catch(a){}function o(e,t){var A=w.document.createElement(e);for(var n in t)"class"===n?A.className=t[n]:"for"===n?A.htmlFor=t[n]:A.setAttribute(n,t[n]);return A}function s(e){for(var t=0,A=0,n=w.document.documentElement,i=w.document.body||{scrollLeft:0,scrollTop:0};e&&(e.parentNode||e.host)&&((e=e.parentNode||e.host)===w.document?(t=i.scrollLeft||n.scrollLeft||0,A=i.scrollTop||n.scrollTop||0):(t+=e.scrollLeft||0,A+=e.scrollTop||0),1!==e.nodeType||"fixed"!==e.style.position););return{left:t,top:A}}t||(r=function(e){for(var t=new Array(e.length),A=e.length;A--;)t[A]=e[A];return t}),A=w.document.defaultView&&w.document.defaultView.getComputedStyle?function(e,t){var A=w.document.defaultView.getComputedStyle(e,null);return A?A[t]:void 0}:function(e,t){var A=e.style[t];return!A&&e.currentStyle&&(A=e.currentStyle[t]),A},n=w.document.documentElement.style,i="userSelect"in n?"userSelect":"MozUserSelect"in n?"MozUserSelect":"WebkitUserSelect"in n?"WebkitUserSelect":"KhtmlUserSelect"in n?"KhtmlUserSelect":"",w.util.makeElementUnselectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=w.util.falseFunction),i?e.style[i]="none":"string"==typeof e.unselectable&&(e.unselectable="on"),e},w.util.makeElementSelectable=function(e){return void 0!==e.onselectstart&&(e.onselectstart=null),i?e.style[i]="":"string"==typeof e.unselectable&&(e.unselectable=""),e},w.util.setImageSmoothing=function(e,t){e.imageSmoothingEnabled=e.imageSmoothingEnabled||e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled||e.oImageSmoothingEnabled,e.imageSmoothingEnabled=t},w.util.getById=function(e){return"string"==typeof e?w.document.getElementById(e):e},w.util.toArray=r,w.util.addClass=function(e,t){e&&-1===(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className+=(e.className?" ":"")+t)},w.util.makeElement=o,w.util.wrapElement=function(e,t,A){return"string"==typeof t&&(t=o(t,A)),e.parentNode&&e.parentNode.replaceChild(t,e),t.appendChild(e),t},w.util.getScrollLeftTop=s,w.util.getElementOffset=function(e){var t,n,i=e&&e.ownerDocument,r={left:0,top:0},o={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!i)return o;for(var l in a)o[a[l]]+=parseInt(A(e,l),10)||0;return t=i.documentElement,void 0!==e.getBoundingClientRect&&(r=e.getBoundingClientRect()),n=s(e),{left:r.left+n.left-(t.clientLeft||0)+o.left,top:r.top+n.top-(t.clientTop||0)+o.top}},w.util.getNodeCanvas=function(e){var t=w.jsdomImplForWrapper(e);return t._canvas||t._image},w.util.cleanUpJsdomNode=function(e){if(w.isLikelyNode){var t=w.jsdomImplForWrapper(e);t&&(t._image=null,t._canvas=null,t._currentSrc=null,t._attributes=null,t._classList=null)}}}(),function(){function e(){}w.util.request=function(t,A){A||(A={});var n=A.method?A.method.toUpperCase():"GET",i=A.onComplete||function(){},r=new w.window.XMLHttpRequest,o=A.body||A.parameters;return r.onreadystatechange=function(){4===r.readyState&&(i(r),r.onreadystatechange=e)},"GET"===n&&(o=null,"string"==typeof A.parameters&&(t=function(e,t){return e+(/\?/.test(e)?"&":"?")+t}(t,A.parameters))),r.open(n,t,!0),"POST"!==n&&"PUT"!==n||r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(o),r}}(),w.log=console.log,w.warn=console.warn,function(){var e=w.util.object.extend,t=w.util.object.clone,A=[];function n(){return!1}function i(e,t,A,n){return-A*Math.cos(e/n*(Math.PI/2))+A+t}w.util.object.extend(A,{cancelAll:function(){var e=this.splice(0);return e.forEach((function(e){e.cancel()})),e},cancelByCanvas:function(e){if(!e)return[];var t=this.filter((function(t){return"object"==typeof t.target&&t.target.canvas===e}));return t.forEach((function(e){e.cancel()})),t},cancelByTarget:function(e){var t=this.findAnimationsByTarget(e);return t.forEach((function(e){e.cancel()})),t},findAnimationIndex:function(e){return this.indexOf(this.findAnimation(e))},findAnimation:function(e){return this.find((function(t){return t.cancel===e}))},findAnimationsByTarget:function(e){return e?this.filter((function(t){return t.target===e})):[]}});var r=w.window.requestAnimationFrame||w.window.webkitRequestAnimationFrame||w.window.mozRequestAnimationFrame||w.window.oRequestAnimationFrame||w.window.msRequestAnimationFrame||function(e){return w.window.setTimeout(e,1e3/60)},o=w.window.cancelAnimationFrame||w.window.clearTimeout;function s(){return r.apply(w.window,arguments)}w.util.animate=function(A){A||(A={});var r,o=!1,a=function(){var e=w.runningAnimations.indexOf(r);return e>-1&&w.runningAnimations.splice(e,1)[0]};return r=e(t(A),{cancel:function(){return o=!0,a()},currentValue:"startValue"in A?A.startValue:0,completionRate:0,durationRate:0}),w.runningAnimations.push(r),s((function(e){var t,l=e||+new Date,c=A.duration||500,u=l+c,h=A.onChange||n,d=A.abort||n,f=A.onComplete||n,g=A.easing||i,p="startValue"in A&&A.startValue.length>0,v="startValue"in A?A.startValue:0,m="endValue"in A?A.endValue:100,B=A.byValue||(p?v.map((function(e,t){return m[t]-v[t]})):m-v);A.onStart&&A.onStart(),function e(A){var n=(t=A||+new Date)>u?c:t-l,i=n/c,y=p?v.map((function(e,t){return g(n,v[t],B[t],c)})):g(n,v,B,c),C=p?Math.abs((y[0]-v[0])/B[0]):Math.abs((y-v)/B);if(r.currentValue=p?y.slice():y,r.completionRate=C,r.durationRate=i,!o){if(!d(y,C,i))return t>u?(r.currentValue=p?m.slice():m,r.completionRate=1,r.durationRate=1,h(p?m.slice():m,1,1),f(m,1,1),void a()):(h(y,C,i),void s(e));a()}}(l)})),r.cancel},w.util.requestAnimFrame=s,w.util.cancelAnimFrame=function(){return o.apply(w.window,arguments)},w.runningAnimations=A}(),function(){function e(e,t,A){var n="rgba("+parseInt(e[0]+A*(t[0]-e[0]),10)+","+parseInt(e[1]+A*(t[1]-e[1]),10)+","+parseInt(e[2]+A*(t[2]-e[2]),10);return n+=","+(e&&t?parseFloat(e[3]+A*(t[3]-e[3])):1),n+=")"}w.util.animateColor=function(t,A,n,i){var r=new w.Color(t).getSource(),o=new w.Color(A).getSource(),s=i.onComplete,a=i.onChange;return i=i||{},w.util.animate(w.util.object.extend(i,{duration:n||500,startValue:r,endValue:o,byValue:o,easing:function(t,A,n,r){return e(A,n,i.colorEasing?i.colorEasing(t,r):1-Math.cos(t/r*(Math.PI/2)))},onComplete:function(t,A,n){if(s)return s(e(o,o,0),A,n)},onChange:function(t,A,n){if(a){if(Array.isArray(t))return a(e(t,t,0),A,n);a(t,A,n)}}}))}}(),function(){function e(e,t,A,n){return e<Math.abs(t)?(e=t,n=A/4):n=0===t&&0===e?A/(2*Math.PI)*Math.asin(1):A/(2*Math.PI)*Math.asin(t/e),{a:e,c:t,p:A,s:n}}function t(e,t,A){return e.a*Math.pow(2,10*(t-=1))*Math.sin((t*A-e.s)*(2*Math.PI)/e.p)}function A(e,t,A,i){return A-n(i-e,0,A,i)+t}function n(e,t,A,n){return(e/=n)<1/2.75?A*(7.5625*e*e)+t:e<2/2.75?A*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?A*(7.5625*(e-=2.25/2.75)*e+.9375)+t:A*(7.5625*(e-=2.625/2.75)*e+.984375)+t}w.util.ease={easeInQuad:function(e,t,A,n){return A*(e/=n)*e+t},easeOutQuad:function(e,t,A,n){return-A*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,A,n){return(e/=n/2)<1?A/2*e*e+t:-A/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,A,n){return A*(e/=n)*e*e+t},easeOutCubic:function(e,t,A,n){return A*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,A,n){return(e/=n/2)<1?A/2*e*e*e+t:A/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,A,n){return A*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,A,n){return-A*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,A,n){return(e/=n/2)<1?A/2*e*e*e*e+t:-A/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,A,n){return A*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,A,n){return A*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,A,n){return(e/=n/2)<1?A/2*e*e*e*e*e+t:A/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,A,n){return-A*Math.cos(e/n*(Math.PI/2))+A+t},easeOutSine:function(e,t,A,n){return A*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,A,n){return-A/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,A,n){return 0===e?t:A*Math.pow(2,10*(e/n-1))+t},easeOutExpo:function(e,t,A,n){return e===n?t+A:A*(1-Math.pow(2,-10*e/n))+t},easeInOutExpo:function(e,t,A,n){return 0===e?t:e===n?t+A:(e/=n/2)<1?A/2*Math.pow(2,10*(e-1))+t:A/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,A,n){return-A*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,A,n){return A*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,A,n){return(e/=n/2)<1?-A/2*(Math.sqrt(1-e*e)-1)+t:A/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(A,n,i,r){var o=0;return 0===A?n:1===(A/=r)?n+i:(o||(o=.3*r),-t(e(i,i,o,1.70158),A,r)+n)},easeOutElastic:function(t,A,n,i){var r=0;if(0===t)return A;if(1===(t/=i))return A+n;r||(r=.3*i);var o=e(n,n,r,1.70158);return o.a*Math.pow(2,-10*t)*Math.sin((t*i-o.s)*(2*Math.PI)/o.p)+o.c+A},easeInOutElastic:function(A,n,i,r){var o=0;if(0===A)return n;if(2===(A/=r/2))return n+i;o||(o=r*(.3*1.5));var s=e(i,i,o,1.70158);return A<1?-.5*t(s,A,r)+n:s.a*Math.pow(2,-10*(A-=1))*Math.sin((A*r-s.s)*(2*Math.PI)/s.p)*.5+s.c+n},easeInBack:function(e,t,A,n,i){return void 0===i&&(i=1.70158),A*(e/=n)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,A,n,i){return void 0===i&&(i=1.70158),A*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,A,n,i){return void 0===i&&(i=1.70158),(e/=n/2)<1?A/2*(e*e*((1+(i*=1.525))*e-i))+t:A/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:A,easeOutBounce:n,easeInOutBounce:function(e,t,i,r){return e<r/2?.5*A(2*e,0,i,r)+t:.5*n(2*e-r,0,i,r)+.5*i+t}}}(),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.util.object.clone,i=t.util.toFixed,r=t.util.parseUnit,o=t.util.multiplyTransformMatrices,s={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},a={stroke:"strokeOpacity",fill:"fillOpacity"},l="font-size",c="clip-path";function u(e){return e in s?s[e]:e}function h(e,A,n,i){var s,a=Array.isArray(A);if("fill"!==e&&"stroke"!==e||"none"!==A){if("strokeUniform"===e)return"non-scaling-stroke"===A;if("strokeDashArray"===e)A="none"===A?null:A.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)A=n&&n.transformMatrix?o(n.transformMatrix,t.parseTransformAttribute(A)):t.parseTransformAttribute(A);else if("visible"===e)A="none"!==A&&"hidden"!==A,n&&!1===n.visible&&(A=!1);else if("opacity"===e)A=parseFloat(A),n&&void 0!==n.opacity&&(A*=n.opacity);else if("textAnchor"===e)A="start"===A?"left":"end"===A?"right":"center";else if("charSpacing"===e)s=r(A,i)/i*1e3;else if("paintFirst"===e){var l=A.indexOf("fill"),c=A.indexOf("stroke");A="fill";(l>-1&&c>-1&&c<l||-1===l&&c>-1)&&(A="stroke")}else{if("href"===e||"xlink:href"===e||"font"===e)return A;if("imageSmoothing"===e)return"optimizeQuality"===A;s=a?A.map(r):r(A,i)}}else A="";return!a&&isNaN(s)?A:s}function d(e){return new RegExp("^("+e.join("|")+")\\b","i")}function f(e,t){var A,n,i,r,o=[];for(i=0,r=t.length;i<r;i++)A=t[i],n=e.getElementsByTagName(A),o=o.concat(Array.prototype.slice.call(n));return o}function g(e,t){var A,n=!0;return(A=p(e,t.pop()))&&t.length&&(n=function(e,t){var A,n=!0;for(;e.parentNode&&1===e.parentNode.nodeType&&t.length;)n&&(A=t.pop()),n=p(e=e.parentNode,A);return 0===t.length}(e,t)),A&&n&&0===t.length}function p(e,t){var A,n,i=e.nodeName,r=e.getAttribute("class"),o=e.getAttribute("id");if(A=new RegExp("^"+i,"i"),t=t.replace(A,""),o&&t.length&&(A=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),t=t.replace(A,"")),r&&t.length)for(n=(r=r.split(" ")).length;n--;)A=new RegExp("\\."+r[n]+"(?![a-zA-Z\\-]+)","i"),t=t.replace(A,"");return 0===t.length}function v(e,t){var A;if(e.getElementById&&(A=e.getElementById(t)),A)return A;var n,i,r,o=e.getElementsByTagName("*");for(i=0,r=o.length;i<r;i++)if(t===(n=o[i]).getAttribute("id"))return n}t.svgValidTagNamesRegEx=d(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t.svgViewBoxElementsRegEx=d(["symbol","image","marker","pattern","view","svg"]),t.svgInvalidAncestorsRegEx=d(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),t.svgValidParentsRegEx=d(["symbol","g","a","svg","clipPath","defs"]),t.cssRules={},t.gradientDefs={},t.clipPaths={},t.parseTransformAttribute=function(){function e(e,A,n){e[n]=Math.tan(t.util.degreesToRadians(A[0]))}var A=t.iMatrix,n=t.reNum,i=t.commaWsp,r="(?:"+("(?:(matrix)\\s*\\(\\s*("+n+")"+i+"("+n+")"+i+"("+n+")"+i+"("+n+")"+i+"("+n+")"+i+"("+n+")\\s*\\))")+"|"+("(?:(translate)\\s*\\(\\s*("+n+")(?:"+i+"("+n+"))?\\s*\\))")+"|"+("(?:(scale)\\s*\\(\\s*("+n+")(?:"+i+"("+n+"))?\\s*\\))")+"|"+("(?:(rotate)\\s*\\(\\s*("+n+")(?:"+i+"("+n+")"+i+"("+n+"))?\\s*\\))")+"|"+("(?:(skewX)\\s*\\(\\s*("+n+")\\s*\\))")+"|"+("(?:(skewY)\\s*\\(\\s*("+n+")\\s*\\))")+")",o=new RegExp("^\\s*(?:"+("(?:"+r+"(?:"+i+"*"+r+")*)")+"?)\\s*$"),s=new RegExp(r,"g");return function(n){var i=A.concat(),a=[];if(!n||n&&!o.test(n))return i;n.replace(s,(function(n){var o=new RegExp(r).exec(n).filter((function(e){return!!e})),s=o[1],l=o.slice(2).map(parseFloat);switch(s){case"translate":!function(e,t){e[4]=t[0],2===t.length&&(e[5]=t[1])}(i,l);break;case"rotate":l[0]=t.util.degreesToRadians(l[0]),function(e,A){var n=t.util.cos(A[0]),i=t.util.sin(A[0]),r=0,o=0;3===A.length&&(r=A[1],o=A[2]),e[0]=n,e[1]=i,e[2]=-i,e[3]=n,e[4]=r-(n*r-i*o),e[5]=o-(i*r+n*o)}(i,l);break;case"scale":!function(e,t){var A=t[0],n=2===t.length?t[1]:t[0];e[0]=A,e[3]=n}(i,l);break;case"skewX":e(i,l,2);break;case"skewY":e(i,l,1);break;case"matrix":i=l}a.push(i.concat()),i=A.concat()}));for(var l=a[0];a.length>1;)a.shift(),l=t.util.multiplyTransformMatrices(l,a[0]);return l}}();var m=new RegExp("^\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*,?\\s*("+t.reNum+"+)\\s*$");function B(e){if(!t.svgViewBoxElementsRegEx.test(e.nodeName))return{};var A,n,i,o,s,a,l=e.getAttribute("viewBox"),c=1,u=1,h=e.getAttribute("width"),d=e.getAttribute("height"),f=e.getAttribute("x")||0,g=e.getAttribute("y")||0,p=e.getAttribute("preserveAspectRatio")||"",v=!l||!(l=l.match(m)),B=!h||!d||"100%"===h||"100%"===d,y=v&&B,C={},w="",b=0,x=0;if(C.width=0,C.height=0,C.toBeParsed=y,v&&(f||g)&&e.parentNode&&"#document"!==e.parentNode.nodeName&&(w=" translate("+r(f)+" "+r(g)+") ",s=(e.getAttribute("transform")||"")+w,e.setAttribute("transform",s),e.removeAttribute("x"),e.removeAttribute("y")),y)return C;if(v)return C.width=r(h),C.height=r(d),C;if(A=-parseFloat(l[1]),n=-parseFloat(l[2]),i=parseFloat(l[3]),o=parseFloat(l[4]),C.minX=A,C.minY=n,C.viewBoxWidth=i,C.viewBoxHeight=o,B?(C.width=i,C.height=o):(C.width=r(h),C.height=r(d),c=C.width/i,u=C.height/o),"none"!==(p=t.util.parsePreserveAspectRatioAttribute(p)).alignX&&("meet"===p.meetOrSlice&&(u=c=c>u?u:c),"slice"===p.meetOrSlice&&(u=c=c>u?c:u),b=C.width-i*c,x=C.height-o*c,"Mid"===p.alignX&&(b/=2),"Mid"===p.alignY&&(x/=2),"Min"===p.alignX&&(b=0),"Min"===p.alignY&&(x=0)),1===c&&1===u&&0===A&&0===n&&0===f&&0===g)return C;if((f||g)&&"#document"!==e.parentNode.nodeName&&(w=" translate("+r(f)+" "+r(g)+") "),s=w+" matrix("+c+" 0 0 "+u+" "+(A*c+b)+" "+(n*u+x)+") ","svg"===e.nodeName){for(a=e.ownerDocument.createElementNS(t.svgNS,"g");e.firstChild;)a.appendChild(e.firstChild);e.appendChild(a)}else(a=e).removeAttribute("x"),a.removeAttribute("y"),s=a.getAttribute("transform")+s;return a.setAttribute("transform",s),C}function y(e,t){var A="xlink:href",n=v(e,t.getAttribute(A).slice(1));if(n&&n.getAttribute(A)&&y(e,n),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach((function(e){n&&!t.hasAttribute(e)&&n.hasAttribute(e)&&t.setAttribute(e,n.getAttribute(e))})),!t.children.length)for(var i=n.cloneNode(!0);i.firstChild;)t.appendChild(i.firstChild);t.removeAttribute(A)}t.parseSVGDocument=function(e,A,i,r){if(e){!function(e){for(var A=f(e,["use","svg:use"]),n=0;A.length&&n<A.length;){var i=A[n],r=i.getAttribute("xlink:href")||i.getAttribute("href");if(null===r)return;var o,s,a,l,c=r.slice(1),u=i.getAttribute("x")||0,h=i.getAttribute("y")||0,d=v(e,c).cloneNode(!0),g=(d.getAttribute("transform")||"")+" translate("+u+", "+h+")",p=A.length,m=t.svgNS;if(B(d),/^svg$/i.test(d.nodeName)){var y=d.ownerDocument.createElementNS(m,"g");for(s=0,l=(a=d.attributes).length;s<l;s++)o=a.item(s),y.setAttributeNS(m,o.nodeName,o.nodeValue);for(;d.firstChild;)y.appendChild(d.firstChild);d=y}for(s=0,l=(a=i.attributes).length;s<l;s++)"x"!==(o=a.item(s)).nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?g=o.nodeValue+" "+g:d.setAttribute(o.nodeName,o.nodeValue));d.setAttribute("transform",g),d.setAttribute("instantiated_by_use","1"),d.removeAttribute("id"),i.parentNode.replaceChild(d,i),A.length===p&&n++}}(e);var o,s,a=t.Object.__uid++,l=B(e),c=t.util.toArray(e.getElementsByTagName("*"));if(l.crossOrigin=r&&r.crossOrigin,l.svgUid=a,0===c.length&&t.isLikelyNode){var u=[];for(o=0,s=(c=e.selectNodes('//*[name(.)!="svg"]')).length;o<s;o++)u[o]=c[o];c=u}var h=c.filter((function(e){return B(e),t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))&&!function(e,t){for(;e&&(e=e.parentNode);)if(e.nodeName&&t.test(e.nodeName.replace("svg:",""))&&!e.getAttribute("instantiated_by_use"))return!0;return!1}(e,t.svgInvalidAncestorsRegEx)}));if(!h||h&&!h.length)A&&A([],{});else{var d={};c.filter((function(e){return"clipPath"===e.nodeName.replace("svg:","")})).forEach((function(e){var A=e.getAttribute("id");d[A]=t.util.toArray(e.getElementsByTagName("*")).filter((function(e){return t.svgValidTagNamesRegEx.test(e.nodeName.replace("svg:",""))}))})),t.gradientDefs[a]=t.getGradientDefs(e),t.cssRules[a]=t.getCSSRules(e),t.clipPaths[a]=d,t.parseElements(h,(function(e,n){A&&(A(e,l,n,c),delete t.gradientDefs[a],delete t.cssRules[a],delete t.clipPaths[a])}),n(l),i,r)}}};var C=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+t.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+t.reNum+"))?\\s+(.*)");A(t,{parseFontDeclaration:function(e,t){var A=e.match(C);if(A){var n=A[1],i=A[3],o=A[4],s=A[5],a=A[6];n&&(t.fontStyle=n),i&&(t.fontWeight=isNaN(parseFloat(i))?i:parseFloat(i)),o&&(t.fontSize=r(o)),a&&(t.fontFamily=a),s&&(t.lineHeight="normal"===s?1:s)}},getGradientDefs:function(e){var t,A=f(e,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),n=0,i={};for(n=A.length;n--;)(t=A[n]).getAttribute("xlink:href")&&y(e,t),i[t.getAttribute("id")]=t;return i},parseAttributes:function(e,n,o){if(e){var s,d,f,p={};void 0===o&&(o=e.getAttribute("svgUid")),e.parentNode&&t.svgValidParentsRegEx.test(e.parentNode.nodeName)&&(p=t.parseAttributes(e.parentNode,n,o));var v=n.reduce((function(t,A){return(s=e.getAttribute(A))&&(t[A]=s),t}),{}),m=A(function(e,A){var n={};for(var i in t.cssRules[A])if(g(e,i.split(" ")))for(var r in t.cssRules[A][i])n[r]=t.cssRules[A][i][r];return n}(e,o),t.parseStyleAttribute(e));v=A(v,m),m[c]&&e.setAttribute(c,m[c]),d=f=p.fontSize||t.Text.DEFAULT_SVG_FONT_SIZE,v[l]&&(v[l]=d=r(v[l],f));var B,y,C={};for(var w in v)y=h(B=u(w),v[w],p,d),C[B]=y;C&&C.font&&t.parseFontDeclaration(C.font,C);var b=A(p,C);return t.svgValidParentsRegEx.test(e.nodeName)?b:function(e){for(var A in a)if(void 0!==e[a[A]]&&""!==e[A]){if(void 0===e[A]){if(!t.Object.prototype[A])continue;e[A]=t.Object.prototype[A]}if(0!==e[A].indexOf("url(")){var n=new t.Color(e[A]);e[A]=n.setAlpha(i(n.getAlpha()*e[a[A]],2)).toRgba()}}return e}(b)}},parseElements:function(e,A,n,i,r){new t.ElementsParser(e,A,n,i,r).parse()},parseStyleAttribute:function(e){var t={},A=e.getAttribute("style");return A?("string"==typeof A?function(e,t){var A,n;e.replace(/;\s*$/,"").split(";").forEach((function(e){var i=e.split(":");A=i[0].trim().toLowerCase(),n=i[1].trim(),t[A]=n}))}(A,t):function(e,t){var A,n;for(var i in e)void 0!==e[i]&&(A=i.toLowerCase(),n=e[i],t[A]=n)}(A,t),t):t},parsePointsAttribute:function(e){if(!e)return null;var t,A,n=[];for(t=0,A=(e=(e=e.replace(/,/g," ").trim()).split(/\s+/)).length;t<A;t+=2)n.push({x:parseFloat(e[t]),y:parseFloat(e[t+1])});return n},getCSSRules:function(e){var A,n,i=e.getElementsByTagName("style"),r={};for(A=0,n=i.length;A<n;A++){var o=i[A].textContent;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.split("}").filter((function(e){return e.trim()})).forEach((function(e){var i=e.split("{"),o={},s=i[1].trim().split(";").filter((function(e){return e.trim()}));for(A=0,n=s.length;A<n;A++){var a=s[A].split(":"),l=a[0].trim(),c=a[1].trim();o[l]=c}(e=i[0].trim()).split(",").forEach((function(e){""!==(e=e.replace(/^svg/i,"").trim())&&(r[e]?t.util.object.extend(r[e],o):r[e]=t.util.object.clone(o))}))}))}return r},loadSVGFromURL:function(e,A,n,i){e=e.replace(/^\n\s*/,"").trim(),new t.util.request(e,{method:"get",onComplete:function(e){var r=e.responseXML;if(!r||!r.documentElement)return A&&A(null),!1;t.parseSVGDocument(r.documentElement,(function(e,t,n,i){A&&A(e,t,n,i)}),n,i)}})},loadSVGFromString:function(e,A,n,i){var r=(new t.window.DOMParser).parseFromString(e.trim(),"text/xml");t.parseSVGDocument(r.documentElement,(function(e,t,n,i){A(e,t,n,i)}),n,i)}})}(e),w.ElementsParser=function(e,t,A,n,i,r){this.elements=e,this.callback=t,this.options=A,this.reviver=n,this.svgUid=A&&A.svgUid||0,this.parsingOptions=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r},(f=w.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var e=this;this.elements.forEach((function(t,A){t.setAttribute("svgUid",e.svgUid),e.createObject(t,A)}))},f.findTag=function(e){return w[w.util.string.capitalize(e.tagName.replace("svg:",""))]},f.createObject=function(e,t){var A=this.findTag(e);if(A&&A.fromElement)try{A.fromElement(e,this.createCallback(t,e),this.options)}catch(n){w.log(n)}else this.checkIfDone()},f.createCallback=function(e,t){var A=this;return function(n){var i;A.resolveGradient(n,t,"fill"),A.resolveGradient(n,t,"stroke"),n instanceof w.Image&&n._originalElement&&(i=n.parsePreserveAspectRatioAttribute(t)),n._removeTransformMatrix(i),A.resolveClipPath(n,t),A.reviver&&A.reviver(t,n),A.instances[e]=n,A.checkIfDone()}},f.extractPropertyDefinition=function(e,t,A){var n=e[t],i=this.regexUrl;if(i.test(n)){i.lastIndex=0;var r=i.exec(n)[1];return i.lastIndex=0,w[A][this.svgUid][r]}},f.resolveGradient=function(e,t,A){var n=this.extractPropertyDefinition(e,A,"gradientDefs");if(n){var i=t.getAttribute(A+"-opacity"),r=w.Gradient.fromElement(n,e,i,this.options);e.set(A,r)}},f.createClipPathCallback=function(e,t){return function(e){e._removeTransformMatrix(),e.fillRule=e.clipRule,t.push(e)}},f.resolveClipPath=function(e,t){var A,n,i,r,o=this.extractPropertyDefinition(e,"clipPath","clipPaths");if(o){i=[],n=w.util.invertTransform(e.calcTransformMatrix());for(var s=o[0].parentNode,a=t;a.parentNode&&a.getAttribute("clip-path")!==e.clipPath;)a=a.parentNode;a.parentNode.appendChild(s);for(var l=0;l<o.length;l++)A=o[l],this.findTag(A).fromElement(A,this.createClipPathCallback(e,i),this.options);o=1===i.length?i[0]:new w.Group(i),r=w.util.multiplyTransformMatrices(n,o.calcTransformMatrix()),o.clipPath&&this.resolveClipPath(o,a);var c=w.util.qrDecompose(r);o.flipX=!1,o.flipY=!1,o.set("scaleX",c.scaleX),o.set("scaleY",c.scaleY),o.angle=c.angle,o.skewX=c.skewX,o.skewY=0,o.setPositionByOrigin({x:c.translateX,y:c.translateY},"center","center"),e.clipPath=o}else delete e.clipPath},f.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(e){return null!=e})),this.callback(this.instances,this.elements))},function(e){var t=e.fabric||(e.fabric={});function A(e,t){this.x=e,this.y=t}t.Point?t.warn("fabric.Point is already defined"):(t.Point=A,A.prototype={type:"point",constructor:A,add:function(e){return new A(this.x+e.x,this.y+e.y)},addEquals:function(e){return this.x+=e.x,this.y+=e.y,this},scalarAdd:function(e){return new A(this.x+e,this.y+e)},scalarAddEquals:function(e){return this.x+=e,this.y+=e,this},subtract:function(e){return new A(this.x-e.x,this.y-e.y)},subtractEquals:function(e){return this.x-=e.x,this.y-=e.y,this},scalarSubtract:function(e){return new A(this.x-e,this.y-e)},scalarSubtractEquals:function(e){return this.x-=e,this.y-=e,this},multiply:function(e){return new A(this.x*e,this.y*e)},multiplyEquals:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return new A(this.x/e,this.y/e)},divideEquals:function(e){return this.x/=e,this.y/=e,this},eq:function(e){return this.x===e.x&&this.y===e.y},lt:function(e){return this.x<e.x&&this.y<e.y},lte:function(e){return this.x<=e.x&&this.y<=e.y},gt:function(e){return this.x>e.x&&this.y>e.y},gte:function(e){return this.x>=e.x&&this.y>=e.y},lerp:function(e,t){return void 0===t&&(t=.5),t=Math.max(Math.min(1,t),0),new A(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)},distanceFrom:function(e){var t=this.x-e.x,A=this.y-e.y;return Math.sqrt(t*t+A*A)},midPointFrom:function(e){return this.lerp(e)},min:function(e){return new A(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new A(Math.max(this.x,e.x),Math.max(this.y,e.y))},toString:function(){return this.x+","+this.y},setXY:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setFromPoint:function(e){return this.x=e.x,this.y=e.y,this},swap:function(e){var t=this.x,A=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=A},clone:function(){return new A(this.x,this.y)}})}(e),function(e){var t=e.fabric||(e.fabric={});function A(e){this.status=e,this.points=[]}t.Intersection?t.warn("fabric.Intersection is already defined"):(t.Intersection=A,t.Intersection.prototype={constructor:A,appendPoint:function(e){return this.points.push(e),this},appendPoints:function(e){return this.points=this.points.concat(e),this}},t.Intersection.intersectLineLine=function(e,n,i,r){var o,s=(r.x-i.x)*(e.y-i.y)-(r.y-i.y)*(e.x-i.x),a=(n.x-e.x)*(e.y-i.y)-(n.y-e.y)*(e.x-i.x),l=(r.y-i.y)*(n.x-e.x)-(r.x-i.x)*(n.y-e.y);if(0!==l){var c=s/l,u=a/l;0<=c&&c<=1&&0<=u&&u<=1?(o=new A("Intersection")).appendPoint(new t.Point(e.x+c*(n.x-e.x),e.y+c*(n.y-e.y))):o=new A}else o=new A(0===s||0===a?"Coincident":"Parallel");return o},t.Intersection.intersectLinePolygon=function(e,t,n){var i,r,o,s,a=new A,l=n.length;for(s=0;s<l;s++)i=n[s],r=n[(s+1)%l],o=A.intersectLineLine(e,t,i,r),a.appendPoints(o.points);return a.points.length>0&&(a.status="Intersection"),a},t.Intersection.intersectPolygonPolygon=function(e,t){var n,i=new A,r=e.length;for(n=0;n<r;n++){var o=e[n],s=e[(n+1)%r],a=A.intersectLinePolygon(o,s,t);i.appendPoints(a.points)}return i.points.length>0&&(i.status="Intersection"),i},t.Intersection.intersectPolygonRectangle=function(e,n,i){var r=n.min(i),o=n.max(i),s=new t.Point(o.x,r.y),a=new t.Point(r.x,o.y),l=A.intersectLinePolygon(r,s,e),c=A.intersectLinePolygon(s,o,e),u=A.intersectLinePolygon(o,a,e),h=A.intersectLinePolygon(a,r,e),d=new A;return d.appendPoints(l.points),d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(h.points),d.points.length>0&&(d.status="Intersection"),d})}(e),function(e){var t=e.fabric||(e.fabric={});function A(e){e?this._tryParsingColor(e):this.setSource([0,0,0,1])}function n(e,t,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?e+6*(t-e)*A:A<.5?t:A<2/3?e+(t-e)*(2/3-A)*6:e}t.Color?t.warn("fabric.Color is already defined."):(t.Color=A,t.Color.prototype={_tryParsingColor:function(e){var t;e in A.colorNameMap&&(e=A.colorNameMap[e]),"transparent"===e&&(t=[255,255,255,0]),t||(t=A.sourceFromHex(e)),t||(t=A.sourceFromRgb(e)),t||(t=A.sourceFromHsl(e)),t||(t=[0,0,0,1]),t&&this.setSource(t)},_rgbToHsl:function(e,A,n){e/=255,A/=255,n/=255;var i,r,o,s=t.util.array.max([e,A,n]),a=t.util.array.min([e,A,n]);if(o=(s+a)/2,s===a)i=r=0;else{var l=s-a;switch(r=o>.5?l/(2-s-a):l/(s+a),s){case e:i=(A-n)/l+(A<n?6:0);break;case A:i=(n-e)/l+2;break;case n:i=(e-A)/l+4}i/=6}return[Math.round(360*i),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(e){this._source=e},toRgb:function(){var e=this.getSource();return"rgb("+e[0]+","+e[1]+","+e[2]+")"},toRgba:function(){var e=this.getSource();return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"},toHsl:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsl("+t[0]+","+t[1]+"%,"+t[2]+"%)"},toHsla:function(){var e=this.getSource(),t=this._rgbToHsl(e[0],e[1],e[2]);return"hsla("+t[0]+","+t[1]+"%,"+t[2]+"%,"+e[3]+")"},toHex:function(){var e,t,A,n=this.getSource();return e=1===(e=n[0].toString(16)).length?"0"+e:e,t=1===(t=n[1].toString(16)).length?"0"+t:t,A=1===(A=n[2].toString(16)).length?"0"+A:A,e.toUpperCase()+t.toUpperCase()+A.toUpperCase()},toHexa:function(){var e,t=this.getSource();return e=1===(e=(e=Math.round(255*t[3])).toString(16)).length?"0"+e:e,this.toHex()+e.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var t=this.getSource();return t[3]=e,this.setSource(t),this},toGrayscale:function(){var e=this.getSource(),t=parseInt((.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),10),A=e[3];return this.setSource([t,t,t,A]),this},toBlackWhite:function(e){var t=this.getSource(),A=(.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),n=t[3];return e=e||127,A=Number(A)<Number(e)?0:255,this.setSource([A,A,A,n]),this},overlayWith:function(e){e instanceof A||(e=new A(e));var t,n=[],i=this.getAlpha(),r=this.getSource(),o=e.getSource();for(t=0;t<3;t++)n.push(Math.round(.5*r[t]+.5*o[t]));return n[3]=i,this.setSource(n),this}},t.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,t.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,t.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,t.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},t.Color.fromRgb=function(e){return A.fromSource(A.sourceFromRgb(e))},t.Color.sourceFromRgb=function(e){var t=e.match(A.reRGBa);if(t){var n=parseInt(t[1],10)/(/%$/.test(t[1])?100:1)*(/%$/.test(t[1])?255:1),i=parseInt(t[2],10)/(/%$/.test(t[2])?100:1)*(/%$/.test(t[2])?255:1),r=parseInt(t[3],10)/(/%$/.test(t[3])?100:1)*(/%$/.test(t[3])?255:1);return[parseInt(n,10),parseInt(i,10),parseInt(r,10),t[4]?parseFloat(t[4]):1]}},t.Color.fromRgba=A.fromRgb,t.Color.fromHsl=function(e){return A.fromSource(A.sourceFromHsl(e))},t.Color.sourceFromHsl=function(e){var t=e.match(A.reHSLa);if(t){var i,r,o,s=(parseFloat(t[1])%360+360)%360/360,a=parseFloat(t[2])/(/%$/.test(t[2])?100:1),l=parseFloat(t[3])/(/%$/.test(t[3])?100:1);if(0===a)i=r=o=l;else{var c=l<=.5?l*(a+1):l+a-l*a,u=2*l-c;i=n(u,c,s+1/3),r=n(u,c,s),o=n(u,c,s-1/3)}return[Math.round(255*i),Math.round(255*r),Math.round(255*o),t[4]?parseFloat(t[4]):1]}},t.Color.fromHsla=A.fromHsl,t.Color.fromHex=function(e){return A.fromSource(A.sourceFromHex(e))},t.Color.sourceFromHex=function(e){if(e.match(A.reHex)){var t=e.slice(e.indexOf("#")+1),n=3===t.length||4===t.length,i=8===t.length||4===t.length,r=n?t.charAt(0)+t.charAt(0):t.substring(0,2),o=n?t.charAt(1)+t.charAt(1):t.substring(2,4),s=n?t.charAt(2)+t.charAt(2):t.substring(4,6),a=i?n?t.charAt(3)+t.charAt(3):t.substring(6,8):"FF";return[parseInt(r,16),parseInt(o,16),parseInt(s,16),parseFloat((parseInt(a,16)/255).toFixed(2))]}},t.Color.fromSource=function(e){var t=new A;return t.setSource(e),t})}(e),function(e){var t=e.fabric||(e.fabric={}),A=["e","se","s","sw","w","nw","n","ne","e"],n=["ns","nesw","ew","nwse"],i={},r="left",o="top",s="right",a="bottom",l="center",c={top:a,bottom:o,left:s,right:r,center:l},u=t.util.radiansToDegrees,h=Math.sign||function(e){return(e>0)-(e<0)||+e};function d(e,t){var A=e.angle+u(Math.atan2(t.y,t.x))+360;return Math.round(A%360/45)}function f(e,A){var n=A.transform.target,i=n.canvas,r=t.util.object.clone(A);r.target=n,i&&i.fire("object:"+e,r),n.fire(e,A)}function g(e,t){var A=t.canvas,n=e[A.uniScaleKey];return A.uniformScaling&&!n||!A.uniformScaling&&n}function p(e){return e.originX===l&&e.originY===l}function v(e,t,A){var n=e.lockScalingX,i=e.lockScalingY;return!(!n||!i)||(!(t||!n&&!i||!A)||(!(!n||"x"!==t)||!(!i||"y"!==t)))}function m(e,t,A,n){return{e:e,transform:t,pointer:{x:A,y:n}}}function B(e){return function(t,A,n,i){var r=A.target,o=r.getCenterPoint(),s=r.translateToOriginPoint(o,A.originX,A.originY),a=e(t,A,n,i);return r.setPositionByOrigin(s,A.originX,A.originY),a}}function y(e,t){return function(A,n,i,r){var o=t(A,n,i,r);return o&&f(e,m(A,n,i,r)),o}}function C(e,A,n,i,r){var o=e.target,s=o.controls[e.corner],a=o.canvas.getZoom(),l=o.padding/a,c=o.toLocalPoint(new t.Point(i,r),A,n);return c.x>=l&&(c.x-=l),c.x<=-l&&(c.x+=l),c.y>=l&&(c.y-=l),c.y<=l&&(c.y+=l),c.x-=s.offsetX,c.y-=s.offsetY,c}function w(e){return e.flipX!==e.flipY}function b(e,t,A,n,i){if(0!==e[t]){var r=i/e._getTransformedDimensions()[n]*e[A];e.set(A,r)}}function x(e,t,A,n){var i,l=t.target,c=l._getTransformedDimensions(0,l.skewY),h=C(t,t.originX,t.originY,A,n),d=Math.abs(2*h.x)-c.x,f=l.skewX;d<2?i=0:(i=u(Math.atan2(d/l.scaleX,c.y/l.scaleY)),t.originX===r&&t.originY===a&&(i=-i),t.originX===s&&t.originY===o&&(i=-i),w(l)&&(i=-i));var g=f!==i;if(g){var p=l._getTransformedDimensions().y;l.set("skewX",i),b(l,"skewY","scaleY","y",p)}return g}function Q(e,t,A,n){var i,l=t.target,c=l._getTransformedDimensions(l.skewX,0),h=C(t,t.originX,t.originY,A,n),d=Math.abs(2*h.y)-c.y,f=l.skewY;d<2?i=0:(i=u(Math.atan2(d/l.scaleY,c.x/l.scaleX)),t.originX===r&&t.originY===a&&(i=-i),t.originX===s&&t.originY===o&&(i=-i),w(l)&&(i=-i));var g=f!==i;if(g){var p=l._getTransformedDimensions().x;l.set("skewY",i),b(l,"skewX","scaleX","x",p)}return g}function E(e,t,A,n,i){i=i||{};var r,o,s,a,l,u,d=t.target,f=d.lockScalingX,m=d.lockScalingY,B=i.by,y=g(e,d),w=v(d,B,y),b=t.gestureScale;if(w)return!1;if(b)o=t.scaleX*b,s=t.scaleY*b;else{if(r=C(t,t.originX,t.originY,A,n),l="y"!==B?h(r.x):1,u="x"!==B?h(r.y):1,t.signX||(t.signX=l),t.signY||(t.signY=u),d.lockScalingFlip&&(t.signX!==l||t.signY!==u))return!1;if(a=d._getTransformedDimensions(),y&&!B){var x=Math.abs(r.x)+Math.abs(r.y),Q=t.original,E=x/(Math.abs(a.x*Q.scaleX/d.scaleX)+Math.abs(a.y*Q.scaleY/d.scaleY));o=Q.scaleX*E,s=Q.scaleY*E}else o=Math.abs(r.x*d.scaleX/a.x),s=Math.abs(r.y*d.scaleY/a.y);p(t)&&(o*=2,s*=2),t.signX!==l&&"y"!==B&&(t.originX=c[t.originX],o*=-1,t.signX=l),t.signY!==u&&"x"!==B&&(t.originY=c[t.originY],s*=-1,t.signY=u)}var I=d.scaleX,_=d.scaleY;return B?("x"===B&&d.set("scaleX",o),"y"===B&&d.set("scaleY",s)):(!f&&d.set("scaleX",o),!m&&d.set("scaleY",s)),I!==d.scaleX||_!==d.scaleY}i.scaleCursorStyleHandler=function(e,t,n){var i=g(e,n),r="";if(0!==t.x&&0===t.y?r="x":0===t.x&&0!==t.y&&(r="y"),v(n,r,i))return"not-allowed";var o=d(n,t);return A[o]+"-resize"},i.skewCursorStyleHandler=function(e,t,A){var i="not-allowed";if(0!==t.x&&A.lockSkewingY)return i;if(0!==t.y&&A.lockSkewingX)return i;var r=d(A,t)%4;return n[r]+"-resize"},i.scaleSkewCursorStyleHandler=function(e,t,A){return e[A.canvas.altActionKey]?i.skewCursorStyleHandler(e,t,A):i.scaleCursorStyleHandler(e,t,A)},i.rotationWithSnapping=y("rotating",B((function(e,t,A,n){var i=t,r=i.target,o=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY);if(r.lockRotation)return!1;var s,a=Math.atan2(i.ey-o.y,i.ex-o.x),l=Math.atan2(n-o.y,A-o.x),c=u(l-a+i.theta);if(r.snapAngle>0){var h=r.snapAngle,d=r.snapThreshold||h,f=Math.ceil(c/h)*h,g=Math.floor(c/h)*h;Math.abs(c-g)<d?c=g:Math.abs(c-f)<d&&(c=f)}return c<0&&(c=360+c),c%=360,s=r.angle!==c,r.angle=c,s}))),i.scalingEqually=y("scaling",B((function(e,t,A,n){return E(e,t,A,n)}))),i.scalingX=y("scaling",B((function(e,t,A,n){return E(e,t,A,n,{by:"x"})}))),i.scalingY=y("scaling",B((function(e,t,A,n){return E(e,t,A,n,{by:"y"})}))),i.scalingYOrSkewingX=function(e,t,A,n){return e[t.target.canvas.altActionKey]?i.skewHandlerX(e,t,A,n):i.scalingY(e,t,A,n)},i.scalingXOrSkewingY=function(e,t,A,n){return e[t.target.canvas.altActionKey]?i.skewHandlerY(e,t,A,n):i.scalingX(e,t,A,n)},i.changeWidth=y("resizing",B((function(e,t,A,n){var i=t.target,r=C(t,t.originX,t.originY,A,n),o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),s=p(t)?2:1,a=i.width,l=Math.abs(r.x*s/i.scaleX)-o;return i.set("width",Math.max(l,0)),a!==l}))),i.skewHandlerX=function(e,t,A,n){var i,a=t.target,c=a.skewX,u=t.originY;return!a.lockSkewingX&&(0===c?i=C(t,l,l,A,n).x>0?r:s:(c>0&&(i=u===o?r:s),c<0&&(i=u===o?s:r),w(a)&&(i=i===r?s:r)),t.originX=i,y("skewing",B(x))(e,t,A,n))},i.skewHandlerY=function(e,t,A,n){var i,s=t.target,c=s.skewY,u=t.originX;return!s.lockSkewingY&&(0===c?i=C(t,l,l,A,n).y>0?o:a:(c>0&&(i=u===r?o:a),c<0&&(i=u===r?a:o),w(s)&&(i=i===o?a:o)),t.originY=i,y("skewing",B(Q))(e,t,A,n))},i.dragHandler=function(e,t,A,n){var i=t.target,r=A-t.offsetX,o=n-t.offsetY,s=!i.get("lockMovementX")&&i.left!==r,a=!i.get("lockMovementY")&&i.top!==o;return s&&i.set("left",r),a&&i.set("top",o),(s||a)&&f("moving",m(e,t,A,n)),s||a},i.scaleOrSkewActionName=function(e,t,A){var n=e[A.canvas.altActionKey];return 0===t.x?n?"skewX":"scaleY":0===t.y?n?"skewY":"scaleX":void 0},i.rotationStyleHandler=function(e,t,A){return A.lockRotation?"not-allowed":t.cursorStyle},i.fireEvent=f,i.wrapWithFixedAnchor=B,i.wrapWithFireEvent=y,i.getLocalPoint=C,t.controlsUtils=i}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.degreesToRadians,n=t.controlsUtils;n.renderCircleControl=function(e,t,A,n,i){n=n||{};var r,o=this.sizeX||n.cornerSize||i.cornerSize,s=this.sizeY||n.cornerSize||i.cornerSize,a=void 0!==n.transparentCorners?n.transparentCorners:i.transparentCorners,l=a?"stroke":"fill",c=!a&&(n.cornerStrokeColor||i.cornerStrokeColor),u=t,h=A;e.save(),e.fillStyle=n.cornerColor||i.cornerColor,e.strokeStyle=n.cornerStrokeColor||i.cornerStrokeColor,o>s?(r=o,e.scale(1,s/o),h=A*o/s):s>o?(r=s,e.scale(o/s,1),u=t*s/o):r=o,e.lineWidth=1,e.beginPath(),e.arc(u,h,r/2,0,2*Math.PI,!1),e[l](),c&&e.stroke(),e.restore()},n.renderSquareControl=function(e,t,n,i,r){i=i||{};var o=this.sizeX||i.cornerSize||r.cornerSize,s=this.sizeY||i.cornerSize||r.cornerSize,a=void 0!==i.transparentCorners?i.transparentCorners:r.transparentCorners,l=a?"stroke":"fill",c=!a&&(i.cornerStrokeColor||r.cornerStrokeColor),u=o/2,h=s/2;e.save(),e.fillStyle=i.cornerColor||r.cornerColor,e.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,e.lineWidth=1,e.translate(t,n),e.rotate(A(r.angle)),e[l+"Rect"](-u,-h,o,s),c&&e.strokeRect(-u,-h,o,s),e.restore()}}(e),function(e){var t=e.fabric||(e.fabric={});t.Control=function(e){for(var t in e)this[t]=e[t]},t.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(e,t){return t.cursorStyle},getActionName:function(e,t){return t.actionName},getVisibility:function(e,t){var A=e._controlsVisibility;return A&&void 0!==A[t]?A[t]:this.visible},setVisibility:function(e){this.visible=e},positionHandler:function(e,A){return t.util.transformPoint({x:this.x*e.x+this.offsetX,y:this.y*e.y+this.offsetY},A)},calcCornerCoords:function(e,A,n,i,r){var o,s,a,l,c=r?this.touchSizeX:this.sizeX,u=r?this.touchSizeY:this.sizeY;if(c&&u&&c!==u){var h=Math.atan2(u,c),d=Math.sqrt(c*c+u*u)/2,f=h-t.util.degreesToRadians(e),g=Math.PI/2-h-t.util.degreesToRadians(e);o=d*t.util.cos(f),s=d*t.util.sin(f),a=d*t.util.cos(g),l=d*t.util.sin(g)}else{d=.7071067812*(c&&u?c:A);f=t.util.degreesToRadians(45-e);o=a=d*t.util.cos(f),s=l=d*t.util.sin(f)}return{tl:{x:n-l,y:i-a},tr:{x:n+o,y:i-s},bl:{x:n-o,y:i+s},br:{x:n+l,y:i+a}}},render:function(e,A,n,i,r){if("circle"===((i=i||{}).cornerStyle||r.cornerStyle))t.controlsUtils.renderCircleControl.call(this,e,A,n,i,r);else t.controlsUtils.renderSquareControl.call(this,e,A,n,i,r)}}}(e),function(){function e(e,t){var A,n,i,r,o=e.getAttribute("style"),s=e.getAttribute("offset")||0;if(s=(s=parseFloat(s)/(/%$/.test(s)?100:1))<0?0:s>1?1:s,o){var a=o.split(/\s*;\s*/);for(""===a[a.length-1]&&a.pop(),r=a.length;r--;){var l=a[r].split(/\s*:\s*/),c=l[0].trim(),u=l[1].trim();"stop-color"===c?A=u:"stop-opacity"===c&&(i=u)}}return A||(A=e.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=e.getAttribute("stop-opacity")),n=(A=new w.Color(A)).getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=n*t,{offset:s,color:A.toRgb(),opacity:i}}var t=w.util.object.clone;w.Gradient=w.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(e){e||(e={}),e.coords||(e.coords={});var t,A=this;Object.keys(e).forEach((function(t){A[t]=e[t]})),this.id?this.id+="_"+w.Object.__uid++:this.id=w.Object.__uid++,t={x1:e.coords.x1||0,y1:e.coords.y1||0,x2:e.coords.x2||0,y2:e.coords.y2||0},"radial"===this.type&&(t.r1=e.coords.r1||0,t.r2=e.coords.r2||0),this.coords=t,this.colorStops=e.colorStops.slice()},addColorStop:function(e){for(var t in e){var A=new w.Color(e[t]);this.colorStops.push({offset:parseFloat(t),color:A.toRgb(),opacity:A.getAlpha()})}return this},toObject:function(e){var t={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return w.util.populateWithProperties(this,t,e),t},toSVG:function(e,A){var n,i,r,o,s=t(this.coords,!0),a=(A=A||{},t(this.colorStops,!0)),l=s.r1>s.r2,c=this.gradientTransform?this.gradientTransform.concat():w.iMatrix.concat(),u=-this.offsetX,h=-this.offsetY,d=!!A.additionalTransform,f="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(a.sort((function(e,t){return e.offset-t.offset})),"objectBoundingBox"===f?(u/=e.width,h/=e.height):(u+=e.width/2,h+=e.height/2),"path"===e.type&&"percentage"!==this.gradientUnits&&(u-=e.pathOffset.x,h-=e.pathOffset.y),c[4]-=u,c[5]-=h,o='id="SVGID_'+this.id+'" gradientUnits="'+f+'"',o+=' gradientTransform="'+(d?A.additionalTransform+" ":"")+w.util.matrixToSVG(c)+'" ',"linear"===this.type?r=["<linearGradient ",o,' x1="',s.x1,'" y1="',s.y1,'" x2="',s.x2,'" y2="',s.y2,'">\n']:"radial"===this.type&&(r=["<radialGradient ",o,' cx="',l?s.x1:s.x2,'" cy="',l?s.y1:s.y2,'" r="',l?s.r1:s.r2,'" fx="',l?s.x2:s.x1,'" fy="',l?s.y2:s.y1,'">\n']),"radial"===this.type){if(l)for((a=a.concat()).reverse(),n=0,i=a.length;n<i;n++)a[n].offset=1-a[n].offset;var g=Math.min(s.r1,s.r2);if(g>0){var p=g/Math.max(s.r1,s.r2);for(n=0,i=a.length;n<i;n++)a[n].offset+=p*(1-a[n].offset)}}for(n=0,i=a.length;n<i;n++){var v=a[n];r.push("<stop ",'offset="',100*v.offset+"%",'" style="stop-color:',v.color,void 0!==v.opacity?";stop-opacity: "+v.opacity:";",'"/>\n')}return r.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),r.join("")},toLive:function(e){var t,A,n,i=w.util.object.clone(this.coords);if(this.type){for("linear"===this.type?t=e.createLinearGradient(i.x1,i.y1,i.x2,i.y2):"radial"===this.type&&(t=e.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2)),A=0,n=this.colorStops.length;A<n;A++){var r=this.colorStops[A].color,o=this.colorStops[A].opacity,s=this.colorStops[A].offset;void 0!==o&&(r=new w.Color(r).setAlpha(o).toRgba()),t.addColorStop(s,r)}return t}}}),w.util.object.extend(w.Gradient,{fromElement:function(t,A,n,i){var r=parseFloat(n)/(/%$/.test(n)?100:1);r=r<0?0:r>1?1:r,isNaN(r)&&(r=1);var o,s,a,l,c=t.getElementsByTagName("stop"),u="userSpaceOnUse"===t.getAttribute("gradientUnits")?"pixels":"percentage",h=t.getAttribute("gradientTransform")||"",d=[],f=0,g=0;for("linearGradient"===t.nodeName||"LINEARGRADIENT"===t.nodeName?(o="linear",s=function(e){return{x1:e.getAttribute("x1")||0,y1:e.getAttribute("y1")||0,x2:e.getAttribute("x2")||"100%",y2:e.getAttribute("y2")||0}}(t)):(o="radial",s=function(e){return{x1:e.getAttribute("fx")||e.getAttribute("cx")||"50%",y1:e.getAttribute("fy")||e.getAttribute("cy")||"50%",r1:0,x2:e.getAttribute("cx")||"50%",y2:e.getAttribute("cy")||"50%",r2:e.getAttribute("r")||"50%"}}(t)),a=c.length;a--;)d.push(e(c[a],r));return l=w.parseTransformAttribute(h),function(e,t,A,n){var i,r;Object.keys(t).forEach((function(e){"Infinity"===(i=t[e])?r=1:"-Infinity"===i?r=0:(r=parseFloat(t[e],10),"string"==typeof i&&/^(\d+\.\d+)%|(\d+)%$/.test(i)&&(r*=.01,"pixels"===n&&("x1"!==e&&"x2"!==e&&"r2"!==e||(r*=A.viewBoxWidth||A.width),"y1"!==e&&"y2"!==e||(r*=A.viewBoxHeight||A.height)))),t[e]=r}))}(0,s,i,u),"pixels"===u&&(f=-A.left,g=-A.top),new w.Gradient({id:t.getAttribute("id"),type:o,coords:s,colorStops:d,gradientUnits:u,gradientTransform:l,offsetX:f,offsetY:g})}})}(),g=w.util.toFixed,w.Pattern=w.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(e,t){if(e||(e={}),this.id=w.Object.__uid++,this.setOptions(e),!e.source||e.source&&"string"!=typeof e.source)t&&t(this);else{var A=this;this.source=w.util.createImage(),w.util.loadImage(e.source,(function(e,n){A.source=e,t&&t(A,n)}),null,this.crossOrigin)}},toObject:function(e){var t,A,n=w.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?t=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(t=this.source.toDataURL()),A={type:"pattern",source:t,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:g(this.offsetX,n),offsetY:g(this.offsetY,n),patternTransform:this.patternTransform?this.patternTransform.concat():null},w.util.populateWithProperties(this,A,e),A},toSVG:function(e){var t="function"==typeof this.source?this.source():this.source,A=t.width/e.width,n=t.height/e.height,i=this.offsetX/e.width,r=this.offsetY/e.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(A=1,i&&(A+=Math.abs(i))),t.src?o=t.src:t.toDataURL&&(o=t.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+i+'" y="'+r+'" width="'+A+'" height="'+n+'">\n<image x="0" y="0" width="'+t.width+'" height="'+t.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},setOptions:function(e){for(var t in e)this[t]=e[t]},toLive:function(e){var t=this.source;if(!t)return"";if(void 0!==t.src){if(!t.complete)return"";if(0===t.naturalWidth||0===t.naturalHeight)return""}return e.createPattern(t,this.repeat)}}),function(e){var t=e.fabric||(e.fabric={}),A=t.util.toFixed;t.Shadow?t.warn("fabric.Shadow is already defined."):(t.Shadow=t.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(e){for(var A in"string"==typeof e&&(e=this._parseShadow(e)),e)this[A]=e[A];this.id=t.Object.__uid++},_parseShadow:function(e){var A=e.trim(),n=t.Shadow.reOffsetsAndBlur.exec(A)||[];return{color:(A.replace(t.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(n[1],10)||0,offsetY:parseFloat(n[2],10)||0,blur:parseFloat(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(e){var n=40,i=40,r=t.Object.NUM_FRACTION_DIGITS,o=t.util.rotateVector({x:this.offsetX,y:this.offsetY},t.util.degreesToRadians(-e.angle)),s=new t.Color(this.color);return e.width&&e.height&&(n=100*A((Math.abs(o.x)+this.blur)/e.width,r)+20,i=100*A((Math.abs(o.y)+this.blur)/e.height,r)+20),e.flipX&&(o.x*=-1),e.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+i+'%" height="'+(100+2*i)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+A(this.blur?this.blur/2:0,r)+'"></feGaussianBlur>\n\t<feOffset dx="'+A(o.x,r)+'" dy="'+A(o.y,r)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+s.toRgb()+'" flood-opacity="'+s.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var e={},A=t.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(t){this[t]!==A[t]&&(e[t]=this[t])}),this),e}}),t.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){if(w.StaticCanvas)w.warn("fabric.StaticCanvas is already defined.");else{var e=w.util.object.extend,t=w.util.getElementOffset,A=w.util.removeFromArray,n=w.util.toFixed,i=w.util.transformPoint,r=w.util.invertTransform,o=w.util.getNodeCanvas,s=w.util.createCanvasElement,a=new Error("Could not initialize `canvas` element");w.StaticCanvas=w.util.createClass(w.CommonMethods,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:w.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(e,t){var A=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(e),this._initOptions(t),this.interactive||this._initRetinaScaling(),t.overlayImage&&this.setOverlayImage(t.overlayImage,A),t.backgroundImage&&this.setBackgroundImage(t.backgroundImage,A),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor,A),t.overlayColor&&this.setOverlayColor(t.overlayColor,A),this.calcOffset()},_isRetinaScaling:function(){return w.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,w.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var e=w.devicePixelRatio;this.__initRetinaScaling(e,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(e,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(e,t,A){t.setAttribute("width",this.width*e),t.setAttribute("height",this.height*e),A.scale(e,e)},calcOffset:function(){return this._offset=t(this.lowerCanvasEl),this},setOverlayImage:function(e,t,A){return this.__setBgOverlayImage("overlayImage",e,t,A)},setBackgroundImage:function(e,t,A){return this.__setBgOverlayImage("backgroundImage",e,t,A)},setOverlayColor:function(e,t){return this.__setBgOverlayColor("overlayColor",e,t)},setBackgroundColor:function(e,t){return this.__setBgOverlayColor("backgroundColor",e,t)},__setBgOverlayImage:function(e,t,A,n){return"string"==typeof t?w.util.loadImage(t,(function(t,i){if(t){var r=new w.Image(t,n);this[e]=r,r.canvas=this}A&&A(t,i)}),this,n&&n.crossOrigin):(n&&t.setOptions(n),this[e]=t,t&&(t.canvas=this),A&&A(t,!1)),this},__setBgOverlayColor:function(e,t,A){return this[e]=t,this._initGradient(t,e),this._initPattern(t,e,A),this},_createCanvasElement:function(){var e=s();if(!e)throw a;if(e.style||(e.style={}),void 0===e.getContext)throw a;return e},_initOptions:function(e){var t=this.lowerCanvasEl;this._setOptions(e),this.width=this.width||parseInt(t.width,10)||0,this.height=this.height||parseInt(t.height,10)||0,this.lowerCanvasEl.style&&(t.width=this.width,t.height=this.height,t.style.width=this.width+"px",t.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(e){e&&e.getContext?this.lowerCanvasEl=e:this.lowerCanvasEl=w.util.getById(e)||this._createCanvasElement(),w.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(e,t){return this.setDimensions({width:e},t)},setHeight:function(e,t){return this.setDimensions({height:e},t)},setDimensions:function(e,t){var A;for(var n in t=t||{},e)A=e[n],t.cssOnly||(this._setBackstoreDimension(n,e[n]),A+="px",this.hasLostContext=!0),t.backstoreOnly||this._setCssDimension(n,A);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),t.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(e,t){return this.lowerCanvasEl[e]=t,this.upperCanvasEl&&(this.upperCanvasEl[e]=t),this.cacheCanvasEl&&(this.cacheCanvasEl[e]=t),this[e]=t,this},_setCssDimension:function(e,t){return this.lowerCanvasEl.style[e]=t,this.upperCanvasEl&&(this.upperCanvasEl.style[e]=t),this.wrapperEl&&(this.wrapperEl.style[e]=t),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(e){var t,A,n,i=this._activeObject,r=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=e,A=0,n=this._objects.length;A<n;A++)(t=this._objects[A]).group||t.setCoords(!0);return i&&i.setCoords(),r&&r.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(e,t){var A=e,n=this.viewportTransform.slice(0);e=i(e,r(this.viewportTransform)),n[0]=t,n[3]=t;var o=i(e,n);return n[4]+=A.x-o.x,n[5]+=A.y-o.y,this.setViewportTransform(n)},setZoom:function(e){return this.zoomToPoint(new w.Point(0,0),e),this},absolutePan:function(e){var t=this.viewportTransform.slice(0);return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)},relativePan:function(e){return this.absolutePan(new w.Point(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(e){this.stateful&&e.setupState(),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added")},_onObjectRemoved:function(e){this.fire("object:removed",{target:e}),e.fire("removed"),delete e.canvas},clearContext:function(e){return e.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var e=this.contextContainer;return this.renderCanvas(e,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=w.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var e={},t=this.width,A=this.height,n=r(this.viewportTransform);return e.tl=i({x:0,y:0},n),e.br=i({x:t,y:A},n),e.tr=new w.Point(e.br.x,e.tl.y),e.bl=new w.Point(e.tl.x,e.br.y),this.vptCoords=e,e},cancelRequestedRender:function(){this.isRendering&&(w.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(e,t){var A=this.viewportTransform,n=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(e),w.util.setImageSmoothing(e,this.imageSmoothingEnabled),this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this._renderObjects(e,t),e.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),n&&(n.canvas=this,n.shouldCache(),n._transformDone=!0,n.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e)),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render",{ctx:e})},drawClipPathOnCanvas:function(e){var t=this.viewportTransform,A=this.clipPath;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e.globalCompositeOperation="destination-in",A.transform(e),e.scale(1/A.zoomX,1/A.zoomY),e.drawImage(A._cacheCanvas,-A.cacheTranslationX,-A.cacheTranslationY),e.restore()},_renderObjects:function(e,t){var A,n;for(A=0,n=t.length;A<n;++A)t[A]&&t[A].render(e)},_renderBackgroundOrOverlay:function(e,t){var A=this[t+"Color"],n=this[t+"Image"],i=this.viewportTransform,r=this[t+"Vpt"];if(A||n){if(A){e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=A.toLive?A.toLive(e,this):A,r&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e.transform(1,0,0,1,A.offsetX||0,A.offsetY||0);var o=A.gradientTransform||A.patternTransform;o&&e.transform(o[0],o[1],o[2],o[3],o[4],o[5]),e.fill(),e.restore()}n&&(e.save(),r&&e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n.render(e),e.restore())}},_renderBackground:function(e){this._renderBackgroundOrOverlay(e,"background")},_renderOverlay:function(e){this._renderBackgroundOrOverlay(e,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new w.Point(this.width/2,this.height/2)},centerObjectH:function(e){return this._centerObject(e,new w.Point(this.getCenterPoint().x,e.getCenterPoint().y))},centerObjectV:function(e){return this._centerObject(e,new w.Point(e.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(e){var t=this.getCenterPoint();return this._centerObject(e,t)},viewportCenterObject:function(e){var t=this.getVpCenter();return this._centerObject(e,t)},viewportCenterObjectH:function(e){var t=this.getVpCenter();return this._centerObject(e,new w.Point(t.x,e.getCenterPoint().y)),this},viewportCenterObjectV:function(e){var t=this.getVpCenter();return this._centerObject(e,new w.Point(e.getCenterPoint().x,t.y))},getVpCenter:function(){var e=this.getCenterPoint(),t=r(this.viewportTransform);return i(e,t)},_centerObject:function(e,t){return e.setPositionByOrigin(t,"center","center"),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(e){return this.toDatalessObject(e)},toObject:function(e){return this._toObjectMethod("toObject",e)},toDatalessObject:function(e){return this._toObjectMethod("toDatalessObject",e)},_toObjectMethod:function(t,A){var n=this.clipPath,i={version:w.version,objects:this._toObjects(t,A)};return n&&!n.excludeFromExport&&(i.clipPath=this._toObject(this.clipPath,t,A)),e(i,this.__serializeBgOverlay(t,A)),w.util.populateWithProperties(this,i,A),i},_toObjects:function(e,t){return this._objects.filter((function(e){return!e.excludeFromExport})).map((function(A){return this._toObject(A,e,t)}),this)},_toObject:function(e,t,A){var n;this.includeDefaultValues||(n=e.includeDefaultValues,e.includeDefaultValues=!1);var i=e[t](A);return this.includeDefaultValues||(e.includeDefaultValues=n),i},__serializeBgOverlay:function(e,t){var A={},n=this.backgroundImage,i=this.overlayImage,r=this.backgroundColor,o=this.overlayColor;return r&&r.toObject?r.excludeFromExport||(A.background=r.toObject(t)):r&&(A.background=r),o&&o.toObject?o.excludeFromExport||(A.overlay=o.toObject(t)):o&&(A.overlay=o),n&&!n.excludeFromExport&&(A.backgroundImage=this._toObject(n,e,t)),i&&!i.excludeFromExport&&(A.overlayImage=this._toObject(i,e,t)),A},svgViewportTransformation:!0,toSVG:function(e,t){e||(e={}),e.reviver=t;var A=[];return this._setSVGPreamble(A,e),this._setSVGHeader(A,e),this.clipPath&&A.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(A,"background"),this._setSVGBgOverlayImage(A,"backgroundImage",t),this._setSVGObjects(A,t),this.clipPath&&A.push("</g>\n"),this._setSVGBgOverlayColor(A,"overlay"),this._setSVGBgOverlayImage(A,"overlayImage",t),A.push("</svg>"),A.join("")},_setSVGPreamble:function(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(e,t){var A,i=t.width||this.width,r=t.height||this.height,o='viewBox="0 0 '+this.width+" "+this.height+'" ',s=w.Object.NUM_FRACTION_DIGITS;t.viewBox?o='viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':this.svgViewportTransformation&&(A=this.viewportTransform,o='viewBox="'+n(-A[4]/A[0],s)+" "+n(-A[5]/A[3],s)+" "+n(this.width/A[0],s)+" "+n(this.height/A[3],s)+'" '),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',r,'" ',o,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",w.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")},createSVGClipPathMarkup:function(e){var t=this.clipPath;return t?(t.clipPathId="CLIPPATH_"+w.Object.__uid++,'<clipPath id="'+t.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(e.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var e=this;return["background","overlay"].map((function(t){var A=e[t+"Color"];if(A&&A.toLive){var n=e[t+"Vpt"],i=e.viewportTransform,r={width:e.width/(n?i[0]:1),height:e.height/(n?i[3]:1)};return A.toSVG(r,{additionalTransform:n?w.util.matrixToSVG(i):""})}})).join("")},createSVGFontFacesMarkup:function(){var e,t,A,n,i,r,o,s,a="",l={},c=w.fontPaths,u=[];for(this._objects.forEach((function e(t){u.push(t),t._objects&&t._objects.forEach(e)})),o=0,s=u.length;o<s;o++)if(t=(e=u[o]).fontFamily,-1!==e.type.indexOf("text")&&!l[t]&&c[t]&&(l[t]=!0,e.styles))for(i in A=e.styles)for(r in n=A[i])!l[t=n[r].fontFamily]&&c[t]&&(l[t]=!0);for(var h in l)a+=["\t\t@font-face {\n","\t\t\tfont-family: '",h,"';\n","\t\t\tsrc: url('",c[h],"');\n","\t\t}\n"].join("");return a&&(a=['\t<style type="text/css">',"<![CDATA[\n",a,"]]>","</style>\n"].join("")),a},_setSVGObjects:function(e,t){var A,n,i,r=this._objects;for(n=0,i=r.length;n<i;n++)(A=r[n]).excludeFromExport||this._setSVGObject(e,A,t)},_setSVGObject:function(e,t,A){e.push(t.toSVG(A))},_setSVGBgOverlayImage:function(e,t,A){this[t]&&!this[t].excludeFromExport&&this[t].toSVG&&e.push(this[t].toSVG(A))},_setSVGBgOverlayColor:function(e,t){var A=this[t+"Color"],n=this.viewportTransform,i=this.width,r=this.height;if(A)if(A.toLive){var o=A.repeat,s=w.util.invertTransform(n),a=this[t+"Vpt"]?w.util.matrixToSVG(s):"";e.push('<rect transform="'+a+" translate(",i/2,",",r/2,')"',' x="',A.offsetX-i/2,'" y="',A.offsetY-r/2,'" ','width="',"repeat-y"===o||"no-repeat"===o?A.source.width:i,'" height="',"repeat-x"===o||"no-repeat"===o?A.source.height:r,'" fill="url(#SVGID_'+A.id+')"',"></rect>\n")}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',A,'"',"></rect>\n")},sendToBack:function(e){if(!e)return this;var t,n,i,r=this._activeObject;if(e===r&&"activeSelection"===e.type)for(t=(i=r._objects).length;t--;)n=i[t],A(this._objects,n),this._objects.unshift(n);else A(this._objects,e),this._objects.unshift(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(e){if(!e)return this;var t,n,i,r=this._activeObject;if(e===r&&"activeSelection"===e.type)for(i=r._objects,t=0;t<i.length;t++)n=i[t],A(this._objects,n),this._objects.push(n);else A(this._objects,e),this._objects.push(e);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(e,t){if(!e)return this;var n,i,r,o,s,a=this._activeObject,l=0;if(e===a&&"activeSelection"===e.type)for(s=a._objects,n=0;n<s.length;n++)i=s[n],(r=this._objects.indexOf(i))>0+l&&(o=r-1,A(this._objects,i),this._objects.splice(o,0,i)),l++;else 0!==(r=this._objects.indexOf(e))&&(o=this._findNewLowerIndex(e,r,t),A(this._objects,e),this._objects.splice(o,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(e,t,A){var n,i;if(A)for(n=t,i=t-1;i>=0;--i){if(e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e)){n=i;break}}else n=t-1;return n},bringForward:function(e,t){if(!e)return this;var n,i,r,o,s,a=this._activeObject,l=0;if(e===a&&"activeSelection"===e.type)for(n=(s=a._objects).length;n--;)i=s[n],(r=this._objects.indexOf(i))<this._objects.length-1-l&&(o=r+1,A(this._objects,i),this._objects.splice(o,0,i)),l++;else(r=this._objects.indexOf(e))!==this._objects.length-1&&(o=this._findNewUpperIndex(e,r,t),A(this._objects,e),this._objects.splice(o,0,e));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(e,t,A){var n,i,r;if(A)for(n=t,i=t+1,r=this._objects.length;i<r;++i){if(e.intersectsWithObject(this._objects[i])||e.isContainedWithinObject(this._objects[i])||this._objects[i].isContainedWithinObject(e)){n=i;break}}else n=t+1;return n},moveTo:function(e,t){return A(this._objects,e),this._objects.splice(t,0,e),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(w.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),w.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),w.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),e(w.StaticCanvas.prototype,w.Observable),e(w.StaticCanvas.prototype,w.Collection),e(w.StaticCanvas.prototype,w.DataURLExporter),e(w.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(e){var t=s();if(!t||!t.getContext)return null;var A=t.getContext("2d");return A&&"setLineDash"===e?void 0!==A.setLineDash:null}}),w.StaticCanvas.prototype.toJSON=w.StaticCanvas.prototype.toObject,w.isLikelyNode&&(w.StaticCanvas.prototype.createPNGStream=function(){var e=o(this.lowerCanvasEl);return e&&e.createPNGStream()},w.StaticCanvas.prototype.createJPEGStream=function(e){var t=o(this.lowerCanvasEl);return t&&t.createJPEGStream(e)})}}(),w.BaseBrush=w.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(e){var t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])},_setShadow:function(){if(this.shadow){var e=this.canvas,t=this.shadow,A=e.contextTop,n=e.getZoom();e&&e._isRetinaScaling()&&(n*=w.devicePixelRatio),A.shadowColor=t.color,A.shadowBlur=t.blur*n,A.shadowOffsetX=t.offsetX*n,A.shadowOffsetY=t.offsetY*n}},needsFullRender:function(){return new w.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0},_isOutSideCanvas:function(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}),w.PencilBrush=w.util.createClass(w.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(e){this.canvas=e,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(e,t,A){var n=t.midPointFrom(A);return e.quadraticCurveTo(t.x,t.y,n.x,n.y),n},onMouseDown:function(e,t){this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],this._prepareForDrawing(e),this._captureDrawingPath(e),this._render())},onMouseMove:function(e,t){if(this.canvas._isMainEvent(t.e)&&(this.drawStraightLine=t.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._captureDrawingPath(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var A=this._points,n=A.length,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&(i.beginPath(),i.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(i,A[n-2],A[n-1],!0),i.stroke(),i.restore()}},onMouseUp:function(e){return!this.canvas._isMainEvent(e.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(e){var t=new w.Point(e.x,e.y);this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)},_addPoint:function(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(e){var t=new w.Point(e.x,e.y);return this._addPoint(t)},_render:function(e){var t,A,n=this._points[0],i=this._points[1];if(e=e||this.canvas.contextTop,this._saveAndTransform(e),e.beginPath(),2===this._points.length&&n.x===i.x&&n.y===i.y){var r=this.width/1e3;n=new w.Point(n.x,n.y),i=new w.Point(i.x,i.y),n.x-=r,i.x+=r}for(e.moveTo(n.x,n.y),t=1,A=this._points.length;t<A;t++)this._drawSegment(e,n,i),n=this._points[t],i=this._points[t+1];e.lineTo(n.x,n.y),e.stroke(),e.restore()},convertPointsToSVGPath:function(e){var t=this.width/1e3;return w.util.getSmoothPathFromPoints(e,t)},_isEmptySVGPath:function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===w.util.joinPath(e)},createPath:function(e){var t=new w.Path(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new w.Shadow(this.shadow)),t},decimatePoints:function(e,t){if(e.length<=2)return e;var A,n=this.canvas.getZoom(),i=Math.pow(t/n,2),r=e.length-1,o=e[0],s=[o];for(A=1;A<r-1;A++)Math.pow(o.x-e[A].x,2)+Math.pow(o.y-e[A].y,2)>=i&&(o=e[A],s.push(o));return s.push(e[r]),s},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}}),w.CircleBrush=w.util.createClass(w.BaseBrush,{width:10,initialize:function(e){this.canvas=e,this.points=[]},drawDot:function(e){var t=this.addPoint(e),A=this.canvas.contextTop;this._saveAndTransform(A),this.dot(A,t),A.restore()},dot:function(e,t){e.fillStyle=t.fill,e.beginPath(),e.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),e.closePath(),e.fill()},onMouseDown:function(e){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(e)},_render:function(){var e,t,A=this.canvas.contextTop,n=this.points;for(this._saveAndTransform(A),e=0,t=n.length;e<t;e++)this.dot(A,n[e]);A.restore()},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(e),this._render()):this.drawDot(e))},onMouseUp:function(){var e,t,A=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var n=[];for(e=0,t=this.points.length;e<t;e++){var i=this.points[e],r=new w.Circle({radius:i.radius,left:i.x,top:i.y,originX:"center",originY:"center",fill:i.fill});this.shadow&&(r.shadow=new w.Shadow(this.shadow)),n.push(r)}var o=new w.Group(n);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=A,this.canvas.requestRenderAll()},addPoint:function(e){var t=new w.Point(e.x,e.y),A=w.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new w.Color(this.color).setAlpha(w.util.getRandomInt(0,100)/100).toRgba();return t.radius=A,t.fill=n,this.points.push(t),t}}),w.SprayBrush=w.util.createClass(w.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(e){this.canvas=e,this.sprayChunks=[]},onMouseDown:function(e){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(e),this.render(this.sprayChunkPoints)},onMouseMove:function(e){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(e)||(this.addSprayChunk(e),this.render(this.sprayChunkPoints))},onMouseUp:function(){var e=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var t=[],A=0,n=this.sprayChunks.length;A<n;A++)for(var i=this.sprayChunks[A],r=0,o=i.length;r<o;r++){var s=new w.Rect({width:i[r].width,height:i[r].width,left:i[r].x+1,top:i[r].y+1,originX:"center",originY:"center",fill:this.color});t.push(s)}this.optimizeOverlapping&&(t=this._getOptimizedRects(t));var a=new w.Group(t);this.shadow&&a.set("shadow",new w.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=e,this.canvas.requestRenderAll()},_getOptimizedRects:function(e){var t,A,n,i={};for(A=0,n=e.length;A<n;A++)i[t=e[A].left+""+e[A].top]||(i[t]=e[A]);var r=[];for(t in i)r.push(i[t]);return r},render:function(e){var t,A,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,A=e.length;t<A;t++){var i=e[t];void 0!==i.opacity&&(n.globalAlpha=i.opacity),n.fillRect(i.x,i.y,i.width,i.width)}n.restore()},_render:function(){var e,t,A=this.canvas.contextTop;for(A.fillStyle=this.color,this._saveAndTransform(A),e=0,t=this.sprayChunks.length;e<t;e++)this.render(this.sprayChunks[e]);A.restore()},addSprayChunk:function(e){this.sprayChunkPoints=[];var t,A,n,i,r=this.width/2;for(i=0;i<this.density;i++){t=w.util.getRandomInt(e.x-r,e.x+r),A=w.util.getRandomInt(e.y-r,e.y+r),n=this.dotWidthVariance?w.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new w.Point(t,A);o.width=n,this.randomOpacity&&(o.opacity=w.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),w.PatternBrush=w.util.createClass(w.PencilBrush,{getPatternSrc:function(){var e=w.util.createCanvasElement(),t=e.getContext("2d");return e.width=e.height=25,t.fillStyle=this.color,t.beginPath(),t.arc(10,10,10,0,2*Math.PI,!1),t.closePath(),t.fill(),e},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(e){return e.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(e){this.callSuper("_setBrushStyles",e),e.strokeStyle=this.getPattern(e)},createPath:function(e){var t=this.callSuper("createPath",e),A=t._getLeftTopCoords().scalarAdd(t.strokeWidth/2);return t.stroke=new w.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-A.x,offsetY:-A.y}),t}}),function(){var e=w.util.getPointer,t=w.util.degreesToRadians,A=w.util.isTouchEvent;for(var n in w.Canvas=w.util.createClass(w.StaticCanvas,{initialize:function(e,t){t||(t={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(e,t),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=w.PencilBrush&&new w.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var e,t,A,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){t=[],A=[];for(var i=0,r=this._objects.length;i<r;i++)e=this._objects[i],-1===n.indexOf(e)?t.push(e):A.push(e);n.length>1&&(this._activeObject._objects=A),t.push.apply(t,A)}else t=this._objects;return t},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var e=this.contextContainer;return this.renderCanvas(e,this._chooseObjectsToRender()),this},renderTopLayer:function(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()},renderTop:function(){var e=this.contextTop;return this.clearContext(e),this.renderTopLayer(e),this.fire("after:render"),this},_normalizePointer:function(e,t){var A=e.calcTransformMatrix(),n=w.util.invertTransform(A),i=this.restorePointerVpt(t);return w.util.transformPoint(i,n)},isTargetTransparent:function(e,t,A){if(e.shouldCache()&&e._cacheCanvas&&e!==this._activeObject){var n=this._normalizePointer(e,{x:t,y:A}),i=Math.max(e.cacheTranslationX+n.x*e.zoomX,0),r=Math.max(e.cacheTranslationY+n.y*e.zoomY,0);return w.util.isTransparent(e._cacheContext,Math.round(i),Math.round(r),this.targetFindTolerance)}var o=this.contextCache,s=e.selectionBackgroundColor,a=this.viewportTransform;return e.selectionBackgroundColor="",this.clearContext(o),o.save(),o.transform(a[0],a[1],a[2],a[3],a[4],a[5]),e.render(o),o.restore(),e.selectionBackgroundColor=s,w.util.isTransparent(o,t,A,this.targetFindTolerance)},_isSelectionKeyPressed:function(e){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(t){return!0===e[t]})):e[this.selectionKey]},_shouldClearSelection:function(e,t){var A=this.getActiveObjects(),n=this._activeObject;return!t||t&&n&&A.length>1&&-1===A.indexOf(t)&&n!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&n&&n!==t},_shouldCenterTransform:function(e,t,A){var n;if(e)return"scale"===t||"scaleX"===t||"scaleY"===t||"resizing"===t?n=this.centeredScaling||e.centeredScaling:"rotate"===t&&(n=this.centeredRotation||e.centeredRotation),n?!A:A},_getOriginFromCorner:function(e,t){var A={x:e.originX,y:e.originY};return"ml"===t||"tl"===t||"bl"===t?A.x="right":"mr"!==t&&"tr"!==t&&"br"!==t||(A.x="left"),"tl"===t||"mt"===t||"tr"===t?A.y="bottom":"bl"!==t&&"mb"!==t&&"br"!==t||(A.y="top"),A},_getActionFromCorner:function(e,t,A,n){if(!t||!e)return"drag";var i=n.controls[t];return i.getActionName(A,i,n)},_setupCurrentTransform:function(e,A,n){if(A){var i=this.getPointer(e),r=A.__corner,o=A.controls[r],s=n&&r?o.getActionHandler(e,A,o):w.controlsUtils.dragHandler,a=this._getActionFromCorner(n,r,e,A),l=this._getOriginFromCorner(A,r),c=e[this.centeredKey],u={target:A,action:a,actionHandler:s,corner:r,scaleX:A.scaleX,scaleY:A.scaleY,skewX:A.skewX,skewY:A.skewY,offsetX:i.x-A.left,offsetY:i.y-A.top,originX:l.x,originY:l.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:t(A.angle),width:A.width*A.scaleX,shiftKey:e.shiftKey,altKey:c,original:w.util.saveObjectTransform(A)};this._shouldCenterTransform(A,a,c)&&(u.originX="center",u.originY="center"),u.original.originX=l.x,u.original.originY=l.y,this._currentTransform=u,this._beforeTransform(e)}},setCursor:function(e){this.upperCanvasEl.style.cursor=e},_drawSelection:function(e){var t=this._groupSelector,A=new w.Point(t.ex,t.ey),n=w.util.transformPoint(A,this.viewportTransform),i=new w.Point(t.ex+t.left,t.ey+t.top),r=w.util.transformPoint(i,this.viewportTransform),o=Math.min(n.x,r.x),s=Math.min(n.y,r.y),a=Math.max(n.x,r.x),l=Math.max(n.y,r.y),c=this.selectionLineWidth/2;this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(o,s,a-o,l-s)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,o+=c,s+=c,a-=c,l-=c,w.Object.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(o,s,a-o,l-s))},findTarget:function(e,t){if(!this.skipTargetFind){var n,i,r=this.getPointer(e,!0),o=this._activeObject,s=this.getActiveObjects(),a=A(e),l=s.length>1&&!t||1===s.length;if(this.targets=[],l&&o._findTargetCorner(r,a))return o;if(s.length>1&&!t&&o===this._searchPossibleTargets([o],r))return o;if(1===s.length&&o===this._searchPossibleTargets([o],r)){if(!this.preserveObjectStacking)return o;n=o,i=this.targets,this.targets=[]}var c=this._searchPossibleTargets(this._objects,r);return e[this.altSelectionKey]&&c&&n&&c!==n&&(c=n,this.targets=i),c}},_checkTarget:function(e,t,A){if(t&&t.visible&&t.evented&&t.containsPoint(e)){if(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing)return!0;if(!this.isTargetTransparent(t,A.x,A.y))return!0}},_searchPossibleTargets:function(e,t){for(var A,n,i=e.length;i--;){var r=e[i],o=r.group?this._normalizePointer(r.group,t):t;if(this._checkTarget(o,r,t)){(A=e[i]).subTargetCheck&&A instanceof w.Group&&(n=this._searchPossibleTargets(A._objects,t))&&this.targets.push(n);break}}return A},restorePointerVpt:function(e){return w.util.transformPoint(e,w.util.invertTransform(this.viewportTransform))},getPointer:function(t,A){if(this._absolutePointer&&!A)return this._absolutePointer;if(this._pointer&&A)return this._pointer;var n,i=e(t),r=this.upperCanvasEl,o=r.getBoundingClientRect(),s=o.width||0,a=o.height||0;s&&a||("top"in o&&"bottom"in o&&(a=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(s=Math.abs(o.right-o.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,A||(i=this.restorePointerVpt(i));var l=this.getRetinaScaling();return 1!==l&&(i.x/=l,i.y/=l),n=0===s||0===a?{width:1,height:1}:{width:r.width/s,height:r.height/a},{x:i.x*n.width,y:i.y*n.height}},_createUpperCanvas:function(){var e=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),t=this.lowerCanvasEl,A=this.upperCanvasEl;A?A.className="":(A=this._createCanvasElement(),this.upperCanvasEl=A),w.util.addClass(A,"upper-canvas "+e),this.wrapperEl.appendChild(A),this._copyCanvasStyle(t,A),this._applyCanvasStyle(A),this.contextTop=A.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=w.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),w.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),w.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(e){var t=this.width||e.width,A=this.height||e.height;w.util.setStyle(e,{position:"absolute",width:t+"px",height:A+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),e.width=t,e.height=A,w.util.makeElementUnselectable(e)},_copyCanvasStyle:function(e,t){t.style.cssText=e.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var e=this._activeObject;return e?"activeSelection"===e.type&&e._objects?e._objects.slice(0):[e]:[]},_onObjectRemoved:function(e){e===this._activeObject&&(this.fire("before:selection:cleared",{target:e}),this._discardActiveObject(),this.fire("selection:cleared",{target:e}),e.fire("deselected")),e===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",e)},_fireSelectionEvents:function(e,t){var A=!1,n=this.getActiveObjects(),i=[],r=[];e.forEach((function(e){-1===n.indexOf(e)&&(A=!0,e.fire("deselected",{e:t,target:e}),r.push(e))})),n.forEach((function(n){-1===e.indexOf(n)&&(A=!0,n.fire("selected",{e:t,target:n}),i.push(n))})),e.length>0&&n.length>0?A&&this.fire("selection:updated",{e:t,selected:i,deselected:r}):n.length>0?this.fire("selection:created",{e:t,selected:i}):e.length>0&&this.fire("selection:cleared",{e:t,deselected:r})},setActiveObject:function(e,t){var A=this.getActiveObjects();return this._setActiveObject(e,t),this._fireSelectionEvents(A,t),this},_setActiveObject:function(e,t){return this._activeObject!==e&&(!!this._discardActiveObject(t,e)&&(!e.onSelect({e:t})&&(this._activeObject=e,!0)))},_discardActiveObject:function(e,t){var A=this._activeObject;if(A){if(A.onDeselect({e:e,object:t}))return!1;this._activeObject=null}return!0},discardActiveObject:function(e){var t=this.getActiveObjects(),A=this.getActiveObject();return t.length&&this.fire("before:selection:cleared",{target:A,e:e}),this._discardActiveObject(e),this._fireSelectionEvents(t,e),this},dispose:function(){var e=this.wrapperEl;return this.removeListeners(),e.removeChild(this.upperCanvasEl),e.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(e){w.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this)),e.parentNode&&e.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,w.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(e){var t=this._activeObject;t&&t._renderControls(e)},_toObject:function(e,t,A){var n=this._realizeGroupTransformOnObject(e),i=this.callSuper("_toObject",e,t,A);return this._unwindGroupTransformOnObject(e,n),i},_realizeGroupTransformOnObject:function(e){if(e.group&&"activeSelection"===e.group.type&&this._activeObject===e.group){var t={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach((function(A){t[A]=e[A]})),w.util.addTransformToObject(e,this._activeObject.calcOwnMatrix()),t}return null},_unwindGroupTransformOnObject:function(e,t){t&&e.set(t)},_setSVGObject:function(e,t,A){var n=this._realizeGroupTransformOnObject(t);this.callSuper("_setSVGObject",e,t,A),this._unwindGroupTransformOnObject(t,n)},setViewportTransform:function(e){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),w.StaticCanvas.prototype.setViewportTransform.call(this,e)}}),w.StaticCanvas)"prototype"!==n&&(w.Canvas[n]=w.StaticCanvas[n])}(),function(){var e=w.util.addListener,t=w.util.removeListener,A={passive:!1};function n(e,t){return e.button&&e.button===t-1}w.util.object.extend(w.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(e,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(e,t){var n=this.upperCanvasEl,i=this._getEventPrefix();e(w.window,"resize",this._onResize),e(n,i+"down",this._onMouseDown),e(n,i+"move",this._onMouseMove,A),e(n,i+"out",this._onMouseOut),e(n,i+"enter",this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"dblclick",this._onDoubleClick),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,A),"undefined"!=typeof eventjs&&t in eventjs&&(eventjs[t](n,"gesture",this._onGesture),eventjs[t](n,"drag",this._onDrag),eventjs[t](n,"orientation",this._onOrientationChange),eventjs[t](n,"shake",this._onShake),eventjs[t](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(t,"remove");var e=this._getEventPrefix();t(w.document,e+"up",this._onMouseUp),t(w.document,"touchend",this._onTouchEnd,A),t(w.document,e+"move",this._onMouseMove,A),t(w.document,"touchmove",this._onMouseMove,A)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(e,t){this.__onTransformGesture&&this.__onTransformGesture(e,t)},_onDrag:function(e,t){this.__onDrag&&this.__onDrag(e,t)},_onMouseWheel:function(e){this.__onMouseWheel(e)},_onMouseOut:function(e){var t=this._hoveredTarget;this.fire("mouse:out",{target:t,e:e}),this._hoveredTarget=null,t&&t.fire("mouseout",{e:e});var A=this;this._hoveredTargets.forEach((function(n){A.fire("mouse:out",{target:t,e:e}),n&&t.fire("mouseout",{e:e})})),this._hoveredTargets=[]},_onMouseEnter:function(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",{target:null,e:e}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(e,t){this.__onOrientationChange&&this.__onOrientationChange(e,t)},_onShake:function(e,t){this.__onShake&&this.__onShake(e,t)},_onLongPress:function(e,t){this.__onLongPress&&this.__onLongPress(e,t)},_onDragOver:function(e){e.preventDefault();var t=this._simpleEventHandler("dragover",e);this._fireEnterLeaveEvents(t,e)},_onDrop:function(e){return this._simpleEventHandler("drop:before",e),this._simpleEventHandler("drop",e)},_onContextMenu:function(e){return this.stopContextMenu&&(e.stopPropagation(),e.preventDefault()),!1},_onDoubleClick:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData(e)},getPointerId:function(e){var t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1},_isMainEvent:function(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||(!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(n){n.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var i=this.upperCanvasEl,r=this._getEventPrefix();e(w.document,"touchend",this._onTouchEnd,A),e(w.document,"touchmove",this._onMouseMove,A),t(i,r+"down",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var i=this.upperCanvasEl,r=this._getEventPrefix();t(i,r+"move",this._onMouseMove,A),e(w.document,r+"up",this._onMouseUp),e(w.document,r+"move",this._onMouseMove,A)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var i=this._getEventPrefix();t(w.document,"touchend",this._onTouchEnd,A),t(w.document,"touchmove",this._onMouseMove,A);var r=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){e(r.upperCanvasEl,i+"down",r._onMouseDown),r._willAddMouseDown=0}),400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var i=this.upperCanvasEl,r=this._getEventPrefix();this._isMainEvent(n)&&(t(w.document,r+"up",this._onMouseUp),t(w.document,r+"move",this._onMouseMove,A),e(i,r+"move",this._onMouseMove,A))},_onMouseMove:function(e){!this.allowTouchScrolling&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)},_onResize:function(){this.calcOffset()},_shouldRender:function(e){var t=this._activeObject;return!!(!!t!=!!e||t&&e&&t!==e)||(t&&t.isEditing,!1)},__onMouseUp:function(e){var t,A=this._currentTransform,i=this._groupSelector,r=!1,o=!i||0===i.left&&0===i.top;if(this._cacheTransformEventData(e),t=this._target,this._handleEvent(e,"up:before"),n(e,3))this.fireRightClick&&this._handleEvent(e,"up",3,o);else{if(n(e,2))return this.fireMiddleClick&&this._handleEvent(e,"up",2,o),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(e);else if(this._isMainEvent(e)){if(A&&(this._finalizeCurrentTransform(e),r=A.actionPerformed),!o){var s=t===this._activeObject;this._maybeGroupObjects(e),r||(r=this._shouldRender(t)||!s&&t===this._activeObject)}var a,l;if(t){if(a=t._findTargetCorner(this.getPointer(e,!0),w.util.isTouchEvent(e)),t.selectable&&t!==this._activeObject&&"up"===t.activeOn)this.setActiveObject(t,e),r=!0;else{var c=t.controls[a],u=c&&c.getMouseUpHandler(e,t,c);u&&u(e,A,(l=this.getPointer(e)).x,l.y)}t.isMoving=!1}if(A&&(A.target!==t||A.corner!==a)){var h=A.target&&A.target.controls[A.corner],d=h&&h.getMouseUpHandler(e,t,c);l=l||this.getPointer(e),d&&d(e,A,l.x,l.y)}this._setCursorFromEvent(e,t),this._handleEvent(e,"up",1,o),this._groupSelector=null,this._currentTransform=null,t&&(t.__corner=0),r?this.requestRenderAll():o||this.renderTop()}}},_simpleEventHandler:function(e,t){var A=this.findTarget(t),n=this.targets,i={e:t,target:A,subTargets:n};if(this.fire(e,i),A&&A.fire(e,i),!n)return A;for(var r=0;r<n.length;r++)n[r].fire(e,i);return A},_handleEvent:function(e,t,A,n){var i=this._target,r=this.targets||[],o={e:e,target:i,subTargets:r,button:A||1,isClick:n||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===t&&(o.currentTarget=this.findTarget(e),o.currentSubTargets=this.targets),this.fire("mouse:"+t,o),i&&i.fire("mouse"+t,o);for(var s=0;s<r.length;s++)r[s].fire("mouse"+t,o)},_finalizeCurrentTransform:function(e){var t=this._currentTransform,A=t.target,n={e:e,target:A,transform:t,action:t.action};A._scaling&&(A._scaling=!1),A.setCoords(),(t.actionPerformed||this.stateful&&A.hasStateChanged())&&this._fire("modified",n)},_onMouseDownInDrawingMode:function(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(e).requestRenderAll();var t=this.getPointer(e);this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down")},_onMouseMoveInDrawingMode:function(e){if(this._isCurrentlyDrawing){var t=this.getPointer(e);this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")},_onMouseUpInDrawingMode:function(e){var t=this.getPointer(e);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:e,pointer:t}),this._handleEvent(e,"up")},__onMouseDown:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"down:before");var t=this._target;if(n(e,3))this.fireRightClick&&this._handleEvent(e,"down",3);else if(n(e,2))this.fireMiddleClick&&this._handleEvent(e,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(e);else if(this._isMainEvent(e)&&!this._currentTransform){var A=this._pointer;this._previousPointer=A;var i=this._shouldRender(t),r=this._shouldGroup(e,t);if(this._shouldClearSelection(e,t)?this.discardActiveObject(e):r&&(this._handleGrouping(e,t),t=this._activeObject),!this.selection||t&&(t.selectable||t.isEditing||t===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),t){var o=t===this._activeObject;t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);var s=t._findTargetCorner(this.getPointer(e,!0),w.util.isTouchEvent(e));if(t.__corner=s,t===this._activeObject&&(s||!r)){this._setupCurrentTransform(e,t,o);var a=t.controls[s],l=(A=this.getPointer(e),a&&a.getMouseDownHandler(e,t,a));l&&l(e,this._currentTransform,A.x,A.y)}}this._handleEvent(e,"down"),(i||r)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(e){this._resetTransformEventData(),this._pointer=this.getPointer(e,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)||null},_beforeTransform:function(e){var t=this._currentTransform;this.stateful&&t.target.saveState(),this.fire("before:transform",{e:e,transform:t})},__onMouseMove:function(e){var t,A;if(this._handleEvent(e,"move:before"),this._cacheTransformEventData(e),this.isDrawingMode)this._onMouseMoveInDrawingMode(e);else if(this._isMainEvent(e)){var n=this._groupSelector;n?(A=this._absolutePointer,n.left=A.x-n.ex,n.top=A.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(e):(t=this.findTarget(e)||null,this._setCursorFromEvent(e,t),this._fireOverOutEvents(t,e)),this._handleEvent(e,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(e,t){var A=this._hoveredTarget,n=this._hoveredTargets,i=this.targets,r=Math.max(n.length,i.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:A,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var o=0;o<r;o++)this.fireSyntheticInOutEvents(i[o],t,{oldTarget:n[o],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(e,t){var A=this._draggedoverTarget,n=this._hoveredTargets,i=this.targets,r=Math.max(n.length,i.length);this.fireSyntheticInOutEvents(e,t,{oldTarget:A,evtOut:"dragleave",evtIn:"dragenter"});for(var o=0;o<r;o++)this.fireSyntheticInOutEvents(i[o],t,{oldTarget:n[o],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=e},fireSyntheticInOutEvents:function(e,t,A){var n,i,r,o=A.oldTarget,s=o!==e,a=A.canvasEvtIn,l=A.canvasEvtOut;s&&(n={e:t,target:e,previousTarget:o},i={e:t,target:o,nextTarget:e}),r=e&&s,o&&s&&(l&&this.fire(l,i),o.fire(A.evtOut,i)),r&&(a&&this.fire(a,n),e.fire(A.evtIn,n))},__onMouseWheel:function(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()},_transformObject:function(e){var t=this.getPointer(e),A=this._currentTransform;A.reset=!1,A.shiftKey=e.shiftKey,A.altKey=e[this.centeredKey],this._performTransformAction(e,A,t),A.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(e,t,A){var n=A.x,i=A.y,r=t.action,o=!1,s=t.actionHandler;s&&(o=s(e,t,n,i)),"drag"===r&&o&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||o},_fire:w.controlsUtils.fireEvent,_setCursorFromEvent:function(e,t){if(!t)return this.setCursor(this.defaultCursor),!1;var A=t.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,i=(!n||!n.contains(t))&&t._findTargetCorner(this.getPointer(e,!0));i?this.setCursor(this.getCornerCursor(i,t,e)):(t.subTargetCheck&&this.targets.concat().reverse().map((function(e){A=e.hoverCursor||A})),this.setCursor(A))},getCornerCursor:function(e,t,A){var n=t.controls[e];return n.cursorStyleHandler(A,n,t)}})}(),p=Math.min,v=Math.max,w.util.object.extend(w.Canvas.prototype,{_shouldGroup:function(e,t){var A=this._activeObject;return A&&this._isSelectionKeyPressed(e)&&t&&t.selectable&&this.selection&&(A!==t||"activeSelection"===A.type)&&!t.onSelect({e:e})},_handleGrouping:function(e,t){var A=this._activeObject;A.__corner||(t!==A||(t=this.findTarget(e,!0))&&t.selectable)&&(A&&"activeSelection"===A.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e))},_updateActiveSelection:function(e,t){var A=this._activeObject,n=A._objects.slice(0);A.contains(e)?(A.removeWithUpdate(e),this._hoveredTarget=e,this._hoveredTargets=this.targets.concat(),1===A.size()&&this._setActiveObject(A.item(0),t)):(A.addWithUpdate(e),this._hoveredTarget=A,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,t)},_createActiveSelection:function(e,t){var A=this.getActiveObjects(),n=this._createGroup(e);this._hoveredTarget=n,this._setActiveObject(n,t),this._fireSelectionEvents(A,t)},_createGroup:function(e){var t=this._objects,A=t.indexOf(this._activeObject)<t.indexOf(e)?[this._activeObject,e]:[e,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new w.ActiveSelection(A,{canvas:this})},_groupSelectedObjects:function(e){var t,A=this._collectObjects(e);1===A.length?this.setActiveObject(A[0],e):A.length>1&&(t=new w.ActiveSelection(A.reverse(),{canvas:this}),this.setActiveObject(t,e))},_collectObjects:function(e){for(var t,A=[],n=this._groupSelector.ex,i=this._groupSelector.ey,r=n+this._groupSelector.left,o=i+this._groupSelector.top,s=new w.Point(p(n,r),p(i,o)),a=new w.Point(v(n,r),v(i,o)),l=!this.selectionFullyContained,c=n===r&&i===o,u=this._objects.length;u--&&!((t=this._objects[u])&&t.selectable&&t.visible&&(l&&t.intersectsWithRect(s,a,!0)||t.isContainedWithinRect(s,a,!0)||l&&t.containsPoint(s,null,!0)||l&&t.containsPoint(a,null,!0))&&(A.push(t),c)););return A.length>1&&(A=A.filter((function(t){return!t.onSelect({e:e})}))),A},_maybeGroupObjects:function(e){this.selection&&this._groupSelector&&this._groupSelectedObjects(e),this.setCursor(this.defaultCursor),this._groupSelector=null}}),w.util.object.extend(w.StaticCanvas.prototype,{toDataURL:function(e){e||(e={});var t=e.format||"png",A=e.quality||1,n=(e.multiplier||1)*(e.enableRetinaScaling?this.getRetinaScaling():1),i=this.toCanvasElement(n,e);return w.util.toDataURL(i,t,A)},toCanvasElement:function(e,t){e=e||1;var A=((t=t||{}).width||this.width)*e,n=(t.height||this.height)*e,i=this.getZoom(),r=this.width,o=this.height,s=i*e,a=this.viewportTransform,l=(a[4]-(t.left||0))*e,c=(a[5]-(t.top||0))*e,u=this.interactive,h=[s,0,0,s,l,c],d=this.enableRetinaScaling,f=w.util.createCanvasElement(),g=this.contextTop;return f.width=A,f.height=n,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=h,this.width=A,this.height=n,this.calcViewportBoundaries(),this.renderCanvas(f.getContext("2d"),this._objects),this.viewportTransform=a,this.width=r,this.height=o,this.calcViewportBoundaries(),this.interactive=u,this.enableRetinaScaling=d,this.contextTop=g,f}}),w.util.object.extend(w.StaticCanvas.prototype,{loadFromJSON:function(e,t,A){if(e){var n="string"==typeof e?JSON.parse(e):w.util.object.clone(e),i=this,r=n.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete n.clipPath,this._enlivenObjects(n.objects,(function(e){i.clear(),i._setBgOverlay(n,(function(){r?i._enlivenObjects([r],(function(A){i.clipPath=A[0],i.__setupCanvas.call(i,n,e,o,t)})):i.__setupCanvas.call(i,n,e,o,t)}))}),A),this}},__setupCanvas:function(e,t,A,n){var i=this;t.forEach((function(e,t){i.insertAt(e,t)})),this.renderOnAddRemove=A,delete e.objects,delete e.backgroundImage,delete e.overlayImage,delete e.background,delete e.overlay,this._setOptions(e),this.renderAll(),n&&n()},_setBgOverlay:function(e,t){var A={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(e.backgroundImage||e.overlayImage||e.background||e.overlay){var n=function(){A.backgroundImage&&A.overlayImage&&A.backgroundColor&&A.overlayColor&&t&&t()};this.__setBgOverlay("backgroundImage",e.backgroundImage,A,n),this.__setBgOverlay("overlayImage",e.overlayImage,A,n),this.__setBgOverlay("backgroundColor",e.background,A,n),this.__setBgOverlay("overlayColor",e.overlay,A,n)}else t&&t()},__setBgOverlay:function(e,t,A,n){var i=this;if(!t)return A[e]=!0,void(n&&n());"backgroundImage"===e||"overlayImage"===e?w.util.enlivenObjects([t],(function(t){i[e]=t[0],A[e]=!0,n&&n()})):this["set"+w.util.string.capitalize(e,!0)](t,(function(){A[e]=!0,n&&n()}))},_enlivenObjects:function(e,t,A){e&&0!==e.length?w.util.enlivenObjects(e,(function(e){t&&t(e)}),null,A):t&&t([])},_toDataURL:function(e,t){this.clone((function(A){t(A.toDataURL(e))}))},_toDataURLWithMultiplier:function(e,t,A){this.clone((function(n){A(n.toDataURLWithMultiplier(e,t))}))},clone:function(e,t){var A=JSON.stringify(this.toJSON(t));this.cloneWithoutData((function(t){t.loadFromJSON(A,(function(){e&&e(t)}))}))},cloneWithoutData:function(e){var t=w.util.createCanvasElement();t.width=this.width,t.height=this.height;var A=new w.Canvas(t);this.backgroundImage?(A.setBackgroundImage(this.backgroundImage.src,(function(){A.renderAll(),e&&e(A)})),A.backgroundImageOpacity=this.backgroundImageOpacity,A.backgroundImageStretch=this.backgroundImageStretch):e&&e(A)}}),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.util.object.clone,i=t.util.toFixed,r=t.util.string.capitalize,o=t.util.degreesToRadians,s=!t.isLikelyNode;t.Object||(t.Object=t.util.createClass(t.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(e){e&&this.setOptions(e)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=t.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(e){var A=t.perfLimitSizeTotal,n=e.width,i=e.height,r=t.maxCacheSideLimit,o=t.minCacheSideLimit;if(n<=r&&i<=r&&n*i<=A)return n<o&&(e.width=o),i<o&&(e.height=o),e;var s=n/i,a=t.util.limitDimsByArea(s,A),l=t.util.capValue,c=l(o,a.x,r),u=l(o,a.y,r);return n>c&&(e.zoomX/=n/c,e.width=c,e.capped=!0),i>u&&(e.zoomY/=i/u,e.height=u,e.capped=!0),e},_getCacheCanvasDimensions:function(){var e=this.getTotalObjectScaling(),t=this._getTransformedDimensions(0,0),A=t.x*e.scaleX/this.scaleX,n=t.y*e.scaleY/this.scaleY;return{width:A+2,height:n+2,zoomX:e.scaleX,zoomY:e.scaleY,x:A,y:n}},_updateCacheCanvas:function(){var e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){var A=e._currentTransform.target,n=e._currentTransform.action;if(this===A&&n.slice&&"scale"===n.slice(0,5))return!1}var i,r,o=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),a=t.minCacheSideLimit,l=s.width,c=s.height,u=s.zoomX,h=s.zoomY,d=l!==this.cacheWidth||c!==this.cacheHeight,f=this.zoomX!==u||this.zoomY!==h,g=d||f,p=0,v=0,m=!1;if(d){var B=this._cacheCanvas.width,y=this._cacheCanvas.height,C=l>B||c>y;m=C||(l<.9*B||c<.9*y)&&B>a&&y>a,C&&!s.capped&&(l>a||c>a)&&(p=.1*l,v=.1*c)}return this instanceof t.Text&&this.path&&(g=!0,m=!0,p+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(m?(o.width=Math.ceil(l+p),o.height=Math.ceil(c+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),i=s.x/2,r=s.y/2,this.cacheTranslationX=Math.round(o.width/2-i)+i,this.cacheTranslationY=Math.round(o.height/2-r)+r,this.cacheWidth=l,this.cacheHeight=c,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,h),this.zoomX=u,this.zoomY=h,!0)},setOptions:function(e){this._setOptions(e),this._initGradient(e.fill,"fill"),this._initGradient(e.stroke,"stroke"),this._initPattern(e.fill,"fill"),this._initPattern(e.stroke,"stroke")},transform:function(e){var t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,A=this.calcTransformMatrix(!t);e.transform(A[0],A[1],A[2],A[3],A[4],A[5])},toObject:function(e){var A=t.Object.NUM_FRACTION_DIGITS,n={type:this.type,version:t.version,originX:this.originX,originY:this.originY,left:i(this.left,A),top:i(this.top,A),width:i(this.width,A),height:i(this.height,A),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,A),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:i(this.strokeMiterLimit,A),scaleX:i(this.scaleX,A),scaleY:i(this.scaleY,A),angle:i(this.angle,A),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,A),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:i(this.skewX,A),skewY:i(this.skewY,A)};return this.clipPath&&!this.clipPath.excludeFromExport&&(n.clipPath=this.clipPath.toObject(e),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),t.util.populateWithProperties(this,n,e),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(e){return this.toObject(e)},_removeDefaultValues:function(e){var A=t.util.getKlass(e.type).prototype;return A.stateProperties.forEach((function(t){"left"!==t&&"top"!==t&&(e[t]===A[t]&&delete e[t],Array.isArray(e[t])&&Array.isArray(A[t])&&0===e[t].length&&0===A[t].length&&delete e[t])})),e},toString:function(){return"#<fabric."+r(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var e=t.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(e.scaleX),scaleY:Math.abs(e.scaleY)}},getTotalObjectScaling:function(){var e=this.getObjectScaling(),t=e.scaleX,A=e.scaleY;if(this.canvas){var n=this.canvas.getZoom(),i=this.canvas.getRetinaScaling();t*=n*i,A*=n*i}return{scaleX:t,scaleY:A}},getObjectOpacity:function(){var e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e},_set:function(e,A){var n="scaleX"===e||"scaleY"===e,i=this[e]!==A,r=!1;return n&&(A=this._constrainScale(A)),"scaleX"===e&&A<0?(this.flipX=!this.flipX,A*=-1):"scaleY"===e&&A<0?(this.flipY=!this.flipY,A*=-1):"shadow"!==e||!A||A instanceof t.Shadow?"dirty"===e&&this.group&&this.group.set("dirty",A):A=new t.Shadow(A),this[e]=A,i&&(r=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(e)>-1?(this.dirty=!0,r&&this.group.set("dirty",!0)):r&&this.stateProperties.indexOf(e)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:t.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(e),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),e.restore())},renderCache:function(e){e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,e.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(e,A){if(e.save(),A.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",A.absolutePositioned){var n=t.util.invertTransform(this.calcTransformMatrix());e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}A.transform(e),e.scale(1/A.zoomX,1/A.zoomY),e.drawImage(A._cacheCanvas,-A.cacheTranslationX,-A.cacheTranslationY),e.restore()},drawObject:function(e,t){var A=this.fill,n=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath),this.fill=A,this.stroke=n},_drawClipPath:function(e,t){t&&(t.canvas=this.canvas,t.shouldCache(),t._transformDone=!0,t.renderCache({forClipping:!0}),this.drawClipPathOnCache(e,t))},drawCacheOnCanvas:function(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(e){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!e&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!e){var t=this.cacheWidth/this.zoomX,A=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-t/2,-A/2,t,A)}return!0}return!1},_renderBackground:function(e){if(this.backgroundColor){var t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}},_setOpacity:function(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity},_setStrokeStyles:function(e,t){var A=t.stroke;A&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,A.toLive?"percentage"===A.gradientUnits||A.gradientTransform||A.patternTransform?this._applyPatternForTransformedGradient(e,A):(e.strokeStyle=A.toLive(e,this),this._applyPatternGradientTransform(e,A)):e.strokeStyle=t.stroke)},_setFillStyles:function(e,t){var A=t.fill;A&&(A.toLive?(e.fillStyle=A.toLive(e,this),this._applyPatternGradientTransform(e,t.fill)):e.fillStyle=A)},_setClippingProperties:function(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"},_setLineDash:function(e,t){t&&0!==t.length&&(1&t.length&&t.push.apply(t,t),e.setLineDash(t))},_renderControls:function(e,A){var n,i,r,s=this.getViewportTransform(),a=this.calcTransformMatrix();i=void 0!==(A=A||{}).hasBorders?A.hasBorders:this.hasBorders,r=void 0!==A.hasControls?A.hasControls:this.hasControls,a=t.util.multiplyTransformMatrices(s,a),n=t.util.qrDecompose(a),e.save(),e.translate(n.translateX,n.translateY),e.lineWidth=1*this.borderScaleFactor,this.group||(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(n.angle-=180),e.rotate(o(this.group?n.angle:this.angle)),A.forActiveSelection||this.group?i&&this.drawBordersInGroup(e,n,A):i&&this.drawBorders(e,A),r&&this.drawControls(e,A),e.restore()},_setShadow:function(e){if(this.shadow){var A,n=this.shadow,i=this.canvas,r=i&&i.viewportTransform[0]||1,o=i&&i.viewportTransform[3]||1;A=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),i&&i._isRetinaScaling()&&(r*=t.devicePixelRatio,o*=t.devicePixelRatio),e.shadowColor=n.color,e.shadowBlur=n.blur*t.browserShadowBlurConstant*(r+o)*(A.scaleX+A.scaleY)/4,e.shadowOffsetX=n.offsetX*r*A.scaleX,e.shadowOffsetY=n.offsetY*o*A.scaleY}},_removeShadow:function(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)},_applyPatternGradientTransform:function(e,t){if(!t||!t.toLive)return{offsetX:0,offsetY:0};var A=t.gradientTransform||t.patternTransform,n=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,n,i):e.transform(1,0,0,1,n,i),A&&e.transform(A[0],A[1],A[2],A[3],A[4],A[5]),{offsetX:n,offsetY:i}},_renderPaintInOrder:function(e){"stroke"===this.paintFirst?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))},_render:function(){},_renderFill:function(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())},_renderStroke:function(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform&&this.group){var t=this.getObjectScaling();e.scale(1/t.scaleX,1/t.scaleY)}else this.strokeUniform&&e.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}},_applyPatternForTransformedGradient:function(e,A){var n,i=this._limitCacheSize(this._getCacheCanvasDimensions()),r=t.util.createCanvasElement(),o=this.canvas.getRetinaScaling(),s=i.x/this.scaleX/o,a=i.y/this.scaleY/o;r.width=s,r.height=a,(n=r.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(s,0),n.lineTo(s,a),n.lineTo(0,a),n.closePath(),n.translate(s/2,a/2),n.scale(i.zoomX/this.scaleX/o,i.zoomY/this.scaleY/o),this._applyPatternGradientTransform(n,A),n.fillStyle=A.toLive(e),n.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(o*this.scaleX/i.zoomX,o*this.scaleY/i.zoomY),e.strokeStyle=n.createPattern(r,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var e=t.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",e.scaleX),this.set("scaleY",e.scaleY),this.angle=e.angle,this.skewX=e.skewX,this.skewY=0}},_removeTransformMatrix:function(e){var A=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),A=t.util.transformPoint(A,this.transformMatrix)),this.transformMatrix=null,e&&(this.scaleX*=e.scaleX,this.scaleY*=e.scaleY,this.cropX=e.cropX,this.cropY=e.cropY,A.x+=e.offsetLeft,A.y+=e.offsetTop,this.width=e.width,this.height=e.height),this.setPositionByOrigin(A,"center","center")},clone:function(e,A){var n=this.toObject(A);this.constructor.fromObject?this.constructor.fromObject(n,e):t.Object._fromObject("Object",n,e)},cloneAsImage:function(e,A){var n=this.toCanvasElement(A);return e&&e(new t.Image(n)),this},toCanvasElement:function(e){e||(e={});var A=t.util,n=A.saveObjectTransform(this),i=this.group,r=this.shadow,o=Math.abs,s=(e.multiplier||1)*(e.enableRetinaScaling?t.devicePixelRatio:1);delete this.group,e.withoutTransform&&A.resetObjectTransform(this),e.withoutShadow&&(this.shadow=null);var a,l,c,u,h=t.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),f=this.shadow,g={x:0,y:0};f&&(l=f.blur,a=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(o(f.offsetX)+l)*o(a.scaleX),g.y=2*Math.round(o(f.offsetY)+l)*o(a.scaleY)),c=d.width+g.x,u=d.height+g.y,h.width=Math.ceil(c),h.height=Math.ceil(u);var p=new t.StaticCanvas(h,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===e.format&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new t.Point(p.width/2,p.height/2),"center","center");var v=this.canvas;p.add(this);var m=p.toCanvasElement(s||1,e);return this.shadow=r,this.set("canvas",v),i&&(this.group=i),this.set(n).setCoords(),p._objects=[],p.dispose(),p=null,m},toDataURL:function(e){return e||(e={}),t.util.toDataURL(this.toCanvasElement(e),e.format||"png",e.quality||1)},isType:function(e){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===e},complexity:function(){return 1},toJSON:function(e){return this.toObject(e)},rotate:function(e){var t=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return t&&this._setOriginToCenter(),this.set("angle",e),t&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(e,A){A=A||this.canvas.getPointer(e);var n=new t.Point(A.x,A.y),i=this._getLeftTopCoords();return this.angle&&(n=t.util.rotatePoint(n,i,o(-this.angle))),{x:n.x-i.x,y:n.y-i.y}},_setupCompositeOperation:function(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){t.runningAnimations&&t.runningAnimations.cancelByTarget(this)}}),t.util.createAccessors&&t.util.createAccessors(t.Object),A(t.Object.prototype,t.Observable),t.Object.NUM_FRACTION_DIGITS=2,t.Object.ENLIVEN_PROPS=["clipPath"],t.Object._fromObject=function(e,A,i,r){var o=t[e];A=n(A,!0),t.util.enlivenPatterns([A.fill,A.stroke],(function(e){void 0!==e[0]&&(A.fill=e[0]),void 0!==e[1]&&(A.stroke=e[1]),t.util.enlivenObjectEnlivables(A,A,(function(){var e=r?new o(A[r],A):new o(A);i&&i(e)}))}))},t.Object.__uid=0)}(e),m=w.util.degreesToRadians,B={left:-.5,center:0,right:.5},y={top:-.5,center:0,bottom:.5},w.util.object.extend(w.Object.prototype,{translateToGivenOrigin:function(e,t,A,n,i){var r,o,s,a=e.x,l=e.y;return"string"==typeof t?t=B[t]:t-=.5,"string"==typeof n?n=B[n]:n-=.5,"string"==typeof A?A=y[A]:A-=.5,"string"==typeof i?i=y[i]:i-=.5,o=i-A,((r=n-t)||o)&&(s=this._getTransformedDimensions(),a=e.x+r*s.x,l=e.y+o*s.y),new w.Point(a,l)},translateToCenterPoint:function(e,t,A){var n=this.translateToGivenOrigin(e,t,A,"center","center");return this.angle?w.util.rotatePoint(n,e,m(this.angle)):n},translateToOriginPoint:function(e,t,A){var n=this.translateToGivenOrigin(e,"center","center",t,A);return this.angle?w.util.rotatePoint(n,e,m(this.angle)):n},getCenterPoint:function(){var e=new w.Point(this.left,this.top);return this.translateToCenterPoint(e,this.originX,this.originY)},getPointByOrigin:function(e,t){var A=this.getCenterPoint();return this.translateToOriginPoint(A,e,t)},toLocalPoint:function(e,t,A){var n,i,r=this.getCenterPoint();return n=void 0!==t&&void 0!==A?this.translateToGivenOrigin(r,"center","center",t,A):new w.Point(this.left,this.top),i=new w.Point(e.x,e.y),this.angle&&(i=w.util.rotatePoint(i,r,-m(this.angle))),i.subtractEquals(n)},setPositionByOrigin:function(e,t,A){var n=this.translateToCenterPoint(e,t,A),i=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",i.x),this.set("top",i.y)},adjustPosition:function(e){var t,A,n=m(this.angle),i=this.getScaledWidth(),r=w.util.cos(n)*i,o=w.util.sin(n)*i;t="string"==typeof this.originX?B[this.originX]:this.originX-.5,A="string"==typeof e?B[e]:e-.5,this.left+=r*(A-t),this.top+=o*(A-t),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var e=this.getCenterPoint();this.originX="center",this.originY="center",this.left=e.x,this.top=e.y},_resetOrigin:function(){var e=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=e.x,this.top=e.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var e=w.util,t=e.degreesToRadians,A=e.multiplyTransformMatrices,n=e.transformPoint;e.object.extend(w.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(e,t){return t?e?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),e?this.aCoords:this.lineCoords)},getCoords:function(e,t){return A=this._getCoords(e,t),[new w.Point(A.tl.x,A.tl.y),new w.Point(A.tr.x,A.tr.y),new w.Point(A.br.x,A.br.y),new w.Point(A.bl.x,A.bl.y)];var A},intersectsWithRect:function(e,t,A,n){var i=this.getCoords(A,n);return"Intersection"===w.Intersection.intersectPolygonRectangle(i,e,t).status},intersectsWithObject:function(e,t,A){return"Intersection"===w.Intersection.intersectPolygonPolygon(this.getCoords(t,A),e.getCoords(t,A)).status||e.isContainedWithinObject(this,t,A)||this.isContainedWithinObject(e,t,A)},isContainedWithinObject:function(e,t,A){for(var n=this.getCoords(t,A),i=t?e.aCoords:e.lineCoords,r=0,o=e._getImageLines(i);r<4;r++)if(!e.containsPoint(n[r],o))return!1;return!0},isContainedWithinRect:function(e,t,A,n){var i=this.getBoundingRect(A,n);return i.left>=e.x&&i.left+i.width<=t.x&&i.top>=e.y&&i.top+i.height<=t.y},containsPoint:function(e,t,A,n){var i=this._getCoords(A,n),r=(t=t||this._getImageLines(i),this._findCrossPoints(e,t));return 0!==r&&r%2==1},isOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,A=this.canvas.vptCoords.br;return!!this.getCoords(!0,e).some((function(e){return e.x<=A.x&&e.x>=t.x&&e.y<=A.y&&e.y>=t.y}))||(!!this.intersectsWithRect(t,A,!0,e)||this._containsCenterOfCanvas(t,A,e))},_containsCenterOfCanvas:function(e,t,A){var n={x:(e.x+t.x)/2,y:(e.y+t.y)/2};return!!this.containsPoint(n,null,!0,A)},isPartiallyOnScreen:function(e){if(!this.canvas)return!1;var t=this.canvas.vptCoords.tl,A=this.canvas.vptCoords.br;return!!this.intersectsWithRect(t,A,!0,e)||this.getCoords(!0,e).every((function(e){return(e.x>=A.x||e.x<=t.x)&&(e.y>=A.y||e.y<=t.y)}))&&this._containsCenterOfCanvas(t,A,e)},_getImageLines:function(e){return{topline:{o:e.tl,d:e.tr},rightline:{o:e.tr,d:e.br},bottomline:{o:e.br,d:e.bl},leftline:{o:e.bl,d:e.tl}}},_findCrossPoints:function(e,t){var A,n,i,r=0;for(var o in t)if(!((i=t[o]).o.y<e.y&&i.d.y<e.y||i.o.y>=e.y&&i.d.y>=e.y||(i.o.x===i.d.x&&i.o.x>=e.x?n=i.o.x:(A=(i.d.y-i.o.y)/(i.d.x-i.o.x),n=-(e.y-0*e.x-(i.o.y-A*i.o.x))/(0-A)),n>=e.x&&(r+=1),2!==r)))break;return r},getBoundingRect:function(t,A){var n=this.getCoords(t,A);return e.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e},scale:function(e){return this._set("scaleX",e),this._set("scaleY",e),this.setCoords()},scaleToWidth:function(e,t){var A=this.getBoundingRect(t).width/this.getScaledWidth();return this.scale(e/this.width/A)},scaleToHeight:function(e,t){var A=this.getBoundingRect(t).height/this.getScaledHeight();return this.scale(e/this.height/A)},calcLineCoords:function(){var A=this.getViewportTransform(),i=this.padding,r=t(this.angle),o=e.cos(r)*i,s=e.sin(r)*i,a=o+s,l=o-s,c=this.calcACoords(),u={tl:n(c.tl,A),tr:n(c.tr,A),bl:n(c.bl,A),br:n(c.br,A)};return i&&(u.tl.x-=l,u.tl.y-=a,u.tr.x+=a,u.tr.y-=l,u.bl.x-=a,u.bl.y+=l,u.br.x+=l,u.br.y+=a),u},calcOCoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),n=this.getViewportTransform(),i=A(n,t),r=A(i,e),o=(r=A(r,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(e,t,A){s[t]=e.positionHandler(o,r,A)})),s},calcACoords:function(){var e=this._calcRotateMatrix(),t=this._calcTranslateMatrix(),i=A(t,e),r=this._getTransformedDimensions(),o=r.x/2,s=r.y/2;return{tl:n({x:-o,y:-s},i),tr:n({x:o,y:-s},i),bl:n({x:-o,y:s},i),br:n({x:o,y:s},i)}},setCoords:function(e){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),e||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var e=this.getCenterPoint();return[1,0,0,1,e.x,e.y]},transformMatrixKey:function(e){var t="_",A="";return!e&&this.group&&(A=this.group.transformMatrixKey(e)+t),A+this.top+t+this.left+t+this.scaleX+t+this.scaleY+t+this.skewX+t+this.skewY+t+this.angle+t+this.originX+t+this.originY+t+this.width+t+this.height+t+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(e){var t=this.calcOwnMatrix();if(e||!this.group)return t;var n=this.transformMatrixKey(e),i=this.matrixCache||(this.matrixCache={});return i.key===n?i.value:(this.group&&(t=A(this.group.calcTransformMatrix(!1),t)),i.key=n,i.value=t,t)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),A=this.ownMatrixCache||(this.ownMatrixCache={});if(A.key===t)return A.value;var n=this._calcTranslateMatrix(),i={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return A.key=t,A.value=e.composeMatrix(i),A.value},_getNonTransformedDimensions:function(){var e=this.strokeWidth;return{x:this.width+e,y:this.height+e}},_getTransformedDimensions:function(t,A){void 0===t&&(t=this.skewX),void 0===A&&(A=this.skewY);var n,i,r,o=0===t&&0===A;if(this.strokeUniform?(i=this.width,r=this.height):(i=(n=this._getNonTransformedDimensions()).x,r=n.y),o)return this._finalizeDimensions(i*this.scaleX,r*this.scaleY);var s=e.sizeAfterTransform(i,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:A});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(e,t){return this.strokeUniform?{x:e+this.strokeWidth,y:t+this.strokeWidth}:{x:e,y:t}},_calculateCurrentDimensions:function(){var e=this.getViewportTransform(),t=this._getTransformedDimensions();return n(t,e,!0).scalarAdd(2*this.padding)}})}(),w.util.object.extend(w.Object.prototype,{sendToBack:function(){return this.group?w.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?w.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(e){return this.group?w.StaticCanvas.prototype.sendBackwards.call(this.group,this,e):this.canvas&&this.canvas.sendBackwards(this,e),this},bringForward:function(e){return this.group?w.StaticCanvas.prototype.bringForward.call(this.group,this,e):this.canvas&&this.canvas.bringForward(this,e),this},moveTo:function(e){return this.group&&"activeSelection"!==this.group.type?w.StaticCanvas.prototype.moveTo.call(this.group,this,e):this.canvas&&this.canvas.moveTo(this,e),this}}),function(){function e(e,t){if(t){if(t.toLive)return e+": url(#SVGID_"+t.id+"); ";var A=new w.Color(t),n=e+": "+A.toRgb()+"; ",i=A.getAlpha();return 1!==i&&(n+=e+"-opacity: "+i.toString()+"; "),n}return e+": none; "}var t=w.util.toFixed;w.util.object.extend(w.Object.prototype,{getSvgStyles:function(t){var A=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",a=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=t?"":this.getSvgFilter(),h=e("fill",this.fill);return[e("stroke",this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",a,"; ",h,"fill-rule: ",A,"; ","opacity: ",l,";",u,c].join("")},getSvgSpanStyles:function(t,A){var n="; ",i=t.fontFamily?"font-family: "+(-1===t.fontFamily.indexOf("'")&&-1===t.fontFamily.indexOf('"')?"'"+t.fontFamily+"'":t.fontFamily)+n:"",r=t.strokeWidth?"stroke-width: "+t.strokeWidth+n:"",o=(i=i,t.fontSize?"font-size: "+t.fontSize+"px"+n:""),s=t.fontStyle?"font-style: "+t.fontStyle+n:"",a=t.fontWeight?"font-weight: "+t.fontWeight+n:"",l=t.fill?e("fill",t.fill):"",c=t.stroke?e("stroke",t.stroke):"",u=this.getSvgTextDecoration(t);return u&&(u="text-decoration: "+u+n),[c,r,i,o,s,a,u,l,t.deltaY?"baseline-shift: "+-t.deltaY+"; ":"",A?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(e){return["overline","underline","line-through"].filter((function(t){return e[t.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(e,t){var A=e?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+w.util.matrixToSVG(A)+(t||"")+'" '},_setSVGBg:function(e){if(this.backgroundColor){var A=w.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',t(-this.width/2,A),'" y="',t(-this.height/2,A),'" width="',t(this.width,A),'" height="',t(this.height,A),'"></rect>\n')}},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})},toClipPathSVG:function(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})},_createBaseClipPathSVGMarkup:function(e,t){var A=(t=t||{}).reviver,n=t.additionalTransform||"",i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),r=e.indexOf("COMMON_PARTS");return e[r]=i,A?A(e.join("")):e.join("")},_createBaseSVGMarkup:function(e,t){var A,n,i=(t=t||{}).noStyle,r=t.reviver,o=i?"":'style="'+this.getSvgStyles()+'" ',s=t.withShadow?'style="'+this.getSvgFilter()+'" ':"",a=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=a&&a.absolutePositioned,u=this.stroke,h=this.fill,d=this.shadow,f=[],g=e.indexOf("COMMON_PARTS"),p=t.additionalTransform;return a&&(a.clipPathId="CLIPPATH_"+w.Object.__uid++,n='<clipPath id="'+a.clipPathId+'" >\n'+a.toClipPathSVG(r)+"</clipPath>\n"),c&&f.push("<g ",s,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),c?"":s+this.getSvgCommons()," >\n"),A=[o,l,i?"":this.addPaintOrder()," ",p?'transform="'+p+'" ':""].join(""),e[g]=A,h&&h.toLive&&f.push(h.toSVG(this)),u&&u.toLive&&f.push(u.toSVG(this)),d&&f.push(d.toSVG(this)),a&&f.push(n),f.push(e.join("")),f.push("</g>\n"),c&&f.push("</g>\n"),r?r(f.join("")):f.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var e=w.util.object.extend,t="stateProperties";function A(t,A,n){var i={};n.forEach((function(e){i[e]=t[e]})),e(t[A],i,!0)}function n(e,t,A){if(e===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}if(e&&"object"==typeof e){var o,s=Object.keys(e);if(!t||"object"!=typeof t||!A&&s.length!==Object.keys(t).length)return!1;for(i=0,r=s.length;i<r;i++)if("canvas"!==(o=s[i])&&"group"!==o&&!n(e[o],t[o]))return!1;return!0}}w.util.object.extend(w.Object.prototype,{hasStateChanged:function(e){var A="_"+(e=e||t);return Object.keys(this[A]).length<this[e].length||!n(this[A],this,!0)},saveState:function(e){var n=e&&e.propertySet||t,i="_"+n;return this[i]?(A(this,i,this[n]),e&&e.stateProperties&&A(this,i,e.stateProperties),this):this.setupState(e)},setupState:function(e){var A=(e=e||{}).propertySet||t;return e.propertySet=A,this["_"+A]={},this.saveState(e),this}})}(),function(){var e=w.util.degreesToRadians;w.util.object.extend(w.Object.prototype,{_findTargetCorner:function(e,t){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var A,n,i,r=e.x,o=e.y,s=Object.keys(this.oCoords),a=s.length-1;for(this.__corner=0;a>=0;a--)if(i=s[a],this.isControlVisible(i)&&(n=this._getImageLines(t?this.oCoords[i].touchCorner:this.oCoords[i].corner),0!==(A=this._findCrossPoints({x:r,y:o},n))&&A%2==1))return this.__corner=i,i;return!1},forEachControl:function(e){for(var t in this.controls)e(this.controls[t],t,this)},_setCornerCoords:function(){var e=this.oCoords;for(var t in e){var A=this.controls[t];e[t].corner=A.calcCornerCoords(this.angle,this.cornerSize,e[t].x,e[t].y,!1),e[t].touchCorner=A.calcCornerCoords(this.angle,this.touchCornerSize,e[t].x,e[t].y,!0)}},drawSelectionBackground:function(t){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;t.save();var A=this.getCenterPoint(),n=this._calculateCurrentDimensions(),i=this.canvas.viewportTransform;return t.translate(A.x,A.y),t.scale(1/i[0],1/i[3]),t.rotate(e(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-n.x/2,-n.y/2,n.x,n.y),t.restore(),this},drawBorders:function(e,t){t=t||{};var A=this._calculateCurrentDimensions(),n=this.borderScaleFactor,i=A.x+n,r=A.y+n,o=void 0!==t.hasControls?t.hasControls:this.hasControls,s=!1;return e.save(),e.strokeStyle=t.borderColor||this.borderColor,this._setLineDash(e,t.borderDashArray||this.borderDashArray),e.strokeRect(-i/2,-r/2,i,r),o&&(e.beginPath(),this.forEachControl((function(t,A,n){t.withConnection&&t.getVisibility(n,A)&&(s=!0,e.moveTo(t.x*i,t.y*r),e.lineTo(t.x*i+t.offsetX,t.y*r+t.offsetY))})),s&&e.stroke()),e.restore(),this},drawBordersInGroup:function(e,t,A){A=A||{};var n=w.util.sizeAfterTransform(this.width,this.height,t),i=this.strokeWidth,r=this.strokeUniform,o=this.borderScaleFactor,s=n.x+i*(r?this.canvas.getZoom():t.scaleX)+o,a=n.y+i*(r?this.canvas.getZoom():t.scaleY)+o;return e.save(),this._setLineDash(e,A.borderDashArray||this.borderDashArray),e.strokeStyle=A.borderColor||this.borderColor,e.strokeRect(-s/2,-a/2,s,a),e.restore(),this},drawControls:function(e,t){t=t||{},e.save();var A,n,i=this.canvas.getRetinaScaling();return e.setTransform(i,0,0,i,0,0),e.strokeStyle=e.fillStyle=t.cornerColor||this.cornerColor,this.transparentCorners||(e.strokeStyle=t.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(e,t.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(A=this.group.calcTransformMatrix()),this.forEachControl((function(i,r,o){n=o.oCoords[r],i.getVisibility(o,r)&&(A&&(n=w.util.transformPoint(n,A)),i.render(e,n.x,n.y,t,o))})),e.restore(),this},isControlVisible:function(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)},setControlVisible:function(e,t){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t,this},setControlsVisibility:function(e){for(var t in e||(e={}),e)this.setControlVisible(t,e[t]);return this},onDeselect:function(){},onSelect:function(){}})}(),w.util.object.extend(w.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var A=function(){},n=(t=t||{}).onComplete||A,i=t.onChange||A,r=this;return w.util.animate({target:this,startValue:e.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),r.requestRenderAll(),i()},onComplete:function(){e.setCoords(),n()}})},fxCenterObjectV:function(e,t){var A=function(){},n=(t=t||{}).onComplete||A,i=t.onChange||A,r=this;return w.util.animate({target:this,startValue:e.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),r.requestRenderAll(),i()},onComplete:function(){e.setCoords(),n()}})},fxRemove:function(e,t){var A=function(){},n=(t=t||{}).onComplete||A,i=t.onChange||A,r=this;return w.util.animate({target:this,startValue:e.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(t){e.set("opacity",t),r.requestRenderAll(),i()},onComplete:function(){r.remove(e),n()}})}}),w.util.object.extend(w.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var e,t,A=[],n=[];for(e in arguments[0])A.push(e);for(var i=0,r=A.length;i<r;i++)e=A[i],t=i!==r-1,n.push(this._animate(e,arguments[0][e],arguments[1],t));return n}return this._animate.apply(this,arguments)},_animate:function(e,t,A,n){var i,r=this;t=t.toString(),A=A?w.util.object.clone(A):{},~e.indexOf(".")&&(i=e.split("."));var o=r.colorProperties.indexOf(e)>-1||i&&r.colorProperties.indexOf(i[1])>-1,s=i?this.get(i[0])[i[1]]:this.get(e);"from"in A||(A.from=s),o||(t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t));var a={target:this,startValue:A.from,endValue:t,byValue:A.by,easing:A.easing,duration:A.duration,abort:A.abort&&function(e,t,n){return A.abort.call(r,e,t,n)},onChange:function(t,o,s){i?r[i[0]][i[1]]=t:r.set(e,t),n||A.onChange&&A.onChange(t,o,s)},onComplete:function(e,t,i){n||(r.setCoords(),A.onComplete&&A.onComplete(e,t,i))}};return o?w.util.animateColor(a.startValue,a.endValue,a.duration,a):w.util.animate(a)}}),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.util.object.clone,i={x1:1,x2:1,y1:1,y2:1};function r(e,t){var A=e.origin,n=e.axis1,i=e.axis2,r=e.dimension,o=t.nearest,s=t.center,a=t.farthest;return function(){switch(this.get(A)){case o:return Math.min(this.get(n),this.get(i));case s:return Math.min(this.get(n),this.get(i))+.5*this.get(r);case a:return Math.max(this.get(n),this.get(i))}}}t.Line?t.warn("fabric.Line is already defined"):(t.Line=t.util.createClass(t.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:t.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(e,t){e||(e=[0,0,0,0]),this.callSuper("initialize",t),this.set("x1",e[0]),this.set("y1",e[1]),this.set("x2",e[2]),this.set("y2",e[3]),this._setWidthHeight(t)},_setWidthHeight:function(e){e||(e={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in e?e.left:this._getLeftToOriginX(),this.top="top"in e?e.top:this._getTopToOriginY()},_set:function(e,t){return this.callSuper("_set",e,t),void 0!==i[e]&&this._setWidthHeight(),this},_getLeftToOriginX:r({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:r({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(e){e.beginPath();var t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;var A=e.strokeStyle;e.strokeStyle=this.stroke||e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=A},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(e){return A(this.callSuper("toObject",e),this.calcLinePoints())},_getNonTransformedDimensions:function(){var e=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e},calcLinePoints:function(){var e=this.x1<=this.x2?-1:1,t=this.y1<=this.y2?-1:1,A=e*this.width*.5,n=t*this.height*.5;return{x1:A,x2:e*this.width*-.5,y1:n,y2:t*this.height*-.5}},_toSVG:function(){var e=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',e.x1,'" y1="',e.y1,'" x2="',e.x2,'" y2="',e.y2,'" />\n']}}),t.Line.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),t.Line.fromElement=function(e,n,i){i=i||{};var r=t.parseAttributes(e,t.Line.ATTRIBUTE_NAMES),o=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];n(new t.Line(o,A(r,i)))},t.Line.fromObject=function(e,A){var i=n(e,!0);i.points=[e.x1,e.y1,e.x2,e.y2],t.Object._fromObject("Line",i,(function(e){delete e.points,A&&A(e)}),"points")})}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.degreesToRadians;t.Circle?t.warn("fabric.Circle is already defined."):(t.Circle=t.util.createClass(t.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:t.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(e,t){return this.callSuper("_set",e,t),"radius"===e&&this.setRadius(t),this},toObject:function(e){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(e))},_toSVG:function(){var e,n=(this.endAngle-this.startAngle)%360;if(0===n)e=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var i=A(this.startAngle),r=A(this.endAngle),o=this.radius;e=['<path d="M '+t.util.cos(i)*o+" "+t.util.sin(i)*o," A "+o+" "+o," 0 ",+(n>180?"1":"0")+" 1"," "+t.util.cos(r)*o+" "+t.util.sin(r)*o,'" ',"COMMON_PARTS"," />\n"]}return e},_render:function(e){e.beginPath(),e.arc(0,0,this.radius,A(this.startAngle),A(this.endAngle),!1),this._renderPaintInOrder(e)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(e){return this.radius=e,this.set("width",2*e).set("height",2*e)}}),t.Circle.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),t.Circle.fromElement=function(e,A){var n,i=t.parseAttributes(e,t.Circle.ATTRIBUTE_NAMES);if(!("radius"in(n=i)&&n.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");i.left=(i.left||0)-i.radius,i.top=(i.top||0)-i.radius,A(new t.Circle(i))},t.Circle.fromObject=function(e,A){t.Object._fromObject("Circle",e,A)})}(e),function(e){var t=e.fabric||(e.fabric={});t.Triangle?t.warn("fabric.Triangle is already defined"):(t.Triangle=t.util.createClass(t.Object,{type:"triangle",width:100,height:100,_render:function(e){var t=this.width/2,A=this.height/2;e.beginPath(),e.moveTo(-t,A),e.lineTo(0,-A),e.lineTo(t,A),e.closePath(),this._renderPaintInOrder(e)},_toSVG:function(){var e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-e+" "+t,"0 "+-t,e+" "+t].join(","),'" />']}}),t.Triangle.fromObject=function(e,A){return t.Object._fromObject("Triangle",e,A)})}(e),function(e){var t=e.fabric||(e.fabric={}),A=2*Math.PI;t.Ellipse?t.warn("fabric.Ellipse is already defined."):(t.Ellipse=t.util.createClass(t.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this.set("rx",e&&e.rx||0),this.set("ry",e&&e.ry||0)},_set:function(e,t){switch(this.callSuper("_set",e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,A,!1),e.restore(),this._renderPaintInOrder(e)}}),t.Ellipse.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),t.Ellipse.fromElement=function(e,A){var n=t.parseAttributes(e,t.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,A(new t.Ellipse(n))},t.Ellipse.fromObject=function(e,A){t.Object._fromObject("Ellipse",e,A)})}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend;t.Rect?t.warn("fabric.Rect is already defined"):(t.Rect=t.util.createClass(t.Object,{stateProperties:t.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:t.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(e){this.callSuper("initialize",e),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(e){var t=this.rx?Math.min(this.rx,this.width/2):0,A=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,i=this.height,r=-this.width/2,o=-this.height/2,s=0!==t||0!==A,a=.4477152502;e.beginPath(),e.moveTo(r+t,o),e.lineTo(r+n-t,o),s&&e.bezierCurveTo(r+n-a*t,o,r+n,o+a*A,r+n,o+A),e.lineTo(r+n,o+i-A),s&&e.bezierCurveTo(r+n,o+i-a*A,r+n-a*t,o+i,r+n-t,o+i),e.lineTo(r+t,o+i),s&&e.bezierCurveTo(r+a*t,o+i,r,o+i-a*A,r,o+i-A),e.lineTo(r,o+A),s&&e.bezierCurveTo(r,o+a*A,r+a*t,o,r+t,o),e.closePath(),this._renderPaintInOrder(e)},toObject:function(e){return this.callSuper("toObject",["rx","ry"].concat(e))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),t.Rect.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),t.Rect.fromElement=function(e,n,i){if(!e)return n(null);i=i||{};var r=t.parseAttributes(e,t.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0,r.height=r.height||0,r.width=r.width||0;var o=new t.Rect(A(i?t.util.object.clone(i):{},r));o.visible=o.visible&&o.width>0&&o.height>0,n(o)},t.Rect.fromObject=function(e,A){return t.Object._fromObject("Rect",e,A)})}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.util.array.min,i=t.util.array.max,r=t.util.toFixed,o=t.util.projectStrokeOnPoints;t.Polyline?t.warn("fabric.Polyline is already defined"):(t.Polyline=t.util.createClass(t.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:t.Object.prototype.cacheProperties.concat("points"),initialize:function(e,t){t=t||{},this.points=e||[],this.callSuper("initialize",t),this._setPositionDimensions(t)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(e){var t,A=this._calcDimensions(e),n=this.exactBoundingBox?this.strokeWidth:0;this.width=A.width-n,this.height=A.height-n,e.fromSVG||(t=this.translateToGivenOrigin({x:A.left-this.strokeWidth/2+n/2,y:A.top-this.strokeWidth/2+n/2},"left","top",this.originX,this.originY)),void 0===e.left&&(this.left=e.fromSVG?A.left:t.x),void 0===e.top&&(this.top=e.fromSVG?A.top:t.y),this.pathOffset={x:A.left+this.width/2+n/2,y:A.top+this.height/2+n/2}},_calcDimensions:function(){var e=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,t=n(e,"x")||0,A=n(e,"y")||0;return{left:t,top:A,width:(i(e,"x")||0)-t,height:(i(e,"y")||0)-A}},toObject:function(e){return A(this.callSuper("toObject",e),{points:this.points.concat()})},_toSVG:function(){for(var e=[],A=this.pathOffset.x,n=this.pathOffset.y,i=t.Object.NUM_FRACTION_DIGITS,o=0,s=this.points.length;o<s;o++)e.push(r(this.points[o].x-A,i),",",r(this.points[o].y-n,i)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',e.join(""),'" />\n']},commonRender:function(e){var t,A=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(!A||isNaN(this.points[A-1].y))return!1;e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-i);for(var r=0;r<A;r++)t=this.points[r],e.lineTo(t.x-n,t.y-i);return!0},_render:function(e){this.commonRender(e)&&this._renderPaintInOrder(e)},complexity:function(){return this.get("points").length}}),t.Polyline.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polyline.fromElementGenerator=function(e){return function(n,i,r){if(!n)return i(null);r||(r={});var o=t.parsePointsAttribute(n.getAttribute("points")),s=t.parseAttributes(n,t[e].ATTRIBUTE_NAMES);s.fromSVG=!0,i(new t[e](o,A(s,r)))}},t.Polyline.fromElement=t.Polyline.fromElementGenerator("Polyline"),t.Polyline.fromObject=function(e,A){return t.Object._fromObject("Polyline",e,A,"points")})}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.projectStrokeOnPoints;t.Polygon?t.warn("fabric.Polygon is already defined"):(t.Polygon=t.util.createClass(t.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return A(this.points,this)},_render:function(e){this.commonRender(e)&&(e.closePath(),this._renderPaintInOrder(e))}}),t.Polygon.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(),t.Polygon.fromElement=t.Polyline.fromElementGenerator("Polygon"),t.Polygon.fromObject=function(e,A){t.Object._fromObject("Polygon",e,A,"points")})}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.array.min,n=t.util.array.max,i=t.util.object.extend,r=t.util.object.clone,o=t.util.toFixed;t.Path?t.warn("fabric.Path is already defined"):(t.Path=t.util.createClass(t.Object,{type:"path",path:null,cacheProperties:t.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:t.Object.prototype.stateProperties.concat("path"),initialize:function(e,t){delete(t=r(t||{})).path,this.callSuper("initialize",t),this._setPath(e||[],t)},_setPath:function(e,A){this.path=t.util.makePathSimpler(Array.isArray(e)?e:t.util.parsePath(e)),t.Polyline.prototype._setPositionDimensions.call(this,A||{})},_renderPathCommands:function(e){var t,A=0,n=0,i=0,r=0,o=0,s=0,a=-this.pathOffset.x,l=-this.pathOffset.y;e.beginPath();for(var c=0,u=this.path.length;c<u;++c)switch((t=this.path[c])[0]){case"L":i=t[1],r=t[2],e.lineTo(i+a,r+l);break;case"M":A=i=t[1],n=r=t[2],e.moveTo(i+a,r+l);break;case"C":i=t[5],r=t[6],o=t[3],s=t[4],e.bezierCurveTo(t[1]+a,t[2]+l,o+a,s+l,i+a,r+l);break;case"Q":e.quadraticCurveTo(t[1]+a,t[2]+l,t[3]+a,t[4]+l),i=t[3],r=t[4],o=t[1],s=t[2];break;case"z":case"Z":i=A,r=n,e.closePath()}},_render:function(e){this._renderPathCommands(e),this._renderPaintInOrder(e)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(e){return i(this.callSuper("toObject",e),{path:this.path.map((function(e){return e.slice()}))})},toDatalessObject:function(e){var t=this.toObject(["sourcePath"].concat(e));return t.sourcePath&&delete t.path,t},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',t.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var e=t.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,e)+", "+o(-this.pathOffset.y,e)+")"},toClipPathSVG:function(e){var t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},toSVG:function(e){var t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var e,i,r=[],o=[],s=0,a=0,l=0,c=0,u=0,h=this.path.length;u<h;++u){switch((e=this.path[u])[0]){case"L":l=e[1],c=e[2],i=[];break;case"M":s=l=e[1],a=c=e[2],i=[];break;case"C":i=t.util.getBoundsOfCurve(l,c,e[1],e[2],e[3],e[4],e[5],e[6]),l=e[5],c=e[6];break;case"Q":i=t.util.getBoundsOfCurve(l,c,e[1],e[2],e[1],e[2],e[3],e[4]),l=e[3],c=e[4];break;case"z":case"Z":l=s,c=a}i.forEach((function(e){r.push(e.x),o.push(e.y)})),r.push(l),o.push(c)}var d=A(r)||0,f=A(o)||0;return{left:d,top:f,width:(n(r)||0)-d,height:(n(o)||0)-f}}}),t.Path.fromObject=function(e,A){if("string"==typeof e.sourcePath){var n=e.sourcePath;t.loadSVGFromURL(n,(function(n){var i=n[0];i.setOptions(e),e.clipPath?t.util.enlivenObjects([e.clipPath],(function(e){i.clipPath=e[0],A&&A(i)})):A&&A(i)}))}else t.Object._fromObject("Path",e,A,"path")},t.Path.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat(["d"]),t.Path.fromElement=function(e,A,n){var r=t.parseAttributes(e,t.Path.ATTRIBUTE_NAMES);r.fromSVG=!0,A(new t.Path(r.d,i(r,n)))})}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.array.min,n=t.util.array.max;t.Group||(t.Group=t.util.createClass(t.Object,t.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(e,t,A){t=t||{},this._objects=[],A&&this.callSuper("initialize",t),this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(A)this._updateObjectsACoords();else{var i=t&&t.centerPoint;void 0!==t.originX&&(this.originX=t.originX),void 0!==t.originY&&(this.originY=t.originY),i||this._calcBounds(),this._updateObjectsCoords(i),delete t.centerPoint,this.callSuper("initialize",t)}this.setCoords()},_updateObjectsACoords:function(){for(var e=this._objects.length;e--;)this._objects[e].setCoords(true)},_updateObjectsCoords:function(e){e=e||this.getCenterPoint();for(var t=this._objects.length;t--;)this._updateObjectCoords(this._objects[t],e)},_updateObjectCoords:function(e,t){var A=e.left,n=e.top;e.set({left:A-t.x,top:n-t.y}),e.group=this,e.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(e){var A=!!this.group;return this._restoreObjectsState(),t.util.resetObjectTransform(this),e&&(A&&t.util.removeTransformFromObject(e,this.group.calcTransformMatrix()),this._objects.push(e),e.group=this,e._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,A?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(e){return this._restoreObjectsState(),t.util.resetObjectTransform(this),this.remove(e),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(e){this.dirty=!0,e.group=this,e._set("canvas",this.canvas)},_onObjectRemoved:function(e){this.dirty=!0,delete e.group},_set:function(e,A){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(e,A);if("canvas"===e)for(;n--;)this._objects[n]._set(e,A);t.Object.prototype._set.call(this,e,A)},toObject:function(e){var A=this.includeDefaultValues,n=this._objects.filter((function(e){return!e.excludeFromExport})).map((function(t){var n=t.includeDefaultValues;t.includeDefaultValues=A;var i=t.toObject(e);return t.includeDefaultValues=n,i})),i=t.Object.prototype.toObject.call(this,e);return i.objects=n,i},toDatalessObject:function(e){var A,n=this.sourcePath;if(n)A=n;else{var i=this.includeDefaultValues;A=this._objects.map((function(t){var A=t.includeDefaultValues;t.includeDefaultValues=i;var n=t.toDatalessObject(e);return t.includeDefaultValues=A,n}))}var r=t.Object.prototype.toDatalessObject.call(this,e);return r.objects=A,r},render:function(e){this._transformDone=!0,this.callSuper("render",e),this._transformDone=!1},shouldCache:function(){var e=t.Object.prototype.shouldCache.call(this);if(e)for(var A=0,n=this._objects.length;A<n;A++)if(this._objects[A].willDrawShadow())return this.ownCaching=!1,!1;return e},willDrawShadow:function(){if(t.Object.prototype.willDrawShadow.call(this))return!0;for(var e=0,A=this._objects.length;e<A;e++)if(this._objects[e].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(e){for(var t=0,A=this._objects.length;t<A;t++)this._objects[t].render(e);this._drawClipPath(e,this.clipPath)},isCacheDirty:function(e){if(this.callSuper("isCacheDirty",e))return!0;if(!this.statefullCache)return!1;for(var t=0,A=this._objects.length;t<A;t++)if(this._objects[t].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-i/2,n,i)}return!0}return!1},_restoreObjectsState:function(){var e=this.calcOwnMatrix();return this._objects.forEach((function(A){t.util.addTransformToObject(A,e),delete A.group,A.setCoords()})),this},destroy:function(){return this._objects.forEach((function(e){e.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(e){e.dispose&&e.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var e=this._objects,A=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var i=new t.ActiveSelection([]);return i.set(n),i.type="activeSelection",A.remove(this),e.forEach((function(e){e.group=i,e.dirty=!0,A.add(e)})),i.canvas=A,i._objects=e,A._activeObject=i,i.setCoords(),i}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(e){e.setCoords(true)})),this},_calcBounds:function(e){for(var t,A,n,i,r=[],o=[],s=["tr","br","bl","tl"],a=0,l=this._objects.length,c=s.length;a<l;++a){for(n=(t=this._objects[a]).calcACoords(),i=0;i<c;i++)A=s[i],r.push(n[A].x),o.push(n[A].y);t.aCoords=n}this._getBounds(r,o,e)},_getBounds:function(e,i,r){var o=new t.Point(A(e),A(i)),s=new t.Point(n(e),n(i)),a=o.y||0,l=o.x||0,c=s.x-o.x||0,u=s.y-o.y||0;this.width=c,this.height=u,r||this.setPositionByOrigin({x:l,y:a},"left","top")},_toSVG:function(e){for(var t=["<g ","COMMON_PARTS"," >\n"],A=0,n=this._objects.length;A<n;A++)t.push("\t\t",this._objects[A].toSVG(e));return t.push("</g>\n"),t},getSvgStyles:function(){var e=void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")},toClipPathSVG:function(e){for(var t=[],A=0,n=this._objects.length;A<n;A++)t.push("\t",this._objects[A].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}}),t.Group.fromObject=function(e,A){var n=e.objects,i=t.util.object.clone(e,!0);delete i.objects,"string"!=typeof n?t.util.enlivenObjects(n,(function(n){t.util.enlivenObjectEnlivables(e,i,(function(){A&&A(new t.Group(n,i,!0))}))})):t.loadSVGFromURL(n,(function(r){var o=t.util.groupSVGElements(r,e,n),s=i.clipPath;delete i.clipPath,o.set(i),s?t.util.enlivenObjects([s],(function(e){o.clipPath=e[0],A&&A(o)})):A&&A(o)}))})}(e),function(e){var t=e.fabric||(e.fabric={});t.ActiveSelection||(t.ActiveSelection=t.util.createClass(t.Group,{type:"activeSelection",initialize:function(e,A){A=A||{},this._objects=e||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;A.originX&&(this.originX=A.originX),A.originY&&(this.originY=A.originY),this._calcBounds(),this._updateObjectsCoords(),t.Object.prototype.initialize.call(this,A),this.setCoords()},toGroup:function(){var e=this._objects.concat();this._objects=[];var A=t.Object.prototype.toObject.call(this),n=new t.Group([]);if(delete A.type,n.set(A),e.forEach((function(e){e.canvas.remove(e),e.group=n})),n._objects=e,!this.canvas)return n;var i=this.canvas;return i.add(n),i._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(e,t,A){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",e,t),void 0===(A=A||{}).hasControls&&(A.hasControls=!1),A.forActiveSelection=!0;for(var n=0,i=this._objects.length;n<i;n++)this._objects[n]._renderControls(e,A);e.restore()}}),t.ActiveSelection.fromObject=function(e,A){t.util.enlivenObjects(e.objects,(function(n){delete e.objects,A&&A(new t.ActiveSelection(n,e,!0))}))})}(e),function(e){var t=w.util.object.extend;e.fabric||(e.fabric={}),e.fabric.Image?w.warn("fabric.Image is already defined."):(w.Image=w.util.createClass(w.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:w.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:w.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(e,t){t||(t={}),this.filters=[],this.cacheKey="texture"+w.Object.__uid++,this.callSuper("initialize",t),this._initElement(e,t)},getElement:function(){return this._element||{}},setElement:function(e,t){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=e,this._originalElement=e,this._initConfig(t),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(e){var t=w.filterBackend;t&&t.evictCachesForKey&&t.evictCachesForKey(e)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(e){w.util.cleanUpJsdomNode(this[e]),this[e]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var e=this.getElement();return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}},_stroke:function(e){if(this.stroke&&0!==this.strokeWidth){var t=this.width/2,A=this.height/2;e.beginPath(),e.moveTo(-t,-A),e.lineTo(t,-A),e.lineTo(t,A),e.lineTo(-t,A),e.lineTo(-t,-A),e.closePath()}},toObject:function(e){var A=[];this.filters.forEach((function(e){e&&A.push(e.toObject())}));var n=t(this.callSuper("toObject",["cropX","cropY"].concat(e)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:A});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var e,t=[],A=[],n=this._element,i=-this.width/2,r=-this.height/2,o="",s="";if(!n)return[];if(this.hasCrop()){var a=w.Object.__uid++;t.push('<clipPath id="imageCrop_'+a+'">\n','\t<rect x="'+i+'" y="'+r+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),o=' clip-path="url(#imageCrop_'+a+')" '}if(this.imageSmoothing||(s='" image-rendering="optimizeSpeed'),A.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',i-this.cropX,'" y="',r-this.cropY,'" width="',n.width||n.naturalWidth,'" height="',n.height||n.height,s,'"',o,"></image>\n"),this.stroke||this.strokeDashArray){var l=this.fill;this.fill=null,e=["\t<rect ",'x="',i,'" y="',r,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=l}return t="fill"!==this.paintFirst?t.concat(e,A):t.concat(A,e)},getSrc:function(e){var t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src"):t.src:this.src||""},setSrc:function(e,t,A){return w.util.loadImage(e,(function(e,n){this.setElement(e,A),this._setWidthHeight(),t&&t(this,n)}),this,A&&A.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var e=this.resizeFilter,t=this.minimumScaleTrigger,A=this.getTotalObjectScaling(),n=A.scaleX,i=A.scaleY,r=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||n>t&&i>t)return this._element=r,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=n,void(this._lastScaleY=i);w.filterBackend||(w.filterBackend=w.initFilterBackend());var o=w.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,a=r.width,l=r.height;o.width=a,o.height=l,this._element=o,this._lastScaleX=e.scaleX=n,this._lastScaleY=e.scaleY=i,w.filterBackend.applyFilters([e],r,a,l,this._element,s),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height},applyFilters:function(e){if(e=(e=e||this.filters||[]).filter((function(e){return e&&!e.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===e.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var t=this._originalElement,A=t.naturalWidth||t.width,n=t.naturalHeight||t.height;if(this._element===this._originalElement){var i=w.util.createCanvasElement();i.width=A,i.height=n,this._element=i,this._filteredEl=i}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,A,n),this._lastScaleX=1,this._lastScaleY=1;return w.filterBackend||(w.filterBackend=w.initFilterBackend()),w.filterBackend.applyFilters(e,this._originalElement,A,n,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(e){w.util.setImageSmoothing(e,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)},drawCacheOnCanvas:function(e){w.util.setImageSmoothing(e,this.imageSmoothing),w.Object.prototype.drawCacheOnCanvas.call(this,e)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(e){var t=this._element;if(t){var A=this._filterScalingX,n=this._filterScalingY,i=this.width,r=this.height,o=Math.min,s=Math.max,a=s(this.cropX,0),l=s(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*A,d=l*n,f=o(i*A,c-h),g=o(r*n,u-d),p=-i/2,v=-r/2,m=o(i,c/A-a),B=o(r,u/n-l);t&&e.drawImage(t,h,d,f,g,p,v,m,B)}},_needsResize:function(){var e=this.getTotalObjectScaling();return e.scaleX!==this._lastScaleX||e.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(e,t){this.setElement(w.util.getById(e),t),w.util.addClass(this.getElement(),w.Image.CSS_CANVAS)},_initConfig:function(e){e||(e={}),this.setOptions(e),this._setWidthHeight(e)},_initFilters:function(e,t){e&&e.length?w.util.enlivenObjects(e,(function(e){t&&t(e)}),"fabric.Image.filters"):t&&t()},_setWidthHeight:function(e){e||(e={});var t=this.getElement();this.width=e.width||t.naturalWidth||t.width||0,this.height=e.height||t.naturalHeight||t.height||0},parsePreserveAspectRatioAttribute:function(){var e,t=w.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),A=this._element.width,n=this._element.height,i=1,r=1,o=0,s=0,a=0,l=0,c=this.width,u=this.height,h={width:c,height:u};return!t||"none"===t.alignX&&"none"===t.alignY?(i=c/A,r=u/n):("meet"===t.meetOrSlice&&(e=(c-A*(i=r=w.util.findScaleToFit(this._element,h)))/2,"Min"===t.alignX&&(o=-e),"Max"===t.alignX&&(o=e),e=(u-n*r)/2,"Min"===t.alignY&&(s=-e),"Max"===t.alignY&&(s=e)),"slice"===t.meetOrSlice&&(e=A-c/(i=r=w.util.findScaleToCover(this._element,h)),"Mid"===t.alignX&&(a=e/2),"Max"===t.alignX&&(a=e),e=n-u/r,"Mid"===t.alignY&&(l=e/2),"Max"===t.alignY&&(l=e),A=c/i,n=u/r)),{width:A,height:n,scaleX:i,scaleY:r,offsetLeft:o,offsetTop:s,cropX:a,cropY:l}}}),w.Image.CSS_CANVAS="canvas-img",w.Image.prototype.getSvgSrc=w.Image.prototype.getSrc,w.Image.fromObject=function(e,t){var A=w.util.object.clone(e);w.util.loadImage(A.src,(function(e,n){n?t&&t(null,!0):w.Image.prototype._initFilters.call(A,A.filters,(function(n){A.filters=n||[],w.Image.prototype._initFilters.call(A,[A.resizeFilter],(function(n){A.resizeFilter=n[0],w.util.enlivenObjectEnlivables(A,A,(function(){var n=new w.Image(e,A);t(n,!1)}))}))}))}),null,A.crossOrigin)},w.Image.fromURL=function(e,t,A){w.util.loadImage(e,(function(e,n){t&&t(new w.Image(e,A),n)}),null,A&&A.crossOrigin)},w.Image.ATTRIBUTE_NAMES=w.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),w.Image.fromElement=function(e,A,n){var i=w.parseAttributes(e,w.Image.ATTRIBUTE_NAMES);w.Image.fromURL(i["xlink:href"],A,t(n?w.util.object.clone(n):{},i))})}(e),w.util.object.extend(w.Object.prototype,{_getAngleValueForStraighten:function(){var e=this.angle%360;return e>0?90*Math.round((e-1)/90):90*Math.round(e/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(e){var t=function(){},A=(e=e||{}).onComplete||t,n=e.onChange||t,i=this;return w.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(e){i.rotate(e),n()},onComplete:function(){i.setCoords(),A()}})}}),w.util.object.extend(w.StaticCanvas.prototype,{straightenObject:function(e){return e.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(e){return e.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function e(e,t){var A="precision "+t+" float;\nvoid main(){}",n=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(n,A),e.compileShader(n),!!e.getShaderParameter(n,e.COMPILE_STATUS)}function t(e){e&&e.tileSize&&(this.tileSize=e.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}w.isWebglSupported=function(t){if(w.isLikelyNode)return!1;t=t||w.WebglFilterBackend.prototype.tileSize;var A=document.createElement("canvas"),n=A.getContext("webgl")||A.getContext("experimental-webgl"),i=!1;if(n){w.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),i=w.maxTextureSize>=t;for(var r=["highp","mediump","lowp"],o=0;o<3;o++)if(e(n,r[o])){w.webGlPrecision=r[o];break}}return this.isSupported=i,i},w.WebglFilterBackend=t,t.prototype={tileSize:2048,resources:{},setupGLContext:function(e,t){this.dispose(),this.createWebGLCanvas(e,t),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(e,t)},chooseFastestCopyGLTo2DMethod:function(e,t){var A,n=void 0!==window.performance;try{new ImageData(1,1),A=!0}catch(u){A=!1}var i="undefined"!=typeof ArrayBuffer,r="undefined"!=typeof Uint8ClampedArray;if(n&&A&&i&&r){var o=w.util.createCanvasElement(),s=new ArrayBuffer(e*t*4);if(w.forceGLPutImageData)return this.imageBuffer=s,void(this.copyGLTo2D=Q);var a,l,c={imageBuffer:s,destinationWidth:e,destinationHeight:t,targetCanvas:o};o.width=e,o.height=t,a=window.performance.now(),x.call(c,this.gl,c),l=window.performance.now()-a,a=window.performance.now(),Q.call(c,this.gl,c),l>window.performance.now()-a?(this.imageBuffer=s,this.copyGLTo2D=Q):this.copyGLTo2D=x}},createWebGLCanvas:function(e,t){var A=w.util.createCanvasElement();A.width=e,A.height=t;var n={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},i=A.getContext("webgl",n);i||(i=A.getContext("experimental-webgl",n)),i&&(i.clearColor(0,0,0,0),this.canvas=A,this.gl=i)},applyFilters:function(e,t,A,n,i,r){var o,s=this.gl;r&&(o=this.getCachedTexture(r,t));var a={originalWidth:t.width||t.originalWidth,originalHeight:t.height||t.originalHeight,sourceWidth:A,sourceHeight:n,destinationWidth:A,destinationHeight:n,context:s,sourceTexture:this.createTexture(s,A,n,!o&&t),targetTexture:this.createTexture(s,A,n),originalTexture:o||this.createTexture(s,A,n,!o&&t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},l=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,l),e.forEach((function(e){e&&e.applyTo(a)})),function(e){var t=e.targetCanvas,A=t.width,n=t.height,i=e.destinationWidth,r=e.destinationHeight;A===i&&n===r||(t.width=i,t.height=r)}(a),this.copyGLTo2D(s,a),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(a.sourceTexture),s.deleteTexture(a.targetTexture),s.deleteFramebuffer(l),i.getContext("2d").setTransform(1,0,0,1,0,0),a},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(e,t,A,n,i){var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i||e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,A,0,e.RGBA,e.UNSIGNED_BYTE,null),r},getCachedTexture:function(e,t){if(this.textureCache[e])return this.textureCache[e];var A=this.createTexture(this.gl,t.width,t.height,t);return this.textureCache[e]=A,A},evictCachesForKey:function(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])},copyGLTo2D:x,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var e=this.gl,t={renderer:"",vendor:""};if(!e)return t;var A=e.getExtension("WEBGL_debug_renderer_info");if(A){var n=e.getParameter(A.UNMASKED_RENDERER_WEBGL),i=e.getParameter(A.UNMASKED_VENDOR_WEBGL);n&&(t.renderer=n.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}}(),function(){var e=function(){};function t(){}w.Canvas2dFilterBackend=t,t.prototype={evictCachesForKey:e,dispose:e,clearWebGLCaches:e,resources:{},applyFilters:function(e,t,A,n,i){var r=i.getContext("2d");r.drawImage(t,0,0,A,n);var o={sourceWidth:A,sourceHeight:n,imageData:r.getImageData(0,0,A,n),originalEl:t,originalImageData:r.getImageData(0,0,A,n),canvasEl:i,ctx:r,filterBackend:this};return e.forEach((function(e){e.applyTo(o)})),o.imageData.width===A&&o.imageData.height===n||(i.width=o.imageData.width,i.height=o.imageData.height),r.putImageData(o.imageData,0,0),o}}}(),w.Image=w.Image||{},w.Image.filters=w.Image.filters||{},w.Image.filters.BaseFilter=w.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(e){e&&this.setOptions(e)},setOptions:function(e){for(var t in e)this[t]=e[t]},createProgram:function(e,t,A){t=t||this.fragmentSource,A=A||this.vertexSource,"highp"!==w.webGlPrecision&&(t=t.replace(/precision highp float/g,"precision "+w.webGlPrecision+" float"));var n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,A),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+e.getShaderInfoLog(n));var i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+e.getShaderInfoLog(i));var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,i),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+e.getProgramInfoLog(r));var o=this.getAttributeLocations(e,r),s=this.getUniformLocations(e,r)||{};return s.uStepW=e.getUniformLocation(r,"uStepW"),s.uStepH=e.getUniformLocation(r,"uStepH"),{program:r,attributeLocations:o,uniformLocations:s}},getAttributeLocations:function(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(e,t,A){var n=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,A,e.STATIC_DRAW)},_setupFrameBuffer:function(e){var t,A,n=e.context;e.passes>1?(t=e.destinationWidth,A=e.destinationHeight,e.sourceWidth===t&&e.sourceHeight===A||(n.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(n,t,A)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(e){e.passes--,e.pass++;var t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t},isNeutralState:function(){var e=this.mainParameter,t=w.Image.filters[this.type].prototype;if(e){if(Array.isArray(t[e])){for(var A=t[e].length;A--;)if(this[e][A]!==t[e][A])return!1;return!0}return t[e]===this[e]}return!1},applyTo:function(e){e.webgl?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},retrieveShader:function(e){return e.programCache.hasOwnProperty(this.type)||(e.programCache[this.type]=this.createProgram(e.context)),e.programCache[this.type]},applyToWebGL:function(e){var t=e.context,A=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(A.program),this.sendAttributeData(t,A.attributeLocations,e.aPosition),t.uniform1f(A.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(A.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,A.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(e,t,A){e.activeTexture(A),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)},unbindAdditionalTexture:function(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(e){this[this.mainParameter]=e},sendUniformData:function(){},createHelpLayer:function(e){if(!e.helpLayer){var t=document.createElement("canvas");t.width=e.sourceWidth,t.height=e.sourceHeight,e.helpLayer=t}},toObject:function(){var e={type:this.type},t=this.mainParameter;return t&&(e[t]=this[t]),e},toJSON:function(){return this.toObject()}}),w.Image.filters.BaseFilter.fromObject=function(e,t){var A=new w.Image.filters[e.type](e);return t&&t(A),A},function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.ColorMatrix=n(A.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(e){this.callSuper("initialize",e),this.matrix=this.matrix.slice(0)},applyTo2d:function(e){var t,A,n,i,r,o=e.imageData.data,s=o.length,a=this.matrix,l=this.colorsOnly;for(r=0;r<s;r+=4)t=o[r],A=o[r+1],n=o[r+2],l?(o[r]=t*a[0]+A*a[1]+n*a[2]+255*a[4],o[r+1]=t*a[5]+A*a[6]+n*a[7]+255*a[9],o[r+2]=t*a[10]+A*a[11]+n*a[12]+255*a[14]):(i=o[r+3],o[r]=t*a[0]+A*a[1]+n*a[2]+i*a[3]+255*a[4],o[r+1]=t*a[5]+A*a[6]+n*a[7]+i*a[8]+255*a[9],o[r+2]=t*a[10]+A*a[11]+n*a[12]+i*a[13]+255*a[14],o[r+3]=t*a[15]+A*a[16]+n*a[17]+i*a[18]+255*a[19])},getUniformLocations:function(e,t){return{uColorMatrix:e.getUniformLocation(t,"uColorMatrix"),uConstants:e.getUniformLocation(t,"uConstants")}},sendUniformData:function(e,t){var A=this.matrix,n=[A[0],A[1],A[2],A[3],A[5],A[6],A[7],A[8],A[10],A[11],A[12],A[13],A[15],A[16],A[17],A[18]],i=[A[4],A[9],A[14],A[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,n),e.uniform4fv(t.uConstants,i)}}),t.Image.filters.ColorMatrix.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Brightness=n(A.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(e){if(0!==this.brightness){var t,A=e.imageData.data,n=A.length,i=Math.round(255*this.brightness);for(t=0;t<n;t+=4)A[t]=A[t]+i,A[t+1]=A[t+1]+i,A[t+2]=A[t+2]+i}},getUniformLocations:function(e,t){return{uBrightness:e.getUniformLocation(t,"uBrightness")}},sendUniformData:function(e,t){e.uniform1f(t.uBrightness,this.brightness)}}),t.Image.filters.Brightness.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.Image.filters,i=t.util.createClass;n.Convolute=i(n.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(e){var t=Math.sqrt(this.matrix.length),A=this.type+"_"+t+"_"+(this.opaque?1:0),n=this.fragmentSource[A];return e.programCache.hasOwnProperty(A)||(e.programCache[A]=this.createProgram(e.context,n)),e.programCache[A]},applyTo2d:function(e){var t,A,n,i,r,o,s,a,l,c,u,h,d,f=e.imageData,g=f.data,p=this.matrix,v=Math.round(Math.sqrt(p.length)),m=Math.floor(v/2),B=f.width,y=f.height,C=e.ctx.createImageData(B,y),w=C.data,b=this.opaque?1:0;for(u=0;u<y;u++)for(c=0;c<B;c++){for(r=4*(u*B+c),t=0,A=0,n=0,i=0,d=0;d<v;d++)for(h=0;h<v;h++)o=c+h-m,(s=u+d-m)<0||s>=y||o<0||o>=B||(a=4*(s*B+o),l=p[d*v+h],t+=g[a]*l,A+=g[a+1]*l,n+=g[a+2]*l,b||(i+=g[a+3]*l));w[r]=t,w[r+1]=A,w[r+2]=n,w[r+3]=b?g[r+3]:i}e.imageData=C},getUniformLocations:function(e,t){return{uMatrix:e.getUniformLocation(t,"uMatrix"),uOpaque:e.getUniformLocation(t,"uOpaque"),uHalfSize:e.getUniformLocation(t,"uHalfSize"),uSize:e.getUniformLocation(t,"uSize")}},sendUniformData:function(e,t){e.uniform1fv(t.uMatrix,this.matrix)},toObject:function(){return A(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),t.Image.filters.Convolute.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Grayscale=n(A.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(e){var t,A,n=e.imageData.data,i=n.length,r=this.mode;for(t=0;t<i;t+=4)"average"===r?A=(n[t]+n[t+1]+n[t+2])/3:"lightness"===r?A=(Math.min(n[t],n[t+1],n[t+2])+Math.max(n[t],n[t+1],n[t+2]))/2:"luminosity"===r&&(A=.21*n[t]+.72*n[t+1]+.07*n[t+2]),n[t]=A,n[t+1]=A,n[t+2]=A},retrieveShader:function(e){var t=this.type+"_"+this.mode;if(!e.programCache.hasOwnProperty(t)){var A=this.fragmentSource[this.mode];e.programCache[t]=this.createProgram(e.context,A)}return e.programCache[t]},getUniformLocations:function(e,t){return{uMode:e.getUniformLocation(t,"uMode")}},sendUniformData:function(e,t){e.uniform1i(t.uMode,1)},isNeutralState:function(){return!1}}),t.Image.filters.Grayscale.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Invert=n(A.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(e){var t,A=e.imageData.data,n=A.length;for(t=0;t<n;t+=4)A[t]=255-A[t],A[t+1]=255-A[t+1],A[t+2]=255-A[t+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(e,t){return{uInvert:e.getUniformLocation(t,"uInvert")}},sendUniformData:function(e,t){e.uniform1i(t.uInvert,this.invert)}}),t.Image.filters.Invert.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.Image.filters,i=t.util.createClass;n.Noise=i(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(e){if(0!==this.noise){var t,A,n=e.imageData.data,i=n.length,r=this.noise;for(t=0,i=n.length;t<i;t+=4)A=(.5-Math.random())*r,n[t]+=A,n[t+1]+=A,n[t+2]+=A}},getUniformLocations:function(e,t){return{uNoise:e.getUniformLocation(t,"uNoise"),uSeed:e.getUniformLocation(t,"uSeed")}},sendUniformData:function(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())},toObject:function(){return A(this.callSuper("toObject"),{noise:this.noise})}}),t.Image.filters.Noise.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Pixelate=n(A.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(e){var t,A,n,i,r,o,s,a,l,c,u,h=e.imageData,d=h.data,f=h.height,g=h.width;for(A=0;A<f;A+=this.blocksize)for(n=0;n<g;n+=this.blocksize)for(i=d[t=4*A*g+4*n],r=d[t+1],o=d[t+2],s=d[t+3],c=Math.min(A+this.blocksize,f),u=Math.min(n+this.blocksize,g),a=A;a<c;a++)for(l=n;l<u;l++)d[t=4*a*g+4*l]=i,d[t+1]=r,d[t+2]=o,d[t+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(e,t){return{uBlocksize:e.getUniformLocation(t,"uBlocksize"),uStepW:e.getUniformLocation(t,"uStepW"),uStepH:e.getUniformLocation(t,"uStepH")}},sendUniformData:function(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}),t.Image.filters.Pixelate.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.extend,n=t.Image.filters,i=t.util.createClass;n.RemoveColor=i(n.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(e){var A,n,i,r,o=e.imageData.data,s=255*this.distance,a=new t.Color(this.color).getSource(),l=[a[0]-s,a[1]-s,a[2]-s],c=[a[0]+s,a[1]+s,a[2]+s];for(A=0;A<o.length;A+=4)n=o[A],i=o[A+1],r=o[A+2],n>l[0]&&i>l[1]&&r>l[2]&&n<c[0]&&i<c[1]&&r<c[2]&&(o[A+3]=0)},getUniformLocations:function(e,t){return{uLow:e.getUniformLocation(t,"uLow"),uHigh:e.getUniformLocation(t,"uHigh")}},sendUniformData:function(e,A){var n=new t.Color(this.color).getSource(),i=parseFloat(this.distance),r=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],o=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];e.uniform4fv(A.uLow,r),e.uniform4fv(A.uHigh,o)},toObject:function(){return A(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),t.Image.filters.RemoveColor.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass,i={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var r in i)A[r]=n(A.ColorMatrix,{type:r,matrix:i[r],mainParameter:!1,colorsOnly:!0}),t.Image.filters[r].fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric,A=t.Image.filters,n=t.util.createClass;A.BlendColor=n(A.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(e){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[e]+"}\n}"},retrieveShader:function(e){var t,A=this.type+"_"+this.mode;return e.programCache.hasOwnProperty(A)||(t=this.buildSource(this.mode),e.programCache[A]=this.createProgram(e.context,t)),e.programCache[A]},applyTo2d:function(e){var A,n,i,r,o,s,a,l=e.imageData.data,c=l.length,u=1-this.alpha;A=(a=new t.Color(this.color).getSource())[0]*this.alpha,n=a[1]*this.alpha,i=a[2]*this.alpha;for(var h=0;h<c;h+=4)switch(r=l[h],o=l[h+1],s=l[h+2],this.mode){case"multiply":l[h]=r*A/255,l[h+1]=o*n/255,l[h+2]=s*i/255;break;case"screen":l[h]=255-(255-r)*(255-A)/255,l[h+1]=255-(255-o)*(255-n)/255,l[h+2]=255-(255-s)*(255-i)/255;break;case"add":l[h]=r+A,l[h+1]=o+n,l[h+2]=s+i;break;case"diff":case"difference":l[h]=Math.abs(r-A),l[h+1]=Math.abs(o-n),l[h+2]=Math.abs(s-i);break;case"subtract":l[h]=r-A,l[h+1]=o-n,l[h+2]=s-i;break;case"darken":l[h]=Math.min(r,A),l[h+1]=Math.min(o,n),l[h+2]=Math.min(s,i);break;case"lighten":l[h]=Math.max(r,A),l[h+1]=Math.max(o,n),l[h+2]=Math.max(s,i);break;case"overlay":l[h]=A<128?2*r*A/255:255-2*(255-r)*(255-A)/255,l[h+1]=n<128?2*o*n/255:255-2*(255-o)*(255-n)/255,l[h+2]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255;break;case"exclusion":l[h]=A+r-2*A*r/255,l[h+1]=n+o-2*n*o/255,l[h+2]=i+s-2*i*s/255;break;case"tint":l[h]=A+r*u,l[h+1]=n+o*u,l[h+2]=i+s*u}},getUniformLocations:function(e,t){return{uColor:e.getUniformLocation(t,"uColor")}},sendUniformData:function(e,A){var n=new t.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(A.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendColor.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric,A=t.Image.filters,n=t.util.createClass;A.BlendImage=n(A.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(e){var t=this.type+"_"+this.mode,A=this.fragmentSource[this.mode];return e.programCache.hasOwnProperty(t)||(e.programCache[t]=this.createProgram(e.context,A)),e.programCache[t]},applyToWebGL:function(e){var t=e.context,A=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,A,t.TEXTURE1),this.callSuper("applyToWebGL",e),this.unbindAdditionalTexture(t,t.TEXTURE1)},createTexture:function(e,t){return e.getCachedTexture(t.cacheKey,t._element)},calculateMatrix:function(){var e=this.image,t=e._element.width,A=e._element.height;return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/A,1]},applyTo2d:function(e){var A,n,i,r,o,s,a,l,c,u,h,d=e.imageData,f=e.filterBackend.resources,g=d.data,p=g.length,v=d.width,m=d.height,B=this.image;f.blendImage||(f.blendImage=t.util.createCanvasElement()),u=(c=f.blendImage).getContext("2d"),c.width!==v||c.height!==m?(c.width=v,c.height=m):u.clearRect(0,0,v,m),u.setTransform(B.scaleX,0,0,B.scaleY,B.left,B.top),u.drawImage(B._element,0,0,v,m),h=u.getImageData(0,0,v,m).data;for(var y=0;y<p;y+=4)switch(o=g[y],s=g[y+1],a=g[y+2],l=g[y+3],A=h[y],n=h[y+1],i=h[y+2],r=h[y+3],this.mode){case"multiply":g[y]=o*A/255,g[y+1]=s*n/255,g[y+2]=a*i/255,g[y+3]=l*r/255;break;case"mask":g[y+3]=r}},getUniformLocations:function(e,t){return{uTransformMatrix:e.getUniformLocation(t,"uTransformMatrix"),uImage:e.getUniformLocation(t,"uImage")}},sendUniformData:function(e,t){var A=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,A)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),t.Image.filters.BlendImage.fromObject=function(e,A){t.Image.fromObject(e.image,(function(n){var i=t.util.object.clone(e);i.image=n,A(new t.Image.filters.BlendImage(i))}))}}(e),function(e){var t=e.fabric||(e.fabric={}),A=Math.pow,n=Math.floor,i=Math.sqrt,r=Math.abs,o=Math.round,s=Math.sin,a=Math.ceil,l=t.Image.filters,c=t.util.createClass;l.Resize=c(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(e,t){return{uDelta:e.getUniformLocation(t,"uDelta"),uTaps:e.getUniformLocation(t,"uTaps")}},sendUniformData:function(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)},retrieveShader:function(e){var t=this.getFilterWindow(),A=this.type+"_"+t;if(!e.programCache.hasOwnProperty(A)){var n=this.generateShader(t);e.programCache[A]=this.createProgram(e.context,n)}return e.programCache[A]},getFilterWindow:function(){var e=this.tempScale;return Math.ceil(this.lanczosLobes/e)},getTaps:function(){for(var e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,A=this.getFilterWindow(),n=new Array(A),i=1;i<=A;i++)n[i-1]=e(i*t);return n},generateShader:function(e){for(var t=new Array(e),A=this.fragmentSourceTOP,n=1;n<=e;n++)t[n-1]=n+".0 * uDelta";return A+="uniform float uTaps["+e+"];\n",A+="void main() {\n",A+="  vec4 color = texture2D(uTexture, vTexCoord);\n",A+="  float sum = 1.0;\n",t.forEach((function(e,t){A+="  color += texture2D(uTexture, vTexCoord + "+e+") * uTaps["+t+"];\n",A+="  color += texture2D(uTexture, vTexCoord - "+e+") * uTaps["+t+"];\n",A+="  sum += 2.0 * uTaps["+t+"];\n"})),A+="  gl_FragColor = color / sum;\n",A+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(e){e.webgl?(e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e),e.sourceHeight=e.destinationHeight):this.applyTo2d(e)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(e){return function(t){if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;var A=(t*=Math.PI)/e;return s(t)/t*s(A)/A}},applyTo2d:function(e){var t=e.imageData,A=this.scaleX,n=this.scaleY;this.rcpScaleX=1/A,this.rcpScaleY=1/n;var i,r=t.width,s=t.height,a=o(r*A),l=o(s*n);"sliceHack"===this.resizeType?i=this.sliceByTwo(e,r,s,a,l):"hermite"===this.resizeType?i=this.hermiteFastResize(e,r,s,a,l):"bilinear"===this.resizeType?i=this.bilinearFiltering(e,r,s,a,l):"lanczos"===this.resizeType&&(i=this.lanczosResize(e,r,s,a,l)),e.imageData=i},sliceByTwo:function(e,A,i,r,o){var s,a,l=e.imageData,c=.5,u=!1,h=!1,d=A*c,f=i*c,g=t.filterBackend.resources,p=0,v=0,m=A,B=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((s=g.sliceByTwo).width<1.5*A||s.height<i)&&(s.width=1.5*A,s.height=i),(a=s.getContext("2d")).clearRect(0,0,1.5*A,i),a.putImageData(l,0,0),r=n(r),o=n(o);!u||!h;)A=d,i=f,r<n(d*c)?d=n(d*c):(d=r,u=!0),o<n(f*c)?f=n(f*c):(f=o,h=!0),a.drawImage(s,p,v,A,i,m,B,d,f),p=m,v=B,B+=f;return a.getImageData(p,v,r,o)},lanczosResize:function(e,t,o,s,l){var c=e.imageData.data,u=e.ctx.createImageData(s,l),h=u.data,d=this.lanczosCreate(this.lanczosLobes),f=this.rcpScaleX,g=this.rcpScaleY,p=2/this.rcpScaleX,v=2/this.rcpScaleY,m=a(f*this.lanczosLobes/2),B=a(g*this.lanczosLobes/2),y={},C={},w={};return function e(a){var b,x,Q,E,I,_,S,F,k,U,O;for(C.x=(a+.5)*f,w.x=n(C.x),b=0;b<l;b++){for(C.y=(b+.5)*g,w.y=n(C.y),I=0,_=0,S=0,F=0,k=0,x=w.x-m;x<=w.x+m;x++)if(!(x<0||x>=t)){U=n(1e3*r(x-C.x)),y[U]||(y[U]={});for(var D=w.y-B;D<=w.y+B;D++)D<0||D>=o||(O=n(1e3*r(D-C.y)),y[U][O]||(y[U][O]=d(i(A(U*p,2)+A(O*v,2))/1e3)),(Q=y[U][O])>0&&(I+=Q,_+=Q*c[E=4*(D*t+x)],S+=Q*c[E+1],F+=Q*c[E+2],k+=Q*c[E+3]))}h[E=4*(b*s+a)]=_/I,h[E+1]=S/I,h[E+2]=F/I,h[E+3]=k/I}return++a<s?e(a):u}(0)},bilinearFiltering:function(e,t,A,i,r){var o,s,a,l,c,u,h,d,f,g=0,p=this.rcpScaleX,v=this.rcpScaleY,m=4*(t-1),B=e.imageData.data,y=e.ctx.createImageData(i,r),C=y.data;for(a=0;a<r;a++)for(l=0;l<i;l++)for(c=p*l-(o=n(p*l)),u=v*a-(s=n(v*a)),f=4*(s*t+o),h=0;h<4;h++)d=B[f+h]*(1-c)*(1-u)+B[f+4+h]*c*(1-u)+B[f+m+h]*u*(1-c)+B[f+m+4+h]*c*u,C[g++]=d;return y},hermiteFastResize:function(e,t,A,o,s){for(var l=this.rcpScaleX,c=this.rcpScaleY,u=a(l/2),h=a(c/2),d=e.imageData.data,f=e.ctx.createImageData(o,s),g=f.data,p=0;p<s;p++)for(var v=0;v<o;v++){for(var m=4*(v+p*o),B=0,y=0,C=0,w=0,b=0,x=0,Q=0,E=(p+.5)*c,I=n(p*c);I<(p+1)*c;I++)for(var _=r(E-(I+.5))/h,S=(v+.5)*l,F=_*_,k=n(v*l);k<(v+1)*l;k++){var U=r(S-(k+.5))/u,O=i(F+U*U);O>1&&O<-1||(B=2*O*O*O-3*O*O+1)>0&&(Q+=B*d[(U=4*(k+I*t))+3],C+=B,d[U+3]<255&&(B=B*d[U+3]/250),w+=B*d[U],b+=B*d[U+1],x+=B*d[U+2],y+=B)}g[m]=w/y,g[m+1]=b/y,g[m+2]=x/y,g[m+3]=Q/C}return f},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),t.Image.filters.Resize.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Contrast=n(A.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(e){if(0!==this.contrast){var t,A=e.imageData.data,n=A.length,i=Math.floor(255*this.contrast),r=259*(i+255)/(255*(259-i));for(t=0;t<n;t+=4)A[t]=r*(A[t]-128)+128,A[t+1]=r*(A[t+1]-128)+128,A[t+2]=r*(A[t+2]-128)+128}},getUniformLocations:function(e,t){return{uContrast:e.getUniformLocation(t,"uContrast")}},sendUniformData:function(e,t){e.uniform1f(t.uContrast,this.contrast)}}),t.Image.filters.Contrast.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Saturation=n(A.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(e){if(0!==this.saturation){var t,A,n=e.imageData.data,i=n.length,r=-this.saturation;for(t=0;t<i;t+=4)A=Math.max(n[t],n[t+1],n[t+2]),n[t]+=A!==n[t]?(A-n[t])*r:0,n[t+1]+=A!==n[t+1]?(A-n[t+1])*r:0,n[t+2]+=A!==n[t+2]?(A-n[t+2])*r:0}},getUniformLocations:function(e,t){return{uSaturation:e.getUniformLocation(t,"uSaturation")}},sendUniformData:function(e,t){e.uniform1f(t.uSaturation,-this.saturation)}}),t.Image.filters.Saturation.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Vibrance=n(A.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(e){if(0!==this.vibrance){var t,A,n,i,r=e.imageData.data,o=r.length,s=-this.vibrance;for(t=0;t<o;t+=4)A=Math.max(r[t],r[t+1],r[t+2]),n=(r[t]+r[t+1]+r[t+2])/3,i=2*Math.abs(A-n)/255*s,r[t]+=A!==r[t]?(A-r[t])*i:0,r[t+1]+=A!==r[t+1]?(A-r[t+1])*i:0,r[t+2]+=A!==r[t+2]?(A-r[t+2])*i:0}},getUniformLocations:function(e,t){return{uVibrance:e.getUniformLocation(t,"uVibrance")}},sendUniformData:function(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}}),t.Image.filters.Vibrance.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Blur=n(A.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(e){e.webgl?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)},applyTo2d:function(e){e.imageData=this.simpleBlur(e)},simpleBlur:function(e){var A,n,i=e.filterBackend.resources,r=e.imageData.width,o=e.imageData.height;i.blurLayer1||(i.blurLayer1=t.util.createCanvasElement(),i.blurLayer2=t.util.createCanvasElement()),A=i.blurLayer1,n=i.blurLayer2,A.width===r&&A.height===o||(n.width=A.width=r,n.height=A.height=o);var s,a,l,c,u=A.getContext("2d"),h=n.getContext("2d"),d=15,f=.06*this.blur*.5;for(u.putImageData(e.imageData,0,0),h.clearRect(0,0,r,o),c=-15;c<=d;c++)l=f*(a=c/d)*r+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(a),h.drawImage(A,l,s),u.drawImage(n,0,0),h.globalAlpha=1,h.clearRect(0,0,n.width,n.height);for(c=-15;c<=d;c++)l=f*(a=c/d)*o+(s=(Math.random()-.5)/4),h.globalAlpha=1-Math.abs(a),h.drawImage(A,s,l),u.drawImage(n,0,0),h.globalAlpha=1,h.clearRect(0,0,n.width,n.height);e.ctx.drawImage(A,0,0);var g=e.ctx.getImageData(0,0,A.width,A.height);return u.globalAlpha=1,u.clearRect(0,0,A.width,A.height),g},getUniformLocations:function(e,t){return{delta:e.getUniformLocation(t,"uDelta")}},sendUniformData:function(e,t){var A=this.chooseRightDelta();e.uniform2fv(t.delta,A)},chooseRightDelta:function(){var e,t=1,A=[0,0];return this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio),e=t*this.blur*.12,this.horizontal?A[0]=e:A[1]=e,A}}),A.Blur.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Gamma=n(A.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(e){this.gamma=[1,1,1],A.BaseFilter.prototype.initialize.call(this,e)},applyTo2d:function(e){var t,A=e.imageData.data,n=this.gamma,i=A.length,r=1/n[0],o=1/n[1],s=1/n[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),t=0,i=256;t<i;t++)this.rVals[t]=255*Math.pow(t/255,r),this.gVals[t]=255*Math.pow(t/255,o),this.bVals[t]=255*Math.pow(t/255,s);for(t=0,i=A.length;t<i;t+=4)A[t]=this.rVals[A[t]],A[t+1]=this.gVals[A[t+1]],A[t+2]=this.bVals[A[t+2]]},getUniformLocations:function(e,t){return{uGamma:e.getUniformLocation(t,"uGamma")}},sendUniformData:function(e,t){e.uniform3fv(t.uGamma,this.gamma)}}),t.Image.filters.Gamma.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.Composed=n(A.BaseFilter,{type:"Composed",subFilters:[],initialize:function(e){this.callSuper("initialize",e),this.subFilters=this.subFilters.slice(0)},applyTo:function(e){e.passes+=this.subFilters.length-1,this.subFilters.forEach((function(t){t.applyTo(e)}))},toObject:function(){return t.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(e){return e.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(e){return!e.isNeutralState()}))}}),t.Image.filters.Composed.fromObject=function(e,A){var n=(e.subFilters||[]).map((function(e){return new t.Image.filters[e.type](e)})),i=new t.Image.filters.Composed({subFilters:n});return A&&A(i),i}}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.Image.filters,n=t.util.createClass;A.HueRotation=n(A.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var e=this.rotation*Math.PI,A=t.util.cos(e),n=t.util.sin(e),i=1/3,r=Math.sqrt(i)*n,o=1-A;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=A+o/3,this.matrix[1]=i*o-r,this.matrix[2]=i*o+r,this.matrix[5]=i*o+r,this.matrix[6]=A+i*o,this.matrix[7]=i*o-r,this.matrix[10]=i*o-r,this.matrix[11]=i*o+r,this.matrix[12]=A+i*o},isNeutralState:function(e){return this.calculateMatrix(),A.BaseFilter.prototype.isNeutralState.call(this,e)},applyTo:function(e){this.calculateMatrix(),A.BaseFilter.prototype.applyTo.call(this,e)}}),t.Image.filters.HueRotation.fromObject=t.Image.filters.BaseFilter.fromObject}(e),function(e){var t=e.fabric||(e.fabric={}),A=t.util.object.clone;if(t.Text)t.warn("fabric.Text is already defined");else{var n="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");t.Text=t.util.createClass(t.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:t.Object.prototype.stateProperties.concat(n),cacheProperties:t.Object.prototype.cacheProperties.concat(n),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(e,t){this.styles=t&&t.styles||{},this.text=e,this.__skipDimension=!0,this.callSuper("initialize",t),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var e=this.path;e&&(e.segmentsInfo=t.util.getPathSegmentsInfo(e.path))},getMeasuringContext:function(){return t._measuringContext||(t._measuringContext=this.canvas&&this.canvas.contextCache||t.util.createCanvasElement().getContext("2d")),t._measuringContext},_splitText:function(){var e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var e,t,A,n,i,r,o,s=0,a=this._textLines.length;s<a;s++)if(("justify"===this.textAlign||s!==a-1&&!this.isEndOfWrapping(s))&&(n=0,i=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(o=this.textLines[s].match(this._reSpacesAndTabs)))){A=o.length,e=(this.width-t)/A;for(var l=0,c=i.length;l<=c;l++)r=this.__charBounds[s][l],this._reSpaceAndTab.test(i[l])?(r.width+=e,r.kernedWidth+=e,r.left+=n,n+=e):r.left+=n}},isEndOfWrapping:function(e){return e===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var e=this.callSuper("_getCacheCanvasDimensions"),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e},_render:function(e){var t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")},_renderText:function(e){"stroke"===this.paintFirst?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))},_setTextStyles:function(e,t,A){if(e.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":e.textBaseline="middle";break;case"ascender":e.textBaseline="top";break;case"descender":e.textBaseline="bottom"}e.font=this._getFontDeclaration(t,A)},calcTextWidth:function(){for(var e=this.getLineWidth(0),t=1,A=this._textLines.length;t<A;t++){var n=this.getLineWidth(t);n>e&&(e=n)}return e},_renderTextLine:function(e,t,A,n,i,r){this._renderChars(e,t,A,n,i,r)},_renderTextLinesBackground:function(e){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var t,A,n,i,r,o,s,a=e.fillStyle,l=this._getLeftOffset(),c=this._getTopOffset(),u=0,h=0,d=this.path,f=0,g=this._textLines.length;f<g;f++)if(t=this.getHeightOfLine(f),this.textBackgroundColor||this.styleHas("textBackgroundColor",f)){n=this._textLines[f],A=this._getLineLeftOffset(f),h=0,u=0,i=this.getValueOfPropertyAt(f,0,"textBackgroundColor");for(var p=0,v=n.length;p<v;p++)r=this.__charBounds[f][p],o=this.getValueOfPropertyAt(f,p,"textBackgroundColor"),d?(e.save(),e.translate(r.renderLeft,r.renderTop),e.rotate(r.angle),e.fillStyle=o,o&&e.fillRect(-r.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),r.width,t/this.lineHeight),e.restore()):o!==i?(s=l+A+u,"rtl"===this.direction&&(s=this.width-s-h),e.fillStyle=i,i&&e.fillRect(s,c,h,t/this.lineHeight),u=r.left,h=r.width,i=o):h+=r.kernedWidth;o&&!d&&(s=l+A+u,"rtl"===this.direction&&(s=this.width-s-h),e.fillStyle=o,e.fillRect(s,c,h,t/this.lineHeight)),c+=t}else c+=t;e.fillStyle=a,this._removeShadow(e)}},getFontCache:function(e){var A=e.fontFamily.toLowerCase();t.charWidthsCache[A]||(t.charWidthsCache[A]={});var n=t.charWidthsCache[A],i=e.fontStyle.toLowerCase()+"_"+(e.fontWeight+"").toLowerCase();return n[i]||(n[i]={}),n[i]},_measureChar:function(e,t,A,n){var i,r,o,s,a=this.getFontCache(t),l=A+e,c=this._getFontDeclaration(t)===this._getFontDeclaration(n),u=t.fontSize/this.CACHE_FONT_SIZE;if(A&&void 0!==a[A]&&(o=a[A]),void 0!==a[e]&&(s=i=a[e]),c&&void 0!==a[l]&&(s=(r=a[l])-o),void 0===i||void 0===o||void 0===r){var h=this.getMeasuringContext();this._setTextStyles(h,t,!0)}return void 0===i&&(s=i=h.measureText(e).width,a[e]=i),void 0===o&&c&&A&&(o=h.measureText(A).width,a[A]=o),c&&void 0===r&&(r=h.measureText(l).width,a[l]=r,s=r-o),{width:i*u,kernedWidth:s*u}},getHeightOfChar:function(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")},measureLine:function(e){var t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t},_measureLine:function(e){var A,n,i,r,o,s,a=0,l=this._textLines[e],c=new Array(l.length),u=0,h=this.path,d="right"===this.pathSide;for(this.__charBounds[e]=c,A=0;A<l.length;A++)n=l[A],r=this._getGraphemeBox(n,e,A,i),c[A]=r,a+=r.kernedWidth,i=n;if(c[A]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize},h){switch(s=h.segmentsInfo[h.segmentsInfo.length-1].length,(o=t.util.getPointOnPath(h.path,0,h.segmentsInfo)).x+=h.pathOffset.x,o.y+=h.pathOffset.y,this.textAlign){case"left":u=d?s-a:0;break;case"center":u=(s-a)/2;break;case"right":u=d?0:s-a}for(u+=this.pathStartOffset*(d?-1:1),A=d?l.length-1:0;d?A>=0:A<l.length;d?A--:A++)r=c[A],u>s?u%=s:u<0&&(u+=s),this._setGraphemeOnPath(u,r,o),u+=r.kernedWidth}return{width:a,numOfSpaces:0}},_setGraphemeOnPath:function(e,A,n){var i=e+A.kernedWidth/2,r=this.path,o=t.util.getPointOnPath(r.path,i,r.segmentsInfo);A.renderLeft=o.x-n.x,A.renderTop=o.y-n.y,A.angle=o.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(e,t,A,n,i){var r,o=this.getCompleteStyleDeclaration(t,A),s=n?this.getCompleteStyleDeclaration(t,A-1):{},a=this._measureChar(e,o,n,s),l=a.kernedWidth,c=a.width;0!==this.charSpacing&&(c+=r=this._getWidthOfCharSpacing(),l+=r);var u={width:c,left:0,height:o.fontSize,kernedWidth:l,deltaY:o.deltaY};if(A>0&&!i){var h=this.__charBounds[t][A-1];u.left=h.left+h.width+a.kernedWidth-a.width}return u},getHeightOfLine:function(e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var t=this._textLines[e],A=this.getHeightOfChar(e,0),n=1,i=t.length;n<i;n++)A=Math.max(this.getHeightOfChar(e,n),A);return this.__lineHeights[e]=A*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var e,t=0,A=0,n=this._textLines.length;A<n;A++)e=this.getHeightOfLine(A),t+=A===n-1?e/this.lineHeight:e;return t},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(e,t){e.save();for(var A=0,n=this._getLeftOffset(),i=this._getTopOffset(),r=0,o=this._textLines.length;r<o;r++){var s=this.getHeightOfLine(r),a=s/this.lineHeight,l=this._getLineLeftOffset(r);this._renderTextLine(t,e,this._textLines[r],n+l,i+A+a,r),A+=s}e.restore()},_renderTextFill:function(e){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(e,"fillText")},_renderTextStroke:function(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())},_renderChars:function(e,A,n,i,r,o){var s,a,l,c,u,h=this.getHeightOfLine(o),d=-1!==this.textAlign.indexOf("justify"),f="",g=0,p=this.path,v=!d&&0===this.charSpacing&&this.isEmptyStyles(o)&&!p,m="ltr"===this.direction,B="ltr"===this.direction?1:-1,y=A.canvas.getAttribute("dir");if(A.save(),y!==this.direction&&(A.canvas.setAttribute("dir",m?"ltr":"rtl"),A.direction=m?"ltr":"rtl",A.textAlign=m?"left":"right"),r-=h*this._fontSizeFraction/this.lineHeight,v)return this._renderChar(e,A,o,0,n.join(""),i,r,h),void A.restore();for(var C=0,w=n.length-1;C<=w;C++)c=C===w||this.charSpacing||p,f+=n[C],l=this.__charBounds[o][C],0===g?(i+=B*(l.kernedWidth-l.width),g+=l.width):g+=l.kernedWidth,d&&!c&&this._reSpaceAndTab.test(n[C])&&(c=!0),c||(s=s||this.getCompleteStyleDeclaration(o,C),a=this.getCompleteStyleDeclaration(o,C+1),c=t.util.hasStyleChanged(s,a,!1)),c&&(p?(A.save(),A.translate(l.renderLeft,l.renderTop),A.rotate(l.angle),this._renderChar(e,A,o,C,f,-g/2,0,h),A.restore()):(u=i,this._renderChar(e,A,o,C,f,u,r,h)),f="",s=a,i+=B*g,g=0);A.restore()},_applyPatternGradientTransformText:function(e){var A,n=t.util.createCanvasElement(),i=this.width+this.strokeWidth,r=this.height+this.strokeWidth;return n.width=i,n.height=r,(A=n.getContext("2d")).beginPath(),A.moveTo(0,0),A.lineTo(i,0),A.lineTo(i,r),A.lineTo(0,r),A.closePath(),A.translate(i/2,r/2),A.fillStyle=e.toLive(A),this._applyPatternGradientTransform(A,e),A.fill(),A.createPattern(n,"no-repeat")},handleFiller:function(e,t,A){var n,i;return A.toLive?"percentage"===A.gradientUnits||A.gradientTransform||A.patternTransform?(n=-this.width/2,i=-this.height/2,e.translate(n,i),e[t]=this._applyPatternGradientTransformText(A),{offsetX:n,offsetY:i}):(e[t]=A.toLive(e,this),this._applyPatternGradientTransform(e,A)):(e[t]=A,{offsetX:0,offsetY:0})},_setStrokeStyles:function(e,t){return e.lineWidth=t.strokeWidth,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",t.stroke)},_setFillStyles:function(e,t){return this.handleFiller(e,"fillStyle",t.fill)},_renderChar:function(e,t,A,n,i,r,o){var s,a,l=this._getStyleDeclaration(A,n),c=this.getCompleteStyleDeclaration(A,n),u="fillText"===e&&c.fill,h="strokeText"===e&&c.stroke&&c.strokeWidth;(h||u)&&(t.save(),u&&(s=this._setFillStyles(t,c)),h&&(a=this._setStrokeStyles(t,c)),t.font=this._getFontDeclaration(c),l&&l.textBackgroundColor&&this._removeShadow(t),l&&l.deltaY&&(o+=l.deltaY),u&&t.fillText(i,r-s.offsetX,o-s.offsetY),h&&t.strokeText(i,r-a.offsetX,o-a.offsetY),t.restore())},setSuperscript:function(e,t){return this._setScript(e,t,this.superscript)},setSubscript:function(e,t){return this._setScript(e,t,this.subscript)},_setScript:function(e,t,A){var n=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),o={fontSize:i*A.size,deltaY:r+i*A.baseline};return this.setSelectionStyles(o,e,t),this},_getLineLeftOffset:function(e){var t=this.getLineWidth(e),A=this.width-t,n=this.textAlign,i=this.direction,r=0,o=this.isEndOfWrapping(e);return"justify"===n||"justify-center"===n&&!o||"justify-right"===n&&!o||"justify-left"===n&&!o?0:("center"===n&&(r=A/2),"right"===n&&(r=A),"justify-center"===n&&(r=A/2),"justify-right"===n&&(r=A),"rtl"===i&&(r-=A),r)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var e=this._forceClearCache;return e||(e=this.hasStateChanged("_dimensionAffectingProps")),e&&(this.dirty=!0,this._forceClearCache=!1),e},getLineWidth:function(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];var t=this.measureLine(e).width;return this.__lineWidths[e]=t,t},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(e,t,A){var n=this._getStyleDeclaration(e,t);return n&&void 0!==n[A]?n[A]:this[A]},_renderTextDecoration:function(e,t){if(this[t]||this.styleHas(t)){for(var A,n,i,r,o,s,a,l,c,u,h,d,f,g,p,v,m=this._getLeftOffset(),B=this._getTopOffset(),y=this.path,C=this._getWidthOfCharSpacing(),w=this.offsets[t],b=0,x=this._textLines.length;b<x;b++)if(A=this.getHeightOfLine(b),this[t]||this.styleHas(t,b)){a=this._textLines[b],g=A/this.lineHeight,r=this._getLineLeftOffset(b),u=0,h=0,l=this.getValueOfPropertyAt(b,0,t),v=this.getValueOfPropertyAt(b,0,"fill"),c=B+g*(1-this._fontSizeFraction),n=this.getHeightOfChar(b,0),o=this.getValueOfPropertyAt(b,0,"deltaY");for(var Q=0,E=a.length;Q<E;Q++)if(d=this.__charBounds[b][Q],f=this.getValueOfPropertyAt(b,Q,t),p=this.getValueOfPropertyAt(b,Q,"fill"),i=this.getHeightOfChar(b,Q),s=this.getValueOfPropertyAt(b,Q,"deltaY"),y&&f&&p)e.save(),e.fillStyle=v,e.translate(d.renderLeft,d.renderTop),e.rotate(d.angle),e.fillRect(-d.kernedWidth/2,w*i+s,d.kernedWidth,this.fontSize/15),e.restore();else if((f!==l||p!==v||i!==n||s!==o)&&h>0){var I=m+r+u;"rtl"===this.direction&&(I=this.width-I-h),l&&v&&(e.fillStyle=v,e.fillRect(I,c+w*n+o,h,this.fontSize/15)),u=d.left,h=d.width,l=f,v=p,n=i,o=s}else h+=d.kernedWidth;I=m+r+u;"rtl"===this.direction&&(I=this.width-I-h),e.fillStyle=p,f&&p&&e.fillRect(I,c+w*n+o,h-C,this.fontSize/15),B+=A}else B+=A;this._removeShadow(e)}},_getFontDeclaration:function(e,A){var n=e||this,i=this.fontFamily,r=t.Text.genericFonts.indexOf(i.toLowerCase())>-1,o=void 0===i||i.indexOf("'")>-1||i.indexOf(",")>-1||i.indexOf('"')>-1||r?n.fontFamily:'"'+n.fontFamily+'"';return[t.isLikelyNode?n.fontWeight:n.fontStyle,t.isLikelyNode?n.fontStyle:n.fontWeight,A?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",o].join(" ")},render:function(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",e)))},_splitTextIntoLines:function(e){for(var A=e.split(this._reNewline),n=new Array(A.length),i=["\n"],r=[],o=0;o<A.length;o++)n[o]=t.util.string.graphemeSplit(A[o]),r=r.concat(n[o],i);return r.pop(),{_unwrappedLines:n,lines:A,graphemeText:r,graphemeLines:n}},toObject:function(e){var A=n.concat(e),i=this.callSuper("toObject",A);return i.styles=t.util.stylesToArray(this.styles,this.text),i.path&&(i.path=this.path.toObject()),i},set:function(e,t){this.callSuper("set",e,t);var A=!1,n=!1;if("object"==typeof e)for(var i in e)"path"===i&&this.setPathInfo(),A=A||-1!==this._dimensionAffectingProps.indexOf(i),n=n||"path"===i;else A=-1!==this._dimensionAffectingProps.indexOf(e),n="path"===e;return n&&this.setPathInfo(),A&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),t.Text.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),t.Text.DEFAULT_SVG_FONT_SIZE=16,t.Text.fromElement=function(e,n,i){if(!e)return n(null);var r=t.parseAttributes(e,t.Text.ATTRIBUTE_NAMES),o=r.textAnchor||"left";if((i=t.util.object.extend(i?A(i):{},r)).top=i.top||0,i.left=i.left||0,r.textDecoration){var s=r.textDecoration;-1!==s.indexOf("underline")&&(i.underline=!0),-1!==s.indexOf("overline")&&(i.overline=!0),-1!==s.indexOf("line-through")&&(i.linethrough=!0),delete i.textDecoration}"dx"in r&&(i.left+=r.dx),"dy"in r&&(i.top+=r.dy),"fontSize"in i||(i.fontSize=t.Text.DEFAULT_SVG_FONT_SIZE);var a="";"textContent"in e?a=e.textContent:"firstChild"in e&&null!==e.firstChild&&"data"in e.firstChild&&null!==e.firstChild.data&&(a=e.firstChild.data),a=a.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var l=i.strokeWidth;i.strokeWidth=0;var c=new t.Text(a,i),u=c.getScaledHeight()/c.height,h=((c.height+c.strokeWidth)*c.lineHeight-c.height)*u,d=c.getScaledHeight()+h,f=0;"center"===o&&(f=c.getScaledWidth()/2),"right"===o&&(f=c.getScaledWidth()),c.set({left:c.left-f,top:c.top-(d-c.fontSize*(.07+c._fontSizeFraction))/c.lineHeight,strokeWidth:void 0!==l?l:1}),n(c)},t.Text.fromObject=function(e,n){var i=A(e),r=e.path;return delete i.path,t.Object._fromObject("Text",i,(function(A){A.styles=t.util.stylesFromArray(e.styles,e.text),r?t.Object._fromObject("Path",r,(function(e){A.set("path",e),n(A)}),"path"):n(A)}),"text")},t.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],t.util.createAccessors&&t.util.createAccessors(t.Text)}}(e),w.util.object.extend(w.Text.prototype,{isEmptyStyles:function(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;var t=void 0===e?this.styles:{line:this.styles[e]};for(var A in t)for(var n in t[A])for(var i in t[A][n])return!1;return!0},styleHas:function(e,t){if(!this.styles||!e||""===e)return!1;if(void 0!==t&&!this.styles[t])return!1;var A=void 0===t?this.styles:{0:this.styles[t]};for(var n in A)for(var i in A[n])if(void 0!==A[n][i][e])return!0;return!1},cleanStyle:function(e){if(!this.styles||!e||""===e)return!1;var t,A,n=this.styles,i=0,r=!0,o=0;for(var s in n){for(var a in t=0,n[s]){var l;i++,(l=n[s][a]).hasOwnProperty(e)?(A?l[e]!==A&&(r=!1):A=l[e],l[e]===this[e]&&delete l[e]):r=!1,0!==Object.keys(l).length?t++:delete n[s][a]}0===t&&delete n[s]}for(var c=0;c<this._textLines.length;c++)o+=this._textLines[c].length;r&&i===o&&(this[e]=A,this.removeStyle(e))},removeStyle:function(e){if(this.styles&&e&&""!==e){var t,A,n,i=this.styles;for(A in i){for(n in t=i[A])delete t[n][e],0===Object.keys(t[n]).length&&delete t[n];0===Object.keys(t).length&&delete i[A]}}},_extendStyles:function(e,t){var A=this.get2DCursorLocation(e);this._getLineStyle(A.lineIndex)||this._setLineStyle(A.lineIndex),this._getStyleDeclaration(A.lineIndex,A.charIndex)||this._setStyleDeclaration(A.lineIndex,A.charIndex,{}),w.util.object.extend(this._getStyleDeclaration(A.lineIndex,A.charIndex),t)},get2DCursorLocation:function(e,t){void 0===e&&(e=this.selectionStart);for(var A=t?this._unwrappedTextLines:this._textLines,n=A.length,i=0;i<n;i++){if(e<=A[i].length)return{lineIndex:i,charIndex:e};e-=A[i].length+this.missingNewlineOffset(i)}return{lineIndex:i-1,charIndex:A[i-1].length<e?A[i-1].length:e}},getSelectionStyles:function(e,t,A){void 0===e&&(e=this.selectionStart||0),void 0===t&&(t=this.selectionEnd||e);for(var n=[],i=e;i<t;i++)n.push(this.getStyleAtPosition(i,A));return n},getStyleAtPosition:function(e,t){var A=this.get2DCursorLocation(e);return(t?this.getCompleteStyleDeclaration(A.lineIndex,A.charIndex):this._getStyleDeclaration(A.lineIndex,A.charIndex))||{}},setSelectionStyles:function(e,t,A){void 0===t&&(t=this.selectionStart||0),void 0===A&&(A=this.selectionEnd||t);for(var n=t;n<A;n++)this._extendStyles(n,e);return this._forceClearCache=!0,this},_getStyleDeclaration:function(e,t){var A=this.styles&&this.styles[e];return A?A[t]:null},getCompleteStyleDeclaration:function(e,t){for(var A,n=this._getStyleDeclaration(e,t)||{},i={},r=0;r<this._styleProperties.length;r++)i[A=this._styleProperties[r]]=void 0===n[A]?this[A]:n[A];return i},_setStyleDeclaration:function(e,t,A){this.styles[e][t]=A},_deleteStyleDeclaration:function(e,t){delete this.styles[e][t]},_getLineStyle:function(e){return!!this.styles[e]},_setLineStyle:function(e){this.styles[e]={}},_deleteLineStyle:function(e){delete this.styles[e]}}),function(){function e(e){e.textDecoration&&(e.textDecoration.indexOf("underline")>-1&&(e.underline=!0),e.textDecoration.indexOf("line-through")>-1&&(e.linethrough=!0),e.textDecoration.indexOf("overline")>-1&&(e.overline=!0),delete e.textDecoration)}w.IText=w.util.createClass(w.Text,w.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(e,t){this.callSuper("initialize",e,t),this.initBehavior()},setSelectionStart:function(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)},setSelectionEnd:function(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)},_updateAndFire:function(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(e){this.clearContextTop(),this.callSuper("render",e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(e){this.callSuper("_render",e)},clearContextTop:function(e){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this.canvas.contextTop,A=this.canvas.viewportTransform;t.save(),t.transform(A[0],A[1],A[2],A[3],A[4],A[5]),this.transform(t),this._clearTextArea(t),e||t.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this._getCursorBoundaries(),t=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(e,t):this.renderSelection(e,t),t.restore()}},_clearTextArea:function(e){var t=this.width+4,A=this.height+4;e.clearRect(-t/2,-A/2,t,A)},_getCursorBoundaries:function(e){void 0===e&&(e=this.selectionStart);var t=this._getLeftOffset(),A=this._getTopOffset(),n=this._getCursorBoundariesOffsets(e);return{left:t,top:A,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var t,A,n,i,r=0,o=0,s=this.get2DCursorLocation(e);n=s.charIndex,A=s.lineIndex;for(var a=0;a<A;a++)r+=this.getHeightOfLine(a);t=this._getLineLeftOffset(A);var l=this.__charBounds[A][n];return l&&(o=l.left),0!==this.charSpacing&&n===this._textLines[A].length&&(o-=this._getWidthOfCharSpacing()),i={top:r,left:t+(o>0?o:0)},"rtl"===this.direction&&(i.left*=-1),this.cursorOffsetCache=i,this.cursorOffsetCache},renderCursor:function(e,t){var A=this.get2DCursorLocation(),n=A.lineIndex,i=A.charIndex>0?A.charIndex-1:0,r=this.getValueOfPropertyAt(n,i,"fontSize"),o=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/o,a=e.topOffset,l=this.getValueOfPropertyAt(n,i,"deltaY");a+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-r*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(e,t),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,i,"fill"),t.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-s/2,a+e.top+l,s,r)},renderSelection:function(e,t){for(var A=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,i=-1!==this.textAlign.indexOf("justify"),r=this.get2DCursorLocation(A),o=this.get2DCursorLocation(n),s=r.lineIndex,a=o.lineIndex,l=r.charIndex<0?0:r.charIndex,c=o.charIndex<0?0:o.charIndex,u=s;u<=a;u++){var h,d=this._getLineLeftOffset(u)||0,f=this.getHeightOfLine(u),g=0,p=0;if(u===s&&(g=this.__charBounds[s][l].left),u>=s&&u<a)p=i&&!this.isEndOfWrapping(u)?this.width:this.getLineWidth(u)||5;else if(u===a)if(0===c)p=this.__charBounds[a][c].left;else{var v=this._getWidthOfCharSpacing();p=this.__charBounds[a][c-1].left+this.__charBounds[a][c-1].width-v}h=f,(this.lineHeight<1||u===a&&this.lineHeight>1)&&(f/=this.lineHeight);var m=e.left+d+g,B=p-g,y=f,C=0;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",y=1,C=f):t.fillStyle=this.selectionColor,"rtl"===this.direction&&(m=this.width-m-B),t.fillRect(m,e.top+e.topOffset+C,B,y),e.topOffset+=h}},getCurrentCharFontSize:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")},getCurrentCharColor:function(){var e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fill")},_getCurrentCharIndex:function(){var e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}}),w.IText.fromObject=function(t,A){var n=w.util.stylesFromArray(t.styles,t.text),i=Object.assign({},t,{styles:n});if(e(i),i.styles)for(var r in i.styles)for(var o in i.styles[r])e(i.styles[r][o]);w.Object._fromObject("IText",i,A,"text")}}(),C=w.util.object.clone,w.util.object.extend(w.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var e=this;this.on("added",(function(){var t=e.canvas;t&&(t._hasITextHandlers||(t._hasITextHandlers=!0,e._initCanvasHandlers(t)),t._iTextInstances=t._iTextInstances||[],t._iTextInstances.push(e))}))},initRemovedHandler:function(){var e=this;this.on("removed",(function(){var t=e.canvas;t&&(t._iTextInstances=t._iTextInstances||[],w.util.removeFromArray(t._iTextInstances,e),0===t._iTextInstances.length&&(t._hasITextHandlers=!1,e._removeCanvasHandlers(t)))}))},_initCanvasHandlers:function(e){e._mouseUpITextHandler=function(){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.__isMousedown=!1}))},e.on("mouse:up",e._mouseUpITextHandler)},_removeCanvasHandlers:function(e){e.off("mouse:up",e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(e,t,A,n){var i;return i={isAborted:!1,abort:function(){this.isAborted=!0}},e.animate("_currentCursorOpacity",t,{duration:A,onComplete:function(){i.isAborted||e[n]()},onChange:function(){e.canvas&&e.selectionStart===e.selectionEnd&&e.renderCursorOrSelection()},abort:function(){return i.isAborted}}),i},_onTickComplete:function(){var e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){e._currentTickCompleteState=e._animateCursor(e,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(e){var t=this,A=e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){t._tick()}),A)},abortCursorAnimation:function(){var e=this._currentTickState||this._currentTickCompleteState,t=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,e&&t&&t.clearContext(t.contextTop||t.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(e){var t=0,A=e-1;if(this._reSpace.test(this._text[A]))for(;this._reSpace.test(this._text[A]);)t++,A--;for(;/\S/.test(this._text[A])&&A>-1;)t++,A--;return e-t},findWordBoundaryRight:function(e){var t=0,A=e;if(this._reSpace.test(this._text[A]))for(;this._reSpace.test(this._text[A]);)t++,A++;for(;/\S/.test(this._text[A])&&A<this._text.length;)t++,A++;return e+t},findLineBoundaryLeft:function(e){for(var t=0,A=e-1;!/\n/.test(this._text[A])&&A>-1;)t++,A--;return e-t},findLineBoundaryRight:function(e){for(var t=0,A=e;!/\n/.test(this._text[A])&&A<this._text.length;)t++,A++;return e+t},searchWordBoundary:function(e,t){for(var A=this._text,n=this._reSpace.test(A[e])?e-1:e,i=A[n],r=w.reNonWord;!r.test(i)&&n>0&&n<A.length;)i=A[n+=t];return r.test(i)&&(n+=1===t?0:1),n},selectWord:function(e){e=e||this.selectionStart;var t=this.searchWordBoundary(e,-1),A=this.searchWordBoundary(e,1);this.selectionStart=t,this.selectionEnd=A,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(e){e=e||this.selectionStart;var t=this.findLineBoundaryLeft(e),A=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=A,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(e){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(e){e._iTextInstances&&e._iTextInstances.forEach((function(e){e.selected=!1,e.isEditing&&e.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(e){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var t=this.getSelectionStartFromPointer(e.e),A=this.selectionStart,n=this.selectionEnd;(t===this.__selectionStartOnMouseDown&&A!==n||A!==t&&n!==t)&&(t>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=t):(this.selectionStart=t,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===A&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(e,t,A){var n=A.slice(0,e),i=w.util.string.graphemeSplit(n).length;if(e===t)return{selectionStart:i,selectionEnd:i};var r=A.slice(e,t);return{selectionStart:i,selectionEnd:i+w.util.string.graphemeSplit(r).length}},fromGraphemeToStringSelection:function(e,t,A){var n=A.slice(0,e).join("").length;return e===t?{selectionStart:n,selectionEnd:n}:{selectionStart:n,selectionEnd:n+A.slice(e,t).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),A=this.get2DCursorLocation(e),n=A.lineIndex,i=A.charIndex,r=this.getValueOfPropertyAt(n,i,"fontSize")*this.lineHeight,o=t.leftOffset,s=this.calcTransformMatrix(),a={x:t.left+o,y:t.top+t.topOffset+r},l=this.canvas.getRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-r,f=h-r,g=c.clientWidth/u,p=c.clientHeight/h;return a=w.util.transformPoint(a,s),(a=w.util.transformPoint(a,this.canvas.viewportTransform)).x*=g,a.y*=p,a.x<0&&(a.x=0),a.x>d&&(a.x=d),a.y<0&&(a.y=0),a.y>f&&(a.y=f),a.x+=this.canvas._offset.left,a.y+=this.canvas._offset.top,{left:a.x+"px",top:a.y+"px",fontSize:r+"px",charHeight:r}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var e=this._textBeforeEdit!==this.text,t=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var e in this.styles)this._textLines[e]||delete this.styles[e]},removeStyleFromTo:function(e,t){var A,n,i=this.get2DCursorLocation(e,!0),r=this.get2DCursorLocation(t,!0),o=i.lineIndex,s=i.charIndex,a=r.lineIndex,l=r.charIndex;if(o!==a){if(this.styles[o])for(A=s;A<this._unwrappedTextLines[o].length;A++)delete this.styles[o][A];if(this.styles[a])for(A=l;A<this._unwrappedTextLines[a].length;A++)(n=this.styles[a][A])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][s+A-l]=n);for(A=o+1;A<=a;A++)delete this.styles[A];this.shiftLineStyles(a,o-a)}else if(this.styles[o]){n=this.styles[o];var c,u,h=l-s;for(A=s;A<l;A++)delete n[A];for(u in this.styles[o])(c=parseInt(u,10))>=l&&(n[c-h]=n[u],delete n[u])}},shiftLineStyles:function(e,t){var A=C(this.styles);for(var n in this.styles){var i=parseInt(n,10);i>e&&(this.styles[i+t]=A[i],A[i-t]||delete this.styles[i])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,t,A,n){var i,r={},o=!1,s=this._unwrappedTextLines[e].length===t;for(var a in A||(A=1),this.shiftLineStyles(e,A),this.styles[e]&&(i=this.styles[e][0===t?t:t-1]),this.styles[e]){var l=parseInt(a,10);l>=t&&(o=!0,r[l-t]=this.styles[e][a],s&&0===t||delete this.styles[e][a])}var c=!1;for(o&&!s&&(this.styles[e+A]=r,c=!0),c&&A--;A>0;)n&&n[A-1]?this.styles[e+A]={0:C(n[A-1])}:i?this.styles[e+A]={0:C(i)}:delete this.styles[e+A],A--;this._forceClearCache=!0},insertCharStyleObject:function(e,t,A,n){this.styles||(this.styles={});var i=this.styles[e],r=i?C(i):{};for(var o in A||(A=1),r){var s=parseInt(o,10);s>=t&&(i[s+A]=r[s],r[s-A]||delete i[s])}if(this._forceClearCache=!0,n)for(;A--;)Object.keys(n[A]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+A]=C(n[A]));else if(i)for(var a=i[t?t-1:1];a&&A--;)this.styles[e][t+A]=C(a)},insertNewStyleBlock:function(e,t,A){for(var n=this.get2DCursorLocation(t,!0),i=[0],r=0,o=0;o<e.length;o++)"\n"===e[o]?i[++r]=0:i[r]++;for(i[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,i[0],A),A=A&&A.slice(i[0]+1)),r&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+i[0],r),o=1;o<r;o++)i[o]>0?this.insertCharStyleObject(n.lineIndex+o,0,i[o],A):A&&this.styles[n.lineIndex+o]&&A[0]&&(this.styles[n.lineIndex+o][0]=A[0]),A=A&&A.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(n.lineIndex+o,0,i[o],A)},setSelectionStartEndWithShift:function(e,t,A){A<=e?(t===e?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=e),this.selectionStart=A):A>e&&A<t?"right"===this._selectionDirection?this.selectionEnd=A:this.selectionStart=A:(t===e?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=t),this.selectionEnd=A)},setSelectionInBoundaries:function(){var e=this.text.length;this.selectionStart>e?this.selectionStart=e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>e?this.selectionEnd=e:this.selectionEnd<0&&(this.selectionEnd=0)}}),w.util.object.extend(w.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(e){if(this.canvas){this.__newClickTime=+new Date;var t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),this._stopEvent(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y},_stopEvent:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))},tripleClickHandler:function(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(e){!this.canvas||!this.editable||e.e.button&&1!==e.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(e){if(this.__isMousedown=!1,!(!this.editable||this.group||e.transform&&e.transform.actionPerformed||e.e.button&&1!==e.e.button)){if(this.canvas){var t=this.canvas._activeObject;if(t&&t!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(e){var t=this.getSelectionStartFromPointer(e),A=this.selectionStart,n=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(A,n,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(e){for(var t,A=this.getLocalPointer(e),n=0,i=0,r=0,o=0,s=0,a=0,l=this._textLines.length;a<l&&r<=A.y;a++)r+=this.getHeightOfLine(a)*this.scaleY,s=a,a>0&&(o+=this._textLines[a-1].length+this.missingNewlineOffset(a-1));i=this._getLineLeftOffset(s)*this.scaleX,t=this._textLines[s],"rtl"===this.direction&&(A.x=this.width*this.scaleX-A.x+i);for(var c=0,u=t.length;c<u&&(n=i,(i+=this.__charBounds[s][c].kernedWidth*this.scaleX)<=A.x);c++)o++;return this._getNewSelectionStartFromOffset(A,n,i,o,u)},_getNewSelectionStartFromOffset:function(e,t,A,n,i){var r=e.x-t,o=A-e.x,s=n+(o>r||o<0?0:1);return this.flipX&&(s=i-s),s>this._text.length&&(s=this._text.length),s}}),w.util.object.extend(w.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=w.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var e=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+e.top+"; left: "+e.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+e.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):w.document.body.appendChild(this.hiddenTextarea),w.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),w.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),w.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),w.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),w.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),w.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),w.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(w.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(e){if(this.isEditing){var t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(e){var t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),this.isEditing){var A,n,i,r,o,s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,a=this._text.length,l=s.length,c=l-a,u=this.selectionStart,h=this.selectionEnd,d=u!==h;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var f=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),g=u>f.selectionStart;d?(A=this._text.slice(u,h),c+=h-u):l<a&&(A=g?this._text.slice(h+c,h):this._text.slice(u,u-c)),n=s.slice(f.selectionEnd-c,f.selectionEnd),A&&A.length&&(n.length&&(i=this.getSelectionStyles(u,u+1,!1),i=n.map((function(){return i[0]}))),d?(r=u,o=h):g?(r=h-A.length,o=h):(r=h,o=h+A.length),this.removeStyleFromTo(r,o)),n.length&&(t&&n.join("")===w.copiedText&&!w.disableStyleCopyPaste&&(i=w.copiedTextStyle),this.insertNewStyleBlock(n,u,i)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(e){this.compositionStart=e.target.selectionStart,this.compositionEnd=e.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(w.copiedText=this.getSelectedText(),w.disableStyleCopyPaste?w.copiedTextStyle=null:w.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(e){return e&&e.clipboardData||w.window.clipboardData},_getWidthBeforeCursor:function(e,t){var A,n=this._getLineLeftOffset(e);return t>0&&(n+=(A=this.__charBounds[e][t-1]).left+A.width),n},getDownCursorOffset:function(e,t){var A=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(A),i=n.lineIndex;if(i===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-A;var r=n.charIndex,o=this._getWidthBeforeCursor(i,r),s=this._getIndexOnLine(i+1,o);return this._textLines[i].slice(r).length+s+1+this.missingNewlineOffset(i)},_getSelectionForOffset:function(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(e,t){var A=this._getSelectionForOffset(e,t),n=this.get2DCursorLocation(A),i=n.lineIndex;if(0===i||e.metaKey||33===e.keyCode)return-A;var r=n.charIndex,o=this._getWidthBeforeCursor(i,r),s=this._getIndexOnLine(i-1,o),a=this._textLines[i].slice(0,r),l=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+s-a.length+(1-l)},_getIndexOnLine:function(e,t){for(var A,n,i=this._textLines[e],r=this._getLineLeftOffset(e),o=0,s=0,a=i.length;s<a;s++)if((r+=A=this.__charBounds[e][s].width)>t){n=!0;var l=r-A,c=r,u=Math.abs(l-t);o=Math.abs(c-t)<u?s:s-1;break}return n||(o=i.length-1),o},moveCursorDown:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)},moveCursorUp:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)},_moveCursorUpOrDown:function(e,t){var A=this["get"+e+"CursorOffset"](t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorWithShift(A):this.moveCursorWithoutShift(A),0!==A&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(e){var t="left"===this._selectionDirection?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e},moveCursorWithoutShift:function(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e},moveCursorLeft:function(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)},_move:function(e,t,A){var n;if(e.altKey)n=this["findWordBoundary"+A](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===A?-1:1,!0;n=this["findLineBoundary"+A](this[t])}if(void 0!==n&&this[t]!==n)return this[t]=n,!0},_moveLeft:function(e,t){return this._move(e,t,"Left")},_moveRight:function(e,t){return this._move(e,t,"Right")},moveCursorLeftWithoutShift:function(e){var t=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t},moveCursorLeftWithShift:function(e){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(e,"selectionStart")):void 0},moveCursorRight:function(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)},_moveCursorLeftOrRight:function(e,t){var A="moveCursor"+e+"With";this._currentCursorOpacity=1,t.shiftKey?A+="Shift":A+="outShift",this[A](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(e){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(e,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(e){var t=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t},removeChars:function(e,t){void 0===t&&(t=e+1),this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(e,t,A,n){void 0===n&&(n=A),n>A&&this.removeStyleFromTo(A,n);var i=w.util.string.graphemeSplit(e);this.insertNewStyleBlock(i,A,t),this._text=[].concat(this._text.slice(0,A),i,this._text.slice(n)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var e=w.util.toFixed,t=/  +/g;w.util.object.extend(w.Text.prototype,{_toSVG:function(){var e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)},toSVG:function(e){return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(e){var t=this.getSvgTextDecoration(this);return[e.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",t?'text-decoration="'+t+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(e,t){var A,n=[],i=[],r=e;this._setSVGBg(i);for(var o=0,s=this._textLines.length;o<s;o++)A=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(i,o,t+A,r),this._setSVGTextLineText(n,o,t+A,r),r+=this.getHeightOfLine(o);return{textSpans:n,textBgRects:i}},_createTextCharSpan:function(A,n,i,r){var o=A!==A.trim()||A.match(t),s=this.getSvgSpanStyles(n,o),a=s?'style="'+s+'"':"",l=n.deltaY,c="",u=w.Object.NUM_FRACTION_DIGITS;return l&&(c=' dy="'+e(l,u)+'" '),['<tspan x="',e(i,u),'" y="',e(r,u),'" ',c,a,">",w.util.string.escapeXml(A),"</tspan>"].join("")},_setSVGTextLineText:function(e,t,A,n){var i,r,o,s,a,l=this.getHeightOfLine(t),c=-1!==this.textAlign.indexOf("justify"),u="",h=0,d=this._textLines[t];n+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var f=0,g=d.length-1;f<=g;f++)a=f===g||this.charSpacing,u+=d[f],o=this.__charBounds[t][f],0===h?(A+=o.kernedWidth-o.width,h+=o.width):h+=o.kernedWidth,c&&!a&&this._reSpaceAndTab.test(d[f])&&(a=!0),a||(i=i||this.getCompleteStyleDeclaration(t,f),r=this.getCompleteStyleDeclaration(t,f+1),a=w.util.hasStyleChanged(i,r,!0)),a&&(s=this._getStyleDeclaration(t,f)||{},e.push(this._createTextCharSpan(u,s,A,n)),u="",i=r,A+=h,h=0)},_pushTextBgRect:function(t,A,n,i,r,o){var s=w.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(A),' x="',e(n,s),'" y="',e(i,s),'" width="',e(r,s),'" height="',e(o,s),'"></rect>\n')},_setSVGTextLineBg:function(e,t,A,n){for(var i,r,o=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight,a=0,l=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor"),u=0,h=o.length;u<h;u++)i=this.__charBounds[t][u],(r=this.getValueOfPropertyAt(t,u,"textBackgroundColor"))!==c?(c&&this._pushTextBgRect(e,c,A+l,n,a,s),l=i.left,a=i.width,c=r):a+=i.kernedWidth;r&&this._pushTextBgRect(e,r,A+l,n,a,s)},_getFillAttributes:function(e){var t=e&&"string"==typeof e?new w.Color(e):"";return t&&t.getSource()&&1!==t.getAlpha()?'opacity="'+t.getAlpha()+'" fill="'+t.setAlpha(1).toRgb()+'"':'fill="'+e+'"'},_getSVGLineTopOffset:function(e){for(var t,A=0,n=0;n<e;n++)A+=this.getHeightOfLine(n);return t=this.getHeightOfLine(n),{lineTop:A,offset:(this._fontSizeMult-this._fontSizeFraction)*t/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(e){return w.Object.prototype.getSvgStyles.call(this,e)+" white-space: pre;"}})}(),function(e){var t=e.fabric||(e.fabric={});t.Textbox=t.util.createClass(t.IText,t.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:t.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(e){for(var t=0,A=0,n=0,i={},r=0;r<e.graphemeLines.length;r++)"\n"===e.graphemeText[n]&&r>0?(A=0,n++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[n])&&r>0&&(A++,n++),i[r]={line:t,offset:A},n+=e.graphemeLines[r].length,A+=e.graphemeLines[r].length;return i},styleHas:function(e,A){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[A];n&&(A=n.line)}return t.Text.prototype.styleHas.call(this,e,A)},isEmptyStyles:function(e){if(!this.styles)return!0;var t,A,n=0,i=!1,r=this._styleMap[e],o=this._styleMap[e+1];for(var s in r&&(e=r.line,n=r.offset),o&&(i=o.line===e,t=o.offset),A=void 0===e?this.styles:{line:this.styles[e]})for(var a in A[s])if(a>=n&&(!i||a<t))for(var l in A[s][a])return!1;return!0},_getStyleDeclaration:function(e,t){if(this._styleMap&&!this.isWrapping){var A=this._styleMap[e];if(!A)return null;e=A.line,t=A.offset+t}return this.callSuper("_getStyleDeclaration",e,t)},_setStyleDeclaration:function(e,t,A){var n=this._styleMap[e];e=n.line,t=n.offset+t,this.styles[e][t]=A},_deleteStyleDeclaration:function(e,t){var A=this._styleMap[e];e=A.line,t=A.offset+t,delete this.styles[e][t]},_getLineStyle:function(e){var t=this._styleMap[e];return!!this.styles[t.line]},_setLineStyle:function(e){var t=this._styleMap[e];this.styles[t.line]={}},_wrapText:function(e,t){var A,n=[];for(this.isWrapping=!0,A=0;A<e.length;A++)n=n.concat(this._wrapLine(e[A],A,t));return this.isWrapping=!1,n},_measureWord:function(e,t,A){var n,i=0;A=A||0;for(var r=0,o=e.length;r<o;r++){i+=this._getGraphemeBox(e[r],t,r+A,n,true).kernedWidth,n=e[r]}return i},_wrapLine:function(e,A,n,i){var r=0,o=this.splitByGrapheme,s=[],a=[],l=o?t.util.string.graphemeSplit(e):e.split(this._wordJoiners),c="",u=0,h=o?"":" ",d=0,f=0,g=0,p=!0,v=this._getWidthOfCharSpacing();i=i||0;0===l.length&&l.push([]),n-=i;for(var m=0;m<l.length;m++)c=o?l[m]:t.util.string.graphemeSplit(l[m]),d=this._measureWord(c,A,u),u+=c.length,(r+=f+d-v)>n&&!p?(s.push(a),a=[],r=d,p=!0):r+=v,p||o||a.push(h),a=a.concat(c),f=o?0:this._measureWord([h],A,u),u++,p=!1,d>g&&(g=d);return m&&s.push(a),g+i>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+i),s},isEndOfWrapping:function(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line},missingNewlineOffset:function(e){return this.splitByGrapheme?this.isEndOfWrapping(e)?1:0:1},_splitTextIntoLines:function(e){for(var A=t.Text.prototype._splitTextIntoLines.call(this,e),n=this._wrapText(A.lines,this.width),i=new Array(n.length),r=0;r<n.length;r++)i[r]=n[r].join("");return A.lines=i,A.graphemeLines=n,A},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var e={};for(var t in this._styleMap)this._textLines[t]&&(e[this._styleMap[t].line]=1);for(var t in this.styles)e[t]||delete this.styles[t]},toObject:function(e){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(e))}}),t.Textbox.fromObject=function(e,A){var n=t.util.stylesFromArray(e.styles,e.text),i=Object.assign({},e,{styles:n});return t.Object._fromObject("Textbox",i,A,"text")}}(e),function(){var e=w.controlsUtils,t=e.scaleSkewCursorStyleHandler,A=e.scaleCursorStyleHandler,n=e.scalingEqually,i=e.scalingYOrSkewingX,r=e.scalingXOrSkewingY,o=e.scaleOrSkewActionName,s=w.Object.prototype.controls;if(s.ml=new w.Control({x:-.5,y:0,cursorStyleHandler:t,actionHandler:r,getActionName:o}),s.mr=new w.Control({x:.5,y:0,cursorStyleHandler:t,actionHandler:r,getActionName:o}),s.mb=new w.Control({x:0,y:.5,cursorStyleHandler:t,actionHandler:i,getActionName:o}),s.mt=new w.Control({x:0,y:-.5,cursorStyleHandler:t,actionHandler:i,getActionName:o}),s.tl=new w.Control({x:-.5,y:-.5,cursorStyleHandler:A,actionHandler:n}),s.tr=new w.Control({x:.5,y:-.5,cursorStyleHandler:A,actionHandler:n}),s.bl=new w.Control({x:-.5,y:.5,cursorStyleHandler:A,actionHandler:n}),s.br=new w.Control({x:.5,y:.5,cursorStyleHandler:A,actionHandler:n}),s.mtr=new w.Control({x:0,y:-.5,actionHandler:e.rotationWithSnapping,cursorStyleHandler:e.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),w.Textbox){var a=w.Textbox.prototype.controls={};a.mtr=s.mtr,a.tr=s.tr,a.br=s.br,a.tl=s.tl,a.bl=s.bl,a.mt=s.mt,a.mb=s.mb,a.mr=new w.Control({x:.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"}),a.ml=new w.Control({x:-.5,y:0,actionHandler:e.changeWidth,cursorStyleHandler:t,actionName:"resizing"})}}()}(wv);var bv,xv={exports:{}},Qv="object"==typeof Reflect?Reflect:null,Ev=Qv&&"function"==typeof Qv.apply?Qv.apply:function(e,t,A){return Function.prototype.apply.call(e,t,A)};bv=Qv&&"function"==typeof Qv.ownKeys?Qv.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Iv=Number.isNaN||function(e){return e!=e};function _v(){_v.init.call(this)}xv.exports=_v,xv.exports.once=function(e,t){return new Promise((function(A,n){function i(A){e.removeListener(t,r),n(A)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",i),A([].slice.call(arguments))}Hv(e,t,r,{once:!0}),"error"!==t&&function(e,t,A){"function"==typeof e.on&&Hv(e,"error",t,A)}(e,i,{once:!0})}))},_v.EventEmitter=_v,_v.prototype._events=void 0,_v.prototype._eventsCount=0,_v.prototype._maxListeners=void 0;var Sv=10;function Fv(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function kv(e){return void 0===e._maxListeners?_v.defaultMaxListeners:e._maxListeners}function Uv(e,t,A,n){var i,r,o;if(Fv(A),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,A.listener?A.listener:A),r=e._events),o=r[t]),void 0===o)o=r[t]=A,++e._eventsCount;else if("function"==typeof o?o=r[t]=n?[A,o]:[o,A]:n?o.unshift(A):o.push(A),(i=kv(e))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,console&&console.warn}return e}function Ov(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Dv(e,t,A){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:A},i=Ov.bind(n);return i.listener=A,n.wrapFn=i,i}function Tv(e,t,A){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?A?[i.listener||i]:[i]:A?function(e){for(var t=new Array(e.length),A=0;A<t.length;++A)t[A]=e[A].listener||e[A];return t}(i):Lv(i,i.length)}function Mv(e){var t=this._events;if(void 0!==t){var A=t[e];if("function"==typeof A)return 1;if(void 0!==A)return A.length}return 0}function Lv(e,t){for(var A=new Array(t),n=0;n<t;++n)A[n]=e[n];return A}function Hv(e,t,A,n){if("function"==typeof e.on)n.once?e.once(t,A):e.on(t,A);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(r){n.once&&e.removeEventListener(t,i),A(r)}))}}Object.defineProperty(_v,"defaultMaxListeners",{enumerable:!0,get:function(){return Sv},set:function(e){if("number"!=typeof e||e<0||Iv(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Sv=e}}),_v.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_v.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Iv(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},_v.prototype.getMaxListeners=function(){return kv(this)},_v.prototype.emit=function(e){for(var t=[],A=1;A<arguments.length;A++)t.push(arguments[A]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)Ev(s,this,t);else{var a=s.length,l=Lv(s,a);for(A=0;A<a;++A)Ev(l[A],this,t)}return!0},_v.prototype.addListener=function(e,t){return Uv(this,e,t,!1)},_v.prototype.on=_v.prototype.addListener,_v.prototype.prependListener=function(e,t){return Uv(this,e,t,!0)},_v.prototype.once=function(e,t){return Fv(t),this.on(e,Dv(this,e,t)),this},_v.prototype.prependOnceListener=function(e,t){return Fv(t),this.prependListener(e,Dv(this,e,t)),this},_v.prototype.removeListener=function(e,t){var A,n,i,r,o;if(Fv(t),void 0===(n=this._events))return this;if(void 0===(A=n[e]))return this;if(A===t||A.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,A.listener||t));else if("function"!=typeof A){for(i=-1,r=A.length-1;r>=0;r--)if(A[r]===t||A[r].listener===t){o=A[r].listener,i=r;break}if(i<0)return this;0===i?A.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(A,i),1===A.length&&(n[e]=A[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},_v.prototype.off=_v.prototype.removeListener,_v.prototype.removeAllListeners=function(e){var t,A,n;if(void 0===(A=this._events))return this;if(void 0===A.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==A[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete A[e]),this;if(0===arguments.length){var i,r=Object.keys(A);for(n=0;n<r.length;++n)"removeListener"!==(i=r[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=A[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},_v.prototype.listeners=function(e){return Tv(this,e,!0)},_v.prototype.rawListeners=function(e){return Tv(this,e,!1)},_v.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Mv.call(e,t)},_v.prototype.listenerCount=Mv,_v.prototype.eventNames=function(){return this._eventsCount>0?bv(this._events):[]};const Pv=bn(xv.exports),Rv="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Nv(e,t,A,n){e.addEventListener?e.addEventListener(t,A,n):e.attachEvent&&e.attachEvent("on".concat(t),A)}function jv(e,t,A,n){e.removeEventListener?e.removeEventListener(t,A,n):e.detachEvent&&e.detachEvent("on".concat(t),A)}function Vv(e,t){const A=t.slice(0,t.length-1);for(let n=0;n<A.length;n++)A[n]=e[A[n].toLowerCase()];return A}function Kv(e){"string"!=typeof e&&(e="");const t=(e=e.replace(/\s/g,"")).split(",");let A=t.lastIndexOf("");for(;A>=0;)t[A-1]+=",",t.splice(A,1),A=t.lastIndexOf("");return t}const Gv={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":Rv?173:189,"=":Rv?61:187,";":Rv?59:186,"'":222,"[":219,"]":221,"\\":220},Yv={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},Xv={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},zv={16:!1,18:!1,17:!1,91:!1},Wv={};for(let zG=1;zG<20;zG++)Gv["f".concat(zG)]=111+zG;let $v=[],Jv=null,qv="all";const Zv=new Map,em=e=>Gv[e.toLowerCase()]||Yv[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function tm(e){qv=e||"all"}function Am(){return qv||"all"}function nm(e){if(void 0===e)Object.keys(Wv).forEach((e=>{Array.isArray(Wv[e])&&Wv[e].forEach((e=>im(e))),delete Wv[e]})),am(null);else if(Array.isArray(e))e.forEach((e=>{e.key&&im(e)}));else if("object"==typeof e)e.key&&im(e);else if("string"==typeof e){for(var t=arguments.length,A=new Array(t>1?t-1:0),n=1;n<t;n++)A[n-1]=arguments[n];let[i,r]=A;"function"==typeof i&&(r=i,i=""),im({key:e,scope:i,method:r,splitKey:"+"})}}const im=e=>{let{key:t,scope:A,method:n,splitKey:i="+"}=e;Kv(t).forEach((e=>{const t=e.split(i),r=t.length,o=t[r-1],s="*"===o?"*":em(o);if(!Wv[s])return;A||(A=Am());const a=r>1?Vv(Yv,t):[],l=[];Wv[s]=Wv[s].filter((e=>{const t=(!n||e.method===n)&&e.scope===A&&function(e,t){const A=e.length>=t.length?e:t,n=e.length>=t.length?t:e;let i=!0;for(let r=0;r<A.length;r++)-1===n.indexOf(A[r])&&(i=!1);return i}(e.mods,a);return t&&l.push(e.element),!t})),l.forEach((e=>am(e)))}))};function rm(e,t,A,n){if(t.element!==n)return;let i;if(t.scope===A||"all"===t.scope){i=t.mods.length>0;for(const e in zv)Object.prototype.hasOwnProperty.call(zv,e)&&(!zv[e]&&t.mods.indexOf(+e)>-1||zv[e]&&-1===t.mods.indexOf(+e))&&(i=!1);(0!==t.mods.length||zv[16]||zv[18]||zv[17]||zv[91])&&!i&&"*"!==t.shortcut||(t.keys=[],t.keys=t.keys.concat($v),!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function om(e,t){const A=Wv["*"];let n=e.keyCode||e.which||e.charCode;if(!sm.filter.call(this,e))return;if(93!==n&&224!==n||(n=91),-1===$v.indexOf(n)&&229!==n&&$v.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((t=>{const A=Xv[t];e[t]&&-1===$v.indexOf(A)?$v.push(A):!e[t]&&$v.indexOf(A)>-1?$v.splice($v.indexOf(A),1):"metaKey"===t&&e[t]&&3===$v.length&&(e.ctrlKey||e.shiftKey||e.altKey||($v=$v.slice($v.indexOf(A))))})),n in zv){zv[n]=!0;for(const e in Yv)Yv[e]===n&&(sm[e]=!0);if(!A)return}for(const s in zv)Object.prototype.hasOwnProperty.call(zv,s)&&(zv[s]=e[Xv[s]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===$v.indexOf(17)&&$v.push(17),-1===$v.indexOf(18)&&$v.push(18),zv[17]=!0,zv[18]=!0);const i=Am();if(A)for(let s=0;s<A.length;s++)A[s].scope===i&&("keydown"===e.type&&A[s].keydown||"keyup"===e.type&&A[s].keyup)&&rm(e,A[s],i,t);if(!(n in Wv))return;const r=Wv[n],o=r.length;for(let s=0;s<o;s++)if(("keydown"===e.type&&r[s].keydown||"keyup"===e.type&&r[s].keyup)&&r[s].key){const A=r[s],{splitKey:n}=A,o=A.key.split(n),a=[];for(let e=0;e<o.length;e++)a.push(em(o[e]));a.sort().join("")===$v.sort().join("")&&rm(e,A,i,t)}}function sm(e,t,A){$v=[];const n=Kv(e);let i=[],r="all",o=document,s=0,a=!1,l=!0,c="+",u=!1,h=!1;for(void 0===A&&"function"==typeof t&&(A=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(r=t.scope),t.element&&(o=t.element),t.keyup&&(a=t.keyup),void 0!==t.keydown&&(l=t.keydown),void 0!==t.capture&&(u=t.capture),"string"==typeof t.splitKey&&(c=t.splitKey),!0===t.single&&(h=!0)),"string"==typeof t&&(r=t),h&&nm(e,r);s<n.length;s++)i=[],(e=n[s].split(c)).length>1&&(i=Vv(Yv,e)),(e="*"===(e=e[e.length-1])?"*":em(e))in Wv||(Wv[e]=[]),Wv[e].push({keyup:a,keydown:l,scope:r,mods:i,shortcut:n[s],method:A,key:n[s],splitKey:c,element:o});if(void 0!==o&&window){if(!Zv.has(o)){const e=function(){return om(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event,o)},t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.event;om(e,o),function(e){let t=e.keyCode||e.which||e.charCode;const A=$v.indexOf(t);if(A>=0&&$v.splice(A,1),e.key&&"meta"===e.key.toLowerCase()&&$v.splice(0,$v.length),93!==t&&224!==t||(t=91),t in zv){zv[t]=!1;for(const e in Yv)Yv[e]===t&&(sm[e]=!1)}}(e)};Zv.set(o,{keydownListener:e,keyupListenr:t,capture:u}),Nv(o,"keydown",e,u),Nv(o,"keyup",t,u)}if(!Jv){const e=()=>{$v=[]};Jv={listener:e,capture:u},Nv(window,"focus",e,u)}}}function am(e){const t=Object.values(Wv).flat();if(t.findIndex((t=>{let{element:A}=t;return A===e}))<0){const{keydownListener:t,keyupListenr:A,capture:n}=Zv.get(e)||{};t&&A&&(jv(e,"keyup",A,n),jv(e,"keydown",t,n),Zv.delete(e))}if(t.length<=0||Zv.size<=0){if(Object.keys(Zv).forEach((e=>{const{keydownListener:t,keyupListenr:A,capture:n}=Zv.get(e)||{};t&&A&&(jv(e,"keyup",A,n),jv(e,"keydown",t,n),Zv.delete(e))})),Zv.clear(),Object.keys(Wv).forEach((e=>delete Wv[e])),Jv){const{listener:e,capture:t}=Jv;jv(window,"focus",e,t),Jv=null}}}const lm={getPressedKeyString:function(){return $v.map((e=>{return t=e,Object.keys(Gv).find((e=>Gv[e]===t))||(e=>Object.keys(Yv).find((t=>Yv[t]===e)))(e)||String.fromCharCode(e);var t}))},setScope:tm,getScope:Am,deleteScope:function(e,t){let A,n;e||(e=Am());for(const i in Wv)if(Object.prototype.hasOwnProperty.call(Wv,i))for(A=Wv[i],n=0;n<A.length;)if(A[n].scope===e){A.splice(n,1).forEach((e=>{let{element:t}=e;return am(t)}))}else n++;Am()===e&&tm(t||"all")},getPressedKeyCodes:function(){return $v.slice(0)},getAllKeyCodes:function(){const e=[];return Object.keys(Wv).forEach((t=>{Wv[t].forEach((t=>{let{key:A,scope:n,mods:i,shortcut:r}=t;e.push({scope:n,shortcut:r,mods:i,keys:A.split("+").map((e=>em(e)))})}))})),e},isPressed:function(e){return"string"==typeof e&&(e=em(e)),-1!==$v.indexOf(e)},filter:function(e){const t=e.target||e.srcElement,{tagName:A}=t;let n=!0;const i="INPUT"===A&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(i||"TEXTAREA"===A||"SELECT"===A)&&!t.readOnly)&&(n=!1),n},trigger:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(Wv).forEach((A=>{Wv[A].filter((A=>A.scope===t&&A.shortcut===e)).forEach((e=>{e&&e.method&&e.method()}))}))},unbind:nm,keyMap:Gv,modifier:Yv,modifierMap:Xv};for(const zG in lm)Object.prototype.hasOwnProperty.call(lm,zG)&&(sm[zG]=lm[zG]);if("undefined"!=typeof window){const e=window.hotkeys;sm.noConflict=t=>(t&&window.hotkeys===sm&&(window.hotkeys=e),sm),window.hotkeys=sm}class cm{constructor(e,t){this.container=e,this.dom=null,this.shown=!1,this.root=!0,this.parent=null,this.submenus=[],this.items=t,this._onclick=e=>{!this.dom||e.target==this.dom||e.target.parentElement==this.dom||e.target.classList.contains("item")||e.target.parentElement.classList.contains("item")||this.hideAll()},this._oncontextmenu=e=>{e.preventDefault(),e.target==this.dom||e.target.parentElement==this.dom||e.target.classList.contains("item")||e.target.parentElement.classList.contains("item")||(this.hideAll(),this.show(e.clientX,e.clientY))},this._oncontextmenu_keydown=e=>{93==e.keyCode&&(e.preventDefault(),this.hideAll(),this.show(e.clientX,e.clientY))},this._onblur=()=>{this.hideAll()}}getMenuDom(){const e=document.createElement("div");e.classList.add("context");for(const t of this.items)e.appendChild(this.itemToDomEl(t));return e}itemToDomEl(e){const t=document.createElement("div");if(null===e)return t.classList="separator",t;e.hasOwnProperty("color")&&/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e.color.toString())&&(t.style.cssText=`color: ${e.color}`),t.classList.add("item");const A=document.createElement("span");A.classList="label",A.innerText=e.hasOwnProperty("text")?e.text.toString():"",t.appendChild(A),e.hasOwnProperty("disabled")&&e.disabled?t.classList.add("disabled"):t.classList.add("enabled");const n=document.createElement("span");if(n.classList="hotkey",n.innerText=e.hasOwnProperty("hotkey")?e.hotkey.toString():"",t.appendChild(n),e.hasOwnProperty("subitems")&&Array.isArray(e.subitems)&&e.subitems.length>0){const A=new cm(this.container,e.subitems);A.root=!1,A.parent=this;const n=()=>{if(e.hasOwnProperty("disabled")&&1==e.disabled)return;this.hideSubMenus();const n=this.dom.offsetLeft+this.dom.clientWidth+t.offsetLeft,i=this.dom.offsetTop+t.offsetTop;A.shown?A.hide():A.show(n,i)};this.submenus.push(A),t.classList.add("has-subitems"),t.addEventListener("click",n),t.addEventListener("mousemove",n)}else if(e.hasOwnProperty("submenu")&&e.submenu instanceof cm){const A=e.submenu;A.root=!1,A.parent=this;const n=()=>{if(e.hasOwnProperty("disabled")&&1==e.disabled)return;this.hideSubMenus();const n=this.dom.offsetLeft+this.dom.clientWidth+t.offsetLeft,i=this.dom.offsetTop+t.offsetTop;A.shown?A.hide():A.show(n,i)};this.submenus.push(A),t.classList.add("has-subitems"),t.addEventListener("click",n),t.addEventListener("mousemove",n)}else t.addEventListener("click",(()=>{if(this.hideSubMenus(),!t.classList.contains("disabled"))if(e.hasOwnProperty("onclick")&&"function"==typeof e.onclick){const i={handled:!1,item:t,label:A,hotkey:n,items:this.items,data:e};e.onclick(i),i.handled||this.hide()}else this.hide()})),t.addEventListener("mousemove",(()=>{this.hideSubMenus()}));return t}hideAll(){!this.root||this.parent?this.parent.hide():this.shown&&(this.hideSubMenus(),this.shown=!1,this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hide(){this.dom&&this.shown&&(this.shown=!1,this.hideSubMenus(),this.container.removeChild(this.dom),this.parent&&this.parent.shown&&this.parent.hide())}hideSubMenus(){for(const e of this.submenus)e.shown&&(e.shown=!1,e.container.removeChild(e.dom)),e.hideSubMenus()}show(e,t){this.dom=this.getMenuDom(),this.dom.style.left=`${e}px`,this.dom.style.top=`${t}px`,this.shown=!0,this.container.appendChild(this.dom)}install(){this.container.addEventListener("contextmenu",this._oncontextmenu),this.container.addEventListener("keydown",this._oncontextmenu_keydown),this.container.addEventListener("click",this._onclick),window.addEventListener("blur",this._onblur)}setData(e){this.items=e}uninstall(){this.dom=null,this.container.removeEventListener("keydown",this._oncontextmenu_keydown),this.container.removeEventListener("click",this._onclick),window.removeEventListener("blur",this._onblur)}}for(var um,hm=[],dm=0;dm<256;++dm)hm.push((dm+256).toString(16).slice(1));var fm=new Uint8Array(16);function gm(){if(!um&&!(um="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return um(fm)}const pm={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function vm(e,t,A){if(pm.randomUUID&&!t&&!e)return pm.randomUUID();var n=(e=e||{}).random||(e.rng||gm)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){A=A||0;for(var i=0;i<16;++i)t[A+i]=n[i];return t}return function(e,t=0){return(hm[e[t+0]]+hm[e[t+1]]+hm[e[t+2]]+hm[e[t+3]]+"-"+hm[e[t+4]]+hm[e[t+5]]+"-"+hm[e[t+6]]+hm[e[t+7]]+"-"+hm[e[t+8]]+hm[e[t+9]]+"-"+hm[e[t+10]]+hm[e[t+11]]+hm[e[t+12]]+hm[e[t+13]]+hm[e[t+14]]+hm[e[t+15]]).toLowerCase()}(n)}var mm=(e=>(e.EMPTY="",e.ONE="one",e.MULTI="multiple",e))(mm||{}),Bm=(e=>(e.ONE="selectOne",e.MULTI="selectMultiple",e.CANCEL="selectCancel",e))(Bm||{});const ym={SelectMode:mm,SelectEvent:Bm};function Cm(e){return!!fi()&&(gi(e),!0)}function wm(e){return"function"==typeof e?e():fn(e)}const bm="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const xm=Object.prototype.toString,Qm=()=>{};function Em(e,t=!0,A){Cn()?ln(e,A):t?e():_n(e)}function Im(e){var t;const A=wm(e);return null!=(t=null==A?void 0:A.$el)?t:A}const _m=bm?window:void 0,Sm=bm?window.document:void 0,Fm=bm?window.navigator:void 0;function km(...e){let t,A,n,i;if("string"==typeof e[0]||Array.isArray(e[0])?([A,n,i]=e,t=_m):[t,A,n,i]=e,!t)return Qm;Array.isArray(A)||(A=[A]),Array.isArray(n)||(n=[n]);const r=[],o=()=>{r.forEach((e=>e())),r.length=0},s=In((()=>[Im(t),wm(i)]),(([e,t])=>{if(o(),!e)return;const i=(s=t,"[object Object]"===xm.call(s)?a({},t):t);var s;r.push(...A.flatMap((t=>n.map((A=>((e,t,A,n)=>(e.addEventListener(t,A,n),()=>e.removeEventListener(t,A,n)))(e,t,A,i))))))}),{immediate:!0,flush:"post"}),l=()=>{s(),o()};return Cm(l),l}function Um(e){const t=function(){const e=sn(!1),t=Cn();return t&&ln((()=>{e.value=!0}),t),e}();return En((()=>(t.value,Boolean(e()))))}const Om=e=>JSON.stringify(e),Dm=e=>JSON.stringify(e),Tm=e=>JSON.stringify(Array.from(e)),Mm=e=>JSON.stringify(Object.fromEntries(e)),Lm=()=>"";function Hm(e,t){const A=sn(""),n=sn();function i(){if(bm)return n.value=new Promise(((A,n)=>{try{const i=wm(e);if(null==i)A("");else if("string"==typeof i)A(Pm(new Blob([i],{type:"text/plain"})));else if(i instanceof Blob)A(Pm(i));else if(i instanceof ArrayBuffer)A(window.btoa(String.fromCharCode(...new Uint8Array(i))));else if(i instanceof HTMLCanvasElement)A(i.toDataURL(null==t?void 0:t.type,null==t?void 0:t.quality));else if(i instanceof HTMLImageElement){const e=i.cloneNode(!1);e.crossOrigin="Anonymous",function(e){return new Promise(((t,A)=>{e.complete?t():(e.onload=()=>{t()},e.onerror=A)}))}(e).then((()=>{const n=document.createElement("canvas"),i=n.getContext("2d");n.width=e.width,n.height=e.height,i.drawImage(e,0,0,n.width,n.height),A(n.toDataURL(null==t?void 0:t.type,null==t?void 0:t.quality))})).catch(n)}else{if("object"==typeof i){const e=(null==t?void 0:t.serializer)||function(e){return e?e instanceof Map?Mm:e instanceof Set?Tm:Array.isArray(e)?Om:Dm:Lm}(i),n=e(i);return A(Pm(new Blob([n],{type:"application/json"})))}n(new Error("target is unsupported types"))}}catch(i){n(i)}})),n.value.then((e=>A.value=e)),n.value}return Dn(e)||"function"==typeof e?In(e,i,{immediate:!0}):i(),{base64:A,promise:n,execute:i}}function Pm(e){return new Promise(((t,A)=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.onerror=A,n.readAsDataURL(e)}))}function Rm(e,t={}){const{controls:A=!1,navigator:n=Fm}=t,i=Um((()=>n&&"permissions"in n));let r;const o="string"==typeof e?{name:e}:e,s=sn(),a=()=>{r&&(s.value=r.state)},l=function(e){let t;function A(){return t||(t=e()),t}return A.reset=()=>u(this,null,(function*(){const e=t;t=void 0,e&&(yield e)})),A}((()=>u(this,null,(function*(){if(i.value){if(!r)try{r=yield n.permissions.query(o),km(r,"change",a),a()}catch(e){s.value="prompt"}return r}}))));return l(),A?{state:s,isSupported:i,query:l}:s}function Nm(e={}){const{navigator:t=Fm,read:A=!1,source:n,copiedDuring:i=1500,legacy:r=!1}=e,o=Um((()=>t&&"clipboard"in t)),s=Rm("clipboard-read"),a=Rm("clipboard-write"),l=En((()=>o.value||r)),c=sn(""),h=sn(!1),d=function(e,t,A={}){const{immediate:n=!0}=A,i=sn(!1);let r=null;function o(){r&&(clearTimeout(r),r=null)}function s(){i.value=!1,o()}function a(...A){o(),i.value=!0,r=setTimeout((()=>{i.value=!1,r=null,e(...A)}),wm(t))}return n&&(i.value=!0,bm&&a()),Cm(s),{isPending:di(i),start:a,stop:s}}((()=>h.value=!1),i);function f(e){return"granted"===e||"prompt"===e}return l.value&&A&&km(["copy","cut"],(function(){var e,A,n;o.value&&f(s.value)?t.clipboard.readText().then((e=>{c.value=e})):c.value=null!=(n=null==(A=null==(e=null==document?void 0:document.getSelection)?void 0:e.call(document))?void 0:A.toString())?n:""})),{isSupported:l,text:c,copied:h,copy:function(){return u(this,arguments,(function*(e=wm(n)){l.value&&null!=e&&(o.value&&f(a.value)?yield t.clipboard.writeText(e):function(e){const t=document.createElement("textarea");t.value=null!=e?e:"",t.style.position="absolute",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}(e),c.value=e,h.value=!0,d.start())}))}}}const jm={multiple:!0,accept:"*",reset:!1,directory:!1};function Vm(e={}){const{document:t=Sm}=e,A=sn(null),{on:n,trigger:i}=function(){const e=new Set,t=t=>{e.delete(t)};return{on:A=>{e.add(A);const n=()=>t(A);return Cm(n),{off:n}},off:t,trigger:(...t)=>Promise.all(Array.from(e).map((e=>e(...t))))}}();let r;t&&(r=t.createElement("input"),r.type="file",r.onchange=e=>{const t=e.target;A.value=t.files,i(A.value)});const o=()=>{A.value=null,r&&r.value&&(r.value="",i(null))};return{files:di(A),open:t=>{if(!r)return;const A=a(a(a({},jm),e),t);var n,i;r.multiple=A.multiple,r.accept=A.accept,r.webkitdirectory=A.directory,n=A,i="capture",Object.prototype.hasOwnProperty.call(n,i)&&(r.capture=A.capture),A.reset&&o(),r.click()},reset:o,onChange:n}}function Km(e,t={}){const A=function(...e){if(1!==e.length)return pi(...e);const t=e[0];return"function"==typeof t?di(vi((()=>({get:t,set:Qm})))):sn(t)}(e),{threshold:n=50,onSwipe:i,onSwipeEnd:r,onSwipeStart:o,disableTextSelect:s=!1}=t,a=Vn({x:0,y:0}),l=Vn({x:0,y:0}),c=(e,t)=>{l.x=e,l.y=t},u=En((()=>a.x-l.x)),h=En((()=>a.y-l.y)),{max:d,abs:f}=Math,g=En((()=>d(f(u.value),f(h.value))>=n)),p=sn(!1),v=sn(!1),m=En((()=>g.value?f(u.value)>f(h.value)?u.value>0?"left":"right":h.value>0?"up":"down":"none")),B=e=>{var A,n,i;const r=0===e.buttons,o=1===e.buttons;return null==(i=null!=(n=null==(A=t.pointerTypes)?void 0:A.includes(e.pointerType))?n:r||o)||i},y=[km(e,"pointerdown",(e=>{if(!B(e))return;v.value=!0;const t=e.target;null==t||t.setPointerCapture(e.pointerId);const{clientX:A,clientY:n}=e;((e,t)=>{a.x=e,a.y=t})(A,n),c(A,n),null==o||o(e)})),km(e,"pointermove",(e=>{if(!B(e))return;if(!v.value)return;const{clientX:t,clientY:A}=e;c(t,A),!p.value&&g.value&&(p.value=!0),p.value&&(null==i||i(e))})),km(e,"pointerup",(e=>{B(e)&&(p.value&&(null==r||r(e,m.value)),v.value=!1,p.value=!1)}))];Em((()=>{var e,t,n,i,r,o,a,l;null==(t=null==(e=A.value)?void 0:e.style)||t.setProperty("touch-action","none"),s&&(null==(i=null==(n=A.value)?void 0:n.style)||i.setProperty("-webkit-user-select","none"),null==(o=null==(r=A.value)?void 0:r.style)||o.setProperty("-ms-user-select","none"),null==(l=null==(a=A.value)?void 0:a.style)||l.setProperty("user-select","none"))}));return{isSwiping:di(p),direction:di(m),posStart:di(a),posEnd:di(l),distanceX:u,distanceY:h,stop:()=>y.forEach((e=>e()))}}function Gm(e){return Hm(e).promise.value}function Ym(e){return new Promise((t=>{const{onChange:A,open:n}=Vm(e);A((e=>{t(e)})),n()}))}const Xm=(e,t)=>Nm(a({source:e},t)).copy();function zm(e,t){const A=document.createElement("a");A.href=e,A.download=`${vm()}.${t}`,document.body.appendChild(A),A.click(),A.remove()}function Wm(e,t,A,n,i,r,o){void 0!==o&&(e.save(),e.translate(t,A),e.rotate(o),e.drawImage(n,-i/2,-r/2,i,r),e.restore())}const $m=e=>e instanceof fabric.Group,Jm=e=>e instanceof fabric.ActiveSelection;function qm(e){return new Promise((t=>{const A=new FileReader;A.addEventListener("load",(()=>{t(A.result)})),A.readAsDataURL(e)}))}const Zm={getImgStr:Gm,downFile:zm,selectFiles:Ym,insertImgFile:function(e){return new Promise((t=>{const A=document.createElement("img");A.src=e,document.body.appendChild(A),A.onload=()=>{t(A)}}))},clipboardText:Xm,drawImg:Wm,isImage:e=>e instanceof fabric.Image,isGroup:$m,isIText:e=>e instanceof fabric.IText,isActiveSelection:Jm,blobToBase64:qm,base64ToBlob:function(e){var t;if(!e)return null;const A=e.split(","),n=null==(t=A[0])?void 0:t.match(/:(.*?);/)[1],i=window.atob(A[1]),r=new ArrayBuffer(i.length),o=new Uint8Array(r);for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return[new Blob([r],{type:n}),n.slice(6)]}};var eB=(e=>(e.create="CGRATE",e.template="TEMPLATE",e.text="TEXT",e.material="Material",e.ai="AI",e.mine="MINE",e.none="",e))(eB||{}),tB=(e=>(e.canvas="CANVASLIST",e.layer="LAYER",e.menu="MENU",e))(tB||{}),AB=(e=>(e.h1="TEXT-H1,",e.h2="TEXT-H2",e.normal="TEXT-NORMAL",e))(AB||{}),nB=(e=>(e.react="REACT",e.triangle="Triangle",e.around="Around",e.polygon="Polygon",e.line="LINE",e))(nB||{}),iB=(e=>(e.qrcode="QRCODE",e.barCode="BARCODE",e))(iB||{}),rB=(e=>(e.design="DESIGN",e.img="IMAGE",e.json="JSON",e.svg="SVG",e.psd="PSD",e))(rB||{}),oB=(e=>(e.line="Line",e.arrow="Arrow",e.thinTailArrow="ThinTailArrow",e.polygon="Polygon",e.freeDraw="FreeDraw",e))(oB||{});const sB=Bi({id:"editor",state:()=>({editor:null,canvas:null,zoom:1,rulerEnable:!0,tabType:eB.template,panelType:tB.menu,showPanel:!0,panelPositoin:"left"}),actions:{setEditor(e){this.editor=e},setCanvas(e){this.canvas=e},setScale(e){this.zoom=e},updateRulerEnable(e){this.rulerEnable=e},setTabType(e){this.tabType=e},setPanelType(e){this.panelType=e},setShowPanel(e){this.showPanel=e},setPanelPositoin(e){this.panelPositoin=e}}});function aB(){return sB(mi)}const lB=aB(),cB=Bi({id:"Template",state:()=>({templateList:[],curTempIdx:-1}),getters:{curTemplate:e=>e.templateList[e.curTempIdx]},actions:{setTemplateIndex(e){this.curTempIdx=e},addTemplate(e){const t=Array.isArray(e)?e:[e],A=this.curTempIdx+1;this.curTempIdx=A,this.templateList=this.templateList.concat(t),this.renderTemplate()},renderTemplate(){return u(this,null,(function*(){lB.canvas}))},updateTemplate(e){const t=this.curTempIdx;this.templateList[t]=a(a({},this.templateList[t]),e)},setTemplatePreview(e){return u(this,null,(function*(){Kt(e)||(e=`${window.location.origin}/${e}`);const t=yield Gt(e);t&&(this.templateList[this.curTempIdx].preview=t)}))},deleteTemplate(e){const t=this.templateList.length;if(1==t)return Yt.warning("删除失败，至少要有一个模板");if(this.templateList.splice(e,1),t>e){const e=this.curTempIdx-1;this.curTempIdx=e<=0?0:e}this.renderTemplate()},clearTemplate(){const e=this.templateList[this.curTempIdx].objects.filter((e=>"workspace"===e.id));this.templateList[this.curTempIdx].objects=e,this.renderTemplate()}}});const uB=cB(mi);function hB(e){e&&e.forEach((e=>{e.objects?hB(e.objects):"text"===e.type&&(e.type="textbox")}))}class dB{constructor(e,t){c(this,"canvas"),c(this,"editor"),c(this,"selectedMode"),this.canvas=e,this.editor=t,this.selectedMode=mm.EMPTY,this._initSelectEvent()}_initSelectEvent(){this.canvas.on("selection:created",(()=>this._emitSelectEvent())),this.canvas.on("selection:updated",(()=>this._emitSelectEvent())),this.canvas.on("selection:cleared",(()=>this._emitSelectEvent()))}_emitSelectEvent(){if(!this.canvas)throw TypeError("还未初始化");const e=this.canvas.getActiveObjects().filter((e=>!(e instanceof wv.fabric.GuideLine)));e&&1===e.length?(this.selectedMode=mm.ONE,this.editor.emit(Bm.ONE,e)):e&&e.length>1?(this.selectedMode=mm.MULTI,this.editor.emit(Bm.MULTI,e)):this.editor.emit(Bm.CANCEL)}getSelectMode(){return String(this.selectedMode)}insert(e){Ym({accept:".json"}).then((t=>{if(t&&t.length>0){const A=t[0],n=new FileReader;n.readAsText(A,"UTF-8"),n.onload=()=>{this.loadJSON(n.result,e)}}}))}renderITextPath(e){e.forEach((e=>{const t=this.canvas.getObjects().find((t=>t.id===e.id));t&&wv.fabric.Path.fromObject(e.path,(e=>{t.set("path",e)}))}))}loadJSON(e,t){return u(this,null,(function*(){const A="string"==typeof e?JSON.parse(e):e,n=[];A.objects.forEach((e=>{!e.id&&(e.id=vm()),"i-text"===e.type&&e.path&&(n.push({id:e.id,path:e.path}),e.path=null)}));const i=yield this._transform(A);e=JSON.stringify(i),this.editor.hooksEntity.hookImportBefore.callAsync(e,(()=>{this.canvas.loadFromJSON(e,(()=>{this.renderITextPath(n),this.editor.hooksEntity.hookImportAfter.callAsync(e,(()=>{var n;(null==(n=this.editor)?void 0:n.updateDrawStatus)&&"function"==typeof this.editor.updateDrawStatus&&this.editor.updateDrawStatus(!!A.overlayImage),this.canvas.renderAll();const i=JSON.parse(e);this.canvas.toCanvasElement(1).toBlob((e=>{e&&(i.image=URL.createObjectURL(e)),uB.addTemplate(i)})),this.editor.emit("loadJson"),t&&t()}))}))}))}))}_transform(e){return u(this,null,(function*(){if(yield this.promiseCallAsync(e),e.objects){const t=e.objects.map((e=>this._transform(e)));yield Promise.all(t)}return e}))}promiseCallAsync(e){return new Promise((t=>{this.editor.hooksEntity.hookTransform.callAsync(e,(()=>{t(e)}))}))}getJson(){const e=this.getExtensionKey();return this.canvas.toJSON(e)}getExtensionKey(){return["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension","verticalAlign"]}dragAddItem(e,t){if(t){const{left:A,top:n}=this.canvas.getSelectionElement().getBoundingClientRect();if(t.x<A||t.y<n||void 0===e.width)return;const i={x:t.x-A,y:t.y-n},r=this.canvas.restorePointerVpt(i);e.left=r.x-e.width/2,e.top=r.y}const{width:A}=this._getSaveOption();A&&e.scaleToWidth(A/2),this.canvas.add(e),this.canvas.setActiveObject(e),!t&&this.editor.position("center"),this.canvas.requestRenderAll()}clipboard(){const e=this.getJson();return Xm(JSON.stringify(e,null,"\t"))}clipboardBase64(){return u(this,null,(function*(){const e=yield this.preview();return Xm(e)}))}saveJson(){return u(this,null,(function*(){const e=this.getJson();yield hB(e.objects);zm(`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e,null,"\t"))}`,"json")}))}saveSvg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",(()=>{const{fontOption:e,svgOption:t}=this._getSaveSvgOption();wv.fabric.fontPaths=a({},e);const A=this.canvas.toSVG(t),n=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(A)}`;this.editor.hooksEntity.hookSaveAfter.callAsync(n,(()=>{zm(n,"svg")}))}))}saveImg(){this.editor.hooksEntity.hookSaveBefore.callAsync("",(()=>{const e=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]);const t=this.canvas.toDataURL(e);this.editor.hooksEntity.hookSaveAfter.callAsync(t,(()=>{zm(t,"png")}))}))}preview(){return new Promise((e=>{this.editor.hooksEntity.hookSaveBefore.callAsync("",(()=>{const t=this._getSaveOption();this.canvas.setViewportTransform([1,0,0,1,0,0]),this.canvas.renderAll();const A=this.canvas.toDataURL(t);this.editor.hooksEntity.hookSaveAfter.callAsync(A,(()=>{e(A)}))}))}))}_getSaveSvgOption(){const e=this.canvas.getObjects().find((e=>"workspace"===e.id));let t=this.canvas.getObjects().filter((e=>"textbox"==e.type)).map((e=>e.fontFamily));t=Array.from(new Set(t));const A=this.editor.getPlugin("FontPlugin").cacheList,n={};for(const a of t){const e=A.find((e=>e.name===a));n[a]=e.file}const{left:i,top:r,width:o,height:s}=e;return{fontOption:n,svgOption:{width:o,height:s,viewBox:{x:i,y:r,width:o,height:s}}}}_getSaveOption(){const e=this.canvas.getObjects().find((e=>"workspace"===e.id)),{left:t,top:A,width:n,height:i}=e;return{name:"New Image",format:"png",quality:1,width:n,height:i,left:t,top:A}}clear(){var e;this.canvas.getObjects().forEach((e=>{"workspace"!==e.id&&this.canvas.remove(e)})),null==(e=this.editor)||e.setWorkspaseBg("#fff"),this.canvas.discardActiveObject(),this.canvas.renderAll()}destroy(){}}c(dB,"pluginName","ServersPlugin"),c(dB,"apis",["insert","loadJSON","getJson","dragAddItem","clipboard","clipboardBase64","saveJson","saveSvg","saveImg","clear","preview","getSelectMode","getExtensionKey"]),c(dB,"events",[mm.ONE,mm.MULTI,Bm.CANCEL]);var fB={};fB.deprecate=(e,t)=>{let A=!0;return function(){return A&&(A=!1),e.apply(this,arguments)}};const gB=fB.deprecate((()=>{}),"Hook.context is deprecated and will be removed"),pB=function(...e){return this.call=this._createCall("sync"),this.call(...e)},vB=function(...e){return this.callAsync=this._createCall("async"),this.callAsync(...e)},mB=function(...e){return this.promise=this._createCall("promise"),this.promise(...e)};let BB=class{constructor(e=[],t=void 0){this._args=e,this.name=t,this.taps=[],this.interceptors=[],this._call=pB,this.call=pB,this._callAsync=vB,this.callAsync=vB,this._promise=mB,this.promise=mB,this._x=void 0,this.compile=this.compile,this.tap=this.tap,this.tapAsync=this.tapAsync,this.tapPromise=this.tapPromise}compile(e){throw new Error("Abstract: should be overridden")}_createCall(e){return this.compile({taps:this.taps,interceptors:this.interceptors,args:this._args,type:e})}_tap(e,t,A){if("string"==typeof t)t={name:t.trim()};else if("object"!=typeof t||null===t)throw new Error("Invalid tap options");if("string"!=typeof t.name||""===t.name)throw new Error("Missing name for tap");void 0!==t.context&&gB(),t=Object.assign({type:e,fn:A},t),t=this._runRegisterInterceptors(t),this._insert(t)}tap(e,t){this._tap("sync",e,t)}tapAsync(e,t){this._tap("async",e,t)}tapPromise(e,t){this._tap("promise",e,t)}_runRegisterInterceptors(e){for(const t of this.interceptors)if(t.register){const A=t.register(e);void 0!==A&&(e=A)}return e}withOptions(e){const t=t=>Object.assign({},e,"string"==typeof t?{name:t}:t);return{name:this.name,tap:(e,A)=>this.tap(t(e),A),tapAsync:(e,A)=>this.tapAsync(t(e),A),tapPromise:(e,A)=>this.tapPromise(t(e),A),intercept:e=>this.intercept(e),isUsed:()=>this.isUsed(),withOptions:e=>this.withOptions(t(e))}}isUsed(){return this.taps.length>0||this.interceptors.length>0}intercept(e){if(this._resetCompilation(),this.interceptors.push(Object.assign({},e)),e.register)for(let t=0;t<this.taps.length;t++)this.taps[t]=e.register(this.taps[t])}_resetCompilation(){this.call=this._call,this.callAsync=this._callAsync,this.promise=this._promise}_insert(e){let t;this._resetCompilation(),"string"==typeof e.before?t=new Set([e.before]):Array.isArray(e.before)&&(t=new Set(e.before));let A=0;"number"==typeof e.stage&&(A=e.stage);let n=this.taps.length;for(;n>0;){n--;const e=this.taps[n];this.taps[n+1]=e;const i=e.stage||0;if(t){if(t.has(e.name)){t.delete(e.name);continue}if(t.size>0)continue}if(!(i>A)){n++;break}}this.taps[n]=e}};Object.setPrototypeOf(BB.prototype,null);var yB=BB;var CB=class{constructor(e){this.config=e,this.options=void 0,this._args=void 0}create(e){let t;switch(this.init(e),this.options.type){case"sync":t=new Function(this.args(),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:e=>`throw ${e};\n`,onResult:e=>`return ${e};\n`,resultReturns:!0,onDone:()=>"",rethrowIfPossible:!0}));break;case"async":t=new Function(this.args({after:"_callback"}),'"use strict";\n'+this.header()+this.contentWithInterceptors({onError:e=>`_callback(${e});\n`,onResult:e=>`_callback(null, ${e});\n`,onDone:()=>"_callback();\n"}));break;case"promise":let e=!1;const A=this.contentWithInterceptors({onError:t=>(e=!0,`_error(${t});\n`),onResult:e=>`_resolve(${e});\n`,onDone:()=>"_resolve();\n"});let n="";n+='"use strict";\n',n+=this.header(),n+="return new Promise((function(_resolve, _reject) {\n",e&&(n+="var _sync = true;\n",n+="function _error(_err) {\n",n+="if(_sync)\n",n+="_resolve(Promise.resolve().then((function() { throw _err; })));\n",n+="else\n",n+="_reject(_err);\n",n+="};\n"),n+=A,e&&(n+="_sync = false;\n"),n+="}));\n",t=new Function(this.args(),n)}return this.deinit(),t}setup(e,t){e._x=t.taps.map((e=>e.fn))}init(e){this.options=e,this._args=e.args.slice()}deinit(){this.options=void 0,this._args=void 0}contentWithInterceptors(e){if(this.options.interceptors.length>0){const t=e.onError,A=e.onResult,n=e.onDone;let i="";for(let e=0;e<this.options.interceptors.length;e++){const t=this.options.interceptors[e];t.call&&(i+=`${this.getInterceptor(e)}.call(${this.args({before:t.context?"_context":void 0})});\n`)}return i+=this.content(Object.assign(e,{onError:t&&(e=>{let A="";for(let t=0;t<this.options.interceptors.length;t++){this.options.interceptors[t].error&&(A+=`${this.getInterceptor(t)}.error(${e});\n`)}return A+=t(e),A}),onResult:A&&(e=>{let t="";for(let A=0;A<this.options.interceptors.length;A++){this.options.interceptors[A].result&&(t+=`${this.getInterceptor(A)}.result(${e});\n`)}return t+=A(e),t}),onDone:n&&(()=>{let e="";for(let t=0;t<this.options.interceptors.length;t++){this.options.interceptors[t].done&&(e+=`${this.getInterceptor(t)}.done();\n`)}return e+=n(),e})})),i}return this.content(e)}header(){let e="";return this.needContext()?e+="var _context = {};\n":e+="var _context;\n",e+="var _x = this._x;\n",this.options.interceptors.length>0&&(e+="var _taps = this.taps;\n",e+="var _interceptors = this.interceptors;\n"),e}needContext(){for(const e of this.options.taps)if(e.context)return!0;return!1}callTap(e,{onError:t,onResult:A,onDone:n,rethrowIfPossible:i}){let r="",o=!1;for(let a=0;a<this.options.interceptors.length;a++){const t=this.options.interceptors[a];t.tap&&(o||(r+=`var _tap${e} = ${this.getTap(e)};\n`,o=!0),r+=`${this.getInterceptor(a)}.tap(${t.context?"_context, ":""}_tap${e});\n`)}r+=`var _fn${e} = ${this.getTapFn(e)};\n`;const s=this.options.taps[e];switch(s.type){case"sync":i||(r+=`var _hasError${e} = false;\n`,r+="try {\n"),r+=A?`var _result${e} = _fn${e}(${this.args({before:s.context?"_context":void 0})});\n`:`_fn${e}(${this.args({before:s.context?"_context":void 0})});\n`,i||(r+="} catch(_err) {\n",r+=`_hasError${e} = true;\n`,r+=t("_err"),r+="}\n",r+=`if(!_hasError${e}) {\n`),A&&(r+=A(`_result${e}`)),n&&(r+=n()),i||(r+="}\n");break;case"async":let o="";o+=A?`(function(_err${e}, _result${e}) {\n`:`(function(_err${e}) {\n`,o+=`if(_err${e}) {\n`,o+=t(`_err${e}`),o+="} else {\n",A&&(o+=A(`_result${e}`)),n&&(o+=n()),o+="}\n",o+="})",r+=`_fn${e}(${this.args({before:s.context?"_context":void 0,after:o})});\n`;break;case"promise":r+=`var _hasResult${e} = false;\n`,r+=`var _promise${e} = _fn${e}(${this.args({before:s.context?"_context":void 0})});\n`,r+=`if (!_promise${e} || !_promise${e}.then)\n`,r+=`  throw new Error('Tap function (tapPromise) did not return promise (returned ' + _promise${e} + ')');\n`,r+=`_promise${e}.then((function(_result${e}) {\n`,r+=`_hasResult${e} = true;\n`,A&&(r+=A(`_result${e}`)),n&&(r+=n()),r+=`}), function(_err${e}) {\n`,r+=`if(_hasResult${e}) throw _err${e};\n`,r+=t(`_err${e}`),r+="});\n"}return r}callTapsSeries({onError:e,onResult:t,resultReturns:A,onDone:n,doneReturns:i,rethrowIfPossible:r}){if(0===this.options.taps.length)return n();const o=this.options.taps.findIndex((e=>"sync"!==e.type)),s=A||i;let a="",l=n,c=0;for(let u=this.options.taps.length-1;u>=0;u--){const A=u;l!==n&&("sync"!==this.options.taps[A].type||c++>20)&&(c=0,a+=`function _next${A}() {\n`,a+=l(),a+="}\n",l=()=>`${s?"return ":""}_next${A}();\n`);const i=l,h=e=>e?"":n(),d=this.callTap(A,{onError:t=>e(A,t,i,h),onResult:t&&(e=>t(A,e,i,h)),onDone:!t&&i,rethrowIfPossible:r&&(o<0||A<o)});l=()=>d}return a+=l(),a}callTapsLooping({onError:e,onDone:t,rethrowIfPossible:A}){if(0===this.options.taps.length)return t();const n=this.options.taps.every((e=>"sync"===e.type));let i="";n||(i+="var _looper = (function() {\n",i+="var _loopAsync = false;\n"),i+="var _loop;\n",i+="do {\n",i+="_loop = false;\n";for(let r=0;r<this.options.interceptors.length;r++){const e=this.options.interceptors[r];e.loop&&(i+=`${this.getInterceptor(r)}.loop(${this.args({before:e.context?"_context":void 0})});\n`)}return i+=this.callTapsSeries({onError:e,onResult:(e,t,A,i)=>{let r="";return r+=`if(${t} !== undefined) {\n`,r+="_loop = true;\n",n||(r+="if(_loopAsync) _looper();\n"),r+=i(!0),r+="} else {\n",r+=A(),r+="}\n",r},onDone:t&&(()=>{let e="";return e+="if(!_loop) {\n",e+=t(),e+="}\n",e}),rethrowIfPossible:A&&n}),i+="} while(_loop);\n",n||(i+="_loopAsync = true;\n",i+="});\n",i+="_looper();\n"),i}callTapsParallel({onError:e,onResult:t,onDone:A,rethrowIfPossible:n,onTap:i=(e,t)=>t()}){if(this.options.taps.length<=1)return this.callTapsSeries({onError:e,onResult:t,onDone:A,rethrowIfPossible:n});let r="";r+="do {\n",r+=`var _counter = ${this.options.taps.length};\n`,A&&(r+="var _done = (function() {\n",r+=A(),r+="});\n");for(let o=0;o<this.options.taps.length;o++){const s=()=>A?"if(--_counter === 0) _done();\n":"--_counter;",a=e=>e||!A?"_counter = 0;\n":"_counter = 0;\n_done();\n";r+="if(_counter <= 0) break;\n",r+=i(o,(()=>this.callTap(o,{onError:t=>{let A="";return A+="if(_counter > 0) {\n",A+=e(o,t,s,a),A+="}\n",A},onResult:t&&(e=>{let A="";return A+="if(_counter > 0) {\n",A+=t(o,e,s,a),A+="}\n",A}),onDone:!t&&(()=>s()),rethrowIfPossible:n})),s,a)}return r+="} while(false);\n",r}args({before:e,after:t}={}){let A=this._args;return e&&(A=[e].concat(A)),t&&(A=A.concat(t)),0===A.length?"":A.join(", ")}getTapFn(e){return`_x[${e}]`}getTap(e){return`_taps[${e}]`}getInterceptor(e){return`_interceptors[${e}]`}};const wB=CB;new class extends wB{content({onError:e,onDone:t,rethrowIfPossible:A}){return this.callTapsSeries({onError:(t,A)=>e(A),onDone:t,rethrowIfPossible:A})}};const bB=CB;new class extends bB{content({onError:e,onResult:t,resultReturns:A,onDone:n,rethrowIfPossible:i}){return this.callTapsSeries({onError:(t,A)=>e(A),onResult:(e,A,n)=>`if(${A} !== undefined) {\n${t(A)};\n} else {\n${n()}}\n`,resultReturns:A,onDone:n,rethrowIfPossible:i})}};const xB=CB;new class extends xB{content({onError:e,onResult:t,resultReturns:A,rethrowIfPossible:n}){return this.callTapsSeries({onError:(t,A)=>e(A),onResult:(e,t,A)=>{let n="";return n+=`if(${t} !== undefined) {\n`,n+=`${this._args[0]} = ${t};\n`,n+="}\n",n+=A(),n},onDone:()=>t(this._args[0]),doneReturns:A,rethrowIfPossible:n})}};const QB=CB;new class extends QB{content({onError:e,onDone:t,rethrowIfPossible:A}){return this.callTapsLooping({onError:(t,A)=>e(A),onDone:t,rethrowIfPossible:A})}};const EB=CB;new class extends EB{content({onError:e,onDone:t}){return this.callTapsParallel({onError:(t,A,n,i)=>e(A)+i(!0),onDone:t})}};const IB=CB;new class extends IB{content({onError:e,onResult:t,onDone:A}){let n="";return n+=`var _results = new Array(${this.options.taps.length});\n`,n+="var _checkDone = function() {\n",n+="for(var i = 0; i < _results.length; i++) {\n",n+="var item = _results[i];\n",n+="if(item === undefined) return false;\n",n+="if(item.result !== undefined) {\n",n+=t("item.result"),n+="return true;\n",n+="}\n",n+="if(item.error) {\n",n+=e("item.error"),n+="return true;\n",n+="}\n",n+="}\n",n+="return false;\n",n+="}\n",n+=this.callTapsParallel({onError:(e,t,A,n)=>{let i="";return i+=`if(${e} < _results.length && ((_results.length = ${e+1}), (_results[${e}] = { error: ${t} }), _checkDone())) {\n`,i+=n(!0),i+="} else {\n",i+=A(),i+="}\n",i},onResult:(e,t,A,n)=>{let i="";return i+=`if(${e} < _results.length && (${t} !== undefined && (_results.length = ${e+1}), (_results[${e}] = { result: ${t} }), _checkDone())) {\n`,i+=n(!0),i+="} else {\n",i+=A(),i+="}\n",i},onTap:(e,t,A,n)=>{let i="";return e>0&&(i+=`if(${e} >= _results.length) {\n`,i+=A(),i+="} else {\n"),i+=t(),e>0&&(i+="}\n"),i},onDone:A}),n}};const _B=yB,SB=CB;const FB=new class extends SB{content({onError:e,onDone:t}){return this.callTapsSeries({onError:(t,A,n,i)=>e(A)+i(!0),onDone:t})}},kB=function(e){return FB.setup(this,e),FB.create(e)};function UB(e=[],t=void 0){const A=new _B(e,t);return A.constructor=UB,A.compile=kB,A._call=void 0,A.call=void 0,A}UB.prototype=null;var OB=UB;const DB=CB;new class extends DB{content({onError:e,onResult:t,resultReturns:A,onDone:n}){return this.callTapsSeries({onError:(t,A,n,i)=>e(A)+i(!0),onResult:(e,A,n)=>`if(${A} !== undefined) {\n${t(A)}\n} else {\n${n()}}\n`,resultReturns:A,onDone:n})}};const TB=CB;new class extends TB{content({onError:e,onDone:t}){return this.callTapsLooping({onError:(t,A,n,i)=>e(A)+i(!0),onDone:t})}};const MB=CB;new class extends MB{content({onError:e,onResult:t,onDone:A}){return this.callTapsSeries({onError:(t,A,n,i)=>e(A)+i(!0),onResult:(e,t,A)=>{let n="";return n+=`if(${t} !== undefined) {\n`,n+=`${this._args[0]} = ${t};\n`,n+="}\n",n+=A(),n},onDone:()=>t(this._args[0])})}};const LB=fB,HB=(e,t)=>t;class PB{constructor(e,t=void 0){this._map=new Map,this.name=t,this._factory=e,this._interceptors=[]}get(e){return this._map.get(e)}for(e){const t=this.get(e);if(void 0!==t)return t;let A=this._factory(e);const n=this._interceptors;for(let i=0;i<n.length;i++)A=n[i].factory(e,A);return this._map.set(e,A),A}intercept(e){this._interceptors.push(Object.assign({factory:HB},e))}}PB.prototype.tap=LB.deprecate((function(e,t,A){return this.for(e).tap(t,A)}),"HookMap#tap(key,…) is deprecated. Use HookMap#for(key).tap(…) instead."),PB.prototype.tapAsync=LB.deprecate((function(e,t,A){return this.for(e).tapAsync(t,A)}),"HookMap#tapAsync(key,…) is deprecated. Use HookMap#for(key).tapAsync(…) instead."),PB.prototype.tapPromise=LB.deprecate((function(e,t,A){return this.for(e).tapPromise(t,A)}),"HookMap#tapPromise(key,…) is deprecated. Use HookMap#for(key).tapPromise(…) instead.");var RB=OB;class NB extends Pv{constructor(){super(...arguments),c(this,"canvas",null),c(this,"contextMenu",null),c(this,"pluginMap",{}),c(this,"customEvents",[]),c(this,"customApis",[]),c(this,"hooks",["hookImportBefore","hookImportAfter","hookSaveBefore","hookSaveAfter","hookTransform"]),c(this,"hooksEntity",{})}init(e){this.canvas=e,this._initContextMenu(),this._bindContextMenu(),this._initActionHooks(),this._initServersPlugin(),this.Utils=Zm}get fabricCanvas(){return this.canvas}use(e,t){if(this._checkPlugin(e)&&this.canvas){this._saveCustomAttr(e);const A=new e(this.canvas,this,t||{});A.pluginName=e.pluginName,this.pluginMap[e.pluginName]=A,this._bindingHooks(A),this._bindingHotkeys(A),this._bindingApis(A)}return this}destory(){this.canvas=null,this.contextMenu=null,this.pluginMap={},this.customEvents=[],this.customApis=[],this.hooksEntity={}}getPlugin(e){if(this.pluginMap[e])return this.pluginMap[e]}_checkPlugin(e){const{pluginName:t,events:A=[],apis:n=[]}=e;if(this.pluginMap[t])throw new Error(t+"插件重复初始化");return A.forEach((e=>{if(this.customEvents.find((t=>t===e)))throw new Error(t+"插件中"+e+"重复")})),n.forEach((e=>{if(this.customApis.find((t=>t===e)))throw new Error(t+"插件中"+e+"重复")})),!0}_bindingHooks(e){this.hooks.forEach((t=>{const A=e[t];A&&this.hooksEntity[t].tapPromise(e.pluginName+t,(function(){const t=A.apply(e,[...arguments]);return t instanceof Promise?t:Promise.resolve(t)}))}))}_bindingHotkeys(e){var t;null==(t=null==e?void 0:e.hotkeys)||t.forEach((t=>{sm(t,{keyup:!0},(A=>{e.hotkeyEvent&&e.hotkeyEvent(t,A)}))}))}_saveCustomAttr(e){const{events:t=[],apis:A=[]}=e;this.customApis=this.customApis.concat(A),this.customEvents=this.customEvents.concat(t)}_bindingApis(e){const{apis:t=[]}=e.constructor||{};t.forEach((t=>{this[t]=function(){return e[t].apply(e,[...arguments])}}))}_bindContextMenu(){this.canvas&&this.canvas.on("mouse:down",(e=>{if(3===e.button){let t=[];Object.keys(this.pluginMap).forEach((e=>{const A=this.pluginMap[e],n=A.contextMenu&&A.contextMenu();n&&(t=t.concat(n))})),this._renderMenu(e,t)}}))}_renderMenu(e,t){0!==t.length&&this.contextMenu&&(this.contextMenu.hideAll(),this.contextMenu.setData(t),this.contextMenu.show(e.e.clientX,e.e.clientY))}_initActionHooks(){this.hooks.forEach((e=>{this.hooksEntity[e]=new RB(["data"])}))}_initContextMenu(){this.contextMenu=new cm(this.canvas.wrapperEl,[]),this.contextMenu.install()}_initServersPlugin(){this.use(dB)}off(e,t){return t?super.off(e,t):this}}class jB{constructor(e,t){c(this,"defautOption",{}),c(this,"hotkeys",["space"]),c(this,"dragMode",!1),this.canvas=e,this.editor=t,this.dragMode=!1,this.init()}init(){this._initDring()}startDring(){this.dragMode=!0,this.canvas.setCursor("grab"),this.editor.emit("startDring"),this.canvas.renderAll()}endDring(){this.dragMode=!1,this.canvas.setCursor("default"),this.canvas.isDragging=!1,this.editor.emit("endDring"),this.canvas.renderAll()}_initDring(){const e=this;this.canvas.on("mouse:down",(function(t){const A=t.e;(A.altKey||e.dragMode||1===A.button)&&(e.canvas.setCursor("grabbing"),e.canvas.discardActiveObject(),e._setDring(),this.selection=!1,this.isDragging=!0,this.lastPosX=A.clientX,this.lastPosY=A.clientY,this.requestRenderAll())})),this.canvas.on("mouse:move",(function(t){if(e.dragMode&&e.canvas.setCursor("grab"),this.isDragging){e.canvas.discardActiveObject(),e.canvas.setCursor("grabbing");const{e:A}=t;if(!this.viewportTransform)return;const n=this.viewportTransform;n[4]+=A.clientX-this.lastPosX,n[5]+=A.clientY-this.lastPosY,this.lastPosX=A.clientX,this.lastPosY=A.clientY,this.requestRenderAll()}})),this.canvas.on("mouse:up",(function(){this.viewportTransform&&(this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0,this.getObjects().forEach((e=>{"workspace"!==e.id&&e.hasControls&&(e.selectable=!0)})),e.dragMode&&e.canvas.setCursor("grab"),this.requestRenderAll())}))}_setDring(){this.canvas.selection=!1,this.canvas.getObjects().forEach((e=>{e.selectable=!1})),this.canvas.requestRenderAll()}destroy(){}hotkeyEvent(e,t){"Space"===t.code&&"keydown"===t.type&&(this.dragMode||this.startDring()),"Space"===t.code&&"keyup"===t.type&&this.endDring()}}c(jB,"pluginName","DringPlugin"),c(jB,"events",["startDring","endDring"]),c(jB,"apis",["startDring","endDring"]);class VB{constructor(e,t){c(this,"defautOption",{color:"rgba(255,95,95,1)",width:1}),c(this,"dragMode",!1),this.canvas=e,this.editor=t,this.dragMode=!1,this.init()}init(){const{canvas:e}=this,t=e.getSelectionContext(),A=this;let n,i=1;function r(e){o(e.x1>e.x2?e.x2:e.x1,e.y+.5,e.x2>e.x1?e.x2:e.x1,e.y+.5)}function o(e,A,r,o){null!=n&&(t.moveTo(e*i+n[4],A*i+n[5]),t.lineTo(r*i+n[4],o*i+n[5]))}function s(e,t){e=Math.round(e),t=Math.round(t);for(let A=e-4,n=e+4;A<=n;A++)if(A===t)return!0;return!1}const a=[],l=[];e.on("mouse:down",(()=>{n=e.viewportTransform,i=e.getZoom()})),e.on("object:moving",(t=>{if(void 0===n||void 0===t.target)return;const A=t.target,i=e.getObjects(),r=A.getCenterPoint(),o=r.x,c=r.y,u=A.getBoundingRect(),h=u.height/n[3],d=u.width/n[0];let f=!1,g=!1;if(e._currentTransform){for(let e=i.length;e--;){if(i[e]===A)continue;if(A instanceof wv.fabric.GuideLine&&i[e]instanceof wv.fabric.GuideLine)continue;const t=i[e].getCenterPoint(),r=t.x,u=t.y,p=i[e].getBoundingRect(),v=p.height/n[3],m=p.width/n[0];s(r,o)&&(g=!0,a.push({x:r,y1:u<c?u-v/2-5:u+v/2+5,y2:c>u?c+h/2+5:c-h/2-5}),A.setPositionByOrigin(new wv.fabric.Point(r,c),"center","center")),s(r-m/2,o-d/2)&&(g=!0,a.push({x:r-m/2,y1:u<c?u-v/2-5:u+v/2+5,y2:c>u?c+h/2+5:c-h/2-5}),A.setPositionByOrigin(new wv.fabric.Point(r-m/2+d/2,c),"center","center")),s(r+m/2,o+d/2)&&(g=!0,a.push({x:r+m/2,y1:u<c?u-v/2-5:u+v/2+5,y2:c>u?c+h/2+5:c-h/2-5}),A.setPositionByOrigin(new wv.fabric.Point(r+m/2-d/2,c),"center","center")),s(u,c)&&(f=!0,l.push({y:u,x1:r<o?r-m/2-5:r+m/2+5,x2:o>r?o+d/2+5:o-d/2-5}),A.setPositionByOrigin(new wv.fabric.Point(o,u),"center","center")),s(u-v/2,c-h/2)&&(f=!0,l.push({y:u-v/2,x1:r<o?r-m/2-5:r+m/2+5,x2:o>r?o+d/2+5:o-d/2-5}),A.setPositionByOrigin(new wv.fabric.Point(o,u-v/2+h/2),"center","center")),s(u+v/2,c+h/2)&&(f=!0,l.push({y:u+v/2,x1:r<o?r-m/2-5:r+m/2+5,x2:o>r?o+d/2+5:o-d/2-5}),A.setPositionByOrigin(new wv.fabric.Point(o,u+v/2-h/2),"center","center"))}f||(l.length=0),g||(a.length=0)}})),e.on("before:render",(()=>{if(null!==e.contextTop)try{e.clearContext(e.contextTop)}catch(t){}})),e.on("after:render",(()=>{t.save(),t.beginPath(),t.lineWidth=A.defautOption.width,t.strokeStyle=A.defautOption.color;for(let t=a.length;t--;)o((e=a[t]).x+.5,e.y1>e.y2?e.y2:e.y1,e.x+.5,e.y2>e.y1?e.y2:e.y1);var e;for(let t=l.length;t--;)r(l[t]);t.stroke(),t.restore(),a.length=0,l.length=0})),e.on("mouse:up",(()=>{a.length=0,l.length=0,e.renderAll()}))}destroy(){}}c(VB,"pluginName","AlignGuidLinePlugin");const KB="data:image/svg+xml,%3csvg%20width='19'%20height='18'%20viewBox='0%200%2019%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9.99609'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0.996094'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";function GB(e,t,A,n,i,r,o){void 0!==o&&(e.save(),e.translate(t,A),e.rotate(wv.fabric.util.degreesToRadians(o)),e.drawImage(n,-i/2,-r/2,i,r),e.restore())}wv.fabric.Object.NUM_FRACTION_DIGITS=4;class YB{constructor(e,t){this.canvas=e,this.editor=t,this.init()}init(){!function(){const e=document.createElement("img");function t(t,A,n,i,r){GB(t,A,n,e,25,25,r.angle)}e.src=KB,e.onload=()=>{wv.fabric.Object.prototype.controls.tl=new wv.fabric.Control({x:-.5,y:-.5,cursorStyleHandler:wv.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingEqually,render:t}),wv.fabric.Object.prototype.controls.bl=new wv.fabric.Control({x:-.5,y:.5,cursorStyleHandler:wv.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingEqually,render:t}),wv.fabric.Object.prototype.controls.tr=new wv.fabric.Control({x:.5,y:-.5,cursorStyleHandler:wv.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingEqually,render:t}),wv.fabric.Object.prototype.controls.br=new wv.fabric.Control({x:.5,y:.5,cursorStyleHandler:wv.fabric.controlsUtils.scaleCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingEqually,render:t})}}(),function(){const e=document.createElement("img");e.src="data:image/svg+xml,%3csvg%20width='12'%20height='24'%20viewBox='0%200%2012%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='4'%20y='4'%20width='4'%20height='16'%20rx='2'%20fill='white'/%3e%3crect%20x='4.25'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='12'%20height='24'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e";const t=document.createElement("img");function A(t,A,n,i,r){GB(t,A,n,e,20,25,r.angle)}function n(e,A,n,i,r){GB(e,A,n,t,25,20,r.angle)}t.src="data:image/svg+xml,%3csvg%20width='24'%20height='12'%20viewBox='0%200%2024%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3crect%20x='20'%20y='4'%20width='4'%20height='16'%20rx='2'%20transform='rotate(90%2020%204)'%20fill='white'/%3e%3crect%20x='19.75'%20y='4.25'%20width='3.5'%20height='15.5'%20rx='1.75'%20transform='rotate(90%2019.75%204.25)'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='24'%20height='12'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",e.onload=()=>{wv.fabric.Object.prototype.controls.ml=new wv.fabric.Control({x:-.5,y:0,offsetX:-1,cursorStyleHandler:wv.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingXOrSkewingY,getActionName:wv.fabric.controlsUtils.scaleOrSkewActionName,render:A}),wv.fabric.Object.prototype.controls.mr=new wv.fabric.Control({x:.5,y:0,offsetX:1,cursorStyleHandler:wv.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingXOrSkewingY,getActionName:wv.fabric.controlsUtils.scaleOrSkewActionName,render:A})},t.onload=()=>{wv.fabric.Object.prototype.controls.mb=new wv.fabric.Control({x:0,y:.5,offsetY:1,cursorStyleHandler:wv.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingYOrSkewingX,getActionName:wv.fabric.controlsUtils.scaleOrSkewActionName,render:n}),wv.fabric.Object.prototype.controls.mt=new wv.fabric.Control({x:0,y:-.5,offsetY:-1,cursorStyleHandler:wv.fabric.controlsUtils.scaleSkewCursorStyleHandler,actionHandler:wv.fabric.controlsUtils.scalingYOrSkewingX,getActionName:wv.fabric.controlsUtils.scaleOrSkewActionName,render:n})}}(),function(){const e=document.createElement("img");function t(t,A,n,i,r){GB(t,A,n,e,40,40,r.angle)}e.src="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_d)'%3e%3ccircle%20cx='9'%20cy='9'%20r='5'%20fill='white'/%3e%3ccircle%20cx='9'%20cy='9'%20r='4.75'%20stroke='black'%20stroke-opacity='0.3'%20stroke-width='0.5'/%3e%3c/g%3e%3cpath%20d='M10.8047%2011.1242L9.49934%2011.1242L9.49934%209.81885'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M6.94856%206.72607L8.25391%206.72607L8.25391%208.03142'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.69517%206.92267C10.007%207.03301%2010.2858%207.22054%2010.5055%207.46776C10.7252%207.71497%2010.8787%208.01382%2010.9517%208.33642C11.0247%208.65902%2011.0148%208.99485%2010.9229%209.31258C10.831%209.63031%2010.6601%209.91958%2010.4262%2010.1534L9.49701%2011.0421M8.25792%206.72607L7.30937%207.73554C7.07543%207.96936%206.90454%208.25863%206.81264%208.57636C6.72073%208.89408%206.71081%209.22992%206.78381%209.55251C6.8568%209.87511%207.01032%2010.174%207.23005%2010.4212C7.44978%2010.6684%207.72855%2010.8559%208.04036%2010.9663'%20stroke='black'%20stroke-width='0.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cdefs%3e%3cfilter%20id='filter0_d'%20x='0'%20y='0'%20width='18'%20height='18'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeColorMatrix%20in='SourceAlpha'%20type='matrix'%20values='0%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%200%20127%200'/%3e%3cfeOffset/%3e%3cfeGaussianBlur%20stdDeviation='2'/%3e%3cfeColorMatrix%20type='matrix'%20values='0%200%200%200%200.137674%200%200%200%200%200.190937%200%200%200%200%200.270833%200%200%200%200.15%200'/%3e%3cfeBlend%20mode='normal'%20in2='BackgroundImageFix'%20result='effect1_dropShadow'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='effect1_dropShadow'%20result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",e.onload=()=>{wv.fabric.Object.prototype.controls.mtr=new wv.fabric.Control({x:0,y:.5,cursorStyleHandler:wv.fabric.controlsUtils.rotationStyleHandler,actionHandler:wv.fabric.controlsUtils.rotationWithSnapping,offsetY:30,actionName:"rotate",render:t})}}(),wv.fabric.Object.prototype.set({transparentCorners:!1,borderColor:"#51B9F9",cornerColor:"#FFF",borderScaleFactor:2.5,cornerStyle:"circle",cornerStrokeColor:"#0E98FC",borderOpacityWhenMoving:1})}destroy(){}}c(YB,"pluginName","ControlsPlugin");class XB{constructor(e,t){this.canvas=e,this.editor=t}center(e,t){const A=e.getCenterPoint();return this.canvas._centerObject(t,A)}centerV(e,t){return this.canvas._centerObject(t,new wv.fabric.Point(t.getCenterPoint().x,e.getCenterPoint().y))}centerH(e,t){return this.canvas._centerObject(t,new wv.fabric.Point(e.getCenterPoint().x,t.getCenterPoint().y))}position(e){const t=this.canvas.getActiveObject();if(["centerH","center","centerV"].includes(e)&&t){const A=this.canvas.getObjects().find((e=>"workspace"===e.id));A&&this[e](A,t),this.canvas.renderAll()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"水平垂直居中",hotkey:"",disabled:!1,onclick:()=>this.position("center")}]}destroy(){}}c(XB,"pluginName","CenterAlignPlugin"),c(XB,"apis",["centerH","center","position","centerV"]);class zB{constructor(e,t){this.canvas=e,this.editor=t}_getWorkspace(){return this.canvas.getObjects().find((e=>"workspace"===e.id))}_workspaceSendToBack(){const e=this._getWorkspace();e&&e.sendToBack()}up(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.bringForward(),this.canvas.renderAll(),this._workspaceSendToBack()}}down(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.sendBackwards(),this.canvas.renderAll(),this._workspaceSendToBack()}}toFront(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.bringToFront(),this.canvas.renderAll(),this._workspaceSendToBack()}}toBack(){const e=this.canvas.getActiveObjects();if(e&&1===e.length){const e=this.canvas.getActiveObjects()[0];e&&e.sendToBack(),this.canvas.renderAll(),this._workspaceSendToBack()}}contextMenu(){if(this.canvas.getActiveObject())return[{text:"图层管理",hotkey:"❯",subitems:[{text:"上一个",hotkey:"",onclick:()=>this.up()},{text:"下一个",hotkey:"",onclick:()=>this.down()},{text:"置顶",hotkey:"",onclick:()=>this.toFront()},{text:"置底",hotkey:"",onclick:()=>this.toBack()}]}]}destroy(){}}c(zB,"pluginName","LayerPlugin"),c(zB,"apis",["up","down","toFront","toBack"]);class WB{constructor(e,t){c(this,"hotkeys",["ctrl+v","ctrl+c"]),c(this,"cache",null),this.canvas=e,this.editor=t,this.initPaste()}_copyActiveSelection(e){const t=this.canvas,A=this.editor.getExtensionKey();null==e||e.clone((e=>{e.clone((e=>{t.discardActiveObject(),void 0!==e.left&&void 0!==e.top&&(e.canvas=t,e.set({left:e.left+10,top:e.top+10,evented:!0,id:vm()}),e.forEachObject((e=>{e.id=vm(),t.add(e)})),e.setCoords(),t.setActiveObject(e),t.requestRenderAll())}))}),A)}_copyObject(e){const t=this.canvas,A=this.editor.getExtensionKey();null==e||e.clone((e=>{void 0!==e.left&&void 0!==e.top&&(t.discardActiveObject(),e.set({left:e.left+10,top:e.top+10,evented:!0,id:vm()}),t.add(e),t.setActiveObject(e),t.requestRenderAll())}),A)}clone(e){const t=e||this.canvas.getActiveObject();t&&("activeSelection"===(null==t?void 0:t.type)?this._copyActiveSelection(t):this._copyObject(t))}hotkeyEvent(e,t){if("ctrl+c"===e&&"keydown"===t.type){const e=this.canvas.getActiveObject();this.cache=e,navigator.clipboard.writeText("")}"ctrl+v"===e&&"keydown"===t.type&&setTimeout((()=>{this.cache&&this.clone(this.cache)}),0)}contextMenu(){if(this.canvas.getActiveObject())return[{text:"复制",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.clone()}]}destroy(){window.removeEventListener("paste",(e=>this.pasteListener(e)))}initPaste(){window.addEventListener("paste",(e=>this.pasteListener(e)))}pasteListener(e){return u(this,null,(function*(){const t=this.canvas;if(document.activeElement!==document.body)return;e.preventDefault();const A=(e.clipboardData||e.originalEvent.clipboardData).items;for(const e of A)if("file"===e.kind){const A=e.getAsFile(),n=A.name.split(".").pop();if(!".pdf,.psd,.cdr,.ai,.svg,.jpg,.jpeg,.png,.webp,.json".split(",").includes(`.${n}`))return;if("svg"===n){const e=yield Gm(A);if(!e)throw new Error("file is undefined");wv.fabric.loadSVGFromURL(e,((e,A)=>{const n=wv.fabric.util.groupSVGElements(e,l(a({},A),{name:"defaultSVG",id:vm()}));t.add(n).centerObject(n).renderAll()}))}if(0===e.type.indexOf("image/")){const e=URL.createObjectURL(A),n=document.createElement("img");n.src=e,document.body.appendChild(n),n.onload=()=>{const e=new wv.fabric.Image(n,{id:vm(),name:"图片1",left:100,top:100});t.add(e),t.setActiveObject(e),t.renderAll(),n.remove()}}}else"string"===e.kind&&0===e.type.indexOf("text/plain")&&e.getAsString((e=>{const A=t.getActiveObject();if(A&&("textbox"===A.type||"i-text"===A.type)&&A.text){const n=A.selectionStart,i=A.text.substring(0,n),r=A.text.substring(n);A.set("text",i+e+r),A.selectionStart=n+e.length,A.selectionEnd=n+e.length,A.dirty=!0,t.renderAll()}else{const A=new wv.fabric.IText(e,{left:100,top:100,fontSize:80,id:vm()});t.add(A),t.setActiveObject(A)}}));A.length&&(this.cache=null)}))}}c(WB,"pluginName","CopyPlugin"),c(WB,"apis",["clone"]);class $B{constructor(e,t){c(this,"hotkeys",["left","right","down","up"]),this.canvas=e,this.editor=t}hotkeyEvent(e,t){if("keydown"===t.type){const{canvas:t}=this,A=t.getActiveObject();if(!A)return;switch(e){case"left":if(void 0===A.left)return;A.set("left",A.left-1);break;case"right":if(void 0===A.left)return;A.set("left",A.left+1);break;case"down":if(void 0===A.top)return;A.set("top",A.top+1);break;case"up":if(void 0===A.top)return;A.set("top",A.top-1)}t.renderAll()}}destroy(){}}c($B,"pluginName","MoveHotKeyPlugin");class JB{constructor(e,t){c(this,"hotkeys",["backspace"]),this.canvas=e,this.editor=t}hotkeyEvent(e,t){"keydown"===t.type&&"backspace"===e&&this.del()}del(){const{canvas:e}=this,t=e.getActiveObjects();t&&(t.map((t=>e.remove(t))),e.requestRenderAll(),e.discardActiveObject())}contextMenu(){if(this.canvas.getActiveObject())return[null,{text:"删除",hotkey:"Backspace",disabled:!1,onclick:()=>this.del()}]}destroy(){}}c(JB,"pluginName","DeleteHotKeyPlugin"),c(JB,"apis",["del"]);class qB{constructor(e,t){this.canvas=e,this.editor=t}unGroup(){const e=this.canvas.getActiveObject();if(!e)return;const t=e.getObjects();e.toActiveSelection();for(const A of t)A.set("id",vm());this.canvas.discardActiveObject().renderAll()}group(){const e=this.canvas.getActiveObject();if(!e)return;const t=e.toGroup(),A=t.getObjects();t.clone((e=>{e.set("id",vm()),this.canvas.remove(t),A.forEach((e=>{this.canvas.remove(e)})),this.canvas.add(e),this.canvas.setActiveObject(e)}))}contextMenu(){const e=this.canvas.getActiveObject();return Jm(e)?[{text:"组合",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.group()}]:$m(e)?[{text:"拆分组合",hotkey:"Ctrl+V",disabled:!1,onclick:()=>this.unGroup()}]:void 0}destroy(){}}c(qB,"pluginName","GroupPlugin"),c(qB,"apis",["unGroup","group"]),wv.fabric.Arrow=wv.fabric.util.createClass(wv.fabric.Line,{type:"arrow",superType:"drawing",initialize(e,t){if(!e){const{x1:A,x2:n,y1:i,y2:r}=t;e=[A,i,n,r]}t=t||{},this.callSuper("initialize",e,t)},_render(e){this.callSuper("_render",e),e.save(),e.scale(1/this.scaleX,1/this.scaleY);const t=(this.x2-this.x1)*this.scaleX,A=(this.y2-this.y1)*this.scaleY,n=Math.atan2(A,t);e.translate((this.x2-this.x1)/2*this.scaleX,(this.y2-this.y1)/2*this.scaleY),e.rotate(n),e.beginPath(),e.moveTo(0,0),e.lineTo(-10,5),e.lineTo(-10,-5),e.closePath(),e.lineWidth=this.lineWidth,e.strokeStyle=this.stroke,e.fillStyle=this.fill,e.stroke(),e.fill(),e.restore()}}),wv.fabric.Arrow.fromObject=(e,t)=>{const{x1:A,x2:n,y1:i,y2:r}=e;return t(new wv.fabric.Arrow([A,i,n,r],e))};const ZB=wv.fabric.Arrow;wv.fabric.ThinTailArrow=wv.fabric.util.createClass(wv.fabric.Line,{type:"thinTailArrow",superType:"drawing",initialize(e,t){if(!e){const{x1:A,x2:n,y1:i,y2:r}=t;e=[A,i,n,r]}t=t||{},this.callSuper("initialize",e,t)},_render(e){e.save(),e.scale(1/this.scaleX,1/this.scaleY);const t=(this.x2-this.x1)*this.scaleX,A=(this.y2-this.y1)*this.scaleY;e.translate(-t/2,-A/2);const n=Math.atan2(A,t);e.rotate(n);let i=Math.hypot(t,A);i=i<20?20:i,e.beginPath(),e.moveTo(0,0),e.lineTo(i-18,-5),e.lineTo(i-20,-12),e.lineTo(i,0),e.lineTo(i-20,12),e.lineTo(i-18,5),e.lineTo(0,0),e.lineWidth=this.strokeWidth,e.strokeStyle=this.stroke,e.fillStyle=this.fill,e.stroke(),e.fill(),e.restore()}}),wv.fabric.ThinTailArrow.fromObject=(e,t)=>{const{x1:A,x2:n,y1:i,y2:r}=e;return t(new wv.fabric.ThinTailArrow([A,i,n,r],e))};const ey=wv.fabric.ThinTailArrow;class ty{constructor(e,t){c(this,"isDrawingLineMode"),c(this,"lineType"),c(this,"lineToDraw"),c(this,"pointer"),c(this,"pointerPoints"),c(this,"isDrawingLine"),this.canvas=e,this.editor=t,this.isDrawingLine=!1,this.isDrawingLineMode=!1,this.lineType="",this.lineToDraw=null,this.pointer=null,this.pointerPoints=null,this.init()}init(){const{canvas:e}=this;e.on("mouse:down",(t=>{if(!this.isDrawingLineMode)return;let A;e.discardActiveObject(),e.getObjects().forEach((e=>{e.selectable=!1,e.hasControls=!1})),e.requestRenderAll(),this.isDrawingLine=!0,this.pointer=e.getPointer(t.e),this.pointerPoints=[this.pointer.x,this.pointer.y,this.pointer.x,this.pointer.y];let n={strokeWidth:2,stroke:"#000000",id:vm()};switch(this.lineType){case oB.line:A=wv.fabric.Line;break;case oB.arrow:A=ZB;break;case oB.thinTailArrow:A=ey,n={strokeWidth:2,stroke:"#ff0000",fill:"#ff0000",id:vm()}}if(!A)throw new Error("Draw failed: invalid lineType.");this.lineToDraw=new A(this.pointerPoints,n),this.lineToDraw.selectable=!1,this.lineToDraw.evented=!1,this.lineToDraw.strokeUniform=!0,e.add(this.lineToDraw)})),e.on("mouse:move",(t=>{if(!this.isDrawingLine||![oB.line,oB.arrow,oB.thinTailArrow].includes(this.lineType))return;e.discardActiveObject();if(!e.getActiveObject()){if(this.pointer=e.getPointer(t.e),t.e.shiftKey){const e=this.pointerPoints[0],t=this.pointerPoints[1],A=this.pointer.x-e,n=this.pointer.y-t,i=Math.sqrt(A*A+n*n);let r=Math.atan2(n,A)/Math.PI*180;r=15*~~((r+7.5)%360/15);const o=i*Math.cos(r*Math.PI/180),s=i*Math.sin(r*Math.PI/180);this.lineToDraw.set({x2:o+e,y2:s+t})}else this.lineToDraw.set({x2:this.pointer.x,y2:this.pointer.y});e.renderAll()}})),e.on("mouse:up",(()=>{this.isDrawingLine&&(this.lineToDraw.setCoords(),this.isDrawingLine=!1,e.discardActiveObject(),e.renderAll(),this.editor.saveState())}))}setLineType(e){this.lineType=e}setMode(e){this.isDrawingLineMode=e,this.isDrawingLineMode||this.endRest()}endRest(){this.canvas.getObjects().forEach((e=>{"workspace"!==e.id&&(e.selectable=!0,e.hasControls=!0)}))}destroy(){}}c(ty,"pluginName","DrawLinePlugin"),c(ty,"apis",["setLineType","setMode"]);class Ay{constructor(e,t){c(this,"isDown",!1),this.canvas=e,this.editor=t,this._init()}_init(){this.canvas.on("mouse:down",(e=>{this.isDown=!0,!e.target||e.target.lockMovementX||e.target.lockMovementY||e.target.lockRotation||e.target.lockScalingX||e.target.lockScalingY||(e.target.hasControls=!0)})),this.canvas.on("mouse:up",(()=>{this.isDown=!1})),this.canvas.on("mouse:dblclick",(e=>{if($m(e.target)){const t=this._getGroupObj(e);if(!t)return;if(t.selectable=!0,t.hasControls&&(t.hasControls=!1),this.isText(t))return void this._bedingTextEditingEvent(t,e.target);this.canvas.setActiveObject(t),this.canvas.renderAll()}}))}_getGroupTextObj(e){const t=this.canvas.getPointer(e.e,!0);if(!$m(e.target))return!1;const A=this.canvas._searchPossibleTargets(e.target._objects,t);return!(!A||!this.isText(A))&&A}_getGroupObj(e){const t=this.canvas.getPointer(e.e,!0);if(!$m(e.target))return!1;return this.canvas._searchPossibleTargets(e.target._objects,t)}_bedingTextEditingEvent(e,t){var A,n,i,r,o;const s=e.toObject(),c=t.calcTransformMatrix(),u=c[0],h=c[1],d=c[2],f=c[3],g=c[4],p=c[5],v=u*(null!=(A=e.left)?A:0)+d*(null!=(n=e.top)?n:0)+g,m=h*(null!=(i=e.left)?i:0)+f*(null!=(r=e.top)?r:0)+p,B=new e.constructor(null!=(o=e.text)?o:"",l(a({},s),{scaleX:s.scaleX*u,scaleY:s.scaleY*u,textAlign:e.textAlign,left:v,top:m,styles:e.styles,groupCopyed:e.group}));B.id=vm(),e.visible=!1,t.addWithUpdate(),B.visible=!0,B.selectable=!0,B.hasControls=!1,B.editable=!0,this.canvas.add(B),this.canvas.setActiveObject(B),B.enterEditing(),B.selectAll(),B.on("editing:exited",(()=>{const A=B.toObject();e.set(l(a({},ve(A,["fill","fontSize","fontStyle","fontFamily","lineHeight","backgroundColor"])),{text:B.text,visible:!0})),t.addWithUpdate(),B.visible=!1,this.canvas.remove(B),this.canvas.setActiveObject(t)}))}_bedingEditingEvent(e,t){if(!t.target)return;const A=t.target.left,n=t.target.top,i=this._unGroup()||[],r=()=>{const t=this.canvas.getObjects().filter((e=>e.id&&i.includes(e.id)));t.forEach((e=>this.canvas.remove(e)));const o=new wv.fabric.Group([...t]);o.set("left",A),o.set("top",n),o.set("id",vm()),e.off("editing:exited",r),this.canvas.add(o),this.canvas.discardActiveObject().renderAll()};e.on("editing:exited",r)}_unGroup(){const e=[],t=this.canvas.getActiveObject();if(t)return t.getObjects().forEach((t=>{const A=vm();e.push(A),t.set("id",A)})),t.toActiveSelection(),e}isText(e){return e.type&&["i-text","text","textbox"].includes(e.type)}destroy(){}}c(Ay,"pluginName","GroupTextEditorPlugin");class ny{constructor(e,t){this.canvas=e,this.editor=t}left(){const{canvas:e}=this,t=e.getActiveObject(),A=e.getActiveObjects();if(t){const{left:n=0}=t;e.discardActiveObject(),A.forEach((e=>{const t=e.getBoundingRect(!0);e.set({left:n-t.left+Number(e.left)}),e.setCoords()}));const i=new wv.fabric.ActiveSelection(A,{canvas:e});e.setActiveObject(i),e.requestRenderAll()}}right(){const{canvas:e}=this,t=e.getActiveObject(),A=e.getActiveObjects();if(t){const{left:n=0,width:i=0}=t;e.discardActiveObject(),A.forEach((e=>{const t=e.getBoundingRect(!0);e.set({left:n+i-(t.left+t.width)+Number(e.left)})}));const r=new wv.fabric.ActiveSelection(A,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}}xcenter(){const{canvas:e}=this,t=e.getActiveObject(),A=e.getActiveObjects();if(t){const{left:n=0,width:i=0}=t;e.discardActiveObject(),A.forEach((e=>{const t=e.getBoundingRect(!0);e.set({left:n+i/2-(t.left+t.width/2)+Number(e.left)})}));const r=new wv.fabric.ActiveSelection(A,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}}ycenter(){const{canvas:e}=this,t=e.getActiveObject(),A=e.getActiveObjects();if(t){const{top:n=0,height:i=0}=t;e.discardActiveObject(),A.forEach((e=>{const t=e.getBoundingRect(!0);e.set({top:n+i/2-(t.top+t.height/2)+Number(e.top)})}));const r=new wv.fabric.ActiveSelection(A,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}}top(){const{canvas:e}=this,t=e.getActiveObject(),A=e.getActiveObjects();if(t){const{top:n=0}=t;e.discardActiveObject(),A.forEach((e=>{const t=e.getBoundingRect(!0);e.set({top:n-t.top+Number(e.top)})}));const i=new wv.fabric.ActiveSelection(A,{canvas:e});e.setActiveObject(i),e.requestRenderAll()}}bottom(){const{canvas:e}=this,t=e.getActiveObject(),A=e.getActiveObjects();if(t){const{top:n=0,height:i=0}=t;e.discardActiveObject(),A.forEach((e=>{const t=e.getBoundingRect(!0);e.set({top:n+i-(t.top+t.height)+Number(e.top)})}));const r=new wv.fabric.ActiveSelection(A,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}}xequation(){const{canvas:e}=this,t=e.getActiveObject();function A(e){let t=1/0,A=-1/0;for(const n in e.aCoords)e.aCoords[n].x<t&&(t=e.aCoords[n].x),e.aCoords[n].x>A&&(A=e.aCoords[n].x);return A-t}if(t&&"activeSelection"===t.type){t._objects.sort(((e,t)=>e.left-t.left));const e=function(){const e=function(){let e=0;return t&&t.forEachObject((t=>{e+=A(t)})),e}();if(t)return(Number(t.width)-e)/(t._objects.length-1)}(),n=Number(t.width)/2;t.forEachObject(((i,r)=>{const o=function(e){if(0===e)return 0;let n=0;if(t)for(let i=0;i<e;i++)n+=A(t._objects[i]);return n}(r),s=e*r+o-n;i.set("left",s)}))}const n=e.getActiveObjects();e.discardActiveObject(),n.forEach((e=>{let t=1/0;for(const A in e.aCoords)e.aCoords[A].x<t&&(t=e.aCoords[A].x);e.set("left",2*e.left-t)}));const i=new wv.fabric.ActiveSelection(n,{canvas:e});e.setActiveObject(i),e.requestRenderAll()}yequation(){const{canvas:e}=this,t=e.getActiveObject()||{top:0,height:0};function A(e){let t=1/0,A=-1/0;for(const n in e.aCoords)e.aCoords[n].y<t&&(t=e.aCoords[n].y),e.aCoords[n].y>A&&(A=e.aCoords[n].y);return A-t}if(t&&"activeSelection"===t.type){t._objects.sort(((e,t)=>e.top-t.top));const e=function(){const e=function(){let e=0;return t.forEachObject((t=>{e+=A(t)})),e}();return(t.height-e)/(t._objects.length-1)}(),n=Number(t.height)/2;t.forEachObject(((i,r)=>{const o=function(e){if(0===e)return 0;let n=0;for(let i=0;i<e;i++)n+=A(t._objects[i]);return n}(r),s=e*r+o-n;i.set("top",s)}))}const n=e.getActiveObjects();e.discardActiveObject(),n.forEach((e=>{let t=1/0;for(const A in e.aCoords)e.aCoords[A].y<t&&(t=e.aCoords[A].y);e.set("top",2*e.top-t)}));const i=new wv.fabric.ActiveSelection(n,{canvas:e});e.setActiveObject(i),e.requestRenderAll()}destroy(){}}c(ny,"pluginName","GroupAlignPlugin"),c(ny,"apis",["left","right","xcenter","ycenter","top","bottom","xequation","yequation"]);class iy{constructor(e,t){c(this,"workspaceEl"),c(this,"workspace"),c(this,"resizeObserver"),c(this,"option"),c(this,"zoomRatio"),this.canvas=e,this.editor=t,this.workspace=null,this.init({width:900,height:2e3}),this.zoomRatio=.85}init(e){const t=document.querySelector("#workspace");if(!t)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=t,this.workspace=null,this.option=e,this._initBackground(),this._initWorkspace(),this._initResizeObserve(),this._bindWheel()}hookImportAfter(){return new Promise((e=>{const t=this.canvas.getObjects().find((e=>"workspace"===e.id));t&&(t.set("selectable",!1),t.set("hasControls",!1),t.set("evented",!1),t.width&&t.height&&(this.setSize(t.width,t.height),this.editor.emit("sizeChange",t.width,t.height))),e("")}))}hookSaveAfter(){return new Promise((e=>{this.auto(),e(!0)}))}_initBackground(){this.canvas.backgroundImage="",this.canvas.setBackgroundColor("#ffffff",this.canvas.renderAll.bind(this.canvas)),this.canvas.setWidth(this.workspaceEl.offsetWidth),this.canvas.setHeight(this.workspaceEl.offsetHeight)}_initWorkspace(){const{width:e,height:t}=this.option,A=new wv.fabric.Rect({fill:"transparent",width:e,height:t,id:"workspace",strokeWidth:0});A.set("selectable",!1),A.set("hasControls",!1),A.hoverCursor="default",this.canvas.add(A),this.canvas.renderAll(),this.workspace=A,this.canvas.clearHistory&&this.canvas.clearHistory(),this.auto()}getWorkspase(){return this.canvas.getObjects().find((e=>"workspace"===e.id))}setCenterFromObject(e){const{canvas:t}=this,A=e.getCenterPoint(),n=t.viewportTransform;void 0!==t.width&&void 0!==t.height&&n&&(n[4]=t.width/2-A.x*n[0],n[5]=t.height/2-A.y*n[3],t.setViewportTransform(n),t.renderAll())}getWorkspaceSize(){return this.option}_initResizeObserve(){const e=new ResizeObserver(le((()=>{this.auto()}),50));this.resizeObserver=e,this.resizeObserver.observe(this.workspaceEl)}setSize(e,t){this._initBackground(),this.option.width=e,this.option.height=t,this.workspace=this.canvas.getObjects().find((e=>"workspace"===e.id)),this.workspace.set("width",e),this.workspace.set("height",t),this.editor.emit("sizeChange",this.workspace.width,this.workspace.height),this.auto()}setZoomAuto(e,t){const{workspaceEl:A}=this,n=A.offsetWidth,i=A.offsetHeight;this.canvas.setWidth(n),this.canvas.setHeight(i);const r=this.canvas.getCenter();this.canvas.setViewportTransform(wv.fabric.iMatrix.concat()),this.canvas.zoomToPoint(new wv.fabric.Point(r.left,r.top),e),this.workspace&&(this.setCenterFromObject(this.workspace),this.workspace.clone((e=>{this.canvas.clipPath=e,this.canvas.requestRenderAll()})),t&&t(this.workspace.left,this.workspace.top))}getScale(){return wv.fabric.util.findScaleToFit(this.getWorkspase(),{width:this.workspaceEl.offsetWidth,height:this.workspaceEl.offsetHeight})}big(){let e=this.canvas.getZoom();e+=.05;const t=this.canvas.getCenter();this.canvas.zoomToPoint(new wv.fabric.Point(t.left,t.top),e)}small(){let e=this.canvas.getZoom();e-=.05;const t=this.canvas.getCenter();this.canvas.zoomToPoint(new wv.fabric.Point(t.left,t.top),e<0?.01:e)}auto(){const e=this.getScale();this.setZoomAuto(e*this.zoomRatio)}one(){this.setZoomAuto(1*this.zoomRatio),this.canvas.requestRenderAll()}setWorkspaseBg(e){const t=this.getWorkspase();null==t||t.set("fill",e)}_bindWheel(){this.canvas.on("mouse:wheel",(function(e){const t=e.e.deltaY;let A=this.getZoom();A*=o(.999,t),A>20&&(A=20),A<.01&&(A=.01);const n=this.getCenter();this.zoomToPoint(new wv.fabric.Point(n.left,n.top),A),e.e.preventDefault(),e.e.stopPropagation()}))}destroy(){this.resizeObserver.disconnect(),this.canvas.off()}}c(iy,"pluginName","WorkspacePlugin"),c(iy,"events",["sizeChange"]),c(iy,"apis",["big","small","auto","one","setSize","getWorkspase","setWorkspaseBg","setCenterFromObject","getScale","getWorkspaceSize"]),wv.fabric.Canvas.prototype.initialize=function(e){return function(...t){return e.call(this,...t),this._historyInit(),this}}(wv.fabric.Canvas.prototype.initialize),wv.fabric.Canvas.prototype.dispose=function(e){return function(...t){return e.call(this,...t),this._historyDispose(),this}}(wv.fabric.Canvas.prototype.dispose),wv.fabric.Canvas.prototype._historyNext=function(){return JSON.stringify(this.toDatalessJSON(this.extraProps))},wv.fabric.Canvas.prototype._historyEvents=function(){return{"object:added":e=>this._historySaveAction(e),"object:removed":e=>this._historySaveAction(e),"object:modified":e=>this._historySaveAction(e),"object:skewing":e=>this._historySaveAction(e)}},wv.fabric.Canvas.prototype._historyInit=function(){this.historyStack=[],this.historyIndex=0,this.historyMaxLength=100,this.extraProps=["id","gradientAngle","selectable","hasControls","linkData","editable","extensionType","extension"],this.historyNextState=this._historyNext(),this.isLatestHistoryState=!0,this.isLoadingHistory=!1,this.on(this._historyEvents())},wv.fabric.Canvas.prototype._historyDispose=function(){this.off(this._historyEvents())},wv.fabric.Canvas.prototype._historySaveAction=function(e){if(!this.historyProcessing&&(!e||e.target&&!e.target.excludeFromExport)){const e=this._historyNext();!this.isLatestHistoryState&&(this.isLatestHistoryState=!0)&&this.historyIndex<this.historyMaxLength&&this.historyIndex++,this.historyStack.length>this.historyIndex&&this.historyStack.splice(this.historyIndex),this.historyIndex>=this.historyMaxLength&&this.historyStack.shift(),this.historyIndex<this.historyMaxLength&&this.historyIndex++,this.historyStack.push(e),this.historyNextState=this._historyNext(),this.fire("history:append",{json:e})}},wv.fabric.Canvas.prototype.undo=function(e){if(this.isLoadingHistory)return;if(this.historyIndex<=0)return;this.historyProcessing=!0,this.isLatestHistoryState&&this.historyIndex--&&(this.isLatestHistoryState=!1);const t=this.historyStack[--this.historyIndex];t?(this.historyNextState=t,this._loadHistory(t,"history:undo",e)):(this.historyIndex<0&&(this.historyIndex=0),this.historyProcessing=!1)},wv.fabric.Canvas.prototype.redo=function(e){if(this.isLoadingHistory)return;if(this.historyIndex>=this.historyStack.length)return;this.historyProcessing=!0,!this.isLatestHistoryState&&++this.historyIndex&&(this.isLatestHistoryState=!0);const t=this.historyStack[this.historyIndex];t?(this.historyNextState=t,this._loadHistory(t,"history:redo",e),this.historyIndex++):this.historyProcessing=!1},wv.fabric.Canvas.prototype._loadHistory=function(e,t,A){var n;this.isLoadingHistory=!0;var i=this;const r=null==(n=e.objects)?void 0:n.find((e=>"workspace"===e.id));r&&(r.evented=!1),this.loadFromJSON(e,(function(){i.renderAll(),i.fire(t),i.historyProcessing=!1,i.isLoadingHistory=!1,A&&"function"==typeof A&&A()}))},wv.fabric.Canvas.prototype.clearHistory=function(e){const t=this.historyStack.pop();e&&t?(this.historyStack=[t],this.historyIndex=1,this.fire("history:clear")):(this.historyStack=[],this.historyIndex=0,this.fire("history:clear")),this.isLatestHistoryState=!0},wv.fabric.Canvas.prototype.clearUndo=function(){this.historyStack.splice(this.historyIndex)},wv.fabric.Canvas.prototype.refreshHistory=function(){this.historyProcessing=!1,this.historyStack.splice(--this.historyIndex),this._historySaveAction()},wv.fabric.Canvas.prototype.onHistory=function(){this.historyProcessing=!1,this._historySaveAction()},wv.fabric.Canvas.prototype.canUndo=function(){return this.historyIndex>0},wv.fabric.Canvas.prototype.canRedo=function(){return this.historyStack.length>this.historyIndex},wv.fabric.Canvas.prototype.offHistory=function(){this.historyProcessing=!0};class ry{constructor(e,t){c(this,"stack",[]),c(this,"currentIndex",0),c(this,"maxLength",100),c(this,"isProcessing",!1),c(this,"isLoading",!1),c(this,"hotkeys",["ctrl+z","ctrl+shift+z","⌘+z","⌘+shift+z"]),this.canvas=e,this.editor=t,wv.fabric.Canvas.prototype._historyNext=()=>this.editor.getJson(),this._init()}_init(){const e={"object:removed":()=>this.saveState(),"object:modified":()=>this.saveState(),"object:skewing":()=>this.saveState()};Object.entries(e).forEach((([e,t])=>{this.canvas.on(e,t)})),this.saveState(),this.canvas.on("history:append",(()=>{this.historyUpdate()})),window.addEventListener("beforeunload",(e=>{const{undoCount:t}=this.getState();t>0&&((e||window.event).returnValue="确认离开")}))}getCurrentState(){return this.editor.getJson()}saveState(){this.isProcessing||(this.stack.splice(this.currentIndex),this.stack.push(this.getCurrentState()),this.stack.length>this.maxLength?this.stack.shift():this.currentIndex++,this.historyUpdate())}_loadState(e,t,A){var n;this.isLoading=!0,this.isProcessing=!0;const i=null==(n=JSON.parse(e).objects)?void 0:n.find((e=>"workspace"===e.id));i&&(i.evented=!1),this.canvas.loadFromJSON(e,(()=>{this.canvas.renderAll(),this.canvas.fire(t),this.isProcessing=!1,this.isLoading=!1,null==A||A()}))}getState(){return{undoCount:this.currentIndex-1,redoCount:this.stack.length-this.currentIndex}}clear(){this.stack=[],this.currentIndex=0,this.saveState()}historyUpdate(){const{undoCount:e,redoCount:t}=this.getState();this.editor.emit("historyUpdate",e,t)}hookImportAfter(){return this.clear(),this.canvas.clearHistory(!0),this.historyUpdate(),Promise.resolve()}undo(){if(this.isLoading||this.currentIndex<=1)return;this.currentIndex--;const e=this.stack[this.currentIndex-1];e&&(this._loadState(JSON.stringify(e),"history:undo"),this.historyUpdate())}redo(){if(this.isLoading||this.currentIndex>=this.stack.length)return;const e=this.stack[this.currentIndex];e&&(this._loadState(JSON.stringify(e),"history:redo"),this.currentIndex++,this.historyUpdate())}hotkeyEvent(e,t){if("keydown"===t.type)switch(e){case"ctrl+z":case"⌘+z":this.undo();break;case"ctrl+shift+z":case"⌘+shift+z":this.redo()}}clearAndSaveState(){const e=this.getCurrentState();this.stack=[e],this.currentIndex=1,this.historyUpdate()}}c(ry,"pluginName","HistoryPlugin"),c(ry,"apis",["undo","redo","historyUpdate","clearAndSaveState","saveState"]),c(ry,"events",[]);class oy{constructor(e,t){this.canvas=e,this.editor=t}flip(e){const t=this.canvas.getActiveObject();t&&(t.set(`flip${e}`,!t[`flip${e}`]).setCoords(),this.canvas.requestRenderAll())}contextMenu(){if(this.editor.getSelectMode()===mm.ONE)return[{text:"翻转",hotkey:"❯",subitems:[{text:yi.global.t("editor.flip.x"),hotkey:"|",onclick:()=>this.flip("X")},{text:yi.global.t("editor.flip.y"),hotkey:"-",onclick:()=>this.flip("Y")}]}]}destroy(){}}c(oy,"pluginName","FlipPlugin"),c(oy,"apis",["flip"]);const sy=(e,t)=>{const A=t?"left":"top",n=t?"width":"height";e.sort(((e,t)=>e[A]-t[A]));const i=[];let r=Object.assign({},e[0]);for(const o of e){const e=Object.assign({},o);r[A]+r[n]>=e[A]?r[n]=Math.max(r[A]+r[n],e[A]+e[n])-r[A]:(i.push(r),r=Object.assign({},e))}return i.push(r),i},ay=(e,t)=>{e.save();const{left:A,top:n,width:i,height:r,stroke:o,lineWidth:s}=t;e.beginPath(),o&&(e.strokeStyle=o),e.lineWidth=null!=s?s:1,e.moveTo(A,n),e.lineTo(A+i,n+r),e.stroke(),e.restore()},ly=(e,t)=>{e.save();const{left:A,top:n,text:i,fill:r,align:o,angle:s,fontSize:a}=t;r&&(e.fillStyle=r),e.textAlign=null!=o?o:"left",e.textBaseline="top",e.font=`${null!=a?a:10}px sans-serif`,s&&(e.translate(A,n),e.rotate(Math.PI/180*s),e.translate(-A,-n)),e.fillText(i,A,n),e.restore()},cy=(e,t)=>{e.save();const{left:A,top:n,width:i,height:r,fill:o,stroke:s,strokeWidth:a}=t;e.beginPath(),o&&(e.fillStyle=o),e.rect(A,n,i,r),e.fill(),s&&(e.strokeStyle=s,e.lineWidth=null!=a?a:1,e.stroke()),e.restore()},uy=(e,t)=>{e.save();const{isHorizontal:A,left:n,top:i,width:r,height:o,backgroundColor:s}=t,a=A?e.createLinearGradient(n,o/2,n+r,o/2):e.createLinearGradient(r/2,i,r/2,o+i),l=new wv.fabric.Color(s);l.setAlpha(0),a.addColorStop(0,l.toRgba()),a.addColorStop(.33,s),a.addColorStop(.67,s),a.addColorStop(1,l.toRgba()),cy(e,{left:n,top:i,width:r,height:o,fill:a}),e.restore()};wv.fabric.GuideLine;class hy{constructor(e){c(this,"ctx"),c(this,"options"),c(this,"startCalibration"),c(this,"activeOn","up"),c(this,"objectRect"),c(this,"eventHandler",{calcObjectRect:le(this.calcObjectRect.bind(this),15),clearStatus:this.clearStatus.bind(this),canvasMouseDown:this.canvasMouseDown.bind(this),canvasMouseMove:le(this.canvasMouseMove.bind(this),15),canvasMouseUp:this.canvasMouseUp.bind(this),render:e=>{e.ctx&&this.render()}}),c(this,"lastAttr",{status:"out",cursor:void 0,selection:void 0}),c(this,"tempGuidelLine"),c(this,"getCommonEventInfo",(e=>{if(this.tempGuidelLine&&e.absolutePointer)return{e:e.e,transform:this.tempGuidelLine.get("transform"),pointer:{x:e.absolutePointer.x,y:e.absolutePointer.y},target:this.tempGuidelLine}})),this.options=Object.assign({ruleSize:20,fontSize:10,enabled:!1,backgroundColor:"#fff",borderColor:"transparent",highlightColor:"#007fff",textColor:"#888"},e),this.ctx=this.options.canvas.getContext(),wv.fabric.util.object.extend(this.options.canvas,{ruler:this}),wv.fabric.GuideLine||(wv.fabric.GuideLine=wv.fabric.util.createClass(wv.fabric.Line,{type:"GuideLine",selectable:!1,hasControls:!1,hasBorders:!1,stroke:"#4bec13",originX:"center",originY:"center",padding:4,globalCompositeOperation:"difference",axis:"horizontal",initialize(e,t){const A="horizontal"===t.axis;this.hoverCursor=A?"ns-resize":"ew-resize";const n=A?[-999999,e,999999,e]:[e,-999999,e,999999];t[A?"lockMovementX":"lockMovementY"]=!0,this.callSuper("initialize",n,t),this.on("mousedown:before",(e=>{"down"===this.activeOn&&this.canvas&&this.canvas.setActiveObject(this,e.e)})),this.on("moving",(e=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(e.e)?this.moveCursor="not-allowed":this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:moving",{target:this,e:e.e})})),this.on("mouseup",(e=>{this.canvas&&this.canvas.ruler.options.enabled&&this.isPointOnRuler(e.e)?this.canvas.remove(this):(this.moveCursor=this.isHorizontal()?"ns-resize":"ew-resize",this.canvas&&this.canvas.fire("guideline:mouseup",{target:this,e:e.e}))})),this.on("removed",(()=>{this.off("removed"),this.off("mousedown:before"),this.off("moving"),this.off("mouseup")}))},getBoundingRect(e,t){this.bringToFront();const A=this.isHorizontal(),n=this.callSuper("getBoundingRect",e,t);return n[A?"top":"left"]+=n[A?"height":"width"]/2,n[A?"height":"width"]=0,n},isPointOnRuler(e){const t=this.isHorizontal(),A=this.canvas&&this.canvas.ruler.isPointOnRuler(new wv.fabric.Point(e.offsetX,e.offsetY));return!!(t&&"horizontal"===A||!t&&"vertical"===A)&&A},isHorizontal(){return 0===this.height}}),wv.fabric.GuideLine.fromObject=function(e,t){const A=(0,wv.fabric.util.object.clone)(e,!0),n=0===A.height;A.xy=n?A.y1:A.x1,A.axis=n?"horizontal":"vertical",wv.fabric.Object._fromObject(A.type,A,(function(e){delete e.xy,t&&t(e)}),"xy")}),this.options.enabled&&this.enable()}destroy(){this.disable()}clearGuideline(){this.options.canvas.remove(...this.options.canvas.getObjects(wv.fabric.GuideLine.prototype.type))}showGuideline(){var e,t,A,n;null==(t=null==(e=this.options)?void 0:e.canvas)||t.getObjects(wv.fabric.GuideLine.prototype.type).forEach((e=>{e.set("visible",!0)})),null==(n=null==(A=this.options)?void 0:A.canvas)||n.renderAll()}hideGuideline(){this.options.canvas.getObjects(wv.fabric.GuideLine.prototype.type).forEach((e=>{e.set("visible",!1)})),this.options.canvas.renderAll()}enable(){this.options.enabled=!0,this.options.canvas.on("after:render",this.eventHandler.calcObjectRect),this.options.canvas.on("after:render",this.eventHandler.render),this.options.canvas.on("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.on("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.on("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.on("selection:cleared",this.eventHandler.clearStatus),this.showGuideline(),this.render()}disable(){this.options.canvas.off("after:render",this.eventHandler.calcObjectRect),this.options.canvas.off("after:render",this.eventHandler.render),this.options.canvas.off("mouse:down",this.eventHandler.canvasMouseDown),this.options.canvas.off("mouse:move",this.eventHandler.canvasMouseMove),this.options.canvas.off("mouse:up",this.eventHandler.canvasMouseUp),this.options.canvas.off("selection:cleared",this.eventHandler.clearStatus),this.hideGuideline(),this.options.enabled=!1}render(){var e,t;const A=this.options.canvas.viewportTransform;A&&(this.draw({isHorizontal:!0,rulerLength:this.getSize().width,startCalibration:(null==(e=this.startCalibration)?void 0:e.x)?this.startCalibration.x:-A[4]/A[0]}),this.draw({isHorizontal:!1,rulerLength:this.getSize().height,startCalibration:(null==(t=this.startCalibration)?void 0:t.y)?this.startCalibration.y:-A[5]/A[3]}),uy(this.ctx,{isHorizontal:!0,left:-10,top:-10,width:2*this.options.ruleSize+10,height:this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}),uy(this.ctx,{isHorizontal:!1,left:-10,top:-10,width:this.options.ruleSize+10,height:2*this.options.ruleSize+10,backgroundColor:this.options.backgroundColor}))}getSize(){var e,t;return{width:null!=(e=this.options.canvas.width)?e:0,height:null!=(t=this.options.canvas.height)?t:0}}getZoom(){return this.options.canvas.getZoom()}draw(e){const{isHorizontal:t,rulerLength:A,startCalibration:n}=e,i=this.getZoom(),r=(e=>{const t=[.02,.03,.05,.1,.2,.5,1,2,5,10,18];let A=0;for(;A<t.length&&t[A]<e;)A++;return[5e3,2500,1e3,500,250,100,50,25,10,5,2][A-1]||5e3})(i),o=A/i,s=Math[n>0?"floor":"ceil"](n/r)*r,c=s-n,u=this.getSize();cy(this.ctx,{left:0,top:0,width:t?u.width:this.options.ruleSize,height:t?this.options.ruleSize:u.height,fill:this.options.backgroundColor,stroke:this.options.borderColor});const h=new wv.fabric.Color(this.options.textColor);for(let a=0;a+c<=Math.ceil(o);a+=r){const e=(c+a)*i,A=s+a+"",n=10*A.length/4,r=t?e-n-1:this.options.ruleSize/2-this.options.fontSize/2-4,o=t?this.options.ruleSize/2-this.options.fontSize/2-4:e+n;ly(this.ctx,{text:A,left:r,top:o,fill:h.toRgb(),angle:t?0:-90})}for(let a=0;a+c<=Math.ceil(o);a+=r){const e=Math.round((c+a)*i),A=t?e:this.options.ruleSize-8,n=t?this.options.ruleSize-8:e,r=t?0:8,o=t?8:0;ay(this.ctx,{left:A,top:n,width:r,height:o,stroke:h.toRgb()})}if(this.objectRect){const e=t?"x":"y";this.objectRect[e].forEach((A=>{if(A.skip===e)return;const r=e=>Math.round(e/i+n)+"",o=r(t?A.left:A.top),s=r(t?A.left+A.width:A.top+A.height),c=o===s,u={isHorizontal:t,width:t?160:this.options.ruleSize-8,height:t?this.options.ruleSize-8:160,backgroundColor:this.options.backgroundColor};uy(this.ctx,l(a({},u),{left:t?A.left-80:0,top:t?0:A.top-80})),c||uy(this.ctx,l(a({},u),{left:t?A.width+A.left-80:0,top:t?0:A.height+A.top-80}));const h=new wv.fabric.Color(this.options.highlightColor);h.setAlpha(.5),cy(this.ctx,{left:t?A.left:this.options.ruleSize-8,top:t?this.options.ruleSize-8:A.top,width:t?A.width:8,height:t?8:A.height,fill:h.toRgba()});const d=this.options.ruleSize/2-this.options.fontSize/2-4,f={fill:h.toRgba(),angle:t?0:-90};ly(this.ctx,l(a({},f),{text:o,left:t?A.left-2:d,top:t?d:A.top-2,align:c?"center":t?"right":"left"})),c||ly(this.ctx,l(a({},f),{text:s,left:t?A.left+A.width+2:d,top:t?d:A.top+A.height+2,align:t?"left":"right"}));const g=c?8:14;h.setAlpha(1);const p={width:t?0:g,height:t?g:0,stroke:h.toRgba()};ay(this.ctx,l(a({},p),{left:t?A.left:this.options.ruleSize-g,top:t?this.options.ruleSize-g:A.top})),c||ay(this.ctx,l(a({},p),{left:t?A.left+A.width:this.options.ruleSize-g,top:t?this.options.ruleSize-g:A.top+A.height}))}))}}calcObjectRect(){const e=this.options.canvas.getActiveObjects();if(0===e.length)return;const t=e.reduce(((e,t)=>{var A,n;const i=t.getBoundingRect(!1,!0);if(t.group){const e=a({top:0,left:0,width:0,height:0,scaleX:1,scaleY:1},t.group);i.width*=e.scaleX,i.height*=e.scaleY;const r=e.width/2+e.left,o=(e.width/2+(null!=(A=t.left)?A:0))*(1-e.scaleX);i.left+=(r-o)*this.getZoom();const s=e.height/2+e.top,l=(e.height/2+(null!=(n=t.top)?n:0))*(1-e.scaleY);i.top+=(s-l)*this.getZoom()}return t instanceof wv.fabric.GuideLine&&(i.skip=t.isHorizontal()?"x":"y"),e.push(i),e}),[]);0!==t.length&&(this.objectRect={x:sy(t,!0),y:sy(t,!1)})}clearStatus(){this.objectRect=void 0}isPointOnRuler(e){return new wv.fabric.Rect({left:0,top:0,width:this.options.ruleSize,height:this.options.canvas.height}).containsPoint(e)?"vertical":!!new wv.fabric.Rect({left:0,top:0,width:this.options.canvas.width,height:this.options.ruleSize}).containsPoint(e)&&"horizontal"}canvasMouseDown(e){if(!e.pointer||!e.absolutePointer)return;const t=this.isPointOnRuler(e.pointer);t&&"up"===this.activeOn&&(this.lastAttr.selection=this.options.canvas.selection,this.options.canvas.selection=!1,this.activeOn="down",this.tempGuidelLine=new wv.fabric.GuideLine("horizontal"===t?e.absolutePointer.y:e.absolutePointer.x,{axis:t,visible:!1}),this.options.canvas.add(this.tempGuidelLine),this.options.canvas.setActiveObject(this.tempGuidelLine),this.options.canvas._setupCurrentTransform(e.e,this.tempGuidelLine,!0),this.tempGuidelLine.fire("down",this.getCommonEventInfo(e)))}canvasMouseMove(e){if(!e.pointer)return;if(this.tempGuidelLine&&e.absolutePointer){const t={};"horizontal"===this.tempGuidelLine.axis?t.top=e.absolutePointer.y:t.left=e.absolutePointer.x,this.tempGuidelLine.set(l(a({},t),{visible:!0})),this.options.canvas.requestRenderAll();const A=this.getCommonEventInfo(e);this.options.canvas.fire("object:moving",A),this.tempGuidelLine.fire("moving",A)}const t=this.isPointOnRuler(e.pointer);t?"out"!==this.lastAttr.status&&t===this.lastAttr.status||(this.lastAttr.cursor=this.options.canvas.defaultCursor,this.options.canvas.defaultCursor="horizontal"===t?"ns-resize":"ew-resize",this.lastAttr.status=t):"out"!==this.lastAttr.status&&(this.options.canvas.defaultCursor=this.lastAttr.cursor,this.lastAttr.status="out")}canvasMouseUp(e){var t;"down"===this.activeOn&&(this.options.canvas.selection=this.lastAttr.selection,this.activeOn="up",null==(t=this.tempGuidelLine)||t.fire("up",this.getCommonEventInfo(e)),this.tempGuidelLine=void 0)}}class dy{constructor(e,t){c(this,"ruler"),this.canvas=e,this.editor=t,this.init()}hookSaveBefore(){return new Promise((e=>{this.hideGuideline(),e(!0)}))}hookSaveAfter(){return new Promise((e=>{this.showGuideline(),e(!0)}))}init(){this.ruler=function(e,t){const A=new hy(a({canvas:e},t));let n;const i=()=>{n=e.getObjects().find((e=>"workspace"===e.id))},r=(e,t)=>{const{top:A,height:n,left:i,width:r}=e;if(void 0===A||void 0===n||void 0===i||void 0===r)return!1;const o=t.getBoundingRect(!0,!0),{top:s,height:a,left:l,width:c}=o;return!(!t.isHorizontal()||!(A>s+1||A+n<s+a-1))||!t.isHorizontal()&&(i>l+1||i+r<l+c-1)};return e.on("guideline:moving",(e=>{if(!n)return void i();const{target:t}=e;r(n,t)&&(t.moveCursor="not-allowed")})),e.on("guideline:mouseup",(t=>{var A;if(!n)return void i();const{target:o}=t;r(n,o)&&(e.remove(o),e.setCursor(null!=(A=e.defaultCursor)?A:""))})),A}(this.canvas)}hideGuideline(){this.ruler.hideGuideline()}showGuideline(){this.ruler.showGuideline()}rulerEnable(){this.ruler.enable()}rulerDisable(){this.ruler.disable()}destroy(){}}c(dy,"pluginName","RulerPlugin"),c(dy,"apis",["hideGuideline","showGuideline","rulerEnable","rulerDisable"]);class fy{constructor(e,t,A){c(this,"apiMapUrl"),c(this,"repoSrc"),this.canvas=e,this.editor=t,this.repoSrc=A.repoSrc,this.apiMapUrl={template:A.repoSrc+"/template/type.json",svg:A.repoSrc+"/svg/type.json"}}getTemplTypeList(){return Ci.get(`${this.repoSrc}/api/templ-types?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,label:e.attributes.name})))))}getTemplList(e="",t=1,A=""){const n={fields:"*",populate:{img:"*"},filters:{},pagination:{page:t,pageSize:10}},i=this._getQueryParams(n,[{key:"templ_type",value:e,type:"$eq"},{key:"name",value:A,type:"$contains"}]);return Ci.get(`${this.repoSrc}/api/templs?${i}`).then((e=>{var t,A;return{list:e.data.data.map((e=>({name:e.attributes.name,desc:e.attributes.desc,src:this._getMaterialPreviewUrl(e.attributes.img),json:e.attributes.json}))),pagination:null==(A=null==(t=null==e?void 0:e.data)?void 0:t.meta)?void 0:A.pagination}}))}getMaterialTypeList(){return Ci.get(`${this.repoSrc}/api/material-types?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,label:e.attributes.name})))))}getMaterialList(e="",t=1,A=""){const n={populate:{img:"*"},filters:{},pagination:{page:t,pageSize:50}},i=this._getQueryParams(n,[{key:"material_type",value:e,type:"$eq"},{key:"name",value:A,type:"$contains"}]);return Ci.get(`${this.repoSrc}/api/materials?${i}`).then((e=>{var t,A;return{list:e.data.data.map((e=>({name:e.attributes.name,desc:e.attributes.desc,src:this._getMaterialInfoUrl(e.attributes.img),previewSrc:this._getMaterialPreviewUrl(e.attributes.img)}))),pagination:null==(A=null==(t=null==e?void 0:e.data)?void 0:t.meta)?void 0:A.pagination}}))}getSizeList(){return Ci.get(`${this.repoSrc}/api/sizes?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,name:e.attributes.name,width:Number(e.attributes.width),height:Number(e.attributes.height),unit:e.attributes.unit})))))}getFontList(){return Ci.get(`${this.repoSrc}/api/fonts?pagination[pageSize]=100`).then((e=>e.data.data.map((e=>({value:e.id,label:e.attributes.name})))))}_getMaterialInfoUrl(e){var t,A;const n=(null==(A=null==(t=null==e?void 0:e.data)?void 0:t.attributes)?void 0:A.url)||"";return this.repoSrc+n}_getMaterialPreviewUrl(e){var t,A,n,i,r,o;const s=(null==(i=null==(n=null==(A=null==(t=null==e?void 0:e.data)?void 0:t.attributes)?void 0:A.formats)?void 0:n.small)?void 0:i.url)||(null==(o=null==(r=null==e?void 0:e.data)?void 0:r.attributes)?void 0:o.url)||"";return this.repoSrc+s}_getQueryParams(e,t){return t.forEach((t=>{const{key:A,value:n,type:i}=t;n&&(e.filters[A]={[i]:n})})),Xt.stringify(e)}getMaterialInfo(e){return u(this,null,(function*(){const t=this.apiMapUrl[e];return(yield Ci.get(t,{params:{typeId:e}})).data.data}))}}c(fy,"pluginName","MaterialPlugin"),c(fy,"apis",["getTemplTypeList","getTemplList","getMaterialTypeList","getMaterialList","getSizeList"]);var gy,py={exports:{}};gy=py,function(){function e(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function t(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function A(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function n(e){var t=e.g.offsetWidth,A=t+100;return e.j.style.width=A+"px",e.i.scrollLeft=A,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function i(t,A){function i(){var e=r;n(e)&&null!==e.g.parentNode&&A(e.l)}var r=t;e(t.h,i),e(t.i,i),n(t)}function r(e,t,A){t=t||{},A=A||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=A}var o=null,s=null,a=null,l=null;function c(e){return null===l&&(l=!!e.document.fonts),l}function u(e,t){var A=e.style,n=e.weight;if(null===a){var i=document.createElement("div");try{i.style.font="condensed 100px sans-serif"}catch(r){}a=""!==i.style.font}return[A,n,a?e.stretch:"","100px",t].join(" ")}r.prototype.load=function(e,n){var r=this,a=e||"BESbswy",l=0,h=n||3e3,d=(new Date).getTime();return new Promise((function(e,n){if(c(r.context)&&!function(e){return null===s&&(c(e)&&/Apple/.test(window.navigator.vendor)?(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&603>parseInt(e[1],10)):s=!1),s}(r.context)){var f=new Promise((function(e,t){!function A(){(new Date).getTime()-d>=h?t(Error(h+"ms timeout exceeded")):r.context.document.fonts.load(u(r,'"'+r.family+'"'),a).then((function(t){1<=t.length?e():setTimeout(A,25)}),t)}()})),g=new Promise((function(e,t){l=setTimeout((function(){t(Error(h+"ms timeout exceeded"))}),h)}));Promise.race([g,f]).then((function(){clearTimeout(l),e(r)}),n)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),e()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))}((function(){function s(){var t;(t=-1!=p&&-1!=v||-1!=p&&-1!=m||-1!=v&&-1!=m)&&((t=p!=v&&p!=m&&v!=m)||(null===o&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),o=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=o&&(p==B&&v==B&&m==B||p==y&&v==y&&m==y||p==C&&v==C&&m==C)),t=!t),t&&(null!==w.parentNode&&w.parentNode.removeChild(w),clearTimeout(l),e(r))}var c=new t(a),f=new t(a),g=new t(a),p=-1,v=-1,m=-1,B=-1,y=-1,C=-1,w=document.createElement("div");w.dir="ltr",A(c,u(r,"sans-serif")),A(f,u(r,"serif")),A(g,u(r,"monospace")),w.appendChild(c.g),w.appendChild(f.g),w.appendChild(g.g),r.context.document.body.appendChild(w),B=c.g.offsetWidth,y=f.g.offsetWidth,C=g.g.offsetWidth,function e(){if((new Date).getTime()-d>=h)null!==w.parentNode&&w.parentNode.removeChild(w),n(Error(h+"ms timeout exceeded"));else{var t=r.context.document.hidden;!0!==t&&void 0!==t||(p=c.g.offsetWidth,v=f.g.offsetWidth,m=g.g.offsetWidth,s()),l=setTimeout(e,50)}}(),i(c,(function(e){p=e,s()})),A(c,u(r,'"'+r.family+'",sans-serif')),i(f,(function(e){v=e,s()})),A(f,u(r,'"'+r.family+'",serif')),i(g,(function(e){m=e,s()})),A(g,u(r,'"'+r.family+'",monospace'))}))}))},gy.exports=r}();const vy=bn(py.exports);class my{constructor(e,t,A){c(this,"tempPromise"),c(this,"repoSrc"),c(this,"cacheList"),this.canvas=e,this.editor=t,this.repoSrc=A.repoSrc,this.cacheList=[],this.tempPromise=null}hookImportBefore(e){return this.downFontByJSON(e)}getFontList(){return this.cacheList.length?Promise.resolve(this.cacheList):(this.tempPromise||(this.tempPromise=Ci.get(`${this.repoSrc}/api/fonts?populate=*&pagination[pageSize]=100`).then((e=>{var t;const A=null==(t=e.data.data)?void 0:t.map((e=>({name:e.attributes.name,type:e.attributes.type,file:this.repoSrc+e.attributes.file.data.attributes.url,img:this.repoSrc+e.attributes.img.data.attributes.url})));return this.cacheList=A,this.createFontCSS(A),A}))),this.tempPromise)}downFontByJSON(e){const t=JSON.parse(e);let A=[];const n=["arial"];A=t.objects?JSON.parse(e).objects.filter((e=>{const t=this.cacheList.find((t=>t.name===e.fontFamily));return e.type.includes("text")&&!n.includes(e.fontFamily)&&t})).map((e=>e.fontFamily)):n.includes(t.fontFamily)?[]:[t.fontFamily];const i=A.map((e=>new vy(e).load(null,15e4)));return Promise.all(i)}getFontJson(){const e=this.canvas.getActiveObject();if(e){const t=e.toJSON(["id","gradientAngle","selectable","hasControls"]),A=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t,null,"\t"))}`,n=e.toDataURL({});zm(A,"font.json"),zm(n,"font.png")}}loadFont(e){return new vy(e).load(null,15e4).then((()=>{const t=this.canvas.getActiveObjects()[0];t&&(t.set("fontFamily",e),this.canvas.renderAll())}))}createFontCSS(e){let t="";e.forEach((e=>{t+=`\n    @font-face {\n      font-family: ${e.name};\n      src: url('${e.file}');\n    }\n    `}));const A=document.createElement("style");try{A.appendChild(document.createTextNode(t))}catch(n){}document.getElementsByTagName("head")[0].appendChild(A)}destroy(){}}c(my,"pluginName","FontPlugin"),c(my,"apis",["getFontList","loadFont","getFontJson","downFontByJSON"]);const By=function(e,t,A,n){const i=t.target,r=i.controls[i.__corner],o=i.toLocalPoint(new wv.fabric.Point(A,n),"center","center"),s=yy(i),a=i._getTransformedDimensions(0,0);return null!=i.points&&(i.points[r.pointIndex]=new wv.fabric.Point(o.x*s.x/a.x+i.pathOffset.x,o.y*s.y/a.y+i.pathOffset.y),!0)},yy=function(e){const t=new wv.fabric.Point(e.strokeUniform?1/e.scaleX:1,e.strokeUniform?1/e.scaleY:1).multiply(e.strokeWidth);return new wv.fabric.Point(e.width+t.x,e.height+t.y)},Cy=function(e,t,A){const n=A.points[this.pointIndex].x-A.pathOffset.x,i=A.points[this.pointIndex].y-A.pathOffset.y;return wv.fabric.util.transformPoint(new wv.fabric.Point(n,i),wv.fabric.util.multiplyTransformMatrices(A.canvas.viewportTransform,A.calcTransformMatrix()))};class wy{constructor(e,t){c(this,"isEdit"),c(this,"img"),c(this,"_onDeselected",or),this.canvas=e,this.editor=t,this.isEdit=!1;const A=document.createElement("img");A.src=KB,this.img=A,this.init()}init(){}_ensureEvent(e){e.off("deselected",this._onDeselected)}toggleEdit(){this.isEdit?this.inActiveEdit():this.activeEdit()}activeEdit(){this.isEdit=!0;const e=this.canvas.getActiveObject();if(e&&"polygon"===e.type){if(this._ensureEvent(e),null==e.points)return;const t=e.points.length-1,A=this;e.controls=e.points.reduce((function(e,n,i){var r,o;return e["p"+i]=new wv.fabric.Control({positionHandler:Cy,actionHandler:(r=i>0?i-1:t,o=By,function(e,t,A,n){const i=t.target;if(null==i.points)return!1;const s=wv.fabric.util.transformPoint(new wv.fabric.Point(i.points[r].x-i.pathOffset.x,i.points[r].y-i.pathOffset.y),i.calcTransformMatrix()),a=o(e,t,A,n),l=yy(i),c=(i.points[r].x-i.pathOffset.x)/l.x+.5,u=(i.points[r].y-i.pathOffset.y)/l.y+.5;return i.setPositionByOrigin(s,c,u),a}),actionName:"modifyPolygon",render:(...e)=>function(e,t,A,n,i,r){Wm(e,t,A,r,25,25,wv.fabric.util.degreesToRadians(i.angle||0))}(...e,A.img)}),Object.defineProperty(e["p"+i],"pointIndex",{value:i}),e}),{}),e.set({objectCaching:!1}),e.hasBorders=!this.isEdit,this.canvas.requestRenderAll(),this._onDeselected=()=>this.inActiveEdit(e),e.on("deselected",this._onDeselected)}}inActiveEdit(e){this.isEdit=!1,(e=e||this.canvas.getActiveObject())&&"polygon"===e.type&&(e.cornerColor="blue",e.cornerStyle="rect",e.controls=wv.fabric.Object.prototype.controls,e.hasBorders=!this.isEdit,e.set({objectCaching:!0}),this._onDeselected&&(e.off("deselected",this._onDeselected),this._onDeselected=or)),this.canvas.requestRenderAll()}}c(wy,"pluginName","PolygonModifyPlugin"),c(wy,"events",[]),c(wy,"apis",["toggleEdit","activeEdit","inActiveEdit"]);class by{constructor(e,t){c(this,"isDrawingPolygon",!1),c(this,"points",[]),c(this,"lines",[]),c(this,"anchors",[]),c(this,"tempPoint"),c(this,"tempLine"),c(this,"lastPoint"),c(this,"onEnd"),c(this,"delta",5),c(this,"_escListener",(e=>{"Escape"!==e.key&&27!==e.keyCode||this._confirmBuildPolygon()})),c(this,"_downHandler",(e=>{if(!this.isDrawingPolygon)return;const t=e.absolutePointer,A=new wv.fabric.Point(t.x,t.y),n=this._mackAnchor(t);if(this.anchors.push(n),null==this.tempLine){const e=new wv.fabric.Point(t.x,t.y);this.tempLine=this._makeLine([e,e]),this.canvas.add(this.tempLine)}else e.e.shiftKey&&A.setXY(this.tempLine.x2,this.tempLine.y2),n.set({left:A.x,top:A.y}),this.tempLine.set({x1:A.x,y1:A.y,x2:A.x,y2:A.y});if(this.lastPoint){const e=this._makeLine([this.lastPoint,A]);if(this.lines.push(e),this.canvas.add(e),this.points[0].distanceFrom(A)/this.canvas.getZoom()<=this.delta)return void this._confirmBuildPolygon()}this.canvas.add(n),this.lastPoint=A,this.points.push(A),this._ensureAnchorsForward()})),c(this,"_moveHandler",(e=>{if(!this.isDrawingPolygon||!this.tempLine)return;const t=e.absolutePointer;if(e.e.shiftKey&&this.lastPoint){const e=function(e,t){const A=e.x,n=e.y,i=t.x-A,r=t.y-n,o=Math.sqrt(i*i+r*r);let s=Math.atan2(r,i)/Math.PI*180;return s=15*~~((s+7.5)%360/15),{x:o*Math.cos(s*Math.PI/180)+A,y:o*Math.sin(s*Math.PI/180)+n}}(this.lastPoint,t);this.tempLine.set({x2:e.x,y2:e.y})}else this.tempLine.set({x2:t.x,y2:t.y});this.canvas.renderAll()})),this.canvas=e,this.editor=t}_isUsingHistory(){return this.canvas.offHistory&&"function"==typeof this.canvas.offHistory}_bindEvent(){window.addEventListener("keydown",this._escListener),this.canvas.on("mouse:down",this._downHandler),this.canvas.on("mouse:move",this._moveHandler)}_ensureAnchorsForward(){this.anchors.forEach((e=>{e.bringForward()}))}_unbindEvent(){window.removeEventListener("keydown",this._escListener),this.canvas.off("mouse:down",this._downHandler),this.canvas.off("mouse:move",this._moveHandler)}_createPolygon(e){return new wv.fabric.Polygon(e,{fill:"#ccccccff",id:vm()})}_makeLine(e){const[t,A]=e;return new wv.fabric.Line([t.x,t.y,A.x,A.y],{fill:"#000",stroke:"#000",strokeWidth:1,selectable:!1,evented:!1})}_mackAnchor(e){return new wv.fabric.Circle({radius:5,left:e.x,top:e.y,fill:"rgb(178, 53, 84)",scaleX:1/this.canvas.getZoom(),scaleY:1/this.canvas.getZoom(),strokeWidth:1/this.canvas.getZoom(),originX:"center",originY:"center",evented:!1,selectable:!1})}_confirmBuildPolygon(){const e=this.points;if(this.discardPolygon(),this._isUsingHistory()&&(this.canvas.historyProcessing=!1),e.length>=3){const t=this._createPolygon(e);this.canvas.add(t)}}_prepare(){this.canvas.discardActiveObject(),this.canvas.getObjects().forEach((e=>{e.selectable=!1,e.hasControls=!1}))}beginDrawPolygon(e){this._prepare(),this.onEnd=e,this._isUsingHistory()&&(this.canvas.historyProcessing=!0),this.canvas.requestRenderAll(),this.isDrawingPolygon=!0,this._bindEvent()}endDrawPolygon(){this.canvas.discardActiveObject(),this.isDrawingPolygon=!1,this.lastPoint=void 0,this.tempPoint=void 0,this._unbindEvent(),this.onEnd&&this.onEnd(),this.onEnd=void 0}discardPolygon(){this.lines.forEach((e=>{this.canvas.remove(e)})),this.anchors.forEach((e=>{this.canvas.remove(e)})),this.tempLine&&this.canvas.remove(this.tempLine),this.tempLine=void 0,this.anchors=[],this.lines=[],this.points=[],this.endDrawPolygon()}}c(by,"pluginName","DrawPolygonPlugin"),c(by,"apis",["beginDrawPolygon","endDrawPolygon","discardPolygon"]);class xy{constructor(e,t){c(this,"_createdHandler",(e=>{e.path.set("id",vm())})),this.canvas=e,this.editor=t}_bindEvent(){this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("path:created",this._createdHandler)}startDraw(e){this.canvas.isDrawingMode=!0,this.canvas.freeDrawingBrush=new wv.fabric.PencilBrush(this.canvas),this.canvas.freeDrawingBrush.width=e.width,this._bindEvent()}endDraw(){if(this.canvas.isDrawingMode)return this.canvas.isDrawingMode=!1,void this._unbindEvent()}}c(xy,"pluginName","FreeDrawPlugin"),c(xy,"apis",["startDraw","endDraw"]);class Qy{constructor(e,t){c(this,"options"),c(this,"_beforeHandler",(e=>{if(null==this.options)return;const t=e.path,A=wv.fabric.util.getPathSegmentsInfo;t.segmentsInfo=A(t.path),t.set({stroke:this.options.lineColor});const n=this.options.defaultText,i=this.options.defaultFontSize,r=new wv.fabric.IText(n,{shadow:"",fontFamily:"arial",fontSize:i,top:t.top,left:t.left,fill:this.options.color,path:t,id:vm(),editable:!1});this.canvas.add(r)})),c(this,"_createdHandler",(e=>{this.canvas.remove(e.path)})),this.canvas=e,this.editor=t}_bindEvent(){this.canvas.on("before:path:created",this._beforeHandler),this.canvas.on("path:created",this._createdHandler)}_unbindEvent(){this.canvas.off("before:path:created",this._beforeHandler),this.canvas.off("path:created",this._createdHandler)}startTextPathDraw(e={}){this.options=a(a({},{decimate:8,width:2,defaultText:"诸事顺遂 万事大吉",color:"#000000",lineColor:"#000000",defaultFontSize:20}),e),this.canvas.isDrawingMode=!0;const t=this.canvas.freeDrawingBrush=new wv.fabric.PencilBrush(this.canvas);t.decimate=this.options.decimate,t.width=this.options.width,t.color=this.options.color,this._bindEvent()}endTextPathDraw(){this.canvas.isDrawingMode=!1,this._unbindEvent()}}function Ey(e){return u(this,null,(function*(){const t=function(){const e={version:"5.3.0",objects:[],clipPath:null};return e}(),{clipPath:A,workspase:n}=function(e){const{width:t,height:A}=e,n={type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:t,height:A,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0},i={type:"rect",version:"5.3.0",originX:"left",originY:"top",left:0,top:0,width:t,height:A,fill:"rgba(255,255,255,1)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,id:"workspace",selectable:!1,hasControls:!0};return{clipPath:n,workspase:i}}(e);t.clipPath=A,t.objects.push(n);const i=function(e){const t=[];function A(e){e.forEach((e=>{e.children?A(e.children):t.push(e)}))}return A(e),t}(e.children),r=yield function(e){return u(this,null,(function*(){function t(e){return e.filter((e=>(e.text&&(e.type="text"),!e.isHidden))).map((e=>u(this,null,(function*(){const t=Iy(["left","top",["width",e=>e.width+50],"height","name",["visible",()=>!0],["opacity",e=>255/e.opacity],["id",vm]])(e),A="type",n=[{sourceType:"Layer",targetType:"image",attr:[],customTransform(e){return u(this,null,(function*(){return{src:yield function(e){return u(this,null,(function*(){try{const t=yield e.composite(),A=document.createElement("canvas"),n=A.getContext("2d"),i=new ImageData(t,e.width,e.height);A.width=e.width,A.height=e.height,n.putImageData(i,0,0);return A.toDataURL("image/png")}catch(t){return""}}))}(e)}}))}},{sourceType:"text",targetType:"textbox",attr:["text"],customTransform(e){return u(this,null,(function*(){const{FontSize:t,FillColor:A,Tracking:n}=e.textProperties.EngineDict.StyleRun.RunArray[0].StyleSheet.StyleSheetData;return{charSpacing:n,fontFamily:"站酷快乐体",fill:Sy(A.Values),fontSize:t||12}}))}}].find((t=>t.sourceType===e[A]));if(n){const A=_y(n.targetType),i=Iy(n.attr)(e),r=n.customTransform?yield n.customTransform(e):null;return fr.assign(A,t,A,i,r)}return a({},_y("textbox"))}))))}return yield Promise.all(t(e))}))}(i);t.objects.push(...r.reverse());return JSON.stringify(t,null,2)}))}function Iy(e){return function(t){const A={desc:{}};return e.forEach((e=>{if("string"==typeof e){const n=fr.get(t,e);fr.set(A,e,n)}else{const[n,i]=e;if("function"==typeof i){const e=i(t);e&&fr.set(A,n,e)}else{const e=fr.get(t,i);fr.set(A,n,e)}}})),A}}function _y(e){return{group:{type:"group",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,flipX:!1,flipY:!1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,selectable:!0,hasControls:!0},textbox:{type:"textbox",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:"",backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,fontFamily:"arial",fontWeight:"normal",fontSize:80,text:"诸事顺遂",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",charSpacing:0,styles:[],direction:"ltr",path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",minWidth:20,splitByGrapheme:!0,selectable:!0,hasControls:!0},image:{type:"image",version:"5.3.0",originX:"left",originY:"top",fill:"rgb(0,0,0)",stroke:null,strokeWidth:0,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,shadow:null,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,cropX:0,cropY:0,selectable:!0,hasControls:!0,src:"",crossOrigin:"anonymous",filters:[]},rect:{type:"rect",version:"5.3.0",originX:"center",originY:"center",left:0,top:0,width:226,height:302,fill:"rgb(0,0,0)",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeDashOffset:0,strokeLineJoin:"miter",strokeUniform:!1,strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,backgroundColor:"",fillRule:"nonzero",paintFirst:"fill",globalCompositeOperation:"source-over",skewX:0,skewY:0,rx:0,ry:0,selectable:!0,hasControls:!0,inverted:!1,absolutePositioned:!1}}[e]}function Sy(e){const[,t,A,n]=e;return`rgb(${255*t}, ${255*A}, ${255*n})`}c(Qy,"pluginName","PathTextPlugin"),c(Qy,"apis",["startTextPathDraw","endTextPathDraw"]);class Fy{constructor(e,t){this.layerFrame=e,this.parent=t,this.type="Group",this.children=[]}get name(){var e,t;return null!==(t=null===(e=this.layerFrame)||void 0===e?void 0:e.layerProperties.name)&&void 0!==t?t:""}get opacity(){var e,t;return null!==(t=null===(e=this.layerFrame)||void 0===e?void 0:e.layerProperties.opacity)&&void 0!==t?t:0}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get additionalProperties(){var e;return null===(e=this.layerFrame)||void 0===e?void 0:e.layerProperties.additionalLayerProperties}addChild(e){this.children.push(e)}hasChildren(){return 0!==this.children.length}freeze(){this.children.forEach((e=>{var t,A;return null===(A=(t=e).freeze)||void 0===A?void 0:A.call(t)})),Object.freeze(this.children)}}var ky,Uy,Oy,Dy;(Uy=ky||(ky={})).SectionDividerSetting="lsct",Uy.TypeToolObjectSetting="TySh",Uy.UnicodeLayerName="luni",Uy.VectorStrokeData="vstk",Uy.ObjectBasedEffects="lfx2",Uy.GradientFillSetting="GdFl",Uy.SolidColorSheetSetting="SoCo",Uy.PatternFillSetting="PtFl",Uy.VectorStrokeContentData="vscg",Uy.BlendOptionsCapacity="iOpa",Uy.VectorMaskSetting1="vmsk",Uy.VectorMaskSetting2="vsms",Uy.HueSaturation="hue2",Uy.NestedSectionDividerSetting="lsdk",Uy.LayerId="lyid",Uy.ArtboardData="artb",Uy.SmartObjectPlacedLayerData="SoLE",Uy.PlacedLayerData="SoLd",Uy.LinkedLayer="lnkD",Uy.LinkedLayer2="lnk2",Uy.LinkedLayer3="lnk3",function(e){e[e.Normal=0]="Normal",e[e.SceneGroup=1]="SceneGroup"}(Oy||(Oy={})),function(e){e[e.ClosedSubpathLength=0]="ClosedSubpathLength",e[e.ClosedSubpathBezierKnotLinked=1]="ClosedSubpathBezierKnotLinked",e[e.ClosedSubpathBezierKnotUnlinked=2]="ClosedSubpathBezierKnotUnlinked",e[e.OpenSubpathLength=3]="OpenSubpathLength",e[e.OpenSubpathBezierKnotLinked=4]="OpenSubpathBezierKnotLinked",e[e.OpenSubpathBezierKnotUnlinked=5]="OpenSubpathBezierKnotUnlinked",e[e.PathFillRule=6]="PathFillRule",e[e.Clipboard=7]="Clipboard",e[e.InitialFillRule=8]="InitialFillRule"}(Dy||(Dy={}));const Ty=(e,t)=>{const A=Math.max(e.length,t.length);for(let n=0;n<A;n++)if(e[n]!==t[n])return!1;return!0};class My extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name}}class Ly extends My{}class Hy extends My{}class Py extends My{}class Ry extends My{}class Ny extends My{}class jy extends My{}class Vy extends My{}class Ky extends My{}class Gy extends My{}class Yy extends My{}class Xy extends My{}class zy extends My{}class Wy extends My{}class $y extends My{}class Jy extends My{}class qy extends My{}class Zy extends My{}class eC extends My{}class tC extends My{}class AC extends My{}class nC extends My{}class iC extends My{}class rC extends My{}class oC extends My{}class sC extends My{}class aC extends My{}class lC extends My{}class cC extends My{}class uC extends My{}class hC extends My{}class dC extends My{}class fC extends My{}class gC extends My{}class pC extends My{}class vC extends My{}class mC extends My{}class BC extends My{}class yC extends My{}class CC extends My{}class wC extends My{}class bC extends My{}class xC extends My{}class QC extends My{}class EC extends My{}function IC(e,t){const A=e.getUint32(t),n=e.getUint32(t+4);if(A>=2097152)throw new aC;return 4294967296*A+n}const _C={u8:1,i8:1,u16:2,i16:2,u32:4,i32:4,f32:4,u64:8,i64:8,f64:8};class SC{static from(e){return new SC(new DataView(e.buffer,e.byteOffset,e.byteLength))}constructor(e,t=0){this.dataView=e,this.position=t}get length(){return this.dataView.byteLength}clone(e){const t=void 0!==e?e:this.position;return new SC(new DataView(this.dataView.buffer,this.dataView.byteOffset,this.dataView.byteLength),t)}pass(e){this.position+=e}unpass(e){this.position-=e}extract(e){if(this.position+e>this.dataView.byteLength)throw new AC;return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e)}iter(){return new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position)}take(e){const t=this.extract(e);return this.pass(e),t}peek(){return this.dataView.getUint8(this.position)}one(){const e=this.dataView.getUint8(this.position);return this.position+=1,e}read(e){const{dataView:t,position:A}=this;switch(this.pass(_C[e]),e){case"u8":return t.getUint8(A);case"u16":return t.getUint16(A);case"u32":return t.getUint32(A);case"u64":return IC(t,A);case"i8":return t.getInt8(A);case"i16":return t.getInt16(A);case"i32":return t.getInt32(A);case"i64":return function(e,t){const A=e.getInt32(t),n=e.getUint32(t+4);if(A>=2097152||A<-2097152||-2097152===A&&0===n)throw new aC;return 4294967296*A+n}(t,A);case"f32":return t.getFloat32(A);case"f64":return t.getFloat64(A);default:throw new TypeError(`Invalid ReadType: ${e}`)}}readString(e){const t=this.take(e);return(new TextDecoder).decode(t)}readUnicodeString(e=4){const t=2*this.read("u32"),A=this.take(t),n=new TextDecoder("utf-16be").decode(A);return this.padding(4+t,e),0===n.charCodeAt(n.length-1)?n.slice(0,-1):n}readFixedPoint32bit(){return this.read("u32")/65536}readIdString(){const e=this.read("u32");return this.readString(e||4)}padding(e,t){const A=e%t;A>0&&this.pass(t-A)}}const FC=(e,t,A)=>t<=e&&e<=A;function kC(e){return e.bottom-e.top}function UC(e){return function(e){return e.right-e.left}(e)*kC(e)}var OC,DC,TC,MC,LC,HC,PC;function RC(e){const t=Object.keys(OC);for(const A of t)if(OC[A]===e)return e;throw new Yy}function NC(e,t,A){const n=e.items.get(t);if(!n)throw new pC(`Cannot find key "${t}" in descriptor`);if(n.type!==A)throw new vC(`Unexpected descriptor value type: expected "${A}" but got "${n.type}"`);return n}!function(e){e.PassThrough="pass",e.Normal="norm",e.Dissolve="diss",e.Darken="dark",e.Multiply="mul ",e.ColorBurn="idiv",e.LinearBurn="lbrn",e.DarkerColor="dkCl",e.Lighten="lite",e.Screen="scrn",e.ColorDodge="div ",e.LinearDodge="lddg",e.LighterColor="lgCl",e.Overlay="over",e.SoftLight="sLit",e.HardLight="hLit",e.VividLight="vLit",e.LinearLight="lLit",e.PinLight="pLit",e.HardMix="hMix",e.Difference="diff",e.Exclusion="smud",e.Subtract="fsub",e.Divide="fdiv",e.Hue="hue ",e.Saturation="sat ",e.Color="colr",e.Luminosity="lum "}(OC||(OC={})),function(e){e[e.Base=0]="Base",e[e.NonBase=1]="NonBase"}(DC||(DC={})),function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.Rgb=3]="Rgb",e[e.Cmyk=4]="Cmyk",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"}(TC||(TC={})),function(e){e[e.One=1]="One",e[e.Eight=8]="Eight",e[e.Sixteen=16]="Sixteen",e[e.ThirtyTwo=32]="ThirtyTwo"}(MC||(MC={})),function(e){e.Alias="alis",e.Boolean="bool",e.Class="type",e.Descriptor="Objc",e.Double="doub",e.Enumerated="enum",e.GlobalClass="GlbC",e.GlobalObject="GlbO",e.Integer="long",e.LargeInteger="comp",e.List="VlLs",e.RawData="tdta",e.Reference="obj ",e.String="TEXT",e.UnitFloat="UntF",e.UnitFloats="UnFl",e.ObjectArray="ObAr"}(LC||(LC={})),function(e){e.Angle="#Ang",e.Density="#Rsl",e.Distance="#Rlt",e.Millimeters="#Mlm",e.None="#Nne",e.Percent="#Prc",e.Pixels="#Pxl",e.Points="#Pnt"}(HC||(HC={})),function(e){e[e.PSD=1]="PSD",e[e.PSB=2]="PSB"}(PC||(PC={}));const jC=[56,66,80,83],VC=[0,0,0,0,0,0],KC=[1,8,16,32];function GC(e,t,A,n,i){const r=new SC(e),o=r.read("u16");if(!(o in Cw))throw new Xy;const{red:s,green:a,blue:l,alpha:c}=(()=>{switch(o){case Cw.RawData:return function(e,t,A){const n=(e.length-2)/A,i=e.extract(n),r=A>=2?e.extract(n):void 0,o=A>=3?e.extract(n):void 0,s=A>=4?e.extract(n):void 0;if(t===MC.Eight)return{red:i,green:r,blue:o,alpha:s};throw new Wy(`Unsupported image bit depth: ${t}`)}(r,t,n);case Cw.RleCompressed:return function(e,t,A,n){let i=0,r=0,o=0,s=0;const a=n.rleScanlineLengthFieldReadType;for(let u=0;u<A;u++)i+=e.read(a);if(t>=2)for(let u=0;u<A;u++)r+=e.read(a);if(t>=3)for(let u=0;u<A;u++)o+=e.read(a);if(4===t)for(let u=0;u<A;u++)s+=e.read(a);const l=2+t*A*n.rleScanlineLengthFieldSize,c=e.clone(l);return{red:c.take(i),green:r?c.take(r):void 0,blue:o?c.take(o):void 0,alpha:s?c.take(s):void 0}}(r,n,A,i);default:throw new zy}})();return{compression:o,red:s,green:a,blue:l,alpha:c}}const YC=[56,66,73,77];function XC(e){const t=e.take(4);if(!Ty(t,YC))throw new tC;const A=e.read("i16"),n=function(e,t=0){const A=e.read("u8"),n=e.readString(A);if(t){const n=(A+1)%t;n>0&&e.pass(t-n)}return n}(e,2),i=e.read("u32"),r=e.position+i,o=i+i%2,s=e.position;let a=null;switch(A){case Qw.GridAndGuides:a=function(e){const t=e.read("u32");if(1!==t)throw new nC;const A=e.read("u32"),n=e.read("u32"),i=e.read("u32"),r=[];for(let o=0;o<i;++o){const t=e.read("i32"),A=kw(e.read("u8"));r.push({position:t,direction:A})}return{version:t,gridSizeX:A,gridSizeY:n,guides:r}}(e);break;case Qw.Slices:a=function(e,t){const A=e.read("u32");if(6===A){const n=e.read("i32"),i=e.read("i32"),r=e.read("i32"),o=e.read("i32"),s=e.readUnicodeString(0),a=e.read("u32"),l=[];for(;l.length<a;){const t=e.read("u32"),A=e.read("u32"),n=Uw(e.read("u32")),i=1===n?e.read("u32"):void 0;l.push({id:t,groupId:A,origin:n,associatedLayerId:i,name:e.readUnicodeString(0),type:e.read("u32"),left:e.read("i32"),top:e.read("i32"),right:e.read("i32"),bottom:e.read("i32"),url:e.readUnicodeString(0),target:e.readUnicodeString(0),message:e.readUnicodeString(0),altTag:e.readUnicodeString(0),isCellTextHtml:!!e.read("u8"),cellText:e.readUnicodeString(0),horizontalAlignment:e.read("i32"),verticalAlignment:e.read("i32"),alpha:e.read("u8"),red:e.read("u8"),green:e.read("u8"),blue:e.read("u8")})}return{version:A,boundTop:n,boundLeft:i,boundBottom:r,boundRight:o,sliceGroupName:s,slices:l,descriptor:e.position<t?$w(e):void 0}}if(7===A||8===A)return{version:A,descriptor:$w(e)};throw new rC(`Invalid Slices section version: ${A}`)}(e,r);break;case Qw.ICCProfile:a=function(e,t){return e.take(t-e.position)}(e,r);break;case Qw.ResolutionInfo:a=function(e){return{horizontal:e.readFixedPoint32bit(),horizontalUnit:e.read("u16"),widthUnit:e.read("u16"),vertical:e.readFixedPoint32bit(),verticalUnit:e.read("u16"),heightUnit:e.read("u16")}}(e);break;case Qw.GlobalLightAltitude:case Qw.GlobalLightAngle:a=e.read("i32")}const l=s+o-e.position;return l>0&&e.pass(l),{id:A,name:n,resource:a}}function zC(e){const t={};for(const[A,n]of e)t[A]=n;return t}const WC=(e,t,A)=>{const{top:n,left:i,bottom:r,right:o,opacity:s,clipping:a,hidden:l,transparencyLocked:c,blendMode:u,layerText:h,engineData:d,maskData:f,additionalLayerInfos:g}=t;return{name:e,top:n,left:i,bottom:r,right:o,opacity:s,clippingMask:a,hidden:l,transparencyLocked:c,blendMode:u,groupId:A,text:h,textProperties:d,maskData:f,additionalLayerProperties:zC(g.map((e=>[e.key,e])))}};class $C{static create(e,t,A){const n=WC(e.name,e,A);return new $C(t,n)}constructor(e,t){this.channels=e,this.layerProperties=t}get red(){const e=this.channels.get(ww.Red);if(void 0===e)throw new Jy;return e}get green(){return this.channels.get(ww.Green)}get blue(){return this.channels.get(ww.Blue)}get alpha(){return this.channels.get(ww.TransparencyMask)}get userMask(){return this.channels.get(ww.UserSuppliedLayerMask)}get realUserMask(){return this.channels.get(ww.RealUserSuppliedLayerMask)}get width(){const{right:e,left:t}=this.layerProperties;return e-t+1}get height(){const{bottom:e,top:t}=this.layerProperties;return e-t+1}}class JC{static create(e,t,A,n){const i=WC(e,A,n);return new JC(t,i)}constructor(e,t){this.id=e,this.layerProperties=t}}function qC(e){return{hue:e.read("i16"),saturation:e.read("i16"),lightness:e.read("i16")}}function ZC(e){return Array.from(Array(6),(()=>function(e){const t=e.read("i16"),A=e.read("i16"),n=e.read("i16"),i=e.read("i16");return a({beginRamp:t,beginSustain:A,endSustain:n,endRamp:i},qC(e))}(e)))}function ew(e){const t=e.readString(4);if("liFD"!==t)throw new hC(`unknown layer type: '${t}'`);const A=e.read("i32"),n=function(e){const t=e.read("u8");return e.readString(t)}(e),i=e.readUnicodeString(0),r=e.readString(4),o=e.readString(4),s=e.read("u64");return{layerType:t,version:A,uniqueId:n,filename:i,filetype:r,creator:o,data:e.read("u8")?$w(e):void 0,contents:e.take(s),uuid:A>5?e.readUnicodeString():void 0}}function tw(e,t){const A=function(e){if(e in bw)return e;throw new Gy}(e.read("u32"));if(t<12)return{dividerType:A};const n=e.readString(4);if("8BIM"!==n)throw new cC(`Invalid Section Divider Setting signature: ${n}`);const i=RC(e.readString(4));if(t<16)return{dividerType:A,dividerSignature:n,blendMode:i};const r=e.read("u32");if(!(r in Oy))throw new cC(`Invalid Section Divider Setting subtype: ${r}`);return{dividerType:A,dividerSignature:n,blendMode:i,subType:r}}function Aw(e){const[t,...A]=e.take(4);return t+(A[0]*o(2,16)+A[1]*o(2,8)+A[2])/o(2,24)}function nw(e){return{vert:Aw(e),horiz:Aw(e)}}function iw(e){const t=e.read("u16");switch(t){case Dy.OpenSubpathLength:case Dy.ClosedSubpathLength:return function(e,t){const A=e.read("i16"),n=e.read("i16"),i=e.read("i16");e.pass(6);const r=e.read("i16");return e.pass(10),{type:t,length:A,operation:n,subpathType:i,index:r}}(e,t);case Dy.PathFillRule:return e.pass(24),{type:t};case Dy.Clipboard:return function(e,t){const A=Array(4).map((()=>e.read("f32"))),n=e.read("f32");return e.pass(6),{type:t,bounds:A,resolution:n}}(e,t);case Dy.InitialFillRule:return function(e,t){const A=!!(1&e.read("i16"));return e.pass(22),{type:t,fill:A}}(e,t);case Dy.ClosedSubpathBezierKnotLinked:case Dy.ClosedSubpathBezierKnotUnlinked:case Dy.OpenSubpathBezierKnotLinked:case Dy.OpenSubpathBezierKnotUnlinked:return function(e,t){return{type:t,preceding:nw(e),anchor:nw(e),leaving:nw(e)}}(e,t);default:throw new Error(`Unknown PathRecordType: ${t} (bug in offsets?)`)}}function rw(e,t){const A=e.read("u32"),n=e.read("u32"),i=function(e,t){const A=Math.floor(t/26);return Array.from(Array(A),(()=>iw(e)))}(e,t);return{version:A,pathRecords:i,invert:!!(1&n),notLink:!!(2&n),disable:!!(4&n)}}function ow(e,t,A=0){const n=e.readString(4);if("8BIM"!==n&&"8B64"!==n)throw new lC(`Invalid signature: ${n}`);const i=e.readString(4),r=e.read(function(e,t){if(t.aliLengthFieldSizeIsVariable)switch(e){case"LMsk":case"Lr16":case"Lr32":case"Layr":case"Mt16":case"Mt32":case"Mtrn":case"Alph":case"FMsk":case"Ink2":case"FEid":case"FXid":case"PxSD":case"cinf":return"u64"}return"u32"}(i,t)),o=e.position,s=function(e,t,A,n){switch(A){case ky.NestedSectionDividerSetting:case ky.SectionDividerSetting:return a({signature:t,key:A},tw(e,n));case ky.TypeToolObjectSetting:return a({signature:t,key:A},function(e){const t=e.read("u16");if(1!==t)throw new uC(`Invalid type tool object setting version: ${t}`);const A=e.read("f64"),n=e.read("f64"),i=e.read("f64"),r=e.read("f64"),o=e.read("f64"),s=e.read("f64"),a=e.read("u16");if(50!==a)throw new uC(`Invalid text version: ${a}`);const l=$w(e),c=e.read("u16");if(1!==c)throw new uC(`Invalid warp version: ${c}`);return{version:t,transformXX:A,transformXY:n,transformYX:i,transformYY:r,transformTX:o,transformTY:s,textVersion:a,textData:l,warpVersion:c,warpData:$w(e),left:e.read("f64"),top:e.read("f64"),right:e.read("f64"),bottom:e.read("f64")}}(e));case ky.UnicodeLayerName:return a({signature:t,key:A},function(e){return{name:e.readUnicodeString(0)}}(e));case ky.VectorStrokeData:return a({signature:t,key:A},function(e){return{data:$w(e)}}(e));case ky.ObjectBasedEffects:return a({signature:t,key:A},function(e){const t=e.read("u32"),A=e.read("u32");return{version:t,descriptor:Ww(e),descriptorVersion:A}}(e));case ky.GradientFillSetting:return a({signature:t,key:A},function(e){return{data:$w(e)}}(e));case ky.SolidColorSheetSetting:return a({signature:t,key:A},function(e){return{version:e.read("u32"),data:Ww(e)}}(e));case ky.PatternFillSetting:return a({signature:t,key:A},function(e){return{data:$w(e)}}(e));case ky.VectorStrokeContentData:return a({signature:t,key:A},function(e){return{version:e.read("u32"),data:$w(e)}}(e));case ky.BlendOptionsCapacity:return a({signature:t,key:A},function(e){return{fillOpacity:e.read("u8")}}(e));case ky.VectorMaskSetting1:case ky.VectorMaskSetting2:return a({signature:t,key:A},rw(e,n));case ky.HueSaturation:return a({signature:t,key:A},function(e){const t=e.read("u16"),A=e.read("u8");return e.pass(1),{version:t,colorize:A,colorization:qC(e),master:qC(e),adjustment:A?void 0:ZC(e)}}(e));case ky.LayerId:return a({signature:t,key:A},function(e){return{value:e.read("u32")}}(e));case ky.ArtboardData:return a({signature:t,key:A},function(e){return{data:$w(e)}}(e));case ky.PlacedLayerData:case ky.SmartObjectPlacedLayerData:return a({signature:t,key:A},function(e){const t=e.readString(4),A=e.read("u32");return{data:$w(e),version:A,identifier:t}}(e));case ky.LinkedLayer:case ky.LinkedLayer2:case ky.LinkedLayer3:return a({signature:t,key:A},function(e,t){const A=[];let n=0;const i=e.position+t;for(;e.position<i&&(n=e.read("u64"));){const t=e.position,i=ew(e);A.push(i);const r=n-(e.position-t);e.pass(r),e.padding(e.position,4)}return{layers:A}}(e,n));default:return{signature:t,key:A,_isUnknown:!0,data:e.take(n)}}}(e,n,i,r),l=r-(e.position-o);return e.pass(l),e.padding(r,A),s}function sw(e,t,A){const n=[];for(;n.length<t;)n.push(aw(e,A));return n.map((t=>{const n=function(e,t,A,n){const i=new Map,{length:r}=t;for(let o=0;o<r;o++){const[r,s]=t[o],a=Fw(e.read("u16"));switch(a){case Cw.RawData:{const t=e.take(s);i.set(r,{compression:a,data:t});break}case Cw.RleCompressed:{const t=e.take(s>0?cw(e,lw(A,r),n.rleScanlineLengthFieldReadType):s);i.set(r,{compression:a,data:t});break}}}return i}(e,t.channelInformation,t,A);return[t,n]})).reverse()}function aw(e,t){const[A,n,i,r]=function(e){const t=e.read("i32"),A=e.read("i32");let n=e.read("i32");0!==n&&(n-=1);let i=e.read("i32");return 0!==i&&(i-=1),[t,A,n,i]}(e),o=e.read("u16"),s=[];for(;s.length<o;){const A=e.read("i16"),n=e.read(t.layerRecordSectionChannelLengthFieldReadType)-2;s.push([A,n])}if("8BIM"!==e.readString(4))throw new Ky;const a=RC(e.readString(4)),l=e.read("u8"),c=function(e){if(e===DC.Base)return DC.Base;if(e===DC.NonBase)return DC.NonBase;throw new qy}(e.read("u8")),{hidden:u,transparencyLocked:h}=function(e){const t=e.read("u8");return{transparencyLocked:!!(1&t),hidden:!!(2&t)}}(e);e.pass(1);const d=e.read("u32"),f=e.position,g=function(e){const t=e.read("u32"),A=e.position,[n,i,r,o]=uw(e),s=e.read("u8"),a=fw(e),l=t>=36?function(e){const t=fw(e),A=e.read("u8"),[n,i,r,o]=uw(e);return{top:n,left:i,bottom:r,right:o,flags:t,backgroundColor:A}}(e):void 0,c=a.masksHaveParametersApplied?function(e){const t=e.read("u8");return{userMaskDensity:t&dw.UserMaskDensity?e.read("u8"):void 0,userMaskFeather:t&dw.UserMaskFeather?e.read("f64"):void 0,vectorMaskDensity:t&dw.VectorMaskDensity?e.read("u8"):void 0,vectorMaskFeather:t&dw.VectorMaskFeather?e.read("f64"):void 0}}(e):void 0,u=t-(e.position-A);return e.pass(u),{top:n,left:i,bottom:r,right:o,backgroundColor:s,flags:a,parameters:c,realData:l}}(e);e.pass(e.read("u32"));const p=e.read("u8");let v=e.readString(p);e.padding(p+1,4);const m=[];for(;e.position-f<d;)m.push(ow(e,t));let B,y,C;for(const w of m)if(!w._isUnknown)switch(w.key){case ky.SectionDividerSetting:({dividerType:B}=w);break;case ky.TypeToolObjectSetting:{const e=w.textData.descriptor.items.get("Txt ");e&&e.type===LC.String&&(y=e.value);const t=w.textData.descriptor.items.get("EngineData");t&&t.type===LC.RawData&&(C=db(t.data));break}case ky.UnicodeLayerName:({name:v}=w)}return{name:v,channelInformation:s,top:A,left:n,bottom:i,right:r,hidden:u,transparencyLocked:h,opacity:l,clipping:c,blendMode:a,additionalLayerInfos:m,dividerType:B,layerText:y,engineData:C,maskData:g}}function lw(e,t){switch(t){case ww.UserSuppliedLayerMask:return kC(e.maskData);case ww.RealUserSuppliedLayerMask:return kC(function(e){const t=e.maskData.realData;if(!t)throw new Error("missing real mask data");return t}(e));default:return kC(e)+1}}function cw(e,t,A){return Array.from(Array(t),(()=>e.read(A))).reduce(((e,t)=>e+t))}function uw(e){return Array.from(Array(4),(()=>e.read("i32")))}var hw,dw;function fw(e){const t=e.read("u8");return{positionRelativeToLayer:!!(t&hw.PositionRelativeToLayer),layerMaskDisabled:!!(t&hw.LayerMaskDisabled),invertMaskWhenBlending:!!(t&hw.InvertMaskWhenBlending),userMaskFromRenderingOtherData:!!(t&hw.UserMaskFromRenderingOtherData),masksHaveParametersApplied:!!(t&hw.MasksHaveParametersApplied)}}function gw(e,t){const A=new SC(e);A.pass(t.layerAndMaskSectionLengthFieldSize),A.pass(t.layerInfoSectionLengthFieldSize);const n=A.read("i16"),i=Math.abs(n),r=sw(A,i,t);A.padding(A.position,4),A.pass(A.read("u32"));const o=function(e,t){const A=[];for(;e.position<e.length;)A.push(ow(e,t,4));return zC(A.map((e=>[e.key,e])))}(A,t),s=[],a=[],l=[],c=[{startIndex:0,groupId:0,parentGroupId:0}];let u=0;for(let h=0;h<i;h++){const[e,t]=r[h],A=c[c.length-1].groupId,{dividerType:n}=e;if(n===bw.CloseFolder||n===bw.OpenFolder)u+=1,c.push({startIndex:s.length,groupId:u,parentGroupId:A,layerRecord:e}),l.push("G");else if(n===bw.BoundingSection){const t=c.pop();if(void 0===t)throw new Zy;const A=t.groupId>0?t.groupId:void 0,n=t.layerRecord||e;a.push(JC.create(n.name,t.groupId,n,A)),l.push("D")}else s.push($C.create(e,t,A)),l.push("L")}return a.sort(((e,t)=>e.id-t.id)),{layers:s,groups:a,orders:l,globalAdditionalLayerInformation:o}}!function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertMaskWhenBlending=4]="InvertMaskWhenBlending",e[e.UserMaskFromRenderingOtherData=8]="UserMaskFromRenderingOtherData",e[e.MasksHaveParametersApplied=16]="MasksHaveParametersApplied"}(hw||(hw={})),function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"}(dw||(dw={}));function pw(e,t,A=4){const n=(4===A?e.getUint32(t):IC(e,t))+A;return{start:t,end:t+n,size:n}}function vw(e){const t=new DataView(e),A=function(e){const t=new SC(e),A=t.take(4);if(!Ty(A,jC))throw new Ly;const n=t.read("u16");if(n!==PC.PSD&&n!==PC.PSB)throw new Hy;const i=yw(n),r=t.take(6);if(!Ty(r,VC))throw new Py;const o=t.read("u16");if(!FC(o,1,56))throw new jy;const s=t.read("u32"),a=t.read("u32");if(!FC(s,1,i.maxPixels)||!FC(a,1,i.maxPixels))throw new Vy;const l=t.read("u16");if(!KC.includes(l))throw new Ny;const c=t.read("u16");if(!(c in TC))throw new Ry;return{channelCount:o,version:n,width:a,height:s,depth:l,colorMode:c}}(new DataView(e,0,26)),n=yw(A.version),i=pw(t,26),r=pw(t,i.end),o=pw(t,r.end,n.layerAndMaskSectionLengthFieldSize);return{fileHeader:A,colorModeData:new DataView(e,i.size),imageResources:new DataView(e,r.start,r.size),layerAndMaskInformation:new DataView(e,o.start,o.size),imageData:new DataView(e,o.end)}}const mw={maxPixels:3e4,rleScanlineLengthFieldSize:2,rleScanlineLengthFieldReadType:"u16",layerAndMaskSectionLengthFieldSize:4,layerInfoSectionLengthFieldSize:4,layerRecordSectionChannelLengthFieldReadType:"u32",aliLengthFieldSizeIsVariable:!1},Bw={maxPixels:3e5,rleScanlineLengthFieldSize:4,rleScanlineLengthFieldReadType:"u32",layerAndMaskSectionLengthFieldSize:8,layerInfoSectionLengthFieldSize:8,layerRecordSectionChannelLengthFieldReadType:"u64",aliLengthFieldSizeIsVariable:!0};function yw(e){switch(e){case PC.PSD:return mw;case PC.PSB:return Bw;default:throw new Hy}}var Cw,ww,bw,xw,Qw,Ew,Iw,_w,Sw;function Fw(e){if(!(e in Cw))throw new Xy;return e}function kw(e){if(!(e in xw))throw new iC;return e}function Uw(e){if(!(e in Ew))throw new oC(`Invalid slice origin: ${e}`);return e}function Ow(e,t=255){if(!(0<=t&&t<=255))throw new eC;const A=e.length/4,n=function(e){switch(e){case ww.Red:return 0;case ww.Green:return 1;case ww.Blue:return 2;case ww.TransparencyMask:return 3;default:throw new $y}}(ww.TransparencyMask),i=t/255;for(let r=0;r<A;r++){const t=4*r+n;e[t]=Math.floor(i*e[t])}return e}!function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"}(Cw||(Cw={})),function(e){e[e.Red=0]="Red",e[e.Green=1]="Green",e[e.Blue=2]="Blue",e[e.TransparencyMask=-1]="TransparencyMask",e[e.UserSuppliedLayerMask=-2]="UserSuppliedLayerMask",e[e.RealUserSuppliedLayerMask=-3]="RealUserSuppliedLayerMask"}(ww||(ww={})),function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.CloseFolder=2]="CloseFolder",e[e.BoundingSection=3]="BoundingSection"}(bw||(bw={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(xw||(xw={})),function(e){e[e.GridAndGuides=1032]="GridAndGuides",e[e.Slices=1050]="Slices",e[e.ICCProfile=1039]="ICCProfile",e[e.GlobalLightAngle=1037]="GlobalLightAngle",e[e.GlobalLightAltitude=1049]="GlobalLightAltitude",e[e.ResolutionInfo=1005]="ResolutionInfo"}(Qw||(Qw={})),function(e){e[e.AutoGenerated=0]="AutoGenerated",e[e.LayerGenerated=1]="LayerGenerated",e[e.UserGenerated=2]="UserGenerated"}(Ew||(Ew={})),function(e){e[e.PixelsPerInch=1]="PixelsPerInch",e[e.PixelsPerCM=2]="PixelsPerCM"}(Iw||(Iw={})),function(e){e[e.Inch=1]="Inch",e[e.CM=2]="CM",e[e.Point=3]="Point",e[e.Pica=4]="Pica",e[e.Column=5]="Column"}(_w||(_w={})),function(e){e.Class="Clss",e.Enumerated="Enmr",e.Identifier="Idnt",e.Index="indx",e.Name="name",e.Offset="rele",e.Property="prop"}(Sw||(Sw={}));let Dw,Tw,Mw,Lw,Hw,Pw,Rw,Nw,jw,Vw,Kw=u(void 0,null,(function*(){let e;Mw=function(t){e=t};const t=new Array(128).fill(void 0);function A(e){return t[e]}t.push(void 0,null,!0,!1);let n=t.length;function i(e){const i=A(e);return function(e){e<132||(t[e]=n,n=e)}(e),i}let r=new(typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});r.decode();let o=null;function s(){return(null===o||0===o.byteLength)&&(o=new Uint8Array(e.memory.buffer)),o}let a=0;function l(e,t){const A=t(1*e.length,1)>>>0;return s().set(e,A/1),a=e.length,A}let c=null;function h(){return(null===c||0===c.byteLength)&&(c=new Int32Array(e.memory.buffer)),c}function d(e,t){return e>>>=0,s().subarray(e/1,e/1+t)}jw=function(t,A,n,i,r,o,s){try{const g=e.__wbindgen_add_to_stack_pointer(-16),p=l(A,e.__wbindgen_malloc),v=a,m=l(i,e.__wbindgen_malloc),B=a,y=l(o,e.__wbindgen_malloc),C=a;e.decode_rgb(g,t,p,v,n,m,B,r,y,C,s);var c=h()[g/4+0],u=h()[g/4+1],f=d(c,u).slice();return e.__wbindgen_free(c,1*u),f}finally{e.__wbindgen_add_to_stack_pointer(16)}},Vw=function(t,A,n,i,r,o,s,c,u){try{const v=e.__wbindgen_add_to_stack_pointer(-16),m=l(A,e.__wbindgen_malloc),B=a,y=l(i,e.__wbindgen_malloc),C=a,w=l(o,e.__wbindgen_malloc),b=a,x=l(c,e.__wbindgen_malloc),Q=a;e.decode_rgba(v,t,m,B,n,y,C,r,w,b,s,x,Q,u);var f=h()[v/4+0],g=h()[v/4+1],p=d(f,g).slice();return e.__wbindgen_free(f,1*g),p}finally{e.__wbindgen_add_to_stack_pointer(16)}},Rw=function(t,A,n){try{const s=e.__wbindgen_add_to_stack_pointer(-16),c=l(A,e.__wbindgen_malloc),u=a;e.decode_grayscale(s,t,c,u,n);var i=h()[s/4+0],r=h()[s/4+1],o=d(i,r).slice();return e.__wbindgen_free(i,1*r),o}finally{e.__wbindgen_add_to_stack_pointer(16)}},Nw=function(t,A,n,i,r){try{const u=e.__wbindgen_add_to_stack_pointer(-16),f=l(A,e.__wbindgen_malloc),g=a,p=l(i,e.__wbindgen_malloc),v=a;e.decode_grayscale_a(u,t,f,g,n,p,v,r);var o=h()[u/4+0],s=h()[u/4+1],c=d(o,s).slice();return e.__wbindgen_free(o,1*s),c}finally{e.__wbindgen_add_to_stack_pointer(16)}};let f=new(typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const g="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const A=f.encode(e);return t.set(A),{read:e.length,written:A.length}};Tw=function(){return function(e){n===t.length&&t.push(t.length+1);const A=n;return n=t[A],t[A]=e,A}(new Error)},Lw=function(t,n){const i=function(e,t,A){if(void 0===A){const A=f.encode(e),n=t(A.length,1)>>>0;return s().subarray(n,n+A.length).set(A),a=A.length,n}let n=e.length,i=t(n,1)>>>0;const r=s();let o=0;for(;o<n;o++){const t=e.charCodeAt(o);if(t>127)break;r[i+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),i=A(i,n,n=o+3*e.length,1)>>>0;const t=s().subarray(i+o,i+n);o+=g(e,t).written}return a=o,i}(A(n).stack,e.__wbindgen_malloc,e.__wbindgen_realloc),r=a;h()[t/4+1]=r,h()[t/4+0]=i},Dw=function(t,A){let n,i;try{n=t,i=A}finally{e.__wbindgen_free(n,i,1)}},Hw=function(e){i(e)},Pw=function(e,t){throw new Error(function(e,t){return e>>>=0,r.decode(s().subarray(e,e+t))}(e,t))},URL=globalThis.URL;const p=yield((...e)=>u(void 0,[...e],(function*(e={},t){let A;if(t.startsWith("data:")){const n=t.replace(/^data:.*?base64,/,"");let i;if("function"==typeof Buffer&&"function"==typeof Buffer.from)i=Buffer.from(n,"base64");else{if("function"!=typeof atob)throw new Error("Cannot decode base64-encoded data URL");{const e=atob(n);i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t)}}A=yield WebAssembly.instantiate(i,e)}else{const n=yield fetch(t),i=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))A=yield WebAssembly.instantiateStreaming(n,e);else{const t=yield n.arrayBuffer();A=yield WebAssembly.instantiate(t,e)}}return A.instance.exports})))({"./webtoon_psd_decoder_bg.js":{__wbg_new_abda76e883ba8a5f:Tw,__wbg_stack_658279fe44541cf6:Lw,__wbg_error_f851667af71bcfc6:Dw,__wbindgen_object_drop_ref:Hw,__wbindgen_throw:Pw}},"data:application/wasm;base64,AGFzbQEAAAABbw9gAn9/AX9gAn9/AGADf39/AX9gAX8Bf2ABfwBgA39/fwBgAX8BfmAAAX9gBX9/f39/AGAAAGAEf39/fwF/YA5/f39/f39/f39/f39/fwBgC39/f39/f39/f39/AGAEf39/fwBgCH9/f39/f39/AAKYAgUbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzGl9fd2JnX25ld19hYmRhNzZlODgzYmE4YTVmAAcbLi93ZWJ0b29uX3BzZF9kZWNvZGVyX2JnLmpzHF9fd2JnX3N0YWNrXzY1ODI3OWZlNDQ1NDFjZjYAARsuL3dlYnRvb25fcHNkX2RlY29kZXJfYmcuanMcX193YmdfZXJyb3JfZjg1MTY2N2FmNzFiY2ZjNgABGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxpfX3diaW5kZ2VuX29iamVjdF9kcm9wX3JlZgAEGy4vd2VidG9vbl9wc2RfZGVjb2Rlcl9iZy5qcxBfX3diaW5kZ2VuX3Rocm93AAEDVVQDBAICAQAAAAAEAQcICwUMAQEIDQ4BCAEAAAAFAQICCQAJAQoBCgMBBAUBBAMDAQAKBQMAAAAAAAEDAAMDAQMAAAMJAwMDAwECAgcAAAMDAQYGBgQEBQFwASUlBQMBABEGCQF/AUGAgMAACwfHAQsGbWVtb3J5AgAHbWFpbl9qcwAkCmRlY29kZV9yZ2IAFAtkZWNvZGVfcmdiYQASEGRlY29kZV9ncmF5c2NhbGUAGxJkZWNvZGVfZ3JheXNjYWxlX2EAGR9fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyAEYRX193YmluZGdlbl9tYWxsb2MAJQ9fX3diaW5kZ2VuX2ZyZWUANhJfX3diaW5kZ2VuX3JlYWxsb2MAKhBfX3diaW5kZ2VuX3N0YXJ0ACQJKgEAQQELJFhUVFRYIgsdMCMNH1g5RRpYIgweMFZVLRYcJz1XRDs/OjhYVwr0lwFU/CACD38BfiMAQRBrIgskAAJAAkACQAJAAkACQCAAQfUBTwRAQQhBCBA0IQZBFEEIEDQhBUEQQQgQNCEBQQBBEEEIEDRBAnRrIgJBgIB8IAEgBSAGamprQXdxQQNrIgEgASACSxsgAE0NBiAAQQRqQQgQNCEEQdiQwAAoAgBFDQVBACAEayEDAn9BACAEQYACSQ0AGkEfIARB////B0sNABogBEEGIARBCHZnIgBrdkEBcSAAQQF0a0E+agsiBkECdEG8jcAAaigCACIBDQFBACEAQQAhBQwCC0EQIABBBGpBEEEIEDRBBWsgAEsbQQgQNCEEAkACQAJAAn8CQAJAQdSQwAAoAgAiASAEQQN2IgB2IgJBA3FFBEAgBEHckMAAKAIATQ0LIAINAUHYkMAAKAIAIgBFDQsgABBAaEECdEG8jcAAaigCACIBEEggBGshAyABEDEiAARAA0AgABBIIARrIgIgAyACIANJIgIbIQMgACABIAIbIQEgABAxIgANAAsLIAEgBBBQIQUgARAOQRBBCBA0IANLDQUgASAEEEIgBSADEDNB3JDAACgCACIARQ0EIABBeHFBzI7AAGohB0HkkMAAKAIAIQZB1JDAACgCACICQQEgAEEDdnQiAHFFDQIgBygCCAwDCwJAIAJBf3NBAXEgAGoiA0EDdCIAQdSOwABqKAIAIgVBCGooAgAiAiAAQcyOwABqIgBHBEAgAiAANgIMIAAgAjYCCAwBC0HUkMAAIAFBfiADd3E2AgALIAUgA0EDdBAvIAUQUiEDDAsLAkBBASAAQR9xIgB0EDcgAiAAdHEQQGgiAkEDdCIAQdSOwABqKAIAIgNBCGooAgAiASAAQcyOwABqIgBHBEAgASAANgIMIAAgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiACd3E2AgALIAMgBBBCIAMgBBBQIgUgAkEDdCAEayICEDNB3JDAACgCACIABEAgAEF4cUHMjsAAaiEHQeSQwAAoAgAhBgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgBygCCAwBC0HUkMAAIAAgAXI2AgAgBwshACAHIAY2AgggACAGNgIMIAYgBzYCDCAGIAA2AggLQeSQwAAgBTYCAEHckMAAIAI2AgAgAxBSIQMMCgtB1JDAACAAIAJyNgIAIAcLIQAgByAGNgIIIAAgBjYCDCAGIAc2AgwgBiAANgIIC0HkkMAAIAU2AgBB3JDAACADNgIADAELIAEgAyAEahAvCyABEFIiAw0FDAQLIAQgBhAydCEHQQAhAEEAIQUDQAJAIAEQSCICIARJDQAgAiAEayICIANPDQAgASEFIAIiAw0AQQAhAyABIQAMAwsgAUEUaigCACICIAAgAiABIAdBHXZBBHFqQRBqKAIAIgFHGyAAIAIbIQAgB0EBdCEHIAENAAsLIAAgBXJFBEBBACEFQQEgBnQQN0HYkMAAKAIAcSIARQ0DIAAQQGhBAnRBvI3AAGooAgAhAAsgAEUNAQsDQCAAIAUgABBIIgEgBE8gASAEayICIANJcSIBGyEFIAIgAyABGyEDIAAQMSIADQALCyAFRQ0AIARB3JDAACgCACIATSADIAAgBGtPcQ0AIAUgBBBQIQYgBRAOAkBBEEEIEDQgA00EQCAFIAQQQiAGIAMQMyADQYACTwRAIAYgAxAPDAILIANBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIANBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAY2AgggACAGNgIMIAYgAjYCDCAGIAA2AggMAQsgBSADIARqEC8LIAUQUiIDDQELAkACQAJAAkACQAJAAkAgBEHckMAAKAIAIgBLBEBB4JDAACgCACIAIARLDQJBCEEIEDQgBGpBFEEIEDRqQRBBCBA0akGAgAQQNCIAQRB2QAAhASALQQA2AgggC0EAIABBgIB8cSABQX9GIgAbNgIEIAtBACABQRB0IAAbNgIAIAsoAgAiCA0BQQAhAwwIC0HkkMAAKAIAIQJBEEEIEDQgACAEayIBSwRAQeSQwABBADYCAEHckMAAKAIAIQBB3JDAAEEANgIAIAIgABAvIAIQUiEDDAgLIAIgBBBQIQBB3JDAACABNgIAQeSQwAAgADYCACAAIAEQMyACIAQQQiACEFIhAwwHCyALKAIIIQxB7JDAACALKAIEIgpB7JDAACgCAGoiATYCAEHwkMAAQfCQwAAoAgAiACABIAAgAUsbNgIAAkACQAJAQeiQwAAoAgAEQEG8jsAAIQADQCAAEEMgCEYNAiAAKAIIIgANAAsMAgtB+JDAACgCACIARSAAIAhLcg0FDAcLIAAQSg0AIAAQSyAMRw0AIAAoAgAiAkHokMAAKAIAIgFNBH8gAiAAKAIEaiABSwVBAAsNAQtB+JDAAEH4kMAAKAIAIgAgCCAAIAhJGzYCACAIIApqIQFBvI7AACEAAkACQANAIAEgACgCAEcEQCAAKAIIIgANAQwCCwsgABBKDQAgABBLIAxGDQELQeiQwAAoAgAhCUG8jsAAIQACQANAIAkgACgCAE8EQCAAEEMgCUsNAgsgACgCCCIADQALQQAhAAsgCSAAEEMiBkEUQQgQNCIPa0EXayIBEFIiAEEIEDQgAGsgAWoiACAAQRBBCBA0IAlqSRsiDRBSIQ4gDSAPEFAhAEEIQQgQNCEDQRRBCBA0IQVBEEEIEDQhAkHokMAAIAggCBBSIgFBCBA0IAFrIgEQUCIHNgIAQeCQwAAgCkEIaiACIAMgBWpqIAFqayIDNgIAIAcgA0EBcjYCBEEIQQgQNCEFQRRBCBA0IQJBEEEIEDQhASAHIAMQUCABIAIgBUEIa2pqNgIEQfSQwABBgICAATYCACANIA8QQkG8jsAAKQIAIRAgDkEIakHEjsAAKQIANwIAIA4gEDcCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHEjsAAIA42AgADQCAAQQQQUCAAQQc2AgQiAEEEaiAGSQ0ACyAJIA1GDQcgCSANIAlrIgAgCSAAEFAQLiAAQYACTwRAIAkgABAPDAgLIABBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIABBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAk2AgggACAJNgIMIAkgAjYCDCAJIAA2AggMBwsgACgCACEDIAAgCDYCACAAIAAoAgQgCmo2AgQgCBBSIgVBCBA0IQIgAxBSIgFBCBA0IQAgCCACIAVraiIGIAQQUCEHIAYgBBBCIAMgACABa2oiACAEIAZqayEEQeiQwAAoAgAgAEcEQCAAQeSQwAAoAgBGDQMgACgCBEEDcUEBRw0FAkAgABBIIgVBgAJPBEAgABAODAELIABBDGooAgAiAiAAQQhqKAIAIgFHBEAgASACNgIMIAIgATYCCAwBC0HUkMAAQdSQwAAoAgBBfiAFQQN2d3E2AgALIAQgBWohBCAAIAUQUCEADAULQeiQwAAgBzYCAEHgkMAAQeCQwAAoAgAgBGoiADYCACAHIABBAXI2AgQgBhBSIQMMBwsgACAAKAIEIApqNgIEQeCQwAAoAgAgCmohAUHokMAAKAIAIgAgABBSIgBBCBA0IABrIgAQUCEDQeCQwAAgASAAayIFNgIAQeiQwAAgAzYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgAMBQtB4JDAACAAIARrIgE2AgBB6JDAAEHokMAAKAIAIgIgBBBQIgA2AgAgACABQQFyNgIEIAIgBBBCIAIQUiEDDAULQeSQwAAgBzYCAEHckMAAQdyQwAAoAgAgBGoiADYCACAHIAAQMyAGEFIhAwwEC0H4kMAAIAg2AgAMAQsgByAEIAAQLiAEQYACTwRAIAcgBBAPIAYQUiEDDAMLIARBeHFBzI7AAGohAgJ/QdSQwAAoAgAiAUEBIARBA3Z0IgBxBEAgAigCCAwBC0HUkMAAIAAgAXI2AgAgAgshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AgggBhBSIQMMAgtB/JDAAEH/HzYCAEHIjsAAIAw2AgBBwI7AACAKNgIAQbyOwAAgCDYCAEHYjsAAQcyOwAA2AgBB4I7AAEHUjsAANgIAQdSOwABBzI7AADYCAEHojsAAQdyOwAA2AgBB3I7AAEHUjsAANgIAQfCOwABB5I7AADYCAEHkjsAAQdyOwAA2AgBB+I7AAEHsjsAANgIAQeyOwABB5I7AADYCAEGAj8AAQfSOwAA2AgBB9I7AAEHsjsAANgIAQYiPwABB/I7AADYCAEH8jsAAQfSOwAA2AgBBkI/AAEGEj8AANgIAQYSPwABB/I7AADYCAEGYj8AAQYyPwAA2AgBBjI/AAEGEj8AANgIAQZSPwABBjI/AADYCAEGgj8AAQZSPwAA2AgBBnI/AAEGUj8AANgIAQaiPwABBnI/AADYCAEGkj8AAQZyPwAA2AgBBsI/AAEGkj8AANgIAQayPwABBpI/AADYCAEG4j8AAQayPwAA2AgBBtI/AAEGsj8AANgIAQcCPwABBtI/AADYCAEG8j8AAQbSPwAA2AgBByI/AAEG8j8AANgIAQcSPwABBvI/AADYCAEHQj8AAQcSPwAA2AgBBzI/AAEHEj8AANgIAQdiPwABBzI/AADYCAEHgj8AAQdSPwAA2AgBB1I/AAEHMj8AANgIAQeiPwABB3I/AADYCAEHcj8AAQdSPwAA2AgBB8I/AAEHkj8AANgIAQeSPwABB3I/AADYCAEH4j8AAQeyPwAA2AgBB7I/AAEHkj8AANgIAQYCQwABB9I/AADYCAEH0j8AAQeyPwAA2AgBBiJDAAEH8j8AANgIAQfyPwABB9I/AADYCAEGQkMAAQYSQwAA2AgBBhJDAAEH8j8AANgIAQZiQwABBjJDAADYCAEGMkMAAQYSQwAA2AgBBoJDAAEGUkMAANgIAQZSQwABBjJDAADYCAEGokMAAQZyQwAA2AgBBnJDAAEGUkMAANgIAQbCQwABBpJDAADYCAEGkkMAAQZyQwAA2AgBBuJDAAEGskMAANgIAQayQwABBpJDAADYCAEHAkMAAQbSQwAA2AgBBtJDAAEGskMAANgIAQciQwABBvJDAADYCAEG8kMAAQbSQwAA2AgBB0JDAAEHEkMAANgIAQcSQwABBvJDAADYCAEHMkMAAQcSQwAA2AgBBCEEIEDQhBUEUQQgQNCECQRBBCBA0IQFB6JDAACAIIAgQUiIAQQgQNCAAayIAEFAiAzYCAEHgkMAAIApBCGogASACIAVqaiAAamsiBTYCACADIAVBAXI2AgRBCEEIEDQhAkEUQQgQNCEBQRBBCBA0IQAgAyAFEFAgACABIAJBCGtqajYCBEH0kMAAQYCAgAE2AgALQQAhA0HgkMAAKAIAIgAgBE0NAEHgkMAAIAAgBGsiATYCAEHokMAAQeiQwAAoAgAiAiAEEFAiADYCACAAIAFBAXI2AgQgAiAEEEIgAhBSIQMLIAtBEGokACADC5gHAQV/IAAQUyIAIAAQSCIBEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsCQCACED4EQCAAIAEgAhAuDAELAkACQAJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiICNgIAIAAgAhAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiICNgIAIAAgAkEBcjYCBCAAQeSQwAAoAgBGDQEMAgsgAhBIIgMgAWohAQJAIANBgAJPBEAgAhAODAELIAJBDGooAgAiBCACQQhqKAIAIgJHBEAgAiAENgIMIAQgAjYCCAwBC0HUkMAAQdSQwAAoAgBBfiADQQN2d3E2AgALIAAgARAzIABB5JDAACgCAEcNAkHckMAAIAE2AgAMAwtB3JDAAEEANgIAQeSQwABBADYCAAtB9JDAACgCACACTw0BQQhBCBA0IQBBFEEIEDQhAkEQQQgQNCEDQQBBEEEIEDRBAnRrIgFBgIB8IAMgACACamprQXdxQQNrIgAgACABSxtFDQFB6JDAACgCAEUNAUEIQQgQNCEAQRRBCBA0IQJBEEEIEDQhAUEAIQMCQEHgkMAAKAIAIgQgASACIABBCGtqaiIATQ0AIAQgAGtB//8DakGAgHxxIgRBgIAEayECQeiQwAAoAgAhAUG8jsAAIQACQANAIAEgACgCAE8EQCAAEEMgAUsNAgsgACgCCCIADQALQQAhAAsgABBKDQAgAEEMaigCABoMAAsQEEEAIANrRw0BQeCQwAAoAgBB9JDAACgCAE0NAUH0kMAAQX82AgAPCyABQYACSQ0BIAAgARAPQfyQwABB/JDAACgCAEEBayIANgIAIAANABAQGg8LDwsgAUF4cUHMjsAAaiECAn9B1JDAACgCACIDQQEgAUEDdnQiAXEEQCACKAIIDAELQdSQwAAgASADcjYCACACCyEDIAIgADYCCCADIAA2AgwgACACNgIMIAAgAzYCCAvIDQEMfwJAAkAgACgCCCIKIAAoAhAiA3IEQAJAIANFDQAgASACaiEIIABBFGooAgBBAWohByABIQQDQAJAIAQhAyAHQQFrIgdFDQAgAyAIRg0CAn8gAywAACIEQQBOBEAgBEH/AXEhBSADQQFqDAELIAMtAAFBP3EhCSAEQR9xIQUgBEFfTQRAIAVBBnQgCXIhBSADQQJqDAELIAMtAAJBP3EgCUEGdHIhCSAEQXBJBEAgCSAFQQx0ciEFIANBA2oMAQsgBUESdEGAgPAAcSADLQADQT9xIAlBBnRyciIFQYCAxABGDQMgA0EEagsiBCAGIANraiEGIAVBgIDEAEcNAQwCCwsgAyAIRg0AIAMsAAAiBEEATiAEQWBJciAEQXBJckUEQCAEQf8BcUESdEGAgPAAcSADLQADQT9xIAMtAAJBP3FBBnQgAy0AAUE/cUEMdHJyckGAgMQARg0BCwJAAkAgBkUNACACIAZNBEBBACEDIAIgBkYNAQwCC0EAIQMgASAGaiwAAEFASA0BCyABIQMLIAYgAiADGyECIAMgASADGyEBCyAKRQ0CIABBDGooAgAhDAJAIAJBEE8EQAJ/QQAhBUEAIQcCQAJAIAEiA0EDakF8cSIEIANrIgggAksgCEEES3INACACIAhrIglBBEkNACAJQQNxIQpBACEGAkAgAyAERg0AIAhBA3EhBQJAIAQgA0F/c2pBA0kEQCADIQQMAQsgCEF8cSELIAMhBANAIAYgBCwAAEG/f0pqIAQsAAFBv39KaiAELAACQb9/SmogBCwAA0G/f0pqIQYgBEEEaiEEIAtBBGsiCw0ACwsgBUUNAANAIAYgBCwAAEG/f0pqIQYgBEEBaiEEIAVBAWsiBQ0ACwsgAyAIaiEDAkAgCkUNACADIAlBfHFqIgQsAABBv39KIQcgCkEBRg0AIAcgBCwAAUG/f0pqIQcgCkECRg0AIAcgBCwAAkG/f0pqIQcLIAlBAnYhCCAGIAdqIQUDQCADIQYgCEUNAkHAASAIIAhBwAFPGyIHQQNxIQkgB0ECdCELAkAgB0H8AXEiCkUEQEEAIQQMAQsgBiAKQQJ0aiENQQAhBANAIANFDQEgBCADKAIAIg5Bf3NBB3YgDkEGdnJBgYKECHFqIANBBGooAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcWogA0EIaigCACIEQX9zQQd2IARBBnZyQYGChAhxaiADQQxqKAIAIgRBf3NBB3YgBEEGdnJBgYKECHFqIQQgA0EQaiIDIA1HDQALCyAIIAdrIQggBiALaiEDIARBCHZB/4H8B3EgBEH/gfwHcWpBgYAEbEEQdiAFaiEFIAlFDQALAn9BACAGRQ0AGiAGIApBAnRqIgMoAgAiBEF/c0EHdiAEQQZ2ckGBgoQIcSIEIAlBAUYNABogBCADKAIEIgZBf3NBB3YgBkEGdnJBgYKECHFqIgQgCUECRg0AGiAEIAMoAggiA0F/c0EHdiADQQZ2ckGBgoQIcWoLIgNBCHZB/4EccSADQf+B/AdxakGBgARsQRB2IAVqDAILQQAgAkUNARogAkEDcSEEIAJBBE8EQCACQXxxIQYDQCAFIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEFIANBBGohAyAGQQRrIgYNAAsLIARFDQADQCAFIAMsAABBv39KaiEFIANBAWohAyAEQQFrIgQNAAsLIAULIQQMAQsgAkUEQEEAIQQMAQsgAkEDcSEFAkAgAkEESQRAQQAhBCABIQMMAQsgAkF8cSEHQQAhBCABIQMDQCAEIAMsAABBv39KaiADLAABQb9/SmogAywAAkG/f0pqIAMsAANBv39KaiEEIANBBGohAyAHQQRrIgcNAAsLIAVFDQADQCAEIAMsAABBv39KaiEEIANBAWohAyAFQQFrIgUNAAsLIAQgDEkEQCAMIARrIgQhBgJAAkACQCAALQAgIgNBACADQQNHGyIDQQFrDgIAAQILQQAhBiAEIQMMAQsgBEEBdiEDIARBAWpBAXYhBgsgA0EBaiEDIABBBGooAgAhBCAAKAIcIQUgACgCACEAAkADQCADQQFrIgNFDQEgACAFIAQoAhARAABFDQALQQEPC0EBIQMgBUGAgMQARg0CIAAgASACIAQoAgwRAgANAkEAIQMDQCADIAZGBEBBAA8LIANBAWohAyAAIAUgBCgCEBEAAEUNAAsgA0EBayAGSQ8LDAILIAAoAgAgASACIAAoAgQoAgwRAgAhAwsgAw8LIAAoAgAgASACIAAoAgQoAgwRAgAL9wQBCn8jAEEwayIDJAAgA0EDOgAoIANCgICAgIAENwMgIANBADYCGCADQQA2AhAgAyABNgIMIAMgADYCCAJ/AkACQCACKAIAIgpFBEAgAkEUaigCACIARQ0BIAIoAhAhASAAQQN0IQUgAEEBa0H/////AXFBAWohByACKAIIIQADQCAAQQRqKAIAIgQEQCADKAIIIAAoAgAgBCADKAIMKAIMEQIADQQLIAEoAgAgA0EIaiABQQRqKAIAEQAADQMgAUEIaiEBIABBCGohACAFQQhrIgUNAAsMAQsgAigCBCIARQ0AIABBBXQhCyAAQQFrQf///z9xQQFqIQcgAigCCCEAA0AgAEEEaigCACIBBEAgAygCCCAAKAIAIAEgAygCDCgCDBECAA0DCyADIAUgCmoiBEEcai0AADoAKCADIARBFGopAgA3AyAgBEEQaigCACEGIAIoAhAhCEEAIQlBACEBAkACQAJAIARBDGooAgBBAWsOAgACAQsgBkEDdCAIaiIMQQRqKAIAQR5HDQEgDCgCACgCACEGC0EBIQELIAMgBjYCFCADIAE2AhAgBEEIaigCACEBAkACQAJAIARBBGooAgBBAWsOAgACAQsgAUEDdCAIaiIGQQRqKAIAQR5HDQEgBigCACgCACEBC0EBIQkLIAMgATYCHCADIAk2AhggCCAEKAIAQQN0aiIBKAIAIANBCGogASgCBBEAAA0CIABBCGohACALIAVBIGoiBUcNAAsLIAJBDGooAgAgB0sEQCADKAIIIAIoAgggB0EDdGoiACgCACAAKAIEIAMoAgwoAgwRAgANAQtBAAwBC0EBCyADQTBqJAALywQBBH8gACABEFAhAgJAAkACQCAAEEkNACAAKAIAIQMCQCAAEEFFBEAgASADaiEBIAAgAxBRIgBB5JDAACgCAEcNASACKAIEQQNxQQNHDQJB3JDAACABNgIAIAAgASACEC4PCyABIANqQRBqIQAMAgsgA0GAAk8EQCAAEA4MAQsgAEEMaigCACIEIABBCGooAgAiBUcEQCAFIAQ2AgwgBCAFNgIIDAELQdSQwABB1JDAACgCAEF+IANBA3Z3cTYCAAsgAhA+BEAgACABIAIQLgwCCwJAQeiQwAAoAgAgAkcEQCACQeSQwAAoAgBHDQFB5JDAACAANgIAQdyQwABB3JDAACgCACABaiIBNgIAIAAgARAzDwtB6JDAACAANgIAQeCQwABB4JDAACgCACABaiIBNgIAIAAgAUEBcjYCBCAAQeSQwAAoAgBHDQFB3JDAAEEANgIAQeSQwABBADYCAA8LIAIQSCIDIAFqIQECQCADQYACTwRAIAIQDgwBCyACQQxqKAIAIgQgAkEIaigCACICRwRAIAIgBDYCDCAEIAI2AggMAQtB1JDAAEHUkMAAKAIAQX4gA0EDdndxNgIACyAAIAEQMyAAQeSQwAAoAgBHDQFB3JDAACABNgIACw8LIAFBgAJPBEAgACABEA8PCyABQXhxQcyOwABqIQICf0HUkMAAKAIAIgNBASABQQN2dCIBcQRAIAIoAggMAQtB1JDAACABIANyNgIAIAILIQEgAiAANgIIIAEgADYCDCAAIAI2AgwgACABNgIIC/cCAQV/AkACQAJAAkAgAUEJTwRAQRBBCBA0IAFLDQEMAgsgABAFIQQMAgtBEEEIEDQhAQtBCEEIEDQhA0EUQQgQNCECQRBBCBA0IQVBAEEQQQgQNEECdGsiBkGAgHwgBSACIANqamtBd3FBA2siAyADIAZLGyABayAATQ0AIAFBECAAQQRqQRBBCBA0QQVrIABLG0EIEDQiA2pBEEEIEDRqQQRrEAUiAkUNACACEFMhAAJAIAFBAWsiBCACcUUEQCAAIQEMAQsgAiAEakEAIAFrcRBTIQJBEEEIEDQhBCAAEEggAiABQQAgAiAAayAETRtqIgEgAGsiAmshBCAAEEFFBEAgASAEECwgACACECwgACACEAkMAQsgACgCACEAIAEgBDYCBCABIAAgAmo2AgALIAEQQQ0BIAEQSCICQRBBCBA0IANqTQ0BIAEgAxBQIQAgASADECwgACACIANrIgMQLCAAIAMQCQwBCyAEDwsgARBSIAEQQRoL0gIBAn8jAEEQayICJAAgACgCACEAAkAgAUH/AE0EQCAAKAIIIgMgACgCAEYEfyAAIAMQFSAAKAIIBSADCyAAKAIEaiABOgAAIAAgACgCCEEBajYCCAwBCyACQQA2AgwCfyABQYAQTwRAIAFBgIAETwRAIAIgAUE/cUGAAXI6AA8gAiABQQZ2QT9xQYABcjoADiACIAFBDHZBP3FBgAFyOgANIAIgAUESdkEHcUHwAXI6AAxBBAwCCyACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAELIAIgAUE/cUGAAXI6AA0gAiABQQZ2QcABcjoADEECCyEBIAEgACgCACAAKAIIIgNrSwRAIAAgAyABEBMgACgCCCEDCyAAKAIEIANqIAJBDGogARBOGiAAIAEgA2o2AggLIAJBEGokAEEAC9ACAQJ/IwBBEGsiAiQAIAAoAgAhAAJAIAFB/wBNBEAgACgCCCIDIAAoAgBGBEAgACADEBUgACgCCCEDCyAAIANBAWo2AgggACgCBCADaiABOgAADAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALywIBAn8jAEEQayICJAACQCABQf8ATQRAIAAoAggiAyAAKAIARgR/IAAgAxAVIAAoAggFIAMLIAAoAgRqIAE6AAAgACAAKAIIQQFqNgIIDAELIAJBADYCDAJ/IAFBgBBPBEAgAUGAgARPBEAgAiABQT9xQYABcjoADyACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA0gAiABQRJ2QQdxQfABcjoADEEEDAILIAIgAUE/cUGAAXI6AA4gAiABQQx2QeABcjoADCACIAFBBnZBP3FBgAFyOgANQQMMAQsgAiABQT9xQYABcjoADSACIAFBBnZBwAFyOgAMQQILIQEgASAAKAIAIAAoAggiA2tLBEAgACADIAEQEyAAKAIIIQMLIAAoAgQgA2ogAkEMaiABEE4aIAAgASADajYCCAsgAkEQaiQAQQALvAIBBX8gACgCGCEDAkACQCAAIAAoAgxGBEAgAEEUQRAgAEEUaiIBKAIAIgQbaigCACICDQFBACEBDAILIAAoAggiAiAAKAIMIgE2AgwgASACNgIIDAELIAEgAEEQaiAEGyEEA0AgBCEFIAIiAUEUaiICIAFBEGogAigCACICGyEEIAFBFEEQIAIbaigCACICDQALIAVBADYCAAsCQCADRQ0AAkAgACAAKAIcQQJ0QbyNwABqIgIoAgBHBEAgA0EQQRQgAygCECAARhtqIAE2AgAgAUUNAgwBCyACIAE2AgAgAQ0AQdiQwABB2JDAACgCAEF+IAAoAhx3cTYCAA8LIAEgAzYCGCAAKAIQIgIEQCABIAI2AhAgAiABNgIYCyAAQRRqKAIAIgBFDQAgAUEUaiAANgIAIAAgATYCGAsLoAIBBH8gAEIANwIQIAACf0EAIAFBgAJJDQAaQR8gAUH///8HSw0AGiABQQYgAUEIdmciAmt2QQFxIAJBAXRrQT5qCyIDNgIcIANBAnRBvI3AAGohAgJAAkACQAJAQdiQwAAoAgAiBEEBIAN0IgVxBEAgAigCACECIAMQMiEDIAIQSCABRw0BIAIhAwwCC0HYkMAAIAQgBXI2AgAgAiAANgIADAMLIAEgA3QhBANAIAIgBEEddkEEcWpBEGoiBSgCACIDRQ0CIARBAXQhBCADIgIQSCABRw0ACwsgAygCCCIBIAA2AgwgAyAANgIIIAAgAzYCDCAAIAE2AgggAEEANgIYDwsgBSAANgIACyAAIAI2AhggACAANgIIIAAgADYCDAtgAQx/QcSOwAAoAgAiAgRAQbyOwAAhBgNAIAIiASgCCCECIAEoAgQhAyABKAIAIQQgAUEMaigCABogASEGIAVBAWohBSACDQALC0H8kMAAQf8fIAUgBUH/H00bNgIAIAgLlgIBA38gACABaiEHAkACQAJAAkADQCAAIAdHBEAgAC0AACEFIABBAWoiASEAIAVBgAFGDQEgBcBBAE4EQEEAIQYDQCAAIAdGDQQgAiAETw0FIAIgA2ogAC0AADoAACACQQRqIQIgAEEBaiEAIAZB/wFxIAZBAWohBiAFSQ0ACwwCCyABIAdGDQVBASAFayEFIAFBAWohACABLQAAIQZBACEBA0AgAiAETw0FIAIgA2ogBjoAACACQQRqIQIgAUEBaiIBQf8BcSAFQf8BcUkNAAsMAQsLDwtBtIDAAEHBAEGIgcAAECAAC0GAgMAAQRlB+IDAABAgAAtBgIDAAEEZQdSBwAAQIAALQZiBwABBO0HkgcAAECAAC+oEAQt/IwBBEGsiESQAAkACQAJAIAQOAgEAAgtBASEPCwJAAkAgBw4CAQACC0EBIRALQQAhBAJAAkAgCg4CAQACC0EBIQQLQQEhBwJAAkACQCANDgIAAQILQQAhBwsgEUEIaiEYIAIhEiADIRMgDyENIAUhFCAGIRUgECEKIAghFiAJIRcgCyEPIAwhEAJAAkACQAJAAkAgAUECdCIORQRAQQEhAQwBCyAOQQBIDQEgDhArIgFFDQILAkAgDUUEQCATRQ0BQQAhDQNAIA0gDk8NBSABIA1qIBItAAA6AAAgDUEEaiENIBJBAWohEiATQQFrIhMNAAsMAQsgEiATQQAgASAOEBELAkAgCkUEQCAVRQ0BQQEhDQNAIA0gDk8NBSABIA1qIBQtAAA6AAAgDUEEaiENIBRBAWohFCAVQQFrIhUNAAsMAQsgFCAVQQEgASAOEBELAkAgBEUEQCAXRQ0BQQIhDQNAIA0gDk8NBSABIA1qIBYtAAA6AAAgDUEEaiENIBZBAWohFiAXQQFrIhcNAAsMAQsgFiAXQQIgASAOEBELAkAgB0UEQCAQRQ0BQQMhDQNAIA0gDk8NBSABIA1qIA8tAAA6AAAgDUEEaiENIA9BAWohDyAQQQFrIhANAAsMAQsgDyAQQQMgASAOEBELIBggDjYCBCAYIAE2AgAMAwsQJgALIA5BARBMAAtBgIDAAEEZQaSAwAAQIAALIBEoAgwhBCARKAIIIQEgDARAIAsQBgsgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACABNgIAIAAgBDYCBCARQRBqJAAPCwsQRwALyQEBAn8jAEEgayIDJAACQAJAIAEgASACaiIBSw0AQQggACgCACICQQF0IgQgASABIARJGyIBIAFBCE0bIgFBf3NBH3YhBAJAIAIEQCADQQE2AhggAyACNgIUIAMgAEEEaigCADYCEAwBCyADQQA2AhgLIAMgASAEIANBEGoQGCADKAIEIQIgAygCAEUEQCAAIAE2AgAgACACNgIEDAILIANBCGooAgAiAEGBgICAeEYNASAARQ0AIAIgABBMAAsQJgALIANBIGokAAuDBAEKfyMAQRBrIg8kAAJAAkACQCAEDgIBAAILQQEhDQsCQAJAIAcOAgEAAgtBASEOC0EBIQQCQAJAAkAgCg4CAAECC0EAIQQLIA9BCGohEiACIQcgAyEKIA0hEyAFIQ0gBiEQIA4hFCAIIQ4gCSERAkACQAJAAkACQCABQQJ0IgtFBEBBASEBDAELIAtBAEgNASALQQEQPCIBRQ0CCyABQf8BIAsQTSEMAkAgE0UEQCAKRQ0BQQAhAQNAIAEgC08NBSABIAxqIActAAA6AAAgAUEEaiEBIAdBAWohByAKQQFrIgoNAAsMAQsgByAKQQAgDCALEBELAkAgFEUEQCAQRQ0BQQEhAQNAIAEgC08NBSABIAxqIA0tAAA6AAAgAUEEaiEBIA1BAWohDSAQQQFrIhANAAsMAQsgDSAQQQEgDCALEBELAkAgBEUEQCARRQ0BQQIhAQNAIAEgC08NBSABIAxqIA4tAAA6AAAgAUEEaiEBIA5BAWohDiARQQFrIhENAAsMAQsgDiARQQIgDCALEBELIBIgCzYCBCASIAw2AgAMAwsQJgALIAtBARBMAAtBgIDAAEEZQaSAwAAQIAALIA8oAgwhASAPKAIIIQQgCQRAIAgQBgsgBgRAIAUQBgsgAwRAIAIQBgsgACAENgIAIAAgATYCBCAPQRBqJAAPCwsQRwALxwEBA38jAEEgayICJAACQAJAIAFBAWoiAUUNAEEIIAAoAgAiA0EBdCIEIAEgASAESRsiASABQQhNGyIBQX9zQR92IQQCQCADBEAgAkEBNgIYIAIgAzYCFCACIABBBGooAgA2AhAMAQsgAkEANgIYCyACIAEgBCACQRBqEBggAigCBCEDIAIoAgBFBEAgACABNgIAIAAgAzYCBAwCCyACQQhqKAIAIgBBgYCAgHhGDQEgAEUNACADIAAQTAALECYACyACQSBqJAAL3AECA38BfiMAQSBrIgIkACABKAIERQRAIAEoAgwhAyACQRhqIgRBADYCACACQoCAgIAQNwMQIAIgAkEQajYCHCACQRxqQYCHwAAgAxAIGiABQQhqIAQoAgA2AgAgASACKQMQNwIACyABKQIAIQUgAUKAgICAEDcCACACQQhqIgMgAUEIaiIBKAIANgIAIAFBADYCACACIAU3AwBBDEEEEDwiAUUEQEEMQQQQTAALIAEgAikDADcCACABQQhqIAMoAgA2AgAgAEGoicAANgIEIAAgATYCACACQSBqJAAL7wEBAn8jAEEgayIFJABBuI3AAEG4jcAAKAIAIgZBAWo2AgACQAJAIAZBAEgNAEGAkcAAQYCRwAAoAgBBAWoiBjYCACAGQQJLDQAgBSAEOgAYIAUgAzYCFCAFIAI2AhAgBUHwicAANgIMIAVBmIfAADYCCEGojcAAKAIAIgJBAEgNAEGojcAAIAJBAWo2AgBBqI3AAEGwjcAAKAIABH8gBSAAIAEoAhARAQAgBSAFKQMANwMIQbCNwAAoAgAgBUEIakG0jcAAKAIAKAIUEQEAQaiNwAAoAgBBAWsFIAILNgIAIAZBAUsNACAEDQELAAsAC6sBAQF/AkAgAgRAAn8CQAJAAkAgAUEATgRAIAMoAghFDQIgAygCBCIEDQEgAQ0DIAIMBAsgAEEIakEANgIADAULIAMoAgAgBCACIAEQNQwCCyABDQAgAgwBCyABIAIQPAsiAwRAIAAgAzYCBCAAQQhqIAE2AgAgAEEANgIADwsgACABNgIEIABBCGogAjYCAAwBCyAAIAE2AgQgAEEIakEANgIACyAAQQE2AgALkQQBCX8jAEEQayIMJAACQAJAAkAgBA4CAgEACxBHAAtBASEIC0EBIQQCQAJAAkAgBw4CAAECC0EAIQQLIAxBCGohDyACIQsgAyEHIAUhDSAGIQ4gBCEQAkACQAJAAkACQCABQQJ0IglFBEBBASEKDAELIAlBAEgNASAJECsiCkUNAgsCQCAIRQRAIAdFDQFBACEIIAchASALIQQDQCAIIAlPDQUgCCAKaiAELQAAOgAAIAhBBGohCCAEQQFqIQQgAUEBayIBDQALIAchAUEBIQggCyEEA0AgCCAJTw0FIAggCmogBC0AADoAACAIQQRqIQggBEEBaiEEIAFBAWsiAQ0AC0ECIQgDQCAIIAlPDQUgCCAKaiALLQAAOgAAIAhBBGohCCALQQFqIQsgB0EBayIHDQALDAELIAsgB0EAIAogCRARIAsgB0EBIAogCRARIAsgB0ECIAogCRARCwJAIBBFBEAgDkUNAUEDIQgDQCAIIAlPDQUgCCAKaiANLQAAOgAAIAhBBGohCCANQQFqIQ0gDkEBayIODQALDAELIA0gDkEDIAogCRARCyAPIAk2AgQgDyAKNgIADAMLECYACyAJQQEQTAALQYCAwABBGUGkgMAAECAACyAMKAIMIQQgDCgCCCEBIAYEQCAFEAYLIAMEQCACEAYLIAAgATYCACAAIAQ2AgQgDEEQaiQADwsQRwALcQAjAEEwayIBJABBgI3AAC0AAARAIAFBFGpBAjYCACABQRxqQQE2AgAgAUHoh8AANgIQIAFBADYCCCABQQ82AiQgASAANgIsIAEgAUEgajYCGCABIAFBLGo2AiAgAUEIakGQiMAAECkACyABQTBqJAALpAMBB38jAEEQayIKJABBASEHAkACQAJAIAQOAgABAgtBACEHCyAKQQhqIQsgAiEEIAMhCAJAAkACQAJAAkAgAUECdCIGRQRAQQEhBQwBCyAGQQBIDQEgBkEBEDwiBUUNAgsgBUH/ASAGEE0hCQJAIAdFBEAgCEUNAUEAIQUgCCEHIAQhAQNAIAUgBk8NBSAFIAlqIAEtAAA6AAAgBUEEaiEFIAFBAWohASAHQQFrIgcNAAsgCCEHQQEhBSAEIQEDQCAFIAZPDQUgBSAJaiABLQAAOgAAIAVBBGohBSABQQFqIQEgB0EBayIHDQALQQIhBQNAIAUgBk8NBSAFIAlqIAQtAAA6AAAgBUEEaiEFIARBAWohBCAIQQFrIggNAAsMAQsgBCAIQQAgCSAGEBEgBCAIQQEgCSAGEBEgBCAIQQIgCSAGEBELIAsgBjYCBCALIAk2AgAMAwsQJgALIAZBARBMAAtBgIDAAEEZQaSAwAAQIAALIAooAgwhASAKKAIIIQQgAwRAIAIQBgsgACAENgIAIAAgATYCBCAKQRBqJAAPCxBHAAt5AQN/IwBBEGsiAiQAIAEoAgRFBEAgASgCDCEDIAJBCGoiBEEANgIAIAJCgICAgBA3AwAgAiACNgIMIAJBDGpBgIfAACADEAgaIAFBCGogBCgCADYCACABIAIpAwA3AgALIABBqInAADYCBCAAIAE2AgAgAkEQaiQAC10BAX8jAEEgayICJAAgACgCACEAIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAIgADYCBCACQQRqQaCFwAAgAkEIahAIIAJBIGokAAtdAQF/IwBBIGsiAiQAIAAoAgAhACACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACIAA2AgQgAkEEakGAh8AAIAJBCGoQCCACQSBqJAALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakGghcAAIAJBCGoQCCACQSBqJAALZQEBfyMAQTBrIgMkACADIAE2AgwgAyAANgIIIANBHGpBATYCACADQSRqQQE2AgAgA0HIisAANgIYIANBADYCECADQSA2AiwgAyADQShqNgIgIAMgA0EIajYCKCADQRBqIAIQKQALUQEBfyMAQSBrIgIkACACQQxqQQE2AgAgAkEUakEANgIAIAJByIrAADYCECACQQA2AgAgAkErNgIcIAIgADYCGCACIAJBGGo2AgggAiABECkAC0YBAX8gAiAAKAIAIgAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQALQQEBfyACIAAoAgAgACgCCCIDa0sEQCAAIAMgAhATIAAoAgghAwsgACgCBCADaiABIAIQThogACACIANqNgIIQQAL6QQBBn8jAEEQayIDJABBgY3AAC0AAEEDRwRAIANBAToACyADIANBC2o2AgwgA0EMaiEAIwBBIGsiASQAAkACQAJAAkACQAJAAkBBgY3AAC0AAEEBaw4DAgQBAAtBgY3AAEECOgAAIAFBgY3AADYCCCAAKAIAIgAtAAAgAEEAOgAARQ0CIwBBIGsiACQAAkACQAJAQbiNwAAoAgBB/////wdxBEAQT0UNAQtBqI3AACgCAEGojcAAQX82AgANAQJAAkBBuI3AACgCAEH/////B3FFBEBBtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIADAELEE9BtI3AACgCACECQbSNwABBjIPAADYCAEGwjcAAKAIAIQRBsI3AAEEBNgIARQ0BC0G4jcAAKAIAQf////8HcUUNABBPDQBBrI3AAEEBOgAAC0GojcAAQQA2AgACQCAERQ0AIAQgAigCABEEACACQQRqKAIARQ0AIAJBCGooAgAaIAQQBgsgAEEgaiQADAILIABBFGpBATYCACAAQRxqQQA2AgAgAEHUiMAANgIQIABBmIfAADYCGCAAQQA2AgggAEEIakH4iMAAECkACwALIAFBAzoADCABQQhqIgAoAgAgAC0ABDoAAAsgAUEgaiQADAQLIAFBFGpBATYCACABQRxqQQA2AgAgAUGQhMAANgIQDAILQZiEwABBkIXAABAhAAsgAUEUakEBNgIAIAFBHGpBADYCACABQdyDwAA2AhALIAFBoIXAADYCGCABQQA2AgggAUEIakHggsAAECkACwsgA0EQaiQACzgBAX8CQCABaUEBRw0AQYCAgIB4IAFrIABJIgINACAABEAgAEEAIAEgAhsQPCIBRQ0BCyABDwsAC0kBAX8jAEEgayIAJAAgAEEUakEBNgIAIABBHGpBADYCACAAQbCKwAA2AhAgAEGAisAANgIYIABBADYCCCAAQQhqQbiKwAAQKQALRAECfyABKAIEIQIgASgCACEDQQhBBBA8IgFFBEBBCEEEEEwACyABIAI2AgQgASADNgIAIABBuInAADYCBCAAIAE2AgALOQACQAJ/IAJBgIDEAEcEQEEBIAAgAiABKAIQEQAADQEaCyADDQFBAAsPCyAAIANBACABKAIMEQIAC7kCAQJ/IwBBIGsiAiQAIAJBAToAGCACIAE2AhQgAiAANgIQIAJBjIvAADYCDCACQciKwAA2AggjAEEQayIAJAACQCACQQhqIgEoAgwiAgRAIAEoAggiA0UNASAAIAI2AgggACABNgIEIAAgAzYCACMAQRBrIgEkACAAKAIAIgJBFGooAgAhAwJAAn8CQAJAIAJBDGooAgAOAgABAwsgAw0CQQAhAkGYh8AADAELIAMNASACKAIIIgMoAgQhAiADKAIACyEDIAEgAjYCBCABIAM2AgAgAUHcicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALIAFBADYCBCABIAI2AgwgAUHIicAAIAAoAgQiASgCCCAAKAIIIAEtABAQFwALQZiHwABBmInAABAhAAtBmIfAAEGIicAAECEACy0AAkAgA2lBAUdBgICAgHggA2sgAUlyRQRAIAAgASADIAIQNSIADQELAAsgAAslAQF/AkAgAEEBEAoiAUUNACABEFMQQQ0AIAFBACAAEE0aCyABCycAIAAgACgCBEEBcSABckECcjYCBCAAIAFqIgAgACgCBEEBcjYCBAsgAQF/AkAgAEEEaigCACIBRQ0AIAAoAgBFDQAgARAGCwsjACACIAIoAgRBfnE2AgQgACABQQFyNgIEIAAgAWogATYCAAseACAAIAFBA3I2AgQgACABaiIAIAAoAgRBAXI2AgQLFAAgACgCAARAIABBBGooAgAQBgsLGQEBfyAAKAIQIgEEfyABBSAAQRRqKAIACwsSAEEZIABBAXZrQQAgAEEfRxsLFgAgACABQQFyNgIEIAAgAWogATYCAAsQACAAIAFqQQFrQQAgAWtxC+oFAQZ/An8gACEFAkACQAJAIAJBCU8EQCADIAIQCiIHDQFBAAwEC0EIQQgQNCEAQRRBCBA0IQFBEEEIEDQhAkEAQRBBCBA0QQJ0ayIEQYCAfCACIAAgAWpqa0F3cUEDayIAIAAgBEsbIANNDQFBECADQQRqQRBBCBA0QQVrIANLG0EIEDQhAiAFEFMiACAAEEgiBBBQIQECQAJAAkACQAJAAkACQCAAEEFFBEAgAiAETQ0BIAFB6JDAACgCAEYNAiABQeSQwAAoAgBGDQMgARA+DQcgARBIIgYgBGoiCCACSQ0HIAggAmshBCAGQYACSQ0EIAEQDgwFCyAAEEghASACQYACSQ0GIAEgAmtBgYAISSACQQRqIAFNcQ0FIAEgACgCACIBakEQaiEEIAJBH2pBgIAEEDQhAgwGC0EQQQgQNCAEIAJrIgFLDQQgACACEFAhBCAAIAIQLCAEIAEQLCAEIAEQCQwEC0HgkMAAKAIAIARqIgQgAk0NBCAAIAIQUCEBIAAgAhAsIAEgBCACayICQQFyNgIEQeCQwAAgAjYCAEHokMAAIAE2AgAMAwtB3JDAACgCACAEaiIEIAJJDQMCQEEQQQgQNCAEIAJrIgFLBEAgACAEECxBACEBQQAhBAwBCyAAIAIQUCIEIAEQUCEGIAAgAhAsIAQgARAzIAYgBigCBEF+cTYCBAtB5JDAACAENgIAQdyQwAAgATYCAAwCCyABQQxqKAIAIgkgAUEIaigCACIBRwRAIAEgCTYCDCAJIAE2AggMAQtB1JDAAEHUkMAAKAIAQX4gBkEDdndxNgIAC0EQQQgQNCAETQRAIAAgAhBQIQEgACACECwgASAEECwgASAEEAkMAQsgACAIECwLIAANAwsgAxAFIgFFDQEgASAFIAAQSEF4QXwgABBBG2oiACADIAAgA0kbEE4gBRAGDAMLIAcgBSABIAMgASADSRsQThogBRAGCyAHDAELIAAQQRogABBSCwsLACABBEAgABAGCwsPACAAQQF0IgBBACAAa3ILFQAgASAAKAIAIgAoAgAgACgCBBAHCxkAIAEoAgBB+IzAAEEFIAEoAgQoAgwRAgALEwAgASgCACABKAIEIAAoAgAQCAsUACAAKAIAIAEgACgCBCgCDBEAAAsIACAAIAEQCgsTACAAQbiJwAA2AgQgACABNgIACw0AIAAtAARBAnFBAXYLEAAgASAAKAIAIAAoAgQQBwsKAEEAIABrIABxCwsAIAAtAARBA3FFCwwAIAAgAUEDcjYCBAsNACAAKAIAIAAoAgRqCw4AIAAoAgAaA0AMAAsAC9gGAgt/An4gADUCACENIwBBMGsiBCQAQSchAAJAIA1CkM4AVARAIA0hDgwBCwNAIARBCWogAGoiAkEEayANIA1CkM4AgCIOQpDOAH59pyIDQf//A3FB5ABuIgVBAXRBsIvAAGovAAA7AAAgAkECayADIAVB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAAIABBBGshACANQv/B1y9WIA4hDQ0ACwsgDqciAkHjAEsEQCAAQQJrIgAgBEEJamogDqciAiACQf//A3FB5ABuIgJB5ABsa0H//wNxQQF0QbCLwABqLwAAOwAACwJAIAJBCk8EQCAAQQJrIgAgBEEJamogAkEBdEGwi8AAai8AADsAAAwBCyAAQQFrIgAgBEEJamogAkEwajoAAAsCfyAEQQlqIABqIQhBK0GAgMQAIAEoAhgiA0EBcSICGyEFIAJBJyAAayIJaiECQciKwABBACADQQRxGyEHAkACQCABKAIIRQRAQQEhACABKAIAIgMgAUEEaigCACICIAUgBxAoDQEMAgsCQAJAAkACQCACIAFBDGooAgAiBkkEQCADQQhxDQQgBiACayICIQNBASABLQAgIgAgAEEDRhsiAEEBaw4CAQIDC0EBIQAgASgCACIDIAFBBGooAgAiAiAFIAcQKA0EDAULQQAhAyACIQAMAQsgAkEBdiEAIAJBAWpBAXYhAwsgAEEBaiEAIAFBBGooAgAhAiABKAIcIQYgASgCACEBAkADQCAAQQFrIgBFDQEgASAGIAIoAhARAABFDQALQQEMBAtBASEAIAZBgIDEAEYNASABIAIgBSAHECgNASABIAggCSACKAIMEQIADQFBACEAAn8DQCADIAAgA0YNARogAEEBaiEAIAEgBiACKAIQEQAARQ0ACyAAQQFrCyADSSEADAELIAEoAhwhCyABQTA2AhwgAS0AICEMQQEhACABQQE6ACAgASgCACIDIAFBBGooAgAiCiAFIAcQKA0AIAYgAmtBAWohAAJAA0AgAEEBayIARQ0BIANBMCAKKAIQEQAARQ0AC0EBDAMLQQEhACADIAggCSAKKAIMEQIADQAgASAMOgAgIAEgCzYCHEEADAILIAAMAQsgAyAIIAkgAigCDBECAAsgBEEwaiQACwsAIAAjAGokACMACwwAQfCCwABBGRAEAAsKACAAKAIEQXhxCwoAIAAoAgRBAXELCgAgACgCDEEBcQsKACAAKAIMQQF2CxkAIAAgAUGkjcAAKAIAIgBBECAAGxEBAAALrwEBA38gASEFAkAgAkEPTQRAIAAhAQwBCyAAQQAgAGtBA3EiA2ohBCADBEAgACEBA0AgASAFOgAAIAFBAWoiASAESQ0ACwsgBCACIANrIgJBfHEiA2ohASADQQBKBEAgBUH/AXFBgYKECGwhAwNAIAQgAzYCACAEQQRqIgQgAUkNAAsLIAJBA3EhAgsgAgRAIAEgAmohAgNAIAEgBToAACABQQFqIgEgAkkNAAsLIAALswIBB38CQCACIgRBD00EQCAAIQIMAQsgAEEAIABrQQNxIgNqIQUgAwRAIAAhAiABIQYDQCACIAYtAAA6AAAgBkEBaiEGIAJBAWoiAiAFSQ0ACwsgBSAEIANrIghBfHEiB2ohAgJAIAEgA2oiA0EDcSIEBEAgB0EATA0BIANBfHEiBkEEaiEBQQAgBEEDdCIJa0EYcSEEIAYoAgAhBgNAIAUgBiAJdiABKAIAIgYgBHRyNgIAIAFBBGohASAFQQRqIgUgAkkNAAsMAQsgB0EATA0AIAMhAQNAIAUgASgCADYCACABQQRqIQEgBUEEaiIFIAJJDQALCyAIQQNxIQQgAyAHaiEBCyAEBEAgAiAEaiEDA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgIgA0kNAAsLIAALCwBBgJHAACgCAEULBwAgACABagsHACAAIAFrCwcAIABBCGoLBwAgAEEIawvDBwEFfwJAIwBB0ABrIgIkACACQQA2AhggAkKAgICAEDcDECACQSBqIgQiAEEDOgAgIABCgICAgIAENwIYIABBADYCECAAQQA2AgggAEG4hcAANgIEIAAgAkEQajYCACMAQUBqIgAkAEEBIQMCQCAEKAIAIgVB7IrAAEEMIAQoAgQiBCgCDBECAA0AAkAgASgCCCIDBEAgACADNgIMIABBITYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCEUNAQwCCyABKAIAIgMgASgCBEEMaigCABEGAELB9/nozJOy0UFSDQAgACADNgIMIABBIjYCFCAAIABBDGo2AhBBASEDIABBATYCPCAAQQI2AjQgAEH8isAANgIwIABBADYCKCAAIABBEGo2AjggBSAEIABBKGoQCA0BCyABKAIMIQEgAEEkakEPNgIAIABBHGpBDzYCACAAIAFBDGo2AiAgACABQQhqNgIYIABBIDYCFCAAIAE2AhAgAEEDNgI8IABBAzYCNCAAQdSKwAA2AjAgAEEANgIoIAAgAEEQajYCOCAFIAQgAEEoahAIIQMLIABBQGskAAJAIANFBEAgAigCECACKAIYIgBrQQlNBEAgAkEQaiAAQQoQEyACKAIYIQALIAIoAhQgAGoiAUH0hsAAKQAANwAAIAFBCGpB/IbAAC8AADsAACACIABBCmo2AhggAkEIahAAIgQQASACKAIIIQYgAigCDCIFIAIoAhAgAigCGCIAa0sEQCACQRBqIAAgBRATIAIoAhghAAsgAigCFCAAaiAGIAUQThogAiAAIAVqIgA2AhggAigCECAAa0EBTQRAIAJBEGogAEECEBMgAigCGCEACyACKAIUIABqQYoUOwAAIAIgAEECaiIDNgIYIAIoAhQhAAJAIAMgAigCECIBTwRAIAAhAQwBCyADRQRAQQEhASAAEAYMAQsgACABQQEgAxA1IgFFDQILIAEgAxACIAUEQCAGEAYLIARBhAFPBEAgBBADCyACQdAAaiQADAILIwBBQGoiACQAIABBNzYCDCAAQdCFwAA2AgggAEGIhsAANgIUIAAgAkHIAGo2AhAgAEEkakECNgIAIABBLGpBAjYCACAAQTxqQR82AgAgAEGgi8AANgIgIABBADYCGCAAQSA2AjQgACAAQTBqNgIoIAAgAEEQajYCOCAAIABBCGo2AjAgAEEYakHkhsAAECkACyADQQEQTAALCwwAQsH3+ejMk7LRQQsNAEKy+KXLheeH1Jt/CwwAQuLnycndnOOADQsDAAELC4cNAQBBgIDAAAv9DG91dHB1dCBzbGljZSBpcyB0b28gc21hbGxzcmMvbGliLnJzABkAEAAKAAAAggAAAA4AAABpbnB1dCB0ZXJtaW5hdGVkIHdoaWxlIGRlY29kaW5nIHVuY29tcHJlc3NlZCBzZWdtZW50IGluIFJMRSBzbGljZQAAABkAEAAKAAAAmQAAABYAAAAZABAACgAAAJYAAAAWAAAAaW5wdXQgdGVybWluYXRlZCB3aGlsZSBkZWNvZGluZyByZXBlYXQgc2VnbWVudCBpbiBSTEUgc2xpY2UAGQAQAAoAAACmAAAAFgAAABkAEAAKAAAAoQAAABIAAAAvVXNlcnMveWhrYW5nLy5jYXJnby9yZWdpc3RyeS9zcmMvaW5kZXguY3JhdGVzLmlvLTZmMTdkMjJiYmExNTAwMWYvY29uc29sZV9lcnJvcl9wYW5pY19ob29rLTAuMS43L3NyYy9saWIucnP0ABAAbAAAAJUAAAAOAAAAaW52YWxpZCBlbnVtIHZhbHVlIHBhc3NlZAAAAAEAAAAAAAAAAQAAAAIAAAADAAAABAAAAG9uZS10aW1lIGluaXRpYWxpemF0aW9uIG1heSBub3QgYmUgcGVyZm9ybWVkIHJlY3Vyc2l2ZWx5pAEQADgAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAAOQBEAAqAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZS9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvc3RkL3NyYy9zeW5jL29uY2UucnMAQwIQAEwAAACVAAAAMgAAAAUAAAAEAAAABAAAAAYAAAAHAAAACAAAAAkAAAAMAAAABAAAAAoAAAALAAAADAAAAGEgRGlzcGxheSBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCBhbiBlcnJvciB1bmV4cGVjdGVkbHkADQAAAAAAAAABAAAADgAAAC9ydXN0Yy85MGM1NDE4MDZmMjNhMTI3MDAyZGU1YjQwMzhiZTczMWJhMTQ1OGNhL2xpYnJhcnkvYWxsb2Mvc3JjL3N0cmluZy5ycwAYAxAASwAAAN0JAAAOAAAACgpTdGFjazoKCgAAEQAAAAQAAAAEAAAAEgAAABMAAAAUAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZW1lbW9yeSBhbGxvY2F0aW9uIG9mICBieXRlcyBmYWlsZWQAAADDAxAAFQAAANgDEAANAAAAbGlicmFyeS9zdGQvc3JjL2FsbG9jLnJz+AMQABgAAABVAQAACQAAAGNhbm5vdCBtb2RpZnkgdGhlIHBhbmljIGhvb2sgZnJvbSBhIHBhbmlja2luZyB0aHJlYWQgBBAANAAAAGxpYnJhcnkvc3RkL3NyYy9wYW5pY2tpbmcucnNcBBAAHAAAAIcAAAAJAAAAXAQQABwAAABBAgAAHgAAAFwEEAAcAAAAQAIAAB8AAAAVAAAADAAAAAQAAAAWAAAAEQAAAAgAAAAEAAAAFwAAABgAAAAQAAAABAAAABkAAAAaAAAAEQAAAAgAAAAEAAAAGwAAABwAAAARAAAAAAAAAAEAAAAdAAAAbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93AAAAHAUQABEAAAAABRAAHAAAAAwCAAAFAAAASAUQAAAAAAA6AAAASAUQAAAAAABQBRAAAQAAAFAFEAABAAAAcGFuaWNrZWQgYXQgJycsIHgFEAABAAAAeQUQAAMAAAAjAAAAAAAAAAEAAAAkAAAAOiAAAEgFEAAAAAAAnAUQAAIAAAAwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OUVycm9yAG8JcHJvZHVjZXJzAghsYW5ndWFnZQEEUnVzdAAMcHJvY2Vzc2VkLWJ5AwVydXN0Yx0xLjcwLjAgKDkwYzU0MTgwNiAyMDIzLTA1LTMxKQZ3YWxydXMGMC4xOS4wDHdhc20tYmluZGdlbgYwLjIuODcALA90YXJnZXRfZmVhdHVyZXMCKw9tdXRhYmxlLWdsb2JhbHMrCHNpZ24tZXh0"),v=p.memory,m=p.main_js,B=p.decode_rgb,y=p.decode_rgba,C=p.decode_grayscale,w=p.decode_grayscale_a,b=p.__wbindgen_add_to_stack_pointer,x=p.__wbindgen_malloc,Q=p.__wbindgen_free,E=p.__wbindgen_realloc,I=p.__wbindgen_start,_=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:b,__wbindgen_free:Q,__wbindgen_malloc:x,__wbindgen_realloc:E,__wbindgen_start:I,decode_grayscale:C,decode_grayscale_a:w,decode_rgb:B,decode_rgba:y,main_js:m,memory:v},Symbol.toStringTag,{value:"Module"}));Mw(_),I()}));function Gw(e,t,A,n,i,r){return u(this,null,(function*(){const o=e*t;if(!(o>0&&Number.isInteger(o)))throw new Error(`Pixel count must be a positive integer, got ${o}`);let s;if(n&&i)s=yield function(e,t,A,n,i){return u(this,null,(function*(){return yield Kw,Yw(t.compression),Yw(n.compression),Yw(t.compression),i&&Yw(i.compression),i?Vw(e,t.data,t.compression,A.data,A.compression,n.data,n.compression,i.data,i.compression):jw(e,t.data,t.compression,A.data,A.compression,n.data,n.compression)}))}(o,A,n,i,r);else{if(i||n)throw new Error(`Missing ${i?"green":"blue"} channel in RGB image`);s=yield Xw(o,A,r)}return new Uint8ClampedArray(s.buffer,s.byteOffset,s.byteLength)}))}function Yw(e){switch(e){case Cw.RawData:case Cw.RleCompressed:return}throw new zy(`Unsupported compression method: ${e}`)}function Xw(e,t,A){return u(this,null,(function*(){return yield Kw,Yw(t.compression),A&&Yw(A.compression),A?Nw(e,t.data,t.compression,A.data,A.compression):Rw(e,t.data,t.compression)}))}function zw(e){const t=vw(e),{fileHeader:A}=t,n=yw(A.version),i=function(e){const t=new SC(e),A=[],n=t.read("u32");for(;t.position<n;){const e=XC(t);A.push(e)}return{resources:A}}(t.imageResources);return{fileHeader:A,colorModeData:void 0,imageResources:i,layerAndMaskInfo:gw(t.layerAndMaskInformation,n),imageData:GC(t.imageData,A.depth,A.height,A.channelCount,n)}}function Ww(e){const t=e.readUnicodeString(0),A=e.readIdString(),n=e.read("u32"),i=new Map;for(;i.size<n;){const t=e.readIdString(),A=Jw(e);if(i.has(t))throw new gC(`Duplicate descriptor key: ${t}`);i.set(t,A)}return{name:t,classId:A,items:i}}function $w(e){const t=e.read("u32");if(16!==t)throw new fC(`Invalid descriptor version: ${t}`);return{descriptorVersion:t,descriptor:Ww(e)}}function Jw(e){const t=e.readString(4);switch(t){case LC.Alias:{const A=e.read("u32");return{type:t,data:e.take(A)}}case LC.Boolean:return{type:t,value:!!e.read("u8")};case LC.Class:case LC.GlobalClass:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString()};case LC.Descriptor:case LC.GlobalObject:return{type:t,descriptor:Ww(e)};case LC.Double:return{type:t,value:e.read("f64")};case LC.Enumerated:return{type:t,enumType:e.readIdString(),enumValue:e.readIdString()};case LC.Integer:return{type:t,value:e.read("i32")};case LC.LargeInteger:return{type:t,value:e.read("i64")};case LC.List:{const A=e.read("u32"),n=[];for(;n.length<A;)n.push(Jw(e));return{type:t,values:n}}case LC.RawData:{const A=e.read("u32");return{type:t,data:e.take(A)}}case LC.Reference:{const A=e.read("u32"),n=[];for(;n.length<A;)n.push(qw(e));return{type:t,references:n}}case LC.String:return{type:t,value:e.readUnicodeString(0)};case LC.UnitFloat:return{type:t,unitType:Zw(e.readString(4)),value:e.read("f64")};case LC.ObjectArray:{e.read("u32");const A=e.readUnicodeString(0),n=e.readIdString(),i=e.read("u32");return{type:t,classObj:{name:A,classId:n},items:Array.from(Array(i),(()=>({key:e.readIdString(),value:Jw(e)})))}}case LC.UnitFloats:{const A=Zw(e.readString(4)),n=e.read("u32");return{type:t,unitType:A,values:Array.from(Array(n),(()=>e.read("f64")))}}default:throw new dC(`Unexpected descriptor type: ${t}`)}}function qw(e){const t=e.readString(4);switch(t){case Sw.Class:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString()};case Sw.Enumerated:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString(),typeId:e.readIdString(),enumValue:e.readIdString()};case Sw.Identifier:return{type:t,identifier:e.readString(4)};case Sw.Index:return{type:t,index:e.read("u32")};case Sw.Name:return{type:t,name:e.readUnicodeString(0)};case Sw.Offset:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString(),offset:e.read("u32")};case Sw.Property:return{type:t,name:e.readUnicodeString(0),classId:e.readIdString(),keyId:e.readIdString()};default:throw new mC(`Invalid reference type: ${t}`)}}function Zw(e){if(!Object.values(HC).includes(e))throw new BC(`Invalid Unit Float type: ${e}`);return e}var eb;!function(e){e[e.String=0]="String",e[e.DictBeg=1]="DictBeg",e[e.DictEnd=2]="DictEnd",e[e.ArrBeg=3]="ArrBeg",e[e.ArrEnd=4]="ArrEnd",e[e.Name=5]="Name",e[e.Number=6]="Number",e[e.Boolean=7]="Boolean"}(eb||(eb={}));const tb=new Set([0,9,12,32,10,13]),Ab=new Set([102,116]),nb={"(":40,")":41,"<":60,">":62,"[":91,"]":93,"/":47,"\\":92},ib=new Set(Object.values(nb)),rb=[];for(let zG=0;zG<256;zG+=1)rb[zG]=tb.has(zG)||ib.has(zG);const ob=new TextDecoder("utf-8");class sb{constructor(e){this.cursor=SC.from(e)}tokens(){const e=[];for(;!this.done();){const t=this.cursor.one();if(tb.has(t))for(;!this.done()&&tb.has(this.cursor.peek());)this.cursor.pass(1);else if(ib.has(t)){if(t===nb["("]){e.push({type:eb.String,value:this.text()});continue}if(t===nb["["]){e.push({type:eb.ArrBeg});continue}if(t===nb["]"]){e.push({type:eb.ArrEnd});continue}if(t===nb["<"]){this.cursor.pass(1),e.push({type:eb.DictBeg});continue}if(t===nb[">"]){this.cursor.pass(1),e.push({type:eb.DictEnd});continue}if(t===nb["/"]){e.push({type:eb.Name,value:this.string()});continue}}else this.cursor.unpass(1),Ab.has(t)?e.push({type:eb.Boolean,value:this.boolean()}):e.push({type:eb.Number,value:this.number()})}return e}done(){return this.cursor.position>=this.cursor.length}text(){const e=this.cursor.peek();if(e===nb[")"])return this.cursor.pass(1),"";const t=255===e||254===e;let A=new TextDecoder("utf-16be");t&&(A=this.textDecoderFromBOM());const n=[],i=this.cursor.clone();for(;i.peek()!==nb[")"];)if(i.pass(1),i.peek()===nb["\\"]){const e=i.position-this.cursor.position;n.push(A.decode(this.cursor.take(e),{stream:!0})),i.pass(2),this.cursor.pass(1),n.push(A.decode(this.cursor.take(1),{stream:!0}))}const r=i.position-this.cursor.position,o=this.cursor.take(r);return n.push(A.decode(o)),this.cursor.pass(1),n.join("")}textDecoderFromBOM(){const e=this.cursor.one(),t=this.cursor.one();if(255===e&&254===t)return new TextDecoder("utf-16le");if(254===e&&255===t)return new TextDecoder("utf-16be");throw new QC(`Unknown BOM value: [${e}, ${t}]`)}string(){return function(e){const t=e.position;let A=e.position;for(const n of e.iter()){if(rb[n])break;A+=1}return ob.decode(e.take(A-t))}(this.cursor)}number(){const e=this.string(),t=Number(e);if(Number.isNaN(t))throw new CC(`parsing '${e}' as Number failed`);return t}boolean(){const e=this.string();if("true"===e)return!0;if("false"===e)return!1;throw new yC(`'${e}' is neither 'true' nor 'false'`)}}const ab=Symbol(eb[eb.ArrBeg]),lb=Symbol(eb[eb.DictBeg]);class cb{constructor(e){this.tokens=e,this.stack=[]}parse(){this.runParser();const[e]=this.stack;if("object"==typeof e&&!Array.isArray(e))return e;throw new wC("EngineData top-level value is not a dict; is "+typeof e)}runParser(){for(const e of this.tokens)switch(e.type){case eb.Name:case eb.Number:case eb.Boolean:case eb.String:this.stack.push(e.value);continue;case eb.DictBeg:this.stack.push(lb);continue;case eb.ArrBeg:this.stack.push(ab);continue;case eb.DictEnd:this.stack.push(this.dict());continue;case eb.ArrEnd:this.stack.push(this.array().reverse());continue}}dict(){const e={};for(;;){const t=this.stack.pop();if(void 0===t)throw new bC("Stack empty when parsing dict");if(t===lb)return e;if(t===ab)throw new xC("Got ArrBeg while parsing a dict");const A=this.stack.pop();if("string"!=typeof A)throw new xC("Dict key is not Name; is "+typeof A);e[A]=t}}array(){const e=[];for(;;){const t=this.stack.pop();if(void 0===t)throw new bC("Stack empty when parsing array");if(t===lb)throw new xC("Got DictBeg while parsing array");if(t===ab)return e;e.push(t)}}}const ub=new Set(["DocumentResources","EngineDict","ResourceDict"]);function hb(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function db(e){const t=new cb(new sb(e).tokens()).parse();if(function(e){let t=!0;if("object"!=typeof e||!e)return!1;for(const A of ub){if(!hb(e,A))return!1;{const n=e[A];t=t&&"object"==typeof n&&!Array.isArray(n)&&!!n}}return t}(t))return t;throw new EC(`Object with keys ${JSON.stringify(Object.keys(t))} is not valid EngineData`)}class fb{composite(e=!0,t=!0){return u(this,null,(function*(){const{red:A,green:n,blue:i,alpha:r}=this.imageData,{width:o,height:s}=this,a=yield Gw(o,s,A,n,i,r);if(!0===e){if(!0===t){return Ow(a,255*this.composedOpacity)}return Ow(a,this.opacity)}return a}))}}class gb extends fb{constructor(e,t){super(),this.layerFrame=e,this.parent=t,this.type="Layer"}get name(){return this.layerFrame.layerProperties.name}get width(){return this.layerFrame.width}get height(){return this.layerFrame.height}get top(){return this.layerFrame.layerProperties.top}get left(){return this.layerFrame.layerProperties.left}get opacity(){return this.layerFrame.layerProperties.opacity}get composedOpacity(){return this.parent.composedOpacity*(this.opacity/255)}get maskData(){return this.layerFrame.layerProperties.maskData}userMask(){return u(this,null,(function*(){const e=this.layerFrame.userMask;if(e)return Xw(UC(this.maskData),e)}))}realUserMask(){return u(this,null,(function*(){const e=this.maskData.realData,t=this.layerFrame.realUserMask;if(e&&t)return Xw(UC(e),t)}))}get isHidden(){return this.layerFrame.layerProperties.hidden}get isTransparencyLocked(){return this.layerFrame.layerProperties.transparencyLocked}get additionalProperties(){return this.layerFrame.layerProperties.additionalLayerProperties}get text(){return this.layerFrame.layerProperties.text}get textProperties(){return this.layerFrame.layerProperties.textProperties}get imageData(){const{red:e,green:t,blue:A,alpha:n}=this.layerFrame;return{red:e,green:t,blue:A,alpha:n}}}function pb(e){if(!function(e){return"Psd"===e.type||"Group"===e.type}(e))throw new My(`Node (name = '${e.name}', type: '${e.type}') cannot be a parent node`)}class vb{constructor(e,t,A,n,i){this.origin=e,this.left=t,this.top=A,this.right=n,this.bottom=i}}function mb(e){if(e.resource.descriptor){const t=e.resource.descriptor.descriptor.items.get("slices");if(!t||t.type!==LC.List)throw new sC('Missing key "slices" in slice descriptor');return t.values.reduce(((e,t)=>{if(t.type!==LC.Descriptor)throw new sC(`Slice list contains a non-descriptor (type: ${t.type})`);return e.push(function(e){const t=function(e){const t=NC(e,"origin",LC.Enumerated);if("ESliceOrigin"!==t.enumType)throw new sC(`Unexpected enum type for slice origin: got "${t.enumType}"`);switch(t.enumValue){case"layerGenerated":return Ew.LayerGenerated;case"userGenerated":return Ew.UserGenerated;case"autoGenerated":return Ew.AutoGenerated;default:throw new sC(`Unexpected enum value for slice origin: got "${t.enumValue}"`)}}(e),A=NC(e,"bounds",LC.Descriptor).descriptor,n=NC(A,"Top ",LC.Integer).value,i=NC(A,"Left",LC.Integer).value,r=NC(A,"Btom",LC.Integer).value,o=NC(A,"Rght",LC.Integer).value;return new vb(t,i,n,o,r)}(t.descriptor)),e}),[])}throw new sC("No slice descriptor in slice resource block")}class Bb extends fb{static parse(e){const t=zw(e);return new Bb(t)}constructor(e){super(),this.parsingResult=e,this.name="ROOT",this.type="Psd",this.opacity=255,this.composedOpacity=1,this.children=[],this.layers=[],this.guides=[],this.slices=[],this.icc_profile=void 0,this.globalLightAngle=void 0,this.globalLightAltitude=void 0,this.resolutionInfo=void 0,this.additionalLayerProperties={},this.buildTreeStructure(),this.additionalLayerProperties=e.layerAndMaskInfo.globalAdditionalLayerInformation;for(const t of e.imageResources.resources)if(null!==t.resource)switch(t.id){case Qw.GridAndGuides:this.guides=t.resource.guides;break;case Qw.Slices:this.slices=mb(t);break;case Qw.ICCProfile:this.icc_profile=t.resource;break;case Qw.GlobalLightAltitude:this.globalLightAltitude=t.resource;break;case Qw.GlobalLightAngle:this.globalLightAngle=t.resource;break;case Qw.ResolutionInfo:this.resolutionInfo=t.resource}}get width(){return this.parsingResult.fileHeader.width}get height(){return this.parsingResult.fileHeader.height}get channelCount(){return this.parsingResult.fileHeader.channelCount}get depth(){return this.parsingResult.fileHeader.depth}get colorMode(){return this.parsingResult.fileHeader.colorMode}get imageData(){const{compression:e,red:t,green:A,blue:n,alpha:i}=this.parsingResult.imageData;return{red:{compression:e,data:t},green:A?{compression:e,data:A}:void 0,blue:n?{compression:e,data:n}:void 0,alpha:i?{compression:e,data:i}:void 0}}buildTreeStructure(){const{groups:e,layers:t,orders:A}=this.parsingResult.layerAndMaskInfo,n=[this];let i=0,r=0;A.forEach((A=>{const o=n[n.length-1];switch(A){case"G":{const t=e[i];pb(o);const A=new Fy(t,o);n.push(A),o.children.push(A),i+=1;break}case"L":{const e=t[r];pb(o);const A=new gb(e,o);this.layers.push(A),o.children.push(A),r+=1;break}case"D":n.pop()}})),n.length=0,this.children.forEach((e=>{var t,A;return null===(A=(t=e).freeze)||void 0===A?void 0:A.call(t)})),Object.freeze(this.children)}}class yb{constructor(e,t){this.canvas=e,this.editor=t}insertPSD(e){return new Promise(((t,A)=>{Ym({accept:".psd"}).then((A=>{if(A&&A.length>0){const n=A[0],i=new FileReader;i.readAsText(n,"UTF-8"),i.onload=()=>u(this,null,(function*(){const A=yield n.arrayBuffer(),i=Bb.parse(A),r=yield Ey(i);this.loadJSON(r,e),t("")}))}})).catch(A)}))}loadJSON(e,t){this.editor.loadJSON(e,t)}}c(yb,"pluginName","PsdPlugin"),c(yb,"apis",["insertPSD"]);const Cb=(e,t)=>{const A=[],n=2*Math.PI/e;let i=-Math.PI/2;for(let r=0;r<e;r++){const e=r*n+i;A.push({x:Math.cos(e)*t,y:Math.sin(e)*t})}return A},wb=e=>{const{left:t=0,top:A=0}=e;return{width:e.getScaledWidth(),height:e.getScaledHeight(),left:t,top:A}},bb=(e,t)=>{xb(e),xb(e,"targetId",I(t,"id")),xb(e,"targetType",I(t,"type"))},xb=(e,t="clip",A=!0)=>{rn(e,t,A)};class Qb{constructor(e,t){this.canvas=e,this.editor=t}addClipPathToImage(e){const t=this.canvas.getActiveObjects()[0];if(t&&"image"===t.type){let A=null;const[n,i]=e.split("-"),r=!!i;switch(n){case"polygon":A=((e,t)=>{const A=e.getCenterPoint(),n=Cb(5,200),i=new wv.fabric.Polygon(n,{fill:"rgba(0,0,0,0)",originY:"center",originX:"center",left:A.x,top:A.y});return bb(i,e),{shell:i,clipPath:new wv.fabric.Polygon([...n],{absolutePositioned:!0,originX:"center",originY:"center",left:i.left,top:i.top,inverted:t})}})(t,r);break;case"rect":A=((e,t)=>{const{width:A=0,height:n=0,left:i=0,top:r=0}=wb(e),o=Math.round(A/2),s=Math.round(n/2),a=new wv.fabric.Rect({width:o,height:s,fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:i+A/2,top:r+n/2});return bb(a,e),{clipPath:new wv.fabric.Rect({absolutePositioned:!0,width:a.width,height:a.height,originX:"center",originY:"center",left:a.left,top:a.top,inverted:t}),shell:a}})(t,r);break;case"circle":A=((e,t)=>{const A=e.getCenterPoint(),{width:n}=wb(e),i=new wv.fabric.Ellipse({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:A.x,top:A.y,rx:n/4,ry:n/4});return bb(i,e),{shell:i,clipPath:new wv.fabric.Ellipse({absolutePositioned:!0,originX:"center",originY:"center",left:i.left,top:i.top,inverted:t,rx:i.rx,ry:i.ry})}})(t,r);break;case"triangle":A=((e,t)=>{const A=e.getCenterPoint(),{width:n=0,height:i=0}=wb(e),r=Math.round(n/2),o=Math.round(i/2),s=new wv.fabric.Triangle({fill:"rgba(0,0,0,0)",originX:"center",originY:"center",left:A.x,top:A.y,width:r,height:o});return bb(s,e),{shell:s,clipPath:new wv.fabric.Triangle({absolutePositioned:!0,originX:"center",originY:"center",left:s.left,top:s.top,width:s.width,height:s.height,inverted:t})}})(t,r)}if(null==A)return;const{shell:o,clipPath:s}=A;o.on("moving",(()=>{s.setPositionByOrigin(o.getCenterPoint(),"center","center"),t.set("dirty",!0)})),o.on("rotating",(()=>{s.set({angle:o.angle}),t.set("dirty",!0)})),o.on("scaling",(()=>{s.set({scaleX:o.scaleX,scaleY:o.scaleY}),s.setPositionByOrigin(o.getCenterPoint(),"center","center"),t.set("dirty",!0)})),o.on("deselected",(()=>{if(s instanceof wv.fabric.Ellipse&&o instanceof wv.fabric.Ellipse)s.set({rx:o.getRx(),ry:o.getRy()}),this.correctPosition(t,o,s);else if(o instanceof wv.fabric.Polygon){this.correctPosition(t,o,s);const{scaleX:e=1,scaleY:A=1}=s,{scaleX:n=1,scaleY:i=1}=o;s.set("scaleX",e*n),s.set("scaleY",A*i)}else this.correctPosition(t,o,s),s.set("width",o.getScaledWidth()),s.set("height",o.getScaledHeight());t.set("dirty",!0),this.canvas.remove(o),this.canvas.requestRenderAll()})),t.set({clipPath:s}),this.canvas.add(o),this.canvas.setActiveObject(o)}}correctPosition(e,t,A){const n=e.toLocalPoint(t.getCenterPoint(),"center","center"),{scaleX:i=1,scaleY:r=1}=e;A.set({absolutePositioned:!1,left:n.x/i,top:n.y/r,scaleX:1/i,scaleY:1/r})}removeClip(){const e=this.canvas.getActiveObjects()[0];e&&"image"===e.type&&(e.set({clipPath:void 0}),e.set("dirty",!0),this.canvas.requestRenderAll())}}c(Qb,"pluginName","SimpleClipImagePlugin"),c(Qb,"apis",["addClipPathToImage","removeClip"]);var Eb={},Ib={},_b={};Object.defineProperty(_b,"__esModule",{value:!0});_b.default=function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=A.text||t,this.options=A},Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.CODE39=void 0;var Sb,Fb=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),kb=(Sb=_b)&&Sb.__esModule?Sb:{default:Sb};var Ub=function(){function e(t,A){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t.toUpperCase(),A.mod43&&(t+=(n=function(e){for(var t=0,A=0;A<e.length;A++)t+=Mb(e[A]);return t%=43}(t),Ob[n])),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,kb.default),Fb(e,[{key:"encode",value:function(){for(var e=Tb("*"),t=0;t<this.data.length;t++)e+=Tb(this.data[t])+"0";return{data:e+=Tb("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),e}(),Ob=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],Db=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function Tb(e){return t=Mb(e),Db[t].toString(2);var t}function Mb(e){return Ob.indexOf(e)}Ib.CODE39=Ub;var Lb,Hb={},Pb={},Rb={},Nb={};function jb(e,t,A){return t in e?Object.defineProperty(e,t,{value:A,enumerable:!0,configurable:!0,writable:!0}):e[t]=A,e}Object.defineProperty(Nb,"__esModule",{value:!0});var Vb=Nb.SET_A=0,Kb=Nb.SET_B=1,Gb=Nb.SET_C=2;Nb.SHIFT=98;var Yb=Nb.START_A=103,Xb=Nb.START_B=104,zb=Nb.START_C=105;Nb.MODULO=103,Nb.STOP=106,Nb.FNC1=207,Nb.SET_BY_CODE=(jb(Lb={},Yb,Vb),jb(Lb,Xb,Kb),jb(Lb,zb,Gb),Lb),Nb.SWAP={101:Vb,100:Kb,99:Gb},Nb.A_START_CHAR=String.fromCharCode(208),Nb.B_START_CHAR=String.fromCharCode(209),Nb.C_START_CHAR=String.fromCharCode(210),Nb.A_CHARS="[\0-_È-Ï]",Nb.B_CHARS="[ -È-Ï]",Nb.C_CHARS="(Ï*[0-9]{2}Ï*)",Nb.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Object.defineProperty(Rb,"__esModule",{value:!0});var Wb=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),$b=function(e){return e&&e.__esModule?e:{default:e}}(_b),Jb=Nb;var qb=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),A));return n.bytes=t.split("").map((function(e){return e.charCodeAt(0)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,$b.default),Wb(e,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var t=this.bytes,A=t.shift()-105,n=Jb.SET_BY_CODE[A];if(void 0===n)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&t.unshift(Jb.FNC1);var i=e.next(t,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(A)+i.result+e.getBar((i.checksum+A)%Jb.MODULO)+e.getBar(Jb.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return Jb.BARS[e]?Jb.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===Jb.SET_A){var A=e.shift();return A<32?A+64:A-32}return t===Jb.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(t,A,n){if(!t.length)return{result:"",checksum:0};var i=void 0,r=void 0;if(t[0]>=200){r=t.shift()-105;var o=Jb.SWAP[r];void 0!==o?i=e.next(t,A+1,o):(n!==Jb.SET_A&&n!==Jb.SET_B||r!==Jb.SHIFT||(t[0]=n===Jb.SET_A?t[0]>95?t[0]-96:t[0]:t[0]<32?t[0]+96:t[0]),i=e.next(t,A+1,n))}else r=e.correctIndex(t,n),i=e.next(t,A+1,n);var s=r*A;return{result:e.getBar(r)+i.result,checksum:s+i.checksum}}}]),e}();Rb.default=qb;var Zb={};Object.defineProperty(Zb,"__esModule",{value:!0});var ex=Nb,tx=function(e){return e.match(new RegExp("^"+ex.A_CHARS+"*"))[0].length},Ax=function(e){return e.match(new RegExp("^"+ex.B_CHARS+"*"))[0].length},nx=function(e){return e.match(new RegExp("^"+ex.C_CHARS+"*"))[0]};function ix(e,t){var A=t?ex.A_CHARS:ex.B_CHARS,n=e.match(new RegExp("^("+A+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(n)return n[1]+String.fromCharCode(204)+rx(e.substring(n[1].length));var i=e.match(new RegExp("^"+A+"+"))[0];return i.length===e.length?e:i+String.fromCharCode(t?205:206)+ix(e.substring(i.length),!t)}function rx(e){var t=nx(e),A=t.length;if(A===e.length)return e;e=e.substring(A);var n=tx(e)>=Ax(e);return t+String.fromCharCode(n?206:205)+ix(e,n)}Zb.default=function(e){var t=void 0;if(nx(e).length>=2)t=ex.C_START_CHAR+rx(e);else{var A=tx(e)>Ax(e);t=(A?ex.A_START_CHAR:ex.B_START_CHAR)+ix(e,A)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(e,t){return String.fromCharCode(203)+t}))},Object.defineProperty(Pb,"__esModule",{value:!0});var ox=ax(Rb),sx=ax(Zb);function ax(e){return e&&e.__esModule?e:{default:e}}function lx(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var cx=function(){function e(t,A){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),/^[\x00-\x7F\xC8-\xD3]+$/.test(t))var n=lx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,sx.default)(t),A));else n=lx(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A));return lx(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,ox.default),e}();Pb.default=cx;var ux={};Object.defineProperty(ux,"__esModule",{value:!0});var hx=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),dx=function(e){return e&&e.__esModule?e:{default:e}}(Rb),fx=Nb;var gx=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,fx.A_START_CHAR+t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,dx.default),hx(e,[{key:"valid",value:function(){return new RegExp("^"+fx.A_CHARS+"+$").test(this.data)}}]),e}();ux.default=gx;var px={};Object.defineProperty(px,"__esModule",{value:!0});var vx=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),mx=function(e){return e&&e.__esModule?e:{default:e}}(Rb),Bx=Nb;var yx=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Bx.B_START_CHAR+t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,mx.default),vx(e,[{key:"valid",value:function(){return new RegExp("^"+Bx.B_CHARS+"+$").test(this.data)}}]),e}();px.default=yx;var Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});var wx=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),bx=function(e){return e&&e.__esModule?e:{default:e}}(Rb),xx=Nb;var Qx=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,xx.C_START_CHAR+t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,bx.default),wx(e,[{key:"valid",value:function(){return new RegExp("^"+xx.C_CHARS+"+$").test(this.data)}}]),e}();Cx.default=Qx,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.CODE128C=Hb.CODE128B=Hb.CODE128A=Hb.CODE128=void 0;var Ex=Fx(Pb),Ix=Fx(ux),_x=Fx(px),Sx=Fx(Cx);function Fx(e){return e&&e.__esModule?e:{default:e}}Hb.CODE128=Ex.default,Hb.CODE128A=Ix.default,Hb.CODE128B=_x.default,Hb.CODE128C=Sx.default;var kx={},Ux={},Ox={};Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.SIDE_BIN="101",Ox.MIDDLE_BIN="01010",Ox.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},Ox.EAN2_STRUCTURE=["LL","LG","GL","GG"],Ox.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],Ox.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var Dx={},Tx={};Object.defineProperty(Tx,"__esModule",{value:!0});var Mx=Ox;Tx.default=function(e,t,A){var n=e.split("").map((function(e,A){return Mx.BINARIES[t[A]]})).map((function(t,A){return t?t[e[A]]:""}));if(A){var i=e.length-1;n=n.map((function(e,t){return t<i?e+A:e}))}return n.join("")},Object.defineProperty(Dx,"__esModule",{value:!0});var Lx=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),Hx=Ox,Px=Nx(Tx),Rx=Nx(_b);function Nx(e){return e&&e.__esModule?e:{default:e}}var jx=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A));return n.fontSize=!A.flat&&A.fontSize>10*A.width?10*A.width:A.fontSize,n.guardHeight=A.height+n.fontSize/2+A.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,Rx.default),Lx(e,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,Px.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,Px.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:Hx.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:Hx.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:Hx.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[Hx.SIDE_BIN,this.leftEncode(),Hx.MIDDLE_BIN,this.rightEncode(),Hx.SIDE_BIN].join(""),text:this.text}}}]),e}();Dx.default=jx,Object.defineProperty(Ux,"__esModule",{value:!0});var Vx=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),Kx=function e(t,A,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,A);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,A,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},Gx=Ox,Yx=function(e){return e&&e.__esModule?e:{default:e}}(Dx);var Xx=function(e){return(10-e.substr(0,12).split("").map((function(e){return+e})).reduce((function(e,t,A){return A%2?e+3*t:e+t}),0)%10)%10},zx=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{12}$/)&&(t+=Xx(t));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A));return n.lastChar=A.lastChar,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,Yx.default),Vx(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===Xx(this.data)}},{key:"leftText",value:function(){return Kx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var t=this.data.substr(1,6),A=Gx.EAN13_STRUCTURE[this.data[0]];return Kx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,A)}},{key:"rightText",value:function(){return Kx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var t=this.data.substr(7,6);return Kx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRRRR")}},{key:"encodeGuarded",value:function(){var t=Kx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(t.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(t.push({data:"00"}),t.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),t}}]),e}();Ux.default=zx;var Wx={};Object.defineProperty(Wx,"__esModule",{value:!0});var $x=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),Jx=function e(t,A,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,A);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,A,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},qx=function(e){return e&&e.__esModule?e:{default:e}}(Dx);var Zx=function(e){return(10-e.substr(0,7).split("").map((function(e){return+e})).reduce((function(e,t,A){return A%2?e+t:e+3*t}),0)%10)%10},eQ=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{7}$/)&&(t+=Zx(t)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,qx.default),$x(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===Zx(this.data)}},{key:"leftText",value:function(){return Jx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var t=this.data.substr(0,4);return Jx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,t,"LLLL")}},{key:"rightText",value:function(){return Jx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var t=this.data.substr(4,4);return Jx(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,t,"RRRR")}}]),e}();Wx.default=eQ;var tQ={};Object.defineProperty(tQ,"__esModule",{value:!0});var AQ=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),nQ=Ox,iQ=oQ(Tx),rQ=oQ(_b);function oQ(e){return e&&e.__esModule?e:{default:e}}var sQ=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,rQ.default),AQ(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e,t=nQ.EAN5_STRUCTURE[(e=this.data,e.split("").map((function(e){return+e})).reduce((function(e,t,A){return A%2?e+9*t:e+3*t}),0)%10)];return{data:"1011"+(0,iQ.default)(this.data,t,"01"),text:this.text}}}]),e}();tQ.default=sQ;var aQ={};Object.defineProperty(aQ,"__esModule",{value:!0});var lQ=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),cQ=Ox,uQ=dQ(Tx),hQ=dQ(_b);function dQ(e){return e&&e.__esModule?e:{default:e}}var fQ=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,hQ.default),lQ(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=cQ.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,uQ.default)(this.data,e,"01"),text:this.text}}}]),e}();aQ.default=fQ;var gQ={};Object.defineProperty(gQ,"__esModule",{value:!0});var pQ=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}();gQ.checksum=CQ;var vQ=BQ(Tx),mQ=BQ(_b);function BQ(e){return e&&e.__esModule?e:{default:e}}var yQ=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{11}$/)&&(t+=CQ(t));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A));return n.displayValue=A.displayValue,A.fontSize>10*A.width?n.fontSize=10*A.width:n.fontSize=A.fontSize,n.guardHeight=A.height+n.fontSize/2+A.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,mQ.default),pQ(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==CQ(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,vQ.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,vQ.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,vQ.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,vQ.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,vQ.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,vQ.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),e}();function CQ(e){var t,A=0;for(t=1;t<11;t+=2)A+=parseInt(e[t]);for(t=0;t<11;t+=2)A+=3*parseInt(e[t]);return(10-A%10)%10}gQ.default=yQ;var wQ={};Object.defineProperty(wQ,"__esModule",{value:!0});var bQ=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),xQ=IQ(Tx),QQ=IQ(_b),EQ=gQ;function IQ(e){return e&&e.__esModule?e:{default:e}}function _Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var SQ=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],FQ=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],kQ=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=_Q(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A));if(n.isValid=!1,-1!==t.search(/^[0-9]{6}$/))n.middleDigits=t,n.upcA=UQ(t,"0"),n.text=A.text||""+n.upcA[0]+t+n.upcA[n.upcA.length-1],n.isValid=!0;else{if(-1===t.search(/^[01][0-9]{7}$/))return _Q(n);if(n.middleDigits=t.substring(1,t.length-1),n.upcA=UQ(n.middleDigits,t[0]),n.upcA[n.upcA.length-1]!==t[t.length-1])return _Q(n);n.isValid=!0}return n.displayValue=A.displayValue,A.fontSize>10*A.width?n.fontSize=10*A.width:n.fontSize=A.fontSize,n.guardHeight=A.height+n.fontSize/2+A.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,QQ.default),bQ(e,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],A=FQ[parseInt(t)][parseInt(e)];return(0,xQ.default)(this.middleDigits,A)}}]),e}();function UQ(e,t){for(var A=parseInt(e[e.length-1]),n=SQ[A],i="",r=0,o=0;o<n.length;o++){var s=n[o];i+="X"===s?e[r++]:s}return""+(i=""+t+i)+(0,EQ.checksum)(i)}wQ.default=kQ,Object.defineProperty(kx,"__esModule",{value:!0}),kx.UPCE=kx.UPC=kx.EAN2=kx.EAN5=kx.EAN8=kx.EAN13=void 0;var OQ=PQ(Ux),DQ=PQ(Wx),TQ=PQ(tQ),MQ=PQ(aQ),LQ=PQ(gQ),HQ=PQ(wQ);function PQ(e){return e&&e.__esModule?e:{default:e}}kx.EAN13=OQ.default,kx.EAN8=DQ.default,kx.EAN5=TQ.default,kx.EAN2=MQ.default,kx.UPC=LQ.default,kx.UPCE=HQ.default;var RQ={},NQ={},jQ={};Object.defineProperty(jQ,"__esModule",{value:!0}),jQ.START_BIN="1010",jQ.END_BIN="11101",jQ.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"],Object.defineProperty(NQ,"__esModule",{value:!0});var VQ=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),KQ=jQ,GQ=function(e){return e&&e.__esModule?e:{default:e}}(_b);var YQ=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,GQ.default),VQ(e,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map((function(t){return e.encodePair(t)})).join("");return{data:KQ.START_BIN+t+KQ.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=KQ.BINARIES[e[1]];return KQ.BINARIES[e[0]].split("").map((function(e,A){return("1"===e?"111":"1")+("1"===t[A]?"000":"0")})).join("")}}]),e}();NQ.default=YQ;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});var zQ=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),WQ=function(e){return e&&e.__esModule?e:{default:e}}(NQ);var $Q=function(e){var t=e.substr(0,13).split("").map((function(e){return parseInt(e,10)})).reduce((function(e,t,A){return e+t*(3-A%2*2)}),0);return 10*Math.ceil(t/10)-t},JQ=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),-1!==t.search(/^[0-9]{13}$/)&&(t+=$Q(t)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,WQ.default),zQ(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===$Q(this.data)}}]),e}();XQ.default=JQ,Object.defineProperty(RQ,"__esModule",{value:!0}),RQ.ITF14=RQ.ITF=void 0;var qQ=eE(NQ),ZQ=eE(XQ);function eE(e){return e&&e.__esModule?e:{default:e}}RQ.ITF=qQ.default,RQ.ITF14=ZQ.default;var tE={},AE={};Object.defineProperty(AE,"__esModule",{value:!0});var nE=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),iE=function(e){return e&&e.__esModule?e:{default:e}}(_b);var rE=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,iE.default),nE(e,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var A=parseInt(this.data[t]).toString(2);A=oE(A,4-A.length);for(var n=0;n<A.length;n++)e+="0"==A[n]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),e}();function oE(e,t){for(var A=0;A<t;A++)e="0"+e;return e}AE.default=rE;var sE={},aE={};Object.defineProperty(aE,"__esModule",{value:!0}),aE.mod10=function(e){for(var t=0,A=0;A<e.length;A++){var n=parseInt(e[A]);(A+e.length)%2==0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},aE.mod11=function(e){for(var t=0,A=[2,3,4,5,6,7],n=0;n<e.length;n++){var i=parseInt(e[e.length-1-n]);t+=A[n%A.length]*i}return(11-t%11)%11},Object.defineProperty(sE,"__esModule",{value:!0});var lE=function(e){return e&&e.__esModule?e:{default:e}}(AE),cE=aE;var uE=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,cE.mod10)(t),A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,lE.default),e}();sE.default=uE;var hE={};Object.defineProperty(hE,"__esModule",{value:!0});var dE=function(e){return e&&e.__esModule?e:{default:e}}(AE),fE=aE;var gE=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,fE.mod11)(t),A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,dE.default),e}();hE.default=gE;var pE={};Object.defineProperty(pE,"__esModule",{value:!0});var vE=function(e){return e&&e.__esModule?e:{default:e}}(AE),mE=aE;var BE=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t+=(0,mE.mod10)(t),t+=(0,mE.mod10)(t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,vE.default),e}();pE.default=BE;var yE={};Object.defineProperty(yE,"__esModule",{value:!0});var CE=function(e){return e&&e.__esModule?e:{default:e}}(AE),wE=aE;var bE=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t+=(0,wE.mod11)(t),t+=(0,wE.mod10)(t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,CE.default),e}();yE.default=bE,Object.defineProperty(tE,"__esModule",{value:!0}),tE.MSI1110=tE.MSI1010=tE.MSI11=tE.MSI10=tE.MSI=void 0;var xE=SE(AE),QE=SE(sE),EE=SE(hE),IE=SE(pE),_E=SE(yE);function SE(e){return e&&e.__esModule?e:{default:e}}tE.MSI=xE.default,tE.MSI10=QE.default,tE.MSI11=EE.default,tE.MSI1010=IE.default,tE.MSI1110=_E.default;var FE={};Object.defineProperty(FE,"__esModule",{value:!0}),FE.pharmacode=void 0;var kE=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),UE=function(e){return e&&e.__esModule?e:{default:e}}(_b);var OE=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A));return n.number=parseInt(t,10),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,UE.default),kE(e,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2==0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),e}();FE.pharmacode=OE;var DE={};Object.defineProperty(DE,"__esModule",{value:!0}),DE.codabar=void 0;var TE=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),ME=function(e){return e&&e.__esModule?e:{default:e}}(_b);var LE=function(){function e(t,A){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),0===t.search(/^[0-9\-\$\:\.\+\/]+$/)&&(t="A"+t+"A");var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),A));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,ME.default),TE(e,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),A=0;A<this.data.length;A++)e.push(t[this.data.charAt(A)]),A!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),e}();DE.codabar=LE;var HE={};Object.defineProperty(HE,"__esModule",{value:!0}),HE.GenericBarcode=void 0;var PE=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),RE=function(e){return e&&e.__esModule?e:{default:e}}(_b);var NE=function(){function e(t,A){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,A))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,RE.default),PE(e,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),e}();HE.GenericBarcode=NE,Object.defineProperty(Eb,"__esModule",{value:!0});var jE=Ib,VE=Hb,KE=kx,GE=RQ,YE=tE,XE=FE,zE=DE,WE=HE;Eb.default={CODE39:jE.CODE39,CODE128:VE.CODE128,CODE128A:VE.CODE128A,CODE128B:VE.CODE128B,CODE128C:VE.CODE128C,EAN13:KE.EAN13,EAN8:KE.EAN8,EAN5:KE.EAN5,EAN2:KE.EAN2,UPC:KE.UPC,UPCE:KE.UPCE,ITF14:GE.ITF14,ITF:GE.ITF,MSI:YE.MSI,MSI10:YE.MSI10,MSI11:YE.MSI11,MSI1010:YE.MSI1010,MSI1110:YE.MSI1110,pharmacode:XE.pharmacode,codabar:zE.codabar,GenericBarcode:WE.GenericBarcode};var $E={};Object.defineProperty($E,"__esModule",{value:!0});var JE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var A=arguments[t];for(var n in A)Object.prototype.hasOwnProperty.call(A,n)&&(e[n]=A[n])}return e};$E.default=function(e,t){return JE({},e,t)};var qE={};Object.defineProperty(qE,"__esModule",{value:!0}),qE.default=function(e){var t=[];return function e(A){if(Array.isArray(A))for(var n=0;n<A.length;n++)e(A[n]);else A.text=A.text||"",A.data=A.data||"",t.push(A)}(e),t};var ZE={};Object.defineProperty(ZE,"__esModule",{value:!0}),ZE.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e};var eI={},tI={},AI={};Object.defineProperty(AI,"__esModule",{value:!0}),AI.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var A in t)t.hasOwnProperty(A)&&"string"==typeof e[A=t[A]]&&(e[A]=parseInt(e[A],10));"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue);return e};var nI={};Object.defineProperty(nI,"__esModule",{value:!0});nI.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}},Object.defineProperty(tI,"__esModule",{value:!0});var iI=oI(AI),rI=oI(nI);function oI(e){return e&&e.__esModule?e:{default:e}}tI.default=function(e){var t={};for(var A in rI.default)rI.default.hasOwnProperty(A)&&(e.hasAttribute("jsbarcode-"+A.toLowerCase())&&(t[A]=e.getAttribute("jsbarcode-"+A.toLowerCase())),e.hasAttribute("data-"+A.toLowerCase())&&(t[A]=e.getAttribute("data-"+A.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,iI.default)(t)};var sI={},aI={},lI={};Object.defineProperty(lI,"__esModule",{value:!0}),lI.getTotalWidthOfEncodings=lI.calculateEncodingAttributes=lI.getBarcodePadding=lI.getEncodingHeight=lI.getMaximumHeightOfEncodings=void 0;var cI=function(e){return e&&e.__esModule?e:{default:e}}($E);function uI(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function hI(e,t,A){if(A.displayValue&&t<e){if("center"==A.textAlign)return Math.floor((e-t)/2);if("left"==A.textAlign)return 0;if("right"==A.textAlign)return Math.floor(e-t)}return 0}function dI(e,t,A){var n;if(A)n=A;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var i=n.measureText(e);return i?i.width:0}lI.getMaximumHeightOfEncodings=function(e){for(var t=0,A=0;A<e.length;A++)e[A].height>t&&(t=e[A].height);return t},lI.getEncodingHeight=uI,lI.getBarcodePadding=hI,lI.calculateEncodingAttributes=function(e,t,A){for(var n=0;n<e.length;n++){var i,r=e[n],o=(0,cI.default)(t,r.options);i=o.displayValue?dI(r.text,o,A):0;var s=r.data.length*o.width;r.width=Math.ceil(Math.max(i,s)),r.height=uI(r,o),r.barcodePadding=hI(i,s,o)}},lI.getTotalWidthOfEncodings=function(e){for(var t=0,A=0;A<e.length;A++)t+=e[A].width;return t},Object.defineProperty(aI,"__esModule",{value:!0});var fI=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),gI=function(e){return e&&e.__esModule?e:{default:e}}($E),pI=lI;var vI=function(){function e(t,A,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=A,this.options=n}return fI(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,gI.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,pI.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,pI.getTotalWidthOfEncodings)(this.encodings),A=(0,pI.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=A,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var A,n=this.canvas.getContext("2d"),i=t.data;A="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,n.fillStyle=e.lineColor;for(var r=0;r<i.length;r++){var o=r*e.width+t.barcodePadding;"1"===i[r]?n.fillRect(o,A,e.width,e.height):i[r]&&n.fillRect(o,A,e.width,e.height*i[r])}}},{key:"drawCanvasText",value:function(e,t){var A,n,i=this.canvas.getContext("2d"),r=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,i.font=r,"left"==e.textAlign||t.barcodePadding>0?(A=0,i.textAlign="left"):"right"==e.textAlign?(A=t.width-1,i.textAlign="right"):(A=t.width/2,i.textAlign="center"),i.fillText(t.text,A,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();aI.default=vI;var mI={};Object.defineProperty(mI,"__esModule",{value:!0});var BI=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}(),yI=function(e){return e&&e.__esModule?e:{default:e}}($E),CI=lI;var wI="http://www.w3.org/2000/svg",bI=function(){function e(t,A,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=A,this.options=n,this.document=n.xmlDocument||document}return BI(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var A=this.encodings[t],n=(0,yI.default)(this.options,A.options),i=this.createGroup(e,n.marginTop,this.svg);this.setGroupOptions(i,n),this.drawSvgBarcode(i,n,A),this.drawSVGText(i,n,A),e+=A.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,CI.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,CI.getTotalWidthOfEncodings)(this.encodings),t=(0,CI.getMaximumHeightOfEncodings)(this.encodings),A=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(A,t),this.options.background&&this.drawRect(0,0,A,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,A){var n,i=A.data;n="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var r=0,o=0,s=0;s<i.length;s++)o=s*t.width+A.barcodePadding,"1"===i[s]?r++:r>0&&(this.drawRect(o-t.width*r,n,t.width*r,t.height,e),r=0);r>0&&this.drawRect(o-t.width*(r-1),n,t.width*r,t.height,e)}},{key:"drawSVGText",value:function(e,t,A){var n,i,r=this.document.createElementNS(wI,"text");t.displayValue&&(r.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),i="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||A.barcodePadding>0?(n=0,r.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=A.width-1,r.setAttribute("text-anchor","end")):(n=A.width/2,r.setAttribute("text-anchor","middle")),r.setAttribute("x",n),r.setAttribute("y",i),r.appendChild(this.document.createTextNode(A.text)),e.appendChild(r))}},{key:"setSvgAttributes",value:function(e,t){var A=this.svg;A.setAttribute("width",e+"px"),A.setAttribute("height",t+"px"),A.setAttribute("x","0px"),A.setAttribute("y","0px"),A.setAttribute("viewBox","0 0 "+e+" "+t),A.setAttribute("xmlns",wI),A.setAttribute("version","1.1"),A.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,A){var n=this.document.createElementNS(wI,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),A.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,A,n,i){var r=this.document.createElementNS(wI,"rect");return r.setAttribute("x",e),r.setAttribute("y",t),r.setAttribute("width",A),r.setAttribute("height",n),i.appendChild(r),r}}]),e}();mI.default=bI;var xI={};Object.defineProperty(xI,"__esModule",{value:!0});var QI=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}();var EI=function(){function e(t,A,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.encodings=A,this.options=n}return QI(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();xI.default=EI,Object.defineProperty(sI,"__esModule",{value:!0});var II=FI(aI),_I=FI(mI),SI=FI(xI);function FI(e){return e&&e.__esModule?e:{default:e}}sI.default={CanvasRenderer:II.default,SVGRenderer:_I.default,ObjectRenderer:SI.default};var kI={};function UI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OI(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function DI(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(kI,"__esModule",{value:!0});var TI=function(){function e(t,A){UI(this,e);var n=OI(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.name="InvalidInputException",n.symbology=t,n.input=A,n.message='"'+n.input+'" is not a valid input for '+n.symbology,n}return DI(e,Error),e}(),MI=function(){function e(){UI(this,e);var t=OI(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return DI(e,Error),e}(),LI=function(){function e(){UI(this,e);var t=OI(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return DI(e,Error),e}();kI.InvalidInputException=TI,kI.InvalidElementException=MI,kI.NoElementException=LI,Object.defineProperty(eI,"__esModule",{value:!0});var HI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PI=jI(tI),RI=jI(sI),NI=kI;function jI(e){return e&&e.__esModule?e:{default:e}}function VI(e){if("string"==typeof e)return function(e){var t=document.querySelectorAll(e);if(0===t.length)return;for(var A=[],n=0;n<t.length;n++)A.push(VI(t[n]));return A}(e);if(Array.isArray(e)){for(var t=[],A=0;A<e.length;A++)t.push(VI(e[A]));return t}if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return n=e,{element:i=document.createElement("canvas"),options:(0,PI.default)(n),renderer:RI.default.CanvasRenderer,afterRender:function(){n.setAttribute("src",i.toDataURL())}};if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,PI.default)(e),renderer:RI.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,PI.default)(e),renderer:RI.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:RI.default.CanvasRenderer};if(e&&"object"===(void 0===e?"undefined":HI(e))&&!e.nodeName)return{element:e,renderer:RI.default.ObjectRenderer};throw new NI.InvalidElementException;var n,i}eI.default=VI;var KI={};Object.defineProperty(KI,"__esModule",{value:!0});var GI=function(){function e(e,t){for(var A=0;A<t.length;A++){var n=t[A];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,A,n){return A&&e(t.prototype,A),n&&e(t,n),t}}();var YI=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}return GI(e,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(A){return this.handleCatch(A),this.api}}}]),e}();KI.default=YI;var XI=A_(Eb),zI=A_($E),WI=A_(qE),$I=A_(ZE),JI=A_(eI),qI=A_(AI),ZI=A_(KI),e_=kI,t_=A_(nI);function A_(e){return e&&e.__esModule?e:{default:e}}var n_=function(){},i_=function(e,t,A){var n=new n_;if(void 0===e)throw Error("No element to render on was provided.");return n._renderProperties=(0,JI.default)(e),n._encodings=[],n._options=t_.default,n._errorHandler=new ZI.default(n),void 0!==t&&((A=A||{}).format||(A.format=a_()),n.options(A)[A.format](t,A).render()),n};for(var r_ in i_.getModule=function(e){return XI.default[e]},XI.default)XI.default.hasOwnProperty(r_)&&o_(XI.default,r_);function o_(e,t){n_.prototype[t]=n_.prototype[t.toUpperCase()]=n_.prototype[t.toLowerCase()]=function(A,n){var i=this;return i._errorHandler.wrapBarcodeCall((function(){n.text=void 0===n.text?void 0:""+n.text;var r=(0,zI.default)(i._options,n);r=(0,qI.default)(r);var o=e[t],s=s_(A,o,r);return i._encodings.push(s),i}))}}function s_(e,t,A){var n=new t(e=""+e,A);if(!n.valid())throw new e_.InvalidInputException(n.constructor.name,e);var i=n.encode();i=(0,WI.default)(i);for(var r=0;r<i.length;r++)i[r].options=(0,zI.default)(A,i[r].options);return i}function a_(){return XI.default.CODE128?"CODE128":Object.keys(XI.default)[0]}function l_(e,t,A){t=(0,WI.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,zI.default)(A,t[n].options),(0,$I.default)(t[n].options);(0,$I.default)(A),new(0,e.renderer)(e.element,t,A).render(),e.afterRender&&e.afterRender()}n_.prototype.options=function(e){return this._options=(0,zI.default)(this._options,e),this},n_.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},n_.prototype.init=function(){var e;if(this._renderProperties)for(var t in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){e=this._renderProperties[t];var A=(0,zI.default)(this._options,e.options);"auto"==A.format&&(A.format=a_()),this._errorHandler.wrapBarcodeCall((function(){var t=s_(A.value,XI.default[A.format.toUpperCase()],A);l_(e,t,A)}))}},n_.prototype.render=function(){if(!this._renderProperties)throw new e_.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)l_(this._renderProperties[e],this._encodings,this._options);else l_(this._renderProperties,this._encodings,this._options);return this},n_.prototype._defaults=t_.default,"undefined"!=typeof window&&(window.JsBarcode=i_),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var A=[];return jQuery(this).each((function(){A.push(this)})),i_(A,e,t)});const c_=bn(i_);var u_=(e=>(e.CODE128="CODE128",e.EAN8="EAN8",e.EAN13="EAN13",e.ITF14="ITF14",e.codabar="codabar",e.pharmacode="pharmacode",e))(u_||{});class h_{constructor(e,t){this.canvas=e,this.editor=t}hookTransform(e){return u(this,null,(function*(){if("barcode"===e.extensionType){const t=yield this._getBase64Str(e.extension);e.src=t}}))}_getBase64Str(e){const t=document.createElement("canvas");c_(t,e.value,a({},e));return t.toDataURL("image/png",1)}_defaultBarcodeOption(){return{value:"123456",format:"CODE128",text:"hi kuaitu",textAlign:"left",textPosition:"bottom",fontSize:12,background:"#fff",lineColor:"#000",displayValue:!1}}addBarcode(){const e=this._defaultBarcodeOption(),t=this._getBase64Str(JSON.parse(JSON.stringify(e)));wv.fabric.Image.fromURL(t,(t=>{t.set({extensionType:"barcode",extension:e}),t.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(t),this.canvas.setActiveObject(t),this.editor.position("center"),this.canvas.renderAll(),this.editor.saveState()}),{crossOrigin:"anonymous"})}setBarcode(e){try{const t=this._getBase64Str(e),A=this.canvas.getActiveObjects()[0];wv.fabric.Image.fromURL(t,(t=>{t.set({left:A.left,top:A.top,extensionType:"barcode",extension:a({},e)}),t.scaleToWidth(A.getScaledWidth()),this.editor.del(),this.canvas.add(t),this.canvas.setActiveObject(t)}),{crossOrigin:"anonymous"})}catch(t){}}getBarcodeTypes(){return Object.values(u_)}destroy(){}}c(h_,"pluginName","BarCodePlugin"),c(h_,"apis",["addBarcode","setBarcode","getBarcodeTypes"]);var d_={exports:{}};self,d_.exports=(()=>{var e={192:(e,t)=>{var A,n,i=function(){var e=function(e,t){var A=e,n=o[t],i=null,r=0,a=null,p=[],v={},B=function(e,t){i=function(e){for(var t=new Array(e),A=0;A<e;A+=1){t[A]=new Array(e);for(var n=0;n<e;n+=1)t[A][n]=null}return t}(r=4*A+17),y(0,0),y(r-7,0),y(0,r-7),w(),C(),x(e,t),A>=7&&b(e),null==a&&(a=E(A,n,p)),Q(a,t)},y=function(e,t){for(var A=-1;A<=7;A+=1)if(!(e+A<=-1||r<=e+A))for(var n=-1;n<=7;n+=1)t+n<=-1||r<=t+n||(i[e+A][t+n]=0<=A&&A<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==A||6==A)||2<=A&&A<=4&&2<=n&&n<=4)},C=function(){for(var e=8;e<r-8;e+=1)null==i[e][6]&&(i[e][6]=e%2==0);for(var t=8;t<r-8;t+=1)null==i[6][t]&&(i[6][t]=t%2==0)},w=function(){for(var e=s.getPatternPosition(A),t=0;t<e.length;t+=1)for(var n=0;n<e.length;n+=1){var r=e[t],o=e[n];if(null==i[r][o])for(var a=-2;a<=2;a+=1)for(var l=-2;l<=2;l+=1)i[r+a][o+l]=-2==a||2==a||-2==l||2==l||0==a&&0==l}},b=function(e){for(var t=s.getBCHTypeNumber(A),n=0;n<18;n+=1){var o=!e&&1==(t>>n&1);i[Math.floor(n/3)][n%3+r-8-3]=o}for(n=0;n<18;n+=1)o=!e&&1==(t>>n&1),i[n%3+r-8-3][Math.floor(n/3)]=o},x=function(e,t){for(var A=n<<3|t,o=s.getBCHTypeInfo(A),a=0;a<15;a+=1){var l=!e&&1==(o>>a&1);a<6?i[a][8]=l:a<8?i[a+1][8]=l:i[r-15+a][8]=l}for(a=0;a<15;a+=1)l=!e&&1==(o>>a&1),a<8?i[8][r-a-1]=l:a<9?i[8][15-a-1+1]=l:i[8][15-a-1]=l;i[r-8][8]=!e},Q=function(e,t){for(var A=-1,n=r-1,o=7,a=0,l=s.getMaskFunction(t),c=r-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var u=0;u<2;u+=1)if(null==i[n][c-u]){var h=!1;a<e.length&&(h=1==(e[a]>>>o&1)),l(n,c-u)&&(h=!h),i[n][c-u]=h,-1==(o-=1)&&(a+=1,o=7)}if((n+=A)<0||r<=n){n-=A,A=-A;break}}},E=function(e,t,A){for(var n=c.getRSBlocks(e,t),i=u(),r=0;r<A.length;r+=1){var o=A[r];i.put(o.getMode(),4),i.put(o.getLength(),s.getLengthInBits(o.getMode(),e)),o.write(i)}var a=0;for(r=0;r<n.length;r+=1)a+=n[r].dataCount;if(i.getLengthInBits()>8*a)throw"code length overflow. ("+i.getLengthInBits()+">"+8*a+")";for(i.getLengthInBits()+4<=8*a&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*a||(i.put(236,8),i.getLengthInBits()>=8*a));)i.put(17,8);return function(e,t){for(var A=0,n=0,i=0,r=new Array(t.length),o=new Array(t.length),a=0;a<t.length;a+=1){var c=t[a].dataCount,u=t[a].totalCount-c;n=Math.max(n,c),i=Math.max(i,u),r[a]=new Array(c);for(var h=0;h<r[a].length;h+=1)r[a][h]=255&e.getBuffer()[h+A];A+=c;var d=s.getErrorCorrectPolynomial(u),f=l(r[a],d.getLength()-1).mod(d);for(o[a]=new Array(d.getLength()-1),h=0;h<o[a].length;h+=1){var g=h+f.getLength()-o[a].length;o[a][h]=g>=0?f.getAt(g):0}}var p=0;for(h=0;h<t.length;h+=1)p+=t[h].totalCount;var v=new Array(p),m=0;for(h=0;h<n;h+=1)for(a=0;a<t.length;a+=1)h<r[a].length&&(v[m]=r[a][h],m+=1);for(h=0;h<i;h+=1)for(a=0;a<t.length;a+=1)h<o[a].length&&(v[m]=o[a][h],m+=1);return v}(i,n)};v.addData=function(e,t){var A=null;switch(t=t||"Byte"){case"Numeric":A=h(e);break;case"Alphanumeric":A=d(e);break;case"Byte":A=f(e);break;case"Kanji":A=g(e);break;default:throw"mode:"+t}p.push(A),a=null},v.isDark=function(e,t){if(e<0||r<=e||t<0||r<=t)throw e+","+t;return i[e][t]},v.getModuleCount=function(){return r},v.make=function(){if(A<1){for(var e=1;e<40;e++){for(var t=c.getRSBlocks(e,n),i=u(),r=0;r<p.length;r++){var o=p[r];i.put(o.getMode(),4),i.put(o.getLength(),s.getLengthInBits(o.getMode(),e)),o.write(i)}var a=0;for(r=0;r<t.length;r++)a+=t[r].dataCount;if(i.getLengthInBits()<=8*a)break}A=e}B(!1,function(){for(var e=0,t=0,A=0;A<8;A+=1){B(!0,A);var n=s.getLostPoint(v);(0==A||e>n)&&(e=n,t=A)}return t}())},v.createTableTag=function(e,t){e=e||2;var A="";A+='<table style="',A+=" border-width: 0px; border-style: none;",A+=" border-collapse: collapse;",A+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",A+='">',A+="<tbody>";for(var n=0;n<v.getModuleCount();n+=1){A+="<tr>";for(var i=0;i<v.getModuleCount();i+=1)A+='<td style="',A+=" border-width: 0px; border-style: none;",A+=" border-collapse: collapse;",A+=" padding: 0px; margin: 0px;",A+=" width: "+e+"px;",A+=" height: "+e+"px;",A+=" background-color: ",A+=v.isDark(n,i)?"#000000":"#ffffff",A+=";",A+='"/>';A+="</tr>"}return(A+="</tbody>")+"</table>"},v.createSvgTag=function(e,t,A,n){var i={};"object"==typeof arguments[0]&&(e=(i=arguments[0]).cellSize,t=i.margin,A=i.alt,n=i.title),e=e||2,t=void 0===t?4*e:t,(A="string"==typeof A?{text:A}:A||{}).text=A.text||null,A.id=A.text?A.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var r,o,s,a,l=v.getModuleCount()*e+2*t,c="";for(a="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",c+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',c+=i.scalable?"":' width="'+l+'px" height="'+l+'px"',c+=' viewBox="0 0 '+l+" "+l+'" ',c+=' preserveAspectRatio="xMinYMin meet"',c+=n.text||A.text?' role="img" aria-labelledby="'+I([n.id,A.id].join(" ").trim())+'"':"",c+=">",c+=n.text?'<title id="'+I(n.id)+'">'+I(n.text)+"</title>":"",c+=A.text?'<description id="'+I(A.id)+'">'+I(A.text)+"</description>":"",c+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',c+='<path d="',o=0;o<v.getModuleCount();o+=1)for(s=o*e+t,r=0;r<v.getModuleCount();r+=1)v.isDark(o,r)&&(c+="M"+(r*e+t)+","+s+a);return(c+='" stroke="transparent" fill="black"/>')+"</svg>"},v.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var A=v.getModuleCount()*e+2*t,n=t,i=A-t;return m(A,A,(function(t,A){if(n<=t&&t<i&&n<=A&&A<i){var r=Math.floor((t-n)/e),o=Math.floor((A-n)/e);return v.isDark(o,r)?0:1}return 1}))},v.createImgTag=function(e,t,A){e=e||2,t=void 0===t?4*e:t;var n=v.getModuleCount()*e+2*t,i="";return i+="<img",i+=' src="',i+=v.createDataURL(e,t),i+='"',i+=' width="',i+=n,i+='"',i+=' height="',i+=n,i+='"',A&&(i+=' alt="',i+=I(A),i+='"'),i+"/>"};var I=function(e){for(var t="",A=0;A<e.length;A+=1){var n=e.charAt(A);switch(n){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=n}}return t};return v.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,A,n,i,r,o=1*v.getModuleCount()+2*e,s=e,a=o-e,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},c={"██":"▀","█ ":"▀"," █":" ","  ":" "},u="";for(t=0;t<o;t+=2){for(n=Math.floor((t-s)/1),i=Math.floor((t+1-s)/1),A=0;A<o;A+=1)r="█",s<=A&&A<a&&s<=t&&t<a&&v.isDark(n,Math.floor((A-s)/1))&&(r=" "),s<=A&&A<a&&s<=t+1&&t+1<a&&v.isDark(i,Math.floor((A-s)/1))?r+=" ":r+="█",u+=e<1&&t+1>=a?c[r]:l[r];u+="\n"}return o%2&&e>0?u.substring(0,u.length-o-1)+Array(o+1).join("▀"):u.substring(0,u.length-1)}(t);e-=1,t=void 0===t?2*e:t;var A,n,i,r,o=v.getModuleCount()*e+2*t,s=t,a=o-t,l=Array(e+1).join("██"),c=Array(e+1).join("  "),u="",h="";for(A=0;A<o;A+=1){for(i=Math.floor((A-s)/e),h="",n=0;n<o;n+=1)r=1,s<=n&&n<a&&s<=A&&A<a&&v.isDark(i,Math.floor((n-s)/e))&&(r=0),h+=r?l:c;for(i=0;i<e;i+=1)u+=h+"\n"}return u.substring(0,u.length-1)},v.renderTo2dContext=function(e,t){t=t||2;for(var A=v.getModuleCount(),n=0;n<A;n++)for(var i=0;i<A;i++)e.fillStyle=v.isDark(n,i)?"black":"white",e.fillRect(n*t,i*t,t,t)},v};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],A=0;A<e.length;A+=1){var n=e.charCodeAt(A);t.push(255&n)}return t}}).default,e.createStringToBytes=function(e,t){var A=function(){for(var A=v(e),n=function(){var e=A.read();if(-1==e)throw"eof";return e},i=0,r={};;){var o=A.read();if(-1==o)break;var s=n(),a=n()<<8|n();r[String.fromCharCode(o<<8|s)]=a,i+=1}if(i!=t)throw i+" != "+t;return r}(),n="?".charCodeAt(0);return function(e){for(var t=[],i=0;i<e.length;i+=1){var r=e.charCodeAt(i);if(r<128)t.push(r);else{var o=A[e.charAt(i)];"number"==typeof o?(255&o)==o?t.push(o):(t.push(o>>>8),t.push(255&o)):t.push(n)}}return t}};var t,A,n,i,r,o={L:1,M:0,Q:3,H:2},s=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],A=1335,n=7973,r=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(i={}).getBCHTypeInfo=function(e){for(var t=e<<10;r(t)-r(A)>=0;)t^=A<<r(t)-r(A);return 21522^(e<<10|t)},i.getBCHTypeNumber=function(e){for(var t=e<<12;r(t)-r(n)>=0;)t^=n<<r(t)-r(n);return e<<12|t},i.getPatternPosition=function(e){return t[e-1]},i.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},i.getErrorCorrectPolynomial=function(e){for(var t=l([1],0),A=0;A<e;A+=1)t=t.multiply(l([1,a.gexp(A)],0));return t},i.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"mode:"+e}}},i.getLostPoint=function(e){for(var t=e.getModuleCount(),A=0,n=0;n<t;n+=1)for(var i=0;i<t;i+=1){for(var r=0,o=e.isDark(n,i),s=-1;s<=1;s+=1)if(!(n+s<0||t<=n+s))for(var a=-1;a<=1;a+=1)i+a<0||t<=i+a||0==s&&0==a||o==e.isDark(n+s,i+a)&&(r+=1);r>5&&(A+=3+r-5)}for(n=0;n<t-1;n+=1)for(i=0;i<t-1;i+=1){var l=0;e.isDark(n,i)&&(l+=1),e.isDark(n+1,i)&&(l+=1),e.isDark(n,i+1)&&(l+=1),e.isDark(n+1,i+1)&&(l+=1),0!=l&&4!=l||(A+=3)}for(n=0;n<t;n+=1)for(i=0;i<t-6;i+=1)e.isDark(n,i)&&!e.isDark(n,i+1)&&e.isDark(n,i+2)&&e.isDark(n,i+3)&&e.isDark(n,i+4)&&!e.isDark(n,i+5)&&e.isDark(n,i+6)&&(A+=40);for(i=0;i<t;i+=1)for(n=0;n<t-6;n+=1)e.isDark(n,i)&&!e.isDark(n+1,i)&&e.isDark(n+2,i)&&e.isDark(n+3,i)&&e.isDark(n+4,i)&&!e.isDark(n+5,i)&&e.isDark(n+6,i)&&(A+=40);var c=0;for(i=0;i<t;i+=1)for(n=0;n<t;n+=1)e.isDark(n,i)&&(c+=1);return A+Math.abs(100*c/t/t-50)/5*10},i),a=function(){for(var e=new Array(256),t=new Array(256),A=0;A<8;A+=1)e[A]=1<<A;for(A=8;A<256;A+=1)e[A]=e[A-4]^e[A-5]^e[A-6]^e[A-8];for(A=0;A<255;A+=1)t[e[A]]=A;return{glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}}}();function l(e,t){if(void 0===e.length)throw e.length+"/"+t;var A=function(){for(var A=0;A<e.length&&0==e[A];)A+=1;for(var n=new Array(e.length-A+t),i=0;i<e.length-A;i+=1)n[i]=e[i+A];return n}(),n={getAt:function(e){return A[e]},getLength:function(){return A.length},multiply:function(e){for(var t=new Array(n.getLength()+e.getLength()-1),A=0;A<n.getLength();A+=1)for(var i=0;i<e.getLength();i+=1)t[A+i]^=a.gexp(a.glog(n.getAt(A))+a.glog(e.getAt(i)));return l(t,0)},mod:function(e){if(n.getLength()-e.getLength()<0)return n;for(var t=a.glog(n.getAt(0))-a.glog(e.getAt(0)),A=new Array(n.getLength()),i=0;i<n.getLength();i+=1)A[i]=n.getAt(i);for(i=0;i<e.getLength();i+=1)A[i]^=a.gexp(a.glog(e.getAt(i))+t);return l(A,0).mod(e)}};return n}var c=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var A={};return A.totalCount=e,A.dataCount=t,A};return{getRSBlocks:function(A,n){var i=function(t,A){switch(A){case o.L:return e[4*(t-1)+0];case o.M:return e[4*(t-1)+1];case o.Q:return e[4*(t-1)+2];case o.H:return e[4*(t-1)+3];default:return}}(A,n);if(void 0===i)throw"bad rs block @ typeNumber:"+A+"/errorCorrectionLevel:"+n;for(var r=i.length/3,s=[],a=0;a<r;a+=1)for(var l=i[3*a+0],c=i[3*a+1],u=i[3*a+2],h=0;h<l;h+=1)s.push(t(c,u));return s}}}(),u=function(){var e=[],t=0,A={getBuffer:function(){return e},getAt:function(t){var A=Math.floor(t/8);return 1==(e[A]>>>7-t%8&1)},put:function(e,t){for(var n=0;n<t;n+=1)A.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return t},putBit:function(A){var n=Math.floor(t/8);e.length<=n&&e.push(0),A&&(e[n]|=128>>>t%8),t+=1}};return A},h=function(e){var t=e,A={getMode:function(){return 1},getLength:function(e){return t.length},write:function(e){for(var A=t,i=0;i+2<A.length;)e.put(n(A.substring(i,i+3)),10),i+=3;i<A.length&&(A.length-i==1?e.put(n(A.substring(i,i+1)),4):A.length-i==2&&e.put(n(A.substring(i,i+2)),7))}},n=function(e){for(var t=0,A=0;A<e.length;A+=1)t=10*t+i(e.charAt(A));return t},i=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return A},d=function(e){var t=e,A={getMode:function(){return 2},getLength:function(e){return t.length},write:function(e){for(var A=t,i=0;i+1<A.length;)e.put(45*n(A.charAt(i))+n(A.charAt(i+1)),11),i+=2;i<A.length&&e.put(n(A.charAt(i)),6)}},n=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return A},f=function(t){var A=e.stringToBytes(t);return{getMode:function(){return 4},getLength:function(e){return A.length},write:function(e){for(var t=0;t<A.length;t+=1)e.put(A[t],8)}}},g=function(t){var A=e.stringToBytesFuncs.SJIS;if(!A)throw"sjis not supported.";!function(){var e=A("友");if(2!=e.length||38726!=(e[0]<<8|e[1]))throw"sjis not supported."}();var n=A(t);return{getMode:function(){return 8},getLength:function(e){return~~(n.length/2)},write:function(e){for(var t=n,A=0;A+1<t.length;){var i=(255&t[A])<<8|255&t[A+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(A+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13),A+=2}if(A<t.length)throw"illegal char at "+(A+1)}}},p=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,A,n){A=A||0,n=n||e.length;for(var i=0;i<n;i+=1)t.writeByte(e[i+A])},writeString:function(e){for(var A=0;A<e.length;A+=1)t.writeByte(e.charCodeAt(A))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var A=0;A<e.length;A+=1)A>0&&(t+=","),t+=e[A];return t+"]"}};return t},v=function(e){var t=e,A=0,n=0,i=0,r={read:function(){for(;i<8;){if(A>=t.length){if(0==i)return-1;throw"unexpected end of file./"+i}var e=t.charAt(A);if(A+=1,"="==e)return i=0,-1;e.match(/^\s$/)||(n=n<<6|o(e.charCodeAt(0)),i+=6)}var r=n>>>i-8&255;return i-=8,r}},o=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return r},m=function(e,t,A){for(var n=function(e,t){var A=e,n=t,i=new Array(e*t),r={setPixel:function(e,t,n){i[t*A+e]=n},write:function(e){e.writeString("GIF87a"),e.writeShort(A),e.writeShort(n),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(A),e.writeShort(n),e.writeByte(0);var t=o(2);e.writeByte(2);for(var i=0;t.length-i>255;)e.writeByte(255),e.writeBytes(t,i,255),i+=255;e.writeByte(t.length-i),e.writeBytes(t,i,t.length-i),e.writeByte(0),e.writeString(";")}},o=function(e){for(var t=1<<e,A=1+(1<<e),n=e+1,r=s(),o=0;o<t;o+=1)r.add(String.fromCharCode(o));r.add(String.fromCharCode(t)),r.add(String.fromCharCode(A));var a,l,c,u=p(),h=(a=u,l=0,c=0,{write:function(e,t){if(e>>>t!=0)throw"length over";for(;l+t>=8;)a.writeByte(255&(e<<l|c)),t-=8-l,e>>>=8-l,c=0,l=0;c|=e<<l,l+=t},flush:function(){l>0&&a.writeByte(c)}});h.write(t,n);var d=0,f=String.fromCharCode(i[d]);for(d+=1;d<i.length;){var g=String.fromCharCode(i[d]);d+=1,r.contains(f+g)?f+=g:(h.write(r.indexOf(f),n),r.size()<4095&&(r.size()==1<<n&&(n+=1),r.add(f+g)),f=g)}return h.write(r.indexOf(f),n),h.write(A,n),h.flush(),u.toByteArray()},s=function(){var e={},t=0,A={add:function(n){if(A.contains(n))throw"dup key:"+n;e[n]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return A};return r}(e,t),i=0;i<t;i+=1)for(var r=0;r<e;r+=1)n.setPixel(r,i,A(r,i));var o=p();n.write(o);for(var s=function(){var e=0,t=0,A=0,n="",i={},r=function(e){n+=String.fromCharCode(o(63&e))},o=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return i.writeByte=function(n){for(e=e<<8|255&n,t+=8,A+=1;t>=6;)r(e>>>t-6),t-=6},i.flush=function(){if(t>0&&(r(e<<6-t),e=0,t=0),A%3!=0)for(var i=3-A%3,o=0;o<i;o+=1)n+="="},i.toString=function(){return n},i}(),a=o.toByteArray(),l=0;l<a.length;l+=1)s.writeByte(a[l]);return s.flush(),"data:image/gif;base64,"+s};return e}();i.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],A=0;A<e.length;A++){var n=e.charCodeAt(A);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(A++,n=65536+((1023&n)<<10|1023&e.charCodeAt(A)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}(e)},void 0===(n="function"==typeof(A=function(){return i})?A.apply(t,[]):A)||(e.exports=n)},676:(e,t,A)=>{A.d(t,{default:()=>O});var n=function(){return(n=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var i in t=arguments[A])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=function(){for(var e=0,t=0,A=arguments.length;t<A;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<A;t++)for(var r=arguments[t],o=0,s=r.length;o<s;o++,i++)n[i]=r[o];return n},r=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)};function o(e){for(var t=[],A=1;A<arguments.length;A++)t[A-1]=arguments[A];if(!t.length)return e;var s=t.shift();return void 0!==s&&r(e)&&r(s)?(e=n({},e),Object.keys(s).forEach((function(t){var A=e[t],n=s[t];Array.isArray(A)&&Array.isArray(n)?e[t]=n:r(A)&&r(n)?e[t]=o(Object.assign({},A),n):e[t]=n})),o.apply(void 0,i([e],t))):e}function s(e,t){var A=document.createElement("a");A.download=t,A.href=e,document.body.appendChild(A),A.click(),document.body.removeChild(A)}function a(e){return t=this,A=void 0,i=function(){return function(e,t){var A,n,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(A)throw new TypeError("Generator is already executing.");for(;o;)try{if(A=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{A=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(t){return[2,new Promise((function(t){var A=new XMLHttpRequest;A.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(A.response)},A.open("GET",e),A.responseType="blob",A.send()}))]}))},new((n=void 0)||(n=Promise))((function(e,r){function o(e){try{a(i.next(e))}catch(t){r(t)}}function s(e){try{a(i.throw(e))}catch(t){r(t)}}function a(t){var A;t.done?e(t.value):(A=t.value,A instanceof n?A:new n((function(e){e(A)}))).then(o,s)}a((i=i.apply(t,A||[])).next())}));var t,A,n,i}const l={L:.07,M:.15,Q:.25,H:.3};var c=function(){return(c=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var i in t=arguments[A])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};const u=function(){function e(e){var t=e.svg,A=e.type;this._svg=t,this._type=A}return e.prototype.draw=function(e,t,A,n){var i;switch(this._type){case"dots":i=this._drawDot;break;case"classy":i=this._drawClassy;break;case"classy-rounded":i=this._drawClassyRounded;break;case"rounded":i=this._drawRounded;break;case"extra-rounded":i=this._drawExtraRounded;break;default:i=this._drawSquare}i.call(this,{x:e,y:t,size:A,getNeighbor:n})},e.prototype._rotateFigure=function(e){var t,A=e.x,n=e.y,i=e.size,r=e.rotation,o=void 0===r?0:r,s=A+i/2,a=n+i/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*o/Math.PI+","+s+","+a+")")},e.prototype._basicDot=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(c(c({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),t._element.setAttribute("cx",String(n+A/2)),t._element.setAttribute("cy",String(i+A/2)),t._element.setAttribute("r",String(A/2))}}))},e.prototype._basicSquare=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(c(c({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),t._element.setAttribute("x",String(n)),t._element.setAttribute("y",String(i)),t._element.setAttribute("width",String(A)),t._element.setAttribute("height",String(A))}}))},e.prototype._basicSideRounded=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(c(c({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+i+"v "+A+"h "+A/2+"a "+A/2+" "+A/2+", 0, 0, 0, 0 "+-A)}}))},e.prototype._basicCornerRounded=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(c(c({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+i+"v "+A+"h "+A+"v "+-A/2+"a "+A/2+" "+A/2+", 0, 0, 0, "+-A/2+" "+-A/2)}}))},e.prototype._basicCornerExtraRounded=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(c(c({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+i+"v "+A+"h "+A+"a "+A+" "+A+", 0, 0, 0, "+-A+" "+-A)}}))},e.prototype._basicCornersRounded=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(c(c({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("d","M "+n+" "+i+"v "+A/2+"a "+A/2+" "+A/2+", 0, 0, 0, "+A/2+" "+A/2+"h "+A/2+"v "+-A/2+"a "+A/2+" "+A/2+", 0, 0, 0, "+-A/2+" "+-A/2)}}))},e.prototype._drawDot=function(e){var t=e.x,A=e.y,n=e.size;this._basicDot({x:t,y:A,size:n,rotation:0})},e.prototype._drawSquare=function(e){var t=e.x,A=e.y,n=e.size;this._basicSquare({x:t,y:A,size:n,rotation:0})},e.prototype._drawRounded=function(e){var t=e.x,A=e.y,n=e.size,i=e.getNeighbor,r=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0,l=r+o+s+a;if(0!==l)if(l>2||r&&o||s&&a)this._basicSquare({x:t,y:A,size:n,rotation:0});else{if(2===l){var c=0;return r&&s?c=Math.PI/2:s&&o?c=Math.PI:o&&a&&(c=-Math.PI/2),void this._basicCornerRounded({x:t,y:A,size:n,rotation:c})}if(1===l)return c=0,s?c=Math.PI/2:o?c=Math.PI:a&&(c=-Math.PI/2),void this._basicSideRounded({x:t,y:A,size:n,rotation:c})}else this._basicDot({x:t,y:A,size:n,rotation:0})},e.prototype._drawExtraRounded=function(e){var t=e.x,A=e.y,n=e.size,i=e.getNeighbor,r=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0,l=r+o+s+a;if(0!==l)if(l>2||r&&o||s&&a)this._basicSquare({x:t,y:A,size:n,rotation:0});else{if(2===l){var c=0;return r&&s?c=Math.PI/2:s&&o?c=Math.PI:o&&a&&(c=-Math.PI/2),void this._basicCornerExtraRounded({x:t,y:A,size:n,rotation:c})}if(1===l)return c=0,s?c=Math.PI/2:o?c=Math.PI:a&&(c=-Math.PI/2),void this._basicSideRounded({x:t,y:A,size:n,rotation:c})}else this._basicDot({x:t,y:A,size:n,rotation:0})},e.prototype._drawClassy=function(e){var t=e.x,A=e.y,n=e.size,i=e.getNeighbor,r=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0;0!==r+o+s+a?r||s?o||a?this._basicSquare({x:t,y:A,size:n,rotation:0}):this._basicCornerRounded({x:t,y:A,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:t,y:A,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:A,size:n,rotation:Math.PI/2})},e.prototype._drawClassyRounded=function(e){var t=e.x,A=e.y,n=e.size,i=e.getNeighbor,r=i?+i(-1,0):0,o=i?+i(1,0):0,s=i?+i(0,-1):0,a=i?+i(0,1):0;0!==r+o+s+a?r||s?o||a?this._basicSquare({x:t,y:A,size:n,rotation:0}):this._basicCornerExtraRounded({x:t,y:A,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:t,y:A,size:n,rotation:-Math.PI/2}):this._basicCornersRounded({x:t,y:A,size:n,rotation:Math.PI/2})},e}();var h=function(){return(h=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var i in t=arguments[A])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};const d=function(){function e(e){var t=e.svg,A=e.type;this._svg=t,this._type=A}return e.prototype.draw=function(e,t,A,n){var i;switch(this._type){case"square":i=this._drawSquare;break;case"extra-rounded":i=this._drawExtraRounded;break;default:i=this._drawDot}i.call(this,{x:e,y:t,size:A,rotation:n})},e.prototype._rotateFigure=function(e){var t,A=e.x,n=e.y,i=e.size,r=e.rotation,o=void 0===r?0:r,s=A+i/2,a=n+i/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*o/Math.PI+","+s+","+a+")")},e.prototype._basicDot=function(e){var t=this,A=e.size,n=e.x,i=e.y,r=A/7;this._rotateFigure(h(h({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M "+(n+A/2)+" "+i+"a "+A/2+" "+A/2+" 0 1 0 0.1 0zm 0 "+r+"a "+(A/2-r)+" "+(A/2-r)+" 0 1 1 -0.1 0Z")}}))},e.prototype._basicSquare=function(e){var t=this,A=e.size,n=e.x,i=e.y,r=A/7;this._rotateFigure(h(h({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M "+n+" "+i+"v "+A+"h "+A+"v "+-A+"zM "+(n+r)+" "+(i+r)+"h "+(A-2*r)+"v "+(A-2*r)+"h "+(2*r-A)+"z")}}))},e.prototype._basicExtraRounded=function(e){var t=this,A=e.size,n=e.x,i=e.y,r=A/7;this._rotateFigure(h(h({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","path"),t._element.setAttribute("clip-rule","evenodd"),t._element.setAttribute("d","M "+n+" "+(i+2.5*r)+"v "+2*r+"a "+2.5*r+" "+2.5*r+", 0, 0, 0, "+2.5*r+" "+2.5*r+"h "+2*r+"a "+2.5*r+" "+2.5*r+", 0, 0, 0, "+2.5*r+" "+2.5*-r+"v "+-2*r+"a "+2.5*r+" "+2.5*r+", 0, 0, 0, "+2.5*-r+" "+2.5*-r+"h "+-2*r+"a "+2.5*r+" "+2.5*r+", 0, 0, 0, "+2.5*-r+" "+2.5*r+"M "+(n+2.5*r)+" "+(i+r)+"h "+2*r+"a "+1.5*r+" "+1.5*r+", 0, 0, 1, "+1.5*r+" "+1.5*r+"v "+2*r+"a "+1.5*r+" "+1.5*r+", 0, 0, 1, "+1.5*-r+" "+1.5*r+"h "+-2*r+"a "+1.5*r+" "+1.5*r+", 0, 0, 1, "+1.5*-r+" "+1.5*-r+"v "+-2*r+"a "+1.5*r+" "+1.5*r+", 0, 0, 1, "+1.5*r+" "+1.5*-r)}}))},e.prototype._drawDot=function(e){var t=e.x,A=e.y,n=e.size,i=e.rotation;this._basicDot({x:t,y:A,size:n,rotation:i})},e.prototype._drawSquare=function(e){var t=e.x,A=e.y,n=e.size,i=e.rotation;this._basicSquare({x:t,y:A,size:n,rotation:i})},e.prototype._drawExtraRounded=function(e){var t=e.x,A=e.y,n=e.size,i=e.rotation;this._basicExtraRounded({x:t,y:A,size:n,rotation:i})},e}();var f=function(){return(f=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var i in t=arguments[A])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};const g=function(){function e(e){var t=e.svg,A=e.type;this._svg=t,this._type=A}return e.prototype.draw=function(e,t,A,n){("square"===this._type?this._drawSquare:this._drawDot).call(this,{x:e,y:t,size:A,rotation:n})},e.prototype._rotateFigure=function(e){var t,A=e.x,n=e.y,i=e.size,r=e.rotation,o=void 0===r?0:r,s=A+i/2,a=n+i/2;(0,e.draw)(),null===(t=this._element)||void 0===t||t.setAttribute("transform","rotate("+180*o/Math.PI+","+s+","+a+")")},e.prototype._basicDot=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(f(f({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","circle"),t._element.setAttribute("cx",String(n+A/2)),t._element.setAttribute("cy",String(i+A/2)),t._element.setAttribute("r",String(A/2))}}))},e.prototype._basicSquare=function(e){var t=this,A=e.size,n=e.x,i=e.y;this._rotateFigure(f(f({},e),{draw:function(){t._element=document.createElementNS("http://www.w3.org/2000/svg","rect"),t._element.setAttribute("x",String(n)),t._element.setAttribute("y",String(i)),t._element.setAttribute("width",String(A)),t._element.setAttribute("height",String(A))}}))},e.prototype._drawDot=function(e){var t=e.x,A=e.y,n=e.size,i=e.rotation;this._basicDot({x:t,y:A,size:n,rotation:i})},e.prototype._drawSquare=function(e){var t=e.x,A=e.y,n=e.size,i=e.rotation;this._basicSquare({x:t,y:A,size:n,rotation:i})},e}(),p="circle";var v=function(e,t,A,n){return new(A||(A=Promise))((function(t,i){function r(e){try{s(n.next(e))}catch(t){i(t)}}function o(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof A?n:new A((function(e){e(n)}))).then(r,o)}s((n=n.apply(e,[])).next())}))},m=function(e,t){var A,n,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(A)throw new TypeError("Generator is already executing.");for(;o;)try{if(A=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{A=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},B=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],y=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];const C=function(){function e(e){this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("width",String(e.width)),this._element.setAttribute("height",String(e.height)),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._element.appendChild(this._defs),this._options=e}return Object.defineProperty(e.prototype,"width",{get:function(){return this._options.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._options.height},enumerable:!1,configurable:!0}),e.prototype.getElement=function(){return this._element},e.prototype.drawQR=function(e){return v(this,void 0,void 0,(function(){var t,A,n,i,r,o,s,a,c,u,h=this;return m(this,(function(d){switch(d.label){case 0:return t=e.getModuleCount(),A=Math.min(this._options.width,this._options.height)-2*this._options.margin,n=this._options.shape===p?A/Math.sqrt(2):A,i=Math.floor(n/t),r={hideXDots:0,hideYDots:0,width:0,height:0},this._qr=e,this._options.image?[4,this.loadImage()]:[3,2];case 1:if(d.sent(),!this._image)return[2];o=this._options,s=o.imageOptions,a=o.qrOptions,c=s.imageSize*l[a.errorCorrectionLevel],u=Math.floor(c*t*t),r=function(e){var t=e.originalHeight,A=e.originalWidth,n=e.maxHiddenDots,i=e.maxHiddenAxisDots,r=e.dotSize,o={x:0,y:0},s={x:0,y:0};if(t<=0||A<=0||n<=0||r<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};var a=t/A;return o.x=Math.floor(Math.sqrt(n/a)),o.x<=0&&(o.x=1),i&&i<o.x&&(o.x=i),o.x%2==0&&o.x--,s.x=o.x*r,o.y=1+2*Math.ceil((o.x*a-1)/2),s.y=Math.round(s.x*a),(o.y*o.x>n||i&&i<o.y)&&(i&&i<o.y?(o.y=i,o.y%2==0&&o.x--):o.y-=2,s.y=o.y*r,o.x=1+2*Math.ceil((o.y/a-1)/2),s.x=Math.round(s.y/a)),{height:s.y,width:s.x,hideYDots:o.y,hideXDots:o.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:u,maxHiddenAxisDots:t-14,dotSize:i}),d.label=2;case 2:return this.drawBackground(),this.drawDots((function(e,A){var n,i,o,s,a,l;return!(h._options.imageOptions.hideBackgroundDots&&e>=(t-r.hideXDots)/2&&e<(t+r.hideXDots)/2&&A>=(t-r.hideYDots)/2&&A<(t+r.hideYDots)/2||(null===(n=B[e])||void 0===n?void 0:n[A])||(null===(i=B[e-t+7])||void 0===i?void 0:i[A])||(null===(o=B[e])||void 0===o?void 0:o[A-t+7])||(null===(s=y[e])||void 0===s?void 0:s[A])||(null===(a=y[e-t+7])||void 0===a?void 0:a[A])||(null===(l=y[e])||void 0===l?void 0:l[A-t+7]))})),this.drawCorners(),this._options.image?[4,this.drawImage({width:r.width,height:r.height,count:t,dotSize:i})]:[3,4];case 3:d.sent(),d.label=4;case 4:return[2]}}))}))},e.prototype.drawBackground=function(){var e,t,A,n=this._element,i=this._options;if(n){var r=null===(e=i.backgroundOptions)||void 0===e?void 0:e.gradient,o=null===(t=i.backgroundOptions)||void 0===t?void 0:t.color;if((r||o)&&this._createColor({options:r,color:o,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:"background-color"}),null===(A=i.backgroundOptions)||void 0===A?void 0:A.round){var s=Math.min(i.width,i.height),a=document.createElementNS("http://www.w3.org/2000/svg","rect");this._backgroundClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._backgroundClipPath.setAttribute("id","clip-path-background-color"),this._defs.appendChild(this._backgroundClipPath),a.setAttribute("x",String((i.width-s)/2)),a.setAttribute("y",String((i.height-s)/2)),a.setAttribute("width",String(s)),a.setAttribute("height",String(s)),a.setAttribute("rx",String(s/2*i.backgroundOptions.round)),this._backgroundClipPath.appendChild(a)}}},e.prototype.drawDots=function(e){var t,A,n=this;if(!this._qr)throw"QR code is not defined";var i=this._options,r=this._qr.getModuleCount();if(r>i.width||r>i.height)throw"The canvas is too small.";var o=Math.min(i.width,i.height)-2*i.margin,s=i.shape===p?o/Math.sqrt(2):o,a=Math.floor(s/r),l=Math.floor((i.width-r*a)/2),c=Math.floor((i.height-r*a)/2),h=new u({svg:this._element,type:i.dotsOptions.type});this._dotsClipPath=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),this._dotsClipPath.setAttribute("id","clip-path-dot-color"),this._defs.appendChild(this._dotsClipPath),this._createColor({options:null===(t=i.dotsOptions)||void 0===t?void 0:t.gradient,color:i.dotsOptions.color,additionalRotation:0,x:0,y:0,height:i.height,width:i.width,name:"dot-color"});for(var d=function(t){for(var i=function(i){return e&&!e(t,i)?"continue":(null===(A=f._qr)||void 0===A?void 0:A.isDark(t,i))?(h.draw(l+t*a,c+i*a,a,(function(A,o){return!(t+A<0||i+o<0||t+A>=r||i+o>=r)&&!(e&&!e(t+A,i+o))&&!!n._qr&&n._qr.isDark(t+A,i+o)})),void(h._element&&f._dotsClipPath&&f._dotsClipPath.appendChild(h._element))):"continue"},o=0;o<r;o++)i(o)},f=this,g=0;g<r;g++)d(g);if(i.shape===p){var v=Math.floor((o/a-r)/2),m=r+2*v,B=l-v*a,y=c-v*a,C=[],w=Math.floor(m/2);for(g=0;g<m;g++){C[g]=[];for(var b=0;b<m;b++)g>=v-1&&g<=m-v&&b>=v-1&&b<=m-v||Math.sqrt((g-w)*(g-w)+(b-w)*(b-w))>w?C[g][b]=0:C[g][b]=this._qr.isDark(b-2*v<0?b:b>=r?b-2*v:b-v,g-2*v<0?g:g>=r?g-2*v:g-v)?1:0}var x=function(e){for(var t=function(t){if(!C[e][t])return"continue";h.draw(B+e*a,y+t*a,a,(function(A,n){var i;return!!(null===(i=C[e+A])||void 0===i?void 0:i[t+n])})),h._element&&Q._dotsClipPath&&Q._dotsClipPath.appendChild(h._element)},A=0;A<m;A++)t(A)},Q=this;for(g=0;g<m;g++)x(g)}},e.prototype.drawCorners=function(){var e=this;if(!this._qr)throw"QR code is not defined";var t=this._element,A=this._options;if(!t)throw"Element code is not defined";var n=this._qr.getModuleCount(),i=Math.min(A.width,A.height)-2*A.margin,r=A.shape===p?i/Math.sqrt(2):i,o=Math.floor(r/n),s=7*o,a=3*o,l=Math.floor((A.width-n*o)/2),c=Math.floor((A.height-n*o)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((function(t){var i,r,h,f,p,v,m,C,w,b,x,Q,E=t[0],I=t[1],_=t[2],S=l+E*o*(n-7),F=c+I*o*(n-7),k=e._dotsClipPath,U=e._dotsClipPath;if(((null===(i=A.cornersSquareOptions)||void 0===i?void 0:i.gradient)||(null===(r=A.cornersSquareOptions)||void 0===r?void 0:r.color))&&((k=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-square-color-"+E+"-"+I),e._defs.appendChild(k),e._cornersSquareClipPath=e._cornersDotClipPath=U=k,e._createColor({options:null===(h=A.cornersSquareOptions)||void 0===h?void 0:h.gradient,color:null===(f=A.cornersSquareOptions)||void 0===f?void 0:f.color,additionalRotation:_,x:S,y:F,height:s,width:s,name:"corners-square-color-"+E+"-"+I})),null===(p=A.cornersSquareOptions)||void 0===p?void 0:p.type){var O=new d({svg:e._element,type:A.cornersSquareOptions.type});O.draw(S,F,s,_),O._element&&k&&k.appendChild(O._element)}else for(var D=new u({svg:e._element,type:A.dotsOptions.type}),T=function(e){for(var t=function(t){if(!(null===(v=B[e])||void 0===v?void 0:v[t]))return"continue";D.draw(S+e*o,F+t*o,o,(function(A,n){var i;return!!(null===(i=B[e+A])||void 0===i?void 0:i[t+n])})),D._element&&k&&k.appendChild(D._element)},A=0;A<B[e].length;A++)t(A)},M=0;M<B.length;M++)T(M);if(((null===(m=A.cornersDotOptions)||void 0===m?void 0:m.gradient)||(null===(C=A.cornersDotOptions)||void 0===C?void 0:C.color))&&((U=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id","clip-path-corners-dot-color-"+E+"-"+I),e._defs.appendChild(U),e._cornersDotClipPath=U,e._createColor({options:null===(w=A.cornersDotOptions)||void 0===w?void 0:w.gradient,color:null===(b=A.cornersDotOptions)||void 0===b?void 0:b.color,additionalRotation:_,x:S+2*o,y:F+2*o,height:a,width:a,name:"corners-dot-color-"+E+"-"+I})),null===(x=A.cornersDotOptions)||void 0===x?void 0:x.type){var L=new g({svg:e._element,type:A.cornersDotOptions.type});L.draw(S+2*o,F+2*o,a,_),L._element&&U&&U.appendChild(L._element)}else{D=new u({svg:e._element,type:A.dotsOptions.type});var H=function(e){for(var t=function(t){if(!(null===(Q=y[e])||void 0===Q?void 0:Q[t]))return"continue";D.draw(S+e*o,F+t*o,o,(function(A,n){var i;return!!(null===(i=y[e+A])||void 0===i?void 0:i[t+n])})),D._element&&U&&U.appendChild(D._element)},A=0;A<y[e].length;A++)t(A)};for(M=0;M<y.length;M++)H(M)}}))},e.prototype.loadImage=function(){var e=this;return new Promise((function(t,A){var n=e._options,i=new Image;if(!n.image)return A("Image is not defined");"string"==typeof n.imageOptions.crossOrigin&&(i.crossOrigin=n.imageOptions.crossOrigin),e._image=i,i.onload=function(){t()},i.src=n.image}))},e.prototype.drawImage=function(e){var t=e.width,A=e.height,n=e.count,i=e.dotSize;return v(this,void 0,void 0,(function(){var e,r,o,s,l,c,u,h,d;return m(this,(function(f){switch(f.label){case 0:return e=this._options,r=Math.floor((e.width-n*i)/2),o=Math.floor((e.height-n*i)/2),s=r+e.imageOptions.margin+(n*i-t)/2,l=o+e.imageOptions.margin+(n*i-A)/2,c=t-2*e.imageOptions.margin,u=A-2*e.imageOptions.margin,(h=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("x",String(s)),h.setAttribute("y",String(l)),h.setAttribute("width",c+"px"),h.setAttribute("height",u+"px"),[4,a(e.image||"")];case 1:return d=f.sent(),h.setAttribute("href",d||""),this._element.appendChild(h),[2]}}))}))},e.prototype._createColor=function(e){var t=e.options,A=e.color,n=e.additionalRotation,i=e.x,r=e.y,o=e.height,s=e.width,a=e.name,l=s>o?s:o,c=document.createElementNS("http://www.w3.org/2000/svg","rect");if(c.setAttribute("x",String(i)),c.setAttribute("y",String(r)),c.setAttribute("height",String(o)),c.setAttribute("width",String(s)),c.setAttribute("clip-path","url('#clip-path-"+a+"')"),t){var u;if("radial"===t.type)(u=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",a),u.setAttribute("gradientUnits","userSpaceOnUse"),u.setAttribute("fx",String(i+s/2)),u.setAttribute("fy",String(r+o/2)),u.setAttribute("cx",String(i+s/2)),u.setAttribute("cy",String(r+o/2)),u.setAttribute("r",String(l/2));else{var h=((t.rotation||0)+n)%(2*Math.PI),d=(h+2*Math.PI)%(2*Math.PI),f=i+s/2,g=r+o/2,p=i+s/2,v=r+o/2;d>=0&&d<=.25*Math.PI||d>1.75*Math.PI&&d<=2*Math.PI?(f-=s/2,g-=o/2*Math.tan(h),p+=s/2,v+=o/2*Math.tan(h)):d>.25*Math.PI&&d<=.75*Math.PI?(g-=o/2,f-=s/2/Math.tan(h),v+=o/2,p+=s/2/Math.tan(h)):d>.75*Math.PI&&d<=1.25*Math.PI?(f+=s/2,g+=o/2*Math.tan(h),p-=s/2,v-=o/2*Math.tan(h)):d>1.25*Math.PI&&d<=1.75*Math.PI&&(g+=o/2,f+=s/2/Math.tan(h),v-=o/2,p-=s/2/Math.tan(h)),(u=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")).setAttribute("id",a),u.setAttribute("gradientUnits","userSpaceOnUse"),u.setAttribute("x1",String(Math.round(f))),u.setAttribute("y1",String(Math.round(g))),u.setAttribute("x2",String(Math.round(p))),u.setAttribute("y2",String(Math.round(v)))}t.colorStops.forEach((function(e){var t=e.offset,A=e.color,n=document.createElementNS("http://www.w3.org/2000/svg","stop");n.setAttribute("offset",100*t+"%"),n.setAttribute("stop-color",A),u.appendChild(n)})),c.setAttribute("fill","url('#"+a+"')"),this._defs.appendChild(u)}else A&&c.setAttribute("fill",A);this._element.appendChild(c)},e}(),w="canvas";for(var b={},x=0;x<=40;x++)b[x]=x;const Q={type:w,shape:"square",width:300,height:300,data:"",margin:0,qrOptions:{typeNumber:b[0],mode:void 0,errorCorrectionLevel:"Q"},imageOptions:{hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:"square",color:"#000"},backgroundOptions:{round:0,color:"#fff"}};var E=function(){return(E=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var i in t=arguments[A])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function I(e){var t=E({},e);if(!t.colorStops||!t.colorStops.length)throw"Field 'colorStops' is required in gradient";return t.rotation?t.rotation=Number(t.rotation):t.rotation=0,t.colorStops=t.colorStops.map((function(e){return E(E({},e),{offset:Number(e.offset)})})),t}function _(e){var t=E({},e);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=E(E({},t.imageOptions),{hideBackgroundDots:Boolean(t.imageOptions.hideBackgroundDots),imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=E({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=I(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=E({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=I(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=E({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=I(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=E({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=I(t.backgroundOptions.gradient))),t}var S=A(192),F=A.n(S),k=function(e,t,A,n){return new(A||(A=Promise))((function(t,i){function r(e){try{s(n.next(e))}catch(t){i(t)}}function o(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof A?n:new A((function(e){e(n)}))).then(r,o)}s((n=n.apply(e,[])).next())}))},U=function(e,t){var A,n,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(A)throw new TypeError("Generator is already executing.");for(;o;)try{if(A=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{A=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};const O=function(){function e(e){this._options=e?_(o(Q,e)):Q,this.update()}return e._clearContainer=function(e){e&&(e.innerHTML="")},e.prototype._setupSvg=function(){var e=this;if(this._qr){var t=new C(this._options);this._svg=t.getElement(),this._svgDrawingPromise=t.drawQR(this._qr).then((function(){var A;e._svg&&(null===(A=e._extension)||void 0===A||A.call(e,t.getElement(),e._options))}))}},e.prototype._setupCanvas=function(){var e,t=this;this._qr&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._setupSvg(),this._canvasDrawingPromise=null===(e=this._svgDrawingPromise)||void 0===e?void 0:e.then((function(){if(t._svg){var e=t._svg,A=(new XMLSerializer).serializeToString(e),n="data:image/svg+xml;base64,"+btoa(A),i=new Image;return new Promise((function(e){i.onload=function(){var A,n;null===(n=null===(A=t._canvas)||void 0===A?void 0:A.getContext("2d"))||void 0===n||n.drawImage(i,0,0),e()},i.src=n}))}})))},e.prototype._getElement=function(e){return void 0===e&&(e="png"),k(this,void 0,void 0,(function(){return U(this,(function(t){switch(t.label){case 0:if(!this._qr)throw"QR code is empty";return"svg"!==e.toLowerCase()?[3,2]:(this._svg&&this._svgDrawingPromise||this._setupSvg(),[4,this._svgDrawingPromise]);case 1:return t.sent(),[2,this._svg];case 2:return this._canvas&&this._canvasDrawingPromise||this._setupCanvas(),[4,this._canvasDrawingPromise];case 3:return t.sent(),[2,this._canvas]}}))}))},e.prototype.update=function(t){e._clearContainer(this._container),this._options=t?_(o(this._options,t)):this._options,this._options.data&&(this._qr=F()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(e){switch(!0){case/^[0-9]*$/.test(e):return"Numeric";case/^[0-9A-Z $%*+\-./:]*$/.test(e):return"Alphanumeric";default:return"Byte"}}(this._options.data)),this._qr.make(),this._options.type===w?this._setupCanvas():this._setupSvg(),this.append(this._container))},e.prototype.append=function(e){if(e){if("function"!=typeof e.appendChild)throw"Container should be a single DOM node";this._options.type===w?this._canvas&&e.appendChild(this._canvas):this._svg&&e.appendChild(this._svg),this._container=e}},e.prototype.applyExtension=function(e){if(!e)throw"Extension function should be defined.";this._extension=e,this.update()},e.prototype.deleteExtension=function(){this._extension=void 0,this.update()},e.prototype.getRawData=function(e){return void 0===e&&(e="png"),k(this,void 0,void 0,(function(){var t,A,n;return U(this,(function(i){switch(i.label){case 0:if(!this._qr)throw"QR code is empty";return[4,this._getElement(e)];case 1:return(t=i.sent())?"svg"===e.toLowerCase()?(A=new XMLSerializer,n=A.serializeToString(t),[2,new Blob(['<?xml version="1.0" standalone="no"?>\r\n'+n],{type:"image/svg+xml"})]):[2,new Promise((function(A){return t.toBlob(A,"image/"+e,1)}))]:[2,null]}}))}))},e.prototype.download=function(e){return k(this,void 0,void 0,(function(){var t,A,n,i,r;return U(this,(function(o){switch(o.label){case 0:if(!this._qr)throw"QR code is empty";return t="png",A="qr","string"==typeof e?t=e:"object"==typeof e&&null!==e&&(e.name&&(A=e.name),e.extension&&(t=e.extension)),[4,this._getElement(t)];case 1:return(n=o.sent())?("svg"===t.toLowerCase()?(i=new XMLSerializer,r='<?xml version="1.0" standalone="no"?>\r\n'+(r=i.serializeToString(n)),s("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(r),A+".svg")):s(n.toDataURL("image/"+t),A+"."+t),[2]):[2]}}))}))},e}()}},t={};function A(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n](i,i.exports,A),i.exports}return A.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return A.d(t,{a:t}),t},A.d=(e,t)=>{for(var n in t)A.o(t,n)&&!A.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},A.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),A(676)})().default;const f_=bn(d_.exports);var g_=(e=>(e.rounded="rounded",e.dots="dots",e.classy="classy",e.classy_rounded="classy-rounded",e.square="square",e.extra_rounded="extra-rounded",e))(g_||{}),p_=(e=>(e.dot="dot",e.square="square",e.extra_rounded="extra-rounded",e))(p_||{}),v_=(e=>(e.dot="dot",e.square="square",e))(v_||{}),m_=(e=>(e.L="L",e.M="M",e.Q="Q",e.H="H",e))(m_||{});class B_{constructor(e,t){this.canvas=e,this.editor=t}hookTransform(e){return u(this,null,(function*(){if("qrcode"===e.extensionType){const t=this._paramsToOption(e.extension),A=yield this._getBase64Str(t);e.src=A}}))}_getBase64Str(e){return u(this,null,(function*(){const t=new f_(e),A=yield t.getRawData("png");if(!A)return"";return(yield qm(A))||""}))}_defaultBarcodeOption(){return{data:"https://kuaitu.cc",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"square",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}}_paramsToOption(e){return{width:e.width,height:e.width,type:"canvas",data:e.data,margin:e.margin,qrOptions:{errorCorrectionLevel:e.errorCorrectionLevel},dotsOptions:{color:e.dotsColor,type:e.dotsType},cornersSquareOptions:{color:e.cornersSquareColor,type:e.cornersSquareType},cornersDotOptions:{color:e.cornersDotColor,type:e.cornersDotType},backgroundOptions:{color:e.background}}}addQrCode(){return u(this,null,(function*(){const e=this._defaultBarcodeOption(),t=this._paramsToOption(e),A=yield this._getBase64Str(t);wv.fabric.Image.fromURL(A,(t=>{t.set({extensionType:"qrcode",extension:e}),t.scaleToWidth(this.editor.getWorkspase().getScaledWidth()/2),this.canvas.add(t),this.canvas.setActiveObject(t),this.editor.position("center"),this.canvas.renderAll(),this.editor.saveState()}),{crossOrigin:"anonymous"})}))}setQrCode(e){return u(this,null,(function*(){try{const t=this._paramsToOption(e),A=yield this._getBase64Str(t),n=this.canvas.getActiveObjects()[0];wv.fabric.Image.fromURL(A,(t=>{t.set({left:n.left,top:n.top,extensionType:"qrcode",extension:a({},e)}),t.scaleToWidth(n.getScaledWidth()),this.editor.del(),this.canvas.add(t),this.canvas.setActiveObject(t)}),{crossOrigin:"anonymous"})}catch(t){}}))}getQrCodeTypes(){return{DotsType:Object.values(g_),CornersType:Object.values(p_),cornersDotType:Object.values(v_),errorCorrectionLevelType:Object.values(m_)}}destroy(){}}c(B_,"pluginName","QrCodePlugin"),c(B_,"apis",["addQrCode","setQrCode","getQrCodeTypes"]);class y_{constructor(e,t){this.canvas=e,this.editor=t}addImage(e){return new Promise(((t,A)=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>t(n),n.onerror=()=>A(),n.src=e}))}imageStrokeDraw(e,t,A="source-over"){return u(this,null,(function*(){const n=this.canvas.getActiveObject();if(!n)return;const i=n.originWidth||0,r=n.originHeight||0,o=(null==n?void 0:n.originSrc)||n.getSrc();let s=document.createElement("canvas");const a=s.getContext("2d");if(!a)return;if(0===t)return void n.setSrc(o,(()=>{var e;null==(e=n.canvas)||e.renderAll()}));a.save(),a.clearRect(0,0,s.width,s.height),a.restore(),s.width=i+2*t,s.height=r+2*t;const l=[-1,-1,0,-1,1,-1,-1,0,1,0,-1,1,0,1,1,1],c=yield this.addImage(o);if(!c)return;for(let e=0;e<l.length;e+=2)a.drawImage(c,t+l[e]*t,t+l[e+1]*t,i,r);a.globalCompositeOperation="source-in",a.fillStyle=e,a.fillRect(0,0,i+2*t,r+2*t),a.globalCompositeOperation=A,a.drawImage(c,t,t,i,r);const u=null==s?void 0:s.toDataURL();s=null,u&&n.setSrc(u,(()=>{var e;null==(e=n.canvas)||e.renderAll()}))}))}destroy(){}}c(y_,"pluginName","ImageStroke"),c(y_,"apis",["imageStrokeDraw"]);class C_{constructor(e,t){c(this,"workspaceEl"),c(this,"minSize",{width:1,height:1}),c(this,"barOpts",{bWidth:30,bHeight:6,bPadding:10}),c(this,"hasCreatedBar",!1),c(this,"isDragging",!1),c(this,"dragEl",null),c(this,"startPoints",{x:0,y:0}),c(this,"barOffset",{x:0,y:0}),c(this,"wsOffset",{left:0,top:0,width:0,height:0}),c(this,"eventHandler",{render:le(this.renderBars.bind(this),50),onDragging:le(this.onDragging.bind(this),30)}),this.canvas=e,this.editor=t,this._init(),this._initResizeObserve(),this._addListeners()}_init(){const e=document.querySelector("#workspace");if(!e)throw new Error("element #workspace is missing, plz check!");this.workspaceEl=e}_initResizeObserve(){new ResizeObserver(le((()=>{this.renderBars()}),50)).observe(this.workspaceEl)}renderBars(){const e=this.canvas.viewportTransform,[t,,,A,n,i]=e||[],r=this.getWorkspase(),o=r.width*t,s=r.height*A,a=r.left*t,l=r.top*A,{bWidth:c,bHeight:u,bPadding:h}=this.barOpts;if(!e)return;const d=this._getBarFromType("left");d.style.left=n+a-u-h+"px",d.style.top=i+l+s/2-c/2+"px";const f=this._getBarFromType("right");f.style.left=`${n+a+o+h}px`,f.style.top=i+l+s/2-c/2+"px";const g=this._getBarFromType("top");g.style.left=n+a+o/2-c/2+"px",g.style.top=i+l-u-h+"px";const p=this._getBarFromType("bottom");p.style.left=n+a+o/2-c/2+"px",p.style.top=`${i+l+s+h}px`,this.hasCreatedBar||(this.hasCreatedBar=!0,this._watchDrag())}_getBarFromType(e){let t=document.querySelector(`#resize-${e}-bar`);return t||(t=document.createElement("div"),t.id=`resize-${e}-bar`,t.className="resize-bar",["left","right"].includes(e)?t.classList.add("horizontal"):t.classList.add("vertical"),this.workspaceEl.appendChild(t),t)}_watchDrag(){Array.from(document.getElementsByClassName("resize-bar")).forEach((e=>{e.addEventListener("mousedown",(t=>{this.isDragging=!0,this.dragEl=e,this.dragEl.classList.add("active"),this.startPoints={x:t.clientX,y:t.clientY},this.barOffset={x:e.offsetLeft,y:e.offsetTop};const A=this.getWorkspase(),{width:n,height:i,left:r,top:o}=A;this.wsOffset={width:n,height:i,left:r,top:o}}))})),document.addEventListener("mousemove",this.eventHandler.onDragging),document.addEventListener("mouseup",(()=>{this.isDragging&&this.dragEl&&(this.isDragging=!1,this.dragEl.classList.remove("active"),this.dragEl=null,this.canvas.defaultCursor="default")}))}onDragging(e){if(this.isDragging&&this.dragEl){const t=this.getWorkspase(),A=this.canvas.viewportTransform,[n,,,i]=A||[],r=e.clientX-this.startPoints.x,o=e.clientY-this.startPoints.y,s=r/n,a=o/i,l=this.dragEl.id.split("-")[1];let c=0;switch(l){case"left":c=Math.round(this.wsOffset.width-2*s),c>=this.minSize.width?(this.dragEl.style.left=`${this.barOffset.x+r}px`,t.set("left",this.wsOffset.left+2*s),t.set("width",c)):(t.set("left",this.wsOffset.left+this.wsOffset.width-this.minSize.width),t.set("width",this.minSize.width));break;case"right":c=Math.round(this.wsOffset.width+2*s),c>=this.minSize.width?(this.dragEl.style.left=`${this.barOffset.x+r}px`,t.set("width",c)):t.set("width",this.minSize.width);break;case"top":c=Math.round(this.wsOffset.height-2*a),c>=this.minSize.height?(this.dragEl.style.top=`${this.barOffset.y+o}px`,t.set("top",this.wsOffset.top+2*a),t.set("height",c)):(t.set("top",this.wsOffset.top+this.wsOffset.height-this.minSize.height),t.set("height",this.minSize.height));break;case"bottom":c=Math.round(this.wsOffset.height+2*a),c>=this.minSize.height?(this.dragEl.style.top=`${this.barOffset.y+o}px`,t.set("height",c)):t.set("height",this.minSize.height)}this.editor.setCenterFromObject(t),t.clone((e=>{this.canvas.clipPath=e,this.canvas.requestRenderAll()})),["left","right"].includes(l)?this.canvas.defaultCursor="ew-resize":this.canvas.defaultCursor="ns-resize",this.editor.emit("sizeChange",t.width,t.height)}}_addListeners(){this.canvas.on("after:render",this.eventHandler.render)}getWorkspase(){return this.canvas.getObjects().find((e=>"workspace"===e.id))}destroy(){}}c(C_,"pluginName","ResizePlugin"),c(C_,"events",[]),c(C_,"apis",[]);var w_=(e=>(e.lockMovementX="lockMovementX",e.lockMovementY="lockMovementY",e.lockRotation="lockRotation",e.lockScalingX="lockScalingX",e.lockScalingY="lockScalingY",e))(w_||{}),b_=(e=>(e.bl="bl",e.br="br",e.mb="mb",e.ml="ml",e.mr="mr",e.mt="mt",e.tl="tl",e.tr="tr",e.mtr="mtr",e.lock="lock",e))(b_||{});class x_{constructor(e,t){this.canvas=e,this.editor=t,this.init()}init(){const e=document.createElement("img");e.src="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%2022C17.5228%2022%2022%2017.5228%2022%2012C22%206.47715%2017.5228%202%2012%202C6.47715%202%202%206.47715%202%2012C2%2017.5228%206.47715%2022%2012%2022Z'%20stroke='black'%20fill='white'%20stroke-opacity='0.3'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9%2011V10C9%208.34%209.5%207%2012%207C14.5%207%2015%208.34%2015%2010V11'%20stroke='%23292D32'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12%2014.6C12.3314%2014.6%2012.6%2014.3314%2012.6%2014C12.6%2013.6687%2012.3314%2013.4%2012%2013.4C11.6686%2013.4%2011.4%2013.6687%2011.4%2014C11.4%2014.3314%2011.6686%2014.6%2012%2014.6Z'%20stroke='%23292D32'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M14.5%2017H9.5C7.5%2017%207%2016.5%207%2014.5V13.5C7%2011.5%207.5%2011%209.5%2011H14.5C16.5%2011%2017%2011.5%2017%2013.5V14.5C17%2016.5%2016.5%2017%2014.5%2017Z'%20stroke='%23292D32'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";const t=this;function A(t,A,n,i,r){t.save(),t.translate(A,n);const o=r.angle;t.rotate(wv.fabric.util.degreesToRadians(o)),t.drawImage(e,-12.5,-12.5,25,25),t.restore()}function n(e,A){return t.unLock(),!0}wv.fabric.Object.prototype.controls.lock=new wv.fabric.Control({x:.5,y:.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:n,render:A}),wv.fabric.Textbox.prototype.controls.lock=new wv.fabric.Control({x:.5,y:.5,offsetY:0,cursorStyle:"pointer",mouseUpHandler:n,render:A}),this.canvas.on("selection:created",(()=>this.renderCornerByActiveObj())),this.canvas.on("selection:updated",(()=>this.renderCornerByActiveObj())),wv.fabric.Canvas.prototype._groupSelectedObjects=function(e){const t=this._collectObjects(e);let A;for(let n=t.length-1;n>=0;n--)t[n].lockMovementX&&t.splice(n,1);1===t.length?this.setActiveObject(t[0],e):t.length>1&&(A=new wv.fabric.ActiveSelection(t.reverse(),{canvas:this}),this.setActiveObject(A,e))},wv.fabric.Canvas.prototype._handleGrouping=function(e,t){const A=this._activeObject;if(!A.__corner&&!t.lockMovementX&&!A.lockMovementX){if(t===A){if(!(t=this.findTarget(e,!0))||!t.selectable)return;if(t.lockMovementX)return}A&&"activeSelection"===A.type?this._updateActiveSelection(t,e):this._createActiveSelection(t,e)}}}controlCornersVisible(e){const t=e.lockMovementX;Object.values(b_).forEach((A=>{"lock"===A?e.setControlVisible(A,t):e.setControlVisible(A,!t)}))}renderCornerByActiveObj(){const e=this.canvas.getActiveObjects().filter((e=>!(e instanceof wv.fabric.GuideLine)));if(e&&1===e.length){const t=e[0];this.controlCornersVisible(t)}else if(e&&e.length>1){const e=this.canvas.getActiveObject();e&&this.controlCornersVisible(e)}}hookImportAfter(){return this.canvas.forEachObject((e=>{!1===e.hasControls&&!1===e.selectable&&(this.canvas.setActiveObject(e),this.lock())})),Promise.resolve()}lock(){const e=this.canvas.getActiveObject();e&&(Object.values(w_).forEach((t=>{e[t]=!0})),this.controlCornersVisible(e),this.canvas.renderAll(),this.editor.emit(Bm.ONE,[e]))}unLock(){const e=this.canvas.getActiveObject();e&&(e.hasControls=!0,e.selectable=!0,e.evented=!0,Object.values(w_).forEach((t=>{e[t]=!1})),this.controlCornersVisible(e),this.canvas.renderAll(),this.editor.emit(Bm.ONE,[e]))}contextMenu(){const e=this.editor.getSelectMode(),t=this.canvas.getActiveObject();if(e===mm.ONE&&t)return t.selectable?[{text:"锁定",hotkey:"",onclick:()=>this.lock()}]:[{text:"解锁",hotkey:"",onclick:()=>this.unLock()}]}destroy(){}}c(x_,"pluginName","LockPlugin"),c(x_,"apis",["lock","unLock"]);class Q_{constructor(e,t){this.canvas=e,this.editor=t,this.editor=t,this.canvas=e}addBaseType(e,t){const{event:A=!1,scale:n=!1,center:i=!0}=t||{};e.set({id:vm()}),n&&this._toScale(e),A&&this._toEvent(e,A),this.canvas.add(e),!A&&i&&this._toCenter(e),this.canvas.refreshHistory(),this.canvas.setActiveObject(e),this.canvas.renderAll(),this.editor.saveState()}_toEvent(e,t){const{left:A,top:n}=this.canvas.getSelectionElement().getBoundingClientRect();if(t.x<A||t.y<n||void 0===e.width)return;const i={x:t.x-A,y:t.y-n},r=this.canvas.restorePointerVpt(i);e.set({left:r.x,top:r.y})}_toCenter(e){this.canvas.setActiveObject(e),this.editor.position("center")}_toScale(e){const{width:t}=this.editor.getWorkspase();void 0!==t&&e.scaleToWidth(t/2)}createImgByElement(e){return new Promise((t=>{"svg"===this.getImageExtension(e.src)?wv.fabric.loadSVGFromURL(e.src,(e=>{const A=wv.fabric.util.groupSVGElements(e,{shadow:"",fontFamily:"arial",name:"svg元素"});t(A)})):wv.fabric.Image.fromURL(e.src,(e=>{t(e)}),{crossOrigin:"anonymous"})}))}getImageExtension(e){const t=e.split("/"),A=t[t.length-1].split(".");return A[A.length-1]}destroy(){}}c(Q_,"pluginName","AddBaseTypePlugin"),c(Q_,"apis",["addBaseType","createImgByElement"]),wv.fabric.Rect=wv.fabric.util.createClass(wv.fabric.Rect,{type:"rect",initialize:function(e){e||(e={}),this.callSuper("initialize",e)},_render(e){const t=this.roundValue||0;this.rx=1/this.scaleX*t,this.ry=1/this.scaleY*t,this.callSuper("_render",e)}}),wv.fabric.Rect.fromObject=function(e,t){return wv.fabric.Object._fromObject("Rect",e,t)},wv.fabric.Rect,wv.fabric.Textbox=wv.fabric.util.createClass(wv.fabric.Textbox,{type:"textbox",_renderChars:function(e,t,A,n,i,r){var o,s,a,l,c,u=this.getHeightOfLine(r),h=-1!==this.textAlign.indexOf("justify"),d="",f=0,g=this.path,p=!h&&0===this.charSpacing&&this.isEmptyStyles(r)&&!g,v="ltr"===this.direction,m="ltr"===this.direction?1:-1,B=t.canvas.getAttribute("dir");if(t.save(),B!==this.direction&&(t.canvas.setAttribute("dir",v?"ltr":"rtl"),t.direction=v?"ltr":"rtl",t.textAlign=v?"left":"right"),i-=u*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(e,t,r,0,A.join(""),n,i,u),void t.restore();for(var y=0,C=A.length-1;y<=C;y++)l=y===C||this.charSpacing||g,d+=A[y],a=this.__charBounds[r][y],0===f?(n+=m*(a.kernedWidth-a.width),f+=a.width):f+=a.kernedWidth,h&&!l&&this._reSpaceAndTab.test(A[y])&&(l=!0),l||(o=o||this.getCompleteStyleDeclaration(r,y),s=this.getCompleteStyleDeclaration(r,y+1),l=wv.fabric.util.hasStyleChanged(o,s,!1)),g?(t.save(),t.translate(a.renderLeft,a.renderTop),t.rotate(a.angle),this._renderChar(e,t,r,y,d,-f/2,0,u),t.restore()):(c=n,this._renderChar(e,t,r,y,d,c,i,u)),d="",o=s,n+=m*f,f=0;t.restore()},enlargeSpaces:function(){for(var e,t,A,n,i,r,o,s=0,a=this._textLines.length;s<a;s++)if(("justify"===this.textAlign||s!==a-1&&!this.isEndOfWrapping(s))&&(n=0,i=this._textLines[s],(t=this.getLineWidth(s))<this.width&&(o=this.textLines[s].split(""))&&o.length>1)){A=o.length,e=(this.width-t)/(A-1);for(var l=0,c=i.length;l<=c;l++)(r=this.__charBounds[s][l]).left+=n,l<c-1&&(r.width+=e,r.kernedWidth+=e,n+=e)}}}),wv.fabric.Textbox.fromObject=function(e,t){const{text:A}=e;return t(new wv.fabric.Textbox(A,e))},wv.fabric.Rect;const E_={class:"inline-block"},I_=on({__name:"History",setup(e){const t=sB(),A=sn(0),n=sn(0),i=()=>{t.editor.header.undo()},r=()=>{t.editor.header.redo()};return ln((()=>{_n((()=>{var e;null==(e=t.editor)||e.on("historyUpdate",((e,t)=>{A.value=e,n.value=t}))}))})),(e,t)=>{const o=zt,s=et,a=At;return cn(),un("div",E_,[Kn(a,{content:e.$t("editor.header.history.undo")+`(${fn(A)})`},{default:mn((()=>[Kn(s,{onClick:i,link:"",size:"small",disabled:!fn(A)},{default:mn((()=>[Kn(o,{extClass:"text-20px",color:fn(A)?"#333":"#ccc",icon:"ios-undo"},null,8,["color"])])),_:1},8,["disabled"])])),_:1},8,["content"]),Kn(a,{content:e.$t("editor.header.history.redo")+`(${fn(n)})`},{default:mn((()=>[Kn(s,{onClick:r,link:"",size:"small",disabled:!fn(n)},{default:mn((()=>[Kn(o,{extClass:"text-20px",color:fn(n)?"#333":"#ccc",icon:"ios-redo"},null,8,["color"])])),_:1},8,["disabled"])])),_:1},8,["content"])])}}}),__=on({__name:"Preview",setup(e){const t=sB(),A=sn(!1),n=sn([]),i=()=>{A.value=!1,n.value=[]},r=()=>{t.editor.preview().then((e=>{n.value=[e],A.value=!0}))};return(e,t)=>{const o=et,s=Ig;return cn(),un(Ln,null,[Kn(o,{link:"",type:"primary",onClick:r},{default:mn((()=>[Hn(yn(e.$t("editor.header.preview")),1)])),_:1}),fn(A)?(cn(),vn(s,{key:0,"url-list":fn(n),onClose:i},null,8,["url-list"])):Pn("",!0)],64)}}}),S_=aB();function F_(){const{t:e}=wi.useI18n(),t=bi(),A=xi(),n=()=>u(this,null,(function*(){const e=S_.editor.getJson(),t=yield i();return{json:e,img:null==t?void 0:t.id,desc:""}})),i=()=>u(this,null,(function*(){const e=yield canvasEditor.preview();return yield(e=>{const t=((e,t)=>{for(var A=e.split(","),n=A[0].match(/:(.*?);/)[1],i=atob(A[1]),r=i.length,o=new Uint8Array(r);r--;)o[r]=i.charCodeAt(r);return new File([o],t,{type:n})})(e,"123.png"),A=new FormData,n=new Date;return A.append("files",t,`${n.getTime()}`),Si(A).then((e=>{const[t]=e.data;return t})).catch((e=>{}))})(e)})),r=e=>{t.replace("/?id="+e)};return{createTmpl:(e,t,A="")=>u(this,null,(function*(){S_.editor.clear(),S_.editor.setSize(e,t);const i=bd().format("YYYY[年]MM[月]DD[日]HH[小时]mm[分钟]ss[秒]")+"创建的作品",o=yield n(),s=yield Qi({data:l(a({},o),{type:"file",parentId:String(A),name:i})});return r(s.data.data.id),s})),createTmplByCommon:()=>u(this,null,(function*(){var e;const t=bd().format("YYYY[年]MM[月]DD[日]HH[小时]mm[分钟]ss[秒]")+"创建的作品",i=yield n();return yield Qi({data:l(a({},i),{type:"file",parentId:"",externalId:(null==(e=A.query)?void 0:e.projectid)||null,name:t})})})),getTemplInfo:e=>u(this,null,(function*(){return(yield Ei(e)).data})),updataTemplInfo:(e,t)=>u(this,null,(function*(){const A=yield n();t&&(A.name=t),yield Ii(e,{data:A})})),removeTemplInfo:t=>new Promise(((A,n)=>{Wt.confirm(`${e("my_spase.remove_templTip")}`,"Warning",{title:e("my_spase.remove_templ")}).then((()=>{_i(t).then(A).catch(n)}))})),routerToId:r,createdFileType:(e,t="")=>u(this,null,(function*(){yield Qi({data:{name:e,type:"fileType",parentId:String(t)}})})),reNameFileType:(e,t)=>u(this,null,(function*(){yield Ii(t,{data:{name:e}})})),removeFileType:t=>new Promise(((A,n)=>{Wt.confirm(`${e("my_spase.remove_file_type_Tip")}`,"Warning",{title:e("my_spase.remove_file_type")}).then((()=>{_i(t).then(A).catch(n)}))}))}}const k_={class:"f-center pr-10px"},U_={__name:"Save",setup(e){const t=sB(),A=xi(),{createTmplByCommon:n,updataTemplInfo:i,routerToId:r}=F_();wi.useI18n();const o={clipboard(){return u(this,null,(function*(){try{yield t.editor.clipboard(),Yt.success("复制成功")}catch(e){Yt.error("复制失败")}}))},saveJson(){t.editor.saveJson()},saveSvg(){t.editor.saveSvg()},saveImg(){t.editor.saveImg()},clipboardBase64(){return u(this,null,(function*(){try{yield t.editor.clipboardBase64(),Yt.success("复制成功")}catch(e){Yt.error("复制失败")}}))},saveMyClould(){return u(this,null,(function*(){var e,t;const o=$t.service();try{if(null==(e=null==A?void 0:A.query)?void 0:e.id)yield i(null==(t=null==A?void 0:A.query)?void 0:t.id);else{const e=yield n();r(e.data.data.id)}}catch(s){Yt.warning("请登录")}o.close()}))}},s=ae((function(e){o[e]&&"function"==typeof o[e]&&o[e]()}),300);return(e,t)=>{const A=Ee,n=et,i=Jt,r=qt,o=Zt;return cn(),un("div",k_,[Kn(o,{class:"ml-10px",onCommand:fn(s)},{dropdown:mn((()=>[Kn(r,null,{default:mn((()=>[Kn(i,{command:"saveMyClould"},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.save_my_spase")),1)])),_:1}),Kn(i,{command:"saveImg",divided:""},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.save_as_picture")),1)])),_:1}),Kn(i,{command:"saveSvg"},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.save_as_svg")),1)])),_:1}),Kn(i,{command:"clipboard",divided:""},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.copy_to_clipboard")),1)])),_:1}),Kn(i,{command:"clipboardBase64"},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.copy_to_clipboardstr")),1)])),_:1}),Kn(i,{command:"saveJson",divided:""},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.save_as_json")),1)])),_:1})])),_:1})])),default:mn((()=>[Kn(n,{type:"primary"},{default:mn((()=>[Hn(yn(e.$t("editor.header.save.download"))+" ",1),Kn(A,{class:"el-icon--right"},{default:mn((()=>[Kn(fn(tt))])),_:1})])),_:1})])),_:1},8,["onCommand"])])}}},O_=on({__name:"Clear",setup(e){const t=sB(),A=ae((function(){var e,A;const n=null==(e=t.canvas)?void 0:e.getObjects();if(!n||1===n.length&&"workspace"===(null==(A=n[0])?void 0:A.id))return Yt.warning("画布无内容");Wt.confirm("您确定清空画布吗?","Warning",{title:"提示",type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}).then((()=>{var e,A;null==(e=t.editor)||e.clear(),t.editor.canvas.clearHistory(),null==(A=t.editor)||A.historyUpdate()}))}),250);return(e,t)=>{const n=et;return cn(),vn(n,{link:"",type:"primary",onClick:fn(A)},{default:mn((()=>[Hn(yn(e.$t("editor.header.clear")),1)])),_:1},8,["onClick"])}}}),D_={key:0,class:"inline-block"},T_={__name:"MyTemplName",setup(e){const t=sB(),A=bi(),{getTemplInfo:n,updataTemplInfo:i}=F_(),r=sn(""),o=xi(),s=sn(!1);In((()=>o.query),(e=>{(null==e?void 0:e.id)?n(null==e?void 0:e.id).then((e=>{var t,A;r.value=null==(A=null==(t=null==e?void 0:e.data)?void 0:t.attributes)?void 0:A.name})):r.value=!1})),ln((()=>{_n((()=>u(this,null,(function*(){var e,i,s,l;if(null==(e=null==o?void 0:o.query)?void 0:e.id)n(null==(i=null==o?void 0:o.query)?void 0:i.id).then((e=>{var A,n,i,o;r.value=null==(n=null==(A=null==e?void 0:e.data)?void 0:A.attributes)?void 0:n.name,t.editor.loadJSON(JSON.stringify(null==(o=null==(i=null==e?void 0:e.data)?void 0:i.attributes)?void 0:o.json))})).catch((()=>{window.location.href="/"}));else if(null==(s=null==o?void 0:o.query)?void 0:s.projectid){const e=yield a(null==(l=null==o?void 0:o.query)?void 0:l.projectid);e&&n(e).then((n=>{var i,s,a,l;A.replace(o.fullPath+"&id="+e),r.value=null==(s=null==(i=null==n?void 0:n.data)?void 0:i.attributes)?void 0:s.name,t.editor.loadJSON(JSON.stringify(null==(l=null==(a=null==n?void 0:n.data)?void 0:a.attributes)?void 0:l.json))}))}}))))}));const a=e=>{const t={populate:{img:"*"},filters:{externalId:{$eq:String(e)}},pagination:{page:1,pageSize:50}};return Fi(Xt.stringify(t)).then((e=>{if(e.data.data.length)return e.data.data[0].id})).catch((e=>e))},l=()=>{if(""===r.value)return Yt.warning("文件名称不能为空"),void(r.value="默认文件名称");s.value=!0,i(o.query.id,r.value).then().finally((()=>{s.value=!1}))},c=ae((()=>{o.query.id&&l()}),3e3);return ln((()=>{var e;null==(e=t.canvas)||e.on("object:modified",c)})),(e,t)=>{var A,n;const i=Ze,a=et,u=eA;return(null==(n=null==(A=fn(o))?void 0:A.query)?void 0:n.id)?(cn(),un("div",D_,[Kn(i,{modelValue:fn(r),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(r)?r.value=e:null),placeholder:"请输入文件名称",style:{width:"190px"},size:"small",onChange:fn(c),loading:fn(s)},null,8,["modelValue","onChange","loading"]),Kn(a,{link:"",onClick:l,loading:fn(s)},null,8,["loading"]),Kn(u,{type:"vertical"})])):Pn("",!0)}}},M_={class:"w-full flex justify-between items-center"},L_={class:"flex justify-start items-center"},H_={class:"flex justify-end items-center"},P_=pn("a",{class:"mr-10px",href:"https://github.com/ikuaitu/element-fabric-editor",target:"_blank"},[pn("img",{src:"https://img.shields.io/badge/GitHub-ElementFbricEditor-blue",alt:"element-fabric-editor"})],-1),R_=on({__name:"index",setup(e){const t=sB(),A=En((()=>t.rulerEnable)),n=e=>{e?t.editor.rulerEnable():t.editor.rulerDisable(),t.updateRulerEnable(e),document.activeElement.blur()};return(e,t)=>{const i=tA,r=eA,o=et,s=si("router-link"),a=Gp,l=AA,c=nA;return cn(),un("div",M_,[pn("div",L_,[Kn(i),Kn(r,{direction:"vertical"}),Kn(s,{custom:"",to:"/editor/template"},{default:mn((({navigate:t})=>[Kn(o,{text:"",onClick:t},{default:mn((()=>[Hn(yn(e.$t("editor.header.allTemplate")),1)])),_:2},1032,["onClick"])])),_:1}),Kn(r,{direction:"vertical"}),Kn(fn(T_)),Kn(a,{modelValue:fn(A),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(A)?A.value=e:null),size:"large",class:"ml-10px","inline-prompt":"","active-text":e.$t("editor.header.ruler"),"inactive-text":e.$t("editor.header.ruler"),onChange:n},null,8,["modelValue","active-text","inactive-text"]),Kn(r,{direction:"vertical"}),Kn(fn(I_))]),pn("div",H_,[P_,Kn(l),Kn(r,{direction:"vertical"}),Kn(fn(__)),Kn(r,{direction:"vertical"}),Kn(fn(O_)),Kn(r,{direction:"vertical"}),Kn(fn(U_)),Kn(r,{direction:"vertical"}),Kn(c)])])}}}),N_=[{name:"editor.tab.add",icon:"add",type:eB.create},{name:"editor.tab.template",icon:"template",type:eB.template},{name:"editor.tab.text",icon:"text",type:eB.text},{name:"editor.tab.material",icon:"img",type:eB.material},{name:"editor.tab.ai",icon:"ai",type:eB.ai},{name:"editor.tab.mine",icon:"mine",type:eB.mine}],j_=[{name:"editor.text.headline",icon:"text-h1",type:AB.h1},{name:"editor.text.subHeadline",icon:"text-h2",type:AB.h2},{name:"editor.text.text",icon:"text-normal",type:AB.normal}],V_=[{name:"editor.shape.rect",icon:'<svg role="img" aria-label="shape-rectangle" focusable="false" data-icon="shape-rectangle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-rectangle"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 19V5C19.5 4.72386 19.2761 4.5 19 4.5L5 4.5C4.72386 4.5 4.5 4.72386 4.5 5L4.5 19C4.5 19.2761 4.72386 19.5 5 19.5H19C19.2761 19.5 19.5 19.2761 19.5 19ZM21 5C21 3.89543 20.1046 3 19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5Z" fill="currentColor"></path></svg>',type:nB.react},{name:"editor.shape.triangle",icon:'<svg role="img" aria-label="shape-polygon" focusable="false" data-icon="shape-polygon" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-polygon"><path fill-rule="evenodd" clip-rule="evenodd" d="M20.7949 19.1828L12.1881 3.46617C12.1068 3.31769 11.8936 3.31768 11.8122 3.46617L3.20553 19.1828C3.12732 19.3256 3.23066 19.5 3.39347 19.5H20.6069C20.7697 19.5 20.8731 19.3256 20.7949 19.1828ZM13.5038 2.74569C12.8533 1.55784 11.1471 1.55784 10.4966 2.74569L1.88988 18.4623C1.26427 19.6047 2.09097 21 3.39347 21H20.6069C21.9094 21 22.7361 19.6047 22.1105 18.4623L13.5038 2.74569Z" fill="currentColor"></path></svg>',type:nB.triangle},{name:"editor.shape.around",icon:'<svg role="img" aria-label="shape-circle" focusable="false" data-icon="shape-circle" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-circle"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" fill="currentColor"></path></svg>',type:nB.around},{name:"editor.shape.polygon",icon:'<svg data-v-1eb84746="" t="1650874633978" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2032" width="26" height="26"><path data-v-1eb84746="" d="M161.152 398.016l134.016 412.416h433.664l134.016-412.416L512 143.104 161.152 398.08zM512 64l426.048 309.568-162.752 500.864H248.704L85.952 373.568 512 64z" p-id="2033"></path></svg>',type:nB.polygon},{name:"editor.shape.line",icon:'<svg role="img" aria-label="shape-line" focusable="false" data-icon="shape-line" aria-hidden="true" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="gd_design_icon gd_design_icon-shape-line"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.46967 20.5303C3.17678 20.2374 3.17678 19.7626 3.46967 19.4697L19.4697 3.46967C19.7626 3.17678 20.2374 3.17678 20.5303 3.46967C20.8232 3.76256 20.8232 4.23744 20.5303 4.53033L4.53033 20.5303C4.23744 20.8232 3.76256 20.8232 3.46967 20.5303Z" fill="currentColor"></path></svg>',type:nB.line}],K_=[{name:"editor.codes.qrcode",icon:'<svg\n          t="1717679888665"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          p-id="4558"\n          xmlns="http://www.w3.org/2000/svg"\n          width="20"\n          height="20"\n        >\n          <path\n            d="M386.612245 470.204082H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837zM177.632653 135.836735c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653zM846.367347 470.204082h-208.979592c-45.97551 0-83.591837-37.616327-83.591837-83.591837V177.632653c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918V177.632653c0-22.987755-18.808163-41.795918-41.795918-41.795918h-208.979592z"\n            fill="#333333"\n            p-id="4559"\n          ></path>\n          <path\n            d="M773.22449 344.816327h-62.693878c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 344.816327H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939V250.77551c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM313.469388 804.571429H250.77551c-17.240816 0-31.346939-14.106122-31.346939-31.346939v-62.693878c0-17.240816 14.106122-31.346939 31.346939-31.346939h62.693878c17.240816 0 31.346939 14.106122 31.346939 31.346939v62.693878c0 17.240816-14.106122 31.346939-31.346939 31.346939zM574.693878 929.959184c-11.493878 0-20.897959-9.404082-20.89796-20.89796v-271.673469c0-45.97551 37.616327-83.591837 83.591837-83.591837h41.795918c45.97551 0 83.591837 37.616327 83.591837 83.591837v62.693878c0 22.987755 18.808163 41.795918 41.795919 41.795918h41.795918c22.987755 0 41.795918-18.808163 41.795918-41.795918v-125.387755c0-11.493878 9.404082-20.897959 20.897959-20.89796s20.897959 9.404082 20.89796 20.89796v125.387755c0 45.97551-37.616327 83.591837-83.591837 83.591836h-41.795918c-45.97551 0-83.591837-37.616327-83.591837-83.591836v-62.693878c0-22.987755-18.808163-41.795918-41.795919-41.795918h-41.795918c-22.987755 0-41.795918 18.808163-41.795918 41.795918v271.673469c0 11.493878-9.404082 20.897959-20.897959 20.89796zM909.061224 929.959184h-167.183673c-11.493878 0-20.897959-9.404082-20.897959-20.89796s9.404082-20.897959 20.897959-20.897959h167.183673c11.493878 0 20.897959 9.404082 20.89796 20.897959s-9.404082 20.897959-20.89796 20.89796z"\n            fill="#333333"\n            p-id="4560"\n          ></path>\n          <path\n            d="M386.612245 929.959184H177.632653c-45.97551 0-83.591837-37.616327-83.591837-83.591837v-208.979592c0-45.97551 37.616327-83.591837 83.591837-83.591837h208.979592c45.97551 0 83.591837 37.616327 83.591837 83.591837v208.979592c0 45.97551-37.616327 83.591837-83.591837 83.591837z m-208.979592-334.367347c-22.987755 0-41.795918 18.808163-41.795918 41.795918v208.979592c0 22.987755 18.808163 41.795918 41.795918 41.795918h208.979592c22.987755 0 41.795918-18.808163 41.795918-41.795918v-208.979592c0-22.987755-18.808163-41.795918-41.795918-41.795918H177.632653z"\n            fill="#333333"\n            p-id="4561"\n          ></path>\n        </svg>',type:iB.qrcode},{name:"editor.code.barCode",icon:'<svg\n          t="1717679973041"\n          class="icon"\n          viewBox="0 0 1024 1024"\n          version="1.1"\n          xmlns="http://www.w3.org/2000/svg"\n          p-id="5747"\n          width="20"\n          height="20"\n        >\n          <path\n            d="M876.893 63.84h20.44c34.501 0 62.49 30.402 62.49 64.919V229.7h-0.13c0 16.569-11.355 22.409-22.855 22.409s-22.854-7.734-22.854-19.234c0-0.211-3.92-0.373-3.92-0.583v-82.72c0-23-10.56-35.975-33.56-35.975h-61.47c-0.21 0-1.36-2.786-1.555-2.786-11.5 0-21.817-12.213-21.817-23.713s18.885-20.813 18.885-20.813V63.84h66.345zM213.45 66.286V63.84h-86.914c-34.5 0-62.36 30.402-62.36 64.919V229.7c0 16.569 9.33 22.409 20.83 22.409s24.927-8.528 24.927-20.028c0-0.211 4.001 0.421 4.001 0.21v-82.72c0-23 10.432-35.974 33.432-35.974h63.008c0.194 0 0.372-2.786 0.583-2.786 11.5 0 22.06-10.772 22.06-22.263 0-11.5-2.98-22.263-19.567-22.263z m16.587 500.74V246.27h-33.173v530.764h33.173V567.026zM109.933 795.141c0-11.5-11.37-21.576-22.87-21.576s-22.888 3.468-22.888 20.053v105.638c0 34.5 27.86 60.224 62.36 60.224h83.837c0.194 0 0.372 0.679 0.583 0.679 11.5 0 22.06-9.038 22.06-20.538s-2.98-20.538-19.566-20.538v7.224h-66.344v-6.737c-33.173-2.624-33.173-19.923-33.173-41.14v-82.704c0.001-0.213-3.999-0.39-3.999-0.585z m186.448-228.115V246.27h-16.586V694.1h16.586V567.026z m16.585 160.249h-33.172v49.758h33.172v-49.758z m66.344-160.249V246.27h-16.585V694.1h16.585V567.026z m16.586 160.249h-33.171v49.758h33.171v-49.758z m82.931-160.249V246.27h-66.344V694.1h66.344V567.026z m0 210.007v-49.758h-33.173v49.758h33.173z m132.688-210.007V246.27h-49.758V694.1h49.758V567.026z m-82.93 210.007h33.172v-49.758h-33.172v49.758zM661.273 566.41V246.27H644.69V694.1h16.584V566.41z m-33.171 210.623h33.171v-49.758h-33.171v49.758zM744.205 566.41V246.27h-16.587V694.1h16.587V566.41z m-33.173 210.623h33.173v-49.758h-33.173v49.758z m116.103-210.007V246.27h-33.172v530.764h33.172V567.026z m70.198 392.454c34.5 0 62.489-25.723 62.489-60.224V793.618h-0.13c0-16.585-9.33-20.053-20.83-20.053s-24.88 9.688-24.88 21.188c0 0.226-3.918 0.76-3.918 0.97v82.705c0 20.7 0 37.738-33.172 40.978v6.899h-66.345v-7.224s-18.885 9.33-18.885 20.83 10.317 20.246 21.817 20.246c0.193 0 1.344-0.68 1.555-0.68h82.299z"\n            p-id="5748"\n          ></path>\n        </svg>',type:iB.barCode}],G_=[{name:"editor.insert.template",icon:"template",type:rB.design},{name:"editor.insert.image",icon:"img",type:rB.img},{name:"editor.insert.svg",icon:"svg-file",type:rB.svg},{name:"editor.insert.psd",icon:"psd-file",type:rB.psd},{name:"editor.insert.json",icon:"json-file",type:rB.json}],Y_=[{name:"NotImportant",icon:"tool-draw1",type:oB.line},{name:"NotImportant",icon:"tool-draw2",type:oB.arrow},{name:"NotImportant",icon:"tool-draw3",type:oB.thinTailArrow},{name:"NotImportant",icon:"editor-brush",type:oB.freeDraw}],X_={class:"my-material"},z_={key:0,class:"img-group flex justify-start flex-wrap"},W_={class:"relative tmpl-img-box"},$_={key:1,class:"tip"},J_={__name:"uploadMaterial",setup(e){const{selectFiles:t}=Zm,A=sB(),n=sn([]),i=sn(!1),r=()=>{Ui().then((e=>{var t;n.value=null==(t=e.data.data)?void 0:t.map((e=>{var t,A,n,i;return{id:e.id,name:null==(t=null==e?void 0:e.attributes)?void 0:t.name,imgUrl:Oi+(null==(i=null==(n=null==(A=e.attributes.img)?void 0:A.data)?void 0:n.attributes)?void 0:i.url)}})),i.value=!0})).catch((e=>{i.value=!1}))};r();const o=()=>{t({accept:"image/*"}).then((e=>{const t=new FormData,A=new Date,[n]=e;t.append("files",n,`${A.getTime()}`),Si(t).then((e=>{const[t]=e.data;s(t.id,n.name)})).catch((e=>{}))}))},s=(e,t)=>{Di({data:{img:e,name:t}}).finally(r)},a=e=>u(this,null,(function*(){const t=yield A.editor.createImgByElement(e.target);A.editor.addBaseType(t,{scale:!0})}));return(e,t)=>{const A=et,i=Ee,s=Og,l=At;return cn(),un("div",X_,[Kn(A,{class:"w-full",icon:fn(iA),onClick:o,long:"",type:"primary"},{default:mn((()=>[Hn(yn(e.$t("common.upload.title")),1)])),_:1},8,["icon"]),fn(n).length?(cn(),un("div",z_,[(cn(!0),un(Ln,null,Zn(fn(n),((e,t)=>(cn(),vn(l,{content:e.name,key:`${t}-bai1-button`,placement:"top"},{default:mn((()=>[pn("div",W_,[Kn(i,{class:"del-btn",color:"red",onClick:t=>{return A=e.id,void Ti(A).finally(r);var A}},{default:mn((()=>[Kn(fn(rA))])),_:2},1032,["onClick"]),Kn(s,{lazy:"",src:e.imgUrl,fit:"contain",height:"100%",alt:e.name,onClick:a},null,8,["src","alt"])])])),_:2},1032,["content"])))),128))])):(cn(),un("div",$_,yn(e.$t("common.nomore")),1))])}}},q_=ki(J_,[["__scopeId","data-v-c93739e4"]]),Z_={class:"file-type-box"},eS=["src"],tS={class:"more"},AS=ki({__name:"fileType",props:{name:{type:String,default:""},itemId:{type:[Number,String],default:""}},emits:["change","select"],setup(e,{emit:t}){const{reNameFileType:A,removeFileType:n}=F_(),i=e,r=t,o=e=>{({reName:c,delete:h})[e]()},s=sn(""),c=()=>{s.value=i.name,Wt.confirm("重命名文件夹",{confirmButtonText:"确认",cancelButtonText:"取消",message:()=>ui(Ze,l(a(a({},Ze.$el),Ze.$attrs),{size:"large",modelValue:s.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"请输入文件夹名称","onUpdate:modelValue":e=>{s.value=e}}))}).then((()=>u(this,null,(function*(){""!==s.value?(yield A(s.value,i.itemId),r("change")):Yt.warning("文件夹名称不能为空")}))))},h=()=>u(this,null,(function*(){var e,t;const A=yield n(i.itemId);(null==(e=null==A?void 0:A.data)?void 0:e.msg)?Yt.error({content:null==(t=A.data)?void 0:t.msg,duration:3}):r("change")}));return(e,t)=>{const A=Ee,n=et,s=Jt,a=qt,l=Zt;return cn(),un("div",Z_,[pn("img",{src:fn("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANwAAADICAYAAACDHY8MAAAAAXNSR0IArs4c6QAAB/ZJREFUeF7tnL9uXEUchWdWGGQSF4miBITkAhqchgpREOHdVElNBQ9BS4MU+2Xo8wLsNTUVjV/CCqKgSbGDdm3wrr12Iu+9M79z9rNEg+KZc76TT/f6D+S05qNMH43TaDZOuRymksfr/gz/7h0EculSySdpNury5KyDFwTmBPJVDOXk4VFK6RV4eiVwnA/fzLnyseUEVoQrvz+Y8kQb8G/EbDThaTcgX4Gj/xcO2eqslQ/fXHurqHMzt0QgsBgf2SpOkUuXv/trUvFGrgpEIF98g2QaKNM2ROFrum1YeU3HzNOtzfK8Wrbh3vpWhGu3AE+5duyb3ZzLycPS7PbtvhjhtnB/hGs1Ot88aUW+6b0I1xA/X8c1hN/oaoRrBP7iWl4r2/KvfjvCVUe+ciHCteVf/XaEq4589UJeKxsPUPl6hKsM/Np1/H5l6wWq3o9wVXGvvYzXyvYbVEuAcNVQ33gRwrXfoFoChKuG+uaL+DouwAiVIiBcJdC3XsPXcRFWqJIB4apgfscle9+cpM9+4n/DEGGLHjLkJy9v/K/7Ea4HwBsf8fHTlPZ/2fgYDohEoByvEw/homz05a9RkpCjVwKr4iFcr3A3OOzR9ynN/+HDkMCldAgXZV6Ei7LEMDlmZZI/fdkh3DB473Yqr5V346bwWTl1+fGLCcJFGgvhIq0xQJbRM4QbAOudj+S18s7oND4xv0a4SEshXKQ1BsiCcANA3fBIXis3BBj60894wkXbZ/4D8PkPwvlwJIBw4VbltTLcJD0GQrgeYfZzFL/m1Q/HmKcgXMhd+Dou5Cw9hEK4HiD2fwSvlf0zjXEiwsXY4UoKhAs5Sw+hEK4HiMMcwWvlMFzbnopwbfnfcjvChZ1mg2AItwG8YT+V18ph+bY5HeHacH+PWxHuPSDJ/ZFbhPvwfkr3nsg1sgrMb5zozfnB/nnm3W/XZV8j3L1PEE1vZhJHJLD77Kp4V4R78EVKO/cjRicTBDQJ7OyntPfDf9mXhEM2zUFJHZ/ApXQXwvEaGX80EmoTOH+9vBDu8VfaZUgPAQUCez/+ncsfTwvfjVRYi4zyBHY+f5vLn18XvlEiPyUFFAgshDudFIWsZISAPIHR7gzh5FekgAwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAA4RxWpIMMAYSTmYqgDgQQzmFFOsgQQDiZqQjqQADhHFakgwwBhJOZiqAOBBDOYUU6yBBAOJmpCOpAAOEcVqSDDAGEk5mKoA4EEM5hRTrIEEA4makI6kAgf/Q2l9NJcehCBwiEJ5B3/kG48CsR0IjAGcIZrUmV8AQQLvxEBHQisBBumlIaO7WiCwRCEsjpNcKFXIZQlgRK+jmX0/E4pTx/yvEBAQgMSCAfTHOen89r5YCUORoCCwL5OB/8drQQDun4OwGBYQnMn24L7Zav4Uk3LHRO30oCXUrlOB903TXhzp90z49SKq+2Eg2lIdAvgS4fTCfLR6484S5fL+ffSBmNUyqH/Mig3wU4zZ7A4km2/FRbbvwv/sNzeMKZkPkAAAAASUVORK5CYII=")},null,8,eS),pn("span",null,yn(i.name),1),pn("div",{class:"click-bg",onClick:t[0]||(t[0]=e=>r("select"))}),pn("div",tS,[Kn(l,{trigger:"click",onCommand:o},{dropdown:mn((()=>[Kn(a,null,{default:mn((()=>[Kn(s,{command:"reName"},{default:mn((()=>[Hn("重命名")])),_:1}),Kn(s,{command:"delete"},{default:mn((()=>[Hn("删除")])),_:1})])),_:1})])),default:mn((()=>[Kn(n,{size:"small",shape:"circle",text:""},{default:mn((()=>[Kn(A,{size:"18px"},{default:mn((()=>[Kn(fn(yt))])),_:1})])),_:1})])),_:1})])])}}},[["__scopeId","data-v-ed117189"]]),nS={class:"file-type-box"},iS={class:"more"},rS={class:"dialog-footer"},oS={__name:"file",props:{name:{type:String,default:""},src:{type:String,default:""},previewSrc:{type:String,default:""},itemId:{type:[Number,String],default:""},json:{type:Object,default:()=>({})}},emits:["change"],setup(e,{emit:t}){const A=sB(),{t:n}=wi.useI18n(),{reNameFileType:i,removeTemplInfo:r,routerToId:o,getTemplInfo:s}=F_(),c=e,h=t,d=e=>{({reName:g,delete:p,transfer:w})[e]()},f=sn(""),g=()=>{f.value=c.name,Wt.confirm({title:"重命名",message:ui(Ze,l(a(a({},Ze.$el),Ze.$attrs),{size:"large",modelValue:f.value,autofocus:!0,placeholder:"请输入文件名称","onUpdate:modelValue":e=>{f.value=e}}))}).then((()=>u(this,null,(function*(){""!==f.value?(yield i(f.value,c.itemId),h("change")):Yt.warning("文件名称不能为空")}))))},p=()=>u(this,null,(function*(){yield r(c.itemId),h("change")})),v=()=>{Wt.confirm(n("replaceTip"),n("tip"),{confirmButtonText:n("ok"),cancelButtonText:n("cancel"),type:"warning"}).then((()=>{m()}))},m=()=>u(this,null,(function*(){const e=$t.service({text:n("alert.loading_data")}),t=yield s(c.itemId);o(c.itemId),A.editor.loadJSON(JSON.stringify(t.data.attributes.json),e.close)})),B=sn(!1),y=sn(""),C=sn([]),w=()=>u(this,null,(function*(){C.value=[],y.value="";const e=yield Mi();C.value=[e.data.data],B.value=!0})),b=()=>u(this,null,(function*(){const e="root"===y.value?"":y.value;yield Ii(c.itemId,{data:{parentId:String(e)}}),h("change")}));return(e,t)=>{const A=Og,n=Ee,i=et,r=Jt,o=qt,s=Zt,a=At,l=Cv,u=oA;return cn(),un(Ln,null,[Kn(a,{content:c.name,placement:"top"},{default:mn((()=>[pn("div",nS,[Kn(A,{lazy:"",onClick:v,src:c.src,fit:"contain",height:"100%",width:"100%",alt:c.name},null,8,["src","alt"]),pn("div",iS,[Kn(s,{trigger:"click",onCommand:d},{list:mn((()=>[Kn(o,null,{default:mn((()=>[Kn(r,{command:"reName"},{default:mn((()=>[Hn("重命名")])),_:1}),Kn(r,{command:"delete"},{default:mn((()=>[Hn("删除")])),_:1}),Kn(r,{command:"transfer"},{default:mn((()=>[Hn("迁移目录")])),_:1})])),_:1})])),default:mn((()=>[Kn(i,{size:"small",shape:"circle",text:""},{default:mn((()=>[Kn(n,{size:"24px"},{default:mn((()=>[Kn(fn(yt))])),_:1})])),_:1})])),_:1})])])])),_:1},8,["content"]),Kn(u,{modelValue:fn(B),"onUpdate:modelValue":t[2]||(t[2]=e=>Dn(B)?B.value=e:null),title:"请选择迁移目录"},{footer:mn((()=>[pn("div",rS,[Kn(i,{onClick:t[1]||(t[1]=e=>B.value=!1)},{default:mn((()=>[Hn("取消")])),_:1}),Kn(i,{type:"primary",onClick:b},{default:mn((()=>[Hn(" 确认 ")])),_:1})])])),default:mn((()=>[Kn(l,{modelValue:fn(y),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(y)?y.value=e:null),data:fn(C),width:"200px"},null,8,["modelValue","data"])])),_:1},8,["modelValue"])],64)}}},sS=ki(oS,[["__scopeId","data-v-40888d9d"]]),aS={class:"size-wrap"},lS={class:"size-wrap-item"},cS={class:"size-wrap-item"},uS={"label-width":0},hS={class:"cell-wrap box-border"},dS=["onClick"],fS={class:"cell-name"},gS={class:"cell-label"},pS=ki({__name:"ModalSize",props:{title:{type:String,default:""}},emits:["set"],setup(e,{expose:t,emit:A}){const n=sB(),i=A,r=e,o=sn(!1),s=sn(null),a=sn(null),l=sn([]),c=()=>u(this,null,(function*(){s.value&&a.value?(i("set",s.value,a.value),o.value=!1):Yt.warning("请检查尺寸")}));return t({showSetSize:(e,t)=>{s.value=e||null,a.value=t||null,n.editor.getSizeList().then((e=>{l.value=e})),o.value=!0}}),(e,t)=>{const A=Rg,n=et,i=eA,u=Ee,h=oA;return cn(),vn(h,{modelValue:fn(o),"onUpdate:modelValue":t[2]||(t[2]=e=>Dn(o)?o.value=e:null),"destroy-on-close":"",title:r.title,"footer-hide":""},{default:mn((()=>[pn("h3",null,yn(e.$t("editor.importFiles.createDesign.customSize")),1),pn("section",aS,[pn("div",lS,[pn("span",null,yn(e.$t("editor.width")),1),Kn(A,{style:{width:"70%"},modelValue:fn(s),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(s)?s.value=e:null),min:1,placeholder:e.$t("common.placeholder.input"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),pn("div",cS,[pn("span",null,yn(e.$t("editor.height")),1),Kn(A,{style:{width:"70%"},modelValue:fn(a),"onUpdate:modelValue":t[1]||(t[1]=e=>Dn(a)?a.value=e:null),min:1,placeholder:e.$t("common.placeholder.input"),"controls-position":"right"},null,8,["modelValue","placeholder"])]),pn("div",uS,[Kn(n,{type:"primary",onClick:c},{default:mn((()=>[Hn(yn(e.$t("common.okText")),1)])),_:1})])]),Kn(i,{direction:"horizontal"}),pn("h3",null,yn(e.$t("editor.importFiles.createDesign.systemSize")),1),pn("section",hS,[(cn(!0),un(Ln,null,Zn(fn(l),(e=>(cn(),un("div",{key:e.name,class:"cell-main",onClick:t=>(e=>{const[t,A]=e.split("x");s.value=Number(t),a.value=Number(A)})(`${e.width}x${e.height}x${e.unit}`)},[pn("div",null,[pn("div",fS,yn(e.name),1),pn("div",gS,yn(`${e.width}x${e.height}${e.unit}`),1)]),Kn(u,null,{default:mn((()=>[Kn(fn(yt))])),_:1})],8,dS)))),128))])])),_:1},8,["modelValue","title"])}}},[["__scopeId","data-v-d4045a70"]]),vS={class:"search-box"},mS={style:{height:"calc(100vh - 160px)"},id:"myFileTemplBox"},BS={__name:"myTempl",setup(e){const t=xi(),{createdFileType:A,createTmpl:n}=F_(),i=Vn({name:{$contains:""},parentId:{$eq:"",filterEmpty:!1}}),{pageData:r,showScroll:o,scrollHeight:s,isDownBottom:c,pageLoading:h,startPage:d,startGetList:f,nextPage:g}=sA({el:"#myFileTemplBox",apiClient:Fi,filters:i,sort:["type:desc"],fields:["name","parentId","type","externalId"],formatData:e=>e.map((e=>({id:e.id,name:e.attributes.name,type:e.attributes.type||"file",desc:e.attributes.desc,json:e.attributes.json,src:aA(e.attributes.img),previewSrc:lA(e.attributes.img)})))});ln((()=>u(this,null,(function*(){yield C(),d()}))));const p=sn(""),v=sn(null),m=e=>{"fileType"===e?(p.value="",Wt.confirm("新建文件夹",{confirmButtonText:"确认",cancelButtonText:"取消",message:()=>ui(Ze,l(a(a({},Ze.$el),Ze.$attrs),{size:"large",modelValue:p.value,autofocus:!0,style:{margin:"10px 0",width:"400px"},placeholder:"请输入文件夹名称","onUpdate:modelValue":e=>{p.value=e}}))}).then((()=>u(this,null,(function*(){""!==p.value?(yield A(p.value,i.parentId.$eq),f()):Yt.warning("文件夹名称不能为空")}))))):v.value.showSetSize()},B=(e,t)=>u(this,null,(function*(){yield n(e,t,i.parentId.$eq),f()})),y=sn([{name:"全部",parentId:""}]),C=()=>u(this,null,(function*(){var e;if(null==(e=null==t?void 0:t.query)?void 0:e.id){const e=yield Li({id:t.query.id});y.value=e.data.data;const A=e.data.data[e.data.data.length-1];i.parentId.$eq=A.parentId}}));return(e,t)=>{const A=et,n=Jt,a=qt,l=Zt,u=Ze,d=Cd,p=yd,C=eA,w=Ut;return cn(),un("div",null,[pn("div",vS,[Kn(l,{onCommand:m,placement:"bottom-start",style:{"margin-right":"10px"},transfer:""},{dropdown:mn((()=>[Kn(a,null,{default:mn((()=>[Kn(n,{command:"file"},{default:mn((()=>[Hn(yn(e.$t("editor.insert.template")),1)])),_:1}),Kn(n,{command:"fileType"},{default:mn((()=>[Hn(yn(e.$t("editor.insert.folder")),1)])),_:1})])),_:1})])),default:mn((()=>[Kn(A,{type:"primary",icon:fn(yt)},null,8,["icon"])])),_:1}),Kn(u,{class:"input",placeholder:e.$t("common.placeholder.input"),modelValue:fn(i).name.$contains,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(i).name.$contains=e),search:"",disabled:fn(h),onKeyup:zn(fn(f),["enter"])},null,8,["placeholder","modelValue","disabled","onKeyup"])]),Kn(p,null,{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(y),((e,t)=>(cn(),vn(d,{onClick:A=>((e,t)=>{t===y.value.length-1||(i.parentId.$eq=e,y.value=y.value.slice(0,t+1),f())})(e.parentId,t),key:e.id},{default:mn((()=>[Hn(yn(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1}),pn("div",mS,[fn(o)?(cn(),vn(w,{key:"myFileTemplBox","on-reach-bottom":fn(g),height:fn(s)},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(r),(e=>(cn(),un("div",{key:e.name,class:"item"},["fileType"===e.type?(cn(),vn(AS,{key:0,itemId:e.id,name:e.name,onSelect:()=>((e,t)=>{i.parentId.$eq=String(e),y.value.push({name:t,parentId:e}),f()})(e.id,e.name),onChange:fn(f)},null,8,["itemId","name","onSelect","onChange"])):(cn(),vn(sS,{key:1,src:e.src,json:e.json,previewSrc:e.previewSrc,itemId:e.id,name:e.name,onChange:fn(f)},null,8,["src","json","previewSrc","itemId","name","onChange"]))])))),128)),fn(c)?(cn(),vn(C,{key:0,plain:""},{default:mn((()=>[Hn(yn(e.$t("common.nomore")),1)])),_:1})):Pn("",!0)])),_:1},8,["on-reach-bottom","height"])):Pn("",!0)]),Kn(pS,{title:e.$t("editor.importFiles.createDesign.title"),ref_key:"modalSizeRef",ref:v,onSet:B},null,8,["title"])])}}},yS=ki(BS,[["__scopeId","data-v-b5d0a58e"]]),CS={key:0,class:"box-border p-10px my-material"},wS={key:1,class:"tip"},bS=ki({__name:"index",setup(e){const t=sn("templ"),A=sn(!1);return Ui().then((()=>{A.value=!0})).catch((()=>{A.value=!1})),(e,n)=>{const i=cA,r=uA;return fn(A)?(cn(),un("div",CS,[Kn(r,{modelValue:fn(t),"onUpdate:modelValue":n[0]||(n[0]=e=>Dn(t)?t.value=e:null)},{default:mn((()=>[Kn(i,{label:e.$t("editor.template"),name:"templ"},{default:mn((()=>["templ"===fn(t)?(cn(),vn(yS,{key:0})):Pn("",!0)])),_:1},8,["label"]),Kn(i,{label:e.$t("editor.image"),name:"img"},{default:mn((()=>["img"===fn(t)?(cn(),vn(q_,{key:0})):Pn("",!0)])),_:1},8,["label"])])),_:1},8,["modelValue"])])):(cn(),un("div",wS,yn(e.$t("common.login.tips.loginFirst")),1))}}},[["__scopeId","data-v-a0d2eb19"]]),{SelectMode:xS,SelectEvent:QS}=ym,ES=aB();function IS(e){const{t:t}=wi.useI18n(),A=Vn({mSelectMode:xS.EMPTY,mSelectOneType:"",mSelectId:"",mSelectIds:[],mSelectActive:[]}),n=e=>{A.mSelectMode=xS.ONE;const[t]=e;t&&(A.mSelectActive=[t],A.mSelectId=t.id,A.mSelectOneType=t.type,A.mSelectIds=[t.id]),o()},i=e=>{A.mSelectMode=xS.MULTI,A.mSelectId="",A.mSelectIds=e.map((e=>e.id)),o()},r=()=>{A.mSelectId="",A.mSelectIds=[],A.mSelectMode=xS.EMPTY,A.mSelectOneType="",o()};let o=()=>{};let s;ln((()=>{_n((()=>{var e,t,A;null==(e=ES.editor)||e.on(QS.ONE,n),null==(t=ES.editor)||t.on(QS.MULTI,i),null==(A=ES.editor)||A.on(QS.CANCEL,r)}))})),Hi((()=>{var e,t,A;null==(e=ES.editor)||e.off(QS.ONE,n),null==(t=ES.editor)||t.off(QS.MULTI,i),null==(A=ES.editor)||A.off(QS.CANCEL,r)})),e&&(s=En((()=>e.includes(A.mSelectOneType))));const a=En((()=>"one"===A.mSelectMode)),l=En((()=>"multiple"===A.mSelectMode)),c=En((()=>"one"===A.mSelectMode&&"group"===A.mSelectOneType)),u=En((()=>A.mSelectMode)),h=En((()=>A.mSelectOneType));return{canvasEditor:ES.editor,mixinState:A,t:t,selectType:h,isSelect:u,isGroup:c,isOne:a,isMultiple:l,isMatchType:s,matchTypeHander:e=>En((()=>e.includes(A.mSelectOneType))),getObjectAttr:e=>{o=e}}}const _S={class:"w-full"},SS={class:"layer-box"},FS=["onClick"],kS={class:"btn-box"},US={key:1,class:"empty-text"},OS=on({__name:"index",setup(e){const t=sB(),{isOne:A,mixinState:n}=IS(),i=sn([]),r=e=>e.id===n.mSelectId||n.mSelectIds.includes(e.id),o={group:"layer-group",textbox:"layer-textbox","i-text":"layer-iText",image:"layer-image",rect:"layer-rect",circle:"layer-circle",triangle:"layer-triangle",polygon:"layer-polygon"},s=(e,t)=>{if(e.includes("text"))return t.name||t.text;return{group:"组合",image:"图片",rect:"矩形",circle:"圆形",triangle:"三角形",polygon:"多边形",path:"路径"}[e]||"默认元素"},a=e=>{var A,n,i,r;const o=null==(A=t.canvas)?void 0:A.getObjects().find((t=>t.id===e));null==(n=t.canvas)||n.discardActiveObject(),null==(i=t.canvas)||i.setActiveObject(o),null==(r=t.canvas)||r.requestRenderAll()},l=()=>{t.editor.up()},c=()=>{t.editor.toFront()},u=()=>{t.editor.down()},h=()=>{t.editor.toBack()},d=()=>{var e;i.value=[...(null==(e=t.canvas)?void 0:e.getObjects().filter((e=>!(e instanceof wv.fabric.GuideLine||"workspace"===e.id))))||[]].reverse().map((e=>{const{type:t,id:A,name:n,text:i,selectable:r}=e;return{type:t,id:A,name:n,text:i,isLock:!r}})),i.value=Qh(fn(i),"id")};return ln((()=>{var e;d(),null==(e=t.canvas)||e.on("after:render",d)})),ri((()=>{var e;null==(e=t.canvas)||e.off("after:render",d)})),(e,n)=>{const d=zt,f=At,g=If,p=et,v=xf,m=fA;return cn(),un("div",_S,[fn(i).length?(cn(),un(Ln,{key:0},[pn("div",SS,[(cn(!0),un(Ln,null,Zn(fn(i),(e=>(cn(),un("div",{onClick:t=>a(e.id),key:e.id,class:dn(r(e)&&"active")},[Kn(v,{class:"ellipsis"},{default:mn((()=>[Kn(g,{span:22},{default:mn((()=>[Kn(f,{content:e.name||e.text||e.type,placement:"left"},{default:mn((()=>{return[pn("div",null,[Kn(d,{extClass:"text-20px",class:dn(r(e)&&"active"),color:"#fff",icon:(t=e.type,o[t]||"layer-default")},null,8,["class","icon"]),Hn(" | "+yn(s(e.type,e)),1)])];var t})),_:2},1032,["content"])])),_:2},1024),Kn(g,{span:2},{default:mn((()=>[Kn(p,{icon:e.isLock?fn(hA):fn(dA),link:"",onClick:A=>(e=>{var A;a(e.id),e.isLock?t.editor.unLock():t.editor.lock(),null==(A=t.canvas)||A.discardActiveObject()})(e)},null,8,["icon","onClick"])])),_:2},1024)])),_:2},1024)],10,FS)))),128))]),pn("div",kS,[On(Kn(m,null,{default:mn((()=>[Kn(p,{onClick:l},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"layer-up"})])),_:1}),Kn(p,{onClick:u},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"layer-down"})])),_:1}),Kn(p,{onClick:c},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"layer-upTop"})])),_:1}),Kn(p,{onClick:h},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"layer-downTop"})])),_:1})])),_:1},512),[[Wn,fn(A)]])])],64)):(cn(),un("p",US,"暂无图层"))])}}}),DS=ki(OS,[["__scopeId","data-v-3d5052e9"]]),TS={class:"w-full h-full box-border px-10px"},MS=["onClick"],LS=["src"],HS=on({__name:"index",props:{direction:{type:String,default:"vertical"}},setup(e){const t=e,A=sB(),n=cB(),{curTempIdx:i,templateList:r,curTemplate:o}=Pi(n),s=En((()=>{const e=fn(o);return("vertical"===t.direction?176:64)*((e.height||0)/e.width)})),a=ae((function(e){n.setTemplateIndex(e)}),250);function l(){var e;const t=fn(r)[fn(i)];t&&t.image&&t.image.startsWith("blob:")&&(URL.revokeObjectURL(t.image),null==(e=A.canvas)||e.toCanvasElement(10).toBlob((e=>{e&&(t.image=URL.createObjectURL(e))})))}return ln((()=>{var e;null==(e=A.canvas)||e.on("object:modified",l)})),ri((()=>{var e;null==(e=A.canvas)||e.off("object:modified",l)})),(e,A)=>(cn(),un("div",TS,[(cn(!0),un(Ln,null,Zn(fn(r),((e,A)=>(cn(),un("div",{class:dn(["relative w-full box-border rounded-8px cursor-pointer",[fn(i)===A?"border-10px border-solid border-[var(--el-color-primary)]":""]]),style:Rn({height:fn(s)+"px"}),key:A,onClick:e=>fn(a)(A)},[pn("div",{class:"relative w-full border-1px border-solid border-[var(--bg-gray)] rounded-8px",style:Rn({width:"vertical"===t.direction?"184px":"64px"})},[pn("img",{class:"w-full inline-block",src:e.image},null,8,LS),pn("div",{class:dn(["inline-block flex items-center justify-center text-center absolute text-#fff bg-[rgba(0_0_0/0.6)]","horizontal"===t.direction?"left-4px bottom-8px text-10px w-14px h-14px rounded-2px leading-12px":"left-8px bottom-12px text-12px w-20px h-20px rounded-4px leading-18px"])},yn(A+1),3)],4)],14,MS)))),128))]))}}),PS=aB();function RS(){const e=PS.editor.getScale(),{width:t,height:A}=PS.editor.getWorkspaceSize()||{width:0,height:0};return{createTemplate:()=>{var n;return{id:vm(),version:wv.fabric.version,width:t,height:A,zoom:e,objects:(null==(n=PS.canvas)?void 0:n.getObjects())||[]}}}}const NS={class:"w-full relative"},jS={class:"w-full h-48px box-border px-16px border-b-1px border-b-solid border-b-[rgba(0_0_0/0.08)] mb-12px"},VS={class:"w-full h-full flex justify-between items-center"},KS={class:"h-full flex justify-start items-center text-14px"},GS={class:"flex"},YS={class:"w-full h-full flex justify-start items-center"},XS=ki(on({__name:"index",setup(e){const t=sB(),A=cB(),{panelType:n}=Pi(t),{t:i}=wi.useI18n(),r={canvas:HS,layer:DS},o=sn(!1),s=sn("canvas"),a=En((()=>{let e="";switch(fn(s)){case"canvas":e=`${i("common.placeholder.input")+i("editor.panel.title")}`;break;case"layer":e=`${i("common.placeholder.input")+i("editor.layer.title")}`}return e})),l=ae((function(e){s.value=e}),250),c=ae((function(){o.value=!0}),250),u=ae((function(){const{createTemplate:e}=RS();A.addTemplate(e())}),250);return In((()=>n.value),(e=>{if(e===tB.canvas)s.value="canvas";else{if(e!==tB.layer)return"";s.value="layer"}}),{immediate:!0}),(e,t)=>{const A=Ee,n=et,i=Ze;return cn(),un("div",NS,[pn("div",jS,[On(pn("div",VS,[pn("ul",KS,[pn("li",{class:dn(["h-full f-center cursor-pointer select-none mr-10px",["canvas"===fn(s)?"text-#333 font-500 tab-active":""]]),onClick:t[0]||(t[0]=e=>fn(l)("canvas"))},yn(e.$t("editor.panel.title")),3),pn("li",{class:dn(["h-full f-center cursor-pointer select-none",["layer"===fn(s)?"text-#333 font-500 tab-active":""]]),onClick:t[1]||(t[1]=e=>fn(l)("layer"))},yn(e.$t("editor.layer.title")),3)]),pn("div",GS,["canvas"===fn(s)?(cn(),vn(n,{key:0,text:"",onClick:fn(u),style:{padding:"0",width:"32px","border-radius":"6px"}},{default:mn((()=>[Kn(A,{style:{"font-size":"20px"}},{default:mn((()=>[Kn(fn(yt))])),_:1})])),_:1},8,["onClick"])):Pn("",!0),Kn(n,{text:"",onClick:fn(c),style:{padding:"0",width:"32px","border-radius":"6px",margin:"0"}},{default:mn((()=>[Kn(A,{style:{"font-size":"20px"}},{default:mn((()=>[Kn(fn(gA))])),_:1})])),_:1},8,["onClick"])])],512),[[Wn,!fn(o)]]),On(pn("div",YS,[Kn(A,{class:"mr-8px"},{default:mn((()=>[Kn(fn(gA))])),_:1}),Kn(i,{placeholder:fn(a),onBlur:t[2]||(t[2]=e=>o.value=!1)},null,8,["placeholder"])],512),[[Wn,fn(o)]])]),pn("div",null,[(cn(),vn(Ri,null,[(cn(),vn(Bn(r[fn(s)])))],1024))])])}}}),[["__scopeId","data-v-43d2dc69"]]),zS={class:"box-border p-10px"};const WS=ki({},[["render",function(e,t){return cn(),un("div",zS,"计划中")}]]),$S={class:"w-full h-full overflow-y-auto"},JS={class:"h-36px leading-36px font-bold ml-10px"},qS={class:"flex justify-start items-center flex-wrap min-h-40px"},ZS=["onClick"],eF={class:"text-12px mt-10px"},tF={class:"-mt-10px"},AF={class:"h-36px leading-36px font-bold ml-10px"},nF={class:"flex justify-start items-center flex-wrap min-h-40px"},iF=["onClick"],rF={class:"text-12px mt-10px"},oF={class:"-mt-10px"},sF={class:"h-36px leading-36px font-bold ml-10px"},aF={class:"flex justify-start items-center flex-wrap min-h-40px"},lF=["onClick"],cF=["innerHTML"],uF={class:"-mt-10px"},hF={class:"h-36px leading-36px font-bold ml-10px"},dF={class:"flex justify-start items-center flex-wrap min-h-40px"},fF=["onClick"],gF={class:"-mt-10px"},pF={class:"h-36px leading-36px font-bold ml-10px"},vF={class:"flex justify-start items-center flex-wrap min-h-40px"},mF=["onClick"],BF=["innerHTML"],yF=on({__name:"index",setup(e){const{getImgStr:t,selectFiles:A}=Zm,n=sB(),i=(e,t)=>u(this,null,(function*(){n.editor.clear(),n.editor.setSize(e,t),Yt.success("创建成功")})),r={shadow:"",fontFamily:"arial"},o=sn(),s=ae((function(e){return u(this,null,(function*(){var i;const r=$t.service({lock:!0,body:!0});try{switch(e){case rB.design:r.close(),null==(i=o.value)||i.showSetSize();break;case rB.img:A({accept:"image/*",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{!function(e){if(!e)throw new Error("file is undefined");const t=document.createElement("img");t.src=e,document.body.appendChild(t),t.onload=()=>u(this,null,(function*(){const e=yield n.editor.createImgByElement(t);n.editor.addBaseType(e,{scale:!0}),t.remove()}))}(e)}))}))}));break;case rB.svg:A({accept:".svg",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{t(e).then((e=>{!function(e){if(!e)throw new Error("file is undefined");wv.fabric.loadSVGFromURL(e,((e,t)=>{const A=wv.fabric.util.groupSVGElements(e,l(a({},t),{name:"defaultSVG",id:vm()}));n.editor.addBaseType(A,{scale:!0})}))}(e)}))}))}));break;case rB.json:n.editor.insert();break;case rB.psd:r.close(),yield n.editor.insertPSD()}r.close()}catch(s){r.close()}}))}),250),c=ae((function(e){let t;switch(e){case AB.h1:t=new wv.fabric.Textbox("双击编辑标题",l(a({},r),{fontWeight:"bold",fontSize:80,fill:"#000000"}));break;case AB.h2:t=new wv.fabric.Textbox("双击编辑标题",l(a({},r),{fontWeight:"bold",fontSize:60,fill:"#000000"}));break;case AB.normal:t=new wv.fabric.Textbox("双击编辑标题",l(a({},r),{fontSize:48,fill:"#000000"}))}t&&n.editor.addBaseType(t,{center:!0})}),250),h=ae((function(e){switch(e){case nB.react:const e=new wv.fabric.Rect(l(a({},r),{fill:"#F57274FF",width:400,height:400,name:"矩形"}));n.editor.addBaseType(e,{center:!0});break;case nB.triangle:const t=new wv.fabric.Triangle(l(a({},r),{width:400,height:400,fill:"#92706BFF",name:"三角形"}));n.editor.addBaseType(t,{center:!0});break;case nB.around:const A=new wv.fabric.Circle(l(a({},r),{radius:150,fill:"#57606BFF",name:"圆形"}));n.editor.addBaseType(A,{center:!0});break;case nB.polygon:const i=new wv.fabric.Polygon(Cb(5,200),l(a({},r),{fill:"#CCCCCCFF",name:"多边形"}));i.set({width:400,height:400,pathOffset:{x:0,y:0}}),n.editor.addBaseType(i,{center:!0});break;case nB.line:const o=new wv.fabric.Line([100,100,10,10],l(a({},r),{stroke:"#333",fill:"#333",name:"直线"}));n.editor.addBaseType(o,{center:!0})}}),250),d=ae((function(e){switch(e){case iB.qrcode:n.editor.addQrCode();break;case iB.barCode:n.editor.addBarcode()}}),250),f=sn(""),g=sn(!1);Vn({isDrawingLineMode:!1,lineType:!1});const p=ae((function(e){if(fn(f)===e)return f.value="",g.value=!1,e===oB.freeDraw&&n.editor.endDraw(),void(e===oB.polygon&&n.editor.discardPolygon());switch(g.value=!0,f.value=e,e){case oB.line:case oB.arrow:case oB.thinTailArrow:v();break;case oB.freeDraw:m(),g.value=!1,f.value="",n.editor.setMode(fn(g)),n.editor.setLineType(fn(g)),f.value=e,n.editor.startDraw({width:20})}}),250);function v(){const e=fn(f),t=fn(g);n.editor.setMode(t),n.editor.setLineType(e)}function m(){n.editor.discardPolygon(),n.editor.endDraw(),n.editor.endTextPathDraw()}return Ni((()=>{fn(g)&&(g.value=!1,f.value="",n.editor.setMode(!1),m())})),(e,t)=>{const A=zt;return cn(),un("div",$S,[pn("section",null,[pn("div",JS,yn(e.$t("editor.insert.title")),1),pn("ul",qS,[(cn(!0),un(Ln,null,Zn(fn(G_),(t=>(cn(),un("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:t.type,onClick:e=>fn(s)(t.type)},[Kn(A,{extClass:"text-24px",icon:t.icon,color:"#333"},null,8,["icon"]),pn("span",eF,yn(e.$t(t.name)),1)],8,ZS)))),128))])]),pn("section",tF,[pn("div",AF,yn(e.$t("editor.text.title")),1),pn("ul",nF,[(cn(!0),un(Ln,null,Zn(fn(j_),(t=>(cn(),un("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-88px ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:t.type,onClick:e=>fn(c)(t.type)},[Kn(A,{extClass:"text-24px",icon:t.icon,color:"#333"},null,8,["icon"]),pn("span",rF,yn(e.$t(t.name)),1)],8,iF)))),128))])]),pn("section",oF,[pn("div",sF,yn(e.$t("editor.shape.title")),1),pn("ul",aF,[(cn(!0),un(Ln,null,Zn(fn(V_),(e=>(cn(),un("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:e.type,onClick:t=>fn(h)(e.type)},[pn("div",{class:"w-24px h-24px",innerHTML:e.icon},null,8,cF)],8,lF)))),128))])]),pn("section",uF,[pn("div",hF,yn(e.$t("editor.draw.title")),1),pn("ul",dF,[(cn(!0),un(Ln,null,Zn(fn(Y_),(e=>(cn(),un("li",{class:dn(["f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",{drawActive:e.type===fn(f)}]),key:e.type,onClick:t=>fn(p)(e.type)},[Kn(A,{extClass:"text-20px",icon:e.icon},null,8,["icon"])],10,fF)))),128))])]),pn("section",gF,[pn("div",pF,yn(e.$t("editor.codes.title")),1),pn("ul",vF,[(cn(!0),un(Ln,null,Zn(fn(K_),(e=>(cn(),un("li",{class:"f-center flex-col p-10px select-none cursor-pointer w-88px h-full ml-10px mb-10px bg-#f1f2f4 rounded-12px editor-item",key:e.type,onClick:t=>fn(d)(e.type)},[pn("div",{class:"w-24px h-24px",innerHTML:e.icon},null,8,BF)],8,mF)))),128))])]),Kn(pS,{title:"新建设计",ref_key:"modalSizeRef",ref:o,onSet:i},null,512)])}}}),CF=Oi,wF=e=>Ci.get(`${CF}/api/templs/${e}`);function bF(e,t,A,n,i,r,o){var s;return s={populate:{img:"*"},filters:{},fields:o,pagination:{page:e,pageSize:r}},[{key:n,value:t,type:"$eq"},{key:i,value:A,type:"$contains"}].forEach((e=>{const{key:t,value:A,type:n}=e;A&&(s.filters[t]={[n]:A})})),Xt.stringify(s)}function xF(e){var t,A;const n=(null==(A=null==(t=null==e?void 0:e.data)?void 0:t.attributes)?void 0:A.url)||"";return CF+n}function QF(e){var t,A,n,i,r,o;const s=(null==(i=null==(n=null==(A=null==(t=null==e?void 0:e.data)?void 0:t.attributes)?void 0:A.formats)?void 0:n.small)?void 0:i.url)||(null==(o=null==(r=null==e?void 0:e.data)?void 0:r.attributes)?void 0:o.url)||"";return CF+s}function EF({typeUrl:e,listUrl:t,searchTypeKey:A,searchWordKey:n,scrollElement:i,pageSize:r,fields:o=[]}){const s=sn(!1),a=sn(""),l=sn(""),c=sn([]),h=En((()=>{const e=c.value.find((e=>e.value===l.value));return(null==e?void 0:e.lable)||"全部"})),d=sn([]),f=sn(1),g=Vn({page:0,pageCount:0,pageSize:10,total:0}),p=En((()=>g.page===f.value&&g.page>=g.pageCount)),v=()=>u(this,null,(function*(){s.value=!0;try{const A=(yield(t=e,Ci.get(`${CF}/api/${t}?pagination[pageSize]=200`))).data.data.map((e=>({value:e.id,label:e.attributes.name})));c.value=[{label:"全部",value:""},...A]}catch(A){c.value=[]}var t;s.value=!1})),m=()=>u(this,null,(function*(){s.value=!0;try{const s=bF(f.value,l.value,a.value,A,n,r,o),c=yield(e=t,i=s,Ci.get(`${CF}/api/${e}?${i}`)),u=c.data.data.map((e=>{var t;return{id:e.id,name:e.attributes.name,desc:e.attributes.desc,json:null==(t=e.attributes)?void 0:t.json,src:xF(e.attributes.img),previewSrc:QF(e.attributes.img)}}));Object.keys(c.data.meta.pagination).forEach((e=>{g[e]=c.data.meta.pagination[e]})),d.value=[...d.value,...u]}catch(c){}var e,i;s.value=!1})),B=sn(!1),y=sn(0);return{startPage:()=>u(this,null,(function*(){const e=document.querySelector(i);y.value=e.offsetHeight,B.value=!0,yield v(),yield m()})),searchKeyWord:a,typeValue:l,typeText:h,typeList:c,pageLoading:s,pageData:d,isDownBottm:p,startGetList:()=>{d.value=[],f.value=1,m()},nextPage:()=>{f.value>=g.pageCount||(f.value++,setTimeout((()=>{m()}),1e3))},scrollHeight:y,showScroll:B,getInfo:wF}}const IF={class:"box-border p-10px"},_F={class:"search-box"},SF={style:{height:"calc(100vh - 108px)"},id:"myTemplBox"},FF={gap:10,cols:2},kF={class:"tmpl-img-box"},UF=ki({__name:"index",setup(e){const t=sB(),A=bi(),n=xi(),{t:i}=wi.useI18n(),{startPage:r,typeValue:o,typeText:s,typeList:a,pageLoading:l,pageData:c,searchKeyWord:h,isDownBottm:d,startGetList:f,nextPage:g,showScroll:p,scrollHeight:v,getInfo:m}=EF({typeUrl:"templ-types",listUrl:"templs",searchTypeKey:"templ_type",searchWordKey:"name",pageSize:10,scrollElement:"#myTemplBox",fields:["name"]});o.value="";const B=e=>u(this,null,(function*(){const r=$t.service({text:i("common.loadingText")}),o=yield m(e.id);n.query.admin?A.replace("/?tempId="+e.id+"&admin=true"):A.replace("/?tempId="+e.id),t.editor.loadJSON(JSON.stringify(o.data.data.attributes.json),null==r?void 0:r.close())})),y=ae(f,200),C=()=>u(this,null,(function*(){if(n.query.tempId)try{const e=$t.service({text:i("common.loadingText")}),A=yield m(n.query.tempId);t.editor.loadJSON(JSON.stringify(A.data.data.attributes.json),null==e?void 0:e.close())}catch(e){}})),w=sn(),b=sn(0),x=le((function(e){if(fn(l))return;const t=w.value.wrapRef;w.value.moveY=100*t.scrollTop/t.clientHeight,w.value.moveX=100*t.scrollLeft/t.clientWidth;let A=t.scrollHeight-t.clientHeight;e.scrollTop+2>=A&&(b.value=e.scrollTop,g())}),300);return ln((()=>{r(),C()})),(e,t)=>{const A=ip,n=np,r=Ze,u=Og,g=At,m=eA,C=Ut,b=pA;return cn(),un("div",IF,[pn("div",_F,[Kn(n,{class:"select",modelValue:fn(o),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(o)?o.value=e:null),onChange:fn(y),disabled:fn(l),placeholder:"请选择"},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(a),(e=>(cn(),vn(A,{value:e.value,label:e.label,key:e.value},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange","disabled"]),Kn(r,{class:"input",placeholder:`在${fn(s)}中搜索`,modelValue:fn(h),"onUpdate:modelValue":t[1]||(t[1]=e=>Dn(h)?h.value=e:null),search:"",disabled:fn(l),onKeyup:zn(fn(f),["enter"])},null,8,["placeholder","modelValue","disabled","onKeyup"])]),On((cn(),un("div",SF,[fn(p)?(cn(),vn(C,{ref_key:"scrollbarRef",ref:w,key:"mysscroll",onScroll:fn(x),height:fn(v)},{default:mn((()=>[pn("wc-waterfall",FF,[(cn(!0),un(Ln,null,Zn(fn(c),(e=>(cn(),vn(g,{content:e.name,key:e.src,placement:"top"},{default:mn((()=>[pn("div",kF,[Kn(u,{src:e.previewSrc,fit:"contain",height:"100%",alt:e.name,onClick:t=>(e=>{Wt({title:i("common.tip"),message:`${i("editor.tip.replaceTip")}`,showCancelButton:!0,confirmButtonText:i("common.okText"),cancelButtonText:i("common.cancelText")}).then((()=>B(e)))})(e)},null,8,["src","alt","onClick"])])])),_:2},1032,["content"])))),128))]),fn(d)?(cn(),vn(m,{key:0},{default:mn((()=>[Hn("已经到底了")])),_:1})):Pn("",!0)])),_:1},8,["onScroll","height"])):Pn("",!0)])),[[b,fn(l)]])])}}},[["__scopeId","data-v-e19958ba"]]),OF={class:"search-box"},DF=ki({__name:"SearchType",props:{typeListApi:{type:Function,Object:()=>({})}},emits:["change"],setup(e,{expose:t,emit:A}){const n=e,i=A,r=sn(!1),o=sn(""),s=sn(""),a=sn([]),l=En((()=>{const e=a.value.find((e=>e.value===o.value));return(null==e?void 0:e.label)||"全部"}));ln((()=>u(this,null,(function*(){r.value=!0;try{const e=(yield n.typeListApi()).data.data.map((e=>({value:e.id,label:e.attributes.name})));a.value=[{label:"全部",value:""},...e]}catch(e){}r.value=!1}))));const c=()=>{i("change",{searchKeyWord:s.value,typeValue:o.value})},h=()=>{o.value="",s.value="",c()},d=ae(c,300);return t({setType:e=>{o.value=e}}),(e,t)=>{const A=et,n=ip,i=np,u=Ze;return cn(),un("div",OF,[fn(o)||fn(s)?(cn(),vn(A,{key:0,text:"",class:"back-btn",onClick:h,icon:fn(vA)},null,8,["icon"])):Pn("",!0),Kn(i,{class:"select",modelValue:fn(o),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(o)?o.value=e:null),disabled:fn(r),placeholder:"请选择",onChange:c},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(a),(e=>(cn(),vn(n,{value:e.value,label:e.label,key:e.value},null,8,["value","label"])))),128))])),_:1},8,["modelValue","disabled"]),Kn(u,{class:"input",placeholder:`在${fn(l)}中搜索`,modelValue:fn(s),"onUpdate:modelValue":t[1]||(t[1]=e=>Dn(s)?s.value=e:null),disabled:fn(r),clearable:"",onChange:fn(d),onSearch:c,search:""},null,8,["placeholder","modelValue","disabled","onChange"])])}}},[["__scopeId","data-v-6dc45053"]]),TF={class:"material-type"},MF={class:"top"},LF={class:"img-box"},HF=["onClick","onDragend"],PF={__name:"TypeList",props:{typeApi:{type:Function},typeListApi:{type:Function},typeKey:{type:String},formatData:{type:Function}},emits:["click","dragend"],setup(e,{emit:t}){const A=t,n=e,i=sn([]),r=()=>u(this,null,(function*(){const e=yield n.typeApi();i.value=e.data.data.map((e=>({name:e.attributes.name,id:e.id,list:[]})))})),o=()=>u(this,null,(function*(){let e=0;for(const t of i.value){const A=yield n.typeListApi({populate:{img:"*"},filters:{[n.typeKey]:{$eq:t.id}},pagination:{page:1,pageSize:8}});i.value[e].list=n.formatData(A.data.data),e++}}));return ln((()=>u(this,null,(function*(){yield r(),yield o()})))),(e,t)=>{const n=et,r=Og;return cn(),un("div",TF,[(cn(!0),un(Ln,null,Zn(fn(i),(e=>(cn(),un("div",{class:"item",key:e.id},[pn("div",MF,[pn("h3",null,yn(e.name),1),Kn(n,{link:"",size:"small",onClick:t=>A("selectType",e.id)},{default:mn((()=>[Hn("查看更多")])),_:2},1032,["onClick"])]),pn("div",LF,[(cn(!0),un(Ln,null,Zn(e.list,(e=>(cn(),un("div",{class:"img-item",key:e.id,onClick:t=>A("click",{info:e,e:t}),onDragend:t=>A("dragend",{info:e,e:t})},[Kn(r,{lazy:"",src:e.src,fit:"contain",width:"100%",height:"100%",alt:e.name},null,8,["src","alt"])],40,HF)))),128))])])))),128))])}}},RF=ki(PF,[["__scopeId","data-v-bfc18003"]]),NF=["id"],jF={key:0,class:"img-box"},VF=ki({__name:"PageList",props:{pageListApi:{type:Function},filters:{type:Object},DOMId:{type:String,default:""},formatData:{type:Function}},emits:["back","click","dragend"],setup(e,{expose:t,emit:A}){const n=A,i=e,{pageData:r,showScroll:o,scrollHeight:s,isDownBottom:a,pageLoading:l,startPage:c,startGetList:h,nextPage:d}=sA({el:"#"+i.DOMId,apiClient:i.pageListApi,filters:i.filters,sort:[],fields:[],formatData:i.formatData}),f=sn(),g=sn(0),p=le((function(e){if(fn(l))return;const t=f.value.wrapRef;f.value.moveY=100*t.scrollTop/t.clientHeight,f.value.moveX=100*t.scrollLeft/t.clientWidth;let A=t.scrollHeight-t.clientHeight;e.scrollTop+2>=A&&(g.value=e.scrollTop,d())}),300);return ln((()=>u(this,null,(function*(){c()})))),t({startGetList:h,startPage:c}),(e,t)=>{const A=Og,c=At,u=eA,h=Ut,d=pA;return On((cn(),un("div",{class:"page-list-box",style:{height:"calc(100vh - 100px)"},id:i.DOMId,"element-loading-text":"Loading...","element-loading-svg-view-box":"-10, -10, 50, 50","element-loading-background":"rgba(122, 122, 122, 0.8)"},[fn(o)?(cn(),vn(h,{ref_key:"scrollbarRef",ref:f,key:i.DOMId,height:fn(s),onScroll:fn(p)},{default:mn((()=>[fn(r).length?(cn(),un("div",jF,[(cn(!0),un(Ln,null,Zn(fn(r),(e=>(cn(),un("div",{class:"img-item",key:e.id},[Kn(c,{content:e.name,placement:"top"},{default:mn((()=>[Kn(A,{lazy:"",src:e.src,fit:"contain",style:{width:"90px",height:"90px"},alt:e.name,onClick:t=>n("click",{info:e,e:t}),onDragend:t=>n("dragend",{info:e,e:t})},null,8,["src","alt","onClick","onDragend"])])),_:2},1032,["content"])])))),128))])):Pn("",!0),fn(a)?(cn(),vn(u,{key:1},{default:mn((()=>[Hn(yn(fn(r).length?"已经到底了":"暂无内容"),1)])),_:1})):Pn("",!0)])),_:1},8,["height","onScroll"])):Pn("",!0)],8,NF)),[[d,fn(l)]])}}},[["__scopeId","data-v-3e213793"]]),KF=aB();function GF(){const e=()=>{var e;return null==(e=KF.canvas)?void 0:e.getSelectionElement().getBoundingClientRect()};return{getCanvasBound:e,isOutsideCanvas:(t,A)=>{const{left:n,right:i,top:r,bottom:o}=e();return t<n||t>i||A<r||A>o}}}const YF={class:"box-border p-10px"},XF={__name:"index",setup(e){const t=sB(),{isOutsideCanvas:A}=GF(),n=sn(),i=Vn({material_type:{$contains:""},name:{$contains:""}}),r=e=>e.map((e=>({id:e.id,name:e.attributes.name,desc:e.attributes.desc,src:aA(e.attributes.img),previewSrc:lA(e.attributes.img)}))),o=e=>u(this,[e],(function*({searchKeyWord:e,typeValue:t}){i.name.$contains="",i.material_type.$contains="",yield _n(),i.name.$contains=e,i.material_type.$contains=t})),s=e=>u(this,null,(function*(){i.material_type.$contains=e,n.value.setType(e),yield _n()})),a=e=>u(this,[e],(function*({e:e}){if(A(e.clientX,e.clientY))return;const n=yield t.editor.createImgByElement(e.target);t.editor.addBaseType(n,{scale:!0,event:e})})),l=e=>u(this,[e],(function*({e:e}){const A=yield t.editor.createImgByElement(e.target);t.editor.addBaseType(A,{scale:!0})}));return ln((()=>u(this,null,(function*(){var e;const t=xi();if(null==(e=null==t?void 0:t.query)?void 0:e.loadFile){const e=t.query.loadFile,A=yield Zm.insertImgFile(e);l({target:A})}})))),(e,t)=>(cn(),un("div",YF,[Kn(DF,{ref_key:"selectTypeRef",ref:n,typeListApi:fn(mA),onChange:o},null,8,["typeListApi"]),On(Kn(RF,{typeApi:fn(mA),typeListApi:fn(BA),typeKey:"material_type",formatData:r,onSelectType:s,onClick:l,onDragend:a},null,8,["typeApi","typeListApi"]),[[Wn,!fn(i).material_type.$contains&&!fn(i).name.$contains]]),fn(i).material_type.$contains||fn(i).name.$contains?(cn(),vn(VF,{key:0,DOMId:"materialList",pageListApi:fn(yA),filters:fn(i),onClick:l,formatData:r,onDragend:a},null,8,["pageListApi","filters"])):Pn("",!0)]))}},zF={class:"box-border p-10px"},WF={__name:"index",setup(e){const t=sB(),{t:A}=wi.useI18n(),{isOutsideCanvas:n}=GF(),i=e=>u(this,[e],(function*({e:e,info:i}){if(n(e.clientX,e.clientY))return;const r=$t.service({text:A("alert.loading_data")});yield t.editor.downFontByJSON(JSON.stringify(i.json));const s=JSON.parse(JSON.stringify(i.json)),a=o(s.type);new wv.fabric[a].fromObject(s,(A=>{t.editor.addBaseType(A,{event:e}),r.close()}))})),r=e=>u(this,[e],(function*({info:e}){const n=$t.service({text:A("alert.loading_data")});yield t.editor.downFontByJSON(JSON.stringify(e.json));const i=JSON.parse(JSON.stringify(e.json));i.id=vm();const r=o(i.type);new wv.fabric[r].fromObject(i,(e=>{t.editor.addBaseType(e),n.close()}))}));function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}const s=sn(),a=Vn({font_style_type:{$contains:""},name:{$contains:""}}),l=e=>e.map((e=>({id:e.id,name:e.attributes.name,desc:e.attributes.desc,json:e.attributes.json,src:aA(e.attributes.img),previewSrc:lA(e.attributes.img)}))),c=e=>u(this,[e],(function*({searchKeyWord:e,typeValue:t}){a.name.$contains="",a.font_style_type.$contains="",yield _n(),a.name.$contains=e,a.font_style_type.$contains=t})),h=e=>u(this,null,(function*(){a.font_style_type.$contains=e,s.value.setType(e),yield _n()}));return(e,t)=>{var A,n,o,u;return cn(),un("div",zF,[Kn(DF,{ref_key:"selectTypeRef",ref:s,typeListApi:fn(CA),onChange:c},null,8,["typeListApi"]),On(Kn(RF,{typeApi:fn(CA),typeListApi:fn(wA),typeKey:"font_style_type",formatData:l,onSelectType:h,onClick:r,onDragend:i},null,8,["typeApi","typeListApi"]),[[Wn,!(null==(A=fn(a))?void 0:A.font_style_type.$contains)&&!(null==(n=fn(a))?void 0:n.name.$contains)]]),(null==(o=fn(a))?void 0:o.font_style_type.$contains)||(null==(u=fn(a))?void 0:u.name.$contains)?(cn(),vn(VF,{key:0,DOMId:"fontMaterialList",pageListApi:fn(bA),filters:fn(a),formatData:l,onClick:r,onDragend:i},null,8,["pageListApi","filters"])):Pn("",!0)])}}},$F={class:"flex justify-start max-w-384px basis-72px"},JF={class:"relative bg-#fff z-1 w-72px flex flex-col items-center pt-10px box-border border-r-#eef2f8 border-r-solid border-r-1px"},qF=["onClick"],ZF=[(e=>(ji("data-v-a6ea1b0b"),e=e(),Vi(),e))((()=>pn("img",{src:"data:image/svg+xml,%3csvg%20width='15'%20height='92'%20viewBox='0%200%2015%2092'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2092L2%200H3C3%203.77087%204.42026%207.40332%206.97794%2010.1742L10.4917%2013.9807C13.3904%2017.121%2015%2021.2378%2015%2025.5115V66.626C15%2071.0146%2013.3028%2075.2332%2010.2636%2078.399L7.1792%2081.6119C4.4975%2084.4054%203%2088.1277%203%2092H2Z'%20fill='white'/%3e%3cpath%20d='M2%2092H3C3%2088.1277%204.4975%2084.4054%207.17919%2081.612L10.2636%2078.3991C13.3028%2075.2332%2015%2071.0147%2015%2066.6261V25.5115C15%2021.2379%2013.3904%2017.121%2010.4917%2013.9807L6.97795%2010.1742C4.42026%207.40337%203%203.77085%203%200H2C2%201.91731%202.34422%203.80108%203%205.56777C3.71995%207.50734%204.81541%209.30577%206.24314%2010.8525L9.75686%2014.659C12.4851%2017.6146%2014%2021.4892%2014%2025.5115V66.6261C14%2070.7565%2012.4027%2074.7269%209.5422%2077.7066L6.4578%2080.9195C4.92573%2082.5154%203.75601%2084.3955%203%2086.4322C2.34449%2088.1982%202%2090.0818%202%2092Z'%20fill='black'%20fill-opacity='0.08'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.44061%2041.6074L9.05932%2042.2261L5.28535%2046.0001L9.05932%2049.7741L8.44061%2050.3928L4.04791%2046.0001L8.44061%2041.6074Z'%20fill='%234C535C'/%3e%3c/svg%3e"},null,-1)))],ek=ki(on({__name:"index",setup(e){const t=sB(),{panelType:A,showPanel:n,tabType:i,panelPositoin:r}=Pi(t),o={[eB.create]:yF,[eB.template]:UF,[eB.ai]:WS,[eB.text]:WF,[eB.material]:XF,[eB.mine]:bS,[eB.none]:""},s=ae((function(){t.setShowPanel(!1),a.value=eB.none}),250),a=sn(eB.template),l=ae((function(e,i){a.value=e,!fn(n)&&t.setShowPanel(!0),"bottom"===fn(r)&&t.setPanelPositoin("left"),fn(A)!==tB.menu&&(A.value=i),t.setTabType(e)}),250);return In((()=>i.value),(e=>{fn(a)!==e&&(a.value=e)})),(e,t)=>{const i=zt;return cn(),un("section",$F,[pn("ul",JF,[(cn(!0),un(Ln,null,Zn(fn(N_),(t=>(cn(),un("li",{class:"flex flex-col items-center mb-20px cursor-pointer",key:t.type,onClick:e=>fn(l)(t.type,fn(tB).menu)},[pn("div",{class:dn(["px-10px f-center py-4px rounded-10px tab-item editor-item",[fn(a)===t.type?"tab-item_active":""]])},[Kn(i,{extClass:"text-20px",icon:t.icon,color:fn(a)===t.type?"#000":"#333"},null,8,["icon","color"])],2),pn("span",{class:dn(["text-12px",[fn(a)===t.type?"font-bold":""]])},yn(e.$t(t.name)),3)],8,qF)))),128))]),"left"===fn(r)?(cn(),un("div",{key:0,class:dn(["relative h-full transition-all transition-ease left-style-panel",[fn(n)?"":"-ml-312px",fn(A)===fn(tB).menu?"w-312px":"w-224px"]])},[fn(n)&&fn(A)===fn(tB).menu?(cn(),un(Ln,{key:0},[(cn(),vn(Ri,null,[(cn(),vn(Bn(o[fn(a)])))],1024)),pn("div",{class:"inline-block absolute -right-13px top-50% -translate-y-50% z-1 cursor-pointer",onClick:t[0]||(t[0]=(...e)=>fn(s)&&fn(s)(...e))},ZF)],64)):(cn(),vn(fn(XS),{key:1}))],2)):Pn("",!0)])}}}),[["__scopeId","data-v-a6ea1b0b"]]),tk={__name:"Drag",setup(e){const t=sB(),A=sn(!1),n=e=>{var A,n;e?null==(A=t.editor)||A.startDring():null==(n=t.editor)||n.endDring()};return ln((()=>{_n((()=>{var e,n;null==(e=t.editor)||e.on("startDring",(()=>A.value=!0)),null==(n=t.editor)||n.on("endDring",(()=>A.value=!1))}))})),ri((()=>{var e,A;null==(e=t.editor)||e.off("startDring"),null==(A=t.editor)||A.off("endDring")})),(e,t)=>{const i=Gp;return cn(),vn(i,{class:"mr-10px",size:"large",modelValue:fn(A),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(A)?A.value=e:null),width:"60","inline-prompt":"","active-text":e.$t("editor.drag"),"inactive-text":e.$t("editor.drag"),onChange:n},null,8,["modelValue","active-text","inactive-text"])}}},Ak=on({__name:"Zoom",setup(e){const t=sB(),A=()=>{t.editor.one()},n=()=>{t.editor.big()},i=()=>{t.editor.auto()};return(e,t)=>{const r=zt,o=et,s=fA;return cn(),vn(s,null,{default:mn((()=>[Kn(o,{onClick:n},{default:mn((()=>[Kn(r,{extClass:"text-20px",color:"var(--color)",icon:"zoom-big"})])),_:1}),Kn(o,{onClick:A,icon:fn(it)},null,8,["icon"]),Kn(o,{onClick:i},{default:mn((()=>[Kn(r,{extClass:"text-20px",color:"var(--color)",icon:"zoom-small"})])),_:1})])),_:1})}}}),nk=e=>(ji("data-v-760d1fd3"),e=e(),Vi(),e),ik={class:"w-full absolute left-0 right-0 bottom-0"},rk={class:"main-bottom relative bottom-0"},ok={class:"flex justify-between items-start"},sk={class:"flex justify-start items-center"},ak={class:"text-14px h-24px leading-24px"},lk={class:"mr-4px"},ck=nk((()=>pn("span",null,"1/1",-1))),uk={class:"flex justify-end items-center"},hk={key:0,class:"main-panel mt-8px bg-#fff box-border rounded-12px"},dk=[nk((()=>pn("div",{class:"pb-1px mx-6px"}," 1 ",-1)))],fk=ki(on({__name:"index",setup(e){const t=sB(),{panelPositoin:A,showPanel:n,panelType:i}=Pi(t),r=ae((function(e){fn(i)===e?(t.setShowPanel(!fn(n)),"bottom"===fn(A)&&t.setPanelPositoin("left")):(t.setPanelType(e),t.setShowPanel(!0))}),250),o=ae((function(){t.setShowPanel(!fn(n))}),250),s=ae((function(){t.setPanelPositoin("left"===fn(A)?"bottom":"left"),!fn(n)&&t.setShowPanel(!0)}),250);return(e,t)=>{const i=zt,a=eA;return cn(),un("div",ik,[pn("div",rk,[pn("div",ok,[pn("div",sk,[pn("div",{class:"f-center p-5px rounded-6px cursor-pointer bg-#fff",onClick:t[0]||(t[0]=Tn((e=>fn(r)(fn(tB).layer)),["stop"]))},[Kn(i,{icon:"editor-layer",extClass:"text-20px"})]),pn("div",{class:"ml-4px f-center p-4px rounded-6px cursor-pointer bg-#fff panel-canvas",onClick:t[3]||(t[3]=e=>fn(r)(fn(tB).canvas))},[pn("div",ak,[pn("span",lk,yn(e.$t("editor.panel.title")),1),ck]),pn("div",{class:dn(["ml-4px",["bottom"===fn(A)?"rotate-270":""]]),onClick:t[1]||(t[1]=Tn(((...e)=>fn(o)&&fn(o)(...e)),["stop"]))},[Kn(i,{icon:"unfold",extClass:"text-16px"})],2),pn("div",{class:"hidden panel-position items-center",onClick:t[2]||(t[2]=Tn(((...e)=>fn(s)&&fn(s)(...e)),["stop"]))},[Kn(a,{direction:"vertical"}),Kn(i,{class:dn(["bottom"===fn(A)?"rotate-270":""]),icon:"panel-position",extClass:"text-16px"},null,8,["class"])])])]),pn("div",uk,[Kn(fn(tk)),Kn(fn(Ak))])]),"bottom"===fn(A)&&fn(n)?(cn(),un("div",hk,dk)):Pn("",!0)])])}}}),[["__scopeId","data-v-760d1fd3"]]),gk={class:"flex-1 w-full relative overflow-hidden",id:"workspace"},pk={class:"relative"},vk=(e=>(ji("data-v-06a4c87a"),e=e(),Vi(),e))((()=>pn("div",{class:"absolute w-full z-2 inside-shadow"},null,-1))),mk=ki(on({__name:"index",setup(e){const t=sB(),A=En((()=>t.rulerEnable));return(e,t)=>(cn(),un("section",gk,[pn("div",pk,[vk,pn("canvas",{class:dn(["w-300px h-300px mx-auto",fn(A)?"design-stage-grid":""]),id:"canvas"},null,2),Kn(fk)])]))}}),[["__scopeId","data-v-06a4c87a"]]),Bk={key:0,class:"mb-10px attr-item-box"},yk=on({__name:"AttributeId",setup(e){const t=sB(),{isOne:A}=IS(),n=Cn(),i=Vn({id:0,linkData:["",""]}),r=e=>{var A;const n=null==(A=t.canvas)?void 0:A.getActiveObject();e&&e.target&&e.target!==n||n&&(i.id=n.get("id"),i.linkData=n.get("linkData")||["",""])},o=(e,A)=>{var n,i;const r=null==(n=t.canvas)?void 0:n.getActiveObjects()[0];r&&(r&&r.set(e,A),null==(i=t.canvas)||i.renderAll())},s=()=>{var e;null==(e=null==n?void 0:n.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,A,n;r(),null==(e=t.editor)||e.on("selectCancel",s),null==(A=t.editor)||A.on("selectOne",r),null==(n=t.canvas)||n.on("object:modified",r)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",s),null==(A=t.editor)||A.off("selectOne",r),null==(n=t.canvas)||n.off("object:modified",r)})),(e,t)=>{const n=eA,r=Ze,s=xA,a=QA,l=ip,c=np,u=If,h=xf;return fn(A)?(cn(),un("div",Bk,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.data.title")),1)])),_:1}),Kn(a,{"label-width":40,class:"form-wrap"},{default:mn((()=>[Kn(s,{label:e.$t("editor.attrSetting.data.id")},{default:mn((()=>[Kn(r,{modelValue:fn(i).id,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(i).id=e),onChange:t[1]||(t[1]=e=>o("id",fn(i).id)),size:"small"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),Kn(h,{gutter:10},{default:mn((()=>[Kn(u,{span:12},{default:mn((()=>[Kn(c,{modelValue:fn(i).linkData[0],"onUpdate:modelValue":t[2]||(t[2]=e=>fn(i).linkData[0]=e),filterable:"","allow-create":"",placeholder:e.$t("common.placeholder.select"),onChange:t[3]||(t[3]=e=>o("linkData",fn(i).linkData))},{default:mn((()=>[Kn(l,{value:"src"}),Kn(l,{value:"text"})])),_:1},8,["modelValue","placeholder"])])),_:1}),Kn(u,{span:12},{default:mn((()=>[Kn(r,{modelValue:fn(i).linkData[1],"onUpdate:modelValue":t[4]||(t[4]=e=>fn(i).linkData[1]=e),placeholder:e.$t("common.placeholder.input")},null,8,["modelValue","placeholder"])])),_:1})])),_:1})])):Pn("",!0)}}});function Ck(e,t){return void 0===t&&(t=15),+parseFloat(Number(e).toPrecision(t))}function wk(e){var t=e.toString().split(/[eE]/),A=(t[0].split(".")[1]||"").length-+(t[1]||0);return A>0?A:0}function bk(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=wk(e);return t>0?Ck(Number(e)*Math.pow(10,t)):Number(e)}function xk(e){Fk&&(e>Number.MAX_SAFE_INTEGER||Number.MIN_SAFE_INTEGER)}function Qk(e){return function(){for(var t=[],A=0;A<arguments.length;A++)t[A]=arguments[A];var n=t[0];return t.slice(1).reduce((function(t,A){return e(t,A)}),n)}}var Ek=Qk((function(e,t){var A=bk(e),n=bk(t),i=wk(e)+wk(t),r=A*n;return xk(r),r/Math.pow(10,i)})),Ik=Qk((function(e,t){var A=Math.pow(10,Math.max(wk(e),wk(t)));return(Ek(e,A)+Ek(t,A))/A})),_k=Qk((function(e,t){var A=Math.pow(10,Math.max(wk(e),wk(t)));return(Ek(e,A)-Ek(t,A))/A})),Sk=Qk((function(e,t){var A=bk(e),n=bk(t);return xk(A),xk(n),Ek(A/n,Ck(Math.pow(10,wk(t)-wk(e))))}));var Fk=!0;var kk={strip:Ck,plus:Ik,minus:_k,times:Ek,divide:Sk,round:function(e,t){var A=Math.pow(10,t),n=Sk(Math.round(Math.abs(Ek(e,A))),A);return e<0&&0!==n&&(n=Ek(n,-1)),n},digitLength:wk,float2Fixed:bk,enableBoundaryChecking:function(e){void 0===e&&(e=!0),Fk=e}};const Uk=["aria-valuemax","aria-valuemin","aria-valuenow","value","disabled","autofocus","readonly","placeholder"],Ok="asa-input-number",Dk=ki(on({__name:"InputNumber",props:{autofocus:{type:Boolean},parser:{},formatter:{},min:{default:-1/0},max:{default:1/0},precision:{default:2},step:{default:1},modelValue:{},defaultValue:{},modelEvent:{default:"change"},controlsOutside:{type:Boolean},hideButton:{type:Boolean},downDisabled:{type:Boolean},upDisabled:{type:Boolean},size:{default:"default"},disabled:{type:Boolean},readonly:{type:Boolean},placeholder:{},append:{},prepend:{}},emits:["update:modelValue","on-change","on-focus","on-blur","on-input"],setup(e,{expose:t,emit:A}){var n;kk.enableBoundaryChecking(!1);const i=e,r=A,o=sn(`${Ok}-input-wrap`),s=sn(`${Ok}-input`),a=sn(`${Ok}-handler-wrap`),l=sn([`${Ok}-handler`,`${Ok}-handler-up`,{[`${Ok}-handler-up-disabled`]:i.upDisabled}]),c=sn([`${Ok}-handler`,`${Ok}-handler-down`,{[`${Ok}-handler-down-disabled`]:i.downDisabled}]),u=sn(!1),h=En((()=>[`${Ok}`,{[`${Ok}-${i.size}`]:!!i.size,[`${Ok}-disabled`]:i.disabled,[`${Ok}-focused`]:u.value,[`${Ok}-controls-outside`]:i.controlsOutside}])),d=sn(),f=En((()=>{if(Yl(i.precision)){const e=`${i.step}`.split(".")[1],t=e&&e.length||0;return Math.max(t,i.precision)}})),g=e=>{var t,A;if(!Yl(e))return"";const n=f.value?e.toFixed(f.value).replace(/\.?0+$/,""):String(e);return null!=(A=null==(t=i.formatter)?void 0:t.call(i,n))?A:n},p=sn(g(null!=(n=i.modelValue)?n:i.defaultValue)),v=e=>{u.value=!0,r("on-focus",e)},m=e=>{u.value=!1,r("on-blur",e)},B=e=>{E(e,"minus",!0)},y=e=>{E(e,"plus",!0)},C=e=>{"ArrowUp"===e.key?(e.preventDefault(),!i.readonly&&w("plus",e)):"ArrowDown"===e.key&&(e.preventDefault(),!i.readonly&&w("minus",e))},w=(e,t)=>{if("plus"===e&&(S.value||i.upDisabled)||"minus"===e&&(_.value||i.downDisabled))return;let A;A=Yl(I.value)?U(kk[e](I.value,i.step)):i.min===-1/0?0:i.min,p.value=g(A),F(A),r("update:modelValue",A),r("on-change",A,t)};let b=0;const x=()=>{b&&(window.clearTimeout(b),b=0)},Q={onMouseup:x,onMouseleave:x},E=(e,t,A=!1)=>{var n;e.preventDefault(),null==(n=d.value)||n.focus(),w(t,e),A&&(b=window.setTimeout((()=>e.target.dispatchEvent(e)),150))},I=En((()=>{var e,t;if(!p.value)return;const A=Number(null!=(t=null==(e=i.parser)?void 0:e.call(i,p.value))?t:p.value);return Number.isNaN(A)?void 0:A})),_=sn(Yl(I.value)&&I.value<=i.min),S=sn(Yl(I.value)&&I.value>=i.max),F=e=>{let t=!1,A=!1;Yl(e)&&(e<=i.min&&(t=!0),e>=i.max&&(A=!0)),S.value!==A&&(S.value=A),_.value!==t&&(_.value=t)},k=e=>{var t,A,n,o;let{value:s}=e.target;s=s.trim().replace(/。/g,"."),s=null!=(A=null==(t=i.parser)?void 0:t.call(i,s))?A:s,(Yl(Number(s))||/^(\.|-)$/.test(s))&&(p.value=null!=(o=null==(n=i.formatter)?void 0:n.call(i,s))?o:s,F(I.value),"input"===i.modelEvent&&r("update:modelValue",I.value),r("on-input",I.value,p.value,e))},U=e=>{if(!pe(e))return Yl(i.min)&&e<i.min&&(e=i.min),Yl(i.max)&&e>i.max&&(e=i.max),Yl(f.value)?kk.round(e,f.value):e},O=e=>{const t=U(I.value),A=g(t);t===I.value&&p.value===A||(p.value=A,F(t)),_n((()=>{Yl(i.modelValue)&&i.modelValue!==t&&(p.value=g(i.modelValue),F(i.modelValue))})),r("update:modelValue",t),r("on-change",t,e)},D=()=>{const e=U(I.value),t=g(e);e===I.value&&p.value===t||(p.value=t),r("update:modelValue",e)},T=sn(),M=sn(),L=e=>{const t=sn(),{posStart:A,posEnd:n}=Km(e,{threshold:0,onSwipeStart:()=>{t.value=I.value},onSwipe:e=>{if(!Yl(t.value))return;const r=t.value+kk.round(n.x-A.x,0)*i.step;p.value=g(r),"input"===i.modelEvent?k(e):O(e)}})};return ln((()=>{T.value&&L(T),M.value&&L(M)})),In((()=>i.modelValue),(e=>{e!==I.value&&(p.value=g(e),F(e))})),In((()=>i.min),(e=>{const t=Yl(I.value)&&I.value<=e;_.value!==t&&(_.value=t);Yl(I.value)&&I.value<e&&D()})),In((()=>i.max),(e=>{const t=Yl(I.value)&&I.value>=e;S.value!==t&&(S.value=t);Yl(I.value)&&I.value>e&&D()})),t({minus:B,plus:y,input:d.value,focus:()=>{var e;null==(e=d.value)||e.focus()},blur:()=>{var e;null==(e=d.value)||e.blur()}}),(e,t)=>{const A=Ee;return cn(),un("div",{class:dn(fn(h))},[e.controlsOutside?(cn(),un(Ln,{key:0},[pn("div",Yn({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":e.downDisabled}],onMousedown:B},Q),null,16),pn("div",Yn({class:["el-input-number--default is-controls-right el-input-number--default is-controls-right",{"el-input-number--default is-controls-right":e.upDisabled}],onMousedown:y},Q)," 2 ",16)],64)):e.hideButton?Pn("",!0):(cn(),un("div",{key:1,class:dn(fn(a))},[pn("a",Yn({class:fn(l),onMousedown:y},Q),[pn("span",null,[Kn(A,{size:"12px",color:"#999"},{default:mn((()=>[Kn(fn(Bt))])),_:1})])],16),pn("a",Yn({class:fn(c),onMousedown:B},Q),[pn("span",null,[Kn(A,{size:"12px",color:"#999"},{default:mn((()=>[Kn(fn(tt))])),_:1})])],16)],2)),pn("div",{class:dn(fn(o))},[e.$slots.prefix?hn(e.$slots,"prefix",{key:0},void 0,!0):e.append?(cn(),un("label",{key:1,ref_key:"appendLabelRef",ref:T,class:dn(`${fn(o)}__label`)},yn(e.append),3)):Pn("",!0),pn("input",{ref_key:"inputRef",ref:d,type:"text",autocomplete:"off",spellcheck:"false",role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":fn(p),value:fn(p),class:dn(fn(s)),disabled:e.disabled,autofocus:e.autofocus,readonly:e.readonly,placeholder:e.placeholder,onFocus:v,onBlur:m,onInput:k,onChange:O,onKeydown:C},null,42,Uk),e.$slots.suffix?hn(e.$slots,"suffix",{key:2},void 0,!0):e.prepend?(cn(),un("label",{key:3,ref_key:"prependLabelRef",ref:M,class:dn(`${fn(o)}__label`)},yn(e.prepend),3)):Pn("",!0)],2)],2)}}}),[["__scopeId","data-v-d655ccac"]]),Tk={key:0,class:"box attr-item-box"},Mk=on({__name:"AttributeRounded",setup(e){const t=sB(),A=Cn(),{isOne:n,isMatchType:i}=IS(["rect"]),r=Vn({rx:0,ry:0}),o=e=>{var A;const n=null==(A=t.canvas)?void 0:A.getActiveObject();e&&e.target&&e.target!==n||n&&(r.rx=n.get("rx"),r.ry=n.get("ry"))},s=e=>{const A=t.canvas.getActiveObjects()[0];A&&(A.set("ry",e),A.set("rx",e),t.canvas.renderAll())},a=()=>{var e;null==(e=null==A?void 0:A.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,A,n;o(),null==(e=t.editor)||e.on("selectCancel",a),null==(A=t.editor)||A.on("selectOne",o),null==(n=t.canvas)||n.on("object:modified",o)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",a),null==(A=t.editor)||A.off("selectOne",o),null==(n=t.canvas)||n.off("object:modified",o)})),(e,t)=>{const A=eA,o=Tp,a=xA,l=QA,c=If,u=xf;return fn(n)&&fn(i)?(cn(),un("div",Tk,[Kn(A,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.radius.name")),1)])),_:1}),pn("div",null,[Kn(u,{gutter:10},{default:mn((()=>[Kn(c,{span:18,flex:"1"},{default:mn((()=>[Kn(l,{"label-width":40,class:"form-wrap"},{default:mn((()=>[Kn(a,{label:e.$t("editor.attrSetting.radius.radius")},{default:mn((()=>[Kn(o,{modelValue:fn(r).rx,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(r).rx=e),max:300,onInput:t[1]||(t[1]=e=>s(e))},null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1}),Kn(c,{span:6,flex:"1"},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(r).rx,"onUpdate:modelValue":t[2]||(t[2]=e=>fn(r).rx=e),min:0,max:300,onOnChange:t[3]||(t[3]=e=>s(e))},null,8,["modelValue"])])),_:1})])),_:1})])])):Pn("",!0)}}}),Lk={key:0,class:"attr-item-box"},Hk={class:"number-warp"},Pk={class:"label",style:{"margin-right":"10px"}},Rk={style:{flex:"1"}},Nk={class:"number-warp"},jk={style:{flex:"0 0 48px","font-size":"var(--el-form-label-font-size)",color:"var(--el-text-color-regular)"}},Vk={class:"content"},Kk=ki(on({__name:"AttributeBorder",setup(e){const{isOne:t,isGroup:A}=IS(),n=sB(),i=Cn(),r=["group"],o=Vn({stroke:"#fff",strokeWidth:0,strokeDashArray:[]}),s=[{value:{strokeUniform:!0,strokeDashArray:[],strokeLineCap:"butt"},label:"Stroke"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"butt"},label:"Dash-1"},{value:{strokeUniform:!0,strokeDashArray:[1,10],strokeLineCap:"round"},label:"Dash-2"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"square"},label:"Dash-3"},{value:{strokeUniform:!0,strokeDashArray:[15,15],strokeLineCap:"round"},label:"Dash-4"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"square"},label:"Dash-5"},{value:{strokeUniform:!0,strokeDashArray:[25,25],strokeLineCap:"round"},label:"Dash-6"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"square"},label:"Dash-7"},{value:{strokeUniform:!0,strokeDashArray:[1,8,16,8,1,20],strokeLineCap:"round"},label:"Dash-8"}],a=e=>{var t;const A=null==(t=n.canvas)?void 0:t.getActiveObject();if((!e||!e.target||e.target===A)&&A&&!r.includes(A.type)){o.stroke=A.get("stroke"),o.strokeWidth=A.get("strokeWidth");const e=JSON.stringify(A.get("strokeDashArray")||[]),t=s.find((t=>JSON.stringify(t.value.strokeDashArray)===e&&A.get("strokeLineCap")===t.value.strokeLineCap));t&&(o.strokeDashArray=t.label)}},l=(e,t)=>{var A,i;const r=null==(A=n.canvas)?void 0:A.getActiveObjects()[0];r&&(r.set(e,t),r.set("strokeUniform",!0),null==(i=n.canvas)||i.renderAll())},c=e=>{var t,A;const i=null==(t=n.canvas)?void 0:t.getActiveObjects()[0];if(i){const t=s.find((t=>t.label===e));i.set(t.value),null==(A=n.canvas)||A.renderAll()}},u=()=>{var e;null==(e=null==i?void 0:i.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,t,A;a(),null==(e=n.editor)||e.on("selectCancel",u),null==(t=n.editor)||t.on("selectOne",a),null==(A=n.canvas)||A.on("object:modified",a)}))})),ri((()=>{var e,t,A;null==(e=n.editor)||e.off("selectCancel",u),null==(t=n.editor)||t.off("selectOne",a),null==(A=n.canvas)||A.off("object:modified",a)})),(e,n)=>{const i=eA,r=Cg,a=If,u=xf,h=ip,d=np;return fn(t)&&!fn(A)?(cn(),un("div",Lk,[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.border.title")),1)])),_:1}),pn("div",null,[Kn(u,{gutter:12,style:{"margin-right":"10px"}},{default:mn((()=>[Kn(a,{span:12},{default:mn((()=>[pn("div",Hk,[pn("span",Pk,yn(e.$t("editor.attrSetting.color")),1),pn("div",Rk,[Kn(r,{modelValue:fn(o).stroke,"onUpdate:modelValue":n[0]||(n[0]=e=>fn(o).stroke=e),onChange:n[1]||(n[1]=e=>l("stroke",e)),"show-alpha":""},null,8,["modelValue"])])])])),_:1}),Kn(a,{span:12},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(o).strokeWidth,"onUpdate:modelValue":n[2]||(n[2]=e=>fn(o).strokeWidth=e),onOnChange:n[3]||(n[3]=e=>l("strokeWidth",e)),append:e.$t("editor.attrSetting.border.width"),min:0},null,8,["modelValue","append"])])),_:1})])),_:1}),pn("div",Nk,[pn("span",jk,yn(e.$t("editor.attrSetting.border.stroke")),1),pn("div",Vk,[Kn(d,{modelValue:fn(o).strokeDashArray,"onUpdate:modelValue":n[4]||(n[4]=e=>fn(o).strokeDashArray=e),onChange:c},{default:mn((()=>[(cn(),un(Ln,null,Zn(s,(e=>Kn(h,{value:e.label,label:e.label,key:`stroke-${e.label}`},{default:mn((()=>[Hn(yn(e.label),1)])),_:2},1032,["value","label"]))),64))])),_:1},8,["modelValue"])])])])])):Pn("",!0)}}}),[["__scopeId","data-v-f2aaa9de"]]),Gk={key:0,class:"box attr-item-box"},Yk={class:"f-center rounded-4px",style:{background:"#f8f8f9"}},Xk={class:"label"},zk={class:"content"},Wk=ki(on({__name:"AttributeShadow",setup(e){const t=sB(),{isOne:A}=IS(),n=Cn(),i=Vn({shadow:{}}),r=e=>{var A;const n=null==(A=t.canvas)?void 0:A.getActiveObject();e&&e.target&&e.target!==n||n&&(i.shadow=n.get("shadow")||{})},o=()=>{var e,A;const n=null==(e=t.canvas)?void 0:e.getActiveObjects()[0];n&&(n.set("shadow",new wv.fabric.Shadow(i.shadow)),null==(A=t.canvas)||A.renderAll())},s=()=>{var e;null==(e=null==n?void 0:n.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,A,n;r(),null==(e=t.editor)||e.on("selectCancel",s),null==(A=t.editor)||A.on("selectOne",r),null==(n=t.canvas)||n.on("object:modified",r)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",s),null==(A=t.editor)||A.off("selectOne",r),null==(n=t.canvas)||n.off("object:modified",r)})),(e,t)=>{const n=eA,r=Cg,s=If,a=xf;return fn(A)?(cn(),un("div",Gk,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.shadow.title")),1)])),_:1}),Kn(a,{gutter:12,style:{"margin-bottom":"10px"}},{default:mn((()=>[Kn(s,{span:12},{default:mn((()=>[pn("div",Yk,[pn("span",Xk,yn(e.$t("editor.attrSetting.color")),1),pn("div",zk,[Kn(r,{modelValue:fn(i).shadow.color,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(i).shadow.color=e),onChange:o,alpha:""},null,8,["modelValue"])])])])),_:1}),Kn(s,{span:12},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(i).shadow.blur,"onUpdate:modelValue":t[1]||(t[1]=e=>fn(i).shadow.blur=e),defaultValue:0,onOnChange:o,append:e.$t("editor.attrSetting.shadow.blur"),min:0},null,8,["modelValue","append"])])),_:1})])),_:1}),Kn(a,{gutter:12},{default:mn((()=>[Kn(s,{span:12},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(i).shadow.offsetX,"onUpdate:modelValue":t[2]||(t[2]=e=>fn(i).shadow.offsetX=e),defaultValue:0,onOnChange:o,append:e.$t("editor.attrSetting.shadow.x")},null,8,["modelValue","append"])])),_:1}),Kn(s,{span:12},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(i).shadow.offsetY,"onUpdate:modelValue":t[3]||(t[3]=e=>fn(i).shadow.offsetY=e),defaultValue:0,onOnChange:o,append:e.$t("editor.attrSetting.shadow.y")},null,8,["modelValue","append"])])),_:1})])),_:1})])):Pn("",!0)}}}),[["__scopeId","data-v-352190d9"]]),$k={key:0,class:"box attr-item-box"},Jk={class:"number-warp"},qk={class:"number-warp"},Zk=ki(on({__name:"AttributePostion",setup(e){const t=sB(),A=Cn(),{isMatchType:n,isOne:i}=IS(["text","i-text","textbox","rect","circle","triangle","polygon","image","group","line","arrow","thinTailArrow"]),r=Vn({opacity:0,angle:0,left:0,top:0,rx:0,ry:0}),o=e=>{var A,i;const o=null==(A=t.canvas)?void 0:A.getActiveObject();e&&e.target&&e.target!==o||o&&n&&(r.opacity=100*(null!=(i=o.get("opacity"))?i:0),r.left=o.get("left"),r.top=o.get("top"),r.angle=o.get("angle")||0)},s=(e,A)=>{var n,i,r,o;const s=null==(n=t.canvas)?void 0:n.getActiveObjects()[0];if(s){if("opacity"===e)return s&&s.set(e,A/100),void(null==(i=t.canvas)||i.renderAll());if("angle"===e)return s.rotate(A),void(null==(r=t.canvas)||r.renderAll());s&&s.set(e,A),null==(o=t.canvas)||o.renderAll()}},a=()=>{var e;null==(e=null==A?void 0:A.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,A,n;o(),null==(e=t.editor)||e.on("selectCancel",a),null==(A=t.editor)||A.on("selectOne",o),null==(n=t.canvas)||n.on("object:modified",o)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",a),null==(A=t.editor)||A.off("selectOne",o),null==(n=t.canvas)||n.off("object:modified",o)})),(e,t)=>{const A=eA,o=If,a=xf,l=Tp;return fn(i)?(cn(),un("div",$k,[Kn(A,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.position.title")),1)])),_:1}),On(pn("div",null,[Kn(a,{gutter:10,style:{"margin-bottom":"10px"}},{default:mn((()=>[Kn(o,{span:12},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(r).left,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(r).left=e),append:e.$t("editor.attrSetting.position.x"),onOnChange:t[1]||(t[1]=e=>s("left",e))},null,8,["modelValue","append"])])),_:1}),Kn(o,{span:12},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(r).left,"onUpdate:modelValue":t[2]||(t[2]=e=>fn(r).left=e),append:e.$t("editor.attrSetting.position.y"),onOnChange:t[3]||(t[3]=e=>s("top",e))},null,8,["modelValue","append"])])),_:1})])),_:1}),pn("div",Jk,[pn("span",null,yn(e.$t("editor.attrSetting.position.rotate")),1),Kn(l,{modelValue:fn(r).angle,"onUpdate:modelValue":t[4]||(t[4]=e=>fn(r).angle=e),max:360,onInput:t[5]||(t[5]=e=>s("angle",e))},null,8,["modelValue"])]),pn("div",qk,[pn("span",null,yn(e.$t("editor.attrSetting.position.opacity")),1),Kn(l,{modelValue:fn(r).opacity,"onUpdate:modelValue":t[6]||(t[6]=e=>fn(r).opacity=e),onInput:t[7]||(t[7]=e=>s("opacity",e))},null,8,["modelValue"])])],512),[[Wn,fn(n)]])])):Pn("",!0)}}}),[["__scopeId","data-v-859c73ed"]]),eU={key:0,class:"box attr-item-box"},tU={class:"ivu-col__box"},AU={class:"label"},nU={class:"content"},iU=on({__name:"AttributeTextContent",setup(e){const{isOne:t,isMatchType:A}=IS(["i-text"]),n=sB(),i=Cn(),r=Vn({text:"",strokeWidth:1,stroke:"",showPathAttr:!1}),o=e=>{var t;const A=null==(t=n.canvas)?void 0:t.getActiveObject();if((!e||!e.target||e.target===A)&&A){r.text=A.get("text");const e=A.get("path");e?(r.strokeWidth=e.strokeWidth,r.stroke=e.stroke,r.showPathAttr=!0):r.showPathAttr=!1}},s=(e,t)=>{var A,i;const o=null==(A=n.canvas)?void 0:A.getActiveObjects()[0];if(o){if(r[e]=t,"text"===e)o.set(e,t);else{o.get("path").set(e,t)}null==(i=n.canvas)||i.renderAll()}},a=()=>{var e;null==(e=null==i?void 0:i.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,t,A;null==(e=n.editor)||e.on("selectCancel",a),null==(t=n.editor)||t.on("selectOne",o),null==(A=n.canvas)||A.on("object:modified",o)}))})),ri((()=>{var e,t,A;null==(e=n.editor)||e.off("selectCancel",a),null==(t=n.editor)||t.off("selectOne",o),null==(A=n.canvas)||A.off("object:modified",o)})),(e,n)=>{const i=eA,o=Ze,a=xA,l=QA,c=Cg,u=If,h=xf;return fn(t)&&fn(A)?(cn(),un("div",eU,[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.text.content")),1)])),_:1}),Kn(l,{"label-width":40,class:"form-wrap"},{default:mn((()=>[Kn(a,{label:e.$t("editor.attributes.id")},{default:mn((()=>[Kn(o,{modelValue:fn(r).text,"onUpdate:modelValue":n[0]||(n[0]=e=>fn(r).text=e),onChange:n[1]||(n[1]=e=>s("text",fn(r).text)),size:"small"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),fn(r).showPathAttr?(cn(),un(Ln,{key:0},[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.text.path")),1)])),_:1}),pn("div",null,[Kn(h,{gutter:12},{default:mn((()=>[Kn(u,{flex:"1"},{default:mn((()=>[pn("div",tU,[pn("span",AU,yn(e.$t("editor.color")),1),pn("div",nU,[Kn(c,{modelValue:fn(r).stroke,"onUpdate:modelValue":n[2]||(n[2]=e=>fn(r).stroke=e),onChange:n[3]||(n[3]=e=>s("stroke",e)),"show-alpha":""},null,8,["modelValue"])])])])),_:1}),Kn(u,{flex:"1"},{default:mn((()=>[Kn(fn(Dk),{modelValue:fn(r).strokeWidth,"onUpdate:modelValue":n[4]||(n[4]=e=>fn(r).strokeWidth=e),onOnChange:n[5]||(n[5]=e=>s("strokeWidth",e)),append:e.$t("editor.width"),min:0},null,8,["modelValue","append"])])),_:1})])),_:1})])],64)):Pn("",!0)])):Pn("",!0)}}}),rU={key:0,class:"attr-item-box"},oU={class:"flex-view"},sU={class:"flex-item"},aU={class:"label"},lU={class:"flex-1"},cU=ki(on({__name:"AttributeTextFloat",setup(e){const t=sB(),A=Vn({verticalAlign:"null"}),{isMatchType:n,isOne:i}=IS(["i-text","textbox","text"]),r=e=>{var i,r;const o=null==(i=t.canvas)?void 0:i.getActiveObject();e&&e.target&&e.target!==o||o&&n&&(null==(r=null==o?void 0:o.text)?void 0:r.includes("."))&&(A.verticalAlign=o.get("verticalAlign"))},o=Cn(),s=()=>{var e;null==(e=null==o?void 0:o.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,A,n;r(),null==(e=t.editor)||e.on("selectCancel",s),null==(A=t.editor)||A.on("selectOne",r),null==(n=t.canvas)||n.on("object:modified",r)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",s),null==(A=t.editor)||A.off("selectOne",r),null==(n=t.canvas)||n.off("object:modified",r)})),(e,r)=>{const o=ip,s=np;return fn(i)&&fn(n)?(cn(),un("div",rU,[pn("div",oU,[pn("div",sU,[pn("span",aU,yn(e.$t("editor.attrSetting.font.decimals")),1),pn("div",lU,[Kn(s,{modelValue:fn(A).verticalAlign,"onUpdate:modelValue":r[0]||(r[0]=e=>fn(A).verticalAlign=e),onChange:r[1]||(r[1]=e=>((e,A)=>{var n,i;const r=null==(n=t.canvas)?void 0:n.getActiveObjects()[0];if(r&&r.text.includes(".")){const[n]=r.text.split("."),o=n.length+1,s=r.text.length;r.styles=[],"top"===A?r.setSuperscript(o,s):"bottom"===A&&r.setSelectionStyles({fontSize:r.superscript.size*r.fontSize},o,s),r.set(e,A),null==(i=t.canvas)||i.renderAll()}})("verticalAlign",e))},{default:mn((()=>[Kn(o,{label:e.$t("editor.attrSetting.font.decimalsOptions.none"),value:"null"},null,8,["label"]),Kn(o,{label:e.$t("editor.attrSetting.font.decimalsOptions.bottom"),value:"bottom"},null,8,["label"]),Kn(o,{label:e.$t("editor.attrSetting.font.decimalsOptions.top"),value:"top"},null,8,["label"])])),_:1},8,["modelValue"])])])])])):Pn("",!0)}}}),[["__scopeId","data-v-563b2d07"]]),uU={key:0,class:"box attr-item-box"},hU={class:"flex-view"},dU={class:"flex-item"},fU={class:"left font-selector"},gU={style:{display:"none"}},pU={class:"right"},vU={class:"flex-view",style:{"margin-bottom":"0"}},mU={class:"flex-item"},BU={class:"flex-view"},yU={class:"flex-item"},CU={viewBox:"0 0 1024 1024",width:"14",height:"14"},wU={class:"flex-view"},bU={class:"right"},xU={class:"right"},QU={class:"flex-view"},EU={class:"flex-item"},IU={class:"label"},_U={class:"content"},SU=on({__name:"AttributeFont",setup(e){var t;const A=sB(),{isMatchType:n,isOne:i}=IS(["i-text","textbox","text"]),r=Cn(),o=Vn({fontSize:0,fontFamily:"",lineHeight:0,charSpacing:0,fontWeight:"",textBackgroundColor:"#fff",textAlign:"",fontStyle:"",underline:!1,linethrough:!1,overline:!1}),s=sn([]);null==(t=A.editor)||t.getFontList().then((e=>{s.value=e}));const a=["left","center","right","justify"],l=["text-align-left","text-align-center","text-align-right","text-align-justitfy"],c=e=>{var t;const i=null==(t=A.canvas)?void 0:t.getActiveObject();e&&e.target&&e.target!==i||i&&n&&(o.fontSize=i.get("fontSize"),o.fontFamily=i.get("fontFamily"),o.lineHeight=i.get("lineHeight"),o.textAlign=i.get("textAlign"),o.underline=i.get("underline"),o.linethrough=i.get("linethrough"),o.charSpacing=i.get("charSpacing"),o.overline=i.get("overline"),o.fontStyle=i.get("fontStyle"),o.textBackgroundColor=i.get("textBackgroundColor"),o.fontWeight=i.get("fontWeight"))},h=(e,t)=>{var n,i;const r=null==(n=A.canvas)?void 0:n.getActiveObjects()[0];r&&(r&&r.set(e,t),null==(i=A.canvas)||i.renderAll())},d=()=>{var e;null==(e=null==r?void 0:r.proxy)||e.$forceUpdate()},f=e=>u(this,null,(function*(){if(!e)return;const t=$t.service();A.editor.loadFont(e).finally((()=>t.close()))}));return ln((()=>{_n((()=>{var e,t,n;c(),null==(e=A.editor)||e.on("selectCancel",d),null==(t=A.editor)||t.on("selectOne",c),null==(n=A.canvas)||n.on("object:modified",c)}))})),ri((()=>{var e,t,n;null==(e=A.editor)||e.off("selectCancel",d),null==(t=A.editor)||t.off("selectOne",c),null==(n=A.canvas)||n.off("object:modified",c)})),(e,t)=>{const r=eA,c=ip,u=np,d=zt,g=pf,p=gf,v=et,m=fA,B=Cg;return fn(i)&&fn(n)?(cn(),un("div",uU,[Kn(r,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.font.title")),1)])),_:1}),pn("div",null,[pn("div",hU,[pn("div",dU,[pn("div",fU,[Kn(u,{modelValue:fn(o).fontFamily,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(o).fontFamily=e),onChange:f},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(s),(e=>(cn(),vn(c,{value:e.name,label:e.name,key:`font-${e.name}`},{default:mn((()=>[pn("div",{class:"font-item",style:Rn(`background-image:url('${e.img}');height: 100%;background-size: 100% 100%;`)},[Hn(yn(e.img?"":e)+" ",1),pn("span",gU,yn(e.name),1)],4)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue"])]),pn("div",pU,[Kn(fn(Dk),{modelValue:fn(o).fontSize,"onUpdate:modelValue":t[1]||(t[1]=e=>fn(o).fontSize=e),onOnChange:t[2]||(t[2]=e=>h("fontSize",e)),append:e.$t("editor.attrSetting.font.fontSize"),min:1},null,8,["modelValue","append"])])])]),pn("div",vU,[pn("div",mU,[Kn(p,{class:"button-group",modelValue:fn(o).textAlign,"onUpdate:modelValue":t[3]||(t[3]=e=>fn(o).textAlign=e),onChange:t[4]||(t[4]=e=>h("textAlign",e)),type:"button"},{default:mn((()=>[(cn(),un(Ln,null,Zn(a,((e,t)=>Kn(g,{label:e,value:e,key:e},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:l[t]},null,8,["icon"])])),_:2},1032,["label","value"]))),64))])),_:1},8,["modelValue"])])]),pn("div",BU,[pn("div",yU,[Kn(m,{class:"button-group"},{default:mn((()=>[Kn(v,{style:{width:"25%"},onClick:t[5]||(t[5]=e=>((e,t)=>{var n,i;const r="normal"===t?"bold":"normal";o.fontWeight=r;const s=null==(n=A.canvas)?void 0:n.getActiveObjects()[0];s&&s.set(e,r),null==(i=A.canvas)||i.renderAll()})("fontWeight",fn(o).fontWeight))},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"atb-fontWeight"})])),_:1}),Kn(v,{style:{width:"25%"},onClick:t[6]||(t[6]=e=>((e,t)=>{var n,i;const r="normal"===t?"italic":"normal";o.fontStyle=r;const s=null==(n=A.canvas)?void 0:n.getActiveObjects()[0];s&&s.set(e,r),null==(i=A.canvas)||i.renderAll()})("fontStyle",fn(o).fontStyle))},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"atb-fontStyle"})])),_:1}),Kn(v,{style:{width:"25%"},onClick:t[7]||(t[7]=e=>((e,t)=>{var n,i;const r=!1===t;o.linethrough=r;const s=null==(n=A.canvas)?void 0:n.getActiveObjects()[0];s&&s.set(e,r),null==(i=A.canvas)||i.renderAll()})("linethrough",fn(o).linethrough))},{default:mn((()=>[Kn(d,{extClass:"text-20px",color:"#fff",icon:"atb-linethrough"})])),_:1}),Kn(v,{style:{width:"25%"},onClick:t[8]||(t[8]=e=>((e,t)=>{var n,i;const r=!1===t;o.underline=r;const s=null==(n=A.canvas)?void 0:n.getActiveObjects()[0];s&&s.set(e,r),null==(i=A.canvas)||i.renderAll()})("underline",fn(o).underline))},{default:mn((()=>[(cn(),un("svg",CU,[Kn(d,{extClass:"text-20px",color:"#fff",icon:"atb-underline"})]))])),_:1})])),_:1})])]),pn("div",wU,[pn("div",bU,[Kn(fn(Dk),{modelValue:fn(o).lineHeight,"onUpdate:modelValue":t[9]||(t[9]=e=>fn(o).lineHeight=e),onOnChange:t[10]||(t[10]=e=>h("lineHeight",e)),step:.1,append:e.$t("editor.attrSetting.font.lineHeight")},null,8,["modelValue","append"])]),pn("div",xU,[Kn(fn(Dk),{modelValue:fn(o).charSpacing,"onUpdate:modelValue":t[11]||(t[11]=e=>fn(o).charSpacing=e),onOnChange:t[12]||(t[12]=e=>h("charSpacing",e)),append:e.$t("editor.attrSetting.font.space")},null,8,["modelValue","append"])])]),pn("div",QU,[pn("div",EU,[pn("span",IU,yn(e.$t("editor.attrSetting.font.background")),1),pn("div",_U,[Kn(B,{modelValue:fn(o).textBackgroundColor,"onUpdate:modelValue":t[13]||(t[13]=e=>fn(o).textBackgroundColor=e),onChange:t[14]||(t[14]=e=>h("textBackgroundColor",e)),"show-alpha":""},null,8,["modelValue"])])])])])])):Pn("",!0)}}}),FU=ki(SU,[["__scopeId","data-v-6d09c3df"]]);function kU(e){return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var UU=/^\s+/,OU=/\s+$/;function DU(e,t){if(t=t||{},(e=e||"")instanceof DU)return e;if(!(this instanceof DU))return new DU(e,t);var A=function(e){var t={r:0,g:0,b:0},A=1,n=null,i=null,r=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(UU,"").replace(OU,"").toLowerCase();var t,A=!1;if(JU[e])e=JU[e],A=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=cO.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=cO.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=cO.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=cO.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=cO.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=cO.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=cO.hex8.exec(e))return{r:AO(t[1]),g:AO(t[2]),b:AO(t[3]),a:oO(t[4]),format:A?"name":"hex8"};if(t=cO.hex6.exec(e))return{r:AO(t[1]),g:AO(t[2]),b:AO(t[3]),format:A?"name":"hex"};if(t=cO.hex4.exec(e))return{r:AO(t[1]+""+t[1]),g:AO(t[2]+""+t[2]),b:AO(t[3]+""+t[3]),a:oO(t[4]+""+t[4]),format:A?"name":"hex8"};if(t=cO.hex3.exec(e))return{r:AO(t[1]+""+t[1]),g:AO(t[2]+""+t[2]),b:AO(t[3]+""+t[3]),format:A?"name":"hex"};return!1}(e));"object"==kU(e)&&(uO(e.r)&&uO(e.g)&&uO(e.b)?(a=e.r,l=e.g,c=e.b,t={r:255*eO(a,255),g:255*eO(l,255),b:255*eO(c,255)},o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):uO(e.h)&&uO(e.s)&&uO(e.v)?(n=iO(e.s),i=iO(e.v),t=function(e,t,A){e=6*eO(e,360),t=eO(t,100),A=eO(A,100);var n=Math.floor(e),i=e-n,r=A*(1-t),o=A*(1-i*t),s=A*(1-(1-i)*t),a=n%6,l=[A,o,r,r,s,A][a],c=[s,A,A,o,r,r][a],u=[r,r,s,A,A,o][a];return{r:255*l,g:255*c,b:255*u}}(e.h,n,i),o=!0,s="hsv"):uO(e.h)&&uO(e.s)&&uO(e.l)&&(n=iO(e.s),r=iO(e.l),t=function(e,t,A){var n,i,r;function o(e,t,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?e+6*(t-e)*A:A<.5?t:A<2/3?e+(t-e)*(2/3-A)*6:e}if(e=eO(e,360),t=eO(t,100),A=eO(A,100),0===t)n=i=r=A;else{var s=A<.5?A*(1+t):A+t-A*t,a=2*A-s;n=o(a,s,e+1/3),i=o(a,s,e),r=o(a,s,e-1/3)}return{r:255*n,g:255*i,b:255*r}}(e.h,n,r),o=!0,s="hsl"),e.hasOwnProperty("a")&&(A=e.a));var a,l,c;return A=ZU(A),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:A}}(e);this._originalInput=e,this._r=A.r,this._g=A.g,this._b=A.b,this._a=A.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||A.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=A.ok}function TU(e,t,A){e=eO(e,255),t=eO(t,255),A=eO(A,255);var n,i,r=Math.max(e,t,A),o=Math.min(e,t,A),s=(r+o)/2;if(r==o)n=i=0;else{var a=r-o;switch(i=s>.5?a/(2-r-o):a/(r+o),r){case e:n=(t-A)/a+(t<A?6:0);break;case t:n=(A-e)/a+2;break;case A:n=(e-t)/a+4}n/=6}return{h:n,s:i,l:s}}function MU(e,t,A){e=eO(e,255),t=eO(t,255),A=eO(A,255);var n,i,r=Math.max(e,t,A),o=Math.min(e,t,A),s=r,a=r-o;if(i=0===r?0:a/r,r==o)n=0;else{switch(r){case e:n=(t-A)/a+(t<A?6:0);break;case t:n=(A-e)/a+2;break;case A:n=(e-t)/a+4}n/=6}return{h:n,s:i,v:s}}function LU(e,t,A,n){var i=[nO(Math.round(e).toString(16)),nO(Math.round(t).toString(16)),nO(Math.round(A).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function HU(e,t,A,n){return[nO(rO(n)),nO(Math.round(e).toString(16)),nO(Math.round(t).toString(16)),nO(Math.round(A).toString(16))].join("")}function PU(e,t){t=0===t?0:t||10;var A=DU(e).toHsl();return A.s-=t/100,A.s=tO(A.s),DU(A)}function RU(e,t){t=0===t?0:t||10;var A=DU(e).toHsl();return A.s+=t/100,A.s=tO(A.s),DU(A)}function NU(e){return DU(e).desaturate(100)}function jU(e,t){t=0===t?0:t||10;var A=DU(e).toHsl();return A.l+=t/100,A.l=tO(A.l),DU(A)}function VU(e,t){t=0===t?0:t||10;var A=DU(e).toRgb();return A.r=Math.max(0,Math.min(255,A.r-Math.round(-t/100*255))),A.g=Math.max(0,Math.min(255,A.g-Math.round(-t/100*255))),A.b=Math.max(0,Math.min(255,A.b-Math.round(-t/100*255))),DU(A)}function KU(e,t){t=0===t?0:t||10;var A=DU(e).toHsl();return A.l-=t/100,A.l=tO(A.l),DU(A)}function GU(e,t){var A=DU(e).toHsl(),n=(A.h+t)%360;return A.h=n<0?360+n:n,DU(A)}function YU(e){var t=DU(e).toHsl();return t.h=(t.h+180)%360,DU(t)}function XU(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var A=DU(e).toHsl(),n=[DU(e)],i=360/t,r=1;r<t;r++)n.push(DU({h:(A.h+r*i)%360,s:A.s,l:A.l}));return n}function zU(e){var t=DU(e).toHsl(),A=t.h;return[DU(e),DU({h:(A+72)%360,s:t.s,l:t.l}),DU({h:(A+216)%360,s:t.s,l:t.l})]}function WU(e,t,A){t=t||6,A=A||30;var n=DU(e).toHsl(),i=360/A,r=[DU(e)];for(n.h=(n.h-(i*t>>1)+720)%360;--t;)n.h=(n.h+i)%360,r.push(DU(n));return r}function $U(e,t){t=t||6;for(var A=DU(e).toHsv(),n=A.h,i=A.s,r=A.v,o=[],s=1/t;t--;)o.push(DU({h:n,s:i,v:r})),r=(r+s)%1;return o}DU.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,A,n=this.toRgb();return e=n.r/255,t=n.g/255,A=n.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))},setAlpha:function(e){return this._a=ZU(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=MU(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=MU(this._r,this._g,this._b),t=Math.round(360*e.h),A=Math.round(100*e.s),n=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+A+"%, "+n+"%)":"hsva("+t+", "+A+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=TU(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=TU(this._r,this._g,this._b),t=Math.round(360*e.h),A=Math.round(100*e.s),n=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+A+"%, "+n+"%)":"hsla("+t+", "+A+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return LU(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,A,n,i){var r=[nO(Math.round(e).toString(16)),nO(Math.round(t).toString(16)),nO(Math.round(A).toString(16)),nO(rO(n))];if(i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1))return r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0);return r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*eO(this._r,255))+"%",g:Math.round(100*eO(this._g,255))+"%",b:Math.round(100*eO(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*eO(this._r,255))+"%, "+Math.round(100*eO(this._g,255))+"%, "+Math.round(100*eO(this._b,255))+"%)":"rgba("+Math.round(100*eO(this._r,255))+"%, "+Math.round(100*eO(this._g,255))+"%, "+Math.round(100*eO(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(qU[LU(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+HU(this._r,this._g,this._b,this._a),A=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var i=DU(e);A="#"+HU(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+A+")"},toString:function(e){var t=!!e;e=e||this._format;var A=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(A=this.toRgbString()),"prgb"===e&&(A=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(A=this.toHexString()),"hex3"===e&&(A=this.toHexString(!0)),"hex4"===e&&(A=this.toHex8String(!0)),"hex8"===e&&(A=this.toHex8String()),"name"===e&&(A=this.toName()),"hsl"===e&&(A=this.toHslString()),"hsv"===e&&(A=this.toHsvString()),A||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return DU(this.toString())},_applyModification:function(e,t){var A=e.apply(null,[this].concat([].slice.call(t)));return this._r=A._r,this._g=A._g,this._b=A._b,this.setAlpha(A._a),this},lighten:function(){return this._applyModification(jU,arguments)},brighten:function(){return this._applyModification(VU,arguments)},darken:function(){return this._applyModification(KU,arguments)},desaturate:function(){return this._applyModification(PU,arguments)},saturate:function(){return this._applyModification(RU,arguments)},greyscale:function(){return this._applyModification(NU,arguments)},spin:function(){return this._applyModification(GU,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(WU,arguments)},complement:function(){return this._applyCombination(YU,arguments)},monochromatic:function(){return this._applyCombination($U,arguments)},splitcomplement:function(){return this._applyCombination(zU,arguments)},triad:function(){return this._applyCombination(XU,[3])},tetrad:function(){return this._applyCombination(XU,[4])}},DU.fromRatio=function(e,t){if("object"==kU(e)){var A={};for(var n in e)e.hasOwnProperty(n)&&(A[n]="a"===n?e[n]:iO(e[n]));e=A}return DU(e,t)},DU.equals=function(e,t){return!(!e||!t)&&DU(e).toRgbString()==DU(t).toRgbString()},DU.random=function(){return DU.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},DU.mix=function(e,t,A){A=0===A?0:A||50;var n=DU(e).toRgb(),i=DU(t).toRgb(),r=A/100;return DU({r:(i.r-n.r)*r+n.r,g:(i.g-n.g)*r+n.g,b:(i.b-n.b)*r+n.b,a:(i.a-n.a)*r+n.a})},DU.readability=function(e,t){var A=DU(e),n=DU(t);return(Math.max(A.getLuminance(),n.getLuminance())+.05)/(Math.min(A.getLuminance(),n.getLuminance())+.05)},DU.isReadable=function(e,t,A){var n,i,r=DU.readability(e,t);switch(i=!1,(n=function(e){var t,A;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),A=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==A&&"large"!==A&&(A="small");return{level:t,size:A}}(A)).level+n.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7}return i},DU.mostReadable=function(e,t,A){var n,i,r,o,s=null,a=0;i=(A=A||{}).includeFallbackColors,r=A.level,o=A.size;for(var l=0;l<t.length;l++)(n=DU.readability(e,t[l]))>a&&(a=n,s=DU(t[l]));return DU.isReadable(e,s,{level:r,size:o})||!i?s:(A.includeFallbackColors=!1,DU.mostReadable(e,["#fff","#000"],A))};var JU=DU.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},qU=DU.hexNames=function(e){var t={};for(var A in e)e.hasOwnProperty(A)&&(t[e[A]]=A);return t}(JU);function ZU(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function eO(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var A=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),A&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function tO(e){return Math.min(1,Math.max(0,e))}function AO(e){return parseInt(e,16)}function nO(e){return 1==e.length?"0"+e:""+e}function iO(e){return e<=1&&(e=100*e+"%"),e}function rO(e){return Math.round(255*parseFloat(e)).toString(16)}function oO(e){return AO(e)/255}var sO,aO,lO,cO=(aO="[\\s|\\(]+("+(sO="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+sO+")[,|\\s]+("+sO+")\\s*\\)?",lO="[\\s|\\(]+("+sO+")[,|\\s]+("+sO+")[,|\\s]+("+sO+")[,|\\s]+("+sO+")\\s*\\)?",{CSS_UNIT:new RegExp(sO),rgb:new RegExp("rgb"+aO),rgba:new RegExp("rgba"+lO),hsl:new RegExp("hsl"+aO),hsla:new RegExp("hsla"+lO),hsv:new RegExp("hsv"+aO),hsva:new RegExp("hsva"+lO),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function uO(e){return!!cO.CSS_UNIT.exec(e)}var hO=Object.defineProperty,dO=Object.defineProperties,fO=Object.getOwnPropertyDescriptors,gO=Object.getOwnPropertySymbols,pO=Object.prototype.hasOwnProperty,vO=Object.prototype.propertyIsEnumerable,mO=(e,t,A)=>t in e?hO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:A}):e[t]=A,BO=(e,t)=>{for(var A in t||(t={}))pO.call(t,A)&&mO(e,A,t[A]);if(gO)for(var A of gO(t))vO.call(t,A)&&mO(e,A,t[A]);return e},yO=(e,t)=>dO(e,fO(t));const CO=(e="")=>{const t=/^(-(webkit|o|ms|moz)-)?(linear-gradient)/i,A=/^(-(webkit|o|ms|moz)-)?(repeating-linear-gradient)/i,n=/^(-(webkit|o|ms|moz)-)?(radial-gradient)/i,i=/^(-(webkit|o|ms|moz)-)?(repeating-radial-gradient)/i,r=/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,o=/^(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)/,s=/^(left|center|right|top|bottom)/i,a=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,l=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))%/,c=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,u=/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,h=/^\(/,d=/^\)/,f=/^,/,g=/^#([0-9a-fA-F]+)/,p=/^([a-zA-Z]+)/,v=/^rgb/i,m=/^(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s+\/\s+([0-1](\.\d+)?)/,B=/^rgba/i,y=/^hsl/i,C=/^hsv/i,w=/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/;function b(t){throw new Error(e+": "+t)}function x(t){e=e.substr(t)}function Q(t){const A=/^[\n\r\t\s]+/.exec(e);A&&x(A[0].length);const n=t.exec(e);return n&&x(n[0].length),n}function E(e){let t=e();const A=[];if(t)for(A.push(t);Q(f);)t=e(),t?A.push(t):b("One extra comma");return A}function I(e,t,A){const n=Q(t);if(n)return{type:e,value:n[A]}}const _=e=>({value:`${KO(null==e?void 0:e[0])?"RGBA":"rgba"}(${E(N)})`});function S(e,t){const A=Q(e);if(A){Q(h)||b("Missing (");const e=t(A);return Q(d)||b("Missing )"),e}}function F(){return function(){const e=I("hex",g,1);if(null==e?void 0:e.value){const{r:t,g:A,b:n,a:i}=DU(null==e?void 0:e.value).toRgb();return{value:`rgba(${t}, ${A}, ${n}, ${i})`}}}()||S(y,j)||S(B,_)||S(v,K)||function(){const e=I("literal",p,0);if(null==e?void 0:e.value){const{r:t,g:A,b:n,a:i}=DU(null==e?void 0:e.value).toRgb();return{value:`rgba(${t}, ${A}, ${n}, ${i})`}}}()||S(C,V)}function k(){var e;const t=F();return t||b("Expected color definition"),t.left=~~(null==(e=G())?void 0:e.value),t}function U(e,t,A){return S(t,(function(){const t=A();return t&&(Q(f)||b("Missing comma before color stops")),{type:e,orientation:t,colorStops:E(k)}}))}function O(){return I("directional",r,1)||I("angular",u,1)}function D(){return U("linear-gradient",t,O)||U("repeating-linear-gradient",A,O)||U("radial-gradient",n,T)||U("repeating-radial-gradient",i,T)}function T(){let t,A,n=M();return n&&(t=[],t.push(n),A=e,Q(f)&&(n=M(),n?t.push(n):e=A)),t}function M(){let e=function(){const e=I("shape",/^(circle)/i,0);e&&(e.style=L()||H());return e}()||function(){const e=I("shape",/^(ellipse)/i,0);e&&(e.style=G()||H());return e}();if(e)e.at=P();else{const t=H();if(t){e=t;const A=P();A&&(e.at=A)}else{const t=R();t&&(e={type:"default-radial",at:t})}}return e}function L(){return I("px",a,1)||I("em",c,1)}function H(){return I("extent-keyword",o,1)}function P(){if(I("position",/^at/,0)){const e=R();return e||b("Missing positioning value"),e}}function R(){const e={x:G(),y:G()};if(e.x||e.y)return{type:"position",value:e}}function N(){return Q(w)[1]}const j=e=>{const t=KO(null==e?void 0:e[0]),A=E(N),{r:n,g:i,b:r,a:o}=DU({h:A[0],s:A[1],l:A[2],a:A[3]||1}).toRgb();return{value:`${t?"RGBA":"rgba"}(${n}, ${i}, ${r}, ${o})`}},V=e=>{const t=KO(null==e?void 0:e[0]),A=E(N),{r:n,g:i,b:r,a:o}=DU({h:A[0],s:A[1],v:A[2],a:A[3]||1}).toRgb();return{value:`${t?"RGBA":"rgba"}(${n}, ${i}, ${r}, ${o})`}},K=e=>{const t=KO(null==e?void 0:e[0]),A=Q(m),[,n,i,r,o=1]=A||[null,...E(N)];return{value:`${t?"RGBA":"rgba"}(${n}, ${i}, ${r}, ${o})`}};function G(){return I("%",l,1)||I("position-keyword",s,1)||L()}return function(){var t;const A=E(D);e.length>0&&b("Invalid input not EOF");const n=A[0],i=null==(t=null==n?void 0:n.colorStops)?void 0:t.filter((e=>KO(e.value))).length;return(()=>{if(i>0)return n;{const e=(e,t)=>0===t?LO(e):MO(e);return yO(BO({},n),{colorStops:n.colorStops.map(((t,A)=>yO(BO({},t),{value:e(t,A)})))})}})()}()};var wO=(e=>(e.hsl="HSL",e.rgb="RGB",e.hsv="HSV",e.cmyk="CMYK",e))(wO||{}),bO=(e=>(e.linear="linear",e.radial="radial",e))(bO||{}),xO=(e=>(e.solid="solid",e.gradient="gradient",e))(xO||{});const QO="rgba(175, 51, 242, 1)",EO=300,IO=90,_O=18,SO=2,FO="INPUT",kO=[wO.rgb,wO.hsl],UO={barSize:18,crossSize:18,delay:150,defaultColor:"rgba(175, 51, 242, 1)",defaultGradient:"linear-gradient(90deg, rgb(245, 66, 245) 0%, rgb(0, 0, 255) 100%)"},OO=["rgba(0,0,0,1)","rgba(128,128,128, 1)","rgba(192,192,192, 1)","rgba(255,255,255, 1)","rgba(0,0,128,1)","rgba(0,0,255,1)","rgba(0,255,255, 1)","rgba(0,128,0,1)","rgba(128,128,0, 1)","rgba(0,128,128,1)","rgba(0,255,0, 1)","rgba(128,0,0, 1)","rgba(128,0,128, 1)","rgba(175, 51, 242, 1)","rgba(255,0,255, 1)","rgba(255,0,0, 1)","rgba(240, 103, 46, 1)","rgba(255,255,0, 1)"],{defaultColor:DO,defaultGradient:TO}=UO,MO=e=>{var t;return(null==(t=e.value)?void 0:t.toLowerCase())||""},LO=e=>{var t;return(null==(t=e.value)?void 0:t.toUpperCase())||""},HO=(e,t,A)=>"number"!=typeof e||isNaN(e)||e<t?t:e>A?A:e,PO=e=>"number"!=typeof e||isNaN(e)?0:Math.round(e),{barSize:RO,crossSize:NO}=UO,jO=e=>{const t=e.target.parentNode.getBoundingClientRect(),A="c-resize ps-rl"===e.target.className?15:0;return{offsetLeft:(null==t?void 0:t.x)+A,offsetTop:null==t?void 0:t.y,clientWidth:null==t?void 0:t.width,clientHeight:null==t?void 0:t.height}};function VO(e){const{offsetLeft:t,clientWidth:A}=jO(e),n=e.clientX-t-RO/2,i=A-18,r=HO(n,0,i);return Math.round(r/(i/100))}const KO=e=>!(!e||"string"!=typeof e)&&/[A-Z]/.test(e),GO=e=>{var t;if(!e||"string"!=typeof e)return 0;const A=e.split(",")[0];return(e=>{if("to top"===e)return 0;if("to bottom"===e)return 180;if("to left"===e)return 270;if("to right"===e)return 90;if("to top right"===e)return 45;if("to bottom right"===e)return 135;if("to bottom left"===e)return 225;if("to top left"===e)return 315;{const t=parseInt(e||0);return isNaN(t)?0:t}})(null==(t=null==A?void 0:A.split("(")[1])?void 0:t.replace("deg",""))},YO=(e,t)=>{const A=e.__vccOpts||e;for(const[n,i]of t)A[n]=i;return A};const XO=YO(on({__name:"Opacity",setup(e,{expose:t}){t();const{colorState:A,changeColor:n}=gn("colorProvider"),i=sn(!1),r=sn(A.width-18),o=En((()=>{if(A.hc){const{r:e,g:t,b:n}=A.hc;return`linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(${e},${t},${n},.5) 100%)`}return""})),s=()=>{i.value=!1},a=e=>{if(!A.hc)return;const{r:t,g:i,b:r}=A.hc,o=VO(e)/100;n(`rgba(${t}, ${i}, ${r}, ${o})`)},l=le((function(e){fn(i)&&a(e)}),80);ln((()=>{window.addEventListener("mouseup",s)})),ri((()=>{window.removeEventListener("mouseup",s)}));const c={colorState:A,changeColor:n,dragging:i,left:r,bg:o,stopDragging:s,onMousedown:()=>{i.value=!0},handleOpacity:a,onMouseMove:l,handleClick:e=>{fn(i)||a(e)}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(e,t,A,n,i,r){var o;return cn(),un("section",{class:"cpg-opacity-wrap",onMousedown:n.onMousedown,onMousemove:t[0]||(t[0]=(...e)=>n.onMouseMove&&n.onMouseMove(...e)),onMouseup:n.stopDragging},[t[1]||(t[1]=pn("div",{class:"cpg-opacity-bar"},null,-1)),pn("div",{class:dn(["cpg-pointer",{"cpg-cursor-pointer":n.dragging}]),style:Rn({left:n.left*(null==(o=n.colorState.hc)?void 0:o.a)+"px"})},null,6),pn("div",{class:"cpg-opacity-color",style:Rn({background:n.bg}),onClick:n.handleClick},null,4)],32)}],["__file","Opacity.vue"]]),zO={class:"relative"};const WO=YO(on({__name:"PickerArea",setup(e,{expose:t}){t();const{colorState:A,isGradient:n,setValue:i,updateSelectColor:r}=gn("colorProvider"),{crossSize:o}=UO,s=sn(null),a=sn(!1),l=e=>a.value=e,c=()=>{l(!1)},u=Vn({x:0,y:0}),h=e=>{var t,s;const[a,l]=function(e){const{offsetLeft:t,offsetTop:A,clientWidth:n,clientHeight:i}=jO(e),{clientX:r,clientY:o}=(e=>{if(e.clientX)return{clientX:e.clientX,clientY:e.clientY};{const t=e.touches[0]||{};return{clientX:t.clientX,clientY:t.clientY}}})(e);return[HO(r-t-NO/2,-9,n-10),HO(o-A-NO/2,-9,i-10)]}(e);if(a&&l){const e=A.width,c=A.height,h=Math.min(a+o/2,e-1)/e*100,d=100-Math.min(l+o/2,c-1)/c*100;u.x=0===d?u.x:a,u.y=l;const f=DU(`hsva(${null==(t=A.hc)?void 0:t.h}, ${h}%, ${d}%, ${null==(s=A.hc)?void 0:s.a})`).toRgbString();fn(n)?r(f):i(f)}},d=le((function(e){fn(a)&&h(e)}),50),f=()=>{c()};ln((()=>{window.addEventListener("mouseup",f)})),ri((()=>{window.removeEventListener("mouseup",f)})),qn((()=>{var e,t,n,i,r,o;if(A.hc){const[s,a]=(n=null==(e=A.hc)?void 0:e.s,i=100*(null==(t=A.hc)?void 0:t.v),r=A.width,o=A.height,[n*r-NO/2,(100-i)/100*o-NO/2]);u.x=s,u.y=a}})),qn((()=>{var e;const t=fn(s);if(t){const n=A.width,i=A.height,r=null==(e=A.hc)?void 0:e.h,o=t.getContext("2d",{willReadFrequently:!0});if(o){o.fillStyle=`hsl(${r}, 100%, 50%)`,o.fillRect(0,0,A.width,i);const e=o.createLinearGradient(0,0,n,0);e.addColorStop(0,"rgba(255, 255, 255, 1)"),e.addColorStop(1,"rgba(255, 255, 255, 0)"),o.fillStyle=e,o.fillRect(0,0,n,i);const t=o.createLinearGradient(0,0,0,i);t.addColorStop(0,"rgba(0, 0, 0, 0)"),t.addColorStop(1,"rgba(0, 0, 0, 1)"),o.fillStyle=t,o.fillRect(0,0,n,i)}}}));const g={colorState:A,isGradient:n,setValue:i,updateSelectColor:r,crossSize:o,canvasRef:s,dragging:a,setDragging:l,stopDragging:c,dragPos:u,handleColor:h,handleMove:d,handleCanvasDown:e=>{l(!0),h(e)},handleMouseDown:()=>{l(!0)},handleUp:f};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(e,t,A,n,i,r){return cn(),un("section",zO,[pn("div",{class:"cpg-picker-wrap",style:Rn({width:`${n.colorState.width}px`}),onMouseup:n.stopDragging,onTouchend:n.stopDragging,onMousedown:n.handleCanvasDown,onTouchstart:n.handleCanvasDown,onMousemove:t[0]||(t[0]=(...e)=>n.handleMove&&n.handleMove(...e))},[pn("span",{class:dn(["cpg-pointer",{"cpg-cursor-pointer":n.dragging}]),style:Rn({left:`${n.dragPos.x}px`,top:`${n.dragPos.y}px`}),onMousedown:n.handleMouseDown},null,38),pn("canvas",{ref:"canvasRef",class:"cpg-picker-area",style:Rn({width:`${n.colorState.width}px`,height:`${n.colorState.height}px`})},null,4)],36)])}],["__file","PickerArea.vue"]]);
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $O=function(e,t){return($O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var A in t)Object.prototype.hasOwnProperty.call(t,A)&&(e[A]=t[A])})(e,t)};function JO(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function A(){this.constructor=e}$O(e,t),e.prototype=null===t?Object.create(t):(A.prototype=t.prototype,new A)}var qO=function(){return qO=Object.assign||function(e){for(var t,A=1,n=arguments.length;A<n;A++)for(var i in t=arguments[A])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qO.apply(this,arguments)};function ZO(e,t,A,n){return new(A||(A=Promise))((function(t,i){function r(e){try{s(n.next(e))}catch(t){i(t)}}function o(e){try{s(n.throw(e))}catch(t){i(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof A?n:new A((function(e){e(n)}))).then(r,o)}s((n=n.apply(e,[])).next())}))}function eD(e,t){var A,n,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(A)throw new TypeError("Generator is already executing.");for(;o;)try{if(A=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(s){r=[6,s],n=0}finally{A=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}for(var tD=function(){function e(e,t,A,n){this.left=e,this.top=t,this.width=A,this.height=n}return e.prototype.add=function(t,A,n,i){return new e(this.left+t,this.top+A,this.width+n,this.height+i)},e.fromClientRect=function(t,A){return new e(A.left+t.windowBounds.left,A.top+t.windowBounds.top,A.width,A.height)},e.fromDOMRectList=function(t,A){var n=Array.from(A).find((function(e){return 0!==e.width}));return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),AD=function(e,t){return tD.fromClientRect(e,t.getBoundingClientRect())},nD=function(e){for(var t=[],A=0,n=e.length;A<n;){var i=e.charCodeAt(A++);if(i>=55296&&i<=56319&&A<n){var r=e.charCodeAt(A++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),A--)}else t.push(i)}return t},iD=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var A=e.length;if(!A)return"";for(var n=[],i=-1,r="";++i<A;){var o=e[i];o<=65535?n.push(o):(o-=65536,n.push(55296+(o>>10),o%1024+56320)),(i+1===A||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},rD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oD="undefined"==typeof Uint8Array?[]:new Uint8Array(256),sD=0;sD<64;sD++)oD[rD.charCodeAt(sD)]=sD;for(var aD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lD="undefined"==typeof Uint8Array?[]:new Uint8Array(256),cD=0;cD<64;cD++)lD[aD.charCodeAt(cD)]=cD;for(var uD=function(e,t,A){return e.slice?e.slice(t,A):new Uint16Array(Array.prototype.slice.call(e,t,A))},hD=function(){function e(e,t,A,n,i,r){this.initialValue=e,this.errorValue=t,this.highStart=A,this.highValueIndex=n,this.index=i,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),dD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fD="undefined"==typeof Uint8Array?[]:new Uint8Array(256),gD=0;gD<64;gD++)fD[dD.charCodeAt(gD)]=gD;var pD,vD,mD,BD,yD,CD,wD,bD,xD=10,QD=13,ED=15,ID=17,_D=18,SD=19,FD=20,kD=21,UD=22,OD=24,DD=25,TD=26,MD=27,LD=28,HD=30,PD=32,RD=33,ND=34,jD=35,VD=37,KD=38,GD=39,YD=40,XD=42,zD=[9001,65288],WD="×",$D="÷",JD=(BD=function(e){var t,A,n,i,r,o=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)A=lD[e.charCodeAt(t)],n=lD[e.charCodeAt(t+1)],i=lD[e.charCodeAt(t+2)],r=lD[e.charCodeAt(t+3)],c[a++]=A<<2|n>>4,c[a++]=(15&n)<<4|i>>2,c[a++]=(3&i)<<6|63&r;return l}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),yD=Array.isArray(BD)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=4)A.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return A}(BD):new Uint32Array(BD),CD=Array.isArray(BD)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=2)A.push(e[n+1]<<8|e[n]);return A}(BD):new Uint16Array(BD),wD=uD(CD,12,yD[4]/2),bD=2===yD[5]?uD(CD,(24+yD[4])/2):(pD=yD,vD=Math.ceil((24+yD[4])/4),pD.slice?pD.slice(vD,mD):new Uint32Array(Array.prototype.slice.call(pD,vD,mD))),new hD(yD[0],yD[1],yD[2],yD[3],wD,bD)),qD=[HD,36],ZD=[1,2,3,5],eT=[xD,8],tT=[MD,TD],AT=ZD.concat(eT),nT=[KD,GD,YD,ND,jD],iT=[ED,QD],rT=function(e,t,A,n){var i=n[A];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var r=A;r<=n.length;){if((a=n[++r])===t)return!0;if(a!==xD)break}if(i===xD)for(r=A;r>0;){var o=n[--r];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var s=A;s<=n.length;){var a;if((a=n[++s])===t)return!0;if(a!==xD)break}if(o!==xD)break}return!1},oT=function(e,t){for(var A=e;A>=0;){var n=t[A];if(n!==xD)return n;A--}return 0},sT=function(e,t,A,n,i){if(0===A[n])return WD;var r=n-1;if(Array.isArray(i)&&!0===i[r])return WD;var o=r-1,s=r+1,a=t[r],l=o>=0?t[o]:0,c=t[s];if(2===a&&3===c)return WD;if(-1!==ZD.indexOf(a))return"!";if(-1!==ZD.indexOf(c))return WD;if(-1!==eT.indexOf(c))return WD;if(8===oT(r,t))return $D;if(11===JD.get(e[r]))return WD;if((a===PD||a===RD)&&11===JD.get(e[s]))return WD;if(7===a||7===c)return WD;if(9===a)return WD;if(-1===[xD,QD,ED].indexOf(a)&&9===c)return WD;if(-1!==[ID,_D,SD,OD,LD].indexOf(c))return WD;if(oT(r,t)===UD)return WD;if(rT(23,UD,r,t))return WD;if(rT([ID,_D],kD,r,t))return WD;if(rT(12,12,r,t))return WD;if(a===xD)return $D;if(23===a||23===c)return WD;if(16===c||16===a)return $D;if(-1!==[QD,ED,kD].indexOf(c)||14===a)return WD;if(36===l&&-1!==iT.indexOf(a))return WD;if(a===LD&&36===c)return WD;if(c===FD)return WD;if(-1!==qD.indexOf(c)&&a===DD||-1!==qD.indexOf(a)&&c===DD)return WD;if(a===MD&&-1!==[VD,PD,RD].indexOf(c)||-1!==[VD,PD,RD].indexOf(a)&&c===TD)return WD;if(-1!==qD.indexOf(a)&&-1!==tT.indexOf(c)||-1!==tT.indexOf(a)&&-1!==qD.indexOf(c))return WD;if(-1!==[MD,TD].indexOf(a)&&(c===DD||-1!==[UD,ED].indexOf(c)&&t[s+1]===DD)||-1!==[UD,ED].indexOf(a)&&c===DD||a===DD&&-1!==[DD,LD,OD].indexOf(c))return WD;if(-1!==[DD,LD,OD,ID,_D].indexOf(c))for(var u=r;u>=0;){if((h=t[u])===DD)return WD;if(-1===[LD,OD].indexOf(h))break;u--}if(-1!==[MD,TD].indexOf(c))for(u=-1!==[ID,_D].indexOf(a)?o:r;u>=0;){var h;if((h=t[u])===DD)return WD;if(-1===[LD,OD].indexOf(h))break;u--}if(KD===a&&-1!==[KD,GD,ND,jD].indexOf(c)||-1!==[GD,ND].indexOf(a)&&-1!==[GD,YD].indexOf(c)||-1!==[YD,jD].indexOf(a)&&c===YD)return WD;if(-1!==nT.indexOf(a)&&-1!==[FD,TD].indexOf(c)||-1!==nT.indexOf(c)&&a===MD)return WD;if(-1!==qD.indexOf(a)&&-1!==qD.indexOf(c))return WD;if(a===OD&&-1!==qD.indexOf(c))return WD;if(-1!==qD.concat(DD).indexOf(a)&&c===UD&&-1===zD.indexOf(e[s])||-1!==qD.concat(DD).indexOf(c)&&a===_D)return WD;if(41===a&&41===c){for(var d=A[r],f=1;d>0&&41===t[--d];)f++;if(f%2!=0)return WD}return a===PD&&c===RD?WD:$D},aT=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var A=function(e,t){void 0===t&&(t="strict");var A=[],n=[],i=[];return e.forEach((function(e,r){var o=JD.get(e);if(o>50?(i.push(!0),o-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(r),A.push(16);if(4===o||11===o){if(0===r)return n.push(r),A.push(HD);var s=A[r-1];return-1===AT.indexOf(s)?(n.push(n[r-1]),A.push(s)):(n.push(r),A.push(HD))}return n.push(r),31===o?A.push("strict"===t?kD:VD):o===XD||29===o?A.push(HD):43===o?e>=131072&&e<=196605||e>=196608&&e<=262141?A.push(VD):A.push(HD):void A.push(o)})),[n,A,i]}(e,t.lineBreak),n=A[0],i=A[1],r=A[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(i=i.map((function(e){return-1!==[DD,HD,XD].indexOf(e)?VD:e})));var o="keep-all"===t.wordBreak?r.map((function(t,A){return t&&e[A]>=19968&&e[A]<=40959})):void 0;return[n,i,o]},lT=function(){function e(e,t,A,n){this.codePoints=e,this.required="!"===t,this.start=A,this.end=n}return e.prototype.slice=function(){return iD.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),cT=45,uT=43,hT=-1,dT=function(e){return e>=48&&e<=57},fT=function(e){return dT(e)||e>=65&&e<=70||e>=97&&e<=102},gT=function(e){return 10===e||9===e||32===e},pT=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},vT=function(e){return pT(e)||dT(e)||e===cT},mT=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},BT=function(e,t){return 92===e&&10!==t},yT=function(e,t,A){return e===cT?pT(t)||BT(t,A):!!pT(e)||!(92!==e||!BT(e,t))},CT=function(e,t,A){return e===uT||e===cT?!!dT(t)||46===t&&dT(A):dT(46===e?t:e)},wT=function(e){var t=0,A=1;e[t]!==uT&&e[t]!==cT||(e[t]===cT&&(A=-1),t++);for(var n=[];dT(e[t]);)n.push(e[t++]);var i=n.length?parseInt(iD.apply(void 0,n),10):0;46===e[t]&&t++;for(var r=[];dT(e[t]);)r.push(e[t++]);var o=r.length,s=o?parseInt(iD.apply(void 0,r),10):0;69!==e[t]&&101!==e[t]||t++;var a=1;e[t]!==uT&&e[t]!==cT||(e[t]===cT&&(a=-1),t++);for(var l=[];dT(e[t]);)l.push(e[t++]);var c=l.length?parseInt(iD.apply(void 0,l),10):0;return A*(i+s*Math.pow(10,-o))*Math.pow(10,a*c)},bT={type:2},xT={type:3},QT={type:4},ET={type:13},IT={type:8},_T={type:21},ST={type:9},FT={type:10},kT={type:11},UT={type:12},OT={type:14},DT={type:23},TT={type:1},MT={type:25},LT={type:24},HT={type:26},PT={type:27},RT={type:28},NT={type:29},jT={type:31},VT={type:32},KT=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(nD(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==VT;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),A=this.peekCodePoint(1),n=this.peekCodePoint(2);if(vT(t)||BT(A,n)){var i=yT(t,A,n)?2:1;return{type:5,value:this.consumeName(),flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ET;break;case 39:return this.consumeStringToken(39);case 40:return bT;case 41:return xT;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),OT;break;case uT:if(CT(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return QT;case cT:var r=e,o=this.peekCodePoint(0),s=this.peekCodePoint(1);if(CT(r,o,s))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(yT(r,o,s))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(o===cT&&62===s)return this.consumeCodePoint(),this.consumeCodePoint(),LT;break;case 46:if(CT(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var a=this.consumeCodePoint();if(42===a&&47===(a=this.consumeCodePoint()))return this.consumeToken();if(a===hT)return this.consumeToken()}break;case 58:return HT;case 59:return PT;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===cT&&this.peekCodePoint(2)===cT)return this.consumeCodePoint(),this.consumeCodePoint(),MT;break;case 64:var l=this.peekCodePoint(0),c=this.peekCodePoint(1),u=this.peekCodePoint(2);if(yT(l,c,u))return{type:7,value:this.consumeName()};break;case 91:return RT;case 92:if(BT(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return NT;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),IT;break;case 123:return kT;case 125:return UT;case 117:case 85:var h=this.peekCodePoint(0),d=this.peekCodePoint(1);return h!==uT||!fT(d)&&63!==d||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ST;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),_T;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),FT;break;case hT:return VT}return gT(e)?(this.consumeWhiteSpace(),jT):dT(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):pT(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:iD(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();fT(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var A=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),A=!0;if(A)return{type:30,start:parseInt(iD.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(iD.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var n=parseInt(iD.apply(void 0,e),16);if(this.peekCodePoint(0)===cT&&fT(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var i=[];fT(t)&&i.length<6;)i.push(t),t=this.consumeCodePoint();return{type:30,start:n,end:parseInt(iD.apply(void 0,i),16)}}return{type:30,start:n,end:n}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===hT)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var A=this.consumeStringToken(this.consumeCodePoint());return 0===A.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===hT||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:A.value}):(this.consumeBadUrlRemnants(),DT)}for(;;){var n=this.consumeCodePoint();if(n===hT||41===n)return{type:22,value:iD.apply(void 0,e)};if(gT(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===hT||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:iD.apply(void 0,e)}):(this.consumeBadUrlRemnants(),DT);if(34===n||39===n||40===n||mT(n))return this.consumeBadUrlRemnants(),DT;if(92===n){if(!BT(n,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),DT;e.push(this.consumeEscapedCodePoint())}else e.push(n)}},e.prototype.consumeWhiteSpace=function(){for(;gT(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===hT)return;BT(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var A=Math.min(5e4,e);t+=iD.apply(void 0,this._value.splice(0,A)),e-=A}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",A=0;;){var n=this._value[A];if(n===hT||void 0===n||n===e)return{type:0,value:t+=this.consumeStringSlice(A)};if(10===n)return this._value.splice(0,A),TT;if(92===n){var i=this._value[A+1];i!==hT&&void 0!==i&&(10===i?(t+=this.consumeStringSlice(A),A=-1,this._value.shift()):BT(n,i)&&(t+=this.consumeStringSlice(A),t+=iD(this.consumeEscapedCodePoint()),A=-1))}A++}},e.prototype.consumeNumber=function(){var e=[],t=4,A=this.peekCodePoint(0);for(A!==uT&&A!==cT||e.push(this.consumeCodePoint());dT(this.peekCodePoint(0));)e.push(this.consumeCodePoint());A=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===A&&dT(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;dT(this.peekCodePoint(0));)e.push(this.consumeCodePoint());A=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===A||101===A)&&((n===uT||n===cT)&&dT(i)||dT(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;dT(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[wT(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],A=e[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),r=this.peekCodePoint(2);return yT(n,i,r)?{type:15,number:t,flags:A,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:t,flags:A}):{type:17,number:t,flags:A}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(fT(e)){for(var t=iD(e);fT(this.peekCodePoint(0))&&t.length<6;)t+=iD(this.consumeCodePoint());gT(this.peekCodePoint(0))&&this.consumeCodePoint();var A=parseInt(t,16);return 0===A||function(e){return e>=55296&&e<=57343}(A)||A>1114111?65533:A}return e===hT?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(vT(t))e+=iD(t);else{if(!BT(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=iD(this.consumeEscapedCodePoint())}}},e}(),GT=function(){function e(e){this._tokens=e}return e.create=function(t){var A=new KT;return A.write(t),new e(A.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},A=this.consumeToken();;){if(32===A.type||eM(A,e))return t;this.reconsumeToken(A),t.values.push(this.consumeComponentValue()),A=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var A=this.consumeToken();if(32===A.type||3===A.type)return t;this.reconsumeToken(A),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?VT:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),YT=function(e){return 15===e.type},XT=function(e){return 17===e.type},zT=function(e){return 20===e.type},WT=function(e){return 0===e.type},$T=function(e,t){return zT(e)&&e.value===t},JT=function(e){return 31!==e.type},qT=function(e){return 31!==e.type&&4!==e.type},ZT=function(e){var t=[],A=[];return e.forEach((function(e){if(4===e.type){if(0===A.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(A),void(A=[])}31!==e.type&&A.push(e)})),A.length&&t.push(A),t},eM=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},tM=function(e){return 17===e.type||15===e.type},AM=function(e){return 16===e.type||tM(e)},nM=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},iM={type:17,number:0,flags:4},rM={type:16,number:50,flags:4},oM={type:16,number:100,flags:4},sM=function(e,t,A){var n=e[0],i=e[1];return[aM(n,t),aM(void 0!==i?i:n,A)]},aM=function(e,t){if(16===e.type)return e.number/100*t;if(YT(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},lM="grad",cM="turn",uM=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case lM:return Math.PI/200*t.number;case"rad":return t.number;case cM:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},hM=function(e){return 15===e.type&&("deg"===e.unit||e.unit===lM||"rad"===e.unit||e.unit===cM)},dM=function(e){switch(e.filter(zT).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[iM,iM];case"to top":case"bottom":return fM(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[iM,oM];case"to right":case"left":return fM(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[oM,oM];case"to bottom":case"top":return fM(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[oM,iM];case"to left":case"right":return fM(270)}return 0},fM=function(e){return Math.PI*e/180},gM=function(e,t){if(18===t.type){var A=bM[t.name];if(void 0===A)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return A(e,t.values)}if(5===t.type){if(3===t.value.length){var n=t.value.substring(0,1),i=t.value.substring(1,2),r=t.value.substring(2,3);return mM(parseInt(n+n,16),parseInt(i+i,16),parseInt(r+r,16),1)}if(4===t.value.length){n=t.value.substring(0,1),i=t.value.substring(1,2),r=t.value.substring(2,3);var o=t.value.substring(3,4);return mM(parseInt(n+n,16),parseInt(i+i,16),parseInt(r+r,16),parseInt(o+o,16)/255)}if(6===t.value.length){n=t.value.substring(0,2),i=t.value.substring(2,4),r=t.value.substring(4,6);return mM(parseInt(n,16),parseInt(i,16),parseInt(r,16),1)}if(8===t.value.length){n=t.value.substring(0,2),i=t.value.substring(2,4),r=t.value.substring(4,6),o=t.value.substring(6,8);return mM(parseInt(n,16),parseInt(i,16),parseInt(r,16),parseInt(o,16)/255)}}if(20===t.type){var s=QM[t.value.toUpperCase()];if(void 0!==s)return s}return QM.TRANSPARENT},pM=function(e){return!(255&e)},vM=function(e){var t=255&e,A=255&e>>8,n=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+n+","+A+","+t/255+")":"rgb("+i+","+n+","+A+")"},mM=function(e,t,A,n){return(e<<24|t<<16|A<<8|Math.round(255*n))>>>0},BM=function(e,t){if(17===e.type)return e.number;if(16===e.type){var A=3===t?1:255;return 3===t?e.number/100*A:Math.round(e.number/100*A)}return 0},yM=function(e,t){var A=t.filter(qT);if(3===A.length){var n=A.map(BM),i=n[0],r=n[1],o=n[2];return mM(i,r,o,1)}if(4===A.length){var s=A.map(BM),a=(i=s[0],r=s[1],o=s[2],s[3]);return mM(i,r,o,a)}return 0};function CM(e,t,A){return A<0&&(A+=1),A>=1&&(A-=1),A<1/6?(t-e)*A*6+e:A<.5?t:A<2/3?6*(t-e)*(2/3-A)+e:e}var wM=function(e,t){var A=t.filter(qT),n=A[0],i=A[1],r=A[2],o=A[3],s=(17===n.type?fM(n.number):uM(e,n))/(2*Math.PI),a=AM(i)?i.number/100:0,l=AM(r)?r.number/100:0,c=void 0!==o&&AM(o)?aM(o,1):1;if(0===a)return mM(255*l,255*l,255*l,1);var u=l<=.5?l*(a+1):l+a-l*a,h=2*l-u,d=CM(h,u,s+1/3),f=CM(h,u,s),g=CM(h,u,s-1/3);return mM(255*d,255*f,255*g,c)},bM={hsl:wM,hsla:wM,rgb:yM,rgba:yM},xM=function(e,t){return gM(e,GT.create(t).parseComponentValue())},QM={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},EM={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(zT(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},IM={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_M=function(e,t){var A=gM(e,t[0]),n=t[1];return n&&AM(n)?{color:A,stop:n}:{color:A,stop:null}},SM=function(e,t){var A=e[0],n=e[e.length-1];null===A.stop&&(A.stop=iM),null===n.stop&&(n.stop=oM);for(var i=[],r=0,o=0;o<e.length;o++){var s=e[o].stop;if(null!==s){var a=aM(s,t);a>r?i.push(a):i.push(r),r=a}else i.push(null)}var l=null;for(o=0;o<i.length;o++){var c=i[o];if(null===c)null===l&&(l=o);else if(null!==l){for(var u=o-l,h=(c-i[l-1])/(u+1),d=1;d<=u;d++)i[l+d-1]=h*d;l=null}}return e.map((function(e,A){return{color:e.color,stop:Math.max(Math.min(1,i[A]/t),0)}}))},FM=function(e,t,A){var n="number"==typeof e?e:function(e,t,A){var n=t/2,i=A/2,r=aM(e[0],t)-n,o=i-aM(e[1],A);return(Math.atan2(o,r)+2*Math.PI)%(2*Math.PI)}(e,t,A),i=Math.abs(t*Math.sin(n))+Math.abs(A*Math.cos(n)),r=t/2,o=A/2,s=i/2,a=Math.sin(n-Math.PI/2)*s,l=Math.cos(n-Math.PI/2)*s;return[i,r-l,r+l,o-a,o+a]},kM=function(e,t){return Math.sqrt(e*e+t*t)},UM=function(e,t,A,n,i){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var r=t[0],o=t[1],s=kM(A-r,n-o);return(i?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e}),{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},OM=function(e,t){var A=fM(180),n=[];return ZT(t).forEach((function(t,i){if(0===i){var r=t[0];if(20===r.type&&-1!==["top","left","right","bottom"].indexOf(r.value))return void(A=dM(t));if(hM(r))return void(A=(uM(e,r)+fM(270))%fM(360))}var o=_M(e,t);n.push(o)})),{angle:A,stops:n,type:1}},DM="closest-side",TM="farthest-side",MM="closest-corner",LM="farthest-corner",HM="circle",PM="ellipse",RM="cover",NM="contain",jM=function(e,t){var A=0,n=3,i=[],r=[];return ZT(t).forEach((function(t,o){var s=!0;if(0===o?s=t.reduce((function(e,t){if(zT(t))switch(t.value){case"center":return r.push(rM),!1;case"top":case"left":return r.push(iM),!1;case"right":case"bottom":return r.push(oM),!1}else if(AM(t)||tM(t))return r.push(t),!1;return e}),s):1===o&&(s=t.reduce((function(e,t){if(zT(t))switch(t.value){case HM:return A=0,!1;case PM:return A=1,!1;case NM:case DM:return n=0,!1;case TM:return n=1,!1;case MM:return n=2,!1;case RM:case LM:return n=3,!1}else if(tM(t)||AM(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),s)),s){var a=_M(e,t);i.push(a)}})),{size:n,shape:A,stops:i,position:r,type:2}},VM=function(e,t){if(22===t.type){var A={url:t.value,type:0};return e.cache.addImage(t.value),A}if(18===t.type){var n=YM[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)};var KM,GM,YM={"linear-gradient":function(e,t){var A=fM(180),n=[];return ZT(t).forEach((function(t,i){if(0===i){var r=t[0];if(20===r.type&&"to"===r.value)return void(A=dM(t));if(hM(r))return void(A=uM(e,r))}var o=_M(e,t);n.push(o)})),{angle:A,stops:n,type:1}},"-moz-linear-gradient":OM,"-ms-linear-gradient":OM,"-o-linear-gradient":OM,"-webkit-linear-gradient":OM,"radial-gradient":function(e,t){var A=0,n=3,i=[],r=[];return ZT(t).forEach((function(t,o){var s=!0;if(0===o){var a=!1;s=t.reduce((function(e,t){if(a)if(zT(t))switch(t.value){case"center":return r.push(rM),e;case"top":case"left":return r.push(iM),e;case"right":case"bottom":return r.push(oM),e}else(AM(t)||tM(t))&&r.push(t);else if(zT(t))switch(t.value){case HM:return A=0,!1;case PM:return A=1,!1;case"at":return a=!0,!1;case DM:return n=0,!1;case RM:case TM:return n=1,!1;case NM:case MM:return n=2,!1;case LM:return n=3,!1}else if(tM(t)||AM(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e}),s)}if(s){var l=_M(e,t);i.push(l)}})),{size:n,shape:A,stops:i,position:r,type:2}},"-moz-radial-gradient":jM,"-ms-radial-gradient":jM,"-o-radial-gradient":jM,"-webkit-radial-gradient":jM,"-webkit-gradient":function(e,t){var A=fM(180),n=[],i=1;return ZT(t).forEach((function(t,A){var r=t[0];if(0===A){if(zT(r)&&"linear"===r.value)return void(i=1);if(zT(r)&&"radial"===r.value)return void(i=2)}if(18===r.type)if("from"===r.name){var o=gM(e,r.values[0]);n.push({stop:iM,color:o})}else if("to"===r.name){o=gM(e,r.values[0]);n.push({stop:oM,color:o})}else if("color-stop"===r.name){var s=r.values.filter(qT);if(2===s.length){o=gM(e,s[1]);var a=s[0];XT(a)&&n.push({stop:{type:16,number:100*a.number,flags:a.flags},color:o})}}})),1===i?{angle:(A+fM(180))%fM(360),stops:n,type:i}:{size:3,shape:0,stops:n,position:[],type:i}}},XM={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var A=t[0];return 20===A.type&&"none"===A.value?[]:t.filter((function(e){return qT(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!YM[e.name])}(e)})).map((function(t){return VM(e,t)}))}},zM={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(zT(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},WM={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return ZT(t).map((function(e){return e.filter(AM)})).map(nM)}},$M={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return ZT(t).map((function(e){return e.filter(zT).map((function(e){return e.value})).join(" ")})).map(JM)}},JM=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};(GM=KM||(KM={})).AUTO="auto",GM.CONTAIN="contain",GM.COVER="cover";var qM,ZM,eL={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return ZT(t).map((function(e){return e.filter(tL)}))}},tL=function(e){return zT(e)||AM(e)},AL=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},nL=AL("top"),iL=AL("right"),rL=AL("bottom"),oL=AL("left"),sL=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return nM(t.filter(AM))}}},aL=sL("top-left"),lL=sL("top-right"),cL=sL("bottom-right"),uL=sL("bottom-left"),hL=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},dL=hL("top"),fL=hL("right"),gL=hL("bottom"),pL=hL("left"),vL=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return YT(t)?t.number:0}}},mL=vL("top"),BL=vL("right"),yL=vL("bottom"),CL=vL("left"),wL={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},bL={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},xL={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(zT).reduce((function(e,t){return e|QL(t.value)}),0)}},QL=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},EL={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},IL={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};(ZM=qM||(qM={})).NORMAL="normal",ZM.STRICT="strict";var _L,SL,FL={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?qM.STRICT:qM.NORMAL}},kL={name:"line-height",initialValue:"normal",prefix:!1,type:4},UL=function(e,t){return zT(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:AM(e)?aM(e,t):t},OL={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:VM(e,t)}},DL={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},TL={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},ML=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},LL=ML("top"),HL=ML("right"),PL=ML("bottom"),RL=ML("left"),NL={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(zT).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},jL={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},VL=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},KL=VL("top"),GL=VL("right"),YL=VL("bottom"),XL=VL("left"),zL={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},WL={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},$L={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&$T(t[0],"none")?[]:ZT(t).map((function(t){for(var A={color:QM.TRANSPARENT,offsetX:iM,offsetY:iM,blur:iM},n=0,i=0;i<t.length;i++){var r=t[i];tM(r)?(0===n?A.offsetX=r:1===n?A.offsetY=r:A.blur=r,n++):A.color=gM(e,r)}return A}))}},JL={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},qL={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var A=ZL[t.name];if(void 0===A)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return A(t.values)}return null}},ZL={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),A=t[0],n=t[1];t[2],t[3];var i=t[4],r=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],s=t[13];return t[14],t[15],16===t.length?[A,n,i,r,o,s]:null}},eH={type:16,number:50,flags:4},tH=[eH,eH],AH={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var A=t.filter(AM);return 2!==A.length?tH:[A[0],A[1]]}},nH={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};(SL=_L||(_L={})).NORMAL="normal",SL.BREAK_ALL="break-all",SL.KEEP_ALL="keep-all";for(var iH={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return _L.BREAK_ALL;case"keep-all":return _L.KEEP_ALL;default:return _L.NORMAL}}},rH={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(XT(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},oH=function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},sH={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return XT(t)?t.number:1}},aH={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lH={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(zT).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},cH={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var A=[],n=[];return t.forEach((function(e){switch(e.type){case 20:case 0:A.push(e.value);break;case 17:A.push(e.number.toString());break;case 4:n.push(A.join(" ")),A.length=0}})),A.length&&n.push(A.join(" ")),n.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},uH={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},hH={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return XT(t)?t.number:zT(t)&&"bold"===t.value?700:400}},dH={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(zT).map((function(e){return e.value}))}},fH={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},gH=function(e,t){return!!(e&t)},pH={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var A=t[0];return 20===A.type&&"none"===A.value?[]:t}},vH={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var A=t[0];if(20===A.type&&"none"===A.value)return null;for(var n=[],i=t.filter(JT),r=0;r<i.length;r++){var o=i[r],s=i[r+1];if(20===o.type){var a=s&&XT(s)?s.number:1;n.push({counter:o.value,increment:a})}}return n}},mH={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var A=[],n=t.filter(JT),i=0;i<n.length;i++){var r=n[i],o=n[i+1];if(zT(r)&&"none"!==r.value){var s=o&&XT(o)?o.number:0;A.push({counter:r.value,reset:s})}}return A}},BH={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(YT).map((function(t){return oH(e,t)}))}},yH={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var A=t[0];if(20===A.type&&"none"===A.value)return null;var n=[],i=t.filter(WT);if(i.length%2!=0)return null;for(var r=0;r<i.length;r+=2){var o=i[r].value,s=i[r+1].value;n.push({open:o,close:s})}return n}},CH=function(e,t,A){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?A?n.open:n.close:""},wH={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&$T(t[0],"none")?[]:ZT(t).map((function(t){for(var A={color:255,offsetX:iM,offsetY:iM,blur:iM,spread:iM,inset:!1},n=0,i=0;i<t.length;i++){var r=t[i];$T(r,"inset")?A.inset=!0:tM(r)?(0===n?A.offsetX=r:1===n?A.offsetY=r:2===n?A.blur=r:A.spread=r,n++):A.color=gM(e,r)}return A}))}},bH={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var A=[];return t.filter(zT).forEach((function(e){switch(e.value){case"stroke":A.push(1);break;case"fill":A.push(0);break;case"markers":A.push(2)}})),[0,1,2].forEach((function(e){-1===A.indexOf(e)&&A.push(e)})),A}},xH={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},QH={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return YT(t)?t.number:0}},EH=function(){function e(e,t){var A,n;this.animationDuration=SH(e,BH,t.animationDuration),this.backgroundClip=SH(e,EM,t.backgroundClip),this.backgroundColor=SH(e,IM,t.backgroundColor),this.backgroundImage=SH(e,XM,t.backgroundImage),this.backgroundOrigin=SH(e,zM,t.backgroundOrigin),this.backgroundPosition=SH(e,WM,t.backgroundPosition),this.backgroundRepeat=SH(e,$M,t.backgroundRepeat),this.backgroundSize=SH(e,eL,t.backgroundSize),this.borderTopColor=SH(e,nL,t.borderTopColor),this.borderRightColor=SH(e,iL,t.borderRightColor),this.borderBottomColor=SH(e,rL,t.borderBottomColor),this.borderLeftColor=SH(e,oL,t.borderLeftColor),this.borderTopLeftRadius=SH(e,aL,t.borderTopLeftRadius),this.borderTopRightRadius=SH(e,lL,t.borderTopRightRadius),this.borderBottomRightRadius=SH(e,cL,t.borderBottomRightRadius),this.borderBottomLeftRadius=SH(e,uL,t.borderBottomLeftRadius),this.borderTopStyle=SH(e,dL,t.borderTopStyle),this.borderRightStyle=SH(e,fL,t.borderRightStyle),this.borderBottomStyle=SH(e,gL,t.borderBottomStyle),this.borderLeftStyle=SH(e,pL,t.borderLeftStyle),this.borderTopWidth=SH(e,mL,t.borderTopWidth),this.borderRightWidth=SH(e,BL,t.borderRightWidth),this.borderBottomWidth=SH(e,yL,t.borderBottomWidth),this.borderLeftWidth=SH(e,CL,t.borderLeftWidth),this.boxShadow=SH(e,wH,t.boxShadow),this.color=SH(e,wL,t.color),this.direction=SH(e,bL,t.direction),this.display=SH(e,xL,t.display),this.float=SH(e,EL,t.cssFloat),this.fontFamily=SH(e,cH,t.fontFamily),this.fontSize=SH(e,uH,t.fontSize),this.fontStyle=SH(e,fH,t.fontStyle),this.fontVariant=SH(e,dH,t.fontVariant),this.fontWeight=SH(e,hH,t.fontWeight),this.letterSpacing=SH(e,IL,t.letterSpacing),this.lineBreak=SH(e,FL,t.lineBreak),this.lineHeight=SH(e,kL,t.lineHeight),this.listStyleImage=SH(e,OL,t.listStyleImage),this.listStylePosition=SH(e,DL,t.listStylePosition),this.listStyleType=SH(e,TL,t.listStyleType),this.marginTop=SH(e,LL,t.marginTop),this.marginRight=SH(e,HL,t.marginRight),this.marginBottom=SH(e,PL,t.marginBottom),this.marginLeft=SH(e,RL,t.marginLeft),this.opacity=SH(e,sH,t.opacity);var i=SH(e,NL,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=SH(e,jL,t.overflowWrap),this.paddingTop=SH(e,KL,t.paddingTop),this.paddingRight=SH(e,GL,t.paddingRight),this.paddingBottom=SH(e,YL,t.paddingBottom),this.paddingLeft=SH(e,XL,t.paddingLeft),this.paintOrder=SH(e,bH,t.paintOrder),this.position=SH(e,WL,t.position),this.textAlign=SH(e,zL,t.textAlign),this.textDecorationColor=SH(e,aH,null!==(A=t.textDecorationColor)&&void 0!==A?A:t.color),this.textDecorationLine=SH(e,lH,null!==(n=t.textDecorationLine)&&void 0!==n?n:t.textDecoration),this.textShadow=SH(e,$L,t.textShadow),this.textTransform=SH(e,JL,t.textTransform),this.transform=SH(e,qL,t.transform),this.transformOrigin=SH(e,AH,t.transformOrigin),this.visibility=SH(e,nH,t.visibility),this.webkitTextStrokeColor=SH(e,xH,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=SH(e,QH,t.webkitTextStrokeWidth),this.wordBreak=SH(e,iH,t.wordBreak),this.zIndex=SH(e,rH,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return pM(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return gH(this.display,4)||gH(this.display,33554432)||gH(this.display,268435456)||gH(this.display,536870912)||gH(this.display,67108864)||gH(this.display,134217728)},e}(),IH=function(){return function(e,t){this.content=SH(e,pH,t.content),this.quotes=SH(e,yH,t.quotes)}}(),_H=function(){return function(e,t){this.counterIncrement=SH(e,vH,t.counterIncrement),this.counterReset=SH(e,mH,t.counterReset)}}(),SH=function(e,t,A){var n=new KT,i=null!=A?A.toString():t.initialValue;n.write(i);var r=new GT(n.read());switch(t.type){case 2:var o=r.parseComponentValue();return t.parse(e,zT(o)?o.value:t.initialValue);case 0:return t.parse(e,r.parseComponentValue());case 1:return t.parse(e,r.parseComponentValues());case 4:return r.parseComponentValue();case 3:switch(t.format){case"angle":return uM(e,r.parseComponentValue());case"color":return gM(e,r.parseComponentValue());case"image":return VM(e,r.parseComponentValue());case"length":var s=r.parseComponentValue();return tM(s)?s:iM;case"length-percentage":var a=r.parseComponentValue();return AM(a)?a:iM;case"time":return oH(e,r.parseComponentValue())}}},FH=function(e,t){var A=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===A||t===A},kH=function(){return function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,FH(t,3),this.styles=new EH(e,window.getComputedStyle(t,null)),MP(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=AD(this.context,t),FH(t,4)&&(this.flags|=16)}}(),UH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",OH="undefined"==typeof Uint8Array?[]:new Uint8Array(256),DH=0;DH<64;DH++)OH[UH.charCodeAt(DH)]=DH;for(var TH=function(e,t,A){return e.slice?e.slice(t,A):new Uint16Array(Array.prototype.slice.call(e,t,A))},MH=function(){function e(e,t,A,n,i,r){this.initialValue=e,this.errorValue=t,this.highStart=A,this.highValueIndex=n,this.index=i,this.data=r}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),LH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",HH="undefined"==typeof Uint8Array?[]:new Uint8Array(256),PH=0;PH<64;PH++)HH[LH.charCodeAt(PH)]=PH;var RH,NH,jH=8,VH=9,KH=11,GH=12,YH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var A=e.length;if(!A)return"";for(var n=[],i=-1,r="";++i<A;){var o=e[i];o<=65535?n.push(o):(o-=65536,n.push(55296+(o>>10),o%1024+56320)),(i+1===A||n.length>16384)&&(r+=String.fromCharCode.apply(String,n),n.length=0)}return r},XH=function(e){var t=function(e){var t,A,n,i,r,o=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),c=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)A=OH[e.charCodeAt(t)],n=OH[e.charCodeAt(t+1)],i=OH[e.charCodeAt(t+2)],r=OH[e.charCodeAt(t+3)],c[a++]=A<<2|n>>4,c[a++]=(15&n)<<4|i>>2,c[a++]=(3&i)<<6|63&r;return l}(e),A=Array.isArray(t)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=4)A.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return A}(t):new Uint32Array(t),n=Array.isArray(t)?function(e){for(var t=e.length,A=[],n=0;n<t;n+=2)A.push(e[n+1]<<8|e[n]);return A}(t):new Uint16Array(t),i=TH(n,12,A[4]/2),r=2===A[5]?TH(n,(24+A[4])/2):function(e,t,A){return e.slice?e.slice(t,A):new Uint32Array(Array.prototype.slice.call(e,t,A))}(A,Math.ceil((24+A[4])/4));return new MH(A[0],A[1],A[2],A[3],i,r)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),zH="×",WH=function(e){return XH.get(e)},$H=function(e,t,A){var n=A-2,i=t[n],r=t[A-1],o=t[A];if(2===r&&3===o)return zH;if(2===r||3===r||4===r)return"÷";if(2===o||3===o||4===o)return"÷";if(r===jH&&-1!==[jH,VH,KH,GH].indexOf(o))return zH;if(!(r!==KH&&r!==VH||o!==VH&&10!==o))return zH;if((r===GH||10===r)&&10===o)return zH;if(13===o||5===o)return zH;if(7===o)return zH;if(1===r)return zH;if(13===r&&14===o){for(;5===i;)i=t[--n];if(14===i)return zH}if(15===r&&15===o){for(var s=0;15===i;)s++,i=t[--n];if(s%2==0)return zH}return"÷"},JH=function(e){var t=function(e){for(var t=[],A=0,n=e.length;A<n;){var i=e.charCodeAt(A++);if(i>=55296&&i<=56319&&A<n){var r=e.charCodeAt(A++);56320==(64512&r)?t.push(((1023&i)<<10)+(1023&r)+65536):(t.push(i),A--)}else t.push(i)}return t}(e),A=t.length,n=0,i=0,r=t.map(WH);return{next:function(){if(n>=A)return{done:!0,value:null};for(var e=zH;n<A&&(e=$H(0,r,++n))===zH;);if(e!==zH||n===A){var o=YH.apply(null,t.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},qH=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},ZH=function(e,t,A,n,i){var r="http://www.w3.org/2000/svg",o=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",A.toString()),s.setAttributeNS(null,"y",n.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(s),s.appendChild(i),o},eP=function(e){return new Promise((function(t,A){var n=new Image;n.onload=function(){return t(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},tP={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var A=e.createElement("boundtest");A.style.height="123px",A.style.display="block",e.body.appendChild(A),t.selectNode(A);var n=t.getBoundingClientRect(),i=Math.round(n.height);if(e.body.removeChild(A),123===i)return!0}}return!1}(document);return Object.defineProperty(tP,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=tP.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var A=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=t.firstChild,i=nD(n.data).map((function(e){return iD(e)})),r=0,o={},s=i.every((function(e,t){A.setStart(n,r),A.setEnd(n,r+e.length);var i=A.getBoundingClientRect();r+=e.length;var s=i.x>o.x||i.y>o.y;return o=i,0===t||s}));return e.body.removeChild(t),s}(document);return Object.defineProperty(tP,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,A=e.createElement("canvas"),n=A.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),A.toDataURL()}catch(i){return!1}return!0}(document);return Object.defineProperty(tP,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),A=100;t.width=A,t.height=A;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,A,A);var i=new Image,r=t.toDataURL();i.src=r;var o=ZH(A,A,0,0,i);return n.fillStyle="red",n.fillRect(0,0,A,A),eP(o).then((function(t){n.drawImage(t,0,0);var i=n.getImageData(0,0,A,A).data;n.fillStyle="red",n.fillRect(0,0,A,A);var o=e.createElement("div");return o.style.backgroundImage="url("+r+")",o.style.height=A+"px",qH(i)?eP(ZH(A,A,0,0,o)):Promise.reject(!1)})).then((function(e){return n.drawImage(e,0,0),qH(n.getImageData(0,0,A,A).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(tP,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(tP,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(tP,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(tP,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(tP,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},AP=function(){return function(e,t){this.text=e,this.bounds=t}}(),nP=function(e,t){var A=t.ownerDocument;if(A){var n=A.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(n,t);var r=AD(e,n);return n.firstChild&&i.replaceChild(n.firstChild,n),r}}return tD.EMPTY},iP=function(e,t,A){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(e,t),i.setEnd(e,t+A),i},rP=function(e){if(tP.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,A=JH(e),n=[];!(t=A.next()).done;)t.value&&n.push(t.value.slice());return n}(e)},oP=function(e,t){return 0!==t.letterSpacing?rP(e):function(e,t){if(tP.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(A.segment(e)).map((function(e){return e.segment}))}return aP(e,t)}(e,t)},sP=[32,160,4961,65792,65793,4153,4241],aP=function(e,t){for(var A,n=function(e,t){var A=nD(e),n=aT(A,t),i=n[0],r=n[1],o=n[2],s=A.length,a=0,l=0;return{next:function(){if(l>=s)return{done:!0,value:null};for(var e=WD;l<s&&(e=sT(A,r,i,++l,o))===WD;);if(e!==WD||l===s){var t=new lT(A,e,a,l);return a=l,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),i=[],r=function(){if(A.value){var e=A.value.slice(),t=nD(e),n="";t.forEach((function(e){-1===sP.indexOf(e)?n+=iD(e):(n.length&&i.push(n),i.push(iD(e)),n="")})),n.length&&i.push(n)}};!(A=n.next()).done;)r();return i},lP=function(){return function(e,t,A){this.text=cP(t.data,A.textTransform),this.textBounds=function(e,t,A,n){var i=oP(t,A),r=[],o=0;return i.forEach((function(t){if(A.textDecorationLine.length||t.trim().length>0)if(tP.SUPPORT_RANGE_BOUNDS){var i=iP(n,o,t.length).getClientRects();if(i.length>1){var s=rP(t),a=0;s.forEach((function(t){r.push(new AP(t,tD.fromDOMRectList(e,iP(n,a+o,t.length).getClientRects()))),a+=t.length}))}else r.push(new AP(t,tD.fromDOMRectList(e,i)))}else{var l=n.splitText(t.length);r.push(new AP(t,nP(e,n))),n=l}else tP.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));o+=t.length})),r}(e,this.text,A,t)}}(),cP=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(uP,hP);case 2:return e.toUpperCase();default:return e}},uP=/(^|\s|:|-|\(|\))([a-z])/g,hP=function(e,t,A){return e.length>0?t+A.toUpperCase():e},dP=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n.src=A.currentSrc||A.src,n.intrinsicWidth=A.naturalWidth,n.intrinsicHeight=A.naturalHeight,n.context.cache.addImage(n.src),n}return JO(t,e),t}(kH),fP=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n.canvas=A,n.intrinsicWidth=A.width,n.intrinsicHeight=A.height,n}return JO(t,e),t}(kH),gP=function(e){function t(t,A){var n=e.call(this,t,A)||this,i=new XMLSerializer,r=AD(t,A);return A.setAttribute("width",r.width+"px"),A.setAttribute("height",r.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(A)),n.intrinsicWidth=A.width.baseVal.value,n.intrinsicHeight=A.height.baseVal.value,n.context.cache.addImage(n.svg),n}return JO(t,e),t}(kH),pP=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n.value=A.value,n}return JO(t,e),t}(kH),vP=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n.start=A.start,n.reversed="boolean"==typeof A.reversed&&!0===A.reversed,n}return JO(t,e),t}(kH),mP=[{type:15,flags:0,unit:"px",number:3}],BP=[{type:16,flags:0,number:50}],yP="checkbox",CP="radio",wP="password",bP=707406591,xP=function(e){function t(t,A){var n,i,r,o=e.call(this,t,A)||this;switch(o.type=A.type.toLowerCase(),o.checked=A.checked,o.value=0===(i=(n=A).type===wP?new Array(n.value.length+1).join("•"):n.value).length?n.placeholder||"":i,o.type!==yP&&o.type!==CP||(o.styles.backgroundColor=3739148031,o.styles.borderTopColor=o.styles.borderRightColor=o.styles.borderBottomColor=o.styles.borderLeftColor=2779096575,o.styles.borderTopWidth=o.styles.borderRightWidth=o.styles.borderBottomWidth=o.styles.borderLeftWidth=1,o.styles.borderTopStyle=o.styles.borderRightStyle=o.styles.borderBottomStyle=o.styles.borderLeftStyle=1,o.styles.backgroundClip=[0],o.styles.backgroundOrigin=[0],o.bounds=(r=o.bounds).width>r.height?new tD(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new tD(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r),o.type){case yP:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=mP;break;case CP:o.styles.borderTopRightRadius=o.styles.borderTopLeftRadius=o.styles.borderBottomRightRadius=o.styles.borderBottomLeftRadius=BP}return o}return JO(t,e),t}(kH),QP=function(e){function t(t,A){var n=e.call(this,t,A)||this,i=A.options[A.selectedIndex||0];return n.value=i&&i.text||"",n}return JO(t,e),t}(kH),EP=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n.value=A.value,n}return JO(t,e),t}(kH),IP=function(e){function t(t,A){var n=e.call(this,t,A)||this;n.src=A.src,n.width=parseInt(A.width,10)||0,n.height=parseInt(A.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(A.contentWindow&&A.contentWindow.document&&A.contentWindow.document.documentElement){n.tree=kP(t,A.contentWindow.document.documentElement);var i=A.contentWindow.document.documentElement?xM(t,getComputedStyle(A.contentWindow.document.documentElement).backgroundColor):QM.TRANSPARENT,r=A.contentWindow.document.body?xM(t,getComputedStyle(A.contentWindow.document.body).backgroundColor):QM.TRANSPARENT;n.backgroundColor=pM(i)?pM(r)?n.styles.backgroundColor:r:i}}catch(o){}return n}return JO(t,e),t}(kH),_P=["OL","UL","MENU"],SP=function(e,t,A,n){for(var i=t.firstChild,r=void 0;i;i=r)if(r=i.nextSibling,DP(i)&&i.data.trim().length>0)A.textNodes.push(new lP(e,i,A.styles));else if(TP(i))if($P(i)&&i.assignedNodes)i.assignedNodes().forEach((function(t){return SP(e,t,A,n)}));else{var o=FP(e,i);o.styles.isVisible()&&(UP(i,o,n)?o.flags|=4:OP(o.styles)&&(o.flags|=2),-1!==_P.indexOf(i.tagName)&&(o.flags|=8),A.elements.push(o),i.slot,i.shadowRoot?SP(e,i.shadowRoot,o,n):zP(i)||NP(i)||WP(i)||SP(e,i,o,n))}},FP=function(e,t){return GP(t)?new dP(e,t):VP(t)?new fP(e,t):NP(t)?new gP(e,t):HP(t)?new pP(e,t):PP(t)?new vP(e,t):RP(t)?new xP(e,t):WP(t)?new QP(e,t):zP(t)?new EP(e,t):YP(t)?new IP(e,t):new kH(e,t)},kP=function(e,t){var A=FP(e,t);return A.flags|=4,SP(e,t,A,A),A},UP=function(e,t,A){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||jP(e)&&A.styles.isTransparent()},OP=function(e){return e.isPositioned()||e.isFloating()},DP=function(e){return e.nodeType===Node.TEXT_NODE},TP=function(e){return e.nodeType===Node.ELEMENT_NODE},MP=function(e){return TP(e)&&void 0!==e.style&&!LP(e)},LP=function(e){return"object"==typeof e.className},HP=function(e){return"LI"===e.tagName},PP=function(e){return"OL"===e.tagName},RP=function(e){return"INPUT"===e.tagName},NP=function(e){return"svg"===e.tagName},jP=function(e){return"BODY"===e.tagName},VP=function(e){return"CANVAS"===e.tagName},KP=function(e){return"VIDEO"===e.tagName},GP=function(e){return"IMG"===e.tagName},YP=function(e){return"IFRAME"===e.tagName},XP=function(e){return"STYLE"===e.tagName},zP=function(e){return"TEXTAREA"===e.tagName},WP=function(e){return"SELECT"===e.tagName},$P=function(e){return"SLOT"===e.tagName},JP=function(e){return e.tagName.indexOf("-")>0},qP=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,A=e.counterIncrement,n=e.counterReset,i=!0;null!==A&&A.forEach((function(e){var A=t.counters[e.counter];A&&0!==e.increment&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=e.increment)}));var r=[];return i&&n.forEach((function(e){var A=t.counters[e.counter];r.push(e.counter),A||(A=t.counters[e.counter]=[]),A.push(e.reset)})),r},e}(),ZP={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},eR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},tR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},AR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},nR=function(e,t,A,n,i,r){return e<t||e>A?hR(e,i,r.length>0):n.integers.reduce((function(t,A,i){for(;e>=A;)e-=A,t+=n.values[i];return t}),"")+r},iR=function(e,t,A,n){var i="";do{A||e--,i=n(e)+i,e/=t}while(e*t>=t);return i},rR=function(e,t,A,n,i){var r=A-t+1;return(e<0?"-":"")+(iR(Math.abs(e),r,n,(function(e){return iD(Math.floor(e%r)+t)}))+i)},oR=function(e,t,A){void 0===A&&(A=". ");var n=t.length;return iR(Math.abs(e),n,!1,(function(e){return t[Math.floor(e%n)]}))+A},sR=function(e,t,A,n,i,r){if(e<-9999||e>9999)return hR(e,4,i.length>0);var o=Math.abs(e),s=i;if(0===o)return t[0]+s;for(var a=0;o>0&&a<=4;a++){var l=o%10;0===l&&gH(r,1)&&""!==s?s=t[l]+s:l>1||1===l&&0===a||1===l&&1===a&&gH(r,2)||1===l&&1===a&&gH(r,4)&&e>100||1===l&&a>1&&gH(r,8)?s=t[l]+(a>0?A[a-1]:"")+s:1===l&&a>0&&(s=A[a-1]+s),o=Math.floor(o/10)}return(e<0?n:"")+s},aR="十百千萬",lR="拾佰仟萬",cR="マイナス",uR="마이너스",hR=function(e,t,A){var n=A?". ":"",i=A?"、":"",r=A?", ":"",o=A?" ":"";switch(t){case 0:return"•"+o;case 1:return"◦"+o;case 2:return"◾"+o;case 5:var s=rR(e,48,57,!0,n);return s.length<4?"0"+s:s;case 4:return oR(e,"〇一二三四五六七八九",i);case 6:return nR(e,1,3999,ZP,3,n).toLowerCase();case 7:return nR(e,1,3999,ZP,3,n);case 8:return rR(e,945,969,!1,n);case 9:return rR(e,97,122,!1,n);case 10:return rR(e,65,90,!1,n);case 11:return rR(e,1632,1641,!0,n);case 12:case 49:return nR(e,1,9999,eR,3,n);case 35:return nR(e,1,9999,eR,3,n).toLowerCase();case 13:return rR(e,2534,2543,!0,n);case 14:case 30:return rR(e,6112,6121,!0,n);case 15:return oR(e,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return oR(e,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return sR(e,"零一二三四五六七八九",aR,"負",i,14);case 47:return sR(e,"零壹貳參肆伍陸柒捌玖",lR,"負",i,15);case 42:return sR(e,"零一二三四五六七八九",aR,"负",i,14);case 41:return sR(e,"零壹贰叁肆伍陆柒捌玖",lR,"负",i,15);case 26:return sR(e,"〇一二三四五六七八九","十百千万",cR,i,0);case 25:return sR(e,"零壱弐参四伍六七八九","拾百千万",cR,i,7);case 31:return sR(e,"영일이삼사오육칠팔구","십백천만",uR,r,7);case 33:return sR(e,"零一二三四五六七八九","十百千萬",uR,r,0);case 32:return sR(e,"零壹貳參四五六七八九","拾百千",uR,r,7);case 18:return rR(e,2406,2415,!0,n);case 20:return nR(e,1,19999,AR,3,n);case 21:return rR(e,2790,2799,!0,n);case 22:return rR(e,2662,2671,!0,n);case 22:return nR(e,1,10999,tR,3,n);case 23:return oR(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return oR(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return rR(e,3302,3311,!0,n);case 28:return oR(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return oR(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return rR(e,3792,3801,!0,n);case 37:return rR(e,6160,6169,!0,n);case 38:return rR(e,4160,4169,!0,n);case 39:return rR(e,2918,2927,!0,n);case 40:return rR(e,1776,1785,!0,n);case 43:return rR(e,3046,3055,!0,n);case 44:return rR(e,3174,3183,!0,n);case 45:return rR(e,3664,3673,!0,n);case 46:return rR(e,3872,3881,!0,n);default:return rR(e,48,57,!0,n)}},dR="data-html2canvas-ignore",fR=function(){function e(e,t,A){if(this.context=e,this.options=A,this.scrolledElements=[],this.referenceElement=t,this.counters=new qP,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var A=this,n=vR(e,t);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,r=e.defaultView.pageYOffset,o=n.contentWindow,s=o.document,a=yR(n).then((function(){return ZO(A,0,void 0,(function(){var e,A;return eD(this,(function(i){switch(i.label){case 0:return this.scrolledElements.forEach(QR),o&&(o.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===t.top&&o.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(A=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:i.sent(),i.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,BR(s)]:[3,4];case 3:i.sent(),i.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(s,A)})).then((function(){return n}))]:[2,n]}}))}))}));return s.open(),s.write(bR(document.doctype)+"<html></html>"),xR(this.referenceElement.ownerDocument,i,r),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),a},e.prototype.createElementClone=function(e){if(FH(e,2),VP(e))return this.createCanvasClone(e);if(KP(e))return this.createVideoClone(e);if(XP(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return GP(t)&&(GP(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),JP(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return wR(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var A=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),n=e.cloneNode(!1);return n.textContent=A,n}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),"SecurityError"!==i.name)throw i}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var A=e.ownerDocument.createElement("img");try{return A.src=e.toDataURL(),A}catch(a){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var i=e.getContext("2d"),r=n.getContext("2d");if(r)if(!this.options.allowTaint&&i)r.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var o=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(o){var s=o.getContextAttributes();!1===(null==s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}r.drawImage(e,0,0)}return n}catch(a){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var A=t.getContext("2d");try{return A&&(A.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||A.getImageData(0,0,t.width,t.height)),t}catch(i){this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},e.prototype.appendChildNode=function(e,t,A){TP(t)&&("SCRIPT"===t.tagName||t.hasAttribute(dR)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&TP(t)&&XP(t)||e.appendChild(this.cloneNode(t,A))},e.prototype.cloneChildNodes=function(e,t,A){for(var n=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(TP(i)&&$P(i)&&"function"==typeof i.assignedNodes){var r=i.assignedNodes();r.length&&r.forEach((function(e){return n.appendChildNode(t,e,A)}))}else this.appendChildNode(t,i,A)},e.prototype.cloneNode=function(e,t){if(DP(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var A=e.ownerDocument.defaultView;if(A&&TP(e)&&(MP(e)||LP(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var i=A.getComputedStyle(e),r=A.getComputedStyle(e,":before"),o=A.getComputedStyle(e,":after");this.referenceElement===e&&MP(n)&&(this.clonedReferenceElement=n),jP(n)&&SR(n);var s=this.counters.parse(new _H(this.context,i)),a=this.resolvePseudoContent(e,n,r,RH.BEFORE);JP(e)&&(t=!0),KP(e)||this.cloneChildNodes(e,n,t),a&&n.insertBefore(a,n.firstChild);var l=this.resolvePseudoContent(e,n,o,RH.AFTER);return l&&n.appendChild(l),this.counters.pop(s),(i&&(this.options.copyStyles||LP(e))&&!YP(e)||t)&&wR(i,n),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(zP(e)||WP(e))&&(zP(n)||WP(n))&&(n.value=e.value),n}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,A,n){var i=this;if(A){var r=A.content,o=t.ownerDocument;if(o&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==A.display){this.counters.parse(new _H(this.context,A));var s=new IH(this.context,A),a=o.createElement("html2canvaspseudoelement");wR(A,a),s.content.forEach((function(t){if(0===t.type)a.appendChild(o.createTextNode(t.value));else if(22===t.type){var A=o.createElement("img");A.src=t.value,A.style.opacity="1",a.appendChild(A)}else if(18===t.type){if("attr"===t.name){var n=t.values.filter(zT);n.length&&a.appendChild(o.createTextNode(e.getAttribute(n[0].value)||""))}else if("counter"===t.name){var r=t.values.filter(qT),l=r[0],c=r[1];if(l&&zT(l)){var u=i.counters.getCounterValue(l.value),h=c&&zT(c)?TL.parse(i.context,c.value):3;a.appendChild(o.createTextNode(hR(u,h,!1)))}}else if("counters"===t.name){var d=t.values.filter(qT),f=(l=d[0],d[1]);c=d[2];if(l&&zT(l)){var g=i.counters.getCounterValues(l.value),p=c&&zT(c)?TL.parse(i.context,c.value):3,v=f&&0===f.type?f.value:"",m=g.map((function(e){return hR(e,p,!1)})).join(v);a.appendChild(o.createTextNode(m))}}}else if(20===t.type)switch(t.value){case"open-quote":a.appendChild(o.createTextNode(CH(s.quotes,i.quoteDepth++,!0)));break;case"close-quote":a.appendChild(o.createTextNode(CH(s.quotes,--i.quoteDepth,!1)));break;default:a.appendChild(o.createTextNode(t.value))}})),a.className=ER+" "+IR;var l=n===RH.BEFORE?" "+ER:" "+IR;return LP(t)?t.className.baseValue+=l:t.className+=l,a}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();(NH=RH||(RH={}))[NH.BEFORE=0]="BEFORE",NH[NH.AFTER=1]="AFTER";var gR,pR,vR=function(e,t){var A=e.createElement("iframe");return A.className="html2canvas-container",A.style.visibility="hidden",A.style.position="fixed",A.style.left="-10000px",A.style.top="0px",A.style.border="0",A.width=t.width.toString(),A.height=t.height.toString(),A.scrolling="no",A.setAttribute(dR,"true"),e.body.appendChild(A),A},mR=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},BR=function(e){return Promise.all([].slice.call(e.images,0).map(mR))},yR=function(e){return new Promise((function(t,A){var n=e.contentWindow;if(!n)return A("No window assigned for iframe");var i=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var A=setInterval((function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(A),t(e))}),50)}}))},CR=["all","d","content"],wR=function(e,t){for(var A=e.length-1;A>=0;A--){var n=e.item(A);-1===CR.indexOf(n)&&t.style.setProperty(n,e.getPropertyValue(n))}return t},bR=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},xR=function(e,t,A){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||A!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,A)},QR=function(e){var t=e[0],A=e[1],n=e[2];t.scrollLeft=A,t.scrollTop=n},ER="___html2canvas___pseudoelement_before",IR="___html2canvas___pseudoelement_after",_R='{\n    content: "" !important;\n    display: none !important;\n}',SR=function(e){FR(e,"."+ER+":before"+_R+"\n         ."+IR+":after"+_R)},FR=function(e,t){var A=e.ownerDocument;if(A){var n=A.createElement("style");n.textContent=t,e.appendChild(n)}},kR=function(){function e(){}return e.getOrigin=function(t){var A=e._link;return A?(A.href=t,A.href=A.href,A.protocol+A.hostname+A.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),UR=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:PR(e)||MR(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return ZO(this,0,void 0,(function(){var t,A,n,i,r=this;return eD(this,(function(o){switch(o.label){case 0:return t=kR.isSameOrigin(e),A=!LR(e)&&!0===this._options.useCORS&&tP.SUPPORT_CORS_IMAGES&&!t,n=!LR(e)&&!t&&!PR(e)&&"string"==typeof this._options.proxy&&tP.SUPPORT_CORS_XHR&&!A,t||!1!==this._options.allowTaint||LR(e)||PR(e)||n||A?(i=e,n?[4,this.proxy(i)]:[3,2]):[2];case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(HR(i)||A)&&(n.crossOrigin="anonymous"),n.src=i,!0===n.complete&&setTimeout((function(){return e(n)}),500),r._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+r._options.imageTimeout+"ms) loading image")}),r._options.imageTimeout)}))];case 3:return[2,o.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,A=this._options.proxy;if(!A)throw new Error("No proxy defined");var n=e.substring(0,256);return new Promise((function(i,r){var o=tP.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===o)i(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return i(e.result)}),!1),e.addEventListener("error",(function(e){return r(e)}),!1),e.readAsDataURL(s.response)}else r("Failed to proxy resource "+n+" with status code "+s.status)},s.onerror=r;var a=A.indexOf("?")>-1?"&":"?";if(s.open("GET",""+A+a+"url="+encodeURIComponent(e)+"&responseType="+o),"text"!==o&&s instanceof XMLHttpRequest&&(s.responseType=o),t._options.imageTimeout){var l=t._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return r("Timed out ("+l+"ms) proxying "+n)}}s.send()}))},e}(),OR=/^data:image\/svg\+xml/i,DR=/^data:image\/.*;base64,/i,TR=/^data:image\/.*/i,MR=function(e){return tP.SUPPORT_SVG_DRAWING||!RR(e)},LR=function(e){return TR.test(e)},HR=function(e){return DR.test(e)},PR=function(e){return"blob"===e.substr(0,4)},RR=function(e){return"svg"===e.substr(-3).toLowerCase()||OR.test(e)},NR=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,A){return new e(this.x+t,this.y+A)},e}(),jR=function(e,t,A){return new NR(e.x+(t.x-e.x)*A,e.y+(t.y-e.y)*A)},VR=function(){function e(e,t,A,n){this.type=1,this.start=e,this.startControl=t,this.endControl=A,this.end=n}return e.prototype.subdivide=function(t,A){var n=jR(this.start,this.startControl,t),i=jR(this.startControl,this.endControl,t),r=jR(this.endControl,this.end,t),o=jR(n,i,t),s=jR(i,r,t),a=jR(o,s,t);return A?new e(this.start,n,o,a):new e(a,s,r,this.end)},e.prototype.add=function(t,A){return new e(this.start.add(t,A),this.startControl.add(t,A),this.endControl.add(t,A),this.end.add(t,A))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),KR=function(e){return 1===e.type},GR=function(){return function(e){var t=e.styles,A=e.bounds,n=sM(t.borderTopLeftRadius,A.width,A.height),i=n[0],r=n[1],o=sM(t.borderTopRightRadius,A.width,A.height),s=o[0],a=o[1],l=sM(t.borderBottomRightRadius,A.width,A.height),c=l[0],u=l[1],h=sM(t.borderBottomLeftRadius,A.width,A.height),d=h[0],f=h[1],g=[];g.push((i+s)/A.width),g.push((d+c)/A.width),g.push((r+f)/A.height),g.push((a+u)/A.height);var p=Math.max.apply(Math,g);p>1&&(i/=p,r/=p,s/=p,a/=p,c/=p,u/=p,d/=p,f/=p);var v=A.width-s,m=A.height-u,B=A.width-c,y=A.height-f,C=t.borderTopWidth,w=t.borderRightWidth,b=t.borderBottomWidth,x=t.borderLeftWidth,Q=aM(t.paddingTop,e.bounds.width),E=aM(t.paddingRight,e.bounds.width),I=aM(t.paddingBottom,e.bounds.width),_=aM(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||r>0?YR(A.left+x/3,A.top+C/3,i-x/3,r-C/3,gR.TOP_LEFT):new NR(A.left+x/3,A.top+C/3),this.topRightBorderDoubleOuterBox=i>0||r>0?YR(A.left+v,A.top+C/3,s-w/3,a-C/3,gR.TOP_RIGHT):new NR(A.left+A.width-w/3,A.top+C/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?YR(A.left+B,A.top+m,c-w/3,u-b/3,gR.BOTTOM_RIGHT):new NR(A.left+A.width-w/3,A.top+A.height-b/3),this.bottomLeftBorderDoubleOuterBox=d>0||f>0?YR(A.left+x/3,A.top+y,d-x/3,f-b/3,gR.BOTTOM_LEFT):new NR(A.left+x/3,A.top+A.height-b/3),this.topLeftBorderDoubleInnerBox=i>0||r>0?YR(A.left+2*x/3,A.top+2*C/3,i-2*x/3,r-2*C/3,gR.TOP_LEFT):new NR(A.left+2*x/3,A.top+2*C/3),this.topRightBorderDoubleInnerBox=i>0||r>0?YR(A.left+v,A.top+2*C/3,s-2*w/3,a-2*C/3,gR.TOP_RIGHT):new NR(A.left+A.width-2*w/3,A.top+2*C/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?YR(A.left+B,A.top+m,c-2*w/3,u-2*b/3,gR.BOTTOM_RIGHT):new NR(A.left+A.width-2*w/3,A.top+A.height-2*b/3),this.bottomLeftBorderDoubleInnerBox=d>0||f>0?YR(A.left+2*x/3,A.top+y,d-2*x/3,f-2*b/3,gR.BOTTOM_LEFT):new NR(A.left+2*x/3,A.top+A.height-2*b/3),this.topLeftBorderStroke=i>0||r>0?YR(A.left+x/2,A.top+C/2,i-x/2,r-C/2,gR.TOP_LEFT):new NR(A.left+x/2,A.top+C/2),this.topRightBorderStroke=i>0||r>0?YR(A.left+v,A.top+C/2,s-w/2,a-C/2,gR.TOP_RIGHT):new NR(A.left+A.width-w/2,A.top+C/2),this.bottomRightBorderStroke=c>0||u>0?YR(A.left+B,A.top+m,c-w/2,u-b/2,gR.BOTTOM_RIGHT):new NR(A.left+A.width-w/2,A.top+A.height-b/2),this.bottomLeftBorderStroke=d>0||f>0?YR(A.left+x/2,A.top+y,d-x/2,f-b/2,gR.BOTTOM_LEFT):new NR(A.left+x/2,A.top+A.height-b/2),this.topLeftBorderBox=i>0||r>0?YR(A.left,A.top,i,r,gR.TOP_LEFT):new NR(A.left,A.top),this.topRightBorderBox=s>0||a>0?YR(A.left+v,A.top,s,a,gR.TOP_RIGHT):new NR(A.left+A.width,A.top),this.bottomRightBorderBox=c>0||u>0?YR(A.left+B,A.top+m,c,u,gR.BOTTOM_RIGHT):new NR(A.left+A.width,A.top+A.height),this.bottomLeftBorderBox=d>0||f>0?YR(A.left,A.top+y,d,f,gR.BOTTOM_LEFT):new NR(A.left,A.top+A.height),this.topLeftPaddingBox=i>0||r>0?YR(A.left+x,A.top+C,Math.max(0,i-x),Math.max(0,r-C),gR.TOP_LEFT):new NR(A.left+x,A.top+C),this.topRightPaddingBox=s>0||a>0?YR(A.left+Math.min(v,A.width-w),A.top+C,v>A.width+w?0:Math.max(0,s-w),Math.max(0,a-C),gR.TOP_RIGHT):new NR(A.left+A.width-w,A.top+C),this.bottomRightPaddingBox=c>0||u>0?YR(A.left+Math.min(B,A.width-x),A.top+Math.min(m,A.height-b),Math.max(0,c-w),Math.max(0,u-b),gR.BOTTOM_RIGHT):new NR(A.left+A.width-w,A.top+A.height-b),this.bottomLeftPaddingBox=d>0||f>0?YR(A.left+x,A.top+Math.min(y,A.height-b),Math.max(0,d-x),Math.max(0,f-b),gR.BOTTOM_LEFT):new NR(A.left+x,A.top+A.height-b),this.topLeftContentBox=i>0||r>0?YR(A.left+x+_,A.top+C+Q,Math.max(0,i-(x+_)),Math.max(0,r-(C+Q)),gR.TOP_LEFT):new NR(A.left+x+_,A.top+C+Q),this.topRightContentBox=s>0||a>0?YR(A.left+Math.min(v,A.width+x+_),A.top+C+Q,v>A.width+x+_?0:s-x+_,a-(C+Q),gR.TOP_RIGHT):new NR(A.left+A.width-(w+E),A.top+C+Q),this.bottomRightContentBox=c>0||u>0?YR(A.left+Math.min(B,A.width-(x+_)),A.top+Math.min(m,A.height+C+Q),Math.max(0,c-(w+E)),u-(b+I),gR.BOTTOM_RIGHT):new NR(A.left+A.width-(w+E),A.top+A.height-(b+I)),this.bottomLeftContentBox=d>0||f>0?YR(A.left+x+_,A.top+y,Math.max(0,d-(x+_)),f-(b+I),gR.BOTTOM_LEFT):new NR(A.left+x+_,A.top+A.height-(b+I))}}();(pR=gR||(gR={}))[pR.TOP_LEFT=0]="TOP_LEFT",pR[pR.TOP_RIGHT=1]="TOP_RIGHT",pR[pR.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",pR[pR.BOTTOM_LEFT=3]="BOTTOM_LEFT";var YR=function(e,t,A,n,i){var r=(Math.sqrt(2)-1)/3*4,o=A*r,s=n*r,a=e+A,l=t+n;switch(i){case gR.TOP_LEFT:return new VR(new NR(e,l),new NR(e,l-s),new NR(a-o,t),new NR(a,t));case gR.TOP_RIGHT:return new VR(new NR(e,t),new NR(e+o,t),new NR(a,l-s),new NR(a,l));case gR.BOTTOM_RIGHT:return new VR(new NR(a,t),new NR(a,t+s),new NR(e+o,l),new NR(e,l));case gR.BOTTOM_LEFT:default:return new VR(new NR(a,l),new NR(a-o,l),new NR(e,t+s),new NR(e,t))}},XR=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},zR=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},WR=function(){return function(e,t,A){this.offsetX=e,this.offsetY=t,this.matrix=A,this.type=0,this.target=6}}(),$R=function(){return function(e,t){this.path=e,this.target=t,this.type=1}}(),JR=function(){return function(e){this.opacity=e,this.type=2,this.target=6}}(),qR=function(e){return 1===e.type},ZR=function(e,t){return e.length===t.length&&e.some((function(e,A){return e===t[A]}))},eN=function(){return function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}}(),tN=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new GR(this.container),this.container.styles.opacity<1&&this.effects.push(new JR(this.container.styles.opacity)),null!==this.container.styles.transform){var A=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new WR(A,n,i))}if(0!==this.container.styles.overflowX){var r=XR(this.curves),o=zR(this.curves);ZR(r,o)?this.effects.push(new $R(r,6)):(this.effects.push(new $R(r,2)),this.effects.push(new $R(o,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),A=this.parent,n=this.effects.slice(0);A;){var i=A.effects.filter((function(e){return!qR(e)}));if(t||0!==A.container.styles.position||!A.parent){if(n.unshift.apply(n,i),t=-1===[2,3].indexOf(A.container.styles.position),0!==A.container.styles.overflowX){var r=XR(A.curves),o=zR(A.curves);ZR(r,o)||n.unshift(new $R(o,6))}}else n.unshift.apply(n,i);A=A.parent}return n.filter((function(t){return gH(t.target,e)}))},e}(),AN=function(e,t,A,n){e.container.elements.forEach((function(i){var r=gH(i.flags,4),o=gH(i.flags,2),s=new tN(i,e);gH(i.styles.display,2048)&&n.push(s);var a=gH(i.flags,8)?[]:n;if(r||o){var l=r||i.styles.isPositioned()?A:t,c=new eN(s);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;l.negativeZIndex.some((function(e,t){return u>e.element.container.styles.zIndex.order?(h=t,!1):h>0})),l.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;l.positiveZIndex.some((function(e,t){return u>=e.element.container.styles.zIndex.order?(d=t+1,!1):d>0})),l.positiveZIndex.splice(d,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);AN(s,c,r?c:A,a)}else i.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),AN(s,t,A,a);gH(i.flags,8)&&nN(i,a)}))},nN=function(e,t){for(var A=e instanceof vP?e.start:1,n=e instanceof vP&&e.reversed,i=0;i<t.length;i++){var r=t[i];r.container instanceof pP&&"number"==typeof r.container.value&&0!==r.container.value&&(A=r.container.value),r.listValue=hR(A,r.container.styles.listStyleType,!0),A+=n?-1:1}},iN=function(e,t){switch(t){case 0:return oN(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return oN(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return oN(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return oN(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},rN=function(e,t){var A=[];return KR(e)?A.push(e.subdivide(.5,!1)):A.push(e),KR(t)?A.push(t.subdivide(.5,!0)):A.push(t),A},oN=function(e,t,A,n){var i=[];return KR(e)?i.push(e.subdivide(.5,!1)):i.push(e),KR(A)?i.push(A.subdivide(.5,!0)):i.push(A),KR(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),KR(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},sN=function(e){var t=e.bounds,A=e.styles;return t.add(A.borderLeftWidth,A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth),-(A.borderTopWidth+A.borderBottomWidth))},aN=function(e){var t=e.styles,A=e.bounds,n=aM(t.paddingLeft,A.width),i=aM(t.paddingRight,A.width),r=aM(t.paddingTop,A.width),o=aM(t.paddingBottom,A.width);return A.add(n+t.borderLeftWidth,r+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+i),-(t.borderTopWidth+t.borderBottomWidth+r+o))},lN=function(e,t,A){var n,i,r=(n=dN(e.styles.backgroundOrigin,t),i=e,0===n?i.bounds:2===n?aN(i):sN(i)),o=function(e,t){return 0===e?t.bounds:2===e?aN(t):sN(t)}(dN(e.styles.backgroundClip,t),e),s=hN(dN(e.styles.backgroundSize,t),A,r),a=s[0],l=s[1],c=sM(dN(e.styles.backgroundPosition,t),r.width-a,r.height-l);return[fN(dN(e.styles.backgroundRepeat,t),c,s,r,o),Math.round(r.left+c[0]),Math.round(r.top+c[1]),a,l]},cN=function(e){return zT(e)&&e.value===KM.AUTO},uN=function(e){return"number"==typeof e},hN=function(e,t,A){var n=t[0],i=t[1],r=t[2],o=e[0],s=e[1];if(!o)return[0,0];if(AM(o)&&s&&AM(s))return[aM(o,A.width),aM(s,A.height)];var a=uN(r);if(zT(o)&&(o.value===KM.CONTAIN||o.value===KM.COVER))return uN(r)?A.width/A.height<r!=(o.value===KM.COVER)?[A.width,A.width/r]:[A.height*r,A.height]:[A.width,A.height];var l=uN(n),c=uN(i),u=l||c;if(cN(o)&&(!s||cN(s)))return l&&c?[n,i]:a||u?u&&a?[l?n:i*r,c?i:n/r]:[l?n:A.width,c?i:A.height]:[A.width,A.height];if(a){var h=0,d=0;return AM(o)?h=aM(o,A.width):AM(s)&&(d=aM(s,A.height)),cN(o)?h=d*r:s&&!cN(s)||(d=h/r),[h,d]}var f=null,g=null;if(AM(o)?f=aM(o,A.width):s&&AM(s)&&(g=aM(s,A.height)),null===f||s&&!cN(s)||(g=l&&c?f/n*i:A.height),null!==g&&cN(o)&&(f=l&&c?g/i*n:A.width),null!==f&&null!==g)return[f,g];throw new Error("Unable to calculate background-size for element")},dN=function(e,t){var A=e[t];return void 0===A?e[0]:A},fN=function(e,t,A,n,i){var r=t[0],o=t[1],s=A[0],a=A[1];switch(e){case 2:return[new NR(Math.round(n.left),Math.round(n.top+o)),new NR(Math.round(n.left+n.width),Math.round(n.top+o)),new NR(Math.round(n.left+n.width),Math.round(a+n.top+o)),new NR(Math.round(n.left),Math.round(a+n.top+o))];case 3:return[new NR(Math.round(n.left+r),Math.round(n.top)),new NR(Math.round(n.left+r+s),Math.round(n.top)),new NR(Math.round(n.left+r+s),Math.round(n.height+n.top)),new NR(Math.round(n.left+r),Math.round(n.height+n.top))];case 1:return[new NR(Math.round(n.left+r),Math.round(n.top+o)),new NR(Math.round(n.left+r+s),Math.round(n.top+o)),new NR(Math.round(n.left+r+s),Math.round(n.top+o+a)),new NR(Math.round(n.left+r),Math.round(n.top+o+a))];default:return[new NR(Math.round(i.left),Math.round(i.top)),new NR(Math.round(i.left+i.width),Math.round(i.top)),new NR(Math.round(i.left+i.width),Math.round(i.height+i.top)),new NR(Math.round(i.left),Math.round(i.height+i.top))]}},gN="Hidden Text",pN=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var A=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),r=this._document.body;A.style.visibility="hidden",A.style.fontFamily=e,A.style.fontSize=t,A.style.margin="0",A.style.padding="0",A.style.whiteSpace="nowrap",r.appendChild(A),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(gN)),A.appendChild(i),A.appendChild(n);var o=n.offsetTop-i.offsetTop+2;A.removeChild(i),A.appendChild(this._document.createTextNode(gN)),A.style.lineHeight="normal",n.style.verticalAlign="super";var s=n.offsetTop-A.offsetTop+2;return r.removeChild(A),{baseline:o,middle:s}},e.prototype.getMetrics=function(e,t){var A=e+" "+t;return void 0===this._data[A]&&(this._data[A]=this.parseMetrics(e,t)),this._data[A]},e}(),vN=function(){return function(e,t){this.context=e,this.options=t}}(),mN=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n._activeEffects=[],n.canvas=A.canvas?A.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),A.canvas||(n.canvas.width=Math.floor(A.width*A.scale),n.canvas.height=Math.floor(A.height*A.scale),n.canvas.style.width=A.width+"px",n.canvas.style.height=A.height+"px"),n.fontMetrics=new pN(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-A.x,-A.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+A.width+"x"+A.height+") with scale "+A.scale),n}return JO(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},t.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),qR(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return ZO(this,0,void 0,(function(){return eD(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(e){return ZO(this,0,void 0,(function(){return eD(this,(function(t){switch(t.label){case 0:return gH(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(e,t,A){var n=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+A):rP(e.text).reduce((function(t,i){return n.ctx.fillText(i,t,e.bounds.top+A),t+n.ctx.measureText(i).width}),e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),A=bN(e.fontFamily).join(", "),n=YT(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,A].join(" "),A,n]},t.prototype.renderTextNode=function(e,t){return ZO(this,0,void 0,(function(){var A,n,i,r,o,s,a,l,c=this;return eD(this,(function(u){return A=this.createFontStyle(t),n=A[0],i=A[1],r=A[2],this.ctx.font=n,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,r),s=o.baseline,a=o.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(A){switch(A){case 0:c.ctx.fillStyle=vM(t.color),c.renderTextWithLetterSpacing(e,t.letterSpacing,s);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach((function(A){c.ctx.shadowColor=vM(A.color),c.ctx.shadowOffsetX=A.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=A.offsetY.number*c.options.scale,c.ctx.shadowBlur=A.blur.number,c.renderTextWithLetterSpacing(e,t.letterSpacing,s)})),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),t.textDecorationLine.length&&(c.ctx.fillStyle=vM(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+s),e.bounds.width,1);break;case 2:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:c.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+a),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(c.ctx.strokeStyle=vM(t.webkitTextStrokeColor),c.ctx.lineWidth=t.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+s)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(e,t,A){if(A&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=aN(e),i=zR(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(A,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return ZO(this,0,void 0,(function(){var A,n,i,r,o,s,a,l,c,u,h,d,f,g,p,v,m,B;return eD(this,(function(y){switch(y.label){case 0:this.applyEffects(e.getEffects(4)),A=e.container,n=e.curves,i=A.styles,r=0,o=A.textNodes,y.label=1;case 1:return r<o.length?(s=o[r],[4,this.renderTextNode(s,i)]):[3,4];case 2:y.sent(),y.label=3;case 3:return r++,[3,1];case 4:if(!(A instanceof dP))return[3,8];y.label=5;case 5:return y.trys.push([5,7,,8]),[4,this.context.cache.match(A.src)];case 6:return p=y.sent(),this.renderReplacedElement(A,n,p),[3,8];case 7:return y.sent(),this.context.logger.error("Error loading image "+A.src),[3,8];case 8:if(A instanceof fP&&this.renderReplacedElement(A,n,A.canvas),!(A instanceof gP))return[3,12];y.label=9;case 9:return y.trys.push([9,11,,12]),[4,this.context.cache.match(A.svg)];case 10:return p=y.sent(),this.renderReplacedElement(A,n,p),[3,12];case 11:return y.sent(),this.context.logger.error("Error loading svg "+A.svg.substring(0,255)),[3,12];case 12:return A instanceof IP&&A.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:A.backgroundColor,x:0,y:0,width:A.width,height:A.height}).render(A.tree)]:[3,14];case 13:a=y.sent(),A.width&&A.height&&this.ctx.drawImage(a,0,0,A.width,A.height,A.bounds.left,A.bounds.top,A.bounds.width,A.bounds.height),y.label=14;case 14:if(A instanceof xP&&(l=Math.min(A.bounds.width,A.bounds.height),A.type===yP?A.checked&&(this.ctx.save(),this.path([new NR(A.bounds.left+.39363*l,A.bounds.top+.79*l),new NR(A.bounds.left+.16*l,A.bounds.top+.5549*l),new NR(A.bounds.left+.27347*l,A.bounds.top+.44071*l),new NR(A.bounds.left+.39694*l,A.bounds.top+.5649*l),new NR(A.bounds.left+.72983*l,A.bounds.top+.23*l),new NR(A.bounds.left+.84*l,A.bounds.top+.34085*l),new NR(A.bounds.left+.39363*l,A.bounds.top+.79*l)]),this.ctx.fillStyle=vM(bP),this.ctx.fill(),this.ctx.restore()):A.type===CP&&A.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(A.bounds.left+l/2,A.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=vM(bP),this.ctx.fill(),this.ctx.restore())),BN(A)&&A.value.length){switch(c=this.createFontStyle(i),m=c[0],u=c[1],h=this.fontMetrics.getMetrics(m,u).baseline,this.ctx.font=m,this.ctx.fillStyle=vM(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=CN(A.styles.textAlign),B=aN(A),d=0,A.styles.textAlign){case 1:d+=B.width/2;break;case 2:d+=B.width}f=B.add(d,0,0,-B.height/2+1),this.ctx.save(),this.path([new NR(B.left,B.top),new NR(B.left+B.width,B.top),new NR(B.left+B.width,B.top+B.height),new NR(B.left,B.top+B.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new AP(A.value,f),i.letterSpacing,h),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gH(A.styles.display,2048))return[3,20];if(null===A.styles.listStyleImage)return[3,19];if(0!==(g=A.styles.listStyleImage).type)return[3,18];p=void 0,v=g.url,y.label=15;case 15:return y.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return p=y.sent(),this.ctx.drawImage(p,A.bounds.left-(p.width+10),A.bounds.top),[3,18];case 17:return y.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==A.styles.listStyleType&&(m=this.createFontStyle(i)[0],this.ctx.font=m,this.ctx.fillStyle=vM(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",B=new tD(A.bounds.left,A.bounds.top+aM(A.styles.paddingTop,A.bounds.width),A.bounds.width,UL(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new AP(e.listValue,B),i.letterSpacing,UL(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),y.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(e){return ZO(this,0,void 0,(function(){var t,A,n,i,r,o,s,a,l,c,u,h,d,f,g;return eD(this,(function(p){switch(p.label){case 0:return gH(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:p.sent(),t=0,A=e.negativeZIndex,p.label=2;case 2:return t<A.length?(g=A[t],[4,this.renderStack(g)]):[3,5];case 3:p.sent(),p.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:p.sent(),n=0,i=e.nonInlineLevel,p.label=7;case 7:return n<i.length?(g=i[n],[4,this.renderNode(g)]):[3,10];case 8:p.sent(),p.label=9;case 9:return n++,[3,7];case 10:r=0,o=e.nonPositionedFloats,p.label=11;case 11:return r<o.length?(g=o[r],[4,this.renderStack(g)]):[3,14];case 12:p.sent(),p.label=13;case 13:return r++,[3,11];case 14:s=0,a=e.nonPositionedInlineLevel,p.label=15;case 15:return s<a.length?(g=a[s],[4,this.renderStack(g)]):[3,18];case 16:p.sent(),p.label=17;case 17:return s++,[3,15];case 18:l=0,c=e.inlineLevel,p.label=19;case 19:return l<c.length?(g=c[l],[4,this.renderNode(g)]):[3,22];case 20:p.sent(),p.label=21;case 21:return l++,[3,19];case 22:u=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,p.label=23;case 23:return u<h.length?(g=h[u],[4,this.renderStack(g)]):[3,26];case 24:p.sent(),p.label=25;case 25:return u++,[3,23];case 26:d=0,f=e.positiveZIndex,p.label=27;case 27:return d<f.length?(g=f[d],[4,this.renderStack(g)]):[3,30];case 28:p.sent(),p.label=29;case 29:return d++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach((function(e,A){var n=KR(e)?e.start:e;0===A?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),KR(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},t.prototype.renderRepeat=function(e,t,A,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(A,n),this.ctx.fill(),this.ctx.translate(-A,-n)},t.prototype.resizeImage=function(e,t,A){var n;if(e.width===t&&e.height===A)return e;var i=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return i.width=Math.max(1,t),i.height=Math.max(1,A),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,A),i},t.prototype.renderBackgroundImage=function(e){return ZO(this,0,void 0,(function(){var t,A,n,i,r,o;return eD(this,(function(s){switch(s.label){case 0:t=e.styles.backgroundImage.length-1,A=function(A){var i,r,o,s,a,l,c,u,h,d,f,g,p,v,m,B,y,C,w,b,x,Q,E,I,_,S,F,k,U,O,D;return eD(this,(function(T){switch(T.label){case 0:if(0!==A.type)return[3,5];i=void 0,r=A.url,T.label=1;case 1:return T.trys.push([1,3,,4]),[4,n.context.cache.match(r)];case 2:return i=T.sent(),[3,4];case 3:return T.sent(),n.context.logger.error("Error loading background-image "+r),[3,4];case 4:return i&&(o=lN(e,t,[i.width,i.height,i.width/i.height]),B=o[0],Q=o[1],E=o[2],w=o[3],b=o[4],v=n.ctx.createPattern(n.resizeImage(i,w,b),"repeat"),n.renderRepeat(B,v,Q,E)),[3,6];case 5:1===A.type?(s=lN(e,t,[null,null,null]),B=s[0],Q=s[1],E=s[2],w=s[3],b=s[4],a=FM(A.angle,w,b),l=a[0],c=a[1],u=a[2],h=a[3],d=a[4],(f=document.createElement("canvas")).width=w,f.height=b,g=f.getContext("2d"),p=g.createLinearGradient(c,h,u,d),SM(A.stops,l).forEach((function(e){return p.addColorStop(e.stop,vM(e.color))})),g.fillStyle=p,g.fillRect(0,0,w,b),w>0&&b>0&&(v=n.ctx.createPattern(f,"repeat"),n.renderRepeat(B,v,Q,E))):function(e){return 2===e.type}(A)&&(m=lN(e,t,[null,null,null]),B=m[0],y=m[1],C=m[2],w=m[3],b=m[4],x=0===A.position.length?[rM]:A.position,Q=aM(x[0],w),E=aM(x[x.length-1],b),I=function(e,t,A,n,i){var r=0,o=0;switch(e.size){case 0:0===e.shape?r=o=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(A),Math.abs(A-i)):1===e.shape&&(r=Math.min(Math.abs(t),Math.abs(t-n)),o=Math.min(Math.abs(A),Math.abs(A-i)));break;case 2:if(0===e.shape)r=o=Math.min(kM(t,A),kM(t,A-i),kM(t-n,A),kM(t-n,A-i));else if(1===e.shape){var s=Math.min(Math.abs(A),Math.abs(A-i))/Math.min(Math.abs(t),Math.abs(t-n)),a=UM(n,i,t,A,!0),l=a[0],c=a[1];o=s*(r=kM(l-t,(c-A)/s))}break;case 1:0===e.shape?r=o=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(A),Math.abs(A-i)):1===e.shape&&(r=Math.max(Math.abs(t),Math.abs(t-n)),o=Math.max(Math.abs(A),Math.abs(A-i)));break;case 3:if(0===e.shape)r=o=Math.max(kM(t,A),kM(t,A-i),kM(t-n,A),kM(t-n,A-i));else if(1===e.shape){s=Math.max(Math.abs(A),Math.abs(A-i))/Math.max(Math.abs(t),Math.abs(t-n));var u=UM(n,i,t,A,!1);l=u[0],c=u[1],o=s*(r=kM(l-t,(c-A)/s))}}return Array.isArray(e.size)&&(r=aM(e.size[0],n),o=2===e.size.length?aM(e.size[1],i):r),[r,o]}(A,Q,E,w,b),_=I[0],S=I[1],_>0&&S>0&&(F=n.ctx.createRadialGradient(y+Q,C+E,0,y+Q,C+E,_),SM(A.stops,2*_).forEach((function(e){return F.addColorStop(e.stop,vM(e.color))})),n.path(B),n.ctx.fillStyle=F,_!==S?(k=e.bounds.left+.5*e.bounds.width,U=e.bounds.top+.5*e.bounds.height,D=1/(O=S/_),n.ctx.save(),n.ctx.translate(k,U),n.ctx.transform(1,0,0,O,0,0),n.ctx.translate(-k,-U),n.ctx.fillRect(y,D*(C-U)+U,w,b*D),n.ctx.restore()):n.ctx.fill())),T.label=6;case 6:return t--,[2]}}))},n=this,i=0,r=e.styles.backgroundImage.slice(0).reverse(),s.label=1;case 1:return i<r.length?(o=r[i],[5,A(o)]):[3,4];case 2:s.sent(),s.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(e,t,A){return ZO(this,0,void 0,(function(){return eD(this,(function(n){return this.path(iN(A,t)),this.ctx.fillStyle=vM(e),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(e,t,A,n){return ZO(this,0,void 0,(function(){var i,r;return eD(this,(function(o){switch(o.label){case 0:return t<3?[4,this.renderSolidBorder(e,A,n)]:[3,2];case 1:return o.sent(),[2];case 2:return i=function(e,t){switch(t){case 0:return oN(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return oN(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return oN(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return oN(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(n,A),this.path(i),this.ctx.fillStyle=vM(e),this.ctx.fill(),r=function(e,t){switch(t){case 0:return oN(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return oN(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return oN(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return oN(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(n,A),this.path(r),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(e){return ZO(this,0,void 0,(function(){var t,A,n,i,r,o,s,a,l=this;return eD(this,(function(c){switch(c.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,A=!pM(t.backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],i=yN(dN(t.backgroundClip,0),e.curves),A||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),pM(t.backgroundColor)||(this.ctx.fillStyle=vM(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){l.ctx.save();var A,n,i,r,o,s=XR(e.curves),a=t.inset?0:1e4,c=(A=s,n=-a+(t.inset?1:-1)*t.spread.number,i=(t.inset?1:-1)*t.spread.number,r=t.spread.number*(t.inset?-2:2),o=t.spread.number*(t.inset?-2:2),A.map((function(e,t){switch(t){case 0:return e.add(n,i);case 1:return e.add(n+r,i);case 2:return e.add(n+r,i+o);case 3:return e.add(n,i+o)}return e})));t.inset?(l.path(s),l.ctx.clip(),l.mask(c)):(l.mask(s),l.ctx.clip(),l.path(c)),l.ctx.shadowOffsetX=t.offsetX.number+a,l.ctx.shadowOffsetY=t.offsetY.number,l.ctx.shadowColor=vM(t.color),l.ctx.shadowBlur=t.blur.number,l.ctx.fillStyle=t.inset?vM(t.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),c.label=2;case 2:r=0,o=0,s=n,c.label=3;case 3:return o<s.length?0!==(a=s[o]).style&&!pM(a.color)&&a.width>0?2!==a.style?[3,5]:[4,this.renderDashedDottedBorder(a.color,a.width,r,e.curves,2)]:[3,11]:[3,13];case 4:return c.sent(),[3,11];case 5:return 3!==a.style?[3,7]:[4,this.renderDashedDottedBorder(a.color,a.width,r,e.curves,3)];case 6:return c.sent(),[3,11];case 7:return 4!==a.style?[3,9]:[4,this.renderDoubleBorder(a.color,a.width,r,e.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(a.color,r,e.curves)];case 10:c.sent(),c.label=11;case 11:r++,c.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(e,t,A,n,i){return ZO(this,0,void 0,(function(){var r,o,s,a,l,c,u,h,d,f,g,p,v,m,B,y;return eD(this,(function(C){return this.ctx.save(),r=function(e,t){switch(t){case 0:return rN(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return rN(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return rN(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return rN(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(n,A),o=iN(n,A),2===i&&(this.path(o),this.ctx.clip()),KR(o[0])?(s=o[0].start.x,a=o[0].start.y):(s=o[0].x,a=o[0].y),KR(o[1])?(l=o[1].end.x,c=o[1].end.y):(l=o[1].x,c=o[1].y),u=0===A||2===A?Math.abs(s-l):Math.abs(a-c),this.ctx.beginPath(),3===i?this.formatPath(r):this.formatPath(o.slice(0,2)),h=t<3?3*t:2*t,d=t<3?2*t:t,3===i&&(h=t,d=t),f=!0,u<=2*h?f=!1:u<=2*h+d?(h*=g=u/(2*h+d),d*=g):(p=Math.floor((u+d)/(h+d)),v=(u-p*h)/(p-1),d=(m=(u-(p+1)*h)/p)<=0||Math.abs(d-v)<Math.abs(d-m)?v:m),f&&(3===i?this.ctx.setLineDash([0,h+d]):this.ctx.setLineDash([h,d])),3===i?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=vM(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===i&&(KR(o[0])&&(B=o[3],y=o[0],this.ctx.beginPath(),this.formatPath([new NR(B.end.x,B.end.y),new NR(y.start.x,y.start.y)]),this.ctx.stroke()),KR(o[1])&&(B=o[1],y=o[2],this.ctx.beginPath(),this.formatPath([new NR(B.end.x,B.end.y),new NR(y.start.x,y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(e){return ZO(this,0,void 0,(function(){var t;return eD(this,(function(A){switch(A.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=vM(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=new tN(e,null),i=new eN(n),AN(n,i,i,r=[]),nN(n.container,r),t=i,[4,this.renderStack(t)];case 1:return A.sent(),this.applyEffects([]),[2,this.canvas]}var n,i,r}))}))},t}(vN),BN=function(e){return e instanceof EP||(e instanceof QP||e instanceof xP&&e.type!==CP&&e.type!==yP)},yN=function(e,t){switch(e){case 0:return XR(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return zR(t)}},CN=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},wN=["-apple-system","system-ui"],bN=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===wN.indexOf(e)})):e},xN=function(e){function t(t,A){var n=e.call(this,t,A)||this;return n.canvas=A.canvas?A.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=A,n.canvas.width=Math.floor(A.width*A.scale),n.canvas.height=Math.floor(A.height*A.scale),n.canvas.style.width=A.width+"px",n.canvas.style.height=A.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-A.x,-A.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+A.width+"x"+A.height+" at "+A.x+","+A.y+") with scale "+A.scale),n}return JO(t,e),t.prototype.render=function(e){return ZO(this,0,void 0,(function(){var t,A;return eD(this,(function(n){switch(n.label){case 0:return t=ZH(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,QN(t)];case 1:return A=n.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=vM(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(A,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(vN),QN=function(e){return new Promise((function(t,A){var n=new Image;n.onload=function(){t(n)},n.onerror=A,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},EN=function(){function e(e){var t=e.id,A=e.enabled;this.id=t,this.enabled=A,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug||this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&console.info},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn||this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error||this.info.apply(this,e))},e.instances={},e}(),IN=function(){function e(t,A){var n;this.windowBounds=A,this.instanceName="#"+e.instanceCount++,this.logger=new EN({id:this.instanceName,enabled:t.logging}),this.cache=null!==(n=t.cache)&&void 0!==n?n:new UR(this,t)}return e.instanceCount=1,e}();"undefined"!=typeof window&&kR.setContext(window);var _N=function(e,t){return ZO(void 0,0,void 0,(function(){var A,n,i,r,o,s,a,l,c,u,h,d,f,g,p,v,m,B,y,C,w,b,x,Q,E,I,_,S,F,k,U,O,D,T,M,L,H,P;return eD(this,(function(R){switch(R.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(A=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=A.defaultView))throw new Error("Document is not attached to a Window");return i={allowTaint:null!==(b=t.allowTaint)&&void 0!==b&&b,imageTimeout:null!==(x=t.imageTimeout)&&void 0!==x?x:15e3,proxy:t.proxy,useCORS:null!==(Q=t.useCORS)&&void 0!==Q&&Q},r=qO({logging:null===(E=t.logging)||void 0===E||E,cache:t.cache},i),o={windowWidth:null!==(I=t.windowWidth)&&void 0!==I?I:n.innerWidth,windowHeight:null!==(_=t.windowHeight)&&void 0!==_?_:n.innerHeight,scrollX:null!==(S=t.scrollX)&&void 0!==S?S:n.pageXOffset,scrollY:null!==(F=t.scrollY)&&void 0!==F?F:n.pageYOffset},s=new tD(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),a=new IN(r,s),l=null!==(k=t.foreignObjectRendering)&&void 0!==k&&k,c={allowTaint:null!==(U=t.allowTaint)&&void 0!==U&&U,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:l,copyStyles:l},a.logger.debug("Starting document clone with size "+s.width+"x"+s.height+" scrolled to "+-s.left+","+-s.top),u=new fR(a,e,c),(h=u.clonedReferenceElement)?[4,u.toIFrame(A,s)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=R.sent(),f=jP(h)||"HTML"===h.tagName?function(e){var t=e.body,A=e.documentElement;if(!t||!A)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,A.scrollWidth),Math.max(t.offsetWidth,A.offsetWidth),Math.max(t.clientWidth,A.clientWidth)),i=Math.max(Math.max(t.scrollHeight,A.scrollHeight),Math.max(t.offsetHeight,A.offsetHeight),Math.max(t.clientHeight,A.clientHeight));return new tD(0,0,n,i)}(h.ownerDocument):AD(a,h),g=f.width,p=f.height,v=f.left,m=f.top,B=SN(a,h,t.backgroundColor),y={canvas:t.canvas,backgroundColor:B,scale:null!==(D=null!==(O=t.scale)&&void 0!==O?O:n.devicePixelRatio)&&void 0!==D?D:1,x:(null!==(T=t.x)&&void 0!==T?T:0)+v,y:(null!==(M=t.y)&&void 0!==M?M:0)+m,width:null!==(L=t.width)&&void 0!==L?L:Math.ceil(g),height:null!==(H=t.height)&&void 0!==H?H:Math.ceil(p)},l?(a.logger.debug("Document cloned, using foreign object rendering"),[4,new xN(a,y).render(h)]):[3,3];case 2:return C=R.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+v+","+m+" with size "+g+"x"+p+" using computed rendering"),a.logger.debug("Starting DOM parsing"),w=kP(a,h),B===w.styles.backgroundColor&&(w.styles.backgroundColor=QM.TRANSPARENT),a.logger.debug("Starting renderer for element at "+y.x+","+y.y+" with size "+y.width+"x"+y.height),[4,new mN(a,y).render(w)];case 4:C=R.sent(),R.label=5;case 5:return(null===(P=t.removeContainer)||void 0===P||P)&&(fR.destroy(d)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,C]}}))}))},SN=function(e,t,A){var n=t.ownerDocument,i=n.documentElement?xM(e,getComputedStyle(n.documentElement).backgroundColor):QM.TRANSPARENT,r=n.body?xM(e,getComputedStyle(n.body).backgroundColor):QM.TRANSPARENT,o="string"==typeof A?xM(e,A):null===A?QM.TRANSPARENT:4294967295;return t===n.documentElement?pM(i)?pM(r)?o:r:i:o};const FN={class:"cpg-controls-wrapper"},kN={class:"cpg-controls-item"},UN={class:"cpg-controls-item"},ON=["onClick"];const DN=YO(on({__name:"Operation",setup(e,{expose:t}){t();const{defaultColor:A,defaultGradient:n}=UO,{colorState:i,isGradient:r,setInputType:o,setMode:s,setValue:a}=gn("colorProvider"),l=sn(!1),c=ae((function(){l.value=!l.value}),250),u=ae((function(e){o(e),c()}),180),h=sn(!1),d=ae((function(){if(!(null==window?void 0:window.EyeDropper))return;const e=document.getElementById("app");var t,A;(t=e,void 0===A&&(A={}),_N(t,A)).then((t=>{const A=document.createElement("canvas"),n=A.getContext("2d",{willReadFrequently:!0});e&&n&&(A.width=2*e.offsetWidth,A.height=2*e.offsetHeight,n.drawImage(t,0,0))}))}),250),f=ae((function(e){i.mode!==e&&(s(e),a(e===xO.gradient?n:A))}),250),g={defaultColor:A,defaultGradient:n,colorState:i,isGradient:r,setInputType:o,setMode:s,setValue:a,showInputTypes:l,toggleShowInputType:c,handleSetInputType:u,coverUp:h,handleXise:d,handleSetIsGradient:f,get inputTypes(){return kO},get Modes(){return xO}};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),[["render",function(e,t,A,n,i,r){return cn(),un("section",FN,[pn("div",kN,[pn("div",{class:dn(["cpg-controls-item-btn cpg-cursor-pointer",{"cpg-control-active":!n.isGradient}]),onClick:t[0]||(t[0]=e=>n.handleSetIsGradient(n.Modes.solid))}," Solid ",2),n.colorState.hideGradient?Pn("",!0):(cn(),un("div",{key:0,class:dn(["cpg-controls-item-btn cpg-cursor-pointer",{"cpg-control-active":n.isGradient}]),onClick:t[1]||(t[1]=e=>n.handleSetIsGradient(n.Modes.gradient))}," Gradient ",2))]),pn("div",UN,[pn("div",{class:dn(["cpg-controls-item-btn cpg-cursor-pointer",{"cpg-control-active":n.showInputTypes}])},[pn("span",{class:dn(n.showInputTypes?"text-14px iconfont cpg-exchage text-#568cf5":"iconfont cpg-exchage text-14px"),icon:"",onClick:t[2]||(t[2]=(...e)=>n.toggleShowInputType&&n.toggleShowInputType(...e))},null,2),pn("div",{class:dn(["cpg-controls-inputType",{"cpg-controls-hideInputType":!n.showInputTypes}])},[(cn(!0),un(Ln,null,Zn(n.inputTypes,(e=>(cn(),un("div",{key:e,class:dn(["cpg-control-inputType-item",{"cpg-control-inputType-item-active":n.colorState.inputType===e}]),onClick:t=>n.handleSetInputType(e)},yn(e),11,ON)))),128))],2)],2)])])}],["__file","Operation.vue"]]);function TN(e,t,A){if(!e||0===e.length)return"";const n=e.filter((e=>void 0!==e.left)).sort(((e,t)=>(e.left||0)-(t.left||0)));if(0===n.length)return"";const i=n.map((e=>{const t=Math.max(0,Math.min(100,e.left||0));return`${e.value} ${t}%`}));return`${t}-gradient(${A.degreesStr||`${A.degrees||90}deg`}, ${i.join(", ")})`}function MN(e){if(!e||"string"!=typeof e)return!1;const t=e.trim();if(t.includes("gradient")){if(!["linear-gradient","radial-gradient","conic-gradient"].some((e=>t.includes(e))))return!1;if(!/^(linear-gradient|radial-gradient|conic-gradient)\s*\(.*\)$/i.test(t))return!1;const e=t.match(/(#([0-9A-F]{3}){1,2}|rgb\(|rgba\(|hsl\(|hsla\()/gi);return!!(e&&e.length>=2)}return/^(#([0-9A-F]{3}){1,2}|rgb\(\s*(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*\)|rgba\(\s*(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*(?:25[0-5]|2[0-4]\d|1\d\d|\d{1,2})\s*,\s*(?:0|1|0\.\d+)\s*\)|hsl\(\s*(?:[0-2]?[0-9]?[0-9]|3[0-5][0-9]|360)\s*,\s*(?:100|[1-9]?\d)%\s*,\s*(?:100|[1-9]?\d)%\s*\)|hsla\(\s*(?:[0-2]?[0-9]?[0-9]|3[0-5][0-9]|360)\s*,\s*(?:100|[1-9]?\d)%\s*,\s*(?:100|[1-9]?\d)%\s*,\s*(?:0|1|0\.\d+)\s*\))$/i.test(t)}const LN={class:"cpg-gradient-controls-wrapper"},HN={class:"flex justify-start items-center"},PN={class:"flex justify-end items-center"},RN={key:0,class:"cpg-gradient-btn relative"},NN=["value"];const jN=YO(on({__name:"OperationGradient",setup(e,{expose:t}){t();const{colorState:A,gradientType:n,setLinear:i,setRadial:r,setDegrees:o,setValue:s,deletePoint:a}=gn("colorProvider"),l=En((()=>!A.gradientColors||A.gradientColors.length<=2)),c=ae((function(e){e!==fn(n)&&(e===bO.linear&&i(),e===bO.radial&&r(),A.gradientColors&&s(TN(A.gradientColors,fn(n),A)))}),250),u=ae((function(){fn(l)||a()}),250),h={colorState:A,gradientType:n,setLinear:i,setRadial:r,setDegrees:o,setValue:s,deletePoint:a,disabledDelete:l,handleChangeType:c,onSetDegrees:e=>{const t=e.target.value;o(t)},handleDeletePoint:u,get GradientType(){return bO}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),[["render",function(e,t,A,n,i,r){return cn(),un("section",LN,[pn("div",HN,[pn("div",{class:dn(["cpg-gradient-btn",{"cpg-gradient-btn-active":n.gradientType===n.GradientType.linear}]),onClick:t[0]||(t[0]=e=>n.handleChangeType(n.GradientType.linear))},t[3]||(t[3]=[pn("i",{class:"text-14px iconfont cpg-linear"},null,-1)]),2),pn("div",{class:dn(["cpg-gradient-btn",{"cpg-gradient-btn-active":n.gradientType===n.GradientType.radial}]),onClick:t[1]||(t[1]=e=>n.handleChangeType(n.GradientType.radial))},t[4]||(t[4]=[pn("i",{class:"text-14px iconfont cpg-radial"},null,-1)]),2)]),pn("div",PN,[n.gradientType===n.GradientType.linear?(cn(),un("div",RN,[t[5]||(t[5]=pn("i",{class:"text-14px iconfont cpg-deg"},null,-1)),pn("input",{class:"cpg-deg-input text-right",value:n.colorState.degrees,onChange:n.onSetDegrees},null,40,NN),t[6]||(t[6]=pn("div",{class:"absolute top-4px right-0 font-400 text-12px"},"°",-1))])):Pn("",!0),pn("div",{class:"cpg-gradient-btn",onClick:t[2]||(t[2]=(...e)=>n.handleDeletePoint&&n.handleDeletePoint(...e))},[pn("i",{class:dn(["text-14px iconfont cpg-delete",{"text-#ccc cursor-not-allowed":n.disabledDelete}])},null,2)])])])}],["__file","OperationGradient.vue"]]),VN={class:"cpg-preview-wrap"},KN=["data-color"];const GN=YO(on({__name:"Preview",setup(e,{expose:t}){t();const{colorState:A,isGradient:n,changeColor:i,setValue:r}=gn("colorProvider"),o=En((()=>{var e,t;return fn(n)?null!=(e=A.gradientColor)?e:"":null!=(t=A.value)?t:""})),s=ae((function(e){const t=e.target.dataset.color;t&&(fn(n)?i(t):r(t))}),250),a={colorState:A,isGradient:n,changeColor:i,setValue:r,colorValue:o,handleUpdateValue:s};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),[["render",function(e,t,A,n,i,r){var o;return cn(),un("div",VN,[pn("div",{class:"cpg-preview-color",style:Rn({background:n.colorValue,border:"rgba(255,255,255,1)"===n.colorValue&&1===(null==(o=n.colorState.hc)?void 0:o.a)?"1px solid #96959c":""})},null,4),pn("div",{class:"cpg-preview-presetColor",onClick:t[0]||(t[0]=(...e)=>n.handleUpdateValue&&n.handleUpdateValue(...e))},[(cn(!0),un(Ln,null,Zn(n.colorState.presetColors,((e,t)=>(cn(),un("span",{key:e+t,class:"cpg-preview-presetItem",style:Rn({background:e,border:"rgba(255,255,255, 1)"===e?"1px solid #96959c":""}),"data-color":e},null,12,KN)))),128))])])}],["__file","Preview.vue"]]),YN={class:"cpg-input-label"};const XN=YO(on({__name:"InputItem",props:{inputVal:{type:Number,default:0},max:{type:Number,default:100},label:{type:String,default:""},callback:{type:Function}},emits:["update:inputVal"],setup(e,{expose:t,emit:A}){t();const{colorState:n}=gn("colorProvider"),i=En((()=>n.hideOpacity?"22%":"18%")),r=A,o=e,s=sn(0);qn((()=>{(o.inputVal||0===o.inputVal)&&(s.value=~~o.inputVal)}));const a={colorState:n,width:i,emits:r,props:o,inputVal:s,onChange:e=>{const t=HO(parseFloat(e.target.value),0,o.max);s.value=t,r("update:inputVal",t),o.callback&&"function"==typeof o.callback&&o.callback(t)}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}}),[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:"cpg-inputItem-wrap",style:Rn({width:n.width})},[On(pn("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.inputVal=e),class:"cpg-input",onChange:n.onChange},null,544),[[li,n.inputVal]]),pn("div",YN,yn(n.props.label),1)],4)}],["__file","InputItem.vue"]]),zN={class:"cpg-inputItem-wrap",style:{width:"23%"}};const WN=YO(on({__name:"InputHex",setup(e,{expose:t}){t();const{colorState:A,setValue:n}=gn("colorProvider"),i=sn("");qn((()=>{var e;A.value&&(i.value=null==(e=DU(A.value))?void 0:e.toHex())}));const r={colorState:A,setValue:n,hexVal:i,onChange:e=>{var t,r;const o=DU(e.target.value);if(o.isValid()){const{r:e,g:i,b:r}=o.toRgb(),s=`rgba(${e}, ${i}, ${r}, ${null==(t=A.hc)?void 0:t.a})`;n(s,FO)}else i.value=null==(r=DU(A.value))?void 0:r.toHex()}};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),[["render",function(e,t,A,n,i,r){return cn(),un("div",zN,[On(pn("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.hexVal=e),class:"cpg-input",onChange:n.onChange},null,544),[[li,n.hexVal]]),t[1]||(t[1]=pn("div",{class:"cpg-input-label"},"HEX",-1))])}],["__file","InputHex.vue"]]);const $N=YO(on({__name:"HSLInputs",setup(e,{expose:t}){t();const A=sn(0),n=sn(0),{colorState:i,changeColor:r,tinycolor:o}=gn("colorProvider");qn((()=>{if(i.inputType===wO.hsl&&i.hc){const{s:e,l:t}=o.value.toHsl(i.value);A.value=e,n.value=t}}));const s={sVal:A,lVal:n,colorState:i,changeColor:r,tinycolor:o,handleSl:e=>{var t;const{r:A,g:n,b:o}=DU(e).toRgb();r(`rgba(${A}, ${n}, ${o}, ${null==(t=i.hc)?void 0:t.a})`)},handleH:(e,t,A)=>{var n;const{r:o,g:s,b:a}=DU({h:e,s:t,l:A}).toRgb();r(`rgba(${o}, ${s}, ${a}, ${null==(n=i.hc)?void 0:n.a})`)},InputItem:XN,get round(){return PO}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),[["render",function(e,t,A,n,i,r){var o;return cn(),un(Ln,null,[Kn(n.InputItem,{"input-val":n.round(null==(o=n.colorState.hc)?void 0:o.h),label:"H",max:360,callback:e=>n.handleH(e,n.sVal,n.lVal)},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.round(100*n.sVal),label:"S",max:100,callback:e=>{var t;return n.handleSl({h:null==(t=n.colorState.hc)?void 0:t.h,s:e,l:n.lVal})}},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.round(100*n.lVal),label:"L",max:100,callback:e=>{var t;return n.handleSl({h:null==(t=n.colorState.hc)?void 0:t.h,s:n.sVal,l:e})}},null,8,["input-val","callback"])],64)}],["__file","HSLInputs.vue"]]);const JN=YO(on({__name:"RGBInputs",setup(e,{expose:t}){var A,n,i;t();const{colorState:r,changeColor:o}=gn("colorProvider"),s=sn(null==(A=r.hc)?void 0:A.r),a=sn(null==(n=r.hc)?void 0:n.g),l=sn(null==(i=r.hc)?void 0:i.n);In((()=>r.hc),(e=>{if(r.inputType===wO.rgb){const{r:t,g:A,b:n}=e;s.value=t,a.value=A,l.value=n}}));const c={colorState:r,changeColor:o,red:s,green:a,blue:l,handleRgb:({r:e,g:t,b:A})=>{var n;o(`rgba(${e}, ${t}, ${A}, ${null==(n=r.hc)?void 0:n.a})`)},InputItem:XN};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(e,t,A,n,i,r){return cn(),un(Ln,null,[Kn(n.InputItem,{"input-val":n.red,label:"R",max:255,callback:e=>n.handleRgb({r:e,g:n.colorState.hc.g,b:n.colorState.hc.b})},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.green,label:"G",max:255,callback:e=>n.handleRgb({r:n.colorState.hc.r,g:e,b:n.colorState.hc.b})},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.blue,label:"B",max:255,callback:e=>{var t;return n.handleRgb({r:n.colorState.hc.r,g:null==(t=n.colorState.hc)?void 0:t.g,b:e})}},null,8,["input-val","callback"])],64)}],["__file","RGBInputs.vue"]]);const qN=YO(on({__name:"HSVInputs",setup(e,{expose:t}){t();const A=sn(0),n=sn(0),{colorState:i,changeColor:r}=gn("colorProvider");qn((()=>{i.inputType===wO.hsv&&i.hc&&(A.value=i.hc.s,n.value=i.hc.v)}));const o={sVal:A,vVal:n,colorState:i,changeColor:r,handleSV:e=>{var t;const{r:A,g:n,b:o}=DU(e).toRgb();r(`rgba(${A}, ${n}, ${o}, ${null==(t=i.hc)?void 0:t.a})`)},handleH:(e,t,A)=>{var n;const{r:o,g:s,b:a}=DU({h:e,s:t,v:A}).toRgb();r(`rgba(${o}, ${s}, ${a}, ${null==(n=i.hc)?void 0:n.a})`)},InputItem:XN,get round(){return PO}};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),[["render",function(e,t,A,n,i,r){var o;return cn(),un(Ln,null,[Kn(n.InputItem,{"input-val":n.round(null==(o=n.colorState.hc)?void 0:o.h),label:"H",max:360,callback:e=>n.handleH(e,n.sVal,n.vVal)},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.round(100*n.sVal),label:"S",max:100,callback:e=>{var t;return n.handleSV({h:null==(t=n.colorState.hc)?void 0:t.h,s:e,v:n.vVal})}},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.round(100*n.vVal),label:"V",max:100,callback:e=>{var t;return n.handleSV({h:null==(t=n.colorState.hc)?void 0:t.h,s:n.sVal,v:e})}},null,8,["input-val","callback"])],64)}],["__file","HSVInputs.vue"]]);const ZN=YO(on({__name:"CMYKInputs",setup(e,{expose:t}){t();const{colorState:A,changeColor:n}=gn("colorProvider"),i=Vn({c:0,m:0,y:0,k:0});qn((()=>{var e,t,n;if(A.inputType===wO.cmyk&&A.hc){const{c:r,m:o,y:s,k:a}=function(e,t,A){let n=0,i=0,r=0,o=0;if(null===e||null===t||null===A||isNaN(e)||isNaN(t)||isNaN(A))return{c:0,m:0,k:0,y:1};if(e<0||t<0||A<0||e>255||t>255||A>255)return{c:0,m:0,k:0,y:1};if(0===e&&0===t&&0===A)return o=1,{c:0,m:0,k:0,y:1};n=1-e/255,i=1-t/255,r=1-A/255;const s=Math.min(n,Math.min(i,r));return n=(n-s)/(1-s),i=(i-s)/(1-s),r=(r-s)/(1-s),o=s,{c:n,m:i,y:r,k:o}}(null==(e=A.hc)?void 0:e.r,null==(t=A.hc)?void 0:t.g,null==(n=A.hc)?void 0:n.b);Object.assign(i,{c:PO(100*r),m:PO(100*o),y:PO(100*s),k:PO(100*a)})}}));const r={colorState:A,changeColor:n,handleCmyk:e=>{var t;const{r:i,g:r,b:o}=(({c:e,m:t,y:A,k:n})=>({r:255*(1-e)*(1-n),g:255*(1-t)*(1-n),b:255*(1-A)*(1-n)}))(e);n(`rgba(${i}, ${r}, ${o}, ${null==(t=A.hc)?void 0:t.a})`)},cmykState:i,InputItem:XN};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),[["render",function(e,t,A,n,i,r){return cn(),un(Ln,null,[Kn(n.InputItem,{"input-val":n.cmykState.c,"onUpdate:inputVal":t[0]||(t[0]=e=>n.cmykState.c=e),label:"C",max:100,callback:e=>n.handleCmyk({c:e/100,m:n.cmykState.m,y:n.cmykState.y,k:n.cmykState.k})},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.cmykState.m,"onUpdate:inputVal":t[1]||(t[1]=e=>n.cmykState.m=e),label:"M",max:100,callback:e=>n.handleCmyk({c:n.cmykState.c,m:e/100,y:n.cmykState.y,k:n.cmykState.k})},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.cmykState.y,"onUpdate:inputVal":t[2]||(t[2]=e=>n.cmykState.y=e),label:"Y",max:100,callback:e=>n.handleCmyk({c:n.cmykState.c,m:n.cmykState.m,y:e/100,k:n.cmykState.k})},null,8,["input-val","callback"]),Kn(n.InputItem,{"input-val":n.cmykState.k,"onUpdate:inputVal":t[3]||(t[3]=e=>n.cmykState.k=e),label:"K",max:100,callback:e=>n.handleCmyk({c:n.cmykState.c,m:n.cmykState.m,y:n.cmykState.y,k:e/100})},null,8,["input-val","callback"])],64)}],["__file","CMYKInputs.vue"]]),ej={class:"cpg-inputs-wrap"};const tj=YO(on({__name:"index",setup(e,{expose:t}){t();const{colorState:A,changeColor:n}=gn("colorProvider"),i={colorState:A,changeColor:n,get InputHex(){return WN},get HSLInputs(){return $N},get RGBInputs(){return JN},get HSVInputs(){return qN},get CMYKInputs(){return ZN},get InputItem(){return XN},get InputType(){return wO}};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),[["render",function(e,t,A,n,i,r){var o,s;return cn(),un("div",ej,[n.colorState.inputType!==n.InputType.cmyk?(cn(),vn(n.InputHex,{key:0})):Pn("",!0),n.colorState.inputType===n.InputType.hsl?(cn(),vn(n.HSLInputs,{key:1})):Pn("",!0),n.colorState.inputType===n.InputType.rgb?(cn(),vn(n.RGBInputs,{key:2})):Pn("",!0),n.colorState.inputType===n.InputType.hsv?(cn(),vn(n.HSVInputs,{key:3})):Pn("",!0),n.colorState.inputType===n.InputType.cmyk?(cn(),vn(n.CMYKInputs,{key:4})):Pn("",!0),n.colorState.hideOpacity?Pn("",!0):(cn(),vn(n.InputItem,{key:5,"input-val":100*(null!=(s=null==(o=n.colorState.hc)?void 0:o.a)?s:0),label:"A",callback:e=>{var t,A,i;return n.changeColor(`rgba(${null==(t=n.colorState.hc)?void 0:t.r}, ${null==(A=n.colorState.hc)?void 0:A.g}, ${null==(i=n.colorState.hc)?void 0:i.b}, ${e/100})`)}},null,8,["input-val","callback"]))])}],["__file","index.vue"]]),Aj={class:"cpg-gradientBar-warp"},nj=["onMousedown"];const ij=YO(on({__name:"GradientBar",setup(e,{expose:t}){t();const{colorState:A,handleGradient:n,addPoint:i,setSelectColorIdx:r}=gn("colorProvider"),o=(A.width-18)/100,s=En((()=>A.gradientColor?c(A.gradientColor):"")),a=sn(!1),l=()=>{a.value=!1};function c(e){return e.replace(/(radial|linear)-gradient\([^,]+,/,"linear-gradient(90deg,")}ln((()=>{window.addEventListener("mouseup",l)})),ri((()=>{window.removeEventListener("mouseup",l)}));const u={colorState:A,handleGradient:n,addPoint:i,setSelectColorIdx:r,leftMultiplyer:o,backgroundImage:s,dragging:a,stopDragging:l,onMousemove:e=>{if(fn(a)){const{gradientColors:t,gradientColorsIdx:i}=A,r=t[i].value;n(r,VO(e))}},handlePoinDown:(e,t)=>{e.stopPropagation(),r(t),a.value=!0},onMouseBarDown:e=>{if(fn(a))return;const t=VO(e);i(t),a.value=!0},force90degLinear:c};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),[["render",function(e,t,A,n,i,r){return cn(),un("div",Aj,[pn("div",{class:"cpg-gradientBar",style:Rn({width:n.colorState.width+"px",backgroundImage:n.backgroundImage}),onMousedown:n.onMouseBarDown,onMousemove:n.onMousemove,onMouseup:n.stopDragging},null,36),(cn(!0),un(Ln,null,Zn(n.colorState.gradientColors,((e,t)=>(cn(),un("div",{key:e.value+t,class:dn(["cpg-pointer",{"cpg-pointer-centerPoint":n.colorState.gradientColorsIdx===t,"cpg-cursor-pointer":n.dragging}]),style:Rn({left:e.left*n.leftMultiplyer+"px"}),onMousedown:e=>n.handlePoinDown(e,t)},null,46,nj)))),128))])}],["__file","GradientBar.vue"]]),rj=on({__name:"Hue",setup(e,{expose:t}){t();const{colorState:A,isGradient:n,changeColor:i,setHcH:r,updateSelectColor:o}=gn("colorProvider"),s=sn(null),a=sn(!1),l=()=>{a.value=!1},c=e=>{var t,s;const a=3.6*VO(e),l=DU({h:a,s:null==(t=A.hc)?void 0:t.s,v:null==(s=A.hc)?void 0:s.v}),{r:c,g:u,b:h}=l.toRgb();r(a);const d=`rgba(${c}, ${u}, ${h}, ${A.hc.a})`;fn(n)?o(d):i(d)},u=le((function(e){fn(a)&&c(e)}),80),h=ae((function(e){fn(a)||c(e)}),250);ln((()=>{const e=fn(s);if(e){const t=null==e?void 0:e.getContext("2d",{willReadFrequently:!0});if(t){t.rect(0,0,A.width,14);const e=t.createLinearGradient(0,0,A.width,0);for(let t=0;t<=360;t+=30)e.addColorStop(t/360,`hsl(${t}, 100%, 50%)`);t.fillStyle=e,t.fill()}}window.addEventListener("mouseup",l)})),ri((()=>{window.removeEventListener("mouseup",l)}));const d={colorState:A,isGradient:n,changeColor:i,setHcH:r,updateSelectColor:o,canvasRef:s,dragging:a,stopDragging:l,onMousedown:()=>{a.value=!0},handleHue:c,onMousemove:u,handleClick:h};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),oj=["width"];const sj=YO(rj,[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:"cpg-hue-wrap",onMousedown:n.onMousedown,onMousemove:t[1]||(t[1]=(...e)=>n.onMousemove&&n.onMousemove(...e)),onMouseup:n.stopDragging},[pn("div",{class:dn(["cpg-pointer",{"cpg-cursor-pointer":n.dragging}]),style:Rn({left:n.colorState.hc.h*((n.colorState.width-18)/360)+"px"})},null,6),pn("canvas",{ref:"canvasRef",width:n.colorState.width,height:"14",class:"cpg-hue-colors",onClick:t[0]||(t[0]=(...e)=>n.handleClick&&n.handleClick(...e))},null,8,oj)],32)}],["__file","Hue.vue"]]),aj=on({__name:"AdvBrightnessBar",setup(e,{expose:t}){t();const{colorState:A,tinycolor:n}=gn("colorProvider"),i=sn(null);qn((()=>{const e=fn(i);if(e){const{s:t}=n.value.toHsl(),i=null==e?void 0:e.getContext("2d",{willReadFrequently:!0});if(i){i.rect(0,0,A.width,14);const e=i.createLinearGradient(0,0,A.width,0);for(let n=0;n<=100;n+=10){const i=DU({h:A.hc.h,s:100*t,v:n});e.addColorStop(n/100,i.toHslString())}i.fillStyle=e,i.fill()}}}));const r={colorState:A,tinycolor:n,canvasRef:i};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),lj={class:"cpg-advance-item"},cj={ref:"canvasRef",class:"cpg-advance-canvas",height:"14"};const uj=YO(aj,[["render",function(e,t,A,n,i,r){return cn(),un("div",lj,[t[0]||(t[0]=pn("div",{class:"cpg-pointer !top-1px"},null,-1)),t[1]||(t[1]=pn("div",{class:"cpg-advance-text"},"Brightness",-1)),pn("canvas",cj,null,512)])}],["__file","AdvBrightnessBar.vue"]]),hj=on({__name:"AdvLightnessBar",setup(e,{expose:t}){t();const{colorState:A,tinycolor:n,changeColor:i}=gn("colorProvider"),r=sn(null),o=e=>{var t,r;const{s:o}=n.value.toHsl(),{r:s,g:a,b:l}=DU({h:null==(t=A.hc)?void 0:t.h,s:o,l:e/100}).toRgb();i(`rgba(${s},${a},${l},${null==(r=A.hc)?void 0:r.a})`)},s=sn(0),a=sn(!1),l=()=>{a.value=!1},c=ae((function(e){fn(a)||o(VO(e))}),250);qn((()=>{const e=fn(r);if(e){const{s:t}=n.value.toHsl(),i=null==e?void 0:e.getContext("2d",{willReadFrequently:!0});if(i){i.rect(0,0,A.width,14);const e=i.createLinearGradient(0,0,A.width,0);for(let n=0;n<=100;n+=10)e.addColorStop(n/100,`hsl(${A.hc.h}, ${100*t}%, ${n}%)`);i.fillStyle=e,i.fill()}}})),In((()=>A.hc),(()=>{s.value=A.hc.l*(A.width-18)})),ln((()=>{window.addEventListener("mouseup",l)})),ri((()=>{window.removeEventListener("mouseup",l)}));const u={colorState:A,tinycolor:n,changeColor:i,canvasRef:r,setLight:o,left:s,dragging:a,stopDragging:l,handleDown:()=>{a.value=!0},handleMove:e=>{fn(a)&&o(VO(e))},handleClick:c};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});const dj=YO(hj,[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:"cpg-advance-item",onMousemove:n.handleMove},[pn("div",{class:"cpg-pointer !top-1px",style:Rn({left:n.left+"px"}),onMousedown:n.handleDown},null,36),t[1]||(t[1]=pn("div",{class:"cpg-advance-text"},"Lightness",-1)),pn("canvas",{ref:"canvasRef",class:"cpg-advance-canvas",height:"14",onClick:t[0]||(t[0]=(...e)=>n.handleClick&&n.handleClick(...e))},null,512)],32)}],["__file","AdvLightnessBar.vue"]]),fj=on({__name:"AdvSaturationBar",setup(e,{expose:t}){t();const{colorState:A,tinycolor:n}=gn("colorProvider"),i=sn(null);qn((()=>{const e=fn(i);if(e){const{l:t}=n.value.toHsl(),i=null==e?void 0:e.getContext("2d",{willReadFrequently:!0});if(i){i.rect(0,0,A.width,14);const e=i.createLinearGradient(0,0,A.width,0);for(let n=0;n<=100;n+=10)e.addColorStop(n/100,`hsl(${A.hc.h}, ${n}%, ${100*t}%)`);i.fillStyle=e,i.fill()}}}));const r={colorState:A,tinycolor:n,canvasRef:i};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}}),gj={class:"cpg-advance-item"},pj={ref:"canvasRef",class:"cpg-advance-canvas",height:"14"};const vj=YO(fj,[["render",function(e,t,A,n,i,r){return cn(),un("div",gj,[t[0]||(t[0]=pn("div",{class:"cpg-pointer !top-1px"},null,-1)),t[1]||(t[1]=pn("div",{class:"cpg-advance-text"},"Saturation",-1)),pn("canvas",pj,null,512)])}],["__file","AdvSaturationBar.vue"]]),mj={class:"cpg-advance-wrap"};const Bj=YO(on({__name:"index",setup(e,{expose:t}){t();const A={get AdvBrightnessBar(){return uj},get AdvLightnessBar(){return dj},get AdvSaturationBar(){return vj}};return Object.defineProperty(A,"__isScriptSetup",{enumerable:!1,value:!0}),A}}),[["render",function(e,t,A,n,i,r){return cn(),un("div",mj,[Kn(n.AdvSaturationBar),Kn(n.AdvLightnessBar),Kn(n.AdvBrightnessBar)])}],["__file","index.vue"]]),yj=on({__name:"index",props:{value:{default:QO},width:{default:EO},hideInputs:{type:Boolean,default:!1},hideOpacity:{type:Boolean,default:!1},hideGradient:{type:Boolean,default:!1},presetColors:{default:()=>OO},hidePresets:{type:Boolean,default:!1},showAdvancedSliders:{type:Boolean,default:!1},inputType:{default:wO.rgb}},emits:["update:value","change"],setup(e,{expose:t,emit:A}){t();const n=A,i=e,r=Vn({width:EO,height:EO,showAdvancedSliders:!1,mode:xO.solid,degrees:IO,degreesStr:"",gradientColor:"",gradientColors:[],gradientColorsIdx:0,value:QO,inputType:wO.rgb,presetColors:OO}),o=sn(bO.linear),s=sn(null),a=e=>{e.color&&(n("update:value",e.color),n("change",BO({},e)))},l=En((()=>r.mode===xO.gradient)),c=e=>{e===xO.solid&&(r.degrees=IO,r.gradientColors=[],r.gradientColorsIdx=0),r.mode=e},u=(e,t)=>{var A,n,i,c;const u=e||r.value||QO;if(!MN(u))return;const h=(e=>{if(!e||"string"!=typeof e)return[{value:DO}];if(!e.includes("gradient"))return[{value:e||DO}];{const A=e.includes("conic")?TO:e;try{const e=CO(A);return(null==e?void 0:e.colorStops)||[{value:DO}]}catch(t){return[{value:DO}]}}})(u);if(fn(l)){const{degreeStr:e,degrees:A}=(e=>{if(!e||"string"!=typeof e)return{degrees:0,degreeStr:"0deg",gradientType:""};const t=e.split("(")[0],A=GO(e);return{degrees:A,degreeStr:"linear-gradient"===t?`${A}deg`:"circle",gradientType:t}})(u);if(r.degrees=A,r.degreesStr=e,t===FO){const e=gs(r.gradientColors)||[];e[r.gradientColorsIdx||0]=h[0],r.gradientColors=gs(e),r.gradientColor=TN(e,fn(o),r)}else r.gradientColors=h,r.gradientColor=TN(h,fn(o),r);const n=r.gradientColors[r.gradientColorsIdx||0];n&&(s.value=DU(n.value))}else{const e=(null==(n=null==(A=h[0])?void 0:A.value)?void 0:n.replace(/\s+/g,""))||QO;r.value=e,s.value=DU(e)}if(s.value){const e=s.value.toRgb(),t=s.value.toHsv();r.hc=yO(BO({},e),{s:t.s,v:t.v,h:0===t.h?(null==(i=r.hc)?void 0:i.h)||.1:t.h})}a&&(fn(l)?a({color:r.gradientColor,mode:r.mode,degrees:r.degrees,gradientType:fn(o),gradientColors:gs((null==(c=r.gradientColors)?void 0:c.map((e=>{var t;return{color:null==(t=e.value)?void 0:t.toLowerCase(),left:e.left||0}})))||[])}):a({color:r.value,mode:r.mode}))},h=e=>{if(!MN(e))return;const t=r.gradientColors||[],A=t[r.gradientColorsIdx||0];if(!A)return;A.value=e;const n=TN(t,fn(o),r);u(n)},d=(e,t)=>{if(!MN(e))return;const A=r.gradientColors||[],n=A[r.gradientColorsIdx||0];if(!n)return;n.left=null!=t?t:n.left,n.value=e;const i=TN(A,fn(o),r);u(i)},f=e=>{fn(l)?d(e):u(e)},g=e=>{var t;void 0!==(null==(t=r.hc)?void 0:t.h)&&(r.hc.h=HO(e,0,360))},p=e=>{const t=r.gradientColors||[];if(e>=0&&e<t.length){r.gradientColorsIdx=e;const A=t[e];if(A){s.value=DU(A.value);const e=s.value.toRgb(),t=s.value.toHsv();r.hc=BO(BO({},e),t)}}},v=e=>{r.inputType=e},m=()=>{var e;const t=null==(e=r.gradientColor)?void 0:e.split(/,(.+)/)[1];t&&(u(`linear-gradient(90deg, ${t}`),o.value=bO.linear)},B=()=>{var e;const t=null==(e=r.gradientColor)?void 0:e.split(/,(.+)/)[1];t&&(u(`radial-gradient(circle, ${t}`),o.value=bO.radial)},y=e=>{var t;if(o.value!==bO.linear)return;const A=null==(t=r.gradientColor)?void 0:t.split(/,(.+)/)[1];A&&(r.degrees=+e,u(`linear-gradient(${HO(+e,0,360)}deg, ${A}`))},C=e=>{var t;null==e&&(e=50);const A=gs(r.gradientColors||[]),n=A[r.gradientColorsIdx||0];if(!n)return;const i=null==(t=[...null==A?void 0:A.map((e=>yO(BO({},e),{value:MO(e)}))),{value:n.value,left:e}])?void 0:t.sort(((e,t)=>e.left-t.left));r.gradientColorsIdx=i.findIndex((t=>t.left===e));const s=TN(i,fn(o),r);u(s)},w=e=>{const t=r.gradientColors;if(t&&t.length>SO){const A=null!=e?e:r.gradientColorsIdx,n=null==t?void 0:t.filter(((e,t)=>t!==A));r.gradientColors=gs(n||[]);const i=TN(n||[],fn(o),r);u(i)}},b=()=>{var e;const t=gs(i);if(t.value=null==(e=t.value)?void 0:e.toLowerCase(),Object.assign(r,t),r.width=i.width<=320?304:i.width-16,r.height=i.width,r.presetColors&&r.presetColors.length>_O&&(r.presetColors.length=_O),r.value){const e=!(!(A=r.value)||"string"!=typeof A)&&A.includes("gradient");r.inputType=wO.rgb,c(e?xO.gradient:xO.solid),u(r.value)}var A},x={isGradient:l,colorState:r,tinycolor:s,gradientType:o,setValue:u,setMode:c,updateSelectColor:h,handleGradient:d,changeColor:f,setHcH:g,setInputType:v,setLinear:m,setRadial:B,setDegrees:y,setSelectColorIdx:p,addPoint:C,deletePoint:w};b(),an("colorProvider",x);const Q={emits:n,props:i,colorState:r,gradientType:o,tinycolor:s,onChange:a,isGradient:l,setMode:c,setValue:u,updateSelectColor:h,handleGradient:d,changeColor:f,setHcH:g,setSelectColorIdx:p,setInputType:v,setLinear:m,setRadial:B,setDegrees:y,addPoint:C,deletePoint:w,init:b,colorProvider:x,get Opacity(){return XO},get PickerArea(){return WO},get Operation(){return DN},get OperationGradient(){return jN},get Preview(){return GN},get GradientBar(){return ij},get Inputs(){return tj},get Hue(){return sj},get AdvancedControls(){return Bj}};return Object.defineProperty(Q,"__isScriptSetup",{enumerable:!1,value:!0}),Q}});const Cj=YO(yj,[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:"cpg-box",style:Rn({width:n.props.width+"px"})},[Kn(n.PickerArea),Kn(n.Operation),n.colorState.showAdvancedSliders?(cn(),vn(n.AdvancedControls,{key:0})):Pn("",!0),!n.colorState.hideGradient&&n.isGradient?(cn(),vn(n.OperationGradient,{key:1})):Pn("",!0),!n.colorState.hideGradient&&n.isGradient?(cn(),vn(n.GradientBar,{key:2})):Pn("",!0),Kn(n.Hue),n.props.hideOpacity?Pn("",!0):(cn(),vn(n.Opacity,{key:3})),n.props.hideInputs?Pn("",!0):(cn(),vn(n.Inputs,{key:4})),Kn(n.Preview)],4)}],["__file","index.vue"]]),wj={key:0,class:"box attr-item-box"},bj={class:"bg-item"},xj="gradientAngle",Qj=on({__name:"AttributeColor",setup(e){const{selectType:t,isOne:A}=IS(),n=sB(),i=Cn(),r=Vn({fill:""}),o=sn(!1),s=()=>{_n((()=>{o.value=!0}))},a=e=>{var t;const i=null==(t=n.canvas)?void 0:t.getActiveObject();if((!e||!e.target||e.target===i)&&i&&A){const e=i.get("fill");r.fill="string"==typeof e?e:c(e,i)}},l=e=>{var t,A;const i=null==(t=n.canvas)?void 0:t.getActiveObjects()[0];if(i){const{color:t,mode:r,gradientColors:o,degrees:s}=e;if("solid"===r)i.set("fill",t);else if("gradient"===r){const e=u(o.map((e=>({color:e.color,offset:e.left/100}))),i.width,i.height,s);i.set("fill",e,s),i.set(xj,s)}null==(A=n.canvas)||A.renderAll()}},c=(e,t)=>{if(!e)return;return`linear-gradient(${t.get(xj,e.degree)}deg, ${e.colorStops.map((e=>e.color+" "+100*e.offset+"%"))})`},u=(e,t,A,n)=>{const i=(e=>{const t=-parseInt(e,10)*(Math.PI/180);return{x1:Math.round(50+50*Math.sin(t))/100,y1:Math.round(50+50*Math.cos(t))/100,x2:Math.round(50+50*Math.sin(t+Math.PI))/100,y2:Math.round(50+50*Math.cos(t+Math.PI))/100}})(n);return new wv.fabric.Gradient({type:"linear",gradientUnits:"pencentage",coords:{x1:i.x1*t,y1:i.y1*A,x2:i.x2*t,y2:i.y2*A},colorStops:[...e]})},h=()=>{var e;null==(e=null==i?void 0:i.proxy)||e.$forceUpdate()};return ln((()=>{_n((()=>{var e,t,A;a(),null==(e=n.editor)||e.on("selectCancel",h),null==(t=n.editor)||t.on("selectOne",a),null==(A=n.canvas)||A.on("object:modified",a)}))})),ri((()=>{var e,t,A;null==(e=n.editor)||e.off("selectCancel",h),null==(t=n.editor)||t.off("selectOne",a),null==(A=n.canvas)||A.off("object:modified",a)})),(e,n)=>{const i=eA,a=cp;return fn(A)&&"image"!==fn(t)&&"group"!==fn(t)?(cn(),un("div",wj,[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.color")),1)])),_:1}),pn("div",bj,[Kn(a,{width:"340px",effect:"light",trigger:"hover",onShow:s},{reference:mn((()=>[pn("div",{class:"color-bar",style:Rn({background:fn(r).fill})},null,4)])),default:mn((()=>[fn(o)?(cn(),vn(fn(Cj),{key:0,value:fn(r).fill,"onUpdate:value":n[0]||(n[0]=e=>fn(r).fill=e),onChange:l},null,8,["value"])):Pn("",!0)])),_:1})])])):Pn("",!0)}}}),Ej=ki(Qj,[["__scopeId","data-v-dae73bd7"]]),Ij={key:0,class:"box mb-20px"},_j={class:"hd-wrap"},Sj={class:"hd flex-1"},Fj={class:"hd-wrap"},kj={class:"hd"},Uj={class:"operation"},Oj={class:"hd",style:{"flex-basis":"98px"}},Dj={style:{width:"100%"}},Tj={class:"operation",style:{"justify-content":"space-between"}},Mj={class:"hd"},Lj=ki(on({__name:"ImgStroke",setup(e){const t=sB(),{isOne:A}=IS(),n=sn(!1),i=sn(!1),r=sn(5),o=sn("#000"),s=sn(!1),a=()=>{var e;const A=null==(e=t.canvas)?void 0:e.getActiveObject();if(A&&Zm.isImage(A))return A},l=()=>{const e=fn(s)?"destination-out":"source-over";t.editor.imageStrokeDraw(fn(o),fn(r),e)},c=e=>u(this,null,(function*(){e?(0===fn(r)&&(r.value=5),(()=>{const e=a();e&&(e.set("originWidth",null==e?void 0:e.get("width")),e.set("originHeight",null==e?void 0:e.get("height")),e.set("originSrc",null==e?void 0:e.getSrc()))})(),l()):(r.value=0,l())})),h=e=>{e&&(r.value=e,l())},d=e=>{e&&(o.value=e,l())},f=()=>{n.value=!!a()};return ln((()=>{_n((()=>{var e;null==(e=t.editor)||e.on("selectOne",f)}))})),ri((()=>{t.editor.off("selectOne",f)})),(e,t)=>{const a=eA,u=Ee,f=cp,g=Gp,p=Tp,v=Cg;return fn(A)&&fn(n)?(cn(),un("div",Ij,[Kn(a,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.imageSetting.stroke.title")),1)])),_:1}),pn("div",_j,[pn("div",Sj,[pn("span",null,yn(e.$t("editor.imageSetting.stroke.enable")),1),Kn(f,{trigger:"hover",content:"只支持png透明图像"},{reference:mn((()=>[Kn(u,{color:"#f34250"},{default:mn((()=>[Kn(fn(EA))])),_:1})])),_:1})]),Kn(g,{modelValue:fn(i),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(i)?i.value=e:null),size:"large","inline-prompt":"",class:"switch","active-text":e.$t("common.enable"),"inactive-text":e.$t("common.close"),onChange:c},null,8,["modelValue","active-text","inactive-text"])]),fn(i)?(cn(),un(Ln,{key:0},[pn("div",Fj,[pn("div",kj,[pn("span",null,yn(e.$t("editor.imageSetting.stroke.show")),1)]),Kn(g,{"inline-prompt":"",modelValue:fn(s),"onUpdate:modelValue":t[1]||(t[1]=e=>Dn(s)?s.value=e:null),size:"large",class:"switch","active-text":e.$t("common.yes"),"inactive-text":e.$t("common.no"),onChange:l},null,8,["modelValue","active-text","inactive-text"])]),pn("div",Uj,[pn("div",Oj,[pn("span",null,yn(e.$t("editor.imageSetting.stroke.size")),1)]),pn("div",Dj,[Kn(p,{modelValue:fn(r),"onUpdate:modelValue":t[2]||(t[2]=e=>Dn(r)?r.value=e:null),max:50,onChange:h},null,8,["modelValue"])])]),pn("div",Tj,[pn("div",Mj,[pn("span",null,yn(e.$t("editor.imageSetting.stroke.color")),1)]),pn("div",null,[Kn(v,{modelValue:fn(o),"onUpdate:modelValue":t[3]||(t[3]=e=>Dn(o)?o.value=e:null),onChange:d,placement:"left"},null,8,["modelValue"])])])],64)):Pn("",!0)])):Pn("",!0)}}}),[["__scopeId","data-v-65e92803"]]),Hj=""+new URL("../assets/BlackWhite-D0k4iDLO.png",import.meta.url).href,Pj=""+new URL("../assets/Brownie-5RUMvKA4.png",import.meta.url).href,Rj=""+new URL("../assets/Invert-Hm5CLPU-.png",import.meta.url).href,Nj=""+new URL("../assets/Kodachrome-Csq7xRvv.png",import.meta.url).href,jj=""+new URL("../assets/Polaroid-_9eYyYhg.png",import.meta.url).href,Vj=""+new URL("../assets/Sepia-CCBV97ZV.png",import.meta.url).href,Kj=""+new URL("../assets/Vintage-Cedqhw4o.png",import.meta.url).href,Gj=""+new URL("../assets/technicolor-P5g_tRH3.png",import.meta.url).href,Yj={SELECT:"select",COLOR:"color",NUMBER:"number"},Xj=[{type:"Brightness",status:!1,params:[{key:"brightness",value:0,uiType:Yj.NUMBER,min:-1,max:1,step:.01}]},{type:"Contrast",status:!1,params:[{key:"contrast",value:0,uiType:Yj.NUMBER,min:-1,max:1,step:.01}]},{type:"Saturation",status:!1,params:[{key:"saturation",value:0,uiType:Yj.NUMBER,min:-1,max:1,step:.01}]},{type:"Vibrance",status:!1,params:[{key:"vibrance",value:0,uiType:Yj.NUMBER,min:-1,max:1,step:.01}]},{type:"HueRotation",status:!1,params:[{key:"rotation",value:0,uiType:Yj.NUMBER,min:-1,max:1,step:.01}]},{type:"Noise",status:!1,params:[{key:"noise",value:0,uiType:Yj.NUMBER,min:-1,max:1e3,step:.1}]},{type:"Pixelate",status:!1,params:[{key:"blocksize",value:.01,uiType:Yj.NUMBER,min:.01,max:100,step:.01}]},{type:"Blur",status:!1,params:[{key:"blur",value:0,uiType:Yj.NUMBER,min:0,max:1,step:.01}]},{type:"Grayscale",status:!1,params:[{key:"mode",value:"average",uiType:Yj.SELECT,list:["average","lightness","luminosity"]}]},{type:"RemoveColor",status:!1,params:[{key:"color",value:"",uiType:Yj.COLOR},{key:"distance",value:0,uiType:Yj.NUMBER,min:0,max:1,step:.01}]}],zj=[{type:"Gamma",status:!1,params:[{key:"red",value:0,uiType:Yj.NUMBER,min:.01,max:2.2,step:.01},{key:"green",value:0,uiType:Yj.NUMBER,min:.01,max:2.2,step:.01},{key:"blue",value:0,uiType:Yj.NUMBER,min:.01,max:2.2,step:.01}],handler:(e,t,A)=>({gamma:[e,t,A]})}],Wj={key:0,class:"mb-12px"},$j={class:"filter-box overflow-hidden"},Jj=["src","onClick"],qj={class:"flex justify-start flex-wrap"},Zj={key:0,class:"content"},eV={key:0},tV={key:1},AV={key:2},nV=on({__name:"Filters",setup(e){const{isOne:t}=IS(),A=sB(),n=Cn(),i={BlackWhite:!1,Brownie:!1,Vintage:!1,Kodachrome:!1,technicolor:!1,Polaroid:!1,Invert:!1,Sepia:!1},r=Vn({uiType:Yj,noParamsFilters:i,paramsFilters:[...Xj],combinationFilters:[...zj],type:""}),o=(e,t)=>{var n;const i=null==(n=A.canvas)?void 0:n.getActiveObjects()[0];if(r.noParamsFilters[e]=t,t){u(i,e)||c(i,e)}else h(i,e)},s=e=>{var t;const n=null==(t=A.canvas)?void 0:t.getActiveObjects()[0],i=[...r.paramsFilters,...r.combinationFilters].find((t=>t.type===e));i.status?i.handler?function(e){var t;const n=null==(t=A.canvas)?void 0:t.getActiveObjects()[0];h(n,e.type);const i=e.params.map((e=>e.value));c(n,e.type,e.handler(...i))}(i):i.params.forEach((t=>{!function(e,t,n){var i,r;const o=null==(i=A.canvas)?void 0:i.getActiveObjects()[0],s=u(o,e);if(s)s[t]=n;else{c(o,e)[t]=n}o.applyFilters(),null==(r=A.canvas)||r.renderAll()}(e,t.key,t.value)})):h(n,e)},a=()=>{var e,t;const o=null==(e=A.canvas)?void 0:e.getActiveObjects()[0];o&&(r.type=o.type,"image"===r.type&&(Object.keys(i).forEach((e=>{var t;r.noParamsFilters[e]=!!u(o,e),null==(t=null==n?void 0:n.proxy)||t.$forceUpdate()})),Xj.forEach((e=>{const t=r.paramsFilters.find((t=>t.type===e.type)),A=u(o,e.type);t.status=!!A,t.params.forEach((e=>{e.value=A?A[e.key]:e.value}))})),zj.forEach((e=>{const t=r.combinationFilters.find((t=>t.type===e.type)),A=u(o,e.type);t.status=!!A}))),null==(t=null==n?void 0:n.proxy)||t.$forceUpdate())};function l(e){return new URL(Object.assign({"../assets/filters/BlackWhite.png":Hj,"../assets/filters/Brownie.png":Pj,"../assets/filters/Invert.png":Rj,"../assets/filters/Kodachrome.png":Nj,"../assets/filters/Polaroid.png":jj,"../assets/filters/Sepia.png":Vj,"../assets/filters/Vintage.png":Kj,"../assets/filters/technicolor.png":Gj})[`../assets/filters/${e}.png`],import.meta.url).href}function c(e,t,n=null){var i;let r;const o=d(t),s=wv.fabric.Image.filters[o];return s&&(r=new s(n),r.options=n,e.filters.push(r)),e.applyFilters(),null==(i=A.canvas)||i.renderAll(),r}function u(e,t){let A=null;if(e){const n=d(t),{length:i}=e.filters;let r,o;for(o=0;o<i;o+=1)if(r=e.filters[o],r.type===n){A=r;break}}return A}function h(e,t){var n;const i=d(t);e.filters=e.filters.filter((e=>e.type!==i)),e.applyFilters(),null==(n=A.canvas)||n.renderAll()}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}return ln((()=>{_n((()=>{var e;null==(e=A.editor)||e.on("selectOne",a)}))})),ri((()=>{_n((()=>{var e;null==(e=A.editor)||e.off("selectOne",a)}))})),(e,A)=>{const n=eA,a=zd,c=Gf,u=ff,h=gf,d=Tp,f=Cg,g=Kf;return fn(t)&&"image"===fn(r).type?(cn(),un("div",Wj,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.imageSetting.filters.title")),1)])),_:1}),Kn(g,null,{default:mn((()=>[Kn(c,{name:"1"},{title:mn((()=>[Hn(yn(e.$t("editor.imageSetting.filters.simple")),1)])),default:mn((()=>[pn("div",$j,[(cn(!0),un(Ln,null,Zn(fn(r).noParamsFilters,((t,A)=>(cn(),un("div",{class:"filter-item",key:A},[Hn(yn(A)+" ",1),pn("img",{src:l(A),onClick:e=>o(A,!i[A])},null,8,Jj),Kn(a,{modelValue:fn(r).noParamsFilters[A],"onUpdate:modelValue":e=>fn(r).noParamsFilters[A]=e,onChange:e=>o(A,e)},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.filters."+A)),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])))),128))])])),_:1}),Kn(c,{name:"2",title:e.$t("editor.imageSetting.filters.complex")},{default:mn((()=>[pn("div",qj,[(cn(!0),un(Ln,null,Zn([...fn(r).paramsFilters,...fn(r).combinationFilters],(t=>(cn(),un("div",{class:"filter-item has-params",key:t.type},[Kn(a,{modelValue:t.status,"onUpdate:modelValue":e=>t.status=e,onChange:e=>s(t.type)},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.filters."+t.type)),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),t.status?(cn(),un("div",Zj,[(cn(!0),un(Ln,null,Zn(t.params,(A=>(cn(),un("div",{key:A},[A.uiType===fn(Yj).SELECT?(cn(),un("div",eV,[Kn(h,{modelValue:A.value,"onUpdate:modelValue":e=>A.value=e,onChange:e=>s(t.type)},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(A.list,(A=>(cn(),vn(u,{value:A,key:A},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.filters."+t.type+"List."+A)),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):Pn("",!0),A.uiType===fn(Yj).NUMBER?(cn(),un("div",tV,[Kn(d,{modelValue:A.value,"onUpdate:modelValue":e=>A.value=e,max:A.max,min:A.min,step:A.step,size:"small",onChange:e=>s(t.type)},null,8,["modelValue","onUpdate:modelValue","max","min","step","onChange"])])):Pn("",!0),A.uiType===fn(Yj).COLOR?(cn(),un("div",AV,[Kn(f,{modelValue:A.value,"onUpdate:modelValue":e=>A.value=e,"show-alpha":"",size:"small",onChange:e=>s(t.type)},null,8,["modelValue","onUpdate:modelValue","onChange"])])):Pn("",!0)])))),128))])):Pn("",!0)])))),128))])])),_:1},8,["title"])])),_:1})])):Pn("",!0)}}}),iV=ki(nV,[["__scopeId","data-v-a7fd6585"]]),rV={key:0,class:"box attr-item-box"},oV={class:"flex-view"},sV={class:"flex-item"},aV={class:"label"},lV={class:"flex-1"},cV={class:"flex-view"},uV={class:"flex-item"},hV={class:"content number-content"},dV={class:"flex-item",style:{"margin-left":"20px"}},fV={class:"content number-content"},gV={class:"flex-view"},pV={class:"flex-item"},vV={class:"label"},mV={class:"content"},BV={class:"flex-item"},yV={class:"label",style:{"margin-left":"10px"}},CV={class:"content"},wV={class:"flex-view"},bV={class:"flex-item"},xV={class:"label"},QV={class:"content"},EV={class:"flex-item"},IV={class:"label",style:{"margin-left":"10px"}},_V={class:"content"},SV={class:"flex-view"},FV={class:"flex-item"},kV={class:"label"},UV={class:"content"},OV={class:"flex-item"},DV={class:"label",style:{"margin-left":"10px"}},TV={class:"content"},MV={class:"flex-view"},LV={class:"flex-item"},HV={class:"label"},PV={class:"content"},RV={class:"flex-item"},NV={class:"label",style:{"margin-left":"10px"}},jV={class:"content"},VV=ki(on({__name:"AttributeQrCode",setup(e){const t=sB(),{isOne:A,isMatchType:n}=IS(["image"]),i=Cn(),r=sn(""),o=En((()=>"qrcode"===r.value)),s=Vn({data:"",width:300,margin:10,errorCorrectionLevel:"M",dotsColor:"#000000",dotsType:"rounded",cornersSquareColor:"#000000",cornersSquareType:"dot",cornersDotColor:"#000000",cornersDotType:"square",background:"#ffffff"}),a=e=>{var A;const i=null==(A=t.canvas)?void 0:A.getActiveObject();if((!e||!e.target||e.target===i)&&(r.value=(null==i?void 0:i.extensionType)||"",i&&n&&"qrcode"===(null==i?void 0:i.extensionType))){const e=i.get("extension");Object.keys(e).forEach((t=>{s[t]=e[t]}))}},l=()=>{var e;t.editor.setQrCode(kn(s)),null==(e=t.canvas)||e.renderAll()},c=()=>{var e;r.value="",null==(e=null==i?void 0:i.proxy)||e.$forceUpdate()},u=Vn({CornersType:[],DotsType:[],cornersDotType:[],errorCorrectionLevelType:[]});return ln((()=>{_n((()=>{var e,A,n,i;const r=null==(e=t.editor)?void 0:e.getQrCodeTypes();r&&Object.assign(u,r),null==(A=t.editor)||A.on("selectCancel",c),null==(n=t.editor)||n.on("selectOne",a),null==(i=t.canvas)||i.on("object:modified",a)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",c),null==(A=t.editor)||A.off("selectOne",a),null==(n=t.canvas)||n.off("object:modified",a)})),(e,t)=>{const i=eA,r=Ze,a=Cg,c=ip,h=np;return fn(A)&&fn(n)&&fn(o)?(cn(),un("div",rV,[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.qrCode.name")),1)])),_:1}),pn("div",null,[pn("div",oV,[pn("div",sV,[pn("span",aV,yn(e.$t("editor.qrCode.content")),1),pn("div",lV,[Kn(r,{modelValue:fn(s).data,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(s).data=e),onChange:l},null,8,["modelValue"])])])]),pn("div",cV,[pn("div",uV,[pn("div",hV,[Kn(fn(Dk),{modelValue:fn(s).width,"onUpdate:modelValue":t[1]||(t[1]=e=>fn(s).width=e),onOnChange:l,append:e.$t("editor.width"),min:1},null,8,["modelValue","append"])])]),pn("div",dV,[pn("div",fV,[Kn(fn(Dk),{modelValue:fn(s).margin,"onUpdate:modelValue":t[2]||(t[2]=e=>fn(s).margin=e),onOnChange:l,append:e.$t("editor.qrCode.space"),min:1},null,8,["modelValue","append"])])])]),pn("div",gV,[pn("div",pV,[pn("span",vV,yn(e.$t("editor.qrCode.splashes")),1),pn("div",mV,[Kn(a,{id:"dotsColor",modelValue:fn(s).dotsColor,"onUpdate:modelValue":t[3]||(t[3]=e=>fn(s).dotsColor=e),onChange:l,"show-alpha":""},null,8,["modelValue"])])]),pn("div",BV,[pn("span",yV,yn(e.$t("editor.type")),1),pn("div",CV,[Kn(h,{modelValue:fn(s).dotsType,"onUpdate:modelValue":t[4]||(t[4]=e=>fn(s).dotsType=e),onChange:l,style:{width:"90px"}},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(u).DotsType,(e=>(cn(),vn(c,{value:e,key:e},{default:mn((()=>[Hn(yn(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])]),pn("div",wV,[pn("div",bV,[pn("span",xV,yn(e.$t("editor.qrCode.outAngle")),1),pn("div",QV,[Kn(a,{id:"cornersSquareColor",modelValue:fn(s).cornersSquareColor,"onUpdate:modelValue":t[5]||(t[5]=e=>fn(s).cornersSquareColor=e),onChange:l,"show-alpha":""},null,8,["modelValue"])])]),pn("div",EV,[pn("span",IV,yn(e.$t("editor.type")),1),pn("div",_V,[Kn(h,{modelValue:fn(s).cornersSquareType,"onUpdate:modelValue":t[6]||(t[6]=e=>fn(s).cornersSquareType=e),onChange:l,style:{width:"90px"}},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(u).cornersDotType,(e=>(cn(),vn(c,{value:e,key:e},{default:mn((()=>[Hn(yn(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])]),pn("div",SV,[pn("div",FV,[pn("span",kV,yn(e.$t("editor.qrCode.inAngle")),1),pn("div",UV,[Kn(a,{id:"cornersDotColor",modelValue:fn(s).cornersDotColor,"onUpdate:modelValue":t[7]||(t[7]=e=>fn(s).cornersDotColor=e),onChange:l,"show-alpha":""},null,8,["modelValue"])])]),pn("div",OV,[pn("span",DV,yn(e.$t("editor.type")),1),pn("div",TV,[Kn(h,{modelValue:fn(s).cornersDotType,"onUpdate:modelValue":t[8]||(t[8]=e=>fn(s).cornersDotType=e),onChange:l,style:{width:"90px"}},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(u).cornersDotType,(e=>(cn(),vn(c,{value:e,key:e},{default:mn((()=>[Hn(yn(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])]),pn("div",MV,[pn("div",LV,[pn("span",HV,yn(e.$t("editor.qrCode.background")),1),pn("div",PV,[Kn(a,{id:"background",modelValue:fn(s).background,"onUpdate:modelValue":t[9]||(t[9]=e=>fn(s).background=e),onChange:l,"show-alpha":""},null,8,["modelValue"])])]),pn("div",RV,[pn("span",NV,yn(e.$t("editor.qrCode.fault")),1),pn("div",jV,[Kn(h,{modelValue:fn(s).errorCorrectionLevel,"onUpdate:modelValue":t[10]||(t[10]=e=>fn(s).errorCorrectionLevel=e),onChange:l,style:{width:"90px"}},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(u).errorCorrectionLevelType,(e=>(cn(),vn(c,{value:e,key:e},{default:mn((()=>[Hn(yn(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])])])])):Pn("",!0)}}}),[["__scopeId","data-v-cc8d9ca1"]]),KV={key:0,class:"attr-item-box"},GV={class:"flex-view"},YV={class:"flex-item"},XV={class:"label"},zV={class:"content"},WV={key:0,class:"flex-view"},$V={class:"flex-item"},JV={class:"label"},qV={class:"content"},ZV={class:"flex-view"},eK={class:"flex-item"},tK={class:"label"},AK={class:"content"},nK={key:0,class:"flex-item"},iK={class:"label"},rK={class:"content"},oK={key:1,class:"flex-view"},sK={class:"flex-item"},aK={class:"flex-view"},lK={span:12,class:"flex-item"},cK={class:"label"},uK={class:"content"},hK={key:0,span:12,class:"flex-item"},dK={class:"content f-center"},fK={class:"flex-view"},gK={class:"flex-item"},pK={class:"label"},vK={class:"content"},mK={class:"flex-item"},BK={class:"label mr-10px"},yK={class:"content"},CK=on({__name:"AttributeBarcode",setup(e){const t=sB(),{isOne:A,isMatchType:n}=IS(["image"]),i=Cn(),r=sn(""),o=En((()=>"barcode"===r.value)),s=Vn({value:"",format:"",text:"12121",textAlign:"left",textPosition:"bottom",fontSize:12,background:"",lineColor:"",displayValue:!1}),a=["left","center","right"],l=["left","center","right"],c=e=>{var A;const i=null==(A=t.canvas)?void 0:A.getActiveObject();e&&e.target&&e.target!==i||(r.value=(null==i?void 0:i.extensionType)||"",i&&n&&"barcode"===(null==i?void 0:i.extensionType)&&(s.value=i.get("extension").value,s.format=i.get("extension").format,s.text=i.get("extension").text,s.textAlign=i.get("extension").textAlign,s.textPosition=i.get("extension").textPosition,s.fontSize=i.get("extension").fontSize,s.background=i.get("extension").background,s.lineColor=i.get("extension").lineColor,s.displayValue=i.get("extension").displayValue))},u=()=>{var e;t.editor.setBarcode(kn(s)),null==(e=t.canvas)||e.renderAll()},h=()=>{var e;r.value="",null==(e=null==i?void 0:i.proxy)||e.$forceUpdate()},d=sn([]);return ln((()=>{_n((()=>{var e,A,n,i;c(),d.value=null==(e=t.editor)?void 0:e.getBarcodeTypes(),null==(A=t.editor)||A.on("selectCancel",h),null==(n=t.editor)||n.on("selectOne",c),null==(i=t.canvas)||i.on("object:modified",c)}))})),ri((()=>{var e,A,n;null==(e=t.editor)||e.off("selectCancel",h),null==(A=t.editor)||A.off("selectOne",c),null==(n=t.canvas)||n.off("object:modified",c)})),(e,t)=>{const i=eA,r=Ze,c=Gp,h=ip,f=np,g=zt,p=pf,v=gf,m=Cg;return fn(A)&&fn(n)&&fn(o)?(cn(),un("div",KV,[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.barCode.name")),1)])),_:1}),pn("div",null,[pn("div",GV,[pn("div",YV,[pn("span",XV,yn(e.$t("editor.barCode.content")),1),pn("div",zV,[Kn(r,{modelValue:fn(s).value,"onUpdate:modelValue":t[0]||(t[0]=e=>fn(s).value=e),onChange:u},null,8,["modelValue"])])])]),fn(s).displayValue?(cn(),un("div",WV,[pn("div",$V,[pn("span",JV,yn(e.$t("editor.barCode.text")),1),pn("div",qV,[Kn(r,{modelValue:fn(s).text,"onUpdate:modelValue":t[1]||(t[1]=e=>fn(s).text=e),onChange:u},null,8,["modelValue"])])])])):Pn("",!0),pn("div",ZV,[pn("div",eK,[pn("span",tK,yn(e.$t("editor.barCode.show")),1),pn("div",AK,[Kn(c,{modelValue:fn(s).displayValue,"onUpdate:modelValue":t[2]||(t[2]=e=>fn(s).displayValue=e),onChange:u},null,8,["modelValue"])])]),fn(s).displayValue?(cn(),un("div",nK,[pn("span",iK,yn(e.$t("editor.barCode.position")),1),pn("div",rK,[Kn(f,{modelValue:fn(s).textPosition,"onUpdate:modelValue":t[3]||(t[3]=e=>fn(s).textPosition=e),onChange:u},{default:mn((()=>[Kn(h,{value:"bottom"},{default:mn((()=>[Hn("bottom")])),_:1}),Kn(h,{value:"top"},{default:mn((()=>[Hn("top")])),_:1})])),_:1},8,["modelValue"])])])):Pn("",!0)]),fn(s).displayValue?(cn(),un("div",oK,[pn("div",sK,[Kn(v,{class:"button-group",modelValue:fn(s).textAlign,"onUpdate:modelValue":t[4]||(t[4]=e=>fn(s).textAlign=e),onChange:u,size:"small"},{default:mn((()=>[(cn(),un(Ln,null,Zn(a,((e,t)=>Kn(p,{label:e,value:e,key:e},{default:mn((()=>[Kn(g,{extClass:"text-20px",color:"#fff",icon:l[t]},null,8,["icon"])])),_:2},1032,["label","value"]))),64))])),_:1},8,["modelValue"])])])):Pn("",!0),pn("div",aK,[pn("div",lK,[pn("span",cK,yn(e.$t("editor.barCode.color")),1),pn("div",uK,[Kn(m,{modelValue:fn(s).lineColor,"onUpdate:modelValue":t[5]||(t[5]=e=>fn(s).lineColor=e),onChange:u,"show-alpha":""},null,8,["modelValue"])])]),fn(s).displayValue?(cn(),un("div",hK,[pn("div",dK,[Kn(fn(Dk),{modelValue:fn(s).fontSize,"onUpdate:modelValue":t[6]||(t[6]=e=>fn(s).fontSize=e),onOnChange:u,append:e.$t("editor.barCode.size"),min:1},null,8,["modelValue","append"])])])):Pn("",!0)]),pn("div",fK,[pn("div",gK,[pn("span",pK,yn(e.$t("editor.barCode.background")),1),pn("div",vK,[Kn(m,{modelValue:fn(s).background,"onUpdate:modelValue":t[7]||(t[7]=e=>fn(s).background=e),onChange:u,"show-alpha":""},null,8,["modelValue"])])]),pn("div",mK,[pn("span",BK,yn(e.$t("editor.type")),1),pn("div",yK,[Kn(f,{modelValue:fn(s).format,"onUpdate:modelValue":t[8]||(t[8]=e=>fn(s).format=e),onOnChange:u,style:{width:"90px"}},{default:mn((()=>[(cn(!0),un(Ln,null,Zn(fn(d),(e=>(cn(),vn(h,{value:e,key:e},{default:mn((()=>[Hn(yn(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])])])])):Pn("",!0)}}}),wK=ki(CK,[["__scopeId","data-v-c8b641ba"]]),bK={key:0,class:"attr-item-box mt-8px"},xK={class:"bg-item"},QK=ki(on({__name:"Flip",setup(e){const t=sB(),{isOne:A}=IS(),n=e=>{var A,n;const i=null==(A=t.canvas)?void 0:A.getActiveObject();i.set(`flip${e}`,!i[`flip${e}`]).setCoords(),null==(n=t.canvas)||n.requestRenderAll()};return(e,t)=>{const i=zt,r=et,o=At;return fn(A)?(cn(),un("div",bK,[pn("div",xK,[Kn(o,{content:e.$t("editor.flip.x")},{default:mn((()=>[Kn(r,{onClick:t[0]||(t[0]=e=>n("X")),link:""},{default:mn((()=>[Kn(i,{extClass:"text-20px",color:"#fff",icon:"flip-x"})])),_:1})])),_:1},8,["content"]),Kn(o,{content:e.$t("editor.flip.y")},{default:mn((()=>[Kn(r,{onClick:t[1]||(t[1]=e=>n("Y")),link:""},{default:mn((()=>[Kn(i,{extClass:"text-20px",color:"#fff",icon:"flip-y"})])),_:1})])),_:1},8,["content"])])])):Pn("",!0)}}}),[["__scopeId","data-v-fdf18912"]]),EK={key:0,class:"attr-item-box mt-8px"},IK={class:"bg-item",style:{"margin-bottom":"10px"}},_K={class:"bg-item"},SK=on({__name:"ClipImage",setup(e){const t=sB(),{isOne:A}=IS(),n=Cn(),{t:i}=wi.useI18n(),r=sn(""),o=[{label:i("editor.polygonClip"),value:"polygon"},{label:i("editor.rectClip"),value:"rect"},{label:i("editor.circleClip"),value:"circle"},{label:i("editor.triangleClip"),value:"triangle"},{label:i("editor.polygonClipInverted"),value:"polygon-inverted"},{label:i("editor.rectClipInverted"),value:"rect-inverted"},{label:i("editor.circleClipInverted"),value:"circle-inverted"},{label:i("editor.triangleClipInverted"),value:"triangle-inverted"}],s=e=>u(this,null,(function*(){t.editor.addClipPathToImage(e)})),a=()=>{t.editor.removeClip()},l=()=>{var e,A;const i=null==(e=t.canvas)?void 0:e.getActiveObjects()[0];i&&(r.value=i.type,null==(A=null==n?void 0:n.proxy)||A.$forceUpdate())};return ln((()=>{_n((()=>{var e;null==(e=t.editor)||e.on("selectOne",l)}))})),ri((()=>{var e;null==(e=t.editor)||e.off("selectOne",l)})),(e,t)=>{const n=et,i=Jt,l=qt,c=Zt;return fn(A)&&"image"===fn(r)?(cn(),un("div",EK,[pn("div",IK,[Kn(c,{style:{width:"270px"},onCommand:s},{dropdown:mn((()=>[Kn(l,null,{default:mn((()=>[(cn(),un(Ln,null,Zn(o,(e=>Kn(i,{key:e.value,command:e.value},{default:mn((()=>[Hn(yn(e.label),1)])),_:2},1032,["command"]))),64))])),_:1})])),default:mn((()=>[Kn(n,{text:""},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.crop.create")),1)])),_:1})])),_:1})]),pn("div",_K,[Kn(n,{onClick:a,text:""},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.crop.remove")),1)])),_:1})])])):Pn("",!0)}}}),FK=ki(SK,[["__scopeId","data-v-ce76095d"]]),kK={};kK.getData=e=>new Promise(((t,A)=>{let n={};(function(e){let t=null;return new Promise(((A,n)=>{if(e.src)if(/^data\:/i.test(e.src))t=function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var A=atob(e),n=A.length%2==0?A.length:A.length+1,i=new ArrayBuffer(n),r=new Uint16Array(i),o=0;o<n;o++)r[o]=A.charCodeAt(o);return i}(e.src),A(t);else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){t=e.target.result,A(t)},function(e,t){var A=new XMLHttpRequest;A.open("GET",e,!0),A.responseType="blob",A.onload=function(e){(200==this.status||0===this.status)&&t(this.response)},A.send()}(e.src,(function(e){i.readAsArrayBuffer(e)}))}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";t=r.response,A(t),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else n("img error")}))})(e).then((e=>{n.arrayBuffer=e;try{n.orientation=function(e){var t,A,n,i,r,o,s,a,l,c,u=new DataView(e),h=u.byteLength;if(255===u.getUint8(0)&&216===u.getUint8(1))for(l=2;l<h;){if(255===u.getUint8(l)&&225===u.getUint8(l+1)){s=l;break}l++}if(s&&(A=s+4,n=s+10,"Exif"===function(e,t,A){var n,i="";for(n=t,A+=t;n<A;n++)i+=String.fromCharCode(e.getUint8(n));return i}(u,A,4)&&(o=u.getUint16(n),((r=18761===o)||19789===o)&&42===u.getUint16(n+2,r)&&(i=u.getUint32(n+4,r),i>=8&&(a=n+i)))),a)for(h=u.getUint16(a,r),c=0;c<h;c++)if(l=a+12*c+2,274===u.getUint16(l,r)){l+=8,t=u.getUint16(l,r);break}return t}(e)}catch(A){n.orientation=-1}t(n)})).catch((e=>{A(e)}))}));const UK=(e,t)=>{const A=e.__vccOpts||e;for(const[n,i]of t)A[n]=i;return A},OK=on({data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0,imgIsQqualCrop:!1}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:()=>[1,1]},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:()=>10,validator:function(e){return Array.isArray(e)?Number(e[0])>=0&&Number(e[1])>=0:Number(e)>=0}},fillColor:{type:String,default:""}},computed:{cropInfo(){let e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){let t=1;this.high&&!this.full&&(t=window.devicePixelRatio),1!==this.enlarge&!this.full&&(t=Math.abs(Number(this.enlarge))),e.width=e.width*t,e.height=e.height*t,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE:()=>!!window.ActiveXObject||"ActiveXObject"in window,passive(){return this.isIE?null:{passive:!1}},isRotateRightOrLeft(){return[1,-1,3,-3].includes(this.rotate)}},watch:{img(){this.checkedImg()},imgs(e){""!==e&&this.reload()},cropW(){this.showPreview()},cropH(){this.showPreview()},cropOffsertX(){this.showPreview()},cropOffsertY(){this.showPreview()},scale(e,t){this.showPreview()},x(){this.showPreview()},y(){this.showPreview()},autoCrop(e){e&&this.goAutoCrop()},autoCropWidth(){this.autoCrop&&this.goAutoCrop()},autoCropHeight(){this.autoCrop&&this.goAutoCrop()},mode(){this.checkedImg()},rotate(){this.showPreview(),(this.autoCrop||this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion(e){var t=navigator.userAgent.split(" "),A="";let n=0;const i=new RegExp(e,"i");for(var r=0;r<t.length;r++)i.test(t[r])&&(A=t[r]);return n=A?A.split("/")[1].split("."):["0","0","0"],n},checkOrientationImage(e,t,A,n){if(this.getVersion("chrome")[0]>=81)t=-1;else if(this.getVersion("safari")[0]>=605){const e=this.getVersion("version");e[0]>13&&e[1]>1&&(t=-1)}else{const e=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(e){let A=e[1];A=A.split("_"),(A[0]>13||A[0]>=13&&A[1]>=4)&&(t=-1)}}let i=document.createElement("canvas"),r=i.getContext("2d");switch(r.save(),t){case 2:i.width=A,i.height=n,r.translate(A,0),r.scale(-1,1);break;case 3:i.width=A,i.height=n,r.translate(A/2,n/2),r.rotate(180*Math.PI/180),r.translate(-A/2,-n/2);break;case 4:i.width=A,i.height=n,r.translate(0,n),r.scale(1,-1);break;case 5:i.height=A,i.width=n,r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:i.width=n,i.height=A,r.translate(n/2,A/2),r.rotate(90*Math.PI/180),r.translate(-A/2,-n/2);break;case 7:i.height=A,i.width=n,r.rotate(.5*Math.PI),r.translate(A,-n),r.scale(-1,1);break;case 8:i.height=A,i.width=n,r.translate(n/2,A/2),r.rotate(-90*Math.PI/180),r.translate(-A/2,-n/2);break;default:i.width=A,i.height=n}r.drawImage(e,0,0,A,n),r.restore(),i.toBlob((e=>{let t=URL.createObjectURL(e);URL.revokeObjectURL(this.imgs),this.imgs=t}),"image/"+this.outputType,1)},checkedImg(){if(null===this.img||""===this.img)return this.imgs="",void this.clearCrop();this.loading=!0,this.scale=1,this.rotate=0,this.imgIsQqualCrop=!1,this.clearCrop();let e=new Image;if(e.onload=()=>{if(""===this.img)return this.$emit("img-load",new Error("图片不能为空")),!1;let t=e.width,A=e.height;kK.getData(e).then((n=>{this.orientation=n.orientation||1;let i=Number(this.maxImgSize);!this.orientation&&t<i&A<i?this.imgs=this.img:(t>i&&(A=A/t*i,t=i),A>i&&(t=t/A*i,A=i),this.checkOrientationImage(e,this.orientation,t,A))})).catch((e=>{this.$emit("img-load","error"),this.$emit("img-load-error",e)}))},e.onerror=e=>{this.$emit("img-load","error"),this.$emit("img-load-error",e)},"data"!==this.img.substr(0,4)&&(e.crossOrigin=""),this.isIE){var t=new XMLHttpRequest;t.onload=function(){var t=URL.createObjectURL(this.response);e.src=t},t.open("GET",this.img,!0),t.responseType="blob",t.send()}else e.src=this.img},startMove(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in e?e.clientX:e.touches[0].clientX)-this.x,this.moveY=("clientY"in e?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),2==e.touches.length&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale(e){e.preventDefault();let t=this.scale;var A=this.touches[0].clientX,n=this.touches[0].clientY,i=e.touches[0].clientX,r=e.touches[0].clientY,o=this.touches[1].clientX,s=this.touches[1].clientY,a=e.touches[1].clientX,l=e.touches[1].clientY,c=Math.sqrt(Math.pow(A-o,2)+Math.pow(n-s,2)),u=Math.sqrt(Math.pow(i-a,2)+Math.pow(r-l,2))-c,h=1,d=(h=(h=h/this.trueWidth>h/this.trueHeight?h/this.trueHeight:h/this.trueWidth)>.1?.1:h)*u;if(!this.touchNow){if(this.touchNow=!0,u>0?t+=Math.abs(d):u<0&&t>Math.abs(d)&&(t-=Math.abs(d)),this.touches=e.touches,setTimeout((()=>{this.touchNow=!1}),8),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t}},cancelTouchScale(e){window.removeEventListener("touchmove",this.touchScale)},moveImg(e){if(e.preventDefault(),e.touches&&2===e.touches.length)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;let t,A,n="clientX"in e?e.clientX:e.touches[0].clientX,i="clientY"in e?e.clientY:e.touches[0].clientY;t=n-this.moveX,A=i-this.moveY,this.$nextTick((()=>{if(this.centerBox){let e,n,i,r,o=this.getImgAxis(t,A,this.scale),s=this.getCropAxis(),a=this.trueHeight*this.scale,l=this.trueWidth*this.scale;switch(this.rotate){case 1:case-1:case 3:case-3:e=this.cropOffsertX-this.trueWidth*(1-this.scale)/2+(a-l)/2,n=this.cropOffsertY-this.trueHeight*(1-this.scale)/2+(l-a)/2,i=e-a+this.cropW,r=n-l+this.cropH;break;default:e=this.cropOffsertX-this.trueWidth*(1-this.scale)/2,n=this.cropOffsertY-this.trueHeight*(1-this.scale)/2,i=e-l+this.cropW,r=n-a+this.cropH}o.x1>=s.x1&&(t=e),o.y1>=s.y1&&(A=n),o.x2<=s.x2&&(t=i),o.y2<=s.y2&&(A=r)}this.x=t,this.y=A,this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}))},leaveImg(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize(e){e.preventDefault();let t=this.scale;var A=e.deltaY||e.wheelDelta;A=navigator.userAgent.indexOf("Firefox")>0?30*A:A,this.isIE&&(A=-A);var n=this.coe,i=(n=n/this.trueWidth>n/this.trueHeight?n/this.trueHeight:n/this.trueWidth)*A;i<0?t+=Math.abs(i):t>Math.abs(i)&&(t-=Math.abs(i));let r=i<0?"add":"reduce";if(r!==this.coeStatus&&(this.coeStatus=r,this.coe=.2),this.scaling||(this.scalingSet=setTimeout((()=>{this.scaling=!1,this.coe=this.coe+=.01}),50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},changeScale(e){let t=this.scale;e=e||1;var A=20;if((e*=A=A/this.trueWidth>A/this.trueHeight?A/this.trueHeight:A/this.trueWidth)>0?t+=Math.abs(e):t>Math.abs(e)&&(t-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},createCrop(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,A="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick((()=>{var e=t-this.cropX,n=A-this.cropY;if(e>0?(this.cropW=e+this.cropChangeX>this.w?this.w-this.cropChangeX:e,this.cropOffsertX=this.cropChangeX):(this.cropW=this.w-this.cropChangeX+Math.abs(e)>this.w?this.cropChangeX:Math.abs(e),this.cropOffsertX=this.cropChangeX+e>0?this.cropChangeX+e:0),this.fixed){var i=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];i+this.cropOffsertY>this.h?(this.cropH=this.h-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],this.cropOffsertX=e>0?this.cropChangeX:this.cropChangeX-this.cropW):this.cropH=i,this.cropOffsertY=this.cropOffsertY}else n>0?(this.cropH=n+this.cropChangeY>this.h?this.h-this.cropChangeY:n,this.cropOffsertY=this.cropChangeY):(this.cropH=this.h-this.cropChangeY+Math.abs(n)>this.h?this.cropChangeY:Math.abs(n),this.cropOffsertY=this.cropChangeY+n>0?this.cropChangeY+n:0)}))},changeCropSize(e,t,A,n,i){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=t,this.canChangeY=A,this.changeCropTypeX=n,this.changeCropTypeY=i,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,A="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;let n=this.w,i=this.h,r=0,o=0;if(this.centerBox){let e=this.getImgAxis(),t=e.x2,A=e.y2;r=e.x1>0?e.x1:0,o=e.y1>0?e.y1:0,n>t&&(n=t),i>A&&(i=A)}const[s,a]=this.checkCropLimitSize();this.$nextTick((()=>{var e=t-this.cropX,l=A-this.cropY;if(this.canChangeX&&(1===this.changeCropTypeX?this.cropOldW-e<s?(this.cropW=s,this.cropOffsertX=this.cropOldW+this.cropChangeX-r-s):this.cropOldW-e>0?(this.cropW=n-this.cropChangeX-e<=n-r?this.cropOldW-e:this.cropOldW+this.cropChangeX-r,this.cropOffsertX=n-this.cropChangeX-e<=n-r?this.cropChangeX+e:r):(this.cropW=Math.abs(e)+this.cropChangeX<=n?Math.abs(e)-this.cropOldW:n-this.cropOldW-this.cropChangeX,this.cropOffsertX=this.cropChangeX+this.cropOldW):2===this.changeCropTypeX&&(this.cropOldW+e<s?this.cropW=s:this.cropOldW+e>0?(this.cropW=this.cropOldW+e+this.cropOffsertX<=n?this.cropOldW+e:n-this.cropOffsertX,this.cropOffsertX=this.cropChangeX):(this.cropW=n-this.cropChangeX+Math.abs(e+this.cropOldW)<=n-r?Math.abs(e+this.cropOldW):this.cropChangeX-r,this.cropOffsertX=n-this.cropChangeX+Math.abs(e+this.cropOldW)<=n-r?this.cropChangeX-Math.abs(e+this.cropOldW):r))),this.canChangeY&&(1===this.changeCropTypeY?this.cropOldH-l<a?(this.cropH=a,this.cropOffsertY=this.cropOldH+this.cropChangeY-o-a):this.cropOldH-l>0?(this.cropH=i-this.cropChangeY-l<=i-o?this.cropOldH-l:this.cropOldH+this.cropChangeY-o,this.cropOffsertY=i-this.cropChangeY-l<=i-o?this.cropChangeY+l:o):(this.cropH=Math.abs(l)+this.cropChangeY<=i?Math.abs(l)-this.cropOldH:i-this.cropOldH-this.cropChangeY,this.cropOffsertY=this.cropChangeY+this.cropOldH):2===this.changeCropTypeY&&(this.cropOldH+l<a?this.cropH=a:this.cropOldH+l>0?(this.cropH=this.cropOldH+l+this.cropOffsertY<=i?this.cropOldH+l:i-this.cropOffsertY,this.cropOffsertY=this.cropChangeY):(this.cropH=i-this.cropChangeY+Math.abs(l+this.cropOldH)<=i-o?Math.abs(l+this.cropOldH):this.cropChangeY-o,this.cropOffsertY=i-this.cropChangeY+Math.abs(l+this.cropOldH)<=i-o?this.cropChangeY-Math.abs(l+this.cropOldH):o))),this.canChangeX&&this.fixed){var c=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];c<a?(this.cropH=a,this.cropW=this.fixedNumber[0]*a/this.fixedNumber[1],1===this.changeCropTypeX&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):c+this.cropOffsertY>i?(this.cropH=i-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],1===this.changeCropTypeX&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):this.cropH=c}if(this.canChangeY&&this.fixed){var u=this.cropH/this.fixedNumber[1]*this.fixedNumber[0];u<s?(this.cropW=s,this.cropH=this.fixedNumber[1]*s/this.fixedNumber[0],this.cropOffsertY=this.cropOldH+this.cropChangeY-this.cropH):u+this.cropOffsertX>n?(this.cropW=n-this.cropOffsertX,this.cropH=this.cropW/this.fixedNumber[0]*this.fixedNumber[1]):this.cropW=u}}))},checkCropLimitSize(){let{cropW:e,cropH:t,limitMinSize:A}=this,n=new Array;return n=Array.isArray(A)?A:[A,A],e=parseFloat(n[0]),t=parseFloat(n[1]),[e,t]},changeCropEnd(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},calculateSize(e,t,A,n,i,r){const o=e/t;let s=i,a=r;return s<A&&(s=A,a=Math.ceil(s/o)),a<n&&(a=n,s=Math.ceil(a*o),s<A&&(s=A,a=Math.ceil(s/o))),s<i&&(s=i,a=Math.ceil(s/o)),a<r&&(a=r,s=Math.ceil(a*o)),{width:s,height:a}},endCrop(){0===this.cropW&&0===this.cropH&&(this.cropping=!1);let[e,t]=this.checkCropLimitSize();const{width:A,height:n}=this.fixed?this.calculateSize(this.fixedNumber[0],this.fixedNumber[1],e,t,this.cropW,this.cropH):{width:e,height:t};A>this.cropW&&(this.cropW=A,this.cropOffsertX+A>this.w&&(this.cropOffsertX=this.w-A)),n>this.cropH&&(this.cropH=n,this.cropOffsertY+n>this.h&&(this.cropOffsertY=this.h-n)),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop(){this.crop=!0},stopCrop(){this.crop=!1},clearCrop(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&2===e.touches.length)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);let t,A,n="clientX"in e?e.clientX:e.touches[0].clientX,i="clientY"in e?e.clientY:e.touches[0].clientY;t=n-this.cropOffsertX,A=i-this.cropOffsertY,this.cropX=t,this.cropY=A,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop(e,t){let A=0,n=0;e&&(e.preventDefault(),A="clientX"in e?e.clientX:e.touches[0].clientX,n="clientY"in e?e.clientY:e.touches[0].clientY),this.$nextTick((()=>{let e,i,r=A-this.cropX,o=n-this.cropY;if(t&&(r=this.cropOffsertX,o=this.cropOffsertY),e=r<=0?0:r+this.cropW>this.w?this.w-this.cropW:r,i=o<=0?0:o+this.cropH>this.h?this.h-this.cropH:o,this.centerBox){let t=this.getImgAxis();e<=t.x1&&(e=t.x1),e+this.cropW>t.x2&&(e=t.x2-this.cropW),i<=t.y1&&(i=t.y1),i+this.cropH>t.y2&&(i=t.y2-this.cropH)}this.cropOffsertX=e,this.cropOffsertY=i,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})}))},getImgAxis(e,t,A){e=e||this.x,t=t||this.y,A=A||this.scale;let n={x1:0,x2:0,y1:0,y2:0},i=this.trueWidth*A,r=this.trueHeight*A;switch(this.rotate){case 0:n.x1=e+this.trueWidth*(1-A)/2,n.x2=n.x1+this.trueWidth*A,n.y1=t+this.trueHeight*(1-A)/2,n.y2=n.y1+this.trueHeight*A;break;case 1:case-1:case 3:case-3:n.x1=e+this.trueWidth*(1-A)/2+(i-r)/2,n.x2=n.x1+this.trueHeight*A,n.y1=t+this.trueHeight*(1-A)/2+(r-i)/2,n.y2=n.y1+this.trueWidth*A;break;default:n.x1=e+this.trueWidth*(1-A)/2,n.x2=n.x1+this.trueWidth*A,n.y1=t+this.trueHeight*(1-A)/2,n.y2=n.y1+this.trueHeight*A}return n},getCropAxis(){let e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked(e){let t=document.createElement("canvas"),A=t.getContext("2d"),n=new Image,i=this.rotate,r=this.trueWidth,o=this.trueHeight,s=this.cropOffsertX,a=this.cropOffsertY;n.onload=()=>{if(0!==this.cropW){let e=1;this.high&!this.full&&(e=window.devicePixelRatio),1!==this.enlarge&!this.full&&(e=Math.abs(Number(this.enlarge)));let t=this.cropW*e,l=this.cropH*e,u=r*this.scale*e,h=o*this.scale*e,d=(this.x-s+this.trueWidth*(1-this.scale)/2)*e,f=(this.y-a+this.trueHeight*(1-this.scale)/2)*e;switch(c(t,l),A.save(),i){case 0:this.full?(c(t/this.scale,l/this.scale),A.drawImage(n,d/this.scale,f/this.scale,u/this.scale,h/this.scale)):A.drawImage(n,d,f,u,h);break;case 1:case-3:this.full?(c(t/this.scale,l/this.scale),d=d/this.scale+(u/this.scale-h/this.scale)/2,f=f/this.scale+(h/this.scale-u/this.scale)/2,A.rotate(90*i*Math.PI/180),A.drawImage(n,f,-d-h/this.scale,u/this.scale,h/this.scale)):(d+=(u-h)/2,f+=(h-u)/2,A.rotate(90*i*Math.PI/180),A.drawImage(n,f,-d-h,u,h));break;case 2:case-2:this.full?(c(t/this.scale,l/this.scale),A.rotate(90*i*Math.PI/180),d/=this.scale,f/=this.scale,A.drawImage(n,-d-u/this.scale,-f-h/this.scale,u/this.scale,h/this.scale)):(A.rotate(90*i*Math.PI/180),A.drawImage(n,-d-u,-f-h,u,h));break;case 3:case-1:this.full?(c(t/this.scale,l/this.scale),d=d/this.scale+(u/this.scale-h/this.scale)/2,f=f/this.scale+(h/this.scale-u/this.scale)/2,A.rotate(90*i*Math.PI/180),A.drawImage(n,-f-u/this.scale,d,u/this.scale,h/this.scale)):(d+=(u-h)/2,f+=(h-u)/2,A.rotate(90*i*Math.PI/180),A.drawImage(n,-f-u,d,u,h));break;default:this.full?(c(t/this.scale,l/this.scale),A.drawImage(n,d/this.scale,f/this.scale,u/this.scale,h/this.scale)):A.drawImage(n,d,f,u,h)}A.restore()}else{let e=r*this.scale,t=o*this.scale;switch(A.save(),i){case 0:c(e,t),A.drawImage(n,0,0,e,t);break;case 1:case-3:c(t,e),A.rotate(90*i*Math.PI/180),A.drawImage(n,0,-t,e,t);break;case 2:case-2:c(e,t),A.rotate(90*i*Math.PI/180),A.drawImage(n,-e,-t,e,t);break;case 3:case-1:c(t,e),A.rotate(90*i*Math.PI/180),A.drawImage(n,-e,0,e,t);break;default:c(e,t),A.drawImage(n,0,0,e,t)}A.restore()}e(t)},"data"!==this.img.substr(0,4)&&(n.crossOrigin="Anonymous"),n.src=this.imgs;const l=this.fillColor;function c(e,n){t.width=Math.round(e),t.height=Math.round(n),l&&(A.fillStyle=l,A.fillRect(0,0,t.width,t.height))}},getCropData(e){this.getCropChecked((t=>{e(t.toDataURL("image/"+this.outputType,this.outputSize))}))},getCropBlob(e){this.getCropChecked((t=>{t.toBlob((t=>e(t)),"image/"+this.outputType,this.outputSize)}))},showPreview(){if(!this.isCanShow)return!1;this.isCanShow=!1,setTimeout((()=>{this.isCanShow=!0}),16);let e=this.cropW,t=this.cropH,A=this.scale;var n={};n.div={width:`${e}px`,height:`${t}px`};let i=(this.x-this.cropOffsertX)/A,r=(this.y-this.cropOffsertY)/A;n.w=e,n.h=t,n.url=this.imgs,n.img={width:`${this.trueWidth}px`,height:`${this.trueHeight}px`,transform:`scale(${A})translate3d(${i}px, ${r}px, 0px)rotateZ(${90*this.rotate}deg)`},n.html=`\n      <div class="show-preview" style="width: ${n.w}px; height: ${n.h}px,; overflow: hidden">\n        <div style="width: ${e}px; height: ${t}px">\n          <img src=${n.url} style="width: ${this.trueWidth}px; height: ${this.trueHeight}px; transform:\n          scale(${A})translate3d(${i}px, ${r}px, 0px)rotateZ(${90*this.rotate}deg)">\n        </div>\n      </div>`,this.$emit("real-time",n)},reload(){let e=new Image;e.onload=()=>{this.w=parseFloat(window.getComputedStyle(this.$refs.cropper).width),this.h=parseFloat(window.getComputedStyle(this.$refs.cropper).height),this.trueWidth=e.width,this.trueHeight=e.height,this.original?this.scale=1:this.scale=this.checkedMode(),this.$nextTick((()=>{this.x=-(this.trueWidth-this.trueWidth*this.scale)/2+(this.w-this.trueWidth*this.scale)/2,this.y=-(this.trueHeight-this.trueHeight*this.scale)/2+(this.h-this.trueHeight*this.scale)/2,this.loading=!1,this.autoCrop&&this.goAutoCrop(),this.$emit("img-load","success"),setTimeout((()=>{this.showPreview()}),20)}))},e.onerror=()=>{this.$emit("img-load","error")},e.src=this.imgs},checkedMode(){let e=1,t=this.trueWidth,A=this.trueHeight;const n=this.mode.split(" ");switch(n[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":t=this.w,e=t/this.trueWidth,A*=e,A<this.h&&(A=this.h,e=A/this.trueHeight);break;default:try{let i=n[0];if(-1!==i.search("px")){i=i.replace("px",""),t=parseFloat(i);const r=t/this.trueWidth;let o=1,s=n[1];-1!==s.search("px")&&(s=s.replace("px",""),A=parseFloat(s),o=A/this.trueHeight),e=Math.min(r,o)}if(-1!==i.search("%")&&(i=i.replace("%",""),t=parseFloat(i)/100*this.w,e=t/this.trueWidth),2===n.length&&"auto"===i){let t=n[1];-1!==t.search("px")&&(t=t.replace("px",""),A=parseFloat(t),e=A/this.trueHeight),-1!==t.search("%")&&(t=t.replace("%",""),A=parseFloat(t)/100*this.h,e=A/this.trueHeight)}}catch(i){e=1}}return e},goAutoCrop(e,t){if(""===this.imgs||null===this.imgs)return;this.clearCrop(),this.cropping=!0;let A=this.w,n=this.h;if(this.centerBox){const e=Math.abs(this.rotate)%2>0;let t=(e?this.trueHeight:this.trueWidth)*this.scale,i=(e?this.trueWidth:this.trueHeight)*this.scale;A=t<A?t:A,n=i<n?i:n}var i=e||parseFloat(this.autoCropWidth),r=t||parseFloat(this.autoCropHeight);(0===i||0===r)&&(i=.8*A,r=.8*n),i=i>A?A:i,r=r>n?n:r,this.fixed&&(r=i/this.fixedNumber[0]*this.fixedNumber[1]),r>this.h&&(i=(r=this.h)/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(i,r)},changeCrop(e,t){if(this.centerBox){let A=this.getImgAxis();e>A.x2-A.x1&&(t=(e=A.x2-A.x1)/this.fixedNumber[0]*this.fixedNumber[1]),t>A.y2-A.y1&&(e=(t=A.y2-A.y1)/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=t,this.checkCropLimitSize(),this.$nextTick((()=>{this.cropOffsertX=(this.w-this.cropW)/2,this.cropOffsertY=(this.h-this.cropH)/2,this.centerBox&&this.moveCrop(null,!0)}))},refresh(){this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.imgIsQqualCrop=!1,this.clearCrop(),this.$nextTick((()=>{this.checkedImg()}))},rotateLeft(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear(){this.rotate=0},checkoutImgAxis(e,t,A){e=e||this.x,t=t||this.y,A=A||this.scale;let n=!0;if(this.centerBox){let i=this.getImgAxis(e,t,A),r=this.getCropAxis();i.x1>=r.x1&&(n=!1),i.x2<=r.x2&&(n=!1),i.y1>=r.y1&&(n=!1),i.y2<=r.y2&&(n=!1),n||this.changeImgScale(i,r,A)}return n},changeImgScale(e,t,A){let n=this.trueWidth,i=this.trueHeight,r=n*A,o=i*A;if(r>=this.cropW&&o>=this.cropH)this.scale=A;else{const e=this.cropW/n,t=this.cropH/i,A=this.cropH<=i*e?e:t;this.scale=A,r=n*A,o=i*A}this.imgIsQqualCrop||(e.x1>=t.x1&&(this.isRotateRightOrLeft?this.x=t.x1-(n-r)/2-(r-o)/2:this.x=t.x1-(n-r)/2),e.x2<=t.x2&&(this.isRotateRightOrLeft?this.x=t.x1-(n-r)/2-(r-o)/2-o+this.cropW:this.x=t.x2-(n-r)/2-r),e.y1>=t.y1&&(this.isRotateRightOrLeft?this.y=t.y1-(i-o)/2-(o-r)/2:this.y=t.y1-(i-o)/2),e.y2<=t.y2&&(this.isRotateRightOrLeft?this.y=t.y2-(i-o)/2-(o-r)/2-r:this.y=t.y2-(i-o)/2-o)),(r<this.cropW||o<this.cropH)&&(this.imgIsQqualCrop=!0)}},mounted(){this.support="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";let e=this;var t=navigator.userAgent;this.isIOS=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,A,n){for(var i=atob(this.toDataURL(A,n).split(",")[1]),r=i.length,o=new Uint8Array(r),s=0;s<r;s++)o[s]=i.charCodeAt(s);t(new Blob([o],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},unmounted(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}}),DK={key:0,class:"cropper-box"},TK=["src"],MK={class:"cropper-view-box"},LK=["src"],HK={key:1};const PK=UK(OK,[["render",function(e,t,A,n,i,r){return cn(),un("div",{class:"vue-cropper",ref:"cropper",onMouseover:t[28]||(t[28]=(...t)=>e.scaleImg&&e.scaleImg(...t)),onMouseout:t[29]||(t[29]=(...t)=>e.cancelScale&&e.cancelScale(...t))},[e.imgs?(cn(),un("div",DK,[On(pn("div",{class:"cropper-box-canvas",style:Rn({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+90*e.rotate+"deg)"})},[pn("img",{src:e.imgs,alt:"cropper-img",ref:"cropperImg"},null,8,TK)],4),[[Wn,!e.loading]])])):Pn("",!0),pn("div",{class:dn(["cropper-drag-box",{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping}]),onMousedown:t[0]||(t[0]=(...t)=>e.startMove&&e.startMove(...t)),onTouchstart:t[1]||(t[1]=(...t)=>e.startMove&&e.startMove(...t))},null,34),On(pn("div",{class:"cropper-crop-box",style:Rn({width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"})},[pn("span",MK,[pn("img",{style:Rn({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+90*e.rotate+"deg)"}),src:e.imgs,alt:"cropper-img"},null,12,LK)]),pn("span",{class:"cropper-face cropper-move",onMousedown:t[2]||(t[2]=(...t)=>e.cropMove&&e.cropMove(...t)),onTouchstart:t[3]||(t[3]=(...t)=>e.cropMove&&e.cropMove(...t))},null,32),e.info?(cn(),un("span",{key:0,class:"crop-info",style:Rn({top:e.cropInfo.top})},yn(e.cropInfo.width)+" × "+yn(e.cropInfo.height),5)):Pn("",!0),e.fixedBox?Pn("",!0):(cn(),un("span",HK,[pn("span",{class:"crop-line line-w",onMousedown:t[4]||(t[4]=t=>e.changeCropSize(t,!1,!0,0,1)),onTouchstart:t[5]||(t[5]=t=>e.changeCropSize(t,!1,!0,0,1))},null,32),pn("span",{class:"crop-line line-a",onMousedown:t[6]||(t[6]=t=>e.changeCropSize(t,!0,!1,1,0)),onTouchstart:t[7]||(t[7]=t=>e.changeCropSize(t,!0,!1,1,0))},null,32),pn("span",{class:"crop-line line-s",onMousedown:t[8]||(t[8]=t=>e.changeCropSize(t,!1,!0,0,2)),onTouchstart:t[9]||(t[9]=t=>e.changeCropSize(t,!1,!0,0,2))},null,32),pn("span",{class:"crop-line line-d",onMousedown:t[10]||(t[10]=t=>e.changeCropSize(t,!0,!1,2,0)),onTouchstart:t[11]||(t[11]=t=>e.changeCropSize(t,!0,!1,2,0))},null,32),pn("span",{class:"crop-point point1",onMousedown:t[12]||(t[12]=t=>e.changeCropSize(t,!0,!0,1,1)),onTouchstart:t[13]||(t[13]=t=>e.changeCropSize(t,!0,!0,1,1))},null,32),pn("span",{class:"crop-point point2",onMousedown:t[14]||(t[14]=t=>e.changeCropSize(t,!1,!0,0,1)),onTouchstart:t[15]||(t[15]=t=>e.changeCropSize(t,!1,!0,0,1))},null,32),pn("span",{class:"crop-point point3",onMousedown:t[16]||(t[16]=t=>e.changeCropSize(t,!0,!0,2,1)),onTouchstart:t[17]||(t[17]=t=>e.changeCropSize(t,!0,!0,2,1))},null,32),pn("span",{class:"crop-point point4",onMousedown:t[18]||(t[18]=t=>e.changeCropSize(t,!0,!1,1,0)),onTouchstart:t[19]||(t[19]=t=>e.changeCropSize(t,!0,!1,1,0))},null,32),pn("span",{class:"crop-point point5",onMousedown:t[20]||(t[20]=t=>e.changeCropSize(t,!0,!1,2,0)),onTouchstart:t[21]||(t[21]=t=>e.changeCropSize(t,!0,!1,2,0))},null,32),pn("span",{class:"crop-point point6",onMousedown:t[22]||(t[22]=t=>e.changeCropSize(t,!0,!0,1,2)),onTouchstart:t[23]||(t[23]=t=>e.changeCropSize(t,!0,!0,1,2))},null,32),pn("span",{class:"crop-point point7",onMousedown:t[24]||(t[24]=t=>e.changeCropSize(t,!1,!0,0,2)),onTouchstart:t[25]||(t[25]=t=>e.changeCropSize(t,!1,!0,0,2))},null,32),pn("span",{class:"crop-point point8",onMousedown:t[26]||(t[26]=t=>e.changeCropSize(t,!0,!0,2,2)),onTouchstart:t[27]||(t[27]=t=>e.changeCropSize(t,!0,!0,2,2))},null,32)]))],4),[[Wn,e.cropping]])],544)}],["__scopeId","data-v-a742df44"]]),RK=e=>(ji("data-v-eef55ae3"),e=e(),Vi(),e),NK={class:"main max-h-90v overflow-y-auto"},jK={class:"options"},VK=RK((()=>pn("label",null,"裁剪比例",-1))),KK={class:"flex mt-2 ratio-item-wrapper"},GK=[RK((()=>pn("div",{class:"ratio-item-content",style:{height:"70px",width:"70px"}}," 1:1 ",-1)))],YK=[RK((()=>pn("div",{class:"ratio-item-content",style:{height:"70px",width:"calc(70px * 2 / 3)"}}," 2:3 ",-1)))],XK=[RK((()=>pn("div",{class:"ratio-item-content",style:{height:"calc(70px * 2 / 3)",width:"70px"}}," 3:2 ",-1)))],zK=[RK((()=>pn("div",{class:"ratio-item-content",style:{height:"calc(70px * 3 / 4)",width:"70px"}}," 4:3 ",-1)))],WK=[RK((()=>pn("div",{class:"ratio-item-content",style:{width:"calc(70px * 3 / 4)",height:"70px"}}," 3:4 ",-1)))],$K=[RK((()=>pn("div",{class:"ratio-item-content",style:{height:"calc(70px * 9 / 16)",width:"70px"}}," 16:9 ",-1)))],JK=[RK((()=>pn("div",{class:"ratio-item-content",style:{width:"calc(70px * 9 / 16)",height:"70px"}}," 9:16 ",-1)))],qK=RK((()=>pn("label",null,"当前尺寸",-1))),ZK={class:"flex mt-2"},eG=RK((()=>pn("span",{class:"mx-2"},"X",-1))),tG={class:"cropper-wrapper"},AG={class:"preview-wrapper"},nG=["src"],iG=RK((()=>pn("div",{class:"title"},"预览",-1))),rG={class:"dialog-footer"},oG=on({__name:"CropModal",setup(e,{expose:t}){const A=sn(!1),n=sn(),i=sn(),r=sn({width:"100px",height:"100px",overflow:"hidden",margin:"0"}),o=sn(!1),s=sn(),c=sn(0),u=sn(0);function h(e,t){p.value&&("width"===e?u.value=t*g.value[1]/g.value[0]:c.value=t*g.value[0]/g.value[1]),_n((()=>{n.value.goAutoCrop(Number(c.value),Number(u.value))}))}function d(e){0===e.w&&0===e.h?o.value=!0:o.value=!1,c.value=e.w,u.value=e.h,r.value={width:e.w+"px",height:e.h+"px",overflow:"hidden",margin:"0",zoom:100/e.w},s.value=e}function f(){A.value=!1}const g=sn([1,1]),p=sn(!1);function v(e){e?(p.value=!0,g.value=e):p.value=!1,_n((()=>{n.value.goAutoCrop(9999,9999)}))}let m=null;function B(){n.value.getCropData((e=>{m&&m(e),A.value=!1}))}return t({open(e,t){i.value=e.img,m=t,A.value=!0}}),(e,t)=>{const m=$t,y=Ze,C=et,w=oA;return cn(),vn(w,{modelValue:fn(A),"onUpdate:modelValue":t[12]||(t[12]=e=>Dn(A)?A.value=e:null),onClose:f,title:"图片裁剪",width:"80%","destroy-on-close":"",style:{height:"80%"}},{footer:mn((()=>[pn("div",rG,[Kn(C,{onClick:f},{default:mn((()=>[Hn("取消")])),_:1}),Kn(C,{type:"primary",onClick:B},{default:mn((()=>[Hn(" 确认 ")])),_:1})])])),default:mn((()=>[pn("div",NK,[Kn(m,{size:"large",fix:"",show:fn(o)},{default:mn((()=>[Hn("图片加载中...")])),_:1},8,["show"]),pn("div",jK,[VK,pn("div",KK,[pn("div",{class:dn(["ratio-item",{active:!fn(p)}]),onClick:t[0]||(t[0]=e=>v())}," 自由 ",2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&1===fn(g)[0]&&1===fn(g)[1]}]),onClick:t[1]||(t[1]=e=>v([1,1]))},GK,2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&2===fn(g)[0]&&3===fn(g)[1]}]),onClick:t[2]||(t[2]=e=>v([2,3]))},YK,2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&3===fn(g)[0]&&2===fn(g)[1]}]),onClick:t[3]||(t[3]=e=>v([3,2]))},XK,2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&4===fn(g)[0]&&3===fn(g)[1]}]),onClick:t[4]||(t[4]=e=>v([4,3]))},zK,2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&3===fn(g)[0]&&4===fn(g)[1]}]),onClick:t[5]||(t[5]=e=>v([3,4]))},WK,2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&16===fn(g)[0]&&9===fn(g)[1]}]),onClick:t[6]||(t[6]=e=>v([16,9]))},$K,2),pn("div",{class:dn(["ratio-item",{active:fn(p)&&9===fn(g)[0]&&16===fn(g)[1]}]),onClick:t[7]||(t[7]=e=>v([9,16]))},JK,2)]),qK,pn("div",ZK,[Kn(y,{modelValue:fn(c),"onUpdate:modelValue":t[8]||(t[8]=e=>Dn(c)?c.value=e:null),type:"number",onChange:t[9]||(t[9]=e=>h("width",Number(e)))},null,8,["modelValue"]),eG,Kn(y,{modelValue:fn(u),"onUpdate:modelValue":t[10]||(t[10]=e=>Dn(u)?u.value=e:null),type:"number",onChange:t[11]||(t[11]=e=>h("height",Number(e)))},null,8,["modelValue"])])]),pn("div",tG,[Kn(fn(PK),{ref_key:"cropperRef",ref:n,img:fn(i),outputSize:1,outputType:"png",autoCrop:"",fixed:fn(p),fixedNumber:fn(g),centerBox:"",fixedBox:!1,full:"",onRealTime:d},null,8,["img","fixed","fixedNumber"])]),pn("div",AG,[pn("div",{style:Rn([{height:"100px",width:"100px",border:"1px solid rgba(59, 130, 246, 0.5)"},fn(r)])},[fn(s)?(cn(),un("div",{key:0,style:Rn(fn(s).div)},[pn("img",{src:fn(s).url,style:Rn(l(a({},fn(s).img),{maxWidth:fn(s).img.width}))},null,12,nG)],4)):Pn("",!0)],4),iG])])])),_:1},8,["modelValue"])}}}),sG=ki(oG,[["__scopeId","data-v-eef55ae3"]]),aG={key:0,class:"attr-item-box mt-8px"},lG={class:"bg-item"},cG={__name:"index",setup(e){const t=sB(),{insertImgFile:A}=Zm,n=Cn(),{isOne:i}=IS(),r=sn(""),o=sn(),s=()=>{const e=t.canvas.getActiveObjects()[0];e&&"image"===e.type&&o.value.open({img:e._element.src},(n=>u(this,null,(function*(){const i=yield A(n);e.setSrc(i.src,(()=>{t.canvas.renderAll()})),i.remove()}))))},a=()=>{var e;const A=t.canvas.getActiveObjects()[0];A&&(r.value=A.type,null==(e=null==n?void 0:n.proxy)||e.$forceUpdate())};return ln((()=>{_n((()=>{var e;null==(e=t.editor)||e.on("selectOne",a)}))})),ri((()=>{t.editor.off("selectOne",a)})),(e,t)=>{const A=et;return cn(),un(Ln,null,[fn(i)&&"image"===fn(r)?(cn(),un("div",aG,[pn("div",lG,[Kn(A,{class:"w-full",onClick:s,text:""},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.crop.title")),1)])),_:1})])])):Pn("",!0),Kn(sG,{ref_key:"cropperDialogRef",ref:o},null,512)],64)}}},uG={key:0,class:"attr-item-box mt-8px"},hG={class:"bg-item"},dG=ki(on({__name:"ReplaceImg",setup(e){const t=sB(),{isOne:A}=IS(),{getImgStr:n,selectFiles:i,insertImgFile:r}=Zm,o=Cn(),s=sn(""),a=()=>u(this,null,(function*(){var e;const A=null==(e=t.canvas)?void 0:e.getActiveObjects()[0];if(A&&"image"===A.type){const[e]=yield i({accept:"image/*",multiple:!1}),o=yield n(e),s=yield r(o),a=A.get("width"),l=A.get("height"),c=A.get("scaleX"),u=A.get("scaleY");A.setSrc(s.src,(()=>{var e;A.set("scaleX",a*c/s.width),A.set("scaleY",l*u/s.height),null==(e=t.canvas)||e.renderAll()})),s.remove()}})),l=()=>{var e,A;const n=null==(e=t.canvas)?void 0:e.getActiveObjects()[0];n&&(s.value=n.type,null==(A=null==o?void 0:o.proxy)||A.$forceUpdate())};return ln((()=>{_n((()=>{var e;null==(e=t.editor)||e.on("selectOne",l)}))})),ri((()=>{var e;null==(e=t.editor)||e.off("selectOne",l)})),(e,t)=>{const n=et;return fn(A)&&"image"===fn(s)?(cn(),un("div",uG,[pn("div",hG,[Kn(n,{onClick:a,text:""},{default:mn((()=>[Hn(yn(e.$t("editor.imageSetting.repleaceImg")),1)])),_:1})])])):Pn("",!0)}}}),[["__scopeId","data-v-ae2c8c7e"]]),fG=on({__name:"Clone",setup(e){const t=sB(),{isOne:A}=IS(),n=ae((function(){t.editor.clone()}),300);return(e,t)=>{const i=et,r=At;return fn(A)?(cn(),vn(r,{key:0,content:e.$t("editor.quickOperation.copy")},{default:mn((()=>[Kn(i,{onClick:fn(n),icon:fn(IA),link:""},null,8,["onClick","icon"])])),_:1},8,["content"])):Pn("",!0)}}}),gG=on({__name:"Delete",setup(e){const t=sB(),{isSelect:A}=IS(),n=ae((function(){t.editor.del()}),300);return(e,t)=>{const i=et,r=At;return fn(A)?(cn(),vn(r,{key:0,content:e.$t("editor.quickOperation.delete")},{default:mn((()=>[Kn(i,{onClick:fn(n),icon:fn(rA),link:""},null,8,["onClick","icon"])])),_:1},8,["content"])):Pn("",!0)}}}),pG=on({__name:"Edit",setup(e){const t=sB(),{isMatchType:A}=IS(["polygon"]),n=()=>{var e;const A=null==(e=t.editor.fabricCanvas)?void 0:e.getActiveObject();A&&"polygon"===A.type?t.editor.activeEdit():Yt.warning("请检查选择polygon")};return(e,t)=>{const i=zt,r=et,o=At;return fn(A)?(cn(),vn(o,{key:0,content:e.$t("editor.quickOperation.editPoly")},{default:mn((()=>[Kn(r,{onClick:n,link:""},{default:mn((()=>[Kn(i,{extClass:"text-20px",icon:"editor-brush"})])),_:1})])),_:1},8,["content"])):Pn("",!0)}}}),vG=ki(on({__name:"Hide",setup(e){const t=sB(),{isOne:A}=IS(),n=sn(!1),i=e=>{var A,i;(null==(A=t.canvas)?void 0:A.getActiveObject()).set("visible",!e),null==(i=t.canvas)||i.requestRenderAll(),n.value=e},r=()=>{var e;const A=null==(e=t.canvas)?void 0:e.getActiveObject();n.value=!A.visible};return ln((()=>{var e;null==(e=t.editor)||e.on("selectOne",r)})),ri((()=>{var e;null==(e=t.editor)||e.off("selectOne",r)})),(e,t)=>{const r=et;return fn(A)?(cn(),vn(r,{key:0,text:"",content:e.$t("editor.quickOperation.hide")},{default:mn((()=>[fn(n)?(cn(),vn(r,{key:0,onClick:t[0]||(t[0]=e=>i(!1)),icon:fn(_A),link:""},null,8,["icon"])):(cn(),vn(r,{key:1,onClick:t[1]||(t[1]=e=>i(!0)),icon:fn(SA),link:""},null,8,["icon"]))])),_:1},8,["content"])):Pn("",!0)}}}),[["__scopeId","data-v-d9f3c70f"]]),mG=ki(on({__name:"Lock",setup(e){const t=sB(),{isOne:A}=IS(),n=sn(!1),i=e=>{var A,n;e?null==(A=t.editor)||A.lock():null==(n=t.editor)||n.unLock()},r=e=>{n.value=!e[0].selectable};return ln((()=>{_n((()=>{var e;null==(e=t.editor)||e.on("selectOne",r)}))})),ri((()=>{var e;null==(e=t.editor)||e.off("selectOne",r)})),(e,t)=>{const r=et,o=At;return fn(A)?(cn(),vn(o,{key:0,content:fn(n)?e.$t("editor.quickOperation.unlock"):e.$t("editor.quickOperation.lock")},{default:mn((()=>[fn(n)?(cn(),vn(r,{key:0,onClick:t[0]||(t[0]=e=>i(!1)),icon:fn(hA),link:""},null,8,["icon"])):(cn(),vn(r,{key:1,onClick:t[1]||(t[1]=e=>i(!0)),icon:fn(dA),link:""},null,8,["icon"]))])),_:1},8,["content"])):Pn("",!0)}}}),[["__scopeId","data-v-2a5b624a"]]),BG={class:"bg-item"},yG=on({__name:"index",setup(e){const{mixinState:t}=IS();return(e,A)=>{const n=eA;return cn(),un(Ln,null,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.quickOperation.title")),1)])),_:1}),On(pn("div",BG,[Kn(fn(mG)),Kn(fn(gG)),Kn(fn(fG)),Kn(fn(vG)),Kn(fn(pG))],512),[[Wn,fn(t).mSelectMode]])],64)}}}),CG={key:0,class:"attr-item-box"},wG={class:"bg-item"},bG=on({__name:"CenterAlign",setup(e){const{isSelect:t}=IS(),A=sB(),n=e=>{A.editor.position(e)};return(e,A)=>{const i=eA,r=zt,o=et,s=At;return fn(t)?(cn(),un("div",CG,[Kn(i,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.group.centerAlign.name")),1)])),_:1}),pn("div",wG,[Kn(s,{content:e.$t("editor.attrSetting.group.centerAlign.centerX")},{default:mn((()=>[Kn(o,{onClick:A[0]||(A[0]=e=>n("centerH")),link:""},{default:mn((()=>[Kn(r,{extClass:"text-20px",color:"#fff",icon:"center-x"})])),_:1})])),_:1},8,["content"]),Kn(s,{content:e.$t("editor.attrSetting.group.centerAlign.center")},{default:mn((()=>[Kn(o,{onClick:A[1]||(A[1]=e=>n("center")),link:""},{default:mn((()=>[Kn(r,{extClass:"text-20px",color:"#fff",icon:"center-v"})])),_:1})])),_:1},8,["content"]),Kn(s,{content:e.$t("editor.attrSetting.group.centerAlign.centerY")},{default:mn((()=>[Kn(o,{onClick:A[2]||(A[2]=e=>n("centerV")),link:""},{default:mn((()=>[Kn(r,{extClass:"text-20px",color:"#fff",icon:"center-y"})])),_:1})])),_:1},8,["content"])])])):Pn("",!0)}}}),xG=ki(bG,[["__scopeId","data-v-08b969df"]]),QG={key:0,class:"attr-item-box"},EG={class:"bg-item flex flex-wrap"},IG=on({__name:"Align",setup(e){const{isMultiple:t}=IS(),A=sB(),n=()=>{A.editor.left()},i=()=>{A.editor.right()},r=()=>{A.editor.xcenter()},o=()=>{A.editor.ycenter()},s=()=>{A.editor.top()},a=()=>{A.editor.bottom()},l=()=>{A.editor.xequation()},c=()=>{A.editor.yequation()};return(e,A)=>{const u=eA,h=zt,d=et,f=At;return fn(t)?(cn(),un("div",QG,[Kn(u,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.attrSetting.group.align.name")),1)])),_:1}),pn("div",EG,[Kn(f,{content:e.$t("editor.attrSetting.group.align.left")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:n,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"left"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.centerX")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:r,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"centerx"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.right")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:i,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"right"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.top")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:s,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"top"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.centerY")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:o,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"centery"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.bottom")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:a,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"bottom"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.averageX")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:l,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"sx"})])),_:1})])),_:1},8,["content"]),Kn(f,{content:e.$t("editor.attrSetting.group.align.averageY")},{default:mn((()=>[Kn(d,{class:"w-36px",onClick:c,size:"small",link:""},{default:mn((()=>[Kn(h,{extClass:"text-20px",icon:"sy"})])),_:1})])),_:1},8,["content"])])])):Pn("",!0)}}}),_G={key:0,class:"attr-item-box"},SG={class:"bg-item"},FG=ki(on({__name:"Group",setup(e){const t=sB(),{isGroup:A,isMultiple:n}=IS(),i=()=>{t.editor.unGroup()},r=()=>{t.editor.group()};return(e,t)=>{const o=zt,s=et;return fn(n)||fn(A)?(cn(),un("div",_G,[pn("div",SG,[fn(n)?(cn(),vn(s,{key:0,disabled:!fn(n),onClick:r},{default:mn((()=>[Kn(o,{extClass:"text-20px",color:"#fff",icon:"group"}),Hn(" "+yn(e.$t("editor.attrSetting.group.group")),1)])),_:1},8,["disabled"])):Pn("",!0),fn(A)?(cn(),vn(s,{key:1,disabled:!fn(A),onClick:i},{default:mn((()=>[Kn(o,{extClass:"text-20px",color:"#fff",icon:"un-group"}),Hn(" "+yn(e.$t("editor.attrSetting.group.unGroup")),1)])),_:1},8,["disabled"])):Pn("",!0)])])):Pn("",!0)}}}),[["__scopeId","data-v-e7c1be4a"]]),kG={key:0},UG={class:"attr-item-box"},OG={class:"attr-item-box"},DG={class:"color-list"},TG=["onClick"],MG={class:"attr-item-box"},LG={class:"f-center"},HG=on({__name:"BgBar",setup(e){const{isSelect:t}=IS(),A=sB(),{getImgStr:n,selectFiles:i}=Zm,r=sn(["#5F2B63","#B23554","#F27E56","#FCE766","#86DCCD","#E7FDCB","#FFDC84","#F57677","#5FC2C7","#98DFE5","#C2EFF3","#DDFDFD","#9EE9D3","#2FC6C8","#2D7A9D","#48466d","#61c0bf","#bbded6","#fae3d9","#ffb6b9","#ffaaa5","#ffd3b6","#dcedc1","#a8e6cf"]),o=sn("rgba(255, 255, 255, 1)"),s=()=>{a(o.value)};function a(e){var t;e&&(null==(t=A.canvas)||t.setBackgroundColor(e,A.canvas.renderAll.bind(A.canvas)),o.value=e)}const l=()=>{var e,t;const n=null==(e=A.canvas)?void 0:e.getObjects().find((e=>"workspace"===e.id));o.value=null!=(t=null==n?void 0:n.fill)?t:""},c=ae((function(){i({accept:"image/*",multiple:!0}).then((e=>{Array.from(e).forEach((e=>{n(e).then((e=>{const t=new Image;t.crossOrigin="anonymous",t.src=e,t.onload=function(){const n=A.canvas,{width:i,height:r}=t,o=A.editor.getWorkspaceSize();n&&n.setBackgroundImage(e,null==n?void 0:n.renderAll.bind(n),{scaleX:o.width/i,scaleY:o.height/r})}}))}))}))}),250),u=ae((function(){Wt.confirm("您确定移除画布吗?","Warning",{title:"提示",type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"}).then((()=>{var e;null==(e=A.canvas)||e.setBackgroundImage(null,A.canvas.renderAll.bind(A.canvas))}))}),250);return ln((()=>{_n((()=>{var e;null==(e=A.editor)||e.on("loadJson",l)}))})),Ki((()=>{A.editor.off("loadJson",l)})),(e,A)=>{const n=eA,i=Cg,l=et;return fn(t)?Pn("",!0):(cn(),un("div",kG,[pn("div",UG,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.bgSetting.color")),1)])),_:1}),Kn(i,{modelValue:fn(o),"onUpdate:modelValue":A[0]||(A[0]=e=>Dn(o)?o.value=e:null),onChange:s,"show-alpha":""},null,8,["modelValue"])]),pn("div",OG,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.bgSetting.colorMacthing")),1)])),_:1}),pn("div",DG,[(cn(!0),un(Ln,null,Zn(fn(r),((e,t)=>(cn(),un("span",{key:e+t,style:Rn(`background:${e}`),onClick:t=>a(e)},null,12,TG)))),128))])]),pn("div",MG,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.bgSetting.bgImage")),1)])),_:1}),pn("div",LG,[Kn(l,{onClick:fn(u)},{default:mn((()=>[Hn(yn(e.$t("editor.bgSetting.removeBgImage")),1)])),_:1},8,["onClick"]),Kn(l,{onClick:fn(c)},{default:mn((()=>[Hn(yn(e.$t("editor.bgSetting.addBgImage")),1)])),_:1},8,["onClick"])])])]))}}}),PG=ki(HG,[["__scopeId","data-v-7ff45ef3"]]),RG={key:0,class:"attr-item-box"},NG=ki(on({__name:"SetSize",setup(e){const t=sB(),{isSelect:A}=IS(),n=900,i=1200,r=sn(null),o=sn(n),s=sn(i);ln((()=>{_n((()=>{var e,A,n;const{width:i,height:r}=(null==(e=t.editor)?void 0:e.getWorkspaceSize())||{width:0,height:0};i>0&&(o.value=i),r>0&&(s.value=r),null==(A=t.editor)||A.setSize(o.value,s.value),null==(n=t.editor)||n.on("sizeChange",((e,t)=>{o.value=e,s.value=t}))}))}));const a=()=>{var e;null==(e=r.value)||e.showSetSize(o.value,s.value)},l=(e,A)=>{var n;o.value=e,s.value=A,null==(n=t.editor)||n.setSize(o.value,s.value)};return(e,t)=>{const n=eA,i=Ze,c=xA,u=Ee,h=et,d=QA;return cn(),un(Ln,null,[fn(A)?Pn("",!0):(cn(),un("div",RG,[Kn(n,{"content-position":"left"},{default:mn((()=>[pn("h4",null,yn(e.$t("editor.bgSetting.size")),1)])),_:1}),Kn(d,{"label-width":50,inline:"",class:"flex"},{default:mn((()=>[Kn(c,{label:e.$t("editor.bgSetting.width"),prop:"name"},{default:mn((()=>[Kn(i,{style:{width:"60px"},disabled:"",modelValue:fn(o),"onUpdate:modelValue":t[0]||(t[0]=e=>Dn(o)?o.value=e:null),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),Kn(c,{label:e.$t("editor.bgSetting.height"),prop:"name"},{default:mn((()=>[Kn(i,{style:{width:"60px"},disabled:"",modelValue:fn(s),"onUpdate:modelValue":t[1]||(t[1]=e=>Dn(s)?s.value=e:null),readonly:""},null,8,["modelValue"])])),_:1},8,["label"]),Kn(c,{"label-width":0},{default:mn((()=>[Kn(h,{link:"",onClick:a},{default:mn((()=>[Kn(u,{size:"18"},{default:mn((()=>[Kn(fn(FA))])),_:1})])),_:1})])),_:1})])),_:1})])),Kn(pS,{title:e.$t("editor.setSizeTip"),ref_key:"modalSizeRef",ref:r,onSet:l},null,8,["title"])],64)}}}),[["__scopeId","data-v-3401a430"]]),jG={class:"right-bar flex-basis-304px box-border overflow-hidden p-10px"},VG={class:"attr-item-box"},KG=ki(on({__name:"index",setup(e){const t=sB(),{mixinState:A}=IS(),n=En((()=>t.editor));return(e,t)=>{const i=NG,r=PG,o=FG,s=IG,a=xG,l=yG,c=dG,u=cG,h=FK,d=QK,f=wK,g=VV,p=iV,v=Lj,m=Ej,B=FU,y=cU,C=iU,w=Zk,b=Wk,x=Kk,Q=Mk,E=yk,I=et;return cn(),un("section",jG,[On(pn("div",null,[Kn(i),Kn(r)],512),[[Wn,!fn(A).mSelectMode]]),On(pn("div",null,[Kn(o),Kn(s),Kn(a)],512),[[Wn,"multiple"===fn(A).mSelectMode]]),On(pn("div",VG,[Kn(o),Kn(l),Kn(a),Kn(c),Kn(u),Kn(h),Kn(d),Kn(f),Kn(g),Kn(p),Kn(v),Kn(m),Kn(B),Kn(y),Kn(C),Kn(w),Kn(b),Kn(x),Kn(Q),Kn(E),Kn(I,{onClick:t[0]||(t[0]=e=>fn(n).getFontJson()),size:"small"},{default:mn((()=>[Hn(yn(e.$t("editor.attrSetting.data.getFontStyle")),1)])),_:1})],512),[[Wn,"one"===fn(A).mSelectMode]])])}}}),[["__scopeId","data-v-fcdc8977"]]),GG=on({__name:"index",setup:e=>(e,t)=>(cn(),un(Ln,null,[Kn(ek),Kn(mk),Kn(KG)],64))}),YG={class:"editor-wrap"},XG=ki(on(l(a({},{name:"Home"}),{__name:"index",setup(e){const t=cB(),A=sB(),n=Oi,i=new NB;return ln((()=>{var e;const r=new wv.fabric.Canvas("canvas",{fireRightClick:!0,stopContextMenu:!0,controlsAboveOverlay:!0,preserveObjectStacking:!0});i.init(r),i.use(jB).use(wy).use(VB).use(YB).use(XB).use(zB).use(WB).use($B).use(JB).use(qB).use(ty).use(Ay).use(ny).use(iy).use(ry).use(oy).use(dy).use(by).use(xy).use(Qy).use(Qb).use(h_).use(B_).use(my,{repoSrc:n}).use(fy,{repoSrc:n}).use(yb).use(y_).use(C_).use(x_).use(Q_),A.setEditor(i),A.setCanvas(r),A.rulerEnable&&i.rulerEnable();const o=xi();null==(e=null==o?void 0:o.query)||e.id;const{createTemplate:s}=RS();t.addTemplate(s())})),Ki((()=>i.destory())),(e,t)=>{const A=kA,n=UA,i=OA;return cn(),un("div",YG,[Kn(i,null,{default:mn((()=>[Kn(A,null,{default:mn((()=>[Kn(R_)])),_:1}),Kn(n,null,{default:mn((()=>[Kn(GG)])),_:1})])),_:1})])}}})),[["__scopeId","data-v-b4e2d999"]]);export{XG as default};
